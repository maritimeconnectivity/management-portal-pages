(function(){var mr,oi,gt,us,zn,Gt,cr,ct,_n,jr,Pr,Bn,mi,_l,Ci,Mi,Kr,wo,Va,Yo,qr,ts,uo,Ur,ho,qe,an,ln,la,Lt,Yn,Jo,Ir,Cu,na,nn,Ce,mt,Pn,yo,Yi,rr,De,dr,Ue,yr,ir,gr,wr=[].slice,Mu={}.hasOwnProperty,ca=function(sn,Ht){function On(){this.constructor=sn}for(var wn in Ht)Mu.call(Ht,wn)&&(sn[wn]=Ht[wn]);return On.prototype=Ht.prototype,sn.prototype=new On,sn.__super__=Ht.prototype,sn},ku=[].indexOf||function(sn){for(var Ht=0,On=this.length;On>Ht;Ht++)if(Ht in this&&this[Ht]===sn)return Ht;return-1};for(qr={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},la=function(){var sn;return null!=(sn="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?sn:+new Date},Yn=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Yo=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==Yn&&(Yn=function(sn){return setTimeout(sn,50)},Yo=function(sn){return clearTimeout(sn)}),Ir=function(sn){var Ht,On;return Ht=la(),(On=function(){var wn;return(wn=la()-Ht)>=33?(Ht=la(),sn(wn,function(){return Yn(On)})):setTimeout(On,33-wn)})()},Jo=function(){var sn,Ht,On;return On=arguments[0],Ht=arguments[1],sn=3<=arguments.length?wr.call(arguments,2):[],"function"==typeof On[Ht]?On[Ht].apply(On,sn):On[Ht]},ts=function(){var sn,Ht,On,wn,Hn,un,rn;for(Ht=arguments[0],un=0,rn=(wn=2<=arguments.length?wr.call(arguments,1):[]).length;rn>un;un++)if(On=wn[un])for(sn in On)Mu.call(On,sn)&&(Hn=On[sn],null!=Ht[sn]&&"object"==typeof Ht[sn]&&null!=Hn&&"object"==typeof Hn?ts(Ht[sn],Hn):Ht[sn]=Hn);return Ht},Kr=function(sn){var Ht,On,Hn,un;for(On=Ht=0,Hn=0,un=sn.length;un>Hn;Hn++)On+=Math.abs(sn[Hn]),Ht++;return On/Ht},Ur=function(sn,Ht){var On,Hn;if(null==sn&&(sn="options"),null==Ht&&(Ht=!0),Hn=document.querySelector("[data-pace-"+sn+"]")){if(On=Hn.getAttribute("data-pace-"+sn),!Ht)return On;try{return JSON.parse(On)}catch(un){return"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",un):void 0}}},cr=function(){function sn(){}return sn.prototype.on=function(Ht,On,wn,Hn){var un;return null==Hn&&(Hn=!1),null==this.bindings&&(this.bindings={}),null==(un=this.bindings)[Ht]&&(un[Ht]=[]),this.bindings[Ht].push({handler:On,ctx:wn,once:Hn})},sn.prototype.once=function(Ht,On,wn){return this.on(Ht,On,wn,!0)},sn.prototype.off=function(Ht,On){var wn,Hn,un;if(null!=(null!=(Hn=this.bindings)?Hn[Ht]:void 0)){if(null==On)return delete this.bindings[Ht];for(wn=0,un=[];wn<this.bindings[Ht].length;)un.push(this.bindings[Ht][wn].handler===On?this.bindings[Ht].splice(wn,1):wn++);return un}},sn.prototype.trigger=function(){var Ht,On,wn,un,rn,zo,Sr,Ao;if(wn=arguments[0],Ht=2<=arguments.length?wr.call(arguments,1):[],null!=(zo=this.bindings)?zo[wn]:void 0){for(un=0,Ao=[];un<this.bindings[wn].length;)rn=(Sr=this.bindings[wn][un]).once,Sr.handler.apply(null!=(On=Sr.ctx)?On:this,Ht),Ao.push(rn?this.bindings[wn].splice(un,1):un++);return Ao}},sn}(),jr=window.Pace||{},window.Pace=jr,ts(jr,cr.prototype),Lt=jr.options=ts({},qr,window.paceOptions,Ur()),De=0,Ue=(ir=["ajax","document","eventLag","elements"]).length;Ue>De;De++)!0===Lt[Ce=ir[De]]&&(Lt[Ce]=qr[Ce]);_n=function(sn){function Ht(){return Ht.__super__.constructor.apply(this,arguments)}return ca(Ht,sn),Ht}(Error),oi=function(){function sn(){this.progress=0}return sn.prototype.getElement=function(){var Ht;if(null==this.el){if(!(Ht=document.querySelector(Lt.target)))throw new _n;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=Ht.firstChild?Ht.insertBefore(this.el,Ht.firstChild):Ht.appendChild(this.el)}return this.el},sn.prototype.finish=function(){var Ht;return(Ht=this.getElement()).className=Ht.className.replace("pace-active",""),Ht.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},sn.prototype.update=function(Ht){return this.progress=Ht,this.render()},sn.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(Ht){_n=Ht}return this.el=void 0},sn.prototype.render=function(){var Ht,wn,Hn,un,rn,zo;if(null==document.querySelector(Lt.target))return!1;for(Ht=this.getElement(),Hn="translate3d("+this.progress+"%, 0, 0)",un=0,rn=(zo=["webkitTransform","msTransform","transform"]).length;rn>un;un++)Ht.children[0].style[zo[un]]=Hn;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(Ht.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?wn="99":(wn=this.progress<10?"0":"",wn+=0|this.progress),Ht.children[0].setAttribute("data-progress",""+wn)),this.lastRenderedProgress=this.progress},sn.prototype.done=function(){return this.progress>=100},sn}(),ct=function(){function sn(){this.bindings={}}return sn.prototype.trigger=function(Ht,On){var Hn,un,rn,zo;if(null!=this.bindings[Ht]){for(zo=[],Hn=0,un=(rn=this.bindings[Ht]).length;un>Hn;Hn++)zo.push(rn[Hn].call(this,On));return zo}},sn.prototype.on=function(Ht,On){var wn;return null==(wn=this.bindings)[Ht]&&(wn[Ht]=[]),this.bindings[Ht].push(On)},sn}(),rr=window.XMLHttpRequest,Yi=window.XDomainRequest,yo=window.WebSocket,uo=function(sn,Ht){var wn,Hn;for(wn in Hn=[],Ht.prototype)try{Hn.push(null==sn[wn]&&"function"!=typeof Ht[wn]?"function"==typeof Object.defineProperty?Object.defineProperty(sn,wn,{get:function(){return Ht.prototype[wn]},configurable:!0,enumerable:!0}):sn[wn]=Ht.prototype[wn]:void 0)}catch(un){}return Hn},an=[],jr.ignore=function(){var sn,Ht,On;return Ht=arguments[0],sn=2<=arguments.length?wr.call(arguments,1):[],an.unshift("ignore"),On=Ht.apply(null,sn),an.shift(),On},jr.track=function(){var sn,Ht,On;return Ht=arguments[0],sn=2<=arguments.length?wr.call(arguments,1):[],an.unshift("track"),On=Ht.apply(null,sn),an.shift(),On},nn=function(sn){var Ht;return null==sn&&(sn="GET"),"track"===an[0]?"force":!(an.length||!Lt.ajax||!("socket"===sn&&Lt.ajax.trackWebSockets||(Ht=sn.toUpperCase(),ku.call(Lt.ajax.trackMethods,Ht)>=0)))},Pr=function(sn){function Ht(){var On,wn=this;Ht.__super__.constructor.apply(this,arguments),On=function(Hn){var un;return un=Hn.open,Hn.open=function(rn,zo,Sr){return nn(rn)&&wn.trigger("request",{type:rn,url:zo,request:Hn}),un.apply(Hn,arguments)}},window.XMLHttpRequest=function(Hn){var un;return un=new rr(Hn),On(un),un};try{uo(window.XMLHttpRequest,rr)}catch{}if(null!=Yi){window.XDomainRequest=function(){var Hn;return Hn=new Yi,On(Hn),Hn};try{uo(window.XDomainRequest,Yi)}catch{}}if(null!=yo&&Lt.ajax.trackWebSockets){window.WebSocket=function(Hn,un){var rn;return rn=null!=un?new yo(Hn,un):new yo(Hn),nn("socket")&&wn.trigger("request",{type:"socket",url:Hn,protocols:un,request:rn}),rn};try{uo(window.WebSocket,yo)}catch{}}}return ca(Ht,sn),Ht}(ct),dr=null,na=function(sn){var Ht,On,wn,Hn;for(On=0,wn=(Hn=Lt.ajax.ignoreURLs).length;wn>On;On++)if("string"==typeof(Ht=Hn[On])){if(-1!==sn.indexOf(Ht))return!0}else if(Ht.test(sn))return!0;return!1},(ho=function(){return null==dr&&(dr=new Pr),dr})().on("request",function(sn){var Ht,On,wn,Hn;return Hn=sn.type,wn=sn.request,na(sn.url)||jr.running||!1===Lt.restartOnRequestAfter&&"force"!==nn(Hn)?void 0:(On=arguments,"boolean"==typeof(Ht=Lt.restartOnRequestAfter||0)&&(Ht=0),setTimeout(function(){var zo,Sr,Ao,ki,ns;if("socket"===Hn?wn.readyState<2:0<(Ao=wn.readyState)&&4>Ao){for(jr.restart(),ns=[],zo=0,Sr=(ki=jr.sources).length;Sr>zo;zo++){if((Ce=ki[zo])instanceof mr){Ce.watch.apply(Ce,On);break}ns.push(void 0)}return ns}},Ht))}),mr=function(){function sn(){var Ht=this;this.elements=[],ho().on("request",function(){return Ht.watch.apply(Ht,arguments)})}return sn.prototype.watch=function(Ht){var On,wn,Hn;return Hn=Ht.type,On=Ht.request,na(Ht.url)?void 0:(wn="socket"===Hn?new _l(On):new Ci(On),this.elements.push(wn))},sn}(),Ci=function sn(Ht){var Hn,un,rn,zo,Sr=this;if(this.progress=0,null!=window.ProgressEvent)for(Ht.addEventListener("progress",function(Ao){return Sr.progress=Ao.lengthComputable?100*Ao.loaded/Ao.total:Sr.progress+(100-Sr.progress)/2},!1),Hn=0,un=(zo=["load","abort","timeout","error"]).length;un>Hn;Hn++)Ht.addEventListener(zo[Hn],function(){return Sr.progress=100},!1);else rn=Ht.onreadystatechange,Ht.onreadystatechange=function(){var Ao;return 0===(Ao=Ht.readyState)||4===Ao?Sr.progress=100:3===Ht.readyState&&(Sr.progress=50),"function"==typeof rn?rn.apply(null,arguments):void 0}},_l=function sn(Ht){var wn,Hn,un,rn=this;for(this.progress=0,wn=0,Hn=(un=["error","open"]).length;Hn>wn;wn++)Ht.addEventListener(un[wn],function(){return rn.progress=100},!1)},us=function sn(Ht){var wn,Hn,un;for(null==Ht&&(Ht={}),this.elements=[],null==Ht.selectors&&(Ht.selectors=[]),wn=0,Hn=(un=Ht.selectors).length;Hn>wn;wn++)this.elements.push(new zn(un[wn]))},zn=function(){function sn(Ht){this.selector=Ht,this.progress=0,this.check()}return sn.prototype.check=function(){var Ht=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return Ht.check()},Lt.elements.checkInterval)},sn.prototype.done=function(){return this.progress=100},sn}(),gt=function(){function sn(){var Ht,On,wn=this;this.progress=null!=(On=this.states[document.readyState])?On:100,Ht=document.onreadystatechange,document.onreadystatechange=function(){return null!=wn.states[document.readyState]&&(wn.progress=wn.states[document.readyState]),"function"==typeof Ht?Ht.apply(null,arguments):void 0}}return sn.prototype.states={loading:0,interactive:50,complete:100},sn}(),Gt=function sn(){var Ht,On,wn,Hn,un,rn=this;this.progress=0,Ht=0,un=[],Hn=0,wn=la(),On=setInterval(function(){var zo;return zo=la()-wn-50,wn=la(),un.push(zo),un.length>Lt.eventLag.sampleCount&&un.shift(),Ht=Kr(un),++Hn>=Lt.eventLag.minSamples&&Ht<Lt.eventLag.lagThreshold?(rn.progress=100,clearInterval(On)):rn.progress=3/(Ht+3)*100},50)},mi=function(){function sn(Ht){this.source=Ht,this.last=this.sinceLastUpdate=0,this.rate=Lt.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=Jo(this.source,"progress"))}return sn.prototype.tick=function(Ht,On){var wn;return null==On&&(On=Jo(this.source,"progress")),On>=100&&(this.done=!0),On===this.last?this.sinceLastUpdate+=Ht:(this.sinceLastUpdate&&(this.rate=(On-this.last)/this.sinceLastUpdate),this.catchup=(On-this.progress)/Lt.catchupTime,this.sinceLastUpdate=0,this.last=On),On>this.progress&&(this.progress+=this.catchup*Ht),wn=1-Math.pow(this.progress/100,Lt.easeFactor),this.progress+=wn*this.rate*Ht,this.progress=Math.min(this.lastProgress+Lt.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},sn}(),mt=null,Cu=null,wo=null,Pn=null,Mi=null,Va=null,jr.running=!1,qe=function(){return Lt.restartOnPushState?jr.restart():void 0},null!=window.history.pushState&&(yr=window.history.pushState,window.history.pushState=function(){return qe(),yr.apply(window.history,arguments)}),null!=window.history.replaceState&&(gr=window.history.replaceState,window.history.replaceState=function(){return qe(),gr.apply(window.history,arguments)}),Bn={ajax:mr,elements:us,document:gt,eventLag:Gt},(ln=function(){var sn,Ht,On,wn,Hn,un,rn,zo;for(jr.sources=mt=[],Ht=0,wn=(un=["ajax","elements","document","eventLag"]).length;wn>Ht;Ht++)!1!==Lt[sn=un[Ht]]&&mt.push(new Bn[sn](Lt[sn]));for(On=0,Hn=(zo=null!=(rn=Lt.extraSources)?rn:[]).length;Hn>On;On++)mt.push(new(Ce=zo[On])(Lt));return jr.bar=wo=new oi,Cu=[],Pn=new mi})(),jr.stop=function(){return jr.trigger("stop"),jr.running=!1,wo.destroy(),Va=!0,null!=Mi&&("function"==typeof Yo&&Yo(Mi),Mi=null),ln()},jr.restart=function(){return jr.trigger("restart"),jr.stop(),jr.start()},jr.go=function(){var sn;return jr.running=!0,wo.render(),sn=la(),Va=!1,Mi=Ir(function(Ht,On){var Hn,un,zo,Sr,Ao,ns,ni,Fu,rs,Ys,Ts,Or,$;for(Hn=Fu=0,un=!0,Sr=rs=0,Ts=mt.length;Ts>rs;Sr=++rs)for(Ce=mt[Sr],ni=null!=Cu[Sr]?Cu[Sr]:Cu[Sr]=[],Ao=Ys=0,Or=(zo=null!=($=Ce.elements)?$:[Ce]).length;Or>Ys;Ao=++Ys)un&=(ns=null!=ni[Ao]?ni[Ao]:ni[Ao]=new mi(zo[Ao])).done,ns.done||(Hn++,Fu+=ns.tick(Ht));return wo.update(Pn.tick(Ht,Fu/Hn)),wo.done()||un||Va?(wo.update(100),jr.trigger("done"),setTimeout(function(){return wo.finish(),jr.running=!1,jr.trigger("hide")},Math.max(Lt.ghostTime,Math.max(Lt.minTime-(la()-sn),0)))):On()})},jr.start=function(sn){ts(Lt,sn),jr.running=!0;try{wo.render()}catch(Ht){_n=Ht}return document.querySelector(".pace")?(jr.trigger("start"),jr.go()):setTimeout(jr.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return jr}):"object"==typeof exports?module.exports=jr:Lt.startOnPageLoad&&jr.start()}).call(this),function(){"use strict";function mr(a){if(null===a)return"null";if(void 0===a)return"undefined";var f=typeof a;return"object"==f&&(Array.prototype.isPrototypeOf(a)||a.constructor&&"Array"===a.constructor.name)?"array":"object"==f&&(String.prototype.isPrototypeOf(a)||a.constructor&&"String"===a.constructor.name)?"string":f}function oi(a){return Ci(function(f,g){if(f.length!==g.length)return!1;for(var x=f.length,C=0;C<x;C++)if(!a.eq(f[C],g[C]))return!1;return!0})}function gt(a){return Ci(function(f,g){var C,I,L=Object.keys(f),z=Object.keys(g);if(C=oi(Mi),I=function(K){return Array.prototype.slice.call(K).sort(void 0)},!Ci(function(K,ie){return C.eq(I(K),I(ie))}).eq(L,z))return!1;for(var j=L.length,G=0;G<j;G++){var te=L[G];if(!a.eq(f[te],g[te]))return!1}return!0})}function us(a){return function(f){return x=typeof(g=f),(null===g?"null":"object"==x&&(Array.prototype.isPrototypeOf(g)||g.constructor&&"Array"===g.constructor.name)?"array":"object"==x&&(String.prototype.isPrototypeOf(g)||g.constructor&&"String"===g.constructor.name)?"string":x)===a;var g,x}}function zn(a){return function(f){return typeof f===a}}function Gt(a){return function(f){return a===f}}function cr(a){return null==a}function ct(a){return!cr(a)}function _n(){}function jr(a,f){return function(){for(var g=[],x=0;x<arguments.length;x++)g[x]=arguments[x];return a(f.apply(null,g))}}function Pr(a,f){return function(g){return a(f(g))}}function Bn(a){return function(){return a}}function mi(a){return a}function _l(a,f){return a===f}var Ci=function(a){return{eq:a}},Mi=Ci(function(a,f){return a===f}),Kr=Ci(function(a,f){if(a===f)return!0;var g=mr(a);return g===mr(f)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(g)?a===f:"array"===g?oi(Kr).eq(a,f):"object"===g&&gt(Kr).eq(a,f))}),wo=us("string"),Va=us("object"),Yo=us("array"),qr=Gt(null),ts=zn("boolean"),uo=Gt(void 0),Ur=zn("function"),ho=zn("number");function qe(a){for(var f=[],g=1;g<arguments.length;g++)f[g-1]=arguments[g];return function(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];var I=f.concat(x);return a.apply(null,I)}}function an(a){return function(f){return!a(f)}}function ln(a){return a()}function la(a){a()}function Lt(){return Ir}var Yn=Bn(!1),Jo=Bn(!0),Ir={fold:function(a,f){return a()},isSome:Yn,isNone:Jo,getOr:mi,getOrThunk:Cu,getOrDie:function(a){throw new Error(a||"error: getOrDie called on none.")},getOrNull:Bn(null),getOrUndefined:Bn(void 0),or:mi,orThunk:Cu,map:Lt,each:_n,bind:Lt,exists:Yn,forall:Jo,filter:function(){return Ir},toArray:function(){return[]},toString:Bn("none()")};function Cu(a){return a()}function na(a,f){return su.call(a,f)}function nn(a,f){return-1<na(a,f)}function Ce(a,f){for(var g=0,x=a.length;g<x;g++)if(f(a[g],g))return!0;return!1}function mt(a,f){for(var g=a.length,x=new Array(g),C=0;C<g;C++)x[C]=f(a[C],C);return x}function Pn(a,f){for(var g=0,x=a.length;g<x;g++)f(a[g],g)}function yo(a,f){for(var g=a.length-1;0<=g;g--)f(a[g],g)}function Yi(a,f){for(var g=[],x=[],C=0,I=a.length;C<I;C++){var L=a[C];(f(L,C)?g:x).push(L)}return{pass:g,fail:x}}function rr(a,f){for(var g=[],x=0,C=a.length;x<C;x++){var I=a[x];f(I,x)&&g.push(I)}return g}function De(a,f,g){return yo(a,function(x,C){g=f(g,x,C)}),g}function dr(a,f,g){return Pn(a,function(x,C){g=f(g,x,C)}),g}function Ue(a,f,g){for(var x=0,C=a.length;x<C;x++){var I=a[x];if(f(I,x))return $.some(I);if(g(I,x))break}return $.none()}function yr(a,f){return Ue(a,f,Yn)}function ir(a,f){for(var g=0,x=a.length;g<x;g++)if(f(a[g],g))return $.some(g);return $.none()}function gc(a,f){return function(g){for(var x=[],C=0,I=g.length;C<I;++C){if(!Yo(g[C]))throw new Error("Arr.flatten item "+C+" was not an array, input: "+g);br.apply(x,g[C])}return x}(mt(a,f))}function gr(a,f){for(var g=0,x=a.length;g<x;++g)if(!0!==f(a[g],g))return!1;return!0}function wr(a){var f=El.call(a,0);return f.reverse(),f}function Mu(a,f){return rr(a,function(g){return!nn(f,g)})}function ca(a,f){var g=El.call(a,0);return g.sort(f),g}function ku(a,f){return 0<=f&&f<a.length?$.some(a[f]):$.none()}function sn(a){return ku(a,0)}function Ht(a){return ku(a,a.length-1)}function On(a,f){for(var g=0;g<a.length;g++){var x=f(a[g],g);if(x.isSome())return x}return $.none()}function wn(a,f){for(var g=Tr(a),x=0,C=g.length;x<C;x++){var I=g[x];f(a[I],I)}}function Hn(a,f){return ra(a,function(g,x){return{k:x,v:f(g,x)}})}function un(a){return function(f,g){a[g]=f}}function rn(a,f,g,x){return wn(a,function(C,I){(f(C,I)?g:x)(C,I)}),1}function zo(a,f){var g={};return rn(a,f,un(g),_n),g}function Sr(a,f){return po(a,f)?$.from(a[f]):$.none()}function Ao(a,f){return po(a,f)&&null!=a[f]}function ki(a,f,g){var x,C;if(!a)return!1;if(g=g||a,void 0!==a.length){for(x=0,C=a.length;x<C;x++)if(!1===f.call(g,a[x],x,a))return!1}else for(x in a)if(po(a,x)&&!1===f.call(g,a[x],x,a))return!1;return!0}function ns(a,f){var g=[];return ki(a,function(x,C){g.push(f(x,C,a))}),g}function ni(a,f){var g=[];return ki(a,function(x,C){f&&!f(x,C,a)||g.push(x)}),g}function Fu(a,f){if(a)for(var g=0,x=a.length;g<x;g++)if(a[g]===f)return g;return-1}function rs(a,f,g,x){for(var C=uo(g)?a[0]:g,I=0;I<a.length;I++)C=f.call(x,C,a[I],I);return C}function Ys(a,f,g){for(var x=0,C=a.length;x<C;x++)if(f.call(g,a[x],x,a))return x;return-1}function Ts(a){return a[a.length-1]}var Or=function(a){function f(){return C}function g(I){return I(a)}var x=Bn(a),C={fold:function(I,L){return L(a)},isSome:Jo,isNone:Yn,getOr:x,getOrThunk:x,getOrDie:x,getOrNull:x,getOrUndefined:x,or:f,orThunk:f,map:function(I){return Or(I(a))},each:function(I){I(a)},bind:g,exists:g,forall:g,filter:function(I){return I(a)?C:Ir},toArray:function(){return[a]},toString:function(){return"some("+a+")"}};return C},$={some:Or,none:Lt,from:function(a){return null==a?Ir:Or(a)}},El=Array.prototype.slice,su=Array.prototype.indexOf,br=Array.prototype.push,Fo=Ur(Array.from)?Array.from:function(a){return El.call(a)},Tr=Object.keys,lh=Object.hasOwnProperty,ra=function(a,f){var g={};return wn(a,function(x,C){var I=f(x,C);g[I.k]=I.v}),g},po=function(a,f){return lh.call(a,f)},Vu=Array.isArray,hr=function(){return(hr=Object.assign||function(a){for(var f,g=1,x=arguments.length;g<x;g++)for(var C in f=arguments[g])Object.prototype.hasOwnProperty.call(f,C)&&(a[C]=f[C]);return a}).apply(this,arguments)};function Ot(a,f,g){if(g||2===arguments.length)for(var x,C=0,I=f.length;C<I;C++)!x&&C in f||((x=x||Array.prototype.slice.call(f,0,C))[C]=f[C]);return a.concat(x||Array.prototype.slice.call(f))}function Dn(a){var f,g=!1;return function(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];return g||(g=!0,f=a.apply(null,x)),f}}function Ke(a,f){var g=String(f).toLowerCase();return yr(a,function(x){return x.search(g)})}function bt(a,f){return-1!==a.indexOf(f)}function it(a){return function(f){return f.replace(a,"")}}function qt(a){return 0<a.length}function Bt(a){return!qt(a)}function Zt(a){return function(f){return bt(f,a)}}function er(a){return window.matchMedia(a).matches}function Rn(a){return null==a?"":(""+a).replace(Rc,"")}function Fn(a,f){return f?!("array"!==f||!Vu(a))||typeof a===f:void 0!==a}function ur(a,f){for(var g=[],x=function(I){return g.push(I),f(I)},C=f(a);(C=C.bind(x)).isSome(););return g}function Ln(a,f){var g=a.dom;if(1!==g.nodeType)return!1;var x=g;if(void 0!==x.matches)return x.matches(f);if(void 0!==x.msMatchesSelector)return x.msMatchesSelector(f);if(void 0!==x.webkitMatchesSelector)return x.webkitMatchesSelector(f);if(void 0!==x.mozMatchesSelector)return x.mozMatchesSelector(f);throw new Error("Browser lacks native selectors")}function fn(a){return 1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType||0===a.childElementCount}function gn(a,f){return a.dom===f.dom}function Dt(a,f){return wa().browser.isIE()?(C=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(a.dom.compareDocumentPosition(f.dom)&C)):(I=a.dom)!==(L=f.dom)&&I.contains(L);var C,I,L}function ro(){return bo(0,0)}function so(a){function f(C){return function(){return g===C}}var g=a.current;return{current:g,version:a.version,isEdge:f("Edge"),isChrome:f("Chrome"),isIE:f("IE"),isOpera:f("Opera"),isFirefox:f(qs),isSafari:f("Safari")}}function eo(a){function f(C){return function(){return g===C}}var g=a.current;return{current:g,version:a.version,isWindows:f(Wa),isiOS:f("iOS"),isAndroid:f(Ds),isOSX:f("OSX"),isLinux:f("Linux"),isSolaris:f(Bs),isFreeBSD:f(ls),isChromeOS:f(Mm)}}function Xr(a){if(null==a)throw new Error("Node cannot be null or undefined");return{dom:a}}var bo=function(a,f){return{major:a,minor:f}},Ti={nu:bo,detect:function(a,f){var g,x,C=String(f).toLowerCase();return 0===a.length?ro():(x=function(L,z){for(var j=0;j<L.length;j++){var G=L[j];if(G.test(z))return G}}(a,g=C))?bo(I(1),I(2)):{major:0,minor:0};function I(L){return Number(g.replace(x,"$"+L))}},unknown:ro},$r=function(a,f){return""===(g=f)||a.length>=g.length&&a.substr(0,0+g.length)===g;var g},uu=it(/^\s+|\s+$/g),Dr=it(/^\s+/g),go=it(/\s+$/g),oa=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Ns={browsers:Bn([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(a){return bt(a,"edge/")&&bt(a,"chrome")&&bt(a,"safari")&&bt(a,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,oa],search:function(a){return bt(a,"chrome")&&!bt(a,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(a){return bt(a,"msie")||bt(a,"trident")}},{name:"Opera",versionRegexes:[oa,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Zt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Zt("firefox")},{name:"Safari",versionRegexes:[oa,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(a){return(bt(a,"safari")||bt(a,"mobile/"))&&bt(a,"applewebkit")}}]),oses:Bn([{name:"Windows",search:Zt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(a){return bt(a,"iphone")||bt(a,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Zt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Zt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Zt("linux"),versionRegexes:[]},{name:"Solaris",search:Zt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Zt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Zt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},qs="Firefox",Gr=function(){return so({current:void 0,version:Ti.unknown()})},Ha=so,Wa=(Bn("Edge"),Bn("Chrome"),Bn("IE"),Bn("Opera"),Bn(qs),Bn("Safari"),"Windows"),Ds="Android",Bs="Solaris",ls="FreeBSD",Mm="ChromeOS",xp=function(){return eo({current:void 0,version:Ti.unknown()})},to=eo,wa=(Bn(Wa),Bn("iOS"),Bn(Ds),Bn("Linux"),Bn("OSX"),Bn(Bs),Bn(ls),Bn(Mm),Dn(function(){return a=navigator.userAgent,f=$.from(navigator.userAgentData),g=er,me=Ns.browsers(),xe=Ns.oses(),{browser:be=f.bind(function(Le){return Je=me,On(Le.brands,function(pt){var Be=pt.brand.toLowerCase();return yr(Je,function(je){var et;return Be===(null===(et=je.brand)||void 0===et?void 0:et.toLowerCase())}).map(function(je){return{current:je.name,version:Ti.nu(parseInt(pt.version,10),0)}})});var Je}).orThunk(function(){return Ke(me,Le=a).map(function(Je){var pt=Ti.detect(Je.versionRegexes,Le);return{current:Je.name,version:pt}});var Le}).fold(Gr,Ha),os:Ae=Ke(xe,x=a).map(function(Le){var Je=Ti.detect(Le.versionRegexes,x);return{current:Le.name,version:Je}}).fold(xp,to),deviceType:(I=be,L=a,z=g,j=(C=Ae).isiOS()&&!0===/ipad/i.test(L),G=C.isiOS()&&!j,K=(te=C.isiOS()||C.isAndroid())||z("(pointer:coarse)"),ie=j||!G&&te&&z("(min-device-width:768px)"),le=G||te&&!ie,pe=I.isSafari()&&C.isiOS()&&!1===/safari/i.test(L),{isiPad:Bn(j),isiPhone:Bn(G),isTablet:Bn(ie),isPhone:Bn(le),isTouch:Bn(K),isAndroid:C.isAndroid,isiOS:C.isiOS,isWebView:Bn(pe),isDesktop:Bn(!le&&!ie&&!pe)})};var a,f,g,x,C,I,L,z,j,G,te,K,ie,le,pe,me,xe,be,Ae})),Tu=navigator.userAgent,As=wa(),Di=As.browser,Pc=As.os,Lo=As.deviceType,_p=/WebKit/.test(Tu)&&!Di.isEdge(),bg="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,Hu=-1!==Tu.indexOf("Windows Phone"),Fr={opera:Di.isOpera(),webkit:_p,ie:!(!Di.isIE()&&!Di.isEdge())&&Di.version.major,gecko:Di.isFirefox(),mac:Pc.isOSX()||Pc.isiOS(),iOS:Lo.isiPad()||Lo.isiPhone(),android:Pc.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:Di.isIE()?document.documentMode||7:10,fileApi:bg,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!Di.isIE(),desktop:Lo.isDesktop(),windowsPhone:Hu,browser:{current:Di.current,version:Di.version,isChrome:Di.isChrome,isEdge:Di.isEdge,isFirefox:Di.isFirefox,isIE:Di.isIE,isOpera:Di.isOpera,isSafari:Di.isSafari},os:{current:Pc.current,version:Pc.version,isAndroid:Pc.isAndroid,isChromeOS:Pc.isChromeOS,isFreeBSD:Pc.isFreeBSD,isiOS:Pc.isiOS,isLinux:Pc.isLinux,isOSX:Pc.isOSX,isSolaris:Pc.isSolaris,isWindows:Pc.isWindows},deviceType:{isDesktop:Lo.isDesktop,isiPad:Lo.isiPad,isiPhone:Lo.isiPhone,isPhone:Lo.isPhone,isTablet:Lo.isTablet,isTouch:Lo.isTouch,isWebView:Lo.isWebView}},Rc=/^\s*|\s*$/g,Pl=function(a,f,g,x){x=x||this,a&&ki(a=g?a[g]:a,function(C,I){return!1!==f.call(x,C,I,g)&&void Pl(C,f,g,x)})},Qt={trim:Rn,isArray:Vu,is:Fn,toArray:function(a){if(Vu(a))return a;for(var f=[],g=0,x=a.length;g<x;g++)f[g]=a[g];return f},makeMap:function(a,f,g){var x;for(f=f||",",g=g||{},x=(a="string"==typeof(a=a||[])?a.split(f):a).length;x--;)g[a[x]]={};return g},each:ki,map:ns,grep:ni,inArray:Fu,hasOwn:po,extend:function(a){for(var f=[],g=1;g<arguments.length;g++)f[g-1]=arguments[g];for(var x=0;x<f.length;x++){var C,I,L=f[x];for(C in L)!po(L,C)||void 0!==(I=L[C])&&(a[C]=I)}return a},create:function(a,f,g){var x,C,I,L=this,z=0,j=(a=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(a))[3].match(/(^|\.)(\w+)$/i)[2],G=L.createNS(a[3].replace(/\.\w+$/,""),g);if(!G[j]){if("static"===a[2])return G[j]=f,void(this.onCreate&&this.onCreate(a[2],a[3],G[j]));f[j]||(f[j]=function(){},z=1),G[j]=f[j],L.extend(G[j].prototype,f),a[5]&&(x=L.resolve(a[5]).prototype,C=a[5].match(/\.(\w+)$/i)[1],I=G[j],G[j]=z?function(){return x[C].apply(this,arguments)}:function(){return this.parent=x[C],I.apply(this,arguments)},G[j].prototype[j]=G[j],L.each(x,function(te,K){G[j].prototype[K]=x[K]}),L.each(f,function(te,K){x[K]?G[j].prototype[K]=function(){return this.parent=x[K],te.apply(this,arguments)}:K!==j&&(G[j].prototype[K]=te)})),L.each(f.static,function(te,K){G[j][K]=te})}},walk:Pl,createNS:function(a,f){var g,x;for(f=f||window,a=a.split("."),g=0;g<a.length;g++)f[x=a[g]]||(f[x]={}),f=f[x];return f},resolve:function(a,f){var g,x;for(f=f||window,g=0,x=(a=a.split(".")).length;g<x&&(f=f[a[g]]);g++);return f},explode:function(a,f){return!a||Fn(a,"array")?a:ns(a.split(f||","),Rn)},_addCacheSuffix:function(a){var f=Fr.cacheSuffix;return f&&(a+=(-1===a.indexOf("?")?"?":"&")+f),a}},It={fromHtml:function(a,f){var g=(f||document).createElement("div");if(g.innerHTML=a,!g.hasChildNodes()||1<g.childNodes.length)throw console.error("HTML does not have a single root node",a),new Error("HTML must have a single root node");return Xr(g.childNodes[0])},fromTag:function(a,f){return Xr((f||document).createElement(a))},fromText:function(a,f){return Xr((f||document).createTextNode(a))},fromDom:Xr,fromPoint:function(a,f,g){return $.from(a.dom.elementFromPoint(f,g)).map(Xr)}};function Ga(a){return a.dom.nodeName.toLowerCase()}function wp(a){return a.dom.nodeType}function lo(a){return function(f){return wp(f)===a}}function lu(a){return It.fromDom(a.dom.ownerDocument)}function Dd(a){return rf(a)?a:lu(a)}function cs(a){return It.fromDom(Dd(a).dom.defaultView)}function cu(a){return $.from(a.dom.parentNode).map(It.fromDom)}function Xs(a){return $.from(a.dom.previousSibling).map(It.fromDom)}function $o(a){return $.from(a.dom.nextSibling).map(It.fromDom)}function nd(a){return wr(ur(a,Xs))}function Ql(a){return ur(a,$o)}function Io(a,f){return $.from(a.dom.childNodes[f]).map(It.fromDom)}function xg(a){return Io(a,0)}function rl(a){return Io(a,a.dom.childNodes.length-1)}function mc(a){return a.dom.childNodes.length}function Uh(a){return yb(a)&&ct(a.dom.host)}function zs(a){return Uh(a)?a:function(){var f=Dd(a).dom.head;if(null==f)throw new Error("Head is not available yet");return It.fromDom(f)}()}function Rl(a){return It.fromDom(a.dom.host)}function Du(a,f){cu(a).each(function(g){g.dom.insertBefore(f.dom,a.dom)})}function Au(a,f){$o(a).fold(function(){cu(a).each(function(g){Fs(g,f)})},function(g){Du(g,f)})}function Ll(a,f){xg(a).fold(function(){Fs(a,f)},function(g){a.dom.insertBefore(f.dom,g.dom)})}function Lc(a,f){Pn(f,function(g){Fs(a,g)})}function Sp(a){a.dom.textContent="",Pn(Wu(a),function(f){Is(f)})}function Cp(a){var f,g=Wu(a);0<g.length&&(f=a,Pn(g,function(x){Du(f,x)})),Is(a)}function Ad(a,f){return void 0!==a?a:void 0!==f?f:0}function Id(a){var f=void 0!==a?a.dom:document;return Uu(f.body.scrollLeft||f.documentElement.scrollLeft,f.body.scrollTop||f.documentElement.scrollTop)}function _g(a,f,g){var x=(void 0!==g?g.dom:document).defaultView;x&&x.scrollTo(a,f)}function jh(a,f){wa().browser.isSafari()&&Ur(a.dom.scrollIntoViewIfNeeded)?a.dom.scrollIntoViewIfNeeded(!1):a.dom.scrollIntoView(f)}function vc(a,f,g,x){return{x:a,y:f,width:g,height:x,right:a+g,bottom:f+x}}function Ai(a){var f=void 0===a?window:a,x=Id(It.fromDom(f.document)),C=void 0===f?window:f;return(wa().browser.isFirefox()?$.none():$.from(C.visualViewport)).fold(function(){var I=f.document.documentElement;return vc(x.left,x.top,I.clientWidth,I.clientHeight)},function(I){return vc(Math.max(I.pageLeft,x.left),Math.max(I.pageTop,x.top),I.width,I.height)})}function sa(a){return function(f){return!!f&&f.nodeType===a}}function ch(a){return a&&!Object.getPrototypeOf(a)}function Nl(a){var f=a.map(function(g){return g.toLowerCase()});return function(g){if(g&&g.nodeName){var x=g.nodeName.toLowerCase();return nn(f,x)}return!1}}function Cf(a,f){var g=f.toLowerCase().split(" ");return function(x){if(co(x))for(var C=0;C<g.length;C++){var I=x.ownerDocument.defaultView.getComputedStyle(x,null);if((I?I.getPropertyValue(a):null)===g[C])return!0}return!1}}function Mf(a){return function(f){return co(f)&&f.hasAttribute(a)}}function ol(a){return co(a)&&a.hasAttribute("data-mce-bogus")}function nf(a){return co(a)&&"TABLE"===a.tagName}function fu(a){return function(f){return!(!co(f)||f.contentEditable!==a&&f.getAttribute("data-mce-contenteditable")!==a)}}function yc(a,f,g){return void 0===g&&(g=_l),a.exists(function(x){return g(x,f)})}function Ta(a,f,g){return a.isSome()&&f.isSome()?$.some(g(a.getOrDie(),f.getOrDie())):$.none()}function fs(a){return void 0!==a.style&&Ur(a.style.getPropertyValue)}function zi(a,f,g){if(!(wo(g)||ts(g)||ho(g)))throw console.error("Invalid call to Attribute.set. Key ",f,":: Value ",g,":: Element ",a),new Error("Attribute value was not simple");a.setAttribute(f,g+"")}function Bl(a,f,g){zi(a.dom,f,g)}function ec(a,f){var g=a.dom;wn(f,function(x,C){zi(g,C,x)})}function Zs(a,f){var g=a.dom.getAttribute(f);return null===g?void 0:g}function Da(a,f){return $.from(Zs(a,f))}function rd(a,f){a.dom.removeAttribute(f)}function Nc(a,f){var g=a.dom,x=window.getComputedStyle(g).getPropertyValue(f);return""!==x||Vo(a)?x:Tm(g,f)}function kf(a,f){var x=Tm(a.dom,f);return $.from(x).filter(function(C){return 0<C.length})}function Ja(a){var f={},g=a.dom;if(fs(g))for(var x=0;x<g.style.length;x++){var C=g.style.item(x);f[C]=g.style[C]}return f}function km(a){return yr(a,wl)}function Sa(a,f){return a.children&&nn(a.children,f)}"undefined"!=typeof window||Function("return this;")();var wl=lo(1),Qa=lo(3),rf=lo(9),yb=lo(11),Wu=function(a){return mt(a.dom.childNodes,It.fromDom)},Gu=Ur(Element.prototype.attachShadow)&&Ur(Node.prototype.getRootNode),Sl=Bn(Gu),Aa=Gu?function(a){return It.fromDom(a.dom.getRootNode())}:Dd,Fs=function(a,f){a.dom.appendChild(f.dom)},Is=function(a){var f=a.dom;null!==f.parentNode&&f.parentNode.removeChild(f)},Vo=function(a){var f=Qa(a)?a.dom.parentNode:a.dom;if(null==f||null===f.ownerDocument)return!1;var g=f.ownerDocument,x=It.fromDom(f),C=Aa(x);return(Uh(C)?$.some(C):$.none()).fold(function(){return g.body.contains(f)},Pr(Vo,Rl))},Mp=function(a,f){return{left:a,top:f,translate:function(g,x){return Mp(a+g,f+x)}}},Uu=Mp,Ia=function(a){var f,g=a.dom,x=g.ownerDocument.body;return x===g?Uu(x.offsetLeft,x.offsetTop):Vo(a)?(f=g.getBoundingClientRect(),Uu(f.left,f.top)):Uu(0,0)},co=sa(1),Bc=Nl(["textarea","input"]),Ar=sa(3),ju=sa(8),il=sa(9),Yh=sa(11),os=Nl(["br"]),Oo=Nl(["img"]),Yu=fu("true"),oo=fu("false"),vs=Nl(["td","th"]),Cl=Nl(["video","audio","object","embed"]),Tm=function(a,f){return fs(a)?a.style.getPropertyValue(f):""},Dm=wa().browser,qu={},zc={exports:qu};function du(a){setTimeout(function(){throw a},0)}function od(a){return Vs(function(){return new Od(a)})}function hu(a){if(!Yo(a))throw new Error("cases must be an array");if(0===a.length)throw new Error("there must be at least one case");var f=[],g={};return Pn(a,function(x,C){var I=Tr(x);if(1!==I.length)throw new Error("one and only one name per case");var L=I[0],z=x[L];if(void 0!==g[L])throw new Error("duplicate key detected:"+L);if("cata"===L)throw new Error("cannot have a case named cata (sorry)");if(!Yo(z))throw new Error("case arguments must be an array");f.push(L),g[L]=function(){for(var j=[],G=0;G<arguments.length;G++)j[G]=arguments[G];var te=j.length;if(te!==z.length)throw new Error("Wrong number of arguments to case "+L+". Expected "+z.length+" ("+z+"), got "+te);return{fold:function(){for(var K=[],ie=0;ie<arguments.length;ie++)K[ie]=arguments[ie];if(K.length!==a.length)throw new Error("Wrong number of arguments to fold. Expected "+a.length+", got "+K.length);return K[C].apply(null,j)},match:function(K){var ie=Tr(K);if(f.length!==ie.length)throw new Error("Wrong number of arguments to match. Expected: "+f.join(",")+"\nActual: "+ie.join(","));if(!gr(f,function(le){return nn(ie,le)}))throw new Error("Not all branches were specified when using match. Specified: "+ie.join(", ")+"\nRequired: "+f.join(", "));return K[L].apply(null,j)},log:function(K){console.log(K,{constructors:f,constructor:L,params:j})}}}}),g}!function(){var a=this,f=function(){var g,x,C,I={exports:{}};function L(){}function z(me){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof me)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],le(me,this)}function j(me,xe){for(;3===me._state;)me=me._value;0!==me._state?(me._handled=!0,z._immediateFn(function(){var be,Ae=1===me._state?xe.onFulfilled:xe.onRejected;if(null!==Ae){try{be=Ae(me._value)}catch(Le){return void te(xe.promise,Le)}G(xe.promise,be)}else(1===me._state?G:te)(xe.promise,me._value)})):me._deferreds.push(xe)}function G(me,xe){try{if(xe===me)throw new TypeError("A promise cannot be resolved with itself.");if(xe&&("object"==typeof xe||"function"==typeof xe)){var be=xe.then;if(xe instanceof z)return me._state=3,me._value=xe,void K(me);if("function"==typeof be)return void le((Ae=be,Le=xe,function(){Ae.apply(Le,arguments)}),me)}me._state=1,me._value=xe,K(me)}catch(Je){te(me,Je)}var Ae,Le}function te(me,xe){me._state=2,me._value=xe,K(me)}function K(me){2===me._state&&0===me._deferreds.length&&z._immediateFn(function(){me._handled||z._unhandledRejectionFn(me._value)});for(var xe=0,be=me._deferreds.length;xe<be;xe++)j(me,me._deferreds[xe]);me._deferreds=null}function ie(me,xe,be){this.onFulfilled="function"==typeof me?me:null,this.onRejected="function"==typeof xe?xe:null,this.promise=be}function le(me,xe){var be=!1;try{me(function(Ae){be||(be=!0,G(xe,Ae))},function(Ae){be||(be=!0,te(xe,Ae))})}catch(Ae){if(be)return;be=!0,te(xe,Ae)}}g=I,x="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},C=setTimeout,z.prototype.catch=function(me){return this.then(null,me)},z.prototype.then=function(me,xe){var be=new this.constructor(L);return j(this,new ie(me,xe,be)),be},z.all=function(me){var xe=Array.prototype.slice.call(me);return new z(function(be,Ae){if(0===xe.length)return be([]);for(var Le=xe.length,Je=0;Je<xe.length;Je++)!function pt(Be,je){try{if(je&&("object"==typeof je||"function"==typeof je)){var et=je.then;if("function"==typeof et)return et.call(je,function(At){pt(Be,At)},Ae),0}xe[Be]=je,0==--Le&&be(xe)}catch(At){Ae(At)}}(Je,xe[Je])})},z.resolve=function(me){return me&&"object"==typeof me&&me.constructor===z?me:new z(function(xe){xe(me)})},z.reject=function(me){return new z(function(xe,be){be(me)})},z.race=function(me){return new z(function(xe,be){for(var Ae=0,Le=me.length;Ae<Le;Ae++)me[Ae].then(xe,be)})},z._immediateFn="function"==typeof setImmediate?function(me){setImmediate(me)}:function(me){C(me,0)},z._unhandledRejectionFn=function(me){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",me)},z._setImmediateFn=function(me){z._immediateFn=me},z._setUnhandledRejectionFn=function(me){z._unhandledRejectionFn=me},g.exports?g.exports=z:x.Promise||(x.Promise=z);var pe=I.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||pe}};"object"==typeof qu&&void 0!==zc?zc.exports=f():(a="undefined"!=typeof globalThis?globalThis:a||self).EphoxContactWrapper=f()}();var Od=zc.exports.boltExport,qh=function(a){function f(L){C()?I(L):x.push(L)}var g=$.none(),x=[],C=function(){return g.isSome()},I=function(L){g.each(function(z){setTimeout(function(){L(z)},0)})};return a(function(L){C()||(g=$.some(L),Pn(x,I),x=[])}),{get:f,map:function(L){return qh(function(z){f(function(j){z(L(j))})})},isReady:C}},ga={nu:qh,pure:function(a){return qh(function(f){f(a)})}},Vs=function(a){function f(g){a().then(g,du)}return{map:function(g){return Vs(function(){return a().then(g)})},bind:function(g){return Vs(function(){return a().then(function(x){return g(x).toPromise()})})},anonBind:function(g){return Vs(function(){return a().then(function(){return g.toPromise()})})},toLazy:function(){return ga.nu(f)},toCached:function(){var g=null;return Vs(function(){return g=null===g?a():g})},toPromise:a,get:f}},pu=function(a){return{isValue:Jo,isError:Yn,getOr:Bn(a),getOrThunk:Bn(a),getOrDie:Bn(a),or:function(f){return pu(a)},orThunk:function(f){return pu(a)},fold:function(f,g){return g(a)},map:function(f){return pu(f(a))},mapError:function(f){return pu(a)},each:function(f){f(a)},bind:function(f){return f(a)},exists:function(f){return f(a)},forall:function(f){return f(a)},toOptional:function(){return $.some(a)}}},es=function(a){return{isValue:Yn,isError:Jo,getOr:mi,getOrThunk:function(f){return f()},getOrDie:function(){return f=String(a),function(){throw new Error(f)}();var f},or:mi,orThunk:function(f){return f()},fold:function(f,g){return f(a)},map:function(f){return es(a)},mapError:function(f){return es(f(a))},each:_n,bind:function(f){return es(a)},exists:Yn,forall:Jo,toOptional:$.none}},kp={value:pu,error:es,fromOption:function(a,f){return a.fold(function(){return es(f)},pu)}};function pn(a){return a.fold(mi,mi)}function tc(a,f,g,x,C){return a(g,x)?$.some(g):Ur(C)&&C(g)?$.none():f(g,x,C)}function Yr(a,f,g){for(var x=a.dom,C=Ur(g)?g:Yn;x.parentNode;){var I=It.fromDom(x=x.parentNode);if(f(I))return $.some(I);if(C(I))break}return $.none()}function fh(a,f,g){return tc(function(x,C){return C(x)},Yr,a,f,g)}function Xu(a,f,g){return Yr(a,function(x){return Ln(x,f)},g)}function Tf(a,f){return g=f,fn(x=void 0===a?document:a.dom)?$.none():$.from(x.querySelector(g)).map(It.fromDom);var g,x}function Df(a,f,g){return tc(Ln,Xu,a,f,g)}function al(a,f){return"number"!=typeof f&&(f=0),setTimeout(a,f)}function vi(a,f){return"number"!=typeof f&&(f=1),setInterval(a,f)}function id(a,f){function g(){for(var C=[],I=0;I<arguments.length;I++)C[I]=arguments[I];clearTimeout(x),x=al(function(){a.apply(this,C)},f)}var x;return g.stop=function(){clearTimeout(x)},g}function $y(a,f){function g(te,K,ie){var le,pe=Qt._addCacheSuffix(te),me=Sr(L,pe).getOrThunk(function(){return{id:"mce-u"+I++,passed:[],failed:[],count:0}});function xe(je,et){for(var At=je.length;At--;)je[At]();me.status=et,me.passed=[],me.failed=[],le&&(le.onload=null,le.onerror=null,le=null)}function be(){return xe(me.passed,2),0}function Ae(){return xe(me.failed,3)}(L[pe]=me).count++;var Le,Je,pt,Be=function(){var je=Be;!function(){for(var et=a.styleSheets,At=et.length;At--;){var Nt=et[At].ownerNode;if(Nt&&Nt.id===le.id)return be(),1}}()&&(Date.now()-Je<G?St.setTimeout(je):Ae())};K&&me.passed.push(K),ie&&me.failed.push(ie),1!==me.status&&(2!==me.status?3!==me.status?(me.status=1,ec(Le=It.fromTag("link",j.dom),{rel:"stylesheet",type:"text/css",id:me.id}),Je=Date.now(),f.contentCssCors&&Bl(Le,"crossOrigin","anonymous"),f.referrerPolicy&&Bl(Le,"referrerpolicy",f.referrerPolicy),(le=Le.dom).onload=Be,le.onerror=Ae,pt=Le,Fs(zs(z),pt),Bl(Le,"href",pe)):Ae():be())}function x(te){return od(function(K){g(te,jr(K,Bn(kp.value(te))),jr(K,Bn(kp.error(te))))})}function C(te){var K=Qt._addCacheSuffix(te);Sr(L,K).each(function(ie){var le;0==--ie.count&&(delete L[K],le=ie.id,Tf(zs(z),"#"+le).each(Is))})}void 0===f&&(f={});var I=0,L={},z=It.fromDom(a),j=Dd(z),G=f.maxLoadTime||5e3;return{load:g,loadAll:function(te,K,ie){var le,pe=mt(te,x);le=pe,od(function(me){var xe=[],be=0;0===le.length?me([]):Pn(le,function(Ae,Le){var Je;Ae.get((Je=Le,function(pt){xe[Je]=pt,++be>=le.length&&me(xe)}))})}).get(function(me){var xe=Yi(me,function(be){return be.isValue()});0<xe.fail.length?ie(xe.fail.map(pn)):K(xe.pass.map(pn))})},unload:C,unloadAll:function(te){Pn(te,function(K){C(K)})},_setReferrerPolicy:function(te){f.referrerPolicy=te}}}hu([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Qi,bc,Pi=window.Promise||Od,St={requestAnimationFrame:function(a,f){Qi?Qi.then(a):Qi=new Pi(function(g){!function(x,C){for(var I=window.requestAnimationFrame,L=["ms","moz","webkit"],z=0;z<L.length&&!I;z++)I=window[L[z]+"RequestAnimationFrame"];(I=I||function(j){window.setTimeout(j,0)})(x,C)}(g,f=f||document.body)}).then(a)},setTimeout:al,setInterval:vi,setEditorTimeout:function(a,f,g){return al(function(){a.removed||f()},g)},setEditorInterval:function(a,f,g){var x=vi(function(){a.removed?clearInterval(x):f()},g);return x},debounce:id,throttle:id,clearInterval:function(a){return clearInterval(a)},clearTimeout:function(a){return clearTimeout(a)}},Fc=(bc=new WeakMap,{forElement:function(a,f){var g=Aa(a).dom;return $.from(bc.get(g)).getOrThunk(function(){var x=$y(g,f);return bc.set(g,x),x})}}),Ks=(nc.prototype.current=function(){return this.node},nc.prototype.next=function(a){return this.node=this.findSibling(this.node,"firstChild","nextSibling",a),this.node},nc.prototype.prev=function(a){return this.node=this.findSibling(this.node,"lastChild","previousSibling",a),this.node},nc.prototype.prev2=function(a){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",a),this.node},nc.prototype.findSibling=function(a,f,g,x){var C,I;if(a){if(!x&&a[f])return a[f];if(a!==this.rootNode){if(C=a[g])return C;for(I=a.parentNode;I&&I!==this.rootNode;I=I.parentNode)if(C=I[g])return C}}},nc.prototype.findPreviousNode=function(a,f,g,x){var C,I,L;if(a&&(C=a[g],!this.rootNode||C!==this.rootNode)){if(C){if(!x)for(L=C[f];L;L=L[f])if(!L[f])return L;return C}return(I=a.parentNode)&&I!==this.rootNode?I:void 0}},nc);function nc(a,f){this.node=a,this.rootNode=f,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}function ys(a){var f;return function(g){return f=f||function(x,C){for(var I={},L=0,z=x.length;L<z;L++){var j=x[L];I[String(j)]=C(j,L)}return I}(a,Jo),po(f,Ga(g))}}function ds(a){return wl(a)&&!Qo(a)}function Zi(a){return wl(a)&&"br"===Ga(a)}function sl(a){return va(a)&&(a=a.parentNode),Vl(a)&&a.hasAttribute("data-mce-caret")}function Tp(a){return va(a)&&Fl(a.data)}function Nr(a){return sl(a)||Tp(a)}function bs(a){return a.firstChild!==a.lastChild||!os(a.firstChild)}function Dp(a){var f=a.container();return!!Ar(f)&&(f.data.charAt(a.offset())===ua||a.isAtStart()&&Tp(f.previousSibling))}function ad(a){var f=a.container();return!!Ar(f)&&(f.data.charAt(a.offset()-1)===ua||a.isAtEnd()&&Tp(f.nextSibling))}function y(a){return a&&a.hasAttribute("data-mce-caret")?(ol(g=(f=a.getElementsByTagName("br"))[f.length-1])&&g.parentNode.removeChild(g),a.removeAttribute("data-mce-caret"),a.removeAttribute("data-mce-bogus"),a.removeAttribute("style"),a.removeAttribute("_moz_abspos"),a):null;var f,g}function T(a){return sl(a.startContainer)}function E(a){return!Y1(a)&&(Jy(a)?!sd(a.parentNode):Br(a)||Ip(a)||Am(a)||Ed(a))}function B(a,f){return E(a)&&function(g,x){for(g=g.parentNode;g&&g!==x;g=g.parentNode){if(Ed(g))return!1;if(hh(g))return!0}return!0}(a,f)}function U(a){return xo.test(a)}function ne(a,f){return E(a)&&(L=f,!1===(Ar(I=a)&&U(I.data)&&(g=I,x=It.fromDom(L),!1===Xu(It.fromDom(g),"pre,code",qe(gn,x)).isSome())))||co(C=a)&&"A"===C.nodeName&&!C.hasAttribute("href")&&(C.hasAttribute("name")||C.hasAttribute("id"))||Op(a);var g,x,C,I,L}function ee(a,f){return function(g,x){var C=0;if(ne(g,g))return!1;var I=g.firstChild;if(!I)return!0;var L=new Ks(I,g);do{if(x){if(Pd(I)){I=L.next(!0);continue}if(Ep(I)){I=L.next();continue}}if(os(I))C++,I=L.next();else{if(ne(I,g))return!1;I=L.next()}}while(I);return C<=1}(a.dom,f=void 0===f||f)}function ae(a,f){return ct(a)&&(ne(a,f)||ds(It.fromDom(a)))}function fe(a){return"span"===a.nodeName.toLowerCase()&&"bookmark"===a.getAttribute("data-mce-type")}function Me(a,f){var g,x,C,I={};if(a){for(a=a.split(","),f=f||10,g=0;g<a.length;g+=2)x=String.fromCharCode(parseInt(a[g],f)),Ua[x]||(I[x]=C="&"+a[g+1]+";",I[C]=x);return I}}function ke(a,f){return a.replace(f?bb:Qy,function(g){return Ua[g]||g})}function Fe(a,f){return a.replace(f?bb:Qy,function(g){return 1<g.length?"&#"+(1024*(g.charCodeAt(0)-55296)+(g.charCodeAt(1)-56320)+65536)+";":Ua[g]||"&#"+g.charCodeAt(0)+";"})}function Ze(a,f,g){return g=g||ud,a.replace(f?bb:Qy,function(x){return Ua[x]||g[x]||x})}function ot(a,f){return(a=Qt.trim(a))?a.split(f||" "):[]}function rt(a,f){var g=ld(a," ",ld(a.toUpperCase()," "));return Rp(g,f)}function Ct(a){return rt("td th li dt dd figcaption caption details summary",a.getTextBlockElements())}function Vt(a,f){var g;return a&&(g={},gu(a="string"==typeof a?{"*":a}:a,function(x,C){g[C]=g[C.toUpperCase()]=("map"===f?ld:ph)(x,/[, ]/)})),g}function Wn(a){function f(cn,Jn,ao){var vo=a[cn];return vo?vo=ld(vo,/[, ]/,ld(vo.toUpperCase(),/[, ]/)):(vo=rc[cn])||(vo=rt(Jn,ao),rc[cn]=vo),vo}var g,x,C,I,L,z,j,G,te={},K={},ie=[],le={},pe={},me=(g=(a=a||{}).schema,G={},rc[g]||(x="id accesskey class dir lang style tabindex title role",C="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",I="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==g&&(x+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",C+=" article aside details dialog figure main header footer hgroup section nav",I+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==g&&(x+=" xml:lang",I=[I,j="acronym applet basefont big font strike tt"].join(" "),gu(ot(j),function(cn){xe(cn,"",I)}),C=[C,z="center dir isindex noframes"].join(" "),L=[C,I].join(" "),gu(ot(z),function(cn){xe(cn,"",L)})),L=L||[C,I].join(" "),xe("html","manifest","head body"),xe("head","","base command link meta noscript script style title"),xe("title hr noscript br"),xe("base","href target"),xe("link","href rel media hreflang type sizes hreflang"),xe("meta","name http-equiv content charset"),xe("style","media type scoped"),xe("script","src async defer type charset"),xe("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",L),xe("address dt dd div caption","",L),xe("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",I),xe("blockquote","cite",L),xe("ol","reversed start type","li"),xe("ul","","li"),xe("li","value",L),xe("dl","","dt dd"),xe("a","href target rel media hreflang type",I),xe("q","cite",I),xe("ins del","cite datetime",L),xe("img","src sizes srcset alt usemap ismap width height"),xe("iframe","src name width height",L),xe("embed","src type width height"),xe("object","data type typemustmatch name usemap form width height",[L,"param"].join(" ")),xe("param","name value"),xe("map","name",[L,"area"].join(" ")),xe("area","alt coords shape href target rel media hreflang type"),xe("table","border","caption colgroup thead tfoot tbody tr"+("html4"===g?" col":"")),xe("colgroup","span","col"),xe("col","span"),xe("tbody thead tfoot","","tr"),xe("tr","","td th"),xe("td","colspan rowspan headers",L),xe("th","colspan rowspan headers scope abbr",L),xe("form","accept-charset action autocomplete enctype method name novalidate target",L),xe("fieldset","disabled form name",[L,"legend"].join(" ")),xe("label","form for",I),xe("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),xe("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===g?L:I),xe("select","disabled form multiple name required size","option optgroup"),xe("optgroup","disabled label","option"),xe("option","disabled label selected value"),xe("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),xe("menu","type label",[L,"li"].join(" ")),xe("noscript","",L),"html4"!==g&&(xe("wbr"),xe("ruby","",[I,"rt rp"].join(" ")),xe("figcaption","",L),xe("mark rt rp summary bdi","",I),xe("canvas","width height",L),xe("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[L,"track source"].join(" ")),xe("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[L,"track source"].join(" ")),xe("picture","","img source"),xe("source","src srcset type media sizes"),xe("track","kind src srclang label default"),xe("datalist","",[I,"option"].join(" ")),xe("article section nav aside main header footer","",L),xe("hgroup","","h1 h2 h3 h4 h5 h6"),xe("figure","",[L,"figcaption"].join(" ")),xe("time","datetime",I),xe("dialog","open",L),xe("command","type label icon disabled checked radiogroup command"),xe("output","for form name",I),xe("progress","value max",I),xe("meter","value min max low high optimum",I),xe("details","open",[L,"summary"].join(" ")),xe("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==g&&(be("script","language xml:space"),be("style","xml:space"),be("object","declare classid code codebase codetype archive standby align border hspace vspace"),be("embed","align name hspace vspace"),be("param","valuetype type"),be("a","charset name rev shape coords"),be("br","clear"),be("applet","codebase archive code object alt name width height align hspace vspace"),be("img","name longdesc align border hspace vspace"),be("iframe","longdesc frameborder marginwidth marginheight scrolling align"),be("font basefont","size color face"),be("input","usemap align"),be("select"),be("textarea"),be("h1 h2 h3 h4 h5 h6 div p legend caption","align"),be("ul","type compact"),be("li","type"),be("ol dl menu dir","compact"),be("pre","width xml:space"),be("hr","align noshade size width"),be("isindex","prompt"),be("table","summary width frame rules cellspacing cellpadding align bgcolor"),be("col","width align char charoff valign"),be("colgroup","width align char charoff valign"),be("thead","align char charoff valign"),be("tr","align char charoff valign bgcolor"),be("th","axis align char charoff valign nowrap bgcolor width height"),be("form","accept"),be("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),be("tfoot","align char charoff valign"),be("tbody","align char charoff valign"),be("area","nohref"),be("body","background bgcolor text link vlink alink")),"html4"!==g&&(be("input button select textarea","autofocus"),be("input textarea","placeholder"),be("a","download"),be("link script img","crossorigin"),be("img","loading"),be("iframe","sandbox seamless allowfullscreen loading")),gu(ot("a form meter progress dfn"),function(cn){G[cn]&&delete G[cn].children[cn]}),delete G.caption.children.table,delete G.script,rc[g]=G));function xe(cn,Jn,ao){function vo(ou,Al){for(var pc={},ml=0,Oc=ou.length;ml<Oc;ml++)pc[ou[ml]]=Al||{};return pc}var Ra,Ro;Jn=Jn||"","string"==typeof(ao=ao||[])&&(ao=ot(ao));for(var fo=ot(cn),Gi=fo.length;Gi--;)Ro={attributes:vo(Ra=ot([x,Jn].join(" "))),attributesOrder:Ra,children:vo(ao,Pp)},G[fo[Gi]]=Ro}function be(cn,Jn){for(var ao,vo,Ra,Ro=ot(cn),fo=Ro.length,Gi=ot(Jn);fo--;)for(ao=G[Ro[fo]],vo=0,Ra=Gi.length;vo<Ra;vo++)ao.attributes[Gi[vo]]={},ao.attributesOrder.push(Gi[vo])}!1===a.verify_html&&(a.valid_elements="*[*]");var Ae=Vt(a.valid_styles),Le=Vt(a.invalid_styles,"map"),Je=Vt(a.valid_classes,"map"),pt=f("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Be=f("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),je=f("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),et=f("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),At="td th iframe video audio object script code",Nt=f("non_empty_elements",At+" pre",je),Kt=f("move_caret_before_on_enter_elements",At+" table",je),Yt=f("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),dt=f("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",Yt),vt=f("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");function kt(cn){return new RegExp("^"+cn.replace(/([?+*])/g,".$1")+"$")}function Wt(cn){var Jn,ao,vo,Ra,Ro,fo,Gi,ou,Al,pc,ml,Oc,zv,ah,gg,mp,hb,pb,$k=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,AD=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,Jk=/[*?+]/;if(cn){var lM=ot(cn,",");for(te["@"]&&(mp=te["@"].attributes,hb=te["@"].attributesOrder),Jn=0,ao=lM.length;Jn<ao;Jn++)if(Ro=$k.exec(lM[Jn])){if(Al=Ro[2],gg=Ro[3],ou=Ro[5],fo={attributes:Oc={},attributesOrder:zv=[]},"#"===(ah=Ro[1])&&(fo.paddEmpty=!0),"-"===ah&&(fo.removeEmpty=!0),"!"===Ro[4]&&(fo.removeEmptyAttrs=!0),mp&&(wn(mp,function(Qk,m_){Oc[m_]=Qk}),zv.push.apply(zv,hb)),ou)for(vo=0,Ra=(ou=ot(ou,"|")).length;vo<Ra;vo++)(Ro=AD.exec(ou[vo]))&&(Gi={},ml=Ro[1],pc=Ro[2].replace(/[\\:]:/g,":"),ah=Ro[3],pb=Ro[4],"!"===ml&&(fo.attributesRequired=fo.attributesRequired||[],fo.attributesRequired.push(pc),Gi.required=!0),"-"!==ml?(ah&&("="===ah&&(fo.attributesDefault=fo.attributesDefault||[],fo.attributesDefault.push({name:pc,value:pb}),Gi.defaultValue=pb),":"===ah&&(fo.attributesForced=fo.attributesForced||[],fo.attributesForced.push({name:pc,value:pb}),Gi.forcedValue=pb),"<"===ah&&(Gi.validValues=ld(pb,"?"))),Jk.test(pc)?(fo.attributePatterns=fo.attributePatterns||[],Gi.pattern=kt(pc),fo.attributePatterns.push(Gi)):(Oc[pc]||zv.push(pc),Oc[pc]=Gi)):(delete Oc[pc],zv.splice(Af(zv,pc),1)));mp||"@"!==Al||(mp=Oc,hb=zv),gg&&(fo.outputName=Al,te[gg]=fo),Jk.test(Al)?(fo.pattern=kt(Al),ie.push(fo)):te[Al]=fo}}}function bn(cn){te={},ie=[],Wt(cn),gu(me,function(Jn,ao){K[ao]=Jn.children})}function Xn(cn){var Jn=/^(~)?(.+)$/;cn&&(rc.text_block_elements=rc.block_elements=null,gu(ot(cn,","),function(ao){var vo,Ra=Jn.exec(ao),Ro="~"===Ra[1],fo=Ro?"span":"div",Gi=Ra[2];K[Gi]=K[fo],le[Gi]=fo,Ro||(dt[Gi.toUpperCase()]={},dt[Gi]={}),te[Gi]||(delete(vo=Rp({},vo=te[fo])).removeEmptyAttrs,delete vo.removeEmpty,te[Gi]=vo),gu(K,function(ou,Al){ou[fo]&&(K[Al]=ou=Rp({},K[Al]),ou[Gi]=ou[fo])})}))}function vn(cn){var Jn=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;rc[a.schema]=null,cn&&gu(ot(cn,","),function(ao){var vo,Ra,Ro=Jn.exec(ao);Ro&&(vo=(Ra=Ro[1])?K[Ro[2]]:K[Ro[2]]={"#comment":{}},vo=K[Ro[2]],gu(ot(Ro[3],"|"),function(fo){"-"===Ra?delete vo[fo]:vo[fo]={}}))})}function Gn(cn){var Jn,ao=te[cn];if(ao)return ao;for(Jn=ie.length;Jn--;)if((ao=ie[Jn]).pattern.test(cn))return ao}gu((a.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(cn){pe[cn]=new RegExp("</"+cn+"[^>]*>","gi")}),a.valid_elements?bn(a.valid_elements):(gu(me,function(cn,Jn){te[Jn]={attributes:cn.attributes,attributesOrder:cn.attributesOrder},K[Jn]=cn.children}),"html5"!==a.schema&&gu(ot("strong/b em/i"),function(cn){var Jn=ot(cn,"/");te[Jn[1]].outputName=Jn[0]}),gu(vt,function(cn,Jn){te[Jn]&&(a.padd_empty_block_inline_children&&(te[Jn].paddInEmptyBlock=!0),te[Jn].removeEmpty=!0)}),gu(ot("ol ul blockquote a table tbody"),function(cn){te[cn]&&(te[cn].removeEmpty=!0)}),gu(ot("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(cn){te[cn].paddEmpty=!0}),gu(ot("span"),function(cn){te[cn].removeEmptyAttrs=!0})),Xn(a.custom_elements),vn(a.valid_children),Wt(a.extended_valid_elements),vn("+ol[ul|ol],+ul[ul|ol]"),gu({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(cn,Jn){te[Jn]&&(te[Jn].parentsRequired=ot(cn))}),a.invalid_elements&&gu(ph(a.invalid_elements),function(cn){te[cn]&&delete te[cn]}),Gn("span")||Wt("span[!data-mce-type|*]");var kn=Bn(Ae),Vn=Bn(Le),Nn=Bn(Je),_r=Bn(et),mn=Bn(dt),sr=Bn(Yt),In=Bn(vt),Mr=Bn(je),kr=Bn(Be),Uo=Bn(Nt),tt=Bn(Kt),xt=Bn(pt),tn=Bn(pe),Cn=Bn(le);return{children:K,elements:te,getValidStyles:kn,getValidClasses:Nn,getBlockElements:mn,getInvalidStyles:Vn,getShortEndedElements:Mr,getTextBlockElements:sr,getTextInlineElements:In,getBoolAttrs:_r,getElementRule:Gn,getSelfClosingElements:kr,getNonEmptyElements:Uo,getMoveCaretBeforeOnEnterElements:tt,getWhiteSpaceElements:xt,getSpecialElements:tn,isValidChild:function(cn,Jn){var ao=K[cn.toLowerCase()];return!(!ao||!ao[Jn.toLowerCase()])},isValid:function(cn,Jn){var ao,vo,Ra=Gn(cn);if(Ra){if(!Jn||Ra.attributes[Jn])return!0;if(ao=Ra.attributePatterns)for(vo=ao.length;vo--;)if(ao[vo].pattern.test(cn))return!0}return!1},getCustomElements:Cn,addValidElements:Wt,setValidElements:bn,addCustomElements:Xn,addValidChildren:vn}}function An(a,f,g,x){function C(I){return 1<(I=parseInt(I,10).toString(16)).length?I:"0"+I}return"#"+C(f)+C(g)+C(x)}function Un(a,f){var g,x,C=this,I=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,L=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,z=/\s*([^:]+):\s*([^;]+);?/g,j=/\s+$/,G={},te=Fi;a=a||{},f&&(g=f.getValidStyles(),x=f.getInvalidStyles());for(var K=("\\\" \\' \\; \\: ; : "+te).split(" "),ie=0;ie<K.length;ie++)G[K[ie]]=te+ie,G[te+ie]=K[ie];return{toHex:function(le){return le.replace(I,An)},parse:function(le){function pe(kt,Wt,bn){var Xn=Yt[kt+"-top"+Wt];if(Xn){var vn=Yt[kt+"-right"+Wt];if(vn){var Gn=Yt[kt+"-bottom"+Wt];if(Gn){var kn=Yt[kt+"-left"+Wt];if(kn){var Vn=[Xn,vn,Gn,kn];for(ie=Vn.length-1;ie--&&Vn[ie]===Vn[ie+1];);-1<ie&&bn||(Yt[kt+Wt]=-1===ie?Vn[0]:Vn.join(" "),delete Yt[kt+"-top"+Wt],delete Yt[kt+"-right"+Wt],delete Yt[kt+"-bottom"+Wt],delete Yt[kt+"-left"+Wt])}}}}}function me(kt){var Wt,bn=Yt[kt];if(bn){for(Wt=(bn=bn.split(" ")).length;Wt--;)if(bn[Wt]!==bn[0])return;return Yt[kt]=bn[0],1}}function xe(kt){return et=!0,G[kt]}function be(kt,Wt){return et&&(kt=kt.replace(/\uFEFF[0-9]/g,function(bn){return G[bn]})),Wt?kt:kt.replace(/\\([\'\";:])/g,"$1")}function Ae(kt){return String.fromCharCode(parseInt(kt.slice(1),16))}function Le(kt){return kt.replace(/\\[0-9a-f]+/gi,Ae)}function Je(kt,Wt,bn,Xn,vn,Gn){if(vn=vn||Gn)return"'"+(vn=be(vn)).replace(/\'/g,"\\'")+"'";if(Wt=be(Wt||bn||Xn),!a.allow_script_urls){var kn=Wt.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(kn)||!a.allow_svg_data_urls&&/^data:image\/svg/i.test(kn))return""}return"url('"+(Wt=dt?dt.call(vt,Wt,"style"):Wt).replace(/\'/g,"\\'")+"')"}var pt,Be,je,et,At,Nt,Kt,Yt={},dt=a.url_converter,vt=a.url_converter_scope||C;if(le){for(le=(le=le.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,xe).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(kt){return kt.replace(/[;:]/g,xe)});pt=z.exec(le);)z.lastIndex=pt.index+pt[0].length,Be=pt[1].replace(j,"").toLowerCase(),je=pt[2].replace(j,""),Be&&je&&(Be=Le(Be),je=Le(je),-1===Be.indexOf(te)&&-1===Be.indexOf('"')&&(a.allow_script_urls||"behavior"!==Be&&!/expression\s*\(|\/\*|\*\//.test(je))&&("font-weight"===Be&&"700"===je?je="bold":"color"!==Be&&"background-color"!==Be||(je=je.toLowerCase()),je=(je=je.replace(I,An)).replace(L,Je),Yt[Be]=et?be(je,!0):je));pe("border","",!0),pe("border","-width"),pe("border","-color"),pe("border","-style"),pe("padding",""),pe("margin",""),Nt="border-style",Kt="border-color",me(At="border-width")&&me(Nt)&&me(Kt)&&(Yt.border=Yt[At]+" "+Yt[Nt]+" "+Yt[Kt],delete Yt[At],delete Yt[Nt],delete Yt[Kt]),"medium none"===Yt.border&&delete Yt.border,"none"===Yt["border-image"]&&delete Yt["border-image"]}return Yt},serialize:function(le,pe){function me(be){var Ae,Le=g[be];if(Le)for(var Je=0,pt=Le.length;Je<pt;Je++)(Ae=le[be=Le[Je]])&&(xe+=(0<xe.length?" ":"")+be+": "+Ae+";")}var xe="";return pe&&g?(me("*"),me(pe)):wn(le,function(be,Ae){var Le;!be||x&&((Le=x["*"])&&Le[Ae]||(Le=x[pe])&&Le[Ae])||(xe+=(0<xe.length?" ":"")+Ae+": "+be+";")}),xe}}}function $n(a){return a instanceof Event||Ur(a.initEvent)}function fr(a,f,g,x){var C,I,L=function(z){var j,G=null!=x?x:{};for(j in z)po(Xh,j)||(G[j]=z[j]);return ct(G.composedPath)&&(G.composedPath=function(){return z.composedPath()}),G}(f);return L.type=a,cr(L.target)&&(L.target=null!==(C=L.srcElement)&&void 0!==C?C:g),(cr((I=f).preventDefault)||$n(I))&&(L.preventDefault=function(){L.defaultPrevented=!0,L.isDefaultPrevented=Jo,Ur(f.preventDefault)?f.preventDefault():$n(f)&&(f.returnValue=!1)},L.stopPropagation=function(){L.cancelBubble=!0,L.isPropagationStopped=Jo,Ur(f.stopPropagation)?f.stopPropagation():$n(f)&&(f.cancelBubble=!0)},L.stopImmediatePropagation=function(){L.isImmediatePropagationStopped=Jo,L.stopPropagation()},L.isDefaultPrevented!==Jo&&L.isDefaultPrevented!==Yn&&(L.isDefaultPrevented=!0===L.defaultPrevented?Jo:Yn,L.isPropagationStopped=!0===L.cancelBubble?Jo:Yn,L.isImmediatePropagationStopped=Yn)),L}function Hr(a,f,g,x){a.addEventListener?a.addEventListener(f,g,x||!1):a.attachEvent&&a.attachEvent("on"+f,g)}function Co(a,f,g,x){a.removeEventListener?a.removeEventListener(f,g,x||!1):a.detachEvent&&a.detachEvent("on"+f,g)}function Mo(a,f){var g,x,C,I,L=fr(a.type,a,document,f);return ct(I=a)&&xb.test(I.type)&&uo(a.pageX)&&!uo(a.clientX)&&(x=(g=L.target.ownerDocument||document).documentElement,C=g.body,L.pageX=a.clientX+(x&&x.scrollLeft||C&&C.scrollLeft||0)-(x&&x.clientLeft||C&&C.clientLeft||0),L.pageY=a.clientY+(x&&x.scrollTop||C&&C.scrollTop||0)-(x&&x.clientTop||C&&C.clientTop||0)),uo(L.metaKey)&&(L.metaKey=!1),L}var Zr=ys(["h1","h2","h3","h4","h5","h6"]),Qo=ys(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),Ki=ys(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Ii=ys(["ul","ol","dl"]),To=ys(["li","dd","dt"]),Rr=ys(["thead","tbody","tfoot"]),vr=ys(["td","th"]),ma=ys(["pre","script","textarea","style"]),Fi="\ufeff",xa="\xa0",ua=Fi,Fl=function(a){return a===Fi},on=function(a){return a.replace(/\uFEFF/g,"")},Vl=co,va=Ar,dh=function(a){return va(a)&&a.data[0]===ua},Ap=function(a){return va(a)&&a.data[a.data.length-1]===ua},hh=Yu,qv=oo,Ip=os,Jy=Ar,sd=Nl(["script","style","textarea"]),Br=Nl(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Am=Nl(["table"]),Y1=Nr,Ed=function(a){return!1===(co(f=a)&&"true"===f.getAttribute("unselectable"))&&qv(a);var f},xo=/^[ \t\r\n]*$/,Op=Mf("data-mce-bookmark"),Ep=Mf("data-mce-bogus"),Pd=function(a){return co(a)&&"all"===a.getAttribute("data-mce-bogus")},wg=function(a,f,g){var x=g||f;if(co(f)&&fe(f))return f;for(var C,I,L,z,j,G,te,K,ie,le,pe,me=f.childNodes,xe=me.length-1;0<=xe;xe--)wg(a,me[xe],x);return!co(f)||1===(C=f.childNodes).length&&fe(C[0])&&f.parentNode.insertBefore(C[0],f),Yh(L=f)||il(L)||ne(f,x)||co(I=f)&&0<I.childNodes.length||(j=x,Ar(z=f)&&0<z.data.length&&(K=new Ks(G=z,te=j).prev(!1),ie=new Ks(G,te).next(!1),le=uo(K)||ae(K,te),pe=uo(ie)||ae(ie,te),le&&pe))||a.remove(f),f},I_=Qt.makeMap,bb=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Qy=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,fa=/[<>&\"\']/g,qn=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,yi={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},Ua={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Zu={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},ud=Me("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Vc={encodeRaw:ke,encodeAllRaw:function(a){return(""+a).replace(fa,function(f){return Ua[f]||f})},encodeNumeric:Fe,encodeNamed:Ze,getEncodeFunc:function(a,f){var g=Me(f)||ud,x=I_(a.replace(/\+/g,","));return x.named&&x.numeric?function(C,I){return C.replace(I?bb:Qy,function(L){return void 0!==Ua[L]?Ua[L]:void 0!==g[L]?g[L]:1<L.length?"&#"+(1024*(L.charCodeAt(0)-55296)+(L.charCodeAt(1)-56320)+65536)+";":"&#"+L.charCodeAt(0)+";"})}:x.named?f?function(C,I){return Ze(C,I,g)}:Ze:x.numeric?Fe:ke},decode:function(a){return a.replace(qn,function(f,g){return g?65535<(g="x"===g.charAt(0).toLowerCase()?parseInt(g.substr(1),16):parseInt(g,10))?(g-=65536,String.fromCharCode(55296+(g>>10),56320+(1023&g))):yi[g]||String.fromCharCode(g):Zu[f]||ud[f]||(x=f,(C=It.fromTag("div").dom).innerHTML=x,C.textContent||C.innerText||x);var x,C})}},rc={},Pp={},ld=Qt.makeMap,gu=Qt.each,Rp=Qt.extend,ph=Qt.explode,Af=Qt.inArray,Xh={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},xb=/^(?:mouse|contextmenu)|click/,xs=(ul.prototype.bind=function(a,f,g,x){function C(me){K.executeHandlers(Mo(me||ie.event),I)}var I,L,z,j,G,te,K=this,ie=window;if(a&&3!==a.nodeType&&8!==a.nodeType){a[K.expando]?I=a[K.expando]:(I=K.count++,a[K.expando]=I,K.events[I]={}),x=x||a;for(var le=f.split(" "),pe=le.length;pe--;)G=C,j=te=!1,"DOMContentLoaded"===(z=le[pe])&&(z="ready"),K.domLoaded&&"ready"===z&&"complete"===a.readyState?g.call(x,Mo({type:z})):(K.hasMouseEnterLeave||(j=K.mouseEnterLeave[z])&&(G=function(me){var xe=me.currentTarget,be=me.relatedTarget;if(be&&xe.contains)be=xe.contains(be);else for(;be&&be!==xe;)be=be.parentNode;be||((me=Mo(me||ie.event)).type="mouseout"===me.type?"mouseleave":"mouseenter",me.target=xe,K.executeHandlers(me,I))}),K.hasFocusIn||"focusin"!==z&&"focusout"!==z||(te=!0,j="focusin"===z?"focus":"blur",G=function(me){(me=Mo(me||ie.event)).type="focus"===me.type?"focusin":"focusout",K.executeHandlers(me,I)}),(L=K.events[I][z])?"ready"===z&&K.domLoaded?g(Mo({type:z})):L.push({func:g,scope:x}):(K.events[I][z]=L=[{func:g,scope:x}],L.fakeName=j,L.capture=te,L.nativeHandler=G,"ready"===z?function(me,xe,be){var Ae,Le=me.document,Je={type:"ready"};be.domLoaded?xe(Je):(Ae=function(){Co(me,"DOMContentLoaded",Ae),Co(me,"load",Ae),be.domLoaded||(be.domLoaded=!0,xe(Je)),me=null},"complete"===Le.readyState||"interactive"===Le.readyState&&Le.body?Ae():Hr(me,"DOMContentLoaded",Ae),be.domLoaded||Hr(me,"load",Ae))}(a,G,K):Hr(a,j||z,G,te)));return a=L=null,g}},ul.prototype.unbind=function(a,f,g){var x,C,I;if(!a||3===a.nodeType||8===a.nodeType)return this;var L=a[this.expando];if(L){if(I=this.events[L],f){for(var z,j,G,te,K=f.split(" "),ie=K.length;ie--;)if(te=I[C=K[ie]]){if(g)for(x=te.length;x--;)te[x].func===g&&(z=te.nativeHandler,j=te.fakeName,G=te.capture,(te=te.slice(0,x).concat(te.slice(x+1))).nativeHandler=z,te.fakeName=j,te.capture=G,I[C]=te);g&&0!==te.length||(delete I[C],Co(a,te.fakeName||C,te.nativeHandler,te.capture))}}else wn(I,function(le,pe){Co(a,le.fakeName||pe,le.nativeHandler,le.capture)}),I={};for(C in I)if(po(I,C))return this;delete this.events[L];try{delete a[this.expando]}catch{a[this.expando]=null}}return this},ul.prototype.fire=function(a,f,g){var x;if(!a||3===a.nodeType||8===a.nodeType)return this;for(var C=Mo({type:f,target:a},g);(x=a[this.expando])&&this.executeHandlers(C,x),(a=a.parentNode||a.ownerDocument||a.defaultView||a.parentWindow)&&!C.isPropagationStopped(););return this},ul.prototype.clean=function(a){var f,g;if(!a||3===a.nodeType||8===a.nodeType)return this;if(a[this.expando]&&this.unbind(a),(a=a.getElementsByTagName?a:a.document)&&a.getElementsByTagName)for(this.unbind(a),f=(g=a.getElementsByTagName("*")).length;f--;)(a=g[f])[this.expando]&&this.unbind(a);return this},ul.prototype.destroy=function(){this.events={}},ul.prototype.cancel=function(a){return a&&(a.preventDefault(),a.stopImmediatePropagation()),!1},ul.prototype.executeHandlers=function(a,f){var g=this.events[f],x=g&&g[a.type];if(x)for(var C=0,I=x.length;C<I;C++){var L=x[C];if(L&&!1===L.func.call(L.scope,a)&&a.preventDefault(),a.isImmediatePropagationStopped())return}},ul.Event=new ul,ul);function ul(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}function Hc(a,f,g){var x="0x"+f-65536;return x!=x||g?f:x<0?String.fromCharCode(65536+x):String.fromCharCode(x>>10|55296,1023&x|56320)}var Oa,Ca,Wc,Im,Sg,_b,Ri,Rd,Lp,gh,ci,hs,Ld,oc,Np,Zh,Xv,Hs="sizzle"+-new Date,is=window.document,ic=0,mh=0,vh=Sb(),hi=Sb(),af=Sb(),cd=function(a,f){return a===f&&(gh=!0),0},yh="undefined",ll={}.hasOwnProperty,Kh=[],Bp=Kh.pop,e0=Kh.push,zp=Kh.push,O_=Kh.slice,If=Kh.indexOf||function(a){for(var f=0,g=this.length;f<g;f++)if(this[f]===a)return f;return-1},_s="[\\x20\\t\\r\\n\\f]",Ku="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Gc="\\["+_s+"*("+Ku+")(?:"+_s+"*([*^$|!~]?=)"+_s+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Ku+"))|)"+_s+"*\\]",Fp=":("+Ku+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Gc+")*)|.*)\\)|)",t0=new RegExp("^"+_s+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_s+"+$","g"),E_=new RegExp("^"+_s+"*,"+_s+"*"),wb=new RegExp("^"+_s+"*([>+~]|"+_s+")"+_s+"*"),Zv=new RegExp("="+_s+"*([^\\]'\"]*?)"+_s+"*\\]","g"),Vp=new RegExp(Fp),q1=new RegExp("^"+Ku+"$"),Om={ID:new RegExp("^#("+Ku+")"),CLASS:new RegExp("^\\.("+Ku+")"),TAG:new RegExp("^("+Ku+"|[*])"),ATTR:new RegExp("^"+Gc),PSEUDO:new RegExp("^"+Fp),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_s+"*(even|odd|(([+-]|)(\\d*)n|)"+_s+"*(?:([+-]|)"+_s+"*(\\d+)|))"+_s+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+_s+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_s+"*((?:-\\d)?\\d*)"+_s+"*\\)|)(?=[^-]|$)","i")},$h=/^(?:input|select|textarea|button)$/i,ia=/^h\d$/i,ja=/^[^{]+\{\s*\[native \w/,Nd=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Cg=/[+~]/,bh=/'|\\/g,Jh=new RegExp("\\\\([\\da-f]{1,6}"+_s+"?|("+_s+")|.)","ig");try{zp.apply(Kh=O_.call(is.childNodes),is.childNodes)}catch{zp={apply:Kh.length?function(f,g){e0.apply(f,O_.call(g))}:function(f,g){for(var x=f.length,C=0;f[x++]=g[C++];);f.length=x-1}}}var ya=function(a,f,g,x){var C,I,L,z,j,G,te,K,ie,le;if((f?f.ownerDocument||f:is)!==hs&&ci(f),g=g||[],!a||"string"!=typeof a)return g;if(1!==(z=(f=f||hs).nodeType)&&9!==z)return[];if(oc&&!x){if(C=Nd.exec(a))if(L=C[1]){if(9===z){if(!(I=f.getElementById(L))||!I.parentNode)return g;if(I.id===L)return g.push(I),g}else if(f.ownerDocument&&(I=f.ownerDocument.getElementById(L))&&Xv(f,I)&&I.id===L)return g.push(I),g}else{if(C[2])return zp.apply(g,f.getElementsByTagName(a)),g;if((L=C[3])&&Oa.getElementsByClassName)return zp.apply(g,f.getElementsByClassName(L)),g}if(Oa.qsa&&(!Np||!Np.test(a))){if(K=te=Hs,ie=f,le=9===z&&a,1===z&&"object"!==f.nodeName.toLowerCase()){for(G=Sg(a),(te=f.getAttribute("id"))?K=te.replace(bh,"\\$&"):f.setAttribute("id",K),K="[id='"+K+"'] ",j=G.length;j--;)G[j]=K+Hp(G[j]);ie=Cg.test(a)&&Cb(f.parentNode)||f,le=G.join(",")}if(le)try{return zp.apply(g,ie.querySelectorAll(le)),g}catch{}finally{te||f.removeAttribute("id")}}}return Ri(a.replace(t0,"$1"),f,g,x)};function Sb(){var a=[];return function f(g,x){return a.push(g+" ")>Ca.cacheLength&&delete f[a.shift()],f[g+" "]=x}}function xh(a){return a[Hs]=!0,a}function P_(a,f){var g=f&&a,x=g&&1===a.nodeType&&1===f.nodeType&&(~f.sourceIndex||1<<31)-(~a.sourceIndex||1<<31);if(x)return x;if(g)for(;g=g.nextSibling;)if(g===f)return-1;return a?1:-1}function Mg(a){return xh(function(f){return f=+f,xh(function(g,x){for(var C,I=a([],g.length,f),L=I.length;L--;)g[C=I[L]]&&(g[C]=!(x[C]=g[C]))})})}function Cb(a){return a&&typeof a.getElementsByTagName!=yh&&a}function kg(){}function Hp(a){for(var f=0,g=a.length,x="";f<g;f++)x+=a[f].value;return x}function R_(a,f,g){var x=f.dir,C=g&&"parentNode"===x,I=mh++;return f.first?function(L,z,j){for(;L=L[x];)if(1===L.nodeType||C)return a(L,z,j)}:function(L,z,j){var G,te,K=[ic,I];if(j){for(;L=L[x];)if((1===L.nodeType||C)&&a(L,z,j))return!0}else for(;L=L[x];)if(1===L.nodeType||C){if((G=(te=L[Hs]||(L[Hs]={}))[x])&&G[0]===ic&&G[1]===I)return K[2]=G[2];if((te[x]=K)[2]=a(L,z,j))return!0}}}function Em(a){return 1<a.length?function(f,g,x){for(var C=a.length;C--;)if(!a[C](f,g,x))return!1;return!0}:a[0]}function Tg(a,f,g,x,C){for(var I,L=[],z=0,j=a.length,G=null!=f;z<j;z++)(I=a[z])&&(g&&!g(I,x,C)||(L.push(I),G&&f.push(z)));return L}function _h(a){return void 0!==a}function ac(a){return"string"==typeof a}function Uc(a,f){var g,x=(f=f||jc).createElement("div"),C=f.createDocumentFragment();for(x.innerHTML=a;g=x.firstChild;)C.appendChild(g);return C}function X1(a,f){return a&&f&&-1!==(" "+a.className+" ").indexOf(" "+f+" ")}function Ml(a,f,g){var x,C;return f=ko(f)[0],a.each(function(){g&&x===this.parentNode||(x=this.parentNode,C=f.cloneNode(!1),this.parentNode.insertBefore(C,this)),C.appendChild(this)}),a}function sf(a,f){return new ko.fn.init(a,f)}function Kv(a){return null==a?"":(""+a).replace(qa,"")}function $u(a,f){var g,x,C,I;if(a)if(void 0===(g=a.length)){for(x in a)if(a.hasOwnProperty(x)&&!1===f.call(I=a[x],x,I))break}else for(C=0;C<g&&!1!==f.call(I=a[C],C,I);C++);return a}function Ma(a,f){var g=[];return $u(a,function(x,C){f(C,x)&&g.push(C)}),g}Oa=ya.support={},Im=ya.isXML=function(a){var f=a&&(a.ownerDocument||a).documentElement;return!!f&&"HTML"!==f.nodeName},ci=ya.setDocument=function(a){var f,g=a?a.ownerDocument||a:is,x=g.defaultView;return g!==hs&&9===g.nodeType&&g.documentElement?(Ld=(hs=g).documentElement,oc=!Im(g),x&&x!==function(C){try{return C.top}catch{}return null}(x)&&(x.addEventListener?x.addEventListener("unload",function(){ci()},!1):x.attachEvent&&x.attachEvent("onunload",function(){ci()})),Oa.attributes=!0,Oa.getElementsByTagName=!0,Oa.getElementsByClassName=ja.test(g.getElementsByClassName),Oa.getById=!0,Ca.find.ID=function(C,I){if(typeof I.getElementById!=yh&&oc){var L=I.getElementById(C);return L&&L.parentNode?[L]:[]}},Ca.filter.ID=function(C){var I=C.replace(Jh,Hc);return function(L){return L.getAttribute("id")===I}},Ca.find.TAG=Oa.getElementsByTagName?function(C,I){if(typeof I.getElementsByTagName!=yh)return I.getElementsByTagName(C)}:function(C,I){var L,z=[],j=0,G=I.getElementsByTagName(C);if("*"!==C)return G;for(;L=G[j++];)1===L.nodeType&&z.push(L);return z},Ca.find.CLASS=Oa.getElementsByClassName&&function(C,I){if(oc)return I.getElementsByClassName(C)},Zh=[],Np=[],Oa.disconnectedMatch=!0,Np=Np.length&&new RegExp(Np.join("|")),Zh=Zh.length&&new RegExp(Zh.join("|")),f=ja.test(Ld.compareDocumentPosition),Xv=f||ja.test(Ld.contains)?function(C,I){var L=9===C.nodeType?C.documentElement:C,z=I&&I.parentNode;return C===z||!(!z||1!==z.nodeType||!(L.contains?L.contains(z):C.compareDocumentPosition&&16&C.compareDocumentPosition(z)))}:function(C,I){if(I)for(;I=I.parentNode;)if(I===C)return!0;return!1},cd=f?function(C,I){return C===I?(gh=!0,0):(L=!C.compareDocumentPosition-!I.compareDocumentPosition)||(1&(L=(C.ownerDocument||C)===(I.ownerDocument||I)?C.compareDocumentPosition(I):1)||!Oa.sortDetached&&I.compareDocumentPosition(C)===L?C===g||C.ownerDocument===is&&Xv(is,C)?-1:I===g||I.ownerDocument===is&&Xv(is,I)?1:Lp?If.call(Lp,C)-If.call(Lp,I):0:4&L?-1:1);var L}:function(C,I){if(C===I)return gh=!0,0;var L,z=0,j=C.parentNode,G=I.parentNode,te=[C],K=[I];if(!j||!G)return C===g?-1:I===g?1:j?-1:G?1:Lp?If.call(Lp,C)-If.call(Lp,I):0;if(j===G)return P_(C,I);for(L=C;L=L.parentNode;)te.unshift(L);for(L=I;L=L.parentNode;)K.unshift(L);for(;te[z]===K[z];)z++;return z?P_(te[z],K[z]):te[z]===is?-1:K[z]===is?1:0},g):hs},ya.matches=function(a,f){return ya(a,null,null,f)},ya.matchesSelector=function(a,f){if((a.ownerDocument||a)!==hs&&ci(a),f=f.replace(Zv,"='$1']"),Oa.matchesSelector&&oc&&(!Zh||!Zh.test(f))&&(!Np||!Np.test(f)))try{var g=(void 0).call(a,f);if(g||Oa.disconnectedMatch||a.document&&11!==a.document.nodeType)return g}catch{}return 0<ya(f,hs,null,[a]).length},ya.contains=function(a,f){return(a.ownerDocument||a)!==hs&&ci(a),Xv(a,f)},ya.attr=function(a,f){(a.ownerDocument||a)!==hs&&ci(a);var g=Ca.attrHandle[f.toLowerCase()],x=g&&ll.call(Ca.attrHandle,f.toLowerCase())?g(a,f,!oc):void 0;return void 0!==x?x:Oa.attributes||!oc?a.getAttribute(f):(x=a.getAttributeNode(f))&&x.specified?x.value:null},ya.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},ya.uniqueSort=function(a){var f,g=[],x=0,C=0;if(gh=!Oa.detectDuplicates,Lp=!Oa.sortStable&&a.slice(0),a.sort(cd),gh){for(;f=a[C++];)f===a[C]&&(x=g.push(C));for(;x--;)a.splice(g[x],1)}return Lp=null,a},Wc=ya.getText=function(a){var f,g="",x=0,C=a.nodeType;if(C){if(1===C||9===C||11===C){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)g+=Wc(a)}else if(3===C||4===C)return a.nodeValue}else for(;f=a[x++];)g+=Wc(f);return g},(Ca=ya.selectors={cacheLength:50,createPseudo:xh,match:Om,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(Jh,Hc),a[3]=(a[3]||a[4]||a[5]||"").replace(Jh,Hc),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||ya.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&ya.error(a[0]),a},PSEUDO:function(a){var f,g=!a[6]&&a[2];return Om.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":g&&Vp.test(g)&&(f=Sg(g,!0))&&(f=g.indexOf(")",g.length-f)-g.length)&&(a[0]=a[0].slice(0,f),a[2]=g.slice(0,f)),a.slice(0,3))}},filter:{TAG:function(a){var f=a.replace(Jh,Hc).toLowerCase();return"*"===a?function(){return!0}:function(g){return g.nodeName&&g.nodeName.toLowerCase()===f}},CLASS:function(a){var f=vh[a+" "];return f||(f=new RegExp("(^|"+_s+")"+a+"("+_s+"|$)"))&&vh(a,function(g){return f.test("string"==typeof g.className&&g.className||typeof g.getAttribute!=yh&&g.getAttribute("class")||"")})},ATTR:function(a,f,g){return function(x){var C=ya.attr(x,a);return null==C?"!="===f:!f||(C+="","="===f?C===g:"!="===f?C!==g:"^="===f?g&&0===C.indexOf(g):"*="===f?g&&-1<C.indexOf(g):"$="===f?g&&C.slice(-g.length)===g:"~="===f?-1<(" "+C+" ").indexOf(g):"|="===f&&(C===g||C.slice(0,g.length+1)===g+"-"))}},CHILD:function(a,f,g,x,C){var I="nth"!==a.slice(0,3),L="last"!==a.slice(-4),z="of-type"===f;return 1===x&&0===C?function(j){return!!j.parentNode}:function(j,G,te){var K,ie,le,pe,me,xe,be=I!=L?"nextSibling":"previousSibling",Ae=j.parentNode,Le=z&&j.nodeName.toLowerCase(),Je=!te&&!z;if(Ae){if(I){for(;be;){for(le=j;le=le[be];)if(z?le.nodeName.toLowerCase()===Le:1===le.nodeType)return!1;xe=be="only"===a&&!xe&&"nextSibling"}return!0}if(xe=[L?Ae.firstChild:Ae.lastChild],L&&Je){for(me=(K=(ie=Ae[Hs]||(Ae[Hs]={}))[a]||[])[0]===ic&&K[1],pe=K[0]===ic&&K[2],le=me&&Ae.childNodes[me];le=++me&&le&&le[be]||(pe=me=0)||xe.pop();)if(1===le.nodeType&&++pe&&le===j){ie[a]=[ic,me,pe];break}}else if(Je&&(K=(j[Hs]||(j[Hs]={}))[a])&&K[0]===ic)pe=K[1];else for(;(le=++me&&le&&le[be]||(pe=me=0)||xe.pop())&&((z?le.nodeName.toLowerCase()!==Le:1!==le.nodeType)||!++pe||(Je&&((le[Hs]||(le[Hs]={}))[a]=[ic,pe]),le!==j)););return(pe-=C)===x||pe%x==0&&0<=pe/x}}},PSEUDO:function(a,f){var g,x=Ca.pseudos[a]||Ca.setFilters[a.toLowerCase()]||ya.error("unsupported pseudo: "+a);return x[Hs]?x(f):1<x.length?(g=[a,a,"",f],Ca.setFilters.hasOwnProperty(a.toLowerCase())?xh(function(C,I){for(var L,z=x(C,f),j=z.length;j--;)C[L=If.call(C,z[j])]=!(I[L]=z[j])}):function(C){return x(C,0,g)}):x}},pseudos:{not:xh(function(a){var f=[],g=[],x=_b(a.replace(t0,"$1"));return x[Hs]?xh(function(C,I,L,z){for(var j,G=x(C,null,z,[]),te=C.length;te--;)(j=G[te])&&(C[te]=!(I[te]=j))}):function(C,I,L){return f[0]=C,x(f,null,L,g),f[0]=null,!g.pop()}}),has:xh(function(a){return function(f){return 0<ya(a,f).length}}),contains:xh(function(a){return a=a.replace(Jh,Hc),function(f){return-1<(f.textContent||f.innerText||Wc(f)).indexOf(a)}}),lang:xh(function(a){return q1.test(a||"")||ya.error("unsupported lang: "+a),a=a.replace(Jh,Hc).toLowerCase(),function(f){var g;do{if(g=oc?f.lang:f.getAttribute("xml:lang")||f.getAttribute("lang"))return(g=g.toLowerCase())===a||0===g.indexOf(a+"-")}while((f=f.parentNode)&&1===f.nodeType);return!1}}),target:function(a){var f=window.location&&window.location.hash;return f&&f.slice(1)===a.id},root:function(a){return a===Ld},focus:function(a){return a===hs.activeElement&&(!hs.hasFocus||hs.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return!1===a.disabled},disabled:function(a){return!0===a.disabled},checked:function(a){var f=a.nodeName.toLowerCase();return"input"===f&&!!a.checked||"option"===f&&!!a.selected},selected:function(a){return!0===a.selected},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!Ca.pseudos.empty(a)},header:function(a){return ia.test(a.nodeName)},input:function(a){return $h.test(a.nodeName)},button:function(a){var f=a.nodeName.toLowerCase();return"input"===f&&"button"===a.type||"button"===f},text:function(a){var f;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(f=a.getAttribute("type"))||"text"===f.toLowerCase())},first:Mg(function(){return[0]}),last:Mg(function(a,f){return[f-1]}),eq:Mg(function(a,f,g){return[g<0?g+f:g]}),even:Mg(function(a,f){for(var g=0;g<f;g+=2)a.push(g);return a}),odd:Mg(function(a,f){for(var g=1;g<f;g+=2)a.push(g);return a}),lt:Mg(function(a,f,g){for(var x=g<0?g+f:g;0<=--x;)a.push(x);return a}),gt:Mg(function(a,f,g){for(var x=g<0?g+f:g;++x<f;)a.push(x);return a})}}).pseudos.nth=Ca.pseudos.eq,Pn(["radio","checkbox","file","password","image"],function(a){var f;Ca.pseudos[a]=(f=a,function(g){return"input"===g.nodeName.toLowerCase()&&g.type===f})}),Pn(["submit","reset"],function(a){var f;Ca.pseudos[a]=(f=a,function(g){var x=g.nodeName.toLowerCase();return("input"===x||"button"===x)&&g.type===f})}),kg.prototype=Ca.filters=Ca.pseudos,Ca.setFilters=new kg,Sg=ya.tokenize=function(a,f){var g,x,C,I,L,z,j,G=hi[a+" "];if(G)return f?0:G.slice(0);for(L=a,z=[],j=Ca.preFilter;L;){for(I in g&&!(x=E_.exec(L))||(x&&(L=L.slice(x[0].length)||L),z.push(C=[])),g=!1,(x=wb.exec(L))&&(g=x.shift(),C.push({value:g,type:x[0].replace(t0," ")}),L=L.slice(g.length)),Ca.filter)Ca.filter.hasOwnProperty(I)&&(!(x=Om[I].exec(L))||j[I]&&!(x=j[I](x))||(g=x.shift(),C.push({value:g,type:I,matches:x}),L=L.slice(g.length)));if(!g)break}return f?L.length:L?ya.error(a):hi(a,z).slice(0)},_b=ya.compile=function(a,f){var g,x,C,I,L,z=[],j=[],G=af[a+" "];if(!G){for(g=(f=f||Sg(a)).length;g--;)((G=function K(ie){for(var le,pe,me,xe=ie.length,be=Ca.relative[ie[0].type],Ae=be||Ca.relative[" "],Le=be?1:0,Je=R_(function(je){return je===le},Ae,!0),pt=R_(function(je){return-1<If.call(le,je)},Ae,!0),Be=[function(je,et,At){var Nt=!be&&(At||et!==Rd)||((le=et).nodeType?Je:pt)(je,et,At);return le=null,Nt}];Le<xe;Le++)if(pe=Ca.relative[ie[Le].type])Be=[R_(Em(Be),pe)];else{if((pe=Ca.filter[ie[Le].type].apply(null,ie[Le].matches))[Hs]){for(me=++Le;me<xe&&!Ca.relative[ie[me].type];me++);return function je(et,At,Nt,Kt,Yt,dt){return Kt&&!Kt[Hs]&&(Kt=je(Kt)),Yt&&!Yt[Hs]&&(Yt=je(Yt,dt)),xh(function(vt,kt,Wt,bn){var Xn,vn,Gn,kn=[],Vn=[],Nn=kt.length,_r=vt||function(In,Mr,kr){for(var Uo=0,tt=Mr.length;Uo<tt;Uo++)ya(In,Mr[Uo],kr);return kr}(At||"*",Wt.nodeType?[Wt]:Wt,[]),mn=!et||!vt&&At?_r:Tg(_r,kn,et,Wt,bn),sr=Nt?Yt||(vt?et:Nn||Kt)?[]:kt:mn;if(Nt&&Nt(mn,sr,Wt,bn),Kt)for(Xn=Tg(sr,Vn),Kt(Xn,[],Wt,bn),vn=Xn.length;vn--;)(Gn=Xn[vn])&&(sr[Vn[vn]]=!(mn[Vn[vn]]=Gn));if(vt){if(Yt||et){if(Yt){for(Xn=[],vn=sr.length;vn--;)(Gn=sr[vn])&&Xn.push(mn[vn]=Gn);Yt(null,sr=[],Xn,bn)}for(vn=sr.length;vn--;)(Gn=sr[vn])&&-1<(Xn=Yt?If.call(vt,Gn):kn[vn])&&(vt[Xn]=!(kt[Xn]=Gn))}}else sr=Tg(sr===kt?sr.splice(Nn,sr.length):sr),Yt?Yt(null,kt,sr,bn):zp.apply(kt,sr)})}(1<Le&&Em(Be),1<Le&&Hp(ie.slice(0,Le-1).concat({value:" "===ie[Le-2].type?"*":""})).replace(t0,"$1"),pe,Le<me&&K(ie.slice(Le,me)),me<xe&&K(ie=ie.slice(me)),me<xe&&Hp(ie))}Be.push(pe)}return Em(Be)}(f[g]))[Hs]?z:j).push(G);(G=af(a,(x=j,I=0<(C=z).length,L=0<x.length,I?xh(te):te))).selector=a}function te(K,ie,le,pe,me){var xe,be,Ae,Le=0,Je="0",pt=K&&[],Be=[],je=Rd,et=K||L&&Ca.find.TAG("*",me),At=ic+=null==je?1:Math.random()||.1,Nt=et.length;for(me&&(Rd=ie!==hs&&ie);Je!==Nt&&null!=(xe=et[Je]);Je++){if(L&&xe){for(be=0;Ae=x[be++];)if(Ae(xe,ie,le)){pe.push(xe);break}me&&(ic=At)}I&&((xe=!Ae&&xe)&&Le--,K&&pt.push(xe))}if(Le+=Je,I&&Je!==Le){for(be=0;Ae=C[be++];)Ae(pt,Be,ie,le);if(K){if(0<Le)for(;Je--;)pt[Je]||Be[Je]||(Be[Je]=Bp.call(pe));Be=Tg(Be)}zp.apply(pe,Be),me&&!K&&0<Be.length&&1<Le+C.length&&ya.uniqueSort(pe)}return me&&(ic=At,Rd=je),pt}return G},Ri=ya.select=function(a,f,g,x){var C,I,L,z,j,G="function"==typeof a&&a,te=!x&&Sg(a=G.selector||a);if(g=g||[],1===te.length){if(2<(I=te[0]=te[0].slice(0)).length&&"ID"===(L=I[0]).type&&Oa.getById&&9===f.nodeType&&oc&&Ca.relative[I[1].type]){if(!(f=(Ca.find.ID(L.matches[0].replace(Jh,Hc),f)||[])[0]))return g;G&&(f=f.parentNode),a=a.slice(I.shift().value.length)}for(C=Om.needsContext.test(a)?0:I.length;C--&&!Ca.relative[z=(L=I[C]).type];)if((j=Ca.find[z])&&(x=j(L.matches[0].replace(Jh,Hc),Cg.test(I[0].type)&&Cb(f.parentNode)||f))){if(I.splice(C,1),!(a=x.length&&Hp(I)))return zp.apply(g,x),g;break}}return(G||_b(a,te))(x,f,!oc,g,Cg.test(a)&&Cb(f.parentNode)||f),g},Oa.sortStable=Hs.split("").sort(cd).join("")===Hs,Oa.detectDuplicates=!!gh,ci(),Oa.sortDetached=!0;var jc=document,n0=Array.prototype.push,Dg=Array.prototype.slice,Mb=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Bd=xs.Event,Wp=Qt.makeMap("children,contents,next,prev"),Ya=function(a,f,g,x){var C;if(ac(f))f=Uc(f,wh(a[0]));else if(f.length&&!f.nodeType){if(f=ko.makeArray(f),x)for(C=f.length-1;0<=C;C--)Ya(a,f[C],g,x);else for(C=0;C<f.length;C++)Ya(a,f[C],g,x);return a}if(f.nodeType)for(C=a.length;C--;)g.call(a[C],f);return a},fd=Qt.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),cl=Qt.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Ag={for:"htmlFor",class:"className",readonly:"readOnly"},Of={float:"cssFloat"},Yc={},Z1={},qa=/^\s*|\s*$/g,wh=function(a){return a?9===a.nodeType?a:a.ownerDocument:jc};function Ig(a,f,g){var x=[],C=a[f];for("string"!=typeof g&&g instanceof ko&&(g=g[0]);C&&9!==C.nodeType&&(void 0===g||!(C===g||"string"==typeof g&&ko(C).is(g)));)1===C.nodeType&&x.push(C),C=C[f];return x}function Sh(a,f,g,x){var C=[];for(x instanceof ko&&(x=x[0]);a;a=a[f])if(!g||a.nodeType===g){if(void 0!==x&&(a===x||"string"==typeof x&&ko(a).is(x)))break;C.push(a)}return C}function Qh(a,f,g){for(a=a[f];a;a=a[f])if(a.nodeType===g)return a;return null}function dd(a,f){var g=f.attr("style"),x=a.serialize(a.parse(g),f[0].nodeName)||null;f.attr("data-mce-style",x)}function Hl(a,f){var g,x,C=0;if(a)for(g=a.nodeType,a=a.previousSibling;a;a=a.previousSibling)x=a.nodeType,(!f||3!==x||x!==g&&a.nodeValue.length)&&(C++,g=x);return C}sf.fn=sf.prototype={constructor:sf,selector:"",context:null,length:0,init:function(a,f){var g,x,C=this;if(!a)return C;if(a.nodeType)return C.context=C[0]=a,C.length=1,C;if(f&&f.nodeType)C.context=f;else{if(f)return ko(a).attr(f);C.context=f=document}if(ac(a)){if(!(g="<"===(C.selector=a).charAt(0)&&">"===a.charAt(a.length-1)&&3<=a.length?[null,a,null]:Mb.exec(a)))return ko(f).find(a);if(g[1])for(x=Uc(a,wh(f)).firstChild;x;)n0.call(C,x),x=x.nextSibling;else{if(!(x=wh(f).getElementById(g[2])))return C;if(x.id!==g[2])return C.find(a);C.length=1,C[0]=x}}else this.add(a,!1);return C},toArray:function(){return Qt.toArray(this)},add:function(a,f){var g,x;if(ac(a))return this.add(ko(a));if(!1!==f)for(g=ko.unique(this.toArray().concat(ko.makeArray(a))),this.length=g.length,x=0;x<g.length;x++)this[x]=g[x];else n0.apply(this,ko.makeArray(a));return this},attr:function(a,f){var g,x=this;if("object"==typeof a)$u(a,function(C,I){x.attr(C,I)});else{if(!_h(f)){if(x[0]&&1===x[0].nodeType){if((g=Yc[a])&&g.get)return g.get(x[0],a);if(cl[a])return x.prop(a)?a:void 0;null===(f=x[0].getAttribute(a,2))&&(f=void 0)}return f}this.each(function(){var C;1===this.nodeType&&((C=Yc[a])&&C.set?C.set(this,f):null===f?this.removeAttribute(a,2):this.setAttribute(a,f,2))})}return x},removeAttr:function(a){return this.attr(a,null)},prop:function(a,f){var g=this;if("object"==typeof(a=Ag[a]||a))$u(a,function(x,C){g.prop(x,C)});else{if(!_h(f))return g[0]&&g[0].nodeType&&a in g[0]?g[0][a]:f;this.each(function(){1===this.nodeType&&(this[a]=f)})}return g},css:function(a,f){function g(z){return z.replace(/-(\D)/g,function(j,G){return G.toUpperCase()})}function x(z){return z.replace(/[A-Z]/g,function(j){return"-"+j})}var C,I,L=this;if("object"==typeof a)$u(a,function(z,j){L.css(z,j)});else if(_h(f))a=g(a),"number"!=typeof f||fd[a]||(f=f.toString()+"px"),L.each(function(){var z=this.style;if((I=Z1[a])&&I.set)I.set(this,f);else{try{this.style[Of[a]||a]=f}catch{}null!==f&&""!==f||(z.removeProperty?z.removeProperty(x(a)):z.removeAttribute(a))}});else{if(C=L[0],(I=Z1[a])&&I.get)return I.get(C);if(!C.ownerDocument.defaultView)return C.currentStyle?C.currentStyle[g(a)]:"";try{return C.ownerDocument.defaultView.getComputedStyle(C,null).getPropertyValue(x(a))}catch{return}}return L},remove:function(){for(var a,f=this.length;f--;)Bd.clean(a=this[f]),a.parentNode&&a.parentNode.removeChild(a);return this},empty:function(){for(var a,f=this.length;f--;)for(a=this[f];a.firstChild;)a.removeChild(a.firstChild);return this},html:function(a){var f;if(_h(a)){f=this.length;try{for(;f--;)this[f].innerHTML=a}catch{ko(this[f]).empty().append(a)}return this}return this[0]?this[0].innerHTML:""},text:function(a){var f;if(_h(a)){for(f=this.length;f--;)"innerText"in this[f]?this[f].innerText=a:this[0].textContent=a;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return Ya(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(a)})},prepend:function(){return Ya(this,arguments,function(a){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(a,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?Ya(this,arguments,function(a){this.parentNode.insertBefore(a,this)}):this},after:function(){return this[0]&&this[0].parentNode?Ya(this,arguments,function(a){this.parentNode.insertBefore(a,this.nextSibling)},!0):this},appendTo:function(a){return ko(a).append(this),this},prependTo:function(a){return ko(a).prepend(this),this},replaceWith:function(a){return this.before(a).remove()},wrap:function(a){return Ml(this,a)},wrapAll:function(a){return Ml(this,a,!0)},wrapInner:function(a){return this.each(function(){ko(this).contents().wrapAll(a)}),this},unwrap:function(){return this.parent().each(function(){ko(this).replaceWith(this.childNodes)})},clone:function(){var a=[];return this.each(function(){a.push(this.cloneNode(!0))}),ko(a)},addClass:function(a){return this.toggleClass(a,!0)},removeClass:function(a){return this.toggleClass(a,!1)},toggleClass:function(a,f){var g=this;return"string"!=typeof a||(-1!==a.indexOf(" ")?$u(a.split(" "),function(){g.toggleClass(this,f)}):g.each(function(x,C){var I,L=X1(C,a);L!==f&&(I=C.className,L?C.className=Kv((" "+I+" ").replace(" "+a+" "," ")):C.className+=I?" "+a:a)})),g},hasClass:function(a){return X1(this[0],a)},each:function(a){return $u(this,a)},on:function(a,f){return this.each(function(){Bd.bind(this,a,f)})},off:function(a,f){return this.each(function(){Bd.unbind(this,a,f)})},trigger:function(a){return this.each(function(){"object"==typeof a?Bd.fire(this,a.type,a):Bd.fire(this,a)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return ko(Dg.apply(this,arguments))},eq:function(a){return-1===a?this.slice(a):this.slice(a,+a+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(a){for(var f=[],g=0,x=this.length;g<x;g++)ko.find(a,this[g],f);return ko(f)},filter:function(a){return ko("function"==typeof a?Ma(this.toArray(),function(f,g){return a(g,f)}):ko.filter(a,this.toArray()))},closest:function(a){var f=[];return a instanceof ko&&(a=a[0]),this.each(function(g,x){for(;x;){if("string"==typeof a&&ko(x).is(a)){f.push(x);break}if(x===a){f.push(x);break}x=x.parentNode}}),ko(f)},offset:function(a){var f,g,x,C,I=0,L=0;return a?this.css(a):((f=this[0])&&(x=(g=f.ownerDocument).documentElement,f.getBoundingClientRect&&(I=(C=f.getBoundingClientRect()).left+(x.scrollLeft||g.body.scrollLeft)-x.clientLeft,L=C.top+(x.scrollTop||g.body.scrollTop)-x.clientTop)),{left:I,top:L})},push:n0,sort:Array.prototype.sort,splice:Array.prototype.splice},Qt.extend(sf,{extend:Qt.extend,makeArray:function(a){return a&&a===a.window||a.nodeType?[a]:Qt.toArray(a)},inArray:function(a,f){var g;if(f.indexOf)return f.indexOf(a);for(g=f.length;g--;)if(f[g]===a)return g;return-1},isArray:Qt.isArray,each:$u,trim:Kv,grep:Ma,find:ya,expr:ya.selectors,unique:ya.uniqueSort,text:ya.getText,contains:ya.contains,filter:function(a,f,g){var x=f.length;for(g&&(a=":not("+a+")");x--;)1!==f[x].nodeType&&f.splice(x,1);return 1===f.length?ko.find.matchesSelector(f[0],a)?[f[0]]:[]:ko.find.matches(a,f)}}),$u({parent:function(a){var f=a.parentNode;return f&&11!==f.nodeType?f:null},parents:function(a){return Ig(a,"parentNode")},next:function(a){return Qh(a,"nextSibling",1)},prev:function(a){return Qh(a,"previousSibling",1)},children:function(a){return Sh(a.firstChild,"nextSibling",1)},contents:function(a){return Qt.toArray(("iframe"===a.nodeName?a.contentDocument||a.contentWindow.document:a).childNodes)}},function(a,f){sf.fn[a]=function(g){var x=[];this.each(function(){var I=f.call(x,this,g,x);I&&(ko.isArray(I)?x.push.apply(x,I):x.push(I))}),1<this.length&&(Wp[a]||(x=ko.unique(x)),0===a.indexOf("parents")&&(x=x.reverse()));var C=ko(x);return g?C.filter(g):C}}),$u({parentsUntil:function(a,f){return Ig(a,"parentNode",f)},nextUntil:function(a,f){return Sh(a,"nextSibling",1,f).slice(1)},prevUntil:function(a,f){return Sh(a,"previousSibling",1,f).slice(1)}},function(a,f){sf.fn[a]=function(g,x){var C=[];this.each(function(){var L=f.call(C,this,g,C);L&&(ko.isArray(L)?C.push.apply(C,L):C.push(L))}),1<this.length&&(C=ko.unique(C),0!==a.indexOf("parents")&&"prevUntil"!==a||(C=C.reverse()));var I=ko(C);return x?I.filter(x):I}}),sf.fn.is=function(a){return!!a&&0<this.filter(a).length},sf.fn.init.prototype=sf.fn,sf.overrideDefaults=function(a){var f,g=function(x,C){return f=f||a(),0===arguments.length&&(x=f.element),new g.fn.init(x,C=C||f.context)};return ko.extend(g,this),g},sf.attrHooks=Yc,sf.cssHooks=Z1;var ko=sf,Gp=Qt.each,ei=Qt.grep,Iu=Fr.ie,Ef=/^([a-z0-9],?)+$/i,ba=function(a,f){function g(tt){return tt&&a&&wo(tt)?a.getElementById(tt):tt}function x(tt){return mn("string"==typeof tt?g(tt):tt)}function C(tt,xt,tn){var Cn,cn,Jn=x(tt);return void 0===(cn=Jn.length?(Cn=Uo[xt])&&Cn.get?Cn.get(Jn,xt):Jn.attr(xt):cn)?tn||"":cn}function I(tt){var xt=g(tt);return xt?xt.attributes:[]}function L(tt,xt,tn){""===tn&&(tn=null);var Cn,cn=x(tt),Jn=cn.attr(xt);cn.length&&((Cn=Uo[xt])&&Cn.set?Cn.set(cn,tn,xt):cn.attr(xt,tn),Jn!==tn&&f.onSetAttrib&&f.onSetAttrib({attrElm:cn,attrName:xt,attrValue:tn}))}function z(){return f.root_element||a.body}function j(tt,xt){return function(tn,Cn,cn){var Jn,ao=0,vo=0,Ra=tn.ownerDocument;if(cn=cn||tn,Cn){if(cn===tn&&Cn.getBoundingClientRect&&"static"===Nc(It.fromDom(tn),"position")){var Ro=Cn.getBoundingClientRect();return{x:ao=Ro.left+(Ra.documentElement.scrollLeft||tn.scrollLeft)-Ra.documentElement.clientLeft,y:vo=Ro.top+(Ra.documentElement.scrollTop||tn.scrollTop)-Ra.documentElement.clientTop}}for(var fo=Cn;fo&&fo!==cn&&fo.nodeType&&!Sa(fo,cn);)ao+=fo.offsetLeft||0,vo+=fo.offsetTop||0,fo=fo.offsetParent;for(fo=Cn.parentNode;fo&&fo!==cn&&fo.nodeType&&!Sa(fo,cn);)ao-=fo.scrollLeft||0,vo-=fo.scrollTop||0,fo=fo.parentNode;vo+=(Jn=It.fromDom(Cn),Dm.isFirefox()&&"table"===Ga(Jn)?km(Wu(Jn)).filter(function(ou){return"caption"===Ga(ou)}).bind(function(ou){return km(Ql(ou)).map(function(Al){return Al.dom.offsetTop<=ou.dom.offsetTop?-ou.dom.offsetHeight:0})}).getOr(0):0)}return{x:ao,y:vo}}(a.body,g(tt),xt)}function G(tt,xt,tn){var Cn=x(tt);return tn?Cn.css(xt):("float"===(xt=xt.replace(/-(\D)/g,function(cn,Jn){return Jn.toUpperCase()}))&&(xt=Fr.browser.isIE()?"styleFloat":"cssFloat"),Cn[0]&&Cn[0].style?Cn[0].style[xt]:void 0)}function te(tt){var xt=G(tt=g(tt),"width"),tn=G(tt,"height");return-1===xt.indexOf("px")&&(xt=0),-1===tn.indexOf("px")&&(tn=0),{w:parseInt(xt,10)||tt.offsetWidth||tt.clientWidth,h:parseInt(tn,10)||tt.offsetHeight||tt.clientHeight}}function K(tt,xt){if(!tt)return!1;if(!Array.isArray(tt)){if("*"===xt)return 1===tt.nodeType;if(Ef.test(xt)){for(var tn=xt.toLowerCase().split(/,/),Cn=tt.nodeName.toLowerCase(),cn=tn.length-1;0<=cn;cn--)if(tn[cn]===Cn)return!0;return!1}if(tt.nodeType&&1!==tt.nodeType)return!1}var Jn=Array.isArray(tt)?tt:[tt];return 0<ya(xt,Jn[0].ownerDocument||Jn[0],null,Jn).length}function ie(tt,xt,tn,Cn){var cn,Jn=[],ao=g(tt);for(Cn=void 0===Cn,tn=tn||("BODY"!==z().nodeName?z().parentNode:null),Qt.is(xt,"string")&&(xt="*"===(cn=xt)?function(vo){return 1===vo.nodeType}:function(vo){return K(vo,cn)});ao&&!(ao===tn||cr(ao.nodeType)||il(ao)||Yh(ao));){if(!xt||"function"==typeof xt&&xt(ao)){if(!Cn)return[ao];Jn.push(ao)}ao=ao.parentNode}return Cn?Jn:null}function le(tt,xt,tn){var Cn=xt;if(tt)for("string"==typeof xt&&(Cn=function(cn){return K(cn,xt)}),tt=tt[tn];tt;tt=tt[tn])if("function"==typeof Cn&&Cn(tt))return tt;return null}function pe(tt,xt,tn){var Cn,cn="string"==typeof tt?g(tt):tt;return!!cn&&(Qt.isArray(cn)&&(cn.length||0===cn.length)?(Cn=[],Gp(cn,function(Jn,ao){Jn&&Cn.push(xt.call(tn,"string"==typeof Jn?g(Jn):Jn,ao))}),Cn):xt.call(tn||this,cn))}function me(tt,xt){x(tt).each(function(tn,Cn){Gp(xt,function(cn,Jn){L(Cn,Jn,cn)})})}function xe(tt,xt){var tn=x(tt);Iu?tn.each(function(Cn,cn){if(!1!==cn.canHaveHTML){for(;cn.firstChild;)cn.removeChild(cn.firstChild);try{cn.innerHTML="<br>"+xt,cn.removeChild(cn.firstChild)}catch{ko("<div></div>").html("<br>"+xt).contents().slice(1).appendTo(cn)}return xt}}):tn.html(xt)}function be(tt,xt,tn,Cn,cn){return pe(tt,function(Jn){var ao="string"==typeof xt?a.createElement(xt):xt;return me(ao,tn),Cn&&("string"!=typeof Cn&&Cn.nodeType?ao.appendChild(Cn):"string"==typeof Cn&&xe(ao,Cn)),cn?ao:Jn.appendChild(ao)})}function Ae(tt,xt,tn){return be(a.createElement(tt),tt,xt,tn,!0)}function Le(tt,xt){var tn=x(tt);return(xt?tn.each(function(){for(var Cn;Cn=this.firstChild;)3===Cn.nodeType&&0===Cn.data.length?this.removeChild(Cn):this.parentNode.insertBefore(Cn,this)}):tn).remove(),1<tn.length?tn.toArray():tn[0]}function Je(tt,xt,tn){x(tt).toggleClass(xt,tn).each(function(){""===this.className&&ko(this).attr("class",null)})}function pt(tt,xt,tn){return pe(xt,function(Cn){return Qt.is(Cn,"array")&&(tt=tt.cloneNode(!0)),tn&&Gp(ei(Cn.childNodes),function(cn){tt.appendChild(cn)}),Cn.parentNode.replaceChild(tt,Cn)})}function Be(tt){if(co(tt)){var xt="a"===tt.nodeName.toLowerCase()&&!C(tt,"href")&&C(tt,"id");return C(tt,"name")||C(tt,"data-mce-bookmark")||xt?1:void 0}}function je(){return a.createRange()}function et(tt){if(tt&&co(tt)){var xt=tt.getAttribute("data-mce-contenteditable");return xt&&"inherit"!==xt?xt:"inherit"!==tt.contentEditable?tt.contentEditable:null}return null}void 0===f&&(f={});var At,Nt,Kt,Yt,dt,vt,kt={},Wt=window,bn={},Xn=0,vn=Fc.forElement(It.fromDom(a),{contentCssCors:f.contentCssCors,referrerPolicy:f.referrerPolicy}),Gn=[],kn=f.schema||Wn({}),Vn=Un({url_converter:f.url_converter,url_converter_scope:f.url_converter_scope},f.schema),Nn=f.ownEvents?new xs:xs.Event,_r=kn.getBlockElements(),mn=ko.overrideDefaults(function(){return{context:a,element:kr.getRoot()}}),sr=Vc.encodeAllRaw,In=function(tt,xt,tn,Cn){if(Qt.isArray(tt)){for(var cn=tt.length,Jn=[];cn--;)Jn[cn]=In(tt[cn],xt,tn,Cn);return Jn}return!f.collect||tt!==a&&tt!==Wt||Gn.push([tt,xt,tn,Cn]),Nn.bind(tt,xt,tn,Cn||kr)},Mr=function(tt,xt,tn){if(Qt.isArray(tt)){for(var Cn=tt.length,cn=[];Cn--;)cn[Cn]=Mr(tt[Cn],xt,tn);return cn}if(0<Gn.length&&(tt===a||tt===Wt))for(Cn=Gn.length;Cn--;){var Jn=Gn[Cn];tt!==Jn[0]||xt&&xt!==Jn[1]||tn&&tn!==Jn[2]||Nn.unbind(Jn[0],Jn[1],Jn[2])}return Nn.unbind(tt,xt,tn)},kr={doc:a,settings:f,win:Wt,files:bn,stdMode:!0,boxModel:!0,styleSheetLoader:vn,boundEvents:Gn,styles:Vn,schema:kn,events:Nn,isBlock:function(tt){if("string"==typeof tt)return!!_r[tt];if(tt){var xt=tt.nodeType;if(xt)return!(1!==xt||!_r[tt.nodeName])}return!1},$:mn,$$:x,root:null,clone:function(tt,xt){if(!Iu||1!==tt.nodeType||xt)return tt.cloneNode(xt);var tn=a.createElement(tt.nodeName);return Gp(I(tt),function(Cn){L(tn,Cn.nodeName,C(tt,Cn.nodeName))}),tn},getRoot:z,getViewPort:function(tt){var xt=Ai(tt);return{x:xt.x,y:xt.y,w:xt.width,h:xt.height}},getRect:function(tt){var xt=j(tt=g(tt)),tn=te(tt);return{x:xt.x,y:xt.y,w:tn.w,h:tn.h}},getSize:te,getParent:function(tt,xt,tn){var Cn=ie(tt,xt,tn,!1);return Cn&&0<Cn.length?Cn[0]:null},getParents:ie,get:g,getNext:function(tt,xt){return le(tt,xt,"nextSibling")},getPrev:function(tt,xt){return le(tt,xt,"previousSibling")},select:function(tt,xt){return ya(tt,g(xt)||f.root_element||a,[])},is:K,add:be,create:Ae,createHTML:function(tt,xt,tn){var Cn,cn="";for(Cn in cn+="<"+tt,xt)Ao(xt,Cn)&&(cn+=" "+Cn+'="'+sr(xt[Cn])+'"');return void 0!==tn?cn+">"+tn+"</"+tt+">":cn+" />"},createFragment:function(tt){var xt,tn=a.createElement("div"),Cn=a.createDocumentFragment();for(Cn.appendChild(tn),tt&&(tn.innerHTML=tt);xt=tn.firstChild;)Cn.appendChild(xt);return Cn.removeChild(tn),Cn},remove:Le,setStyle:function(tt,xt,tn){var Cn=wo(xt)?x(tt).css(xt,tn):x(tt).css(xt);f.update_styles&&dd(Vn,Cn)},getStyle:G,setStyles:function(tt,xt){var tn=x(tt).css(xt);f.update_styles&&dd(Vn,tn)},removeAllAttribs:function(tt){return pe(tt,function(xt){for(var tn=xt.attributes,Cn=tn.length-1;0<=Cn;Cn--)xt.removeAttributeNode(tn.item(Cn))})},setAttrib:L,setAttribs:me,getAttrib:C,getPos:j,parseStyle:function(tt){return Vn.parse(tt)},serializeStyle:function(tt,xt){return Vn.serialize(tt,xt)},addStyle:function(tt){var xt,tn;if(kr!==ba.DOM&&a===document){if(kt[tt])return;kt[tt]=!0}(tn=a.getElementById("mceDefaultStyles"))||((tn=a.createElement("style")).id="mceDefaultStyles",tn.type="text/css",(xt=a.getElementsByTagName("head")[0]).firstChild?xt.insertBefore(tn,xt.firstChild):xt.appendChild(tn)),tn.styleSheet?tn.styleSheet.cssText+=tt:tn.appendChild(a.createTextNode(tt))},loadCSS:function(tt){Pn((tt=tt||"").split(","),function(xt){bn[xt]=!0,vn.load(xt,_n)})},addClass:function(tt,xt){x(tt).addClass(xt)},removeClass:function(tt,xt){Je(tt,xt,!1)},hasClass:function(tt,xt){return x(tt).hasClass(xt)},toggleClass:Je,show:function(tt){x(tt).show()},hide:function(tt){x(tt).hide()},isHidden:function(tt){return"none"===x(tt).css("display")},uniqueId:function(tt){return(tt||"mce_")+Xn++},setHTML:xe,getOuterHTML:function(tt){var xt="string"==typeof tt?g(tt):tt;return co(xt)?xt.outerHTML:ko("<div></div>").append(ko(xt).clone()).html()},setOuterHTML:function(tt,xt){x(tt).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=xt)}catch{}Le(ko(this).html(xt),!0)})},decode:Vc.decode,encode:sr,insertAfter:function(tt,xt){var tn=g(xt);return pe(tt,function(Cn){var cn=tn.parentNode,Jn=tn.nextSibling;return Jn?cn.insertBefore(Cn,Jn):cn.appendChild(Cn),Cn})},replace:pt,rename:function(tt,xt){var tn;return tt.nodeName!==xt.toUpperCase()&&(tn=Ae(xt),Gp(I(tt),function(Cn){L(tn,Cn.nodeName,C(tt,Cn.nodeName))}),pt(tn,tt,!0)),tn||tt},findCommonAncestor:function(tt,xt){for(var tn,Cn=tt;Cn;){for(tn=xt;tn&&Cn!==tn;)tn=tn.parentNode;if(Cn===tn)break;Cn=Cn.parentNode}return!Cn&&tt.ownerDocument?tt.ownerDocument.documentElement:Cn},toHex:function(tt){return Vn.toHex(Qt.trim(tt))},run:pe,getAttribs:I,isEmpty:function(tt,xt){var tn,Cn,cn=0;if(Be(tt))return!1;if(tt=tt.firstChild){var Jn=new Ks(tt,tt.parentNode),ao=kn?kn.getWhiteSpaceElements():{};xt=xt||(kn?kn.getNonEmptyElements():null);do{if(tn=tt.nodeType,co(tt)){var vo=tt.getAttribute("data-mce-bogus");if(vo){tt=Jn.next("all"===vo);continue}if(Cn=tt.nodeName.toLowerCase(),xt&&xt[Cn]){if("br"!==Cn)return!1;cn++,tt=Jn.next();continue}if(Be(tt))return!1}if(8===tn||3===tn&&!U(tt.nodeValue)||3===tn&&tt.parentNode&&ao[tt.parentNode.nodeName]&&U(tt.nodeValue))return!1;tt=Jn.next()}while(tt)}return cn<=1},createRng:je,nodeIndex:Hl,split:function(tt,xt,tn){var Cn,cn,Jn,ao=je();if(tt&&xt)return ao.setStart(tt.parentNode,Hl(tt)),ao.setEnd(xt.parentNode,Hl(xt)),Cn=ao.extractContents(),(ao=je()).setStart(xt.parentNode,Hl(xt)+1),ao.setEnd(tt.parentNode,Hl(tt)+1),cn=ao.extractContents(),(Jn=tt.parentNode).insertBefore(wg(kr,Cn),tt),Jn.insertBefore(tn||xt,tt),Jn.insertBefore(wg(kr,cn),tt),Le(tt),tn||xt},bind:In,unbind:Mr,fire:function(tt,xt,tn){return Nn.fire(tt,xt,tn)},getContentEditable:et,getContentEditableParent:function(tt){for(var xt=z(),tn=null;tt&&tt!==xt&&null===(tn=et(tt));tt=tt.parentNode);return tn},destroy:function(){if(0<Gn.length)for(var tt=Gn.length;tt--;){var xt=Gn[tt];Nn.unbind(xt[0],xt[1],xt[2])}wn(bn,function(tn,Cn){vn.unload(Cn),delete bn[Cn]}),ya.setDocument&&ya.setDocument()},isChildOf:function(tt,xt){if(Iu){for(;tt;){if(xt===tt)return!0;tt=tt.parentNode}return!1}return tt===xt||xt.contains(tt)},dumpRng:function(tt){return"startContainer: "+tt.startContainer.nodeName+", startOffset: "+tt.startOffset+", endContainer: "+tt.endContainer.nodeName+", endOffset: "+tt.endOffset}},Uo=(At=Vn,Kt=Bn(kr),dt={set:function(tt,xt,tn){Nt.url_converter&&null!==xt&&(xt=Nt.url_converter.call(Nt.url_converter_scope||Kt(),xt,tn,tt[0])),tt.attr("data-mce-"+tn,xt).attr(tn,xt)},get:function(tt,xt){return tt.attr("data-mce-"+xt)||tt.attr(xt)}},vt={style:{set:function(tt,xt){null===xt||"object"!=typeof xt?(Yt&&tt.attr("data-mce-style",xt),null!==xt&&"string"==typeof xt?(tt.removeAttr("style"),tt.css(At.parse(xt))):tt.attr("style",xt)):tt.css(xt)},get:function(tt){var xt=tt.attr("data-mce-style")||tt.attr("style");return At.serialize(At.parse(xt),tt[0].nodeName)}}},(Yt=(Nt=f).keep_values)&&(vt.href=vt.src=dt),vt);return kr};ba.DOM=ba(document),ba.nodeIndex=Hl;var ea=ba.DOM,$v=Qt.each,mu=Qt.grep,qc=(Xa.prototype._setReferrerPolicy=function(a){this.settings.referrerPolicy=a},Xa.prototype.loadScript=function(a,f,g){function x(){C.remove(I),L&&(L.onerror=L.onload=L=null)}var C=ea,I=C.uniqueId(),L=document.createElement("script");L.id=I,L.type="text/javascript",L.src=Qt._addCacheSuffix(a),this.settings.referrerPolicy&&C.setAttrib(L,"referrerpolicy",this.settings.referrerPolicy),L.onload=function(){x(),f()},L.onerror=function(){x(),Ur(g)?g():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+a)},(document.getElementsByTagName("head")[0]||document.body).appendChild(L)},Xa.prototype.isDone=function(a){return 2===this.states[a]},Xa.prototype.markDone=function(a){this.states[a]=2},Xa.prototype.add=function(a,f,g,x){var C=this.states[a];this.queue.push(a),void 0===C&&(this.states[a]=0),f&&(this.scriptLoadedCallbacks[a]||(this.scriptLoadedCallbacks[a]=[]),this.scriptLoadedCallbacks[a].push({success:f,failure:x,scope:g||this}))},Xa.prototype.load=function(a,f,g,x){return this.add(a,f,g,x)},Xa.prototype.remove=function(a){delete this.states[a],delete this.scriptLoadedCallbacks[a]},Xa.prototype.loadQueue=function(a,f,g){this.loadScripts(this.queue,a,f,g)},Xa.prototype.loadScripts=function(a,f,g,x){function C(j,G){$v(I.scriptLoadedCallbacks[G],function(te){Ur(te[j])&&te[j].call(te.scope)}),I.scriptLoadedCallbacks[G]=void 0}var I=this,L=[];I.queueLoadedCallbacks.push({success:f,failure:x,scope:g||this});var z=function(){var j,G=mu(a);a.length=0,$v(G,function(te){2!==I.states[te]?3!==I.states[te]?1!==I.states[te]&&(I.states[te]=1,I.loading++,I.loadScript(te,function(){I.states[te]=2,I.loading--,C("success",te),z()},function(){I.states[te]=3,I.loading--,L.push(te),C("failure",te),z()})):C("failure",te):C("success",te)}),I.loading||(j=I.queueLoadedCallbacks.slice(0),I.queueLoadedCallbacks.length=0,$v(j,function(te){0===L.length?Ur(te.success)&&te.success.call(te.scope):Ur(te.failure)&&te.failure.call(te.scope,L)}))};z()},Xa.ScriptLoader=new Xa,Xa);function Xa(a){void 0===a&&(a={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=a}function Os(a){var f=a;return{get:function(){return f},set:function(g){f=g}}}function Ch(){return Sr(Pm,Jv.get())}var Pm={},Jv=Os("en"),hd={getData:function(){return Hn(Pm,function(a){return hr({},a)})},setCode:function(a){a&&Jv.set(a)},getCode:function(){return Jv.get()},add:function(a,f){var g=Pm[a];g||(Pm[a]=g={}),wn(f,function(x,C){g[C.toLowerCase()]=x})},translate:function(a){function f(G){return Ur(G)?Object.prototype.toString.call(G):z(G)?"":""+G}function g(G){var te=f(G);return Sr(L,te.toLowerCase()).map(f).getOr(te)}function x(G){return G.replace(/{context:\w+}$/,"")}var C,I,L=Ch().getOr({}),z=function(G){return""===G||null==G};if(z(a))return"";if(Va(C=a)&&po(C,"raw"))return f(a.raw);if(Yo(I=a)&&1<I.length){var j=a.slice(1);return x(g(a[0]).replace(/\{([0-9]+)\}/g,function(G,te){return po(j,te)?f(j[te]):G}))}return x(g(a))},isRtl:function(){return Ch().bind(function(a){return Sr(a,"_dir")}).exists(function(a){return"rtl"===a})},hasCode:function(a){return po(Pm,a)}},ws=function(){function a(G,te){Pn(rr(z,function(K){return K.name===G&&K.state===te}),function(K){return K.callback()})}function f(G){return(L[G]?L[G].dependencies:void 0)||[]}function g(G,te){return"object"==typeof te?te:"string"==typeof G?{prefix:"",resource:te,suffix:""}:{prefix:G.prefix,resource:te,suffix:G.suffix}}function x(G,te,K){void 0===K&&(K="added"),po(L,G)&&"added"===K||po(I,G)&&"loaded"===K?te():z.push({name:G,state:K,callback:te})}var C=[],I={},L={},z=[],j=function(G,te,K,ie,le){var pe,me;I[G]||(0!==(pe="string"==typeof te?te:te.prefix+te.resource+te.suffix).indexOf("/")&&-1===pe.indexOf("://")&&(pe=ws.baseURL+"/"+pe),I[G]=pe.substring(0,pe.lastIndexOf("/")),me=function(){var xe,be,Ae;a(G,"loaded"),xe=te,be=K,Ae=ie,Pn(f(G),function(Le){var Je=g(xe,Le);j(Je.resource,Je,void 0,void 0)}),be&&be.call(Ae||qc)},L[G]?me():qc.ScriptLoader.add(pe,me,ie,le))};return{items:C,urls:I,lookup:L,_listeners:z,get:function(G){if(L[G])return L[G].instance},dependencies:f,requireLangPack:function(G,te){!1!==ws.languageLoad&&x(G,function(){var K=hd.getCode();!K||te&&-1===(","+(te||"")+",").indexOf(","+K+",")||qc.ScriptLoader.add(I[G]+"/langs/"+K+".js")},"loaded")},add:function(G,te,K){var ie=te;return C.push(ie),L[G]={instance:ie,dependencies:K},a(G,"added"),ie},remove:function(G){delete I[G],delete L[G]},createUrl:g,addComponents:function(G,te){var K=I[G];Pn(te,function(ie){qc.ScriptLoader.add(K+"/"+ie)})},load:j,waitFor:x}};function zd(){var a,f,g=(a=_n,f=Os($.none()),{clear:function(){x(),f.set($.none())},isSet:function(){return f.get().isSome()},get:function(){return f.get()},set:function(C){x(),f.set($.some(C))}});function x(){return f.get().each(a)}return hr(hr({},g),{on:function(C){return g.get().each(C)}})}function K1(a,f){var g=null;return{cancel:function(){qr(g)||(clearTimeout(g),g=null)},throttle:function(){for(var x=[],C=0;C<arguments.length;C++)x[C]=arguments[C];qr(g)&&(g=setTimeout(function(){g=null,a.apply(null,x)},f))}}}function Mh(a,f){function g(){qr(x)||(clearTimeout(x),x=null)}var x=null;return{cancel:g,throttle:function(){for(var C=[],I=0;I<arguments.length;I++)C[I]=arguments[I];g(),x=setTimeout(function(){x=null,a.apply(null,C)},f)}}}function Fd(a,f){var g=Zs(a,f);return void 0===g||""===g?[]:g.split(" ")}function ep(a){return void 0!==a.dom.classList}function Wl(a,f){var g,x,C;ep(a)?a.dom.classList.add(f):(x=f,C=Fd(g=a,"class").concat([x]),Bl(g,"class",C.join(" ")))}function uf(a,f){return ep(a)&&a.dom.classList.contains(f)}function xc(a,f){return fn(g=void 0===a?document:a.dom)?[]:mt(g.querySelectorAll(f),It.fromDom);var g}function kb(a,f){function g(z,j){return(G=z.dom)&&G.hasAttribute&&G.hasAttribute(j)?$.some(Zs(z,j)):$.none();var G}var x=a.selection.getRng(),C=It.fromDom(x.startContainer),I=It.fromDom(a.getBody()),L=f.fold(function(){return"."+lf()},function(z){return"["+Rf()+'="'+z+'"]'});return Df(Io(C,x.startOffset).getOr(C),L,function(z){return gn(z,I)}).bind(function(z){return g(z,""+Ou()).bind(function(j){return g(z,""+Rf()).map(function(G){var te=dl(a,j);return{uid:j,name:G,elements:te}})})})}function Qv(a){var f=(new Date).getTime();return a+"_"+Math.floor(1e9*Math.random())+ ++wc+String(f)}function Rm(a,f){var g,x,C=lu(a).dom,I=It.fromDom(C.createDocumentFragment());Lc(I,(g=f,(x=(C||document).createElement("div")).innerHTML=g,Wu(It.fromDom(x)))),Sp(a),Fs(a,I)}function Vd(a,f){return It.fromDom(a.dom.cloneNode(f))}function tp(a){return Vd(a,!1)}function Go(a){return Vd(a,!0)}function Hd(a,f,g){function x(I){for(var L;(L=C[I]())&&!Ar(L)&&!g(L););return $.from(L).filter(Ar)}void 0===g&&(g=Yn);var C=new Ks(a,f);return{current:function(){return $.from(C.current()).filter(Ar)},next:function(){return x("next")},prev:function(){return x("prev")},prev2:function(){return x("prev2")}}}function Og(a,f){var g=f||function(C){return a.isBlock(C)||os(C)||oo(C)},x=function(C,I,L,z){if(Ar(C)){var j=z(C,I,C.data);if(-1!==j)return $.some({container:C,offset:j})}return L().bind(function(G){return x(G.container,G.offset,L,z)})};return{backwards:function(C,I,L,z){var j=Hd(C,z,g);return x(C,I,function(){return j.prev().map(function(G){return{container:G,offset:G.length}})},L).getOrNull()},forwards:function(C,I,L,z){var j=Hd(C,z,g);return x(C,I,function(){return j.next().map(function(G){return{container:G,offset:0}})},L).getOrNull()}}}function _c(a){return a?{left:$s(a.left),top:$s(a.top),bottom:$s(a.bottom),right:$s(a.right),width:$s(a.width),height:$s(a.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function $1(a,f){return a=_c(a),f||(a.left=a.left+a.width),a.right=a.left,a.width=0,a}function fl(a,f,g){return 0<=a&&a<=Math.min(f.height,g.height)/2}function kh(a,f){var g=Math.min(f.height/2,a.height/2);return a.bottom-g<f.top||!(a.top>f.bottom)&&fl(f.top-a.bottom,a,f)}function Eg(a,f){return a.top>f.bottom||!(a.bottom<f.top)&&fl(f.bottom-a.top,a,f)}function L_(a,f,g){return f>=a.left&&f<=a.right&&g>=a.top&&g<=a.bottom}function Th(a){var f=a.startContainer,g=a.startOffset;return f.hasChildNodes()&&a.endOffset===g+1?f.childNodes[g]:null}function Pf(a,f){if(co(a)&&a.hasChildNodes()){var g=a.childNodes;return g[(x=g.length-1,Math.min(Math.max(f,0),x))]}return a;var x}function r0(a){return"string"==typeof a&&768<=a.charCodeAt(0)&&Xc.test(a)}function bi(a){return"createRange"in a?a.createRange():ba.DOM.createRng()}function ey(a){return a&&/[\r\n\t ]/.test(a)}function Tb(a){return a.setStart&&a.setEnd}function Oi(a){var f=a.startContainer,g=a.startOffset;if(ey(a.toString())&&N_(f.parentNode)&&Ar(f)){var x=f.data;return ey(x[g-1])||ey(x[g+1])?1:void 0}}function o0(a){return 0===a.left&&0===a.right&&0===a.top&&0===a.bottom}function Up(a,f){var g=$1(a,f);return g.width=1,g.right=g.left+1,g}ws.languageLoad=!0,ws.baseURL="",ws.PluginManager=ws(),ws.ThemeManager=ws();var i0=function(a,f){var g=[];return Pn(Wu(a),function(x){g=(g=f(x)?g.concat([x]):g).concat(i0(x,f))}),g},lf=Bn("mce-annotation"),Rf=Bn("data-mce-annotation"),Ou=Bn("data-mce-annotation-uid"),dl=function(a,f){return xc(It.fromDom(a.getBody()),"["+Ou()+'="'+f+'"]')},wc=0,$s=Math.round,Xc=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Ju=co,Db=E,So=Cf("display","block table"),Lm=Cf("float","left right"),jn=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];return function(g){for(var x=0;x<a.length;x++)if(!a[x](g))return!1;return!0}}(Ju,Db,an(Lm)),N_=an(Cf("white-space","pre pre-line pre-wrap")),ty=Ar,a0=os,Ss=ba.nodeIndex,Pg=function(a,f){if(!(f<0&&co(a)&&a.hasChildNodes()))return Pf(a,f)},Wd=function(a){var f=a.getClientRects(),g=_c(0<f.length?f[0]:a.getBoundingClientRect());return!Tb(a)&&a0(a)&&o0(g)?function(x){var C=x.ownerDocument,I=bi(C),L=C.createTextNode(xa),z=x.parentNode;z.insertBefore(L,x),I.setStart(L,0),I.setEnd(L,1);var j=_c(I.getBoundingClientRect());return z.removeChild(L),j}(a):o0(g)&&Tb(a)?function(x){var I=x.endContainer,L=x.startOffset,z=x.endOffset;if(x.startContainer===I&&Ar(I)&&0===L&&1===z){var j=x.cloneRange();return j.setEndAfter(I),Wd(j)}return null}(a):g},en=function(a,f,g){function x(){return g=g||function(C){function I(ie){var le;0!==ie.height&&(0<z.length&&ie.left===(le=z[z.length-1]).left&&ie.top===le.top&&ie.bottom===le.bottom&&ie.right===le.right||z.push(ie))}function L(ie,le){var pe=bi(ie.ownerDocument);if(le<ie.data.length){if(r0(ie.data[le]))return z;if(r0(ie.data[le-1])&&(pe.setStart(ie,le),pe.setEnd(ie,le+1),!Oi(pe)))return I(Up(Wd(pe),!1)),z}0<le&&(pe.setStart(ie,le-1),pe.setEnd(ie,le),Oi(pe)||I(Up(Wd(pe),!1))),le<ie.data.length&&(pe.setStart(ie,le),pe.setEnd(ie,le+1),Oi(pe)||I(Up(Wd(pe),!0)))}var z=[],j=C.container(),G=C.offset();if(ty(j))return L(j,G),z;if(Ju(j))if(C.isAtEnd()){var te=Pg(j,G);ty(te)&&L(te,te.data.length),jn(te)&&!a0(te)&&I(Up(Wd(te),!1))}else{if(te=Pg(j,G),ty(te)&&L(te,0),jn(te)&&C.isAtEnd())return I(Up(Wd(te),!1)),z;var K=Pg(C.container(),C.offset()-1);jn(K)&&!a0(K)&&(!So(K)&&!So(te)&&jn(te)||I(Up(Wd(K),!1))),jn(te)&&I(Up(Wd(te),!0))}return z}(en(a,f))}return{container:Bn(a),offset:Bn(f),toRange:function(){var C=bi(a.ownerDocument);return C.setStart(a,f),C.setEnd(a,f),C},getClientRects:x,isVisible:function(){return 0<x().length},isAtStart:function(){return ty(a),0===f},isAtEnd:function(){return ty(a)?f>=a.data.length:f>=a.childNodes.length},isEqual:function(C){return C&&a===C.container()&&f===C.offset()},getNode:function(C){return Pg(a,C?f-1:f)}}};function Rg(a,f){Ar(f)&&0===f.data.length&&a.remove(f)}function Nm(a,f,g){var x,C,I,L,z,j,G;Yh(g)?(I=a,L=f,j=$.from((z=g).firstChild),G=$.from(z.lastChild),L.insertNode(z),j.each(function(te){return Rg(I,te.previousSibling)}),G.each(function(te){return Rg(I,te.nextSibling)})):(x=a,f.insertNode(C=g),Rg(x,C.previousSibling),Rg(x,C.nextSibling))}function Bm(a){return function(f){return a===f}}function ny(a){var f,g,x,C;return(Nf(a)?"text()":a.nodeName.toLowerCase())+"["+(x=Ys(g=Gm(zg(f=a)),Bm(f),f),C=rs(g=g.slice(0,x+1),function(I,L,z){return Nf(L)&&Nf(g[z-1])&&I++,I},0),Ys(g=ni(g,Nl([f.nodeName])),Bm(f),f)-C+"]")}function Dh(a,f){var g,x,C,I=[],L=f.container(),z=f.offset();return Nf(L)?g=function(j,G){for(;(j=j.previousSibling)&&Nf(j);)G+=j.data.length;return G}(L,z):(z>=(x=L.childNodes).length?(g="after",z=x.length-1):g="before",L=x[z]),I.push(ny(L)),C=ni(function(j,G){var te=[];for(G=G.parentNode;G!==j;G=G.parentNode)te.push(G);return te}(a,L),an(ol)),(I=I.concat(ns(C,ny))).reverse().join("/")+","+g}function Cs(a,f){if(!f)return null;var g=f.split(","),x=g[0].split("/"),C=1<g.length?g[1]:"before",I=rs(x,function(L,z){var j,G,te,K,ie=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(z);return ie?("text()"===ie[1]&&(ie[1]="#text"),j=L,G=ie[1],te=parseInt(ie[2],10),K=ni(K=Gm(j),function(le,pe){return!Nf(le)||!Nf(K[pe-1])}),(K=ni(K,Nl([G])))[te]):null},a);return I?Nf(I)?function(L,z){for(var j,G=L,te=0;Nf(G);){if(j=G.data.length,te<=z&&z<=te+j){L=G,z-=te;break}if(!Nf(G.nextSibling)){L=G,z=j;break}te+=j,G=G.nextSibling}return Nf(L)&&z>L.data.length&&(z=L.data.length),en(L,z)}(I,parseInt(C,10)):(C="after"===C?V_(I)+1:V_(I),en(I.parentNode,C)):null}function Js(a,f,g,x,C){var I,L=x[C?"startContainer":"endContainer"],z=x[C?"startOffset":"endOffset"],j=[],G=0,te=a.getRoot();for(Ar(L)?j.push(g?function(K,ie,le){for(var pe=K(ie.data.slice(0,le)).length,me=ie.previousSibling;me&&Ar(me);me=me.previousSibling)pe+=K(me.data).length;return pe}(f,L,z):z):(z>=(I=L.childNodes).length&&I.length&&(G=1,z=Math.max(0,I.length-1)),j.push(a.nodeIndex(I[z],g)+G));L&&L!==te;L=L.parentNode)j.push(a.nodeIndex(L,g));return j}function Lg(a,f,g){var x=0;return Qt.each(a.select(f),function(C){if("all"!==C.getAttribute("data-mce-bogus"))return C!==g&&void x++}),x}function B_(a,f){var g,x=f?"start":"end",C=a[x+"Container"],I=a[x+"Offset"];co(C)&&"TR"===C.nodeName&&(C=(g=C.childNodes)[Math.min(f?I:I-1,g.length-1)])&&a["set"+(f?"Start":"End")](C,I=f?0:C.childNodes.length)}function J1(a){return B_(a,!0),B_(a,!1),a}function s0(a,f){var g;return co(a)&&(a=Pf(a,f),Fg(a))?a:Nr(a)?(g=(a=Ar(a)&&sl(a)?a.parentNode:a).previousSibling,Fg(g)||Fg(g=a.nextSibling)?g:void 0):void 0}function Q1(a,f,g){var x=g.getNode(),C=x?x.nodeName:null,I=g.getRng();if(Fg(x)||"IMG"===C)return{name:C,index:Lg(g.dom,C,x)};var L,z,j,G,te,K,ie,le=s0((L=I).startContainer,L.startOffset)||s0(L.endContainer,L.endOffset);return le?{name:C=le.tagName,index:Lg(g.dom,C,le)}:(K=(j=g).dom,(ie={}).start=Js(K,z=a,G=f,te=I,!0),j.isCollapsed()||(ie.end=Js(K,z,G,te,!1)),T(te)&&(ie.isFakeCaret=!0),ie)}function ex(a,f,g){var x={"data-mce-type":"bookmark",id:f,style:"overflow:hidden;line-height:0px"};return g?a.create("span",x,"&#xFEFF;"):a.create("span",x)}function ry(a,f){var g=a.dom,x=a.getRng(),C=g.uniqueId(),I=a.isCollapsed(),L=a.getNode(),z=L.nodeName;if("IMG"===z)return{name:z,index:Lg(g,z,L)};var j=J1(x.cloneRange());return I||(j.collapse(!1),Nm(g,j,ex(g,C+"_end",f))),(x=J1(x)).collapse(!0),Nm(g,x,ex(g,C+"_start",f)),a.moveToBookmark({id:C,keep:!0}),{id:C}}function u0(a,f,g){var x=a.getParam(f,g);return-1===x.indexOf("=")?x:Sr(a.getParam(f,"","hash"),a.id).getOr(g)}function Gd(a){return a.getParam("content_security_policy","")}function Za(a){if(a.getParam("force_p_newlines",!1))return"p";var f=a.getParam("forced_root_block","p");return!1===f?"":!0===f?"p":f}function l0(a){return a.getParam("forced_root_block_attrs",{})}function Ng(a){return a.getParam("automatic_uploads",!0,"boolean")}function Ab(a){return a.getParam("icons","","string")}function oy(a){return a.getParam("referrer_policy","","string")}function pd(a){return a.getParam("language","en","string")}function Ah(a){return a.getParam("indent_use_margin",!1)}function Ib(a){var f=a.getParam("font_css",[]);return Yo(f)?f:mt(f.split(","),uu)}function c0(a){var f=a.getParam("object_resizing");return!1!==f&&!Fr.iOS&&(wo(f)?f:"table,img,figure.image,div,video,iframe")}function f0(a){return a.getParam("event_root")}function cf(a){return a.getParam("theme")}function np(a){return!1!==a.getParam("inline_boundaries")}function Ob(a){return a.getParam("plugins","","string")}function Eb(a){var f=a.parentNode;f&&f.removeChild(a)}function iy(a){var f=on(a);return{count:a.length-f.length,text:f}}function tx(a){for(var f;-1!==(f=a.data.lastIndexOf(ua));)a.deleteData(f,1)}function z_(a,f){return Um(a),f}function zm(a,f){var g,x=f.container(),C=(-1===(g=na(Fo(x.childNodes),a))?$.none():$.some(g)).map(function(I){return I<f.offset()?en(x,f.offset()-1):f}).getOr(f);return Um(a),C}function gd(a,f){return en.isTextPosition(f)?(x=f,d0(g=a)&&x.container()===g?(L=iy((C=g).data.substr(0,(I=x).offset())),z=iy(C.data.substr(I.offset())),0<(L.text+z.text).length?(tx(C),en(C,I.offset()-L.count)):I):z_(g,x)):(j=a,((G=f).container()===j.parentNode?zm:z_)(j,G));var g,x,C,I,L,z,j,G}function vu(a,f,g){var x,C,I,L=$1(f.getBoundingClientRect(),g),z="BODY"===a.tagName?(x=a.ownerDocument.documentElement,C=a.scrollLeft||x.scrollLeft,a.scrollTop||x.scrollTop):(I=a.getBoundingClientRect(),C=a.scrollLeft-I.left,a.scrollTop-I.top);L.left+=C,L.right+=C,L.top+=z,L.bottom+=z,L.width=1;var j=f.offsetWidth-f.clientWidth;return 0<j&&(g&&(j*=-1),L.left+=j,L.right+=j),L}function nx(){return Bf.isIE()||Bf.isEdge()||Bf.isFirefox()}function Fm(a){return Yp(a)||nf(a)&&nx()}function kl(a,f){for(var g;g=a(f);)if(!jm(g))return g;return null}function sc(a,f,g,x,C){var I=new Ks(a,x),L=qp(a)||jm(a);if(f<0){if(L&&g(a=kl(I.prev.bind(I),!0)))return a;for(;a=kl(I.prev.bind(I),C);)if(g(a))return a}if(0<f){if(L&&g(a=kl(I.next.bind(I),!0)))return a;for(;a=kl(I.next.bind(I),C);)if(g(a))return a}return null}function Lf(a,f){for(;a&&a!==f;){if(OS(a))return a;a=a.parentNode}return null}function ff(a,f,g){return Lf(a.container(),g)===Lf(f.container(),g)}function Bg(a,f){if(!f)return null;var g=f.container(),x=f.offset();return Xp(g)?g.childNodes[x+a]:null}function Vm(a,f){var g=f.ownerDocument.createRange();return a?(g.setStartBefore(f),g.setEndBefore(f)):(g.setStartAfter(f),g.setEndAfter(f)),g}function Hm(a,f,g){for(var x,C,I=a?"previousSibling":"nextSibling";g&&g!==f;){var L=g[I];if(uc(L)&&(L=L[I]),qp(L)||ly(L)){if(C=g,Lf(L,x=f)===Lf(C,x))return L;break}if(Zp(L))break;g=g.parentNode}return null}function Wm(a,f,g){var x,C=qe(Hm,!0,f),I=qe(Hm,!1,f),L=g.startContainer,z=g.startOffset;if(sl(L)){var j=(L=Xp(L)?L:L.parentNode).getAttribute("data-mce-caret");if("before"===j&&Fm(x=L.nextSibling))return Zc(x);if("after"===j&&Fm(x=L.previousSibling))return df(x)}if(!g.collapsed)return g;if(Ar(L)){if(uc(L)){if(1===a){if(x=I(L))return Zc(x);if(x=C(L))return df(x)}if(-1===a){if(x=C(L))return df(x);if(x=I(L))return Zc(x)}return g}if(Ap(L)&&z>=L.data.length-1)return 1===a&&(x=I(L))?Zc(x):g;if(dh(L)&&z<=1)return-1===a&&(x=C(L))?df(x):g;if(z===L.data.length)return(x=I(L))?Zc(x):g;if(0===z)return(x=C(L))?df(x):g}return g}function rx(a,f){return $.from(Bg(a?0:-1,f)).filter(qp)}function jp(a,f,g){var x=Wm(a,f,g);return-1===a?en.fromRangeStart(x):en.fromRangeEnd(x)}function Ih(a){return $.from(a.getNode()).map(It.fromDom)}function ay(a,f){for(;f=a(f);)if(f.isVisible())return f;return f}function sy(a,f){var g=ff(a,f);return!(g||!os(a.getNode()))||g}en.fromRangeStart=function(a){return en(a.startContainer,a.startOffset)},en.fromRangeEnd=function(a){return en(a.endContainer,a.endOffset)},en.after=function(a){return en(a.parentNode,Ss(a)+1)},en.before=function(a){return en(a.parentNode,Ss(a))},en.isAbove=function(a,f){return Ta(sn(f.getClientRects()),Ht(a.getClientRects()),kh).getOr(!1)},en.isBelow=function(a,f){return Ta(Ht(f.getClientRects()),sn(a.getClientRects()),Eg).getOr(!1)},en.isAtStart=function(a){return!!a&&a.isAtStart()},en.isAtEnd=function(a){return!!a&&a.isAtEnd()},en.isTextPosition=function(a){return!!a&&Ar(a.container())},en.isElementPosition=function(a){return!1===en.isTextPosition(a)};var Eu,Pb,Nf=Ar,Rb=ol,V_=ba.nodeIndex,zg=function(a){var f=a.parentNode;return Rb(f)?zg(f):f},Gm=function(a){return a?rs(a.childNodes,function(f,g){return Rb(g)&&"BR"!==g.nodeName?f=f.concat(Gm(g)):f.push(g),f},[]):[]},Fg=oo,Lb=qe(Q1,mi,!0),Nb=ba.DOM,Gl=co,d0=Ar,Um=function(a){Gl(a)&&Nr(a)&&(bs(a)?a.removeAttribute("data-mce-caret"):Eb(a)),d0(a)&&(tx(a),0===a.data.length&&Eb(a))},Bf=wa().browser,uy=oo,Qs=Cl,H_=vs,Yp=function(a){return uy(a)||Qs(a)},qp=oo,ly=Cl,OS=Cf("display","block table table-cell table-caption list-item"),uc=Nr,jm=sl,Xp=co,Zp=E,Zc=qe(Vm,!0),df=qe(Vm,!1);function Ym(a,f){return a.hasChildNodes()&&f<a.childNodes.length?a.childNodes[f]:null}function ox(a,f){if(0<a){if(Tl(f.previousSibling)&&!Ff(f.previousSibling))return en.before(f);if(Ff(f))return en(f,0)}if(a<0){if(Tl(f.nextSibling)&&!Ff(f.nextSibling))return en.after(f);if(Ff(f))return en(f,f.data.length)}return a<0&&!ev(f)?en.after(f):en.before(f)}function Sc(a){return{next:function(f){return Yd(Eu.Forwards,f,a)},prev:function(f){return Yd(Eu.Backwards,f,a)}}}function Cc(a){return en.isTextPosition(a)?0===a.offset():E(a.getNode())}function qm(a){if(en.isTextPosition(a)){var f=a.container();return a.offset()===f.data.length}return E(a.getNode(!0))}function rp(a,f){return!en.isTextPosition(a)&&!en.isTextPosition(f)&&a.getNode()===f.getNode(!0)}function Vg(a,f,g){return pf(a,f,g).bind(function(x){return ff(g,x,f)&&(C=g,I=x,a?!rp(C,I)&&(en.isTextPosition(L=C)||!os(L.getNode()))&&qm(C)&&Cc(I):!rp(I,C)&&Cc(C)&&qm(I))?pf(a,f,x):$.some(x);var C,I,L})}function cy(a,f){var g,x,C,I,L,z=a?f.firstChild:f.lastChild;return Ar(z)?$.some(en(z,a?0:z.data.length)):z?E(z)?$.some(a?en.before(z):os(L=z)?en.before(L):en.after(L)):(x=f,C=z,I=(g=a)?en.before(C):en.after(C),pf(g,x,I)):$.none()}function eu(a){return co(a)&&a.id===Ug}function Xm(a,f){for(;f&&f!==a;){if(f.id===Ug)return f;f=f.parentNode}return null}function Qu(a){return Qt.isArray(a.start)}function fy(a,f){return co(f)&&a.isBlock(f)&&!f.innerHTML&&!Fr.ie&&(f.innerHTML='<br data-mce-bogus="1" />'),f}function Bb(a,f,g){return!1===f.hasChildNodes()&&Xm(a,f)&&(C=g,I=(x=f).ownerDocument.createTextNode(ua),x.appendChild(I),C.setStart(I,0),C.setEnd(I,0),1);var x,C,I}function Pu(a,f,g,x){var C,I,L,z,j=g[f?"start":"end"],G=a.getRoot();if(j){for(L=j[0],I=G,C=j.length-1;1<=C;C--){if(z=I.childNodes,Bb(G,I,x))return 1;if(j[C]>z.length-1)return Bb(G,I,x)||function(te){return qd(I).fold(Yn,function(K){return te.setStart(K.container(),K.offset()),te.setEnd(K.container(),K.offset()),!0})}(x);I=z[j[C]]}3===I.nodeType&&(L=Math.min(j[0],I.nodeValue.length)),1===I.nodeType&&(L=Math.min(j[0],I.childNodes.length)),f?x.setStart(I,L):x.setEnd(I,L)}return 1}function lc(a){return Ar(a)&&0<a.data.length}function W_(a,f,g){var x,C,I,L,z,j,G=a.get(g.id+"_"+f),te=g.keep;if(G){if(x=G.parentNode,C="start"===f?te?G.hasChildNodes()?(x=G.firstChild,1):lc(G.nextSibling)?(x=G.nextSibling,0):lc(G.previousSibling)?(x=G.previousSibling,G.previousSibling.data.length):(x=G.parentNode,a.nodeIndex(G)+1):a.nodeIndex(G):te?G.hasChildNodes()?(x=G.firstChild,1):lc(G.previousSibling)?(x=G.previousSibling,G.previousSibling.data.length):(x=G.parentNode,a.nodeIndex(G)):a.nodeIndex(G),z=x,j=C,!te){for(L=G.previousSibling,I=G.nextSibling,Qt.each(Qt.grep(G.childNodes),function(K){Ar(K)&&(K.nodeValue=K.nodeValue.replace(/\uFEFF/g,""))});G=a.get(g.id+"_"+f);)a.remove(G,!0);L&&I&&L.nodeType===I.nodeType&&Ar(L)&&!Fr.opera&&(C=L.nodeValue.length,L.appendData(I.nodeValue),a.remove(I),z=L,j=C)}return $.some(en(z,j))}return $.none()}function zb(a,f){(function(g,x){var C,I,L,z,j,G,te,K,ie,le,pe,me,xe=g.dom;if(x){if(Qu(x))return pe=x,me=(le=xe).createRng(),Pu(le,!0,pe,me)&&Pu(le,!1,pe,me)?$.some(me):$.none();if(wo(x.start))return $.some((te=x,K=(G=xe).createRng(),ie=Cs(G.getRoot(),te.start),K.setStart(ie.container(),ie.offset()),ie=Cs(G.getRoot(),te.end),K.setEnd(ie.container(),ie.offset()),K));if(po(x,"id"))return Ta(j=W_(L=xe,"start",z=x),W_(L,"end",z).or(j),function(be,Ae){var Le=L.createRng();return Le.setStart(fy(L,be.container()),be.offset()),Le.setEnd(fy(L,Ae.container()),Ae.offset()),Le});if(po(x,"name"))return $.from((C=xe).select((I=x).name)[I.index]).map(function(be){var Ae=C.createRng();return Ae.selectNode(be),Ae});if(po(x,"rng"))return $.some(x.rng)}return $.none()})(a,f).each(function(g){a.setRng(g)})}function cc(a){return co(a)&&"SPAN"===a.tagName&&"bookmark"===a.getAttribute("data-mce-type")}function dy(a){return""!==a&&-1!==" \f\n\r\t\v".indexOf(a)}function Es(a){return!dy(a)&&!tv(a)}function op(a){return a.nodeType}function tu(a,f,g){var x,C=g.startOffset,I=g.startContainer;if((I!==g.endContainer||!(x=I.childNodes[C])||!/^(IMG)$/.test(x.nodeName))&&co(I)){var L=I.childNodes,z=void 0;C<L.length?z=new Ks(I=L[C],a.getParent(I,a.isBlock)):(z=new Ks(I=L[L.length-1],a.getParent(I,a.isBlock))).next(!0);for(var j=z.current();j;j=z.next())if(Ar(j)&&!vy(j))return g.setStart(j,0),f.setRng(g),0}}function Kp(a,f,g){if(a){var x=f?"nextSibling":"previousSibling";for(a=g?a:a[x];a;a=a[x])if(co(a)||!vy(a))return a}}function h0(a,f){return op(f)&&(f=f.nodeName),!!a.schema.getTextBlockElements()[f.toLowerCase()]}function Ud(a,f,g){return a.schema.isValidChild(f,g)}function Mc(a,f){return Ur(a)?a=a(f):ct(f)&&(a=a.replace(/%(\w+)/g,function(g,x){return f[x]||g})),a}function Zm(a,f){return a=""+((a=a||"").nodeName||a),f=""+((f=f||"").nodeName||f),a.toLowerCase()===f.toLowerCase()}function Km(a,f,g){return"color"!==g&&"backgroundColor"!==g||(f=a.toHex(f)),"fontWeight"===g&&700===f&&(f="bold"),""+("fontFamily"===g?f.replace(/[\'\"]/g,"").replace(/,\s+/g,","):f)}function Hg(a,f,g){return Km(a,a.getStyle(f,g),g)}function G_(a,f){var g;return a.getParent(f,function(x){return(g=a.getStyle(x,"text-decoration"))&&"none"!==g}),g}function p0(a,f,g){return a.getParents(f,g,a.getRoot())}function Kc(a){return Ao(a,"block")}function ii(a){return Ao(a,"selector")}function mo(a){return Ao(a,"inline")}function as(a){return ii(a)&&!1!==a.expand&&!mo(a)}function $m(a,f){for(var g=f;g;){if(co(g)&&a.getContentEditable(g))return"false"===a.getContentEditable(g)?g:f;g=g.parentNode}return f}function $p(a,f,g,x){for(var C=f.data,I=g;a?0<=I:I<C.length;a?I--:I++)if(x(C.charAt(I)))return a?I+1:I;return-1}function ax(a,f,g){return $p(a,f,g,function(x){return tv(x)||dy(x)})}function g0(a,f,g){return $p(a,f,g,Es)}function md(a,f,g,x,C,I){function L(G,te,K){var ie=Og(a);return $.from((C?ie.backwards:ie.forwards)(G,te,function(pe,me){return nv(pe.parentNode)?-1:K(C,z=pe,me)},j))}var z,j=a.getParent(g,a.isBlock)||f;return L(g,x,ax).bind(function(G){return I?L(G.container,G.offset+(C?-1:0),g0):$.some(G)}).orThunk(function(){return z?$.some({container:z,offset:C?0:z.length}):$.none()})}function m0(a,f,g,x,C){Ar(x)&&Bt(x.data)&&x[C]&&(x=x[C]);for(var I=Jp(a,x),L=0;L<I.length;L++)for(var z=0;z<f.length;z++){var j=f[z];if((!ct(j.collapsed)||j.collapsed===g.collapsed)&&ii(j)&&a.is(I[L],j.selector))return I[L]}return x}function Jm(a,f,g,x){var C,I=g,L=a.dom,z=L.getRoot(),j=f[0];if((I=Kc(j)?j.wrapper?null:L.getParent(g,j.block,z):I)||(C=L.getParent(g,"LI,TD,TH"),I=L.getParent(Ar(g)?g.parentNode:g,function(G){return G!==z&&b0(a,G)},C)),!(I=I&&Kc(j)&&j.wrapper&&Jp(L,I,"ul,ol").reverse()[0]||I))for(I=g;I[x]&&!L.isBlock(I[x])&&!Zm(I=I[x],"br"););return I||g}function kc(a,f,g,x,C){var I,L=g,z=C?"previousSibling":"nextSibling",j=a.getRoot();if(Ar(g)&&!jl(g)&&(C?0<x:x<g.data.length))return g;for(;;){if(!f[0].block_expand&&a.isBlock(L))return L;for(var G=L[z];G;G=G[z]){var te=Ar(G)&&!rv(a,j,G,z);if(!nv(G)&&(!os(I=G)||!I.getAttribute("data-mce-bogus")||I.nextSibling)&&!jl(G,te))return L}if(L===j||L.parentNode===j){g=L;break}L=L.parentNode}return g}function Ul(a){return nv(a.parentNode)||nv(a)}function jd(a,f,g,x){void 0===x&&(x=!1);var C=f.startContainer,I=f.startOffset,L=f.endContainer,z=f.endOffset,j=a.dom,G=g[0];return co(C)&&C.hasChildNodes()&&(C=Pf(C,I),Ar(C)&&(I=0)),co(L)&&L.hasChildNodes()&&(L=Pf(L,f.collapsed?z:z-1),Ar(L)&&(z=L.nodeValue.length)),C=$m(j,C),L=$m(j,L),Ul(C)&&(C=nv(C)?C:C.parentNode,Ar(C=f.collapsed?C.previousSibling||C:C.nextSibling||C)&&(I=f.collapsed?C.length:0)),Ul(L)&&(L=nv(L)?L:L.parentNode,Ar(L=f.collapsed?L.nextSibling||L:L.previousSibling||L)&&(z=f.collapsed?0:L.length)),f.collapsed&&(md(j,a.getBody(),C,I,!0,x).each(function(te){C=te.container,I=te.offset}),md(j,a.getBody(),L,z,!1,x).each(function(te){L=te.container,z=te.offset})),(mo(G)||G.block_expand)&&(mo(G)&&Ar(C)&&0!==I||(C=kc(j,g,C,I,!0)),mo(G)&&Ar(L)&&z!==L.nodeValue.length||(L=kc(j,g,L,z,!1))),as(G)&&(C=m0(j,g,f,C,"previousSibling"),L=m0(j,g,f,L,"nextSibling")),(Kc(G)||ii(G))&&(C=Jm(a,g,C,"previousSibling"),L=Jm(a,g,L,"nextSibling"),Kc(G)&&(j.isBlock(C)||(C=kc(j,g,C,I,!0)),j.isBlock(L)||(L=kc(j,g,L,z,!1)))),co(C)&&(I=j.nodeIndex(C),C=C.parentNode),co(L)&&(z=j.nodeIndex(L)+1,L=L.parentNode),{startContainer:C,startOffset:I,endContainer:L,endOffset:z}}function hy(a,f,g){function x(me){var xe=me[0];Ar(xe)&&xe===j&&z>=xe.data.length&&me.splice(0,1);var be=me[me.length-1];return 0===G&&0<me.length&&be===te&&Ar(be)&&me.splice(me.length-1,1),me}function C(me,xe,be){for(var Ae=[];me&&me!==be;me=me[xe])Ae.push(me);return Ae}function I(me,xe){return a.getParent(me,function(be){return be.parentNode===xe},xe)}function L(me,xe,be){for(var Ae=be?"nextSibling":"previousSibling",Le=me;Le&&Le!==xe;Le=Je){var Je=Le.parentNode,pt=C(Le===me?Le:Le[Ae],Ae);pt.length&&(be||pt.reverse(),g(x(pt)))}}var z=f.startOffset,j=Pf(f.startContainer,z),G=f.endOffset,te=Pf(f.endContainer,G-1);if(j===te)return g(x([j]));var K=a.findCommonAncestor(j,te);if(a.isChildOf(j,te))return L(j,K,!0);if(a.isChildOf(te,j))return L(te,K);var ie=I(j,K)||j,le=I(te,K)||te;L(j,ie,!0);var pe=C(ie===j?ie:ie.nextSibling,"nextSibling",le===te?le.nextSibling:le);pe.length&&g(x(pe)),L(te,le)}function hf(a){var f=[];if(a)for(var g=0;g<a.rangeCount;g++)f.push(a.getRangeAt(g));return f}function v0(a,f){var g=xc(f,"td[data-mce-selected],th[data-mce-selected]");return 0<g.length?g:rr(gc(a,function(x){var C=Th(x);return C?[It.fromDom(C)]:[]}),vr)}function ip(a){return v0(hf(a.selection.getSel()),It.fromDom(a.getBody()))}function zf(a,f){return Xu(a,"table",f)}function ap(a,f){return Ta((C=f.startContainer,I=f.startOffset,Ar(C)?0===I?$.some(It.fromDom(C)):$.none():$.from(C.childNodes[I]).map(It.fromDom)),(g=f.endContainer,x=f.endOffset,Ar(g)?x===g.data.length?$.some(It.fromDom(g)):$.none():$.from(g.childNodes[x-1]).map(It.fromDom)),function(L,z){var j=yr(x0(a),qe(gn,L)),G=yr(ux(a),qe(gn,z));return j.isSome()&&G.isSome()}).getOr(!1);var g,x,C,I}function fc(a,f,g,x){var C=g,I=new Ks(g,C),L=zo(a.schema.getMoveCaretBeforeOnEnterElements(),function(z,j){return!nn(["td","th","table"],j.toLowerCase())});do{if(Ar(g)&&0!==Qt.trim(g.nodeValue).length)return x?f.setStart(g,0):f.setEnd(g,g.nodeValue.length),0;if(L[g.nodeName])return x?f.setStartBefore(g):"BR"===g.nodeName?f.setEndBefore(g):f.setEndAfter(g),0}while(g=x?I.next():I.prev());"BODY"===C.nodeName&&(x?f.setStart(C,0):f.setEnd(C,C.childNodes.length))}function y0(a){var f=a.selection.getSel();return f&&0<f.rangeCount}function vd(a,f){var g=ip(a);0<g.length?Pn(g,function(x){var C=x.dom,I=a.dom.createRng();I.setStartBefore(C),I.setEndAfter(C),f(I,!0)}):f(a.selection.getRng(),!1)}function Qm(a,f,g){var x=ry(a,f);g(x),a.moveToBookmark(x)}function jo(a){return lx.get(a)}function hl(a,f,g,x){var C=f.uid,I=void 0===C?Qv("mce-annotation"):C,L=function(le,pe){var me={};for(be in le)Object.prototype.hasOwnProperty.call(le,be)&&pe.indexOf(be)<0&&(me[be]=le[be]);if(null!=le&&"function"==typeof Object.getOwnPropertySymbols)for(var xe=0,be=Object.getOwnPropertySymbols(le);xe<be.length;xe++)pe.indexOf(be[xe])<0&&Object.prototype.propertyIsEnumerable.call(le,be[xe])&&(me[be[xe]]=le[be[xe]]);return me}(f,["uid"]),z=It.fromTag("span",a);Wl(z,lf()),Bl(z,""+Ou(),I),Bl(z,""+Rf(),g);var j,G=x(I,L),te=G.attributes,K=G.classes,ie=void 0===K?[]:K;return ec(z,void 0===te?{}:te),j=z,Pn(ie,function(le){Wl(j,le)}),z}function sx(a){var f,g,x,C=(f={},{register:function(L,z){f[L]={name:L,settings:z}},lookup:function(L){return Sr(f,L).map(function(z){return z.settings})}});x=C,(g=a).on("init",function(){g.serializer.addNodeFilter("span",function(L){Pn(L,function(z){$.from(z.attr(Rf())).bind(x.lookup).each(function(j){!1===j.persistent&&z.unwrap()})})})});var I=function _a(a){function f(){return{listeners:[],previous:zd()}}function g(L,z){x(L,function(j){return z(j),j})}function x(L,z){var j=C.get(),G=z(Sr(j,L).getOrThunk(f));j[L]=G,C.set(j)}var C=Os({}),I=Mh(function(){var L=C.get();Pn(ca(Tr(L)),function(z){x(z,function(j){var G=j.previous.get();return kb(a,$.some(z)).fold(function(){var te;G.isSome()&&(g(te=z,function(K){Pn(K.listeners,function(ie){return ie(!1,te)})}),j.previous.clear())},function(te){var K,ie,le,pe=te.uid,me=te.name,xe=te.elements;yc(G,pe)||(ie=pe,le=xe,g(K=me,function(be){Pn(be.listeners,function(Ae){return Ae(!0,K,{uid:ie,nodes:mt(le,function(Le){return Le.dom})})})}),j.previous.set(pe))}),{previous:j.previous,listeners:j.listeners}})})},30);return a.on("remove",function(){I.cancel()}),a.on("NodeChange",function(){I.throttle()}),{addListener:function(L,z){x(L,function(j){return{previous:j.previous,listeners:j.listeners.concat([z])}})}}}(a);return{register:function(L,z){C.register(L,z)},annotate:function(L,z){C.lookup(L).each(function(j){var G,te,K,ie;te=L,K=j,ie=z,(G=a).undoManager.transact(function(){var le,pe,me,xe,be=G.selection,Ae=be.getRng(),Le=0<ip(G).length;Ae.collapsed&&!Le&&(me=jd(le=G,pe=Ae,[{inline:"span"}]),pe.setStart(me.startContainer,me.startOffset),pe.setEnd(me.endContainer,me.endOffset),le.selection.setRng(pe)),be.getRng().collapsed&&!Le?(Rm(xe=hl(G.getDoc(),ie,te,K.decorate),xa),be.getRng().insertNode(xe.dom),be.select(xe.dom)):Qm(be,!1,function(){vd(G,function(Je){!function sp(a,f,g,x,C){function I(){G.clear()}function L(K){Pn(K,te)}var z=[],j=hl(a.getDoc(),C,g,x),G=zd(),te=function(K){var ie,le,pe,me,be;switch(pe=a,be=Ga(me=K),cu(me).fold(function(){return"skipping"},function(Ae){return"br"===be||Qa(Je=me)&&jo(Je)===ua?"valid":wl(Le=me)&&uf(Le,lf())?"existing":eu(me.dom)?"caret":Ud(pe,"span",be)&&Ud(pe,Ga(Ae),"span")?"valid":"invalid-child";var Le,Je})){case"invalid-child":I(),L(Wu(K)),I();break;case"valid":Du(ie=K,le=G.get().getOrThunk(function(){var Ae=tp(j);return z.push(Ae),G.set(Ae),Ae})),Fs(le,ie)}};hy(a.dom,f,function(K){I(),L(mt(K,It.fromDom))})}(G,Je,te,K.decorate,ie)})})})})},annotationChanged:function(L,z){I.addListener(L,z)},remove:function(L){kb(a,$.some(L)).each(function(z){Pn(z.elements,Cp)})},getAll:function(L){var z,j,G;return Hn((z=L,j=xc(It.fromDom(a.getBody()),"["+Rf()+'="'+z+'"]'),G={},Pn(j,function(te){var K=Zs(te,Ou()),ie=Sr(G,K).getOr([]);G[K]=ie.concat([te])}),G),function(te){return mt(te,function(K){return K.dom})})}}}function Ho(a){return{getBookmark:qe(U_,a),moveToBookmark:qe(zb,a)}}function Fb(a){return Br(a)||!!Ed(f=a)&&!0!==dr(Fo(f.getElementsByTagName("*")),function(g,x){return g||hh(x)},!1);var f}(Pb=Eu=Eu||{})[Pb.Backwards=-1]="Backwards",Pb[Pb.Forwards=1]="Forwards";var yd,Wg,gy=oo,Ff=Ar,yu=co,ev=os,Tl=E,Gg=B,Yd=function(a,f,g){var x,C,I;if(!yu(g)||!f)return null;if(f.isEqual(en.after(g))&&g.lastChild){if(I=en.after(g.lastChild),a<0&&Tl(g.lastChild)&&yu(g.lastChild))return ev(g.lastChild)?en.before(g.lastChild):I}else I=f;var L,z,j,G=I.container(),te=I.offset();if(Ff(G)){if(a<0&&0<te)return en(G,--te);if(0<a&&te<G.length)return en(G,++te);x=G}else{if(a<0&&0<te&&(K=Ym(G,te-1),Tl(K)))return!Fb(K)&&(C=sc(K,a,Gg,K))?Ff(C)?en(C,C.data.length):en.after(C):Ff(K)?en(K,K.data.length):en.before(K);if(0<a&&te<G.childNodes.length&&(K=Ym(G,te),Tl(K)))return ev(K)?(L=g,(j=(z=K).nextSibling)&&Tl(j)?Ff(j)?en(j,0):en.before(j):Yd(Eu.Forwards,en.after(z),L)):!Fb(K)&&(C=sc(K,a,Gg,K))?Ff(C)?en(C,0):en.before(C):Ff(K)?en(K,0):en.after(K);x=K||I.getNode()}if((0<a&&I.isAtEnd()||a<0&&I.isAtStart())&&(x=sc(x,a,Jo,g,!0),Gg(x,g)))return ox(a,x);var K=sc(x,a,Gg,g),ie=Ts(rr(function(le,pe){for(var me=[];le&&le!==pe;)me.push(le),le=le.parentNode;return me}(G,g),gy));return!ie||K&&ie.contains(K)?K?ox(a,K):null:0<a?en.after(ie):en.before(ie)},pf=function(a,f,g){var x=Sc(f);return $.from(a?x.next(g):x.prev(g))},my=function(a,f,g,x){return Vg(a,f,g).bind(function(C){return x(C)?my(a,f,C,x):$.some(C)})},ps=qe(pf,!0),gs=qe(pf,!1),Vi=qe(cy,!0),qd=qe(cy,!1),Ug="_mce_caret",U_=function(a,f,g){return 2===f?Q1(on,g,a):3===f?(C=(x=a).getRng(),{start:Dh(x.dom.getRoot(),en.fromRangeStart(C)),end:Dh(x.dom.getRoot(),en.fromRangeEnd(C))}):f?{rng:a.getRng()}:ry(a,!1);var x,C},tv=function(a){return"\xa0"===a},vy=function(a,f){return void 0===f&&(f=!1),!(!ct(a)||!Ar(a))&&U(f?a.data.replace(/ /g,"\xa0"):a.data)},nv=cc,Jp=p0,jl=vy,b0=h0,rv=function(a,f,g,x){var C=g.parentNode;return!ct(g[x])&&(!(C!==f&&!cr(C)&&!a.isBlock(C))||rv(a,f,C,x))},x0=function(a){return xg(a).fold(Bn([a]),function(f){return[a].concat(x0(f))})},ux=function(a){return rl(a).fold(Bn([a]),function(f){return"br"===Ga(f)?Xs(f).map(function(g){return[a].concat(ux(g))}).getOr([]):[a].concat(ux(f))})},lx=(yd=Qa,{get:function(a){if(!yd(a))throw new Error("Can only get text value of a text node");return Wg(a).getOr("")},getOption:Wg=function(a){return yd(a)?$.from(a.dom.nodeValue):$.none()},set:function(a,f){if(!yd(a))throw new Error("Can only set raw text value of a text node");a.dom.nodeValue=f}});function jg(a,f){for(;f&&f!==a;){if(Yu(f)||oo(f))return f;f=f.parentNode}return null}function ai(a,f,g){if(!g.collapsed){if(Fr.browser.isIE()&&g.startOffset===g.endOffset-1&&g.startContainer===g.endContainer){var x=g.startContainer.childNodes[g.startOffset];if(co(x))return Ce(x.getClientRects(),function(C){return L_(C,a,f)})}return Ce(g.getClientRects(),function(C){return L_(C,a,f)})}}function Qp(a,f,g){return a.fire(f,g)}function Yg(a,f,g,x){return a.fire("FormatApply",{format:f,node:g,vars:x})}function _0(a,f,g,x){return a.fire("FormatRemove",{format:f,node:g,vars:x})}function cx(a,f){function g(mn){return mn&&("IMG"===mn.nodeName||f.dom.is(mn,"figure.image"))}function x(mn){return Cl(mn)||dt.hasClass(mn,"mce-preview-object")}function C(mn){var sr=mn.target;!function(In,Mr){if("longpress"!==In.type&&0!==In.type.indexOf("touch"))return g(In.target)&&!ai(In.clientX,In.clientY,Mr);var kr=In.touches[0];return g(In.target)&&!ai(kr.clientX,kr.clientY,Mr)}(mn,f.selection.getRng())||mn.isDefaultPrevented()||f.selection.select(sr)}function I(mn){return dt.is(mn,"figure.image")?[mn.querySelector("img")]:dt.hasClass(mn,"mce-preview-object")&&ct(mn.firstElementChild)?[mn,mn.firstElementChild]:[mn]}function L(mn){var sr=c0(f);return!!sr&&"false"!==mn.getAttribute("data-mce-resize")&&mn!==f.getBody()&&(dt.hasClass(mn,"mce-preview-object")?Ln(It.fromDom(mn.firstElementChild),sr):Ln(It.fromDom(mn),sr))}function z(mn,sr,In){ct(In)&&Pn(I(mn),function(Mr){Mr.style[sr]||!f.schema.isValid(Mr.nodeName.toLowerCase(),sr)?dt.setStyle(Mr,sr,In):dt.setAttrib(Mr,sr,""+In)})}function j(mn,sr,In){z(mn,"width",sr),z(mn,"height",In)}function G(mn){var sr,In,xt=mn.screenX-Ae,tn=mn.screenY-Le;et=(et=xt*xe[2]+Je)<5?5:et,At=(At=tn*xe[3]+pt)<5?5:At,((g(le)||x(le))&&!1!==f.getParam("resize_img_proportional",!0,"boolean")?!Jr.modifierPressed(mn):Jr.modifierPressed(mn))&&(bn(xt)>bn(tn)?(At=Xn(et*Be),et=Xn(At/Be)):(et=Xn(At/Be),At=Xn(et*Be))),j(pe,et,At),dt.setStyles(me,{left:sr=0<(sr=xe.startPos.x+xt)?sr:0,top:In=0<(In=xe.startPos.y+tn)?In:0,display:"block"}),me.innerHTML=et+" &times; "+At,xe[2]<0&&pe.clientWidth<=et&&dt.setStyle(pe,"left",void 0+(Je-et)),xe[3]<0&&pe.clientHeight<=At&&dt.setStyle(pe,"top",void 0+(pt-At)),(xt=vn.scrollWidth-Nt)+(tn=vn.scrollHeight-Kt)!=0&&dt.setStyles(me,{left:sr-xt,top:In-tn}),je||(f.fire("ObjectResizeStart",{target:le,width:Je,height:pt,origin:"corner-"+xe.name}),je=!0)}function te(mn){function sr(Mr,kr){if(Mr)do{if(Mr===kr)return 1}while(Mr=Mr.parentNode)}var In;je||f.removed||(vt(dt.select("img[data-mce-selected],hr[data-mce-selected]"),function(Mr){Mr.removeAttribute(Yt)}),In="mousedown"===mn.type?mn.target:a.getNode(),sr(In=dt.$(In).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],vn)&&(ie(),sr(a.getStart(!0),In)&&sr(a.getEnd(!0),In))?Vn(In):Nn())}function K(mn){return hx(jg(f.getBody(),mn))}function ie(){try{f.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}}var le,pe,me,xe,be,Ae,Le,Je,pt,Be,je,et,At,Nt,Kt,Yt="data-mce-selected",dt=f.dom,vt=Qt.each,kt=f.getDoc(),Wt=document,bn=Math.abs,Xn=Math.round,vn=f.getBody(),Gn={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},kn=function(){var kr=je;je=!1,kr&&(z(le,"width",et),z(le,"height",At)),dt.unbind(kt,"mousemove",G),dt.unbind(kt,"mouseup",kn),Wt!==kt&&(dt.unbind(Wt,"mousemove",G),dt.unbind(Wt,"mouseup",kn)),dt.remove(pe),dt.remove(me),dt.remove(be),Vn(le),kr&&(f.fire("ObjectResized",{target:le,width:et,height:At,origin:"corner-"+xe.name}),dt.setAttrib(le,"style",dt.getAttrib(le,"style"))),f.nodeChanged()},Vn=function(mn){_r();var sr=dt.getPos(mn,vn),In=sr.x,Mr=sr.y,kr=mn.getBoundingClientRect(),Uo=kr.width||kr.right-kr.left,tt=kr.height||kr.bottom-kr.top;le!==mn&&(Nn(),le=mn,et=At=0);var xt=f.fire("ObjectSelected",{target:mn}),tn=dt.getAttrib(le,Yt,"1");L(mn)&&!xt.isDefaultPrevented()?vt(Gn,function(Cn,cn){var Jn=dt.get("mceResizeHandle"+cn);Jn&&dt.remove(Jn),Jn=dt.add(vn,"div",{id:"mceResizeHandle"+cn,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+cn+"-resize; margin:0; padding:0"}),11===Fr.ie&&(Jn.contentEditable=!1),dt.bind(Jn,"mousedown",function(ao){var vo,Ra,Ro;ao.stopImmediatePropagation(),ao.preventDefault(),vo=ao,Ro=I(le)[0],Ae=vo.screenX,Le=vo.screenY,Be=(pt=Ro.clientHeight)/(Je=Ro.clientWidth),(xe=Cn).name=cn,xe.startPos={x:Uo*Cn[0]+In,y:tt*Cn[1]+Mr},Nt=vn.scrollWidth,Kt=vn.scrollHeight,be=dt.add(vn,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),dt.setStyles(be,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),pe=x(Ra=le)?dt.create("img",{src:Fr.transparentSrc}):Ra.cloneNode(!0),dt.addClass(pe,"mce-clonedresizable"),dt.setAttrib(pe,"data-mce-bogus","all"),pe.contentEditable="false",dt.setStyles(pe,{left:In,top:Mr,margin:0}),j(pe,Uo,tt),pe.removeAttribute(Yt),vn.appendChild(pe),dt.bind(kt,"mousemove",G),dt.bind(kt,"mouseup",kn),Wt!==kt&&(dt.bind(Wt,"mousemove",G),dt.bind(Wt,"mouseup",kn)),me=dt.add(vn,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},Je+" &times; "+pt)}),Cn.elm=Jn,dt.setStyles(Jn,{left:Uo*Cn[0]+In-Jn.offsetWidth/2,top:tt*Cn[1]+Mr-Jn.offsetHeight/2})}):Nn(),dt.getAttrib(le,Yt)||le.setAttribute(Yt,tn)},Nn=function(){_r(),le&&le.removeAttribute(Yt),wn(Gn,function(mn,sr){var In=dt.get("mceResizeHandle"+sr);In&&(dt.unbind(In),dt.remove(In))})},_r=function(){wn(Gn,function(mn){mn.elm&&(dt.unbind(mn.elm),delete mn.elm)})};return f.on("init",function(){var mn;ie(),(Fr.browser.isIE()||Fr.browser.isEdge())&&(f.on("mousedown click",function(In){var Mr=In.target,kr=Mr.nodeName;je||!/^(TABLE|IMG|HR)$/.test(kr)||K(Mr)||(2!==In.button&&f.selection.select(Mr,"TABLE"===kr),"mousedown"===In.type&&f.nodeChanged())}),dt.bind(vn,"mscontrolselect",mn=function(In){function Mr(kr){St.setEditorTimeout(f,function(){return f.selection.select(kr)})}if(K(In.target)||Cl(In.target))return In.preventDefault(),void Mr(In.target);/^(TABLE|IMG|HR)$/.test(In.target.nodeName)&&(In.preventDefault(),"IMG"===In.target.tagName&&Mr(In.target))}),f.on("remove",function(){return dt.unbind(vn,"mscontrolselect",mn)}));var sr=St.throttle(function(In){f.composing||te(In)});f.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",sr),f.on("keyup compositionend",function(In){le&&"TABLE"===le.nodeName&&sr(In)}),f.on("hide blur",Nn),f.on("contextmenu longpress",C,!0)}),f.on("remove",_r),{isResizable:L,showResizeRect:Vn,hideResizeRect:Nn,updateResizeRect:te,destroy:function(){le=pe=be=null}}}function ES(a){return Yu(a)||oo(a)}function fx(a,f,g){var x,C,I,L,z,j=g;if(j.caretPositionFromPoint)(C=j.caretPositionFromPoint(a,f))&&((x=g.createRange()).setStart(C.offsetNode,C.offset),x.collapse(!0));else if(j.caretRangeFromPoint)x=j.caretRangeFromPoint(a,f);else if(j.body.createTextRange){x=j.body.createTextRange();try{x.moveToPoint(a,f),x.collapse(!0)}catch{x=function(te,K,ie){var le,pe=ie.elementFromPoint(te,K),me=ie.body.createTextRange();if(pe&&"HTML"!==pe.tagName||(pe=ie.body),me.moveToElementText(pe),0<(le=(le=Qt.toArray(me.getClientRects())).sort(function(xe,be){return(xe=Math.abs(Math.max(xe.top-K,xe.bottom-K)))-Math.abs(Math.max(be.top-K,be.bottom-K))})).length){K=(le[0].bottom+le[0].top)/2;try{return me.moveToPoint(te,K),me.collapse(!0),me}catch{}}return null}(a,f,g)}return L=g.body,z=(I=x)&&I.parentElement?I.parentElement():null,oo(function(G,te,K){for(;G&&G!==te;){if(K(G))return G;G=G.parentNode}return null}(z,L,ES))?null:I}return x}function aa(a,f){return a&&f&&a.startContainer===f.startContainer&&a.startOffset===f.startOffset&&a.endContainer===f.endContainer&&a.endOffset===f.endOffset}function dx(a,f,g){return null!==function(x,C,I){for(;x&&x!==C;){if(I(x))return x;x=x.parentNode}return null}(a,f,g)}function ov(a){return a&&"TABLE"===a.nodeName}function Oh(a,f,g){for(var x=new Ks(f,a.getParent(f.parentNode,a.isBlock)||a.getRoot());f=x[g?"prev":"next"]();)if(os(f))return 1}function or(a,f,g,x,C){var I,L,z=a.getRoot(),j=a.schema.getNonEmptyElements(),G=a.getParent(C.parentNode,a.isBlock)||z;if(x&&os(C)&&f&&a.isEmpty(G))return $.some(en(C.parentNode,a.nodeIndex(C)));for(var te,K,ie=new Ks(C,G);L=ie[x?"prev":"next"]();){if("false"===a.getContentEditableParent(L)||(K=z,Nr(te=L)&&!1===dx(te,K,eu)))return $.none();if(Ar(L)&&0<L.nodeValue.length)return!1===dx(L,z,function(le){return"A"===le.nodeName})?$.some(en(L,x?L.nodeValue.length:0)):$.none();if(a.isBlock(L)||j[L.nodeName.toLowerCase()])return $.none();I=L}return g&&I?$.some(en(I,0)):$.none()}function eg(a,f,g,x){var C,I=a.getRoot(),L=!1,z=x[(g?"start":"end")+"Container"],j=x[(g?"start":"end")+"Offset"],G=co(z)&&j===z.childNodes.length,te=a.schema.getNonEmptyElements(),K=g;if(Nr(z))return $.none();if(co(z)&&j>z.childNodes.length-1&&(K=!1),il(z)&&(z=I,j=0),z===I){if(K&&(ie=z.childNodes[0<j?j-1:0])&&(Nr(ie)||te[ie.nodeName]||ov(ie)))return $.none();if(z.hasChildNodes()){if(j=Math.min(!K&&0<j?j-1:j,z.childNodes.length-1),j=Ar(z=z.childNodes[j])&&G?z.data.length:0,!f&&z===I.lastChild&&ov(z)||function(pe,me){for(;me&&me!==pe;){if(oo(me))return 1;me=me.parentNode}}(I,z)||Nr(z))return $.none();if(z.hasChildNodes()&&!1===ov(z)){var ie=z,le=new Ks(z,I);do{if(oo(ie)||Nr(ie)){L=!1;break}if(Ar(ie)&&0<ie.nodeValue.length){j=K?0:ie.nodeValue.length,z=ie,L=!0;break}if(te[ie.nodeName.toLowerCase()]&&(!(C=ie)||!/^(TD|TH|CAPTION)$/.test(C.nodeName))){j=a.nodeIndex(ie),z=ie.parentNode,K||j++,L=!0;break}}while(ie=K?le.next():le.prev())}}}return f&&(Ar(z)&&0===j&&or(a,G,f,!0,z).each(function(pe){z=pe.container(),j=pe.offset(),L=!0}),co(z)&&(!(ie=(ie=z.childNodes[j])||z.childNodes[j-1])||!os(ie)||ie.previousSibling&&"A"===ie.previousSibling.nodeName||Oh(a,ie,!1)||Oh(a,ie,!0)||or(a,G,f,!0,ie).each(function(pe){z=pe.container(),j=pe.offset(),L=!0}))),K&&!f&&Ar(z)&&j===z.nodeValue.length&&or(a,G,f,!1,z).each(function(pe){z=pe.container(),j=pe.offset(),L=!0}),L?$.some(en(z,j)):$.none()}function Vf(a,f){var g=f.collapsed,x=f.cloneRange(),C=en.fromRangeStart(f);return eg(a,g,!0,x).each(function(I){g&&en.isAbove(C,I)||x.setStart(I.container(),I.offset())}),g||eg(a,g,!1,x).each(function(I){x.setEnd(I.container(),I.offset())}),g&&x.collapse(!0),aa(f,x)?$.none():$.some(x)}function qg(a,f){return a.splitText(f)}function tg(a){var f=a.startContainer,g=a.startOffset,x=a.endContainer,C=a.endOffset;return f===x&&Ar(f)?0<g&&g<f.nodeValue.length&&(f=(x=qg(f,g)).previousSibling,g<C?(f=x=qg(x,C-=g).previousSibling,C=x.nodeValue.length,g=0):C=0):(Ar(f)&&0<g&&g<f.nodeValue.length&&(f=qg(f,g),g=0),Ar(x)&&0<C&&C<x.nodeValue.length&&(C=(x=qg(x,C).previousSibling).nodeValue.length)),{startContainer:f,startOffset:g,endContainer:x,endOffset:C}}function iv(a){return{walk:function(f,g){return hy(a,f,g)},split:tg,normalize:function(f){return Vf(a,f).fold(Yn,function(g){return f.setStart(g.startContainer,g.startOffset),f.setEnd(g.endContainer,g.endOffset),!0})}}}Ho.isBookmarkNode=cc;var Jr={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(a){return a.shiftKey||a.ctrlKey||a.altKey||Jr.metaKeyPressed(a)},metaKeyPressed:function(a){return Fr.mac?a.metaKey:a.ctrlKey&&!a.altKey}},hx=oo;iv.compareRanges=aa,iv.getCaretRangeFromPoint=fx,iv.getSelectedNode=Th,iv.getNode=Pf;var yy,by,Vb=(yy="height",by=function(a){var f=a.dom;return Vo(a)?f.getBoundingClientRect().height:f.offsetHeight},{set:function(a,f){if(!ho(f)&&!f.match(/^[0-9]+$/))throw new Error(yy+".set accepts only positive integer values. Value was "+f);var g=a.dom;fs(g)&&(g.style[yy]=f+"px")},get:av,getOuter:av,aggregate:xy,max:function(a,f,g){var x=xy(a,g);return x<f?f-x:0}});function av(a){var f=by(a);if(f<=0||null===f){var g=Nc(a,yy);return parseFloat(g)||0}return f}function xy(a,f){return dr(f,function(g,x){var C=Nc(a,x),I=void 0===C?0:parseInt(C,10);return isNaN(I)?g:g+I},0)}function ng(a){return"textarea"===Ga(a)}function rg(a,f){var g=function(C){var I=C.dom.ownerDocument,L=I.body,z=I.defaultView,j=I.documentElement;if(L===C.dom)return Uu(L.offsetLeft,L.offsetTop);var G=Ad(null==z?void 0:z.pageYOffset,j.scrollTop),te=Ad(null==z?void 0:z.pageXOffset,j.scrollLeft),K=Ad(j.clientTop,L.clientTop),ie=Ad(j.clientLeft,L.clientLeft);return Ia(C).translate(te-ie,G-K)}(a),x=Vb.get(a);return{element:a,bottom:g.top+x,height:x,pos:g,cleanup:f}}function Xg(a,f,g,x){em(a,function(C,I){return ig(a,f,g,x)},g)}function Zg(a,f,g,x,C){var I={elm:x.element.dom,alignToTop:C};a.fire("ScrollIntoView",I).isDefaultPrevented()||(g(f,Id(f).top,x,C),a.fire("AfterScrollIntoView",I))}function sv(a,f,g,x){var C=It.fromDom(a.getDoc());Zg(a,C,g,rg(It.fromDom(f),_n),x)}function Tc(a,f,g,x){var I=a.pos;_g(I.left,g?I.top:I.top-f+a.height,x)}function Eh(a,f,g,x,C){var I=g+f,L=x.pos.top,z=x.bottom,j=g<=z-L;L<f?Tc(x,g,!1!==C,a):I<L?Tc(x,g,j?!1!==C:!0===C,a):I<z&&!j&&Tc(x,g,!0===C,a)}function PS(a,f,g,x){Eh(a,f,a.dom.defaultView.innerHeight,g,x)}function bu(a,f,g,x){Eh(a,f,a.dom.defaultView.innerHeight,g,x);var C,I,L,z,j,G,te,K=(C=g.element,z=Id(It.fromDom(document)),L=(I=hv).owner(C),j=tl(I,L),G=Ia(C),te=De(j,function(le,pe){var me=Ia(pe);return{left:le.left+me.left,top:le.top+me.top}},{left:0,top:0}),Uu(te.left+G.left+z.left,te.top+G.top+z.top)),ie=Ai(window);K.top<ie.y?jh(g.element,!1!==x):K.top>ie.bottom&&jh(g.element,!0===x)}function Xd(a,f,g){return Xg(a,PS,f,g)}function Ph(a,f,g){return sv(a,f,PS,g)}function _y(a,f,g){return Xg(a,bu,f,g)}function uv(a,f,g){return sv(a,f,bu,g)}function Zd(a,f,g){(a.inline?Xd:_y)(a,f,g)}function wy(a){var f=Aa(a).dom;return a.dom===f.activeElement}function Kg(a){return void 0===a&&(a=It.fromDom(document)),$.from(a.dom.activeElement).map(It.fromDom)}function Sy(a,f){var g=Qa(f)?jo(f).length:Wu(f).length+1;return g<a?g:a<0?0:a}function lv(a){return W.range(a.start,Sy(a.soffset,a.start),a.finish,Sy(a.foffset,a.finish))}function RS(a,f){return!ch(f.dom)&&(Dt(a,f)||gn(a,f))}function Hb(a){return function(f){return RS(a,f.start)&&RS(a,f.finish)}}function ti(a){return!0===a.inline||J.isIE()}function px(a){return W.range(It.fromDom(a.startContainer),a.startOffset,It.fromDom(a.endContainer),a.endOffset)}function Wb(a){var f=document.createRange();try{return f.setStart(a.start.dom,a.soffset),f.setEnd(a.finish.dom,a.foffset),$.some(f)}catch{return $.none()}}function Rh(a){var f,g,x=ti(a)?((g=cs(f=It.fromDom(a.getBody())).dom.getSelection())&&0!==g.rangeCount?$.from(g.getRangeAt(0)):$.none()).map(px).filter(Hb(f)):$.none();a.bookmark=x.isSome()?x:a.bookmark}function Cy(a){return(a.bookmark||$.none()).bind(function(f){return g=It.fromDom(a.getBody()),$.from(f).filter(Hb(g)).map(lv);var g}).bind(Wb)}function Vr(a,f){var g=a.getParam("custom_ui_selector","","string");return null!==ce.getParent(f,function(x){return se.isEditorUIElement(x)||!!g&&a.dom.is(x,g)})}function $g(a,f){var g=f.editor;(function cv(a){var f=K1(function(){Rh(a)},0);a.on("init",function(){function g(){C.throttle()}var x,C,I,L,z,j;a.inline&&(x=a,C=f,ba.DOM.bind(document,"mouseup",g),x.on("remove",function(){ba.DOM.unbind(document,"mouseup",g)})),I=a,L=f,wa().browser.isIE()?(j=I).on("focusout",function(){Rh(j)}):(z=L,I.on("mouseup touchend",function(G){z.throttle()})),I.on("keyup NodeChange",function(G){"nodechange"===G.type&&G.selectionChange||Rh(I)})}),a.on("remove",function(){f.cancel()})})(g),g.on("focusin",function(){var x=a.focusedEditor;x!==g&&(x&&x.fire("blur",{focusedEditor:g}),a.setActive(g),(a.focusedEditor=g).fire("focus",{blurredEditor:x}),g.focus(!0))}),g.on("focusout",function(){St.setEditorTimeout(g,function(){var x=a.focusedEditor;Vr(g,function(C){try{return Kg(Aa(It.fromDom(C.getElement()))).fold(function(){return document.body},function(I){return I.dom})}catch{return document.body}}(g))||x!==g||(g.fire("blur",{focusedEditor:null}),a.focusedEditor=null)})}),Yl||(Yl=function(x){var C=a.activeEditor;C&&function(I){if(Sl()&&ct(I.target)){var L=It.fromDom(I.target);if(wl(L)&&ct(L.dom.shadowRoot)&&I.composed&&I.composedPath){var z=I.composedPath();if(z)return sn(z)}}return $.from(I.target)}(x).each(function(I){I.ownerDocument===document&&(I===document.body||Vr(C,I)||a.focusedEditor!==C||(C.fire("blur",{focusedEditor:null}),a.focusedEditor=null))})},ce.bind(document,"focusin",Yl))}function fi(a,f){a.focusedEditor===f.editor&&(a.focusedEditor=null),a.activeEditor||(ce.unbind(document,"focusin",Yl),Yl=null)}function j_(a,f){var g,x;g=It.fromDom(a.getBody()),((x=f).collapsed?$.from(Pf(x.startContainer,x.startOffset)).map(It.fromDom):$.none()).bind(function(C){return Rr(C)?$.some(C):!1===Dt(g,C)?$.some(g):$.none()}).bind(function(C){return Vi(C.dom)}).fold(function(){a.selection.normalize()},function(C){return a.selection.setRng(C.toRange())})}function bd(a){if(a.setActive)try{a.setActive()}catch{a.focus()}else a.focus()}function pl(a){return a.inline?(x=a.getBody())&&(wy(f=It.fromDom(x))||Kg(Aa(g=f)).filter(function(C){return g.dom.contains(C.dom)}).isSome()):a.iframeElement&&wy(It.fromDom(a.iframeElement));var f,g,x}function fv(a,f,g,x,C){var L=g?f.startOffset:f.endOffset;return $.from(g?f.startContainer:f.endContainer).map(It.fromDom).map(function(z){return x&&f.collapsed?z:Io(z,C(z,L)).getOr(z)}).bind(function(z){return wl(z)?$.some(z):cu(z).filter(wl)}).map(function(z){return z.dom}).getOr(a)}function el(a,f,g){return fv(a,f,!0,g,function(x,C){return Math.min(mc(x),C)})}function Jg(a,f,g){return fv(a,f,!1,g,function(x,C){return 0<C?C-1:C})}function Qg(a,f){for(var g=a;a&&Ar(a)&&0===a.length;)a=f?a.nextSibling:a.previousSibling;return a||g}function dv(a,f){return mt(f,function(g){var x=a.fire("GetSelectionRange",{range:g});return x.range!==g?x.range:g})}function gf(a,f,g){var x=g?"lastChild":"firstChild",C=g?"prev":"next";if(a[x])return a[x];if(a!==f){var I=a[C];if(I)return I;for(var L=a.parent;L&&L!==f;L=L.parent)if(I=L[C])return I}}function og(a){var f="a"===a.name&&!a.attr("href")&&a.attr("id");return a.attr("name")||a.attr("id")&&!a.firstChild||a.attr("data-mce-bookmark")||f}var Yl,tl=function(a,f){return a.view(f).fold(Bn([]),function(g){var x=a.owner(g),C=tl(a,x);return[g].concat(C)})},hv=Object.freeze({__proto__:null,view:function(a){var f;return(a.dom===document?$.none():$.from(null===(f=a.dom.defaultView)||void 0===f?void 0:f.frameElement)).map(It.fromDom)},owner:Dd}),ig=function(a,f,g,x){It.fromDom(a.getBody());var j,G,I=It.fromDom(a.getDoc()),te=(j=function(K,ie){var le=Wu(K);if(0===le.length||ng(K))return{element:K,offset:ie};if(ie<le.length&&!ng(le[ie]))return{element:le[ie],offset:0};var pe=le[le.length-1];return ng(pe)?{element:K,offset:ie}:"img"===Ga(pe)?{element:pe,offset:1}:Qa(pe)?{element:pe,offset:jo(pe).length}:{element:pe,offset:Wu(pe).length}}(It.fromDom(g.startContainer),g.startOffset),G=It.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>'),Du(j.element,G),rg(G,function(){return Is(G)}));Zg(a,I,f,te,x),te.cleanup()},em=function(a,f,g){var x=g.startContainer,C=g.startOffset,I=g.endContainer,L=g.endOffset;f(It.fromDom(x),It.fromDom(I));var z=a.dom.createRng();z.setStart(x,C),z.setEnd(I,L),a.selection.setRng(g)},M=(hu([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(a){return a.fold(mi,mi,mi)}),R=hu([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),W={domRange:R.domRange,relative:R.relative,exact:R.exact,exactFromRange:function(a){return R.exact(a.start,a.soffset,a.finish,a.foffset)},getWin:function(a){return cs(a.match({domRange:function(f){return It.fromDom(f.startContainer)},relative:function(f,g){return M(f)},exact:function(f,g,x,C){return f}}))},range:function(a,f,g,x){return{start:a,soffset:f,finish:g,foffset:x}}},J=wa().browser,se={isEditorUIElement:function(a){var f=a.className.toString();return-1!==f.indexOf("tox-")||-1!==f.indexOf("mce-")}},ce=ba.DOM,we=function(a){return a.editorManager.setActive(a)},Ie={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},He=(Ye.create=function(a,f){var g=new Ye(a,Ie[a]||1);return f&&wn(f,function(x,C){g.attr(C,x)}),g},Ye.prototype.replace=function(a){return a.parent&&a.remove(),this.insert(a,this),this.remove(),this},Ye.prototype.attr=function(a,f){var g,x=this;if("string"!=typeof a)return null!=a&&wn(a,function(I,L){x.attr(L,I)}),x;if(g=x.attributes){if(void 0===f)return g.map[a];if(null===f){if(a in g.map){delete g.map[a];for(var C=g.length;C--;)if(g[C].name===a)return g.splice(C,1),x}return x}if(a in g.map){for(C=g.length;C--;)if(g[C].name===a){g[C].value=f;break}}else g.push({name:a,value:f});return g.map[a]=f,x}},Ye.prototype.clone=function(){var a,f=new Ye(this.name,this.type);if(a=this.attributes){var g=[];g.map={};for(var x=0,C=a.length;x<C;x++){var I=a[x];"id"!==I.name&&(g[g.length]={name:I.name,value:I.value},g.map[I.name]=I.value)}f.attributes=g}return f.value=this.value,f.shortEnded=this.shortEnded,f},Ye.prototype.wrap=function(a){return this.parent.insert(a,this),a.append(this),this},Ye.prototype.unwrap=function(){for(var a=this.firstChild;a;){var f=a.next;this.insert(a,this,!0),a=f}this.remove()},Ye.prototype.remove=function(){var a=this.parent,f=this.next,g=this.prev;return a&&(a.firstChild===this?(a.firstChild=f)&&(f.prev=null):g.next=f,a.lastChild===this?(a.lastChild=g)&&(g.next=null):f.prev=g,this.parent=this.next=this.prev=null),this},Ye.prototype.append=function(a){a.parent&&a.remove();var f=this.lastChild;return f?((f.next=a).prev=f,this.lastChild=a):this.lastChild=this.firstChild=a,a.parent=this,a},Ye.prototype.insert=function(a,f,g){a.parent&&a.remove();var x=f.parent||this;return g?(f===x.firstChild?x.firstChild=a:f.prev.next=a,a.prev=f.prev,(a.next=f).prev=a):(f===x.lastChild?x.lastChild=a:f.next.prev=a,a.next=f.next,(a.prev=f).next=a),a.parent=x,a},Ye.prototype.getAll=function(a){for(var f=[],g=this.firstChild;g;g=gf(g,this))g.name===a&&f.push(g);return f},Ye.prototype.children=function(){for(var a=[],f=this.firstChild;f;f=f.next)a.push(f);return a},Ye.prototype.empty=function(){if(this.firstChild){for(var a=[],f=this.firstChild;f;f=gf(f,this))a.push(f);for(var g=a.length;g--;)(f=a[g]).parent=f.firstChild=f.lastChild=f.next=f.prev=null}return this.firstChild=this.lastChild=null,this},Ye.prototype.isEmpty=function(a,f,g){void 0===f&&(f={});var x=this.firstChild;if(og(this))return!1;if(x)do{if(1===x.type){if(x.attr("data-mce-bogus"))continue;if(a[x.name]||og(x))return!1}if(8===x.type||3===x.type&&!function(C){if(U(C.value)){var I=C.parent;return!I||"span"===I.name&&!I.attr("style")||!/^[ ]+$/.test(C.value)}}(x)||3===x.type&&x.parent&&f[x.parent.name]&&U(x.value)||g&&g(x))return!1}while(x=gf(x,this));return!0},Ye.prototype.walk=function(a){return gf(this,null,a)},Ye);function Ye(a,f){this.name=a,1===(this.type=f)&&(this.attributes=[],this.attributes.map={})}function at(a,f){return a.replace(f.re,function(g){return Sr(f.uris,g).getOr(g)})}var ut=Qt.each,st=Qt.trim,Mt="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),ht={ftp:21,http:80,https:443,mailto:25},zt=["img","video"],Xt=(ft.parseDataUri=function(a){var f,g=decodeURIComponent(a).split(","),x=/data:([^;]+)/.exec(g[0]);return{type:f=x?x[1]:f,data:g[1]}},ft.isDomSafe=function(a,f,g){if((g=void 0===g?{}:g).allow_script_urls)return!0;var x,C,I,L,z=Vc.decode(a).replace(/[\s\u0000-\u001F]+/g,"");try{z=decodeURIComponent(z)}catch{z=unescape(z)}return!(/((java|vb)script|mhtml):/i.test(z)||(C=z,I=f,!(x=g).allow_html_data_urls&&(/^data:image\//i.test(C)?(ct(L=x.allow_svg_data_urls)?!L:!ct(I)||!nn(zt,I))&&/^data:image\/svg\+xml/i.test(C):/^data:/i.test(C))))},ft.getDocumentBaseUrl=function(a){var f=0!==a.protocol.indexOf("http")&&"file:"!==a.protocol?a.href:a.protocol+"//"+a.host+a.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(f)&&(f=f.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(f)||(f+="/")),f},ft.prototype.setPath=function(a){var f=/^(.*?)\/?(\w+)?$/.exec(a);this.path=f[0],this.directory=f[1],this.file=f[2],this.source="",this.getURI()},ft.prototype.toRelative=function(a){var f;if("./"===a)return a;var g=new ft(a,{base_uri:this});if("mce_host"!==g.host&&this.host!==g.host&&g.host||this.port!==g.port||this.protocol!==g.protocol&&""!==g.protocol)return g.getURI();var x=this.getURI(),C=g.getURI();return x===C||"/"===x.charAt(x.length-1)&&x.substr(0,x.length-1)===C?x:(f=this.toRelPath(this.path,g.path),g.query&&(f+="?"+g.query),g.anchor&&(f+="#"+g.anchor),f)},ft.prototype.toAbsolute=function(a,f){var g=new ft(a,{base_uri:this});return g.getURI(f&&this.isSameOrigin(g))},ft.prototype.isSameOrigin=function(a){if(this.host==a.host&&this.protocol==a.protocol){if(this.port==a.port)return!0;var f=ht[this.protocol];if(f&&(this.port||f)==(a.port||f))return!0}return!1},ft.prototype.toRelPath=function(a,f){var g,x,C=0,I="",L=a.substring(0,a.lastIndexOf("/")).split("/"),z=f.split("/");if(L.length>=z.length)for(g=0,x=L.length;g<x;g++)if(g>=z.length||L[g]!==z[g]){C=g+1;break}if(L.length<z.length)for(g=0,x=z.length;g<x;g++)if(g>=L.length||L[g]!==z[g]){C=g+1;break}if(1===C)return f;for(g=0,x=L.length-(C-1);g<x;g++)I+="../";for(g=C-1,x=z.length;g<x;g++)I+=g!==C-1?"/"+z[g]:z[g];return I},ft.prototype.toAbsPath=function(a,f){var g,x,C=0,I=[],L=/\/$/.test(f)?"/":"",z=a.split("/"),j=f.split("/");for(ut(z,function(G){G&&I.push(G)}),z=I,g=j.length-1,I=[];0<=g;g--)0!==j[g].length&&"."!==j[g]&&(".."!==j[g]?0<C?C--:I.push(j[g]):C++);return 0!==(x=(g=z.length-C)<=0?wr(I).join("/"):z.slice(0,g).join("/")+"/"+wr(I).join("/")).indexOf("/")&&(x="/"+x),L&&x.lastIndexOf("/")!==x.length-1&&(x+=L),x},ft.prototype.getURI=function(a){var f;return void 0===a&&(a=!1),this.source&&!a||(f="",a||(f+=this.protocol?this.protocol+"://":"//",this.userInfo&&(f+=this.userInfo+"@"),this.host&&(f+=this.host),this.port&&(f+=":"+this.port)),this.path&&(f+=this.path),this.query&&(f+="?"+this.query),this.anchor&&(f+="#"+this.anchor),this.source=f),this.source},ft);function ft(a,f){a=st(a),this.settings=f||{};var g,x,C,I,L=this.settings.base_uri,z=this;/^([\w\-]+):([^\/]{2})/i.test(a)||/^\s*#/.test(a)?z.source=a:(g=0===a.indexOf("//"),0!==a.indexOf("/")||g||(a=(L&&L.protocol||"http")+"://mce_host"+a),/^[\w\-]*:?\/\//.test(a)||(x=this.settings.base_uri?this.settings.base_uri.path:new ft(document.location.href).directory,a=this.settings.base_uri&&""==this.settings.base_uri.protocol?"//mce_host"+z.toAbsPath(x,a):(C=/([^#?]*)([#?]?.*)/.exec(a),(L&&L.protocol||"http")+"://mce_host"+z.toAbsPath(x,C[1])+C[2])),a=a.replace(/@@/g,"(mce_at)"),I=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(a),ut(Mt,function(j,G){var te=(te=I[G])&&te.replace(/\(mce_at\)/g,"@@");z[j]=te}),L&&(z.protocol||(z.protocol=L.protocol),z.userInfo||(z.userInfo=L.userInfo),z.port||"mce_host"!==z.host||(z.port=L.port),z.host&&"mce_host"!==z.host||(z.host=L.host),z.source=""),g&&(z.protocol=""))}function Pt(a,f,g){for(var x=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,C=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,I=a.getShortEndedElements(),L=1,z=g;0!==L;)for(x.lastIndex=z;;){var j=x.exec(f);if(null===j)return z;if("!"===j[1]){z=$r(j[2],"--")?$t(f,!1,j.index+3):$t(f,!0,j.index+1);break}C.lastIndex=x.lastIndex;var G=C.exec(f);if(!qr(G)&&G.index===x.lastIndex){"/"===j[1]?--L:po(I,j[2])||(L+=1),z=x.lastIndex+G[0].length;break}}return z}function xn(a,f){void 0===f&&(f=Wn()),a=a||{};var g=Sn(),x=g.createElement("form");!1!==a.fix_self_closing&&(a.fix_self_closing=!0);var I=a.comment||_n,L=a.cdata||_n,z=a.text||_n,j=a.start||_n,G=a.end||_n,te=a.pi||_n,K=a.doctype||_n;return{parse:function(ie,le){void 0===le&&(le="html"),function C(ie,le){void 0===le&&(le="html");for(var pe,me,xe,be,Ae,Le,Je,pt,Be,je,et,At,Nt,Kt,Yt,dt,vt,kt,Wt,bn=ie.html,Xn=0,vn=[],Gn=0,kn=Vc.decode,Vn=Qt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Nn="html"===le?0:1,_r=function(Ro){for(var fo,Gi=vn.length;Gi--&&vn[Gi].name!==Ro;);if(0<=Gi){for(fo=vn.length-1;Gi<=fo;fo--)(Ro=vn[fo]).valid&&G(Ro.name);vn.length=Gi}},mn=function(Ro,fo){return z(at(Ro,ie),fo)},sr=function(Ro){""!==Ro&&(">"===Ro.charAt(0)&&(Ro=" "+Ro),a.allow_conditional_comments||"[if"!==Ro.substr(0,3).toLowerCase()||(Ro=" "+Ro),I(at(Ro,ie)))},In=function(Ro,fo){var Gi=Ro||"",ou=!$r(Gi,"--"),Al=$t(bn,ou,fo);return Ro=bn.substr(fo,Al-fo),sr(ou?Gi+Ro:Ro),Al+1},Mr=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),kr=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,Uo=f.getShortEndedElements(),tt=a.self_closing_elements||f.getSelfClosingElements(),xt=f.getBoolAttrs(),tn=a.validate,Cn=a.remove_internals,cn=a.fix_self_closing,Jn=f.getSpecialElements(),ao=bn+">";pe=Mr.exec(ao);){var vo=pe[0];if(Xn<pe.index&&mn(kn(bn.substr(Xn,pe.index-Xn))),me=pe[7])_r(me=":"===(me=me.toLowerCase()).charAt(0)?me.substr(1):me);else if(me=pe[8]){if(pe.index+vo.length>bn.length){mn(kn(bn.substr(pe.index))),Xn=pe.index+vo.length;continue}Be=(me=":"===(me=me.toLowerCase()).charAt(0)?me.substr(1):me)in Uo,cn&&tt[me]&&0<vn.length&&vn[vn.length-1].name===me&&_r(me);var Ra=function(Ro,fo){var Gi=Ro.exec(fo);if(Gi){var ou=Gi[1],Al=Gi[2];return"string"==typeof ou&&"data-mce-bogus"===ou.toLowerCase()?Al:null}return null}(kr,pe[9]);if(null!==Ra){if("all"===Ra){Xn=Pt(f,bn,Mr.lastIndex),Mr.lastIndex=Xn;continue}et=!1}if(!tn||(je=f.getElementRule(me))){if(et=!0,tn&&(Kt=je.attributes,Yt=je.attributePatterns),(Nt=pe[9])?((pt=-1!==Nt.indexOf("data-mce-type"))&&Cn&&(et=!1),(be=[]).map={},Nt.replace(kr,function(Ro,fo,Gi,ou,Al){return function(pc,ml,Oc,zv,ah){var gg;if(Oc=at((ml=ml.toLowerCase())in xt?ml:kn(Oc||zv||ah||""),ie),tn&&!pt&&0==(0===(gg=ml).indexOf("data-")||0===gg.indexOf("aria-"))){var mp=Kt[ml];if(!mp&&Yt){for(var hb=Yt.length;hb--&&!(mp=Yt[hb]).pattern.test(ml););-1===hb&&(mp=null)}if(!mp||mp.validValues&&!(Oc in mp.validValues))return}("name"===ml||"id"===ml)&&pc in wt&&(Oc in g||Oc in x)||Vn[ml]&&!Xt.isDomSafe(Oc,pc,a)||pt&&(ml in Vn||0===ml.indexOf("on"))||(be.map[ml]=Oc,be.push({name:ml,value:Oc}))}(me,fo,Gi,ou,Al),""})):(be=[]).map={},tn&&!pt){if(dt=je.attributesRequired,vt=je.attributesDefault,je.removeEmptyAttrs&&!be.length&&(et=!1),kt=je.attributesForced)for(Ae=kt.length;Ae--;)Je=(At=kt[Ae]).name,"{$uid}"===(Wt=At.value)&&(Wt="mce_"+Gn++),be.map[Je]=Wt,be.push({name:Je,value:Wt});if(vt)for(Ae=vt.length;Ae--;)(Je=(At=vt[Ae]).name)in be.map||("{$uid}"===(Wt=At.value)&&(Wt="mce_"+Gn++),be.map[Je]=Wt,be.push({name:Je,value:Wt}));if(dt){for(Ae=dt.length;Ae--&&!(dt[Ae]in be.map););-1===Ae&&(et=!1)}if(At=be.map["data-mce-bogus"]){if("all"===At){Xn=Pt(f,bn,Mr.lastIndex),Mr.lastIndex=Xn;continue}et=!1}}et&&j(me,be,Be)}else et=!1;if(xe=Jn[me]){xe.lastIndex=Xn=pe.index+vo.length,Xn=(pe=xe.exec(bn))?(et&&(Le=bn.substr(Xn,pe.index-Xn)),pe.index+pe[0].length):(Le=bn.substr(Xn),bn.length),et&&(0<Le.length&&mn(Le,!0),G(me)),Mr.lastIndex=Xn;continue}Be||(Nt&&Nt.indexOf("/")===Nt.length-1?et&&G(me):vn.push({name:me,valid:et}))}else if(me=pe[1])sr(me);else if(me=pe[2]){if(!(1==Nn||a.preserve_cdata||0<vn.length&&f.isValidChild(vn[vn.length-1].name,"#cdata"))){Xn=In("",pe.index+2),Mr.lastIndex=Xn;continue}L(me)}else if(me=pe[3])K(me);else{if((me=pe[4])||"<!"===vo){Xn=In(me,pe.index+vo.length),Mr.lastIndex=Xn;continue}if(me=pe[5]){if(1!=Nn){Xn=In("?",pe.index+2),Mr.lastIndex=Xn;continue}te(me,pe[6])}}Xn=pe.index+vo.length}for(Xn<bn.length&&mn(kn(bn.substr(Xn))),Ae=vn.length-1;0<=Ae;Ae--)(me=vn[Ae]).valid&&G(me.name)}(function(pe){for(var me,xe=/data:[^;<"'\s]+;base64,([a-z0-9\+\/=\s]+)/gi,be=[],Ae={},Le=Qv("img"),Je=0,pt=0;me=xe.exec(pe);){var Be=me[0],je=Le+"_"+pt++;Ae[je]=Be,Je<me.index&&be.push(pe.substr(Je,me.index-Je)),be.push(je),Je=me.index+Be.length}var et=new RegExp(Le+"_[0-9]+","g");return 0===Je?{prefix:Le,uris:Ae,html:pe,re:et}:(Je<pe.length&&be.push(pe.substr(Je)),{prefix:Le,uris:Ae,html:be.join(""),re:et})}(ie),le)}}}var wt=Qt.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),Sn=Dn(function(){return document.implementation.createHTMLDocument("parser")}),$t=function(a,f,g){void 0===g&&(g=0);var x=a.toLowerCase();if(-1!==x.indexOf("[if ",g)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(x.substr(g))){var C=x.indexOf("[endif]",g);return x.indexOf(">",C)}if(f){var I=x.indexOf(">",g);return-1!==I?I:x.length}var L=/--!?>/g;L.lastIndex=g;var j=L.exec(a);return j?j.index+j[0].length:x.length};function Er(a,f){for(var g,x,C,I,L=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,z=a.schema,j=(g=a.getTempAttrs(),x=f,C=new RegExp(["\\s?("+g.join("|")+')="[^"]+"'].join("|"),"gi"),x.replace(C,"")),G=z.getShortEndedElements();I=L.exec(j);){var te=L.lastIndex,K=I[0].length,ie=G[I[1]]?te:xn.findEndTag(z,j,te);j=j.substring(0,te-K)+j.substring(ie),L.lastIndex=te-K}return on(j)}function Tn(a){return{compare:function(f,g){return f.nodeName===g.nodeName&&!(!C(x(f),x(g))||!C(a.parseStyle(a.getAttrib(f,"style")),a.parseStyle(a.getAttrib(g,"style")))||cc(f)||cc(g));function x(I){var L={};return Po(a.getAttribs(I),function(z){var j=z.nodeName.toLowerCase();0!==j.indexOf("_")&&"style"!==j&&0!==j.indexOf("data-")&&(L[j]=a.getAttrib(I,j))}),L}function C(I,L){var z,j;for(j in I)if(po(I,j)){if(void 0===(z=L[j])||I[j]!==z)return;delete L[j]}for(j in L)if(po(L,j))return;return 1}}}}function Lr(a){var f=[],g=(a=a||{}).indent,x=ri(a.indent_before||""),C=ri(a.indent_after||""),I=Vc.getEncodeFunc(a.entity_encoding||"raw",a.entities),L="html"===a.element_format;return{start:function(z,j,G){var te,K,ie,le;if(g&&x[z]&&0<f.length&&0<(le=f[f.length-1]).length&&"\n"!==le&&f.push("\n"),f.push("<",z),j)for(te=0,K=j.length;te<K;te++)f.push(" ",(ie=j[te]).name,'="',I(ie.value,!0),'"');f[f.length]=!G||L?">":" />",G&&g&&C[z]&&0<f.length&&0<(le=f[f.length-1]).length&&"\n"!==le&&f.push("\n")},end:function(z){var j;f.push("</",z,">"),g&&C[z]&&0<f.length&&0<(j=f[f.length-1]).length&&"\n"!==j&&f.push("\n")},text:function(z,j){0<z.length&&(f[f.length]=j?z:I(z))},cdata:function(z){f.push("<![CDATA[",z,"]]>")},comment:function(z){f.push("\x3c!--",z,"--\x3e")},pi:function(z,j){j?f.push("<?",z," ",I(j),"?>"):f.push("<?",z,"?>"),g&&f.push("\n")},doctype:function(z){f.push("<!DOCTYPE",z,">",g?"\n":"")},reset:function(){f.length=0},getContent:function(){return f.join("").replace(/\n$/,"")}}}function Qr(a,f){void 0===f&&(f=Wn());var g=Lr(a);return(a=a||{}).validate=!("validate"in a)||a.validate,{serialize:function(x){var C=a.validate,I={3:function(z){g.text(z.value,z.raw)},8:function(z){g.comment(z.value)},7:function(z){g.pi(z.name,z.value)},10:function(z){g.doctype(z.value)},4:function(z){g.cdata(z.value)},11:function(z){if(z=z.firstChild)for(;L(z),z=z.next;);}};g.reset();var L=function(z){var j=I[z.type];if(j)j(z);else{var G=z.name,te=z.shortEnded,K=z.attributes;if(C&&K&&1<K.length){var ie=[];ie.map={};var le=f.getElementRule(z.name);if(le){for(var pe=0,me=le.attributesOrder.length;pe<me;pe++)(xe=le.attributesOrder[pe])in K.map&&(ie.map[xe]=be=K.map[xe],ie.push({name:xe,value:be}));var xe,be;for(pe=0,me=K.length;pe<me;pe++)(xe=K[pe].name)in ie.map||(ie.map[xe]=be=K.map[xe],ie.push({name:xe,value:be}));K=ie}}if(g.start(z.name,K,te),!te){if(z=z.firstChild)for(;L(z),z=z.next;);g.end(G)}}};return 1!==x.type||a.inner?I[11](x):L(x),g.getContent()}}}xn.findEndTag=Pt;var io=Er,Po=Qt.each,ri=Qt.makeMap,Do=new Set;function si(a,f){return Tr(a.parseStyle(a.getAttrib(f,"style")))}function Hi(a,f,g){return $.from(g.container()).filter(Ar).exists(function(x){var C=a?0:-1;return f(x.data.charAt(g.offset()+C))})}function Ea(a){var f=a.container();return Ar(f)&&(0===f.data.length||Fl(f.data)&&Ho.isBookmarkNode(f.parentNode))}function tr(a,f){return function(g){return $.from(Bg(a?0:-1,g)).filter(f).isSome()}}function da(a){return Oo(a)&&"block"===Nc(It.fromDom(a),"display")}function di(a){return oo(a)&&!(co(f=a)&&"all"===f.getAttribute("data-mce-bogus"));var f}function Wi(a){Sp(a),Fs(a,It.fromHtml('<br data-mce-bogus="1">'))}function Ws(a){rl(a).each(function(f){Xs(f).each(function(g){Qo(a)&&Zi(f)&&Qo(g)&&Is(f)})})}function mf(a,f){return C=Yn,Dt(x=f,g=a)?function(I,L){for(var z=Ur(L)?L:Yn,j=I.dom,G=[];null!=j.parentNode;){var te=j.parentNode,K=It.fromDom(te);if(G.push(K),!0===z(K))break;j=te}return G}(g,function(I){return C(I)||gn(I,x)}).slice(0,-1):[];var g,x,C}function Gs(a,f){return[a].concat(mf(a,f))}function Ms(a,f,g){return my(a,f,g,Ea)}function Kd(a,f){return yr(Gs(It.fromDom(f.container()),a),Qo)}function pv(a,f,g){return Ms(a,f.dom,g).forall(function(x){return Kd(f,g).fold(function(){return!1===ff(x,g,f.dom)},function(C){return!1===ff(x,g,f.dom)&&Dt(C,It.fromDom(x.container()))})})}function nm(a,f,g){return Kd(f,g).fold(function(){return Ms(a,f.dom,g).forall(function(x){return!1===ff(x,g,f.dom)})},function(x){return Ms(a,x.dom,g).isNone()})}function xd(a){return Ih(a).exists(Zi)}function vf(a,f,g){var x=sn(rr(Gs(It.fromDom(g.container()),f),Qo)).getOr(f);return pf(a,x.dom,g).filter(xd)}function up(a,f){return Ih(f).exists(Zi)||vf(!0,a,f).isSome()}function gv(a,f){return $.from(f.getNode(!0)).map(It.fromDom).exists(Zi)||vf(!1,a,f).isSome()}function ql(a){return en.isTextPosition(a)&&!a.isAtStart()&&!a.isAtEnd()}function Lh(a,f){return sn(rr(Gs(It.fromDom(f.container()),a),Qo)).getOr(a)}function Ps(a,f){return ql(f)?Sx(f):Sx(f)||gs(Lh(a,f).dom,f).exists(Sx)}function Hf(a,f){return ql(f)?_x(f):_x(f)||ps(Lh(a,f).dom,f).exists(_x)}function $d(a){return Ih(a).bind(function(f){return fh(f,wl)}).exists(function(f){return nn(["pre","pre-wrap"],Nc(f,"white-space"))})}function gx(a,f){return!$d(f)&&(vv(a,f)||T0(a,f)||gv(a,f)||Ps(a,f))}function Y_(a,f){return!$d(f)&&(Rs(a,f)||ag(a,f)||up(a,f)||Hf(a,f))}function IM(a,f){return gx(a,f)||Y_(a,(x=(g=f).container(),C=g.offset(),Ar(x)&&C<x.data.length?en(x,C+1):g));var g,x,C}function OM(a,f){return tv(a.charAt(f))}function H2(a){var f=a.container();return Ar(f)&&bt(f.data,xa)}function Li(a){var f=It.fromDom(a.getBody());a.selection.isCollapsed()&&function EM(a,f){return $.some(f).filter(H2).bind(function(g){var x,C,I,L,z,j,G,te,K,ie=g.container(),le=a,pe=(z=ie).data,me=en(z,0);return(!OM(pe,0)||IM(le,me)?(te=(j=ie).data,(K=mt(G=te.split(""),function(xe,be){return tv(xe)&&0<be&&be<G.length-1&&Es(G[be-1])&&Es(G[be+1])?" ":xe}).join(""))!==te&&(j.data=K,1)):(z.data=" "+pe.slice(1),1))||(x=a,I=(C=ie).data,L=en(C,I.length-1),OM(I,I.length-1)&&!IM(x,L)&&(C.data=I.slice(0,-1)+" ",1))?$.some(g):$.none()})}(f,en.fromRangeStart(a.selection.getRng())).each(function(g){a.selection.setRng(g.toRange())})}function q_(a,f,g){var x,C,I,L,z,j,G,te;0!==g&&(C=Yr(x=It.fromDom(a),Qo).getOr(x),I=a.data.slice(f,f+g),L=f+g>=a.data.length&&Y_(C,en(a,a.data.length)),z=0===f&&gx(C,en(a,0)),a.replaceData(f,g,(G=z,te=L,dr(j=I,function(K,ie){return dy(ie)||tv(ie)?K.previousCharIsSpace||""===K.str&&G||K.str.length===j.length-1&&te?{previousCharIsSpace:!1,str:K.str+xa}:{previousCharIsSpace:!0,str:K.str+" "}:{previousCharIsSpace:!1,str:K.str+ie}},{previousCharIsSpace:!1,str:""}).str)))}function Gb(a,f){var g=a.data.slice(f);q_(a,f,g.length-Dr(g).length)}function X_(a,f){var g=a.data.slice(0,f),x=g.length-go(g).length;q_(a,f-x,x)}function Z_(a,f,g,x){void 0===x&&(x=!0);var C=go(a.data).length,I=x?a:f,L=x?f:a;return x?I.appendData(L.data):I.insertData(0,L.data),Is(It.fromDom(L)),g&&Gb(I,C),I}function PM(a,f){return x=a,C=(g=f).container(),I=g.offset(),!1===en.isTextPosition(g)&&C===x.parentNode&&I>en.before(x).offset()?en(f.container(),f.offset()-1):f;var g,x,C,I}function w0(a){return E(a.previousSibling)?$.some(Ar(f=a.previousSibling)?en(f,f.data.length):en.after(f)):a.previousSibling?qd(a.previousSibling):$.none();var f}function Wf(a){return E(a.nextSibling)?$.some(Ar(f=a.nextSibling)?en(f,0):en.before(f)):a.nextSibling?Vi(a.nextSibling):$.none();var f}function S0(a,f){return w0(f).orThunk(function(){return Wf(f)}).orThunk(function(){return g=a,C=en.before((x=f).previousSibling||x.parentNode),gs(g,C).fold(function(){return ps(g,en.after(x))},$.some);var g,x,C})}function RM(a,f){return Wf(f).orThunk(function(){return w0(f)}).orThunk(function(){return ps(g=a,en.after(x=f)).fold(function(){return gs(g,en.before(x))},$.some);var g,x})}function LS(a,f,g){g.fold(function(){a.focus()},function(x){a.selection.setRng(x.toRange(),f)})}function NS(a,f){return f&&po(a.schema.getBlockElements(),Ga(f))}function LM(a){if(ee(a)){var f=It.fromHtml('<br data-mce-bogus="1">');return Sp(a),Fs(a,f),$.some(en.before(f.dom))}return $.none()}function My(a,f,g,x){void 0===x&&(x=!0);var C,I,L,z,j,G,te,K,ie,le,pe,be,Ae=(f?RM:S0)(a.getBody(),be=g.dom).map(qe(PM,be)),Le=Yr(g,qe(NS,a),(C=a.getBody(),function(pt){return pt.dom===C})),Je=(z=Ae,I=L=g,j=po(a.schema.getTextInlineElements(),Ga(I)),le=Xs(L).filter(Qa),pe=$o(L).filter(Qa),Is(L),te=pe,K=z,ie=function(pt,Be,je){var et=pt.dom,At=Be.dom,Nt=et.data.length;return Z_(et,At,j),je.container()===At?en(et,Nt):je},((G=le).isSome()&&te.isSome()&&K.isSome()?$.some(ie(G.getOrDie(),te.getOrDie(),K.getOrDie())):$.none()).orThunk(function(){return j&&(le.each(function(pt){return X_(pt.dom,pt.dom.length)}),pe.each(function(pt){return Gb(pt.dom,0)})),z}));a.dom.isEmpty(a.getBody())?(a.setContent(""),a.selection.setCursorLocation()):Le.bind(LM).fold(function(){x&&LS(a,f,Je)},function(pt){x&&LS(a,f,$.some(pt))})}function K_(a){return xc(a,"td,th")}function $_(a,f){return{start:a,end:f}}function mx(a,f){return Df(It.fromDom(a),"td,th",f)}function BS(a){return!gn(a.start,a.end)}function vx(a,f){return zf(a.start,f).bind(function(g){return zf(a.end,f).bind(function(x){return gn(g,x)?$.some(g):$.none()})})}function J_(a){return function(f){return vx(f,a).map(function(g){return{rng:f,table:g,cells:K_(g)}})}}function zS(a,f,g,x){if(g.collapsed||!a.forall(BS))return $.none();if(f.isSameTable){var C=a.bind(J_(x));return $.some({start:C,end:C})}var I,L,z=mx(g.startContainer,x),j=mx(g.endContainer,x),G=z.bind((L=x,function(K){return zf(K,L).bind(function(ie){return Ht(K_(ie)).map(function(le){return $_(K,le)})})})).bind(J_(x)),te=j.bind((I=x,function(K){return zf(K,I).bind(function(ie){return sn(K_(ie)).map(function(le){return $_(le,K)})})})).bind(J_(x));return $.some({start:G,end:te})}function MT(a,f){return ir(a,function(g){return gn(g,f)})}function FS(a){return Ta(MT(a.cells,a.rng.start),MT(a.cells,a.rng.end),function(f,g){return a.cells.slice(f,g+1)})}function NM(a,f){var g=f.startTable,x=f.endTable,C=a.cloneRange();return g.each(function(I){return C.setStartAfter(I.dom)}),x.each(function(I){return C.setEndBefore(I.dom)}),C}function BM(a){return Pn(a,function(f){rd(f,"contenteditable"),Wi(f)}),0}function Q_(a,f,g,x){var C=g.cloneRange();x?(C.setStart(g.startContainer,g.startOffset),C.setEndAfter(f.dom.lastChild)):(C.setStartBefore(f.dom.firstChild),C.setEnd(g.endContainer,g.endOffset)),nw(a,C,f,!1)}function kT(a){var f=ip(a),g=It.fromDom(a.selection.getNode());vs(g.dom)&&ee(g)?a.selection.setCursorLocation(g.dom,0):a.selection.collapse(!0),1<f.length&&Ce(f,function(x){return gn(x,g)})&&Bl(g,"data-mce-selected","1")}function VS(a,f,g){var x=a.selection.getRng();return BM(g.bind(function(C){var L,z,j=C.rng,G=C.isStartInTable,te=$.from(a.dom.getParent(G?j.endContainer:j.startContainer,a.dom.isBlock)).map(It.fromDom);j.deleteContents(),L=a,z=G,te.filter(ee).each(function(ie){z?Is(ie):(Wi(ie),L.selection.setCursorLocation(ie.dom,0))});var K=G?f[0]:f[f.length-1];return Q_(a,K,x,G),ee(K)?$.none():$.some(G?f.slice(1):f.slice(0,-1))}).getOr(f)),kT(a),!0}function HS(a,f,g,x){var C=a.selection.getRng(),I=f[0],L=g[g.length-1];Q_(a,I,C,!0),Q_(a,L,C,!1);var z=ee(I)?f:f.slice(1),j=ee(L)?g:g.slice(0,-1);return BM(z.concat(j)),x.deleteContents(),kT(a),!0}function yx(a,f){return My(a,!1,f),!0}function TT(a,f){return yr(Gs(f,a),vr)}function WS(a,f){return(a?YM:Dc)(f)}function C0(a,f){var g,x,C,I,L,z,j,G,te=It.fromDom(a.selection.getStart(!0)),K=ip(a);return a.selection.isCollapsed()&&0===K.length?function DT(a,f,g){var x=It.fromDom(a.getBody());return rw(x,g).fold(function(){return I=f,L=x,z=g,j=en.fromRangeStart((C=a).selection.getRng()),TT(L,z).bind(function(ie){return ee(ie)?rm(C,ie):(le=L,pe=ie,me=j,Vg(I,C.getBody(),me).bind(function(xe){return TT(le,It.fromDom(xe.getNode())).map(function(be){return!1===gn(be,pe)})}));var le,pe,me}).getOr(!1)||(te=f,K=en.fromRangeStart((G=a).selection.getRng()),WS(te,K)||pf(te,G.getBody(),K).exists(function(ie){return WS(te,ie)}));var C,I,L,z,j,G,te,K},function(C){return K=f,ie=x,le=C,pe=en.fromRangeStart((te=a).selection.getRng()),(ee(le)?rm(te,le):(L=ie,j=le,G=pe,Vg(z=K,(I=te).getBody(),G).bind(function(me){return Ae=z,Le=G,Je=me,Vi((be=j).dom).bind(function(pt){return qd(be.dom).map(function(Be){return Ae?Le.isEqual(pt)&&Je.isEqual(Be):Le.isEqual(Be)&&Je.isEqual(pt)})}).getOr(!0)?rm(I,j):(xe=j,rw(L,It.fromDom(me.getNode())).map(function(pt){return!1===gn(pt,xe)}));var xe,be,Ae,Le,Je}).or($.some(!0)))).getOr(!1);var I,L,z,j,G,te,K,ie,le,pe})}(a,f,te):(x=te,C=K,I=It.fromDom((g=a).getBody()),L=g.selection.getRng(),0!==C.length?VS(g,C,$.none()):(z=g,G=L,rw(j=I,x).fold(function(){return ie=z,function W2(a,f){var g,x,C,I,L,z,j,G,te,K,ie,le,pe,me,xe,be,Ae=(g=a,function(Be){return gn(g,Be)}),Le=Ta(mx((x=f).startContainer,C=Ae),mx(x.endContainer,C),$_),Je=(te=Ae,K=pt((G=f).startContainer),ie=pt(G.endContainer),le=K.isSome(),pe=ie.isSome(),{startTable:K,endTable:ie,isStartInTable:le,isEndInTable:pe,isSameTable:me=Ta(K,ie,gn).getOr(!1),isMultiTable:!me&&le&&pe});function pt(Be){return zf(It.fromDom(Be),te)}return xe=f,be=Ae,Le.exists(function(Be){return!BS(je=Be)&&vx(je,be).exists(function(et){var At=et.dom.rows;return 1===At.length&&1===At[0].cells.length})&&ap(Be.start,xe);var je})?Le.map(function(Be){return Xl.singleCellTable(f,Be.start)}):Je.isMultiTable?zS(Le,z=Je,j=f,Ae).bind(function(Be){var et=Be.end,At=Be.start.bind(FS).getOr([]),Nt=et.bind(FS).getOr([]);if(0<At.length&&0<Nt.length){var Kt=NM(j,z);return $.some(Xl.multiTable(At,Nt,Kt))}return $.none()}):zS(Le,I=Je,L=f,Ae).bind(function(Be){return Be.start.or(Be.end)}).bind(function(Be){var je=I.isSameTable,et=FS(Be).getOr([]);if(je&&Be.cells.length===et.length)return $.some(Xl.fullTable(Be.table));if(0<et.length){if(je)return $.some(Xl.partialTable(et,$.none()));var At=NM(L,I);return $.some(Xl.partialTable(et,$.some(hr(hr({},I),{rng:At}))))}return $.none()})}(j,G).map(function(le){return le.fold(qe(nw,ie),qe(yx,ie),qe(VS,ie),qe(HS,ie))});var ie},function(ie){return rm(z,ie)}).getOr(!1)))}function zM(a){return a.collapsed?a:(g=en.fromRangeStart(f=a),x=en.fromRangeEnd(f),pf(!1,C=f.commonAncestorContainer,x).map(function(I){return!ff(g,x,C)&&ff(g,I,C)?(L=g.container(),z=g.offset(),j=I.container(),G=I.offset(),(te=document.createRange()).setStart(L,z),te.setEnd(j,G),te):f;var L,z,j,G,te}).getOr(f));var f,g,x,C}function FM(a,f){var g=a.getParent(f,a.isBlock);return g&&"LI"===g.nodeName?g:null}function VM(a,f){var g=en.after(a),x=Sc(f).prev(g);return x?x.toRange():null}function G2(a,f,g){var x,C,I,L,z=a.selection,j=a.dom;/^ | $/.test(f)&&(x=j,C=z.getRng(),I=f,I=gx(L=It.fromDom(x.getRoot()),en.fromRangeStart(C))?I.replace(/^ /,"&nbsp;"):I.replace(/^&nbsp;/," "),f=I=Y_(L,en.fromRangeEnd(C))?I.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):I.replace(/&nbsp;(<br( \/)?>)?$/," "));var G=a.parser,te=g.merge,K=Qr({validate:a.getParam("validate")},a.schema),ie='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',le=a.fire("BeforeSetContent",{content:f,format:"html",selection:!0,paste:g.paste});if(le.isDefaultPrevented())a.fire("SetContent",{content:le.content,format:"html",selection:!0,paste:g.paste});else{-1===(f=le.content).indexOf("{$caret}")&&(f+="{$caret}"),f=f.replace(/\{\$caret\}/,ie);var pe,me,xe=(pe=z.getRng()).startContainer||(pe.parentElement?pe.parentElement():null),be=a.getBody();xe===be&&z.isCollapsed()&&j.isBlock(be.firstChild)&&(me=be.firstChild)&&!a.schema.getShortEndedElements()[me.nodeName]&&j.isEmpty(be.firstChild)&&((pe=j.createRng()).setStart(be.firstChild,0),pe.setEnd(be.firstChild,0),z.setRng(pe)),z.isCollapsed()||function(Vn){var Nn=Vn.dom,_r=zM(Vn.selection.getRng());Vn.selection.setRng(_r);var mn,sr=Nn.getParent(_r.startContainer,A0),In=_r;null!==(mn=sr)&&mn===Nn.getParent(In.endContainer,A0)&&ap(It.fromDom(mn),In)?nw(Vn,_r,It.fromDom(sr)):Vn.getDoc().execCommand("Delete",!1,null)}(a);var Ae,Le,Je,pt,je,et,At,Nt,Kt,Yt,dt,vt,kt,Wt={context:(Gn=z.getNode()).nodeName.toLowerCase(),data:g.data,insert:!0},bn=G.parse(f,Wt);if(!0===g.paste&&function AT(a,f){var g,x,C,I,L,z=f.firstChild,j=f.lastChild;return z&&"meta"===z.name&&(z=z.next),x=j=j&&"mce_marker"===j.attr("id")?j.prev:j,C=(g=a).getNonEmptyElements(),x&&(x.isEmpty(C)||(I=x,g.getBlockElements()[I.name]&&I.firstChild&&I.firstChild===I.lastChild&&("br"===(L=I.firstChild).name||L.value===xa)))&&(j=j.prev),z&&z===j&&("ul"===z.name||"ol"===z.name)}(a.schema,bn)&&FM(j,Gn))return pe=function IT(a,f,g,x){function C(Wt){var bn=en.fromRangeStart(g),Xn=Sc(f.getRoot()),vn=1===Wt?Xn.prev(bn):Xn.next(bn);return!vn||FM(f,vn.getNode())!==dt}var I,L,z,j,G,te,K,ie,le,pe,me,xe,be,Ae,Le,Je,pt,Be,je,et,At,Nt,Kt,Yt=(I=f,G=a.serialize(x),z=(L=I.createFragment(G)).firstChild,j=L.lastChild,z&&"META"===z.nodeName&&z.parentNode.removeChild(z),j&&"mce_marker"===j.id&&j.parentNode.removeChild(j),L),dt=FM(f,g.startContainer),vt=function M0(a){return 0<a.length&&(!(x=a[a.length-1]).firstChild||(f=x)&&f.firstChild&&f.firstChild===f.lastChild&&((g=f.firstChild).data===xa||os(g)))?a.slice(0,-1):a;var f,g,x}(rr(Yt.firstChild.childNodes,function(Wt){return"LI"===Wt.nodeName})),kt=f.getRoot();return C(1)?(je=kt,Kt=(Be=dt).parentNode,Qt.each(vt,function(Wt){Kt.insertBefore(Wt,Be)}),et=je,At=en.before(Be),(Nt=Sc(et).next(At))?Nt.toRange():null):C(2)?(te=dt,ie=kt,f.insertAfter((K=vt).reverse(),te),VM(K[0],ie)):(pe=vt,me=kt,xe=le=dt,Ae=(be=g).cloneRange(),Le=be.cloneRange(),Ae.setStartBefore(xe),Le.setEndAfter(xe),Je=[Ae.cloneContents(),Le.cloneContents()],(pt=le.parentNode).insertBefore(Je[0],le),Qt.each(pe,function(Wt){pt.insertBefore(Wt,le)}),pt.insertBefore(Je[1],le),pt.removeChild(le),VM(pe[pe.length-1],me))}(K,j,z.getRng(),bn),z.setRng(pe),void a.fire("SetContent",le);if(function(){for(var Vn=bn;Vn=Vn.walk();)1===Vn.type&&Vn.attr("data-mce-fragment","1")}(),"mce_marker"===(vn=bn.lastChild).attr("id"))for(var Xn=vn,vn=vn.prev;vn;vn=vn.walk(!0))if(3===vn.type||!j.isBlock(vn.name)){a.schema.isValidChild(vn.parent.name,"span")&&vn.parent.insert(Xn,vn,"br"===vn.name);break}if(a._selectionOverrides.showBlockCaretContainer(Gn),Wt.invalid){a.selection.setContent(ie);var Gn=z.getNode(),kn=a.getBody();for(9===Gn.nodeType?Gn=vn=kn:vn=Gn;vn!==kn;)vn=(Gn=vn).parentNode;f=Gn===kn?kn.innerHTML:j.getOuterHTML(Gn),f=K.serialize(G.parse(f.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return K.serialize(bn)}))),Gn===kn?j.setHTML(kn,f):j.setOuterHTML(Gn,f)}else Ae=a,Le=f=K.serialize(bn),"all"===(Je=Gn).getAttribute("data-mce-bogus")?Je.parentNode.insertBefore(Ae.dom.createFragment(Le),Je):!(pt=Je.firstChild)||pt===Je.lastChild&&"BR"===pt.nodeName?Ae.dom.setHTML(Je,Le):Ae.selection.setContent(Le);et=te,Kt=(je=a).schema.getTextInlineElements(),Yt=je.dom,et&&(At=je.getBody(),Nt=Tn(Yt),Qt.each(Yt.select("*[data-mce-fragment]"),function(Vn){if(ct(Kt[Vn.nodeName.toLowerCase()])&&gr(si(Yt,Vn),function(_r){return!Do.has(_r)}))for(var Nn=Vn.parentNode;ct(Nn)&&Nn!==At&&!function(_r,mn,sr){function In(Uo){var tt=_r.getStyle(mn,Uo),xt=_r.getStyle(sr,Uo);return qt(tt)&&qt(xt)&&tt!==xt}var Mr=si(_r,mn),kr=si(_r,sr);return Ce(Mr,function(Uo){function tt(tn){return Ce(tn,function(Cn){return Cn===Uo})}if(tt(kr)||!tt(tw))return In(Uo);var xt=rr(kr,function(tn){return Ce(tw,function(Cn){return $r(tn,Cn)})});return Ce(xt,In)})}(Yt,Vn,Nn);Nn=Nn.parentNode)if(Nt.compare(Nn,Vn)){Yt.remove(Vn,!0);break}})),function(Vn,Nn){var _r,mn=Vn.dom,sr=Vn.selection;if(Nn){sr.scrollIntoView(Nn);var In=jg(Vn.getBody(),Nn);if("false"===mn.getContentEditable(In))return mn.remove(Nn),sr.select(In);var Mr,kr=mn.createRng(),Uo=Nn.previousSibling;Ar(Uo)?(kr.setStart(Uo,Uo.nodeValue.length),Fr.ie||Ar(Mr=Nn.nextSibling)&&(Uo.appendData(Mr.data),Mr.parentNode.removeChild(Mr))):(kr.setStartBefore(Nn),kr.setEndBefore(Nn));var tt=mn.getParent(Nn,mn.isBlock);mn.remove(Nn),tt&&mn.isEmpty(tt)&&(Vn.$(tt).empty(),kr.setStart(tt,0),kr.setEnd(tt,0),A0(tt)||tt.getAttribute("data-mce-fragment")||!(_r=function(xt){var tn=en.fromRangeStart(xt);if(tn=Sc(Vn.getBody()).next(tn))return tn.toRange()}(kr))?mn.add(tt,mn.create("br",{"data-mce-bogus":"1"})):(kr=_r,mn.remove(tt))),sr.setRng(kr)}}(a,j.get("mce_marker")),dt=a.getBody(),Qt.each(dt.getElementsByTagName("*"),function(Vn){Vn.removeAttribute("data-mce-fragment")}),vt=j,kt=z.getStart(),$.from(vt.getParent(kt,"td,th")).map(It.fromDom).each(Ws),a.fire("SetContent",le),a.addVisual()}}function GS(a){return a instanceof He}function HM(a,f,g){var x;a.dom.setHTML(a.getBody(),f),!0!==g&&pl(x=a)&&Vi(x.getBody()).each(function(C){var I=C.getNode(),L=nf(I)?Vi(I).getOr(C):C;x.selection.setRng(L.toRange())})}function OT(a){return Ur(a)?a:Yn}function WM(a,f,g){var x=f(a),C=OT(g);return x.orThunk(function(){return C(a)?$.none():function(I){for(var L=a.dom,z=OT(C);L.parentNode;){var j=It.fromDom(L=L.parentNode),G=I(j);if(G.isSome())return G;if(z(j))break}return $.none()}(f)})}function ET(a,f,g){var x=a.formatter.get(g);if(x)for(var C=0;C<x.length;C++){var I=x[C];if(ii(I)&&!1===I.inherit&&a.dom.is(f,I.selector))return 1}}function no(a,f,g,x,C){var I=a.dom.getRoot();return f!==I&&(f=a.dom.getParent(f,function(L){return!!ET(a,L,g)||L.parentNode===I||!!om(a,L,g,x,!0)}),!!om(a,f,g,x,C))}function bx(a,f,g){return!!Ka(f,g.inline)||!!Ka(f,g.block)||(g.selector?1===f.nodeType&&a.is(f,g.selector):void 0)}function Eo(a,f,g,x,C,I){var L=g[x];if(Ur(g.onmatch))return g.onmatch(f,g,x);if(L)if(uo(L.length)){for(var z in L)if(po(L,z)){var j="attributes"===x?a.getAttrib(f,z):Hg(a,f,z),G=Mc(L[z],I),te=cr(j)||Bt(j);if((!te||!cr(G))&&(C&&te&&!g.exact||(!C||g.exact)&&!Ka(j,Km(a,G,z))))return}}else for(var K=0;K<L.length;K++)if("attributes"===x?a.getAttrib(f,L[K]):Hg(a,f,L[K]))return 1;return 1}function GM(a,f,g,x,C){if(x)return no(a,x,f,g,C);if(x=a.selection.getNode(),no(a,x,f,g,C))return!0;var I=a.selection.getStart();return!(I===x||!no(a,I,f,g,C))}function US(a){return 0<function(f){for(var g=[];f;){if(3===f.nodeType&&f.nodeValue!==Ub||1<f.childNodes.length)return[];1===f.nodeType&&g.push(f),f=f.firstChild}return g}(a).length}function _o(a){if(a){var f=new Ks(a,a);for(a=f.current();a;a=f.next())if(Ar(a))return a}return null}function xx(a){var f=It.fromTag("span");return ec(f,{id:qM,"data-mce-bogus":"1","data-mce-type":"format-caret"}),a&&Fs(f,It.fromText(Ub)),f}function UM(a,f,g){void 0===g&&(g=!0);var x,C,I,L,z,j,G,te,K=a.dom,ie=a.selection;US(f)?My(a,!1,It.fromDom(f),g):(x=ie.getRng(),C=K.getParent(f,K.isBlock),I=x.startContainer,L=x.startOffset,z=x.endContainer,j=x.endOffset,(te=_o(f))&&te.nodeValue.charAt(0)===Ub&&te.deleteData(0,1),G=te,K.remove(f,!0),I===G&&0<L&&x.setStart(G,L-1),z===G&&0<j&&x.setEnd(G,j-1),C&&K.isEmpty(C)&&Wi(It.fromDom(C)),ie.setRng(x))}function Ei(a,f,g){void 0===g&&(g=!0);var x=a.dom,C=a.selection;if(f)UM(a,f,g);else if(!(f=Xm(a.getBody(),C.getStart())))for(;f=x.get(qM);)UM(a,f,!1)}function jS(a,f){return a.appendChild(f),f}function YS(a,f){var g=De(a,function(x,C){return jS(x,C.cloneNode(!1))},f);return jS(g,g.ownerDocument.createTextNode(Ub))}function PT(a,f){var g=a.schema.getTextInlineElements();return po(g,Ga(f))&&!eu(f.dom)&&!ol(f.dom)}Pn(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],function(a){Do.add(a)});var qS,tw=["font","text-decoration","text-emphasis"],_x=qe(Hi,!0,dy),Sx=qe(Hi,!1,dy),RT=tr(!0,da),LT=tr(!1,da),k0=tr(!0,Cl),lp=tr(!1,Cl),YM=tr(!0,nf),Dc=tr(!1,nf),mv=tr(!0,di),ky=tr(!1,di),vv=qe(nm,!1),Rs=qe(nm,!0),T0=qe(pv,!1),ag=qe(pv,!0),D0=qe(vf,!1),Ty=qe(vf,!0),Xl=hu([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),cp=function(a){var f;return(8===wp(f=a)||"#comment"===Ga(f)?Xs:rl)(a).bind(cp).orThunk(function(){return $.some(a)})},nw=function(a,f,g,x){void 0===x&&(x=!0),f.deleteContents();var C,I=cp(g).getOr(g),L=It.fromDom(a.dom.getParent(I.dom,a.dom.isBlock));return ee(L)&&(Wi(L),x&&a.selection.setCursorLocation(L.dom,0)),gn(g,L)||Pn((yc(cu(L),g)?[]:cu(C=L).map(Wu).map(function(z){return rr(z,function(j){return!gn(C,j)})}).getOr([])).concat(Wu(g)),function(z){gn(z,L)||Dt(z,L)||!ee(z)||Is(z)}),!0},rw=function(a,f){return yr(Gs(f,a),function(g){return wl(g)&&"caption"===Ga(g)})},rm=function(a,f){return Wi(f),a.selection.setCursorLocation(f.dom,0),$.some(!0)},A0=vs,I0=function(a,f){f(a),a.firstChild&&I0(a.firstChild,f),a.next&&I0(a.next,f)},Ka=Zm,om=function(a,f,g,x,C){var I=a.formatter.get(g),L=a.dom;if(I&&f)for(var z=0;z<I.length;z++){var j=I[z];if(bx(a.dom,f,j)&&Eo(L,f,j,"attributes",C,x)&&Eo(L,f,j,"styles",C,x)){var G=j.classes;if(G)for(var te=0;te<G.length;te++)if(!a.dom.hasClass(f,Mc(G[te],x)))return;return j}}},Ub=ua,qM="_mce_caret",Cx={},ow=ni,XS=ki;function Mx(a){return co(a)&&!cc(a)&&!eu(a)&&!ol(a)}function ks(a,f){for(var g=a;g;g=g[f]){if(Ar(g)&&qt(g.data))return a;if(co(g)&&!cc(g))return g}return a}function O0(a,f,g){var x=Tn(a);if(f&&g&&(f=ks(f,"previousSibling"),g=ks(g,"nextSibling"),x.compare(f,g))){for(var C=f.nextSibling;C&&C!==g;){var I=C;C=C.nextSibling,f.appendChild(I)}return a.remove(g),Qt.each(Qt.grep(g.childNodes),function(L){f.appendChild(L)}),f}return g}function ZS(a,f,g,x){var C;x&&!1!==f.merge_siblings&&(C=O0(a,Kp(x),x),O0(a,C,Kp(C,!0)))}function iw(a,f){return function(g){return!(!g||!Hg(a,g,f))}}function $a(a,f,g){return function(x){var C,I;a.setStyle(x,f,g),""===x.getAttribute("style")&&x.removeAttribute("style"),C=a,"SPAN"===(I=x).nodeName&&0===C.getAttribs(I).length&&C.remove(I,!0)}}function kx(a,f,g){return a.isChildOf(f,g)&&f!==g&&!a.isBlock(g)}function jb(a,f,g){var x,C=f[g?"startContainer":"endContainer"],I=f[g?"startOffset":"endOffset"];return co(C)&&(!g&&I&&I--,C=C.childNodes[(x=C.childNodes.length-1)<I?x:I]),Ar(C)&&g&&I>=C.nodeValue.length&&(C=new Ks(C,a.getBody()).next()||C),Ar(C)&&!g&&0===I&&new Ks(C,a.getBody()).prev()||C}function XM(a,f){var g=f?"firstChild":"lastChild";if(/^(TR|TH|TD)$/.test(a.nodeName)&&a[g]){var x=a[g];return"TR"===a.nodeName&&x[g]||x}return a}function KS(a,f,g,x){var C=a.create(g,x);return f.parentNode.insertBefore(C,f),C.appendChild(f),C}function ZM(a,f,g,x,C){var I=It.fromDom(f),L=It.fromDom(a.create(x,C));return Lc(L,(g?Ql:nd)(I)),g?(Du(I,L),Ll(L,I)):(Au(I,L),Fs(L,I)),L.dom}function Yb(a,f,g,x){var C=Kp(f,g,x);return cr(C)||"BR"===C.nodeName||a.isBlock(C)}function KM(a,f,g,x,C){var I,L,z=a.dom,j=z,G=x;if(!(mo(L=f)&&fp(G,L.inline)||Kc(L)&&fp(G,L.block)||ii(L)&&co(G)&&j.is(G,L.selector)||f.links&&"A"===x.nodeName))return Dy.keep();var te,K,ie,le,pe,me,xe,be,Ae=x;if(mo(f)&&"all"===f.remove&&Yo(f.preserve_attributes)){var Le=rr(z.getAttribs(Ae),function(je){return nn(f.preserve_attributes,je.name.toLowerCase())});if(z.removeAllAttribs(Ae),Pn(Le,function(je){return z.setAttrib(Ae,je.name,je.value)}),0<Le.length)return Dy.rename("span")}if("all"!==f.remove){dw(f.styles,function(je,et){je=Km(z,Mc(je,g),et+""),ho(et)&&(et=je,C=null),!f.remove_similar&&C&&!fp(Hg(z,C,et),je)||z.setStyle(Ae,et,""),I=!0}),I&&""===z.getAttrib(Ae,"style")&&(Ae.removeAttribute("style"),Ae.removeAttribute("data-mce-style")),dw(f.attributes,function(je,et){var At;if(je=Mc(je,g),ho(et)&&(et=je,C=null),f.remove_similar||!C||fp(z.getAttrib(C,et),je))if("class"===et&&(je=z.getAttrib(Ae,et))&&(At="",Pn(je.split(/\s+/),function(Nt){/mce\-\w+/.test(Nt)&&(At+=(At?" ":"")+Nt)}),At))z.setAttrib(Ae,et,At);else{if(tk.test(et)&&Ae.removeAttribute("data-mce-"+et),"style"===et&&Nl(["li"])(Ae)&&"none"===z.getStyle(Ae,"list-style-type"))return Ae.removeAttribute(et),void z.setStyle(Ae,"list-style-type","none");"class"===et&&Ae.removeAttribute("className"),Ae.removeAttribute(et)}}),dw(f.classes,function(je){je=Mc(je,g),C&&!z.hasClass(C,je)||z.removeClass(Ae,je)});for(var Je=z.getAttribs(Ae),pt=0;pt<Je.length;pt++){var Be=Je[pt].nodeName;if(0!==Be.indexOf("_")&&0!==Be.indexOf("data-"))return Dy.keep()}}return"none"!==f.remove?(ie=f,me=(K=Ae).parentNode,xe=(te=a).dom,be=Za(te),Kc(ie)&&(be?me===xe.getRoot()&&(ie.list_block&&fp(K,ie.list_block)||Pn(Fo(K.childNodes),function(je){Ud(te,be,je.nodeName.toLowerCase())?le?le.appendChild(je):(le=KS(xe,je,be),xe.setAttribs(le,te.settings.forced_root_block_attrs)):le=null})):xe.isBlock(K)&&!xe.isBlock(me)&&(Yb(xe,K,!1)||Yb(xe,K.firstChild,!0,!0)||K.insertBefore(xe.create("br"),K.firstChild),Yb(xe,K,!0)||Yb(xe,K.lastChild,!1,!0)||K.appendChild(xe.create("br")))),ii(pe=ie)&&mo(pe)&&yc(Sr(pe,"mixed"),!0)&&!fp(ie.inline,K)||xe.remove(K,!0),Dy.removed()):Dy.keep()}function im(a,f,g,x,C){return KM(a,f,g,x,C).fold(Yn,function(I){return a.dom.rename(x,I),!0},Jo)}function aw(a,f,g,x,C){function I(be){var Ae,Le,Je,pt,Be,je=(Le=f,Je=g,pt=C,Pn(p0((Ae=a).dom,be.parentNode).reverse(),function(et){var At;Be||"_start"===et.id||"_end"===et.id||(At=om(Ae,et,Le,Je,pt))&&!1!==At.split&&(Be=et)}),Be);return function(et,At,Nt,Kt,Yt,dt,vt,kt){var Wt,bn,Xn=et.dom;if(Nt){for(var vn=Nt.parentNode,Gn=Kt.parentNode;Gn&&Gn!==vn;Gn=Gn.parentNode){for(var kn=Xn.clone(Gn,!1),Vn=0;Vn<At.length&&null!==(kn=function(Nn,_r,mn){return KM(Nn,_r,kt,mn,mn).fold(Bn(mn),function(sr){return Nn.dom.createFragment().appendChild(mn),Nn.dom.rename(mn,sr)},Bn(null))}(et,At[Vn],kn));Vn++);kn&&(Wt&&kn.appendChild(Wt),bn=bn||kn,Wt=kn)}vt.mixed&&Xn.isBlock(Nt)||(Kt=Xn.split(Nt,Kt)),Wt&&(Yt.parentNode.insertBefore(Wt,Yt),bn.appendChild(Yt),mo(vt)&&ZS(Xn,vt,0,Wt))}return Kt}(a,te,je,be,be,0,K,g)}function L(be){return Ce(te,function(Ae){return im(a,Ae,g,be,be)})}function z(be){var Ae,Le=le.get(be?"_start":"_end"),Je=Le[be?"firstChild":"lastChild"];return cc(Ae=Je)&&co(Ae)&&("_start"===Ae.id||"_end"===Ae.id)&&(Je=Je[be?"firstChild":"lastChild"]),Ar(Je)&&0===Je.data.length&&(Je=be?Le.previousSibling||Le.nextSibling:Le.nextSibling||Le.previousSibling),le.remove(Le,!0),Je}function j(be){var Ae=jd(a,be,te,be.collapsed);if(K.split){if(Ae=tg(Ae),(Je=jb(a,Ae,!0))!==(pt=jb(a,Ae))){if(Je=XM(Je,!0),pt=XM(pt,!1),kx(le,Je,pt)){var Le=$.from(Je.firstChild).getOr(Je);return I(ZM(le,Le,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void z(!0)}if(kx(le,pt,Je))return Le=$.from(pt.lastChild).getOr(pt),I(ZM(le,Le,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void z(!1);var Je=KS(le,Je,"span",{id:"_start","data-mce-type":"bookmark"}),pt=KS(le,pt,"span",{id:"_end","data-mce-type":"bookmark"}),Be=le.createRng();Be.setStartAfter(Je),Be.setEndBefore(pt),hy(le,Be,function(je){Pn(je,function(et){cc(et)||cc(et.parentNode)||I(et)})}),I(Je),I(pt),Je=z(!0),pt=z()}else Je=pt=I(Je);Ae.startContainer=Je.parentNode||Je,Ae.startOffset=le.nodeIndex(Je),Ae.endContainer=pt.parentNode||pt,Ae.endOffset=le.nodeIndex(pt)+1}hy(le,Ae,function(je){Pn(je,me)})}var G,te=a.formatter.get(f),K=te[0],ie=!0,le=a.dom,pe=a.selection,me=function(be){var Ae=!0,Le=!1;co(be)&&le.getContentEditable(be)&&(Ae=ie,ie="true"===le.getContentEditable(be),Le=!0);var Je,pt,Be=Fo(be.childNodes);if(ie&&!Le&&(Je=L(be)||Ce(te,function(et){return bx(le,be,et)}),pt=be.parentNode,!Je&&ct(pt)&&as(K)&&L(pt)),K.deep&&Be.length){for(var je=0;je<Be.length;je++)me(Be[je]);Le&&(ie=Ae)}Pn(["underline","line-through","overline"],function(et){co(be)&&a.dom.getStyle(be,"text-decoration")===et&&be.parentNode&&G_(le,be.parentNode)===et&&im(a,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:et}},null,be)})};if(x)return op(x)?((G=le.createRng()).setStartBefore(x),G.setEndAfter(x),j(G)):j(x),void _0(a,f,x,g);if("false"!==le.getContentEditable(pe.getNode()))pe.isCollapsed()&&mo(K)&&!ip(a).length?function ew(a,f,g,x){var C,I,L,z,j,G,te,K,ie,le,pe,me,xe,be,Ae,Le=a.dom,Je=a.selection,pt=[],Be=Je.getRng(),je=Be.startContainer,At=je;for(3===je.nodeType&&(Be.startOffset!==je.nodeValue.length&&(C=!0),At=At.parentNode);At;){if(om(a,At,f,g,x)){I=At;break}At.nextSibling&&(C=!0),pt.push(At),At=At.parentNode}I&&(C?(L=Je.getBookmark(),Be.collapse(!0),z=tg(jd(a,Be,a.formatter.get(f),!0)),a.formatter.remove(f,g,z,x),Je.moveToBookmark(L)):(j=Xm(a.getBody(),I),ie=G=xx(!1).dom,(me=(pe=a.dom).getParent(le=null!==j?j:I,qe(h0,a)))&&pe.isEmpty(me)?le.parentNode.replaceChild(ie,le):(be=xc(xe=It.fromDom(le),"br"),Ae=rr(function(){for(var Nt=[],Kt=xe.dom;Kt;)Nt.push(It.fromDom(Kt)),Kt=Kt.lastChild;return Nt}().slice(-1),Zi),be.length===Ae.length&&Pn(Ae,Is),pe.isEmpty(le)?le.parentNode.replaceChild(ie,le):pe.insertAfter(ie,le)),te=function jM(a,f,g,x,C,I){var L,z,j=a.formatter,G=a.dom,te=rr(Tr(j.get()),function(ie){return ie!==x&&!bt(ie,"removeformat")});if(0<rr((L=a,z=g,dr(te,function(ie,le){var pe=function ix(a,f){return Ce(a.formatter.get(f),function(g){function x(C){return 1<C.length&&"%"===C.charAt(0)}return Ce(["styles","attributes"],function(C){return Sr(g,C).exists(function(I){var L,z;return Ce(Yo(I)?I:(L=mi,z=[],wn(I,function(j,G){z.push(L(j,G))}),z),x)})})})}(L,le);return L.formatter.matchNode(z,le,{},pe)?ie.concat([le]):ie},[])),function(ie){return me=x,xe=["inline","block","selector","attributes","styles","classes"],!Ce((pe=a).formatter.get(ie),function(be){var Ae=le(be);return Ce(pe.formatter.get(me),function(Le){var Je,pt=le(Le),Be=Ae,je=pt;return gt(Je=void 0===Je?Kr:Je).eq(Be,je)})});function le(be){return zo(be,function(Ae,Le){return Ce(xe,function(Je){return Je===Le})})}var pe,me,xe}).length){var K=g.cloneNode(!1);return G.add(f,K),j.remove(x,C,K,I),G.remove(K),$.some(K)}return $.none()}(a,G,I,f,g,x),K=YS(pt.concat(te.toArray()),G),UM(a,j,!1),Je.setCursorLocation(K,1),Le.isEmpty(I)&&Le.remove(I)))}(a,f,g,C):(Qm(pe,!0,function(){vd(a,j)}),mo(K)&&GM(a,f,g,pe.getStart())&&tu(le,pe,pe.getRng()),a.nodeChanged()),_0(a,f,x,g);else{x=pe.getNode();for(var xe=0;xe<te.length&&(!te[xe].ceFalseOverride||!im(a,te[xe],g,x,x));xe++);_0(a,f,x,g)}}function E0(a){return co(a)&&!cc(a)&&!eu(a)&&!ol(a)}function Tx(a){return po(a,"vars")}function $S(a,f,g,x,C){return Ue(f,function(I){var L=a.formatter.matchNode(I,g,null!=C?C:{},x);return!uo(L)},function(I){return ET(a,I,g)||!x&&ct(a.formatter.matchNode(I,g,C,!0))})}function $M(a,f){var g=null!=f?f:nk(a);return rr(p0(a.dom,g),function(x){return co(x)&&!ol(x)})}function JS(a,f){var g=(f||document).createDocumentFragment();return Pn(a,function(x){g.appendChild(x.dom)}),It.fromDom(g)}function QS(a,f,g){return{element:a,width:f,rows:g}}function NT(a,f){return{element:a,cells:f}}function Dx(a,f){var g=parseInt(Zs(a,f),10);return isNaN(g)?1:g}function BT(a){return dr(a,function(f,g){return g.cells.length>f?g.cells.length:f},0)}function JM(a,f){for(var g=a.rows,x=0;x<g.length;x++)for(var C=g[x].cells,I=0;I<C.length;I++)if(gn(C[I],f))return $.some({x:I,y:x});return $.none()}function qb(a,f,g,x,C){for(var I=[],L=a.rows,z=g;z<=C;z++){var j=L[z].cells,G=f<x?j.slice(f,x+1):j.slice(x,f+1);I.push(NT(L[z].element,G))}return I}function tC(){return JS([])}function Zb(a,f){return 0<=f&&f<a.length&&dy(a.charAt(f))}function yv(a,f){var g=on(a.innerText);return f?g.replace(/^[ \f\n\r\t\v]+/,""):g}function FT(a){return co(a)?a.outerHTML:Ar(a)?Vc.encodeRaw(a.data,!1):ju(a)?"\x3c!--"+a.data+"--\x3e":""}function sw(a){var f,g=gc((f=a.getBody(),rr(mt(Fo(f.childNodes),FT),function(C){return 0<C.length})),function(C){var I=Er(a.serializer,C);return 0<I.length?[I]:[]}),x=g.join("");return-1!==x.indexOf("</iframe>")?{type:"fragmented",fragments:g,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:x,bookmark:null,beforeBookmark:null}}function rC(a,f,g){var x,C,I,L,z,j,G,te,K,ie,le,pe=g?f.beforeBookmark:f.bookmark;function me(xe,be,Ae,Le){for(var Je=xe;Je-be<Le&&Je<Ae&&L[Je]===z[Je-be];)++Je;return{start:xe,end:Je,diag:be}}"fragmented"===f.type?(x=f.fragments,C=a.getBody(),I=mt(Fo(C.childNodes),FT),function nC(a,f){var g=0;Pn(a,function(x){var C,I,L,z,G,te,K;0===x[0]?g++:1===x[0]?(z=f,G=g,K=function(ie){var le,pe=document.createElement("div"),me=document.createDocumentFragment();for(ie&&(pe.innerHTML=ie);le=pe.firstChild;)me.appendChild(le);return me}(x[1]),z.hasChildNodes()&&G<z.childNodes.length?(te=z.childNodes[G]).parentNode.insertBefore(K,te):z.appendChild(K),g++):2===x[0]&&(I=g,(C=f).hasChildNodes()&&I<C.childNodes.length&&(L=C.childNodes[I]).parentNode.removeChild(L))})}((j=(L=I).length+(z=x).length+2,G=new Array(j),te=new Array(j),K=function(xe,be,Ae,Le,Je){var pt=ie(xe,be,Ae,Le);if(null===pt||pt.start===be&&pt.diag===be-Le||pt.end===xe&&pt.diag===xe-Ae)for(var Be=xe,je=Ae;Be<be||je<Le;)Be<be&&je<Le&&L[Be]===z[je]?(Je.push([0,L[Be]]),++Be,++je):Le-Ae<be-xe?(Je.push([2,L[Be]]),++Be):(Je.push([1,z[je]]),++je);else{K(xe,pt.start,Ae,pt.start-pt.diag,Je);for(var et=pt.start;et<pt.end;++et)Je.push([0,L[et]]);K(pt.end,be,pt.end-pt.diag,Le,Je)}},ie=function(xe,be,Ae,Le){var Je=be-xe,pt=Le-Ae;if(0==Je||0==pt)return null;var Be,je,et,At,Nt,Kt=Je-pt,Yt=pt+Je,dt=(Yt%2==0?Yt:1+Yt)/2;for(G[1+dt]=xe,te[1+dt]=be+1,Be=0;Be<=dt;++Be){for(je=-Be;je<=Be;je+=2){for(G[et=je+dt]=je===-Be||je!==Be&&G[et-1]<G[et+1]?G[et+1]:G[et-1]+1,Nt=(At=G[et])-xe+Ae-je;At<be&&Nt<Le&&L[At]===z[Nt];)G[et]=++At,++Nt;if(Kt%2!=0&&Kt-Be<=je&&je<=Kt+Be&&te[et-Kt]<=G[et])return me(te[et-Kt],je+xe-Ae,be,Le)}for(je=Kt-Be;je<=Kt+Be;je+=2){for(te[et=je+dt-Kt]=je===Kt-Be||je!==Kt+Be&&te[et+1]<=te[et-1]?te[et+1]-1:te[et-1],Nt=(At=te[et]-1)-xe+Ae-je;xe<=At&&Ae<=Nt&&L[At]===z[Nt];)te[et]=At--,Nt--;if(Kt%2==0&&-Be<=je&&je<=Be&&te[et]<=G[et+Kt])return me(te[et],je+xe-Ae,be,Le)}}},K(0,L.length,0,z.length,le=[]),le),C)):a.setContent(f.content,{format:"raw",no_selection:!ct(pe)||!Qu(pe)||!pe.isFakeCaret}),a.selection.moveToBookmark(pe)}function Kb(a){return"fragmented"===a.type?a.fragments.join(""):a.content}function $b(a){var f=It.fromTag("body",Y2());return Rm(f,Kb(a)),Pn(xc(f,"*[data-mce-bogus]"),Cp),f.dom.innerHTML}function Ax(a,f){return!(!a||!f)&&(x=f,Kb(a)===Kb(x)||(g=f,$b(a)===$b(g)));var g,x}function uw(a){return 0===a.get()}function Jb(a,f,g){uw(g)&&(a.typing=f)}function ek(a,f){a.typing&&(Jb(a,!1,f),a.add())}function yf(a){return{undoManager:{beforeChange:function(f,g){var x=a,C=g;uw(f)&&C.set(Lb(x.selection))},add:function(f,g,x,C,I,L){return function(z,j,G,te,K,ie,le){var pe=sw(z);if(ie=Qt.extend(ie=ie||{},pe),!1===uw(te)||z.removed)return null;var me=j.data[G.get()];if(z.fire("BeforeAddUndo",{level:ie,lastLevel:me,originalEvent:le}).isDefaultPrevented()||me&&Ax(me,ie))return null;j.data[G.get()]&&K.get().each(function(Le){j.data[G.get()].beforeBookmark=Le});var xe=z.getParam("custom_undo_redo_levels",0,"number");if(xe&&j.data.length>xe){for(var be=0;be<j.data.length-1;be++)j.data[be]=j.data[be+1];j.data.length--,G.set(j.data.length)}ie.bookmark=Lb(z.selection),G.get()<j.data.length-1&&(j.data.length=G.get()+1),j.data.push(ie),G.set(j.data.length-1);var Ae={level:ie,lastLevel:me,originalEvent:le};return 0<G.get()?(z.setDirty(!0),z.fire("AddUndo",Ae),z.fire("change",Ae)):z.fire("AddUndo",Ae),ie}(a,f,g,x,C,I,L)},undo:function(f,g,x){return C=a,L=g,z=x,(I=f).typing&&(I.add(),I.typing=!1,Jb(I,!1,L)),0<z.get()&&(z.set(z.get()-1),rC(C,j=I.data[z.get()],!0),C.setDirty(!0),C.fire("Undo",{level:j})),j;var C,I,L,z,j},redo:function(f,g){return x=a,I=g,(C=f).get()<I.length-1&&(C.set(C.get()+1),rC(x,L=I[C.get()],!1),x.setDirty(!0),x.fire("Redo",{level:L})),L;var x,C,I,L},clear:function(f,g){var x,C=a,I=g;(x=f).data=[],I.set(0),x.typing=!1,C.fire("ClearUndos")},reset:function(f){var g;(g=f).clear(),g.add()},hasUndo:function(f,g){return x=a,C=f,0<g.get()||C.typing&&C.data[0]&&!Ax(sw(x),C.data[0]);var x,C},hasRedo:function(f,g){return x=f,g.get()<x.data.length-1&&!x.typing;var x},transact:function(f,g,x){return I=x,ek(C=f,g),C.beforeChange(),C.ignore(I),C.add();var C,I},ignore:function(f,g){try{f.set(f.get()+1),g()}finally{f.set(f.get()-1)}},extra:function(f,g,x,C){var I,L,z=a,j=g,G=C;(I=f).transact(x)&&(L=I.data[j.get()].bookmark,rC(z,I.data[j.get()-1],!0),I.transact(G)&&(I.data[j.get()-1].beforeBookmark=L))}},formatter:{match:function(f,g,x,C){return GM(a,f,g,x,C)},matchAll:function(f,g){return C=f,I=g,L=[],z={},j=(x=a).selection.getStart(),x.dom.getParent(j,function(G){for(var te=0;te<C.length;te++){var K=C[te];!z[K]&&om(x,G,K,I)&&(z[K]=!0,L.push(K))}},x.dom.getRoot()),L;var x,C,I,L,z,j},matchNode:function(f,g,x,C){return om(a,f,g,x,C)},canApply:function(f){return function(g){var x=g.formatter.get(f),C=g.dom;if(x)for(var I=p0(C,g.selection.getStart()),L=x.length-1;0<=L;L--){var z=x[L];if(!ii(z)||ct(z.defaultBlock))return!0;for(var j=I.length-1;0<=j;j--)if(C.is(I[j],z.selector))return!0}return!1}(a)},closest:function(f){return C=f,$.from((x=a).selection.getStart(!0)).bind(function(I){return WM(It.fromDom(I),function(L){return On(C,function(z){return om(x,L.dom,j=z)?$.some(j):$.none();var j})},g)}).getOrNull();function g(I){return gn(I,It.fromDom(x.getBody()))}var x,C},apply:function(f,g,x){return iC(a,f,g,x)},remove:function(f,g,x,C){return aw(a,f,g,x,C)},toggle:function(f,g,x){var C,I=f,L=g,z=x,j=(C=a).formatter.get(I);(!GM(C,I,L,z)||"toggle"in j[0]&&!j[0].toggle?iC:aw)(C,I,L,z)},formatChanged:function(f,g,x,C,I){return function j2(a,f,g,x,C,I){var L,z,j,G,te,K,ie,le,pe;return null===f.get()&&(z=a,(L=f).set({}),z.on("NodeChange",function(me){VT(z,me.element,L.get())}),z.on("FormatApply FormatRemove",function(me){var xe=$.from(me.node).map(function(be){return op(be)?be:be.startContainer}).bind(function(be){return co(be)?$.some(be):$.from(be.parentElement)}).getOrThunk(function(){return nk(z)});VT(z,xe,L.get())})),j=a,te=g,K=x,ie=C,le=I,pe=(G=f).get(),Pn(te.split(","),function(me){function xe(){var Le=$M(j);return $S(j,Le,me,ie,le).isSome()}var be,Ae=Sr(pe,me).getOrThunk(function(){var Le={withSimilar:{state:Os(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Os(!1),similar:!1,callbacks:[]},withVars:[]};return pe[me]=Le});uo(le)?((be=ie?Ae.withSimilar:Ae.withoutSimilar).callbacks.push(K),1===be.callbacks.length&&be.state.set(xe())):Ae.withVars.push({state:Os(xe()),similar:ie,vars:le,callback:K})}),G.set(pe),{unbind:function(){var me,xe=g,be=x,Ae=(me=f).get();Pn(xe.split(","),function(Le){return Sr(Ae,Le).each(function(Je){Ae[Le]={withSimilar:hr(hr({},Je.withSimilar),{callbacks:rr(Je.withSimilar.callbacks,function(pt){return pt!==be})}),withoutSimilar:hr(hr({},Je.withoutSimilar),{callbacks:rr(Je.withoutSimilar.callbacks,function(pt){return pt!==be})}),withVars:rr(Je.withVars,function(pt){return pt.callback!==be})}})}),me.set(Ae)}}}(a,f,g,x,C,I)}},editor:{getContent:function(f,g){return C=f,I=g,$.from((x=a).getBody()).fold(Bn("tree"===C.format?new He("body",11):""),function(L){return z=x,G=L,te=I,me=hr(hr({},j=C),{format:te,get:!0,getInner:!0}),be="raw"===(xe=j.no_events?me:z.fire("BeforeGetContent",me)).format?Qt.trim(io(z.serializer,G.innerHTML)):"text"===xe.format?z.dom.isEmpty(G)?"":on(G.innerText||G.textContent):"tree"===xe.format?z.serializer.serialize(G,xe):(ie=(K=z).serializer.serialize(G,xe),le=Za(K),pe=new RegExp("^(<"+le+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+le+">[\r\n]*|<br \\/>[\r\n]*)$"),ie.replace(pe,"")),xe.content=nn(["text","tree"],xe.format)||ma(It.fromDom(G))?be:Qt.trim(be),(xe.no_events?xe:z.fire("GetContent",xe)).content;var z,j,G,te,K,ie,le,pe,me,xe,be});var x,C,I},setContent:function(f,g){return function U2(a,f,g){var x,C=(x=f,hr(hr({format:"html"},g),{set:!0,content:GS(x)?"":x})),I=g.no_events?C:a.fire("BeforeSetContent",C);return GS(f)||(f=I.content),$.from(a.getBody()).fold(Bn(f),function(L){return GS(f)?function(le,pe,me,xe){var be,Ae,Le,Je;be=le.parser.getNodeFilters(),Ae=le.parser.getAttributeFilters(),Le=me,Je=function(Be,je){var et,At,Nt={},Kt={},Yt=[];for(et in Le.firstChild&&I0(Le.firstChild,function(dt){Pn(Be,function(vt){vt.name===dt.name&&(Nt[vt.name]?Nt[vt.name].nodes.push(dt):Nt[vt.name]={filter:vt,nodes:[dt]})}),Pn(je,function(vt){"string"==typeof dt.attr(vt.name)&&(Kt[vt.name]?Kt[vt.name].nodes.push(dt):Kt[vt.name]={filter:vt,nodes:[dt]})})}),Nt)po(Nt,et)&&Yt.push(Nt[et]);for(At in Kt)po(Kt,At)&&Yt.push(Kt[At]);return Yt}(be,Ae),Pn(Je,function(Be){Pn(Be.filter.callbacks,function(je){je(Be.nodes,Be.filter.name,{})})});var pt=Qr({validate:le.validate},le.schema).serialize(me);return xe.content=ma(It.fromDom(pe))?pt:Qt.trim(pt),HM(le,xe.content,xe.no_selection),xe.no_events||le.fire("SetContent",xe),me}(a,L,f,I):(z=a,j=L,te=I,0===(G=f).length||/^\s+$/.test(G)?(K='<br data-mce-bogus="1">',"TABLE"===j.nodeName?G="<tr><td>"+K+"</td></tr>":/^(UL|OL)$/.test(j.nodeName)&&(G="<li>"+K+"</li>"),G=(ie=Za(z))&&z.schema.isValidChild(j.nodeName.toLowerCase(),ie.toLowerCase())?(G=K,z.dom.createHTML(ie,l0(z),G)):G||'<br data-mce-bogus="1">',HM(z,G,te.no_selection),z.fire("SetContent",te)):("raw"!==te.format&&(G=Qr({validate:z.validate},z.schema).serialize(z.parser.parse(G,{isRootContent:!0,insert:!0}))),te.content=ma(It.fromDom(j))?G:Qt.trim(G),HM(z,te.content,te.no_selection),te.no_events||z.fire("SetContent",te)),te.content);var z,j,G,te,K,ie})}(a,f,g)},insertContent:function(f,g){return G2(a,f,g)},addVisual:function(f){var g,x=f,C=(g=a).dom,I=ct(x)?x:g.getBody();uo(g.hasVisual)&&(g.hasVisual=g.getParam("visual",!0,"boolean")),Pn(C.select("table,a",I),function(L){switch(L.nodeName){case"TABLE":var z=g.getParam("visual_table_class","mce-item-table","string"),j=C.getAttrib(L,"border");j&&"0"!==j||!g.hasVisual?C.removeClass(L,z):C.addClass(L,z);break;case"A":var G,te;C.getAttrib(L,"href")||(G=C.getAttrib(L,"name")||L.id,te=g.getParam("visual_anchor_class","mce-item-anchor","string"),G&&g.hasVisual?C.addClass(L,te):C.removeClass(L,te))}}),g.fire("VisualAid",{element:x,hasVisual:g.hasVisual})}},selection:{getContent:function(f,g){return function(x,C,I){var L,z=(L=C,hr(hr({},I=void 0===I?{}:I),{format:L,get:!0,selection:!0})),j=x.fire("BeforeGetContent",z);if(j.isDefaultPrevented())return x.fire("GetContent",j),j.content;if("text"===j.format)return $.from((xe=x).selection.getRng()).map(function(Ae){var Le=$.from(xe.dom.getParent(Ae.commonAncestorContainer,xe.dom.isBlock)),Je=xe.getBody(),pt=Le.map(function(Yt){return Yt.nodeName}).getOr("div").toLowerCase(),Be=Fr.browser.isIE()&&"pre"!==pt,je=xe.dom.add(Je,pt,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},Ae.cloneContents()),et=yv(je,Be),At=on(je.textContent);if(xe.dom.remove(je),Zb(At,0)||Zb(At,At.length-1)){var Nt=yv(Le.getOr(Je),Be),Kt=Nt.indexOf(et);return-1===Kt?et:(Zb(Nt,Kt-1)?" ":"")+et+(Zb(Nt,Kt+et.length)?" ":"")}return et}).getOr("");j.getInner=!0;var G,te,K,ie,le,pe,me,xe,be=(te=j,K=(G=x).selection.getRng(),ie=G.dom.create("body"),le=G.selection.getSel(),pe=dv(G,hf(le)),(me=te.contextual?function QM(a,f){var g,x,C,I,L,z,j,G=v0(f,a);return 0<G.length?function zT(a,f){return Xu(f[0],"table",qe(gn,a)).bind(function(g){var x,C,I=f[0],L=f[f.length-1],z=function Xb(a){var f=QS(tp(a),0,[]);return Pn(xc(a,"tr"),function(g,x){Pn(xc(g,"td,th"),function(C,I){!function(L,z,j,G,te){for(var K=Dx(te,"rowspan"),ie=Dx(te,"colspan"),le=L.rows,pe=j;pe<j+K;pe++){le[pe]||(le[pe]=NT(Go(G),[]));for(var me=z;me<z+ie;me++)le[pe].cells[me]=pe===j&&me===z?te:tp(te)}}(f,function(L,z,j){for(;((te=L.rows)[j]?te[j].cells:[])[z];)z++;var te;return z}(f,I,x),x,g,C)})}),QS(f.element,BT(f.rows),f.rows)}(g);return C=L,JM(x=z,I).bind(function(j){return JM(x,C).map(function(G){return te=x,K=j.x,le=G.x,me=(ie=j.y)<(pe=G.y)?qb(te,K,ie,le,pe):qb(te,K,pe,le,ie),QS(te.element,BT(me),me);var te,K,ie,le,pe,me})}).map(function(j){return JS([(te=mt((G=j).rows,function(le){var pe=mt(le.cells,function(xe){var be=Go(xe);return rd(be,"colspan"),rd(be,"rowspan"),be}),me=tp(le.element);return Lc(me,pe),me}),K=tp(G.element),Lc(ie=It.fromTag("tbody"),te),Fs(K,ie),K)]);var G,te,K,ie})}).getOrThunk(tC)}(a,G):(g=a,0<(x=f).length&&x[0].collapsed?tC():(C=g,L=It.fromDom((I=x[0]).cloneContents()),j=dr(z=function eC(a,f){var g,x,C,I=It.fromDom(f.commonAncestorContainer),L=Gs(I,a),z=rr(L,function(G){return ds(G)||Zr(G)}),j=(C=f,yr(x=L,function(G){return"li"===Ga(G)&&ap(G,C)}).fold(Bn([]),function(G){return yr(x,function(te){return"ul"===Ga(te)||"ol"===Ga(te)}).map(function(te){var K=It.fromTag(Ga(te));return function zl(a,f){var g=a.dom;wn(f,function(x,C){!function(I,L,z){if(!wo(z))throw console.error("Invalid call to CSS.set. Property ",L,":: Value ",z,":: Element ",I),new Error("CSS value must be a string: "+z);fs(I)&&I.style.setProperty(L,z)}(g,C,x)})}(K,zo(Ja(te),function(ie,le){return $r(le,"list-style")})),[It.fromTag("li"),K]}).getOr([])}));return mt(z.concat(j.length?j:To(g=I)?cu(g).filter(Ii).fold(Bn([]),function(G){return[g,G]}):Ii(g)?[g]:[]),tp)}(C,I),function(te,K){return Fs(K,te),K},L),0<z.length?JS([j]):j))}(It.fromDom(G.getBody()),pe).dom:K.cloneContents())&&ie.appendChild(me),G.selection.serializer.serialize(ie,te));return"tree"===j.format?be:(j.content=x.selection.isCollapsed()?"":be,x.fire("GetContent",j),j.content)}(a,f,g)}},raw:{getModel:function(){return $.none()}}}}function sg(a){return po(a.plugins,"rtc")}function Gf(a){return a.rtcInstance||yf(a)}function Ru(a){var f=a.rtcInstance;if(f)return f;throw new Error("Failed to get RTC instance not yet initialized.")}function P0(a){return 0===a.dom.length?(Is(a),$.none()):$.some(a)}function Ix(a,f,g,x){a.bind(function(C){return(x?X_:Gb)(C.dom,x?C.dom.length:0),f.filter(Qa).map(function(I){var L=g,z=x,j=C.dom,G=I.dom,te=(z?j:G).length;z?(Z_(j,G,!1,!z),L.setStart(G,te)):(Z_(G,j,!1,!z),L.setEnd(G,te))})}).orThunk(function(){var C=x;return f.filter(function(I){return Ho.isBookmarkNode(I.dom)}).bind(C?$o:Xs).or(f).filter(Qa).map(function(I){var L,z=x;cu(L=I).each(function(j){var G=L.dom;z&&gx(j,en(G,0))?Gb(G,0):!z&&Y_(j,en(G,G.length))&&X_(G,G.length)})})})}function oC(a,f,g){var x;a&&po(a,f)&&(0===(x=rr(a[f],function(C){return C!==g})).length?delete a[f]:a[f]=x)}qS=function(a){var f,g=a.selection.getRng(),x=Nl(["pre"]);g.collapsed||(f=a.selection.getSelectedBlocks(),XS(ow(ow(f,x),function(C){return x(C.previousSibling)&&-1!==Fu(f,C.previousSibling)}),function(C){var I,L=C.previousSibling;ko(I=C).remove(),ko(L).append("<br><br>").append(I.childNodes)}))},Cx.pre||(Cx.pre=[]),Cx.pre.push(qS);var cw=Qt.each,fw=function(a,f,g){cw(a.childNodes,function(x){Mx(x)&&(f(x)&&g(x),x.hasChildNodes()&&fw(x,f,g))})},Dy=hu([{keep:[]},{rename:["name"]},{removed:[]}]),tk=/^(src|href|style)$/,dw=Qt.each,fp=Zm,Ay=Qt.each,R0=Qt.each,iC=function(a,f,g,x){function C(Le,Je){var pt;Ur((Je=void 0===Je?ie:Je).onformat)&&Je.onformat(Le,Je,g,x),R0(Je.styles,function(Be,je){pe.setStyle(Le,je,Mc(Be,g))}),!Je.styles||(pt=pe.getAttrib(Le,"style"))&&pe.setAttrib(Le,"data-mce-style",pt),R0(Je.attributes,function(Be,je){pe.setAttrib(Le,je,Mc(Be,g))}),R0(Je.classes,function(Be){Be=Mc(Be,g),pe.hasClass(Le,Be)||pe.addClass(Le,Be)})}function I(Le,Je){var pt=!1;return R0(Le,function(Be){return!!ii(Be)&&(ct(Be.collapsed)&&Be.collapsed!==le||!pe.is(Je,Be.selector)||eu(Je)?void 0:(C(Je,Be),!(pt=!0)))}),pt}function L(Le,Je,pt){var Be=[],je=!0,et=ie.inline||ie.block,At=function(Nt){if(wo(Nt)){var Kt=pe.create(Nt);return C(Kt),Kt}return null}(et);hy(Le,Je,function(Nt){var Kt,Yt=function(dt){var vt=!1,kt=je,Wt=dt.nodeName.toLowerCase(),bn=dt.parentNode,Xn=bn.nodeName.toLowerCase();if(co(dt)&&Le.getContentEditable(dt)&&(kt=je,je="true"===Le.getContentEditable(dt),vt=!0),os(dt)&&!function(kn,Vn,Nn,_r){if(kn.getParam("format_empty_lines",!1,"boolean")&&mo(Vn)){var mn=Ct(kn.schema),sr=(In=It.fromDom(Nn),kr=function(tt){return eu(tt.dom)},((Uo=(Mr=In).dom).parentNode?function(a,f){return yr(a.dom.childNodes,function(g){return tt=It.fromDom(g),!gn(Mr,tt)&&kr(tt);var tt}).map(It.fromDom)}(It.fromDom(Uo.parentNode)):$.none()).isSome());return Ao(mn,_r)&&ee(It.fromDom(Nn.parentNode),!1)&&!sr}var In,Mr,kr,Uo}(a,ie,dt,Xn))return Kt=null,void(Kc(ie)&&Le.remove(dt));if(Kc(ie)&&ie.wrapper&&om(a,dt,f,g))Kt=null;else{if(je&&!vt&&Kc(ie)&&!ie.wrapper&&h0(a,Wt)&&Ud(a,Xn,et)){var vn=Le.rename(dt,et);return C(vn),Be.push(vn),void(Kt=null)}if(ii(ie)){var Gn=I(K,dt);if(!Gn&&ct(bn)&&as(ie)&&(Gn=I(K,bn)),!mo(ie)||Gn)return void(Kt=null)}!je||vt||!Ud(a,et,Wt)||!Ud(a,Xn,et)||!pt&&Ar(dt)&&Fl(dt.data)||eu(dt)||mo(ie)&&Le.isBlock(dt)?(Kt=null,Pn(Fo(dt.childNodes),Yt),vt&&(je=kt),Kt=null):(Kt||(Kt=Le.clone(At,!1),dt.parentNode.insertBefore(Kt,dt),Be.push(Kt)),Kt.appendChild(dt))}};Pn(Nt,Yt)}),!0===ie.links&&Pn(Be,function(Nt){var Kt=function(Yt){"A"===Yt.nodeName&&C(Yt,ie),Pn(Fo(Yt.childNodes),Kt)};Kt(Nt)}),Pn(Be,function(Nt){var Kt,Yt,dt,vt,kt,bn,Xn,vn,Gn,kn,Vn,Nn,_r,mn,sr,In,Mr,kr=(Kt=0,Pn(Nt.childNodes,function(tt){var xt;ct(xt=tt)&&Ar(xt)&&0===xt.length||cc(tt)||Kt++}),Kt);function Uo(tt){var xt;1===tt.nodeType&&tt.parentNode&&1===tt.parentNode.nodeType&&(xt=G_(Nn,tt.parentNode),Nn.getStyle(tt,"color")&&xt?Nn.setStyle(tt,"text-decoration",xt):Nn.getStyle(tt,"text-decoration")===xt&&Nn.setStyle(tt,"text-decoration",null))}!(1<Be.length)&&Le.isBlock(Nt)||0!==kr?(mo(ie)||Kc(ie)&&ie.wrapper)&&(ie.exact||1!==kr||(Nt=yr((Vn=Nt).childNodes,E0).filter(function(tt){return bx(Le,tt,ie)}).map(function(tt){var xt=Le.clone(tt,!1);return C(xt),Le.replace(xt,Vn,!0),Le.remove(tt,!0),xt}).getOr(Vn)),sr=a,In=g,Mr=Nt,Ay(K,function(tt){var xt,tn;mo(tt)&&Ay(sr.dom.select(tt.inline,Mr),function(cn){Mx(cn)&&im(sr,tt,In,cn,tt.exact?cn:null)}),xt=sr.dom,(tn=tt).clear_child_styles&&cw(xt.select(tn.links?"*:not(a)":"*",Mr),function(cn){Mx(cn)&&cw(tn.styles,function(Jn,ao){xt.setStyle(cn,ao,"")})})}),Xn=ie,om(bn=a,(kn=Nt).parentNode,vn=f,Gn=g)&&im(bn,Xn,Gn,kn)||Xn.merge_with_parents&&bn.dom.getParent(kn.parentNode,function(tt){if(om(bn,tt,vn,Gn))return im(bn,Xn,Gn,kn),!0}),(kt=ie).styles&&kt.styles.backgroundColor&&fw(Nt,iw(Le,"fontSize"),$a(Le,"backgroundColor",Mc(kt.styles.backgroundColor,g))),Nn=Le,mn=Nt,(_r=ie).styles&&(_r.styles.color||_r.styles.textDecoration)&&(Qt.walk(mn,Uo,"childNodes"),Uo(mn)),Yt=Le,vt=Nt,!mo(dt=ie)||"sub"!==dt.inline&&"sup"!==dt.inline||(fw(vt,iw(Yt,"fontSize"),$a(Yt,"fontSize","")),Yt.remove(Yt.select("sup"===dt.inline?"sub":"sup",vt),!0)),ZS(Le,ie,0,Nt)):Le.remove(Nt,!0)})}var z,j,G,te,K=a.formatter.get(f),ie=K[0],le=!x&&a.selection.isCollapsed(),pe=a.dom,me=a.selection;if("false"!==pe.getContentEditable(me.getNode()))ie&&(x?op(x)?I(K,x)||((z=pe.createRng()).setStartBefore(x),z.setEndAfter(x),L(pe,jd(a,z,K),!0)):L(pe,x,!0):le&&mo(ie)&&!ip(a).length?function(Le,Je,pt){var Be,je=Le.selection,et=je.getRng(),At=et.startOffset,Nt=et.startContainer.nodeValue,Kt=Xm(Le.getBody(),je.getStart());Kt&&(Be=_o(Kt));var Yt,dt,vt,kt,Wt=/[^\s\u00a0\u00ad\u200b\ufeff]/;Nt&&0<At&&At<Nt.length&&Wt.test(Nt.charAt(At))&&Wt.test(Nt.charAt(At-1))?(Yt=je.getBookmark(),et.collapse(!0),dt=tg(jd(Le,et,Le.formatter.get(Je))),Le.formatter.apply(Je,pt,dt),je.moveToBookmark(Yt)):(Kt&&Be.nodeValue===Ub||(vt=Le.getDoc(),kt=xx(!0).dom,Be=(Kt=vt.importNode(kt,!0)).firstChild,et.insertNode(Kt),At=1),Le.formatter.apply(Je,pt,Kt),je.setCursorLocation(Be,At))}(a,f,g):(j=me.getNode(),G=K[0],a.settings.forced_root_block||!G.defaultBlock||pe.getParent(j,pe.isBlock)||iC(a,G.defaultBlock),me.setRng(zM(me.getRng())),Qm(me,!0,function(){vd(a,function(Le,Je){var pt=Je?Le:jd(a,Le,K);L(pe,pt,!1)})}),tu(pe,me,me.getRng()),a.nodeChanged()),te=a,XS(Cx[f],function(Le){Le(te)})),Yg(a,f,x,g);else{x=me.getNode();for(var xe=0,be=K.length;xe<be;xe++){var Ae=K[xe];if(Ae.ceFalseOverride&&ii(Ae)&&pe.is(x,Ae.selector)){C(x,Ae);break}}Yg(a,f,x,g)}},nk=function(a){return a.selection.getStart()},VT=function(a,f,g){var x=$M(a,f);wn(g,function(C,I){function L(z){var j,G=$S(a,x,I,z.similar,Tx(z)?z.vars:void 0),te=G.isSome();z.state.get()!==te&&(z.state.set(te),j=G.getOr(f),Tx(z)?z.callback(te,{node:j,format:I,parents:x}):Pn(z.callbacks,function(K){return K(te,{node:j,format:I,parents:x})}))}Pn([C.withSimilar,C.withoutSimilar],L),Pn(C.withVars,L)})},Y2=Dn(function(){return document.implementation.createHTMLDocument("undo")});function HT(a){return a.select}function WT(a){return a&&a.ownerDocument&&Dt(It.fromDom(a.ownerDocument),It.fromDom(a))}function GT(a,f,g,x){function C(Be,je){return function ug(a,f,g){var x,C=(x=f,hr(hr({format:"html"},g=void 0===g?{}:g),{set:!0,selection:!0,content:x})),I=C;if(!C.no_events){var L=a.fire("BeforeSetContent",C);if(L.isDefaultPrevented())return void a.fire("SetContent",L);I=L}I.content=function(j,G){if("raw"===G.format)return G.content;var te=j.selection.getRng(),K=j.dom.getParent(te.commonAncestorContainer,j.dom.isBlock),ie=K?{context:K.nodeName.toLowerCase()}:{},le=j.parser.parse(G.content,hr(hr({isRootContent:!0,forced_root_block:!1},ie),G));return Qr({validate:j.validate},j.schema).serialize(le)}(a,I);var z=a.selection.getRng();(function(j,G){var te=$.from(G.firstChild).map(It.fromDom),K=$.from(G.lastChild).map(It.fromDom);j.deleteContents(),j.insertNode(G);var ie=te.bind(Xs).filter(Qa).bind(P0),le=K.bind($o).filter(Qa).bind(P0);Ix(ie,te,j,!0),Ix(le,K,j,!1),j.collapse(!1)})(z,z.createContextualFragment(I.content)),a.selection.setRng(z),Zd(a,z),I.no_events||a.fire("SetContent",I)}(x,Be,je)}function I(){var Be=z(),je=null==Be?void 0:Be.anchorNode,et=null==Be?void 0:Be.focusNode;if(!Be||!je||!et||ch(je)||ch(et))return!0;var At=a.createRng();At.setStart(je,Be.anchorOffset),At.collapse(!0);var Nt=a.createRng();return Nt.setStart(et,Be.focusOffset),Nt.collapse(!0),At.compareBoundaryPoints(At.START_TO_START,Nt)<=0}function L(Be){var je=me();je.collapse(!!Be),xe(je)}function z(){return f.getSelection?f.getSelection():f.document.selection}var j,G,te,K,ie,le,pe=function(Be,je){return ie||(ie={},le={},K.on("NodeChange",function(et){var At=et.element,Nt=pt(At),Kt={};Qt.each(ie,function(Yt,dt){Je(dt,Nt).each(function(vt){le[dt]||(Pn(Yt,function(kt){kt(!0,{node:vt,selector:dt,parents:Nt})}),le[dt]=Yt),Kt[dt]=Yt})}),Qt.each(le,function(Yt,dt){Kt[dt]||(delete le[dt],Qt.each(Yt,function(vt){vt(!1,{node:At,selector:dt,parents:Nt})}))})})),ie[Be]||(ie[Be]=[]),ie[Be].push(je),Je(Be,pt(K.selection.getStart())).each(function(){le[Be]=ie[Be]}),{unbind:function(){oC(ie,Be,je),oC(le,Be,je)}}},me=function(){function Be(Yt,dt,vt){try{return dt.compareBoundaryPoints(Yt,vt)}catch{return-1}}var je,et,At,Nt=f.document;if(void 0!==x.bookmark&&!1===pl(x)){var Kt=Cy(x);if(Kt.isSome())return Kt.map(function(Yt){return dv(x,[Yt])[0]}).getOr(Nt.createRange())}try{(je=z())&&!ch(je.anchorNode)&&(et=0<je.rangeCount?je.getRangeAt(0):(je.createRange?je:Nt).createRange(),et=dv(x,[et])[0])}catch{}return(et=et||(Nt.createRange?Nt.createRange():Nt.body.createTextRange())).setStart&&9===et.startContainer.nodeType&&et.collapsed&&(At=a.getRoot(),et.setStart(At,0),et.setEnd(At,0)),j&&G&&(0===Be(et.START_TO_START,et,j)&&0===Be(et.END_TO_END,et,j)?et=G:G=j=null),et},xe=function(Be,je){var et;if((At=Be)&&(HT(At)||WT(At.startContainer)&&WT(At.endContainer))){var At,Nt=HT(Be)?Be:null;if(Nt){G=null;try{Nt.select()}catch{}}else{var Kt=z();if(Be=x.fire("SetSelectionRange",{range:Be,forward:je}).range,Kt){G=Be;try{Kt.removeAllRanges(),Kt.addRange(Be)}catch{}!1===je&&Kt.extend&&(Kt.collapse(Be.endContainer,Be.endOffset),Kt.extend(Be.startContainer,Be.startOffset)),j=0<Kt.rangeCount?Kt.getRangeAt(0):null}Be.collapsed||Be.startContainer!==Be.endContainer||!Kt.setBaseAndExtent||Fr.ie||Be.endOffset-Be.startOffset<2&&Be.startContainer.hasChildNodes()&&(et=Be.startContainer.childNodes[Be.startOffset])&&"IMG"===et.tagName&&(Kt.setBaseAndExtent(Be.startContainer,Be.startOffset,Be.endContainer,Be.endOffset),Kt.anchorNode===Be.startContainer&&Kt.focusNode===Be.endContainer||Kt.setBaseAndExtent(et,0,et,1)),x.fire("AfterSetSelectionRange",{range:Be,forward:je})}}},be={bookmarkManager:null,controlSelection:null,dom:te=a,win:f,serializer:g,editor:K=x,collapse:L,setCursorLocation:function(Be,je){var et=a.createRng();ct(Be)&&ct(je)?(et.setStart(Be,je),et.setEnd(Be,je),xe(et),L(!1)):(fc(a,et,x.getBody(),!0),xe(et))},getContent:function(Be){return et=(je=void 0===(je=Be)?{}:je).format||"html",At=je,Ru(x).selection.getContent(et,At);var je,et,At},setContent:C,getBookmark:function(Be,je){return Ae.getBookmark(Be,je)},moveToBookmark:function(Be){return Ae.moveToBookmark(Be)},select:function(Be,je){var et=a,At=je;return $.from(Be).map(function(Nt){var Kt=et.nodeIndex(Nt),Yt=et.createRng();return Yt.setStart(Nt.parentNode,Kt),Yt.setEnd(Nt.parentNode,Kt+1),At&&(fc(et,Yt,Nt,!0),fc(et,Yt,Nt,!1)),Yt}).each(xe),Be},isCollapsed:function(){var Be=me(),je=z();return!(!Be||Be.item)&&(Be.compareEndPoints?0===Be.compareEndPoints("StartToEnd",Be):!je||Be.collapsed)},isForward:I,setNode:function(Be){return C(a.getOuterHTML(Be)),Be},getNode:function(){return function(Be,je){if(!je)return Be;var et=je.startContainer,At=je.endContainer,Nt=je.startOffset,Kt=je.endOffset,Yt=je.commonAncestorContainer;return!je.collapsed&&(et===At&&Kt-Nt<2&&et.hasChildNodes()&&(Yt=et.childNodes[Nt]),3===et.nodeType&&3===At.nodeType&&(et=et.length===Nt?Qg(et.nextSibling,!0):et.parentNode,At=0===Kt?Qg(At.previousSibling,!1):At.parentNode,et&&et===At))?et:Yt&&3===Yt.nodeType?Yt.parentNode:Yt}(x.getBody(),me())},getSel:z,setRng:xe,getRng:me,getStart:function(Be){return el(x.getBody(),me(),Be)},getEnd:function(Be){return Jg(x.getBody(),me(),Be)},getSelectedBlocks:function(Be,je){return function(et,At,Nt,Kt){var Yt=[],dt=et.getRoot();if(Nt=et.getParent(Nt||el(dt,At,At.collapsed),et.isBlock),Kt=et.getParent(Kt||Jg(dt,At,At.collapsed),et.isBlock),Nt&&Nt!==dt&&Yt.push(Nt),Nt&&Kt&&Nt!==Kt)for(var vt,kt=new Ks(Nt,dt);(vt=kt.next())&&vt!==Kt;)et.isBlock(vt)&&Yt.push(vt);return Kt&&Nt!==Kt&&Kt!==dt&&Yt.push(Kt),Yt}(a,me(),Be,je)},normalize:function(){var Be=me();if(1<hf(z()).length||!y0(x))return Be;var je=Vf(a,Be);return je.each(function(et){xe(et,I())}),je.getOr(Be)},selectorChanged:function(Be,je){return pe(Be,je),be},selectorChangedWithUnbind:pe,getScrollContainer:function(){for(var Be,je=a.getRoot();je&&"BODY"!==je.nodeName;){if(je.scrollHeight>je.clientHeight){Be=je;break}je=je.parentNode}return Be},scrollIntoView:function(Be,je){ct(Be)?(x.inline?Ph:uv)(x,Be,je):Zd(x,me(),je)},placeCaretAt:function(Be,je){return xe(fx(Be,je,x.getDoc()))},getBoundingClientRect:function(){var Be=me();return Be.collapsed?en.fromRangeStart(Be).getClientRects()[0]:Be.getBoundingClientRect()},destroy:function(){f=j=G=null,Le.destroy()}},Ae=Ho(be),Le=cx(be,x);function Je(Be,je){return yr(je,function(et){return te.is(et,Be)})}function pt(Be){return te.getParents(Be,null,te.getRoot())}return be.bookmarkManager=Ae,be.controlSelection=Le,be}function rk(a){var f,g=decodeURIComponent(a).split(","),x=/data:([^;]+)/.exec(g[0]);return{type:f=x?x[1]:f,data:g[1]}}function Qb(a,f){var g;try{g=atob(f)}catch{return $.none()}for(var x=new Uint8Array(g.length),C=0;C<x.length;C++)x[C]=g.charCodeAt(C);return $.some(new Blob([x],{type:a}))}function Dl(a){return 0===a.indexOf("blob:")?(f=a,new Pi(function(x,C){function I(){C("Cannot convert "+f+" to Blob. Resource might not exist or is inaccessible.")}try{var L=new XMLHttpRequest;L.open("GET",f,!0),L.responseType="blob",L.onload=function(){200===L.status?x(L.response):I()},L.onerror=I,L.send()}catch{I()}})):0===a.indexOf("data:")?(g=a,new Pi(function(x){var C=rk(g);Qb(C.type,C.data).fold(function(){return x(new Blob([]))},x)})):null;var f,g}function e1(a){return(a||"blobid")+i1++}function Iy(a,f,g,x){(a.padd_empty_with_br||f.insert)&&g[x.name]?x.empty().append(new He("br",1)).shortEnded=!0:x.empty().append(new He("#text",3)).value=xa}function n1(a,f,g,x){return x.isEmpty(f,g,function(C){return(I=a.getElementRule(C.name))&&I.paddEmpty;var I})}function L0(a,f){void 0===f&&(f=Wn());var g={},x=[],C={},I={};function L(j){var G=j.name;G in g&&((K=C[G])?K.push(j):C[G]=[j]);for(var te=x.length;te--;){var K,ie=x[te].name;ie in j.attributes.map&&((K=I[ie])?K.push(j):I[ie]=[j])}return j}(a=a||{}).validate=!("validate"in a)||a.validate,a.root_name=a.root_name||"body";var z={schema:f,addAttributeFilter:function(j,G){Px(a1(j),function(te){for(var K=0;K<x.length;K++)if(x[K].name===te)return void x[K].callbacks.push(G);x.push({name:te,callbacks:[G]})})},getAttributeFilters:function(){return[].concat(x)},addNodeFilter:function(j,G){Px(a1(j),function(te){var K=g[te];K||(g[te]=K=[]),K.push(G)})},getNodeFilters:function(){var j,G=[];for(j in g)po(g,j)&&G.push({name:j,callbacks:g[j]});return G},filterNode:L,parse:function(j,G){var te,K,ie,le,pe,me,xe,be,Ae=[];function Le(Gn){for(var kn=f.getBlockElements(),Vn=Gn.prev;Vn&&3===Vn.type;){var Nn=Vn.value.replace(vt,"");if(0<Nn.length)return Vn.value=Nn,0;var _r=Vn.next;if(_r){if(3===_r.type&&_r.value.length){Vn=Vn.prev;continue}if(!kn[_r.name]&&"script"!==_r.name&&"style"!==_r.name){Vn=Vn.prev;continue}}var mn=Vn.prev;Vn.remove(),Vn=mn}}function Je(Gn,kn){var Vn,Nn=new He(Gn,kn);return Gn in g&&((Vn=C[Gn])?Vn.push(Nn):C[Gn]=[Nn]),Nn}G=G||{},C={},I={};var pt=Rx(Ls("script,style,head,html,body,title,meta,param"),f.getBlockElements()),Be=Ct(f),je=f.getNonEmptyElements(),et=f.children,At=a.validate,Nt=("forced_root_block"in G?G:a).forced_root_block,Kt=!1===Nt?"":!0===Nt?"p":Nt,Yt=f.getWhiteSpaceElements(),dt=/^[ \t\r\n]+/,vt=/[ \t\r\n]+$/,kt=/[ \t\r\n]+/g,Wt=/^[ \t\r\n]+$/,bn=po(Yt,G.context)||po(Yt,a.root_name),Xn=xn({validate:At,document:a.document,allow_html_data_urls:a.allow_html_data_urls,allow_svg_data_urls:a.allow_svg_data_urls,allow_script_urls:a.allow_script_urls,allow_conditional_comments:a.allow_conditional_comments,preserve_cdata:a.preserve_cdata,self_closing_elements:function(Gn){var kn,Vn={};for(kn in Gn)"li"!==kn&&"p"!==kn&&(Vn[kn]=Gn[kn]);return Vn}(f.getSelfClosingElements()),cdata:function(Gn){be.append(Je("#cdata",4)).value=Gn},text:function(Gn,kn){var Vn,Nn;bn||(Gn=Gn.replace(kt," "),(Nn=be.lastChild)&&(po(pt,Nn.name)||"br"===Nn.name)&&(Gn=Gn.replace(dt,""))),0!==Gn.length&&((Vn=Je("#text",3)).raw=!!kn,be.append(Vn).value=Gn)},comment:function(Gn){be.append(Je("#comment",8)).value=Gn},pi:function(Gn,kn){be.append(Je(Gn,7)).value=kn,Le(be)},doctype:function(Gn){be.append(Je("#doctype",10)).value=Gn,Le(be)},start:function(Gn,kn,Vn){var Nn=At?f.getElementRule(Gn):{};if(Nn){var _r=Je(Nn.outputName||Gn,1);_r.attributes=kn,_r.shortEnded=Vn,be.append(_r);var mn=et[be.name];mn&&et[_r.name]&&!mn[_r.name]&&Ae.push(_r);for(var sr=x.length;sr--;){var In=x[sr].name;In in kn.map&&((me=I[In])?me.push(_r):I[In]=[_r])}pt[Gn]&&Le(_r),Vn||(be=_r),!bn&&Yt[Gn]&&(bn=!0)}},end:function(Gn){var kn,Vn,Nn,_r,mn=At?f.getElementRule(Gn):{};if(mn){if(pt[Gn]&&!bn){if((kn=be.firstChild)&&3===kn.type)if(0<(Vn=kn.value.replace(dt,"")).length)kn.value=Vn,kn=kn.next;else for(Nn=kn.next,kn.remove(),kn=Nn;kn&&3===kn.type;)Nn=kn.next,0!==(Vn=kn.value).length&&!Wt.test(Vn)||(kn.remove(),kn=Nn),kn=Nn;if((kn=be.lastChild)&&3===kn.type)if(0<(Vn=kn.value.replace(vt,"")).length)kn.value=Vn,kn=kn.prev;else for(Nn=kn.prev,kn.remove(),kn=Nn;kn&&3===kn.type;)Nn=kn.prev,0!==(Vn=kn.value).length&&!Wt.test(Vn)||(kn.remove(),kn=Nn),kn=Nn}bn&&Yt[Gn]&&(bn=!1);var sr=n1(f,je,Yt,be),In=be.parent;mn.paddInEmptyBlock&&sr&&function(){for(var Mr=be;ct(Mr);){if(Mr.name in Be)return n1(f,je,Yt,Mr);Mr=Mr.parent}}()?Iy(a,G,pt,be):mn.removeEmpty&&sr?pt[be.name]?be.empty().remove():be.unwrap():mn.paddEmpty&&(uC(_r=be,"#text")&&_r.firstChild.value===xa||sr)&&Iy(a,G,pt,be),be=In}}},f),vn=be=new He(G.context||a.root_name,11);if(Xn.parse(j,G.format),At&&Ae.length&&(G.context?G.invalid=!0:function(Gn){for(var kn=Ls("tr,td,th,tbody,thead,tfoot,table"),Vn=f.getNonEmptyElements(),Nn=f.getWhiteSpaceElements(),_r=f.getTextBlockElements(),mn=f.getSpecialElements(),sr=function(vo,Ra){if(void 0===Ra&&(Ra=vo.parent),mn[vo.name])vo.empty().remove();else{for(var Ro=0,fo=vo.children();Ro<fo.length;Ro++){var Gi=fo[Ro];f.isValidChild(Ra.name,Gi.name)||sr(Gi,Ra)}vo.unwrap()}},In=0;In<Gn.length;In++){var Mr,kr=Gn[In],Uo=void 0,tt=void 0;if(kr.parent&&!kr.fixed)if(_r[kr.name]&&"li"===kr.parent.name){for(var xt=kr.next;xt&&_r[xt.name];)xt.name="li",xt.fixed=!0,kr.parent.insert(xt,kr.parent),xt=xt.next;kr.unwrap()}else{var tn=[kr];for(Uo=kr.parent;Uo&&!f.isValidChild(Uo.name,kr.name)&&!kn[Uo.name];Uo=Uo.parent)tn.push(Uo);if(Uo&&1<tn.length)if(f.isValidChild(Uo.name,kr.name)){tn.reverse();for(var Cn=Mr=L(tn[0].clone()),cn=0;cn<tn.length-1;cn++){f.isValidChild(Cn.name,tn[cn].name)?(tt=L(tn[cn].clone()),Cn.append(tt)):tt=Cn;for(var Jn=tn[cn].firstChild;Jn&&Jn!==tn[cn+1];){var ao=Jn.next;tt.append(Jn),Jn=ao}Cn=tt}n1(f,Vn,Nn,Mr)?Uo.insert(kr,tn[0],!0):(Uo.insert(Mr,tn[0],!0),Uo.insert(kr,Mr)),(n1(f,Vn,Nn,Uo=tn[0])||uC(Uo,"br"))&&Uo.empty().remove()}else sr(kr);else kr.parent&&("li"!==kr.name?f.isValidChild(kr.parent.name,"div")&&f.isValidChild("div",kr.name)?kr.wrap(L(new He("div",1))):sr(kr):!(xt=kr.prev)||"ul"!==xt.name&&"ol"!==xt.name?!(xt=kr.next)||"ul"!==xt.name&&"ol"!==xt.name?kr.wrap(L(new He("ul",1))):xt.insert(kr,xt.firstChild,!0):xt.append(kr))}}}(Ae)),Kt&&("body"===vn.name||G.isRootContent)&&function(){function Gn(_r){_r&&((kn=_r.firstChild)&&3===kn.type&&(kn.value=kn.value.replace(dt,"")),(kn=_r.lastChild)&&3===kn.type&&(kn.value=kn.value.replace(vt,"")))}var kn=vn.firstChild,Vn=null;if(f.isValidChild(vn.name,Kt.toLowerCase())){for(;kn;){var Nn=kn.next;3===kn.type||1===kn.type&&"p"!==kn.name&&!pt[kn.name]&&!kn.attr("data-mce-type")?(Vn||((Vn=Je(Kt,1)).attr(a.forced_root_block_attrs),vn.insert(Vn,kn)),Vn.append(kn)):(Gn(Vn),Vn=null),kn=Nn}Gn(Vn)}}(),!G.invalid){for(xe in C)if(po(C,xe)){for(me=g[xe],le=(te=C[xe]).length;le--;)te[le].parent||te.splice(le,1);for(K=0,ie=me.length;K<ie;K++)me[K](te,xe,G)}for(K=0,ie=x.length;K<ie;K++)if((me=x[K]).name in I){for(le=(te=I[me.name]).length;le--;)te[le].parent||te.splice(le,1);for(le=0,pe=me.callbacks.length;le<pe;le++)me.callbacks[le](te,me.name,G)}}return vn}};return function aC(a,f){var x,C,I=a.schema;function L(z){var j,G,te=z.attr("src");(j=z).attr("src")===Fr.transparentSrc||ct(j.attr("data-mce-placeholder"))||ct(z.attr("data-mce-bogus"))||((G=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(te))?$.some({type:G[1],data:decodeURIComponent(G[2])}):$.none()).filter(function(){return function(K,ie){if(ie.images_dataimg_filter){var le=new Image;return le.src=K.attr("src"),wn(K.attributes.map,function(pe,me){le.setAttribute(me,pe)}),ie.images_dataimg_filter(le)}return!0}(z,x)}).bind(function(K){var ie=K.type,le=K.data;return $.from(C.getByData(le,ie)).orThunk(function(){return Qb(ie,le).map(function(pe){var me=C.create(e1(),pe,le);return C.add(me),me})})}).each(function(K){z.attr("src",K.blobUri())})}f.remove_trailing_brs&&a.addNodeFilter("br",function(z,j,G){var te,K,ie,le,pe,me,xe,be,Ae=z.length,Le=Qt.extend({},I.getBlockElements()),Je=I.getNonEmptyElements(),pt=I.getWhiteSpaceElements();for(Le.body=1,te=0;te<Ae;te++)if(ie=(K=z[te]).parent,Le[K.parent.name]&&K===ie.lastChild){for(pe=K.prev;pe;){if("span"!==(me=pe.name)||"bookmark"!==pe.attr("data-mce-type")){"br"===me&&(K=null);break}pe=pe.prev}K&&(K.remove(),n1(I,Je,pt,ie)&&(xe=I.getElementRule(ie.name))&&(xe.removeEmpty?ie.remove():xe.paddEmpty&&Iy(f,G,Le,ie)))}else{for(le=K;ie&&ie.firstChild===le&&ie.lastChild===le&&!Le[(le=ie).name];)ie=ie.parent;le===ie&&!0!==f.padd_empty_with_br&&((be=new He("#text",3)).value=xa,K.replace(be))}}),a.addAttributeFilter("href",function(z){var j,G,te=z.length;if(!f.allow_unsafe_link_target)for(;te--;){var K=z[te];"a"===K.name&&"_blank"===K.attr("target")&&K.attr("rel",(G=void 0,G=(j=K.attr("rel"))?Qt.trim(j):"",/\b(noopener)\b/g.test(G)?G:G.split(" ").filter(function(ie){return 0<ie.length}).concat(["noopener"]).sort().join(" ")))}}),f.allow_html_in_named_anchor||a.addAttributeFilter("id,name",function(z){for(var j,G,te,K,ie=z.length;ie--;)if("a"===(K=z[ie]).name&&K.firstChild&&!K.attr("href"))for(te=K.parent,j=K.lastChild;G=j.prev,te.insert(j,K),j=G;);}),f.fix_list_elements&&a.addNodeFilter("ul,ol",function(z){for(var j,G,te,K=z.length;K--;)"ul"!==(te=(G=z[K]).parent).name&&"ol"!==te.name||(G.prev&&"li"===G.prev.name?G.prev.append(G):((j=new He("li",1)).attr("style","list-style-type: none"),G.wrap(j)))}),f.validate&&I.getValidClasses()&&a.addAttributeFilter("class",function(z){for(var j=I.getValidClasses(),G=z.length;G--;){for(var te=z[G],K=te.attr("class").split(" "),ie="",le=0;le<K.length;le++){var pe=K[le],me=!1,xe=j["*"];xe&&xe[pe]&&(me=!0),xe=j[te.name],(me=!(me||!xe||!xe[pe])||me)&&(ie&&(ie+=" "),ie+=pe)}ie.length||(ie=null),te.attr("class",ie)}}),(C=(x=f).blob_cache)&&a.addAttributeFilter("src",function(z){return Pn(z,L)})}(z,a),a.inline_styles&&function hw(a,f){var g,x,C,I,L=Un();f.convert_fonts_to_spans&&(x=a,C=L,I=Qt.explode(f.font_size_legacy_values),x.addNodeFilter("font",function(z){Pn(z,function(j){var G,te=C.parse(j.attr("style")),K=j.attr("color"),ie=j.attr("face"),le=j.attr("size");K&&(te.color=K),ie&&(te["font-family"]=ie),le&&(te["font-size"]=I[parseInt(j.attr("size"),10)-1]),j.name="span",j.attr("style",C.serialize(te)),G=j,Pn(["color","face","size"],function(pe){G.attr(pe,null)})})})),g=L,a.addNodeFilter("strike",function(z){Pn(z,function(j){var G=g.parse(j.attr("style"));G["text-decoration"]="line-through",j.name="span",j.attr("style",g.serialize(G))})})}(z,a),z}function Ox(a,f,g){-1===Qt.inArray(f,g)&&(a.addAttributeFilter(g,function(x,C){for(var I=x.length;I--;)x[I].attr(C,null)}),f.push(g))}function Oy(a,f){var g=function UT(a,f){var g=["data-mce-selected"],x=f&&f.dom?f.dom:ba.DOM,C=f&&f.schema?f.schema:Wn(a);a.entity_encoding=a.entity_encoding||"named",a.remove_trailing_brs=!("remove_trailing_brs"in a)||a.remove_trailing_brs;var I,L=L0(a,C),z=a,j=x;return(I=L).addAttributeFilter("data-mce-tabindex",function(G,te){for(var K=G.length;K--;){var ie=G[K];ie.attr("tabindex",ie.attr("data-mce-tabindex")),ie.attr(te,null)}}),I.addAttributeFilter("src,href,style",function(G,te){for(var K="data-mce-"+te,ie=z.url_converter,le=z.url_converter_scope,pe=G.length;pe--;){var me=G[pe],xe=me.attr(K);void 0!==xe?(me.attr(te,0<xe.length?xe:null),me.attr(K,null)):(xe=me.attr(te),"style"===te?xe=j.serializeStyle(j.parseStyle(xe),me.name):ie&&(xe=ie.call(le,xe,te,me.name)),me.attr(te,0<xe.length?xe:null))}}),I.addAttributeFilter("class",function(G){for(var te=G.length;te--;){var K,ie=G[te];ie.attr("class")&&(K=ie.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),ie.attr("class",0<K.length?K:null))}}),I.addAttributeFilter("data-mce-type",function(G,te,K){for(var ie=G.length;ie--;){var le=G[ie];"bookmark"!==le.attr("data-mce-type")||K.cleanup||($.from(le.firstChild).exists(function(pe){return!Fl(pe.value)})?le.unwrap():le.remove())}}),I.addNodeFilter("noscript",function(G){for(var te=G.length;te--;){var K=G[te].firstChild;K&&(K.value=Vc.decode(K.value))}}),I.addNodeFilter("script,style",function(G,te){for(var K=function(xe){return xe.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},ie=G.length;ie--;){var le,pe=G[ie],me=pe.firstChild?pe.firstChild.value:"";"script"===te?((le=pe.attr("type"))&&pe.attr("type","mce-no/type"===le?null:le.replace(/^mce\-/,"")),"xhtml"===z.element_format&&0<me.length&&(pe.firstChild.value="// <![CDATA[\n"+K(me)+"\n// ]]>")):"xhtml"===z.element_format&&0<me.length&&(pe.firstChild.value="\x3c!--\n"+K(me)+"\n--\x3e")}}),I.addNodeFilter("#comment",function(G){for(var te=G.length;te--;){var K=G[te];z.preserve_cdata&&0===K.value.indexOf("[CDATA[")?(K.name="#cdata",K.type=4,K.value=j.decode(K.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===K.value.indexOf("mce:protected ")&&(K.name="#text",K.type=3,K.raw=!0,K.value=unescape(K.value).substr(14))}}),I.addNodeFilter("xml:namespace,input",function(G,te){for(var K=G.length;K--;){var ie=G[K];7===ie.type?ie.remove():1===ie.type&&("input"!==te||ie.attr("type")||ie.attr("type","text"))}}),I.addAttributeFilter("data-mce-type",function(G){Pn(G,function(te){"format-caret"===te.attr("data-mce-type")&&(te.isEmpty(I.schema.getNonEmptyElements())?te.remove():te.unwrap())})}),I.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(G,te){for(var K=G.length;K--;)G[K].attr(te,null)}),{schema:C,addNodeFilter:L.addNodeFilter,addAttributeFilter:L.addAttributeFilter,serialize:function(G,te){var K,ie,le,pe,me,xe,be,Ae,Le,Je,pt,Be,je,et,At,Nt,Kt,Yt,dt,vt,kt,Wt,bn,Xn,vn,Gn,kn,Vn,Nn,_r=hr({format:"html"},te=void 0===te?{}:te),mn=(Be=G,bn=je=_r,K=(pt=f)&&pt.hasEventListeners("PreProcess")&&!bn.no_events?(At=je,vt=(et=pt).dom,kt=Be.cloneNode(!0),(Wt=document.implementation).createHTMLDocument&&(Kt=Wt.createHTMLDocument(""),Qt.each("BODY"===kt.nodeName?kt.childNodes:[kt],function(Mr){Kt.body.appendChild(Kt.importNode(Mr,!0))}),kt="BODY"!==kt.nodeName?Kt.body.firstChild:Kt.body,Nt=vt.doc,vt.doc=Kt),Yt=et,dt=hr(hr({},At),{node:kt}),Yt.fire("PreProcess",dt),Nt&&(vt.doc=Nt),kt):Be,le=on((ie=_r).getInner?K.innerHTML:x.getOuterHTML(K)),ie.selection||ma(It.fromDom(K))?le:Qt.trim(le)),sr=(pe=L,me=mn,be=(xe=_r).selection?hr({forced_root_block:!1},xe):xe,!In(Je=(Ae=pe.parse(me,be)).lastChild)||In(Le=Je.prev)&&(Je.remove(),Le.remove()),Ae);function In(Mr){return Mr&&"br"===Mr.name}return"tree"===_r.format?sr:(Xn=f,vn=_r,Gn=sr,Nn=Qr(a,C).serialize(Gn),vn.no_events||!Xn?Nn:(kn=Xn,Vn=hr(hr({},vn),{content:Nn}),kn.fire("PostProcess",Vn).content))},addRules:C.addValidElements,setRules:C.setValidElements,addTempAttr:qe(Ox,L,g),getTempAttrs:Bn(g),getNodeFilters:L.getNodeFilters,getAttributeFilters:L.getAttributeFilters}}(a,f);return{schema:g.schema,addNodeFilter:g.addNodeFilter,addAttributeFilter:g.addAttributeFilter,serialize:g.serialize,addRules:g.addRules,setRules:g.setRules,addTempAttr:g.addTempAttr,getTempAttrs:g.getTempAttrs,getNodeFilters:g.getNodeFilters,getAttributeFilters:g.getAttributeFilters}}function N0(a,f,g){return x=g=void 0===g?{}:g,Gf(a).editor.setContent(f,x);var x}function r1(a){return $.from(a).each(function(f){return f.destroy()})}function o1(a){var f=Yo(a)?a.join(" "):a;return rr(mt(wo(f)?f.split(" "):[],uu),function(g){return 0<g.length})}function bv(a,f){return po(a.sections(),f)}function ok(a,f){return Sr(a,"toolbar_mode").orThunk(function(){return Sr(a,"toolbar_drawer").map(function(g){return!1===g?"wrap":g})}).getOr(f)}function Ey(a,f,g){return $.from(f.settings[g]).filter(a)}function sC(a,f){return f.dom[a]}function _d(a,f){return parseInt(Nc(f,a),10)}function Py(a,f,g){var x,C,I,L,z,j,G=It.fromDom(a.getBody()),te=a.inline?G:It.fromDom(Dd(G).dom.documentElement),K=(x=a.inline,I=f,L=g,z=(C=te).dom.getBoundingClientRect(),{x:I-(x?z.left+C.dom.clientLeft+s1(C):0),y:L-(x?z.top+C.dom.clientTop+z0(C):0)}),ie=K.x,le=K.y,pe=ik(j=te),me=ak(j);return 0<=ie&&0<=le&&ie<=pe&&le<=me}function gw(a){function f(){var G=a.theme;return G&&G.getNotificationManagerImpl?G.getNotificationManagerImpl():{open:te,close:te,reposition:te,getArgs:te};function te(){throw new Error("Theme did not provide a NotificationManager implementation.")}}function g(){return $.from(z[0])}function x(){0<z.length&&f().reposition(z)}function C(G){ir(z,function(te){return te===G}).each(function(te){z.splice(te,1)})}function I(G,te){if(void 0===te&&(te=!0),!a.removed&&(ie=(K=a).inline?K.getBody():K.getContentAreaContainer(),$.from(ie).map(It.fromDom).map(Vo).getOr(!1)))return te&&a.fire("BeforeOpenNotification",{notification:G}),yr(z,function(le){return!((pe=f().getArgs(le)).type!==G.type||pe.text!==G.text||pe.progressBar||pe.timeout||G.progressBar||G.timeout);var pe}).getOrThunk(function(){a.editorManager.setActive(a);var le=f().open(G,function(){C(le),x(),g().fold(function(){return a.focus()},function(pe){return It.fromDom(pe.getEl()).dom.focus()})});return z.push(le),x(),a.fire("OpenNotification",{notification:hr({},le)}),le});var K,ie}var L,z=[],j=Bn(z);return(L=a).on("SkinLoaded",function(){var G=L.getParam("service_message");G&&I({text:G,type:"warning",timeout:0},!1),x()}),L.on("show ResizeEditor ResizeWindow NodeChange",function(){St.requestAnimationFrame(x)}),L.on("remove",function(){Pn(z.slice(),function(G){f().close(G)})}),{open:I,close:function(){g().each(function(G){f().close(G),C(G),x()})},getNotifications:j}}var Ry,Ly,i1=0,uC=function(a,f){return a&&a.firstChild&&a.firstChild===a.lastChild&&a.firstChild.name===f},Ls=Qt.makeMap,Px=Qt.each,a1=Qt.explode,Rx=Qt.extend,$c=ba.DOM,B0=(Ry=function(a,f){return Va(a)&&Va(f)?B0(a,f):f},function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];if(0===a.length)throw new Error("Can't merge zero objects");for(var g={},x=0;x<a.length;x++){var C,I=a[x];for(C in I)po(I,C)&&(g[C]=Ry(g[C],I[C]))}return g}),lC="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),cC="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),mw="imagetools,toc".split(","),fC=wa().deviceType,wd=fC.isTouch(),Sd=fC.isPhone(),dC=fC.isTablet(),Lx=["lists","autolink","autosave"],vw={table_grid:!1,object_resizing:!1,resize:!1},Nx=(Ly={},{add:function(a,f){Ly[a]=f},get:function(a){return Ly[a]||{icons:{}}},has:function(a){return po(Ly,a)}}),ik=qe(sC,"clientWidth"),ak=qe(sC,"clientHeight"),z0=qe(_d,"margin-top"),s1=qe(_d,"margin-left"),dc=ws.PluginManager,Uf=ws.ThemeManager;function yw(a){function f(){var L=a.theme;return L&&L.getWindowManagerImpl?L.getWindowManagerImpl():{open:z,openUrl:z,alert:z,confirm:z,close:z,getParams:z,setParams:z};function z(){throw new Error("Theme did not provide a WindowManager implementation.")}}function g(L,z){return function(){for(var j=[],G=0;G<arguments.length;G++)j[G]=arguments[G];return z?z.apply(L,j):void 0}}function x(L){a.fire("CloseWindow",{dialog:L}),0===(I=rr(I,function(z){return z!==L})).length&&a.focus()}function C(L){a.editorManager.setActive(a),Rh(a);var z,j=L();return I.push(z=j),a.fire("OpenWindow",{dialog:z}),j}var I=[];return a.on("remove",function(){Pn(I,function(L){f().close(L)})}),{open:function(L,z){return C(function(){return f().open(L,z,x)})},openUrl:function(L){return C(function(){return f().openUrl(L,x)})},alert:function(L,z,j){var G=f();G.alert(L,g(j||G,z))},confirm:function(L,z,j){var G=f();G.confirm(L,g(j||G,z))},close:function(){$.from(I[I.length-1]).each(function(L){f().close(L),x(L)})}}}function F0(a,f){a.notificationManager.open({type:"error",text:f})}function u1(a,f){a._skinLoaded?F0(a,f):a.on("SkinLoaded",function(){F0(a,f)})}function V0(a,f,g){Qp(a,f,{message:g}),console.error(g)}function H0(a,f,g){return g?"Failed to load "+a+": "+g+" from url "+f:"Failed to load "+a+" url: "+f}function Bx(a,f,g){V0(a,"PluginLoadError",H0("plugin",f,g))}function Fx(){function a(x,C){return{status:x,resultUri:C}}function f(x){return x in g}var g={};return{hasBlobUri:f,getResultUri:function(x){var C=g[x];return C?C.resultUri:null},isPending:function(x){return!!f(x)&&1===g[x].status},isUploaded:function(x){return!!f(x)&&2===g[x].status},markPending:function(x){g[x]=a(1,null)},markUploaded:function(x,C){g[x]=a(2,C)},removeFailed:function(x){delete g[x]},destroy:function(){g={}}}}function hC(a){return a+_i+++"s"+(new Date).getTime().toString(36)+f()+f()+f();function f(){return Math.round(4294967295*Math.random()).toString(36)}}function gC(a){return function(){return a.notificationManager.open({text:a.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}}function Jd(a,f){return function sk(a,f){function g(z,j,G,te){var K=new XMLHttpRequest;K.open("POST",f.url),K.withCredentials=f.credentials,K.upload.onprogress=function(le){te(le.loaded/le.total*100)},K.onerror=function(){G("Image upload failed due to a XHR Transport error. Code: "+K.status)},K.onload=function(){var le,pe,me;K.status<200||300<=K.status?G("HTTP Error: "+K.status):(le=JSON.parse(K.responseText))&&"string"==typeof le.location?j((me=le.location,(pe=f.basePath)?pe.replace(/\/$/,"")+"/"+me.replace(/^\//,""):me)):G("Invalid JSON: "+K.responseText)};var ie=new FormData;ie.append("file",z.blob(),z.filename()),K.send(ie)}function x(z,j){return{url:j,blobInfo:z,status:!0}}function C(z,j,G){return{url:"",blobInfo:z,status:!1,error:{message:j,options:G}}}function I(z,j){Qt.each(L[z],function(G){G(j)}),delete L[z]}var L={};return!1===Ur(f.handler)&&(f.handler=g),{upload:function(z,j){return f.url||f.handler!==g?(te=j,G=Qt.grep(z,function(K){return!a.isUploaded(K.blobUri())}),Pi.all(Qt.map(G,function(K){return a.isPending(K.blobUri())?(me=K.blobUri(),new Pi(function(xe){L[me]=L[me]||[],L[me].push(xe)})):(le=f.handler,pe=te,a.markPending((ie=K).blobUri()),new Pi(function(xe){var be;try{var Ae=function(){be&&be.close()};le(ie,function(Le){Ae(),a.markUploaded(ie.blobUri(),Le),I(ie.blobUri(),x(ie,Le)),xe(x(ie,Le))},function(Le,Je){var pt=Je||{};Ae(),a.removeFailed(ie.blobUri()),I(ie.blobUri(),C(ie,Le,pt)),xe(C(ie,Le,pt))},function(Le){Le<0||100<Le||$.from(be).orThunk(function(){return $.from(pe).map(ln)}).each(function(Je){(be=Je).progressBar.value(Le)})})}catch(Le){xe(C(ie,Le.message,{}))}}));var ie,le,pe,me}))):new Pi(function(K){K([])});var G,te}}}(f,{url:a.getParam("images_upload_url","","string"),basePath:a.getParam("images_upload_base_path","","string"),credentials:a.getParam("images_upload_credentials",!1,"boolean"),handler:a.getParam("images_upload_handler",null,"function")})}function W0(a,f){function g(j){var G,te=pi.create((C="string"==typeof j?{name:j,classes:[],attrs:{}}:j).name),K=te;return(G=C).classes.length&&pi.addClass(K,G.classes.join(" ")),pi.setAttribs(K,G.attrs),te}var x,C,I,L=f&&f.schema||Wn({}),z=function(j,G,te){var K,ie,le,pe,me,xe,be,Ae=0<G.length&&G[0],Le=Ae&&Ae.name,Je=(pe=Le,me="string"!=typeof(le=j)?le.nodeName.toLowerCase():le,!(!(be=(xe=L.getElementRule(me))&&xe.parentsRequired)||!be.length)&&(pe&&-1!==Qt.inArray(be,pe)?pe:be[0]));if(Je)Le===Je?(ie=G[0],G=G.slice(1)):ie=Je;else if(Ae)ie=G[0],G=G.slice(1);else if(!te)return j;return ie&&(K=g(ie)).appendChild(j),te&&(K||(K=pi.create("div")).appendChild(j),Qt.each(te,function(pt){var Be=g(pt);K.insertBefore(Be,j)})),z(K,G,ie&&ie.siblings)};return a&&a.length?(x=g(C=a[0]),(I=pi.create("div")).appendChild(z(x,a.slice(1),C.siblings)),I):""}function mC(a){var f,g={classes:[],attrs:{}};return"*"!==(a=g.selector=Qt.trim(a))&&(f=a.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(x,C,I,L,z){switch(C){case"#":g.attrs.id=I;break;case".":g.classes.push(I);break;case":":-1!==Qt.inArray("checked disabled enabled read-only required".split(" "),I)&&(g.attrs[I]=I)}var j;return"["!==L||(j=z.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(g.attrs[j[1]]=j[2]),""})),g.name=f||"div",g}function vC(a,f){var g,x,C="",I=(x=a.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),wo(x)?x:"");if(""===I)return"";function L(le){return le.replace(/%(\w+)/g,"")}if("string"==typeof f){if(!(f=a.formatter.get(f)))return;f=f[0]}if("preview"in f){var z=Sr(f,"preview");if(yc(z,!1))return"";I=z.getOr(I)}var j,G=f.block||f.inline||"span",te=(j=f.selector)&&"string"==typeof j?(j=(j=j.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Qt.map(j.split(/(?:>|\s+(?![^\[\]]+\]))/),function(le){var pe=Qt.map(le.split(/(?:~\+|~|\+)/),mC),me=pe.pop();return pe.length&&(me.siblings=pe),me}).reverse()):[],K=te.length?(te[0].name||(te[0].name=G),G=f.selector,W0(te,a)):W0([G],a),ie=pi.select(G,K)[0]||K.firstChild;return Iw(f.styles,function(le,pe){var me=L(le);me&&pi.setStyle(ie,pe,me)}),Iw(f.attributes,function(le,pe){var me=L(le);me&&pi.setAttrib(ie,pe,me)}),Iw(f.classes,function(le){var pe=L(le);pi.hasClass(ie,pe)||pi.addClass(ie,pe)}),a.fire("PreviewFormats"),pi.setStyles(K,{position:"absolute",left:-65535}),a.getBody().appendChild(K),g=pi.getStyle(a.getBody(),"fontSize",!0),g=/px$/.test(g)?parseInt(g,10):0,Iw(I.split(" "),function(le){var pe=pi.getStyle(ie,le,!0);if(!("background-color"===le&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(pe)&&(pe=pi.getStyle(a.getBody(),le,!0),"#ffffff"===pi.toHex(pe).toLowerCase())||"color"===le&&"#000000"===pi.toHex(pe).toLowerCase())){if("font-size"===le&&/em|%$/.test(pe)){if(0===g)return;pe=parseFloat(pe)/(/%$/.test(pe)?100:1)*g+"px"}"border"===le&&pe&&(C+="padding:0 2px;"),C+=le+":"+pe+";"}}),a.fire("AfterPreviewFormats"),pi.remove(K),C}function Ny(a){var f,g,x,C,I,L,z=(C={},(I=function(G,te){G&&(wo(G)?(Pn(te=Yo(te)?te:[te],function(K){uo(K.deep)&&(K.deep=!ii(K)),uo(K.split)&&(K.split=!ii(K)||mo(K)),uo(K.remove)&&ii(K)&&!mo(K)&&(K.remove="none"),ii(K)&&mo(K)&&(K.mixed=!0,K.block_expand=!0),wo(K.classes)&&(K.classes=K.classes.split(/\s+/))}),C[G]=te):wn(G,function(K,ie){I(ie,K)}))})((g=(f=a).dom,x={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(G,te,K){return co(G)&&G.hasAttribute("href")},onformat:function(G,te,K){Qt.each(K,function(ie,le){g.setAttrib(G,le,ie)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(G){var te;return null!==(te=null==G?void 0:G.customValue)&&void 0!==te?te:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},Qt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(G){x[G]={block:G,remove:"all"}}),x)),I(f.getParam("formats")),{get:function(G){return ct(G)?C[G]:C},has:function(G){return po(C,G)},register:I,unregister:function(G){return G&&C[G]&&delete C[G],C}}),j=Os(null);return function(G){G.addShortcut("meta+b","","Bold"),G.addShortcut("meta+i","","Italic"),G.addShortcut("meta+u","","Underline");for(var te=1;te<=6;te++)G.addShortcut("access+"+te,"",["FormatBlock",!1,"h"+te]);G.addShortcut("access+7","",["FormatBlock",!1,"p"]),G.addShortcut("access+8","",["FormatBlock",!1,"div"]),G.addShortcut("access+9","",["FormatBlock",!1,"address"])}(a),(L=a).on("mouseup keydown",function(G){var te=L,K=G.keyCode,ie=te.selection,le=te.getBody();Ei(te,null,!1),8!==K&&46!==K||!ie.isCollapsed()||ie.getStart().innerHTML!==Ub||Ei(te,Xm(le,ie.getStart())),37!==K&&39!==K||Ei(te,Xm(le,ie.getStart()))}),{get:z.get,has:z.has,register:z.register,unregister:z.unregister,apply:function(G,te,K){var ie=G,le=te,pe=K;Ru(a).formatter.apply(ie,le,pe)},remove:function(G,te,K,ie){var le=G,pe=te,me=K,xe=ie;Ru(a).formatter.remove(le,pe,me,xe)},toggle:function(G,te,K){var ie=G,le=te,pe=K;Ru(a).formatter.toggle(ie,le,pe)},match:function(G,te,K,ie){return le=G,pe=te,me=K,xe=ie,Ru(a).formatter.match(le,pe,me,xe);var le,pe,me,xe},closest:function(G){return te=G,Ru(a).formatter.closest(te);var te},matchAll:function(G,te){return K=G,ie=te,Ru(a).formatter.matchAll(K,ie);var K,ie},matchNode:function(G,te,K,ie){return le=G,pe=te,me=K,xe=ie,Ru(a).formatter.matchNode(le,pe,me,xe);var le,pe,me,xe},canApply:function(G){return te=G,Ru(a).formatter.canApply(te);var te},formatChanged:function(G,te,K,ie){return le=j,pe=G,me=te,xe=K,be=ie,Ru(a).formatter.formatChanged(le,pe,me,xe,be);var le,pe,me,xe,be},getCssText:qe(vC,a)}}function yC(a){switch(a.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return 1;default:return}}function qT(a){var f,g,x,C,I,L=zd(),z=Os(0),j=Os(0),G={data:[],typing:!1,beforeChange:function(){var K=z,ie=L;Ru(a).undoManager.beforeChange(K,ie)},add:function(K,ie){return le=G,pe=j,me=z,xe=L,be=K,Ae=ie,Ru(a).undoManager.add(le,pe,me,xe,be,Ae);var le,pe,me,xe,be,Ae},undo:function(){return K=G,ie=z,le=j,Ru(a).undoManager.undo(K,ie,le);var K,ie,le},redo:function(){return K=j,ie=G.data,Ru(a).undoManager.redo(K,ie);var K,ie},clear:function(){var K=G,ie=j;Ru(a).undoManager.clear(K,ie)},reset:function(){var K=G;Ru(a).undoManager.reset(K)},hasUndo:function(){return K=G,ie=j,Ru(a).undoManager.hasUndo(K,ie);var K,ie},hasRedo:function(){return K=G,ie=j,Ru(a).undoManager.hasRedo(K,ie);var K,ie},transact:function(K){return ie=G,le=z,pe=K,Ru(a).undoManager.transact(ie,le,pe);var ie,le,pe},ignore:function(K){var ie=z,le=K;Ru(a).undoManager.ignore(ie,le)},extra:function(K,ie){var le=G,pe=j,me=K,xe=ie;Ru(a).undoManager.extra(le,pe,me,xe)}};return sg(a)||(x=G,C=z,I=Os(!1),(g=a).on("init",function(){x.add()}),g.on("BeforeExecCommand",function(K){yC(K.command)||(ek(x,C),x.beforeChange())}),g.on("ExecCommand",function(K){yC(K.command)||te(K)}),g.on("ObjectResizeStart cut",function(){x.beforeChange()}),g.on("SaveContent ObjectResized blur",te),g.on("dragend",te),g.on("keyup",function(K){var ie=K.keyCode;K.isDefaultPrevented()||((33<=ie&&ie<=36||37<=ie&&ie<=40||45===ie||K.ctrlKey)&&(te(),g.nodeChanged()),46!==ie&&8!==ie||g.nodeChanged(),I.get()&&x.typing&&!1===Ax(sw(g),x.data[0])&&(!1===g.isDirty()&&(g.setDirty(!0),g.fire("change",{level:x.data[0],lastLevel:null})),g.fire("TypingUndo"),I.set(!1),g.nodeChanged()))}),g.on("keydown",function(K){var le=K.keyCode;K.isDefaultPrevented()||(33<=le&&le<=36||37<=le&&le<=40||45===le?x.typing&&te(K):!(le<16||20<le)||224===le||91===le||x.typing||K.ctrlKey&&!K.altKey||K.metaKey||(x.beforeChange(),Jb(x,!0,C),x.add({},K),I.set(!0)))}),g.on("mousedown",function(K){x.typing&&te(K)}),g.on("input",function(K){K.inputType&&("insertReplacementText"===K.inputType||"insertText"===K.inputType&&null===K.data||"insertFromPaste"===K.inputType||"insertFromDrop"===K.inputType)&&te(K)}),g.on("AddUndo Undo Redo ClearUndos",function(K){K.isDefaultPrevented()||g.nodeChanged()})),(f=a).addShortcut("meta+z","","Undo"),f.addShortcut("meta+y,meta+shift+z","","Redo"),G;function te(K){Jb(x,!1,C),x.add({},K)}}function Vx(a){return"keydown"===a.type||"keyup"===a.type}function l1(a){var f=a.keyCode;return f===Jr.BACKSPACE||f===Jr.DELETE}function xv(a,f){return Ln(It.fromDom(f),a.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string"))}function am(a,f,g){var x,C,I=(x=a,C=f,rr(ba.DOM.getParents(g.container(),"*",C),x));return $.from(I[I.length-1])}function jf(a,f){if(!f)return f;var g=f.container(),x=f.offset();return a?Tp(g)?Ar(g.nextSibling)?en(g.nextSibling,0):en.after(g):Dp(f)?en(g,x+1):f:Tp(g)?Ar(g.previousSibling)?en(g.previousSibling,g.previousSibling.data.length):en.before(g):ad(f)?en(g,x-1):f}function bw(a){return Ki(a)||To(a)}function Hx(a,f){return Dt(a,f)?fh(f,bw,(g=a,function(x){return gn(g,It.fromDom(x.dom.parentNode))})):$.none();var g}function G0(a){var f,g,x;a.dom.isEmpty(a.getBody())&&(a.setContent(""),x=(g=(f=a).getBody()).firstChild&&f.dom.isBlock(g.firstChild)?g.firstChild:g,f.selection.setCursorLocation(x,0))}function xw(a,f){return{from:a,to:f}}function Wx(a,f){return Hx(It.fromDom(a),It.fromDom(f.container())).map(function(g){return{block:g,position:f}})}function uk(a){var f,g=ir(f=Wu(a),Qo).fold(Bn(f),function(x){return f.slice(0,x)});return Pn(g,Is),g}function _w(a,f){return yr(Gs(f,a).reverse(),function(g){return ee(g)}).each(Is)}function bC(a,f,g,x){if(ee(g))return Wi(g),Vi(g.dom);0===rr(nd(x),function(I){return!ee(I)}).length&&ee(f)&&Du(x,It.fromTag("br"));var C=gs(g.dom,en.before(x.dom));return Pn(uk(f),function(I){Du(x,I)}),_w(a,f),C}function XT(a,f,g){if(ee(g))return Is(g),ee(f)&&Wi(f),Vi(f.dom);var x=qd(g.dom);return Pn(uk(f),function(C){Fs(g,C)}),_w(a,f),x}function ww(a,f){cy(a,f.dom).map(function(g){return g.getNode()}).map(It.fromDom).filter(Zi).each(Is)}function Sw(a,f,g){return ww(!0,f),ww(!1,g),(Dt(C=g,x=f)?(I=Gs(x,C),$.from(I[I.length-1])):$.none()).fold(qe(XT,a,f,g),qe(bC,a,f,g));var x,C,I}function Gx(a,f,g,x){return f?Sw(a,x,g):Sw(a,g,x)}function c1(a,f){var g,x,C,I,L,z,j,G=It.fromDom(a.getBody()),te=(g=G.dom,x=f,((C=a.selection.getRng()).collapsed?(L=x,z=Wx(I=g,en.fromRangeStart(C)),j=z.bind(function(K){return pf(L,I,K.position).bind(function(ie){return Wx(I,ie).map(function(le){return pe=I,me=L,os((xe=le).position.getNode())&&!1===ee(xe.block)?cy(!1,xe.block.dom).bind(function(be){return be.isEqual(xe.position)?pf(me,pe,be).bind(function(Ae){return Wx(pe,Ae)}):$.some(xe)}).getOr(xe):xe;var pe,me,xe})})}),Ta(z,j,xw).filter(function(K){return!1===gn(K.from.block,K.to.block)&&cu((le=K).from.block).bind(function(pe){return cu(le.to.block).filter(function(me){return gn(pe,me)})}).isSome()&&!1===oo((ie=K).from.block.dom)&&!1===oo(ie.to.block.dom);var ie,le})):$.none()).bind(function(K){return Gx(G,f,K.from.block,K.to.block)}));return te.each(function(K){a.selection.setRng(K.toRange())}),te.isSome()}function xC(a,f){var g=It.fromDom(f),x=qe(gn,a);return Yr(g,vr,x).isSome()}function U0(a,f){return!a.selection.isCollapsed()&&function lk(a){var f,g,x,C,I,L,z,j,G,te,K=It.fromDom(a.getBody()),ie=a.selection.getRng();return G=gs((I=K).dom,en.fromRangeStart(L=ie)).isNone(),te=ps(I.dom,en.fromRangeEnd(L)).isNone(),!xC(z=I,(j=L).startContainer)&&!xC(z,j.endContainer)&&G&&te?((C=a).setContent(""),C.selection.setCursorLocation(),!0):(f=K,x=(g=a.selection).getRng(),Ta(Hx(f,It.fromDom(x.startContainer)),Hx(f,It.fromDom(x.endContainer)),function(le,pe){return!1===gn(le,pe)&&(x.deleteContents(),Gx(f,!0,le,pe).each(function(me){g.setRng(me.toRange())}),!0)}).getOr(!1))}(a)}function Ac(a,f,g,x,C){return $.from(f._selectionOverrides.showCaret(a,g,x,C))}function By(a,f){var g,x;return a.fire("BeforeObjectSelected",{target:f}).isDefaultPrevented()?$.none():$.some(((x=(g=f).ownerDocument.createRange()).selectNode(g),x))}function Ux(a,f,g){var x=Wm(1,a.getBody(),f),C=en.fromRangeStart(x),I=C.getNode();if(Yp(I))return Ac(1,a,I,!C.isAtEnd(),!1);var L=C.getNode(!0);if(Yp(L))return Ac(1,a,L,!1,!1);var z=a.dom.getParent(C.getNode(),function(j){return cg(j)||p1(j)});return Yp(z)?Ac(1,a,z,!1,g):$.none()}function sm(a,f,g){return f.collapsed?Ux(a,f,g).getOr(f):f}function Cw(a){return mv(a)||k0(a)}function jx(a){return ky(a)||lp(a)}function Lu(a,f,g,x,C,I){var L,z;return Ac(x,a,I.getNode(!C),C,!0).each(function(j){var G;f.collapsed?(G=f.cloneRange(),C?G.setEnd(j.startContainer,j.startOffset):G.setStart(j.endContainer,j.endOffset),G.deleteContents()):f.deleteContents(),a.selection.setRng(j)}),L=a.dom,Ar(z=g)&&0===z.data.length&&L.remove(z),!0}function Mw(a,f){var g=a.selection.getRng();if(!Ar(g.commonAncestorContainer))return!1;var x=f?Eu.Forwards:Eu.Backwards,C=Sc(a.getBody()),I=qe(ay,f?C.next:C.prev),L=f?Cw:jx,z=jp(x,a.getBody(),g),j=jf(f,I(z));if(!j||!sy(z,j))return!1;if(L(j))return Lu(a,g,z.getNode(),x,f,j);var G=I(j);return!!(G&&L(G)&&sy(j,G))&&Lu(a,g,z.getNode(),x,f,G)}function _C(a,f,g){return pf(f,a,g).bind(function(x){return K=x.getNode(),vr(It.fromDom(K))||To(It.fromDom(K))||(z=a,te=x,rx(!(j=f),G=g).fold(function(){return rx(j,te).fold(Yn,ie)},ie))?$.none():f&&oo(x.getNode())||!1===f&&oo(x.getNode(!0))?(C=a,I=g,L=x.getNode(!1===f),Hx(It.fromDom(C),It.fromDom(I.getNode())).map(function(le){return ee(le)?Yf.remove(le.dom):Yf.moveToElement(L)}).orThunk(function(){return $.some(Yf.moveToElement(L))})):f&&ky(g)||!1===f&&mv(g)?$.some(Yf.moveToPosition(x)):$.none();var C,I,L,z,j,G,te,K;function ie(le){return ds(It.fromDom(le))&&!ff(G,te,z)}})}function kw(a,f){return $.from(jg(a.getBody(),f))}function ZT(a,f){var g=a.selection.getNode();return kw(a,g).filter(oo).fold(function(){return K=a.getBody(),le=Wm((ie=f)?1:-1,K,a.selection.getRng()),pe=en.fromRangeStart(le),me=It.fromDom(K),(!1===ie&&ky(pe)?$.some(Yf.remove(pe.getNode(!0))):ie&&mv(pe)?$.some(Yf.remove(pe.getNode())):!1===ie&&mv(pe)&&gv(me,pe)?D0(me,pe).map(function(xe){return Yf.remove(xe.getNode())}):ie&&ky(pe)&&up(me,pe)?Ty(me,pe).map(function(xe){return Yf.remove(xe.getNode())}):(x=K,C=ie,G=(I=pe).getNode(!1===(j=C)),te=j?"after":"before",co(G)&&G.getAttribute("data-mce-caret")===te?(z=I.getNode(!1===(L=C)),(L&&oo(z.nextSibling)?$.some(Yf.moveToElement(z.nextSibling)):!1===L&&oo(z.previousSibling)?$.some(Yf.moveToElement(z.previousSibling)):$.none()).fold(function(){return _C(x,C,I)},$.some)):_C(x,C,I).bind(function(xe){return be=x,Ae=I,xe.fold(function(Le){return $.some(Yf.remove(Le))},function(Le){return $.some(Yf.moveToElement(Le))},function(Le){return ff(Ae,Le,be)?$.none():$.some(Yf.moveToPosition(Le))});var be,Ae}))).exists(function(xe){return xe.fold(function(Be){return Je._selectionOverrides.hideFakeCaret(),My(Je,pt,It.fromDom(Be)),!0},(Le=pt=f,function(Be){var je=Le?en.before(Be):en.after(Be);return Ae.selection.setRng(je.toRange()),!0}),(be=Ae=Je=a,function(Be){return be.selection.setRng(Be.toRange()),!0}));var be,Ae,Le,Je,pt});var x,C,I,L,z,j,G,te,K,ie,le,pe,me},Jo)}function xi(a,f){var g=a.selection.getNode();return!(!oo(g)||vs(g))&&kw(a,g.parentNode).filter(oo).fold(function(){return Pn(xc(It.fromDom(a.getBody()),".mce-offscreen-selection"),Is),My(a,f,It.fromDom(a.selection.getNode())),G0(a),!0},Jo)}function f1(a){var f,g=a.dom,x=a.selection,C=jg(a.getBody(),x.getNode());return Yu(C)&&g.isBlock(C)&&g.isEmpty(C)&&(f=g.create("br",{"data-mce-bogus":"1"}),g.setHTML(C,""),C.appendChild(f),x.setRng(en.before(f).toRange())),!0}function Yx(a,f){return(a.selection.isCollapsed()?ZT:xi)(a,f)}function lg(a,f){return!!a.selection.isCollapsed()&&(x=f,C=en.fromRangeStart((g=a).selection.getRng()),pf(x,g.getBody(),C).filter(function(I){return(x?RT:LT)(I)}).bind(function(I){return $.from(Bg(x?0:-1,I))}).exists(function(I){return g.selection.select(I),!0}));var g,x,C}function ck(a){return wv(a)&&a.data[0]===ua}function wC(a){return wv(a)&&a.data[a.data.length-1]===ua}function Tw(a){return a.ownerDocument.createTextNode(ua)}function d1(a,f){return(a?function(g){if(wv(g.previousSibling))return wC(g.previousSibling)||g.previousSibling.appendData(ua),g.previousSibling;if(wv(g))return ck(g)||g.insertData(0,ua),g;var x=Tw(g);return g.parentNode.insertBefore(x,g),x}:function(g){if(wv(g.nextSibling))return ck(g.nextSibling)||g.nextSibling.insertData(0,ua),g.nextSibling;if(wv(g))return wC(g)||g.appendData(ua),g;var x=Tw(g);return g.nextSibling?g.parentNode.insertBefore(x,g.nextSibling):g.parentNode.appendChild(x),x})(f)}function KT(a,f){return Ar(a.container())?d1(f,a.container()):d1(f,a.getNode())}function $T(a,f){var g=f.get();return g&&a.container()===g&&Tp(g)}function Dw(a,f){return f.fold(function(g){Um(a.get());var x=TC(g);return a.set(x),$.some(en(x,x.length-1))},function(g){return Vi(g).map(function(x){if($T(x,a))return en(a.get(),1);Um(a.get());var C=KT(x,!0);return a.set(C),en(C,1)})},function(g){return qd(g).map(function(x){if($T(x,a))return en(a.get(),a.get().length-1);Um(a.get());var C=KT(x,!1);return a.set(C),en(C,C.length-1)})},function(g){Um(a.get());var x=pk(g);return a.set(x),$.some(en(x,1))})}function SC(a,f){for(var g=0;g<a.length;g++){var x=a[g].apply(null,f);if(x.isSome())return x}return $.none()}function h1(a,f){return Lf(f,a)||a}function fk(a,f,g){var x=eh(g),C=h1(f,x.container());return am(a,C,x).fold(function(){return ps(C,x).bind(qe(am,a,C)).map(function(I){return hc.before(I)})},$.none)}function dk(a,f){return null===Xm(a,f)}function CC(a,f,g){return am(a,f,g).filter(qe(dk,f))}function MC(a,f,g){var x=q0(g);return CC(a,f,x).bind(function(C){return gs(C,x).isNone()?$.some(hc.start(C)):$.none()})}function qx(a,f,g){var x=eh(g);return CC(a,f,x).bind(function(C){return ps(C,x).isNone()?$.some(hc.end(C)):$.none()})}function Xx(a,f,g){var x=q0(g),C=h1(f,x.container());return am(a,C,x).fold(function(){return gs(C,x).bind(qe(am,a,C)).map(function(I){return hc.after(I)})},$.none)}function kC(a){return f=g1(a),!1===("rtl"===ba.DOM.getStyle(f,"direction",!0)||cm.test(f.textContent));var f}function Nh(a,f,g){return SC([fk,MC,qx,Xx],[a,f,g]).filter(kC)}function j0(a){return a.fold(Bn("before"),Bn("start"),Bn("end"),Bn("after"))}function Qd(a){return a.fold(hc.before,hc.before,hc.after,hc.after)}function um(a){return a.fold(hc.start,hc.start,hc.end,hc.end)}function JT(a,f,g,x,C,I){return Ta(am(f,g,x),am(f,g,C),function(L,z){return L!==z&&(G=z,te=Lf(L,j=g),K=Lf(G,j),te&&te===K)?hc.after(a?L:z):I;var j,G,te,K}).getOr(I)}function q2(a,f){return a.fold(Jo,function(g){return C=f,!(j0(x=g)===j0(C)&&g1(x)===g1(C));var x,C})}function Aw(a,f){return a?f.fold(jr($.some,hc.start),$.none,jr($.some,hc.after),$.none):f.fold($.none,jr($.some,hc.before),$.none,jr($.some,hc.end))}function Jc(a,f,g,x){var C=jf(a,x),I=Nh(f,g,C);return Nh(f,g,C).bind(qe(Aw,a)).orThunk(function(){return z=f,j=g,G=I,te=jf(L=a,x),pf(L,j,te).map(qe(jf,L)).fold(function(){return G.map(Qd)},function(K){return Nh(z,j,K).map(qe(JT,L,z,j,te,K)).filter(qe(q2,G))}).filter(kC);var L,z,j,G,te})}function _v(a){for(var f=[],g=1;g<arguments.length;g++)f[g-1]=arguments[g];var x=window.console;x&&(x.error||x.log).apply(x,Ot([a],f,!1))}var xu,Y0,QT=function(a,f){var g=a.editorManager.baseURL+"/skins/content",x="content"+a.editorManager.suffix+".css",C=!0===a.inline;return mt(f,function(I){return/^[a-z0-9\-]+$/i.test(I)&&!C?g+"/"+I+"/"+x:a.documentBaseURI.toAbsolute(I)})},_i=0,Iw=Qt.each,pi=ba.DOM,hk=[9,27,Jr.HOME,Jr.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Jr.DOWN,Jr.UP,Jr.LEFT,Jr.RIGHT].concat(Fr.browser.isFirefox()?[224]:[]),lm="data-mce-placeholder",cm=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,eh=qe(jf,!0),q0=qe(jf,!1),p1=Yu,cg=oo,Yf=hu([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),wv=Ar,TC=qe(d1,!0),pk=qe(d1,!1),hc=hu([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),g1=function(a){return a.fold(mi,mi,mi,mi)};function zy(a,f,g){var x=a?1:-1;return f.setRng(en(g.container(),g.offset()+x).toRange()),f.getSel().modify("move",a?"forward":"backward","word"),!0}function X0(a,f){return a===Eu.Backwards?wr(f):f}function Sv(a,f,g,x){for(var C,I,L,z,j=Sc(g),G=x,te=[];G;){var K=(L=j,z=G,f===Eu.Forwards?L.next(z):L.prev(z));if(!K)break;if(os(K.getNode(!1)))return f===Eu.Forwards?{positions:X0(f,te).concat([K]),breakType:xu.Br,breakAt:$.some(K)}:{positions:X0(f,te),breakType:xu.Br,breakAt:$.some(K)};if(K.isVisible()){if(a(G,K)){var ie=(C=G,os((I=K).getNode(f===Eu.Forwards))?xu.Br:!1===ff(C,I)?xu.Block:xu.Wrap);return{positions:X0(f,te),breakType:ie,breakAt:$.some(K)}}te.push(K),G=K}else G=K}return{positions:X0(f,te),breakType:xu.Eol,breakAt:$.none()}}function Cv(a,f,g,x){return f(g,x).breakAt.map(function(C){var I=f(g,C).positions;return a===Eu.Backwards?I.concat(C):[C].concat(I)}).getOr([])}function Ow(a,f){return dr(a,function(g,x){return g.fold(function(){return $.some(x)},function(C){return Ta(sn(C.getClientRects()),sn(x.getClientRects()),function(I,L){var z=Math.abs(f-I.left);return Math.abs(f-L.left)<=z?x:C}).or(g)})},$.none())}function gk(a,f){return sn(f.getClientRects()).bind(function(g){return Ow(a,g.left)})}function fm(a){function f(x){return mt(x,function(C){var I=_c(C);return I.node=a,I})}if(co(a))return f(a.getClientRects());if(Ar(a)){var g=a.ownerDocument.createRange();return g.setStart(a,0),g.setEnd(a,a.data.length),f(g.getClientRects())}}function Zx(a){return gc(a,fm)}qe(Jc,!1),qe(Jc,!0),(Y0=xu={})[Y0.Br=0]="Br",Y0[Y0.Block=1]="Block",Y0[Y0.Wrap=2]="Wrap",Y0[Y0.Eol=3]="Eol";var dm,Cd,Fy=qe(Sv,en.isAbove,-1),Bh=qe(Sv,en.isBelow,1),DC=qe(Cv,-1,Fy),eD=qe(Cv,1,Bh);function Z0(a,f,g,x,C,I){function L(K){var ie=Zx([K]);-1===a&&(ie=ie.reverse());for(var le=0;le<ie.length;le++){var pe=ie[le];if(!g(pe,G)){if(0<j.length&&f(pe,Ts(j))&&z++,pe.line=z,C(pe))return!0;j.push(pe)}}}var z=0,j=[],G=Ts(I.getClientRects());if(!G)return j;var te=I.getNode();return L(te),function(K,ie,le,pe){for(;pe=sc(pe,K,B,ie);)if(le(pe))return}(a,x,L,te),j}function Mv(a){return function(f){return f.line>a}}function fg(a){return function(f){return f.line===a}}function Ew(a,f){return Math.abs(a.left-f)}function Kx(a,f){return Math.abs(a.right-f)}function tD(a,f){return a>=f.left&&a<=f.right}function kv(a,f){return a>=f.top&&a<=f.bottom}function AC(a,f,g){return void 0===g&&(g=Jo),rs(a,function(x,C){if(tD(f,C))return g(C)?C:x;if(tD(f,x))return g(x)?x:C;var I=Math.min(Ew(x,f),Kx(x,f)),L=Math.min(Ew(C,f),Kx(C,f));return L===I&&Ao(C,"node")&&Zw(C.node)||L<I?C:x})}function nu(a,f,g,x,C){var I=o_(x,a,B,f,!C);do{if(!I||g(I))return}while(I=o_(I,a,B,f))}function Tv(a,f){a.selection.setRng(f),Zd(a,a.selection.getRng())}function Pw(a,f,g){return $.some(sm(a,f,g))}function K0(a,f,g,x,C,I){var L=f===Eu.Forwards,z=Sc(a.getBody()),j=qe(ay,L?z.next:z.prev),G=L?x:C;if(!g.collapsed){var te=Th(g);if(I(te))return Ac(f,a,te,f===Eu.Backwards,!1)}var K=jp(f,a.getBody(),g);if(G(K))return By(a,K.getNode(!L));var ie=jf(L,j(K)),le=T(g);if(!ie)return le?$.some(g):$.none();if(G(ie))return Ac(f,a,ie.getNode(!L),L,!1);var pe=j(ie);return pe&&G(pe)&&sy(ie,pe)?Ac(f,a,pe.getNode(!L),L,!1):le?Pw(a,ie.toRange(),!1):$.none()}function m1(a,f,g,x,C,I){var L=jp(f,a.getBody(),g),z=Ts(L.getClientRects()),j=f===dm.Down;if(!z)return $.none();var G,te=rr((j?lD:w1)(a.getBody(),Mv(1),L),fg(1)),K=z.left,ie=AC(te,K);if(ie&&I(ie.node)){var le=Math.abs(K-ie.left),pe=Math.abs(K-ie.right);return Ac(f,a,ie.node,le<pe,!1)}if(G=x(L)?L.getNode():C(L)?L.getNode(!0):Th(g)){var me=function(be,Ae,Le,Je){function pt(Wt){return Ts(Wt.getClientRects())}var Be,je,et,At=Sc(Ae),Nt=[],Kt=0,Yt=1===be?(Be=At.next,je=Eg,et=kh,en.after(Je)):(Be=At.prev,je=kh,et=Eg,en.before(Je)),dt=pt(Yt);do{if(Yt.isVisible()){var vt=pt(Yt);if(!et(vt,dt)){0<Nt.length&&je(vt,Ts(Nt))&&Kt++;var kt=_c(vt);if(kt.position=Yt,kt.line=Kt,Le(kt))return Nt;Nt.push(kt)}}}while(Yt=Be(Yt));return Nt}(f,a.getBody(),Mv(1),G),xe=AC(rr(me,fg(1)),K);if(xe||(xe=Ts(rr(me,fg(0)))))return Pw(a,xe.position.toRange(),!1)}return 0===te.length?S1(a,j).filter(j?C:x).map(function(be){return sm(a,be.toRange(),!1)}):$.none()}function mk(a,f,g){return S1(a,f).filter(g).exists(function(x){return a.selection.setRng(x.toRange()),!0})}function $x(a,f){var g=a.dom.createRng();g.setStart(f.container(),f.offset()),g.setEnd(f.container(),f.offset()),a.selection.setRng(g)}function Jx(a,f){a?f.setAttribute("data-mce-selected","inline-boundary"):f.removeAttribute("data-mce-selected")}function zh(a,f,g){return Dw(f,g).map(function(x){return $x(a,x),g})}function hm(a,f,g){return!!np(a)&&(C=f,I=g,L=(x=a).getBody(),z=en.fromRangeStart(x.selection.getRng()),Jc(I,qe(xv,x),L,z).bind(function(j){return zh(x,C,j)}).isSome());var x,C,I,L,z}function Rw(a,f,g){return!!np(f)&&(x=a,I=(C=f).selection.getRng(),L=x?en.fromRangeEnd(I):en.fromRangeStart(I),!!Ur(C.selection.getSel().modify)&&(x&&Dp(L)?zy(!0,C.selection,L):!(x||!ad(L))&&zy(!1,C.selection,L)));var x,C,I,L}function Av(a,f,g){if(np(a)){var x=S1(a,f).getOrThunk(function(){var C=a.selection.getRng();return f?en.fromRangeEnd(C):en.fromRangeStart(C)});return Nh(qe(xv,a),a.getBody(),x).exists(function(C){var I=Qd(C);return Dw(g,I).exists(function(L){return $x(a,L),!0})})}return!1}function Lw(a,f){return function(g){return Dw(f,g).exists(function(x){return $x(a,x),!0})}}function Nw(a,f,g,x){var C=a.getBody(),I=qe(xv,a);a.undoManager.ignore(function(){var L,z,j;a.selection.setRng((L=g,z=x,(j=document.createRange()).setStart(L.container(),L.offset()),j.setEnd(z.container(),z.offset()),j)),a.execCommand("Delete"),Nh(I,C,en.fromRangeStart(a.selection.getRng())).map(um).map(Lw(a,f))}),a.nodeChanged()}function pm(a,f,g){if(a.selection.isCollapsed()&&np(a)){var x=en.fromRangeStart(a.selection.getRng());return I=f,L=g,z=x,j=(C=a).getBody(),G=Lf(z.container(),j)||j,te=qe(xv,C),(K=Nh(te,G,z)).bind(function(ie){return L?ie.fold(Bn($.some(um(ie))),$.none,Bn($.some(Qd(ie))),$.none):ie.fold($.none,Bn($.some(Qd(ie))),$.none,Bn($.some(um(ie))))}).map(Lw(C,I)).getOrThunk(function(){var ie=Vg(L,G,z),le=ie.bind(function(pe){return Nh(te,G,pe)});return Ta(K,le,function(){return am(te,G,z).exists(function(pe){return!!Ta(Vi(me=pe),qd(me),function(xe,be){var Ae=jf(!0,xe),Le=jf(!1,be);return ps(me,Ae).forall(function(Je){return Je.isEqual(Le)})}).getOr(!0)&&(My(C,L,It.fromDom(pe)),!0);var me})}).orThunk(function(){return le.bind(function(pe){return ie.map(function(me){return L?Nw(C,I,z,me):Nw(C,I,me,z),!0})})}).getOr(!1)})}var C,I,L,z,j,G,te,K;return!1}function Iv(a){return 1===mc(a)}function dp(a,f){return!!a.selection.isCollapsed()&&function Bw(a,f){var g,x=It.fromDom(a.getBody()),C=It.fromDom(a.selection.getStart()),I=rr(ir(g=Gs(C,x),Qo).fold(Bn(g),function(L){return g.slice(0,L)}),Iv);return Ht(I).exists(function(L){var z,j,G,te,K,ie,le,pe,me,xe=en.fromRangeStart(a.selection.getRng()),be=f,Ae=xe,Le=L.dom;return!(!Ta(Vi(Le),qd(Le),function(Je,pt){var Be=jf(!0,Je),je=jf(!1,pt),et=jf(!1,Ae);return be?ps(Le,et).exists(function(At){return At.isEqual(je)&&Ae.isEqual(Be)}):gs(Le,et).exists(function(At){return At.isEqual(Be)&&Ae.isEqual(je)})}).getOr(!0)||eu((z=L).dom)&&US(z.dom)||(j=f,te=L,0===(me=mt(rr(I,qe(PT,G=a)),function(Je){return Je.dom})).length?My(G,j,te):(ie=te.dom,pe=YS(me,(le=xx(!1)).dom),Du(It.fromDom(ie),le),Is(It.fromDom(ie)),K=en(pe,0),G.selection.setRng(K.toRange())),0))})}(a,f)}function $0(a,f,g){return a._selectionOverrides.hideFakeCaret(),My(a,f,It.fromDom(g)),!0}function Ov(a,f){return a.selection.isCollapsed()?(z=(L=f)?k0:lp,G=jp(L?Eu.Forwards:Eu.Backwards,(I=a).getBody(),I.selection.getRng()),z(G)?$0(I,L,G.getNode(!L)):$.from(jf(L,G)).filter(function(te){return z(te)&&sy(G,te)}).exists(function(te){return $0(I,L,te.getNode(!L))})):(x=f,C=(g=a).selection.getNode(),!!Cl(C)&&$0(g,x,C));var g,x,C,I,L,z,G}function v1(a){var f=parseInt(a,10);return isNaN(f)?0:f}function vk(a,f){return(a||"table"===Ga(f)?"margin":"padding")+("rtl"===Nc(f,"direction")?"-right":"-left")}function zw(a){var f,g=FC(a);return!a.mode.isReadOnly()&&(1<g.length||(f=a,gr(g,function(x){var C=kf(x,vk(Ah(f),x)).map(v1).getOr(0);return"false"!==f.dom.getContentEditable(x.dom)&&0<C})))}function J0(a){return Ii(a)||To(a)}function Qx(a,f){var g=a.dom,x=a.selection,C=a.formatter,I=a.getParam("indentation","40px","string"),L=/[a-z%]+$/i.exec(I)[0],z=parseInt(I,10),j=Ah(a),G=Za(a);a.queryCommandState("InsertUnorderedList")||a.queryCommandState("InsertOrderedList")||""!==G||g.getParent(x.getNode(),g.isBlock)||C.apply("div"),Pn(FC(a),function(te){var K,ie=g,le=f,pe=z,me=L,xe=te.dom,be=vk(j,It.fromDom(xe));"outdent"===le?(K=Math.max(0,v1(xe.style[be])-pe),ie.setStyle(xe,be,K?K+me:"")):(K=v1(xe.style[be])+pe+me,ie.setStyle(xe,be,K))})}function Q0(a,f){if(a.selection.isCollapsed()&&zw(a)){var g=a.dom,x=a.selection.getRng(),C=en.fromRangeStart(x),I=g.getParent(x.startContainer,g.isBlock);if(null!==I&&vv(It.fromDom(I),C))return Qx(a,"outdent"),!0}return!1}function yk(a,f){a.getDoc().execCommand(f,!1,null)}function Fw(a){return void 0===a.touches||1!==a.touches.length?$.none():$.some(a.touches[0])}function Vw(a,f){return po(a,f.nodeName)}function eb(a){var f,g,x,C=a.dom,I=a.selection,L=a.schema,z=L.getBlockElements(),j=I.getStart(),G=a.getBody(),te=Za(a);if(j&&co(j)&&te){var K=G.nodeName.toLowerCase();if(L.isValidChild(K,te.toLowerCase())&&(ie=z,le=G,!Ce(mf(It.fromDom(j),It.fromDom(le)),function(je){return Vw(ie,je.dom)}))){var ie,le,me,xe,be=I.getRng(),Ae=be.startContainer,Le=be.startOffset,Je=be.endContainer,pt=be.endOffset,Be=pl(a);for(j=G.firstChild;j;)me=z,Ar(xe=j)||co(xe)&&!Vw(me,xe)&&!cc(xe)?function(et,At){if(Ar(At)&&(0===At.nodeValue.length||/^\s+$/.test(At.nodeValue)&&(!At.nextSibling||Vw(et,At.nextSibling))))return 1}(z,j)?(j=(g=j).nextSibling,C.remove(g)):(f||(f=C.create(te,l0(a)),j.parentNode.insertBefore(f,j),x=!0),j=(g=j).nextSibling,f.appendChild(g)):(f=null,j=j.nextSibling);x&&Be&&(be.setStart(Ae,Le),be.setEnd(Je,pt),I.setRng(be),a.nodeChanged())}}}function bk(a,f){f.hasAttribute("data-mce-caret")&&(y(f),a.selection.setRng(a.selection.getRng()),a.selection.scrollIntoView(f))}function IC(a,f){var g=Tf(It.fromDom(a.getBody()),"*[data-mce-caret]").map(function(x){return x.dom}).getOrNull();if(g)return"compositionstart"===f.type?(f.preventDefault(),f.stopPropagation(),void bk(a,g)):void(bs(g)&&(bk(a,g),a.undoManager.add()))}function gm(a,f,g){var x,C,I,L=Sc(a.getBody()),z=qe(ay,1===f?L.next:L.prev);!g.collapsed||""===Za(a)||(x=a.dom.getParent(g.startContainer,"PRE"))&&(z(en.fromRangeStart(g))||(I=a.dom.create(Za(a)),(!Fr.ie||11<=Fr.ie)&&(I.innerHTML='<br data-mce-bogus="1">'),C=I,1===f?a.$(x).after(C):a.$(x).before(C),a.selection.select(C,!0),a.selection.collapse()))}function Ev(a,f){return x=f?Eu.Forwards:Eu.Backwards,C=(g=a).selection.getRng(),K0(g,x,C,mv,ky,VC).orThunk(function(){return gm(g,x,C),$.none()}).exists(function(I){return Tv(a,I),!0});var g,x,C}function Fh(a,f){return x=f?1:-1,C=(g=a).selection.getRng(),m1(g,x,C,function(I){return mv(I)||YM(I)},function(I){return ky(I)||Dc(I)},VC).orThunk(function(){return gm(g,x,C),$.none()}).exists(function(I){return Tv(a,I),!0});var g,x,C}function Hw(a,f){return mk(a,f,f?ky:mv)}function OC(a){return nn(["figcaption"],Ga(a))}function xk(a){var f=document.createRange();return f.setStartBefore(a.dom),f.setEndBefore(a.dom),f}function EC(a,f,g){(g?Fs:Ll)(a,f)}function hp(a,f){return!!a.selection.isCollapsed()&&function _k(a,f){var g=It.fromDom(a.getBody()),x=en.fromRangeStart(a.selection.getRng()),C=Za(a),I=l0(a),L=x,z=qe(gn,g);return fh(It.fromDom(L.container()),Qo,z).filter(OC).exists(function(){if(Je=g,pt=x,f?Bh(Je.dom,pt).breakAt.isNone():Fy(Je.dom,pt).breakAt.isNone()){var j=(G=g,K=I,ie=f,""===(te=C)?(Ae=ie,EC(G,Le=It.fromTag("br"),Ae),xk(Le)):(le=G,pe=ie,me=K,xe=It.fromTag(te),be=It.fromTag("br"),ec(xe,me),Fs(xe,be),EC(le,xe,pe),xk(be)));return a.selection.setRng(j),!0}var G,te,K,ie,le,pe,me,xe,be,Ae,Le,Je,pt;return!1})}(a,f)}function gi(a){for(var f=[],g=1;g<arguments.length;g++)f[g-1]=arguments[g];return function(){return a.apply(null,f)}}function y1(a,f){return yr((g=f,gc(mt(a,function(x){return hr({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:_n},x)}),function(x){return g.keyCode===x.keyCode&&g.shiftKey===x.shiftKey&&g.altKey===x.altKey&&g.ctrlKey===x.ctrlKey&&g.metaKey===x.metaKey?[x]:[]})),function(x){return x.action()});var g}function Ww(a,f){var g=f?Eu.Forwards:Eu.Backwards,x=a.selection.getRng();return K0(a,g,x,k0,lp,Cl).exists(function(C){return Tv(a,C),!0})}function wk(a,f){var g=f?1:-1,x=a.selection.getRng();return m1(a,g,x,k0,lp,Cl).exists(function(C){return Tv(a,C),!0})}function Sk(a,f){return mk(a,f,f?lp:k0)}function b1(a,f,g,x,C){var I,L=xc(It.fromDom(g),"td,th,caption").map(function(te){return te.dom}),z=rr((I=a,gc(L,function(te){var K,ie={left:(K=_c(te.getBoundingClientRect())).left- -1,top:K.top- -1,right:K.right+-2,bottom:K.bottom+-2,width:K.width+-1,height:K.height+-1};return[{x:ie.left,y:I(ie),cell:te},{x:ie.right,y:I(ie),cell:te}]})),function(te){return f(te,C)}),j=x,G=C;return dr(z,function(te,K){return te.fold(function(){return $.some(K)},function(ie){var le=Math.sqrt(Math.abs(ie.x-j)+Math.abs(ie.y-G)),pe=Math.sqrt(Math.abs(K.x-j)+Math.abs(K.y-G));return $.some(pe<le?K:ie)})},$.none()).map(function(te){return te.cell})}function Ck(a,f,g){var x,C,I=a(f,g);return I.breakType===xu.Wrap&&0===I.positions.length||!os(g.getNode())&&I.breakType===xu.Br&&1===I.positions.length?(x=a,C=f,!I.breakAt.exists(function(L){return x(C,L).breakAt.isSome()})):I.breakAt.isNone()}function rD(a,f,g,x){var C,I,L,z=a.selection.getRng(),j=f?1:-1;return!(!nx()||(C=f,I=g,L=en.fromRangeStart(z),!cy(!C,I).exists(function(G){return G.isEqual(L)}))||(Ac(j,a,g,!f,!1).each(function(G){Tv(a,G)}),0))}function e_(a,f,g){var C,I=(C=g.getNode(!!f),co(C)&&"TABLE"===C.nodeName?$.some(C):$.none()),L=!1===f;I.fold(function(){return Tv(a,g.toRange())},function(z){return cy(L,a.getBody()).filter(function(j){return j.isEqual(g)}).fold(function(){return Tv(a,g.toRange())},function(j){var G,te,K=f,ie=z,le=g;(te=Za(G=a))?G.undoManager.transact(function(){var pe=It.fromTag(te);ec(pe,l0(G)),Fs(pe,It.fromTag("br")),(K?Au:Du)(It.fromDom(ie),pe);var me=G.dom.createRng();me.setStart(pe.dom,0),me.setEnd(pe.dom,0),Tv(G,me)}):Tv(G,le.toRange())})})}function PC(a,f,g,x){var C,I,L,z,j,G,te,K,ie,le,pe=a.selection.getRng(),me=en.fromRangeStart(pe),xe=a.getBody();if(f||!HC(x,me))return!(!f||!Ik(x,me)||(C=xe,ie=I=g,e_(a,f,be=Ht((le=L=me).getClientRects()).bind(function(Ae){return cD(ie,Ae.left,Ae.top)}).bind(function(Ae){return gk(Vi(Le=Ae).map(function(Je){return[Je].concat(Bh(Le,Je).positions)}).getOr([]),le);var Le}).orThunk(function(){return sn(L.getClientRects()).bind(function(Ae){return Ow(eD(C,en.after(I)),Ae.left)})}).getOr(en.after(I))),0));var be=(z=xe,te=j=g,sn((K=G=me).getClientRects()).bind(function(Ae){return i_(te,Ae.left,Ae.top)}).bind(function(Ae){return gk(qd(Le=Ae).map(function(Je){return Fy(Le,Je).positions.concat(Je)}).getOr([]),K);var Le}).orThunk(function(){return sn(G.getClientRects()).bind(function(Ae){return Ow(DC(z,en.before(j)),Ae.left)})}).getOr(en.before(j)));return e_(a,f,be),!0}function RC(a,f,g){return $.from(a.dom.getParent(a.selection.getNode(),"td,th")).bind(function(x){return $.from(a.dom.getParent(x,"table")).map(function(C){return g(a,f,C,x)})}).getOr(!1)}function Gw(a,f){return RC(a,f,rD)}function t_(a,f){return RC(a,f,PC)}function tb(a,f){var g,x,C=f,I=a.dom,L=a.schema.getMoveCaretBeforeOnEnterElements();if(f){!/^(LI|DT|DD)$/.test(f.nodeName)||(x=function(G){for(;G;){if(1===G.nodeType||3===G.nodeType&&G.data&&/[\r\n\s]/.test(G.data))return G;G=G.nextSibling}}(f.firstChild))&&/^(UL|OL|DL)$/.test(x.nodeName)&&f.insertBefore(I.doc.createTextNode(xa),f.firstChild);var z=I.createRng();if(f.normalize(),f.hasChildNodes()){for(var j=new Ks(f,f);g=j.current();){if(Ar(g)){z.setStart(g,0),z.setEnd(g,0);break}if(L[g.nodeName.toLowerCase()]){z.setStartBefore(g),z.setEndBefore(g);break}C=g,g=j.next()}g||(z.setStart(C,0),z.setEnd(C,0))}else os(f)?f.nextSibling&&I.isBlock(f.nextSibling)?(z.setStartBefore(f),z.setEndBefore(f)):(z.setStartAfter(f),z.setEndAfter(f)):(z.setStart(f,0),z.setEnd(f,0));a.selection.setRng(z),Zd(a,z)}}function Uw(a){return $.from(a.dom.getParent(a.selection.getStart(!0),a.dom.isBlock))}function th(a,f){return a&&a.parentNode&&a.parentNode.nodeName===f}function n_(a){return a&&/^(OL|UL|LI)$/.test(a.nodeName)}function mm(a){var f=a.parentNode;return/^(LI|DT|DD)$/.test(f.nodeName)?f:a}function pp(a,f,g){for(var x=a[g?"firstChild":"lastChild"];x&&!co(x);)x=x[g?"nextSibling":"previousSibling"];return x===f}function LC(a){a.innerHTML='<br data-mce-bogus="1">'}function Mk(a,f){return a.nodeName===f||a.previousSibling&&a.previousSibling.nodeName===f}function oD(a,f){return f&&a.isBlock(f)&&!/^(TD|TH|CAPTION|FORM)$/.test(f.nodeName)&&!/^(fixed|absolute)/i.test(f.style.position)&&"true"!==a.getContentEditable(f)}function r_(a,f,g){return!1===Ar(f)?g:a?1===g&&f.data.charAt(g-1)===ua?0:g:g===f.data.length-1&&f.data.charAt(g)===ua?f.data.length:g}function NC(a,f){for(var g,x=a.getRoot(),C=f;C!==x&&"false"!==a.getContentEditable(C);)"true"===a.getContentEditable(C)&&(g=C),C=C.parentNode;return C!==x?g:x}function nh(a,f){var g=Za(a);g&&g.toLowerCase()===f.tagName.toLowerCase()&&function(x,C,I){var L=x.dom;$.from(I.style).map(L.parseStyle).each(function(G){var te=Ja(It.fromDom(C)),K=hr(hr({},te),G);L.setStyles(C,K)}),Ta($.from(I.class).map(function(G){return G.split(/\s+/)}),$.from(C.className).map(function(G){return rr(G.split(/\s+/),function(te){return""!==te})}),function(G,te){var K=rr(te,function(le){return!nn(G,le)}),ie=Ot(Ot([],G,!0),K,!0);L.setAttrib(C,"class",ie.join(" "))});var z=["style","class"],j=zo(I,function(G,te){return!nn(z,te)});L.setAttribs(C,j)}(a,f,l0(a))}function kk(a,f,g){var x=a.dom.createRng();g?(x.setStartBefore(f),x.setEndBefore(f)):(x.setStartAfter(f),x.setEndAfter(f)),a.selection.setRng(x),Zd(a,x)}function dg(a,f){var g=It.fromTag("br");Du(It.fromDom(f),g),a.undoManager.add()}function Us(a,f){fD(a.getBody(),f)||Au(It.fromDom(f),It.fromTag("br"));var g=It.fromTag("br");Au(It.fromDom(f),g),kk(a,g.dom,!1),a.undoManager.add()}function _u(a){return a&&"A"===a.nodeName&&"href"in a}function rh(a){return a.fold(Yn,_u,_u,Yn)}function Pv(a,f){f.fold(_n,qe(dg,a),qe(Us,a),_n)}function jw(a,f){var g,x,C,I=(x=qe(xv,g=a),C=en.fromRangeStart(g.selection.getRng()),Nh(x,g.getBody(),C).filter(rh));I.isSome()?I.each(qe(Pv,a)):function(L,z){var j,G,K=L.dom,ie=L.selection.getRng();Vf(K,ie).each(function(Je){ie.setStart(Je.startContainer,Je.startOffset),ie.setEnd(Je.endContainer,Je.endOffset)});var le,pe=ie.startOffset,me=ie.startContainer;1===me.nodeType&&me.hasChildNodes()&&(le=pe>me.childNodes.length-1,me=me.childNodes[Math.min(pe,me.childNodes.length-1)]||me,pe=le&&3===me.nodeType?me.nodeValue.length:0);var xe=K.getParent(me,K.isBlock),be=xe?K.getParent(xe.parentNode,K.isBlock):null;"LI"!==(be?be.nodeName.toUpperCase():"")||!(!z||!z.ctrlKey)||(xe=be),me&&3===me.nodeType&&pe>=me.nodeValue.length&&!function(Je){for(var pt,Be=new Ks(me,xe),je=Je.getNonEmptyElements();pt=Be.next();)if(je[pt.nodeName.toLowerCase()]||0<pt.length)return 1}(L.schema)&&(j=K.create("br"),ie.insertNode(j),ie.setStartAfter(j),ie.setEndAfter(j),G=!0),j=K.create("br"),Nm(K,ie,j),kk(L,j,G),L.undoManager.add()}(a,f)}function x1(a,f){return Uw(a).filter(function(g){return 0<f.length&&Ln(It.fromDom(g),f)}).isSome()}function Md(a,f){return x1(a,a.getParam("no_newline_selector",""))}function Yw(a){return function(f,g){return""===Za(f)===a}}function nb(a){return function(f,g){return Uw(f).filter(function(x){return To(It.fromDom(x))}).isSome()===a}}function Tk(a,f){return function(g,x){return Uw(g).fold(Bn(""),function(C){return C.nodeName.toUpperCase()})===a.toUpperCase()===f}}function rb(a){return Tk("pre",a)}function _1(a){return function(f,g){return f.getParam("br_in_pre",!0)===a}}function qw(a,f){return x1(a,a.getParam("br_newline_selector",".mce-toc h2,figcaption,caption"))}function ob(a,f){return f}function BC(a){var f=Za(a),g=function(x,C){for(var I,L=x.getRoot(),z=C;z!==L&&"false"!==x.getContentEditable(z);)"true"===x.getContentEditable(z)&&(I=z),z=z.parentNode;return z!==L?I:L}(a.dom,a.selection.getStart());return g&&a.schema.isValidChild(g.nodeName,f||"P")}function oh(a,f){return function(g,x){return dr(a,function(C,I){return C&&I(g,x)},!0)?$.some(f):$.none()}}function Dk(a,f){var g,x;g=a,x=f,SC([oh([Md],bf.none()),oh([Tk("summary",!0)],bf.br()),oh([rb(!0),_1(!1),ob],bf.br()),oh([rb(!0),_1(!1)],bf.block()),oh([rb(!0),_1(!0),ob],bf.block()),oh([rb(!0),_1(!0)],bf.br()),oh([nb(!0),ob],bf.br()),oh([nb(!0)],bf.block()),oh([Yw(!0),ob,BC],bf.block()),oh([Yw(!0)],bf.br()),oh([qw],bf.br()),oh([Yw(!1),ob],bf.br()),oh([BC],bf.block())],[g,!(!x||!x.shiftKey)]).getOr(bf.none()).fold(function(){jw(a,f)},function(){!function iD(a,f){function g(Nn){var _r,mn=le,sr=te.getTextInlineElements(),In=Nn||"TABLE"===Le||"HR"===Le?G.create(Nn||je):be.cloneNode(!1),Mr=In;if(!1===a.getParam("keep_styles",!0))G.setAttrib(In,"style",null),G.setAttrib(In,"class",null);else for(;sr[mn.nodeName]&&(eu(mn)||cc(mn)||(_r=mn.cloneNode(!1),G.setAttrib(_r,"id",""),In.hasChildNodes()?_r.appendChild(In.firstChild):Mr=_r,In.appendChild(_r))),(mn=mn.parentNode)&&mn!==Vn;);return nh(a,In),LC(Mr),In}function x(Nn){var _r,mn,sr=r_(Nn,le,pe);if(!Ar(le)||!(Nn?0<sr:sr<le.nodeValue.length)){if(le.parentNode===be&&j&&!Nn||Nn&&co(le)&&le===be.firstChild)return 1;if(Mk(le,"TABLE")||Mk(le,"HR"))return j&&!Nn||!j&&Nn;var In=new Ks(le,be);for(Ar(le)&&(Nn&&0===sr?In.prev():Nn||sr!==le.nodeValue.length||In.next());_r=In.current();){if(co(_r)){if(!_r.getAttribute("data-mce-bogus")&&(mn=_r.nodeName.toLowerCase(),K[mn]&&"br"!==mn))return}else if(Ar(_r)&&!U(_r.nodeValue))return;Nn?In.prev():In.next()}return 1}}function C(){L=/^(H[1-6]|PRE|FIGURE)$/.test(Le)&&"HGROUP"!==Je?g(je):g(),a.getParam("end_container_on_empty_block",!1)&&oD(G,Ae)&&G.isEmpty(be)?L=G.split(Ae,be):G.insertAfter(L,be),tb(a,L)}var I,L,z,j,G=a.dom,te=a.schema,K=te.getNonEmptyElements(),ie=a.selection.getRng();Vf(G,ie).each(function(Nn){ie.setStart(Nn.startContainer,Nn.startOffset),ie.setEnd(Nn.endContainer,Nn.endOffset)});var le=ie.startContainer,pe=ie.startOffset,je=Za(a),me=!(!f||!f.shiftKey),xe=!(!f||!f.ctrlKey);co(le)&&le.hasChildNodes()&&(j=pe>le.childNodes.length-1,le=le.childNodes[Math.min(pe,le.childNodes.length-1)]||le,pe=j&&Ar(le)?le.nodeValue.length:0);var be,Ae,Le,Je,pt,Be,et,At,Nt,Kt,Yt,dt,vt,kt,Wt,bn,Xn,vn,Gn,kn,Vn=NC(G,le);Vn&&((je&&!me||!je&&me)&&(le=function(Nn,_r,mn,sr){var In,Mr,kr,Uo,tt,xt,tn=je||"P",Cn=Nn.dom,cn=NC(Cn,mn),Jn=Cn.getParent(mn,Cn.isBlock);if(!Jn||!oD(Cn,Jn)){if(tt=((Jn=Jn||cn)===Nn.getBody()||(xt=Jn)&&/^(TD|TH|CAPTION)$/.test(xt.nodeName)?Jn:Jn.parentNode).nodeName.toLowerCase(),!Jn.hasChildNodes())return nh(Nn,In=Cn.create(tn)),Jn.appendChild(In),_r.setStart(In,0),_r.setEnd(In,0),In;for(kr=mn;kr.parentNode!==Jn;)kr=kr.parentNode;for(;kr&&!Cn.isBlock(kr);)kr=(Mr=kr).previousSibling;if(Mr&&Nn.schema.isValidChild(tt,tn.toLowerCase())){for(nh(Nn,In=Cn.create(tn)),Mr.parentNode.insertBefore(In,Mr),kr=Mr;kr&&!Cn.isBlock(kr);)Uo=kr.nextSibling,In.appendChild(kr),kr=Uo;_r.setStart(mn,sr),_r.setEnd(mn,sr)}}return mn}(a,ie,le,pe)),Ae=(be=G.getParent(le,G.isBlock))?G.getParent(be.parentNode,G.isBlock):null,Le=be?be.nodeName.toUpperCase():"","LI"!==(Je=Ae?Ae.nodeName.toUpperCase():"")||xe||(Ae=(be=Ae).parentNode,Le=Je),/^(LI|DT|DD)$/.test(Le)&&G.isEmpty(be)?(At=g,Nt=Ae,Kt=be,Yt=je,Gn=(et=a).dom,kn=et.selection.getRng(),Nt!==et.getBody()&&(vt=(Yt=n_(dt=Nt)&&n_(dt.parentNode)?"LI":Yt)?At(Yt):Gn.create("BR"),pp(Nt,Kt,!0)&&pp(Nt,Kt,!1)?th(Nt,"LI")?(kt=mm(Nt),Gn.insertAfter(vt,kt),(null===(vn=(Xn=Nt).parentNode)||void 0===vn?void 0:vn.firstChild)===Xn?Gn.remove(kt):Gn.remove(Nt)):Gn.replace(vt,Nt):(pp(Nt,Kt,!0)?th(Nt,"LI")?(Gn.insertAfter(vt,mm(Nt)),vt.appendChild(Gn.doc.createTextNode(" ")),vt.appendChild(Nt)):Nt.parentNode.insertBefore(vt,Nt):pp(Nt,Kt,!1)?Gn.insertAfter(vt,mm(Nt)):(Nt=mm(Nt),(Wt=kn.cloneRange()).setStartAfter(Kt),Wt.setEndAfter(Nt),bn=Wt.extractContents(),"LI"===Yt&&bn.firstChild&&"LI"===bn.firstChild.nodeName?(vt=bn.firstChild,Gn.insertAfter(bn,Nt)):(Gn.insertAfter(bn,Nt),Gn.insertAfter(vt,Nt))),Gn.remove(Kt)),tb(et,vt))):je&&be===a.getBody()||(je=je||"P",sl(be)?(L=y(be),G.isEmpty(be)&&LC(be),nh(a,L),tb(a,L)):x()?C():x(!0)?(L=be.parentNode.insertBefore(g(),be),tb(a,Mk(be,"HR")?L:be)):((Be=(pt=ie).cloneRange()).setStart(pt.startContainer,r_(!0,pt.startContainer,pt.startOffset)),Be.setEnd(pt.endContainer,r_(!1,pt.endContainer,pt.endOffset)),(I=Be.cloneRange()).setEndAfter(be),z=I.extractContents(),Pn(i0(It.fromDom(z),Qa),function(Nn){var _r=Nn.dom;_r.nodeValue=on(_r.nodeValue)}),function(Nn){for(;Ar(Nn)&&(Nn.nodeValue=Nn.nodeValue.replace(/^[\r\n]+/,"")),Nn=Nn.firstChild;);}(z),L=z.firstChild,G.insertAfter(z,be),function(Nn,_r){var mn,sr,In=L,Mr=[];if(In){for(;In=In.firstChild;){if(Nn.isBlock(In))return;co(In)&&!_r[In.nodeName.toLowerCase()]&&Mr.push(In)}for(mn=Mr.length;mn--;)(!(In=Mr[mn]).hasChildNodes()||In.firstChild===In.lastChild&&""===In.firstChild.nodeValue||(sr=In)&&"A"===sr.nodeName&&Nn.isEmpty(sr))&&Nn.remove(In)}}(G,K),function(Nn,_r){_r.normalize();var mn=_r.lastChild;mn&&!/^(left|right)$/gi.test(Nn.getStyle(mn,"float",!0))||Nn.add(_r,"br")}(G,be),G.isEmpty(be)&&LC(be),L.normalize(),G.isEmpty(L)?(G.remove(L),C()):(nh(a,L),tb(a,L))),G.setAttrib(L,"id",""),a.fire("NewBlock",{newBlock:L})))}(a,f)},_n)}function aD(a){return a.stopImmediatePropagation()}function sD(a){return a.keyCode===Jr.PAGE_UP||a.keyCode===Jr.PAGE_DOWN}function Ak(a,f,g){g&&!a.get()?f.on("NodeChange",aD,!0):!g&&a.get()&&f.off("NodeChange",aD),a.set(g)}function Vh(a,f){var g=f.container(),x=f.offset();return Ar(g)?(g.insertData(x,a),$.some(en(g,x+a.length))):Ih(f).map(function(C){var I=It.fromText(a);return(f.isAtEnd()?Au:Du)(C,I),en(I.dom,a.length)})}function uD(a){var f,g,x=en.fromRangeStart(a.selection.getRng()),C=It.fromDom(a.getBody());if(a.selection.isCollapsed()){var I=qe(xv,a),L=en.fromRangeStart(a.selection.getRng());return Nh(I,a.getBody(),L).bind((g=C,function(z){return z.fold(function(j){return gs(g.dom,en.before(j))},function(j){return Vi(j)},function(j){return qd(j)},function(j){return ps(g.dom,en.after(j))})})).bind(function zC(a,f){return function(g){return I=a,(!$d(L=g)&&(gs((x=I).dom,C=L).isNone()||ps(x.dom,C).isNone()||vv(x,C)||Rs(x,C)||gv(x,C)||up(x,C)||Ps(I,L)||Hf(I,L))?Ic:Kw)(f);var x,C,I,L}}(C,x)).exists((f=a,function(z){return f.selection.setRng(z.toRange()),f.nodeChanged(),!0}))}return!1}(Cd=dm=dm||{})[Cd.Up=-1]="Up",Cd[Cd.Down=1]="Down";var w1=qe(Z0,dm.Up,kh,Eg),lD=qe(Z0,dm.Down,Eg,kh),Zw=oo,o_=sc,S1=function(a,f){var g=a.selection.getRng(),x=a.getBody();if(f){var C=en.fromRangeEnd(g),I=Bh(x,C);return Ht(I.positions)}return C=en.fromRangeStart(g),sn((I=Fy(x,C)).positions)},C1=qe(Rw,!0),M1=qe(Rw,!1),FC=function(a){return rr(mt(a.selection.getSelectedBlocks(),It.fromDom),function(f){return!J0(f)&&!cu(f).exists(J0)&&fh(f,function(g){return Yu(g.dom)||oo(g.dom)}).exists(function(g){return Yu(g.dom)})})},VC=oo,i_=qe(b1,function(a){return a.bottom},function(a,f){return a.y<f}),cD=qe(b1,function(a){return a.top},function(a,f){return a.y>f}),HC=qe(Ck,Fy),Ik=qe(Ck,Bh),fD=function(a,f){return g=en.after(f),!!os(g.getNode())||ps(a,en.after(f)).map(function(x){return os(x.getNode())}).getOr(!1);var g},bf=hu([{br:[]},{block:[]},{none:[]}]),Ok=wa().browser,WC=wa(),Ic=qe(Vh,xa),Kw=qe(Vh," "),GC=(UC.prototype.nodeChanged=function(a){var f,g,x,C=this.editor.selection;this.editor.initialized&&C&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(x=this.editor.getBody(),(f=C.getStart(!0)||x).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(f,x)||(f=x),g=[],this.editor.dom.getParent(f,function(I){return I===x||void g.push(I)}),(a=a||{}).element=f,a.parents=g,this.editor.fire("NodeChange",a))},UC.prototype.isSameElementPath=function(a){var f,g=this.editor.$(a).parentsUntil(this.editor.getBody()).add(a);if(g.length===this.lastPath.length){for(f=g.length;0<=f&&g[f]===this.lastPath[f];f--);if(-1===f)return this.lastPath=g,!0}return this.lastPath=g,!1},UC);function UC(a){var f;this.lastPath=[],this.editor=a;var g=this;"onselectionchange"in a.getDoc()||a.on("NodeChange click mouseup keyup focus",function(x){var C=a.selection.getRng(),I={startContainer:C.startContainer,startOffset:C.startOffset,endContainer:C.endContainer,endOffset:C.endOffset};"nodechange"!==x.type&&aa(I,f)||a.fire("SelectionChange"),f=I}),a.on("contextmenu",function(){a.fire("SelectionChange")}),a.on("SelectionChange",function(){var x=a.selection.getStart(!0);!x||!Fr.range&&a.selection.isCollapsed()||y0(a)&&!g.isSameElementPath(x)&&a.dom.isChildOf(x,a.getBody())&&a.nodeChanged({selectionChange:!0})}),a.on("mouseup",function(x){!x.isDefaultPrevented()&&y0(a)&&("IMG"===a.selection.getNode().nodeName?St.setEditorTimeout(a,function(){a.nodeChanged()}):a.nodeChanged())})}function $w(a){return co(a)&&Ki(It.fromDom(a))}function ib(a){var f=a.getBoundingClientRect(),g=a.ownerDocument,x=g.documentElement,C=g.defaultView;return{top:f.top+C.pageYOffset-x.clientTop,left:f.left+C.pageXOffset-x.clientLeft}}function ab(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function a_(a,f){return jg(a.getBody(),f)}function Jw(a){function f(Be){return Be!==xe&&(kd(Be)||Cl(Be))&&pe.isChildOf(Be,xe)}function g(Be){return mv(Be)||ky(Be)||k0(Be)||lp(Be)}function x(Be){Be&&le.setRng(Be)}function C(Be,je,et,At){return void 0===At&&(At=!0),a.fire("ShowCaret",{target:je,direction:Be,before:et}).isDefaultPrevented()?null:(At&&le.scrollIntoView(je,-1===Be),be.show(et,je))}function I(Be){return Nr(Be)||dh(Be)||Ap(Be)}function L(Be){return I(Be.startContainer)||I(Be.endContainer)}function z(Be,je){if(!Be)return null;if(Be.collapsed){if(!L(Be)){var et=je?1:-1,At=jp(et,xe,Be),Nt=At.getNode(!je);if(Fm(Nt))return C(et,Nt,!!je&&!At.isAtEnd(),!1);var Kt=At.getNode(je);if(Fm(Kt))return C(et,Kt,!je&&!At.isAtEnd(),!1)}return null}var Yt=Be.startContainer,dt=Be.startOffset,vt=Be.endOffset;if(3===Yt.nodeType&&0===dt&&kd(Yt.parentNode)&&(dt=pe.nodeIndex(Yt=Yt.parentNode),Yt=Yt.parentNode),1!==Yt.nodeType)return null;if(vt===dt+1&&Yt===Be.endContainer){var kt=Yt.childNodes[dt];if(f(kt))return function(Wt){var bn=Wt.cloneNode(!0),Xn=a.fire("ObjectSelected",{target:Wt,targetClone:bn});if(Xn.isDefaultPrevented())return null;var vn=function(kn,Vn,Nn){var _r=a.$,mn=Tf(It.fromDom(a.getBody()),"#"+Ae).fold(function(){return _r([])},function(Mr){return _r([Mr.dom])});0===mn.length&&(mn=_r('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",Ae)).appendTo(a.getBody());var sr=pe.createRng();Vn===Nn&&Fr.ie?(mn.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(Vn),sr.setStartAfter(mn[0].firstChild.firstChild),sr.setEndAfter(Vn)):(mn.empty().append(xa).append(Vn).append(xa),sr.setStart(mn[0].firstChild,1),sr.setEnd(mn[0].lastChild,0)),mn.css({top:pe.getPos(kn,a.getBody()).y}),mn[0].focus();var In=le.getSel();return In.removeAllRanges(),In.addRange(sr),sr}(Wt,Xn.targetClone,bn),Gn=It.fromDom(Wt);return Pn(xc(It.fromDom(a.getBody()),"*[data-mce-selected]"),function(kn){gn(Gn,kn)||rd(kn,Le)}),pe.getAttrib(Wt,Le)||Wt.setAttribute(Le,"1"),G=Wt,pt(),vn}(kt)}return null}function j(){G&&G.removeAttribute(Le),Tf(It.fromDom(a.getBody()),"#"+Ae).each(Is),G=null}var G,te,K,ie,le=a.selection,pe=a.dom,me=pe.isBlock,xe=a.getBody(),be=function F_(a,f,g,x){function C(){(function(){for(var te=xc(It.fromDom(f),"*[contentEditable=false],video,audio,embed,object"),K=0;K<te.length;K++){var ie,le=te[K].dom,pe=le.previousSibling;Ap(pe)&&(1===(ie=pe.data).length?pe.parentNode.removeChild(pe):pe.deleteData(ie.length-1,1)),dh(pe=le.nextSibling)&&(1===(ie=pe.data).length?pe.parentNode.removeChild(pe):pe.deleteData(0,1))}})(),L&&(Um(L),L=null),z.on(function(te){ko(te.caret).remove(),z.clear()}),I&&(St.clearInterval(I),I=void 0)}var I,L,z=zd(),j=Za(a),G=0<j.length?j:"p";return{show:function(te,K){var ie;if(C(),H_(K))return null;if(!g(K))return L=function(me,xe){var be=me.ownerDocument.createTextNode(ua),Ae=me.parentNode;if(xe){if(va(Le=me.previousSibling)){if(Nr(Le))return Le;if(Ap(Le))return Le.splitText(Le.data.length-1)}Ae.insertBefore(be,me)}else{var Le=me.nextSibling;if(va(Le)){if(Nr(Le))return Le;if(dh(Le))return Le.splitText(1),Le}me.nextSibling?Ae.insertBefore(be,me.nextSibling):Ae.appendChild(be)}return be}(K,te),ie=K.ownerDocument.createRange(),Yp(L.nextSibling)?(ie.setStart(L,0),ie.setEnd(L,0)):(ie.setStart(L,1),ie.setEnd(L,1)),ie;L=function(me,xe,be){var Ae,Le=xe.ownerDocument.createElement(me);Le.setAttribute("data-mce-caret",be?"before":"after"),Le.setAttribute("data-mce-bogus","all"),Le.appendChild(((Ae=document.createElement("br")).setAttribute("data-mce-bogus","1"),Ae));var Je=xe.parentNode;return be?Je.insertBefore(Le,xe):xe.nextSibling?Je.insertBefore(Le,xe.nextSibling):Je.appendChild(Le),Le}(G,K,te);var le=vu(f,K,te);ko(L).css("top",le.top);var pe=ko('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(hr({},le)).appendTo(f)[0];return z.set({caret:pe,element:K,before:te}),te&&ko(pe).addClass("mce-visual-caret-before"),I=St.setInterval(function(){x()?ko("div.mce-visual-caret",f).toggleClass("mce-visual-caret-hidden"):ko("div.mce-visual-caret",f).addClass("mce-visual-caret-hidden")},500),(ie=K.ownerDocument.createRange()).setStart(L,0),ie.setEnd(L,0),ie},hide:C,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){z.on(function(te){var K=vu(f,te.element,te.before);ko(te.caret).css(hr({},K))})},destroy:function(){return St.clearInterval(I)}}}(a,xe,me,function(){return pl(a)}),Ae="sel-"+pe.uniqueId(),Le="data-mce-selected",Je=le.getRng,pt=function(){be.hide()};return Fr.ceFalse&&!sg(a)&&(a.on("mouseup",function(Be){var je=Je();je.collapsed&&Py(a,Be.clientX,Be.clientY)&&Ux(a,je,!1).each(x)}),a.on("click",function(Be){var je=a_(a,Be.target);je&&(kd(je)&&(Be.preventDefault(),a.focus()),KC(je)&&pe.isChildOf(je,le.getNode())&&j())}),a.on("blur NewBlock",j),a.on("ResizeWindow FullscreenStateChanged",be.reposition),a.on("tap",function(Be){var je=Be.target,et=a_(a,je);kd(et)?(Be.preventDefault(),By(a,et).each(z)):f(je)&&By(a,je).each(z)},!0),a.on("mousedown",function(Be){var je,et,At,Nt,Kt,Yt,dt,vt=Be.target;vt!==xe&&"HTML"!==vt.nodeName&&!pe.isChildOf(vt,xe)||!1===Py(a,Be.clientX,Be.clientY)||((je=a_(a,vt))?kd(je)?(Be.preventDefault(),By(a,je).each(z)):(j(),KC(je)&&Be.shiftKey||ai(Be.clientX,Be.clientY,le.getRng())||(pt(),le.placeCaretAt(Be.clientX,Be.clientY))):f(vt)?By(a,vt).each(z):!1===Fm(vt)&&(j(),pt(),(et=function nD(a,f,g){function x(G){return!nf(G.node)&&!Cl(G.node)}var C,I,L,z=Zx(rr(Fo(a.getElementsByTagName("*")),Fm));return(L=AC(rr(z,qe(kv,g)),f,x))&&(L=AC(function(G,te,K){function ie(pe,me){var xe=rr(Zx([me]),function(be){return!pe(be,te)});return le=le.concat(xe),0===xe.length}void 0===K&&(K=!0);var le=[];return le.push(te),nu(dm.Up,G,qe(ie,kh),te.node,K),nu(dm.Down,G,qe(ie,Eg),te.node,K),le}(a,L,x(L)),f,x))&&Fm(L.node)?{node:(C=L).node,before:Ew(C,I=f)<Kx(C,I)}:null}(xe,Be.clientX,Be.clientY))&&(Nt=et.node,Yt=pe.getParent(At=vt,me),dt=pe.getParent(Nt,me),!cr(Yt)&&(At!==dt&&pe.isChildOf(Yt,dt)&&!1===kd(a_(a,Yt))||!pe.isChildOf(dt,Yt)&&(Kt=dt,pe.getParent(Yt,me)!==pe.getParent(Kt,me))&&function(kt){var Wt=kt.firstChild;if(!cr(Wt)){var bn=en.before(Wt);if(os(bn.getNode())&&1===kt.childNodes.length)return!g(bn);var Xn=Sc(kt).next(bn);return Xn&&!g(Xn)}}(Yt))||(Be.preventDefault(),x(C(1,et.node,et.before,!1)),a.getBody().focus()))))}),a.on("keypress",function(Be){Jr.modifierPressed(Be)||kd(le.getNode())&&Be.preventDefault()}),a.on("GetSelectionRange",function(Be){var je=Be.range;G&&(G.parentNode?((je=je.cloneRange()).selectNode(G),Be.range=je):G=null)}),a.on("SetSelectionRange",function(Be){var je,et,At,Nt,Kt,Yt,dt;Be.range=(je=Be.range,et=a.schema.getShortEndedElements(),At=pe.createRng(),Kt=je.startOffset,Yt=je.endContainer,dt=je.endOffset,po(et,(Nt=je.startContainer).nodeName.toLowerCase())?0===Kt?At.setStartBefore(Nt):At.setStartAfter(Nt):At.setStart(Nt,Kt),po(et,Yt.nodeName.toLowerCase())?0===dt?At.setEndBefore(Yt):At.setEndAfter(Yt):At.setEnd(Yt,dt),At);var vt=z(Be.range,Be.forward);vt&&(Be.range=vt)}),a.on("AfterSetSelectionRange",function(Be){var je=Be.range,et=je.startContainer.parentNode;L(je)||"mcepastebin"===et.id||pt(),pe.hasClass(et,"mce-offscreen-selection")||j()}),a.on("copy",function(Be){var je,et,At=Be.clipboardData;Be.isDefaultPrevented()||!Be.clipboardData||Fr.ie||(je=(et=pe.get(Ae))&&et.getElementsByTagName("*")[0])&&(Be.preventDefault(),At.clearData(),At.setData("text/html",je.outerHTML),At.setData("text/plain",je.outerText||je.innerText))}),function Ek(a){var f,g;function x(L){var z;L.isDefaultPrevented()||(z=L.dataTransfer)&&(nn(z.types,"Files")||0<z.files.length)&&(L.preventDefault(),"drop"===L.type&&u1(g,"Dropped file type is not supported"))}function C(L){Vr(g,L.target)&&x(L)}function I(){var L=ba.DOM,z=g.dom,j=document,G=g.inline?g.getBody():g.getDoc(),te=["drop","dragover"];Pn(te,function(K){L.bind(j,K,C),z.bind(G,K,x)}),g.on("remove",function(){Pn(te,function(K){L.unbind(j,K,C),z.unbind(G,K,x)})})}(function dD(a){var x,C,I,L,z,j,G=zd(),te=ba.DOM,K=document,ie=function X2(a,f){var g=St.throttle(function(x,C){f._selectionOverrides.hideFakeCaret(),f.selection.placeCaretAt(x,C)},0);return f.on("remove",g.stop),function(x){return a.on(function(C){var I,L,z,j,G,te,K,ie,le,pe,me,xe,be,Ae,Le,Je,pt,Be,je,et,At=Math.max(Math.abs(x.screenX-C.screenX),Math.abs(x.screenY-C.screenY));if(!C.dragging&&10<At){if(f.fire("dragstart",{target:C.element}).isDefaultPrevented())return;C.dragging=!0,f.focus()}C.dragging&&(xe=C,I={pageX:(Le=x,Je=(Ae=f).inline?ib(Ae.getBody()):{left:0,top:0},et=(je=Ae).getBody(),pt=je.inline?{left:et.scrollLeft,top:et.scrollTop}:{left:0,top:0},(be={pageX:(Be=function(Nt,Kt){if(Kt.target.ownerDocument===Nt.getDoc())return{left:Kt.pageX,top:Kt.pageY};var Yt,dt,vt,bn=ib(Nt.getContentAreaContainer()),Xn=(dt=(Yt=Nt).getBody(),vt=Yt.getDoc().documentElement,Yt.inline?{left:dt.scrollLeft,top:dt.scrollTop}:{left:dt.scrollLeft||vt.scrollLeft,top:dt.scrollTop||vt.scrollTop});return{left:Kt.pageX-bn.left+Xn.left,top:Kt.pageY-bn.top+Xn.top}}(Ae,Le)).left-Je.left+pt.left,pageY:Be.top-Je.top+pt.top}).pageX-xe.relX),pageY:be.pageY+5},pe=C.ghost,me=f.getBody(),pe.parentNode!==me&&me.appendChild(pe),j=C.width,G=C.height,te=C.maxX,K=C.maxY,le=ie=0,(L=C.ghost).style.left=(z=I).pageX+"px",L.style.top=z.pageY+"px",K<z.pageY+G&&(le=z.pageY+G-K),L.style.width=j-(ie=te<z.pageX+j?z.pageX+j-te:ie)+"px",L.style.height=G-le+"px",g(x.clientX,x.clientY))})}}(z=G,j=a),le=(x=I=G,function(){x.on(function(pe){pe.dragging&&C.fire("dragend")}),vD(x)});(C=L=a).on("mousedown",function f(pe){var me,xe,be,Ae,Le,Je;0===pe.button&&(me=yr(j.dom.getParents(pe.target),function(){for(var pt=[],Be=0;Be<arguments.length;Be++)pt[Be]=arguments[Be];return function(je){for(var et=0;et<pt.length;et++)if(pt[et](je))return!0;return!1}}(tS,Fk)).getOr(null),Le=j.getBody(),tS(Je=me)&&Je!==Le&&(xe=j.dom.getPos(me),be=j.getBody(),Ae=j.getDoc().documentElement,z.set({element:me,dragging:!1,screenX:pe.screenX,screenY:pe.screenY,maxX:(j.inline?be.scrollWidth:Ae.offsetWidth)-2,maxY:(j.inline?be.scrollHeight:Ae.offsetHeight)-2,relX:pe.pageX-xe.x,relY:pe.pageY-xe.y,width:me.offsetWidth,height:me.offsetHeight,ghost:function(pt,Be,je){var et=j.dom,At=pt.cloneNode(!0);et.setStyles(At,{width:Be,height:je}),et.setAttrib(At,"data-mce-selected",null);var Nt=et.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return et.setStyles(Nt,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:Be,height:je}),et.setStyles(At,{margin:0,boxSizing:"border-box"}),Nt.appendChild(At),Nt}(me,me.offsetWidth,me.offsetHeight)})))}),a.on("mousemove",ie),a.on("mouseup",function g(pe){I.on(function(me){var xe,be,Ae,Le,Je,pt;me.dragging&&((Le=3===(pt=(Ae=L).selection.getSel().getRangeAt(0).startContainer).nodeType?pt.parentNode:pt)===(Je=me.element)||Ae.dom.isChildOf(Le,Je)||tS(Le)||((be=me.element.cloneNode(!0)).removeAttribute("data-mce-selected"),xe=be,L.fire("drop",{clientX:pe.clientX,clientY:pe.clientY}).isDefaultPrevented()||L.undoManager.transact(function(){ab(me.element),L.insertContent(L.dom.getOuterHTML(xe)),L._selectionOverrides.hideFakeCaret()})),L.fire("dragend"))}),vD(I)}),te.bind(K,"mousemove",ie),te.bind(K,"mouseup",le),a.on("remove",function(){te.unbind(K,"mousemove",ie),te.unbind(K,"mouseup",le)}),a.on("keydown",function(pe){pe.keyCode===Jr.ESC&&le()})})(a),(f=a).on("drop",function(L){var z=void 0!==L.clientX?f.getDoc().elementFromPoint(L.clientX,L.clientY):null;!tS(z)&&"false"!==f.dom.getContentEditableParent(z)||L.preventDefault()}),a.getParam("block_unsupported_drop",!0,"boolean")&&(g=a).on("init",function(){St.setEditorTimeout(g,I,0)})}(a),K=K1(function(){var Be,je;te.removed||!te.getBody().contains(document.activeElement)||(Be=te.selection.getRng()).collapsed&&(je=sm(te,Be,!1),te.selection.setRng(je))},0),(te=a).on("focus",function(){K.throttle()}),te.on("blur",function(){K.cancel()}),(ie=a).on("init",function(){ie.on("focusin",function(Be){var je,et,At=Be.target;Cl(At)&&(je=jg(ie.getBody(),At),et=oo(je)?je:At,ie.selection.getNode()!==et&&By(ie,et).each(function(Nt){return ie.selection.setRng(Nt)}))})})),{showCaret:C,showBlockCaretContainer:function(Be){Be.hasAttribute("data-mce-caret")&&(y(Be),x(Je()),le.scrollIntoView(Be))},hideFakeCaret:pt,destroy:function(){be.destroy(),G=null}}}function jC(a){return zo(a,function(f){return!1===uo(f)})}function Pk(a){var f=a.settings;return jC({block_elements:f.block_elements,boolean_attributes:f.boolean_attributes,custom_elements:f.custom_elements,extended_valid_elements:f.extended_valid_elements,invalid_elements:f.invalid_elements,invalid_styles:f.invalid_styles,move_caret_before_on_enter_elements:f.move_caret_before_on_enter_elements,non_empty_elements:f.non_empty_elements,schema:f.schema,self_closing_elements:f.self_closing_elements,short_ended_elements:f.short_ended_elements,special:f.special,text_block_elements:f.text_block_elements,text_inline_elements:f.text_inline_elements,valid_children:f.valid_children,valid_classes:f.valid_classes,valid_elements:f.valid_elements,valid_styles:f.valid_styles,verify_html:f.verify_html,whitespace_elements:f.whitespace_elements,padd_empty_block_inline_children:f.format_empty_lines})}function ih(a){var f=a.settings,g=a.editorUpload.blobCache;return jC({allow_conditional_comments:f.allow_conditional_comments,allow_html_data_urls:f.allow_html_data_urls,allow_svg_data_urls:f.allow_svg_data_urls,allow_html_in_named_anchor:f.allow_html_in_named_anchor,allow_script_urls:f.allow_script_urls,allow_unsafe_link_target:f.allow_unsafe_link_target,convert_fonts_to_spans:f.convert_fonts_to_spans,fix_list_elements:f.fix_list_elements,font_size_legacy_values:f.font_size_legacy_values,forced_root_block:f.forced_root_block,forced_root_block_attrs:f.forced_root_block_attrs,padd_empty_with_br:f.padd_empty_with_br,preserve_cdata:f.preserve_cdata,remove_trailing_brs:f.remove_trailing_brs,inline_styles:f.inline_styles,root_name:a.inline?a.getElement().nodeName.toLowerCase():void 0,validate:!0,blob_cache:g,document:a.getDoc(),images_dataimg_filter:f.images_dataimg_filter})}function Qw(a){return(a.inline?a.ui:a.dom).styleSheetLoader}function YC(a){function f(){C.unloadAll(L),a.inline||a.ui.styleSheetLoader.unloadAll(I)}function g(){a.removed?f():a.on("remove",f)}var x,C=Qw(a),I=Ib(a),L=a.contentCSS;0<a.contentStyles.length&&(x="",Qt.each(a.contentStyles,function(be){x+=be+"\r\n"}),a.dom.addStyle(x));var z,j,G,te,K,ie,le,pe,me,xe=Pi.all((z=a,j=L,G=I,te=[new Pi(function(be,Ae){return Qw(z).loadAll(j,be,Ae)})],z.inline?te:te.concat([new Pi(function(be,Ae){return z.ui.styleSheetLoader.loadAll(G,be,Ae)})]))).then(g).catch(g);return a.settings.content_style&&(ie=(K=a).settings.content_style,le=It.fromDom(K.getBody()),pe=zs(Aa(le)),Bl(me=It.fromTag("style"),"type","text/css"),Fs(me,It.fromText(ie)),Fs(pe,me),K.on("remove",function(){Is(me)})),xe}function eS(a){var f;!0!==a.removed&&(sg(f=a)||f.load({initial:!0,format:"html"}),f.startContent=f.getContent({format:"raw"}),function u_(a){var f,g,x;a.bindPendingEventDelegates(),a.initialized=!0,a.fire("Init"),a.focus(!0),x=(g=a).dom.getRoot(),g.inline||y0(g)&&g.selection.getStart(!0)!==x||Vi(x).each(function(C){var I,L,z,j,G=C.getNode(),te=nf(G)?Vi(G).getOr(C):C;Fr.browser.isIE()?(I=g,L=te.toRange(),z=It.fromDom(I.getBody()),j=(ti(I)?$.from(L):$.none()).map(px).filter(Hb(z)),I.bookmark=j.isSome()?j:I.bookmark):g.selection.setRng(te.toRange())}),a.nodeChanged({initial:!0}),a.execCallback("init_instance_callback",a),(f=a).settings.auto_focus&&St.setEditorTimeout(f,function(){var C=!0===f.settings.auto_focus?f:f.editorManager.get(f.settings.auto_focus);C.destroyed||C.focus()},100)}(a))}function qC(a,f){var g=a.settings,x=a.getElement(),C=a.getDoc();g.inline||(a.getElement().style.visibility=a.orgVisibility),f||a.inline||(C.open(),C.write(a.iframeHTML),C.close()),a.inline&&(Vk.addClass(x,"mce-content-body"),a.contentDocument=C=document,a.contentWindow=window,a.bodyElement=x,a.contentAreaContainer=x);var I,L,z,j,G,te,K,ie,le,pe,me,xe,be=a.getBody();be.disabled=!0,a.readonly=!!g.readonly,a.readonly||(a.inline&&"static"===Vk.getStyle(be,"position",!0)&&(be.style.position="relative"),be.contentEditable=a.getParam("content_editable_state",!0)),be.disabled=!1,a.editorUpload=function YT(a){function f(Ae){return function(Le){return a.selection?Ae(Le):[]}}function g(Ae,Le,Je){for(var pt=0;-1!==(pt=Ae.indexOf(Le,pt))&&(Ae=Ae.substring(0,pt)+Je+Ae.substr(pt+Le.length),pt+=Je.length-Le.length+1),-1!==pt;);return Ae}function x(Ae,Le,Je){return Ae=g(Ae,'src="'+Le+'"','src="'+Je+'"'+(Je===Fr.transparentSrc?' data-mce-placeholder="1"':"")),g(Ae,'data-mce-src="'+Le+'"','data-mce-src="'+Je+'"')}function C(Ae,Le){Pn(a.undoManager.data,function(Je){"fragmented"===Je.type?Je.fragments=mt(Je.fragments,function(pt){return x(pt,Ae,Le)}):Je.content=x(Je.content,Ae,Le)})}function I(Ae){return G=G||Jd(a,pe),be().then(f(function(Le){var Je=mt(Le,function(pt){return pt.blobInfo});return G.upload(Je,gC(a)).then(f(function(pt){var Be=[],je=mt(pt,function(et,At){var Kt,Yt,dt,vt=Le[At].blobInfo,kt=Le[At].image;return et.status&&a.getParam("images_replace_blob_uris",!0,"boolean")?(le.removeByUri(kt.src),sg(a)||(Kt=kt,dt=a.convertURL(Yt=et.url,"src"),C(Kt.src,Yt),a.$(Kt).attr({src:a.getParam("images_reuse_filename",!1,"boolean")?Yt+(-1===Yt.indexOf("?")?"?":"&")+(new Date).getTime():Yt,"data-mce-src":dt}))):et.error&&(et.error.options.remove&&(C(kt.getAttribute("src"),Fr.transparentSrc),Be.push(kt)),u1(a,hd.translate(["Failed to upload image: {0}",et.error.message]))),{element:kt,status:et.status,uploadUri:et.url,blobInfo:vt}});return 0<je.length&&xe.fireIfChanged(),0<Be.length&&(sg(a)?console.error("Removing images on failed uploads is currently unsupported for RTC"):a.undoManager.transact(function(){Pn(Be,function(et){a.dom.remove(et),le.removeByUri(et.src)})})),Ae&&Ae(je),je}))}))}function L(Ae){if(Ng(a))return I(Ae)}function z(Ae){return!1!==gr(me,function(Le){return Le(Ae)})&&(0!==Ae.getAttribute("src").indexOf("data:")||a.getParam("images_dataimg_filter",Jo,"function")(Ae))}function j(Ae){return Ae.replace(/src="(blob:[^"]+)"/g,function(Le,Je){var pt=pe.getResultUri(Je);if(pt)return'src="'+pt+'"';var Be=(Be=le.getByUri(Je))||dr(a.editorManager.get(),function(je,et){return je||et.editorUpload&&et.editorUpload.blobCache.getByUri(Je)},null);return Be?'src="data:'+Be.blob().type+";base64,"+Be.base64()+'"':Le})}var G,te,K,ie,le=function pC(){function a(C){return yr(x,C).getOrUndefined()}function f(C){if(!C.blob||!C.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var I=C.id||hC("blobid"),L=C.name||I,z=C.blob;return{id:Bn(I),name:Bn(L),filename:Bn(C.filename||L+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[z.type.toLowerCase()]||"dat")),blob:Bn(z),base64:Bn(C.base64),blobUri:Bn(C.blobUri||URL.createObjectURL(z)),uri:Bn(C.uri)}}function g(C){return a(function(I){return I.id()===C})}var x=[];return{create:function(C,I,L,z,j){if(wo(C))return f({id:C,name:z,filename:j,blob:I,base64:L});if(Va(C))return f(C);throw new Error("Unknown input type")},add:function(C){g(C.id())||x.push(C)},get:g,getByUri:function(C){return a(function(I){return I.blobUri()===C})},getByData:function(C,I){return a(function(L){return L.base64()===C&&L.blob().type===I})},findFirst:a,removeByUri:function(C){x=rr(x,function(I){return I.blobUri()!==C||void URL.revokeObjectURL(I.blobUri())})},destroy:function(){Pn(x,function(C){URL.revokeObjectURL(C.blobUri())}),x=[]}}}(),pe=Fx(),me=[],xe=(ie=Os(null),(K=a).on("change AddUndo",function(Ae){ie.set(hr({},Ae.level))}),{fireIfChanged:function(){var Ae=K.undoManager.data;Ht(Ae).filter(function(Le){return!Ax(ie.get(),Le)}).each(function(Le){K.setDirty(!0),K.fire("change",{level:Le,lastLevel:ku(Ae,Ae.length-2).getOrNull()})})}}),be=function(){return(te=te||function t1(a,f){var g={};return{findAll:function(x,C){C=C||Jo;var I=mt(rr(x?Fo(x.getElementsByTagName("img")):[],function(L){var z=L.src;return Fr.fileApi&&!L.hasAttribute("data-mce-bogus")&&!L.hasAttribute("data-mce-placeholder")&&z&&z!==Fr.transparentSrc&&(0===z.indexOf("blob:")?!a.isUploaded(z)&&C(L):0===z.indexOf("data:")&&C(L))}),function(L){if(void 0!==g[L.src])return new Pi(function(j){g[L.src].then(function(G){return"string"==typeof G?G:void j({image:L,blobInfo:G.blobInfo})})});var z=new Pi(function(j,G){var te,K,ie,le,pe,me,be,Ae;te=f,ie=j,le=G,0!==(K=L).src.indexOf("blob:")?(me=(pe=rk(K.src)).data,(Ae=te.getByData(be=me,pe.type))?ie({image:K,blobInfo:Ae}):Dl(K.src).then(function(Le){Ae=te.create(e1(),Le,be),te.add(Ae),ie({image:K,blobInfo:Ae})},function(Le){le(Le)})):(Ae=te.getByUri(K.src))?ie({image:K,blobInfo:Ae}):Dl(K.src).then(function(Le){var Je=Le;new Pi(function(pt){var Be=new FileReader;Be.onloadend=function(){pt(Be.result)},Be.readAsDataURL(Je)}).then(function(pt){be=rk(pt).data,Ae=te.create(e1(),Le,be),te.add(Ae),ie({image:K,blobInfo:Ae})})},function(Le){le(Le)})}).then(function(j){return delete g[j.image.src],j}).catch(function(j){return delete g[L.src],j});return g[L.src]=z});return Pi.all(I)}}}(pe,le)).findAll(a.getBody(),z).then(f(function(Ae){return Ae=rr(Ae,function(Le){return"string"!=typeof Le||void u1(a,Le)}),sg(a)||Pn(Ae,function(Le){C(Le.image.src,Le.blobInfo.blobUri()),Le.image.src=Le.blobInfo.blobUri(),Le.image.removeAttribute("data-mce-src")}),Ae}))};return a.on("SetContent",function(){(Ng(a)?L:be)()}),a.on("RawSaveContent",function(Ae){Ae.content=j(Ae.content)}),a.on("GetContent",function(Ae){Ae.source_view||"raw"===Ae.format||"tree"===Ae.format||(Ae.content=j(Ae.content))}),a.on("PostRender",function(){a.parser.addNodeFilter("img",function(Ae){Pn(Ae,function(Le){var Je,pt=Le.attr("src");le.getByUri(pt)||(Je=pe.getResultUri(pt))&&Le.attr("src",Je)})})}),{blobCache:le,addFilter:function(Ae){me.push(Ae)},uploadImages:I,uploadImagesAuto:L,scanForImages:be,destroy:function(){le.destroy(),pe.destroy(),te=G=null}}}(a),a.schema=Wn(Pk(a)),a.dom=ba(C,{keep_values:!0,url_converter:a.convertURL,url_converter_scope:a,hex_colors:g.force_hex_style_colors,update_styles:!0,root_element:a.inline?a.getBody():null,collect:function(){return a.inline},schema:a.schema,contentCssCors:a.getParam("content_css_cors",!1,"boolean"),referrerPolicy:oy(a),onSetAttrib:function(dt){a.fire("SetAttrib",dt)}}),a.parser=((L=L0(ih(I=a),I.schema)).addAttributeFilter("src,href,style,tabindex",function(dt,vt){for(var kt,Wt,bn=dt.length,Xn=I.dom,vn="data-mce-"+vt;bn--;)(Wt=(kt=dt[bn]).attr(vt))&&!kt.attr(vn)&&0!==Wt.indexOf("data:")&&0!==Wt.indexOf("blob:")&&("style"===vt?((Wt=Xn.serializeStyle(Xn.parseStyle(Wt),kt.name)).length||(Wt=null),kt.attr(vn,Wt),kt.attr(vt,Wt)):"tabindex"===vt?(kt.attr(vn,Wt),kt.attr(vt,null)):kt.attr(vn,I.convertURL(Wt,vt,kt.name)))}),L.addNodeFilter("script",function(dt){for(var vt=dt.length;vt--;){var kt=dt[vt],Wt=kt.attr("type")||"no/type";0!==Wt.indexOf("mce-")&&kt.attr("type","mce-"+Wt)}}),I.settings.preserve_cdata&&L.addNodeFilter("#cdata",function(dt){for(var vt=dt.length;vt--;){var kt=dt[vt];kt.type=8,kt.name="#comment",kt.value="[CDATA["+I.dom.encode(kt.value)+"]]"}}),L.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(dt){for(var vt=dt.length,kt=I.schema.getNonEmptyElements();vt--;){var Wt=dt[vt];Wt.isEmpty(kt)&&0===Wt.getAll("br").length&&(Wt.append(new He("br",1)).shortEnded=!0)}}),L),a.serializer=Oy((j=(z=a).settings,hr(hr(hr({},ih(z)),Pk(z)),jC({url_converter:j.url_converter,url_converter_scope:j.url_converter_scope,element_format:j.element_format,entities:j.entities,entity_encoding:j.entity_encoding,indent:j.indent,indent_after:j.indent_after,indent_before:j.indent_before}))),a),a.selection=GT(a.dom,a.getWin(),a.serializer,a),a.annotator=sx(a),a.formatter=Ny(a),a.undoManager=qT(a),a._nodeChangeDispatcher=new GC(a),a._selectionOverrides=Jw(a),le=a,pe=zd(),me=Os(!1),xe=Mh(function(dt){le.fire("longpress",hr(hr({},dt),{type:"longpress"})),me.set(!0)},400),le.on("touchstart",function(dt){Fw(dt).each(function(vt){xe.cancel();var kt={x:vt.clientX,y:vt.clientY,target:dt.target};xe.throttle(dt),me.set(!1),pe.set(kt)})},!0),le.on("touchmove",function(dt){xe.cancel(),Fw(dt).each(function(vt){pe.on(function(kt){var Wt=vt,bn=kt,Xn=Math.abs(Wt.clientX-bn.x),vn=Math.abs(Wt.clientY-bn.y);(5<Xn||5<vn)&&(pe.clear(),me.set(!1),le.fire("longpresscancel"))})})},!0),le.on("touchend touchcancel",function(dt){xe.cancel(),"touchcancel"!==dt.type&&pe.get().filter(function(vt){return vt.target.isEqualNode(dt.target)}).each(function(){me.get()?dt.preventDefault():le.fire("tap",hr(hr({},dt),{type:"tap"}))})},!0),(K=te=a).on("click",function(dt){K.dom.getParent(dt.target,"details")&&dt.preventDefault()}),(ie=te).parser.addNodeFilter("details",function(dt){Pn(dt,function(vt){vt.attr("data-mce-open",vt.attr("open")),vt.attr("open","open")})}),ie.serializer.addNodeFilter("details",function(dt){Pn(dt,function(vt){var kt=vt.attr("data-mce-open");vt.attr("open",wo(kt)?kt:null),vt.attr("data-mce-open",null)})}),sg(a)||(G=a).on("click",function(dt){var vt,kt,Wt,bn,Xn;3<=dt.detail&&(Wt=(vt=G).selection.getRng(),bn=en.fromRangeStart(Wt),Xn=en.fromRangeEnd(Wt),!en.isElementPosition(bn)||$w(kt=bn.container())&&Vi(kt).each(function(vn){return Wt.setStart(vn.container(),vn.offset())}),!en.isElementPosition(Xn)||$w(kt=bn.container())&&qd(kt).each(function(vn){return Wt.setEnd(vn.container(),vn.offset())}),vt.selection.setRng(zM(Wt)))});var Ae,Le,Je,pt,Be,je,et,At,Nt,Kt=sg(Ae=a)?Os(null):function Xw(a){var f,g,x,C,I,L,z,j,G,te,K,ie,le,pe,me=function Dv(a){var f=Os(null),g=qe(xv,a);return a.on("NodeChange",function(x){var C,I,L,z,j,te,K,ie,le,pe,me,xe;!np(a)||Fr.browser.isIE()&&x.initial||(j=g,te=x.parents,Pn(Mu(K=rr(mt(xc(It.fromDom(a.dom.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(be){return be.dom}),j),ie=rr(te,j)),qe(Jx,!1)),Pn(Mu(ie,K),qe(Jx,!0)),pe=f,(le=a).selection.isCollapsed()&&!0!==le.composing&&pe.get()&&(me=en.fromRangeStart(le.selection.getRng()),en.isTextPosition(me)&&!1===(Dp(xe=me)||ad(xe))&&($x(le,gd(pe.get(),me)),pe.set(null))),C=g,L=f,z=x.parents,(I=a).selection.isCollapsed()&&Pn(rr(z,C),function(be){var Ae=en.fromRangeStart(I.selection.getRng());Nh(C,I.getBody(),Ae).bind(function(Le){return zh(I,L,Le)})}))}),f}(a);return a.on("keyup compositionstart",qe(IC,a)),pe=me,(le=a).on("keydown",function(xe){var be,Ae,Le,Je;!1===xe.isDefaultPrevented()&&(be=le,Ae=pe,Le=xe,Je=wa().os,y1([{keyCode:Jr.RIGHT,action:gi(Ev,be,!0)},{keyCode:Jr.LEFT,action:gi(Ev,be,!1)},{keyCode:Jr.UP,action:gi(Fh,be,!1)},{keyCode:Jr.DOWN,action:gi(Fh,be,!0)},{keyCode:Jr.RIGHT,action:gi(Gw,be,!0)},{keyCode:Jr.LEFT,action:gi(Gw,be,!1)},{keyCode:Jr.UP,action:gi(t_,be,!1)},{keyCode:Jr.DOWN,action:gi(t_,be,!0)},{keyCode:Jr.RIGHT,action:gi(Ww,be,!0)},{keyCode:Jr.LEFT,action:gi(Ww,be,!1)},{keyCode:Jr.UP,action:gi(wk,be,!1)},{keyCode:Jr.DOWN,action:gi(wk,be,!0)},{keyCode:Jr.RIGHT,action:gi(hm,be,Ae,!0)},{keyCode:Jr.LEFT,action:gi(hm,be,Ae,!1)},{keyCode:Jr.RIGHT,ctrlKey:!Je.isOSX(),altKey:Je.isOSX(),action:gi(C1,be,Ae)},{keyCode:Jr.LEFT,ctrlKey:!Je.isOSX(),altKey:Je.isOSX(),action:gi(M1,be,Ae)},{keyCode:Jr.UP,action:gi(hp,be,!1)},{keyCode:Jr.DOWN,action:gi(hp,be,!0)}],Le).each(function(pt){Le.preventDefault()}))}),ie=me,(K=a).on("keydown",function(xe){var be,Ae,Le;!1===xe.isDefaultPrevented()&&(Ae=ie,Le=xe,y1([{keyCode:Jr.BACKSPACE,action:gi(Q0,be=K,!1)},{keyCode:Jr.BACKSPACE,action:gi(Yx,be,!1)},{keyCode:Jr.DELETE,action:gi(Yx,be,!0)},{keyCode:Jr.BACKSPACE,action:gi(Mw,be,!1)},{keyCode:Jr.DELETE,action:gi(Mw,be,!0)},{keyCode:Jr.BACKSPACE,action:gi(pm,be,Ae,!1)},{keyCode:Jr.DELETE,action:gi(pm,be,Ae,!0)},{keyCode:Jr.BACKSPACE,action:gi(C0,be,!1)},{keyCode:Jr.DELETE,action:gi(C0,be,!0)},{keyCode:Jr.BACKSPACE,action:gi(lg,be,!1)},{keyCode:Jr.DELETE,action:gi(lg,be,!0)},{keyCode:Jr.BACKSPACE,action:gi(Ov,be,!1)},{keyCode:Jr.DELETE,action:gi(Ov,be,!0)},{keyCode:Jr.BACKSPACE,action:gi(U0,be,!1)},{keyCode:Jr.DELETE,action:gi(U0,be,!0)},{keyCode:Jr.BACKSPACE,action:gi(c1,be,!1)},{keyCode:Jr.DELETE,action:gi(c1,be,!0)},{keyCode:Jr.BACKSPACE,action:gi(dp,be,!1)},{keyCode:Jr.DELETE,action:gi(dp,be,!0)}],Le).each(function(Je){Le.preventDefault()}))}),K.on("keyup",function(xe){var be,Ae;!1===xe.isDefaultPrevented()&&(Ae=xe,y1([{keyCode:Jr.BACKSPACE,action:gi(f1,be=K)},{keyCode:Jr.DELETE,action:gi(f1,be)}],Ae))}),(te=a).on("keydown",function(xe){var be,Ae,Le;xe.keyCode===Jr.ENTER&&(be=te,(Ae=xe).isDefaultPrevented()||(Ae.preventDefault(),(Le=be.undoManager).typing&&(Le.typing=!1,Le.add()),be.undoManager.transact(function(){!1===be.selection.isCollapsed()&&be.execCommand("Delete"),Dk(be,Ae)})))}),(G=a).on("keydown",function(xe){var be;!1===xe.isDefaultPrevented()&&(be=xe,y1([{keyCode:Jr.SPACEBAR,action:gi(uD,G)}],be).each(function(Ae){be.preventDefault()}))}),z=L=a,j=K1(function(){z.composing||Li(z)},0),Ok.isIE()&&(z.on("keypress",function(xe){j.throttle()}),z.on("remove",function(xe){j.cancel()})),L.on("input",function(xe){!1===xe.isComposing&&Li(L)}),I=me,(C=a).on("keydown",function(xe){var be,Ae,Le;!1===xe.isDefaultPrevented()&&(Ae=I,Le=xe,y1([{keyCode:Jr.END,action:gi(Hw,be=C,!0)},{keyCode:Jr.HOME,action:gi(Hw,be,!1)},{keyCode:Jr.END,action:gi(Sk,be,!0)},{keyCode:Jr.HOME,action:gi(Sk,be,!1)},{keyCode:Jr.END,action:gi(Av,be,!0,Ae)},{keyCode:Jr.HOME,action:gi(Av,be,!1,Ae)}],Le).each(function(Je){Le.preventDefault()}))}),f=a,g=me,WC.os.isOSX()||(x=Os(!1),f.on("keydown",function(xe){sD(xe)&&Ak(x,f,!0)}),f.on("keyup",function(xe){var be,Ae,Le;!1===xe.isDefaultPrevented()&&(Le=xe,y1([{keyCode:Jr.PAGE_UP,action:gi(Av,be=f,!1,Ae=g)},{keyCode:Jr.PAGE_DOWN,action:gi(Av,be,!0,Ae)}],Le)),sD(xe)&&x.get()&&(Ak(x,f,!1),f.nodeChanged())})),me}(Ae);Nt=Kt,(At=a).addCommand("delete",function(){var dt,vt=Nt;Q0(dt=At)||Yx(dt,!1)||Mw(dt,!1)||pm(dt,vt,!1)||c1(dt,!1)||C0(dt)||lg(dt,!1)||Ov(dt,!1)||U0(dt)||dp(dt,!1)||(yk(dt,"Delete"),G0(dt))}),At.addCommand("forwardDelete",function(){var dt,vt=Nt;Yx(dt=At,!0)||Mw(dt,!0)||pm(dt,vt,!0)||c1(dt,!0)||C0(dt)||lg(dt,!0)||Ov(dt,!0)||U0(dt)||dp(dt,!0)||yk(dt,"ForwardDelete")}),Za(Le=a)&&Le.on("NodeChange",qe(eb,Le)),pt=(Je=a).dom,Be=Za(Je),je=Je.getParam("placeholder",Nb.getAttrib(Je.getElement(),"placeholder"),"string"),et=function(dt,vt){var kt,Wt,bn;!function(Xn){if(Vx(Xn)){var vn=Xn.keyCode;return!l1(Xn)&&(Jr.metaKeyPressed(Xn)||Xn.altKey||112<=vn&&vn<=123||nn(hk,vn))}}(dt)&&(kt=Je.getBody(),Wt=!(Vx(bn=dt)&&!(l1(bn)||"keyup"===bn.type&&229===bn.keyCode))&&function(Xn,vn,Gn){if(ee(It.fromDom(vn),!1)){var kn=""===Gn,Vn=vn.firstElementChild;return!Vn||!Xn.getStyle(vn.firstElementChild,"padding-left")&&!Xn.getStyle(vn.firstElementChild,"padding-right")&&(kn?!Xn.isBlock(Vn):Gn===Vn.nodeName.toLowerCase())}return!1}(pt,kt,Be),""!==pt.getAttrib(kt,lm)===Wt&&!vt||(pt.setAttrib(kt,lm,Wt?je:null),pt.setAttrib(kt,"aria-placeholder",Wt?je:null),Je.fire("PlaceholderToggle",{state:Wt}),Je.on(Wt?"keydown":"keyup",et),Je.off(Wt?"keyup":"keydown",et)))},je&&Je.on("init",function(dt){et(dt,!0),Je.on("change SetContent ExecCommand",et),Je.on("paste",function(vt){return St.setEditorTimeout(Je,function(){return et(vt)})})});var Yt=function lw(a){var f=a;return Sr(a.plugins,"rtc").bind(function(g){return $.from(g.setup)}).fold(function(){return f.rtcInstance=yf(a),$.none()},function(g){var x,C;return f.rtcInstance=(x=Bn(null),C=Bn(""),{undoManager:{beforeChange:_n,add:x,undo:x,redo:x,clear:_n,reset:_n,hasUndo:Yn,hasRedo:Yn,transact:x,ignore:_n,extra:_n},formatter:{match:Yn,matchAll:Bn([]),matchNode:Bn(void 0),canApply:Yn,closest:C,apply:_n,remove:_n,toggle:_n,formatChanged:Bn({unbind:_n})},editor:{getContent:C,setContent:C,insertContent:_n,addVisual:_n},selection:{getContent:C},raw:{getModel:Bn($.none())}}),$.some(function(){return g().then(function(I){return f.rtcInstance=(te=I.selection,K=I.raw,{undoManager:{beforeChange:(z=I.undoManager).beforeChange,add:z.add,undo:z.undo,redo:z.redo,clear:z.clear,reset:z.reset,hasUndo:z.hasUndo,hasRedo:z.hasRedo,transact:function(ie,le,pe){return z.transact(pe)},ignore:function(ie,le){return z.ignore(le)},extra:function(ie,le,pe,me){return z.extra(pe,me)}},formatter:{match:function(ie,le,pe,me){return j.match(ie,L(le),me)},matchAll:(j=I.formatter).matchAll,matchNode:j.matchNode,canApply:function(ie){return j.canApply(ie)},closest:function(ie){return j.closest(ie)},apply:function(ie,le,pe){return j.apply(ie,L(le))},remove:function(ie,le,pe,me){return j.remove(ie,L(le))},toggle:function(ie,le,pe){return j.toggle(ie,L(le))},formatChanged:function(ie,le,pe,me,xe){return j.formatChanged(le,pe,me,xe)}},editor:{getContent:function(ie,le){return G.getContent(ie)},setContent:function(ie,le){return G.setContent(ie,le)},insertContent:function(ie,le){return G.insertContent(ie)},addVisual:(G=I.editor).addVisual},selection:{getContent:function(ie,le){return te.getContent(le)}},raw:{getModel:function(){return $.some(K.getRawModel())}}}),I.rtc.isRemote;function L(ie){return Va(ie)?ie:{}}var z,j,G,te,K})})})}(a);(function(dt){var vt=dt.settings,kt=dt.getDoc(),Wt=dt.getBody();dt.fire("PreInit"),vt.browser_spellcheck||vt.gecko_spellcheck||(kt.body.spellcheck=!1,Vk.setAttrib(Wt,"spellcheck","false")),dt.quirks=function s_(a){function f(vt,kt){try{a.getDoc().execCommand(vt,!1,kt)}catch{}}function g(vt){return vt.isDefaultPrevented()}function x(){a.shortcuts.add("meta+a",null,"SelectAll")}function C(){a.inline||Ae.bind(a.getDoc(),"mousedown mouseup",function(vt){var kt;vt.target===a.getDoc().documentElement&&(kt=Le.getRng(),a.getBody().focus(),"mousedown"===vt.type?Nr(kt.startContainer)||Le.placeCaretAt(vt.clientX,vt.clientY):Le.setRng(kt))})}function I(){Range.prototype.getClientRects||a.on("mousedown",function(vt){var kt;g(vt)||"HTML"!==vt.target.nodeName||((kt=a.getBody()).blur(),St.setEditorTimeout(a,function(){kt.focus()}))})}function L(){a.on("click",function(vt){var kt=vt.target;/^(IMG|HR)$/.test(kt.nodeName)&&"false"!==Ae.getContentEditableParent(kt)&&(vt.preventDefault(),a.selection.select(kt),a.nodeChanged()),"A"===kt.nodeName&&Ae.hasClass(kt,"mce-item-anchor")&&(vt.preventDefault(),Le.select(kt))})}function z(){a.on("keydown",function(vt){if(!g(vt)&&vt.keyCode===xe&&Le.isCollapsed()&&0===Le.getRng().startOffset){var kt=Le.getNode().previousSibling;if(kt&&kt.nodeName&&"table"===kt.nodeName.toLowerCase())return vt.preventDefault(),!1}})}function j(){a.getParam("readonly")||a.on("BeforeExecCommand mousedown",function(){f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),c0(a)||f("enableObjectResizing",!1)})}function G(){a.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function te(){a.inline||a.on("keydown",function(){document.activeElement===document.body&&a.getWin().focus()})}function K(){a.inline||(a.contentStyles.push("body {min-height: 150px}"),a.on("click",function(vt){var kt;"HTML"===vt.target.nodeName&&(11<Fr.ie?a.getBody().focus():(kt=a.selection.getRng(),a.getBody().focus(),a.selection.setRng(kt),a.selection.normalize(),a.nodeChanged()))}))}function ie(){Fr.mac&&a.on("keydown",function(vt){!Jr.metaKeyPressed(vt)||vt.shiftKey||37!==vt.keyCode&&39!==vt.keyCode||(vt.preventDefault(),a.selection.getSel().modify("move",37===vt.keyCode?"backward":"forward","lineboundary"))})}function le(){a.on("click",function(vt){var kt=vt.target;do{if("A"===kt.tagName)return void vt.preventDefault()}while(kt=kt.parentNode)}),a.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function pe(){a.on("init",function(){a.dom.bind(a.getBody(),"submit",function(vt){vt.preventDefault()})})}var me=Qt.each,xe=Jr.BACKSPACE,be=Jr.DELETE,Ae=a.dom,Le=a.selection,Je=a.parser,pt=Fr.gecko,je=Fr.webkit,et="data:text/mce-internal,",At=Fr.ie?"Text":"URL",Nt=_n;return sg(a)?(je&&(C(),L(),pe(),x(),Fr.iOS&&(te(),K(),le())),pt&&(I(),j(),G(),ie())):(a.on("keydown",function(vt){if(!g(vt)&&vt.keyCode===Jr.BACKSPACE){var kt,Wt=(kt=Le.getRng()).startContainer,bn=kt.startOffset,Xn=Ae.getRoot(),vn=Wt;if(kt.collapsed&&0===bn){for(;vn&&vn.parentNode&&vn.parentNode.firstChild===vn&&vn.parentNode!==Xn;)vn=vn.parentNode;"BLOCKQUOTE"===vn.tagName&&(a.formatter.toggle("blockquote",null,vn),(kt=Ae.createRng()).setStart(Wt,0),kt.setEnd(Wt,0),Le.setRng(kt))}}}),a.on("keydown",function(vt){var kt,Wt,bn,Xn,vn=vt.keyCode;g(vt)||vn!==be&&vn!==xe||(kt=a.selection.isCollapsed(),Wt=a.getBody(),kt&&!Ae.isEmpty(Wt)||!kt&&(bn=dt(a.selection.getRng()),(Xn=Ae.createRng()).selectNode(a.getBody()),bn!==dt(Xn))||(vt.preventDefault(),a.setContent(""),Wt.firstChild&&Ae.isBlock(Wt.firstChild)?a.selection.setCursorLocation(Wt.firstChild,0):a.selection.setCursorLocation(Wt,0),a.nodeChanged()))}),Fr.windowsPhone||a.on("keyup focusin mouseup",function(vt){Jr.modifierPressed(vt)||Le.normalize()},!0),je&&(C(),L(),Za(a)&&a.on("init",function(){f("DefaultParagraphSeparator",Za(a))}),pe(),z(),Je.addNodeFilter("br",function(vt){for(var kt=vt.length;kt--;)"Apple-interchange-newline"===vt[kt].attr("class")&&vt[kt].remove()}),Fr.iOS?(te(),K(),le()):x()),11<=Fr.ie&&(K(),z()),Fr.ie&&(x(),f("AutoUrlDetect",!1),a.on("dragstart",function(vt){var kt,Wt,bn;(kt=vt).dataTransfer&&(a.selection.isCollapsed()&&"IMG"===kt.target.tagName&&Le.select(kt.target),0<(Wt=a.selection.getContent()).length&&(bn=et+escape(a.id)+","+escape(Wt),kt.dataTransfer.setData(At,bn)))}),a.on("drop",function(vt){var kt,Wt,bn,Xn;g(vt)||(kt=vt.dataTransfer&&(Xn=vt.dataTransfer.getData(At))&&0<=Xn.indexOf(et)?(Xn=Xn.substr(et.length).split(","),{id:unescape(Xn[0]),html:unescape(Xn[1])}):null)&&kt.id!==a.id&&(vt.preventDefault(),Wt=fx(vt.x,vt.y,a.getDoc()),Le.setRng(Wt),bn=kt.html,a.queryCommandSupported("mceInsertClipboardContent")?a.execCommand("mceInsertClipboardContent",!1,{content:bn,internal:!0}):a.execCommand("mceInsertContent",!1,bn))})),pt&&(a.on("keydown",function(vt){if(!g(vt)&&vt.keyCode===xe&&a.getBody().getElementsByTagName("hr").length&&Le.isCollapsed()&&0===Le.getRng().startOffset){var kt=Le.getNode(),Wt=kt.previousSibling;if("HR"===kt.nodeName)return Ae.remove(kt),void vt.preventDefault();Wt&&Wt.nodeName&&"hr"===Wt.nodeName.toLowerCase()&&(Ae.remove(Wt),vt.preventDefault())}}),I(),a.on("keypress",function(vt){var kt;if(!g(vt)&&(8===vt.keyCode||46===vt.keyCode)&&Yt())return kt=Kt(),a.getDoc().execCommand("delete",!1,null),kt(),vt.preventDefault(),!1}),Ae.bind(a.getDoc(),"cut",function(vt){var kt;!g(vt)&&Yt()&&(kt=Kt(),St.setEditorTimeout(a,function(){kt()}))}),j(),a.on("SetContent ExecCommand",function(vt){"setcontent"!==vt.type&&"mceInsertLink"!==vt.command||me(Ae.select("a"),function(kt){var Wt=kt.parentNode,bn=Ae.getRoot();if(Wt.lastChild===kt){for(;Wt&&!Ae.isBlock(Wt);){if(Wt.parentNode.lastChild!==Wt||Wt===bn)return;Wt=Wt.parentNode}Ae.add(Wt,"br",{"data-mce-bogus":1})}})}),G(),ie(),z())),{refreshContentEditable:Nt,isHidden:function(){if(!pt||a.removed)return!1;var vt=a.selection.getSel();return!vt||!vt.rangeCount||0===vt.rangeCount}};function Kt(){var vt=Ae.getAttribs(Le.getStart().cloneNode(!1));return function(){var kt=Le.getStart();kt!==a.getBody()&&(Ae.setAttrib(kt,"style",null),me(vt,function(Wt){kt.setAttributeNode(Wt.cloneNode(!0))}))}}function Yt(){return!Le.isCollapsed()&&Ae.getParent(Le.getStart(),Ae.isBlock)!==Ae.getParent(Le.getEnd(),Ae.isBlock)}function dt(vt){var kt=Ae.create("body"),Wt=vt.cloneContents();return kt.appendChild(Wt),Le.serializer.serialize(kt,{format:"html"})}}(dt),dt.fire("PostRender");var bn=dt.getParam("directionality",hd.isRtl()?"rtl":void 0);void 0!==bn&&(Wt.dir=bn),vt.protect&&dt.on("BeforeSetContent",function(Xn){Qt.each(vt.protect,function(vn){Xn.content=Xn.content.replace(vn,function(Gn){return"\x3c!--mce:protected "+escape(Gn)+"--\x3e"})})}),dt.on("SetContent",function(){dt.addVisual(dt.getBody())}),dt.on("compositionstart compositionend",function(Xn){dt.composing="compositionstart"===Xn.type})})(a),Yt.fold(function(){YC(a).then(function(){return eS(a)})},function(dt){a.setProgressState(!0),YC(a).then(function(){dt().then(function(vt){a.setProgressState(!1),eS(a)},function(vt){a.notificationManager.open({type:"error",text:String(vt)}),eS(a)})})})}function hD(a){return a.replace(/^\-/,"")}function Lk(a){return{editorContainer:a,iframeContainer:a,api:{}}}function Nk(a){var f,g,x,C,I,L,z,j;a.fire("ScriptsLoaded"),g=Qt.trim(Ab(f=a)),x=f.ui.registry.getAll().icons,wn(hr(hr({},Nx.get("default").icons),Nx.get(g).icons),function(be,Ae){po(x,Ae)||f.ui.registry.addIcon(Ae,be)}),L=cf(C=a),wo(L)?(C.settings.theme=hD(L),I=Uf.get(L),C.theme=new I(C,Uf.urls[L]),C.theme.init&&C.theme.init(C,Uf.urls[L]||C.documentBaseUrl.replace(/\/$/,""),C.$)):C.theme={},j=[],Qt.each(Ob(z=a).split(/[ ,]/),function(be){Hk(z,j,hD(be))});var G=function pD(a){var f,g,x,C,I,L,z,j=a.getElement();return a.orgDisplay=j.style.display,wo(cf(a))?a.theme.renderUI():Ur(cf(a))?(g=(f=a).getElement(),(x=cf(f)(f,g)).editorContainer.nodeType&&(x.editorContainer.id=x.editorContainer.id||f.id+"_parent"),x.iframeContainer&&x.iframeContainer.nodeType&&(x.iframeContainer.id=x.iframeContainer.id||f.id+"_iframecontainer"),x.height=x.iframeHeight||g.offsetHeight,x):(z=(C=a).getElement(),C.inline?Lk(null):(I=z,L=nS.create("div"),nS.insertAfter(L,I),Lk(L)))}(a),te=a,K=$.from(G.api).getOr({}),ie={show:$.from(K.show).getOr(_n),hide:$.from(K.hide).getOr(_n),disable:$.from(K.disable).getOr(_n),isDisabled:$.from(K.isDisabled).getOr(Yn),enable:function(){te.mode.isReadOnly()||$.from(K.enable).map(la)}};te.ui=hr(hr({},te.ui),ie);var le,pe,me,xe={editorContainer:G.editorContainer,iframeContainer:G.iframeContainer};return a.editorContainer=xe.editorContainer||null,function zx(a){var f,g;a.contentCSS=a.contentCSS.concat(QT(a,(g=(f=a).getParam("content_css"),wo(g)?mt(g.split(","),uu):Yo(g)?g:!1===g||f.inline?[]:["default"])),QT(a,Ib(a)))}(a),a.inline?qC(a):(me=function Rk(a,f){var g,x,C,I,L=a.translate("Rich Text Area"),z=(g=a.id,x=L,C=a.getParam("iframe_attrs",{}),ec(I=It.fromTag("iframe"),C),ec(I,{id:g+"_ifr",frameBorder:"0",allowTransparency:"true",title:x}),Wl(I,"tox-edit-area__iframe"),I.dom);z.onload=function(){z.onload=null,a.fire("load")};var j=function(G,te){if(document.domain!==window.location.hostname&&Fr.browser.isIE()){var K=hC("mce");G[K]=function(){qC(G)};var ie='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+G.id+'");document.write(ed.iframeHTML);document.close();ed.'+K+"(true);})()";return Vy.setAttrib(te,"src",ie),!0}return!1}(a,z);return a.contentAreaContainer=f.iframeContainer,a.iframeElement=z,a.iframeHTML=function(G){var te=G.getParam("doctype","<!DOCTYPE html>")+"<html><head>";G.getParam("document_base_url","")!==G.documentBaseUrl&&(te+='<base href="'+G.documentBaseURI.getURI()+'" />'),te+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var K=u0(G,"body_id","tinymce"),ie=u0(G,"body_class",""),le=G.translate(G.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string"));return Gd(G)&&(te+='<meta http-equiv="Content-Security-Policy" content="'+Gd(G)+'" />'),te+'</head><body id="'+K+'" class="mce-content-body '+ie+'" data-id="'+G.id+'" aria-label="'+le+'"><br></body></html>'}(a),Vy.add(f.iframeContainer,z),j}(le=a,pe=xe),pe.editorContainer&&(Vy.get(pe.editorContainer).style.display=le.orgDisplay,le.hidden=Vy.isHidden(pe.editorContainer)),le.getElement().style.display="none",Vy.setAttrib(le.id,"aria-hidden","true"),void(me||qC(le)))}function Bk(a){return"-"===a.charAt(0)}function gD(a,f,g){return $.from(f).filter(function(x){return 0<x.length&&!Nx.has(x)}).map(function(x){return{url:a.editorManager.baseURL+"/icons/"+x+"/icons"+g+".js",name:$.some(x)}})}function vm(a){return function(f,g){return $.from(g).map(It.fromDom).filter(wl).bind(function(x){return C=a,I=f,WM(It.fromDom(x.dom),function(j){return kf(G=j,C).orThunk(function(){return"font"===Ga(G)?Sr(Wk,C).bind(function(te){return Da(G,te)}):$.none()});var G},function(j){return gn(It.fromDom(I),j)}).or($.from(ba.DOM.getStyle(x.dom,a,!0)));var C,I}).getOr("")}}function XC(a){return Vi(a.getBody()).map(function(f){var g=f.container();return Ar(g)?g.parentNode:g})}function ZC(a,f){return g=a,x=Pr($.some,f),$.from((C=g).selection.getRng()).bind(function(I){var L=C.getBody();return I.startContainer===L&&0===I.startOffset?$.none():$.from(C.selection.getStart(!0))}).orThunk(qe(XC,g)).map(It.fromDom).filter(wl).bind(x);var g,x,C}function zk(a,f){if(/^[0-9.]+$/.test(f)){var g=parseInt(f,10);if(1<=g&&g<=7){var x=Qt.explode(a.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large")),C=Qt.explode(a.getParam("font_size_classes",""));return C?C[g-1]||f:x[g-1]||f}return f}return f}var tS=oo,Fk=Yu,vD=function(a){a.on(function(f){ab(f.ghost)}),a.clear()},KC=Yu,kd=oo,Vk=ba.DOM,Vy=ba.DOM,nS=ba.DOM,Hk=function(a,f,g){var x,I,L,z=dc.get(g),j=dc.urls[g]||a.documentBaseUrl.replace(/\/$/,"");if(g=Qt.trim(g),z&&-1===Qt.inArray(f,g)&&(Qt.each(dc.dependencies(g),function(te){Hk(a,f,te)}),!a.plugins[g]))try{var G=new z(a,j,a.$);(a.plugins[g]=G).init&&(G.init(a,j),f.push(g))}catch(te){I=te,Qp(x=a,"PluginLoadError",{message:L=hd.translate(["Failed to initialize plugin: {0}",g])}),_v(L,I),u1(x,L)}},Rv=ba.DOM,Wk={"font-size":"size","font-family":"face"},l_=vm("font-size"),Z2=jr(function(a){return a.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},vm("font-family")),$C=Qt.each,yD=Qt.map,bD=Qt.inArray,JC=(ru.prototype.execCommand=function(a,f,g,x){var C,I,L=!1,z=this;if(!z.editor.removed){if("mcefocus"!==a.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(a)||x&&x.skip_focus?Cy(I=z.editor).each(function(G){return I.selection.setRng(G)}):z.editor.focus()),(x=z.editor.fire("BeforeExecCommand",{command:a,ui:f,value:g})).isDefaultPrevented())return!1;var j=a.toLowerCase();if(C=z.commands.exec[j])return C(j,f,g),z.editor.fire("ExecCommand",{command:a,ui:f,value:g}),!0;if($C(this.editor.plugins,function(G){if(G.execCommand&&G.execCommand(a,f,g))return z.editor.fire("ExecCommand",{command:a,ui:f,value:g}),!(L=!0)}),L)return L;if(z.editor.theme&&z.editor.theme.execCommand&&z.editor.theme.execCommand(a,f,g))return z.editor.fire("ExecCommand",{command:a,ui:f,value:g}),!0;try{L=z.editor.getDoc().execCommand(a,f,g)}catch{}return!!L&&(z.editor.fire("ExecCommand",{command:a,ui:f,value:g}),!0)}},ru.prototype.queryCommandState=function(a){var f;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(a=a.toLowerCase(),f=this.commands.state[a])return f(a);try{return this.editor.getDoc().queryCommandState(a)}catch{}return!1}},ru.prototype.queryCommandValue=function(a){var f;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(a=a.toLowerCase(),f=this.commands.value[a])return f(a);try{return this.editor.getDoc().queryCommandValue(a)}catch{}}},ru.prototype.addCommands=function(a,f){void 0===f&&(f="exec");var g=this;$C(a,function(x,C){$C(C.toLowerCase().split(","),function(I){g.commands[f][I]=x})})},ru.prototype.addCommand=function(a,f,g){var x=this;a=a.toLowerCase(),this.commands.exec[a]=function(C,I,L,z){return f.call(g||x.editor,I,L,z)}},ru.prototype.queryCommandSupported=function(a){if(a=a.toLowerCase(),this.commands.exec[a])return!0;try{return this.editor.getDoc().queryCommandSupported(a)}catch{}return!1},ru.prototype.addQueryStateHandler=function(a,f,g){var x=this;a=a.toLowerCase(),this.commands.state[a]=function(){return f.call(g||x.editor)}},ru.prototype.addQueryValueHandler=function(a,f,g){var x=this;a=a.toLowerCase(),this.commands.value[a]=function(){return f.call(g||x.editor)}},ru.prototype.hasCustomCommand=function(a){return a=a.toLowerCase(),!!this.commands.exec[a]},ru.prototype.execNativeCommand=function(a,f,g){return void 0===f&&(f=!1),void 0===g&&(g=null),this.editor.getDoc().execCommand(a,f,g)},ru.prototype.isFormatMatch=function(a){return this.editor.formatter.match(a)},ru.prototype.toggleFormat=function(a,f){this.editor.formatter.toggle(a,f),this.editor.nodeChanged()},ru.prototype.storeSelection=function(a){this.selectionBookmark=this.editor.selection.getBookmark(a)},ru.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},ru.prototype.setupCommands=function(a){var f=this;function g(x){return function(){var C=a.selection,I=C.isCollapsed()?[a.dom.getParent(C.getNode(),a.dom.isBlock)]:C.getSelectedBlocks(),L=yD(I,function(z){return!!a.formatter.matchNode(z,x)});return-1!==bD(L,!0)}}this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":_n,"mceEndUndoLevel,mceAddUndoLevel":function(){a.undoManager.add()},mceFocus:function(x,C,I){var L;(L=a).removed||(I?we:function(j){var G=j.selection,te=j.getBody(),K=G.getRng();j.quirks.refreshContentEditable(),void 0!==j.bookmark&&!1===pl(j)&&Cy(j).each(function(me){j.selection.setRng(me),K=me});var ie,le,pe=(ie=j,le=G.getNode(),ie.dom.getParent(le,function(me){return"true"===ie.dom.getContentEditable(me)}));if(j.$.contains(te,pe))return bd(pe),j_(j,K),we(j);j.inline||(Fr.opera||bd(te),j.getWin().focus()),(Fr.gecko||j.inline)&&(bd(te),j_(j,K)),we(j)})(L)},"Cut,Copy,Paste":function(x){var C,I,L=a.getDoc();try{f.execNativeCommand(x)}catch{C=!0}!(C="paste"===x&&!L.queryCommandEnabled(x)||C)&&L.queryCommandSupported(x)||(I=a.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),Fr.mac&&(I=I.replace(/Ctrl\+/g,"\u2318+")),a.notificationManager.open({text:I,type:"error"}))},unlink:function(){var x;a.selection.isCollapsed()?(x=a.dom.getParent(a.selection.getStart(),"a"))&&a.dom.remove(x,!0):a.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(x){var C=x.substring(7);"full"===C&&(C="justify"),$C("left,center,right,justify".split(","),function(I){C!==I&&a.formatter.remove("align"+I)}),"none"!==C&&f.toggleFormat("align"+C)},"InsertUnorderedList,InsertOrderedList":function(x){var C;f.execNativeCommand(x);var I=a.dom.getParent(a.selection.getNode(),"ol,ul");I&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((C=I.parentNode).nodeName)&&(f.storeSelection(),a.dom.split(C,I),f.restoreSelection())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(x){f.toggleFormat(x)},"ForeColor,HiliteColor":function(x,C,I){f.toggleFormat(x,{value:I})},FontName:function(x,C,I){var L,z;z=zk(L=a,I),L.formatter.toggle("fontname",{value:mt(z.split(/\s*,\s*/),function(j){return-1===j.indexOf(" ")||$r(j,'"')||$r(j,"'")?j:"'"+j+"'"}).join(",")}),L.nodeChanged()},FontSize:function(x,C,I){var L;(L=a).formatter.toggle("fontsize",{value:zk(L,I)}),L.nodeChanged()},LineHeight:function(x,C,I){var L;(L=a).formatter.toggle("lineheight",{value:String(I)}),L.nodeChanged()},Lang:function(x,C,I){f.toggleFormat(x,{value:I.code,customValue:I.customCode})},RemoveFormat:function(x){a.formatter.remove(x)},mceBlockQuote:function(){f.toggleFormat("blockquote")},FormatBlock:function(x,C,I){return f.toggleFormat(I||"p")},mceCleanup:function(){var x=a.selection.getBookmark();a.setContent(a.getContent()),a.selection.moveToBookmark(x)},mceRemoveNode:function(x,C,I){var L=I||a.selection.getNode();L!==a.getBody()&&(f.storeSelection(),a.dom.remove(L,!0),f.restoreSelection())},mceSelectNodeDepth:function(x,C,I){var L=0;a.dom.getParent(a.selection.getNode(),function(z){if(1===z.nodeType&&L++===I)return a.selection.select(z),!1},a.getBody())},mceSelectNode:function(x,C,I){a.selection.select(I)},mceInsertContent:function(x,C,I){var L,z,j,G;L=a,j=(z=function(te){if("string"==typeof te)return{content:te,details:{}};var K=Qt.extend({paste:te.paste,data:{paste:te.paste}},te);return{content:te.content,details:K}}(I)).content,G=z.details,Gf(L).editor.insertContent(j,G)},mceInsertRawHTML:function(x,C,I){a.selection.setContent("tiny_mce_marker");var L=a.getContent();a.setContent(L.replace(/tiny_mce_marker/g,function(){return I}))},mceInsertNewLine:function(x,C,I){Dk(a,I)},mceToggleFormat:function(x,C,I){f.toggleFormat(I)},mceSetContent:function(x,C,I){a.setContent(I)},"Indent,Outdent":function(x){Qx(a,x)},mceRepaint:_n,InsertHorizontalRule:function(){a.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){a.hasVisual=!a.hasVisual,a.addVisual()},mceReplaceContent:function(x,C,I){a.execCommand("mceInsertContent",!1,I.replace(/\{\$selection\}/g,a.selection.getContent({format:"text"})))},mceInsertLink:function(x,C,I){"string"==typeof I&&(I={href:I});var L=a.dom.getParent(a.selection.getNode(),"a");I.href=I.href.replace(/ /g,"%20"),L&&I.href||a.formatter.remove("link"),I.href&&a.formatter.apply("link",I,L)},selectAll:function(){var x,C=a.dom.getParent(a.selection.getStart(),Yu);C&&((x=a.dom.createRng()).selectNodeContents(C),a.selection.setRng(x))},mceNewDocument:function(){a.setContent("")},InsertLineBreak:function(x,C,I){return jw(a,I),!0}}),f.addCommands({JustifyLeft:g("alignleft"),JustifyCenter:g("aligncenter"),JustifyRight:g("alignright"),JustifyFull:g("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(x){return f.isFormatMatch(x)},mceBlockQuote:function(){return f.isFormatMatch("blockquote")},Outdent:function(){return zw(a)},"InsertUnorderedList,InsertOrderedList":function(x){var C=a.dom.getParent(a.selection.getNode(),"ul,ol");return C&&("insertunorderedlist"===x&&"UL"===C.tagName||"insertorderedlist"===x&&"OL"===C.tagName)}},"state"),f.addCommands({Undo:function(){a.undoManager.undo()},Redo:function(){a.undoManager.redo()}}),f.addQueryValueHandler("FontName",function(){return ZC(x=a,function(C){return Z2(x.getBody(),C.dom)}).getOr("");var x},this),f.addQueryValueHandler("FontSize",function(){return ZC(x=a,function(C){return l_(x.getBody(),C.dom)}).getOr("");var x},this),f.addQueryValueHandler("LineHeight",function(){return ZC(x=a,function(C){var I=It.fromDom(x.getBody());return WM(C,function(L){return kf(L,"line-height")},qe(gn,I)).getOrThunk(function(){var L=parseFloat(Nc(C,"line-height")),z=parseFloat(Nc(C,"font-size"));return String(L/z)})}).getOr("");var x},this)},ru);function ru(a){this.commands={state:{},exec:{},value:{}},this.editor=a,this.setupCommands(a)}function T1(a,f,g){try{a.getDoc().execCommand(f,!1,String(g))}catch{}}function rS(a,f){a.dom.contentEditable=f?"true":"false"}function qf(a){return a.readonly}function QC(a){a.parser.addAttributeFilter("contenteditable",function(f){qf(a)&&Pn(f,function(g){g.attr(hg,g.attr("contenteditable")),g.attr("contenteditable","false")})}),a.serializer.addAttributeFilter(hg,function(f){qf(a)&&Pn(f,function(g){g.attr("contenteditable",g.attr(hg))})}),a.serializer.addTempAttr(hg)}var hg="data-mce-contenteditable",xD=Qt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),D1=(sb.isNative=function(a){return!!xD[a.toLowerCase()]},sb.prototype.fire=function(a,f){var g=a.toLowerCase(),x=fr(g,f||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(x);var C=this.bindings[g];if(C)for(var I=0,L=C.length;I<L;I++){var z=C[I];if(!z.removed){if(z.once&&this.off(g,z.func),x.isImmediatePropagationStopped())return x;if(!1===z.func.call(this.scope,x))return x.preventDefault(),x}}return x},sb.prototype.on=function(a,f,g,x){if(f=!1===f?Yn:f){var C={func:f,removed:!1};x&&Qt.extend(C,x);for(var I=a.toLowerCase().split(" "),L=I.length;L--;){var z=I[L],j=this.bindings[z];j||(j=[],this.toggleEvent(z,!0)),j=g?Ot([C],j,!0):Ot(Ot([],j,!0),[C],!1),this.bindings[z]=j}}return this},sb.prototype.off=function(a,f){var g=this;if(a)for(var x=a.toLowerCase().split(" "),C=x.length;C--;){var I,L=x[C],z=this.bindings[L];if(!L)return wn(this.bindings,function(j,G){g.toggleEvent(G,!1),delete g.bindings[G]}),this;z&&(f?(z=(I=Yi(z,function(j){return j.func===f})).fail,this.bindings[L]=z,Pn(I.pass,function(j){j.removed=!0})):z.length=0,z.length||(this.toggleEvent(a,!1),delete this.bindings[L]))}else wn(this.bindings,function(j,G){g.toggleEvent(G,!1)}),this.bindings={};return this},sb.prototype.once=function(a,f,g){return this.on(a,f,g,{once:!0})},sb.prototype.has=function(a){return a=a.toLowerCase(),!(!this.bindings[a]||0===this.bindings[a].length)},sb);function sb(a){this.bindings={},this.settings=a||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||Yn}function ub(a){return a._eventDispatcher||(a._eventDispatcher=new D1({scope:a,toggleEvent:function(f,g){D1.isNative(f)&&a.toggleNativeEvent&&a.toggleNativeEvent(f,g)}})),a._eventDispatcher}function lb(a,f){if("selectionchange"===f)return a.getDoc();if(!a.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(f))return a.getDoc().documentElement;var g=f0(a);return g?(a.eventRoot||(a.eventRoot=A1.select(g)[0]),a.eventRoot):a.getBody()}function Gk(a,f,g){var x,C,I,L;a.hidden||qf(a)?qf(a)&&(x=a,"click"!==(C=g).type||Jr.metaKeyPressed(C)||(I=It.fromDom(C.target),L=x,Df(I,"a",function(z){return gn(z,It.fromDom(L.getBody()))}).bind(function(z){return Da(z,"href")}).each(function(z){var j,G;C.preventDefault(),/^#/.test(z)?(j=x.dom.select(z+',[name="'+($r(G=z,"#")?G.substring(1):G)+'"]')).length&&x.selection.scrollIntoView(j[0],!0):window.open(z,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))):a.fire(f,g)}function Lv(a,f){var g,x;a.delegates||(a.delegates={}),a.delegates[f]||a.removed||(x=lb(a,f),f0(a)?(gp||(gp={},a.editorManager.on("removeEditor",function(){a.editorManager.activeEditor||gp&&(wn(gp,function(C,I){a.dom.unbind(lb(a,I))}),gp=null)})),gp[f]||(gp[f]=g=function(C){for(var I=C.target,L=a.editorManager.get(),z=L.length;z--;){var j=L[z].getBody();j!==I&&!A1.isChildOf(I,j)||Gk(L[z],f,C)}},A1.bind(x,f,g))):(A1.bind(x,f,g=function(C){Gk(a,f,C)}),a.delegates[f]=g))}function Hy(a,f,g,x){var C=g[f.get()],I=g[x];try{I.activate()}catch(L){return void console.error("problem while activating editor mode "+x+":",L)}C.deactivate(),C.editorReadOnly!==I.editorReadOnly&&function K2(a,f){var g,x,C=It.fromDom(a.getBody());(function k1(a,f,g){var x,C,I,L,z,j;uf(a,f)&&!1===g?(C=f,ep(x=a)?x.dom.classList.remove(C):(z=C,0<(j=rr(Fd(L=x,"class"),function(G){return G!==z})).length?Bl(L,"class",j.join(" ")):rd(L,"class")),0===(ep(I=x)?I.dom.classList:Fd(I,"class")).length&&rd(I,"class")):g&&Wl(a,f)})(C,"mce-content-readonly",f),f?(a.selection.controlSelection.hideResizeRect(),a._selectionOverrides.hideFakeCaret(),$.from(a.selection.getNode()).each(function(I){I.removeAttribute("data-mce-selected")}),rS(C,!(a.readonly=!0)),Pn(xc(C,'*[contenteditable="true"]'),function(I){Bl(I,hg,"true"),rS(I,!1)})):(rS(C,!(a.readonly=!1)),Pn(xc(C,"*["+hg+'="true"]'),function(I){rd(I,hg),rS(I,!0)}),T1(a,"StyleWithCSS",!1),T1(a,"enableInlineTableEditing",!1),T1(a,"enableObjectResizing",!1),(pl(g=a)||Kg(Aa(It.fromDom((x=g).getElement()))).filter(function(I){return!(void 0!==(L=I.dom.classList)&&(L.contains("tox-edit-area")||L.contains("tox-edit-area__iframe")||L.contains("mce-content-body")))&&Vr(x,I.dom);var L}).isSome())&&a.focus(),a.selection.setRng(a.selection.getRng()),a.nodeChanged())}(a,I.editorReadOnly),f.set(x),a.fire("SwitchMode",{mode:x})}function cb(a){var f,g={};pg(tM(a.toLowerCase(),"+"),function(C){C in I1?g[C]=!0:/^[0-9]{2,}$/.test(C)?g.keyCode=parseInt(C,10):(g.charCode=C.charCodeAt(0),g.keyCode=_D[C]||C.toUpperCase().charCodeAt(0))});var x=[g.keyCode];for(f in I1)g[f]?x.push(f):g[f]=!1;return g.id=x.join(","),g.access&&(g.alt=!0,Fr.mac?g.ctrl=!0:g.shift=!0),g.meta&&(Fr.mac?g.meta=!0:(g.ctrl=!0,g.meta=!1)),g}var gp,Wy={fire:function(a,f,g){if(this.removed&&"remove"!==a&&"detach"!==a)return f;var x=ub(this).fire(a,f);if(!1!==g&&this.parent)for(var C=this.parent();C&&!x.isPropagationStopped();)C.fire(a,x,!1),C=C.parent();return x},on:function(a,f,g){return ub(this).on(a,f,g)},off:function(a,f){return ub(this).off(a,f)},once:function(a,f){return ub(this).once(a,f)},hasEventListeners:function(a){return ub(this).has(a)}},A1=ba.DOM,eM=hr(hr({},Wy),{bindPendingEventDelegates:function(){var a=this;Qt.each(a._pendingNativeEvents,function(f){Lv(a,f)})},toggleNativeEvent:function(a,f){var g=this;"focus"!==a&&"blur"!==a&&(g.removed||(f?g.initialized?Lv(g,a):g._pendingNativeEvents?g._pendingNativeEvents.push(a):g._pendingNativeEvents=[a]:g.initialized&&(g.dom.unbind(lb(g,a),a,g.delegates[a]),delete g.delegates[a])))},unbindAllNativeEvents:function(){var a=this,f=a.getBody(),g=a.dom;a.delegates&&(wn(a.delegates,function(x,C){a.dom.unbind(lb(a,C),C,x)}),delete a.delegates),!a.inline&&f&&g&&(f.onload=null,g.unbind(a.getWin()),g.unbind(a.getDoc())),g&&(g.unbind(f),g.unbind(a.getContainer()))}}),$2=["design","readonly"],pg=Qt.each,tM=Qt.explode,_D={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},I1=Qt.makeMap("alt,ctrl,shift,meta,access"),fb=(Nv.prototype.add=function(a,f,g,x){var C=this,I=C.normalizeCommandFunc(g);return pg(tM(Qt.trim(a)),function(L){var z=C.createShortcut(L,f,I,x);C.shortcuts[z.id]=z}),!0},Nv.prototype.remove=function(a){var f=this.createShortcut(a);return!!this.shortcuts[f.id]&&(delete this.shortcuts[f.id],!0)},Nv.prototype.normalizeCommandFunc=function(a){var f=this,g=a;return"string"==typeof g?function(){f.editor.execCommand(g,!1,null)}:Qt.isArray(g)?function(){f.editor.execCommand(g[0],g[1],g[2])}:g},Nv.prototype.createShortcut=function(a,f,g,x){var C=Qt.map(tM(a,">"),cb);return C[C.length-1]=Qt.extend(C[C.length-1],{func:g,scope:x||this.editor}),Qt.extend(C[0],{desc:this.editor.translate(f),subpatterns:C.slice(1)})},Nv.prototype.hasModifier=function(a){return a.altKey||a.ctrlKey||a.metaKey},Nv.prototype.isFunctionKey=function(a){return"keydown"===a.type&&112<=a.keyCode&&a.keyCode<=123},Nv.prototype.matchShortcut=function(a,f){return!!f&&f.ctrl===a.ctrlKey&&f.meta===a.metaKey&&f.alt===a.altKey&&f.shift===a.shiftKey&&!!(a.keyCode===f.keyCode||a.charCode&&a.charCode===f.charCode)&&(a.preventDefault(),!0)},Nv.prototype.executeShortcutAction=function(a){return a.func?a.func.call(a.scope):null},Nv);function Nv(a){this.shortcuts={},this.pendingPatterns=[],this.editor=a;var f=this;a.on("keyup keypress keydown",function(g){!f.hasModifier(g)&&!f.isFunctionKey(g)||g.isDefaultPrevented()||(pg(f.shortcuts,function(x){if(f.matchShortcut(g,x))return f.pendingPatterns=x.subpatterns.slice(0),"keydown"===g.type&&f.executeShortcutAction(x),!0}),f.matchShortcut(g,f.pendingPatterns[0])&&(1===f.pendingPatterns.length&&"keydown"===g.type&&f.executeShortcutAction(f.pendingPatterns[0]),f.pendingPatterns.shift()))})}var db=ba.DOM,Uk=Qt.extend,wD=Qt.each,Gy=Qt.resolve,SD=Fr.ie,nM=(qi.prototype.render=function(){!function(a){var f=a.id;hd.setCode(pd(a));var g,x,C,I,L=function(){Rv.unbind(window,"ready",L),a.render()};xs.Event.domLoaded?a.getElement()&&Fr.contentEditable&&(g=It.fromDom(a.getElement()),x=dr(g.dom.attributes,function(z,j){return z[j.name]=j.value,z},{}),a.on("remove",function(){yo(g.dom.attributes,function(z){return rd(g,z.name),0}),ec(g,x)}),a.ui.styleSheetLoader=Fc.forElement(g,{contentCssCors:(C=a).getParam("content_css_cors"),referrerPolicy:oy(C)}),a.getParam("inline")?a.inline=!0:(a.orgVisibility=a.getElement().style.visibility,a.getElement().style.visibility="hidden"),(I=a.getElement().form||Rv.getParent(f,"form"))&&(a.formElement=I,a.getParam("hidden_input")&&!Bc(a.getElement())&&(Rv.insertAfter(Rv.create("input",{type:"hidden",name:f}),f),a.hasHiddenInput=!0),a.formEventDelegate=function(z){a.fire(z.type,z)},Rv.bind(I,"submit reset",a.formEventDelegate),a.on("reset",function(){a.resetContent()}),!a.getParam("submit_patch")||I.submit.nodeType||I.submit.length||I._mceOldSubmit||(I._mceOldSubmit=I.submit,I.submit=function(){return a.editorManager.triggerSave(),a.setDirty(!1),I._mceOldSubmit(I)})),a.windowManager=yw(a),a.notificationManager=gw(a),"xml"===a.getParam("encoding")&&a.on("GetContent",function(z){z.save&&(z.content=Rv.encode(z.content))}),a.getParam("add_form_submit_trigger")&&a.on("submit",function(){a.initialized&&a.save()}),a.getParam("add_unload_trigger")&&(a._beforeUnload=function(){!a.initialized||a.destroyed||a.isHidden()||a.save({format:"raw",no_events:!0,set_dirty:!1})},a.editorManager.on("BeforeUnload",a._beforeUnload)),a.editorManager.add(a),function mD(a,f){var g,x,C=qc.ScriptLoader,I=C,L=f,z=function(){var G,te,K,ie,le,pe,me,xe,be;le=C,xe=pd(pe=a),be=pe.getParam("language_url","","string"),!1===hd.hasCode(xe)&&"en"!==xe&&le.add(me=""!==be?be:pe.editorManager.baseURL+"/langs/"+xe+".js",_n,void 0,function(){V0(pe,"LanguageLoadError",H0("language",me,xe))}),K=C,Pn(function(Ae){for(var Le=[],Je=function(Be){Le.push(Be)},pt=0;pt<Ae.length;pt++)Ae[pt].each(Je);return Le}([gD(ie=a,"default",f),$.from(ie.getParam("icons_url","","string")).filter(function(Ae){return 0<Ae.length}).map(function(Ae){return{url:Ae,name:$.none()}}).orThunk(function(){return gD(ie,Ab(ie),"")})]),function(Ae){K.add(Ae.url,_n,void 0,function(){V0(ie,"IconsLoadError",H0("icons",Ae.url,Ae.name.getOrUndefined()))})}),te=f,Qt.each((G=a).getParam("external_plugins"),function(Ae,Le){dc.load(Le,Ae,_n,void 0,function(){Bx(G,Ae,Le)}),G.settings.plugins+=" "+Le}),Qt.each(Ob(G).split(/[ ,]/),function(Ae){var Le,Je;(Ae=Qt.trim(Ae))&&!dc.urls[Ae]&&(Bk(Ae)?(Ae=Ae.substr(1,Ae.length),Le=dc.dependencies(Ae),Qt.each(Le,function(pt){var Be=dc.createUrl({prefix:"plugins/",resource:pt,suffix:"/plugin"+te+".js"},pt);dc.load(Be.resource,Be,_n,void 0,function(){Bx(G,Be.prefix+Be.resource+Be.suffix,Be.resource)})})):dc.load(Ae,Je={prefix:"plugins/",resource:Ae,suffix:"/plugin"+te+".js"},_n,void 0,function(){Bx(G,Je.prefix+Je.resource+Je.suffix,Ae)}))}),C.loadQueue(function(){a.removed||Nk(a)},a,function(){a.removed||Nk(a)})},j=cf(g=a);wo(j)?(Bk(j)||po(Uf.urls,j)||((x=g.getParam("theme_url"))?Uf.load(j,g.documentBaseURI.toAbsolute(x)):Uf.load(j,"themes/"+j+"/theme"+L+".js")),I.loadQueue(function(){Uf.waitFor(j,z)})):z()}(a,a.suffix)):Rv.bind(window,"ready",L)}(this)},qi.prototype.focus=function(a){this.execCommand("mceFocus",!1,a)},qi.prototype.hasFocus=function(){return pl(this)},qi.prototype.execCallback=function(a){for(var f=[],g=1;g<arguments.length;g++)f[g-1]=arguments[g];var x,C=this.settings[a];if(C)return this.callbackLookup&&(x=this.callbackLookup[a])&&(C=x.func,x=x.scope),"string"==typeof C&&(x=(x=C.replace(/\.\w+$/,""))?Gy(x):0,C=Gy(C),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[a]={func:C,scope:x}),C.apply(x||this,f)},qi.prototype.translate=function(a){return hd.translate(a)},qi.prototype.getParam=function(a,f,g){return I=f,te=(C=a)in(x=this).settings?x.settings[C]:I,"hash"===(L=g)?(G={},"string"==typeof(j=te)?Pn(0<j.indexOf("=")?j.split(/[;,](?![^=;,]*(?:[;,]|$))/):j.split(","),function(K){var ie=K.split("=");G[Qt.trim(ie[0])]=Qt.trim(1<ie.length?ie[1]:ie[0])}):G=j,G):"string"===L?Ey(wo,x,C).getOr(I):"number"===L?Ey(ho,x,C).getOr(I):"boolean"===L?Ey(ts,x,C).getOr(I):"object"===L?Ey(Va,x,C).getOr(I):"array"===L?Ey(Yo,x,C).getOr(I):"string[]"===L?Ey((z=wo,function(K){return Yo(K)&&gr(K,z)}),x,C).getOr(I):"function"===L?Ey(Ur,x,C).getOr(I):te;var x,C,I,L,z,j,G,te},qi.prototype.hasPlugin=function(a,f){return!(!nn(Ob(this).split(/[ ,]/),a)||f&&void 0===dc.get(a))},qi.prototype.nodeChanged=function(a){this._nodeChangeDispatcher.nodeChanged(a)},qi.prototype.addCommand=function(a,f,g){this.editorCommands.addCommand(a,f,g)},qi.prototype.addQueryStateHandler=function(a,f,g){this.editorCommands.addQueryStateHandler(a,f,g)},qi.prototype.addQueryValueHandler=function(a,f,g){this.editorCommands.addQueryValueHandler(a,f,g)},qi.prototype.addShortcut=function(a,f,g,x){this.shortcuts.add(a,f,g,x)},qi.prototype.execCommand=function(a,f,g,x){return this.editorCommands.execCommand(a,f,g,x)},qi.prototype.queryCommandState=function(a){return this.editorCommands.queryCommandState(a)},qi.prototype.queryCommandValue=function(a){return this.editorCommands.queryCommandValue(a)},qi.prototype.queryCommandSupported=function(a){return this.editorCommands.queryCommandSupported(a)},qi.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(db.show(this.getContainer()),db.hide(this.id)),this.load(),this.fire("show"))},qi.prototype.hide=function(){var a=this,f=a.getDoc();a.hidden||(SD&&f&&!a.inline&&f.execCommand("SelectAll"),a.save(),a.inline?(a.getBody().contentEditable="false",a===a.editorManager.focusedEditor&&(a.editorManager.focusedEditor=null)):(db.hide(a.getContainer()),db.setStyle(a.id,"display",a.orgDisplay)),a.hidden=!0,a.fire("hide"))},qi.prototype.isHidden=function(){return!!this.hidden},qi.prototype.setProgressState=function(a,f){this.fire("ProgressState",{state:a,time:f})},qi.prototype.load=function(a){var f=this.getElement();if(this.removed)return"";if(f){(a=a||{}).load=!0;var g=Bc(f)?f.value:f.innerHTML,x=this.setContent(g,a);return a.element=f,a.no_events||this.fire("LoadContent",a),a.element=f=null,x}},qi.prototype.save=function(a){var f,g,x=this,C=x.getElement();if(C&&x.initialized&&!x.removed)return(a=a||{}).save=!0,a.element=C,a.content=x.getContent(a),a.no_events||x.fire("SaveContent",a),"raw"===a.format&&x.fire("RawSaveContent",a),f=a.content,Bc(C)?C.value=f:(!a.is_removing&&x.inline||(C.innerHTML=f),(g=db.getParent(x.id,"form"))&&wD(g.elements,function(I){if(I.name===x.id)return I.value=f,!1})),a.element=C=null,!1!==a.set_dirty&&x.setDirty(!1),f},qi.prototype.setContent=function(a,f){return N0(this,a,f)},qi.prototype.getContent=function(a){return x=(g=void 0===(g=a)?{}:g).format||"html",C=g,Gf(this).editor.getContent(C,x);var g,x,C},qi.prototype.insertContent=function(a,f){f&&(a=Uk({content:a},f)),this.execCommand("mceInsertContent",!1,a)},qi.prototype.resetContent=function(a){void 0===a?N0(this,this.startContent,{format:"raw"}):N0(this,a),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},qi.prototype.isDirty=function(){return!this.isNotDirty},qi.prototype.setDirty=function(a){var f=!this.isNotDirty;this.isNotDirty=!a,a&&a!==f&&this.fire("dirty")},qi.prototype.getContainer=function(){return this.container||(this.container=db.get(this.editorContainer||this.id+"_parent")),this.container},qi.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},qi.prototype.getElement=function(){return this.targetElm||(this.targetElm=db.get(this.id)),this.targetElm},qi.prototype.getWin=function(){var a;return this.contentWindow||(a=this.iframeElement)&&(this.contentWindow=a.contentWindow),this.contentWindow},qi.prototype.getDoc=function(){var a;return this.contentDocument||(a=this.getWin())&&(this.contentDocument=a.document),this.contentDocument},qi.prototype.getBody=function(){var a=this.getDoc();return this.bodyElement||(a?a.body:null)},qi.prototype.convertURL=function(a,f,g){var x=this.settings;return x.urlconverter_callback?this.execCallback("urlconverter_callback",a,g,!0,f):!x.convert_urls||g&&"LINK"===g.nodeName||0===a.indexOf("file:")||0===a.length?a:x.relative_urls?this.documentBaseURI.toRelative(a):this.documentBaseURI.toAbsolute(a,x.remove_script_host)},qi.prototype.addVisual=function(a){var f;f=a,Ru(this).editor.addVisual(f)},qi.prototype.remove=function(){var a,f,g,x,C;(a=this).removed||(f=a._selectionOverrides,g=a.editorUpload,x=a.getBody(),C=a.getElement(),x&&a.save({is_removing:!0}),a.removed=!0,a.unbindAllNativeEvents(),a.hasHiddenInput&&C&&$c.remove(C.nextSibling),a.fire("remove"),a.editorManager.remove(a),!a.inline&&x&&$c.setStyle(a.id,"display",a.orgDisplay),a.fire("detach"),$c.remove(a.getContainer()),r1(f),r1(g),a.destroy())},qi.prototype.destroy=function(a){var f,g,x,C,I,L,z;g=a,L=(f=this).selection,z=f.dom,f.destroyed||(g||f.removed?(g||(f.editorManager.off("beforeunload",f._beforeUnload),f.theme&&f.theme.destroy&&f.theme.destroy(),r1(L),r1(z)),(C=(x=f).formElement)&&(C._mceOldSubmit&&(C.submit=C._mceOldSubmit,C._mceOldSubmit=null),$c.unbind(C,"submit reset",x.formEventDelegate)),(I=f).contentAreaContainer=I.formElement=I.container=I.editorContainer=null,I.bodyElement=I.contentDocument=I.contentWindow=null,I.iframeElement=I.targetElm=null,I.selection&&(I.selection=I.selection.win=I.selection.dom=I.selection.dom.doc=null),f.destroyed=!0):f.remove())},qi.prototype.uploadImages=function(a){return this.editorUpload.uploadImages(a)},qi.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},qi.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},qi.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},qi.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},qi.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},qi);function qi(a,f,g){var x,C,I,L,z,j,G,te,le,pe,me,xe,Ae,Le,Je,pt=this;function Be(dt,vt){return function(kt,Wt){return dt[kt.toLowerCase()]=hr(hr({},Wt),{type:vt})}}this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=g,this.documentBaseUrl=g.documentBaseURL,Uk(this,eM),this.settings=(le=g.defaultSettings,me=this.documentBaseUrl,xe=wd,Ae={id:a,theme:"silver",toolbar_mode:ok(pe=f,"floating"),plugins:"",document_base_url:me,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:this.convertURL,url_converter_scope:this},Le=hr(hr({},Ae),xe?vw:{}),!1!==(Je=function Ex(a,f,g,x,C){var I,L,z,j,G,te,K,ie,le=a?{mobile:(I=f,L={resize:!1,toolbar_mode:ok(C.mobile||{},"scrolling"),toolbar_sticky:!1},hr(hr(hr({},vw),L),I?{menubar:!1}:{}))}:{},pe=(G=["mobile"],rn(B0(le,C),function(xe,be){return nn(G,be)},un(te={}),un(K={})),{sections:Bn((ie={t:te,f:K}).t),settings:Bn(ie.f)}),me=Qt.extend(g,x,pe.settings(),a&&bv(pe,"mobile")?function(xe){void 0===xe&&(xe={});var be=Sr(pe.sections(),"mobile").getOr({});return Qt.extend({},xe,be)}():{},{validate:!0,external_plugins:(z=x,j=pe.settings().external_plugins||{},z&&z.external_plugins?Qt.extend({},z.external_plugins,j):j)});return function pw(a,f,g,x){var C,I,L,z,j,G,te,K,ie=o1(g.forced_plugins),le=o1(x.plugins),pe=bv(C=f,"mobile")?C.sections().mobile:{},xe=(z=f,j=le,G=pe.plugins?o1(pe.plugins):le,I=(L=a)&&(K=(te=z).sections(),bv(te,"mobile")&&"mobile"===K.mobile.theme)?rr(G,qe(nn,Lx)):L&&bv(z,"mobile")?G:j,[].concat(o1(ie)).concat(o1(I)));if(Fr.browser.isIE()&&nn(xe,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return Qt.extend(x,{plugins:xe.join(" ")})}(a,pe,x,me)}(Sd||dC,Sd,Le,le,pe)).deprecation_warnings&&function jT(a,f){var g,x,C,I,L,z,j,G=(g=a,x=rr(lC,function(me){return po(g,me)}),!1!==(C=g.forced_root_block)&&""!==C||x.push("forced_root_block (false only)"),ca(x)),te=(j=Qt.makeMap(f.plugins," "),ca(Ot(Ot([],rr(cC,pe),!0),gc(mw,function(me){return pe(me)?[me+" (moving to premium)"]:[]}),!0))),K=0<te.length,ie=0<G.length,le="mobile"===f.theme;function pe(me){return po(j,me)}(K||ie||le)&&(I=le?"\n\nThemes:\n- mobile":"",L=K?"\n\nPlugins:\n- "+te.join("\n- "):"",z=ie?"\n\nSettings:\n- "+G.join("\n- "):"",console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+I+L+z))}(pe,Je),Je),this.settings.suffix&&(g.suffix=this.settings.suffix),this.suffix=g.suffix,this.settings.base_url&&g._setBaseUrl(this.settings.base_url),this.baseUri=g.baseURI,this.settings.referrer_policy&&(qc.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),ba.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),ws.languageLoad=this.settings.language_load,ws.baseURL=g.baseURL,this.id=a,this.setDirty(!1),this.documentBaseURI=new Xt(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new fb(this),this.editorCommands=new JC(this),this.settings.cache_suffix&&(Fr.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(z={},(x={addButton:Be(C={},"button"),addGroupToolbarButton:Be(C,"grouptoolbarbutton"),addToggleButton:Be(C,"togglebutton"),addMenuButton:Be(C,"menubutton"),addSplitButton:Be(C,"splitbutton"),addMenuItem:Be(I={},"menuitem"),addNestedMenuItem:Be(I,"nestedmenuitem"),addToggleMenuItem:Be(I,"togglemenuitem"),addAutocompleter:Be(L={},"autocompleter"),addContextMenu:Be(j={},"contextmenu"),addContextToolbar:Be(G={},"contexttoolbar"),addContextForm:Be(G,"contextform"),addSidebar:Be(te={},"sidebar"),addIcon:function(dt,vt){return z[dt.toLowerCase()]=vt},getAll:function(){return{buttons:C,menuItems:I,icons:z,popups:L,contextMenus:j,contextToolbars:G,sidebars:te}}}).addAutocompleter),addButton:x.addButton,addContextForm:x.addContextForm,addContextMenu:x.addContextMenu,addContextToolbar:x.addContextToolbar,addIcon:x.addIcon,addMenuButton:x.addMenuButton,addMenuItem:x.addMenuItem,addNestedMenuItem:x.addNestedMenuItem,addSidebar:x.addSidebar,addSplitButton:x.addSplitButton,addToggleButton:x.addToggleButton,addGroupToolbarButton:x.addGroupToolbarButton,addToggleMenuItem:x.addToggleMenuItem,getAll:x.getAll},styleSheetLoader:void 0,show:_n,hide:_n,enable:_n,disable:_n,isDisabled:Yn};var je,et,At,Nt,Kt,Yt=(Nt=Os("design"),Kt=Os({design:{activate:_n,deactivate:_n,editorReadOnly:!1},readonly:{activate:_n,deactivate:_n,editorReadOnly:!0}}),(et=je=this).serializer?QC(et):et.on("PreInit",function(){QC(et)}),(At=je).on("ShowCaret",function(dt){qf(At)&&dt.preventDefault()}),At.on("ObjectSelected",function(dt){qf(At)&&dt.preventDefault()}),{isReadOnly:function(){return qf(je)},set:function(dt){return function(vt,kt,Wt,bn){if(bn!==Wt.get()){if(!po(kt,bn))throw new Error("Editor mode '"+bn+"' is invalid");vt.initialized?Hy(vt,Wt,kt,bn):vt.on("init",function(){return Hy(vt,Wt,kt,bn)})}}(je,Kt.get(),Nt,dt)},get:function(){return Nt.get()},register:function(dt,vt){Kt.set(function(kt,Wt,bn){var Xn;if(nn($2,Wt))throw new Error("Cannot override default mode "+Wt);return hr(hr({},kt),((Xn={})[Wt]=hr(hr({},bn),{deactivate:function(){try{bn.deactivate()}catch(vn){console.error("problem while deactivating editor mode "+Wt+":",vn)}}}),Xn))}(Kt.get(),dt,vt))}});this.mode=Yt,this.setMode=Yt.set,g.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=ko.overrideDefaults(function(){return{context:pt.inline?pt.getBody():pt.getDoc(),element:pt.getBody()}})}function jk(a){var f=a.type;ym(Hh.get(),function(g){switch(f){case"scroll":g.fire("ScrollWindow",a);break;case"resize":g.fire("ResizeWindow",a)}})}function rM(a){a!==MD&&(a?ko(window).on("resize scroll",jk):ko(window).off("resize scroll",jk),MD=a)}function Yk(a){var f=Pa;delete gl[a.id];for(var g=0;g<gl.length;g++)if(gl[g]===a){gl.splice(g,1);break}return Pa=rr(Pa,function(x){return a!==x}),Hh.activeEditor===a&&(Hh.activeEditor=0<Pa.length?Pa[0]:null),Hh.focusedEditor===a&&(Hh.focusedEditor=null),f.length!==Pa.length}var Uy,Xf=ba.DOM,CD=Qt.explode,ym=Qt.each,c_=Qt.extend,J2=0,MD=!1,gl=[],Pa=[],oM="CSS1Compat"!==document.compatMode,Hh=hr(hr({},Wy),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:ko,majorVersion:"5",minorVersion:"10.7",releaseDate:"2022-12-06",editors:gl,i18n:hd,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var a,f="",g=Xt.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(g)&&(g=g.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(g)||(g+="/"));var x=window.tinymce||window.tinyMCEPreInit;if(x)a=x.base||x.baseURL,f=x.suffix;else{for(var C,I=document.getElementsByTagName("script"),L=0;L<I.length;L++)if(""!==(C=I[L].src||"")){var z=C.substring(C.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(C)){-1!==z.indexOf(".min")&&(f=".min"),a=C.substring(0,C.lastIndexOf("/"));break}}!a&&document.currentScript&&(-1!==(C=document.currentScript.src).indexOf(".min")&&(f=".min"),a=C.substring(0,C.lastIndexOf("/")))}this.baseURL=new Xt(g).toAbsolute(a),this.documentBaseURL=g,this.baseURI=new Xt(this.baseURL),this.suffix=f,this.on("AddEditor",qe($g,this)),this.on("RemoveEditor",qe(fi,this))},overrideDefaults:function(a){var f=a.base_url;f&&this._setBaseUrl(f),a.suffix&&(this.suffix=a.suffix);var x=(this.defaultSettings=a).plugin_base_urls;void 0!==x&&wn(x,function(C,I){ws.PluginManager.urls[I]=C})},init:function(a){function f(j){var G=j.id;return G||(G=Sr(j,"name").filter(function(te){return!Xf.get(te)}).getOrThunk(Xf.uniqueId),j.setAttribute("id",G)),G}function g(j,G){return G.constructor===RegExp?G.test(j.className):Xf.hasClass(j,G)}var x,C=this,I=Qt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),L=function(j){x=j},z=function(){function j(le,pe,me){var xe=new nM(le,pe,C);ie.push(xe),xe.on("init",function(){++K===G.length&&L(ie)}),xe.targetElm=xe.targetElm||me,xe.render()}var G,te,K=0,ie=[];Xf.unbind(window,"ready",z),(te=a.onpageload)&&te.apply(C,[]),G=ko.unique(function(le){var pe=[];if(Fr.browser.isIE()&&Fr.browser.version.major<11)return _v("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(oM)return _v("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(le.types)return ym(le.types,function(xe){pe=pe.concat(Xf.select(xe.selector))}),pe;if(le.selector)return Xf.select(le.selector);if(le.target)return[le.target];switch(le.mode){case"exact":var me=le.elements||"";0<me.length&&ym(CD(me),function(xe){var be=Xf.get(xe);be?pe.push(be):ym(document.forms,function(Ae){ym(Ae.elements,function(Le){Le.name===xe&&(xe="mce_editor_"+J2++,Xf.setAttrib(Le,"id",xe),pe.push(Le))})})});break;case"textareas":case"specific_textareas":ym(Xf.select("textarea"),function(xe){le.editor_deselector&&g(xe,le.editor_deselector)||le.editor_selector&&!g(xe,le.editor_selector)||pe.push(xe)})}return pe}(a)),a.types?ym(a.types,function(le){Qt.each(G,function(pe){return!Xf.is(pe,le.selector)||(j(f(pe),c_({},a,le),pe),!1)})}):(Qt.each(G,function(le){var pe;(pe=C.get(le.id))&&pe.initialized&&!(pe.getContainer()||pe.getBody()).parentNode&&(Yk(pe),pe.unbindAllNativeEvents(),pe.destroy(!0),pe.removed=!0)}),0===(G=Qt.grep(G,function(le){return!C.get(le.id)})).length?L([]):ym(G,function(le){a.inline&&le.tagName.toLowerCase()in I?_v("Could not initialize inline editor on invalid inline target element",le):j(f(le),a,le)}))};return C.settings=a,Xf.bind(window,"ready",z),new Pi(function(j){x?j(x):L=function(G){j(G)}})},get:function(a){return 0===arguments.length?Pa.slice(0):wo(a)?yr(Pa,function(f){return f.id===a}).getOr(null):ho(a)&&Pa[a]||null},add:function(a){var f=this;return gl[a.id]===a||(null===f.get(a.id)&&("length"!==a.id&&(gl[a.id]=a),gl.push(a),Pa.push(a)),rM(!0),f.activeEditor=a,f.fire("AddEditor",{editor:a}),Uy||(Uy=function(g){var x=f.fire("BeforeUnload");if(x.returnValue)return g.preventDefault(),g.returnValue=x.returnValue,x.returnValue},window.addEventListener("beforeunload",Uy))),a},createEditor:function(a,f){return this.add(new nM(a,f,this))},remove:function(a){var f,g,x=this;if(a){if(!wo(a))return qr(x.get((g=a).id))?null:(Yk(g)&&x.fire("RemoveEditor",{editor:g}),0===Pa.length&&window.removeEventListener("beforeunload",Uy),g.remove(),rM(0<Pa.length),g);ym(Xf.select(a),function(C){(g=x.get(C.id))&&x.remove(g)})}else for(f=Pa.length-1;0<=f;f--)x.remove(Pa[f])},execCommand:function(a,f,g){var x=this.get(g);switch(a){case"mceAddEditor":return this.get(g)||new nM(g,this.settings,this).render(),!0;case"mceRemoveEditor":return x&&x.remove(),!0;case"mceToggleEditor":return x?x.isHidden()?x.show():x.hide():this.execCommand("mceAddEditor",!1,g),!0}return!!this.activeEditor&&this.activeEditor.execCommand(a,f,g)},triggerSave:function(){ym(Pa,function(a){a.save()})},addI18n:function(a,f){hd.add(a,f)},translate:function(a){return hd.translate(a)},setActive:function(a){var f=this.activeEditor;this.activeEditor!==a&&(f&&f.fire("deactivate",{relatedTarget:a}),a.fire("activate",{relatedTarget:f})),this.activeEditor=a},_setBaseUrl:function(a){this.baseURL=new Xt(this.documentBaseURL).toAbsolute(a.replace(/\/+$/,"")),this.baseURI=new Xt(this.baseURL)}});function iM(a,f,g){var x=f.x,C=f.y,I=a.w,L=a.h,z=f.w,j=f.h,G=(g||"").split("");return"b"===G[0]&&(C+=j),"r"===G[1]&&(x+=z),"c"===G[0]&&(C+=oS(j/2)),"c"===G[1]&&(x+=oS(z/2)),"b"===G[3]&&(C-=L),"r"===G[4]&&(x-=I),"c"===G[3]&&(C-=oS(L/2)),"c"===G[4]&&(x-=oS(I/2)),O1(x,C,I,L)}function Qc(){}function O1(a,f,g,x){return{x:a,y:f,w:g,h:x}}Hh.setup();var f_,bm,qk,E1,Xk=Math.min,d_=Math.max,oS=Math.round,aM={inflate:function(a,f,g){return O1(a.x-f,a.y-g,a.w+2*f,a.h+2*g)},relativePosition:iM,findBestRelativePosition:function(a,f,g,x){for(var C,I=0;I<x.length;I++)if((C=iM(a,f,x[I])).x>=g.x&&C.x+C.w<=g.w+g.x&&C.y>=g.y&&C.y+C.h<=g.h+g.y)return x[I];return null},intersect:function(a,f){var g=d_(a.x,f.x),x=d_(a.y,f.y),C=Xk(a.x+a.w,f.x+f.w),I=Xk(a.y+a.h,f.y+f.h);return C-g<0||I-x<0?null:O1(g,x,C-g,I-x)},clamp:function(a,f,g){var x=a.x,C=a.y,I=a.x+a.w,L=a.y+a.h,z=f.x+f.w,j=f.y+f.h,G=d_(0,f.x-x),te=d_(0,f.y-C),K=d_(0,I-z),ie=d_(0,L-j);return x+=G,C+=te,g&&(I+=G,L+=te,x-=K,C-=ie),O1(x,C,(I-=K)-x,(L-=ie)-C)},create:O1,fromClientRect:function(a){return O1(a.left,a.top,a.width,a.height)}},kD=(f_={},bm={},{load:function(a,f){var g='Script at URL "'+f+'" failed to load',x='Script at URL "'+f+"\" did not call `tinymce.Resource.add('"+a+"', data)` within 1 second";if(void 0!==f_[a])return f_[a];var C=new Pi(function(I,L){var z=function(j,G,te){function K(xe){return function(){for(var be=[],Ae=0;Ae<arguments.length;Ae++)be[Ae]=arguments[Ae];ie||(ie=!0,null!==le&&(clearTimeout(le),le=null),xe.apply(null,be))}}void 0===te&&(te=1e3);var ie=!1,le=null,pe=K(j),me=K(G);return{start:function(){for(var xe=[],be=0;be<arguments.length;be++)xe[be]=arguments[be];ie||null!==le||(le=setTimeout(function(){return me.apply(null,xe)},te))},resolve:pe,reject:me}}(I,L);bm[a]=z.resolve,qc.ScriptLoader.loadScript(f,function(){return z.start(x)},function(){return z.reject(g)})});return f_[a]=C},add:function(a,f){void 0!==bm[a]&&(bm[a](f),delete bm[a]),f_[a]=Pi.resolve(f)}}),P1=Qt.each,Q2=Qt.extend;Qc.extend=qk=function(a){function f(){var I,L,z;if(!E1&&(this.init&&this.init.apply(this,arguments),L=this.Mixins))for(I=L.length;I--;)(z=L[I]).init&&z.init.apply(this,arguments)}function g(){return this}var x=this.prototype;E1=!0;var C=new this;return E1=!1,a.Mixins&&(P1(a.Mixins,function(I){for(var L in I)"init"!==L&&(a[L]=I[L])}),x.Mixins&&(a.Mixins=x.Mixins.concat(a.Mixins))),a.Methods&&P1(a.Methods.split(","),function(I){a[I]=g}),a.Properties&&P1(a.Properties.split(","),function(I){var L="_"+I;a[I]=function(z){return void 0!==z?(this[L]=z,this):this[L]}}),a.Statics&&P1(a.Statics,function(I,L){f[L]=I}),a.Defaults&&x.Defaults&&(a.Defaults=Q2({},x.Defaults,a.Defaults)),wn(a,function(I,L){var z,j;C[L]="function"==typeof I&&x[L]?(z=L,j=I,function(){var G=this._super;this._super=x[z];var te=j.apply(this,arguments);return this._super=G,te}):I}),f.prototype=C,(f.constructor=f).extend=qk,f};var R1,jy,L1,h_=Math.min,N1=Math.max,Bv=Math.round,iS={serialize:function(a){var f=JSON.stringify(a);return wo(f)?f.replace(/[\u0080-\uFFFF]/g,function(g){var x=g.charCodeAt(0).toString(16);return"\\u"+"0000".substring(x.length)+x}):f},parse:function(a){try{return JSON.parse(a)}catch{}}},sM={callbacks:{},count:0,send:function(a){var f=this,g=ba.DOM,x=(void 0!==a.count?a:f).count,C="tinymce_jsonp_"+x;f.callbacks[x]=function(I){g.remove(C),delete f.callbacks[x],a.callback(I)},g.add(g.doc.body,"script",{id:C,src:a.url,type:"text/javascript"}),f.count++}},uM=hr(hr({},Wy),{send:function(a){var f,g=0,x=function(){!a.async||4===f.readyState||1e4<g++?(a.success&&g<1e4&&200===f.status?a.success.call(a.success_scope,""+f.responseText,f,a):a.error&&a.error.call(a.error_scope,1e4<g?"TIMED_OUT":"GENERAL",f,a),f=null):St.setTimeout(x,10)};if(a.scope=a.scope||this,a.success_scope=a.success_scope||a.scope,a.error_scope=a.error_scope||a.scope,a.async=!1!==a.async,a.data=a.data||"",uM.fire("beforeInitialize",{settings:a}),(f=new XMLHttpRequest).overrideMimeType&&f.overrideMimeType(a.content_type),f.open(a.type||(a.data?"POST":"GET"),a.url,a.async),a.crossDomain&&(f.withCredentials=!0),a.content_type&&f.setRequestHeader("Content-Type",a.content_type),a.requestheaders&&Qt.each(a.requestheaders,function(C){f.setRequestHeader(C.key,C.value)}),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),(f=uM.fire("beforeSend",{xhr:f,settings:a}).xhr).send(a.data),!a.async)return x();St.setTimeout(x,10)}}),wu=Qt.extend,TD=(aS.sendRPC=function(a){return(new aS).send(a)},aS.prototype.send=function(a){var f=a.error,g=a.success,x=wu(this.settings,a);x.success=function(C,I){(C=void 0===(C=iS.parse(C))?{error:"JSON Parse error."}:C).error?f.call(x.error_scope||x.scope,C.error,I):g.call(x.success_scope||x.scope,C.result)},x.error=function(C,I){f&&f.call(x.error_scope||x.scope,C,I)},x.data=iS.serialize({id:a.id||"c"+this.count++,method:a.method,params:a.params}),x.content_type="application/json",uM.send(x)},aS);function aS(a){this.settings=wu({},a),this.count=0}try{var p_,g_="__storage_test__";(p_=window.localStorage).setItem(g_,g_),p_.removeItem(g_)}catch{R1={},jy=[],L1={getItem:function(f){return R1[f]||null},setItem:function(f,g){jy.push(f),R1[f]=String(g)},key:function(f){return jy[f]},removeItem:function(f){jy=jy.filter(function(g){return g===f}),delete R1[f]},clear:function(){jy=[],R1={}},length:0},Object.defineProperty(L1,"length",{get:function(){return jy.length},configurable:!1,enumerable:!1}),p_=L1}var Zk=Qt.extend(Hh,{geom:{Rect:aM},util:{Promise:Pi,Delay:St,Tools:Qt,VK:Jr,URI:Xt,Class:Qc,EventDispatcher:D1,Observable:Wy,I18n:hd,XHR:uM,JSON:iS,JSONRequest:TD,JSONP:sM,LocalStorage:p_,Color:function(a){function f(L){var z;return"object"==typeof L?"r"in L?(x=L.r,C=L.g,I=L.b):"v"in L&&function(j,G,te){if(j=(parseInt(j,10)||0)%360,G=parseInt(G,10)/100,te=parseInt(te,10)/100,G=N1(0,h_(G,1)),te=N1(0,h_(te,1)),0!==G){var K=j/60,ie=te*G,le=ie*(1-Math.abs(K%2-1)),pe=te-ie;switch(Math.floor(K)){case 0:x=ie,C=le,I=0;break;case 1:x=le,C=ie,I=0;break;case 2:x=0,C=ie,I=le;break;case 3:x=0,C=le,I=ie;break;case 4:x=le,C=0,I=ie;break;case 5:x=ie,C=0,I=le;break;default:x=C=I=0}x=Bv(255*(x+pe)),C=Bv(255*(C+pe)),I=Bv(255*(I+pe))}else x=C=I=Bv(255*te)}(L.h,L.s,L.v):(z=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(L))?(x=parseInt(z[1],10),C=parseInt(z[2],10),I=parseInt(z[3],10)):(z=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(L))?(x=parseInt(z[1],16),C=parseInt(z[2],16),I=parseInt(z[3],16)):(z=/#([0-F])([0-F])([0-F])/gi.exec(L))&&(x=parseInt(z[1]+z[1],16),C=parseInt(z[2]+z[2],16),I=parseInt(z[3]+z[3],16)),x=x<0?0:255<x?255:x,C=C<0?0:255<C?255:C,I=I<0?0:255<I?255:I,g}var g={},x=0,C=0,I=0;return a&&f(a),g.toRgb=function(){return{r:x,g:C,b:I}},g.toHsv=function(){return L=x,z=C,j=I,te=0,(K=h_(L/=255,h_(z/=255,j/=255)))===(ie=N1(L,N1(z,j)))?{h:0,s:0,v:100*(te=K)}:(G=(ie-K)/ie,{h:Bv(60*((L===K?3:j===K?1:5)-(L===K?z-j:j===K?L-z:j-L)/((te=ie)-K))),s:Bv(100*G),v:Bv(100*te)});var L,z,j,G,te,K,ie},g.toHex=function(){function L(z){return 1<(z=parseInt(z,10).toString(16)).length?z:"0"+z}return"#"+L(x)+L(C)+L(I)},g.parse=f,g},ImageUploader:function(a){var f=Fx(),g=Jd(a,f);return{upload:function(x,C){return g.upload(x,(C=void 0===C||C)?gC(a):void 0)}}}},dom:{EventUtils:xs,Sizzle:ya,DomQuery:ko,TreeWalker:Ks,TextSeeker:Og,DOMUtils:ba,ScriptLoader:qc,RangeUtils:iv,Serializer:Oy,StyleSheetLoader:$y,ControlSelection:cx,BookmarkManager:Ho,Selection:GT,Event:xs.Event},html:{Styles:Un,Entities:Vc,Node:He,Schema:Wn,SaxParser:xn,DomParser:L0,Writer:Lr,Serializer:Qr},Env:Fr,AddOnManager:ws,Annotator:sx,Formatter:Ny,UndoManager:qT,EditorCommands:JC,WindowManager:yw,NotificationManager:gw,EditorObservable:eM,Shortcuts:fb,Editor:nM,FocusManager:se,EditorManager:Hh,DOM:ba.DOM,ScriptLoader:qc.ScriptLoader,PluginManager:dc,ThemeManager:Uf,IconManager:Nx,Resource:kD,trim:Qt.trim,isArray:Qt.isArray,is:Qt.is,toArray:Qt.toArray,makeMap:Qt.makeMap,each:Qt.each,map:Qt.map,grep:Qt.grep,inArray:Qt.inArray,extend:Qt.extend,create:Qt.create,walk:Qt.walk,createNS:Qt.createNS,resolve:Qt.resolve,explode:Qt.explode,_addCacheSuffix:Qt._addCacheSuffix,isOpera:Fr.opera,isWebKit:Fr.webkit,isIE:Fr.ie,isGecko:Fr.gecko,isMac:Fr.mac}),Kk=Zk;window.tinymce=Kk,window.tinyMCE=Kk,function(a){if("object"==typeof module)try{module.exports=a}catch{}}(Zk)}(),function(){"use strict";function mr(u){return function(h){return w=typeof(v=h),(null===v?"null":"object"==w&&(Array.prototype.isPrototypeOf(v)||v.constructor&&"Array"===v.constructor.name)?"array":"object"==w&&(String.prototype.isPrototypeOf(v)||v.constructor&&"String"===v.constructor.name)?"string":w)===u;var v,w}}function oi(u){return function(h){return typeof h===u}}function gt(u){return function(h){return u===h}}function us(u){return null==u}function zn(u,h){if(mi(u)){for(var v=0,w=u.length;v<w;++v)if(!h(u[v]))return;return 1}}function Gt(){}function cr(u,h){return function(){for(var v=[],w=0;w<arguments.length;w++)v[w]=arguments[w];return u(h.apply(null,v))}}function ct(u){return function(){return u}}function _n(u){return u}function jr(u,h){return u===h}var Pr=mr("string"),Bn=mr("object"),mi=mr("array"),_l=gt(null),Ci=oi("boolean"),Mi=gt(void 0),Kr=function(u){return!us(u)},wo=oi("function"),Va=oi("number");function Yo(u){for(var h=[],v=1;v<arguments.length;v++)h[v-1]=arguments[v];return function(){for(var w=[],A=0;A<arguments.length;A++)w[A]=arguments[A];var P=h.concat(w);return u.apply(null,P)}}function qr(u){return function(h){return!u(h)}}function ts(u){return function(){throw new Error(u)}}var uo=ct(!1),Ur=ct(!0),ho=tinymce.util.Tools.resolve("tinymce.ThemeManager"),qe=function(){return(qe=Object.assign||function(u){for(var h,v=1,w=arguments.length;v<w;v++)for(var A in h=arguments[v])Object.prototype.hasOwnProperty.call(h,A)&&(u[A]=h[A]);return u}).apply(this,arguments)};function an(u,h){var v={};for(A in u)Object.prototype.hasOwnProperty.call(u,A)&&h.indexOf(A)<0&&(v[A]=u[A]);if(null!=u&&"function"==typeof Object.getOwnPropertySymbols)for(var w=0,A=Object.getOwnPropertySymbols(u);w<A.length;w++)h.indexOf(A[w])<0&&Object.prototype.propertyIsEnumerable.call(u,A[w])&&(v[A[w]]=u[A[w]]);return v}function ln(u,h,v){if(v||2===arguments.length)for(var w,A=0,P=h.length;A<P;A++)!w&&A in h||((w=w||Array.prototype.slice.call(h,0,A))[A]=h[A]);return u.concat(w||Array.prototype.slice.call(h))}function la(){return Lt}var Lt={fold:function(u,h){return u()},isSome:uo,isNone:Ur,getOr:_n,getOrThunk:Yn,getOrDie:function(u){throw new Error(u||"error: getOrDie called on none.")},getOrNull:ct(null),getOrUndefined:ct(void 0),or:_n,orThunk:Yn,map:la,each:Gt,bind:la,exists:uo,forall:Ur,filter:function(){return Lt},toArray:function(){return[]},toString:ct("none()")};function Yn(u){return u()}function Jo(u,h){return su.call(u,h)}function Ir(u,h){for(var v=0,w=u.length;v<w;v++)if(h(u[v],v))return!0;return!1}function Cu(u,h){for(var v=[],w=0;w<u;w++)v.push(h(w));return v}function na(u,h){for(var v=[],w=0;w<u.length;w+=h){var A=El.call(u,w,w+h);v.push(A)}return v}function nn(u,h){for(var v=u.length,w=new Array(v),A=0;A<v;A++)w[A]=h(u[A],A);return w}function Ce(u,h){for(var v=[],w=[],A=0,P=u.length;A<P;A++){var H=u[A];(h(H,A)?v:w).push(H)}return{pass:v,fail:w}}function mt(u,h){for(var v=[],w=0,A=u.length;w<A;w++){var P=u[w];h(P,w)&&v.push(P)}return v}function Pn(u,h,v){return function(w){for(var P=w.length-1;0<=P;P--)v=h(v,w[P],P)}(u),v}function yo(u,h,v){return Tr(u,function(w,A){v=h(v,w,A)}),v}function Yi(u,h){return function(v,w,A){for(var P=0,H=v.length;P<H;P++){var Y=v[P];if(w(Y,P))return $.some(Y);if(A(Y,P))break}return $.none()}(u,h,uo)}function rr(u,h){for(var v=0,w=u.length;v<w;v++)if(h(u[v],v))return $.some(v);return $.none()}function De(u){for(var h=[],v=0,w=u.length;v<w;++v){if(!mi(u[v]))throw new Error("Arr.flatten item "+v+" was not an array, input: "+u);br.apply(h,u[v])}return h}function dr(u,h){return De(nn(u,h))}function Ue(u,h){for(var v=0,w=u.length;v<w;++v)if(!0!==h(u[v],v))return!1;return!0}function yr(u){var h=El.call(u,0);return h.reverse(),h}function ir(u,h){return mt(u,function(v){return!Fo(h,v)})}function gc(u,h){for(var v={},w=0,A=u.length;w<A;w++){var P=u[w];v[String(P)]=h(P,w)}return v}function gr(u){return[u]}function wr(u,h){var v=El.call(u,0);return v.sort(h),v}function Mu(u,h){return 0<=h&&h<u.length?$.some(u[h]):$.none()}function ca(u){return Mu(u,0)}function ku(u){return Mu(u,u.length-1)}function sn(u,h){for(var v=0;v<u.length;v++){var w=h(u[v],v);if(w.isSome())return w}return $.none()}function Ht(u,h){for(var v=ra(u),w=0,A=v.length;w<A;w++){var P=v[w];h(u[P],P)}}function On(u,h){return Vu(u,function(v,w){return{k:w,v:h(v,w)}})}function wn(u,h){var v=[];return Ht(u,function(w,A){v.push(h(w,A))}),v}function Hn(u,h){for(var v=ra(u),w=0,A=v.length;w<A;w++){var P=v[w],H=u[P];if(h(H,P,u))return $.some(H)}return $.none()}function un(u){return wn(u,_n)}function rn(u,h){return hr(u,h)?$.from(u[h]):$.none()}function zo(u,h){return hr(u,h)&&null!=u[h]}function Sr(u,h,v){return void 0===v&&(v=jr),u.exists(function(w){return v(w,h)})}function Ao(u){for(var h=[],v=function(A){h.push(A)},w=0;w<u.length;w++)u[w].each(v);return h}function ki(u,h){return u?$.some(h):$.none()}function ns(u,h,v){return""===h||u.length>=h.length&&u.substr(v,v+h.length)===h}function ni(u,h){return-1!==u.indexOf(h)}function Fu(u){return 0<u.length}function rs(u){return void 0!==u.style&&wo(u.style.getPropertyValue)}function Ys(u){if(null==u)throw new Error("Node cannot be null or undefined");return{dom:u}}var Ts,Or=function(u){function h(){return A}function v(P){return P(u)}var w=ct(u),A={fold:function(P,H){return H(u)},isSome:Ur,isNone:uo,getOr:w,getOrThunk:w,getOrDie:w,getOrNull:w,getOrUndefined:w,or:h,orThunk:h,map:function(P){return Or(P(u))},each:function(P){P(u)},bind:v,exists:v,forall:v,filter:function(P){return P(u)?A:Lt},toArray:function(){return[u]},toString:function(){return"some("+u+")"}};return A},$={some:Or,none:la,from:function(u){return null==u?Lt:Or(u)}},El=Array.prototype.slice,su=Array.prototype.indexOf,br=Array.prototype.push,Fo=function(u,h){return-1<Jo(u,h)},Tr=function(u,h){for(var v=0,w=u.length;v<w;v++)h(u[v],v)},lh=wo(Array.from)?Array.from:function(u){return El.call(u)},ra=Object.keys,po=Object.hasOwnProperty,Vu=function(u,h){var v={};return Ht(u,function(w,A){var P=h(w,A);v[P.k]=P.v}),v},hr=function(u,h){return po.call(u,h)},Ot=function(u,h,v){return u.isSome()&&h.isSome()?$.some(v(u.getOrDie(),h.getOrDie())):$.none()},Dn=function(u,h){return ns(u,h,0)},Ke=function(u,h){return ns(u,h,u.length-h.length)},bt=(Ts=/^\s+|\s+$/g,function(u){return u.replace(Ts,"")}),it={fromHtml:function(u,h){var v=(h||document).createElement("div");if(v.innerHTML=u,!v.hasChildNodes()||1<v.childNodes.length)throw console.error("HTML does not have a single root node",u),new Error("HTML must have a single root node");return Ys(v.childNodes[0])},fromTag:function(u,h){return Ys((h||document).createElement(u))},fromText:function(u,h){return Ys((h||document).createTextNode(u))},fromDom:Ys,fromPoint:function(u,h,v){return $.from(u.dom.elementFromPoint(h,v)).map(Ys)}};function qt(u){return u.dom.nodeName.toLowerCase()}function Bt(u){return function(h){return h.dom.nodeType===u}}function Zt(u){var h,v=!1;return function(){for(var w=[],A=0;A<arguments.length;A++)w[A]=arguments[A];return v||(v=!0,h=u.apply(null,w)),h}}function er(u,h){var v=String(h).toLowerCase();return Yi(u,function(w){return w.search(v)})}function Rn(u){return function(h){return ni(h,u)}}function Fn(u){return window.matchMedia(u).matches}function ur(u,h){var v=u.dom;if(1!==v.nodeType)return!1;var w=v;if(void 0!==w.matches)return w.matches(h);if(void 0!==w.msMatchesSelector)return w.msMatchesSelector(h);if(void 0!==w.webkitMatchesSelector)return w.webkitMatchesSelector(h);if(void 0!==w.mozMatchesSelector)return w.mozMatchesSelector(h);throw new Error("Browser lacks native selectors")}function Ln(u){return 1!==u.nodeType&&9!==u.nodeType&&11!==u.nodeType||0===u.childElementCount}function fn(u,h){return u.dom===h.dom}function gn(u,h){return fu().browser.isIE()?(A=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(u.dom.compareDocumentPosition(h.dom)&A)):(P=u.dom)!==(H=h.dom)&&P.contains(H);var A,P,H}function Dt(u){return it.fromDom(u.dom.ownerDocument)}function ro(u){return Lc(u)?u:Dt(u)}function so(u){return it.fromDom(ro(u).dom.documentElement)}function eo(u){return it.fromDom(ro(u).dom.defaultView)}function Xr(u){return $.from(u.dom.parentNode).map(it.fromDom)}function bo(u){return $.from(u.dom.offsetParent).map(it.fromDom)}function Ti(u){return nn(u.dom.childNodes,it.fromDom)}function $r(u,h){return $.from(u.dom.childNodes[h]).map(it.fromDom)}function uu(u,h){return{element:u,offset:h}}function Dr(u,h){var v=Ti(u);return 0<v.length&&h<v.length?uu(v[h],0):uu(u,h)}function go(u){return Sp(u)&&Kr(u.dom.host)}function oa(u){return go(u)?u:it.fromDom(ro(u).dom.body)}function Ns(u){return it.fromDom(u.dom.host)}function qs(u,h,v){if(!(Pr(v)||Ci(v)||Va(v)))throw console.error("Invalid call to Attribute.set. Key ",h,":: Value ",v,":: Element ",u),new Error("Attribute value was not simple");u.setAttribute(h,v+"")}function Gr(u,h,v){qs(u.dom,h,v)}function Ha(u,h){var v=u.dom;Ht(h,function(w,A){qs(v,A,w)})}function Wa(u,h){var v=u.dom.getAttribute(h);return null===v?void 0:v}function Ds(u,h){return $.from(Wa(u,h))}function Bs(u,h){var v=u.dom;return!(!v||!v.hasAttribute)&&v.hasAttribute(h)}function ls(u,h){u.dom.removeAttribute(h)}function Mm(u,h,v){if(!Pr(v))throw console.error("Invalid call to CSS.set. Property ",h,":: Value ",v,":: Element ",u),new Error("CSS value must be a string: "+v);rs(u)&&u.style.setProperty(h,v)}function xp(u,h){rs(u)&&u.style.removeProperty(h)}function to(u,h,v){Mm(u.dom,h,v)}function wa(u,h){var v=u.dom;Ht(h,function(w,A){Mm(v,A,w)})}function Tu(u,h){var v=u.dom;Ht(h,function(w,A){w.fold(function(){xp(v,A)},function(P){Mm(v,A,P)})})}function As(u,h){var v=u.dom,w=window.getComputedStyle(v).getPropertyValue(h);return""!==w||Zs(u)?w:zl(v,h)}function Di(u,h){var w=zl(u.dom,h);return $.from(w).filter(function(A){return 0<A.length})}function Pc(u,h,v){var w=it.fromTag(u);return to(w,h,v),Di(w,h).isSome()}function Lo(u,h){xp(u.dom,h),Sr(Ds(u,"style").map(bt),"")&&ls(u,"style")}function _p(u){return u.dom.offsetWidth}function bg(u,h){function v(A){var P=h(A);if(P<=0||null===P){var H=As(A,u);return parseFloat(H)||0}return P}function w(A,P){return yo(P,function(H,Y){var X=As(A,Y),oe=void 0===X?0:parseInt(X,10);return isNaN(oe)?H:H+oe},0)}return{set:function(A,P){if(!Va(P)&&!P.match(/^[0-9]+$/))throw new Error(u+".set accepts only positive integer values. Value was "+P);var H=A.dom;rs(H)&&(H.style[u]=P+"px")},get:v,getOuter:v,aggregate:w,max:function(A,P,H){var Y=w(A,H);return Y<P?P-Y:0}}}function Hu(u){return Nc.get(u)}function Fr(u){return Nc.getOuter(u)}function Rc(u,h){return void 0!==u?u:void 0!==h?h:0}function Pl(u){var h=u.dom.ownerDocument,v=h.body,w=h.defaultView,A=h.documentElement;if(v===u.dom)return Ja(v.offsetLeft,v.offsetTop);var P=Rc(null==w?void 0:w.pageYOffset,A.scrollTop),H=Rc(null==w?void 0:w.pageXOffset,A.scrollLeft),Y=Rc(A.clientTop,v.clientTop),X=Rc(A.clientLeft,v.clientLeft);return km(u).translate(H-X,P-Y)}function Qt(u){return Sa.get(u)}function It(u){return Sa.getOuter(u)}function Ga(u){function h(){return u.stopPropagation()}function v(){return u.preventDefault()}var w=cr(v,h);return{target:it.fromDom(function(A){if(fs()&&Kr(A.target)){var P=it.fromDom(A.target);if(Au(P)&&ec(P)&&A.composed&&A.composedPath){var H=A.composedPath();if(H)return ca(H)}}return $.from(A.target)}(u).getOr(u.target)),x:u.clientX,y:u.clientY,stop:h,prevent:v,kill:w,raw:u}}function wp(u,h,v,w,A){var P,H,Y=(P=v,H=w,function(X){P(X)&&H(Ga(X))});return u.dom.addEventListener(h,Y,A),{unbind:Yo(wl,u,h,Y,A)}}function lo(u,h){Xr(u).each(function(v){v.dom.insertBefore(h.dom,u.dom)})}function lu(u,h){$.from(u.dom.nextSibling).map(it.fromDom).fold(function(){Xr(u).each(function(v){Qa(v,h)})},function(v){lo(v,h)})}function Dd(u,h){$r(u,0).fold(function(){Qa(u,h)},function(v){u.dom.insertBefore(h.dom,v.dom)})}function cs(u,h){Tr(h,function(v){Qa(u,v)})}function cu(u){u.dom.textContent="",Tr(Ti(u),function(h){rf(h)})}function Xs(u){var h,v=Ti(u);0<v.length&&(h=u,Tr(v,function(w){lo(h,w)})),rf(u)}function $o(u){var h=void 0!==u?u.dom:document;return Ja(h.body.scrollLeft||h.documentElement.scrollLeft,h.body.scrollTop||h.documentElement.scrollTop)}function nd(u,h,v){var w=(void 0!==v?v.dom:document).defaultView;w&&w.scrollTo(u,h)}function Ql(u,h,v,w){return{x:u,y:h,width:v,height:w,right:u+v,bottom:h+w}}function Io(u){var h=void 0===u?window:u,w=$o(it.fromDom(h.document)),A=void 0===h?window:h;return(fu().browser.isFirefox()?$.none():$.from(A.visualViewport)).fold(function(){var P=h.document.documentElement;return Ql(w.left,w.top,P.clientWidth,P.clientHeight)},function(P){return Ql(Math.max(P.pageLeft,w.left),Math.max(P.pageTop,w.top),P.width,P.height)})}function xg(u){var h,v=$o(it.fromDom(document)),w=(h=Wu).owner(u),A=yb(h,w);return $.some(A).fold(Yo(Pl,u),function(P){var H=km(u),Y=Pn(P,function(X,oe){var ue=km(oe);return{left:X.left+ue.left,top:X.top+ue.top}},{left:0,top:0});return Ja(Y.left+H.left+v.left,Y.top+H.top+v.top)})}function rl(u){var h=xg(u),v=It(u),w=Fr(u);return Gu(h.left,h.top,v,w)}function mc(){return Cp(0,0)}function Uh(u){function h(A){return function(){return v===A}}var v=u.current;return{current:v,version:u.version,isEdge:h("Edge"),isChrome:h("Chrome"),isIE:h("IE"),isOpera:h("Opera"),isFirefox:h(jh),isSafari:h("Safari")}}function zs(u){function h(A){return function(){return v===A}}var v=u.current;return{current:v,version:u.version,isWindows:h(sa),isiOS:h("iOS"),isAndroid:h(ch),isOSX:h("OSX"),isLinux:h("Linux"),isSolaris:h(Nl),isFreeBSD:h(Cf),isChromeOS:h(Mf)}}"undefined"!=typeof window||Function("return this;")();var Rl,Du,Au=Bt(1),Ll=Bt(3),Lc=Bt(9),Sp=Bt(11),Cp=function(u,h){return{major:u,minor:h}},Ad={nu:Cp,detect:function(u,h){var v,w,A=String(h).toLowerCase();return 0===u.length?mc():(w=function(H,Y){for(var X=0;X<H.length;X++){var oe=H[X];if(oe.test(Y))return oe}}(u,v=A))?Cp(P(1),P(2)):{major:0,minor:0};function P(H){return Number(v.replace(w,"$"+H))}},unknown:mc},Id=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,_g={browsers:ct([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(u){return ni(u,"edge/")&&ni(u,"chrome")&&ni(u,"safari")&&ni(u,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Id],search:function(u){return ni(u,"chrome")&&!ni(u,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(u){return ni(u,"msie")||ni(u,"trident")}},{name:"Opera",versionRegexes:[Id,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Rn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Rn("firefox")},{name:"Safari",versionRegexes:[Id,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(u){return(ni(u,"safari")||ni(u,"mobile/"))&&ni(u,"applewebkit")}}]),oses:ct([{name:"Windows",search:Rn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(u){return ni(u,"iphone")||ni(u,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Rn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:Rn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Rn("linux"),versionRegexes:[]},{name:"Solaris",search:Rn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Rn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Rn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},jh="Firefox",vc=function(){return Uh({current:void 0,version:Ad.unknown()})},Ai=Uh,sa=(ct("Edge"),ct("Chrome"),ct("IE"),ct("Opera"),ct(jh),ct("Safari"),"Windows"),ch="Android",Nl="Solaris",Cf="FreeBSD",Mf="ChromeOS",ol=function(){return zs({current:void 0,version:Ad.unknown()})},nf=zs,fu=(ct(sa),ct("iOS"),ct(ch),ct("Linux"),ct("OSX"),ct(Nl),ct(Cf),ct(Mf),Zt(function(){return u=navigator.userAgent,h=$.from(navigator.userAgentData),v=Fn,Oe=_g.browsers(),Re=_g.oses(),{browser:Ne=h.bind(function(Te){return Ve=Oe,sn(Te.brands,function(Qe){var lt=Qe.brand.toLowerCase();return Yi(Ve,function(Ft){var Tt;return lt===(null===(Tt=Ft.brand)||void 0===Tt?void 0:Tt.toLowerCase())}).map(function(Ft){return{current:Ft.name,version:Ad.nu(parseInt(Qe.version,10),0)}})});var Ve}).orThunk(function(){return er(Oe,Te=u).map(function(Ve){var Qe=Ad.detect(Ve.versionRegexes,Te);return{current:Ve.name,version:Qe}});var Te}).fold(vc,Ai),os:We=er(Re,w=u).map(function(Te){var Ve=Ad.detect(Te.versionRegexes,w);return{current:Te.name,version:Ve}}).fold(ol,nf),deviceType:(P=Ne,H=u,Y=v,X=(A=We).isiOS()&&!0===/ipad/i.test(H),oe=A.isiOS()&&!X,de=(ue=A.isiOS()||A.isAndroid())||Y("(pointer:coarse)"),ye=X||!oe&&ue&&Y("(min-device-width:768px)"),Se=oe||ue&&!ye,Pe=P.isSafari()&&A.isiOS()&&!1===/safari/i.test(H),{isiPad:ct(X),isiPhone:ct(oe),isTablet:ct(ye),isPhone:ct(Se),isTouch:ct(de),isAndroid:A.isAndroid,isiOS:A.isiOS,isWebView:ct(Pe),isDesktop:ct(!Se&&!ye&&!Pe)})};var u,h,v,w,A,P,H,Y,X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne,We})),yc=Xr,Ta=wo(Element.prototype.attachShadow)&&wo(Node.prototype.getRootNode),fs=ct(Ta),zi=Ta?function(u){return it.fromDom(u.dom.getRootNode())}:ro,Bl=function(u){var h=zi(u);return go(h)?$.some(h):$.none()},ec=function(u){return Kr(u.dom.shadowRoot)},Zs=function(u){var h=Ll(u)?u.dom.parentNode:u.dom;if(null==h||null===h.ownerDocument)return!1;var v,w,A=h.ownerDocument;return Bl(it.fromDom(h)).fold(function(){return A.body.contains(h)},(v=Zs,w=Ns,function(P){return v(w(P))}))},Da=function(){return rd(it.fromDom(document))},rd=function(u){var h=u.dom.body;if(null==h)throw new Error("Body is not available yet");return it.fromDom(h)},zl=function(u,h){return rs(u)?u.style.getPropertyValue(h):""},Nc=bg("height",function(u){var h=u.dom;return Zs(u)?h.getBoundingClientRect().height:h.offsetHeight}),kf=function(u,h){return{left:u,top:h,translate:function(v,w){return kf(u+v,h+w)}}},Ja=kf,km=function(u){var h,v=u.dom,w=v.ownerDocument.body;return w===v?Ja(w.offsetLeft,w.offsetTop):Zs(u)?(h=v.getBoundingClientRect(),Ja(h.left,h.top)):Ja(0,0)},Sa=bg("width",function(u){return u.dom.offsetWidth}),wl=function(u,h,v,w){u.dom.removeEventListener(h,v,w)},Qa=function(u,h){u.dom.appendChild(h.dom)},rf=function(u){var h=u.dom;null!==h.parentNode&&h.parentNode.removeChild(h)},yb=function(u,h){return u.view(h).fold(ct([]),function(v){var w=u.owner(v),A=yb(u,w);return[v].concat(A)})},Wu=Object.freeze({__proto__:null,view:function(u){var h;return(u.dom===document?$.none():$.from(null===(h=u.dom.defaultView)||void 0===h?void 0:h.frameElement)).map(it.fromDom)},owner:Dt}),Gu=function(u,h,v,w){return{x:u,y:h,width:v,height:w,right:u+v,bottom:h+w}},Sl=function(u){var h=Pl(u),v=It(u),w=Fr(u);return Gu(h.left,h.top,v,w)},Aa=function(){return Io(window)},Fs=function(u){return{isValue:Ur,isError:uo,getOr:ct(u),getOrThunk:ct(u),getOrDie:ct(u),or:function(h){return Fs(u)},orThunk:function(h){return Fs(u)},fold:function(h,v){return v(u)},map:function(h){return Fs(h(u))},mapError:function(h){return Fs(u)},each:function(h){h(u)},bind:function(h){return h(u)},exists:function(h){return h(u)},forall:function(h){return h(u)},toOptional:function(){return $.some(u)}}},Is=function(u){return{isValue:uo,isError:Ur,getOr:_n,getOrThunk:function(h){return h()},getOrDie:function(){return ts(String(u))()},or:_n,orThunk:function(h){return h()},fold:function(h,v){return h(u)},map:function(h){return Is(u)},mapError:function(h){return Is(h(u))},each:Gt,bind:function(h){return Is(u)},exists:uo,forall:Ur,toOptional:$.none}},Vo={value:Fs,error:Is,fromOption:function(u,h){return u.fold(function(){return Is(h)},Fs)}};function Mp(u,h,v){return u.stype===Rl.Error?h(u.serror):v(u.svalue)}function Uu(u){return{stype:Rl.Value,svalue:u}}function Ia(u){return{stype:Rl.Error,serror:u}}function co(u,h,v,w){return{tag:"field",key:u,newKey:h,presence:v,prop:w}}function Bc(u,h,v){switch(u.tag){case"field":return h(u.key,u.newKey,u.presence,u.prop);case"custom":return v(u.newKey,u.instantiator)}}function Ar(u){return function(){for(var h=[],v=0;v<arguments.length;v++)h[v]=arguments[v];if(0===h.length)throw new Error("Can't merge zero objects");for(var w={},A=0;A<h.length;A++){var P,H=h[A];for(P in H)hr(H,P)&&(w[P]=u(w[P],H[P]))}return w}}function il(u){return{tag:"defaultedThunk",process:u}}function Yh(u){return il(ct(u))}function Oo(u){return{tag:"mergeWithThunk",process:u}}function Yu(u){return Bn(u)&&100<ra(u).length?" removed due to size":JSON.stringify(u,null,2)}function oo(u,h){return y([{path:u,getErrorInfo:h}])}function vs(u){return{extract:function(h,v){return E(u(v),function(w){return oo(h,ct(w))})},toString:ct("val")}}function Cl(u,h,v,w){return w(rn(u,h).getOrThunk(function(){return v(u)}))}function Tm(u,h,v,w,A){function P(Se){return A.extract(h.concat([w]),Se)}function H(Se){return Se.fold(function(){return ad($.none())},function(Pe){var Oe=A.extract(h.concat([w]),Pe);return B(Oe,$.some)})}var Y,X,oe,ue,de,ye;switch(u.tag){case"required":return oe=h,ye=P,rn(ue=v,de=w).fold(function(){return Se=de,Pe=ue,oo(oe,function(){return'Could not find valid *required* value for "'+Se+'" in '+Yu(Pe)});var Se,Pe},ye);case"defaultedThunk":return Cl(v,w,u.process,P);case"option":return H(rn(v,w));case"defaultedOptionThunk":return X=u.process,H(rn(Y=v,w).map(function(Se){return!0===Se?X(Y):Se}));case"mergeWithThunk":return Cl(v,w,ct({}),function(Se){return P(ee(u.process(v),Se))})}}function Dm(u){return{extract:function(h,v){return u().extract(h,v)},toString:function(){return u().toString()}}}function qu(u){var h=ke(u),v=Pn(u,function(w,A){return Bc(A,function(P){var H;return ee(w,((H={})[P]=!0,H))},ct(w))},{});return{extract:function(w,A){var P,H,Y,X,oe,ue,de=mt(Ci(A)?[]:ra((Y=Kr,X=H={},oe=function(ye,Se){X[Se]=ye},ue=Gt,Ht(A,function(ye,Se){(Y(ye,Se)?oe:ue)(ye,Se)}),H)),function(ye){return!zo(v,ye)});return 0===de.length?h.extract(w,A):(P=de,oo(w,function(){return"There are unsupported fields: ["+P.join(", ")+"] specified"}))},toString:h.toString}}function zc(u){return{extract:function(h,v){var w=nn(v,function(A,P){return u.extract(h.concat(["["+P+"]"]),A)});return fe(w)},toString:function(){return"array("+u.toString()+")"}}}function du(u){return{extract:function(h,v){for(var w=[],A=0,P=u;A<P.length;A++){var H=P[A].extract(h,v);if(H.stype===Rl.Value)return H;w.push(H)}return fe(w)},toString:function(){return"oneOf("+nn(u,function(h){return h.toString()}).join(", ")+")"}}}function od(u,h){return vs(function(v){var w=typeof v;return u(v)?ad(v):y("Expected type: "+h+" but got: "+w)})}function hu(u,h){return{extract:function(v,w){return rn(w,u).fold(function(){return A=u,oo(v,function(){return'Choice schema did not contain choice key: "'+A+'"'});var A},function(A){return P=v,H=w,rn(Y=h,X=A).fold(function(){return oe=Y,ue=X,oo(P,function(){return'The chosen schema: "'+ue+'" did not exist in branches: '+Yu(oe)});var oe,ue},function(oe){return oe.extract(P.concat(["branch: "+X]),H)});var P,H,Y,X})},toString:function(){return"chooseOn("+u+"). Possible values: "+ra(h)}}}function Od(u){return vs(function(h){return u(h).fold(y,ad)})}function qh(u,h){return v=function(A){return u(A).fold(Ia,Uu)},w=h,{extract:function(A,P){var H=ra(P),Y=zc(vs(v)).extract(A,H);return T(Y,function(X){var oe=nn(X,function(ue){return co(ue,ue,{tag:"required",process:{}},w)});return ke(oe).extract(A,P)})},toString:function(){return"setOf("+w.toString()+")"}};var v,w}function ga(u,h,v){return Dp((A=h.extract([u],w=v),U(A,function(P){return{input:w,errors:P}})));var w,A}function Vs(u){return u.fold(function(h){throw new Error(Un(h))},_n)}function pu(u,h,v){return Vs(ga(u,h,v))}function es(u,h){return hu(u,On(h,ke))}function kp(u){return Od(function(h){return Fo(u,h)?Vo.value(h):Vo.error('Unsupported value: "'+h+'", choose one of "'+u.join(", ")+'".')})}function pn(u){return $n(u,u,{tag:"required",process:{}},Ze())}function tc(u,h){return $n(u,u,{tag:"required",process:{}},h)}function Yr(u){return tc(u,rt)}function fh(u,h){return $n(u,u,{tag:"required",process:{}},kp(h))}function Xu(u){return tc(u,Vt)}function Tf(u,h){return $n(u,u,{tag:"required",process:{}},ke(h))}function Df(u,h){return $n(u,u,{tag:"required",process:{}},Fe(h))}function al(u,h){return $n(u,u,{tag:"required",process:{}},zc(h))}function vi(u){return $n(u,u,{tag:"option",process:{}},Ze())}function id(u,h){return $n(u,u,{tag:"option",process:{}},h)}function $y(u){return id(u,ot)}function Qi(u){return id(u,rt)}function bc(u){return id(u,Vt)}function of(u,h){return id(u,zc(h))}function Pi(u,h){return id(u,ke(h))}function St(u,h){return $n(u,u,Yh(h),Ze())}function Fc(u,h,v){return $n(u,u,Yh(h),v)}function Ks(u,h){return Fc(u,h,ot)}function nc(u,h){return Fc(u,h,rt)}function ys(u,h,v){return Fc(u,h,kp(v))}function ds(u,h){return Fc(u,h,Ct)}function Zi(u,h){return Fc(u,h,Vt)}function sl(u,h,v){return Fc(u,h,zc(v))}function Tp(u,h,v){return Fc(u,h,ke(v))}function Nr(u){var h=u;return{get:function(){return h},set:function(v){h=v}}}function bs(u){if(!mi(u))throw new Error("cases must be an array");if(0===u.length)throw new Error("there must be at least one case");var h=[],v={};return Tr(u,function(w,A){var P=ra(w);if(1!==P.length)throw new Error("one and only one name per case");var H=P[0],Y=w[H];if(void 0!==v[H])throw new Error("duplicate key detected:"+H);if("cata"===H)throw new Error("cannot have a case named cata (sorry)");if(!mi(Y))throw new Error("case arguments must be an array");h.push(H),v[H]=function(){for(var X=[],oe=0;oe<arguments.length;oe++)X[oe]=arguments[oe];var ue=X.length;if(ue!==Y.length)throw new Error("Wrong number of arguments to case "+H+". Expected "+Y.length+" ("+Y+"), got "+ue);return{fold:function(){for(var de=[],ye=0;ye<arguments.length;ye++)de[ye]=arguments[ye];if(de.length!==u.length)throw new Error("Wrong number of arguments to fold. Expected "+u.length+", got "+de.length);return de[A].apply(null,X)},match:function(de){var ye=ra(de);if(h.length!==ye.length)throw new Error("Wrong number of arguments to match. Expected: "+h.join(",")+"\nActual: "+ye.join(","));if(!Ue(h,function(Se){return Fo(ye,Se)}))throw new Error("Not all branches were specified when using match. Specified: "+ye.join(", ")+"\nRequired: "+h.join(", "));return de[H].apply(null,X)},log:function(de){console.log(de,{constructors:h,constructor:H,params:X})}}}}),v}(Du=Rl={})[Du.Error=0]="Error",Du[Du.Value=1]="Value";var Dp=function(u){return Mp(u,Vo.error,Vo.value)},ad=Uu,y=Ia,T=function(u,h){return u.stype===Rl.Value?h(u.svalue):u},E=function(u,h){return u.stype===Rl.Error?h(u.serror):u},B=function(u,h){return u.stype===Rl.Value?{stype:Rl.Value,svalue:h(u.svalue)}:u},U=function(u,h){return u.stype===Rl.Error?{stype:Rl.Error,serror:h(u.serror)}:u},ne=Mp,ee=Ar(function(u,h){return Bn(u)&&Bn(h)?ee(u,h):h}),ae=Ar(function(u,h){return h}),fe=function(u){var h,v,w=(h=[],v=[],Tr(u,function(A){Mp(A,function(P){return v.push(P)},function(P){return h.push(P)})}),{values:h,errors:v});return 0<w.errors.length?cr(y,De)(w.errors):ad(w.values)},Me=vs(ad),ke=function(u){return{extract:function(h,v){for(var w={},A=[],P=0,H=u;P<H.length;P++)Bc(H[P],function(Y,X,oe,ue){var de=Tm(oe,h,v,Y,ue);ne(de,function(ye){A.push.apply(A,ye)},function(ye){w[X]=ye})},function(Y,X){w[Y]=X(v)});return 0<A.length?y(A):ad(w)},toString:function(){return"obj{\n"+nn(u,function(h){return Bc(h,function(v,w,A,P){return v+" -> "+P.toString()},function(v,w){return"state("+v+")"})}).join("\n")+"}"}}},Fe=cr(zc,ke),Ze=ct(Me),ot=od(Va,"number"),rt=od(Pr,"string"),Ct=od(Ci,"boolean"),Vt=od(wo,"function"),Wn=function(u){if(Object(u)!==u)return!0;switch({}.toString.call(u).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(u).every(function(h){return Wn(u[h])});default:return!1}},An=vs(function(u){return Wn(u)?ad(u):y("Expected value to be acceptable for sending via postMessage")}),Un=function(u){return"Errors: \n"+nn(10<(h=u.errors).length?h.slice(0,10).concat([{path:[],getErrorInfo:ct("... (only showing first ten failures)")}]):h,function(v){return"Failed path: ("+v.path.join(" > ")+")\n"+v.getErrorInfo()}).join("\n")+"\n\nInput object: "+Yu(u.input);var h},$n=co,fr=function(u,h){return{tag:"custom",newKey:u,instantiator:h}};function Hr(u,h){return(v={})[u]=h,v;var v}function Co(u){return h={},Tr(u,function(v){h[v.key]=v.value}),h;var h}function Mo(u){return wo(u)?u:uo}function Zr(u,h,v){for(var w=u.dom,A=Mo(v);w.parentNode;){var P=it.fromDom(w=w.parentNode),H=h(P);if(H.isSome())return H;if(A(P))break}return $.none()}function Qo(u,h,v){var w=h(u),A=Mo(v);return w.orThunk(function(){return A(u)?$.none():Zr(u,h,A)})}function Ki(u,h){return fn(u.element,h.event.target)}function Ii(u){if(!zo(u,"can")&&!zo(u,"abort")&&!zo(u,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(u,null,2)+" does not have can, abort, or run!");return qe(qe({},xb),u)}function To(u){return ct("alloy."+u)}function Rr(u,h){$h(u,u.element,h,{})}function vr(u,h,v){$h(u,u.element,h,v)}function ma(u){Rr(u,af())}function Fi(u,h,v){$h(u,h,v,{})}function xa(u,h,v,w){u.getSystem().triggerEvent(v,h,w.event)}function ua(u,h){return{key:u,value:Ii({abort:h})}}function Fl(u){return{key:u,value:Ii({run:function(h,v){v.event.prevent()}})}}function on(u,h){return{key:u,value:Ii({run:h})}}function Vl(u,h,v){return{key:u,value:Ii({run:function(w,A){h.apply(void 0,[w,A].concat(v))}})}}function va(u){return function(h){return{key:u,value:Ii({run:function(v,w){Ki(v,w)&&h(v,w)}})}}}function dh(u,h,v){var w,A=h.partUids[v];return on(w=u,function(P,H){P.getSystem().getByUid(A).each(function(Y){xa(Y,Y.element,w,H)})})}function Ap(u,h){return on(u,function(v,w){var A=w.event,P=v.getSystem().getByDom(A.target).getOrThunk(function(){return Qo(A.target,function(H){return v.getSystem().getByDom(H).toOptional()},uo).getOr(v)});h(v,P,w)})}function hh(u){return on(u,function(h,v){v.cut()})}function qv(u,h){return va(u)(h)}function Ip(u){return u.dom.innerHTML}function Jy(u,h){var v,w,A=Dt(u).dom,P=it.fromDom(A.createDocumentFragment());cs(P,(v=h,(w=(A||document).createElement("div")).innerHTML=v,Ti(it.fromDom(w)))),cu(u),Qa(u,P)}function sd(u){if(go(u))return"#shadow-root";var h=it.fromDom(u.dom.cloneNode(!1)),v=it.fromTag("div"),w=it.fromDom(h.dom.cloneNode(!0));return Qa(v,w),Ip(v)}function Br(u){var h=(new Date).getTime();return u+"_"+Math.floor(1e9*Math.random())+ ++Sb+String(h)}function Am(u){var h=Au(u)?u.dom[Cb]:null;return $.from(h)}function Y1(u){function h(A){return"The component must be in a context to execute: "+A+(u?"\n"+sd(u().element)+" is not in context.":"")}function v(A){return function(){throw new Error(h(A))}}function w(A){return function(){console.warn(h(A))}}return{debugInfo:ct("fake"),triggerEvent:w("triggerEvent"),triggerFocus:w("triggerFocus"),triggerEscape:w("triggerEscape"),broadcast:w("broadcast"),broadcastOn:w("broadcastOn"),broadcastEvent:w("broadcastEvent"),build:v("build"),addToWorld:v("addToWorld"),removeFromWorld:v("removeFromWorld"),addToGui:v("addToGui"),removeFromGui:v("removeFromGui"),getByUid:v("getByUid"),getByDom:v("getByDom"),isConnected:uo}}function Ed(u,h){var v=u.toString(),w=v.indexOf(")")+1,A=v.indexOf("("),P=v.substring(A+1,w-1).split(/,\s*/);return u.toFunctionAnnotation=function(){return{name:h,parameters:Tg(P)}},u}function xo(u){return Hr(_h,u)}function Op(u){return h=function(H){for(var Y=[],X=1;X<arguments.length;X++)Y[X-1]=arguments[X];return u.apply(void 0,ln([H.getApis(),H],Y,!1))},w=(v=u.toString()).indexOf(")")+1,A=v.indexOf("("),P=v.substring(A+1,w-1).split(/,\s*/),h.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:Tg(P.slice(1))}},h;var h,v,w,A,P}function Ep(u,h){var v={};return Ht(u,function(w,A){Ht(w,function(P,H){var Y=rn(v,H).getOr([]);v[H]=Y.concat([h(A,P)])})}),v}function Pd(u){return{classes:Mi(u.classes)?[]:u.classes,attributes:Mi(u.attributes)?{}:u.attributes,styles:Mi(u.styles)?{}:u.styles}}function wg(u){return u.cHandler}function I_(u,h){return{name:u,handler:h}}function Qy(u,h){var v=Wa(u,h);return void 0===v||""===v?[]:v.split(" ")}function fa(u){return void 0!==u.dom.classList}function qn(u,h){var v,w,A;fa(u)?u.dom.classList.add(h):(w=h,A=Qy(v=u,"class").concat([w]),Gr(v,"class",A.join(" ")))}function yi(u,h){var v,w,A,P;fa(u)?u.dom.classList.remove(h):(A=h,0<(P=mt(Qy(w=u,"class"),function(H){return H!==A})).length?Gr(w,"class",P.join(" ")):ls(w,"class")),0===(fa(v=u)?v.dom.classList:Qy(v,"class")).length&&ls(v,"class")}function Ua(u,h){return fa(u)&&u.dom.classList.contains(h)}function Zu(u,h){Tr(h,function(v){qn(u,v)})}function ud(u,h){Tr(h,function(v){yi(u,v)})}function Vc(u){return u.dom.value}function rc(u,h){if(void 0===h)throw new Error("Value.set was undefined");u.dom.value=h}function ph(u){var h=it.fromText(u);return Kv({element:h})}bs([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Af,Xh,xb={can:Ur,abort:uo,run:Gt},xs=ct,ul=xs("touchstart"),Hc=xs("touchmove"),Oa=xs("touchend"),Ca=xs("touchcancel"),Wc=xs("mousedown"),Im=xs("mousemove"),Sg=xs("mouseout"),_b=xs("mouseup"),Ri=xs("mouseover"),Rd=xs("focusin"),Lp=xs("focusout"),gh=xs("keydown"),ci=xs("keyup"),hs=xs("input"),Ld=xs("change"),oc=xs("click"),Np=xs("transitioncancel"),Zh=xs("transitionend"),Xv=xs("transitionstart"),Hs=xs("selectstart"),is={tap:To("tap")},ic=To("focus"),mh=To("blur.post"),vh=To("paste.post"),hi=To("receive"),af=To("execute"),cd=To("focus.item"),yh=is.tap,ll=To("longpress"),Kh=To("sandbox.close"),Bp=To("typeahead.cancel"),e0=To("system.init"),zp=To("system.touchmove"),O_=To("system.touchend"),If=To("system.scroll"),_s=To("system.resize"),Ku=To("system.attached"),Gc=To("system.detached"),Fp=To("system.dismissRequested"),t0=To("system.repositionRequested"),E_=To("focusmanager.shifted"),wb=To("slotcontainer.visibility"),Zv=To("change.tab"),Vp=To("dismiss.tab"),q1=To("highlight"),Om=To("dehighlight"),$h=function(u,h,v,w){var A=qe({target:h},w);u.getSystem().triggerEvent(v,h,A)},ia=Co,ja=va(Ku()),Nd=va(Gc()),Cg=va(e0()),bh=(Af=af(),function(u){return on(Af,u)}),Jh=ia([{key:ic(),value:Ii({can:function(u,h){var v,w=h.event,A=w.originator,P=w.target;return!(fn(v=A,u.element)&&!fn(v,P)&&(console.warn(ic()+" did not get interpreted by the desired target. \nOriginator: "+sd(A)+"\nTarget: "+sd(P)+"\nCheck the "+ic()+" event handlers"),1))}})}]),ya=Object.freeze({__proto__:null,events:Jh}),Sb=0,xh=ct("alloy-id-"),P_=ct("data-alloy-id"),Mg=xh(),Cb=P_(),kg=function(u,h){Object.defineProperty(u.dom,Cb,{value:h,writable:!0})},Hp=Br,R_=_n,Em=Y1(),Tg=function(u){return nn(u,function(h){return Ke(h,"/*")?h.substring(0,h.length-2):h})},_h=Br("alloy-premade"),ac={init:function(){return Uc({readState:ct("No State required")})}},Uc=function(u){return u},X1=function(u,h){var v,w,A,P,H,Y,X=wn(u,function(oe,ue){return(1===oe.length?Vo.value(oe[0].handler):function bb(u,h,v){var w=h[v];return w?function(A,P,H){try{var Y=wr(P,function(X,oe){var ue=X.name,de=oe.name,ye=H.indexOf(ue),Se=H.indexOf(de);if(-1===ye)throw new Error("The ordering for "+A+" does not have an entry for "+ue+".\nOrder specified: "+JSON.stringify(H,null,2));if(-1===Se)throw new Error("The ordering for "+A+" does not have an entry for "+de+".\nOrder specified: "+JSON.stringify(H,null,2));return ye<Se?-1:Se<ye?1:0});return Vo.value(Y)}catch(X){return Vo.error([X])}}("Event: "+v,u,w).map(function(A){var P,H,Y,X,oe=nn(A,function(ue){return ue.handler});return{can:function(){for(var ue=[],de=0;de<arguments.length;de++)ue[de]=arguments[de];return yo(H,function(ye,Se){return ye&&Se.can.apply(void 0,ue)},!0)},abort:(Y=H=P=oe,X=function(ue){return ue.abort},function(){for(var ue=[],de=0;de<arguments.length;de++)ue[de]=arguments[de];return yo(Y,function(ye,Se){return ye||X(Se).apply(void 0,ue)},!1)}),run:function(){for(var ue=[],de=0;de<arguments.length;de++)ue[de]=arguments[de];Tr(P,function(ye){ye.run.apply(void 0,ue)})}}}):Vo.error(["The event ("+v+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(nn(u,function(A){return A.name}),null,2)])}(oe,h,ue)).map(function(de){var ye,Se,Pe=(Se=wo(ye=de)?{can:Ur,abort:uo,run:ye}:ye,function(Re,Ne){for(var We=[],Te=2;Te<arguments.length;Te++)We[Te-2]=arguments[Te];var Ve=[Re,Ne].concat(We);Se.abort.apply(void 0,Ve)?Ne.stop():Se.can.apply(void 0,Ve)&&Se.run.apply(void 0,Ve)}),Oe=1<oe.length?mt(h[ue],function(Re){return Ir(oe,function(Ne){return Ne.name===Re})}).join(" > "):oe[0].name;return Hr(ue,{handler:Pe,purpose:Oe})})});return v={},w=[],A=[],Tr(X,function(oe){oe.fold(function(ue){w.push(ue)},function(ue){A.push(ue)})}),0<(Y={errors:w,values:A}).errors.length?Vo.error(De(Y.errors)):(H=v,0===(P=Y.values).length?Vo.value(H):Vo.value(ee(H,ae.apply(void 0,P))))},Ml="alloy.base.behaviour",sf=ke([$n("dom","dom",{tag:"required",process:{}},ke([pn("tag"),St("styles",{}),St("classes",[]),St("attributes",{}),vi("value"),vi("innerHtml")])),pn("components"),pn("uid"),St("events",{}),St("apis",{}),$n("eventOrder","eventOrder",((Xh={})[af()]=["disabling",Ml,"toggling","typeaheadevents"],Xh[ic()]=[Ml,"focusing","keying"],Xh[e0()]=[Ml,"disabling","toggling","representing"],Xh[hs()]=[Ml,"representing","streaming","invalidating"],Xh[Gc()]=[Ml,"representing","item-events","tooltipping"],Xh[Wc()]=["focusing",Ml,"item-type-events"],Xh[ul()]=["focusing",Ml,"item-type-events"],Xh[Ri()]=["item-type-events","tooltipping"],Xh[hi()]=["receiving","reflecting","tooltipping"],Oo(ct(Xh))),Ze()),vi("domModification")]),Kv=function(u){var h=pu("external.component",qu([pn("element"),vi("uid")]),u),v=Nr(Y1()),w=h.uid.getOrThunk(function(){return Hp("external")});kg(h.element,w);var A={uid:w,getSystem:v.get,config:$.none,hasConfigured:uo,connect:function(P){v.set(P)},disconnect:function(){v.set(Y1(function(){return A}))},getApis:function(){return{}},element:h.element,spec:u,readState:ct("No state"),syncComponents:Gt,components:ct([]),events:{}};return xo(A)},$u=Hp,Ma=function(u){return rn(u,_h).getOrThunk(function(){return function Rp(u){var h,v,w,A,P,H,Y,X,oe,ue,Ne,We,de=R_(u),ye=de.events,Se=an(de,["events"]),Pe=nn(rn(Se,"components").getOr([]),Ma),Oe=qe(qe({},Se),{events:qe(qe({},ya),ye),components:Pe});return Vo.value((v=Nr(Em),w=Vs(ga("custom.definition",sf,h=Oe)),A=function Pp(u){var h,v,w,A,P=(h=rn(u,"behaviours").getOr({}),dr(ra(h),function(H){var Y=h[H];return Kr(Y)?[Y.me]:[]}));return v=u,A=nn(w=P,function(H){return Pi(H.name(),[pn("config"),St("state",ac)])}),{list:w,data:On(ga("component.behaviours",ke(A),v.behaviours).fold(function(H){throw new Error(Un(H)+"\nComplete spec:\n"+JSON.stringify(v,null,2))},_n),function(H){return ct(H.map(function(Y){return{config:Y.config,state:Y.state.init(Y.config)}}))})}}(h),Ne=function ld(u,h,v){var w,A,P=qe(qe({},(w=u).dom),{uid:w.uid,domChildren:nn(w.components,function(X){return X.element})}),H=u.domModification.fold(function(){return Pd({})},Pd),Y=0<h.length?function(X,oe,ue,de){var ye=qe({},oe);function Se(Oe){return Pn(Oe,function(Re,Ne){return qe(qe({},Ne.modification),Re)},{})}Tr(ue,function(Oe){ye[Oe.name()]=Oe.exhibit(X,de)});var Pe=Ep(ye,function(Oe,Re){return{name:Oe,modification:Re}});return Pd({classes:Pn(Pe.classes,function(Oe,Re){return Re.modification.concat(Oe)},[]),attributes:Se(Pe.attributes),styles:Se(Pe.styles)})}(v,{"alloy.base.modification":H},h,P):H;return qe(qe({},A=P),{attributes:qe(qe({},A.attributes),Y.attributes),styles:qe(qe({},A.styles),Y.styles),classes:A.classes.concat(Y.classes)})}(w,P=A.list,H=A.data),Ha(We=it.fromTag(Ne.tag),Ne.attributes),Zu(We,Ne.classes),wa(We,Ne.styles),Ne.innerHtml.each(function(Ve){return Jy(We,Ve)}),cs(We,Ne.domChildren),Ne.value.each(function(Ve){rc(We,Ve)}),kg(We,Ne.uid),Y=We,X=function gu(u,h,v){var w,A,P,H,Y,oe=u.eventOrder;return A=v,P=h,w=Ep(qe(qe({},{"alloy.base.behaviour":u.events}),(H=A,Y={},Tr(P,function(ue){Y[ue.name()]=ue.handlers(H)}),Y)),I_),X1(w,oe).getOrDie()}(w,P,H),oe=Nr(w.components),ue={uid:h.uid,getSystem:v.get,config:function(Ne){var We=H;return(wo(We[Ne.name()])?We[Ne.name()]:function(){throw new Error("Could not find "+Ne.name()+" in "+JSON.stringify(h,null,2))})()},hasConfigured:function(Ne){return wo(H[Ne.name()])},spec:h,readState:function(Ne){return H[Ne]().map(function(We){return We.state.readState()}).getOr("not enabled")},getApis:function(){return w.apis},connect:function(Ne){v.set(Ne)},disconnect:function(){v.set(Y1(Re))},element:Y,syncComponents:function(){var Ne=dr(Ti(Y),function(We){return v.get().getByDom(We).fold(function(){return[]},gr)});oe.set(Ne)},components:oe.get,events:X}));function Re(){return ue}}(hr(u,"uid")?u:qe({uid:$u("")},u)).getOrDie()})},jc=xo;function n0(u,h,v,w,A){return u(v,w)?$.some(v):wo(A)&&A(v)?$.none():h(v,w,A)}function Dg(u,h,v){for(var w=u.dom,A=wo(v)?v:uo;w.parentNode;){var P=it.fromDom(w=w.parentNode);if(h(P))return $.some(P);if(A(P))break}return $.none()}function Mb(u,h,v){return n0(function(w,A){return A(w)},Dg,u,h,v)}function Bd(u,h,v){return Mb(u,h,v).isSome()}function Wp(u,h,v){return Dg(u,function(w){return ur(w,h)},v)}function Ya(u,h){return v=h,Ln(w=void 0===u?document:u.dom)?$.none():$.from(w.querySelector(v)).map(it.fromDom);var v,w}function fd(u,h,v){return n0(ur,Wp,u,h,v)}function cl(){var u=Br("aria-owns");return{id:u,link:function(h){Gr(h,"aria-owns",u)},unlink:function(h){ls(h,"aria-owns")}}}var Ag,Of,Yc=function(u,h){return Bd(h,function(w){return fn(w,u.element)},uo)||(v=u,Mb(h,function(w){if(!Au(w))return!1;var A=Wa(w,"id");return void 0!==A&&-1<A.indexOf("aria-owns")}).bind(function(w){var A=Wa(w,"id");return Ya(zi(w),'[aria-owns="'+A+'"]')}).exists(function(w){return Yc(v,w)}));var v};function qa(u,h,v){var w,A,P,H;switch(rn(wh.get(),u).orThunk(function(){return sn(ra(wh.get()),function(oe){return-1<u.indexOf(oe)?$.some(wh.get()[oe]):$.none()})}).getOr(Ag.NORMAL)){case Ag.NORMAL:return v(Sh());case Ag.LOGGING:var Y=(w=u,A=h,P=[],H=(new Date).getTime(),{logEventCut:function(oe,ue,de){P.push({outcome:"cut",target:ue,purpose:de})},logEventStopped:function(oe,ue,de){P.push({outcome:"stopped",target:ue,purpose:de})},logNoParent:function(oe,ue,de){P.push({outcome:"no-parent",target:ue,purpose:de})},logEventNoHandlers:function(oe,ue){P.push({outcome:"no-handlers-left",target:ue})},logEventResponse:function(oe,ue,de){P.push({outcome:"response",purpose:de,target:ue})},write:function(){var oe=(new Date).getTime();Fo(["mousemove","mouseover","mouseout",e0()],w)||console.log(w,{event:w,time:oe-H,target:A.dom,sequence:nn(P,function(ue){return Fo(["cut","stopped","response"],ue.outcome)?"{"+ue.purpose+"} "+ue.outcome+" at ("+sd(ue.target)+")":ue.outcome})})}}),X=v(Y);return Y.write(),X;case Ag.STOP:return!0}}(Of=Ag=Ag||{})[Of.STOP=0]="STOP",Of[Of.NORMAL=1]="NORMAL",Of[Of.LOGGING=2]="LOGGING";var wh=Nr({}),Ig=["alloy/data/Fields","alloy/debugging/Debugging"],Sh=ct({logEventCut:Gt,logEventStopped:Gt,logNoParent:Gt,logEventNoHandlers:Gt,logEventResponse:Gt,write:Gt}),Qh=ct([pn("menu"),pn("selectedMenu")]),dd=ct([pn("item"),pn("selectedItem")]);function Hl(){return Tf("markers",[pn("backgroundMenu")].concat(Qh()).concat(dd()))}function ko(u){return Tf("markers",nn(u,pn))}function Gp(u,h,v){return void 0!==(w=new Error).stack&&Yi(w.stack.split("\n"),function(A){return 0<A.indexOf("alloy")&&!Ir(Ig,function(P){return-1<A.indexOf(P)})}).getOr("unknown"),$n(h,h,v,Od(function(A){return Vo.value(function(){for(var P=[],H=0;H<arguments.length;H++)P[H]=arguments[H];return A.apply(void 0,P)})}));var w}function ei(u){return Gp(0,u,Yh(Gt))}function Iu(u){return Gp(0,u,Yh($.none))}function Ef(u){return Gp(0,u,{tag:"required",process:{}})}function ba(u){return Gp(0,u,{tag:"required",process:{}})}function ea(u,h){return fr(u,ct(h))}function $v(u){return fr(u,_n)}function mu(u,h,v,w,A,P,H,Y){return{x:u,y:h,bubble:v,direction:w,placement:A,restriction:P,label:H+"-"+A,alwaysFit:Y=void 0!==Y&&Y}}function qc(u,h,v,w){var A=u+h;return w<A?v:A<v?w:A}function Xa(u,h){return gc(["left","right","top","bottom"],function(v){return rn(h,v).map(function(w){return function(A){switch(w){case 1:return A.x;case 0:return A.x+A.width;case 2:return A.y;case 3:return A.y+A.height}}(u)})})}function Os(u,h){return u.x+u.width/2-h.width/2}function Ch(u,h){return u.x+u.width-h.width}function Pm(u,h){return u.y-h.height}function Jv(u){return u.y+u.height}function hd(u,h){return u.y+u.height/2-h.height/2}function ws(u,h,v){return mu(u.x+u.width,hd(u,h),v.east(),Up(),"east",Xa(u,{left:0}),Rf)}function zd(u,h,v){return mu(u.x-h.width,hd(u,h),v.west(),i0(),"west",Xa(u,{right:1}),Rf)}function K1(){return[Ou,dl,wc,$s,Ju,Xc,ws,zd]}function Mh(){return[dl,Ou,$s,wc,Ju,Xc,ws,zd]}function Fd(){return[wc,$s,Ou,dl,Xc,Ju]}function ep(){return[$s,wc,dl,Ou,Xc,Ju]}function Wl(){return[Ou,dl,wc,$s,Ju,Xc]}function uf(){return[dl,Ou,$s,wc,Ju,Xc]}function xc(u,h,v){return Cg(function(w,A){v(w,u,h)})}function kb(u){return{key:u,value:void 0}}function _a(u){var h,v,w,A,P,H,Y,X,oe=pu("Creating behaviour: "+u.name,N_,u);return v=oe.name,w=oe.active,A=oe.apis,P=oe.extra,H=oe.state,Y=qu(h=oe.fields),X=Pi(v,[id("config",qu(h))]),Lm(Y,X,v,w,A,P,H)}function Qv(u){var h,v=pu("Creating behaviour: "+u.name,ty,u),w=es(v.branchKey,v.branches),A=v.name,P=v.active,H=v.apis,Y=v.extra,X=v.state,oe=Pi(A,[id("config",h=w)]);return Lm(h,oe,A,P,H,Y,X)}function Rm(){return it.fromDom(document)}function Vd(u){return u.dom.focus()}function tp(u){var h=zi(u).dom;return u.dom===h.activeElement}function Go(u){return void 0===u&&(u=Rm()),$.from(u.dom.activeElement).map(it.fromDom)}function Hd(u){return Go(zi(u)).filter(function(h){return u.dom.contains(h.dom)})}function Og(u,h){var v=zi(h),w=Go(v).bind(function(P){function H(oe){return fn(P,oe)}var Y,X;return H(h)?$.some(h):(Y=H,(X=function(oe){for(var ue=0;ue<oe.childNodes.length;ue++){var de=it.fromDom(oe.childNodes[ue]);if(Y(de))return $.some(de);var ye=X(oe.childNodes[ue]);if(ye.isSome())return ye}return $.none()})(h.dom))}),A=u(h);return w.each(function(P){Go(v).filter(function(H){return fn(H,P)}).fold(function(){Vd(P)},Gt)}),A}function _c(u,h,v,w,A){function P(H){return H+"px"}return{position:u,left:h.map(P),top:v.map(P),right:w.map(P),bottom:A.map(P)}}function $1(u,h){var v;Tu(u,qe(qe({},v=h),{position:$.some(v.position)}))}function fl(u,h,v,w,A,P){var H=h.rect,Y=H.x-v,X=H.y-w,oe=A-(Y+H.width),ue=P-(X+H.height),de=$.some(Y),ye=$.some(X),Se=$.some(oe),Pe=$.some(ue),Oe=$.none();return h.direction.fold(function(){return _c(u,de,ye,Oe,Oe)},function(){return _c(u,Oe,ye,Se,Oe)},function(){return _c(u,de,Oe,Oe,Pe)},function(){return _c(u,Oe,Oe,Se,Pe)},function(){return _c(u,de,ye,Oe,Oe)},function(){return _c(u,de,Oe,Oe,Pe)},function(){return _c(u,de,ye,Oe,Oe)},function(){return _c(u,Oe,ye,Se,Oe)})}function kh(u,h){return u.fold(function(){var v=h.rect;return _c("absolute",$.some(v.x),$.some(v.y),$.none(),$.none())},function(v,w,A,P){return fl("absolute",h,v,w,A,P)},function(v,w,A,P){return fl("fixed",h,v,w,A,P)})}function Eg(u,h){var v=Yo(xg,h),w=u.fold(v,v,function(){var H=$o();return xg(h).translate(-H.left,-H.top)}),A=It(h),P=Fr(h);return Gu(w.left,w.top,A,P)}ct(ke(dd().concat(Qh())));var L_=ct(ke(dd())),Th=ct(Tf("initSize",[pn("numColumns"),pn("numRows")])),Pf=bs([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),r0=Pf.southeast,bi=Pf.southwest,ey=Pf.northeast,Tb=Pf.northwest,Oi=Pf.south,o0=Pf.north,Up=Pf.east,i0=Pf.west,lf=function(u,h,v){return Math.min(Math.max(u,h),v)},Rf="layout",Ou=function(u,h,v){return mu(u.x,Jv(u),v.southeast(),r0(),"southeast",Xa(u,{left:1,top:3}),Rf)},dl=function(u,h,v){return mu(Ch(u,h),Jv(u),v.southwest(),bi(),"southwest",Xa(u,{right:0,top:3}),Rf)},wc=function(u,h,v){return mu(u.x,Pm(u,h),v.northeast(),ey(),"northeast",Xa(u,{left:1,bottom:2}),Rf)},$s=function(u,h,v){return mu(Ch(u,h),Pm(u,h),v.northwest(),Tb(),"northwest",Xa(u,{right:0,bottom:2}),Rf)},Xc=function(u,h,v){return mu(Os(u,h),Pm(u,h),v.north(),o0(),"north",Xa(u,{bottom:2}),Rf)},Ju=function(u,h,v){return mu(Os(u,h),Jv(u),v.south(),Oi(),"south",Xa(u,{top:3}),Rf)},Db=Object.freeze({__proto__:null,events:function(u){return ia([on(hi(),function(h,v){var w,A=u.channels,P=ra(A),H=v,Y=(w=H).universal?P:mt(P,function(X){return Fo(w.channels,X)});Tr(Y,function(X){var oe=A[X],ue=oe.schema,de=pu("channel["+X+"] data\nReceiver: "+sd(h.element),ue,H.data);oe.onReceive(h,de)})})])}}),So=[tc("channels",qh(Vo.value,qu([Ef("onReceive"),St("schema",Ze())])))],Lm=function(u,h,v,w,A,P,H){function Y(de){return zo(de,v)?de[v]():$.none()}var X=On(A,function(de,ye){return Se=v,Re=function(lt){for(var Ft=[],Tt=1;Tt<arguments.length;Tt++)Ft[Tt-1]=arguments[Tt];var Ut=[lt].concat(Ft);return lt.config({name:ct(Se)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+Se+". Using API: "+Oe)},function(dn){var Jt=Array.prototype.slice.call(Ut,1);return Pe.apply(void 0,[lt,dn.config,dn.state].concat(Jt))})},Ne=Oe=ye,Te=(We=(Pe=de).toString()).indexOf(")")+1,Ve=We.indexOf("("),Qe=We.substring(Ve+1,Te-1).split(/,\s*/),Re.toFunctionAnnotation=function(){return{name:Ne,parameters:Tg(Qe.slice(0,1).concat(Qe.slice(3)))}},Re;var Se,Pe,Oe,Re,Ne,We,Te,Ve,Qe}),oe=On(P,Ed),ue=qe(qe(qe({},oe),X),{revoke:Yo(kb,v),config:function(de){var ye=pu(v+"-config",u,de);return{key:v,value:{config:ye,me:ue,configAsRaw:Zt(function(){return pu(v+"-config",u,de)}),initialConfig:de,state:H}}},schema:ct(h),exhibit:function(de,ye){return Ot(Y(de),rn(w,"exhibit"),function(Se,Pe){return Pe(ye,Se.config,Se.state)}).getOrThunk(function(){return Pd({})})},name:ct(v),handlers:function(de){return Y(de).map(function(ye){return rn(w,"events").getOr(function(){return{}})(ye.config,ye.state)}).getOr({})}});return ue},jn=Co,N_=qu([pn("fields"),pn("name"),St("active",{}),St("apis",{}),St("state",ac),St("extra",{})]),ty=qu([pn("branchKey"),pn("branches"),pn("name"),St("active",{}),St("apis",{}),St("state",ac),St("extra",{})]),a0=ct(void 0),Ss=_a({fields:So,name:"receiving",active:Db}),Pg=Object.freeze({__proto__:null,exhibit:function(u,h){return Pd({classes:[],styles:h.useFixed()?{}:{position:"relative"}})}}),Wd=bs([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),en=function(u,h,v){var w=Ja(h,v);return u.fold(ct(w),ct(w),function(){var A=$o();return w.translate(-A.left,-A.top)})};function Rg(u){return Ds(u,oy)}function Bm(u){function h(){return v.get().each(u)}var v=Nr($.none());return{clear:function(){h(),v.set($.none())},isSet:function(){return v.get().isSome()},get:function(){return v.get()},set:function(w){h(),v.set($.some(w))}}}function ny(){return Bm(function(u){return u.destroy()})}function Dh(){return Bm(function(u){return u.unbind()})}function Cs(){var u=Bm(Gt);return qe(qe({},u),{on:function(h){return u.get().each(h)}})}function Js(u,h,v){return wp(u,h,Ah,v,!1)}function Lg(u,h,v){return wp(u,h,Ah,v,!0)}function Q1(u,h){var v=u,w=Math.floor(h);to(v,"max-height",Nc.max(v,w,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function ex(u,h,v){return void 0===u[h]?v:u[h]}function ry(u,h,v,w){function A(X){return rn(v,X).getOr([])}function P(X,oe,ue){var de=ir(Eb,ue);return{offset:Ja(X,oe),classesOn:dr(ue,A),classesOff:dr(de,A)}}var H=u*(w=void 0===w?1:w),Y=h*w;return{southeast:function(){return P(-u,h,["top","alignLeft"])},southwest:function(){return P(u,h,["top","alignRight"])},south:function(){return P(-u/2,h,["top","alignCentre"])},northeast:function(){return P(-u,-h,["bottom","alignLeft"])},northwest:function(){return P(u,-h,["bottom","alignRight"])},north:function(){return P(-u/2,-h,["bottom","alignCentre"])},east:function(){return P(u,-h/2,["valignCentre","left"])},west:function(){return P(-u,-h/2,["valignCentre","right"])},insetNortheast:function(){return P(H,Y,["top","alignLeft","inset"])},insetNorthwest:function(){return P(-H,Y,["top","alignRight","inset"])},insetNorth:function(){return P(-H/2,Y,["top","alignCentre","inset"])},insetSoutheast:function(){return P(H,-Y,["bottom","alignLeft","inset"])},insetSouthwest:function(){return P(-H,-Y,["bottom","alignRight","inset"])},insetSouth:function(){return P(-H/2,-Y,["bottom","alignCentre","inset"])},insetEast:function(){return P(-H,-Y/2,["valignCentre","right","inset"])},insetWest:function(){return P(H,-Y/2,["valignCentre","left","inset"])}}}function u0(){return ry(0,0,{})}function Gd(u,h){return function(v){return"rtl"===tx(v)?h:u}}var Za,Ng=Wd.relative,Ab=Wd.fixed,oy="data-alloy-placement",pd=bs([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Ah=Ur,Ib=Ga,c0=["top","bottom","right","left"],f0="data-alloy-transition-timer",cf=ct(function(u,h){Q1(u,h),wa(u,{"overflow-x":"hidden","overflow-y":"auto"})}),np=ct(function(u,h){Q1(u,h)}),Eb=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],iy=_n,tx=function(u){return"rtl"===As(u,"direction")?"rtl":"ltr"};function z_(u){return Bd(u,function(h){return Au(h)&&Wa(h,"data-alloy-vertical-dir")===Za.BottomToTop})}function zm(){return Pi("layouts",[pn("onLtr"),pn("onRtl"),vi("onBottomLtr"),vi("onBottomRtl")])}function gd(u,h,v,w,A,P,H){var Y=H.map(z_).getOr(!1),X=h.layouts.map(function(ue){return ue.onLtr(u)}),oe=h.layouts.map(function(ue){return ue.onRtl(u)});return Gd(Y?h.layouts.bind(function(ue){return ue.onBottomLtr.map(function(de){return de(u)})}).or(X).getOr(A):X.getOr(v),Y?h.layouts.bind(function(ue){return ue.onBottomRtl.map(function(de){return de(u)})}).or(oe).getOr(P):oe.getOr(w))(u)}function vu(u){return u.fold(_n,function(h,v,w){return h.translate(-v,-w)})}function F_(u){return u.fold(_n,_n)}function nx(u){return yo(u,function(h,v){return h.translate(v.left,v.top)},Ja(0,0))}function Fm(u){return nx(nn(u,F_))}function kl(u,h,v){var w,A,P=$o(Dt(u.element)),H=(w=u,A=eo(v.root).dom,$.from(A.frameElement).map(it.fromDom).filter(function(Y){return fn(Dt(Y),Dt(w.element))}).map(Pl).getOr(P));return Eu(H,P.left,P.top)}function sc(u,h,v,w){var A=sy(Ja(u,h));return $.some({point:A,width:v,height:w})}function Lf(u,h,v,w,A){return u.map(function(P){var H=[h,P.point],Y=w.fold(function(){return Fm(H)},function(){return Fm(H)},function(){return nx(nn(H,vu))}),X={x:Y.left,y:Y.top,width:P.width,height:P.height},oe=(v.showAbove?Fd:Wl)(),ue=(v.showAbove?ep:uf)(),de=gd(A,v,oe,ue,oe,ue,$.none());return iy({anchorBox:X,bubble:v.bubble.getOr(u0()),overrides:v.overrides,layouts:de,placer:$.none()})})}function ff(u,h,v){var w,A=u.document.createRange(),P=A;return h.fold(function(H){P.setStartBefore(H.dom)},function(H,Y){P.setStart(H.dom,Y)},function(H){P.setStartAfter(H.dom)}),w=A,v.fold(function(H){w.setEndBefore(H.dom)},function(H,Y){w.setEnd(H.dom,Y)},function(H){w.setEndAfter(H.dom)}),A}function Bg(u,h,v,w,A){var P=u.document.createRange();return P.setStart(h.dom,v),P.setEnd(w.dom,A),P}function Vm(u){return{left:u.left,top:u.top,right:u.right,bottom:u.bottom,width:u.width,height:u.height}}function Hm(u,h,v){return h(it.fromDom(v.startContainer),v.startOffset,it.fromDom(v.endContainer),v.endOffset)}function Wm(u,h){return v=u,P=h.match({domRange:function(H){return{ltr:ct(H),rtl:$.none}},relative:function(H,Y){return{ltr:Zt(function(){return ff(v,H,Y)}),rtl:Zt(function(){return $.some(ff(v,Y,H))})}},exact:function(H,Y,X,oe){return{ltr:Zt(function(){return Bg(v,H,Y,X,oe)}),rtl:Zt(function(){return $.some(Bg(v,X,oe,H,Y))})}}}),((A=(w=P).ltr()).collapsed?w.rtl().filter(function(H){return!1===H.collapsed}).map(function(H){return Fg.rtl(it.fromDom(H.endContainer),H.endOffset,it.fromDom(H.startContainer),H.startOffset)}).getOrThunk(function(){return Hm(0,Fg.ltr,A)}):Hm(0,Fg.ltr,A)).match({ltr:function(H,Y,X,oe){var ue=u.document.createRange();return ue.setStart(H.dom,Y),ue.setEnd(X.dom,oe),ue},rtl:function(H,Y,X,oe){var ue=u.document.createRange();return ue.setStart(X.dom,oe),ue.setEnd(H.dom,Y),ue}});var v,w,A,P}(Za=Za||{}).TopToBottom="toptobottom",Za.BottomToTop="bottomtotop";var rx="data-alloy-vertical-dir",jp=[pn("hotspot"),vi("bubble"),St("overrides",{}),zm(),ea("placement",function(u,h,v){var w=Eg(v,h.hotspot.element),A=gd(u.element,h,Wl(),uf(),Fd(),ep(),$.some(h.hotspot.element));return $.some(iy({anchorBox:w,bubble:h.bubble.getOr(u0()),overrides:h.overrides,layouts:A,placer:$.none()}))})],Ih=[pn("x"),pn("y"),St("height",0),St("width",0),St("bubble",u0()),St("overrides",{}),zm(),ea("placement",function(u,h,v){var w=en(v,h.x,h.y),A=Gu(w.left,w.top,h.width,h.height),P=gd(u.element,h,K1(),Mh(),K1(),Mh(),$.none());return $.some(iy({anchorBox:A,bubble:h.bubble,overrides:h.overrides,layouts:P,placer:$.none()}))})],ay=bs([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),sy=ay.screen,Eu=ay.absolute,Pb=[pn("node"),pn("root"),vi("bubble"),zm(),St("overrides",{}),St("showAbove",!1),ea("placement",function(u,h,v){var w=kl(u,0,h);return h.node.filter(Zs).bind(function(A){var P=A.dom.getBoundingClientRect(),H=sc(P.left,P.top,P.width,P.height),Y=h.node.getOr(u.element);return Lf(H,w,h,v,Y)})})],Nf=function(u,h,v,w){return{start:u,soffset:h,finish:v,foffset:w}},V_=(bs([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(u){return u.fold(_n,_n,_n)}),zg=bs([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Gm={domRange:zg.domRange,relative:zg.relative,exact:zg.exact,exactFromRange:function(u){return zg.exact(u.start,u.soffset,u.finish,u.foffset)},getWin:function(u){return eo(u.match({domRange:function(h){return it.fromDom(h.startContainer)},relative:function(h,v){return V_(h)},exact:function(h,v,w,A){return h}}))},range:Nf},Fg=bs([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function Lb(u){return gs.getOption(u)}function Nb(u){return Lb(u).filter(function(h){return 0!==h.trim().length||-1<h.indexOf("\xa0")}).isSome()||Fo(Vi,qt(u))}function Gl(u,h){return Ln(v=void 0===u?document:u.dom)?[]:nn(v.querySelectorAll(h),it.fromDom);var v}function d0(u){if(0<u.rangeCount){var h=u.getRangeAt(0),v=u.getRangeAt(u.rangeCount-1);return $.some(Nf(it.fromDom(h.startContainer),h.startOffset,it.fromDom(v.endContainer),v.endOffset))}return $.none()}function Um(u){if(null===u.anchorNode||null===u.focusNode)return d0(u);var h,v,w,A,P,H,Y,X,oe,ue,de,ye=it.fromDom(u.anchorNode),Se=it.fromDom(u.focusNode);return H=v=u.anchorOffset,Y=w=Se,X=A=u.focusOffset,(oe=Dt(P=h=ye).dom.createRange()).setStart(P.dom,H),oe.setEnd(Y.dom,X),ue=oe,de=fn(h,w)&&v===A,ue.collapsed&&!de?$.some(Nf(ye,u.anchorOffset,Se,u.focusOffset)):d0(u)}function Bf(u,h){var v,w,A=(v=Wm(u,h)).getClientRects();return 0<(w=0<A.length?A[0]:v.getBoundingClientRect()).width||0<w.height?$.some(w).map(Vm):$.none()}function uy(u,h){return{element:u,offset:h}}function Qs(u,h){return(Ll(u)?uy:function(v,w){var A=Ti(v);if(0===A.length)return uy(v,w);if(w<A.length)return uy(A[w],0);var P=A[A.length-1];return uy(P,(Ll(P)?gs.get(P):Ti(P)).length)})(u,h)}function H_(u,h){return h.getSelection.getOrThunk(function(){return function(){return $.from(u.getSelection()).filter(function(v){return 0<v.rangeCount}).bind(Um)}})().map(function(v){var w=Qs(v.start,v.soffset),A=Qs(v.finish,v.foffset);return Gm.range(w.element,w.offset,A.element,A.offset)})}function Yp(u){return u.x+u.width}function qp(u,h){return u.x-h.width}function ly(u,h){return u.y-h.height+u.height}function OS(u,h,v){return mu(Yp(u),u.y,v.southeast(),r0(),"southeast",Xa(u,{left:0,top:2}),Ug)}function uc(u,h,v){return mu(qp(u,h),u.y,v.southwest(),bi(),"southwest",Xa(u,{right:1,top:2}),Ug)}function jm(u,h,v){return mu(Yp(u),ly(u,h),v.northeast(),ey(),"northeast",Xa(u,{left:0,bottom:3}),Ug)}function Xp(u,h,v){return mu(qp(u,h),ly(u,h),v.northwest(),Tb(),"northwest",Xa(u,{right:1,bottom:3}),Ug)}function Zp(){return[OS,uc,jm,Xp]}function Zc(){return[uc,OS,Xp,jm]}function df(u,h,v,w,A,P,H){var Y,X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne,Te;return Y={anchorBox:v.anchorBox,origin:h},X=A.element,oe=v.bubble,ue=v.layouts,de=P,ye=w,Pe=H,Re=ex(Se=v.overrides,"maxHeightFunction",cf()),Ne=ex(Se,"maxWidthFunction",Gt),function(u,h,v,w){var A,P,H,X=function s0(u,h,v,w){Lo(h,"max-height"),Lo(h,"max-width");var A,P,Y,X,oe,ue,de,ye,Se={width:It(A=h),height:Fr(A)};return P=h,oe=v,ue=w.bounds,de=(X=Se).width,ye=X.height,yo(w.preference,function(Oe,Re){var Ne=Yo(Pe,Re);return Oe.fold(ct(Oe),Ne)},pd.nofit({rect:Y=u,maxHeight:X.height,maxWidth:X.width,direction:r0(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:Y.y},-1,-1,!1)).fold(_n,_n);function Pe(Oe,Re,Ne,We,Te){var Ve=function Nm(u,h,v,w){var A,P,H,Y,X,oe,ue,de,Se,Pe,Oe,Re,Ne,We,Te,Ve,Qe,lt,Ft,Tt,Ut,dn,Jt,yn,En,pr,Wr,No,wi,Ui,Ni,Zo,Xi,$i,Ji,Si,Na,Zl,js=u.bubble,Jf=js.offset,Ba=(Xi=u.restriction,$i=Jf,Ji=Ec("left",(Zo=w).x),Si=Ec("top",Zo.y),Na=Ec("right",Zo.right),Zl=Ec("bottom",Zo.bottom),Gu(Ji,Si,Na-Ji,Zl-Si)),au=u.y+Jf.top,ta=Gu(u.x+Jf.left,au,h,v),Qn=(P=Ba.y,H=Ba.right,Y=Ba.bottom,oe=ta.y,de=ta.bottom,Se=ta.height,{originInBounds:(A=Ba.x)<=(X=ta.x)&&X<=H&&P<=oe&&oe<=Y,sizeInBounds:(ue=ta.right)<=H&&A<=ue&&de<=Y&&P<=de,visibleW:Math.min(ta.width,A<=X?H-X:ue-A),visibleH:Math.min(Se,P<=oe?Y-oe:de-P)}),Bo=Qn.visibleW,ha=Qn.visibleH,ka=Qn.originInBounds&&Qn.sizeInBounds,ms=ka?ta:(Pe=Ba.x,Oe=Ba.y,Re=Ba.right,Ne=Ba.bottom,We=ta.x,Te=ta.y,Ve=ta.width,Qe=ta.height,lt=Math.max(Pe,Re-Ve),Ft=Math.max(Oe,Ne-Qe),Tt=lf(We,Pe,lt),Ut=lf(Te,Oe,Ft),dn=Math.min(Tt+Ve,Re)-Tt,Jt=Math.min(Ut+Qe,Ne)-Ut,Gu(Tt,Ut,dn,Jt)),ef=0<ms.width&&0<ms.height,Nu=(yn=u.direction,Wr=ct((En=ms).bottom-(pr=w).y),No=ct(pr.bottom-En.y),wi=yn.fold(No,No,Wr,Wr,No,Wr,No,No),Ui=ct(En.right-pr.x),Ni=ct(pr.right-En.x),{maxWidth:yn.fold(Ni,Ui,Ni,Ui,Ni,Ni,Ni,Ui),maxHeight:wi}),vl={rect:ms,maxHeight:Nu.maxHeight,maxWidth:Nu.maxWidth,direction:u.direction,placement:u.placement,classes:{on:js.classesOn,off:js.classesOff},layout:u.label,testY:au};function Ec(yl,bl){return Xi[yl].map(function(Kl){var xl="top"===yl||"bottom"===yl,bp=xl?$i.top:$i.left,ui=("left"===yl||"top"===yl?Math.max:Math.min)(Kl,bl)+bp;return xl?lf(ui,Zo.y,Zo.bottom):lf(ui,Zo.x,Zo.right)}).getOr(bl)}return ka||u.alwaysFit?pd.fit(vl):pd.nofit(vl,Bo,ha,ef)}(Oe(Y,X,oe,P,ue),de,ye,ue);return Ve.fold(ct(Ve),function(Qe,lt,Ft,Tt){return(Te===Tt?We<Ft||Ne<lt:!Te&&Tt)?Ve:pd.nofit(Re,Ne,We,Te)})}}(u,h,v,w),oe=h,ue=X,de=kh((A=w).origin,ue);return A.transition.each(function(ye){!function J1(u,h,v,w,A,P){var H,Y,X,oe,ue,de,ye,Se,Pe,Oe=(H=w,Y=A,P.exists(function(Ne){var We=H.mode;return"all"===We||Ne[We]!==Y[We]}));function Re(Ne){return parseFloat(Ne).toFixed(3)}Oe||(Pe=u,Ue(w.classes,function(Ne){return Ua(Pe,Ne)}))?(to(u,"position",v.position),X=Eg(h,u),oe=kh(h,qe(qe({},A),{rect:X})),ue=gc(c0,function(Ne){return oe[Ne]}),Se=v,Hn(ue,function(Ne,We){var Te,Ve,Qe,lt=Se[We].map(Re),Ft=Ne.map(Re);return!Ot(Te=lt,Ve=Ft,Qe=void 0===Qe?jr:Qe).getOr(Te.isNone()&&Ve.isNone())}).isSome()&&(Tu(u,ue),Oe&&(Zu(de=u,(ye=w).classes),Ds(de,f0).each(function(Ne){clearTimeout(parseInt(Ne,10)),ls(de,f0)}),function B_(u,h){function v(Pe){var Oe,Re=null!==(Oe=Pe.raw.pseudoElement)&&void 0!==Oe?Oe:"";return fn(Pe.target,u)&&!Fu(Re)&&Fo(c0,Pe.raw.propertyName)}function w(Pe){var Oe;(us(Pe)||v(Pe))&&(Y.clear(),X.clear(),!us(Oe=null==Pe?void 0:Pe.raw.type)&&Oe!==Zh()||(clearTimeout(P),ls(u,f0),ud(u,h.classes)))}function A(){Y.set(Js(u,Zh(),w)),X.set(Js(u,Np(),w))}var P,H,Y=Dh(),X=Dh();"ontransitionstart"in u.dom?H=Js(u,Xv(),function(Pe){v(Pe)&&(H.unbind(),A())}):A();var oe,ue,de=(oe=u,ue=ye("transition-delay"),yo(ye("transition-duration"),function(Pe,Oe,Re){var Ne=Se(ue[Re])+Se(Oe);return Math.max(Pe,Ne)},0));function ye(Pe){var Oe=As(oe,Pe);return mt(Pr(Oe)?Oe.split(/\s*,\s*/):[],Fu)}function Se(Pe){if(Pr(Pe)&&/^[\d.]+/.test(Pe)){var Oe=parseFloat(Pe);return Ke(Pe,"ms")?Oe:1e3*Oe}return 0}requestAnimationFrame(function(){P=setTimeout(w,de+17),Gr(u,f0,P)})}(de,ye)),_p(u))):ud(u,w.classes)}(oe,A.origin,de,ye,ue,A.lastPlacement)}),$1(oe,de),Gr(h,oy,X.placement),ud(P=h,(H=X.classes).off),Zu(P,H.on),(0,w.maxHeightFunction)(h,X.maxHeight),(0,w.maxWidthFunction)(h,X.maxWidth),{layout:X.layout,placement:X.placement}}(Y.anchorBox,X,oe,{bounds:(Oe=Te=Y.origin,ye.fold(function(){return Oe.fold(Aa,Aa,Gu)},function(lt){return Oe.fold(lt,lt,function(){var Ft=lt(),Tt=en(Oe,Ft.x,Ft.y);return Gu(Tt.left,Tt.top,Ft.width,Ft.height)})})),origin:Te,preference:ue,maxHeightFunction:Re,maxWidthFunction:Ne,lastPlacement:de,transition:Pe})}function Ym(u,h){Qa(u.element,h.element)}function ox(u,h){var v,w=u.components();Tr((v=u).components(),function(P){return rf(P.element)}),cu(v.element),v.syncComponents();var A=ir(w,h);Tr(A,function(P){b0(P),u.getSystem().removeFromWorld(P)}),Tr(h,function(P){P.getSystem().isConnected()?Ym(u,P):(u.getSystem().addToWorld(P),Ym(u,P),Zs(u.element)&&rv(P)),u.syncComponents()})}function Sc(u,h){x0(u,h,Qa)}function Cc(u){b0(u),rf(u.element),u.getSystem().removeFromWorld(u)}function qm(u){var h=Xr(u.element).bind(function(v){return u.getSystem().getByDom(v).toOptional()});Cc(u),h.each(function(v){v.syncComponents()})}function rp(u){var h=u.components();Tr(h,Cc),cu(u.element),u.syncComponents()}function Vg(u,h){ux(u,h,Qa)}function cy(u){var h=Ti(u.element);Tr(h,function(v){u.getByDom(v).each(b0)}),rf(u.element)}function eu(u,h,v,w){v.get().each(function(P){rp(u)}),Sc(h.getAttachPoint(u),u);var A=u.getSystem().build(w);return Sc(u,A),v.set(A),A}function Xm(u,h,v,w){var A=eu(u,h,v,w);return h.onOpen(u,A),A}function Qu(u,h,v){v.get().each(function(w){rp(u),qm(u),h.onClose(u,w),v.clear()})}function fy(u,h,v){return v.isOpen()}function Bb(u){var h=pu("Dismissal",cx,u),v={};return v[Qp()]={schema:qu([pn("target")]),onReceive:function(w,A){ai.isOpen(w)&&(ai.isPartOf(w,A.target)||h.isExtraPart(w,A.target)||h.fireEventInstead.fold(function(){return ai.close(w)},function(P){return Rr(w,P.event)}))}},v}function Pu(u){var h=pu("Reposition",ES,u),v={};return v[Yg()]={onReceive:function(w){ai.isOpen(w)&&h.fireEventInstead.fold(function(){return h.doReposition(w)},function(A){return Rr(w,A.event)})}},v}function lc(u,h,v){h.store.manager.onLoad(u,h,v)}function W_(u,h,v){h.store.manager.onUnload(u,h,v)}function zb(){var u=Nr(null);return Uc({set:u.set,get:u.get,isNotSet:function(){return null===u.get()},clear:function(){u.set(null)},readState:function(){return{mode:"memory",value:u.get()}}})}function cc(){var u=Nr({}),h=Nr({});return Uc({readState:function(){return{mode:"dataset",dataByValue:u.get(),dataByText:h.get()}},lookup:function(v){return rn(u.get(),v).orThunk(function(){return rn(h.get(),v)})},update:function(v){var w=u.get(),A=h.get(),P={},H={};Tr(v,function(Y){rn(P[Y.value]=Y,"meta").each(function(X){rn(X,"text").each(function(oe){H[oe]=Y})})}),u.set(qe(qe({},w),P)),h.set(qe(qe({},A),H))},clear:function(){u.set({}),h.set({})}})}function dy(u,h,v,w){var A=h.store;v.update([w]),A.setValue(u,w),h.onSetValue(u,w)}function Es(u,h){return Tp(u,{},nn(h,function(v){return w=v.name(),A="Cannot configure "+v.name()+" for "+u,$n(w,w,{tag:"option",process:{}},vs(function(P){return y("The field: "+w+" is forbidden. "+A)}));var w,A}).concat([fr("dump",_n)]))}function op(u){return u.dump}function tu(u,h){return qe(qe({},jn(h)),u.dump)}function Kp(u){return hr(u,"uiType")}function h0(u){return u.fold($.some,$.none,$.some,$.some)}function Ud(u){function h(v){return v.name}return u.fold(h,h,h,h)}function Mc(u,h){return function(v){var w=pu("Converting part type",h,v);return u(w)}}function Zm(u,h,v,w){return ee(h.defaults(u,v,w),v,{uid:u.partUids[h.name]},h.overrides(u,v,w))}function Km(u,h){var v={};return Tr(h,function(w){h0(w).each(function(A){var P=wy(u,A.pname);v[A.name]=function(H){var Y=pu("Part: "+A.name+" in "+u,ke(A.schema),H);return qe(qe({},P),{config:H,validated:Y})}})}),v}function Hg(u,h,v){return{uiType:yy(),owner:u,name:h,config:v,validated:{}}}function G_(u){return dr(u,function(h){return h.fold($.none,$.some,$.none,$.none).map(function(v){return Tf(v.name,v.schema.concat([$v(uv())]))}).toArray()})}function p0(u){return nn(u,Ud)}function ix(u,h,v){return w=h,A={},P={},Tr(v,function(H){H.fold(function(Y){A[Y.pname]=Jr(!0,function(X,oe,ue){return Y.factory.sketch(Zm(X,Y,oe,ue))})},function(Y){var X=w.parts[Y.name];P[Y.name]=ct(Y.factory.sketch(Zm(w,Y,X[uv()]),X))},function(Y){A[Y.pname]=Jr(!1,function(X,oe,ue){return Y.factory.sketch(Zm(X,Y,oe,ue))})},function(Y){A[Y.pname]=hx(!0,function(X,oe,ue){return nn(X[Y.name],function(de){return Y.factory.sketch(ee(Y.defaults(X,de,ue),de,Y.overrides(X,de)))})})})}),{internals:ct(A),externals:ct(P)};var w,A,P}function Kc(u,h,v){return w=$.some(u),P=(A=h).components,oe=On(v,function(de,ye){return Pe=de,Oe=!1,{name:ct(Se=ye),required:function(){return Pe.fold(function(Re,Ne){return Re},function(Re,Ne){return Re})},used:function(){return Oe},replace:function(){if(Oe)throw new Error("Trying to use the same placeholder more than once: "+Se);return Oe=!0,Pe}};var Se,Pe,Oe}),H=w,Y=A,X=oe,ue=dr(P,function(de){return iv(H,Y,de,X)}),Ht(oe,function(de){if(!1===de.used()&&de.required())throw new Error("Placeholder: "+de.name()+" was not found in components list\nNamespace: "+w.getOr("none")+"\nComponents: "+JSON.stringify(A.components,null,2))}),ue;var w,A,P,H,Y,X,oe,ue}function ii(u,h,v){var w=h.partUids[v];return u.getSystem().getByUid(w).toOptional()}function mo(u,h,v){return ii(u,h,v).getOrDie("Could not find part: "+v)}function as(u,h,v){var w={},A=h.partUids,P=u.getSystem();return Tr(v,function(H){w[H]=ct(P.getByUid(A[H]))}),w}function $m(u,h){var v=u.getSystem();return On(h.partUids,function(w,A){return ct(v.getByUid(w))})}function $p(u){return ra(u.partUids)}function ax(u,h,v){var w={},A=h.partUids,P=u.getSystem();return Tr(v,function(H){w[H]=ct(P.getByUid(A[H]).getOrDie())}),w}function g0(u,h){return Co(nn(p0(h),function(v){return{key:v,value:u+"-"+v}}))}function md(u){return $n("partUids","partUids",Oo(function(h){return g0(h.uid,u)}),Ze())}function m0(u,h,v,w,A){var P;return pu(u+" [SpecSchema]",qu((P=A,(0<w.length?[Tf("parts",w)]:[]).concat([pn("uid"),St("dom",{}),St("components",[]),$v("originalSpec"),St("debug.sketcher",{})]).concat(P)).concat(h)),v)}function Jm(u,h,v,w,A){var P=Sy(A),H=m0(u,h,P,G_(v),[md(v)]),Y=ix(0,H,v);return w(H,Kc(u,H,Y.internals()),P,Y.externals())}function kc(u){var h=pu("Sketcher for "+u.name,lv,u),v=On(h.apis,Op),w=On(h.extraApis,Ed);return qe(qe({name:h.name,configFields:h.configFields,sketch:function(A){return(0,h.factory)(m0(h.name,h.configFields,Y=Sy(A),[],[]),Y);var Y}},v),w)}function Ul(u){var h=pu("Sketcher for "+u.name,RS,u),v=Km(h.name,h.partFields),w=On(h.apis,Op),A=On(h.extraApis,Ed);return qe(qe({name:h.name,partFields:h.partFields,configFields:h.configFields,sketch:function(P){return Jm(h.name,h.configFields,h.partFields,h.factory,P)},parts:v},w),A)}function jd(u){return"input"===qt(u)&&"radio"!==Wa(u,"type")||"textarea"===qt(u)}function hy(u,h,v){(h.disabled()?Wb:Rh)(u,h)}function hf(u,h){return!0===h.useNative&&Fo(px,qt(u.element))}function v0(u,h){return hf(u,h)?Bs(u.element,"disabled"):"true"===Wa(u.element,"aria-disabled")}function ip(u,h,v,w){var A=Gl(u.element,"."+h.highlightClass);Tr(A,function(P){Ir(w,function(H){return H.element===P})||(yi(P,h.highlightClass),u.getSystem().getByDom(P).each(function(H){h.onDehighlight(u,H),Rr(H,Om())}))})}function zf(u,h,v,w){ip(u,h,0,[w]),yu(0,h,0,w)||(qn(w.element,h.highlightClass),h.onHighlight(u,w),Rr(w,q1()))}function ap(u,h,v,w){var A=Gl(u.element,"."+h.itemClass);return rr(A,function(P){return Ua(P,h.highlightClass)}).bind(function(P){var H=qc(P,w,0,A.length-1);return u.getSystem().getByDom(A[H]).toOptional()})}function fc(u,h,v){var w=yr(u.slice(0,h)),A=yr(u.slice(h+1));return Yi(w.concat(A),v)}function y0(u,h,v){return Yi(yr(u.slice(0,h)),v)}function vd(u,h,v){var w=u.slice(0,h);return Yi(u.slice(h+1).concat(w),v)}function Qm(u,h,v){return Yi(u.slice(h+1),v)}function jo(u){return function(h){return Fo(u,h.raw.which)}}function hl(u){return function(h){return Ue(u,function(v){return v(h)})}}function sp(u){return!0===u.raw.shiftKey}function sx(u){return!0===u.raw.ctrlKey}function Ho(u,h){return{matches:u,classification:h}}function Fb(u,h,v){h.exists(function(w){return v.exists(function(A){return fn(A,w)})})||vr(u,E_(),{prevFocus:h,newFocus:v})}function py(){function u(h){return Hd(h.element)}return{get:u,set:function(h,v){var w=u(h);h.getSystem().triggerFocus(v,h.element),Fb(h,w,u(h))}}}function yd(){function u(h){return fi.getHighlighted(h).map(function(v){return v.element})}return{get:u,set:function(h,v){var w=u(h);h.getSystem().getByDom(v).fold(Gt,function(P){fi.highlight(h,P)});var A=u(h);Fb(h,w,A)}}}function Wg(u,h,v,w,A,P){var H=P.map(Sl);return Jp(u,h,v,w,A,H)}function gy(u,h,v){var w,P,H=h.getAttachPoint(u);to(u.element,"position",jl.getMode(H)),P=h.cloakVisibilityAttr,Di((w=u).element,"visibility").fold(function(){ls(w.element,P)},function(Y){Gr(w.element,P,Y)}),to(w.element,"visibility","hidden")}function Ff(u,h,v){var w,A,H=u.element;Ir(["top","left","right","bottom"],function(Y){return Di(H,Y).isSome()})||Lo(u.element,"position"),A="visibility",Ds((w=u).element,h.cloakVisibilityAttr).fold(function(){return Lo(w.element,A)},function(Y){return to(w.element,A,Y)})}function yu(u,h,v,w){return Ua(w.element,h.highlightClass)}function ev(u,h,v){return Ya(u.element,"."+h.itemClass).bind(function(w){return u.getSystem().getByDom(w).toOptional()})}function Tl(u,h,v){var w=Gl(u.element,"."+h.itemClass);return(0<w.length?$.some(w[w.length-1]):$.none()).bind(function(A){return u.getSystem().getByDom(A).toOptional()})}function Gg(u,h,v){return Ao(nn(Gl(u.element,"."+h.itemClass),function(w){return u.getSystem().getByDom(w).toOptional()}))}var Yd,pf,my,ps,gs=(Yd=Ll,{get:function(u){if(!Yd(u))throw new Error("Can only get text value of a text node");return pf(u).getOr("")},getOption:pf=function(u){return Yd(u)?$.from(u.dom.nodeValue):$.none()},set:function(u,h){if(!Yd(u))throw new Error("Can only set raw text value of a text node");u.dom.nodeValue=h}}),Vi=["img","br"],qd=[vi("getSelection"),pn("root"),vi("bubble"),zm(),St("overrides",{}),St("showAbove",!1),ea("placement",function(u,h,v){var w=eo(h.root).dom,A=kl(u,0,h);return Lf(H_(w,h).bind(function(P){return(0<(X=Wm(w,Gm.exactFromRange(P)).getBoundingClientRect()).width||0<X.height?$.some(X).map(Vm):$.none()).orThunk(function(){var oe=it.fromText("\ufeff");lo(P.start,oe);var ue=Bf(w,Gm.exact(oe,0,oe,1));return rf(oe),ue}).bind(function(oe){return sc(oe.left,oe.top,oe.width,oe.height)});var X}),A,h,v,H_(w,h).bind(function(P){return Au(P.start)?$.some(P.start):yc(P.start)}).getOr(u.element))})],Ug="link-layout",U_=es("type",{selection:qd,node:Pb,hotspot:jp,submenu:[pn("item"),zm(),St("overrides",{}),ea("placement",function(u,h,v){var w=Eg(v,h.item.element),A=gd(u.element,h,Zp(),Zc(),Zp(),Zc(),$.none());return $.some(iy({anchorBox:w,bubble:u0(),overrides:h.overrides,layouts:A,placer:$.none()}))})],makeshift:Ih}),tv=[al("classes",rt),ys("mode","all",["all","layout","placement"])],vy=[St("useFixed",uo),vi("getBounds")],nv=[tc("anchor",U_),Pi("transition",tv)],Jp=function(u,h,v,w,A,P){var H=pu("placement.info",ke(nv),A),Y=H.anchor,X=w.element,oe=v.get(w.uid);Og(function(){to(X,"position","fixed");var ue=Di(X,"visibility");to(X,"visibility","hidden");var de,ye,Se,Pe,Oe=h.useFixed()?(Pe=document.documentElement,Ab(0,0,Pe.clientWidth,Pe.clientHeight)):(ye=Pl((de=u).element),Se=de.element.dom.getBoundingClientRect(),Ng(ye.left,ye.top,Se.width,Se.height)),Re=Y.placement,Ne=P.map(ct).or(h.getBounds);Re(u,Y,Oe).each(function(We){var Te=We.placer.getOr(df)(u,Oe,We,Ne,w,oe,H.transition);v.set(w.uid,Te)}),ue.fold(function(){Lo(X,"visibility")},function(We){to(X,"visibility",We)}),Di(X,"left").isNone()&&Di(X,"top").isNone()&&Di(X,"right").isNone()&&Di(X,"bottom").isNone()&&Sr(Di(X,"position"),"fixed")&&Lo(X,"position")},X)},jl=_a({fields:vy,name:"positioning",active:Pg,apis:Object.freeze({__proto__:null,position:function(u,h,v,w,A){Wg(u,h,v,w,A,$.none())},positionWithin:Wg,positionWithinBounds:Jp,getMode:function(u,h,v){return h.useFixed()?"fixed":"absolute"},reset:function(u,h,v,w){var A=w.element;Tr(["position","left","right","top","bottom"],function(P){return Lo(A,P)}),ls(A,oy),v.clear(w.uid)}}),state:Object.freeze({__proto__:null,init:function(){var u={};return Uc({readState:function(){return u},clear:function(h){Kr(h)?delete u[h]:u={}},set:function(h,v){u[h]=v},get:function(h){return rn(u,h)}})}})}),b0=function(u){Rr(u,Gc());var h=u.components();Tr(h,b0)},rv=function(u){var h=u.components();Tr(h,rv),Rr(u,Ku())},x0=function(u,h,v){u.getSystem().addToWorld(h),v(u.element,h.element),Zs(u.element)&&rv(h),u.syncComponents()},ux=function(u,h,v){v(u,h.element);var w=Ti(h.element);Tr(w,function(A){h.getByDom(A).each(rv)})},lx=Object.freeze({__proto__:null,cloak:gy,decloak:Ff,open:Xm,openWhileCloaked:function(u,h,v,w,A){gy(u,h),Xm(u,h,v,w),A(),Ff(u,h)},close:Qu,isOpen:fy,isPartOf:function(u,h,v,w){return fy(0,0,v)&&v.get().exists(function(A){return h.isPartOf(u,A,w)})},getState:function(u,h,v){return v.get()},setContent:function(u,h,v,w){return v.get().map(function(){return eu(u,h,v,w)})}}),jg=Object.freeze({__proto__:null,events:function(u,h){return ia([on(Kh(),function(v,w){Qu(v,u,h)})])}}),ai=_a({fields:[ei("onOpen"),ei("onClose"),pn("isPartOf"),pn("getAttachPoint"),St("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:jg,apis:lx,state:Object.freeze({__proto__:null,init:function(){var u=Cs(),h=ct("not-implemented");return Uc({readState:h,isOpen:u.isSet,clear:u.clear,set:u.set,get:u.get})}})}),Qp=ct("dismiss.popups"),Yg=ct("reposition.popups"),_0=ct("mouse.released"),cx=qu([St("isExtraPart",uo),Pi("fireEventInstead",[St("event",Fp())])]),ES=qu([Pi("fireEventInstead",[St("event",t0())]),Xu("doReposition")]),fx=Object.freeze({__proto__:null,onLoad:lc,onUnload:W_,setValue:function(u,h,v,w){h.store.manager.setValue(u,h,v,w)},getValue:function(u,h,v){return h.store.manager.getValue(u,h,v)},getState:function(u,h,v){return v}}),aa=Object.freeze({__proto__:null,events:function(u,h){var v=u.resetOnDom?[ja(function(w,A){lc(w,u,h)}),Nd(function(w,A){W_(w,u,h)})]:[xc(u,h,lc)];return ia(v)}}),dx=Object.freeze({__proto__:null,memory:zb,dataset:cc,manual:function(){return Uc({readState:Gt})},init:function(u){return u.store.manager.state(u)}}),ov=[vi("initialValue"),pn("getFallbackEntry"),pn("getDataKey"),pn("setValue"),ea("manager",{setValue:dy,getValue:function(u,h,v){var w=h.store,A=w.getDataKey(u);return v.lookup(A).getOrThunk(function(){return w.getFallbackEntry(A)})},onLoad:function(u,h,v){h.store.initialValue.each(function(w){dy(u,h,v,w)})},onUnload:function(u,h,v){v.clear()},state:cc})],Oh=[pn("getValue"),St("setValue",Gt),vi("initialValue"),ea("manager",{setValue:function(u,h,v,w){h.store.setValue(u,w),h.onSetValue(u,w)},getValue:function(u,h,v){return h.store.getValue(u)},onLoad:function(u,h,v){h.store.initialValue.each(function(w){h.store.setValue(u,w)})},onUnload:Gt,state:ac.init})],or=_a({fields:[Fc("store",{mode:"memory"},es("mode",{memory:[vi("initialValue"),ea("manager",{setValue:function(u,h,v,w){v.set(w),h.onSetValue(u,w)},getValue:function(u,h,v){return v.get()},onLoad:function(u,h,v){h.store.initialValue.each(function(w){v.isNotSet()&&v.set(w)})},onUnload:function(u,h,v){v.clear()},state:zb})],manual:Oh,dataset:ov})),ei("onSetValue"),St("resetOnDom",!1)],name:"representing",active:aa,apis:fx,extra:{setValueFrom:function(u,h){var v=or.getValue(h);or.setValue(u,v)}},state:dx}),eg=Es,Vf=tu,qg="placeholder",tg=bs([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),iv=function(u,h,v,w){return A=u,H=w,(Kp(P=v)&&P.uiType===qg?(X=P,oe=H,(Y=A).exists(function(ue){return ue!==X.owner})?tg.single(!0,ct(X)):rn(oe,X.name).fold(function(){throw new Error("Unknown placeholder component: "+X.name+"\nKnown: ["+ra(oe)+"]\nNamespace: "+Y.getOr("none")+"\nSpec: "+JSON.stringify(X,null,2))},function(ue){return ue.replace()})):tg.single(!1,ct(P))).fold(function(ue,de){var ye=Kp(v)?de(h,v.config,v.validated):de(h),Se=dr(rn(ye,"components").getOr([]),function(Pe){return iv(u,h,Pe,w)});return[qe(qe({},ye),{components:Se})]},function(ue,de){if(Kp(v)){var ye=de(h,v.config,v.validated);return v.validated.preprocess.getOr(_n)(ye)}return de(h)});var A,P,H,Y,X,oe},Jr=tg.single,hx=tg.multiple,yy=ct(qg),by=bs([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Vb=St("factory",{sketch:_n}),av=St("schema",[]),xy=pn("name"),ng=$n("pname","pname",il(function(u){return"<alloy."+Br(u.name)+">"}),Ze()),rg=fr("schema",function(){return[vi("preprocess")]}),Xg=St("defaults",ct({})),Zg=St("overrides",ct({})),sv=ke([Vb,av,xy,ng,Xg,Zg]),Tc=ke([Vb,av,xy,Xg,Zg]),Eh=ke([Vb,av,xy,ng,Xg,Zg]),PS=ke([Vb,rg,xy,pn("unit"),ng,Xg,Zg]),bu=Mc(by.required,sv),Xd=Mc(by.external,Tc),Ph=Mc(by.optional,Eh),_y=Mc(by.group,PS),uv=ct("entirety"),Zd=Object.freeze({__proto__:null,required:bu,external:Xd,optional:Ph,group:_y,asNamedPart:h0,name:Ud,asCommon:function(u){return u.fold(_n,_n,_n,_n)},original:uv}),wy=function(u,h){return{uiType:yy(),owner:u,name:h}},Kg=Object.freeze({__proto__:null,generate:Km,generateOne:Hg,schemas:G_,names:p0,substitutes:ix,components:Kc,defaultUids:g0,defaultUidsSchema:md,getAllParts:$m,getAllPartNames:$p,getPart:ii,getPartOrDie:mo,getParts:as,getPartsOrDie:ax}),Sy=function(u){return hr(u,"uid")?u:qe(qe({},u),{uid:Hp("uid")})},lv=qu([pn("name"),pn("factory"),pn("configFields"),St("apis",{}),St("extraApis",{})]),RS=qu([pn("name"),pn("factory"),pn("configFields"),pn("partFields"),St("apis",{}),St("extraApis",{})]),Hb=Object.freeze({__proto__:null,getCurrent:function(u,h,v){return h.find(u)}}),ti=_a({fields:[pn("find")],name:"composing",apis:Hb}),px=["input","button","textarea","select"],Wb=function(u,h,v){h.disableClass.each(function(w){qn(u.element,w)}),(hf(u,h)?function(w){Gr(w.element,"disabled","disabled")}:function(w){Gr(w.element,"aria-disabled","true")})(u),h.onDisabled(u)},Rh=function(u,h,v){h.disableClass.each(function(w){yi(u.element,w)}),(hf(u,h)?function(w){ls(w.element,"disabled")}:function(w){Gr(w.element,"aria-disabled","false")})(u),h.onEnabled(u)},Cy=Object.freeze({__proto__:null,enable:Rh,disable:Wb,isDisabled:v0,onLoad:hy,set:function(u,h,v,w){(w?Wb:Rh)(u,h)}}),cv=Object.freeze({__proto__:null,exhibit:function(u,h){return Pd({classes:h.disabled()?h.disableClass.toArray():[]})},events:function(u,h){return ia([ua(af(),function(v,w){return v0(v,u)}),xc(u,h,hy)])}}),Vr=_a({fields:[Zi("disabled",uo),St("useNative",!0),vi("disableClass"),ei("onDisabled"),ei("onEnabled")],name:"disabling",active:cv,apis:Cy}),$g=Object.freeze({__proto__:null,dehighlightAll:function(u,h,v){return ip(u,h,0,[])},dehighlight:function(u,h,v,w){yu(0,h,0,w)&&(yi(w.element,h.highlightClass),h.onDehighlight(u,w),Rr(w,Om()))},highlight:zf,highlightFirst:function(u,h,v){ev(u,h).each(function(w){zf(u,h,0,w)})},highlightLast:function(u,h,v){Tl(u,h).each(function(w){zf(u,h,0,w)})},highlightAt:function(u,h,v,w){var A,P,H;P=w,H=Gl((A=u).element,"."+h.itemClass),$.from(H[P]).fold(function(){return Vo.error(new Error("No element found with index "+P))},A.getSystem().getByDom).fold(function(Y){throw Y},function(Y){zf(u,h,0,Y)})},highlightBy:function(u,h,v,w){Yi(Gg(u,h),w).each(function(A){zf(u,h,0,A)})},isHighlighted:yu,getHighlighted:function(u,h,v){return Ya(u.element,"."+h.highlightClass).bind(function(w){return u.getSystem().getByDom(w).toOptional()})},getFirst:ev,getLast:Tl,getPrevious:function(u,h,v){return ap(u,h,0,-1)},getNext:function(u,h,v){return ap(u,h,0,1)},getCandidates:Gg}),fi=_a({fields:[pn("highlightClass"),pn("itemClass"),ei("onHighlight"),ei("onDehighlight")],name:"highlighting",apis:$g}),j_=[8],bd=[9],pl=[13],fv=[27],el=[32],Jg=[37],Qg=[38],dv=[39],gf=[40],og=qr(sp);function Yl(u,h,v,w,A){function P(Y,X,oe,ue,de){var ye=oe(Y,X,ue,de),Se=X.event;return Yi(ye,function(Pe){return Pe.matches(Se)}).map(function(Pe){return Pe.classification}).bind(function(Pe){return Pe(Y,X,ue,de)})}var H={schema:function(){return u.concat([St("focusManager",py()),Fc("focusInside","onFocus",Od(function(Y){return Fo(["onFocus","onEnterOrSpace","onApi"],Y)?Vo.value(Y):Vo.error("Invalid value for focusInside")})),ea("handler",H),ea("state",h),ea("sendFocusIn",A)])},processKey:P,toEvents:function(Y,X){var oe=Y.focusInside!==my.OnFocusMode?$.none():A(Y).map(function(de){return on(ic(),function(ye,Se){de(ye,Y,X),Se.stop()})}),ue=[on(gh(),function(de,ye){P(de,ye,v,Y,X).fold(function(){var Se=de,Pe=ye,Oe=jo(el.concat(pl))(Pe.event);Y.focusInside===my.OnEnterOrSpaceMode&&Oe&&Ki(Se,Pe)&&A(Y).each(function(Re){Re(Se,Y,X),Pe.stop()})},function(Se){ye.stop()})}),on(ci(),function(de,ye){P(de,ye,w,Y,X).each(function(Se){ye.stop()})})];return ia(oe.toArray().concat(ue))}};return H}function tl(u){function h(Y,X){return 0<Hu(Y.visibilitySelector.bind(function(oe){return fd(X,oe)}).getOr(X))}function v(Y,X,oe){var ue=X,de=mt(Gl(Y.element,ue.selector),function(ye){return h(ue,ye)});$.from(de[ue.firstTabstop]).each(function(ye){X.focusManager.set(Y,ye)})}function w(Y,X,oe,ue){var de,ye=Gl(Y.element,oe.selector);return(de=oe).focusManager.get(Y).bind(function(Se){return fd(Se,de.selector)}).bind(function(Se){return rr(ye,Yo(fn,Se)).bind(function(Pe){return Oe=Y,Re=oe,ue(ye,Pe,function(Ne){return h(We=Re,Te=Ne)&&We.useTabstopAt(Te);var We,Te}).fold(function(){return Re.cyclic?$.some(!0):$.none()},function(Ne){return Re.focusManager.set(Oe,Ne),$.some(!0)});var Oe,Re})})}var A=[vi("onEscape"),vi("onEnter"),St("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),St("firstTabstop",0),St("useTabstopAt",Ur),vi("visibilitySelector")].concat([u]),P=ct([Ho(hl([sp,jo(bd)]),function(Y,X,oe){return w(Y,0,oe,oe.cyclic?fc:y0)}),Ho(jo(bd),function(Y,X,oe){return w(Y,0,oe,oe.cyclic?vd:Qm)}),Ho(jo(fv),function(Y,X,oe){return oe.onEscape.bind(function(ue){return ue(Y,X)})}),Ho(hl([og,jo(pl)]),function(Y,X,oe){return oe.onEnter.bind(function(ue){return ue(Y,X)})})]),H=ct([]);return Yl(A,ac.init,P,H,function(){return $.some(v)})}function hv(u,h,v){return jd(v)&&jo(el)(h.event)?$.none():(Fi(u,v,af()),$.some(!0))}function ig(u,h){return $.some(!0)}function em(u,h,v){return v.execute(u,h,u.element)}function tm(){var u=Cs();return Uc({readState:function(){return u.get().map(function(h){return{numRows:String(h.numRows),numColumns:String(h.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(h,v){u.set({numRows:h,numColumns:v})},getNumRows:function(){return u.get().map(function(h){return h.numRows})},getNumColumns:function(){return u.get().map(function(h){return h.numColumns})}})}function M(u){return function(h,v,w,A){var P=u(h.element);return $_(P,h,v,w,A)}}function R(u,h){return M(Gd(u,h))}function W(u,h){return M(Gd(h,u))}function J(u){return function(h,v,w,A){return $_(u,h,v,w,A)}}function se(u){return!((h=u.dom).offsetWidth<=0&&h.offsetHeight<=0);var h}function ce(u,h,v){var w,A=mt(Gl(u,v),se);return rr(w=A,function(P){return fn(P,h)}).map(function(P){return{index:P,candidates:w}})}function we(u,h){return rr(u,function(v){return fn(h,v)})}function Ie(u,h,v,w){return w(Math.floor(h/v),h%v).bind(function(A){var P=A.row*v+A.column;return 0<=P&&P<u.length?$.some(u[P]):$.none()})}function He(u,h,v,w,A){return Ie(u,h,w,function(P,H){var X=qc(H,A,0,(P===v-1?u.length-P*w:w)-1);return $.some({row:P,column:X})})}function Ye(u,h,v,w,A){return Ie(u,h,w,function(P,H){var Y=qc(P,A,0,v-1),oe=lf(H,0,(Y===v-1?u.length-Y*w:w)-1);return $.some({row:Y,column:oe})})}function at(u,h,v){Ya(u.element,h.selector).each(function(w){h.focusManager.set(u,w)})}function ut(u){return function(h,v,w,A){return ce(h,v,w.selector).bind(function(P){return u(P.candidates,P.index,A.getNumRows().getOr(w.initSize.numRows),A.getNumColumns().getOr(w.initSize.numColumns))})}}function st(u,h,v){return v.captureTab?$.some(!0):$.none()}function Mt(u,h,v,w){var A=function(P,H,Y){var X,oe=qc(H,w,0,Y.length-1);return oe===P?$.none():"button"===qt(X=Y[oe])&&"disabled"===Wa(X,"disabled")?A(P,oe,Y):$.from(Y[oe])};return ce(u,v,h).bind(function(P){var H=P.index;return A(H,H,P.candidates)})}function ht(u,h,v){return(w=v).focusManager.get(u).bind(function(A){return fd(A,w.selector)}).bind(function(A){return v.execute(u,h,A)});var w}function zt(u,h,v){h.getInitial(u).orThunk(function(){return Ya(u.element,h.selector)}).each(function(w){h.focusManager.set(u,w)})}function Xt(u,h,v){return Mt(u,v.selector,h,-1)}function ft(u,h,v){return Mt(u,v.selector,h,1)}function Pt(u){return function(h,v,w,A){return u(h,v,w,A).bind(function(){return w.executeOnMove?ht(h,v,w):$.some(!0)})}}function xn(u,h,v){return v.onEscape(u,h)}function wt(u,h,v){return $.from(u[h]).bind(function(w){return $.from(w[v]).map(function(A){return{rowIndex:h,columnIndex:v,cell:A}})})}function Sn(u,h,v,w){return wt(u,h,qc(v,w,0,u[h].length-1))}function $t(u,h,v,w){var A=qc(v,w,0,u.length-1);return wt(u,A,lf(h,0,u[A].length-1))}function Er(u,h,v,w){return wt(u,h,lf(v+w,0,u[h].length-1))}function Tn(u,h,v,w){var A=lf(v+w,0,u.length-1);return wt(u,A,lf(h,0,u[A].length-1))}function Lr(u,h,v){h.previousSelector(u).orThunk(function(){return Ya(u.element,h.selectors.cell)}).each(function(w){h.focusManager.set(u,w)})}function Qr(u,h){return function(v,w,A){var P=A.cycles?u:h;return fd(w,A.selectors.row).bind(function(H){return we(Gl(H,A.selectors.cell),w).bind(function(Y){var X=Gl(v,A.selectors.row);return we(X,H).bind(function(oe){var ue,de=(ue=A,nn(X,function(ye){return Gl(ye,ue.selectors.cell)}));return P(de,oe,Y).map(function(ye){return ye.cell})})})})}}function io(u,h,v){return v.focusManager.get(u).bind(function(w){return v.execute(u,h,w)})}function Po(u,h,v){Ya(u.element,h.selector).each(function(w){h.focusManager.set(u,w)})}function ri(u,h,v){return Mt(u,v.selector,h,-1)}function Do(u,h,v){return Mt(u,v.selector,h,1)}function si(u,h,v,w){var A=u.getSystem().build(w);x0(u,A,v)}function Hi(u,h,v,w){Yi(bx(u),function(A){return fn(w.element,A.element)}).each(qm)}function Ea(u,h,v,w,A){var P=bx(u);return $.from(P[w]).map(function(H){return Hi(u,0,0,H),A.each(function(Y){si(u,0,function(X,oe){var ue,de=oe;$r(ue=X,w).fold(function(){Qa(ue,de)},function(ye){lo(ye,de)})},Y)}),H})}function tr(u,h){var v,w;return{key:u,value:{config:{},me:(v=u,w=ia(h),_a({fields:[pn("enabled")],name:v,active:{events:ct(w)}})),configAsRaw:ct({}),initialConfig:{},state:ac}}}function da(u,h){h.ignore||(Vd(u.element),h.onFocus(u))}function di(u,h,v){var w=h.aria;w.update(u,w,v.get())}function Wi(u,h,v){h.toggleClass.each(function(w){(v.get()?qn:yi)(u.element,w)})}function Ws(u,h,v){S0(u,h,v,!v.get())}function mf(u,h,v){v.set(!0),Wi(u,h,v),di(u,h,v)}function Gs(u,h,v){v.set(!1),Wi(u,h,v),di(u,h,v)}function Ms(u,h,v){S0(u,h,v,h.selected)}function Kd(){function u(h,v){v.stop(),ma(h)}return[on(oc(),u),on(yh(),u),hh(ul()),hh(Wc())]}function pv(u){return ia(De([u.map(function(h){return bh(function(v,w){h(v),w.stop()})}).toArray(),Kd()]))}function nm(u){(Hd(u.element).isNone()||_o.isFocused(u))&&(_o.isFocused(u)||_o.focus(u),vr(u,jS,{item:u}))}function xd(u){vr(u,YS,{item:u})}function vf(u,h){return u.x+u.width/2-h.width/2}function up(u,h){return u.x+u.width-h.width}function gv(u,h){return u.y+u.height-h.height}function ql(u,h){return u.y+u.height/2-h.height/2}function Lh(u,h,v){return mu(up(u,h),gv(u,h),v.insetSouthwest(),Tb(),"southwest",Xa(u,{right:0,bottom:3}),T0)}function Ps(u,h,v){return mu(u.x,gv(u,h),v.insetSoutheast(),ey(),"southeast",Xa(u,{left:1,bottom:3}),T0)}function Hf(u,h,v){return mu(up(u,h),u.y,v.insetNorthwest(),bi(),"northwest",Xa(u,{right:0,top:2}),T0)}function $d(u,h,v){return mu(u.x,u.y,v.insetNortheast(),r0(),"northeast",Xa(u,{left:1,top:2}),T0)}function gx(u,h,v){return mu(up(u,h),ql(u,h),v.insetEast(),i0(),"east",Xa(u,{right:0}),T0)}function Y_(u,h,v){return mu(u.x,ql(u,h),v.insetWest(),Up(),"west",Xa(u,{left:1}),T0)}function IM(u){switch(u){case"north":return ag;case"northeast":return $d;case"northwest":return Hf;case"south":return D0;case"southeast":return Ps;case"southwest":return Lh;case"east":return gx;case"west":return Y_}}function OM(u,h,v,w,A){return Rg(w).map(IM).getOr(ag)(u,h,v,w,A)}function H2(u){switch(u){case"north":return D0;case"northeast":return Ps;case"northwest":return Lh;case"south":return ag;case"southeast":return $d;case"southwest":return Hf;case"east":return Y_;case"west":return gx}}function EM(u,h,v,w,A){return Rg(w).map(H2).getOr(ag)(u,h,v,w,A)}function Li(u){var h=void 0!==u.uid&&zo(u,"uid")?u.uid:Hp("memento");return{get:function(v){return v.getSystem().getByUid(h).getOrDie()},getOpt:function(v){return v.getSystem().getByUid(h).toOptional()},asSpec:function(){return qe(qe({},u),{uid:h})}}}function q_(u){return function(){return rn(u,rw).getOr("!not found!")}}function Gb(u,h){var v,w=u.toLowerCase();if(cp.isRtl()){var A=Ke(v=w,"-rtl")?v:v+"-rtl";return hr(h,A)?A:w}return w}function X_(u,h){return rn(h,Gb(u,h))}function Z_(u,h){var v=h();return X_(u,v).getOrThunk(q_(v))}function PM(){return tr("add-focusable",[ja(function(u){var w;w=function(A){return ur(A,"svg")},Yi(u.element.dom.childNodes,function(A){return w(it.fromDom(A))}).map(it.fromDom).each(function(A){return Gr(A,"focusable","false")})})])}function w0(u,h,v,w){var A,P,H,Y=(H=h,cp.isRtl()&&hr(nw,H)?["tox-icon--flip"]:[]),X=rn(v,Gb(h,v)).or(w).getOrThunk(q_(v));return{dom:{tag:u.tag,attributes:null!==(A=u.attributes)&&void 0!==A?A:{},classes:u.classes.concat(Y),innerHtml:X},behaviours:jn(ln(ln([],null!==(P=u.behaviours)&&void 0!==P?P:[],!0),[PM()],!1))}}function Wf(u,h,v,w){return void 0===w&&(w=$.none()),w0(h,u,v(),w)}function S0(u,h,v,w){(w?mf:Gs)(u,h,v)}function RM(u,h,v){Gr(u.element,"aria-expanded",v)}function LS(u){return"prepared"===u.type?$.some(u.menu):$.none()}(ps=my=my||{}).OnFocusMode="onFocus",ps.OnEnterOrSpaceMode="onEnterOrSpace",ps.OnApiMode="onApi";var NS=tl(fr("cyclic",uo)),LM=tl(fr("cyclic",Ur)),My=Yl([St("execute",hv),St("useSpace",!1),St("useEnter",!0),St("useControlEnter",!1),St("useDown",!1)],ac.init,function(u,h,v,w){var A=v.useSpace&&!jd(u.element)?el:[],H=v.useDown?gf:[];return[Ho(jo(A.concat(v.useEnter?pl:[]).concat(H)),em)].concat(v.useControlEnter?[Ho(hl([sx,jo(pl)]),em)]:[])},function(u,h,v,w){return v.useSpace&&!jd(u.element)?[Ho(jo(el),ig)]:[]},function(){return $.none()}),K_=Object.freeze({__proto__:null,flatgrid:tm,init:function(u){return u.state(u)}}),$_=function(u,h,v,w,A){return w.focusManager.get(h).bind(function(P){return u(h.element,P,w,A)}).map(function(P){return w.focusManager.set(h,P),!0})},mx=J,BS=J,vx=J,J_=ut(function(u,h,v,w){return He(u,h,v,w,-1)}),zS=ut(function(u,h,v,w){return He(u,h,v,w,1)}),MT=ut(function(u,h,v,w){return Ye(u,h,v,w,-1)}),FS=ut(function(u,h,v,w){return Ye(u,h,v,w,1)}),NM=Yl([pn("selector"),St("execute",hv),Iu("onEscape"),St("captureTab",!1),Th()],tm,ct([Ho(jo(Jg),R(J_,zS)),Ho(jo(dv),W(J_,zS)),Ho(jo(Qg),mx(MT)),Ho(jo(gf),BS(FS)),Ho(hl([sp,jo(bd)]),st),Ho(hl([og,jo(bd)]),st),Ho(jo(fv),function(u,h,v){return v.onEscape(u,h)}),Ho(jo(el.concat(pl)),function(u,h,v,w){return(A=v).focusManager.get(u).bind(function(P){return fd(P,A.selector)}).bind(function(P){return v.execute(u,h,P)});var A})]),ct([Ho(jo(el),ig)]),function(){return $.some(at)}),W2=[pn("selector"),St("getInitial",$.none),St("execute",hv),Iu("onEscape"),St("executeOnMove",!1),St("allowVertical",!0)],BM=ct([Ho(jo(el),ig)]),Q_=Yl(W2,ac.init,function(u,h,v,w){var A=Jg.concat(v.allowVertical?Qg:[]),P=dv.concat(v.allowVertical?gf:[]);return[Ho(jo(A),Pt(R(Xt,ft))),Ho(jo(P),Pt(W(Xt,ft))),Ho(jo(pl),ht),Ho(jo(el),ht),Ho(jo(fv),xn)]},BM,function(){return $.some(zt)}),kT=[Tf("selectors",[pn("row"),pn("cell")]),St("cycles",!0),St("previousSelector",$.none),St("execute",hv)],VS=Qr(function(u,h,v){return Sn(u,h,v,-1)},function(u,h,v){return Er(u,h,v,-1)}),HS=Qr(function(u,h,v){return Sn(u,h,v,1)},function(u,h,v){return Er(u,h,v,1)}),yx=Qr(function(u,h,v){return $t(u,v,h,-1)},function(u,h,v){return Tn(u,v,h,-1)}),TT=Qr(function(u,h,v){return $t(u,v,h,1)},function(u,h,v){return Tn(u,v,h,1)}),WS=ct([Ho(jo(Jg),R(VS,HS)),Ho(jo(dv),W(VS,HS)),Ho(jo(Qg),mx(yx)),Ho(jo(gf),BS(TT)),Ho(jo(el.concat(pl)),function(u,h,v){return Hd(u.element).bind(function(w){return v.execute(u,h,w)})})]),DT=ct([Ho(jo(el),ig)]),C0=Yl(kT,ac.init,WS,DT,function(){return $.some(Lr)}),zM=[pn("selector"),St("execute",hv),St("moveOnTab",!1)],AT=ct([Ho(jo(Qg),vx(ri)),Ho(jo(gf),vx(Do)),Ho(hl([sp,jo(bd)]),function(u,h,v,w){return v.moveOnTab?vx(ri)(u,h,v,w):$.none()}),Ho(hl([og,jo(bd)]),function(u,h,v,w){return v.moveOnTab?vx(Do)(u,h,v,w):$.none()}),Ho(jo(pl),io),Ho(jo(el),io)]),M0=ct([Ho(jo(el),ig)]),FM=Yl(zM,ac.init,AT,M0,function(){return $.some(Po)}),VM=Yl([Iu("onSpace"),Iu("onEnter"),Iu("onShiftEnter"),Iu("onLeft"),Iu("onRight"),Iu("onTab"),Iu("onShiftTab"),Iu("onUp"),Iu("onDown"),Iu("onEscape"),St("stopSpaceKeyup",!1),vi("focusIn")],ac.init,function(u,h,v){return[Ho(jo(el),v.onSpace),Ho(hl([og,jo(pl)]),v.onEnter),Ho(hl([sp,jo(pl)]),v.onShiftEnter),Ho(hl([sp,jo(bd)]),v.onShiftTab),Ho(hl([og,jo(bd)]),v.onTab),Ho(jo(Qg),v.onUp),Ho(jo(gf),v.onDown),Ho(jo(Jg),v.onLeft),Ho(jo(dv),v.onRight),Ho(jo(el),v.onSpace),Ho(jo(fv),v.onEscape)]},function(u,h,v){return v.stopSpaceKeyup?[Ho(jo(el),ig)]:[]},function(u){return u.focusIn}),IT=NS.schema(),G2=LM.schema(),GS=Q_.schema(),HM=NM.schema(),U2=C0.schema(),OT=My.schema(),WM=FM.schema(),ET=VM.schema(),no=Qv({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:IT,cyclic:G2,flow:GS,flatgrid:HM,matrix:U2,execution:OT,menu:WM,special:ET}),name:"keying",active:{events:function(u,h){return u.handler.toEvents(u,h)}},apis:{focusIn:function(u,h,v){h.sendFocusIn(h).fold(function(){u.getSystem().triggerFocus(u.element,u.element)},function(w){w(u,h,v)})},setGridSize:function(u,h,v,w,A){zo(v,"setGridSize")?v.setGridSize(w,A):console.error("Layout does not support setGridSize")}},state:K_}),bx=function(u,h){return u.components()},Eo=_a({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(u,h,v,w){si(u,0,Qa,w)},prepend:function(u,h,v,w){si(u,0,Dd,w)},remove:Hi,replaceAt:Ea,replaceBy:function(u,h,v,w,A){return rr(bx(u),w).bind(function(P){return Ea(u,0,0,P,A)})},set:function(u,h,v,w){Og(function(){var A=nn(w,u.getSystem().build);ox(u,A)},u.element)},contents:bx})}),GM=Object.freeze({__proto__:null,focus:da,blur:function(u,h){h.ignore||u.element.dom.blur()},isFocused:function(u){return tp(u.element)}}),US=Object.freeze({__proto__:null,exhibit:function(u,h){return Pd(h.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(u){return ia([on(ic(),function(h,v){da(h,u),v.stop()})].concat(u.stopMousedown?[on(Wc(),function(h,v){v.event.prevent()})]:[]))}}),_o=_a({fields:[ei("onFocus"),St("stopMousedown",!1),St("ignore",!1)],name:"focusing",active:US,apis:GM}),xx=Object.freeze({__proto__:null,onLoad:Ms,toggle:Ws,isOn:function(u,h,v){return v.get()},on:mf,off:Gs,set:S0}),UM=Object.freeze({__proto__:null,exhibit:function(){return Pd({})},events:function(u,h){var v,w,A,P=(v=u,w=h,A=Ws,bh(function(Y){A(Y,v,w)})),H=xc(u,h,Ms);return ia(De([u.toggleOnExecute?[P]:[],[H]]))}}),Ei=_a({fields:[St("selected",!1),vi("toggleClass"),St("toggleOnExecute",!0),Fc("aria",{mode:"none"},es("mode",{pressed:[St("syncWithExpanded",!1),ea("update",function(u,h,v){Gr(u.element,"aria-pressed",v),h.syncWithExpanded&&RM(u,0,v)})],checked:[ea("update",function(u,h,v){Gr(u.element,"aria-checked",v)})],expanded:[ea("update",RM)],selected:[ea("update",function(u,h,v){Gr(u.element,"aria-selected",v)})],none:[ea("update",Gt)]}))],name:"toggling",active:UM,apis:xx,state:{init:function(){var u=Nr(!1);return{get:function(){return u.get()},set:function(h){return u.set(h)},clear:function(){return u.set(!1)},readState:function(){return u.get()}}}}}),jS="alloy.item-hover",YS="alloy.item-focus",jM=ct(jS),ew=ct(YS),PT=[pn("data"),pn("components"),pn("dom"),St("hasSubmenu",!1),vi("toggling"),eg("itemBehaviours",[Ei,_o,no,or]),St("ignoreFocus",!1),St("domModification",{}),ea("builder",function(u){return{dom:u.dom,domModification:qe(qe({},u.domModification),{attributes:qe(qe(qe({role:u.toggling.isSome()?"menuitemcheckbox":"menuitem"},u.domModification.attributes),{"aria-haspopup":u.hasSubmenu}),u.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Vf(u.itemBehaviours,[u.toggling.fold(Ei.revoke,function(h){return Ei.config(qe({aria:{mode:"checked"}},h))}),_o.config({ignore:u.ignoreFocus,stopMousedown:u.ignoreFocus,onFocus:function(h){xd(h)}}),no.config({mode:"execution"}),or.config({store:{mode:"memory",initialValue:u.data}}),tr("item-type-events",ln(ln([],Kd(),!0),[on(Ri(),nm),on(cd(),_o.focus)],!1))]),components:u.components,eventOrder:u.eventOrder}}),St("eventOrder",{})],qS=[pn("dom"),pn("components"),ea("builder",function(u){return{dom:u.dom,components:u.components,events:ia([on(cd(),function(h,v){v.stop()})])}})],tw=ct("item-widget"),_x=ct([bu({name:"widget",overrides:function(u){return{behaviours:jn([or.config({store:{mode:"manual",getValue:function(h){return u.data},setValue:Gt}})])}}})]),Sx=es("type",{widget:[pn("uid"),pn("data"),pn("components"),pn("dom"),St("autofocus",!1),St("ignoreFocus",!1),eg("widgetBehaviours",[or,_o,no]),St("domModification",{}),md(_x()),ea("builder",function(u){function h(P){return ii(P,u,"widget").map(function(H){return no.focusIn(H),H})}function v(P,H){return jd(H.event.target)||u.autofocus&&H.setSource(P.element),$.none()}var w=ix(tw(),u,_x()),A=Kc(tw(),u,w.internals());return{dom:u.dom,components:A,domModification:u.domModification,events:ia([bh(function(P,H){h(P).each(function(Y){H.stop()})}),on(Ri(),nm),on(cd(),function(P,H){u.autofocus?h(P):_o.focus(P)})]),behaviours:Vf(u.widgetBehaviours,[or.config({store:{mode:"memory",initialValue:u.data}}),_o.config({ignore:u.ignoreFocus,onFocus:function(P){xd(P)}}),no.config({mode:"special",focusIn:u.autofocus?function(P){h(P)}:a0(),onLeft:v,onRight:v,onEscape:function(P,H){return _o.isFocused(P)||u.autofocus?(u.autofocus&&H.setSource(P.element),$.none()):(_o.focus(P),$.some(!0))}})])}})],item:PT,separator:qS}),RT=ct([_y({factory:{sketch:function(u){var h=pu("menu.spec item",Sx,u);return h.builder(h)}},name:"items",unit:"item",defaults:function(u,h){return hr(h,"uid")?h:qe(qe({},h),{uid:Hp("item")})},overrides:function(u,h){return{type:h.type,ignoreFocus:u.fakeFocus,domModification:{classes:[u.markers.item]}}}})]),LT=ct([pn("value"),pn("items"),pn("dom"),pn("components"),St("eventOrder",{}),Es("menuBehaviours",[fi,or,ti,no]),Fc("movement",{mode:"menu",moveOnTab:!0},es("mode",{grid:[Th(),ea("config",function(u,h){return{mode:"flatgrid",selector:"."+u.markers.item,initSize:{numColumns:h.initSize.numColumns,numRows:h.initSize.numRows},focusManager:u.focusManager}})],matrix:[ea("config",function(u,h){return{mode:"matrix",selectors:{row:h.rowSelector,cell:"."+u.markers.item},focusManager:u.focusManager}}),pn("rowSelector")],menu:[St("moveOnTab",!0),ea("config",function(u,h){return{mode:"menu",selector:"."+u.markers.item,moveOnTab:h.moveOnTab,focusManager:u.focusManager}})]})),tc("markers",L_()),St("fakeFocus",!1),St("focusManager",py()),ei("onHighlight")]),k0=ct("alloy.menu-focus"),lp=Ul({name:"Menu",configFields:LT(),partFields:RT(),factory:function(u,h,v,w){return{uid:u.uid,dom:u.dom,markers:u.markers,behaviours:tu(u.menuBehaviours,[fi.config({highlightClass:u.markers.selectedItem,itemClass:u.markers.item,onHighlight:u.onHighlight}),or.config({store:{mode:"memory",initialValue:u.value}}),ti.config({find:$.some}),no.config(u.movement.config(u,u.movement))]),events:ia([on(ew(),function(A,P){var H=P.event;A.getSystem().getByDom(H.target).each(function(Y){fi.highlight(A,Y),P.stop(),vr(A,k0(),{menu:A,item:Y})})}),on(jM(),function(A,P){fi.highlight(A,P.event.item)})]),components:h,eventOrder:u.eventOrder,domModification:{attributes:{role:"menu"}}}}}),YM=function(u,h,v,w){return rn(v,w).bind(function(A){return rn(u,A).bind(function(P){var H=YM(u,h,v,P);return $.some([P].concat(H))})}).getOr([])},mv=LS,ky=ct("collapse-item"),vv=kc({name:"TieredMenu",configFields:[ba("onExecute"),ba("onEscape"),Ef("onOpenMenu"),Ef("onOpenSubmenu"),ei("onRepositionMenu"),ei("onCollapseMenu"),St("highlightImmediately",!0),Tf("data",[pn("primary"),pn("menus"),pn("expansions")]),St("fakeFocus",!1),ei("onHighlight"),ei("onHover"),Hl(),pn("dom"),St("navigateOnHover",!0),St("stayInDom",!1),Es("tmenuBehaviours",[no,fi,ti,Eo]),St("eventOrder",{})],apis:{collapseMenu:function(u,h){u.collapseMenu(h)},highlightPrimary:function(u,h){u.highlightPrimary(h)},repositionMenus:function(u,h){u.repositionMenus(h)}},factory:function(u,h){function w(Te){return or.getValue(Te).value}function A(Te,Ve){fi.highlight(Te,Ve),fi.getHighlighted(Ve).orThunk(function(){return fi.getFirst(Ve)}).each(function(Qe){Fi(Te,Qe.element,cd())})}function P(Te,Ve){return Ao(nn(Ve,function(Qe){return Te.lookupMenu(Qe).bind(function(lt){return"prepared"===lt.type?$.some(lt.menu):$.none()})}))}function H(Te,Ve,Qe){var lt=P(Ve,Ve.otherMenus(Qe));Tr(lt,function(Ft){ud(Ft.element,[u.markers.backgroundMenu]),u.stayInDom||Eo.remove(Te,Ft)})}function Y(Te,Ve){var Qe;Ht((Qe=Te,de.get().getOrThunk(function(){var lt={},Ft=mt(Gl(Qe.element,"."+u.markers.item),function(Tt){return"true"===Wa(Tt,"aria-haspopup")});return Tr(Ft,function(Tt){Qe.getSystem().getByDom(Tt).each(function(Ut){var dn=w(Ut);lt[dn]=Ut})}),de.set(lt),lt})),function(lt,Ft){var Tt=Fo(Ve,Ft);Gr(lt.element,"aria-expanded",Tt)})}function X(Te,Ve,Qe){return $.from(Qe[0]).bind(function(lt){return Ve.lookupMenu(lt).bind(function(Ft){if("notbuilt"===Ft.type)return $.none();var Tt=Ft.menu,Ut=P(Ve,Qe.slice(1));return Tr(Ut,function(dn){qn(dn.element,u.markers.backgroundMenu)}),Zs(Tt.element)||Eo.append(Te,jc(Tt)),ud(Tt.element,[u.markers.backgroundMenu]),A(Te,Tt),H(Te,Ve,Qe),$.some(Tt)})})}var oe,ue,de=Cs(),ye=function(){function u(X){return Y(X).bind(LS)}function h(X){return rn(v.get(),X)}var v=Nr({}),w=Nr({}),A=Nr({}),P=Cs(),H=Nr({}),Y=function(X){return rn(w.get(),X)};return{setMenuBuilt:function(X,oe){var ue;w.set(qe(qe({},w.get()),((ue={})[X]={type:"prepared",menu:oe},ue)))},setContents:function(X,oe,ue,de){P.set(X),v.set(ue),w.set(oe),H.set(de);var ye=function(Se,Pe){var Oe={};Ht(Se,function(Te,Ve){Tr(Te,function(Qe){Oe[Qe]=Ve})});var Re=Pe,Ne=Vu(Pe,function(Te,Ve){return{k:Te,v:Ve}}),We=On(Ne,function(Te,Ve){return[Ve].concat(YM(Oe,Re,Ne,Ve))});return On(Oe,function(Te){return rn(We,Te).getOr([Te])})}(de,ue);A.set(ye)},expand:function(X){return rn(v.get(),X).map(function(oe){var ue=rn(A.get(),X).getOr([]);return[oe].concat(ue)})},refresh:function(X){return rn(A.get(),X)},collapse:function(X){return rn(A.get(),X).bind(function(oe){return 1<oe.length?$.some(oe.slice(1)):$.none()})},lookupMenu:Y,lookupItem:h,otherMenus:function(X){var oe=H.get();return ir(ra(oe),X)},getPrimary:function(){return P.get().bind(u)},getMenus:function(){return w.get()},clear:function(){v.set({}),w.set({}),A.set({}),P.clear()},isClear:function(){return P.get().isNone()},getTriggeringPath:function(X,oe){var ue=mt(h(X).toArray(),function(de){return u(de).isSome()});return rn(A.get(),X).bind(function(de){var ye=yr(ue.concat(de));return function(Se){for(var Pe=[],Oe=0;Oe<Se.length;Oe++){var Re=Se[Oe];if(!Re.isSome())return $.none();Pe.push(Re.getOrDie())}return $.some(Pe)}(dr(ye,function(Se,Pe){return Oe=Se,Re=oe,Ne=ye.slice(0,Pe+1),u(Oe).bind(function(We){return Te=Oe,Hn(v.get(),function(Ve,Qe){return Ve===Te}).bind(function(Ve){return Re(Ve).map(function(Qe){return{triggeredMenu:We,triggeringItem:Qe,triggeringPath:Ne}})});var Te}).fold(function(){return Sr(P.get(),Se)?[]:[$.none()]},function(We){return[$.some(We)]});var Oe,Re,Ne}))})}}}();function Se(Te,Ve,Qe){if(void 0===Qe&&(Qe=oe.HighlightSubmenu),Ve.hasConfigured(Vr)&&Vr.isDisabled(Ve))return $.some(Ve);var lt=w(Ve);return ye.expand(lt).bind(function(Ft){return Y(Te,Ft),$.from(Ft[0]).bind(function(Tt){return ye.lookupMenu(Tt).bind(function(Ut){var dn=function(Jt,yn,En){if("notbuilt"!==En.type)return En.menu;var pr=Jt.getSystem().build(En.nbMenu());return ye.setMenuBuilt(yn,pr),pr}(Te,Tt,Ut);return Zs(dn.element)||Eo.append(Te,jc(dn)),u.onOpenSubmenu(Te,Ve,dn,yr(Ft)),Qe===oe.HighlightSubmenu?(fi.highlightFirst(dn),X(Te,ye,Ft)):(fi.dehighlightAll(dn),$.some(Ve))})})})}function Pe(Te,Ve){var Qe=w(Ve);return ye.collapse(Qe).bind(function(lt){return Y(Te,lt),X(Te,ye,lt).map(function(Ft){return u.onCollapseMenu(Te,Ve,Ft),Ft})})}function Oe(Te){return function(Ve,Qe){return fd(Qe.getSource(),"."+u.markers.item).bind(function(lt){return Ve.getSystem().getByDom(lt).toOptional().bind(function(Ft){return Te(Ve,Ft).map(Ur)})})}}function Re(Te){return fi.getHighlighted(Te).bind(fi.getHighlighted)}(ue=oe={})[ue.HighlightSubmenu=0]="HighlightSubmenu",ue[ue.HighlightParent=1]="HighlightParent";var Ne=ia([on(k0(),function(Te,Ve){ye.lookupItem(w(Ve.event.item)).each(function(){fi.highlight(Te,Ve.event.menu);var Ft=w(Ve.event.item);ye.refresh(Ft).each(function(Tt){return H(Te,ye,Tt)})})}),bh(function(Te,Ve){var Qe=Ve.event.target;Te.getSystem().getByDom(Qe).each(function(lt){0===w(lt).indexOf("collapse-item")&&Pe(Te,lt),Se(Te,lt,oe.HighlightSubmenu).fold(function(){u.onExecute(Te,lt)},Gt)})}),ja(function(Te,Ve){(function v(Te){var Ve,Qe,lt=(Ve=Te,Qe=u.data.primary,On(u.data.menus,function(Tt,Ut){function dn(){return lp.sketch(qe(qe({},Tt),{value:Ut,markers:u.markers,fakeFocus:u.fakeFocus,onHighlight:u.onHighlight,focusManager:(u.fakeFocus?yd:py)()}))}return Ut===Qe?{type:"prepared",menu:Ve.getSystem().build(dn())}:{type:"notbuilt",nbMenu:dn}})),Ft=On(u.data.menus,function(Tt,Ut){return dr(Tt.items,function(dn){return"separator"===dn.type?[]:[dn.data.value]})});return ye.setContents(u.data.primary,lt,u.data.expansions,Ft),ye.getPrimary()})(Te).each(function(Qe){Eo.append(Te,jc(Qe)),u.onOpenMenu(Te,Qe),u.highlightImmediately&&A(Te,Qe)})})].concat(u.navigateOnHover?[on(jM(),function(Te,Ve){var Qe=Ve.event.item,lt=Te,Ft=w(Qe);ye.refresh(Ft).bind(function(Tt){return Y(lt,Tt),X(lt,ye,Tt)}),Se(Te,Qe,oe.HighlightParent),u.onHover(Te,Qe)})]:[])),We={collapseMenu:function(Te){Re(Te).each(function(Ve){Pe(Te,Ve)})},highlightPrimary:function(Te){ye.getPrimary().each(function(Ve){A(Te,Ve)})},repositionMenus:function(Te){ye.getPrimary().bind(function(Ve){return Re(Te).bind(function(Qe){var lt=w(Qe),Ft=Ao(nn(un(ye.getMenus()),mv));return ye.getTriggeringPath(lt,function(Tt){return Ut=Tt,sn(Ft,function(dn){return dn.getSystem().isConnected()?Yi(fi.getCandidates(dn),function(Jt){return w(Jt)===Ut}):$.none()});var Ut})}).map(function(Qe){return{primary:Ve,triggeringPath:Qe}})}).fold(function(){$.from(Te.components()[0]).filter(function(Ve){return"menu"===Wa(Ve.element,"role")}).each(function(Ve){u.onRepositionMenu(Te,Ve,[])})},function(Ve){u.onRepositionMenu(Te,Ve.primary,Ve.triggeringPath)})}};return{uid:u.uid,dom:u.dom,markers:u.markers,behaviours:tu(u.tmenuBehaviours,[no.config({mode:"special",onRight:Oe(function(Te,Ve){return jd(Ve.element)?$.none():Se(Te,Ve,oe.HighlightSubmenu)}),onLeft:Oe(function(Te,Ve){return jd(Ve.element)?$.none():Pe(Te,Ve)}),onEscape:Oe(function(Te,Ve){return Pe(Te,Ve).orThunk(function(){return u.onEscape(Te,Ve).map(function(){return Te})})}),focusIn:function(Te,Ve){ye.getPrimary().each(function(Qe){Fi(Te,Qe.element,cd())})}}),fi.config({highlightClass:u.markers.selectedMenu,itemClass:u.markers.menu}),ti.config({find:function(Te){return fi.getHighlighted(Te)}}),Eo.config({})]),eventOrder:u.eventOrder,apis:We,events:Ne}},extraApis:{tieredData:function(u,h,v){return{primary:u,menus:h,expansions:v}},singleData:function(u,h){return{primary:u,menus:Hr(u,h),expansions:{}}},collapseItem:function(u){return{value:Br(ky()),meta:{text:u}}}}}),Rs=kc({name:"InlineView",configFields:[pn("lazySink"),ei("onShow"),ei("onHide"),bc("onEscape"),Es("inlineBehaviours",[ai,or,Ss]),Pi("fireDismissalEventInstead",[St("event",Fp())]),Pi("fireRepositionEventInstead",[St("event",t0())]),St("getRelated",$.none),St("isExtraPart",uo),St("eventOrder",$.none)],factory:function(u,h){function v(Y){ai.isOpen(Y)&&or.getValue(Y).each(function(X){switch(X.mode){case"menu":ai.getState(Y).each(vv.repositionMenus);break;case"position":var oe=u.lazySink(Y).getOrDie();jl.positionWithinBounds(oe,Y,X.config,X.getBounds())}})}function w(Y,X,oe,ue){P(Y,X,oe,function(){return ue.map(function(de){return Sl(de)})})}function A(Y,X,oe,ue){var de,ye,Se,Pe,Oe,Re=(de=u,ye=Y,Se=X,Pe=ue,Oe="horizontal"===oe.type?{layouts:{onLtr:Wl,onRtl:uf}}:{},vv.sketch({dom:{tag:"div"},data:oe.data,markers:oe.menu.markers,highlightImmediately:oe.menu.highlightImmediately,onEscape:function(){return ai.close(ye),de.onEscape.map(function(Te){return Te(ye)}),$.some(!0)},onExecute:function(){return $.some(!0)},onOpenMenu:function(Te,Ve){jl.positionWithinBounds(Ne().getOrDie(),Ve,Se,Pe())},onOpenSubmenu:function(Te,Ve,Qe,lt){var Ft=Ne().getOrDie();jl.position(Ft,Qe,{anchor:qe({type:"submenu",item:Ve},We(lt))})},onRepositionMenu:function(Te,Ve,Qe){var lt=Ne().getOrDie();jl.positionWithinBounds(lt,Ve,Se,Pe()),Tr(Qe,function(Ft){var Tt=We(Ft.triggeringPath);jl.position(lt,Ft.triggeredMenu,{anchor:qe({type:"submenu",item:Ft.triggeringItem},Tt)})})}}));function Ne(){return de.lazySink(ye)}function We(Te){return 2===Te.length?Oe:{}}ai.open(Y,Re),or.setValue(Y,$.some({mode:"menu",menu:Re}))}var P=function(Y,X,oe,ue){var de=u.lazySink(Y).getOrDie();ai.openWhileCloaked(Y,X,function(){return jl.positionWithinBounds(de,Y,oe,ue())}),or.setValue(Y,$.some({mode:"position",config:oe,getBounds:ue}))},H={setContent:function(Y,X){ai.setContent(Y,X)},showAt:function(Y,X,oe){w(Y,X,oe,$.none())},showWithin:w,showWithinBounds:P,showMenuAt:function(Y,X,oe){A(Y,X,oe,$.none)},showMenuWithinBounds:A,hide:function(Y){ai.isOpen(Y)&&(or.setValue(Y,$.none()),ai.close(Y))},getContent:function(Y){return ai.getState(Y)},reposition:v,isOpen:ai.isOpen};return{uid:u.uid,dom:u.dom,behaviours:tu(u.inlineBehaviours,[ai.config({isPartOf:function(Y,X,oe){return Yc(X,oe)||(ue=oe,u.getRelated(Y).exists(function(de){return Yc(de,ue)}));var ue},getAttachPoint:function(Y){return u.lazySink(Y).getOrDie()},onOpen:function(Y){u.onShow(Y)},onClose:function(Y){u.onHide(Y)}}),or.config({store:{mode:"memory",initialValue:$.none()}}),Ss.config({channels:qe(qe({},Bb(qe({isExtraPart:h.isExtraPart},u.fireDismissalEventInstead.map(function(Y){return{fireEventInstead:{event:Y.event}}}).getOr({})))),Pu(qe(qe({},u.fireRepositionEventInstead.map(function(Y){return{fireEventInstead:{event:Y.event}}}).getOr({})),{doReposition:v})))})]),eventOrder:u.eventOrder,apis:H}},apis:{showAt:function(u,h,v,w){u.showAt(h,v,w)},showWithin:function(u,h,v,w,A){u.showWithin(h,v,w,A)},showWithinBounds:function(u,h,v,w,A){u.showWithinBounds(h,v,w,A)},showMenuAt:function(u,h,v,w){u.showMenuAt(h,v,w)},showMenuWithinBounds:function(u,h,v,w,A){u.showMenuWithinBounds(h,v,w,A)},hide:function(u,h){u.hide(h)},isOpen:function(u,h){return u.isOpen(h)},getContent:function(u,h){return u.getContent(h)},setContent:function(u,h,v){u.setContent(h,v)},reposition:function(u,h){u.reposition(h)}}}),T0="layout-inset",ag=function(u,h,v){return mu(vf(u,h),u.y,v.insetNorth(),Oi(),"north",Xa(u,{top:2}),T0)},D0=function(u,h,v){return mu(vf(u,h),gv(u,h),v.insetSouth(),o0(),"south",Xa(u,{bottom:3}),T0)},Ty=tinymce.util.Tools.resolve("tinymce.util.Delay"),Xl=kc({name:"Button",factory:function(u){function h(A){return rn(u.dom,"attributes").bind(function(P){return rn(P,A)})}var v=pv(u.action),w=u.dom.tag;return{uid:u.uid,dom:u.dom,components:u.components,events:v,behaviours:Vf(u.buttonBehaviours,[_o.config({}),no.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==w)return{role:h("role").getOr("button")};var A=h("type").getOr("button"),P=h("role").map(function(H){return{role:H}}).getOr({});return qe({type:A},P)}()},eventOrder:u.eventOrder}},configFields:[St("uid",void 0),pn("dom"),St("components",[]),eg("buttonBehaviours",[_o,no]),vi("action"),vi("role"),St("eventOrder",{})]}),cp=tinymce.util.Tools.resolve("tinymce.util.I18n"),nw={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},rw="temporary-placeholder",rm={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},A0=kc({name:"Notification",factory:function(u){function h(Se){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+Se+"%"}}}}function v(Se){return{dom:{tag:"div",classes:["tox-text"],innerHtml:Se+"%"}}}var w,A,P,H,Y=Li({dom:{tag:"p",innerHtml:u.translationProvider(u.text)},behaviours:jn([Eo.config({})])}),X=Li({dom:{tag:"div",classes:u.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[h(0)]},v(0)],behaviours:jn([Eo.config({})])}),oe={updateProgress:function(Se,Pe){Se.getSystem().isConnected()&&X.getOpt(Se).each(function(Oe){Eo.set(Oe,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[h(Pe)]},v(Pe)])})},updateText:function(Se,Pe){var Oe;Se.getSystem().isConnected()&&(Oe=Y.get(Se),Eo.set(Oe,[ph(Pe)]))}},ue=De([u.icon.toArray(),u.level.toArray(),u.level.bind(function(Se){return $.from(rm[Se])}).toArray()]),de=Li(Xl.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[Wf("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":u.translationProvider("Close")}},u.iconProvider)],action:function(Se){u.onAction(Se)}})),ye=[(w=ue,A={tag:"div",classes:["tox-notification__icon"]},P=u.iconProvider,H=P(),w0(A,Yi(w,function(Se){return hr(H,Gb(Se,H))}).getOr(rw),H,$.none())),{dom:{tag:"div",classes:["tox-notification__body"]},components:[Y.asSpec()],behaviours:jn([Eo.config({})])}];return{uid:u.uid,dom:{tag:"div",attributes:{role:"alert"},classes:u.level.map(function(Se){return["tox-notification","tox-notification--in","tox-notification--"+Se]}).getOr(["tox-notification","tox-notification--in"])},behaviours:jn([_o.config({}),tr("notification-events",[on(Rd(),function(Se){de.getOpt(Se).each(_o.focus)})])]),components:ye.concat(u.progress?[X.asSpec()]:[]).concat(u.closeButton?[de.asSpec()]:[]),apis:oe}},configFields:[vi("level"),pn("progress"),pn("icon"),pn("onAction"),pn("text"),pn("iconProvider"),pn("translationProvider"),ds("closeButton",!0)],apis:{updateProgress:function(u,h,v){u.updateProgress(h,v)},updateText:function(u,h,v){u.updateText(h,v)}}});function I0(u,h){function v(){_l(w)||(clearTimeout(w),w=null)}var w=null;return{cancel:v,throttle:function(){for(var A=[],P=0;P<arguments.length;P++)A[P]=arguments[P];v(),w=setTimeout(function(){w=null,u.apply(null,A)},h)}}}function Ka(u,h,v,w,A){var P=$a(u,function(H){return(Y=u).isBlock(X=H)||Fo(["BR","IMG","HR","INPUT"],X.nodeName)||"false"===Y.getContentEditable(X);var Y,X});return $.from(P.backwards(h,v,w,A))}function Ub(u){return u.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function qM(u){return""!==u&&-1!==" \xa0\f\n\r\t\v".indexOf(u)}function Cx(u,h){return u.substring(h.length)}function ow(u,h,v,w){return void 0===w&&(w=0),kx(it.fromDom(h.startContainer)).fold(function(){return function(A,P,H,Y){if(void 0===Y&&(Y=0),!P.collapsed||3!==P.startContainer.nodeType)return $.none();var X=A.getParent(P.startContainer,A.isBlock)||A.getRoot();return Ka(A,P.startContainer,P.startOffset,function(oe,ue,de){return function(ye,Se){for(var Pe=ue-1;0<=Pe;Pe--){var Oe=ye.charAt(Pe);if(qM(Oe))return $.none();if(Oe===Se)break}return $.some(Pe)}(de,H).getOr(ue)},X).bind(function(oe){var ue=P.cloneRange();if(ue.setStart(oe.container,oe.offset),ue.setEnd(P.endContainer,P.endOffset),ue.collapsed)return $.none();var de=Ub(ue);return 0!==de.lastIndexOf(H)||Cx(de,H).length<Y?$.none():$.some({text:Cx(de,H),range:ue,triggerChar:H})})}(u,h,v,w)},function(A){var P=u.createRng();P.selectNode(A.dom);var H=Ub(P);return $.some({range:P,text:Cx(H,v),triggerChar:v})})}function XS(u,h){return{container:u,offset:h}}function Mx(u){return ga("toolbarbutton",aw,u)}function ks(u){return ga("ToggleButton",Tx,u)}function O0(u,h,v,w){void 0===w&&(w={});var A=h(),P=u.selection.getRng().startContainer.nodeValue,H=mt(A.lookupByChar(v.triggerChar),function(X){return v.text.length>=X.minChars&&X.matches.getOrThunk(function(){return oe=u.dom,function(ue){var de=KS(ue.startContainer,ue.startOffset);return!Ka(oe,de.container,de.offset,function(ye,Se){return 0===Se?-1:Se},oe.getRoot()).filter(function(ye){return!qM(ye.container.data.charAt(ye.offset-1))}).isSome()};var oe})(v.range,P,v.text)});if(0===H.length)return $.none();var Y=jb.all(nn(H,function(X){return X.fetch(v.text,X.maxResults,w).then(function(oe){return{matchText:v.text,items:oe,columns:X.columns,onAction:X.onAction,highlightOn:X.highlightOn}})}));return $.some({lookupData:Y,context:v})}var ZS,iw,$a=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),kx=function(u){return fd(u,"[data-mce-autocompleter]")},jb=tinymce.util.Tools.resolve("tinymce.util.Promise"),XM=function(u){if(3===u.nodeType)return XS(u,u.data.length);var h=u.childNodes;return 0<h.length?XM(h[h.length-1]):XS(u,h.length)},KS=function(u,h){var v=u.childNodes;return 0<v.length&&h<v.length?KS(v[h],0):0<v.length&&1===u.nodeType&&v.length===h?XM(v[v.length-1]):XS(u,h)},ZM=ke([Yr("type"),Qi("text")]),Yb=ke([St("type","autocompleteitem"),St("active",!1),St("disabled",!1),St("meta",{}),Yr("value"),Qi("text"),Qi("icon")]),KM=ke([Yr("type"),Yr("ch"),Ks("minChars",1),St("columns",1),Ks("maxResults",10),bc("matches"),Xu("fetch"),Xu("onAction"),sl("highlightOn",[],rt)]),im=[ds("disabled",!1),Qi("tooltip"),Qi("icon"),Qi("text"),Zi("onSetup",function(){return Gt})],aw=ke([Yr("type"),Xu("onAction")].concat(im)),E0=[ds("active",!1)].concat(im),Tx=ke(E0.concat([Yr("type"),Xu("onAction")])),$S=[Zi("predicate",uo),ys("scope","node",["node","editor"]),ys("position","selection",["node","selection","line"])],$M=im.concat([St("type","contextformbutton"),St("primary",!1),Xu("onAction"),fr("original",_n)]),j2=E0.concat([St("type","contextformbutton"),St("primary",!1),Xu("onAction"),fr("original",_n)]),JS=im.concat([St("type","contextformbutton")]),QS=E0.concat([St("type","contextformtogglebutton")]),NT=es("type",{contextformbutton:$M,contextformtogglebutton:j2}),Dx=ke([St("type","contextform"),Zi("initValue",ct("")),Qi("label"),al("commands",NT),id("launch",es("type",{contextformbutton:JS,contextformtogglebutton:QS}))].concat($S)),BT=ke([St("type","contexttoolbar"),Yr("items")].concat($S));function JM(u){return rn(Dy,u).getOr(oC)}function qb(u){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===u?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function Xb(u){var h=qb(u);return{backgroundMenu:h.backgroundMenu,selectedMenu:h.selectedMenu,menu:h.menu,selectedItem:h.selectedItem,item:JM(u)}}function eC(u,h,v){return{dom:{tag:"div",classes:De([[qb(v).tieredMenu]])},markers:Xb(v)}}function tC(u,h){return function(v){return nn(na(v,h),function(w){return{dom:u,components:w}})}}function zT(u,h){var v=[],w=[];return Tr(u,function(A,P){h(A,P)?(0<w.length&&v.push(w),w=[],hr(A.dom,"innerHtml")&&w.push(A)):w.push(A)}),0<w.length&&v.push(w),nn(v,function(A){return{dom:{tag:"div",classes:["tox-collection__group"]},components:A}})}function QM(u,h){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===u?["tox-collection--list"]:["tox-collection--grid"])},components:[lp.parts.items({preprocess:function(v){return"auto"!==u&&1<u?tC({tag:"div",classes:["tox-collection__group"]},u)(v):zT(v,function(w,A){return"separator"===h[A].type})}})]}}function Zb(u){return Ir(u,function(h){return"icon"in h&&void 0!==h.icon})}function yv(u){return console.error(Un(u)),console.log(u),$.none()}function FT(u,h,v,w,A){var P,H=(P=v,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[lp.parts.items({preprocess:function(Y){return zT(Y,function(X,oe){return"separator"===P[oe].type})}})]});return{value:u,dom:H.dom,components:H.components,items:v}}function nC(u,h,v,w,A){var P,H;return"color"===A?{value:u,dom:(P={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[lp.parts.items({preprocess:"auto"!==w?tC({tag:"div",classes:["tox-swatches__row"]},w):_n})]}]}).dom,components:P.components,items:v}:"normal"===A&&"auto"===w?{value:u,dom:(P=QM(w,v)).dom,components:P.components,items:v}:"normal"===A&&1===w?{value:u,dom:(P=QM(1,v)).dom,components:P.components,items:v}:"normal"===A?{value:u,dom:(P=QM(w,v)).dom,components:P.components,items:v}:"listpreview"!==A||"auto"===w?{value:u,dom:{tag:"div",classes:De([[(H=qb(A)).menu,"tox-menu-"+w+"-column"],h?[H.hasIcons]:[]])},components:VT,items:v}:{value:u,dom:(P={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[lp.parts.items({preprocess:tC({tag:"div",classes:["tox-collection__group"]},w)})]}).dom,components:P.components,items:v}}function sw(u,h,v){var w=Gl(u.element,"."+v);if(0<w.length){var A=rr(w,function(P){var H=P.dom.getBoundingClientRect().top,Y=w[0].dom.getBoundingClientRect().top;return Math.abs(H-Y)>h}).getOr(w.length);return $.some({numColumns:A,numRows:Math.ceil(w.length/A)})}return $.none()}function rC(u,h,v){u.getSystem().broadcastOn([UT],{})}function Kb(u){return u.getParam("height",Math.max(u.getElement().offsetHeight,200))}function $b(u){return u.getParam("width",bv.DOM.getStyle(u.getElement(),"width"))}function Ax(u){return $.from(u.getParam("min_width")).filter(Va)}function uw(u){return $.from(u.getParam("min_height")).filter(Va)}function Jb(u){return $.from(u.getParam("max_width")).filter(Va)}function ek(u){return $.from(u.getParam("max_height")).filter(Va)}function yf(u){return!1!==u.getParam("menubar",!0,"boolean")}function sg(u){var h=u.getParam("toolbar",!0),v=!0===h,w=Pr(h),A=mi(h)&&0<h.length;return!pw(u)&&(A||w||v)}function lw(u){var h=mt(Cu(9,function(v){return u.getParam("toolbar"+(v+1),!1,"string")}),function(v){return"string"==typeof v});return 0<h.length?$.some(h):$.none()}(iw=ZS={})[iw.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",iw[iw.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var Gf,Ru,P0,Ix,ug=ZS,oC="tox-menu-nav__js",cw="tox-collection__item",Dy={normal:oC,color:"tox-swatch"},tk="tox-collection__item--enabled",dw="tox-collection__item-icon",fp="tox-collection__item-label",Ay="tox-collection__item-caret",R0="tox-collection__item--active",iC="tox-collection__item-container",nk="tox-collection__item-container--row",VT=[lp.parts.items({})],Y2=[Yr("type"),Yr("src"),Qi("alt"),sl("classes",[],rt)],HT=ke(Y2),WT=[Yr("type"),Yr("text"),Qi("name"),sl("classes",["tox-collection__item-label"],rt)],GT=ke(WT),hw=Dm(function(){return hu("type",{cardimage:HT,cardtext:GT,cardcontainer:rk})}),rk=ke([Yr("type"),nc("direction","horizontal"),nc("align","left"),nc("valign","middle"),al("items",hw)]),Qb=[ds("disabled",!1),Qi("text"),Qi("shortcut"),$n("value","value",il(function(){return Br("menuitem-value")}),Ze()),St("meta",{})],Dl=ke([Yr("type"),Qi("label"),al("items",hw),Zi("onSetup",function(){return Gt}),Zi("onAction",Gt)].concat(Qb)),e1=ke([Yr("type"),ds("active",!1),Qi("icon")].concat(Qb)),t1=[Yr("type"),Yr("fancytype"),Zi("onAction",Gt)],Iy=es("fancytype",{inserttable:[St("initData",{})].concat(t1),colorswatch:[Tp("initData",{},[ds("allowCustomColors",!0),of("colors",Ze())])].concat(t1)}),n1=ke([Yr("type"),Zi("onSetup",function(){return Gt}),Zi("onAction",Gt),Qi("icon")].concat(Qb)),aC=ke([Yr("type"),Xu("getSubmenuItems"),Zi("onSetup",function(){return Gt}),Qi("icon")].concat(Qb)),L0=ke([Yr("type"),Qi("icon"),ds("active",!1),Zi("onSetup",function(){return Gt}),Xu("onAction")].concat(Qb)),Ox=function(u){return h=Br("unnamed-events"),jn([tr(h,u)]);var h},UT=Br("tooltip.exclusive"),Oy=Br("tooltip.show"),N0=Br("tooltip.hide"),r1=Object.freeze({__proto__:null,hideAllExclusive:rC,setComponents:function(u,h,v,w){v.getTooltip().each(function(A){A.getSystem().isConnected()&&Eo.set(A,w)})}}),jT=Object.freeze({__proto__:null,events:function(u,h){function v(w){h.getTooltip().each(function(A){qm(A),u.onHide(w,A),h.clearTooltip()}),h.clearTimer()}return ia(De([[on(Oy,function(w){h.resetTimer(function(){var A,P,H=w;h.isShowing()||(rC(H),A=u.lazySink(H).getOrDie(),P=H.getSystem().build({dom:u.tooltipDom,components:u.tooltipComponents,events:ia("normal"===u.mode?[on(Ri(),function(Y){Rr(H,Oy)}),on(Sg(),function(Y){Rr(H,N0)})]:[]),behaviours:jn([Eo.config({})])}),h.setTooltip(P),Sc(A,P),u.onShow(H,P),jl.position(A,P,{anchor:u.anchor(H)}))},u.delay)}),on(N0,function(w){h.resetTimer(function(){v(w)},u.delay)}),on(hi(),function(w,A){A.universal||Fo(A.channels,UT)&&v(w)}),Nd(function(w){v(w)})],"normal"===u.mode?[on(Rd(),function(w){Rr(w,Oy)}),on(mh(),function(w){Rr(w,N0)}),on(Ri(),function(w){Rr(w,Oy)}),on(Sg(),function(w){Rr(w,N0)})]:[on(q1(),function(w,A){Rr(w,Oy)}),on(Om(),function(w){Rr(w,N0)})]]))}}),o1=_a({fields:[pn("lazySink"),pn("tooltipDom"),St("exclusive",!0),St("tooltipComponents",[]),St("delay",300),ys("mode","normal",["normal","follow-highlight"]),St("anchor",function(u){return{type:"hotspot",hotspot:u,layouts:{onLtr:ct([Ju,Xc,Ou,wc,dl,$s]),onRtl:ct([Ju,Xc,Ou,wc,dl,$s])}}}),ei("onHide"),ei("onShow")],name:"tooltipping",active:jT,state:Object.freeze({__proto__:null,init:function(){function u(){h.on(clearTimeout)}var h=Cs(),v=Cs(),w=ct("not-implemented");return Uc({getTooltip:v.get,isShowing:v.isSet,setTooltip:v.set,clearTooltip:v.clear,clearTimer:u,resetTimer:function(A,P){u(),h.set(setTimeout(A,P))},readState:w})}}),apis:r1}),bv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),ok=tinymce.util.Tools.resolve("tinymce.EditorManager"),pw=function(u){return lw(u).fold(function(){return 0<u.getParam("toolbar",[],"string[]").length},Ur)};function Ex(u){return u.getParam("toolbar_mode","","string")}function Ey(u){return u.getParam("toolbar_location",P0.auto,"string")}function sC(u){return Ey(u)===P0.bottom}function _d(u){if(!u.inline)return $.none();var h=u.getParam("fixed_toolbar_container","","string");if(0<h.length)return Ya(Da(),h);var v=u.getParam("fixed_toolbar_container_target");return Kr(v)?$.some(it.fromDom(v)):$.none()}function Py(u){return u.inline&&_d(u).isSome()}function gw(u){return _d(u).getOrThunk(function(){return oa(zi(it.fromDom(u.getElement())))})}function Ry(u){return u.inline&&!yf(u)&&!sg(u)&&!pw(u)}function Ly(u){return(u.getParam("toolbar_sticky",!1,"boolean")||u.inline)&&!Py(u)&&!Ry(u)}function i1(u,h){var v=u.outerContainer.element;h&&(u.mothership.broadcastOn([Qp()],{target:v}),u.uiMothership.broadcastOn([Qp()],{target:v})),u.mothership.broadcastOn([Jd],{readonly:h}),u.uiMothership.broadcastOn([Jd],{readonly:h})}function uC(u,h){u.on("init",function(){u.mode.isReadOnly()&&i1(h,!0)}),u.on("SwitchMode",function(){return i1(h,u.mode.isReadOnly())}),u.getParam("readonly",!1,"boolean")&&u.setMode("readonly")}function Ls(){var u;return Ss.config({channels:((u={})[Jd]={schema:YT,onReceive:function(h,v){Vr.set(h,v.readonly)}},u)})}function Px(u,h){var v=u.getApi(h);return function(w){w(v)}}function a1(u,h){return ja(function(v){Px(u,v)(function(w){var A=u.onSetup(w);wo(A)&&h.set(A)})})}function Rx(u,h){return Nd(function(v){return Px(u,v)(h.get())})}function $c(u,h,v,w){var A,P,H=Nr(Gt);return{type:"item",dom:h.dom,components:Ny(h.optComponents),data:u.data,eventOrder:vC,hasSubmenu:u.triggersSubmenu,itemBehaviours:jn([tr("item-events",[(A=u,P=v,bh(function(Y,X){Px(A,Y)(A.onAction),A.triggersSubmenu||P!==ug.CLOSE_ON_EXECUTE||(Rr(Y,Kh()),X.stop())})),a1(u,H),Rx(u,H)]),Vr.config({disabled:function(){return u.disabled||w.isDisabled()},disableClass:"tox-collection__item--state-disabled"}),Ls(),Eo.config({})].concat(u.itemBehaviours))}}function B0(u){return{value:u.value,meta:qe({text:u.text.getOr("")},u.meta)}}function lC(u,h,v){return Wf(u,{tag:"div",classes:v=void 0===v?[dw]:v},h)}function cC(u){return{dom:{tag:"div",classes:[fp]},components:[ph(cp.translate(u))]}}function mw(u,h){return{dom:{tag:"div",classes:h,innerHtml:u}}}function fC(u,h){return{dom:{tag:"div",classes:[fp]},components:[{dom:{tag:u.tag,styles:u.styles},components:[ph(cp.translate(h))]}]}}function wd(u){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(h=yC.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},v=nn(u.split("+"),function(w){var A=w.toLowerCase().trim();return hr(h,A)?h[A]:w}),v.join(yC.mac?"":"+"))}};var h,v}function Sd(u){return lC("checkmark",u,["tox-collection__item-checkmark"])}function dC(u){var h=u.map(function(v){return{attributes:{title:cp.translate(v)}}}).getOr({});return qe({tag:"div",classes:[oC,cw]},h)}function Lx(u,h,v,w){return void 0===w&&(w=$.none()),"color"===u.presets?(A=h,P=w,X=u.ariaLabel,oe=u.value,{dom:(H=u.iconContent.map(function(We){return Ve=P,X_(We,Qe=(0,A.icons)()).or(Ve).getOrThunk(q_(Qe));var Ve,Qe}).getOr(""),Y={tag:"div",attributes:X.map(function(We){return{title:A.translate(We)}}).getOr({}),classes:["tox-swatch"]},qe(qe({},Y),"custom"===oe?{tag:"button",classes:ln(ln([],Y.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:H}:"remove"===oe?{classes:ln(ln([],Y.classes,!0),["tox-swatch--remove"],!1),innerHtml:H}:{attributes:qe(qe({},Y.attributes),{"data-mce-color":oe}),styles:{"background-color":oe}})),optComponents:[]}):(ue=u,de=h,ye=w,Se={tag:"div",classes:[dw]},Pe=v?ue.iconContent.map(function(We){return Wf(We,Se,de.icons,ye)}).orThunk(function(){return $.some({dom:Se})}):$.none(),Oe=ue.checkMark,Re=$.from(ue.meta).fold(function(){return cC},function(We){return hr(We,"style")?Yo(fC,We.style):cC}),Ne=ue.htmlContent.fold(function(){return ue.textContent.map(Re)},function(We){return $.some(mw(We,[fp]))}),{dom:dC(ue.ariaLabel),optComponents:[Pe,Ne,ue.shortcutContent.map(wd),Oe,ue.caret]});var A,P,H,Y,X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne}function vw(u,h){return rn(u,"tooltipWorker").map(function(v){return[o1.config({lazySink:h.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(w){return{type:"submenu",item:w,overrides:{maxHeightFunction:np}}},mode:"follow-highlight",onShow:function(w,A){v(function(P){o1.setComponents(w,[Kv({element:it.fromDom(P)})])})}})]}).getOr([])}function Nx(u,h){var v=cp.translate(u),w=bv.DOM.encode(v);if(0<h.length){var A=new RegExp(h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return w.replace(A,function(P){return'<span class="tox-autocompleter-highlight">'+P+"</span>"})}return w}function ik(u){return{value:u}}function ak(u){return l1.test(u)||xv.test(u)}function z0(u){var h=u.toString(16);return(1===h.length?"0"+h:h).toUpperCase()}function s1(u){return ik(z0(u.red)+z0(u.green)+z0(u.blue))}function dc(u,h,v,w){return{red:u,green:h,blue:v,alpha:w}}function Uf(u){var h=parseInt(u,10);return h.toString()===u&&0<=h&&h<=255}function yw(u){var h,v,w,A=(u.hue||0)%360,H=u.value/100,P=jf(0,am(P=u.saturation/100,1));if(H=jf(0,am(H,1)),0===P)return dc(h=v=w=bw(255*H),v,w,1);var Y=A/60,X=H*P,oe=X*(1-Math.abs(Y%2-1)),ue=H-X;switch(Math.floor(Y)){case 0:h=X,v=oe,w=0;break;case 1:h=oe,v=X,w=0;break;case 2:h=0,v=X,w=oe;break;case 3:h=0,v=oe,w=X;break;case 4:h=oe,v=0,w=X;break;case 5:h=X,v=0,w=oe;break;default:h=v=w=0}return dc(h=bw(255*(h+ue)),v=bw(255*(v+ue)),w=bw(255*(w+ue)),1)}function F0(u){var h,v,w=(h={value:u.value.replace(l1,function(A,P,H,Y){return P+P+H+H+Y+Y})},null===(v=xv.exec(h.value))?["FFFFFF","FF","FF","FF"]:v);return dc(parseInt(w[1],16),parseInt(w[2],16),parseInt(w[3],16),1)}function u1(u,h,v,w){return dc(parseInt(u,10),parseInt(h,10),parseInt(v,10),parseFloat(w))}function V0(u){if("transparent"===u)return $.some(dc(0,0,0,0));var h=Hx.exec(u);if(null!==h)return $.some(u1(h[1],h[2],h[3],"1"));var v=G0.exec(u);return null!==v?$.some(u1(v[1],v[2],v[3],v[4])):$.none()}function H0(u){return"rgba("+u.red+","+u.green+","+u.blue+","+u.alpha+")"}function Bx(u,h){return u.fire("ResizeContent",h)}function zx(u,h,v){return{hue:u,saturation:h,value:v}}function Fx(u){var h,w=0,A=u.red/255,P=u.green/255,H=u.blue/255,Y=Math.min(A,Math.min(P,H)),X=Math.max(A,Math.max(P,H));return Y===X?zx(0,0,100*(w=Y)):(h=(X-Y)/X,w=X,zx(Math.round(60*((A===Y?3:H===Y?1:5)-(A===Y?P-H:H===Y?A-P:H-A)/(X-Y))),Math.round(100*h),Math.round(100*w)))}function hC(u){return s1(yw(u))}function pC(u){return(ak(v=u)?$.some({value:(Dn(h=v,"#")?h.substring(1):h).toUpperCase()}):$.none()).orThunk(function(){return V0(u).map(s1)}).getOrThunk(function(){var w=document.createElement("canvas");w.height=1,w.width=1;var A=w.getContext("2d");A.clearRect(0,0,w.width,w.height),A.fillStyle="#FFFFFF",A.fillStyle=u,A.fillRect(0,0,1,1);var P=A.getImageData(0,0,1,1).data;return s1(dc(P[0],P[1],P[2],P[3]))});var h,v}function sk(u){return Vr.config({disabled:u,disableClass:"tox-tbtn--disabled"})}(Ru=Gf=Gf||{}).default="wrap",Ru.floating="floating",Ru.sliding="sliding",Ru.scrolling="scrolling",(Ix=P0=P0||{}).auto="auto",Ix.top="top",Ix.bottom="bottom";var gC,Jd="silver.readonly",YT=ke([tc("readonly",Ct)]),W0=function(u){return Vr.config({disabled:u})},mC=function(u){return Vr.config({disabled:u,disableClass:"tox-tbtn--disabled",useNative:!1})},vC=((gC={})[af()]=["disabling","alloy.base.behaviour","toggling","item-events"],gC),Ny=Ao,yC=tinymce.util.Tools.resolve("tinymce.Env"),qT=function(u,h){return nn(u,function(v){switch(v.type){case"cardcontainer":return H=qT((P=v).items,h),{dom:{tag:"div",classes:[iC,"vertical"===P.direction?"tox-collection__item-container--column":nk,"left"===P.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",function(){switch(P.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:H};case"cardimage":return{dom:{tag:"img",classes:v.classes,attributes:{src:v.src,alt:v.alt.getOr("")}}};case"cardtext":var w=v.name.exists(function(oe){return Fo(h.cardText.highlightOn,oe)})?$.from(h.cardText.matchText).getOr(""):"";return mw(Nx(v.text,w),v.classes)}var P,H})},Vx=Km(tw(),_x()),l1=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,xv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,am=Math.min,jf=Math.max,bw=Math.round,Hx=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,G0=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,xw=dc(255,0,0,1),Wx=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),uk="tinymce-custom-colors";function _w(u){return!1!==u.getParam("custom_colors")}function bC(u){var h=u.getParam("color_map");return void 0!==h?function(v){for(var w=[],A=0;A<v.length;A+=2)w.push({text:v[A+1],value:"#"+pC(v[A]).value,type:"choiceitem"});return w}(h):Mw}function XT(u){_C.add(u)}function ww(u){var h,v=(h=bC(u).length,Math.max(5,Math.ceil(Math.sqrt(h))));return u.getParam("color_cols",v,"number")}function Sw(u){var h="choiceitem",v={type:h,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return u?[v,{type:h,text:"Custom color",icon:"color-picker",value:"custom"}]:[v]}function Gx(u,h,v,w){"custom"===v?ZT(u)(function(A){A.each(function(P){XT(P),u.execCommand("mceApplyTextcolor",h,P),w(P)})},kw):"remove"===v?(w(""),u.execCommand("mceRemoveTextcolor",h)):(w(v),u.execCommand("mceApplyTextcolor",h,v))}function c1(u,h){return u.concat(nn(_C.state(),function(v){return{type:Lu,text:v,value:v}}).concat(Sw(h)))}function xC(u,h){return function(v){v(c1(u,h))}}function lk(u,h,v){u.setIconFill("forecolor"===h?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",v)}function U0(u,h,v,w,A){u.ui.registry.addSplitButton(h,{tooltip:w,presets:"color",icon:"forecolor"===h?"text-color":"highlight-bg-color",select:function(P){var H,Y=v;return u.dom.getParents(u.selection.getStart(),function(X){var oe;(oe=X.style["forecolor"===Y?"color":"background-color"])&&(H=H||oe)}),$.from(H).bind(function(X){return V0(X).map(function(oe){var ue=s1(oe).value;return ni(P.toLowerCase(),ue)})}).getOr(!1)},columns:ww(u),fetch:xC(bC(u),_w(u)),onAction:function(P){Gx(u,v,A.get(),Gt)},onItemAction:function(P,H){Gx(u,v,H,function(Y){A.set(Y),u.fire("TextColorChange",{name:h,color:Y})})},onSetup:function(P){function H(Y){Y.name===h&&lk(P,Y.name,Y.color)}return lk(P,h,A.get()),u.on("TextColorChange",H),function(){u.off("TextColorChange",H)}}})}function Ac(u,h,v,w){u.ui.registry.addNestedMenuItem(h,{text:w,icon:"forecolor"===h?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(A){Gx(u,v,A.value,Gt)}}]}})}function By(u,h,v,w,A,P,H,Y){return nC(u,Zb(h),xi(h,v,w,"color"!==A?"normal":"color",P,H,Y),w,A)}function Ux(u,h){var v=Xb(h);return 1===u?{mode:"menu",moveOnTab:!0}:"auto"===u?{mode:"grid",selector:"."+v.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===h?"tox-swatches__row":"tox-collection__group")}}function sm(u,h){return ph(h+"x"+u)}var Cw,jx,Lu="choiceitem",Mw=[{type:Lu,text:"Light Green",value:"#BFEDD2"},{type:Lu,text:"Light Yellow",value:"#FBEEB8"},{type:Lu,text:"Light Red",value:"#F8CAC6"},{type:Lu,text:"Light Purple",value:"#ECCAFA"},{type:Lu,text:"Light Blue",value:"#C2E0F4"},{type:Lu,text:"Green",value:"#2DC26B"},{type:Lu,text:"Yellow",value:"#F1C40F"},{type:Lu,text:"Red",value:"#E03E2D"},{type:Lu,text:"Purple",value:"#B96AD9"},{type:Lu,text:"Blue",value:"#3598DB"},{type:Lu,text:"Dark Turquoise",value:"#169179"},{type:Lu,text:"Orange",value:"#E67E23"},{type:Lu,text:"Dark Red",value:"#BA372A"},{type:Lu,text:"Dark Purple",value:"#843FA1"},{type:Lu,text:"Dark Blue",value:"#236FA1"},{type:Lu,text:"Light Gray",value:"#ECF0F1"},{type:Lu,text:"Medium Gray",value:"#CED4D9"},{type:Lu,text:"Gray",value:"#95A5A6"},{type:Lu,text:"Dark Gray",value:"#7E8C8D"},{type:Lu,text:"Navy Blue",value:"#34495E"},{type:Lu,text:"Black",value:"#000000"},{type:Lu,text:"White",value:"#ffffff"}],_C=function(u){function h(H){P.splice(H,1)}void 0===u&&(u=10);var v,w=Wx.getItem(uk),A=Pr(w)?JSON.parse(w):[],P=u-(v=A).length<0?v.slice(0,u):v;return{add:function(H){var Y;(-1===(Y=Jo(P,H))?$.none():$.some(Y)).each(h),P.unshift(H),P.length>u&&P.pop(),Wx.setItem(uk,JSON.stringify(P))},state:function(){return P.slice(0)}}}(10),kw="#000000",ZT=function(u){return function(h,v){var w=!1;u.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:v},onAction:function(A,P){"hex-valid"===P.name&&(w=P.value)},onSubmit:function(A){var P=A.getData().colorpicker;w?(h($.from(P)),A.close()):u.windowManager.alert(u.translate(["Invalid hex color code: {0}",P]))},onClose:Gt,onCancel:function(){h($.none())}})}},xi=function(u,h,v,w,A,P,H){return Ao(nn(u,function(Y){return"choiceitem"===Y.type?ga("choicemenuitem",e1,Y).fold(yv,function(X){return $.some(function(oe,ue,de,ye,Se,Pe,Oe,Re){void 0===Re&&(Re=!0);var Ne=Lx({presets:de,textContent:ue?oe.text:$.none(),htmlContent:$.none(),ariaLabel:oe.text,iconContent:oe.icon,shortcutContent:ue?oe.shortcut:$.none(),checkMark:ue?$.some(Sd(Oe.icons)):$.none(),caret:$.none(),value:oe.value},Oe,Re);return ee($c({data:B0(oe),disabled:oe.disabled,getApi:function(We){return{setActive:function(Te){Ei.set(We,Te)},isActive:function(){return Ei.isOn(We)},isDisabled:function(){return Vr.isDisabled(We)},setDisabled:function(Te){return Vr.set(We,Te)}}},onAction:function(We){return ye(oe.value)},onSetup:function(We){return We.setActive(Se),Gt},triggersSubmenu:!1,itemBehaviours:[]},Ne,Pe,Oe),{toggling:{toggleClass:tk,toggleOnExecute:!1,selected:oe.active}})}(X,1===v,w,h,P(Y.value),A,H,Zb(u)))}):$.none()}))},f1=Br("cell-over"),Yx=Br("cell-execute"),lg={inserttable:function(u){var h=Br("size-label"),v=function(P){for(var H=[],Y=0;Y<10;Y++){for(var X=[],oe=0;oe<10;oe++)X.push(function(ue,de,ye){function Se(Re){return vr(Re,Yx,{row:ue,col:de})}function Pe(Re,Ne){Ne.stop(),Se(Re)}var Oe;return Ma({dom:{tag:"div",attributes:((Oe={role:"button"})["aria-labelledby"]=ye,Oe)},behaviours:jn([tr("insert-table-picker-cell",[on(Ri(),_o.focus),on(af(),Se),on(oc(),Pe),on(yh(),Pe)]),Ei.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),_o.config({onFocus:function(Re){return vr(Re,f1,{row:ue,col:de})}})])})}(Y,oe,P));H.push(X)}return H}(h),w=sm(0,0),A=Li({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:h}},components:[w],behaviours:jn([Eo.config({})])});return{type:"widget",data:{value:Br("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Vx.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:dr(v,function(P){return nn(P,jc)}).concat(A.asSpec()),behaviours:jn([tr("insert-table-picker",[ja(function(P){Eo.set(A.get(P),[w])}),Ap(f1,function(P,H,Y){var X=Y.event,oe=X.row,ue=X.col;(function(de,ye,Se){for(var Pe=0;Pe<10;Pe++)for(var Oe=0;Oe<10;Oe++)Ei.set(de[Pe][Oe],Pe<=ye&&Oe<=Se)})(v,oe,ue),Eo.set(A.get(P),[sm(oe+1,ue+1)])}),Ap(Yx,function(P,H,Y){var X=Y.event;u.onAction({numRows:X.row+1,numColumns:X.col+1}),Rr(P,Kh())})]),no.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(u,h){var v,w,A,P=(w=h,A=(v=u).initData.allowCustomColors&&w.colorinput.hasCustomColors(),v.initData.colors.fold(function(){return c1(w.colorinput.getColors(),A)},function(oe){return oe.concat(Sw(A))})),H=h.colorinput.getColorCols(),Y=By(Br("menu-value"),P,function(oe){u.onAction({value:oe})},H,"color",ug.CLOSE_ON_EXECUTE,uo,h.shared.providers),X=qe(qe({},Y),{markers:Xb("color"),movement:Ux(H,"color")});return{type:"widget",data:{value:Br("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[Vx.widget(lp.sketch(X))]}}},ck=function(u){var h=u.text.fold(function(){return{}},function(v){return{innerHtml:v}});return{type:"separator",dom:qe({tag:"div",classes:[cw,"tox-collection__group-heading"]},h),components:[]}};function Dw(u,h,v,w,A){var P=Zb(h),H=Ao(nn(h,function(Y){function X(oe){return function(ue,de,ye,Se,Pe){function Oe(Ne){return Pe?qe(qe({},Ne),{shortcut:$.none(),icon:Ne.text.isSome()?$.none():Ne.icon}):Ne}var Re=ye.shared.providers;switch(ue.type){case"menuitem":return ga("menuitem",n1,ue).fold(yv,function(Ne){return $.some(function(u,h,v,w){void 0===w&&(w=!0);var A=Lx({presets:"normal",iconContent:u.icon,textContent:u.text,htmlContent:$.none(),ariaLabel:u.text,caret:$.none(),checkMark:$.none(),shortcutContent:u.shortcut},v,w);return $c({data:B0(u),getApi:function(P){return{isDisabled:function(){return Vr.isDisabled(P)},setDisabled:function(H){return Vr.set(P,H)}}},disabled:u.disabled,onAction:u.onAction,onSetup:u.onSetup,triggersSubmenu:!1,itemBehaviours:[]},A,h,v)}(Oe(Ne),de,Re,Se))});case"nestedmenuitem":return ga("nestedmenuitem",aC,ue).fold(yv,function(Ne){return $.some(function(u,h,v,w,A){void 0===w&&(w=!0);var P=(A=void 0!==A&&A)?lC("chevron-down",v.icons,[Ay]):lC("chevron-right",v.icons,[Ay]),H=Lx({presets:"normal",iconContent:u.icon,textContent:u.text,htmlContent:$.none(),ariaLabel:u.text,caret:$.some(P),checkMark:$.none(),shortcutContent:u.shortcut},v,w);return $c({data:B0(u),getApi:function(Y){return{isDisabled:function(){return Vr.isDisabled(Y)},setDisabled:function(X){return Vr.set(Y,X)}}},disabled:u.disabled,onAction:Gt,onSetup:u.onSetup,triggersSubmenu:!0,itemBehaviours:[]},H,h,v)}(Oe(Ne),de,Re,Se,Pe))});case"togglemenuitem":return ga("togglemenuitem",L0,ue).fold(yv,function(Ne){return $.some(function(u,h,v,w){void 0===w&&(w=!0);var A=Lx({iconContent:u.icon,textContent:u.text,htmlContent:$.none(),ariaLabel:u.text,checkMark:$.some(Sd(v.icons)),caret:$.none(),shortcutContent:u.shortcut,presets:"normal",meta:u.meta},v,w);return ee($c({data:B0(u),disabled:u.disabled,getApi:function(P){return{setActive:function(H){Ei.set(P,H)},isActive:function(){return Ei.isOn(P)},isDisabled:function(){return Vr.isDisabled(P)},setDisabled:function(H){return Vr.set(P,H)}}},onAction:u.onAction,onSetup:u.onSetup,triggersSubmenu:!1,itemBehaviours:[]},A,h,v),{toggling:{toggleClass:tk,toggleOnExecute:!1,selected:u.active}})}(Oe(Ne),de,Re,Se))});case"separator":return ga("separatormenuitem",ZM,ue).fold(yv,function(Ne){return $.some(ck(Ne))});case"fancymenuitem":return ga("fancymenuitem",Iy,ue).fold(yv,function(Ne){return function(u,h){return rn(lg,u.fancytype).map(function(v){return v(u,h)})}(Oe(Ne),ye)});default:return console.error("Unknown item in general menu",ue),$.none()}}(oe,v,w,A?!hr(oe,"text"):P,A)}return"nestedmenuitem"===Y.type&&Y.getSubmenuItems().length<=0?X(qe(qe({},Y),{disabled:!0})):X(Y)}));return(A?FT:nC)(u,P,H,1,"normal")}function SC(u){return vv.singleData(u.value,u)}function h1(u,h,v){return fd(u,h,v).isSome()}function fk(u,h){var v=null;return{cancel:function(){null!==v&&(clearTimeout(v),v=null)},schedule:function(){for(var w=[],A=0;A<arguments.length;A++)w[A]=arguments[A];v=setTimeout(function(){u.apply(null,w),v=null},h)}}}function dk(u){var h=u.raw;return void 0===h.touches||1!==h.touches.length?$.none():$.some(h.touches[0])}function CC(){return fu().browser.isFirefox()}function qx(u,h){return Nr(rn(u,"target").getOr(h))}function Xx(u,h,v,w,A,P){var H,Y,X=u(h,w),oe=(H=Nr(!1),Y=Nr(!1),{stop:function(){H.set(!0)},cut:function(){Y.set(!0)},isStopped:H.get,isCut:Y.get,event:v,setSource:A.set,getSource:A.get});return X.fold(function(){return P.logEventNoHandlers(h,w),Aw.complete()},function(ue){var de=ue.descHandler;return wg(de)(oe),oe.isStopped()?(P.logEventStopped(h,ue.element,de.purpose),Aw.stopped()):oe.isCut()?(P.logEventCut(h,ue.element,de.purpose),Aw.complete()):Xr(ue.element).fold(function(){return P.logNoParent(h,ue.element,de.purpose),Aw.complete()},function(ye){return P.logEventResponse(h,ue.element,de.purpose),Aw.resume(ye)})})}function Nh(u){function h(Re){return Xr(u.element).fold(Ur,function(Ne){return fn(Re,Ne)})}function v(Re,Ne){return A.find(h,Re,Ne)}function w(Re){var Ne=A.filter(hi());Tr(Ne,function(We){wg(We.descHandler)(Re)})}var A=function kC(){function u(A){Am(A.element).each(function(P){delete w[P],v.unregisterId(P)})}var h,v=(h={},{registerId:function(A,P,H){Ht(H,function(Y,X){var oe,ue=void 0!==h[X]?h[X]:{};ue[P]={cHandler:Yo.apply(void 0,[(oe=Y).handler].concat(A)),purpose:oe.purpose},h[X]=ue})},unregisterId:function(A){Ht(h,function(P,H){hr(P,A)&&delete P[A]})},filterByType:function(A){return rn(h,A).map(function(P){return wn(P,function(H,Y){return{id:Y,descHandler:H}})}).getOr([])},find:function(A,P,H){return rn(h,P).bind(function(Y){return Qo(H,function(X){return oe=Y,Am(ue=X).bind(function(de){return rn(oe,de)}).map(function(de){return{element:ue,descHandler:de}});var oe,ue},A)})}}),w={};return{find:function(A,P,H){return v.find(A,P,H)},filter:function(A){return v.filterByType(A)},register:function(A){var P,H=Am((P=A).element).getOrThunk(function(){return Y=P.element,X=Br(Mg+"uid-"),kg(Y,X),X;var Y,X});zo(w,H)&&function(Y){var X=w[H];if(X!==Y)throw new Error('The tagId "'+H+'" is already used by: '+sd(X.element)+"\nCannot use it for: "+sd(Y.element)+"\nThe conflicting element is"+(Zs(X.element)?" ":" not ")+"already in the DOM");u(Y)}(A),v.registerId([A],H,A.events),w[H]=A},unregister:u,getById:function(A){return rn(w,A)}}}(),P=function MC(u,h){var v,w,A,P,H,Y,X,oe,ue,de=qe({stopBackspace:!0},h),ye=(H=de,Y=Cs(),X=Nr(!1),oe=fk(function(Ve){H.triggerEvent(ll(),Ve),X.set(!0)},400),ue=Co([{key:ul(),value:function(Ve){return dk(Ve).each(function(Qe){oe.cancel();var lt={x:Qe.clientX,y:Qe.clientY,target:Ve.target};oe.schedule(Ve),X.set(!1),Y.set(lt)}),$.none()}},{key:Hc(),value:function(Ve){return oe.cancel(),dk(Ve).each(function(Qe){Y.on(function(lt){var Ft=Qe,Tt=lt,Ut=Math.abs(Ft.clientX-Tt.x),dn=Math.abs(Ft.clientY-Tt.y);(5<Ut||5<dn)&&Y.clear()})}),$.none()}},{key:Oa(),value:function(Ve){return oe.cancel(),Y.get().filter(function(Qe){return fn(Qe.target,Ve.target)}).map(function(Qe){return X.get()?(Ve.prevent(),!1):H.triggerEvent(yh(),Ve)})}}]),{fireIfReady:function(Ve,Qe){return rn(ue,Qe).bind(function(lt){return lt(Ve)})}}),Se=nn(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(Ve){return Js(u,Ve,function(Qe){ye.fireIfReady(Qe,Ve).each(function(lt){lt&&Qe.kill()}),de.triggerEvent(Ve,Qe)&&Qe.kill()})}),Pe=Cs(),Oe=Js(u,"paste",function(Ve){ye.fireIfReady(Ve,"paste").each(function(Qe){Qe&&Ve.kill()}),de.triggerEvent("paste",Ve)&&Ve.kill(),Pe.set(setTimeout(function(){de.triggerEvent(vh(),Ve)},0))}),Re=Js(u,"keydown",function(Ve){var Qe;de.triggerEvent("keydown",Ve)?Ve.kill():!de.stopBackspace||(Qe=Ve).raw.which!==j_[0]||Fo(["input","textarea"],qt(Qe.target))||h1(Qe.target,'[contenteditable="true"]')||Ve.prevent()}),Ne=(v=u,w=function(Ve){de.triggerEvent("focusin",Ve)&&Ve.kill()},CC()?Lg(v,"focus",w):Js(v,"focusin",w)),We=Cs(),Te=(A=u,P=function(Ve){de.triggerEvent("focusout",Ve)&&Ve.kill(),We.set(setTimeout(function(){de.triggerEvent(mh(),Ve)},0))},CC()?Lg(A,"blur",P):Js(A,"focusout",P));return{unbind:function(){Tr(Se,function(Ve){Ve.unbind()}),Re.unbind(),Ne.unbind(),Te.unbind(),Oe.unbind(),Pe.on(clearTimeout),We.on(clearTimeout)}}}(u.element,{triggerEvent:function(Re,Ne){return qa(Re,Ne.target,function(We){return _v(v,Re,Ne,Ne.target,We)})}}),H={debugInfo:ct("real"),triggerEvent:function(Re,Ne,We){qa(Re,Ne,function(Te){return _v(v,Re,We,Ne,Te)})},triggerFocus:function(Re,Ne){Am(Re).fold(function(){Vd(Re)},function(We){qa(ic(),Re,function(Te){var Ve,Qe,lt=v,Ft=ic(),Tt=Te,Ut=qx(Ve={originator:Ne,kill:Gt,prevent:Gt,target:Re},Qe=Re);return Xx(lt,Ft,Ve,Qe,Ut,Tt),!1})})},triggerEscape:function(Re,Ne){H.triggerEvent("keydown",Re.element,Ne.event)},getByUid:function(Re){return Pe(Re)},getByDom:function(Re){return Oe(Re)},build:Ma,addToGui:function(Re){oe(Re)},removeFromGui:function(Re){ue(Re)},addToWorld:function(Re){Y(Re)},removeFromWorld:function(Re){X(Re)},broadcast:function(Re){de(Re)},broadcastOn:function(Re,Ne){ye(Re,Ne)},broadcastEvent:function(Re,Ne){Se(Re,Ne)},isConnected:Ur},Y=function(Re){Re.connect(H),Ll(Re.element)||(A.register(Re),Tr(Re.components(),Y),H.triggerEvent(e0(),Re.element,{target:Re.element}))},X=function(Re){Ll(Re.element)||(Tr(Re.components(),X),A.unregister(Re)),Re.disconnect()},oe=function(Re){Sc(u,Re)},ue=function(Re){qm(Re)},de=function(Re){w({universal:!0,data:Re})},ye=function(Re,Ne){w({universal:!1,channels:Re,data:Ne})},Se=function(Re,Ne){var We,Te,Ve=A.filter(Re);return Te={stop:function(){We.set(!0)},cut:Gt,isStopped:(We=Nr(!1)).get,isCut:uo,event:Ne,setSource:ts("Cannot set source of a broadcasted event"),getSource:ts("Cannot get source of a broadcasted event")},Tr(Ve,function(Qe){wg(Qe.descHandler)(Te)}),Te.isStopped()},Pe=function(Re){return A.getById(Re).fold(function(){return Vo.error(new Error('Could not find component with uid: "'+Re+'" in system.'))},Vo.value)},Oe=function(Re){var Ne=Am(Re).getOr("not found");return Pe(Ne)};return Y(u),{root:u,element:u.element,destroy:function(){P.unbind(),rf(u.element)},add:oe,remove:ue,getByUid:Pe,getByDom:Oe,addToWorld:Y,removeFromWorld:X,broadcast:de,broadcastOn:ye,broadcastEvent:Se}}function j0(u,h,v,w){var A=lm(u,h,v,w);return _i.sketch(A)}function Qd(u,h){return _i.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:h.translate(u)}})}function um(u){return jn([_o.config({onFocus:u.selectOnFocus?function(h){var v=h.element,w=Vc(v);v.dom.setSelectionRange(0,w.length)}:Gt})])}function JT(u){return{tag:u.tag,attributes:qe({type:"text"},u.inputAttributes),styles:u.inputStyles,classes:u.inputClasses}}(jx=Cw={})[jx.ContentFocus=0]="ContentFocus",jx[jx.UiFocus=1]="UiFocus";var Aw=bs([{stopped:[]},{resume:["element"]},{complete:[]}]),Jc=function(u,h,v,w,A,P){return Xx(u,h,v,w,A,P).fold(Ur,function(H){return Jc(u,h,v,H,A,P)},uo)},_v=function(u,h,v,w,A){var P=qx(v,w);return Jc(u,h,v,w,P,A)},xu=kc({name:"Container",factory:function(u){var h=u.dom,v=h.attributes,w=an(h,["attributes"]);return{uid:u.uid,dom:qe({tag:"div",attributes:qe({role:"presentation"},v)},w),components:u.components,behaviours:op(u.containerBehaviours),events:u.events,domModification:u.domModification,eventOrder:u.eventOrder}},configFields:[St("components",[]),Es("containerBehaviours",[]),St("events",{}),St("domModification",{}),St("eventOrder",{})]}),Y0=ct([St("prefix","form-field"),Es("fieldBehaviours",[ti,or])]),QT=ct([Ph({schema:[pn("dom")],name:"label"}),Ph({factory:{sketch:function(u){return{uid:u.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:u.text}}}},schema:[pn("text")],name:"aria-descriptor"}),bu({factory:{sketch:function(u){var h,v,w=(h=["factory"],v={},Ht(u,function(A,P){Fo(h,P)||(v[P]=A)}),v);return u.factory.sketch(w)}},schema:[pn("factory")],name:"field"})]),_i=Ul({name:"FormField",configFields:Y0(),partFields:QT(),factory:function(u,h,v,w){var A=tu(u.fieldBehaviours,[ti.config({find:function(H){return ii(H,u,"field")}}),or.config({store:{mode:"manual",getValue:function(H){return ti.getCurrent(H).bind(or.getValue)},setValue:function(H,Y){ti.getCurrent(H).each(function(X){or.setValue(X,Y)})}}})]),P=ia([ja(function(H,Y){var X=as(H,u,["label","field","aria-descriptor"]);X.field().each(function(oe){var ue=Br(u.prefix);X.label().each(function(de){Gr(de.element,"for",ue),Gr(oe.element,"id",ue)}),X["aria-descriptor"]().each(function(de){var ye=Br(u.prefix);Gr(de.element,"id",ye),Gr(oe.element,"aria-describedby",ye)})})})]);return{uid:u.uid,dom:u.dom,components:h,behaviours:A,events:P,apis:{getField:function(H){return ii(H,u,"field")},getLabel:function(H){return ii(H,u,"label")}}}},apis:{getField:function(u,h){return u.getField(h)},getLabel:function(u,h){return u.getLabel(h)}}}),Iw=Object.freeze({__proto__:null,exhibit:function(u,h){return Pd({attributes:Co([{key:h.tabAttr,value:"true"}])})}}),pi=_a({fields:[St("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:Iw}),hk=tinymce.util.Tools.resolve("tinymce.html.Entities"),lm=function(u,h,v,w){return{dom:cm(v),components:u.toArray().concat([h]),fieldBehaviours:jn(w)}},cm=function(u){return{tag:"div",classes:["tox-form__group"].concat(u)}},eh=Br("form-component-change"),q0=Br("form-close"),p1=Br("form-cancel"),cg=Br("form-action"),Yf=Br("form-submit"),wv=Br("form-block"),TC=Br("form-unblock"),pk=Br("form-tabchange"),hc=Br("form-resize"),g1=ct([vi("data"),St("inputAttributes",{}),St("inputStyles",{}),St("tag","input"),St("inputClasses",[]),ei("onSetValue"),St("styles",{}),St("eventOrder",{}),Es("inputBehaviours",[or,_o]),St("selectOnFocus",!0)]),zy=kc({name:"Input",configFields:g1(),factory:function(u,h){return{uid:u.uid,dom:JT(u),components:[],behaviours:qe(qe({},um(v=u)),tu(v.inputBehaviours,[or.config({store:qe(qe({mode:"manual"},v.data.map(function(w){return{initialValue:w}}).getOr({})),{getValue:function(w){return Vc(w.element)},setValue:function(w,A){Vc(w.element)!==A&&rc(w.element,A)}}),onSetValue:v.onSetValue})])),eventOrder:u.eventOrder};var v}}),X0={},Sv={exports:X0};function Cv(u){setTimeout(function(){throw u},0)}function Ow(u){var h=qt(u);return Fo(Ew,h)}function gk(u,h){yi(h.getRoot(u).getOr(u.element),h.invalidClass),h.notify.each(function(v){Ow(u.element)&&Gr(u.element,"aria-invalid",!1),v.getContainer(u).each(function(w){Jy(w,v.validHtml)}),v.onValid(u)})}function fm(u,h,v,w){qn(h.getRoot(u).getOr(u.element),h.invalidClass),h.notify.each(function(A){Ow(u.element)&&Gr(u.element,"aria-invalid",!0),A.getContainer(u).each(function(P){Jy(P,w)}),A.onInvalid(u,w)})}function Zx(u,h,v){return h.validator.fold(function(){return fg(Vo.value(!0))},function(w){return w.validate(u)})}function dm(u,h,v){return h.notify.each(function(w){w.onValidate(u)}),Zx(u,h).map(function(w){return u.getSystem().isConnected()?w.fold(function(A){return fm(u,h,0,A),Vo.error(A)},function(A){return gk(u,h),Vo.value(A)}):Vo.error("No longer in system")})}!function(){var u=this,h=function(){var v,w,A,P={exports:{}};function H(){}function Y(Oe){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof Oe)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Se(Oe,this)}function X(Oe,Re){for(;3===Oe._state;)Oe=Oe._value;0!==Oe._state?(Oe._handled=!0,Y._immediateFn(function(){var Ne,We=1===Oe._state?Re.onFulfilled:Re.onRejected;if(null!==We){try{Ne=We(Oe._value)}catch(Te){return void ue(Re.promise,Te)}oe(Re.promise,Ne)}else(1===Oe._state?oe:ue)(Re.promise,Oe._value)})):Oe._deferreds.push(Re)}function oe(Oe,Re){try{if(Re===Oe)throw new TypeError("A promise cannot be resolved with itself.");if(Re&&("object"==typeof Re||"function"==typeof Re)){var Ne=Re.then;if(Re instanceof Y)return Oe._state=3,Oe._value=Re,void de(Oe);if("function"==typeof Ne)return void Se((We=Ne,Te=Re,function(){We.apply(Te,arguments)}),Oe)}Oe._state=1,Oe._value=Re,de(Oe)}catch(Ve){ue(Oe,Ve)}var We,Te}function ue(Oe,Re){Oe._state=2,Oe._value=Re,de(Oe)}function de(Oe){2===Oe._state&&0===Oe._deferreds.length&&Y._immediateFn(function(){Oe._handled||Y._unhandledRejectionFn(Oe._value)});for(var Re=0,Ne=Oe._deferreds.length;Re<Ne;Re++)X(Oe,Oe._deferreds[Re]);Oe._deferreds=null}function ye(Oe,Re,Ne){this.onFulfilled="function"==typeof Oe?Oe:null,this.onRejected="function"==typeof Re?Re:null,this.promise=Ne}function Se(Oe,Re){var Ne=!1;try{Oe(function(We){Ne||(Ne=!0,oe(Re,We))},function(We){Ne||(Ne=!0,ue(Re,We))})}catch(We){if(Ne)return;Ne=!0,ue(Re,We)}}v=P,w="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},A=setTimeout,Y.prototype.catch=function(Oe){return this.then(null,Oe)},Y.prototype.then=function(Oe,Re){var Ne=new this.constructor(H);return X(this,new ye(Oe,Re,Ne)),Ne},Y.all=function(Oe){var Re=Array.prototype.slice.call(Oe);return new Y(function(Ne,We){if(0===Re.length)return Ne([]);for(var Te=Re.length,Ve=0;Ve<Re.length;Ve++)!function Qe(lt,Ft){try{if(Ft&&("object"==typeof Ft||"function"==typeof Ft)){var Tt=Ft.then;if("function"==typeof Tt)return Tt.call(Ft,function(Ut){Qe(lt,Ut)},We),0}Re[lt]=Ft,0==--Te&&Ne(Re)}catch(Ut){We(Ut)}}(Ve,Re[Ve])})},Y.resolve=function(Oe){return Oe&&"object"==typeof Oe&&Oe.constructor===Y?Oe:new Y(function(Re){Re(Oe)})},Y.reject=function(Oe){return new Y(function(Re,Ne){Ne(Oe)})},Y.race=function(Oe){return new Y(function(Re,Ne){for(var We=0,Te=Oe.length;We<Te;We++)Oe[We].then(Re,Ne)})},Y._immediateFn="function"==typeof setImmediate?function(Oe){setImmediate(Oe)}:function(Oe){A(Oe,0)},Y._unhandledRejectionFn=function(Oe){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",Oe)},Y._setImmediateFn=function(Oe){Y._immediateFn=Oe},Y._setUnhandledRejectionFn=function(Oe){Y._unhandledRejectionFn=Oe},v.exports?v.exports=Y:w.Promise||(w.Promise=Y);var Pe=P.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||Pe}};"object"==typeof X0&&void 0!==Sv?Sv.exports=h():(u="undefined"!=typeof globalThis?globalThis:u||self).EphoxContactWrapper=h()}();var Cd,Fy,Bh=Sv.exports.boltExport,DC=function(u){function h(H){A()?P(H):w.push(H)}var v=$.none(),w=[],A=function(){return v.isSome()},P=function(H){v.each(function(Y){setTimeout(function(){H(Y)},0)})};return u(function(H){A()||(v=$.some(H),Tr(w,P),w=[])}),{get:h,map:function(H){return DC(function(Y){h(function(X){Y(H(X))})})},isReady:A}},eD={nu:DC,pure:function(u){return DC(function(h){h(u)})}},Z0=function(u){function h(v){u().then(v,Cv)}return{map:function(v){return Z0(function(){return u().then(v)})},bind:function(v){return Z0(function(){return u().then(function(w){return v(w).toPromise()})})},anonBind:function(v){return Z0(function(){return u().then(function(){return v.toPromise()})})},toLazy:function(){return eD.nu(h)},toCached:function(){var v=null;return Z0(function(){return v=null===v?u():v})},toPromise:u,get:h}},Mv=function(u){return Z0(function(){return new Bh(u)})},fg=function(u){return Z0(function(){return Bh.resolve(u)})},Ew=["input","textarea"],Kx=Object.freeze({__proto__:null,markValid:gk,markInvalid:fm,query:Zx,run:dm,isInvalid:function(u,h){return Ua(h.getRoot(u).getOr(u.element),h.invalidClass)}}),tD=Object.freeze({__proto__:null,events:function(u,h){return u.validator.map(function(v){return ia([on(v.onEvent,function(w){dm(w,u).get(_n)})].concat(v.validateOnLoad?[ja(function(w){dm(w,u).get(Gt)})]:[]))}).getOr({})}}),kv=_a({fields:[pn("invalidClass"),St("getRoot",$.none),Pi("notify",[St("aria","alert"),St("getContainer",$.none),St("validHtml",""),ei("onValid"),ei("onInvalid"),ei("onValidate")]),Pi("validator",[pn("validate"),St("onEvent","input"),St("validateOnLoad",!0)])],name:"invalidating",active:tD,apis:Kx,extra:{validation:function(u){return function(h){var v=or.getValue(h);return fg(u(v))}}}}),AC=Object.freeze({__proto__:null,getCoupled:function(u,h,v,w){return v.getOrCreate(u,h,w)}}),nu=_a({fields:[tc("others",qh(Vo.value,Ze()))],name:"coupling",apis:AC,state:Object.freeze({__proto__:null,init:function(){var u={},h=ct({});return Uc({readState:h,getOrCreate:function(v,w,A){var P=ra(w.others);if(P)return rn(u,A).getOrThunk(function(){var H=rn(w.others,A).getOrDie("No information found for coupled component: "+A)(v),Y=v.getSystem().build(H);return u[A]=Y});throw new Error("Cannot find coupled component: "+A+". Known coupled components: "+JSON.stringify(P,null,2))}})}})}),nD=ct("sink"),Tv=ct(Ph({name:nD(),overrides:ct({dom:{tag:"div"},behaviours:jn([jl.config({useFixed:Ur})]),events:ia([hh(gh()),hh(Wc()),hh(oc())])})}));function Pw(u,h){var v=u.getHotspot(h).getOr(h),w=u.getAnchorOverrides();return u.layouts.fold(function(){return{type:"hotspot",hotspot:v,overrides:w}},function(A){return{type:"hotspot",hotspot:v,overrides:w,layouts:A}})}function K0(u,h,v,w,A,P,H){var Y,X=Pw(u,v),oe=v,ue=w,de=A,ye=H,Se=h,Pe=(0,(Y=u).fetch)(oe).map(Se),Oe=s_(oe,Y);return Pe.map(function(Re){return Re.bind(function(Ne){return $.from(vv.sketch(qe(qe({},de.menu()),{uid:Hp(""),data:Ne,highlightImmediately:ye===Cd.HighlightFirst,onOpenMenu:function(We,Te){var Ve=Oe().getOrDie();jl.position(Ve,Te,{anchor:X}),ai.decloak(ue)},onOpenSubmenu:function(We,Te,Ve){var Qe=Oe().getOrDie();jl.position(Qe,Ve,{anchor:{type:"submenu",item:Te}}),ai.decloak(ue)},onRepositionMenu:function(We,Te,Ve){var Qe=Oe().getOrDie();jl.position(Qe,Te,{anchor:X}),Tr(Ve,function(lt){jl.position(Qe,lt.triggeredMenu,{anchor:{type:"submenu",item:lt.triggeringItem}})})},onEscape:function(){return _o.focus(oe),ai.close(ue),$.some(!0)}})))})}).map(function(Re){return Re.fold(function(){ai.isOpen(w)&&ai.close(w)},function(Ne){ai.cloak(w),ai.open(w,Ne),P(w)}),w})}function m1(u,h,v,w,A,P){var H=nu.getCoupled(v,"sandbox");return(ai.isOpen(H)?function(Y,X,oe,ue,de,ye,Se){return ai.close(ue),fg(ue)}:K0)(u,h,v,H,w,A,P)}function mk(u){ai.getState(u).each(function(h){vv.repositionMenus(h)})}function $x(u,h,v){var w=cl(),A=s_(h,u);return{dom:{tag:"div",classes:u.sandboxClasses,attributes:{id:w.id,role:"listbox"}},behaviours:Vf(u.sandboxBehaviours,[or.config({store:{mode:"memory",initialValue:h}}),ai.config({onOpen:function(P,H){var Y,X,oe,de,ye,Se=Pw(u,h);w.link(h.element),u.matchWidth&&(Y=Se.hotspot,oe=u.useMinWidth,de=ti.getCurrent(X=H).getOr(X),ye=Qt(Y.element),oe?to(de.element,"min-width",ye+"px"):Sa.set(de.element,ye)),u.onOpen(Se,P,H),void 0!==v&&void 0!==v.onOpen&&v.onOpen(P,H)},onClose:function(P,H){w.unlink(h.element),void 0!==v&&void 0!==v.onClose&&v.onClose(P,H)},isPartOf:function(P,H,Y){return Yc(H,Y)||Yc(h,Y)},getAttachPoint:function(){return A().getOrDie()}}),ti.config({find:function(P){return ai.getState(P).bind(function(H){return ti.getCurrent(H)})}}),Ss.config({channels:qe(qe({},Bb({isExtraPart:uo})),Pu({doReposition:mk}))})])}}function Jx(u){mk(nu.getCoupled(u,"sandbox"))}function zh(){return[St("sandboxClasses",[]),eg("sandboxBehaviours",[ti,Ss,ai,or])]}function hm(u){return Ph({name:u+"-edge",overrides:function(h){return h.model.manager.edgeActions[u].fold(function(){return{}},function(v){return{events:ia([Vl(ul(),function(w,A,P){return v(w,P)},[h]),Vl(Wc(),function(w,A,P){return v(w,P)},[h]),Vl(Im(),function(w,A,P){P.mouseIsDown.get()&&v(w,P)},[h])])}})}})}function Rw(u){var h=u.event.raw;return-1===h.type.indexOf("touch")?void 0!==h.clientX?$.some(h).map(function(v){return Ja(v.clientX,v.clientY)}):$.none():void 0!==h.touches&&1===h.touches.length?$.some(h.touches[0]).map(function(v){return Ja(v.clientX,v.clientY)}):$.none()}function Dv(u){return u.model.minX}function Av(u){return u.model.minY}function Lw(u){return u.model.minX-1}function Nw(u){return u.model.minY-1}function pm(u){return u.model.maxX}function Iv(u){return u.model.maxY}function Bw(u){return u.model.maxX+1}function dp(u){return u.model.maxY+1}function $0(u,h,v){return h(u)-v(u)}function Ov(u){return $0(u,pm,Dv)}function v1(u){return $0(u,Iv,Av)}function vk(u){return Ov(u)/2}function zw(u){return v1(u)/2}function J0(u){return u.stepSize}function Qx(u){return u.snapToGrid}function Q0(u){return u.snapStart}function yk(u){return u.rounded}function Fw(u,h){return void 0!==u[h+"-edge"]}function Vw(u){return Fw(u,"left")}function eb(u){return Fw(u,"right")}function bk(u){return Fw(u,"top")}function IC(u){return Fw(u,"bottom")}function gm(u){return u.model.value.get()}function Ev(u,h){return{x:u,y:h}}function Fh(u,h){vr(u,vm(),{value:h})}function Hw(u,h,v,w){return u<h?u:v<u?v:u===h?h-1:Math.max(h,u-w)}function OC(u,h,v,w){return v<u?u:u<h?h:u===v?v+1:Math.min(v,u+w)}function xk(u,h,v){return Math.max(h,Math.min(v,u))}function EC(u){var h=u.min,v=u.max,w=u.range,A=u.value,P=u.step,H=u.snap,Y=u.snapStart,X=u.rounded,de=u.minBound,ye=u.maxBound,Se=u.screenRange,Pe=u.hasMinEdge?h-1:h,Oe=u.hasMaxEdge?v+1:v;if(A<de)return Pe;if(ye<A)return Oe;var Re,Ne,We,Te,Ve,Qe=xk((Ve=de,(Math.min(ye,Math.max(A,Ve))-Ve)/Se*w+h),Pe,Oe);return H&&h<=Qe&&Qe<=v?(Re=Qe,Ne=h,We=v,Te=P,Y.fold(function(){var lt=Math.round((Re-Ne)/Te)*Te;return xk(Ne+lt,Ne-1,We+1)},function(lt){var Ft=Math.round((Re-lt)%Te/Te),Tt=Math.floor((Re-lt)/Te),Ut=Math.floor((We-lt)/Te),dn=Math.min(Ut,Tt+Ft);return Math.max(lt,lt+dn*Te)})):X?Math.round(Qe):Qe}function _k(u){var h=u.min,A=u.value;return A<h?u.hasMinEdge?0:u.centerMinEdge:u.max<A?u.hasMaxEdge?u.maxBound:u.centerMaxEdge:(A-h)/u.range*u.maxOffset}function hp(u){return u.element.dom.getBoundingClientRect()}function gi(u){return hp(u)[XC]}function y1(u){return hp(u).right}function Ww(u){return hp(u).top}function wk(u){return hp(u).bottom}function Sk(u){return hp(u).width}function b1(u){return hp(u).height}function Ck(u,h){var v=hp(u),w=hp(h);return(v[XC]+v.right)/2-w[XC]}function rD(u,h){var v=hp(u),w=hp(h);return(v.top+v.bottom)/2-w.top}function e_(u,h){vr(u,vm(),{value:h})}function PC(u,h,v){return EC({min:Dv(h),max:pm(h),range:Ov(h),value:v,step:J0(h),snap:Qx(h),snapStart:Q0(h),rounded:yk(h),hasMinEdge:Vw(h),hasMaxEdge:eb(h),minBound:gi(u),maxBound:y1(u),screenRange:Sk(u)})}function RC(u){return function(h,v){return e_(h,{x:A=(0<u?OC:Hw)(gm(w=v).x,Dv(w),pm(w),J0(w))}),$.some(A).map(Ur);var w,A}}function Gw(u,h,v,w,A,P){var H,Y,X,oe,ue,de,ye,Se,Pe=(Y=P,X=v,oe=w,ue=A,de=Sk(H=h),ye=oe.bind(function(Oe){return $.some(Ck(Oe,H))}).getOr(0),Se=ue.bind(function(Oe){return $.some(Ck(Oe,H))}).getOr(de),_k({min:Dv(Y),max:pm(Y),range:Ov(Y),value:X,hasMinEdge:Vw(Y),hasMaxEdge:eb(Y),minBound:gi(H),minOffset:0,maxBound:y1(H),maxOffset:de,centerMinEdge:ye,centerMaxEdge:Se}));return gi(h)-gi(u)+Pe}function t_(u,h){vr(u,vm(),{value:h})}function tb(u,h,v){return EC({min:Av(h),max:Iv(h),range:v1(h),value:v,step:J0(h),snap:Qx(h),snapStart:Q0(h),rounded:yk(h),hasMinEdge:bk(h),hasMaxEdge:IC(h),minBound:Ww(u),maxBound:wk(u),screenRange:b1(u)})}function Uw(u){return function(h,v){return t_(h,{y:A=(0<u?OC:Hw)(gm(w=v).y,Av(w),Iv(w),J0(w))}),$.some(A).map(Ur);var w,A}}function th(u,h,v,w,A,P){var H,Y,X,oe,ue,de,ye,Se,Pe=(Y=P,X=v,oe=w,ue=A,de=b1(H=h),ye=oe.bind(function(Oe){return $.some(rD(Oe,H))}).getOr(0),Se=ue.bind(function(Oe){return $.some(rD(Oe,H))}).getOr(de),_k({min:Av(Y),max:Iv(Y),range:v1(Y),value:X,hasMinEdge:bk(Y),hasMaxEdge:IC(Y),minBound:Ww(H),minOffset:0,maxBound:wk(H),maxOffset:de,centerMinEdge:ye,centerMaxEdge:Se}));return Ww(h)-Ww(u)+Pe}function n_(u,h){vr(u,vm(),{value:h})}function mm(u,h){return{x:u,y:h}}function pp(u,h){return function(v,w){return P=w,H=0<u?OC:Hw,n_(v,mm(Y=(A=h)?gm(P).x:H(gm(P).x,Dv(P),pm(P),J0(P)),A?H(gm(P).y,Av(P),Iv(P),J0(P)):gm(P).y)),$.some(Y).map(Ur);var A,P,H,Y}}function LC(u){return"<alloy.field."+u+">"}function r_(u){return lb[u]}function NC(u,h,v){return or.config(ee({store:{mode:"manual",getValue:h,setValue:v}},u.map(function(w){return{store:{initialValue:w}}}).getOr({})))}function iD(u){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:u},behaviours:jn([_o.config({ignore:!0}),pi.config({})])}}function kk(u){return{dom:{tag:"div",classes:["tox-navobj"]},components:[iD([A1]),u,iD([eM])],behaviours:jn([ub(1)])}}function dg(u,h){vr(u,gh(),{raw:{which:9,shiftKey:h}})}function Us(u,h){var v=h.element;Ua(v,A1)?dg(u,!0):Ua(v,eM)&&dg(u,!1)}function _u(u){return h1(u,["."+A1,"."+eM].join(","),uo)}function rh(u,h){return tM(document.createElement("canvas"),u,h)}function Pv(u){var h=rh(u.width,u.height);return pg(h).drawImage(u,0,0),h}function jw(u){return u.naturalWidth||u.width}function x1(u){return u.naturalHeight||u.height}function Md(u,h,v){return h=h||"image/png",wo(HTMLCanvasElement.prototype.toBlob)?new Bh(function(A,P){u.toBlob(function(H){H?A(H):P()},h,v)}):(w=u.toDataURL(h,v),new Bh(function(A,P){(function(){var H=w.split(","),Y=/data:([^;]+)/.exec(H[0]);if(!Y)return $.none();for(var X=Y[1],ue=atob(H[1]),de=ue.length,ye=Math.ceil(de/1024),Se=new Array(ye),Pe=0;Pe<ye;++Pe){for(var Oe=1024*Pe,Re=Math.min(1024+Oe,de),Ne=new Array(Re-Oe),We=Oe,Te=0;We<Re;++Te,++We)Ne[Te]=ue[We].charCodeAt(0);Se[Pe]=new Uint8Array(Ne)}return $.some(new Blob(Se,{type:X}))})().fold(function(){P("uri is not base64: "+w)},A)}));var w}function Yw(u,h,v){function w(A,P){return u.then(function(H){return H.toDataURL(A||"image/png",P)})}return{getType:ct(h.type),toBlob:function(){return Bh.resolve(h)},toDataURL:ct(v),toBase64:function(){return v.split(",")[1]},toAdjustedBlob:function(A,P){return u.then(function(H){return Md(H,A,P)})},toAdjustedDataURL:w,toAdjustedBase64:function(A,P){return w(A,P).then(function(H){return H.split(",")[1]})},toCanvas:function(){return u.then(Pv)}}}function nb(u,h){return Md(u,h).then(function(v){return Yw(Bh.resolve(u),v,u.toDataURL())})}function rb(u,h,v){var w="string"==typeof u?parseFloat(u):u;return v<w?w=v:w<h&&(w=h),w}function qw(u,h){for(var v=[],w=new Array(25),A=0;A<5;A++){for(var P=0;P<5;P++)v[P]=h[P+5*A];for(P=0;P<5;P++){for(var H=0,Y=0;Y<5;Y++)H+=u[P+5*Y]*v[Y];w[P+5*A]=H}}return w}function ob(u,h){return u.toCanvas().then(function(v){return fb(v,u.getType(),h)})}function BC(u){return function(h,v){return ob(h,u([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],v))}}function oh(u,h){void 0===h&&(h=2);var v=Math.pow(10,h),w=Math.round(u*v);return Math.ceil(w/v)}function Dk(u){return Nv(u)}function aD(u){return wD(u)}function sD(u,h){return Gy(u,h)}function Ak(u,h){return db(u,h)}function Vh(u,h){return Uk(u,h)}function zC(u,h){return w=h,(v=u).toCanvas().then(function(A){return jk(A,v.getType(),w)});var v,w}function uD(u,h){return w=h,(v=u).toCanvas().then(function(A){return qi(A,v.getType(),w)});var v,w}function Xw(u,h,v){return Wf(u,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:v},h)}function w1(u,h){return Xw(u,h,[])}function lD(u,h){return Xw(u,h,[Eo.config({})])}function Zw(u,h,v){return{dom:{tag:"span",innerHtml:v.translate(u),classes:[h+"__select-label"]},behaviours:jn([Eo.config({})])}}function o_(u,h,v){function w(ue,de){var ye=or.getValue(ue);return _o.focus(ye),vr(ye,"keydown",{raw:de.event.raw}),ih.close(ye),$.some(!0)}var A=Nr(Gt),P=u.text.map(function(ue){return Li(Zw(ue,h,v.providers))}),H=u.icon.map(function(ue){return Li(lD(ue,v.providers.icons))}),Y=u.role.fold(function(){return{}},function(ue){return{role:ue}}),X=u.tooltip.fold(function(){return{}},function(ue){var de=v.providers.translate(ue);return{title:de,"aria-label":de}}),oe=Wf("chevron-down",{tag:"div",classes:[h+"__select-chevron"]},v.providers.icons);return Li(ih.sketch(qe(qe(qe({},u.uid?{uid:u.uid}:{}),Y),{dom:{tag:"button",classes:[h,h+"--select"].concat(nn(u.classes,function(ue){return h+"--"+ue})),attributes:qe({},X)},components:Ny([H.map(function(ue){return ue.asSpec()}),P.map(function(ue){return ue.asSpec()}),$.some(oe)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:jn(ln(ln([],u.dropdownBehaviours,!0),[W0(function(){return u.disabled||v.providers.isDisabled()}),Ls(),u_.config({}),Eo.config({}),tr("dropdown-events",[a1(u,A),Rx(u,A)]),tr("menubutton-update-display-text",[on(Xf,function(ue,de){P.bind(function(ye){return ye.getOpt(ue)}).each(function(ye){Eo.set(ye,[ph(v.providers.translate(de.event.text))])})}),on(CD,function(ue,de){H.bind(function(ye){return ye.getOpt(ue)}).each(function(ye){Eo.set(ye,[lD(de.event.icon,v.providers.icons)])})})])],!1)),eventOrder:ee(Uy,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:jn([no.config({mode:"special",onLeft:w,onRight:w})]),lazySink:v.getSink,toggleClass:h+"--active",parts:{menu:eC(0,0,u.presets)},fetch:function(ue){return Mv(Yo(u.fetch,ue))}}))).asSpec()}function S1(u){return"separator"===u.type}function C1(u,h,v,w){var A=Br("primary-menu"),P=c_(u,v.shared.providers.menuItems());if(0===P.items.length)return $.none();var H=Dw(A,P.items,h,v,w),Y=On(P.menus,function(oe,ue){return Dw(ue,oe,h,v,!1)}),X=ee(Y,Hr(A,H));return $.from(vv.tieredData(A,X,P.expansions))}function M1(u){return{isDisabled:function(){return Vr.isDisabled(u)},setDisabled:function(h){return Vr.set(u,h)},setActive:function(h){var v=u.element;h?(qn(v,"tox-tbtn--enabled"),Gr(v,"aria-pressed",!0)):(yi(v,"tox-tbtn--enabled"),ls(v,"aria-pressed"))},isActive:function(){return Ua(u.element,"tox-tbtn--enabled")}}}function FC(u,h,v,w){return o_({text:u.text,icon:u.icon,tooltip:u.tooltip,role:w,fetch:function(A,P){u.fetch(function(H){P(C1(H,ug.CLOSE_ON_EXECUTE,v,!1))})},onSetup:u.onSetup,getApi:M1,columns:1,presets:"normal",classes:[],dropdownBehaviours:[pi.config({})]},h,v.shared)}function VC(u,h,v,w,A,P){void 0===v&&(v=[]);var H=h.fold(function(){return{}},function(oe){return{action:oe}}),Y=qe({buttonBehaviours:jn([W0(function(){return u.disabled||P.isDisabled()}),Ls(),pi.config({}),tr("button press",[Fl("click"),Fl("mousedown")])].concat(v)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},H),X=ee(Y,{dom:w});return ee(X,{components:A})}function i_(u,h,v,w){void 0===w&&(w=[]);var A={tag:"button",classes:["tox-tbtn"],attributes:u.tooltip.map(function(H){return{"aria-label":v.translate(H),title:v.translate(H)}}).getOr({})},P=u.icon.map(function(H){return w1(H,v.icons)});return VC(u,h,w,A,Ny([P]),v)}function cD(u,h,v,w){void 0===w&&(w=[]);var A=i_(u,$.some(h),v,w);return Xl.sketch(A)}function HC(u,h,v,w,A){void 0===w&&(w=[]),void 0===A&&(A=[]);var P=v.translate(u.text),H=u.icon?u.icon.map(function(ue){return w1(ue,v.icons)}):$.none(),Y=H.isSome()?Ny([H]):[],X=H.isSome()?{}:{innerHtml:P},oe=ln(ln(ln(ln([],u.primary||u.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),H.isSome()?["tox-button--icon"]:[],!0),u.borderless?["tox-button--naked"]:[],!0),A,!0);return VC(u,h,w,qe(qe({tag:"button",classes:oe},X),{attributes:{title:P}}),Y,v)}function Ik(u,h,v,w,A){void 0===w&&(w=[]),void 0===A&&(A=[]);var P=HC(u,$.some(h),v,w,A);return Xl.sketch(P)}function fD(u,h){return function(v){"custom"===h?vr(v,cg,{name:u,value:{}}):"submit"===h?Rr(v,Yf):"cancel"===h?Rr(v,p1):console.error("Unknown button type: ",h)}}function bf(u,h,v){if("menu"===h){var w=u,A=Li(FC(qe(qe({},u),{onSetup:function(oe){return oe.setDisabled(u.disabled),Gt},fetch:(P=w.items,H=function(){return A},Y=v,function(oe){oe(nn(P,function(ue){var de,ye,Se=ue.text.fold(function(){return{}},function(Pe){return{text:Pe}});return qe(qe({type:ue.type,active:!1},Se),{onAction:function(Pe){var Oe=!Pe.isActive();Pe.setActive(Oe),ye.storage.set(Oe),Y.shared.getSink().each(function(Re){H().getOpt(Re).each(function(Ne){Vd(Ne.element),vr(Ne,cg,{name:ye.name,value:ye.storage.get()})})})},onSetup:(de=ye=ue,function(Pe){Pe.setActive(de.storage.get())})})}))})}),"tox-tbtn",v,$.none()));return A.asSpec()}var P,H,Y;if("custom"===h||"cancel"===h||"submit"===h){var X=fD(u.name,h);return Ik(qe(qe({},u),{borderless:!1}),X,v.shared.providers,[])}console.error("Unknown footer button type: ",h)}function Ok(u,h){return bu({factory:_i,name:u,overrides:function(v){return{fieldBehaviours:jn([tr("coupled-input-behaviour",[on(hs(),function(w){ii(w,v,h).bind(ti.getCurrent).each(function(A){ii(w,v,"lock").each(function(P){Ei.isOn(P)&&v.onLockedChange(w,A,P)})})})])])}}})}function WC(u){var h=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(u);if(null===h)return Vo.error(u);var v=parseFloat(h[1]);return Vo.value({value:v,unit:h[2]})}function Ic(u,h){function v(A){return hr(w,A)}var w={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1};return u.unit===h?$.some(u.value):v(u.unit)&&v(h)?$.some(w[u.unit]===w[h]?u.value:u.value/w[u.unit]*w[h]):$.none()}function Kw(u){return $.none()}function GC(u,h){function v(de){return Wf(de,{tag:"span",classes:["tox-icon","tox-lock-icon__"+de]},h.icons)}function w(de){return{dom:{tag:"div",classes:["tox-form__group"]},components:de}}function A(de){return _i.parts.field({factory:zy,inputClasses:["tox-textfield"],inputBehaviours:jn([Vr.config({disabled:function(){return u.disabled||h.isDisabled()}}),Ls(),pi.config({}),tr("size-input-events",[on(Rd(),function(ye,Se){vr(ye,Y,{isField1:de})}),on(Ld(),function(ye,Se){vr(ye,eh,{name:u.name})})])]),selectOnFocus:!1})}function P(de){return{dom:{tag:"label",classes:["tox-label"],innerHtml:h.translate(de)}}}var H=Kw,Y=Br("ratio-event"),X=gl.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:h.translate(u.label.getOr("Constrain proportions"))}},components:[v("lock"),v("unlock")],buttonBehaviours:jn([Vr.config({disabled:function(){return u.disabled||h.isDisabled()}}),Ls(),pi.config({})])}),oe=gl.parts.field1(w([_i.parts.label(P("Width")),A(!0)])),ue=gl.parts.field2(w([_i.parts.label(P("Height")),A(!1)]));return gl.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[oe,ue,w([P("&nbsp;"),X])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(de,ye,Se){WC(or.getValue(de)).each(function(Pe){H(Pe).each(function(Oe){var Re,Ne,We,Te;or.setValue(ye,(Te=-1!==(Te=(Re=Oe).value.toFixed((Ne=Re.unit)in(We={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4})?We[Ne]:1)).indexOf(".")?Te.replace(/\.?0*$/,""):Te)+Re.unit)})})},coupledFieldBehaviours:jn([Vr.config({disabled:function(){return u.disabled||h.isDisabled()},onDisabled:function(de){gl.getField1(de).bind(_i.getField).each(Vr.disable),gl.getField2(de).bind(_i.getField).each(Vr.disable),gl.getLock(de).each(Vr.disable)},onEnabled:function(de){gl.getField1(de).bind(_i.getField).each(Vr.enable),gl.getField2(de).bind(_i.getField).each(Vr.enable),gl.getLock(de).each(Vr.enable)}}),Ls(),tr("size-input-events2",[on(Y,function(de,ye){var Se,Pe,Oe,Re=ye.event.isField1,Ne=Re?gl.getField1(de):gl.getField2(de),We=Re?gl.getField2(de):gl.getField1(de),Te=Ne.map(or.getValue).getOr("");Se=We.map(or.getValue).getOr(""),Pe=WC(Te).toOptional(),Oe=WC(Se).toOptional(),H=Ot(Pe,Oe,function(Qe,lt){return Ic(Qe,lt.unit).map(function(Ft){return lt.value/Ft}).map(function(Ft){return Tt=Ft,Ut=lt.unit,function(dn){return Ic(dn,Ut).map(function(Jt){return{value:Jt*Tt,unit:Ut}})};var Tt,Ut}).getOr(Kw)}).getOr(Kw)})])])})}function $w(u){if(Kr(u.changedTouches))for(var h="screenX screenY pageX pageY clientX clientY".split(" "),v=0;v<h.length;v++)u[h[v]]=u.changedTouches[0][h[v]]}function ib(u,h){return{uid:u.uid,dom:u.dom,components:h,behaviours:tu(u.formBehaviours,[or.config({store:{mode:"manual",getValue:function(v){return On($m(v,u),function(w,A){return w().bind(function(P){var H=ti.getCurrent(P),Y=new Error("Cannot find a current component to extract the value from for form part '"+A+"': "+sd(P.element));return H.fold(function(){return Vo.error(Y)},Vo.value)}).map(or.getValue)})},setValue:function(v,w){Ht(w,function(A,P){ii(v,u,P).each(function(H){ti.getCurrent(H).each(function(Y){or.setValue(Y,A)})})})}}})]),apis:{getField:function(v,w){return ii(v,u,w).bind(ti.getCurrent)}}}}function ab(){return ti.config({find:$.some})}function X2(u){return h=Ip,v=Jy,NC(u,function(w){return h(w.element)},function(w,A){return v(w.element,A)});var h,v}(Fy=Cd=Cd||{})[Fy.HighlightFirst=0]="HighlightFirst",Fy[Fy.HighlightNone=1]="HighlightNone";var dD,Ek,a_,Jw,s_=function(u,h){return u.getSystem().getByUid(h.uid+"-"+nD()).map(function(v){return function(){return Vo.value(v)}}).getOrThunk(function(){return h.lazySink.fold(function(){return function(){return Vo.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(v){return function(){return v(u)}})})},jC=ct([pn("dom"),pn("fetch"),ei("onOpen"),Iu("onExecute"),St("getHotspot",$.some),St("getAnchorOverrides",ct({})),zm(),Es("dropdownBehaviours",[Ei,nu,no,_o]),pn("toggleClass"),St("eventOrder",{}),vi("lazySink"),St("matchWidth",!1),St("useMinWidth",!1),vi("role")].concat(zh())),Pk=ct([Xd({schema:[Hl()],name:"menu",defaults:function(u){return{onExecute:u.onExecute}}}),Tv()]),ih=Ul({name:"Dropdown",configFields:jC(),partFields:Pk(),factory:function(u,h,v,w){function A(X){ai.getState(X).each(function(oe){vv.highlightPrimary(oe)})}function P(X,oe){return ma(X),$.some(!0)}var H,Y={expand:function(X){Ei.isOn(X)||m1(u,_n,X,w,Gt,Cd.HighlightNone).get(Gt)},open:function(X){Ei.isOn(X)||m1(u,_n,X,w,Gt,Cd.HighlightFirst).get(Gt)},isOpen:Ei.isOn,close:function(X){Ei.isOn(X)&&m1(u,_n,X,w,Gt,Cd.HighlightFirst).get(Gt)},repositionMenus:function(X){Ei.isOn(X)&&Jx(X)}};return{uid:u.uid,dom:u.dom,components:h,behaviours:tu(u.dropdownBehaviours,[Ei.config({toggleClass:u.toggleClass,aria:{mode:"expanded"}}),nu.config({others:{sandbox:function(X){return $x(u,X,{onOpen:function(){return Ei.on(X)},onClose:function(){return Ei.off(X)}})}}}),no.config({mode:"special",onSpace:P,onEnter:P,onDown:function(X,oe){return ih.isOpen(X)?A(nu.getCoupled(X,"sandbox")):ih.open(X),$.some(!0)},onEscape:function(X,oe){return ih.isOpen(X)?(ih.close(X),$.some(!0)):$.none()}}),_o.config({})]),events:pv($.some(function(X){m1(u,_n,X,w,A,Cd.HighlightFirst).get(Gt)})),eventOrder:qe(qe({},u.eventOrder),((H={})[af()]=["disabling","toggling","alloy.base.behaviour"],H)),apis:Y,domModification:{attributes:qe(qe({"aria-haspopup":"true"},u.role.fold(function(){return{}},function(X){return{role:X}})),"button"===u.dom.tag?{type:rn(u.dom,"attributes").bind(function(X){return rn(X,"type")}).getOr("button")}:{})}}},apis:{open:function(u,h){return u.open(h)},expand:function(u,h){return u.expand(h)},close:function(u,h){return u.close(h)},isOpen:function(u,h){return u.isOpen(h)},repositionMenus:function(u,h){return u.repositionMenus(h)}}}),u_=_a({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return ia([ua(Hs(),Ur)])},exhibit:function(){return Pd({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),Qw=Br("color-input-change"),YC=Br("color-swatch-change"),eS=Br("color-picker-cancel"),qC=Ph({schema:[pn("dom")],name:"label"}),Rk=hm("top-left"),hD=hm("top"),Lk=hm("top-right"),pD=hm("right"),Nk=hm("bottom-right"),Bk=hm("bottom"),gD=hm("bottom-left"),mD=[qC,hm("left"),pD,hD,Bk,Rk,Lk,gD,Nk,bu({name:"thumb",defaults:ct({dom:{styles:{position:"absolute"}}}),overrides:function(u){return{events:ia([dh(ul(),u,"spectrum"),dh(Hc(),u,"spectrum"),dh(Oa(),u,"spectrum"),dh(Wc(),u,"spectrum"),dh(Im(),u,"spectrum"),dh(_b(),u,"spectrum")])}}}),bu({schema:[fr("mouseIsDown",function(){return Nr(!1)})],name:"spectrum",overrides:function(u){function h(w,A){return v.getValueFromEvent(A).map(function(P){return v.setValueFrom(w,u,P)})}var v=u.model.manager;return{behaviours:jn([no.config({mode:"special",onLeft:function(w){return v.onLeft(w,u)},onRight:function(w){return v.onRight(w,u)},onUp:function(w){return v.onUp(w,u)},onDown:function(w){return v.onDown(w,u)}}),_o.config({})]),events:ia([on(ul(),h),on(Hc(),h),on(Wc(),h),on(Im(),function(w,A){u.mouseIsDown.get()&&h(w,A)})])}}})],vm=ct("slider.change.value"),XC="left",ZC=RC(-1),zk=RC(1),tS=$.none,Fk=$.none,vD={"top-left":$.none(),top:$.none(),"top-right":$.none(),right:$.some(function(u,h){Fh(u,{x:Bw(h)})}),"bottom-right":$.none(),bottom:$.none(),"bottom-left":$.none(),left:$.some(function(u,h){Fh(u,{x:Lw(h)})})},KC=Object.freeze({__proto__:null,setValueFrom:function(u,h,v){var w=PC(u,h,v);return e_(u,{x:w}),w},setToMin:function(u,h){e_(u,{x:Dv(h)})},setToMax:function(u,h){e_(u,{x:pm(h)})},findValueOfOffset:PC,getValueFromEvent:function(u){return Rw(u).map(function(h){return h.left})},findPositionOfValue:Gw,setPositionFromValue:function(u,h,v,w){var A=gm(v),P=Gw(u,w.getSpectrum(u),A.x,w.getLeftEdge(u),w.getRightEdge(u),v),H=Qt(h.element)/2;to(h.element,"left",P-H+"px")},onLeft:ZC,onRight:zk,onUp:tS,onDown:Fk,edgeActions:vD}),kd=$.none,Vk=$.none,Vy=Uw(-1),nS=Uw(1),Hk={"top-left":$.none(),top:$.some(function(u,h){Fh(u,{y:Nw(h)})}),"top-right":$.none(),right:$.none(),"bottom-right":$.none(),bottom:$.some(function(u,h){Fh(u,{y:dp(h)})}),"bottom-left":$.none(),left:$.none()},Rv=Object.freeze({__proto__:null,setValueFrom:function(u,h,v){var w=tb(u,h,v);return t_(u,{y:w}),w},setToMin:function(u,h){t_(u,{y:Av(h)})},setToMax:function(u,h){t_(u,{y:Iv(h)})},findValueOfOffset:tb,getValueFromEvent:function(u){return Rw(u).map(function(h){return h.top})},findPositionOfValue:th,setPositionFromValue:function(u,h,v,w){var A=gm(v),P=th(u,w.getSpectrum(u),A.y,w.getTopEdge(u),w.getBottomEdge(u),v),H=Hu(h.element)/2;to(h.element,"top",P-H+"px")},onLeft:kd,onRight:Vk,onUp:Vy,onDown:nS,edgeActions:Hk}),Wk=Rw,l_=pp(-1,!1),Z2=pp(1,!1),$C=pp(-1,!0),yD=pp(1,!0),bD={"top-left":$.some(function(u,h){Fh(u,Ev(Lw(h),Nw(h)))}),top:$.some(function(u,h){Fh(u,Ev(vk(h),Nw(h)))}),"top-right":$.some(function(u,h){Fh(u,Ev(Bw(h),Nw(h)))}),right:$.some(function(u,h){Fh(u,Ev(Bw(h),zw(h)))}),"bottom-right":$.some(function(u,h){Fh(u,Ev(Bw(h),dp(h)))}),bottom:$.some(function(u,h){Fh(u,Ev(vk(h),dp(h)))}),"bottom-left":$.some(function(u,h){Fh(u,Ev(Lw(h),dp(h)))}),left:$.some(function(u,h){Fh(u,Ev(Lw(h),zw(h)))})},JC=Object.freeze({__proto__:null,setValueFrom:function(u,h,v){var w=mm(PC(u,h,v.left),tb(u,h,v.top));return n_(u,w),w},setToMin:function(u,h){n_(u,mm(Dv(h),Av(h)))},setToMax:function(u,h){n_(u,mm(pm(h),Iv(h)))},getValueFromEvent:Wk,setPositionFromValue:function(u,h,v,w){var A=gm(v),P=Gw(u,w.getSpectrum(u),A.x,w.getLeftEdge(u),w.getRightEdge(u),v),H=th(u,w.getSpectrum(u),A.y,w.getTopEdge(u),w.getBottomEdge(u),v),Y=Qt(h.element)/2,X=Hu(h.element)/2;to(h.element,"left",P-Y+"px"),to(h.element,"top",H-X+"px")},onLeft:l_,onRight:Z2,onUp:$C,onDown:yD,edgeActions:bD}),ru=Ul({name:"Slider",configFields:[St("stepSize",1),St("onChange",Gt),St("onChoose",Gt),St("onInit",Gt),St("onDragStart",Gt),St("onDragEnd",Gt),St("snapToGrid",!1),St("rounded",!0),vi("snapStart"),tc("model",es("mode",{x:[St("minX",0),St("maxX",100),fr("value",function(u){return Nr(u.mode.minX)}),pn("getInitialValue"),ea("manager",KC)],y:[St("minY",0),St("maxY",100),fr("value",function(u){return Nr(u.mode.minY)}),pn("getInitialValue"),ea("manager",Rv)],xy:[St("minX",0),St("maxX",100),St("minY",0),St("maxY",100),fr("value",function(u){return Nr({x:u.mode.minX,y:u.mode.minY})}),pn("getInitialValue"),ea("manager",JC)]})),Es("sliderBehaviours",[no,or]),fr("mouseIsDown",function(){return Nr(!1)})],partFields:mD,factory:function(u,h,v,w){function A(We){return mo(We,u,"thumb")}function P(We){return mo(We,u,"spectrum")}function H(We){return ii(We,u,"left-edge")}function Y(We){return ii(We,u,"right-edge")}function X(We){return ii(We,u,"top-edge")}function oe(We){return ii(We,u,"bottom-edge")}function ue(We,Te){Ne.setPositionFromValue(We,Te,u,{getLeftEdge:H,getRightEdge:Y,getTopEdge:X,getBottomEdge:oe,getSpectrum:P})}function de(We,Te){Re.value.set(Te),ue(We,A(We))}function ye(We){var Te=u.mouseIsDown.get();u.mouseIsDown.set(!1),Te&&ii(We,u,"thumb").each(function(Ve){var Qe=Re.value.get();u.onChoose(We,Ve,Qe)})}function Se(We,Te){Te.stop(),u.mouseIsDown.set(!0),u.onDragStart(We,A(We))}function Pe(We,Te){Te.stop(),u.onDragEnd(We,A(We)),ye(We)}var Oe,Re=u.model,Ne=Re.manager;return{uid:u.uid,dom:u.dom,components:h,behaviours:tu(u.sliderBehaviours,[no.config({mode:"special",focusIn:function(We){return ii(We,u,"spectrum").map(no.focusIn).map(Ur)}}),or.config({store:{mode:"manual",getValue:function(We){return Re.value.get()}}}),Ss.config({channels:((Oe={})[_0()]={onReceive:ye},Oe)})]),events:ia([on(vm(),function(We,Te){!function(Ve,Qe){de(Ve,Qe);var lt=A(Ve);u.onChange(Ve,lt,Qe),$.some(!0)}(We,Te.event.value)}),ja(function(We,Te){var Ve=Re.getInitialValue();Re.value.set(Ve);var Qe=A(We);ue(We,Qe);var lt=P(We);u.onInit(We,Qe,lt,Re.value.get())}),on(ul(),Se),on(Oa(),Pe),on(Wc(),Se),on(_b(),Pe)]),apis:{resetToMin:function(We){Ne.setToMin(We,u)},resetToMax:function(We){Ne.setToMax(We,u)},setValue:de,refresh:ue},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(u,h,v){u.setValue(h,v)},resetToMin:function(u,h){u.resetToMin(h)},resetToMax:function(u,h){u.resetToMax(h)},refresh:function(u,h){u.refresh(h)}}}),k1=Br("rgb-hex-update"),T1=Br("slider-update"),rS=Br("palette-update"),K2=[Es("formBehaviours",[or])],qf={getField:Op(function(u,h,v){return u.getField(h,v)}),sketch:function(u){var h,v={field:function(P,H){return h.push(P),Hg("form",LC(P),H)},record:ct(h=[])},w=u(v),A=nn(v.record(),function(P){return bu({name:P,pname:LC(P)})});return Jm("form",K2,A,ib,w)}},QC=Br("valid-input"),hg=Br("invalid-input"),xD=Br("validating-input"),D1="colorcustom.rgb.",sb=function(u){return ti.config({find:u.getOpt})},ub=function(u){return ti.config({find:function(h){return $r(h.element,u).bind(function(v){return h.getSystem().getByDom(v).toOptional()})}})},lb={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},Gk=tinymce.util.Tools.resolve("tinymce.Resource"),Lv=tinymce.util.Tools.resolve("tinymce.util.Tools"),Hy=ke([St("preprocess",_n),St("postprocess",_n)]),cb=function(u,h){var v=pu("RepresentingConfigs.memento processors",Hy,h);return or.config({store:{mode:"manual",getValue:function(w){var A=u.get(w),P=or.getValue(A);return v.postprocess(P)},setValue:function(w,A){var P=v.preprocess(A),H=u.get(w);or.setValue(H,P)}}})},gp=NC,Wy=function(u){return or.config({store:{mode:"memory",initialValue:u}})},A1=Br("alloy-fake-before-tabstop"),eM=Br("alloy-fake-after-tabstop"),$2=!(fu().browser.isIE()||fu().browser.isEdge()),pg=function(u){return u.getContext("2d")},tM=function(u,h,v){return u.width=h,u.height=v,u},I1=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],fb=function(u,h,v){var w=pg(u),A=function(P){for(var H,Y,X,oe,ue=P.data,de=v[0],ye=v[1],Se=v[2],Pe=v[3],Oe=v[4],Re=v[5],Ne=v[6],We=v[7],Te=v[8],Ve=v[9],Qe=v[10],lt=v[11],Ft=v[12],Tt=v[13],Ut=v[14],dn=v[15],Jt=v[16],yn=v[17],En=v[18],pr=v[19],Wr=0;Wr<ue.length;Wr+=4)ue[Wr]=(H=ue[Wr])*de+(Y=ue[Wr+1])*ye+(X=ue[Wr+2])*Se+(oe=ue[Wr+3])*Pe+Oe,ue[Wr+1]=H*Re+Y*Ne+X*We+oe*Te+Ve,ue[Wr+2]=H*Qe+Y*lt+X*Ft+oe*Tt+Ut,ue[Wr+3]=H*dn+Y*Jt+X*yn+oe*En+pr;return P}(w.getImageData(0,0,u.width,u.height));return w.putImageData(A,0,0),nb(u,h)},Nv=(dD=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(u){return ob(u,dD)}),db=BC(function(u,h){return qw(u,[1,0,0,0,h=rb(255*h,-255,255),0,1,0,0,h,0,0,1,0,h,0,0,0,1,0,0,0,0,0,1])}),Uk=BC(function(u,h){var v;return h=rb(h,-1,1),qw(u,[(v=(h*=100)<0?127+h/100*127:127*(0==(v=h%1)?I1[h]:I1[Math.floor(h)]*(1-v)+I1[Math.floor(h)+1]*v)+127)/127,0,0,0,.5*(127-v),0,v/127,0,0,.5*(127-v),0,0,v/127,0,.5*(127-v),0,0,0,1,0,0,0,0,0,1])}),wD=(Ek=[0,-1,0,-1,5,-1,0,-1,0],function(u){return v=Ek,(h=u).toCanvas().then(function(w){return A=w,P=h.getType(),H=v,X=function(oe,ue,de){for(var ye=function(pr,Wr,No){return No<pr?pr=No:pr<Wr&&(pr=Wr),pr},Se=Math.round(Math.sqrt(de.length)),Pe=Math.floor(Se/2),Oe=oe.data,Re=ue.data,Ne=oe.width,We=oe.height,Te=0;Te<We;Te++)for(var Ve=0;Ve<Ne;Ve++){for(var Qe=0,lt=0,Ft=0,Tt=0;Tt<Se;Tt++)for(var Ut=0;Ut<Se;Ut++){var dn=ye(Ve+Ut-Pe,0,Ne-1),Jt=4*(ye(Te+Tt-Pe,0,We-1)*Ne+dn),yn=de[Tt*Se+Ut];Qe+=Oe[Jt]*yn,lt+=Oe[1+Jt]*yn,Ft+=Oe[2+Jt]*yn}var En=4*(Te*Ne+Ve);Re[En]=ye(Qe,0,255),Re[1+En]=ye(lt,0,255),Re[2+En]=ye(Ft,0,255)}return ue}((Y=pg(A)).getImageData(0,0,A.width,A.height),Y.getImageData(0,0,A.width,A.height),H),Y.putImageData(X,0,0),nb(A,P);var A,P,H,Y,X});var h,v}),Gy=(a_=function(u,h){return 255*Math.pow(u/255,1-h)},function(u,h){return u.toCanvas().then(function(v){return function(w,A,P){for(var H=pg(w),Y=new Array(256),X=0;X<Y.length;X++)Y[X]=a_(X,P);var oe=function(ue,de){for(var ye=ue.data,Se=0;Se<ye.length;Se+=4)ye[Se]=de[ye[Se]],ye[Se+1]=de[ye[Se+1]],ye[Se+2]=de[ye[Se+2]];return ue}(H.getImageData(0,0,w.width,w.height),Y);return H.putImageData(oe,0,0),nb(w,A)}(v,u.getType(),h)})}),SD=function(u,h,v){var w=jw(u),A=x1(u),P=h/w,H=v/A,Y=!1;(P<.5||2<P)&&(P=P<.5?.5:2,Y=!0),(H<.5||2<H)&&(H=H<.5?.5:2,Y=!0);var X=nM(u,P,H);return Y?X.then(function(oe){return SD(oe,h,v)}):X},nM=function(u,h,v){return new Bh(function(w){var A=jw(u),P=x1(u),H=Math.floor(A*h),Y=Math.floor(P*v),X=rh(H,Y);pg(X).drawImage(u,0,0,A,P,0,0,H,Y),w(X)})},qi=function(u,h,v){var w=(v<0?360+v:v)*Math.PI/180,A=u.width,P=u.height,H=Math.sin(w),Y=Math.cos(w),X=oh(Math.abs(A*Y)+Math.abs(P*H)),oe=oh(Math.abs(A*H)+Math.abs(P*Y)),ue=rh(X,oe),de=pg(ue);return de.translate(X/2,oe/2),de.rotate(w),de.drawImage(u,-A/2,-P/2),nb(ue,h)},jk=function(u,h,v){var w=rh(u.width,u.height),A=pg(w);return"v"===v?(A.scale(1,-1),A.drawImage(u,0,-w.height)):(A.scale(-1,1),A.drawImage(u,-w.width,0)),nb(w,h)},Yk=Br("toolbar.button.execute"),Uy=((Jw={})[af()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],Jw),Xf=Br("update-menu-text"),CD=Br("update-menu-icon"),ym={type:"separator"},c_=function(u,h){var v,w,A;return Pn((v=Pr(u)?u.split(" "):u,w=h,0<(A=yo(v,function(P,H){return Pr(H)?""===H?P:"|"===H?0<P.length&&!S1(P[P.length-1])?P.concat([ym]):P:hr(w,H.toLowerCase())?P.concat([w[H.toLowerCase()]]):P:P.concat([H])},[])).length&&S1(A[A.length-1])&&A.pop(),A),function(P,H){var Y,X,oe,ue,de,ye,Se=function(Oe){if(S1(Oe))return Oe;var Re=rn(Oe,"value").getOrThunk(function(){return Br("generated-menu-item")});return ee({value:Re},Oe)}(H),Pe=(X=h,hr(Y=Se,"getSubmenuItems")?(ue=X,de=(oe=Y).getSubmenuItems(),ye=c_(de,ue),{item:oe,menus:ee(ye.menus,Hr(oe.value,ye.items)),expansions:ee(ye.expansions,Hr(oe.value,oe.value))}):{item:Y,menus:{},expansions:{}});return{menus:ee(P.menus,Pe.menus),items:[Pe.item].concat(P.items),expansions:ee(P.expansions,Pe.expansions)}},{menus:{},expansions:{},items:[]})},J2=ct([St("field1Name","field1"),St("field2Name","field2"),Ef("onLockedChange"),ko(["lockClass"]),St("locked",!1),eg("coupledFieldBehaviours",[ti,or])]),MD=ct([Ok("field1","field2"),Ok("field2","field1"),bu({factory:Xl,schema:[pn("dom")],name:"lock",overrides:function(u){return{buttonBehaviours:jn([Ei.config({selected:u.locked,toggleClass:u.markers.lockClass,aria:{mode:"pressed"}})])}}})]),gl=Ul({name:"FormCoupledInputs",configFields:J2(),partFields:MD(),factory:function(u,h,v,w){return{uid:u.uid,dom:u.dom,components:h,behaviours:Vf(u.coupledFieldBehaviours,[ti.config({find:$.some}),or.config({store:{mode:"manual",getValue:function(A){var P=ax(A,u,["field1","field2"]),H={};return H[u.field1Name]=or.getValue(P.field1()),H[u.field2Name]=or.getValue(P.field2()),H},setValue:function(A,P){var H=ax(A,u,["field1","field2"]);zo(P,u.field1Name)&&or.setValue(H.field1(),P[u.field1Name]),zo(P,u.field2Name)&&or.setValue(H.field2(),P[u.field2Name])}}})]),apis:{getField1:function(A){return ii(A,u,"field1")},getField2:function(A){return ii(A,u,"field2")},getLock:function(A){return ii(A,u,"lock")}}}},apis:{getField1:function(u,h){return u.getField1(h)},getField2:function(u,h){return u.getField2(h)},getLock:function(u,h){return u.getLock(h)}}}),Pa={undo:ct(Br("undo")),redo:ct(Br("redo")),zoom:ct(Br("zoom")),back:ct(Br("back")),apply:ct(Br("apply")),swap:ct(Br("swap")),transform:ct(Br("transform")),tempTransform:ct(Br("temp-transform")),transformApply:ct(Br("transform-apply"))},oM=ct("save-state"),Hh=ct("disable"),iM=ct("enable"),Qc={formActionEvent:cg,saveState:oM,disable:Hh,enable:iM},O1=tinymce.util.Tools.resolve("tinymce.geom.Rect"),f_=tinymce.util.Tools.resolve("tinymce.util.Observable"),bm=tinymce.util.Tools.resolve("tinymce.util.VK");function E1(u,h,v,w,A){return cD({name:u,icon:$.some(h),disabled:v,tooltip:$.some(u),primary:!1,borderless:!1},w,A)}function Xk(u,h){h?Vr.enable(u):Vr.disable(u)}var d_=0;function kD(u,h){function v(Jt){var yn=Te.getHistoryStates();Ft.updateButtonUndoStates(Jt,yn.undoEnabled,yn.redoEnabled),vr(Jt,Qc.formActionEvent,{name:Qc.saveState(),value:yn.undoEnabled})}function w(Jt){return Jt.toBlob()}function A(Jt){vr(Jt,Qc.formActionEvent,{name:Qc.disable(),value:{}})}function P(Jt,yn,En,pr,Wr){A(Jt),function Tk(u){return h=u,new Bh(function(v){var w=new FileReader;w.onloadend=function(){v(w.result)},w.readAsDataURL(h)}).then(function(v){return Yw((w=u,new Bh(function(A,P){function H(){X.removeEventListener("load",oe),X.removeEventListener("error",ue)}var Y=URL.createObjectURL(w),X=new Image,oe=function(){H(),A(X)},ue=function(){H(),P("Unable to load data of type "+w.type+": "+Y)};X.addEventListener("load",oe),X.addEventListener("error",ue),X.src=Y,X.complete&&setTimeout(oe,0)}).then(function(A){!function(u){URL.revokeObjectURL(u.src)}(A);var P=rh(jw(A),x1(A));return pg(P).drawImage(A,0,0),P})),u,v);var w});var h}(yn).then(En).then(w).then(pr).then(function(No){return Qe(Jt,No)}).then(function(){v(Jt),Wr(),Ve(Jt)}).catch(function(No){console.log(No),Jt.getSystem().isConnected()&&Ve(Jt)})}function H(Jt,yn,En){P(Jt,Te.getBlobState().blob,yn,function(pr){return Te.updateTempState(pr)},En)}function Y(Jt){var yn=Te.getBlobState().url;return Te.destroyTempState(),v(Jt),yn}var X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne,We,Te=function aM(u){var h,v,w,A,P=Nr(u),H=Cs(),Y=(v=-1,{data:h=[],add:function(Se){var Pe=h.splice(++v);return h.push(Se),{state:Se,removed:Pe}},undo:function(){if(w())return h[--v]},redo:function(){if(A())return h[++v]},canUndo:w=function(){return 0<v},canRedo:A=function(){return-1!==v&&v<h.length-1}});function X(Se){P.set(Se)}function oe(Se){URL.revokeObjectURL(Se.url)}function ue(Se){var Pe=de(Se);X(Pe);var Oe=Y.add(Pe).removed;return Lv.each(Oe,oe),Pe.url}function de(Se){return{blob:Se,url:URL.createObjectURL(Se)}}function ye(){H.on(oe),H.clear()}return Y.add(u),{getBlobState:function(){return P.get()},setBlobState:X,addBlobState:ue,getTempState:function(){return H.get().getOrThunk(P.get)},updateTempState:function(Se){var Pe=de(Se);return ye(),H.set(Pe),Pe.url},addTempState:function(Se){var Pe=de(Se);return H.set(Pe),Pe.url},applyTempState:function(Se){return H.get().fold(Gt,function(Pe){ue(Pe.blob),Se()})},destroyTempState:ye,undo:function(){var Se=Y.undo();return X(Se),Se.url},redo:function(){var Se=Y.redo();return X(Se),Se.url},getHistoryStates:function(){return{undoEnabled:Y.canUndo(),redoEnabled:Y.canRedo()}}}}(u.currentState),Ve=function(Jt){Tt.getApplyButton(Jt).each(function(yn){Vr.enable(yn)}),vr(Jt,Qc.formActionEvent,{name:Qc.enable(),value:{}})},Qe=function(Jt,yn){return A(Jt),lt.updateSrc(Jt,yn)},lt=(de=u.currentState.url,Se=Li({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),Pe=Nr(1),ye=ny(),Oe=qe(qe({},ye),{run:function(Jt){return ye.get().each(Jt)}}),Re=Nr({x:0,y:0,w:1,h:1}),Ne=Nr({x:0,y:0,w:1,h:1}),{memContainer:We=Li(xu.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[Se.asSpec(),{dom:{tag:"img",attributes:{src:de}}},{dom:{tag:"div"},behaviours:jn([tr("image-panel-crop-events",[ja(function(Jt){We.getOpt(Jt).each(function(yn){var pr=function(u,h,v,w,A){function P(Te,Ve){return{x:Ve.x-Te.x,y:Ve.y-Te.y,w:Ve.w,h:Ve.h}}function H(Te,Ve,Qe,lt){var Ft=Ve.x+Qe*Te.deltaX,Tt=Ve.y+lt*Te.deltaY,Ut=Math.max(20,Ve.w+Qe*Te.deltaW),dn=Math.max(20,Ve.h+lt*Te.deltaH),Jt=(u=O1.clamp({x:Ft,y:Tt,w:Ut,h:dn},v,"move"===Te.name),P(v,u));We.fire("updateRect",{rect:Jt}),Re(Jt)}function Y(Te){X(u=Te)}function X(Te){function Ve(Qe,lt){Ya(Se,"#"+ye+"-"+Qe).each(function(Ft){wa(Ft,{left:lt.x+"px",top:lt.y+"px",width:Math.max(0,lt.w)+"px",height:Math.max(0,lt.h)+"px"})})}Tr(Pe,function(Qe){Ya(Se,"#"+ye+"-"+Qe.name).each(function(lt){wa(lt,{left:Te.w*Qe.xMul+Te.x+"px",top:Te.h*Qe.yMul+Te.y+"px"})})}),Ve("top",{x:h.x,y:h.y,w:h.w,h:Te.y-h.y}),Ve("right",{x:Te.x+Te.w,y:Te.y,w:h.w-Te.x-Te.w+h.x,h:Te.h}),Ve("bottom",{x:h.x,y:Te.y+Te.h,w:h.w,h:h.h-Te.y-Te.h+h.y}),Ve("left",{x:h.x,y:Te.y,w:Te.x-h.x,h:Te.h}),Ve("move",Te)}var oe,ue,de=[],ye="tox-crid-"+d_++,Se=it.fromDom(w),Pe=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],Oe=["top","right","bottom","left"],Re=function(Te){var Ve;Y({x:Te.x+(Ve=v).x,y:Te.y+Ve.y,w:Te.w,h:Te.h})};function Ne(Te){Gr(Te.target,"aria-grabbed","focus"===Te.raw.type?"true":"false")}Ha(ue=it.fromTag("div"),{id:ye,class:"tox-croprect-container",role:"grid","aria-dropeffect":"execute"}),Qa(Se,ue),Tr(Oe,function(Te){Ya(Se,"#"+ye).each(function(Ve){var Qe=it.fromTag("div");Ha(Qe,{id:ye+"-"+Te,class:"tox-croprect-block","data-mce-bogus":"all"}),to(Qe,"display","none"),Qa(Ve,Qe)})}),Tr(Pe,function(Te){Ya(Se,"#"+ye).each(function(Ve){var Qe=it.fromTag("div");Ha(Qe,{id:ye+"-"+Te.name,"aria-label":Te.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:Te.label}),Zu(Qe,["tox-croprect-handle","tox-croprect-handle-"+Te.name]),to(Qe,"display","none"),Qa(Ve,Qe)})}),oe=nn(Pe,function(Te){var Ve;return function qk(u,h){function v(We){var Te,Ve,Qe,lt,Ft,Tt,Ut,dn,Jt=We.raw,yn=(lt=(Te=Math.max)((Ve=Se.documentElement).scrollWidth,(Qe=Se.body).scrollWidth),Ft=Te(Ve.clientWidth,Qe.clientWidth),Tt=Te(Ve.offsetWidth,Qe.offsetWidth),Ut=Te(Ve.scrollHeight,Qe.scrollHeight),dn=Te(Ve.clientHeight,Qe.clientHeight),{width:lt<Tt?Ft:lt,height:Ut<Te(Ve.offsetHeight,Qe.offsetHeight)?dn:Ut});$w(Jt),We.prevent(),X=Jt.button,oe=Jt.screenX,ue=Jt.screenY;var En=As(Re,"cursor");wa(Y=it.fromTag("div",Se),{position:"absolute",top:"0",left:"0",width:yn.width+"px",height:yn.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:En}),Qa(rd(Oe),Y),ye.push(Js(Oe,"mousemove",w),Js(Oe,"touchmove",w),Js(Oe,"mouseup",Ne),Js(Oe,"touchend",Ne)),h.start(Jt)}function w(We){var Te=We.raw;if($w(Te),Te.button!==X)return Ne(We);Te.deltaX=Te.screenX-oe,Te.deltaY=Te.screenY-ue,We.prevent(),h.drag(Te)}var A,P,H,Y,X,oe,ue,de=[],ye=[],Se=null!==(A=h.document)&&void 0!==A?A:document,Pe=null!==(P=h.root)&&void 0!==P?P:Se,Oe=it.fromDom(Se),Re=it.fromDom(Pe.getElementById(null!==(H=h.handle)&&void 0!==H?H:u)),Ne=function(We){$w(We.raw),Tr(ye,function(Te){return Te.unbind()}),ye=[],rf(Y),h.stop&&h.stop(We.raw)};return de.push(Js(Re,"mousedown",v),Js(Re,"touchstart",v)),{destroy:function(){Tr(ye.concat(de),function(We){return We.unbind()}),ye=[],de=[],Kr(Y)&&rf(Y)}}}(ye,{document:w.ownerDocument,root:zi(Se).dom,handle:ye+"-"+Te.name,start:function(){Ve=u},drag:function(Qe){H(Te,Ve,Qe.deltaX,Qe.deltaY)}})}),X(u),de.push(Js(Se,"focusin",Ne),Js(Se,"focusout",Ne),Js(Se,"keydown",function(Te){var Ve;function Qe(lt,Ft,Tt,Ut,dn){lt.stopPropagation(),lt.preventDefault(),H(Ve,Tt,Ut,dn)}switch(Tr(Pe,function(lt){if(Wa(Te.target,"id")===ye+"-"+lt.name)return Ve=lt,!1}),Te.raw.keyCode){case bm.LEFT:Qe(Te,0,u,-10,0);break;case bm.RIGHT:Qe(Te,0,u,10,0);break;case bm.UP:Qe(Te,0,u,0,-10);break;case bm.DOWN:Qe(Te,0,u,0,10);break;case bm.ENTER:case bm.SPACEBAR:Te.prevent(),A()}}));var We=qe(qe({},f_),{toggleVisibility:function(Te){var Ve=ln(ln([],nn(Pe,function(lt){return"#"+ye+"-"+lt.name}),!0),nn(Oe,function(lt){return"#"+ye+"-"+lt}),!0).join(","),Qe=Gl(Se,Ve);Tr(Qe,Te?function(lt){return Lo(lt,"display")}:function(lt){return to(lt,"display","none")})},setClampRect:function(Te){v=Te,X(u)},setRect:Y,getInnerRect:function(){return P(v,u)},setInnerRect:Re,setViewPortRect:function(Te){h=Te,X(u)},destroy:function(){Tr(oe,function(Te){return Te.destroy()}),oe=[],Tr(de,function(Te){return Te.unbind()}),de=[]}});return We}({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},yn.element.dom,Gt);pr.toggleVisibility(!1),pr.on("updateRect",function(Wr){var No=Wr.rect,wi=Pe.get(),Ui={x:Math.round(No.x/wi),y:Math.round(No.y/wi),w:Math.round(No.w/wi),h:Math.round(No.h/wi)};Re.set(Ui)}),Oe.set(pr)})}),Nd(function(){Oe.clear()})])])}],containerBehaviours:jn([Eo.config({}),tr("image-panel-events",[ja(function(Jt){dn(Jt,de)})])])})),updateSrc:dn,zoom:function(Jt,yn){var En=Pe.get(),pr=0<yn?Math.min(2,En+.1):Math.max(.1,En-.1);Pe.set(pr),We.getOpt(Jt).each(function(Wr){var No=Wr.components()[1].element;Ut(Wr,No)})},showCrop:function(){Oe.run(function(Jt){Jt.toggleVisibility(!0)})},hideCrop:function(){Oe.run(function(Jt){Jt.toggleVisibility(!1)})},getRect:function(){return Re.get()},getMeasurements:function(){var Jt=Ne.get();return{width:Jt.w,height:Jt.h}}}),Ft=(oe=Li(E1("Undo","undo",!0,function(Jt){vr(Jt,Pa.undo(),{direction:1})},X=h)),ue=Li(E1("Redo","redo",!0,function(Jt){vr(Jt,Pa.redo(),{direction:1})},X)),{container:xu.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[oe.asSpec(),ue.asSpec(),E1("Zoom in","zoom-in",!1,function(Jt){vr(Jt,Pa.zoom(),{direction:1})},X),E1("Zoom out","zoom-out",!1,function(Jt){vr(Jt,Pa.zoom(),{direction:-1})},X)]}),updateButtonUndoStates:function(Jt,yn,En){oe.getOpt(Jt).each(function(pr){Xk(pr,yn)}),ue.getOpt(Jt).each(function(pr){Xk(pr,En)})}}),Tt=function UC(u,h){function v(Qn,Bo,ha,ka){return Li(Ik({name:Qn,text:Qn,disabled:ha,primary:ka,icon:$.none(),borderless:!1},Bo,h))}function w(Qn,Bo,ha,ka){return Li(cD({name:Qn,icon:$.some(Qn),tooltip:$.some(Bo),disabled:ka,primary:!1,borderless:!1},ha,h))}function A(Qn,Bo){Qn.map(function(ha){var ka=ha.get(Bo);ka.hasConfigured(Vr)&&Vr.disable(ka)})}function P(Qn,Bo){Qn.map(function(ha){var ka=ha.get(Bo);ka.hasConfigured(Vr)&&Vr.enable(ka)})}function H(Qn,Bo,ha){vr(Qn,Bo,ha)}function Y(Qn){return Rr(Qn,Qc.disable()),0}function X(Qn){return Rr(Qn,Qc.enable()),0}function oe(Qn,Bo){Y(Qn),H(Qn,Pa.transform(),{transform:Bo}),X(Qn)}function ue(Qn){return function(){ta.getOpt(Qn).each(function(Bo){Eo.set(Bo,[au])})}}function de(Qn,Bo){Y(Qn),H(Qn,Pa.transformApply(),{transform:Bo,swap:ue(Qn)}),X(Qn)}function ye(){return v("Back",function(Qn){return H(Qn,Pa.back(),{swap:ue(Qn)})},!1,!1)}function Se(){return Li({dom:{tag:"div",classes:["tox-spacer"]},behaviours:jn([Vr.config({})])})}function Pe(){return v("Apply",function(Qn){return H(Qn,Pa.apply(),{swap:ue(Qn)})},!0,!0)}function Oe(Qn,Bo){return function(ha){return Qn(ha,Bo)}}function Re(Qn,Bo){var ha,ka=Bo;Y(ha=Qn),H(ha,Pa.tempTransform(),{transform:ka}),X(ha)}function Ne(Qn,Bo,ha,ka,ms){var ef=ru.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:h.translate(Qn)}}),Nu=ru.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),vl=ru.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return Li(ru.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:ha,maxX:ms,getInitialValue:ct({x:ka})},components:[ef,Nu,vl],sliderBehaviours:jn([_o.config({})]),onChoose:Bo}))}function We(Qn,Bo,ha,ka,ms){var ef,Nu,vl,Ec,yl,bl,Kl=(ef=Qn,Nu=Bo,vl=ha,Ec=ka,yl=ms,[ye(),(bl=Nu,Ne(ef,function(xl,bp,ui){oe(xl,Oe(bl,ui.x/100))},vl,Ec,yl)),Pe()]);return xu.sketch({dom:Qe,components:Kl.map(function(xl){return xl.asSpec()}),containerBehaviours:jn([tr("image-tools-filter-panel-buttons-events",[on(Qc.disable(),function(xl,bp){A(Kl,xl)}),on(Qc.enable(),function(xl,bp){P(Kl,xl)})])])})}function Te(Qn){return Ne(Qn,function(Bo,ha,ka){var ms=Ji.getOpt(Bo),ef=Na.getOpt(Bo),Nu=Si.getOpt(Bo);ms.each(function(vl){ef.each(function(Ec){Nu.each(function(yl){var bl,Kl,xl,bp=or.getValue(vl).x/100,ui=or.getValue(yl).x/100,Qf=or.getValue(Ec).x/100,Il=(bl=bp,Kl=ui,xl=Qf,function(Sm){return ob(Sm,(Wv=Kl,Gv=xl,qw([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],[rb(bl,0,2),0,0,0,0,0,rb(Wv,0,2),0,0,0,0,0,rb(Gv,0,2),0,0,0,0,0,1,0,0,0,0,0,1])));var Wv,Gv});oe(Bo,Il)})})})},0,100,200)}function Ve(Qn,Bo,ha){return function(ka){H(ka,Pa.swap(),{transform:Bo,swap:function(){ta.getOpt(ka).each(function(ms){Eo.set(ms,[Qn]),ha(ms)})}})}}var Qe={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},lt=Gt,Ft=[ye(),Se(),v("Apply",function(Qn){de(Qn,function(Bo){var Nu,vl,Ec,yl,bl,Kl=u.getRect();return vl=Kl.x,Ec=Kl.y,yl=Kl.w,bl=Kl.h,(Nu=Bo).toCanvas().then(function(xl){return function(u,h,v,w,A,P){var H=rh(A,P);return pg(H).drawImage(u,-v,-w),nb(H,h)}(xl,Nu.getType(),vl,Ec,yl,bl)})}),u.hideCrop()},!1,!0)],Tt=xu.sketch({dom:Qe,components:Ft.map(function(Qn){return Qn.asSpec()}),containerBehaviours:jn([tr("image-tools-crop-buttons-events",[on(Qc.disable(),function(Qn,Bo){A(Ft,Qn)}),on(Qc.enable(),function(Qn,Bo){P(Ft,Qn)})])])}),Ut=Li(GC({name:"size",label:$.none(),constrain:!0,disabled:!1},h)),dn=[ye(),Se(),Ut,Se(),v("Apply",function(Qn){Ut.getOpt(Qn).each(function(Bo){var ha,ka,ms=or.getValue(Bo),ef=parseInt(ms.width,10),Nu=parseInt(ms.height,10),vl=(ha=ef,ka=Nu,function(Ec){return bl=ha,Kl=ka,(yl=Ec).toCanvas().then(function(xl){return SD(xl,bl,Kl).then(function(bp){return nb(bp,yl.getType())})});var yl,bl,Kl});de(Qn,vl)})},!1,!0)],Jt=xu.sketch({dom:Qe,components:dn.map(function(Qn){return Qn.asSpec()}),containerBehaviours:jn([tr("image-tools-resize-buttons-events",[on(Qc.disable(),function(Qn,Bo){A(dn,Qn)}),on(Qc.enable(),function(Qn,Bo){P(dn,Qn)})])])}),yn=Oe(zC,"h"),En=Oe(zC,"v"),pr=Oe(uD,-90),Wr=Oe(uD,90),No=[ye(),Se(),w("flip-horizontally","Flip horizontally",function(Qn){Re(Qn,yn)},!1),w("flip-vertically","Flip vertically",function(Qn){Re(Qn,En)},!1),w("rotate-left","Rotate counterclockwise",function(Qn){Re(Qn,pr)},!1),w("rotate-right","Rotate clockwise",function(Qn){Re(Qn,Wr)},!1),Se(),Pe()],wi=xu.sketch({dom:Qe,components:No.map(function(Qn){return Qn.asSpec()}),containerBehaviours:jn([tr("image-tools-fliprotate-buttons-events",[on(Qc.disable(),function(Qn,Bo){A(No,Qn)}),on(Qc.enable(),function(Qn,Bo){P(No,Qn)})])])}),Ui=[ye(),Se(),Pe()],Ni=xu.sketch({dom:Qe,components:Ui.map(function(Qn){return Qn.asSpec()})}),Zo=We("Brightness",Ak,-100,0,100),Xi=We("Contrast",Vh,-100,0,100),$i=We("Gamma",sD,-100,0,100),Ji=Te("R"),Si=Te("G"),Na=Te("B"),Zl=[ye(),Ji,Si,Na,Pe()],js=xu.sketch({dom:Qe,components:Zl.map(function(Qn){return Qn.asSpec()})}),Jf=$.some(aD),Ba=$.some(Dk),Td=[w("crop","Crop",Ve(Tt,$.none(),function(Qn){u.showCrop()}),!1),w("resize","Resize",Ve(Jt,$.none(),function(Qn){Ut.getOpt(Qn).each(function(Bo){var ha=u.getMeasurements();or.setValue(Bo,{width:ha.width,height:ha.height})})}),!1),w("orientation","Orientation",Ve(wi,$.none(),lt),!1),w("brightness","Brightness",Ve(Zo,$.none(),lt),!1),w("sharpen","Sharpen",Ve(Ni,Jf,lt),!1),w("contrast","Contrast",Ve(Xi,$.none(),lt),!1),w("color-levels","Color levels",Ve(js,$.none(),lt),!1),w("gamma","Gamma",Ve($i,$.none(),lt),!1),w("invert","Invert",Ve(Ni,Ba,lt),!1)],au=xu.sketch({dom:Qe,components:Td.map(function(Qn){return Qn.asSpec()})}),ta=Li(xu.sketch({dom:{tag:"div"},components:[au],containerBehaviours:jn([Eo.config({})])}));return{memContainer:ta,getApplyButton:function(Qn){return ta.getOpt(Qn).map(function(Bo){var ha=Bo.components()[0];return ha.components()[ha.components().length-1]})}}}(lt,h);function Ut(Jt,yn){We.getOpt(Jt).each(function(En){var pr=Pe.get(),Wr=Qt(En.element),No=Hu(En.element),wi=yn.dom.naturalWidth*pr,Ui=yn.dom.naturalHeight*pr,Ni=Math.max(0,Wr/2-wi/2),Zo=Math.max(0,No/2-Ui/2),Xi={left:Ni.toString()+"px",top:Zo.toString()+"px",width:wi.toString()+"px",height:Ui.toString()+"px",position:"absolute"};wa(yn,Xi),Se.getOpt(En).each(function($i){wa($i.element,Xi)}),Oe.run(function($i){var Ji=Re.get();$i.setRect({x:Ji.x*pr+Ni,y:Ji.y*pr+Zo,w:Ji.w*pr,h:Ji.h*pr}),$i.setClampRect({x:Ni,y:Zo,w:wi,h:Ui}),$i.setViewPortRect({x:0,y:0,w:Wr,h:No})})})}function dn(Jt,yn){var En,pr=it.fromTag("img");return Gr(pr,"src",yn),En=pr.dom,new jb(function(Wr){var No=function(){En.removeEventListener("load",No),Wr(En)};En.complete?Wr(En):En.addEventListener("load",No)}).then(function(){Jt.getSystem().isConnected()&&We.getOpt(Jt).map(function(Wr){var No=Kv({element:pr});Eo.replaceAt(Wr,1,$.some(No));var wi=Ne.get(),Ui={x:0,y:0,w:pr.dom.naturalWidth,h:pr.dom.naturalHeight};Ne.set(Ui);var Ni,Zo=O1.inflate(Ui,-20,-20);Re.set(Zo),wi.w===Ui.w&&wi.h===Ui.h||(Ni=pr,We.getOpt(Wr).each(function(Xi){var $i=Qt(Xi.element),Ji=Hu(Xi.element),Zl=Math.min($i/Ni.dom.naturalWidth,Ji/Ni.dom.naturalHeight);Pe.set(1<=Zl?1:Zl)})),Ut(Wr,pr)})})}return{dom:{tag:"div",attributes:{role:"presentation"}},components:[Tt.memContainer.asSpec(),lt.memContainer.asSpec(),Ft.container],behaviours:jn([or.config({store:{mode:"manual",getValue:function(){return Te.getBlobState()}}}),tr("image-tools-events",[on(Pa.undo(),function(Jt,yn){var En=Te.undo();Qe(Jt,En).then(function(pr){Ve(Jt),v(Jt)})}),on(Pa.redo(),function(Jt,yn){var En=Te.redo();Qe(Jt,En).then(function(pr){Ve(Jt),v(Jt)})}),on(Pa.zoom(),function(Jt,yn){lt.zoom(Jt,yn.event.direction)}),on(Pa.back(),function(Jt,yn){var En,pr=Y(En=Jt);Qe(En,pr).then(function(Wr){Ve(En)}),(0,yn.event.swap)(),lt.hideCrop()}),on(Pa.apply(),function(Jt,yn){Te.applyTempState(function(){Y(Jt),(0,yn.event.swap)()})}),on(Pa.transform(),function(Jt,yn){return H(Jt,yn.event.transform,Gt)}),on(Pa.tempTransform(),function(Jt,yn){var En=yn.event.transform;P(Jt,Te.getTempState().blob,En,function(pr){return Te.addTempState(pr)},Gt)}),on(Pa.transformApply(),function(Jt,yn){var En=Jt,pr=yn.event.transform,Wr=yn.event.swap,No=Te.getBlobState().blob;P(En,No,pr,function(wi){var Ui=Te.addBlobState(wi);return Y(En),Ui},Wr)}),on(Pa.swap(),function(Jt,yn){Ft.updateButtonUndoStates(Jt,!1,!1);var pr=yn.event.swap;yn.event.transform.fold(function(){pr()},function(Wr){H(Jt,Wr,pr)})})]),ab()])}}function P1(u){return!hr(u,"items")}function R1(u,h){var v=u.label.map(function(X){return Qd(X,h)}),w=[Vr.config({disabled:function(){return u.disabled||h.isDisabled()}}),Ls(),no.config({mode:"execution",useEnter:!0!==u.multiline,useControlEnter:!0===u.multiline,execute:function(X){return Rr(X,Yf),$.some(!0)}}),tr("textfield-change",[on(hs(),function(X,oe){vr(X,eh,{name:u.name})}),on(vh(),function(X,oe){vr(X,eh,{name:u.name})})]),pi.config({})],A=u.validation.map(function(X){return kv.config({getRoot:function(oe){return Xr(oe.element)},invalidClass:"tox-invalid",validator:{validate:function(oe){var ue=or.getValue(oe),de=X.validator(ue);return fg(!0===de?Vo.value(ue):Vo.error(de))},validateOnLoad:X.validateOnLoad}})}).toArray(),P=u.placeholder.fold(ct({}),function(X){return{placeholder:h.translate(X)}}),H=u.inputMode.fold(ct({}),function(X){return{inputmode:X}}),Y=qe(qe({},P),H);return j0(v,_i.parts.field({tag:!0===u.multiline?"textarea":"input",inputAttributes:Y,inputClasses:[u.classname],inputBehaviours:jn(De([w,A])),selectOnFocus:!1,factory:zy}),(u.flex?["tox-form__group--stretched"]:[]).concat(u.maximized?["tox-form-group--maximize"]:[]),[Vr.config({disabled:function(){return u.disabled||h.isDisabled()},onDisabled:function(X){_i.getField(X).each(Vr.disable)},onEnabled:function(X){_i.getField(X).each(Vr.enable)}}),Ls()])}function jy(u){var h=Nr(null);return Uc({readState:function(){return{timer:null!==h.get()?"set":"unset"}},setTimer:function(v){h.set(v)},cancel:function(){var v=h.get();null!==v&&v.cancel()}})}function L1(u,h,v){var w=or.getValue(v);or.setValue(h,w),xm(h)}function h_(u,h){var v=u.element,w=Vc(v),A=v.dom;"number"!==Wa(v,"type")&&h(A,w)}function N1(u){return{type:"menuitem",value:u.url,text:u.title,meta:{attach:u.attach},onAction:Gt}}function Bv(u,h){return{type:"menuitem",value:h,text:u,meta:{attach:void 0},onAction:Gt}}function iS(u,h){return v=u,nn(mt(h,function(w){return w.type===v}),N1);var v}function sM(u,h){var v=u.toLowerCase();return mt(h,function(w){return ni((void 0!==w.meta&&void 0!==w.meta.text?w.meta:w).text.toLowerCase(),v)||ni(w.value.toLowerCase(),v)})}function wu(u){return function(h,v,w){return rn(v,"name").fold(function(){return u(v,w)},function(A){return h.field(A,u(v,w))})}}function TD(u,h,v){var w=ee(v,{shared:{interpreter:function(A){return LD(u,A,w)}}});return LD(u,h,w)}function aS(u,h,v){function w(){return it.fromDom(u.getContentAreaContainer())}function A(){return Oe||!v()}var P,H,Y,X,oe,ue,de,ye,Se,Pe,Oe=Py(u);return{inlineDialog:(de=w,ye=h,Se=A,Pe={maxHeightFunction:np()},function(){return Se()?{type:"node",root:oa(de()),node:$.from(de()),bubble:ry(12,12,hO),layouts:{onRtl:function(){return[$d]},onLtr:function(){return[Hf]}},overrides:Pe}:{type:"hotspot",hotspot:ye(),bubble:ry(-12,12,hO),layouts:{onRtl:function(){return[Ou]},onLtr:function(){return[dl]}},overrides:Pe}}),banner:(X=w,oe=h,ue=A,function(){return ue()?{type:"node",root:oa(X()),node:$.from(X()),layouts:{onRtl:function(){return[ag]},onLtr:function(){return[ag]}}}:{type:"hotspot",hotspot:oe(),layouts:{onRtl:function(){return[Ju]},onLtr:function(){return[Ju]}}}}),cursor:(H=u,function(){return{type:"selection",root:Y(),getSelection:function(){var Re=H.selection.getRng();return $.some(Gm.range(it.fromDom(Re.startContainer),Re.startOffset,it.fromDom(Re.endContainer),Re.endOffset))}}}),node:(P=Y=function(){return it.fromDom(u.getBody())},function(Re){return{type:"node",root:P(),node:Re}})}}function p_(u){return $.from(u.getParam("style_formats")).filter(mi).map(function(h){var v,w,A=(v=u,w=ND(h),v.formatter?P(w.customFormats):v.on("init",function(){P(w.customFormats)}),w.formats);function P(H){Tr(H,function(Y){v.formatter.has(Y.name)||v.formatter.register(Y.name,Y.format)})}return u.getParam("style_formats_merge",!1,"boolean")?pO.concat(A):A}).getOr(pO)}function g_(u,h,v){var w={type:"formatter",isSelected:h(u.format),getStylePreview:v(u.format)};return ee(u,w)}function DD(u,h,v,w){var A=function(P){return nn(P,function(H){var Y,X,oe,ue,de,ye=ra(H);if(zo(H,"items")){var Se=A(H.items);return ee(ee(H,{type:"submenu"}),{getStyleItems:ct(Se)})}return zo(H,"format")?g_(H,v,w):1===ye.length&&Fo(ye,"title")?ee(H,{type:"separator"}):(ue={type:"formatter",format:oe="custom-"+(X=Pr((Y=H).name)?Y.name:Br(Y.title)),isSelected:v(oe),getStylePreview:w(oe)},de=ee(Y,ue),u.formatter.register(X,de),de)})};return A(h)}function Zk(u){return function(h){return!(!Kr(v=h)||1!==v.nodeType||h.contentEditable!==u&&h.getAttribute("data-mce-contenteditable")!==u);var v}}function Kk(u,h,v,w,A){return{type:u,title:h,url:v,level:w,attach:A}}function a(u){return u.innerText||u.textContent}function f(u){return u&&"A"===u.nodeName&&void 0!==(u.id||u.name)&&OD(u)}function g(u){return u&&/^(H[1-6])$/.test(u.nodeName)}function x(u){return g(u)&&OD(u)}function C(u){var h,v=u.id||Br("h");return Kk("header",a(u),"#"+v,g(h=u)?parseInt(h.nodeName.substr(1),10):0,function(){u.id=v})}function I(u){var h=u.id||u.name;return Kk("anchor",a(u)||"#"+h,"#"+h,0,Gt)}function L(u){return 0<gO(u.title).length}function z(u){return Pr(u)&&/^https?/.test(u)}function j(u){return Bn(u)&&Hn(u,function(h){return!(mi(v=h)&&v.length<=5&&Ue(v,z));var v}).isNone()}function G(){var u,h=Wx.getItem(BD);if(null===h)return{};try{u=JSON.parse(h)}catch(v){if(v instanceof SyntaxError)return console.log("Local storage "+BD+" was not valid JSON",v),{};throw v}return j(u)?u:(console.log("Local storage "+BD+" was not valid format",u),{})}function te(u){return rn(G(),u).getOr([])}function K(u,h){var v,w;z(u)&&(w=mt(rn(v=G(),h).getOr([]),function(A){return A!==u}),v[h]=[u].concat(w).slice(0,5),function(A){if(!j(A))throw new Error("Bad format for history:\n"+JSON.stringify(A));Wx.setItem(BD,JSON.stringify(A))}(v))}function ie(u){return!!u}function le(u){return On(Lv.makeMap(u,/[, ]/),ie)}function pe(u){return $.from(u.getParam("file_picker_callback")).filter(wo)}function me(u){return $.from(u).filter(Pr).getOrUndefined()}function xe(u){return{getHistory:te,addToHistory:K,getLinkInformation:function(){return!1===(h=u).getParam("typeahead_urls")?$.none():$.some({targets:cM(h.getBody()),anchorTop:me(h.getParam("anchor_top","#top")),anchorBottom:me(h.getParam("anchor_bottom","#bottom"))});var h},getValidationHandler:function(){return $.from(void 0===(v=(h=u).getParam("file_picker_validator_handler",void 0,"function"))?h.getParam("filepicker_validator_handler",void 0,"function"):v);var h,v},getUrlPicker:function(h){return v=oe=u,w=ue=h,P=$.some((A=v).getParam("file_picker_types")).filter(ie),H=$.some(A.getParam("file_browser_callback_types")).filter(ie),Y=P.or(H).map(le),X=pe(A).fold(uo,function(de){return Y.fold(Ur,function(ye){return 0<ra(ye).length&&ye})}),(Ci(X)?X?pe(v):$.none():X[w]?pe(v):$.none()).map(function(de){return function(ye){return Mv(function(Se){var Pe=qe({filetype:ue,fieldname:ye.fieldname},$.from(ye.meta).getOr({}));de.call(oe,function(Oe,Re){if(!Pr(Oe))throw new Error("Expected value to be string");if(void 0!==Re&&!Bn(Re))throw new Error("Expected meta to be a object");Se({value:Oe,meta:Re})},ye.value,Pe)})}});var v,w,A,P,H,Y,X,oe,ue}}}function Ae(u){return(Sr(Di(u,"position"),"fixed")?$.none():bo(u)).orThunk(function(){var h=it.fromTag("span");return Xr(u).bind(function(v){Qa(v,h);var w=bo(h);return rf(h),w})})}function Le(u){return Ae(u).map(Pl).getOrThunk(function(){return Ja(0,0)})}function Je(u,h){var v=u.element;qn(v,h.transitionClass),yi(v,h.fadeOutClass),qn(v,h.fadeInClass),h.onShow(u)}function pt(u,h){var v=u.element;qn(v,h.transitionClass),yi(v,h.fadeInClass),qn(v,h.fadeOutClass),h.onHide(u)}function Be(u,h,v){return Ue(u,function(w){switch(w){case"bottom":return h.bottom<=v.bottom;case"top":return h.y>=v.y}})}function je(u,h){return h.getInitialPos().map(function(v){return Gu(v.bounds.x,v.bounds.y,Qt(u),Hu(u))})}function et(u,h,v){return v.getInitialPos().bind(function(w){switch(v.clearInitialPos(),w.position){case"static":return $.some(iA.static());case"absolute":var A=Ae(u).map(Sl).getOrThunk(function(){return Sl(Da())});return $.some(iA.absolute(_c("absolute",rn(w.style,"left").map(function(P){return h.x-A.x}),rn(w.style,"top").map(function(P){return h.y-A.y}),rn(w.style,"right").map(function(P){return A.right-h.right}),rn(w.style,"bottom").map(function(P){return A.bottom-h.bottom}))));default:return $.none()}})}function Nt(u,h,v){v.setDocked(!1),Tr(["left","right","top","bottom","position"],function(w){return Lo(u.element,w)}),h.onUndocked(u)}function Kt(u,h,v,w){var A="fixed"===w.position;v.setDocked(A),$1(u.element,w),(A?h.onDocked:h.onUndocked)(u)}function Yt(u,h,v,w,A){void 0===A&&(A=!1),h.contextual.each(function(P){P.lazyContext(u).each(function(H){var Y=H.y<w.bottom&&H.bottom>w.y;Y!==v.isVisible()&&(v.setVisible(Y),A&&!Y?(Zu(u.element,[P.fadeOutClass]),P.onHide(u)):(Y?Je:pt)(u,P))})})}function dt(u,h,v){var w,A,P,H,Y,X;v.isDocked()&&(A=h,X=(w=u).element,(P=v).setDocked(!1),je(Y=w.element,H=P).bind(function(oe){return et(Y,oe,H)}).each(function(oe){oe.fold(function(){return Nt(w,A,P)},function(ue){return Kt(w,A,P,ue)},Gt)}),P.setVisible(!0),A.contextual.each(function(oe){ud(X,[oe.fadeInClass,oe.fadeOutClass,oe.transitionClass]),oe.onShow(w)}),aA(w,A,P))}function vt(u,h){return Fo(Zf.getModes(u),h)}function kt(u){var h=u.element;Xr(h).each(function(v){var w,A,P="padding-"+Zf.getModes(u)[0];Zf.isDocked(u)?(w=Qt(v),to(h,"width",w+"px"),to(v,P,Fr(A=h)+(parseInt(As(A,"margin-top"),10)||0)+(parseInt(As(A,"margin-bottom"),10)||0)+"px")):(Lo(h,"width"),Lo(v,P))})}function Wt(u,h){h?(yi(u,Yy.fadeOutClass),Zu(u,[Yy.transitionClass,Yy.fadeInClass])):(yi(u,Yy.fadeInClass),Zu(u,[Yy.fadeOutClass,Yy.transitionClass]))}function bn(u,h){var v=it.fromDom(u.getContainer());h?(qn(v,sA),yi(v,uA)):(qn(v,uA),yi(v,sA))}function Xn(u,h){function v(X){H().each(function(oe){return X(oe.element)})}function w(X){u.inline||kt(X),bn(u,Zf.isDocked(X)),X.getSystem().broadcastOn([Yg()],{}),H().each(function(oe){return oe.getSystem().broadcastOn([Yg()],{})})}var A,P=Cs(),H=h.getSink,Y=u.inline?[]:[Ss.config({channels:((A={})[VD()]={onReceive:kt},A)})];return ln([_o.config({}),Zf.config({contextual:qe({lazyContext:function(X){var oe=Fr(X.element),ue=u.inline?u.getContentAreaContainer():u.getContainer(),de=Sl(it.fromDom(ue)),ye=de.height-oe,Se=de.y+(vt(X,"top")?0:oe);return $.some(Gu(de.x,Se,de.width,ye))},onShow:function(){v(function(X){return Wt(X,!0)})},onShown:function(X){v(function(oe){return ud(oe,[Yy.transitionClass,Yy.fadeInClass])}),P.get().each(function(oe){var ue,de=X.element,ye=Dt(ue=oe);Go(ye).filter(function(Se){return!fn(ue,Se)}).filter(function(Se){return fn(Se,it.fromDom(ye.dom.body))||gn(de,Se)}).each(function(){return Vd(ue)}),P.clear()})},onHide:function(X){var ue=H;Hd(X.element).orThunk(function(){return ue().toOptional().bind(function(de){return Hd(de.element)})}).fold(P.clear,P.set),v(function(de){return Wt(de,!1)})},onHidden:function(){v(function(X){return ud(X,[Yy.transitionClass])})}},Yy),lazyViewport:function(X){var oe=Aa(),ue=u.getParam("toolbar_sticky_offset",0,"number"),de=oe.y+(vt(X,"top")?ue:0),ye=oe.height-(vt(X,"bottom")?ue:0);return Gu(oe.x,de,oe.width,ye)},modes:[h.header.getDockingMode()],onDocked:w,onUndocked:w})],Y,!0)}function vn(u){return ga("menubutton",BP,u)}function Gn(u,h){return h.getAnimationRoot.fold(function(){return u.element},function(v){return v(u)})}function kn(u){return u.dimension.property}function Vn(u,h){return u.dimension.getDimension(h)}function Nn(u,h){ud(Gn(u,h),[h.shrinkingClass,h.growingClass])}function _r(u,h){yi(u.element,h.openClass),qn(u.element,h.closedClass),to(u.element,kn(h),"0px"),_p(u.element)}function mn(u,h){yi(u.element,h.closedClass),qn(u.element,h.openClass),Lo(u.element,kn(h))}function sr(u,h,v,w){v.setCollapsed(),to(u.element,kn(h),Vn(h,u.element)),_p(u.element),Nn(u,h),_r(u,h),h.onStartShrink(u),h.onShrunk(u)}function In(u,h,v){var w=Vn(h,u.element);("0px"===w?sr:function(A,P,H,Y){var X=Y.getOrThunk(function(){return Vn(P,A.element)});H.setCollapsed(),to(A.element,kn(P),X),_p(A.element);var oe=Gn(A,P);yi(oe,P.growingClass),qn(oe,P.shrinkingClass),_r(A,P),P.onStartShrink(A)})(u,h,v,$.some(w))}function Mr(u,h,v){var w=Gn(u,h),A=Ua(w,h.shrinkingClass),P=Vn(h,u.element);mn(u,h);var H=Vn(h,u.element);(A?function(){to(u.element,kn(h),P),_p(u.element)}:function(){_r(u,h)})(),yi(w,h.shrinkingClass),qn(w,h.growingClass),mn(u,h),to(u.element,kn(h),H),v.setExpanded(),h.onStartGrow(u)}function kr(u,h,v){return!0===Ua(Gn(u,h),h.growingClass)}function Uo(u,h,v){return!0===Ua(Gn(u,h),h.shrinkingClass)}function tt(u){return"<alloy.field."+u+">"}function xt(u){return{element:function(){return u.element.dom}}}function Cn(u){return ti.getCurrent(u).bind(function(h){return vp.isGrowing(h)||vp.hasGrown(h)?ti.getCurrent(h).bind(function(v){return Yi(Fv.getSlotNames(v),function(w){return Fv.isShowing(v,w)})}):$.none()})}function cn(u){var h=it.fromHtml(u),v=Ti(h),w=yo(void 0!==h.dom.attributes?h.dom.attributes:[],function(H,Y){var X;return"class"===Y.name?H:qe(qe({},H),((X={})[Y.name]=Y.value,X))},{}),A=Array.prototype.slice.call(h.dom.classList,0),P=0===v.length?{}:{innerHtml:Ip(h)};return qe({tag:qt(h),classes:A,attributes:w},P)}function Jn(u){return ti.getCurrent(u).each(function(h){return Vd(h.element)})}function vo(u,h,v){return{within:u,extra:h,withinWidth:v}}function Ra(u,h,v){var w,A=(w=function(Y,X){var oe=v(Y);return $.some({element:Y,start:X,finish:X+oe,width:oe})},yo(u,function(Y,X){return w(X,Y.len).fold(ct(Y),function(oe){return{len:oe.finish,list:Y.list.concat([oe])}})},{len:0,list:[]}).list),P=mt(A,function(Y){return Y.finish<=h}),H=Pn(P,function(Y,X){return Y+X.width},0);return{within:P,extra:A.slice(P.length),withinWidth:H}}function Ro(u){return nn(u,function(h){return h.element})}function fo(u,h){var v=nn(h,function(w){return jc(w)});wm.setGroups(u,v)}function Gi(u,h,v){var w,A,P,H,Y,X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne,We,Te,Ve,Qe,lt,Ft=h.builtGroups.get();0!==Ft.length&&(w=mo(u,h,"primary"),A=nu.getCoupled(u,"overflowGroup"),to(w.element,"visibility","hidden"),H=sn(P=Ft.concat([A]),function(Tt){return Hd(Tt.element).bind(function(Ut){return Tt.getSystem().getByDom(Ut).toOptional()})}),v([]),fo(w,P),Y=Qt(w.element),oe=Y,ue=h.builtGroups.get(),ye=A,Ve=(Te=(0===(Se=Ra(ue,oe,de=function(Tt){return Qt(Tt.element)})).extra.length?$.some(Se):$.none()).getOrThunk(function(){return Ra(ue,oe-de(ye),de)})).within,lt=Te.withinWidth,0===(X=1===(Qe=Te.extra).length&&Qe[0].width<=de(ye)?(We=lt,vo(Ro(Ve.concat(Qe)),[],We)):1<=Qe.length?(Oe=Qe,Re=ye,Ne=lt,vo(Ro(Ve).concat([Re]),Ro(Oe),Ne)):(Pe=lt,vo(Ro(Ve),[],Pe))).extra.length?(Eo.remove(w,A),v([])):(fo(w,X.within),v(X.extra)),Lo(w.element,"visibility"),_p(w.element),H.each(_o.focus))}function ou(u,h){var v=nu.getCoupled(u,"toolbarSandbox");ai.isOpen(v)?ai.close(v):ai.open(v,h.toolbar())}function Al(u,h,v,w){var A=v.getBounds.map(function(H){return H()}),P=v.lazySink(u).getOrDie();jl.positionWithinBounds(P,h,{anchor:{type:"hotspot",hotspot:u,layouts:w,overrides:{maxWidthFunction:pA()}}},A)}function pc(u,h,v,w,A){wm.setGroups(h,A),Al(u,h,v,w),Ei.on(u)}function ml(u){return nn(u,function(h){return jc(h)})}function Oc(u,h,v){Gi(u,v,function(w){v.overflowGroups.set(w),h.getOpt(u).each(function(A){pS.setGroups(A,ml(w))})})}function zv(u,h){ii(u,h,"overflow-button").bind(function(){return ii(u,h,"overflow")}).each(function(v){tA(u,h),vp.toggleGrow(v)})}function ah(u){var h=u.title.fold(function(){return{}},function(v){return{attributes:{title:v}}});return{dom:qe({tag:"div",classes:["tox-toolbar__group"]},h),components:[fM.parts.items({})],items:u.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:jn([pi.config({}),_o.config({})])}}function gg(u){return fM.sketch(ah(u))}function mp(u,h){var v=ja(function(w){var A=nn(u.initGroups,gg);wm.setGroups(w,A)});return jn([mC(u.providers.isDisabled),Ls(),no.config({mode:h,onEscape:u.onEscape,selector:".tox-toolbar__group"}),tr("toolbar-events",[v])])}function hb(u){var h=u.cyclicKeying?"cyclic":"acyclic";return{uid:u.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":ah({title:$.none(),items:[]}),"overflow-button":i_({name:"more",icon:$.some("more-drawer"),disabled:!1,tooltip:$.some("More..."),primary:!1,borderless:!1},$.none(),u.providers)},splitToolbarBehaviours:mp(u,h)}}function pb(u){var h=u.cyclicKeying?"cyclic":"acyclic";return wm.sketch({uid:u.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(u.type===Gf.scrolling?["tox-toolbar--scrolling"]:[])},components:[wm.parts.groups({})],toolbarBehaviours:mp(u,h)})}function $k(u){return"string"==typeof u?u.split(" "):u}function AD(u,h){var v=qe(qe({},GD),h.menus),w=0<ra(h.menus).length,A=mt($k(void 0===h.menubar||!0===h.menubar?"file edit view insert format tools table help":!1===h.menubar?"":h.menubar),function(P){var H=hr(GD,P);return w?H||rn(h.menus,P).exists(function(Y){return hr(Y,"items")}):H});return mt(nn(A,function(P){var H=v[P],Y={title:H.title,items:$k(H.items)},X=h,oe=u.getParam("removed_menuitems","").split(/[ ,]/);return{text:Y.title,getItems:function(){return dr(Y.items,function(ue){var de=ue.toLowerCase();return 0===de.trim().length||Ir(oe,function(ye){return ye===de})?[]:"separator"===de||"|"===de?[{type:"separator"}]:X.menuItems[de]?[X.menuItems[de]]:[]})}}}),function(P){return 0<P.getItems().length&&Ir(P.getItems(),function(H){return"separator"!==H.type})})}function Jk(u){function h(){u._skinLoaded=!0,u.fire("SkinLoaded")}return function(){u.initialized?h():u.on("init",h)}}function lM(u,h,v){return new jb(function(w,A){v.load(h,w,A),u.on("remove",function(){return v.unload(h)})})}function Qk(u,h){var v,w,A,P,H,X,oe,ue,de=(A=(v=h).getParam("skin"),P=v.getParam("skin_url"),!1!==A&&(w=A||"oxide",P=P?v.documentBaseURI.toAbsolute(P):ok.baseURL+"/skins/ui/"+w),P);de&&h.contentCSS.push(de+(u?"/content.inline":"/content")+".min.css"),!1===h.getParam("skin")==0&&Pr(de)?jb.all([lM(h,de+"/skin.min.css",h.ui.styleSheetLoader),(X=h,oe=de,ue=it.fromDom(X.getElement()),Bl(ue).isSome()?lM(X,oe+"/skin.shadowdom.min.css",bv.DOM.styleSheetLoader):jb.resolve())]).then(Jk(h),(H=h,function(){return H.fire("SkinLoadError",{message:"Skin could not be loaded"})})):Jk(h)()}function m_(u,h){return function(v){function w(){v.setActive(u.formatter.match(h));var P=u.formatter.formatChanged(h,v.setActive);A.set(P)}var A=Dh();return u.initialized?w():u.once("init",w),function(){u.off("init",w),A.clear()}}}function v_(u,h,v){return function(w){function A(){return v(w)}function P(){v(w),u.on(h,A)}return u.initialized?P():u.once("init",P),function(){u.off("init",P),u.off(h,A)}}}function ID(u){return function(h){return function(){u.undoManager.transact(function(){u.focus(),u.execCommand("mceToggleFormat",!1,h.format)})}}}function mg(u,h){return function(){return u.execCommand(h)}}function B1(u,h,v){var w,A,P,H=v.dataset;return{items:(w=h,A=v,P=function(ue,de,ye){var Se="formatter"===ue.type&&A.isInvalid(ue);return 0===de?Se?[]:X(ue,de,!1,ye).toArray():X(ue,de,Se,ye).toArray()},{validateItems:oe,getFetch:function(ue,de){return function(ye,Se){Se(C1(oe(de()),ug.CLOSE_ON_EXECUTE,ue,!1))}}}),getStyleItems:"basic"===H.type?function(){return nn(H.data,function(ue){return g_(ue,v.isSelectedFor,v.getPreviewFor)})}:H.getData};function X(ue,de,ye,Se){var Pe=w.shared.providers.translate(ue.title);if("separator"===ue.type)return $.some({type:"separator",text:Pe});if("submenu"!==ue.type)return $.some(qe({type:"togglemenuitem",text:Pe,icon:ue.icon,active:ue.isSelected(Se),disabled:ye,onAction:A.onAction(ue)},ue.getStylePreview().fold(function(){return{}},function(Re){return{meta:{style:Re}}})));var Oe=dr(ue.getStyleItems(),function(Re){return P(Re,de,Se)});return 0===de&&Oe.length<=0?$.none():$.some({type:"nestedmenuitem",text:Pe,disabled:Oe.length<=0,getSubmenuItems:function(){return dr(ue.getStyleItems(),function(Re){return P(Re,de,Se)})}})}function oe(ue){var de=A.getCurrentValue(),ye=A.shouldHide?0:1;return dr(ue,function(Se){return P(Se,ye,de)})}}function sS(u,h,v){var w=B1(0,h,v),A=w.items,P=w.getStyleItems,H=v_(u,"NodeChange",function(Y){var X=Y.getComponent();v.updateText(X)});return o_({text:v.icon.isSome()?$.none():v.text,icon:v.icon,tooltip:$.from(v.tooltip),role:$.none(),fetch:A.getFetch(h,P),onSetup:H,getApi:function(Y){return{getComponent:ct(Y)}},columns:1,presets:"normal",classes:v.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",h.shared)}function OD(u){return function(h){for(;h=h.parentNode;){var v=h.contentEditable;if(v&&"inherit"!==v)return fS(h)}return!1}(u)&&!dS(u)}function eA(u,h){function v(ue){return $p(u)}function w(ue,de){return function(ye,Se){return ii(ye,u,Se).map(function(Pe){return ue(Pe,Se)}).getOr(de)}}function A(ue,de){return"true"!==Wa(ue.element,"aria-hidden")}var P,H=w(A,!1),Y=w(function(ue,de){var ye;A(ue)&&(to(ye=ue.element,"display","none"),Gr(ye,"aria-hidden","true"),vr(ue,wb(),{name:de,visible:!1}))}),X=(P=Y,function(ue,de){Tr(de,function(ye){return P(ue,ye)})}),oe=w(function(ue,de){var ye;A(ue)||(Lo(ye=ue.element,"display"),ls(ye,"aria-hidden"),vr(ue,wb(),{name:de,visible:!0}))});return{uid:u.uid,dom:u.dom,components:h,behaviours:op(u.slotBehaviours),apis:{getSlotNames:v,getSlot:function(ue,de){return ii(ue,u,de)},isShowing:H,hideSlot:Y,hideAllSlots:function(ue){return X(ue,v())},showSlot:oe}}}function tA(u,h){ii(u,h,"overflow").each(function(v){Gi(u,h,function(w){var A=nn(w,function(P){return jc(P)});wm.setGroups(v,A)}),ii(u,h,"overflow-button").each(function(w){vp.hasGrown(v)&&Ei.on(w)}),vp.refresh(v)})}var eT,uS,lS,nA="data-value",tT=function(u,h,v,w){return nn(v,function(A){return P1(A)?{type:"togglemenuitem",text:A.text,value:A.value,active:A.value===w,onAction:function(){or.setValue(u,A.value),vr(u,eh,{name:h}),_o.focus(u)}}:{type:"nestedmenuitem",text:A.text,getSubmenuItems:function(){return tT(u,h,A.items,w)}}})},rA=function(u,h){return sn(u,function(v){return P1(v)?ki(v.value===h,v):rA(v.items,h)})},OP=kc({name:"HtmlSelect",configFields:[pn("options"),Es("selectBehaviours",[_o,or]),St("selectClasses",[]),St("selectAttributes",{}),vi("data")],factory:function(u,h){var v=nn(u.options,function(A){return{dom:{tag:"option",value:A.value,innerHtml:A.text}}}),w=u.data.map(function(A){return Hr("initialValue",A)}).getOr({});return{uid:u.uid,dom:{tag:"select",classes:u.selectClasses,attributes:u.selectAttributes},components:v,behaviours:tu(u.selectBehaviours,[_o.config({}),or.config({store:qe({mode:"manual",getValue:function(A){return Vc(A.element)},setValue:function(A,P){Yi(u.options,function(H){return H.value===P}).isSome()&&rc(A.element,P)}},w)})])}}}),uO=Object.freeze({__proto__:null,events:function(u,h){var v=u.stream.streams.setup(u,h);return ia([on(u.event,v),Nd(function(){return h.cancel()})].concat(u.cancelEvent.map(function(w){return[on(w,function(){return h.cancel()})]}).getOr([])))}}),lO=Object.freeze({__proto__:null,throttle:jy,init:function(u){return u.stream.streams.state(u)}}),oA=_a({fields:[tc("stream",es("mode",{throttle:[pn("delay"),St("stopEvent",!0),ea("streams",{setup:function(u,h){var v=u.stream,w=I0(u.onStream,v.delay);return h.setTimer(w),function(A,P){w.throttle(A,P),v.stopEvent&&P.stop()}},state:jy})]})),St("event","input"),vi("cancelEvent"),Ef("onStream")],name:"streaming",active:uO,state:lO}),xm=function(u){h_(u,function(h,v){return h.setSelectionRange(v.length,v.length)})},ED=ct("alloy.typeahead.itemexecute"),_m=ct([vi("lazySink"),pn("fetch"),St("minChars",5),St("responseTime",1e3),ei("onOpen"),St("getHotspot",$.some),St("getAnchorOverrides",ct({})),St("layouts",$.none()),St("eventOrder",{}),Tp("model",{},[St("getDisplayText",function(u){return void 0!==u.meta&&void 0!==u.meta.text?u.meta.text:u.value}),St("selectsOver",!0),St("populateFromBrowse",!0)]),ei("onSetValue"),Iu("onExecute"),ei("onItemExecute"),St("inputClasses",[]),St("inputAttributes",{}),St("inputStyles",{}),St("matchWidth",!0),St("useMinWidth",!1),St("dismissOnBlur",!0),ko(["openClass"]),vi("initialData"),Es("typeaheadBehaviours",[_o,or,oA,no,Ei,nu]),fr("previewing",function(){return Nr(!0)})].concat(g1()).concat(zh())),EP=ct([Xd({schema:[Hl()],name:"menu",overrides:function(u){return{fakeFocus:!0,onHighlight:function(h,v){u.previewing.get()?h.getSystem().getByUid(u.uid).each(function(w){(function(A,P,H){if(A.selectsOver){var Y=or.getValue(P),X=A.getDisplayText(Y),oe=or.getValue(H);return 0===A.getDisplayText(oe).indexOf(X)?$.some(function(){var ue;L1(0,P,H),ue=X.length,h_(P,function(de,ye){return de.setSelectionRange(ue,ye.length)})}):$.none()}return $.none()})(u.model,w,v).fold(function(){return fi.dehighlight(h,v)},function(A){return A()})}):h.getSystem().getByUid(u.uid).each(function(w){u.model.populateFromBrowse&&L1(0,w,v)}),u.previewing.set(!1)},onExecute:function(h,v){return h.getSystem().getByUid(u.uid).toOptional().map(function(w){return vr(w,ED(),{item:v}),!0})},onHover:function(h,v){u.previewing.set(!1),h.getSystem().getByUid(u.uid).each(function(w){u.model.populateFromBrowse&&L1(0,w,v)})}}}})]),cO=Ul({name:"Typeahead",configFields:_m(),partFields:EP(),factory:function(u,h,v,w){function A(X,oe,ue){u.previewing.set(!1);var de=nu.getCoupled(X,"sandbox");ai.isOpen(de)?ti.getCurrent(de).each(function(ye){fi.getHighlighted(ye).fold(function(){ue(ye)},function(){xa(de,ye.element,"keydown",oe)})}):K0(u,P(X),X,de,w,function(ye){ti.getCurrent(ye).each(ue)},Cd.HighlightFirst).get(Gt)}function P(X){return function(oe){return oe.map(function(ue){var de=dr(un(ue.menus),function(ye){return mt(ye.items,function(Se){return"item"===Se.type})});return or.getState(X).update(nn(de,function(ye){return ye.data})),ue})}}var H=um(u),Y=[_o.config({}),or.config({onSetValue:u.onSetValue,store:qe({mode:"dataset",getDataKey:function(X){return Vc(X.element)},getFallbackEntry:function(X){return{value:X,meta:{}}},setValue:function(X,oe){rc(X.element,u.model.getDisplayText(oe))}},u.initialData.map(function(X){return Hr("initialValue",X)}).getOr({}))}),oA.config({stream:{mode:"throttle",delay:u.responseTime,stopEvent:!1},onStream:function(X,oe){var ue,de=nu.getCoupled(X,"sandbox");_o.isFocused(X)&&Vc(X.element).length>=u.minChars&&(ue=ti.getCurrent(de).bind(function(ye){return fi.getHighlighted(ye).map(or.getValue)}),u.previewing.set(!0),K0(u,P(X),X,de,w,function(ye){ti.getCurrent(de).each(function(Se){ue.fold(function(){u.model.selectsOver&&fi.highlightFirst(Se)},function(Pe){fi.highlightBy(Se,function(Oe){return or.getValue(Oe).value===Pe.value}),fi.getHighlighted(Se).orThunk(function(){return fi.highlightFirst(Se),$.none()})})})},Cd.HighlightFirst).get(Gt))},cancelEvent:Bp()}),no.config({mode:"special",onDown:function(X,oe){return A(X,oe,fi.highlightFirst),$.some(!0)},onEscape:function(X){var oe=nu.getCoupled(X,"sandbox");return ai.isOpen(oe)?(ai.close(oe),$.some(!0)):$.none()},onUp:function(X,oe){return A(X,oe,fi.highlightLast),$.some(!0)},onEnter:function(X){var oe=nu.getCoupled(X,"sandbox"),ue=ai.isOpen(oe);if(ue&&!u.previewing.get())return ti.getCurrent(oe).bind(function(ye){return fi.getHighlighted(ye)}).map(function(ye){return vr(X,ED(),{item:ye}),!0});var de=or.getValue(X);return Rr(X,Bp()),u.onExecute(oe,X,de),ue&&ai.close(oe),$.some(!0)}}),Ei.config({toggleClass:u.markers.openClass,aria:{mode:"expanded"}}),nu.config({others:{sandbox:function(X){return $x(u,X,{onOpen:function(){return Ei.on(X)},onClose:function(){return Ei.off(X)}})}}}),tr("typeaheadevents",[bh(function(X){m1(u,P(X),X,w,Gt,Cd.HighlightFirst).get(Gt)}),on(ED(),function(X,oe){var ue=nu.getCoupled(X,"sandbox");L1(0,X,oe.event.item),Rr(X,Bp()),u.onItemExecute(X,ue,oe.event.item,or.getValue(X)),ai.close(ue),xm(X)})].concat(u.dismissOnBlur?[on(mh(),function(X){var oe=nu.getCoupled(X,"sandbox");Hd(oe.element).isNone()&&ai.close(oe)})]:[]))];return{uid:u.uid,dom:JT(ee(u,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:qe(qe({},H),tu(u.typeaheadBehaviours,Y)),eventOrder:u.eventOrder}}}),cS=function(u){return qe(qe({},u),{toCached:function(){return cS(u.toCached())},bindFuture:function(h){return cS(u.bind(function(v){return v.fold(function(w){return fg(Vo.error(w))},function(w){return h(w)})}))},bindResult:function(h){return cS(u.map(function(v){return v.bind(h)}))},mapResult:function(h){return cS(u.map(function(v){return v.map(h)}))},mapError:function(h){return cS(u.map(function(v){return v.mapError(h)}))},foldResult:function(h,v){return u.map(function(w){return w.fold(h,v)})},withTimeout:function(h,v){return cS(Mv(function(w){var A=!1,P=setTimeout(function(){A=!0,w(Vo.error(v()))},h);u.get(function(H){A||(clearTimeout(P),w(H))})}))}})},PP={type:"separator"},RD=Br("aria-invalid"),fO={bar:wu(function(u,h){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:nn(u.items,h.shared.interpreter)}}),collection:wu(function(u,h){return P=h.shared.providers,X=(A=u).label.map(function(de){return Qd(de,P)}),oe=v(function(de,ye,Se,Pe){ye.stop(),P.isDisabled()||vr(de,cg,{name:A.name,value:Pe})}),ue=[on(Ri(),v(function(de,ye,Se){Vd(Se)})),on(oc(),oe),on(yh(),oe),on(Rd(),v(function(de,ye,Se){Ya(de.element,"."+R0).each(function(Pe){yi(Pe,R0)}),qn(Se,R0)})),on(Lp(),v(function(de){Ya(de.element,"."+R0).each(function(ye){yi(ye,R0)})})),bh(v(function(de,ye,Se,Pe){vr(de,cg,{name:A.name,value:Pe})}))],j0(X,_i.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==A.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:_n},behaviours:jn([Vr.config({disabled:P.isDisabled,onDisabled:function(de){w(de,function(ye){qn(ye,"tox-collection__item--state-disabled"),Gr(ye,"aria-disabled",!0)})},onEnabled:function(de){w(de,function(ye){yi(ye,"tox-collection__item--state-disabled"),ls(ye,"aria-disabled")})}}),Ls(),Eo.config({}),or.config({store:{mode:"memory",initialValue:[]},onSetValue:function(de,ye){var Se=de,Pe=nn(ye,function(Re){var Ne=cp.translate(Re.text),We=1===A.columns?'<div class="tox-collection__item-label">'+Ne+"</div>":"",Te='<div class="tox-collection__item-icon">'+Re.icon+"</div>",Ve={_:" "," - ":" ","-":" "},Qe=Ne.replace(/\_| \- |\-/g,function(lt){return Ve[lt]});return'<div class="tox-collection__item'+(P.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+hk.encodeAllRaw(Re.value)+'" title="'+Qe+'" aria-label="'+Qe+'">'+Te+We+"</div>"}),Oe=nn("auto"!==A.columns&&1<A.columns?na(Pe,A.columns):[Pe],function(Re){return'<div class="tox-collection__group">'+Re.join("")+"</div>"});Jy(Se.element,Oe.join("")),"auto"===A.columns&&sw(de,5,"tox-collection__item").each(function(Re){no.setGridSize(de,Re.numRows,Re.numColumns)}),Rr(de,hc)}}),pi.config({}),no.config(1===(Y=A.columns)?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===Y?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:"."+cw}}),tr("collection-events",ue)]),eventOrder:((H={})[af()]=["disabling","alloy.base.behaviour","collection-events"],H)}),["tox-form__group--collection"],[]);function v(de){return function(ye,Se){fd(Se.event.target,"[data-collection-item-value]").each(function(Pe){de(ye,Se,Pe,Wa(Pe,"data-collection-item-value"))})}}function w(de,ye){return nn(Gl(de.element,".tox-collection__item"),ye)}var A,P,H,Y,X,oe,ue}),alertbanner:wu(function(u,h){return xu.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+(v=u).level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Xl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Z_(v.icon,(w=h.shared.providers).icons),attributes:{title:w.translate(v.iconTooltip)}},action:function(A){vr(A,cg,{name:"alert-banner",value:v.url})},buttonBehaviours:jn([PM()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:w.translate(v.text)}}]});var v,w}),input:wu(function(u,h){return w=h.shared.providers,R1({name:(v=u).name,multiline:!1,label:v.label,inputMode:v.inputMode,placeholder:v.placeholder,flex:!1,disabled:v.disabled,classname:"tox-textfield",validation:$.none(),maximized:v.maximized},w);var v,w}),textarea:wu(function(u,h){return w=h.shared.providers,R1({name:(v=u).name,multiline:!0,label:v.label,inputMode:$.none(),placeholder:v.placeholder,flex:!0,disabled:v.disabled,classname:"tox-textarea",validation:$.none(),maximized:v.maximized},w);var v,w}),label:wu(function(u,h){return A={dom:{tag:"label",innerHtml:(w=h.shared).providers.translate((v=u).label),classes:["tox-label"]}},P=nn(v.items,w.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[A].concat(P),behaviours:jn([ab(),Eo.config({}),X2($.none()),no.config({mode:"acyclic"})])};var v,w,A,P}),iframe:(eT=function(u,h){return v=u,w=h.shared.providers,H=$2&&v.sandboxed,Y=qe(qe({},v.label.map(function(oe){return{title:oe}}).getOr({})),H?{sandbox:"allow-scripts allow-same-origin"}:{}),A=H,P=Nr(""),X={getValue:function(oe){return P.get()},setValue:function(oe,ue){var de;A?Gr(oe.element,"srcdoc",ue):(Gr(oe.element,"src","javascript:''"),(de=oe.element.dom.contentWindow.document).open(),de.write(ue),de.close()),P.set(ue)}},j0(v.label.map(function(oe){return Qd(oe,w)}),_i.parts.field({factory:{sketch:function(oe){return kk({uid:oe.uid,dom:{tag:"iframe",attributes:Y},behaviours:jn([pi.config({}),_o.config({}),gp($.none(),X.getValue,X.setValue)])})}}}),["tox-form__group--stretched"],[]);var v,w,A,P,H,Y,X},function(u,h,v){var w=ee(h,{source:"dynamic"});return wu(eT)(u,w,v)}),button:wu(function(u,h){return w=h.shared.providers,A=fD((v=u).name,"custom"),j0($.none(),_i.parts.field(qe({factory:Xl},HC(v,$.some(A),w,[Wy(""),ab()]))),[],[]);var v,w,A}),checkbox:wu(function(u,h){return A=u,P=h.shared.providers,H=or.config({store:{mode:"manual",getValue:function(ue){return ue.element.dom.checked},setValue:function(ue,de){ue.element.dom.checked=de}}}),Y=_i.parts.field({factory:{sketch:_n},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:jn([ab(),Vr.config({disabled:function(){return A.disabled||P.isDisabled()}}),pi.config({}),_o.config({}),H,no.config({mode:"special",onEnter:v,onSpace:v,stopSpaceKeyup:!0}),tr("checkbox-events",[on(Ld(),function(ue,de){vr(ue,eh,{name:A.name})})])])}),X=_i.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:P.translate(A.label)},behaviours:jn([u_.config({})])}),oe=Li({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[w("checked"),w("unchecked")]}),_i.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[Y,oe.asSpec(),X],fieldBehaviours:jn([Vr.config({disabled:function(){return A.disabled||P.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(ue){_i.getField(ue).each(Vr.disable)},onEnabled:function(ue){_i.getField(ue).each(Vr.enable)}}),Ls()])});function v(ue){return ue.element.dom.click(),$.some(!0)}function w(ue){return Wf("checked"===ue?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+ue]},P.icons)}var A,P,H,Y,X,oe}),colorinput:wu(function(u,h){return w=u,P=h.colorinput,X=_i.parts.field({factory:zy,inputClasses:["tox-textfield"],onSetValue:function(de){return kv.run(de).get(Gt)},inputBehaviours:jn([Vr.config({disabled:(A=h.shared).providers.isDisabled}),Ls(),pi.config({}),kv.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(de){return Xr(de.element)},notify:{onValid:function(de){var ye=or.getValue(de);vr(de,Qw,{color:ye})}},validator:{validateOnLoad:!1,validate:function(de){var ye=or.getValue(de);if(0===ye.length)return fg(Vo.value(!0));var Se=it.fromTag("span");to(Se,"background-color",ye);var Pe=Di(Se,"background-color").fold(function(){return Vo.error("blah")},function(Oe){return Vo.value(ye)});return fg(Pe)}}})]),selectOnFocus:!1}),oe=w.label.map(function(de){return Qd(de,A.providers)}),ue=Li((H={dom:{tag:"span",attributes:{"aria-label":A.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[dl,Ou,Ju]},onLtr:function(){return[Ou,dl,Ju]}},components:[],fetch:xC(P.getColors(),P.hasCustomColors()),columns:P.getColorCols(),presets:"color",onItemAction:function(de,ye){ue.getOpt(de).each(function(Se){"custom"===ye?P.colorPicker(function(Pe){Pe.fold(function(){return Rr(Se,eS)},function(Oe){v(Se,Oe),XT(Oe)})},"#ffffff"):v(Se,"remove"===ye?"":ye)})}},ih.sketch({dom:H.dom,components:H.components,toggleClass:"mce-active",dropdownBehaviours:jn([W0((Y=A).providers.isDisabled),Ls(),u_.config({}),pi.config({})]),layouts:H.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:Y.getSink,fetch:function(de){return Mv(function(ye){return H.fetch(ye)}).map(function(ye){return $.from(SC(ee(By(Br("menu-value"),ye,function(Se){H.onItemAction(de,Se)},H.columns,H.presets,ug.CLOSE_ON_EXECUTE,uo,Y.providers),{movement:Ux(H.columns,H.presets)})))})},parts:{menu:eC(0,0,H.presets)}}))),_i.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:oe.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[X,ue.asSpec()]}]),fieldBehaviours:jn([tr("form-field-events",[on(Qw,function(de,ye){ue.getOpt(de).each(function(Se){to(Se.element,"background-color",ye.event.color)}),vr(de,eh,{name:w.name})}),on(YC,function(de,ye){_i.getField(de).each(function(Se){or.setValue(Se,ye.event.value),ti.getCurrent(de).each(_o.focus)})}),on(eS,function(de,ye){_i.getField(de).each(function(Se){ti.getCurrent(de).each(_o.focus)})})])])});function v(de,ye){vr(de,YC,{value:ye})}var w,A,P,H,Y,X,oe,ue}),colorpicker:wu(function(u){var h=Li(function oD(u,h){return kc({name:"ColourPicker",configFields:[pn("dom"),St("onValidHex",Gt),St("onInvalidHex",Gt)],factory:function(v){function w(lt,Ft,Tt){Te.getOpt(lt).each(function(Ut){Re.setHue(Ut,Tt)})}function A(lt,Ft){Ve.getOpt(lt).each(function(Tt){Oe.updateHex(Tt,Ft)})}function P(lt,Ft,Tt,Ut){var dn=Tt,Jt=F0(Ft);Ne.paletteRgba.set(Jt),Ne.paletteHue.set(dn),Tr(Ut,function(yn){yn(lt,Ft,Tt)})}var H,Y,X,oe,ue,de,ye,Se,Pe,Oe=function Mk(u,h,v,w){function A(X,oe,ue,de,ye){var Se,Pe,Oe=u(D1+"range"),Re=[_i.parts.label({dom:{tag:"label",innerHtml:ue,attributes:{"aria-label":de}}}),_i.parts.field({data:ye,factory:zy,inputAttributes:qe({type:"text"},"hex"===oe?{"aria-live":"polite"}:{}),inputClasses:[h("textfield")],inputBehaviours:jn([(Se=oe,Pe=X,kv.config({invalidClass:h("invalid"),notify:{onValidate:function(We){vr(We,xD,{type:Se})},onValid:function(We){vr(We,QC,{type:Se,value:or.getValue(We)})},onInvalid:function(We){vr(We,hg,{type:Se,value:or.getValue(We)})}},validator:{validate:function(We){var Te=or.getValue(We),Ve=Pe(Te)?Vo.value(!0):Vo.error(u("aria.input.invalid"));return fg(Ve)},validateOnLoad:!1}})),pi.config({})]),onSetValue:function(We){kv.isInvalid(We)&&kv.run(We).get(Gt)}})],Ne="hex"!==oe?[_i.parts["aria-descriptor"]({text:Oe})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:Re.concat(Ne)}}function P(X,oe){or.setValue(X,{red:oe.red,green:oe.green,blue:oe.blue})}function H(X,oe){Y.getOpt(X).each(function(ue){to(ue.element,"background-color","#"+oe.value)})}var Y=Li({dom:{tag:"div",classes:[h("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return kc({factory:function(){function X(Te){return Pe[Te].get()}function oe(Te,Ve){Pe[Te].set(Ve)}function ue(Te,Ve){var Qe=Ve.event;"hex"!==Qe.type?oe(Qe.type,$.none()):w(Te)}function de(Te,Ve){var Qe,lt,Tt,Ut=Ve.event;"hex"===Ut.type?function(dn,Jt){v(dn);var yn=ik(Jt);oe("hex",$.some(Jt));var En=F0(yn);P(dn,En),Se(En),vr(dn,k1,{hex:yn}),H(dn,yn)}(Te,Ut.value):(Qe=Te,lt=Ut.type,Tt=parseInt(Ut.value,10),oe(lt,$.some(Tt)),X("red").bind(function(dn){return X("green").bind(function(Jt){return X("blue").map(function(yn){return dc(dn,Jt,yn,1)})})}).each(function(dn){var Jt,yn,En=(Jt=Qe,yn=s1(dn),qf.getField(Jt,"hex").each(function(pr){_o.isFocused(pr)||or.setValue(Jt,{hex:yn.value})}),yn);vr(Qe,k1,{hex:En}),H(Qe,En)}))}function ye(Te){return{label:u(D1+Te+".label"),description:u(D1+Te+".description")}}function Se(Te){var Qe=Te.green,lt=Te.blue;oe("red",$.some(Te.red)),oe("green",$.some(Qe)),oe("blue",$.some(lt))}var Pe={red:Nr($.some(255)),green:Nr($.some(255)),blue:Nr($.some(255)),hex:Nr($.some("ffffff"))},Oe=ye("red"),Re=ye("green"),Ne=ye("blue"),We=ye("hex");return ee(qf.sketch(function(Te){return{dom:{tag:"form",classes:[h("rgb-form")],attributes:{"aria-label":u("aria.color.picker")}},components:[Te.field("red",_i.sketch(A(Uf,"red",Oe.label,Oe.description,255))),Te.field("green",_i.sketch(A(Uf,"green",Re.label,Re.description,255))),Te.field("blue",_i.sketch(A(Uf,"blue",Ne.label,Ne.description,255))),Te.field("hex",_i.sketch(A(ak,"hex",We.label,We.description,"ffffff"))),Y.asSpec()],formBehaviours:jn([kv.config({invalidClass:h("form-invalid")}),tr("rgb-form-events",[on(QC,de),on(hg,ue),on(xD,ue)])])}}),{apis:{updateHex:function(Te,Ve){var Qe;or.setValue(Te,{hex:Ve.value}),P(Te,Qe=F0(Ve)),Se(Qe),H(Te,Ve)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(X,oe,ue){X.updateHex(oe,ue)}},extraApis:{}})}(u,h,v.onValidHex,v.onInvalidHex),Re=(Se=ru.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[(ye=h)("sv-palette-spectrum")]}}),Pe=ru.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[ye("sv-palette-thumb")],innerHtml:"<div class="+ye("sv-palette-inner-thumb")+' role="presentation"></div>'}}),kc({factory:function(lt){var Ft=ct({x:0,y:0}),Tt=jn([ti.config({find:$.some}),_o.config({})]);return ru.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[ye("sv-palette")]},model:{mode:"xy",getInitialValue:Ft},rounded:!1,components:[Se,Pe],onChange:function(Ut,dn,Jt){vr(Ut,rS,{value:Jt})},onInit:function(Ut,dn,Jt,yn){Qe(Jt.element.dom,H0(xw))},sliderBehaviours:Tt})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(lt,Ft,Tt){var Ut=Tt;Qe(Ft.components()[0].element.dom,H0(yw(zx(Ut,100,100))))},setThumb:function(lt,Ft,Tt){var Ut=Ft,dn=Fx(F0(Tt));ru.setValue(Ut,{x:dn.saturation,y:100-dn.value})}},extraApis:{}})),Ne={paletteRgba:Nr(xw),paletteHue:Nr(0)},We=Li((Y=ru.parts.spectrum({dom:{tag:"div",classes:[(H=h)("hue-slider-spectrum")],attributes:{role:"presentation"}}}),X=ru.parts.thumb({dom:{tag:"div",classes:[H("hue-slider-thumb")],attributes:{role:"presentation"}}}),ru.sketch({dom:{tag:"div",classes:[H("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:ct({y:0})},components:[Y,X],sliderBehaviours:jn([_o.config({})]),onChange:function(lt,Ft,Tt){vr(lt,T1,{value:Tt})}}))),Te=Li(Re.sketch({})),Ve=Li(Oe.sketch({}));function Qe(lt,Ft){var Tt,Ut,dn=lt.width,Jt=lt.height,yn=lt.getContext("2d");null!==yn&&(yn.fillStyle=Ft,yn.fillRect(0,0,dn,Jt),(Tt=yn.createLinearGradient(0,0,dn,0)).addColorStop(0,"rgba(255,255,255,1)"),Tt.addColorStop(1,"rgba(255,255,255,0)"),yn.fillStyle=Tt,yn.fillRect(0,0,dn,Jt),(Ut=yn.createLinearGradient(0,0,0,Jt)).addColorStop(0,"rgba(0,0,0,0)"),Ut.addColorStop(1,"rgba(0,0,0,1)"),yn.fillStyle=Ut,yn.fillRect(0,0,dn,Jt))}return{uid:v.uid,dom:v.dom,components:[Te.asSpec(),We.asSpec(),Ve.asSpec()],behaviours:jn([tr("colour-picker-events",[on(k1,(de=[w,function(lt,Ft,Tt){We.getOpt(lt).each(function(Ut){ru.setValue(Ut,{y:100-Tt/360*100})})},function(lt,Ft){Te.getOpt(lt).each(function(Tt){Re.setThumb(Tt,Ft)})}],function(lt,Ft){var Tt=Ft.event.hex;P(lt,Tt,Fx(F0(Tt)).hue,de)})),on(rS,(ue=[A],function(lt,Ft){var Tt=Ft.event.value,Ut=Ne.paletteHue.get();P(lt,hC(zx(Ut,Tt.x,100-Tt.y)),Ut,ue)})),on(T1,(oe=[w,A],function(lt,Ft){var Tt=(100-Ft.event.value.y)/100*360,Ut=Fx(Ne.paletteRgba.get());P(lt,hC(zx(Tt,Ut.saturation,Ut.value)),Tt,oe)}))]),ti.config({find:function(lt){return Ve.getOpt(lt)}}),no.config({mode:"acyclic"})])}}})}(r_,function(v){return"tox-"+v}).sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(v){vr(v,cg,{name:"hex-valid",value:!0})},onInvalidHex:function(v){vr(v,cg,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[h.asSpec()],behaviours:jn([or.config({store:{mode:"manual",getValue:function(v){var w=h.get(v);return ti.getCurrent(w).bind(function(A){return or.getValue(A).hex}).map(function(A){return"#"+A}).getOr("")},setValue:function(v,w){var A=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(w),P=h.get(v);ti.getCurrent(P).fold(function(){console.log("Can not find form")},function(H){or.setValue(H,{hex:$.from(A[1]).getOr("")}),qf.getField(H,"hex").each(function(Y){Rr(Y,hs())})})}}}),ab()])}}),dropzone:wu(function(u,h){return function nh(u,h){function v(X,oe){oe.stop()}function w(X){return function(oe,ue){Tr(X,function(de){de(oe,ue)})}}function A(X,oe){Vr.isDisabled(X)||H(X,oe.event.raw.dataTransfer.files)}function P(X,oe){H(X,oe.event.raw.target.files)}function H(X,oe){var ue,de;or.setValue(X,(ue=oe,de=Lv.explode(h.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),mt(lh(ue),function(ye){return Ir(de,function(Se){return Ke(ye.name.toLowerCase(),"."+Se.toLowerCase())})}))),vr(X,eh,{name:u.name})}var Y=Li({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:jn([tr("input-file-events",[hh(oc()),hh(yh())])])});return j0(u.label.map(function(X){return Qd(X,h)}),_i.parts.field({factory:{sketch:function(X){return{uid:X.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:jn([Wy([]),ab(),Vr.config({}),Ei.config({toggleClass:"dragenter",toggleOnExecute:!1}),tr("dropzone-events",[on("dragenter",w([v,Ei.toggle])),on("dragleave",w([v,Ei.toggle])),on("dragover",v),on("drop",w([v,A])),on(Ld(),P)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:h.translate("Drop an image here")}},Xl.sketch({dom:{tag:"button",innerHtml:h.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Y.asSpec()],action:function(oe){Y.get(oe).element.dom.click()},buttonBehaviours:jn([pi.config({}),W0(h.isDisabled),Ls()])})]}]}}}}),["tox-form__group--stretched"],[])}(u,h.shared.providers)}),grid:wu(function(u,h){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+u.columns+"col"]},components:nn(u.items,h.shared.interpreter)}}),listbox:wu(function(u,h){return A=(w=h).shared.providers,P=ca((v=u).items).filter(P1),H=v.label.map(function(X){return Qd(X,A)}),Y={dom:{tag:"div",classes:["tox-listboxfield"]},components:[_i.parts.field({dom:{},factory:{sketch:function(X){return o_({uid:X.uid,text:P.map(function(oe){return oe.text}),icon:$.none(),tooltip:v.label,role:$.none(),fetch:function(oe,ue){ue(C1(tT(oe,v.name,v.items,or.getValue(oe)),ug.CLOSE_ON_EXECUTE,w,!1))},onSetup:ct(Gt),getApi:ct({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[pi.config({}),or.config({store:{mode:"manual",initialValue:P.map(function(oe){return oe.value}).getOr(""),getValue:function(oe){return Wa(oe.element,nA)},setValue:function(oe,ue){rA(v.items,ue).each(function(de){Gr(oe.element,nA,de.value),vr(oe,Xf,{text:de.text})})}}})]},"tox-listbox",w.shared)}}})]},_i.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:De([H.toArray(),[Y]]),fieldBehaviours:jn([Vr.config({disabled:ct(v.disabled),onDisabled:function(X){_i.getField(X).each(Vr.disable)},onEnabled:function(X){_i.getField(X).each(Vr.enable)}})])});var v,w,A,P,H,Y}),selectbox:wu(function(u,h){return w=h.shared.providers,A=nn((v=u).items,function(Y){return{text:w.translate(Y.text),value:Y.value}}),P=v.label.map(function(Y){return Qd(Y,w)}),H={dom:{tag:"div",classes:["tox-selectfield"]},components:De([[_i.parts.field({dom:{},selectAttributes:{size:v.size},options:A,factory:OP,selectBehaviours:jn([Vr.config({disabled:function(){return v.disabled||w.isDisabled()}}),pi.config({}),tr("selectbox-change",[on(Ld(),function(Y,X){vr(Y,eh,{name:v.name})})])])})],(1<v.size?$.none():$.some(Wf("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},w.icons))).toArray()])},_i.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:De([P.toArray(),[H]]),fieldBehaviours:jn([Vr.config({disabled:function(){return v.disabled||w.isDisabled()},onDisabled:function(Y){_i.getField(Y).each(Vr.disable)},onEnabled:function(Y){_i.getField(Y).each(Vr.enable)}}),Ls()])});var v,w,A,P,H}),sizeinput:wu(function(u,h){return GC(u,h.shared.providers)}),urlinput:wu(function(u,h){return function uM(u,h,v){function w(Ne){var We=or.getValue(Ne);v.addToHistory(We.value,u.filetype)}var A,P,H,Y,X=h.shared.providers,oe=_i.parts.field({factory:cO,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":RD,type:"url"},minChars:0,responseTime:0,fetch:function(Ne){var We,Te,Ve,Qe,lt=C1((We=u.filetype,Te=v,Ve=or.getValue(Ne),Qe=void 0!==Ve.meta.text?Ve.meta.text:Ve.value,Te.getLinkInformation().fold(function(){return[]},function(Ft){var Tt=sM(Qe,nn(Te.getHistory(We),function(Ut){return Bv(Ut,Ut)}));return"file"===We?yo([Tt,sM(Qe,iS("header",Ft.targets)),sM(Qe,De([$.from(Ft.anchorTop).map(function(Ut){return Bv("<top>",Ut)}).toArray(),iS("anchor",Ft.targets),$.from(Ft.anchorBottom).map(function(Ut){return Bv("<bottom>",Ut)}).toArray()]))],function(Ut,dn){return 0===Ut.length||0===dn.length?Ut.concat(dn):Ut.concat(PP,dn)},[]):Tt})),ug.BUBBLE_TO_SANDBOX,h,!1);return fg(lt)},getHotspot:function(Ne){return Oe.getOpt(Ne)},onSetValue:function(Ne,We){Ne.hasConfigured(kv)&&kv.run(Ne).get(Gt)},typeaheadBehaviours:jn(De([v.getValidationHandler().map(function(Ne){return kv.config({getRoot:function(We){return Xr(We.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(We,Te){de.getOpt(We).each(function(Ve){Gr(Ve.element,"title",X.translate(Te))})}},validator:{validate:function(We){var Te=or.getValue(We);return function(u){return cS(Mv(u))}(function(Ve){Ne({type:u.filetype,url:Te.value},function(Qe){var lt,Ft;"invalid"===Qe.status?(lt=Vo.error(Qe.message),Ve(lt)):(Ft=Vo.value(Qe.message),Ve(Ft))})})},validateOnLoad:!1}})}).toArray(),[Vr.config({disabled:function(){return u.disabled||X.isDisabled()}}),pi.config({}),tr("urlinput-events",De(["file"===u.filetype?[on(hs(),function(Ne){vr(Ne,eh,{name:u.name})})]:[],[on(Ld(),function(Ne){vr(Ne,eh,{name:u.name}),w(Ne)}),on(vh(),function(Ne){vr(Ne,eh,{name:u.name}),w(Ne)})]]))]])),eventOrder:((A={})[hs()]=["streaming","urlinput-events","invalidating"],A),model:{getDisplayText:function(Ne){return Ne.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:h.shared.getSink,parts:{menu:eC(0,0,"normal")},onExecute:function(Ne,We,Te){vr(We,Yf,{})},onItemExecute:function(Ne,We,Te,Ve){w(Ne),vr(Ne,eh,{name:u.name})}}),ue=u.label.map(function(Ne){return Qd(Ne,X)}),de=Li((P="invalid",H=$.some(RD),Wf("warning",{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+P],attributes:qe({title:X.translate(Y=void 0===Y?P:Y),"aria-live":"polite"},H.fold(function(){return{}},function(Ne){return{id:Ne}}))},X.icons))),ye=Li({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[de.asSpec()]}),Se=v.getUrlPicker(u.filetype),Pe=Br("browser.url.event"),Oe=Li({dom:{tag:"div",classes:["tox-control-wrap"]},components:[oe,ye.asSpec()],behaviours:jn([Vr.config({disabled:function(){return u.disabled||X.isDisabled()}})])}),Re=Li(Ik({name:u.name,icon:$.some("browse"),text:u.label.getOr(""),disabled:u.disabled,primary:!1,borderless:!0},function(Ne){return Rr(Ne,Pe)},X,[],["tox-browse-url"]));return _i.sketch({dom:cm([]),components:ue.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:De([[Oe.asSpec()],Se.map(function(){return Re.asSpec()}).toArray()])}]),fieldBehaviours:jn([Vr.config({disabled:function(){return u.disabled||X.isDisabled()},onDisabled:function(Ne){_i.getField(Ne).each(Vr.disable),Re.getOpt(Ne).each(Vr.disable)},onEnabled:function(Ne){_i.getField(Ne).each(Vr.enable),Re.getOpt(Ne).each(Vr.enable)}}),Ls(),tr("url-input-events",[on(Pe,function(Ne){ti.getCurrent(Ne).each(function(We){var Te=or.getValue(We),Ve=qe({fieldname:u.name},Te);Se.each(function(Qe){Qe(Ve).get(function(lt){or.setValue(We,lt),vr(Ne,eh,{name:u.name})})})})})])])})}(u,h,h.urlinput)}),customeditor:wu(function(u){var h=Cs(),v=Li({dom:{tag:u.tag}}),w=Cs();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:jn([tr("custom-editor-events",[ja(function(A){v.getOpt(A).each(function(P){(hr(u,"init")?u.init(P.element.dom):Gk.load(u.scriptId,u.scriptUrl).then(function(H){return H(P.element.dom,u.settings)})).then(function(H){w.on(function(Y){H.setValue(Y)}),w.clear(),h.set(H)})})})]),or.config({store:{mode:"manual",getValue:function(){return h.get().fold(function(){return w.get().getOr("")},function(A){return A.getValue()})},setValue:function(A,P){h.get().fold(function(){w.set(P)},function(H){return H.setValue(P)})}}}),ab()]),components:[v.asSpec()]}}),htmlpanel:wu(function(u){return xu.sketch("presentation"===u.presets?{dom:{tag:"div",classes:["tox-form__group"],innerHtml:u.html}}:{dom:{tag:"div",classes:["tox-form__group"],innerHtml:u.html,attributes:{role:"document"}},containerBehaviours:jn([pi.config({}),_o.config({})])})}),imagetools:wu(function(u,h){return kD(u,h.shared.providers)}),table:wu(function(u,h){return function Q2(u,h){function v(w){return{dom:{tag:"td",innerHtml:h.translate(w)}}}return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:nn(u.header,function(w){return{dom:{tag:"th",innerHtml:h.translate(w)}}})}]},{dom:{tag:"tbody"},components:nn(u.cells,function(w){return{dom:{tag:"tr"},components:nn(w,v)}})}],behaviours:jn([pi.config({}),_o.config({})])}}(u,h.shared.providers)}),panel:wu(function(u,h){return{dom:{tag:"div",classes:u.classes},components:nn(u.items,h.shared.interpreter)}})},dO={field:function(u,h){return h}},LD=function(u,h,v){return rn(fO,h.type).fold(function(){return console.error('Unknown factory type "'+h.type+'", defaulting to container: ',h),h},function(w){return w(u,h,v)})},hO={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},pO=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],ND=function(u){return yo(u,function(h,v){if(hr(v,"items")){var w=ND(v.items);return{customFormats:h.customFormats.concat(w.customFormats),formats:h.formats.concat([{title:v.title,items:w.formats}])}}if(hr(v,"inline")||hr(v,"block")||hr(v,"selector")){var A="custom-"+(Pr(v.name)?v.name:v.title.toLowerCase());return{customFormats:h.customFormats.concat([{name:A,format:v}]),formats:h.formats.concat([{title:v.title,format:A,icon:v.icon}])}}return qe(qe({},h),{formats:h.formats.concat(v)})},{customFormats:[],formats:[]})},gO=Lv.trim,fS=Zk("true"),dS=Zk("false"),cM=function(u){var h=nn(Gl(it.fromDom(u),"h1,h2,h3,h4,h5,h6,a:not([href])"),function(v){return v.dom});return mt(nn(mt(h,x),C).concat(nn(mt(h,f),I)),L)},BD="tinymce-url-history",Wh=Kg,hS=Zd,RP=ct([St("shell",!1),pn("makeItem"),St("setupItem",Gt),eg("listBehaviours",[Eo])]),nT=ct([Ph({name:"items",overrides:function(){return{behaviours:jn([Eo.config({})])}}})]),mO=Ul({name:ct("CustomList")(),configFields:RP(),partFields:nT(),factory:function(u,h,v,w){var A=u.shell?{behaviours:[Eo.config({})],components:[]}:{behaviours:[],components:h};return{uid:u.uid,dom:u.dom,components:A.components,behaviours:tu(u.listBehaviours,A.behaviours),apis:{setItems:function(P,H){var Y;Y=P,(u.shell?$.some(Y):ii(Y,u,"items")).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(X){var oe=Eo.contents(X),ue=H.length,de=ue-oe.length,ye=0<de?Cu(de,function(){return u.makeItem()}):[],Se=oe.slice(ue);Tr(Se,function(Oe){return Eo.remove(X,Oe)}),Tr(ye,function(Oe){return Eo.append(X,Oe)});var Pe=Eo.contents(X);Tr(Pe,function(Oe,Re){u.setupItem(P,Oe,H[Re],Re)})})}}}},apis:{setItems:function(u,h,v){u.setItems(h,v)}}}),z1=ct([pn("dom"),St("shell",!0),Es("toolbarBehaviours",[Eo])]),LP=ct([Ph({name:"groups",overrides:function(){return{behaviours:jn([Eo.config({})])}}})]),wm=Ul({name:"Toolbar",configFields:z1(),partFields:LP(),factory:function(u,h,v,w){var A=u.shell?{behaviours:[Eo.config({})],components:[]}:{behaviours:[],components:h};return{uid:u.uid,dom:u.dom,components:A.components,behaviours:tu(u.toolbarBehaviours,A.behaviours),apis:{setGroups:function(P,H){var Y;Y=P,(u.shell?$.some(Y):ii(Y,u,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(X){Eo.set(X,H)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(u,h,v){u.setGroups(h,v)}}}),zD=ct([]),NP=Object.freeze({__proto__:null,setup:Gt,isDocked:uo,getBehaviours:zD}),iA=bs([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),aA=function(u,h,v){var w,A,P,H;u.getSystem().isConnected()&&(P=v,H=(A=h).lazyViewport(w=u),P.isDocked()&&Yt(w,A,P,H),function At(u,h,v){var w,A,P,H=u.element;return Sr(Di(H,"position"),"fixed")?(A=h,je(w=H,P=v).filter(function(Y){return Be(P.getModes(),Y,A)}).bind(function(Y){return et(w,Y,P)})):function(Y,X,oe){var ue,de,ye=Sl(Y);if(Be(oe.getModes(),ye,X))return $.none();ue=Y,de=ye,oe.setInitialPos({style:function(){var We={},Te=ue.dom;if(rs(Te))for(var Ve=0;Ve<Te.style.length;Ve++){var Qe=Te.style.item(Ve);We[Qe]=Te.style[Qe]}return We}(),position:As(ue,"position")||"static",bounds:de});var Se=Aa(),Oe=X.y-Se.y,Re=Se.bottom-X.bottom,Ne=ye.y<=X.y;return $.some(iA.fixed(_c("fixed",$.some(ye.x-Se.x),Ne?$.some(Oe):$.none(),$.none(),Ne?$.none():$.some(Re))))}(H,h,v)}(w,H,P).each(function(Y){Y.fold(function(){return Nt(w,A,P)},function(X){return Kt(w,A,P,X)},function(X){Yt(w,A,P,H,!0),Kt(w,A,P,X)})}))},vO=Object.freeze({__proto__:null,refresh:aA,reset:dt,isDocked:function(u,h,v){return v.isDocked()},getModes:function(u,h,v){return v.getModes()},setModes:function(u,h,v,w){return v.setModes(w)}}),FD=Object.freeze({__proto__:null,events:function(u,h){return ia([qv(Zh(),function(v,w){u.contextual.each(function(A){Ua(v.element,A.transitionClass)&&(ud(v.element,[A.transitionClass,A.fadeInClass]),(h.isVisible()?A.onShown:A.onHidden)(v)),w.stop()})}),on(If(),function(v,w){aA(v,u,h)}),on(_s(),function(v,w){dt(v,u,h)})])}}),Zf=_a({fields:[Pi("contextual",[Yr("fadeInClass"),Yr("fadeOutClass"),Yr("transitionClass"),Xu("lazyContext"),ei("onShow"),ei("onShown"),ei("onHide"),ei("onHidden")]),Zi("lazyViewport",Aa),sl("modes",["top","bottom"],rt),ei("onDocked"),ei("onUndocked")],name:"docking",active:FD,apis:vO,state:Object.freeze({__proto__:null,init:function(u){var h=Nr(!1),v=Nr(!0),w=Cs(),A=Nr(u.modes);return Uc({isDocked:h.get,setDocked:h.set,getInitialPos:w.get,setInitialPos:w.set,clearInitialPos:w.clear,isVisible:v.get,setVisible:v.set,getModes:A.get,setModes:A.set,readState:function(){return"docked:  "+h.get()+", visible: "+v.get()+", modes: "+A.get().join(",")}})}})}),VD=ct(Br("toolbar-height-change")),Yy={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},sA="tox-tinymce--toolbar-sticky-on",uA="tox-tinymce--toolbar-sticky-off",yO=Object.freeze({__proto__:null,setup:function(u,h,v){u.inline||(h.header.isPositionedAtTop()||u.on("ResizeEditor",function(){v().each(Zf.reset)}),u.on("ResizeWindow ResizeEditor",function(){v().each(kt)}),u.on("SkinLoaded",function(){v().each(function(w){Zf.isDocked(w)?Zf.reset(w):Zf.refresh(w)})}),u.on("FullscreenStateChanged",function(){v().each(Zf.reset)})),u.on("AfterScrollIntoView",function(w){v().each(function(A){Zf.refresh(A);var P,H,Y,X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne,We,Te,Ve,Qe=A.element;se(Qe)&&(P=w,X=(Y=Dt(H=Qe)).dom.defaultView.innerHeight,oe=$o(Y),de=rl(ue=it.fromDom(P.elm)),ye=Hu(ue),Pe=(Se=de.y)+ye,Oe=Pl(H),Re=Hu(H),We=(Ne=Oe.top)+Re,Te=Math.abs(Ne-oe.top)<2,Ve=Math.abs(We-(oe.top+X))<2,Te&&Se<We?nd(oe.left,Se-Re,Y):Ve&&Ne<Pe&&nd(oe.left,Se-X+ye+Re,Y))})}),u.on("PostRender",function(){bn(u,!1)})},isDocked:function(u){return u().map(Zf.isDocked).getOr(!1)},getBehaviours:Xn}),bO=ke([Yr("type"),tc("items",du([Fe([Yr("name"),al("items",rt)]),rt]))].concat(im)),xO=[Qi("text"),Qi("tooltip"),Qi("icon"),Xu("fetch"),Zi("onSetup",function(){return Gt})],BP=ke(ln([Yr("type")],xO,!0)),zP=ke([Yr("type"),Qi("tooltip"),Qi("icon"),Qi("text"),bc("select"),Xu("fetch"),Zi("onSetup",function(){return Gt}),ys("presets","normal",["normal","color","listpreview"]),St("columns",1),Xu("onAction"),Xu("onItemAction")]),lA=kc({factory:function(u,h){var v={focus:no.focusIn,setMenus:function(w,A){var P=nn(A,function(H){return FC(vn({type:"menubutton",text:H.text,fetch:function(Y){Y(H.getItems())}}).mapError(function(Y){return Un(Y)}).getOrDie(),"tox-mbtn",h.backstage,$.some("menuitem"))});Eo.set(w,P)}};return{uid:u.uid,dom:u.dom,components:[],behaviours:jn([Eo.config({}),tr("menubar-events",[ja(function(w){u.onSetup(w)}),on(Ri(),function(w,A){Ya(w.element,".tox-mbtn--active").each(function(P){fd(A.event.target,".tox-mbtn").each(function(H){fn(P,H)||w.getSystem().getByDom(P).each(function(Y){w.getSystem().getByDom(H).each(function(X){ih.expand(X),ih.close(Y),_o.focus(X)})})})})}),on(E_(),function(w,A){A.event.prevFocus.bind(function(P){return w.getSystem().getByDom(P).toOptional()}).each(function(P){A.event.newFocus.bind(function(H){return w.getSystem().getByDom(H).toOptional()}).each(function(H){ih.isOpen(P)&&(ih.expand(H),ih.close(P))})})})]),no.config({mode:"flow",selector:".tox-mbtn",onEscape:function(w){return u.onEscape(w),$.some(!0)}}),pi.config({})]),apis:v,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[pn("dom"),pn("uid"),pn("onEscape"),pn("backstage"),St("onSetup",Gt)],apis:{focus:function(u,h){u.focus(h)},setMenus:function(u,h,v){u.setMenus(h,v)}}}),FP=Object.freeze({__proto__:null,refresh:function(u,h,v){var w;v.isExpanded()&&(Lo(u.element,kn(h)),w=Vn(h,u.element),to(u.element,kn(h),w))},grow:function(u,h,v){v.isExpanded()||Mr(u,h,v)},shrink:function(u,h,v){v.isExpanded()&&In(u,h,v)},immediateShrink:function(u,h,v){v.isExpanded()&&sr(u,h,v)},hasGrown:function(u,h,v){return v.isExpanded()},hasShrunk:function(u,h,v){return v.isCollapsed()},isGrowing:kr,isShrinking:Uo,isTransitioning:function(u,h,v){return kr(u,h)||Uo(u,h)},toggleGrow:function(u,h,v){(v.isExpanded()?In:Mr)(u,h,v)},disableTransitions:Nn}),_O=Object.freeze({__proto__:null,exhibit:function(u,h,v){return Pd(h.expanded?{classes:[h.openClass],styles:{}}:{classes:[h.closedClass],styles:Hr(h.dimension.property,"0px")})},events:function(u,h){return ia([qv(Zh(),function(v,w){w.event.raw.propertyName===u.dimension.property&&(Nn(v,u),h.isExpanded()&&Lo(v.element,u.dimension.property),(h.isExpanded()?u.onGrown:u.onShrunk)(v))})])}}),vp=_a({fields:[pn("closedClass"),pn("openClass"),pn("shrinkingClass"),pn("growingClass"),vi("getAnimationRoot"),ei("onShrunk"),ei("onStartShrink"),ei("onGrown"),ei("onStartGrow"),St("expanded",!1),tc("dimension",es("property",{width:[ea("property","width"),ea("getDimension",function(u){return Qt(u)+"px"})],height:[ea("property","height"),ea("getDimension",function(u){return Hu(u)+"px"})]}))],name:"sliding",active:_O,apis:FP,state:Object.freeze({__proto__:null,init:function(u){var h=Nr(u.expanded);return Uc({isExpanded:function(){return!0===h.get()},isCollapsed:function(){return!1===h.get()},setCollapsed:Yo(h.set,!1),setExpanded:Yo(h.set,!0),readState:function(){return"expanded: "+h.get()}})}})}),cA="container",VP=[Es("slotBehaviours",[])],wO=On({getSlotNames:function(u,h){return u.getSlotNames(h)},getSlot:function(u,h,v){return u.getSlot(h,v)},isShowing:function(u,h,v){return u.isShowing(h,v)},hideSlot:function(u,h,v){return u.hideSlot(h,v)},hideAllSlots:function(u,h){return u.hideAllSlots(h)},showSlot:function(u,h,v){return u.showSlot(h,v)}},Op),Fv=qe(qe({},wO),{sketch:function(u){var h,v={slot:function(P,H){return h.push(P),Hg(cA,tt(P),H)},record:ct(h=[])},w=u(v),A=nn(v.record(),function(P){return bu({name:P,pname:tt(P)})});return Jm(cA,VP,A,eA,w)}}),SO=ke([Qi("icon"),Qi("tooltip"),Zi("onShow",Gt),Zi("onHide",Gt),Zi("onSetup",function(){return Gt})]),HD=Br("FixSizeEvent"),fA=Br("AutoSizeEvent"),CO=Object.freeze({__proto__:null,block:function(u,h,v,w){Gr(u.element,"aria-busy",!0);var A=h.getRoot(u).getOr(u),P=jn([no.config({mode:"special",onTab:function(){return $.some(!0)},onShiftTab:function(){return $.some(!0)}}),_o.config({})]),H=w(A,P),Y=A.getSystem().build(H);Eo.append(A,jc(Y)),Y.hasConfigured(no)&&h.focus&&no.focusIn(Y),v.isBlocked()||h.onBlock(u),v.blockWith(function(){return Eo.remove(A,Y)})},unblock:function(u,h,v){ls(u.element,"aria-busy"),v.isBlocked()&&h.onUnblock(u),v.clear()}}),F1=_a({fields:[Zi("getRoot",$.none),ds("focus",!0),ei("onBlock"),ei("onUnblock")],name:"blocking",apis:CO,state:Object.freeze({__proto__:null,init:function(){var u=ny();return Uc({readState:u.isSet,blockWith:function(h){u.set({destroy:h})},clear:u.clear,isBlocked:u.isSet})}})}),dA=ct([Es("splitToolbarBehaviours",[nu]),fr("builtGroups",function(){return Nr([])})]),hA=ct([ko(["overflowToggledClass"]),bc("getOverflowBounds"),pn("lazySink"),fr("overflowGroups",function(){return Nr([])})].concat(dA())),HP=ct([bu({factory:wm,schema:z1(),name:"primary"}),Xd({schema:z1(),name:"overflow"}),Xd({name:"overflow-button"}),Xd({name:"overflow-group"})]),pA=ct(function(u,h){var v=u,w=Math.floor(h);to(v,"max-width",Sa.max(v,w,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")}),MO=ct([ko(["toggledClass"]),pn("lazySink"),Xu("fetch"),bc("getBounds"),Pi("fireDismissalEventInstead",[St("event",Fp())]),zm()]),WP=ct([Xd({name:"button",overrides:function(u){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:jn([Ei.config({toggleClass:u.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),Xd({factory:wm,schema:z1(),name:"toolbar",overrides:function(u){return{toolbarBehaviours:jn([no.config({mode:"cyclic",onEscape:function(h){return ii(h,u,"button").each(_o.focus),$.none()}})])}}})]),pS=Ul({name:"FloatingToolbarButton",factory:function(u,h,v,w){return qe(qe({},Xl.sketch(qe(qe({},w.button()),{action:function(A){ou(A,w)},buttonBehaviours:Vf({dump:w.button().buttonBehaviours},[nu.config({others:{toolbarSandbox:function(A){return P=A,H=v,Y=u,{dom:{tag:"div",attributes:{id:(X=cl()).id}},behaviours:jn([no.config({mode:"special",onEscape:function(oe){return ai.close(oe),$.some(!0)}}),ai.config({onOpen:function(oe,ue){Y.fetch().get(function(de){pc(P,ue,Y,H.layouts,de),X.link(P.element),no.focusIn(ue)})},onClose:function(){Ei.off(P),_o.focus(P),X.unlink(P.element)},isPartOf:function(oe,ue,de){return Yc(ue,de)||Yc(P,de)},getAttachPoint:function(){return Y.lazySink(P).getOrDie()}}),Ss.config({channels:qe(qe({},Bb(qe({isExtraPart:uo},Y.fireDismissalEventInstead.map(function(oe){return{fireEventInstead:{event:oe.event}}}).getOr({})))),Pu({doReposition:function(){ai.getState(nu.getCoupled(P,"toolbarSandbox")).each(function(oe){Al(P,oe,Y,H.layouts)})}}))})])};var P,H,Y,X}}})])}))),{apis:{setGroups:function(A,P){ai.getState(nu.getCoupled(A,"toolbarSandbox")).each(function(H){pc(A,H,u,v.layouts,P)})},reposition:function(A){ai.getState(nu.getCoupled(A,"toolbarSandbox")).each(function(P){Al(A,P,u,v.layouts)})},toggle:function(A){ou(A,w)},getToolbar:function(A){return ai.getState(nu.getCoupled(A,"toolbarSandbox"))},isOpen:function(A){return ai.isOpen(nu.getCoupled(A,"toolbarSandbox"))}}})},configFields:MO(),partFields:WP(),apis:{setGroups:function(u,h,v){u.setGroups(h,v)},reposition:function(u,h){u.reposition(h)},toggle:function(u,h){u.toggle(h)},getToolbar:function(u,h){return u.getToolbar(h)},isOpen:function(u,h){return u.isOpen(h)}}}),kO=ct([pn("items"),ko(["itemSelector"]),Es("tgroupBehaviours",[no])]),rT=ct([_y({name:"items",unit:"item"})]),fM=Ul({name:"ToolbarGroup",configFields:kO(),partFields:rT(),factory:function(u,h,v,w){return{uid:u.uid,dom:u.dom,components:h,behaviours:tu(u.tgroupBehaviours,[no.config({mode:"flow",selector:u.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),WD=Ul({name:"SplitFloatingToolbar",configFields:hA(),partFields:HP(),factory:function(u,h,v,w){var A=Li(pS.sketch({fetch:function(){return Mv(function(P){P(ml(u.overflowGroups.get()))})},layouts:{onLtr:function(){return[dl,Ou]},onRtl:function(){return[Ou,dl]},onBottomLtr:function(){return[$s,wc]},onBottomRtl:function(){return[wc,$s]}},getBounds:v.getOverflowBounds,lazySink:u.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:u.markers.overflowToggledClass},parts:{button:w["overflow-button"](),toolbar:w.overflow()}}));return{uid:u.uid,dom:u.dom,components:h,behaviours:tu(u.splitToolbarBehaviours,[nu.config({others:{overflowGroup:function(){return fM.sketch(qe(qe({},w["overflow-group"]()),{items:[A.asSpec()]}))}}})]),apis:{setGroups:function(P,H){u.builtGroups.set(nn(H,P.getSystem().build)),Oc(P,A,u)},refresh:function(P){return Oc(P,A,u)},toggle:function(P){A.getOpt(P).each(function(H){pS.toggle(H)})},isOpen:function(P){return A.getOpt(P).map(pS.isOpen).getOr(!1)},reposition:function(P){A.getOpt(P).each(function(H){pS.reposition(H)})},getOverflow:function(P){return A.getOpt(P).bind(pS.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(u,h,v){u.setGroups(h,v)},refresh:function(u,h){u.refresh(h)},reposition:function(u,h){u.reposition(h)},toggle:function(u,h){u.toggle(h)},isOpen:function(u,h){return u.isOpen(h)},getOverflow:function(u,h){return u.getOverflow(h)}}}),GP=ct([ko(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),ei("onOpened"),ei("onClosed")].concat(dA())),UP=ct([bu({factory:wm,schema:z1(),name:"primary"}),bu({factory:wm,schema:z1(),name:"overflow",overrides:function(u){return{toolbarBehaviours:jn([vp.config({dimension:{property:"height"},closedClass:u.markers.closedClass,openClass:u.markers.openClass,shrinkingClass:u.markers.shrinkingClass,growingClass:u.markers.growingClass,onShrunk:function(h){ii(h,u,"overflow-button").each(function(v){Ei.off(v),_o.focus(v)}),u.onClosed(h)},onGrown:function(h){no.focusIn(h),u.onOpened(h)},onStartGrow:function(h){ii(h,u,"overflow-button").each(Ei.on)}}),no.config({mode:"acyclic",onEscape:function(h){return ii(h,u,"overflow-button").each(_o.focus),$.some(!0)}})])}}}),Xd({name:"overflow-button",overrides:function(u){return{buttonBehaviours:jn([Ei.config({toggleClass:u.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),Xd({name:"overflow-group"})]),gA=Ul({name:"SplitSlidingToolbar",configFields:GP(),partFields:UP(),factory:function(u,h,v,w){var A="alloy.toolbar.toggle";return{uid:u.uid,dom:u.dom,components:h,behaviours:tu(u.splitToolbarBehaviours,[nu.config({others:{overflowGroup:function(P){return fM.sketch(qe(qe({},w["overflow-group"]()),{items:[Xl.sketch(qe(qe({},w["overflow-button"]()),{action:function(H){Rr(P,A)}}))]}))}}}),tr("toolbar-toggle-events",[on(A,function(P){zv(P,u)})])]),apis:{setGroups:function(P,H){var Y=nn(H,P.getSystem().build);u.builtGroups.set(Y),tA(P,u)},refresh:function(P){return tA(P,u)},toggle:function(P){return zv(P,u)},isOpen:function(P){return ii(P,u,"overflow").map(vp.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(u,h,v){u.setGroups(h,v)},refresh:function(u,h){u.refresh(h)},toggle:function(u,h){u.toggle(h)},isOpen:function(u,h){return u.isOpen(h)}}}),jP=hS.optional({factory:lA,name:"menubar",schema:[pn("backstage")]}),YP=hS.optional({factory:{sketch:function(u){return mO.sketch({uid:u.uid,dom:u.dom,listBehaviours:jn([no.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return pb({type:u.type,uid:Br("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:u.providers,onEscape:function(){return u.onEscape(),$.some(!0)}})},setupItem:function(h,v,w,A){wm.setGroups(v,w)},shell:!0})}},name:"multiple-toolbar",schema:[pn("dom"),pn("onEscape")]}),qP=hS.optional({factory:{sketch:function(u){return(u.type===Gf.sliding?function(h){var v=gA.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),w=gA.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),A=hb(h);return gA.sketch(qe(qe({},A),{components:[v,w],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(P){P.getSystem().broadcastOn([VD()],{type:"opened"})},onClosed:function(P){P.getSystem().broadcastOn([VD()],{type:"closed"})}}))}:u.type===Gf.floating?function(h){var v=hb(h),w=WD.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return WD.sketch(qe(qe({},v),{lazySink:h.getSink,getOverflowBounds:function(){var A=h.moreDrawerData.lazyHeader().element,P=rl(A),H=so(A),Y=rl(H),X=Math.max(H.dom.scrollHeight,Y.height);return Gu(P.x+4,Y.y,P.width-8,X)},parts:qe(qe({},v.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:h.attributes}}}),components:[w],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}:pb)({type:u.type,uid:u.uid,onEscape:function(){return u.onEscape(),$.some(!0)},cyclicKeying:!1,initGroups:[],getSink:u.getSink,providers:u.providers,moreDrawerData:{lazyToolbar:u.lazyToolbar,lazyMoreButton:u.lazyMoreButton,lazyHeader:u.lazyHeader},attributes:u.attributes})}},name:"toolbar",schema:[pn("dom"),pn("onEscape"),pn("getSink")]}),TO=hS.optional({factory:{sketch:function(u){return{uid:u.uid,dom:u.dom,components:u.components,behaviours:jn((u.sticky?Xn:zD)(u.editor,u.sharedBackstage))}}},name:"header",schema:[pn("dom")]}),DO=hS.optional({name:"socket",schema:[pn("dom")]}),AO=hS.optional({factory:{sketch:function(u){return{uid:u.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:jn([pi.config({}),_o.config({}),vp.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(h){ti.getCurrent(h).each(Fv.hideAllSlots),Rr(h,fA)},onGrown:function(h){Rr(h,fA)},onStartGrow:function(h){vr(h,HD,{width:Di(h.element,"width").getOr("")})},onStartShrink:function(h){vr(h,HD,{width:Qt(h.element)+"px"})}}),Eo.config({}),ti.config({find:function(h){return ca(Eo.contents(h))}})])}],behaviours:jn([ub(0),tr("sidebar-sliding-events",[on(HD,function(h,v){to(h.element,"width",v.event.width)}),on(fA,function(h,v){Lo(h.element,"width")})])])}}},name:"sidebar",schema:[pn("dom")]}),IO=hS.optional({factory:{sketch:function(u){return{uid:u.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:jn([Eo.config({}),F1.config({focus:!1}),ti.config({find:function(h){return ca(h.components())}})]),components:[]}}},name:"throbber",schema:[pn("dom")]}),Su=Ul({name:"OuterContainer",factory:function(u,h,v){return{uid:u.uid,dom:u.dom,components:h,apis:{getSocket:function(w){return Wh.getPart(w,u,"socket")},setSidebar:function(w,A){Wh.getPart(w,u,"sidebar").each(function(P){return function tn(u,h){ti.getCurrent(u).each(function(v){return Eo.set(v,[(w=h,Fv.sketch(function(A){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(P=A,Y=nn(ra(H=w),function(X){var ue=Vs(ga("sidebar",SO,H[X]));return{name:X,getApi:xt,onSetup:ue.onSetup,onShow:ue.onShow,onHide:ue.onHide}}),nn(Y,function(X){var oe=Nr(Gt);return P.slot(X.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Ox([a1(X,oe),Rx(X,oe),on(wb(),function(ue,de){var ye=de.event;Yi(Y,function(Se){return Se.name===ye.name}).each(function(Se){(ye.visible?Se.onShow:Se.onHide)(Se.getApi(ue))})})])})})),slotBehaviours:Ox([ja(function(X){return Fv.hideAllSlots(X)})])};var P,H,Y}))]);var w})}(P,A)})},toggleSidebar:function(w,A){Wh.getPart(w,u,"sidebar").each(function(P){var H=A;ti.getCurrent(P).each(function(Y){ti.getCurrent(Y).each(function(X){vp.hasGrown(Y)?Fv.isShowing(X,H)?vp.shrink(Y):(Fv.hideAllSlots(X),Fv.showSlot(X,H)):(Fv.hideAllSlots(X),Fv.showSlot(X,H),vp.grow(Y))})})})},whichSidebar:function(w){return Wh.getPart(w,u,"sidebar").bind(Cn).getOrNull()},getHeader:function(w){return Wh.getPart(w,u,"header")},getToolbar:function(w){return Wh.getPart(w,u,"toolbar")},setToolbar:function(w,A){Wh.getPart(w,u,"toolbar").each(function(P){P.getApis().setGroups(P,A)})},setToolbars:function(w,A){Wh.getPart(w,u,"multiple-toolbar").each(function(P){mO.setItems(P,A)})},refreshToolbar:function(w){Wh.getPart(w,u,"toolbar").each(function(A){return A.getApis().refresh(A)})},toggleToolbarDrawer:function(w){Wh.getPart(w,u,"toolbar").each(function(A){var P=A.getApis().toggle;null!=P?$.some(P(A)):$.none()})},isToolbarDrawerToggled:function(w){return Wh.getPart(w,u,"toolbar").bind(function(A){return $.from(A.getApis().isOpen).map(function(P){return P(A)})}).getOr(!1)},getThrobber:function(w){return Wh.getPart(w,u,"throbber")},focusToolbar:function(w){Wh.getPart(w,u,"toolbar").orThunk(function(){return Wh.getPart(w,u,"multiple-toolbar")}).each(function(A){no.focusIn(A)})},setMenubar:function(w,A){Wh.getPart(w,u,"menubar").each(function(P){lA.setMenus(P,A)})},focusMenubar:function(w){Wh.getPart(w,u,"menubar").each(function(A){lA.focus(A)})}},behaviours:u.behaviours}},configFields:[pn("dom"),pn("behaviours")],partFields:[TO,jP,qP,YP,DO,AO,IO],apis:{getSocket:function(u,h){return u.getSocket(h)},setSidebar:function(u,h,v){u.setSidebar(h,v)},toggleSidebar:function(u,h,v){u.toggleSidebar(h,v)},whichSidebar:function(u,h){return u.whichSidebar(h)},getHeader:function(u,h){return u.getHeader(h)},getToolbar:function(u,h){return u.getToolbar(h)},setToolbar:function(u,h,v){var w=nn(v,gg);u.setToolbar(h,w)},setToolbars:function(u,h,v){var w=nn(v,function(A){return nn(A,gg)});u.setToolbars(h,w)},refreshToolbar:function(u,h){return u.refreshToolbar(h)},toggleToolbarDrawer:function(u,h){u.toggleToolbarDrawer(h)},isToolbarDrawerToggled:function(u,h){return u.isToolbarDrawerToggled(h)},getThrobber:function(u,h){return u.getThrobber(h)},setMenubar:function(u,h,v){u.setMenubar(h,v)},focusMenubar:function(u,h){u.focusMenubar(h)},focusToolbar:function(u,h){u.focusToolbar(h)}}}),GD={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},Vv=Yo(Qk,!1),OO=Yo(Qk,!0);function mA(u,h,v,w){var A;return{type:"basic",data:(A=u.getParam(h,v,"string"),nn(w===uS.SemiColon?A.replace(/;$/,"").split(";"):A.split(" "),function(P){var H=P,Y=P,X=P.split("=");return 1<X.length&&(H=X[0],Y=X[1]),{title:H,format:Y}}))}}function EO(u){var h={type:"basic",data:kA};return{tooltip:"Align",text:$.none(),icon:$.some("align-left"),isSelectedFor:function(v){return function(){return u.formatter.match(v)}},getCurrentValue:$.none,getPreviewFor:function(v){return $.none},onAction:function(v){return function(){return Yi(kA,function(w){return w.format===v.format}).each(function(w){return u.execCommand(w.command)})}},updateText:function(v){var w=Yi(kA,function(A){return u.formatter.match(A.format)}).fold(ct("left"),function(A){return A.title.toLowerCase()});vr(v,CD,{icon:"align-"+w})},dataset:h,shouldHide:!1,isInvalid:function(v){return!u.formatter.canApply(v.format)}}}function PO(u){return nn(u.split(/\s*,\s*/),function(h){return h.replace(/^['"]+|['"]+$/g,"")})}function RO(u){function h(){function A(X){return X?PO(X)[0]:""}var P=u.queryCommandValue("FontName"),H=w.data,Y=P?P.toLowerCase():"";return{matchOpt:Yi(H,function(X){var oe=X.format;return oe.toLowerCase()===Y||A(oe).toLowerCase()===A(Y).toLowerCase()}).orThunk(function(){return ki(0===(X=Y).indexOf("-apple-system")&&(oe=PO(X.toLowerCase()),Ue(TA,function(ue){return-1<oe.indexOf(ue.toLowerCase())})),{title:v,format:Y});var X,oe}),font:P}}var v="System Font",w=mA(u,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",uS.SemiColon);return{tooltip:"Fonts",text:$.some(v),icon:$.none(),isSelectedFor:function(A){return function(P){return P.exists(function(H){return H.format===A})}},getCurrentValue:function(){return h().matchOpt},getPreviewFor:function(A){return function(){return $.some({tag:"div",styles:-1===A.indexOf("dings")?{"font-family":A}:{}})}},onAction:function(A){return function(){u.undoManager.transact(function(){u.focus(),u.execCommand("FontName",!1,A.format)})}},updateText:function(A){var P=h(),X=P.matchOpt.fold(ct(P.font),function(oe){return oe.title});vr(A,Xf,{text:X})},dataset:w,shouldHide:!1,isInvalid:uo}}function LO(u){function h(){var A=$.none(),P=w.data,H=u.queryCommandValue("FontSize");if(H)for(var Y=function(oe){var ue,de,ye,Se,Pe=(de=oe,/[0-9.]+px$/.test(ue=H)?(ye=72*parseInt(ue,10)/96,Se=Math.pow(10,de||0),Math.round(ye*Se)/Se+"pt"):rn(DA,ue).getOr(ue)),Oe=rn(Kf,Pe).getOr("");A=Yi(P,function(Re){return Re.format===H||Re.format===Pe||Re.format===Oe})},X=3;A.isNone()&&0<=X;X--)Y(X);return{matchOpt:A,size:H}}var v=ct($.none),w=mA(u,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",uS.Space);return{tooltip:"Font sizes",text:$.some("12pt"),icon:$.none(),isSelectedFor:function(A){return function(P){return P.exists(function(H){return H.format===A})}},getPreviewFor:v,getCurrentValue:function(){return h().matchOpt},onAction:function(A){return function(){u.undoManager.transact(function(){u.focus(),u.execCommand("FontSize",!1,A.format)})}},updateText:function(A){var P=h(),X=P.matchOpt.fold(ct(P.size),function(oe){return oe.title});vr(A,Xf,{text:X})},dataset:w,shouldHide:!1,isInvalid:uo}}function vA(u,h){var v=h(),w=nn(v,function(A){return A.format});return $.from(u.formatter.closest(w)).bind(function(A){return Yi(v,function(P){return P.format===A})}).orThunk(function(){return ki(u.formatter.match("p"),{title:"Paragraph",format:"p"})})}function UD(u){var h=mA(u,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",uS.SemiColon);return{tooltip:"Blocks",text:$.some("Paragraph"),icon:$.none(),isSelectedFor:function(v){return function(){return u.formatter.match(v)}},getCurrentValue:$.none,getPreviewFor:function(v){return function(){var w=u.formatter.get(v);return $.some({tag:0<w.length&&(w[0].inline||w[0].block)||"div",styles:u.dom.parseStyle(u.formatter.getCssText(v))})}},onAction:ID(u),updateText:function(v){var w=vA(u,function(){return h.data}).fold(ct("Paragraph"),function(A){return A.title});vr(v,Xf,{text:w})},dataset:h,shouldHide:!1,isInvalid:function(v){return!u.formatter.canApply(v.format)}}}function NO(u,h){return{tooltip:"Formats",text:$.some("Paragraph"),icon:$.none(),isSelectedFor:function(v){return function(){return u.formatter.match(v)}},getCurrentValue:$.none,getPreviewFor:function(v){return function(){var w=u.formatter.get(v);return void 0!==w?$.some({tag:0<w.length&&(w[0].inline||w[0].block)||"div",styles:u.dom.parseStyle(u.formatter.getCssText(v))}):$.none()}},onAction:ID(u),updateText:function(v){var w=function(H){var Y=H.items;return void 0!==Y&&0<Y.length?dr(Y,w):[{title:H.title,format:H.format}]},A=dr(p_(u),w),P=vA(u,ct(A)).fold(ct("Paragraph"),function(H){return H.title});vr(v,Xf,{text:P})},shouldHide:u.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(v){return!u.formatter.canApply(v.format)},dataset:h}}function yA(u){return{isDisabled:function(){return Vr.isDisabled(u)},setDisabled:function(h){return Vr.set(u,h)}}}function oT(u){return{setActive:function(h){Ei.set(u,h)},isActive:function(){return Ei.isOn(u)},isDisabled:function(){return Vr.isDisabled(u)},setDisabled:function(h){return Vr.set(u,h)}}}function bA(u,h){return u.map(function(v){return{"aria-label":h.translate(v),title:h.translate(v)}}).getOr({})}function iT(u,h,v,w,A,P){var H;return{dom:{tag:"button",classes:["tox-tbtn"].concat(h.isSome()?["tox-tbtn--select"]:[]),attributes:bA(v,P)},components:Ny([u.map(function(Y){return w1(Y,P.icons)}),h.map(function(Y){return Zw(Y,"tox-tbtn",P)})]),eventOrder:((H={})[Wc()]=["focusing","alloy.base.behaviour","common-button-display-events"],H),buttonBehaviours:jn([mC(P.isDisabled),Ls(),tr("common-button-display-events",[on(Wc(),function(Y,X){X.event.prevent(),Rr(Y,XD)})])].concat(w.map(function(Y){return $f.config({channel:Y,initialData:{icon:u,text:h},renderComponents:function(X,oe){return Ny([X.icon.map(function(ue){return w1(ue,P.icons)}),X.text.map(function(ue){return Zw(ue,"tox-tbtn",P)})])}})}).toArray()).concat(A.getOr([])))}}function aT(u,h,v){var w,A=Nr(Gt),P=iT(u.icon,u.text,u.tooltip,$.none(),$.none(),v);return Xl.sketch({dom:P.dom,components:P.components,eventOrder:Uy,buttonBehaviours:jn([tr("toolbar-button-events",[(w={onAction:u.onAction,getApi:h.getApi},bh(function(H,Y){Px(w,H)(function(X){vr(H,Yk,{buttonApi:X}),w.onAction(X)})})),a1(h,A),Rx(h,A)]),mC(function(){return u.disabled||v.isDisabled()}),Ls()].concat(h.toolbarButtonBehaviours))})}function sT(u,h){return function(v,w,A){var P=u(v).mapError(function(H){return Un(H)}).getOrDie();return h(P,w,A)}}function dM(u,h,v,w){var A,P=h.outerContainer,H=v.toolbar,Y=v.buttons;zn(H,Pr)?(A=H.map(function(X){return cT(u,{toolbar:X,buttons:Y,allowToolbarGroups:v.allowToolbarGroups},{backstage:w},$.none())}),Su.setToolbars(P,A)):Su.setToolbar(P,cT(u,v,{backstage:w},$.none()))}function xA(u){return/^[0-9\.]+(|px)$/i.test(""+u)?$.some(parseInt(""+u,10)):$.none()}function _A(u){return Va(u)?u+"px":u}function uT(u,h,v){var w=h.filter(function(P){return u<P}),A=v.filter(function(P){return P<u});return w.or(A).getOr(u)}function wA(u){var h=$b(u),v=Ax(u),w=Jb(u);return xA(h).map(function(A){return uT(A,v,w)})}function SA(u,h){var v=Sl(u);return{pos:h?v.y:v.bottom,bounds:v}}function BO(u,h){return on(Yk,function(v,w){var A,P=u.get(v),H=(A=P,{hide:function(){return Rr(A,Kh())},getValue:function(){return or.getValue(A)}});h.onAction(H,w.event.buttonApi)})}function zO(u,h,v){return h.bottom-u.y>=(v=void 0===v?.01:v)&&u.bottom-h.y>=v}function CA(u){var h=function(A){var P=A.getBoundingClientRect();if(P.height<=0&&P.width<=0){var H=Dr(it.fromDom(A.startContainer),A.startOffset).element;return(Ll(H)?Xr(H):$.some(H)).filter(Au).map(function(Y){return Y.dom.getBoundingClientRect()}).getOr(P)}return P}(u.selection.getRng());if(u.inline){var v=$o();return Gu(v.left+h.left,v.top+h.top,h.width,h.height)}var w=rl(it.fromDom(u.getBody()));return Gu(w.x+h.left,w.y+h.top,h.width,h.height)}function FO(u,h,v,w){void 0===w&&(w=0);var A,P,H,Y,X=Io(window),oe=Sl(it.fromDom(u.getContentAreaContainer())),ue=yf(u)||sg(u)||pw(u),de=(A=oe,P=X,H=w,{x:Y=Math.max(A.x+H,P.x),width:Math.min(A.right-H,P.right)-Y}),ye=de.x,Se=de.width;if(u.inline&&!ue)return Gu(ye,X.y,Se,X.height);var Pe=function(Ne,We,Te,Ve,Qe,lt){var Ft=it.fromDom(Ne.getContainer()),Tt=Ya(Ft,".tox-editor-header").getOr(Ft),Ut=Sl(Tt),Jt=Ve&&!(Ut.y>=We.bottom);if(Ne.inline&&Jt)return{y:Math.max(Ut.bottom+lt,Te.y),bottom:Te.bottom};if(Ne.inline&&!Jt)return{y:Te.y,bottom:Math.min(Ut.y-lt,Te.bottom)};var yn="line"===Qe?Sl(Ft):We;return Jt?{y:Math.max(Ut.bottom+lt,Te.y),bottom:Math.min(yn.bottom-lt,Te.bottom)}:{y:Math.max(yn.y+lt,Te.y),bottom:Math.min(Ut.y-lt,Te.bottom)}}(u,oe,X,h.header.isPositionedAtTop(),v,w),Oe=Pe.y;return Gu(ye,Oe,Se,Pe.bottom-Oe)}function jD(u){return"node"===u}function YD(u,h){var v=Ce(mt(h,function(w){return w.predicate(u.dom)}),function(w){return"contexttoolbar"===w.type});return{contextToolbars:v.pass,contextForms:v.fail}}function WO(u,h,v,w){function A(){var Tt=Te.get().getOr("node"),Ut=jD(Tt)?1:0;return FO(u,Oe,Tt,Ut)}function P(){return!(u.removed||Re()&&Pe.isContextMenuOpen())}function H(){if(P()){var Tt=A(),Ut=Sr(Te.get(),"node")?(dn=u,Ne.get().filter(Zs).map(rl).getOrThunk(function(){return CA(dn)})):CA(u);return Tt.height<=0||!zO(Ut,Tt)}return 1;var dn}function Y(){Ne.clear(),We.clear(),Te.clear(),Rs.hide(Ve)}function X(){var Tt;Rs.isOpen(Ve)&&(Lo(Tt=Ve.element,"display"),H()?to(Tt,"display","none"):(We.set(0),Rs.reposition(Ve)))}function oe(Tt){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Tt],behaviours:jn([no.config({mode:"acyclic"}),tr("pop-dialog-wrap-events",[ja(function(Ut){u.shortcuts.add("ctrl+F9","focus statusbar",function(){return no.focusIn(Ut)})}),Nd(function(Ut){u.shortcuts.remove("ctrl+F9")})])])}}function de(Tt,Ut){var dn,Jt,yn,En;Ft.cancel(),P()&&(dn=lt(Tt),yn=function ue(Tt,Ut){var dn,Jt,yn,En,pr,Wr,No,wi="node"===Tt?Oe.anchors.node(Ut):Oe.anchors.cursor(),Ui=(dn=u,Jt=Tt,yn=Re(),En={lastElement:Ne.get,isReposition:function(){return Sr(We.get(),0)},getMode:function(){return jl.getMode(v)}},"line"===Jt?{bubble:ry(12,0,KD),layouts:{onLtr:function(){return[ws]},onRtl:function(){return[zd]}},overrides:PA}:{bubble:ry(0,12,KD,1/12),layouts:(pr=dn,Wr=En,No=Jt,yn?{onLtr:function(Zo){return[Ju,Ou,dl,wc,$s,Xc].concat(Ni(Zo))},onRtl:function(Zo){return[Ju,dl,Ou,$s,wc,Xc].concat(Ni(Zo))}}:{onLtr:function(Zo){return[Xc,Ju,wc,Ou,$s,dl].concat(Ni(Zo))},onRtl:function(Zo){return[Xc,Ju,$s,dl,wc,Ou].concat(Ni(Zo))}}),overrides:PA});function Ni(Zo){return jD(No)?[(Xi=Zo,function($i,Ji,Si,Na,Zl){var js=function VO(u,h,v,w,A){var P=CA(u),H=w.lastElement().exists(function(ue){return fn(v,ue)}),Y=v,X=u.selection.getRng(),oe=Dr(it.fromDom(X.startContainer),X.startOffset);return X.startContainer===X.endContainer&&X.startOffset===X.endOffset-1&&fn(oe.element,Y)?H?OM:ag:H?function(ue,de){var ye=Di(ue,"position");to(ue,"position",de);var Se=zO(P,Sl(h))&&!w.isReposition()?EM:OM;return ye.each(function(Pe){return to(ue,"position",Pe)}),Se}(h,w.getMode()):("fixed"===w.getMode()?A.y+$o().top:A.y)+(Hu(h)+12)<=P.y?ag:D0}(pr,Na,Xi,Wr,Zl),Jf=qe(qe({},$i),{y:Zl.y,height:Zl.height});return qe(qe({},js(Jf,Ji,Si,Na,Zl)),{alwaysFit:!0})})]:[];var Xi}return ee(wi,Ui)}(Jt=Tt[0].position,Ut),Te.set(Jt),We.set(1),Lo(En=Ve.element,"display"),Sr(Ot(Ut,Ne.get(),fn),!0)||(yi(En,$D),jl.reset(v,Ve)),Rs.showWithinBounds(Ve,oe(dn),{anchor:yn,transition:{classes:[$D],mode:"placement"}},function(){return $.some(A())}),Ut.fold(Ne.clear,Ne.set),H()&&to(En,"display","none"))}var ye,Se,Pe=w.backstage,Oe=Pe.shared,Re=fu().deviceType.isTouch,Ne=Cs(),We=Cs(),Te=Cs(),Ve=Ma((ye={sink:v,onEscape:function(){return u.focus(),$.some(!0)}},Se=Nr([]),Rs.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(Tt){Se.set([]),Rs.getContent(Tt).each(function(Ut){Lo(Ut.element,"visibility")}),yi(Tt.element,LA),Lo(Tt.element,"width")},inlineBehaviours:jn([tr("context-toolbar-events",[qv(Zh(),function(Tt,Ut){"width"===Ut.event.raw.propertyName&&(yi(Tt.element,LA),Lo(Tt.element,"width"))}),on(RA,function(Tt,Ut){var dn=Tt.element;Lo(dn,"width");var Jt=Qt(dn);Rs.setContent(Tt,Ut.event.contents),qn(dn,LA);var yn=Qt(dn);to(dn,"width",Jt+"px"),Rs.getContent(Tt).each(function(En){Ut.event.focus.bind(function(pr){return Vd(pr),Hd(dn)}).orThunk(function(){return no.focusIn(En),Go(zi(dn))})}),Ty.setTimeout(function(){to(Tt.element,"width",yn+"px")},0)}),on(qO,function(Tt,Ut){Rs.getContent(Tt).each(function(dn){Se.set(Se.get().concat([{bar:dn,focus:Go(zi(Tt.element))}]))}),vr(Tt,RA,{contents:Ut.event.forwardContents,focus:$.none()})}),on(XO,function(Tt,Ut){ku(Se.get()).each(function(dn){Se.set(Se.get().slice(0,Se.get().length-1)),vr(Tt,RA,{contents:jc(dn.bar),focus:dn.focus})})})]),no.config({mode:"special",onEscape:function(Tt){return ku(Se.get()).fold(function(){return ye.onEscape()},function(Ut){return Rr(Tt,XO),$.some(!0)})}})]),lazySink:function(){return Vo.value(ye.sink)}}))),Qe=Zt(function(){return function gS(u,h){var v={},w=[],A=[],P={},H={},Y=ra(u);return Tr(Y,function(X){var oe,ue,de,ye,Se,Pe=u[X];"contextform"===Pe.type?(de=X,Se=Vs(ga("ContextForm",Dx,ye=Pe)),(v[de]=Se).launch.map(function(Oe){P["form:"+de]=qe(qe({},ye.launch),{type:"contextformtogglebutton"===Oe.type?"togglebutton":"button",onAction:function(){h(Se)}})}),("editor"===Se.scope?A:w).push(Se),H[de]=Se):"contexttoolbar"===Pe.type&&(oe=X,ga("ContextToolbar",BT,ue=Pe).each(function(Oe){("editor"===ue.scope?A:w).push(Oe),H[oe]=Oe}))}),{forms:v,inNodeScope:w,inEditorScope:A,lookupTable:H,formNavigators:P}}(h,function(Tt){var Ut=lt([Tt]);vr(Ve,qO,{forwardContents:oe(Ut)})})}),lt=function(Tt){var Ut=u.ui.registry.getAll().buttons,dn=Qe(),Jt=qe(qe({},Ut),dn.formNavigators),yn=Ex(u)===Gf.scrolling?Gf.scrolling:Gf.default,En=De(nn(Tt,function(pr){return"contexttoolbar"===pr.type?cT(u,{buttons:Jt,toolbar:pr.items,allowToolbarGroups:!1},w,$.some(["form:"])):YO(pr,Oe.providers)}));return pb({type:yn,uid:Br("context-toolbar"),initGroups:En,onEscape:$.none,cyclicKeying:!0,providers:Oe.providers})},Ft=I0(function(){u.hasFocus()&&!u.removed&&(Ua(Ve.element,$D)?Ft.throttle():function HO(u,h){function v(H){return fn(H,A)}var w,A=it.fromDom(h.getBody()),P=it.fromDom(h.selection.getNode());return v(w=P)||gn(A,w)?function(H,Y,X){var oe=YD(H,Y);if(0<oe.contextForms.length)return $.some({elem:H,toolbars:[oe.contextForms[0]]});var ue=YD(H,X);if(0<ue.contextForms.length)return $.some({elem:H,toolbars:[ue.contextForms[0]]});if(0<oe.contextToolbars.length||0<ue.contextToolbars.length){var de=function(ye){if(ye.length<=1)return ye;function Se(Te){return Ir(ye,function(Ve){return Ve.position===Te})}function Pe(Te){return mt(ye,function(Ve){return Ve.position===Te})}var Oe=Se("selection"),Re=Se("node");if(Oe||Re){if(Re&&Oe){var Ne=Pe("node"),We=nn(Pe("selection"),function(Te){return qe(qe({},Te),{position:"node"})});return Ne.concat(We)}return Pe(Oe?"selection":"node")}return Pe("line")}(oe.contextToolbars.concat(ue.contextToolbars));return $.some({elem:H,toolbars:de})}return $.none()}(P,u.inNodeScope,u.inEditorScope).orThunk(function(){return X=u,(H=v)(Y=P)?$.none():Zr(Y,function(oe){if(Au(oe)){var ue=YD(oe,X.inNodeScope),ye=ue.contextForms,Se=0<ye.length?ye:(Oe=ue.contextToolbars).length<=1?Oe:Pe("selection").orThunk(function(){return Pe("node")}).orThunk(function(){return Pe("line")}).map(function(Re){return Re.position}).fold(function(){return[]},function(Re){return mt(Oe,function(Ne){return Ne.position===Re})});return 0<Se.length?$.some({elem:oe,toolbars:Se}):$.none()}function Pe(Re){return Yi(Oe,function(Ne){return Ne.position===Re})}var Oe;return $.none()},H);var H,Y,X}):$.none()}(Qe(),u).fold(Y,function(Tt){de(Tt.toolbars,$.some(Tt.elem))}))},17);u.on("init",function(){u.on("remove",Y),u.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",X),u.on("click keyup focus SetContent",Ft.throttle),u.on(dT,Y),u.on("contexttoolbar-show",function(Tt){rn(Qe().lookupTable,Tt.toolbarKey).each(function(Ut){de([Ut],ki(Tt.target!==u,Tt.target)),Rs.getContent(Ve).each(no.focusIn)})}),u.on("focusout",function(Tt){Ty.setEditorTimeout(u,function(){Hd(v.element).isNone()&&Hd(Ve.element).isNone()&&Y()},0)}),u.on("SwitchMode",function(){u.mode.isReadOnly()&&Y()}),u.on("AfterProgressState",function(Tt){Tt.state?Y():u.hasFocus()&&Ft.throttle()}),u.on("NodeChange",function(Tt){Hd(Ve.element).fold(Ft.throttle,Gt)})})}(lS=uS=uS||{})[lS.SemiColon=0]="SemiColon",lS[lS.Space=1]="Space";var mS,MA,hM,kA=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],TA=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],Kf={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},DA={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},qD=Object.freeze({__proto__:null,events:function(u,h){function v(w,A){u.updateState.each(function(P){var H=P(w,A);h.set(H)}),u.renderComponents.each(function(P){var H=nn(P(A,h.get()),w.getSystem().build);ox(w,H)})}return ia([on(hi(),function(w,A){var H=A;H.universal||Fo(H.channels,u.channel)&&v(w,H.data)}),ja(function(w,A){u.initialData.each(function(P){v(w,P)})})])}}),GO=Object.freeze({__proto__:null,getState:function(u,h,v){return v}}),$f=_a({fields:[pn("channel"),vi("renderComponents"),vi("updateState"),vi("initialData")],name:"reflecting",active:qD,apis:GO,state:Object.freeze({__proto__:null,init:function(){var u=Nr($.none());return{readState:function(){return u.get().getOr("none")},get:u.get,set:u.set,clear:function(){return u.set($.none())}}}})}),lT=ct([pn("toggleClass"),pn("fetch"),Ef("onExecute"),St("getHotspot",$.some),St("getAnchorOverrides",ct({})),zm(),Ef("onItemExecute"),vi("lazySink"),pn("dom"),ei("onOpen"),Es("splitDropdownBehaviours",[nu,no,_o]),St("matchWidth",!1),St("useMinWidth",!1),St("eventOrder",{}),vi("role")].concat(zh())),vS=ct([bu({factory:Xl,schema:[pn("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:jn([_o.revoke()])}},overrides:function(u){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(h){h.getSystem().getByUid(u.uid).each(ma)},buttonBehaviours:jn([Ei.config({toggleOnExecute:!1,toggleClass:u.toggleClass})])}}}),bu({factory:Xl,schema:[pn("dom")],name:"button",defaults:function(){return{buttonBehaviours:jn([_o.revoke()])}},overrides:function(u){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(h){h.getSystem().getByUid(u.uid).each(function(v){u.onExecute(v,h)})}}}}),Ph({factory:{sketch:function(u){return{uid:u.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:u.text}}}},schema:[pn("text")],name:"aria-descriptor"}),Xd({schema:[Hl()],name:"menu",defaults:function(u){return{onExecute:function(h,v){h.getSystem().getByUid(u.uid).each(function(w){u.onItemExecute(w,h,v)})}}}}),Tv()]),pM=Ul({name:"SplitDropdown",configFields:lT(),partFields:vS(),factory:function(u,h,v,w){function A(ue){ti.getCurrent(ue).each(function(de){fi.highlightFirst(de),no.focusIn(de)})}function P(ue){m1(u,_n,ue,w,A,Cd.HighlightFirst).get(Gt)}function H(ue){return ma(mo(ue,u,"button")),$.some(!0)}var Y,X=qe(qe({},ia([ja(function(ue,de){ii(ue,u,"aria-descriptor").each(function(ye){var Se=Br("aria");Gr(ye.element,"id",Se),Gr(ue.element,"aria-describedby",Se)})})])),pv($.some(P)));return{uid:u.uid,dom:u.dom,components:h,apis:{repositionMenus:function(ue){Ei.isOn(ue)&&Jx(ue)}},eventOrder:qe(qe({},u.eventOrder),((Y={})[af()]=["disabling","toggling","alloy.base.behaviour"],Y)),events:X,behaviours:tu(u.splitDropdownBehaviours,[nu.config({others:{sandbox:function(ue){var de=mo(ue,u,"arrow");return $x(u,ue,{onOpen:function(){Ei.on(de),Ei.on(ue)},onClose:function(){Ei.off(de),Ei.off(ue)}})}}}),no.config({mode:"special",onSpace:H,onEnter:H,onDown:function(ue){return P(ue),$.some(!0)}}),_o.config({}),Ei.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:u.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(u,h){return u.repositionMenus(h)}}}),XD=Br("focus-button"),AA=function(u,h,v){return aT(u,{toolbarButtonBehaviours:[].concat(0<v.length?[tr("toolbarButtonWith",v)]:[]),getApi:yA,onSetup:u.onSetup},h)},UO=function(u,h,v){return ee(aT(u,{toolbarButtonBehaviours:[Eo.config({}),Ei.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<v.length?[tr("toolbarToggleButtonWith",v)]:[]),getApi:oT,onSetup:u.onSetup},h))},ZD=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],yS={button:sT(Mx,function(u,h){return AA(u,h.backstage.shared.providers,[])}),togglebutton:sT(ks,function(u,h){return UO(u,h.backstage.shared.providers,[])}),menubutton:sT(vn,function(u,h){return FC(u,"tox-tbtn",h.backstage,$.none())}),splitbutton:sT(function(u){return ga("SplitButton",zP,u)},function(u,h){return w=u,A=h.backstage.shared,oe=Br("channel-update-split-dropdown-display"),ue=Nr(Gt),de={getApi:v,onSetup:w.onSetup},pM.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:qe({"aria-pressed":!1},bA(w.tooltip,A.providers))},onExecute:function(ye){w.onAction(v(ye))},onItemExecute:function(ye,Se,Pe){},splitDropdownBehaviours:jn([sk(A.providers.isDisabled),Ls(),tr("split-dropdown-events",[on(XD,_o.focus),a1(de,ue),Rx(de,ue)]),u_.config({})]),eventOrder:((P={})[Ku()]=["alloy.base.behaviour","split-dropdown-events"],P),toggleClass:"tox-tbtn--enabled",lazySink:A.getSink,fetch:(H=v,Y=w,X=A.providers,function(ye){return Mv(function(Se){return Y.fetch(Se)}).map(function(Se){return $.from(SC(ee(By(Br("menu-value"),Se,function(Pe){Y.onItemAction(H(ye),Pe)},Y.columns,Y.presets,ug.CLOSE_ON_EXECUTE,Y.select.getOr(uo),X),{movement:Ux(Y.columns,Y.presets),menuBehaviours:Ox("auto"!==Y.columns?[]:[ja(function(Pe,Oe){sw(Pe,4,JM(Y.presets)).each(function(Re){no.setGridSize(Pe,Re.numRows,Re.numColumns)})})])})))})}),parts:{menu:eC(0,0,w.presets)},components:[pM.parts.button(iT(w.icon,w.text,$.none(),$.some(oe),$.some([Ei.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),A.providers)),pM.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Z_("chevron-down",A.providers.icons)},buttonBehaviours:jn([sk(A.providers.isDisabled),Ls(),PM()])}),pM.parts["aria-descriptor"]({text:A.providers.translate("To open the popup, press Shift+Enter")})]});function v(ye){return{isDisabled:function(){return Vr.isDisabled(ye)},setDisabled:function(Se){return Vr.set(ye,Se)},setIconFill:function(Se,Pe){Ya(ye.element,'svg path[id="'+Se+'"], rect[id="'+Se+'"]').each(function(Oe){Gr(Oe,"fill",Pe)})},setIconStroke:function(Se,Pe){Ya(ye.element,'svg path[id="'+Se+'"], rect[id="'+Se+'"]').each(function(Oe){Gr(Oe,"stroke",Pe)})},setActive:function(Se){Gr(ye.element,"aria-pressed",Se),Ya(ye.element,"span").each(function(Pe){ye.getSystem().getByDom(Pe).each(function(Oe){return Ei.set(Oe,Se)})})},isActive:function(){return Ya(ye.element,"span").exists(function(Se){return ye.getSystem().getByDom(Se).exists(Ei.isOn)})}}}var w,A,P,H,Y,X,oe,ue,de}),grouptoolbarbutton:sT(function(u){return ga("GroupToolbarButton",bO,u)},function(u,h,v){var w,A,H,Y,X,oe=v.ui.registry.getAll().buttons,ue=((w={})[rx]=h.backstage.shared.header.isPositionedAtTop()?Za.TopToBottom:Za.BottomToTop,w);if(Ex(v)!==Gf.floating)throw new Error("Toolbar groups are only supported when using floating toolbar mode");return H=function(de){return cT(v,{buttons:oe,toolbar:de,allowToolbarGroups:!1},h,$.none())},Y=ue,pS.sketch({lazySink:(X=h.backstage.shared).getSink,fetch:function(){return Mv(function(de){de(nn(H(A.items),gg))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:iT((A=u).icon,A.text,A.tooltip,$.none(),$.none(),X.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:Y}}}})}),styleSelectButton:function(u,h){return sS(u,v=h.backstage,NO(u,qe({type:"advanced"},v.styleselect)));var v},fontsizeSelectButton:function(u,h){return sS(u,h.backstage,LO(u))},fontSelectButton:function(u,h){return sS(u,h.backstage,RO(u))},formatButton:function(u,h){return sS(u,h.backstage,UD(u))},alignMenuButton:function(u,h){return sS(u,h.backstage,EO(u))}},jO={styleselect:yS.styleSelectButton,fontsizeselect:yS.fontsizeSelectButton,fontselect:yS.fontSelectButton,formatselect:yS.formatButton,align:yS.alignMenuButton},cT=function(u,h,v,w){var A,P,H,X=!1===(H=h.toolbar)?[]:void 0===H||!0===H?(A=h.buttons,P=nn(ZD,function(oe){var ue=mt(oe.items,function(de){return hr(A,de)||hr(jO,de)});return{name:oe.name,items:ue}}),mt(P,function(oe){return 0<oe.items.length})):Pr(H)?nn(H.split("|"),function(oe){return{items:oe.trim().split(" ")}}):zn(H,function(oe){return hr(oe,"name")&&hr(oe,"items")})?H:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]);return mt(nn(X,function(oe){var ue=dr(oe.items,function(de){return 0===de.trim().length?[]:(ye=u,Oe=h.allowToolbarGroups,Re=v,Ne=w,rn(Se=h.buttons,(Pe=de).toLowerCase()).orThunk(function(){return Ne.bind(function(We){return sn(We,function(Te){return rn(Se,Te+Pe.toLowerCase())})})}).fold(function(){return rn(jO,Pe.toLowerCase()).map(function(We){return We(ye,Re)}).orThunk(function(){return $.none()})},function(We){return"grouptoolbarbutton"!==We.type||Oe?(Ve=Re,Qe=ye,rn(yS,(Te=We).type).fold(function(){return console.error("skipping button defined by",Te),$.none()},function(lt){return $.some(lt(Te,Ve,Qe))})):(console.warn("Ignoring the '"+Pe+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),$.none());var Te,Ve,Qe}).toArray());var ye,Se,Pe,Oe,Re,Ne});return{title:$.from(u.translate(oe.name)),items:ue}}),function(oe){return 0<oe.items.length})},IA=fu(),OA=IA.os.isiOS()&&IA.os.version.major<=12,EA=Object.freeze({__proto__:null,render:function(u,h,v,w,A){var P=Nr(0),H=h.outerContainer;Vv(u);var Y=it.fromDom(A.targetNode),X=oa(zi(Y));ux(Y,h.mothership,lu),Vg(X,h.uiMothership),u.on("PostRender",function(){dM(u,h,v,w),P.set(u.getWin().innerWidth),Su.setMenubar(H,AD(u,v)),Su.setSidebar(H,v.sidebar),function(Ne,We){function Te(){var En=Ut.get();En.left===Ft.innerWidth&&En.top===Ft.innerHeight||(Ut.set(Ja(Ft.innerWidth,Ft.innerHeight)),Bx(Ne))}function Ve(){var En=Ne.getDoc().documentElement,pr=dn.get();pr.left===En.offsetWidth&&pr.top===En.offsetHeight||(dn.set(Ja(En.offsetWidth,En.offsetHeight)),Bx(Ne))}function Qe(En){return Ne.fire("ScrollContent",En)}var lt=Ne.dom,Ft=Ne.getWin(),Tt=Ne.getDoc().documentElement,Ut=Nr(Ja(Ft.innerWidth,Ft.innerHeight)),dn=Nr(Ja(Tt.offsetWidth,Tt.offsetHeight));lt.bind(Ft,"resize",Te),lt.bind(Ft,"scroll",Qe);var Jt=Lg(it.fromDom(Ne.getBody()),"load",Ve),yn=We.uiMothership.element;Ne.on("hide",function(){to(yn,"display","none")}),Ne.on("show",function(){Lo(yn,"display")}),Ne.on("NodeChange",Ve),Ne.on("remove",function(){Jt.unbind(),lt.unbind(Ft,"resize",Te),lt.unbind(Ft,"scroll",Qe),Ft=null})}(u,h)});var ue,de,ye,Se,Pe=Su.getSocket(H).getOrDie("Could not find expected socket element");OA&&(wa(Pe.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),de=function(){u.fire("ScrollContent")},ye=null,Se=function(){for(var Ne=[],We=0;We<arguments.length;We++)Ne[We]=arguments[We];_l(ye)&&(ye=setTimeout(function(){ye=null,de.apply(null,Ne)},20))},ue=Js(Pe.element,"scroll",Se),u.on("remove",ue.unbind)),uC(u,h),u.addCommand("ToggleSidebar",function(Ne,We){Su.toggleSidebar(H,We),u.fire("ToggleSidebar")}),u.addQueryValueHandler("ToggleSidebar",function(){return Su.whichSidebar(H)});var Oe=Ex(u);return Oe!==Gf.sliding&&Oe!==Gf.floating||u.on("ResizeWindow ResizeEditor ResizeContent",function(){var Ne=u.getWin().innerWidth;Ne!==P.get()&&(Su.refreshToolbar(h.outerContainer),P.set(Ne))}),{iframeContainer:Pe.element.dom,editorContainer:H.element.dom,api:{enable:function(){i1(h,!1)},disable:function(){i1(h,!0)},isDisabled:function(){return Vr.isDisabled(H)}}}}}),fT=Object.freeze({__proto__:null,render:function(u,h,v,w,A){var P=h.mothership,H=h.uiMothership,Y=h.outerContainer,X=Nr(null),oe=it.fromDom(A.targetNode),ue=function XP(u,h,v,w,A){function P(){return Ve.get()&&!u.removed}function H(Qe){return Te?Qe.fold(ct(0),function(lt){return 1<lt.components().length?Hu(lt.components()[1].element):0}):0}function Y(){ue.broadcastOn([Yg()],{})}function X(Qe){var lt,Ft,Tt,Ut,dn;void 0===Qe&&(Qe=!1),P()&&(Se||(lt=Oe.getOrThunk(function(){var Jt=xA(As(Da(),"margin-left")).getOr(0);return Qt(Da())-Pl(h).left+Jt}),to(A.get().element,"max-width",lt+"px")),Te&&Su.refreshToolbar(de),Se||(Ft=H(Su.getToolbar(de)),Tt=Sl(h),Ut=Ne()?Math.max(Tt.y-Hu(A.get().element)+Ft,0):Tt.bottom,wa(de.element,{position:"absolute",top:Math.round(Ut)+"px",left:Math.round(Tt.x)+"px"})),Pe&&(dn=A.get(),Qe?Zf.reset(dn):Zf.refresh(dn)),Y())}function oe(Qe){var lt,Ft;void 0===Qe&&(Qe=!0),!Se&&Pe&&P()&&(lt=Re.getDockingMode(),(Ft=function(Tt){switch(Ey(u)){case P0.auto:var Ut=H(Su.getToolbar(de)),dn=Hu(Tt.element)-Ut,Jt=Sl(h);if(Jt.y>dn)return"top";var yn=so(h),En=Math.max(yn.dom.scrollHeight,Hu(yn));return Jt.bottom<En-dn||Aa().bottom<Jt.bottom-dn?"bottom":"top";case P0.bottom:return"bottom";default:return"top"}}(A.get()))!==lt&&(function(Tt){var Ut=A.get();Zf.setModes(Ut,[Tt]),Re.setDockingMode(Tt);var dn=Ne()?Za.TopToBottom:Za.BottomToTop;Gr(Ut.element,rx,dn)}(Ft),Qe&&X(!0)))}var ue=v.uiMothership,de=v.outerContainer,ye=bv.DOM,Se=Py(u),Pe=Ly(u),Oe=Jb(u).or(wA(u)),Re=w.shared.header,Ne=Re.isPositionedAtTop,We=Ex(u),Te=We===Gf.sliding||We===Gf.floating,Ve=Nr(!1);return{isVisible:P,isPositionedAtTop:Ne,show:function(){Ve.set(!0),to(de.element,"display","flex"),ye.addClass(u.getBody(),"mce-edit-focus"),Lo(ue.element,"display"),oe(!1),X()},hide:function(){Ve.set(!1),v.outerContainer&&(to(de.element,"display","none"),ye.removeClass(u.getBody(),"mce-edit-focus")),to(ue.element,"display","none")},update:X,updateMode:oe,repositionPopups:Y}}(u,oe,h,w,X),de=u.getParam("toolbar_persist",!1,"boolean");function ye(){var Pe;X.get()?ue.show():(X.set(Su.getHeader(Y).getOrDie()),Vg(Pe=gw(u),P),Vg(Pe,H),dM(u,h,v,w),Su.setMenubar(Y,AD(u,v)),ue.show(),function(Oe,Re,Ne,We){function Te(lt){var Ft=SA(Re,Ne.isPositionedAtTop()),Tt=Ft.pos,Ut=Ft.bounds,dn=Ve.get(),Jt=dn.pos,yn=dn.bounds,En=Ut.height!==yn.height||Ut.width!==yn.width;Ve.set({pos:Tt,bounds:Ut}),En&&Bx(Oe,lt),Ne.isVisible()&&(Jt!==Tt?Ne.update(!0):En&&(Ne.updateMode(),Ne.repositionPopups()))}var Ve=Nr(SA(Re,Ne.isPositionedAtTop()));We||(Oe.on("activate",Ne.show),Oe.on("deactivate",Ne.hide)),Oe.on("SkinLoaded ResizeWindow",function(){return Ne.update(!0)}),Oe.on("NodeChange keydown",function(lt){Ty.requestAnimationFrame(function(){return Te(lt)})}),Oe.on("ScrollWindow",function(){return Ne.updateMode()});var Qe=Dh();Qe.set(Lg(it.fromDom(Oe.getBody()),"load",Te)),Oe.on("remove",function(){Qe.clear()})}(u,oe,ue,de),u.nodeChanged())}return OO(u),u.on("show",ye),u.on("hide",ue.hide),de||(u.on("focus",ye),u.on("blur",ue.hide)),u.on("init",function(){(u.hasFocus()||de)&&ye()}),uC(u,h),{editorContainer:Y.element.dom,api:{show:function(){ue.show()},hide:function(){ue.hide()},enable:function(){i1(h,!1)},disable:function(){i1(h,!0)},isDisabled:function(){return Vr.isDisabled(Y)}}}}}),dT="contexttoolbar-hide",YO=function(u,h){var v,w,A,P,H=u.label.fold(function(){return{}},function(oe){return{"aria-label":oe}}),Y=Li(zy.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:u.initValue(),inputAttributes:H,selectOnFocus:!0,inputBehaviours:jn([no.config({mode:"special",onEnter:function(oe){return X.findPrimary(oe).map(function(ue){return ma(ue),!0})},onLeft:function(oe,ue){return ue.cut(),$.none()},onRight:function(oe,ue){return ue.cut(),$.none()}})])})),X=(v=Y,A=h,P=nn(w=u.commands,function(oe){return Li(("contextformtogglebutton"===oe.type?function(ue,de,ye){var Pe=an(de.original,["primary"]),Oe=Vs(ks(qe(qe({},Pe),{type:"togglebutton",onAction:Gt})));return UO(Oe,ye.backstage.shared.providers,[BO(ue,de)])}:function(ue,de,ye){var Pe=an(de.original,["primary"]),Oe=Vs(Mx(qe(qe({},Pe),{type:"button",onAction:Gt})));return AA(Oe,ye.backstage.shared.providers,[BO(ue,de)])})(v,oe,{backstage:{shared:{providers:A}}}))}),{asSpecs:function(){return nn(P,function(oe){return oe.asSpec()})},findPrimary:function(oe){return sn(w,function(ue,de){return ue.primary?$.from(P[de]).bind(function(ye){return ye.getOpt(oe)}).filter(qr(Vr.isDisabled)):$.none()})}});return[{title:$.none(),items:[Y.asSpec()]},{title:$.none(),items:X.asSpecs()}]},KD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},PA={maxHeightFunction:np(),maxWidthFunction:pA()},qO=Br("forward-slide"),XO=Br("backward-slide"),RA=Br("change-slide-event"),LA="tox-pop--resizing",$D="tox-pop--transition",ZP={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},ZO=(hM=["Infinity",(mS="[0-9]+")+"\\."+hT(mS)+hT(MA="[eE][+-]?[0-9]+"),"\\."+mS+hT(MA),mS+hT(MA)].join("|"),new RegExp("^([+-]?(?:"+hM+"))(.*)$"));function hT(u){return"(?:"+u+")?"}function NA(u,h){function v(){var w=h.getOptions(u),A=h.getCurrent(u).map(h.hash),P=Cs();return nn(w,function(H){return{type:"togglemenuitem",text:h.display(H),onSetup:function(Y){function X(ue){ue&&(P.on(function(de){return de.setActive(!1)}),P.set(Y)),Y.setActive(ue)}X(Sr(A,h.hash(H)));var oe=h.watcher(u,H,X);return function(){P.clear(),oe()}},onAction:function(){return h.setCurrent(u,H)}}})}u.ui.registry.addMenuButton(h.name,{tooltip:h.text,icon:h.icon,fetch:function(w){return w(v())},onSetup:h.onToolbarSetup}),u.ui.registry.addNestedMenuItem(h.name,{type:"nestedmenuitem",text:h.text,getSubmenuItems:v,onSetup:h.onMenuSetup})}function BA(u,h){return function(){u.execCommand("mceToggleFormat",!1,h)}}function bS(u,h){return v_(u,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(v){v.setDisabled(u.mode.isReadOnly()||!u.undoManager[h]())})}function y_(u,h){return{type:"makeshift",x:u,y:h}}function FA(u){return"longpress"===u.type||0===u.type.indexOf("touch")}function VA(u,h,v){switch(v){case"node":return{type:"node",node:$.some(it.fromDom((w=u).selection.getNode())),root:it.fromDom(w.getBody())};case"point":return function pT(u,h){return"contextmenu"===h.type||"longpress"===h.type?u.inline?function(Y){if(FA(Y)){var X=Y.touches[0];return y_(X.pageX,X.pageY)}return y_(Y.pageX,Y.pageY)}(h):(v=u.getContentAreaContainer(),w=function(Y){if(FA(Y)){var X=Y.touches[0];return y_(X.clientX,X.clientY)}return y_(Y.clientX,Y.clientY)}(h),A=bv.DOM.getPos(v),y_(w.x+A.x,w.y+A.y)):JA(u);var v,w,A}(u,h);case"selection":return JA(u)}var w}function HA(u,h,v,w,A,P){function H(){var Se,Pe,Oe,Re,Ne,We,Te,Ve,Qe,lt;Oe=v(),Re=w,Ne=A,Te=!(de||oe||ue&&ye),Qe=VA(Se=u,Pe=h,Ve=We=P),lt=qe({bubble:ry(0,"point"===Ve?12:0,QA),layouts:QO,overrides:{maxWidthFunction:pA(),maxHeightFunction:np()}},Qe),C1(Oe,ug.CLOSE_ON_EXECUTE,Re,!0).map(function(Tt){Pe.preventDefault(),Rs.showMenuWithinBounds(Ne,{anchor:lt},{menu:{markers:Xb("normal"),highlightImmediately:Te},data:Tt,type:"horizontal"},function(){return $.some(FO(Se,Re.shared,"node"===We?"node":"selection"))}),Se.fire(dT)})}var Y,X=fu(),oe=X.os.isiOS(),ue=X.os.isOSX(),de=X.os.isAndroid(),ye=X.deviceType.isTouch();(ue||oe)&&"node"!==P?(Y=function(){(function(Se){function Pe(){Ty.setEditorTimeout(Se,function(){Se.selection.setRng(Oe)},10),We()}var Oe=Se.selection.getRng();function Re(Te){Te.preventDefault(),Te.stopImmediatePropagation()}function Ne(){return We()}Se.once("touchend",Pe),Se.on("mousedown",Re,!0),Se.once("longpresscancel",Ne);var We=function(){Se.off("touchend",Pe),Se.off("longpresscancel",Ne),Se.off("mousedown",Re)}})(u),H()},function(Se,Pe){var Oe=Se.selection;if(!(Oe.isCollapsed()||Pe.touches.length<1)){var Re=Pe.touches[0],Ne=Oe.getRng();return Bf(Se.getWin(),Gm.domRange(Ne)).exists(function(We){return We.left<=Re.clientX&&We.right>=Re.clientX&&We.top<=Re.clientY&&We.bottom>=Re.clientY})}}(u,h)?Y():(u.once("selectionchange",Y),u.once("touchend",function(){return u.off("selectionchange",Y)}))):H()}function JD(u){return"string"==typeof u?u.split(/[ ,]/):u}function WA(u){return u.getParam("contextmenu_never_use_native",!1,"boolean")}function QD(u){return Pr(u)?"|"===u:"separator"===u.type}function KO(u,h){if(0===h.length)return u;var v=ku(u).filter(function(w){return!QD(w)}).fold(function(){return[]},function(w){return[s2]});return u.concat(v).concat(h).concat([s2])}function gM(u,h){return"longpress"!==h.type&&(2!==h.button||h.target===u.getBody()&&""===h.pointerType)}function mM(u,h){return gM(u,h)?u.selection.getStart(!0):h.target}function $O(u,h,v){function w(Y){return Rs.hide(H)}function A(Y){var X;WA(u)&&Y.preventDefault(),Y.ctrlKey&&!WA(u)||!1===u.getParam("contextmenu")||(X=function(oe,ue){var de=oe.getParam("contextmenu_avoid_overlap","","string"),ye=gM(oe,ue)?"selection":"point";if(Fu(de)){var Se=mM(oe,ue);return h1(it.fromDom(Se),de)?"node":ye}return ye}(u,Y),(P()?HA:function(oe,ue,de,ye,Se,Pe){var Oe=de(),Re=VA(oe,ue,Pe);C1(Oe,ug.CLOSE_ON_EXECUTE,ye,!1).map(function(Ne){ue.preventDefault(),Rs.showMenuAt(Se,{anchor:Re},{menu:{markers:Xb("normal")},data:Ne})})})(u,Y,function(){var oe,ue,de,ye=mM(u,Y),Se=u.ui.registry.getAll(),Pe=(de=(ue=u).ui.registry.getAll().contextMenus,$.from(ue.getParam("contextmenu")).map(JD).getOrThunk(function(){return mt(JD("link linkchecker image imagetools table spellchecker configurepermanentpen"),function(Ne){return hr(de,Ne)})})),Oe=Se.contextMenus,Re=ye;return 0<(oe=yo(Pe,function(Ne,We){return rn(Oe,We.toLowerCase()).map(function(Te){var Ve=Te.update(Re);if(Pr(Ve))return KO(Ne,Ve.split(" "));if(0<Ve.length){var Qe=nn(Ve,eE);return KO(Ne,Qe)}return Ne}).getOrThunk(function(){return Ne.concat([We])})},[])).length&&QD(oe[oe.length-1])&&oe.pop(),oe},v,H,X))}var P=fu().deviceType.isTouch,H=Ma(Rs.sketch({dom:{tag:"div"},lazySink:h,onEscape:function(){return u.focus()},onShow:function(){return v.setContextMenuState(!0)},onHide:function(){return v.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:jn([tr("dismissContextMenu",[on(Fp(),function(Y,X){ai.close(Y),u.focus()})])])}));u.on("init",function(){var Y="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(P()?"":" ResizeWindow");u.on(Y,w),u.on("longpress contextmenu",A)})}function vM(u){return function(h){return h.translate(-u.left,-u.top)}}function yM(u){return function(h){return h.translate(u.left,u.top)}}function V1(u){return function(h,v){return yo(u,function(w,A){return A(w)},Ja(h,v))}}function gT(u,h,v){return u.fold(V1([yM(v),vM(h)]),V1([vM(h)]),V1([]))}function bM(u,h,v){return u.fold(V1([yM(v)]),V1([]),V1([yM(h)]))}function xS(u,h,v){return u.fold(V1([]),V1([vM(v)]),V1([yM(h),vM(v)]))}function JO(u,h,v){var w=u.fold(function(A,P){return{position:$.some("absolute"),left:$.some(A+"px"),top:$.some(P+"px")}},function(A,P){return{position:$.some("absolute"),left:$.some(A-v.left+"px"),top:$.some(P-v.top+"px")}},function(A,P){return{position:$.some("fixed"),left:$.some(A+"px"),top:$.some(P+"px")}});return qe({right:$.none(),bottom:$.none()},w)}function GA(u,h,v,w){function A(P,H){return function(Y,X){var oe=P(h,v,w);return H(Y.getOr(oe.left),X.getOr(oe.top))}}return u.fold(A(xS,u2),A(bM,vg),A(gT,x_))}function UA(u,h){var v=Wa(u,h);return Mi(v)?NaN:parseInt(v,10)}function YA(u,h,v,w){return sn(u,function(A){var P,H,Y=A.sensor,X=A.range.left,oe=A.range.top,ue=bM(h,P=v,H=w),de=bM(Y,P,H);return Math.abs(ue.left-de.left)<=X&&Math.abs(ue.top-de.top)<=oe?$.some({output:GA(A.output,h,v,w),extra:A.extra}):$.none()})}function e2(u,h){var v;u.getSystem().addToGui(h),Xr((v=h).element).filter(Au).each(function(w){Di(w,"z-index").each(function(A){Gr(w,eI,A)}),to(w,"z-index",As(v.element,"z-index"))})}function JP(u){Xr(u.element).filter(Au).each(function(h){Ds(h,eI).fold(function(){return Lo(h,"z-index")},function(v){return to(h,"z-index",v)}),ls(h,eI)}),u.getSystem().removeFromGui(u)}function t2(u,h,v){return u.getSystem().build(xu.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[h]},events:v}))}function qA(u,h){return{bounds:u.getBounds(),height:Fr(h.element),width:It(h.element)}}function n2(u,h,v,w,A){var P=v.update(w,A),H=v.getStartData().getOrThunk(function(){return qA(h,u)});P.each(function(Y){var X,oe,ue,de,ye,Pe,Oe,Re,Ne,We,Te,Ve,Qe,lt,Ft,Tt,Ut,dn,Jt,yn,En,pr,Wr,No,wi=u,Ui=H,Ni=Y,Zo=(X=h).getTarget(wi.element);X.repositionTarget&&(oe=$o(Dt(wi.element)),ue=Le(Zo),En=Di(yn=Zo,"left"),pr=Di(yn,"top"),Wr=Di(yn,"position"),No=function(Xi,$i,Ji){return("fixed"===Ji?x_:u2)(parseInt(Xi,10),parseInt($i,10))},de=(En.isSome()&&pr.isSome()&&Wr.isSome()?$.some(No(En.getOrDie(),pr.getOrDie(),Wr.getOrDie())):$.none()).getOrThunk(function(){var Xi=Pl(yn);return vg(Xi.left,Xi.top)}),ye=wi,Pe=de,Oe=oe,Re=ue,Ne=Ni,We=Ui,Ve=X.snaps.fold(function(){var Xi,$i,Ji=gT((Xi=Ne.left,$i=Ne.top,Pe.fold(function(Si,Na){return u2(Si+Xi,Na+$i)},function(Si,Na){return vg(Si+Xi,Na+$i)},function(Si,Na){return x_(Si+Xi,Na+$i)})),Oe,Re);return x_(Ji.left,Ji.top)},function(Xi){var $i=function jA(u,h,v,w,A,P){var H,Y,X,oe,ue,de,ye=(H=v,Y=w,ue=UA(oe=u.element,(X=h).leftAttr),de=UA(oe,X.topAttr),(isNaN(ue)||isNaN(de)?$.none():$.some(Ja(ue,de))).fold(function(){return H},function(We){return x_(We.left+Y.left,We.top+Y.top)})),Se=(h.mustSnap?tE:nE)(u,h,ye,A,P),Pe=gT(ye,A,P),Oe=h,Re=Pe,Ne=u.element;return Gr(Ne,Oe.leftAttr,Re.left+"px"),Gr(Ne,Oe.topAttr,Re.top+"px"),Se.fold(function(){return{coord:x_(Pe.left,Pe.top),extra:$.none()}},function(We){return{coord:We.output,extra:We.extra}})}(ye,Xi,Pe,Ne,Oe,Re);return $i.extra.each(function(Ji){Xi.onSensor(ye,Ji)}),$i.coord}),Ft=(Te=We).bounds,Tt=bM(Ve,Qe=Oe,lt=Re),Ut=lf(Tt.left,Ft.x,Ft.x+Ft.width-Te.width),dn=lf(Tt.top,Ft.y,Ft.y+Ft.height-Te.height),Jt=vg(Ut,dn),Tu(Zo,JO(Ve.fold(function(){var Xi=xS(Jt,Qe,lt);return u2(Xi.left,Xi.top)},ct(Jt),function(){var Xi=gT(Jt,Qe,lt);return x_(Xi.left,Xi.top)}),0,ue))),X.onDrag(wi,Zo,Ni)})}function r2(u,h,v,w){h.each(JP),v.snaps.each(function(P){var H,Y;ls(Y=u.element,(H=P).leftAttr),ls(Y,H.topAttr)});var A=v.getTarget(u.element);w.reset(),v.onDrop(u,A)}function mT(u){return function(h,v){function w(A){v.setStartData(qA(h,A))}return ia(ln([on(If(),function(A){v.getStartData().each(function(){return w(A)})})],u(h,v,w),!0))}}function o2(u,h,v){return[on(Wc(),function(w,A){var P,H,Y,X,oe;0===A.event.raw.button&&(A.stop(),Y={drop:P=function(){return r2(w,$.some(X),u,h)},delayDrop:(H=fk(P,200)).schedule,forceDrop:P,move:function(ue){H.cancel(),n2(w,u,h,l2,ue)}},X=t2(w,u.blockerClass,(oe=Y,ia([on(Wc(),oe.forceDrop),on(_b(),oe.drop),on(Im(),function(ue,de){oe.move(de.event)}),on(Sg(),oe.delayDrop)]))),v(w),e2(w,X))})]}function XA(u,h,v){function w(P){r2(P,A.get(),u,h),A.clear()}var A=Cs();return[on(ul(),function(P,H){H.stop();var X,oe,ue,de=t2(P,u.blockerClass,(oe=X=function Y(){return w(P)},ue=function(ye){n2(P,u,h,rE,ye)},ia([on(ul(),oe),on(Oa(),X),on(Ca(),X),on(Hc(),function(ye,Se){ue(Se.event)})])));A.set(de),v(P),e2(P,de)}),on(Hc(),function(P,H){H.stop(),n2(P,u,h,rE,H.event)}),on(Oa(),function(P,H){H.stop(),w(P)}),on(Ca(),w)]}function ZA(u,h,v,w,A,P){return u.fold(function(){return _S.snap({sensor:vg(v-20,w-20),range:Ja(A,P),output:vg($.some(v),$.some(w)),extra:{td:h}})},function(H){var Y=v-20,X=w-20,oe=H.element.dom.getBoundingClientRect();return _S.snap({sensor:vg(Y,X),range:Ja(40,40),output:vg($.some(v-oe.width/2),$.some(w-oe.height/2)),extra:{td:h}})})}function i2(u,h,v){return{getSnapPoints:u,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(w,A){var P=A.td,H=h.get(),Y=P;H.exists(function(X){return fn(X,Y)})||(h.set(P),v(P))},mustSnap:!0}}function a2(u){return Li(Xl.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:jn([_S.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:u}),u_.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}var H1,qy,$A={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(u){return u.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(u){return h=["fixed","relative","empty"],$.from(ZO.exec(u)).bind(function(v){var w=Number(v[1]),A=v[2],P=A;return Ir(h,function(H){return Ir(ZP[H],function(Y){return P===Y})})?$.some({value:w,unit:A}):$.none()}).map(function(v){return v.value+v.unit}).getOr(u);var h},display:_n,watcher:function(u,h,v){return u.formatter.formatChanged("lineheight",v,!1,{value:h}).unbind},getCurrent:function(u){return $.from(u.queryCommandValue("LineHeight"))},setCurrent:function(u,h){return u.execCommand("LineHeight",!1,h)}},JA=function(u){return{type:"selection",root:it.fromDom(u.selection.getNode())}},QO={onLtr:function(){return[Ju,Ou,dl,wc,$s,Xc,ag,D0,$d,Ps,Hf,Lh]},onRtl:function(){return[Ju,dl,Ou,$s,wc,Xc,ag,D0,Hf,Lh,$d,Ps]}},QA={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},s2={type:"separator"},eE=function(u){function h(w){return{text:w.text,icon:w.icon,disabled:w.disabled,shortcut:w.shortcut}}var v;if(Pr(u))return u;switch(u.type){case"separator":return s2;case"submenu":return qe(qe({type:"nestedmenuitem"},h(u)),{getSubmenuItems:function(){var w=u.getSubmenuItems();return Pr(w)?w:nn(w,eE)}});default:return qe(qe({type:"menuitem"},h(u)),{onAction:(v=u.onAction,function(){return v()})})}},b_=bs([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),u2=b_.offset,vg=b_.absolute,x_=b_.fixed,tE=function(u,h,v,w,A){var P=h.getSnapPoints(u);return YA(P,v,w,A).orThunk(function(){return yo(P,function(H,Y){var X,oe,ue,de,ye,Se,Pe,Oe=(X=Y.sensor,de=bM(v,oe=w,ue=A),ye=bM(X,oe,ue),Se=Math.abs(de.left-ye.left),Pe=Math.abs(de.top-ye.top),Ja(Se,Pe));return H.deltas.fold(function(){return{deltas:$.some(Oe),snap:$.some(Y)}},function(Re){return(Oe.left+Oe.top)/2<=(Re.left+Re.top)/2?{deltas:$.some(Oe),snap:$.some(Y)}:H})},{deltas:$.none(),snap:$.none()}).snap.map(function(H){return{output:GA(H.output,v,w,A),extra:H.extra}})})},nE=function(u,h,v,w,A){return YA(h.getSnapPoints(u),v,w,A)},QP=Object.freeze({__proto__:null,snapTo:function(u,h,v,w){var A,P,H,Y=h.getTarget(u.element);h.repositionTarget&&(A=$o(Dt(u.element)),P=Le(Y),Tu(Y,JO(GA((H=w).output,H.output,A,P),0,P)))}}),eI="data-initial-z-index",eR=Pi("snaps",[pn("getSnapPoints"),ei("onSensor"),pn("leftAttr"),pn("topAttr"),St("lazyViewport",Aa),St("mustSnap",!1)]),tI=[St("useFixed",uo),pn("blockerClass"),St("getTarget",_n),St("onDrag",Gt),St("repositionTarget",!0),St("onDrop",Gt),Zi("getBounds",Aa),eR],l2=Object.freeze({__proto__:null,getData:function(u){return $.from(Ja(u.x,u.y))},getDelta:function(u,h){return Ja(h.left-u.left,h.top-u.top)}}),tR=ln(ln([],tI,!0),[ea("dragger",{handlers:mT(o2)})],!1),rE=Object.freeze({__proto__:null,getData:function(u){var h,v=u.raw.touches;return 1===v.length?$.some(Ja((h=v[0]).clientX,h.clientY)):$.none()},getDelta:function(u,h){return Ja(h.left-u.left,h.top-u.top)}}),nR=ln(ln([],tI,!0),[ea("dragger",{handlers:mT(XA)})],!1),rR=ln(ln([],tI,!0),[ea("dragger",{handlers:mT(function(u,h,v){return ln(ln([],o2(u,h,v),!0),XA(u,h,v),!0)})})],!1),_S=Qv({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:tR,touch:nR,mouseOrTouch:rR}),name:"dragging",active:{events:function(u,h){return u.dragger.handlers(u,h)}},extra:{snap:function(u){return{sensor:u.sensor,range:u.range,output:u.output,extra:$.from(u.extra)}}},state:Object.freeze({__proto__:null,init:function(){var u=$.none(),h=$.none(),v=ct({});return Uc({readState:v,reset:function(){u=$.none(),h=$.none()},update:function(w,A){return w.getData(A).bind(function(P){return H=w,Y=P,X=u.map(function(oe){return H.getDelta(oe,Y)}),u=$.some(Y),X;var H,Y,X})},getStartData:function(){return h},setStartData:function(w){h=$.some(w)}})}}),apis:QP});function oE(u,h,v){var w,A,P,H,Y,X,oe=it.fromDom(u.getContainer());Ht((w=u,A=h,P=v,H=Hu(oe),Y=Qt(oe),(X={}).height=uT(H+A.top,uw(w),ek(w)),P===H1.Both&&(X.width=uT(Y+A.left,Ax(w),Jb(w))),X),function(ue,de){return to(oe,de,_A(ue)),0}),u.fire("ResizeEditor")}function c2(u,h,v,w){return oE(u,Ja(20*v,20*w),h),$.some(!0)}function iE(u){function h(){return Ji.bind(Su.getHeader)}function v(){return Vo.value(We)}function w(){return Ji.bind(function(ui){return Su.getThrobber(ui)}).getOrDie("Could not find throbber element")}var A,P,H,Y,X=u.inline,oe=X?fT:EA,ue=Ly(u)?yO:NP,Ji=$.none(),de=fu(),ye=de.browser.isIE()?["tox-platform-ie"]:[],Se=de.deviceType.isTouch()?["tox-platform-touch"]:[],Pe=sC(u),Oe=gw(u),Re=cp.isRtl()?{attributes:{dir:"rtl"}}:{},Ne={attributes:((A={})[rx]=Pe?Za.BottomToTop:Za.TopToBottom,A)},We=Ma((P=fn(Da(),Oe)&&"grid"===As(Oe,"display"),H={dom:qe({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(ye).concat(Se)},Re),behaviours:jn([jl.config({useFixed:function(){return ue.isDocked(h)}})])},Y={dom:{styles:{width:document.body.clientWidth+"px"}},events:ia([on(_s(),function(){to(Bo.element,"width",document.body.clientWidth+"px")})])},ee(H,P?Y:{}))),Te=Li({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ve=function be(u,h,v){var w,A,P,H,Y,X,oe,ue,de,ye,Se,Pe,Oe,Re=Nr(!1),Ne={isPositionedAtTop:function(){return"top"===w.get()},getDockingMode:(w=Nr(sC(h)?"bottom":"top")).get,setDockingMode:w.set},We={shared:{providers:{icons:function(){return h.ui.registry.getAll().icons},menuItems:function(){return h.ui.registry.getAll().menuItems},translate:cp.translate,isDisabled:function(){return h.mode.isReadOnly()||h.ui.isDisabled()},getSetting:h.getParam.bind(h)},interpreter:function(Qe){return LD(dO,Qe,We)},anchors:aS(h,v,Ne.isPositionedAtTop),header:Ne,getSink:function(){return Vo.value(u)}},urlinput:xe(h),styleselect:(de=Nr([]),ye=Nr([]),Se=Nr([]),Pe=Nr([]),Oe=Nr(!(ue=function(Qe){var lt=Qe.items;return void 0!==lt&&0<lt.length?dr(lt,ue):[Qe.format]})),(oe=h).on("PreInit",function(Qe){var lt=p_(oe),Ft=DD(oe,lt,Te,Ve);de.set(Ft),ye.set(dr(Ft,ue))}),oe.on("addStyleModifications",function(Qe){var lt=DD(oe,Qe.items,Te,Ve);Se.set(lt),Oe.set(Qe.replace),Pe.set(dr(lt,ue))}),{getData:function(){var Qe=Oe.get()?[]:de.get(),lt=Se.get();return Qe.concat(lt)},getFlattenedKeys:function(){var Qe=Oe.get()?[]:ye.get(),lt=Pe.get();return Qe.concat(lt)}}),colorinput:{colorPicker:function(Qe,lt){ZT(X)(Qe,lt)},hasCustomColors:function(){return _w(Y)},getColors:function(){return bC(H)},getColorCols:(P=H=Y=X=h,function(){return ww(P)})},dialog:{isDraggableModal:(A=h,function(){return A.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return Re.get()},setContextMenuState:function(Qe){return Re.set(Qe)}};function Te(Qe){return function(){return oe.formatter.match(Qe)}}function Ve(Qe){return function(){var lt=oe.formatter.get(Qe);return void 0!==lt?$.some({tag:0<lt.length&&(lt[0].inline||lt[0].block)||"div",styles:oe.dom.parseStyle(oe.formatter.getCssText(Qe))}):$.none()}}return We}(We,u,function(){return Ji.bind(function(ui){return Te.getOpt(ui)}).getOrDie("Could not find a anchor bar element")}),Qe=Su.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ve,onEscape:function(){u.focus()}}),lt=Ex(u),Ft=Su.parts.toolbar(qe({dom:{tag:"div",classes:["tox-toolbar"]},getSink:v,providers:Ve.shared.providers,onEscape:function(){u.focus()},type:lt,lazyToolbar:function(){return Ji.bind(function(ui){return Su.getToolbar(ui)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return h().getOrDie("Could not find header element")}},Ne)),Tt=Su.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ve.shared.providers,onEscape:function(){u.focus()},type:lt}),Ut=Su.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),dn=Su.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),Jt=Su.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ve}),yn=u.getParam("statusbar",!0,"boolean")&&!X?$.some(function oR(u,h){var v,w,A,P,H,Y,X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(Ne=[],u.getParam("elementpath",!0,"boolean")&&Ne.push((Pe=u,Re=h,(Oe={}).delimiter||(Oe.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:jn([no.config({mode:"flow",selector:"div[role=button]"}),Vr.config({disabled:Re.isDisabled}),Ls(),pi.config({}),Eo.config({}),tr("elementPathEvents",[ja(function(Te,Ve){Pe.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return no.focusIn(Te)}),Pe.on("NodeChange",function(Qe){var lt,Ft,Tt=function(Ut){for(var dn=[],Jt=Ut.length;0<Jt--;){var yn=Ut[Jt];if(1===yn.nodeType&&!function(pr){if(1===pr.nodeType&&("BR"===pr.nodeName||pr.getAttribute("data-mce-bogus")||"bookmark"===pr.getAttribute("data-mce-type")))return 1}(yn)){var En=Pe.fire("ResolveName",{name:yn.nodeName.toLowerCase(),target:yn});if(En.isDefaultPrevented()||dn.push({name:En.name,element:yn}),En.isPropagationStopped())break}}return dn}(Qe.parents);Eo.set(Te,0<Tt.length?(lt=nn(Tt||[],function(Ut,dn){return Xl.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":dn,"tab-index":-1,"aria-level":dn+1},innerHtml:Ut.name},action:function(Jt){Pe.focus(),Pe.selection.select(Ut.element),Pe.nodeChanged()},buttonBehaviours:jn([W0(Re.isDisabled),Ls()])})}),Ft={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+Oe.delimiter+" "}},yo(lt.slice(1),function(Ut,dn){var Jt=Ut;return Jt.push(Ft),Jt.push(dn),Jt},[lt[0]])):[])})})])]),components:[]})),u.hasPlugin("wordcount")&&Ne.push((de=u,ye=h,Xl.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:jn([W0(ye.isDisabled),Ls(),pi.config({}),Eo.config({}),or.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),tr("wordcount-events",[bh(function(Te){var Ve=or.getValue(Te),Qe="words"===Ve.mode?"characters":"words";or.setValue(Te,{mode:Qe,count:Ve.count}),We(Te,Ve.count,Qe)}),ja(function(Te){de.on("wordCountUpdate",function(Ve){var Qe=or.getValue(Te).mode;or.setValue(Te,{mode:Qe,count:Ve.wordCount}),We(Te,Ve.wordCount,Qe)})})])]),eventOrder:((Se={})[af()]=["disabling","alloy.base.behaviour","wordcount-events"],Se)}))),u.getParam("branding",!0,"boolean")&&Ne.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(ue=cp.translate(["Powered by {0}","Tiny"]))+'">'+ue+"</a>"}}),v=0<Ne.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:Ne}]:[],P=h,Y=!(H=A=u).hasPlugin("autoresize"),w=(oe=!1===(X=H.getParam("resize",Y))?H1.None:"both"===X?H1.Both:H1.Vertical)===H1.None?$.none():$.some(Wf("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:P.translate("Resize")},behaviours:[_S.config({mode:"mouse",repositionTarget:!1,onDrag:function(Te,Ve,Qe){return oE(A,Qe,oe)},blockerClass:"tox-blocker"}),no.config({mode:"special",onLeft:function(){return c2(A,oe,-1,0)},onRight:function(){return c2(A,oe,1,0)},onUp:function(){return c2(A,oe,0,-1)},onDown:function(){return c2(A,oe,0,1)}}),pi.config({}),_o.config({})]},P.icons)),v.concat(w.toArray()))};function We(Te,Ve,Qe){return Eo.set(Te,[ph(ye.translate(["{0} "+Qe,Ve[Qe]]))])}}(u,Ve.shared.providers)):$.none(),En={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[Ut,dn]},pr=pw(u),Wr=sg(u),No=yf(u),wi=Su.parts.header({dom:qe({tag:"div",classes:["tox-editor-header"]},Ne),components:De([No?[Qe]:[],pr?[Tt]:Wr?[Ft]:[],Py(u)?[]:[Te.asSpec()]]),sticky:Ly(u),editor:u,sharedBackstage:Ve.shared}),Ui=De([Pe?[]:[wi],X?[]:[En],Pe?[wi]:[]]),Ni=De([[{dom:{tag:"div",classes:["tox-editor-container"]},components:Ui}],X?[]:yn.toArray(),[Jt]]),Zo=Ry(u),Xi=qe(qe({role:"application"},cp.isRtl()?{dir:"rtl"}:{}),Zo?{"aria-hidden":"true"}:{}),$i=Ma(Su.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(X?["tox-tinymce-inline"]:[]).concat(Pe?["tox-tinymce--toolbar-bottom"]:[]).concat(Se).concat(ye),styles:qe({visibility:"hidden"},Zo?{opacity:"0",border:"0"}:{}),attributes:Xi},components:Ni,behaviours:jn([Ls(),Vr.config({disableClass:"tox-tinymce--disabled"}),no.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));Ji=$.some($i),u.shortcuts.add("alt+F9","focus menubar",function(){Su.focusMenubar($i)}),u.shortcuts.add("alt+F10","focus toolbar",function(){Su.focusToolbar($i)}),u.addCommand("ToggleToolbarDrawer",function(){Su.toggleToolbarDrawer($i)}),u.addQueryStateHandler("ToggleToolbarDrawer",function(){return Su.isToolbarDrawerToggled($i)});var Si,Na,Zl,js,Jf,Ba,Td,au,ta,Qn=Nh($i),Bo=Nh(We);return Si=u,Na=Qn,Zl=Bo,js=Rm(),Jf=Js(js,"touchstart",ef),Ba=Js(js,"touchmove",function(ui){return ka(zp(),ui)}),Td=Js(js,"touchend",function(ui){return ka(O_(),ui)}),au=Js(js,"mousedown",ef),ta=Js(js,"mouseup",function(ui){0===ui.raw.button&&ms(_0(),{target:ui.target})}),Si.on("PostRender",function(){Si.on("click",Nu),Si.on("tap",Nu),Si.on("mouseup",vl),Si.on("mousedown",Ec),Si.on("ScrollWindow",yl),Si.on("ResizeWindow",bl),Si.on("ResizeEditor",Kl),Si.on("AfterProgressState",xl),Si.on("DismissPopups",bp)}),Si.on("remove",function(){Si.off("click",Nu),Si.off("tap",Nu),Si.off("mouseup",vl),Si.off("mousedown",Ec),Si.off("ScrollWindow",yl),Si.off("ResizeWindow",bl),Si.off("ResizeEditor",Kl),Si.off("AfterProgressState",xl),Si.off("DismissPopups",bp),au.unbind(),Jf.unbind(),Ba.unbind(),Td.unbind(),ta.unbind()}),Si.on("detach",function(){cy(Na),cy(Zl),Na.destroy(),Zl.destroy()}),{mothership:Qn,uiMothership:Bo,backstage:Ve,renderUI:function(){var ui,Qf;ue.setup(u,Ve.shared,h),function zA(u,h){var v,w,A,P,H,Y,X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne,We,Te,Ve,Qe,lt,Ft,Tt,Ut,dn,Jt=u;Tr([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(yn){Jt.ui.registry.addToggleButton(yn.name,{tooltip:yn.text,icon:yn.icon,onAction:mg(Jt,yn.cmd),onSetup:m_(Jt,yn.name)})}),Jt.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:mg(Jt,"JustifyNone")}),function KP(u){var h,v;(function(w){Lv.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(H,Y){w.ui.registry.addToggleButton(H.name,{tooltip:H.text,icon:H.icon,onSetup:m_(w,H.name),onAction:BA(w,H.name)})});for(var A=1;A<=6;A++){var P="h"+A;w.ui.registry.addToggleButton(P,{text:P.toUpperCase(),tooltip:"Heading "+A,onSetup:m_(w,P),onAction:BA(w,P)})}})(u),h=u,Lv.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(w){h.ui.registry.addButton(w.name,{tooltip:w.text,icon:w.icon,onAction:mg(h,w.action)})}),v=u,Lv.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(w){v.ui.registry.addToggleButton(w.name,{tooltip:w.text,icon:w.icon,onAction:mg(v,w.action),onSetup:m_(v,w.name)})})}(Ut=u),dn=Ut,Lv.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(yn){dn.ui.registry.addMenuItem(yn.name,{text:yn.text,icon:yn.icon,shortcut:yn.shortcut,onAction:mg(dn,yn.action)})}),dn.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:BA(dn,"code")}),Tt=B1(0,ye=ue=h,EO(de=oe=u)),de.ui.registry.addNestedMenuItem("align",{text:ye.shared.providers.translate("Align"),getSubmenuItems:function(){return Tt.items.validateItems(Tt.getStyleItems())}}),Oe=B1(0,Pe=ue,RO(Se=oe)),Se.ui.registry.addNestedMenuItem("fontformats",{text:Pe.shared.providers.translate("Fonts"),getSubmenuItems:function(){return Oe.items.validateItems(Oe.getStyleItems())}}),Re=oe,We=qe({type:"advanced"},(Ne=ue).styleselect),Te=B1(0,Ne,NO(Re,We)),Re.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return Te.items.validateItems(Te.getStyleItems())}}),Qe=B1(0,ue,UD(Ve=oe)),Ve.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return Qe.items.validateItems(Qe.getStyleItems())}}),Ft=B1(0,ue,LO(lt=oe)),lt.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return Ft.items.validateItems(Ft.getStyleItems())}}),(Y=H=u).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:bS(Y,"hasUndo"),onAction:mg(Y,"undo")}),Y.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:bS(Y,"hasRedo"),onAction:mg(Y,"redo")}),(X=H).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:bS(X,"hasUndo"),onAction:mg(X,"undo")}),X.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:bS(X,"hasRedo"),onAction:mg(X,"redo")}),function(yn){var En;(En=yn).addCommand("mceApplyTextcolor",function(No,wi){var Ui,Ni=No,Zo=wi;(Ui=En).undoManager.transact(function(){Ui.focus(),Ui.formatter.apply(Ni,{value:Zo}),Ui.nodeChanged()})}),En.addCommand("mceRemoveTextcolor",function(No){var wi,Ui=No;(wi=En).undoManager.transact(function(){wi.focus(),wi.formatter.remove(Ui,{value:null},null,!0),wi.nodeChanged()})});var pr=Nr(kw),Wr=Nr(kw);U0(yn,"forecolor","forecolor","Text color",pr),U0(yn,"backcolor","hilitecolor","Background color",Wr),Ac(yn,"forecolor","forecolor","Text color"),Ac(yn,"backcolor","hilitecolor","Background color")}(u),function $P(u){var h;u.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:mg(u,"mceToggleVisualAid")}),u.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:v_(h=u,"VisualAid",function(v){v.setActive(h.hasVisual)}),onAction:mg(u,"mceToggleVisualAid")})}(u),(A=u).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:v_(P=A,"NodeChange",function(yn){yn.setDisabled(!P.queryCommandState("outdent"))}),onAction:mg(A,"outdent")}),A.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:mg(A,"indent")}),NA(v=u,$A),$.from((w=v).getParam("content_langs",void 0,"array")).map(function(yn){return{name:"language",text:"Language",icon:"language",getOptions:ct(yn),hash:function(En){return Mi(En.customCode)?En.code:En.code+"/"+En.customCode},display:function(En){return En.title},watcher:function(En,pr,Wr){return En.formatter.formatChanged("lang",Wr,!1,{value:pr.code,customValue:pr.customCode}).unbind},getCurrent:function(En){return Qo(it.fromDom(En.selection.getNode()),function(pr){return $.some(pr).filter(Au).bind(function(Wr){return Ds(Wr,"lang").map(function(No){return{code:No,customCode:Ds(Wr,"data-mce-lang").getOrUndefined(),title:""}})})})},setCurrent:function(En,pr){return En.execCommand("Lang",!1,pr)},onToolbarSetup:function(En){var pr=Dh();return En.setActive(w.formatter.match("lang",{},void 0,!0)),pr.set(w.formatter.formatChanged("lang",En.setActive,!0)),pr.clear}}}).each(function(yn){return NA(v,yn)})}(u,Ve),$O(u,v,Ve),Qf=(ui=u).ui.registry.getAll().sidebars,Tr(ra(Qf),function(Uv){function jv(){return Sr($.from(ui.queryCommandValue("ToggleSidebar")),Uv)}var MM=Qf[Uv];ui.ui.registry.addToggleButton(Uv,{icon:MM.icon,tooltip:MM.tooltip,onAction:function(TS){ui.execCommand("ToggleSidebar",!1,Uv),TS.setActive(jv())},onSetup:function(TS){function DS(){return TS.setActive(jv())}return ui.on("ToggleSidebar",DS),function(){ui.off("ToggleSidebar",DS)}}})}),function ao(u,h,v){function w(Y){var X;!A.get()||"focusin"===(X=Y).type&&(X.composed?ca(X.composedPath()):$.from(X.target)).map(it.fromDom).filter(Au).exists(function(oe){return Ua(oe,"mce-pastebin")})||(Y.preventDefault(),Jn(h()),u.editorManager.setActive(u))}var A=Nr(!1),P=Cs();function H(Y){var X,oe,ue,de,ye,Se,Pe,Oe,Re,Ne;Y!==A.get()&&(A.set(Y),X=u,oe=h(),de=v.providers,Oe=oe.element,Re=ue=Y,Ne="data-mce-"+(ye="tabindex"),$.from(X.iframeElement).map(it.fromDom).each(function(We){Re?(Ds(We,ye).each(function(Te){return Gr(We,Ne,Te)}),Gr(We,ye,-1)):(ls(We,ye),Ds(We,Ne).each(function(Te){Gr(We,ye,Te),ls(We,Ne)}))}),ue?(F1.block(oe,(Pe=de,function(We,Te){return{dom:{tag:"div",attributes:{"aria-label":Pe.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:cn('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})),Lo(Oe,"display"),ls(Oe,"aria-hidden"),X.hasFocus()&&Jn(oe)):(Se=ti.getCurrent(oe).exists(function(We){return tp(We.element)}),F1.unblock(oe),to(Oe,"display","none"),Gr(Oe,"aria-hidden","true"),Se&&X.focus()),u.fire("AfterProgressState",{state:Y}))}u.inline||u.on("PreInit",function(){u.dom.bind(u.getWin(),"focusin",w),u.on("BeforeExecCommand",function(Y){"mcefocus"===Y.command.toLowerCase()&&!0!==Y.value&&w(Y)})}),u.on("ProgressState",function(Y){var X;P.on(Ty.clearTimeout),Va(Y.time)?(X=Ty.setEditorTimeout(u,function(){return H(Y.state)},Y.time),P.set(X)):(H(Y.state),P.clear())})}(u,w,Ve.shared),On(u.getParam("toolbar_groups",{},"object"),function(Uv,jv){u.ui.registry.addGroupToolbarButton(jv,Uv)});var Il,Sm=u.ui.registry.getAll(),Wv=Sm.buttons,Gv=Sm.menuItems,gb=Sm.contextToolbars,C_=Sm.sidebars,M_=lw(u),kS={menuItems:Gv,menus:(Il=u.getParam("menu"))?On(Il,function(Uv){return qe(qe({},Uv),{items:Uv.items})}):{},menubar:u.getParam("menubar"),toolbar:M_.getOrThunk(function(){return u.getParam("toolbar",!0)}),allowToolbarGroups:lt===Gf.floating,buttons:Wv,sidebar:C_};WO(u,gb,We,{backstage:Ve}),function KA(u,h){function v(We){var Te=rl(We);return ZA(Pe.getOpt(h),We,Te.x,Te.y,Te.width,Te.height)}function w(We){var Te=rl(We);return ZA(Oe.getOpt(h),We,Te.right,Te.bottom,Te.width,Te.height)}function A(We,Te,Ve,Qe){var lt=Ve(Te);_S.snapTo(We,lt),function(Ft){var Tt=Te.dom.getBoundingClientRect();Lo(Ft.element,"display");var Ut=eo(it.fromDom(u.getBody())).dom.innerHeight;(Tt[Qe]<0||Tt[Qe]>Ut)&&to(Ft.element,"display","none")}(We)}function P(We){return A(Re,We,v,"top")}function H(We){return A(Ne,We,w,"bottom")}var Y=Nr([]),X=Nr([]),oe=Nr(!1),ue=Cs(),de=Cs(),ye=i2(function(){return nn(Y.get(),v)},ue,function(We){de.get().each(function(Te){u.fire("TableSelectorChange",{start:We,finish:Te})})}),Se=i2(function(){return nn(X.get(),w)},de,function(We){ue.get().each(function(Te){u.fire("TableSelectorChange",{start:Te,finish:We})})}),Pe=a2(ye),Oe=a2(Se),Re=Ma(Pe.asSpec()),Ne=Ma(Oe.asSpec());fu().deviceType.isTouch()&&(u.on("TableSelectionChange",function(We){oe.get()||(Sc(h,Re),Sc(h,Ne),oe.set(!0)),ue.set(We.start),de.set(We.finish),We.otherCells.each(function(Te){Y.set(Te.upOrLeftCells),X.set(Te.downOrRightCells),P(We.start),H(We.finish)})}),u.on("ResizeEditor ResizeWindow ScrollContent",function(){ue.get().each(P),de.get().each(H)}),u.on("TableSelectionClear",function(){oe.get()&&(qm(Re),qm(Ne),oe.set(!1)),ue.clear(),de.clear()}))}(u,We);var Ky=u.getElement(),k_=function ha(){var ui,Qf,Il,Sm,Wv,Gv,gb=_A((Sm=Kb(Il=Qf=u),Wv=uw(Il),Gv=ek(Il),xA(Sm).map(function(M_){return uT(M_,Wv,Gv)}).getOr(Kb(Qf)))),C_=_A(wA(ui=u).getOr($b(ui)));return u.inline||(Pc("div","width",C_)&&to($i.element,"width",C_),Pc("div","height",gb)?to($i.element,"height",gb):to($i.element,"height","200px")),gb}();return oe.render(u,{mothership:Qn,uiMothership:Bo,outerContainer:$i},kS,Ve,{targetNode:Ky,height:k_})},getUi:function(){return{channels:{broadcastAll:Bo.broadcast,broadcastOn:Bo.broadcastOn,register:Gt}}}};function ka(ui,Qf){Tr([Na,Zl],function(Il){Il.broadcastEvent(ui,Qf)})}function ms(ui,Qf){Tr([Na,Zl],function(Il){Il.broadcastOn([ui],Qf)})}function ef(ui){return ms(Qp(),{target:ui.target})}function Nu(ui){return ms(Qp(),{target:it.fromDom(ui.target)})}function vl(ui){0===ui.button&&ms(_0(),{target:it.fromDom(ui.target)})}function Ec(){Tr(Si.editorManager.get(),function(ui){Si!==ui&&ui.fire("DismissPopups",{relatedTarget:Si})})}function yl(ui){return ka(If(),Ib(ui))}function bl(ui){ms(Yg(),{}),ka(_s(),Ib(ui))}function Kl(){return ms(Yg(),{})}function xl(ui){ui.state&&ms(Qp(),{target:it.fromDom(Si.getContainer())})}function bp(ui){ms(Qp(),{target:it.fromDom(ui.relatedTarget.getContainer())})}}function f2(u){return $n("items","items",{tag:"required",process:{}},zc(Od(function(h){return ga("Checking item of "+u,yT,h).fold(function(v){return Vo.error(Un(v))},function(v){return Vo.value(v)})})))}function aE(u){return Pr(u.type)&&Pr(u.name)}function d2(u){return{internalDialog:Vs(ga("dialog",SR,u)),dataValidator:(h=dr(mt(b2(u),aE),function(v){return $.from(xI[v.type]).fold(function(){return[]},function(w){return[tc(v.name,w)]})}),ke(h)),initialData:u.initialData};var h}function sE(u){var h=[],v={};return Ht(u,function(w,A){w.fold(function(){h.push(A)},function(P){v[A]=P})}),0<h.length?Vo.error(h):Vo.value(v)}function uE(u,h){to(u,"height",h+"px"),fu().browser.isIE()?Lo(u,"flex-basis"):to(u,"flex-basis",h+"px")}function h2(u,h,v){Wp(u,'[role="dialog"]').each(function(w){Ya(w,'[role="tablist"]').each(function(A){v.get().map(function(P){return to(h,"height","0"),to(h,"flex-basis","0"),Math.min(P,(Y=h,X=A,oe=so(H=w).dom,ue="fixed"===As(Wp(H,".tox-dialog-wrap").getOr(H),"position")?Math.max(oe.clientHeight,window.innerHeight):Math.max(oe.offsetHeight,oe.scrollHeight),de=Hu(Y),ye=Y.dom.offsetLeft>=X.dom.offsetLeft+Qt(X)?Math.max(Hu(X),de):de,Se=parseInt(As(H,"margin-top"),10)||0,Pe=parseInt(As(H,"margin-bottom"),10)||0,ue-(Hu(H)+Se+Pe-ye)));var H,Y,X,oe,ue,de,ye,Se,Pe}).each(function(P){uE(h,P)})})})}function nI(u){return Ya(u,'[role="tabpanel"]')}function iR(u,h){function v(ue){var de=sE(or.getValue(ue)).getOr({}),ye=H.get(),Se=ee(ye,de);H.set(Se)}function w(ue){var de=H.get();or.setValue(ue,de)}var A,P,H=Nr({}),Y=Nr(null),X=nn(u.tabs,function(ue){return{value:ue.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:h.shared.providers.translate(ue.title)},view:function(){return[qf.sketch(function(de){return{dom:{tag:"div",classes:["tox-form"]},components:nn(ue.items,function(ye){return TD(de,ye,h)}),formBehaviours:jn([no.config({mode:"acyclic",useTabstopAt:qr(_u)}),tr("TabView.form.events",[ja(w),Nd(v)]),Ss.config({channels:Co([{key:RE,value:{onReceive:v}},{key:_I,value:{onReceive:w}}])})])}})]}}}),oe=(A=X,P=Cs(),{extraEvents:[ja(function(ue){var de=ue.element;nI(de).each(function(ye){var Se;to(ye,"visibility","hidden"),ue.getSystem().getByDom(ye).toOptional().each(function(Pe){var Oe,Re,Ne;ca(wr((Re=ye,Ne=Pe,nn(Oe=A,function(We,Te){Eo.set(Ne,Oe[Te].view());var Ve=Re.dom.getBoundingClientRect();return Eo.set(Ne,[]),Ve.height})),function(We,Te){return Te<We?-1:We<Te?1:0})).fold(P.clear,P.set)}),h2(de,ye,P),Lo(ye,"visibility"),Se=ue,ca(A).each(function(Pe){return wM.showTab(Se,Pe.value)}),Ty.requestAnimationFrame(function(){h2(de,ye,P)})})}),on(_s(),function(ue){var de=ue.element;nI(de).each(function(ye){h2(de,ye,P)})}),on(hc,function(ue,de){var ye=ue.element;nI(ye).each(function(Se){var Pe=Go(zi(Se));to(Se,"visibility","hidden");var Oe=Di(Se,"height").map(function(Ne){return parseInt(Ne,10)});Lo(Se,"height"),Lo(Se,"flex-basis");var Re=Se.dom.getBoundingClientRect().height;Oe.forall(function(Ne){return Ne<Re})?(P.set(Re),h2(ye,Se,P)):Oe.each(function(Ne){uE(Se,Ne)}),Lo(Se,"visibility"),Pe.each(Vd)})})],selectFirst:!1});return wM.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(ue,de,ye){var Se=or.getValue(de);vr(ue,pk,{name:Se,oldName:Y.get()}),Y.set(Se)},tabs:X,components:[wM.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[PE.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:jn([pi.config({})])}),wM.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:oe.selectFirst,tabSectionBehaviours:jn([tr("tabpanel",oe.extraEvents),no.config({mode:"acyclic"}),ti.config({find:function(ue){return ca(wM.getViewItems(ue))}}),or.config({store:{mode:"manual",getValue:function(ue){return ue.getSystem().broadcastOn([RE],{}),H.get()},setValue:function(ue,de){H.set(de),ue.getSystem().broadcastOn([_I],{})}}})])})}function lE(u,h,v,w){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:qe(qe({},h.map(function(A){return{id:A}}).getOr({})),w?{"aria-live":"polite"}:{})},components:[],behaviours:jn([ub(0),$f.config({channel:NE,updateState:function(A,P){return $.some({isTabPanel:function(){return"tabpanel"===P.body.type}})},renderComponents:function(A){return"tabpanel"!==A.body.type?[(P=A.body,H=v,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(Y=Li(qf.sketch(function(X){return{dom:{tag:"div",classes:["tox-form"].concat(P.classes)},components:nn(P.items,function(oe){return TD(X,oe,H)})}}))).asSpec()]}],behaviours:jn([no.config({mode:"acyclic",useTabstopAt:qr(_u)}),sb(Y),cb(Y,{postprocess:function(X){return sE(X).fold(function(oe){return console.error(oe),{}},_n)}})])})]:[iR(A.body,v)];var P,H,Y},initialData:u})])}}(qy=H1=H1||{})[qy.None=0]="None",qy[qy.Both=1]="Both",qy[qy.Vertical=2]="Vertical";var rI,oI=ct([pn("lazySink"),vi("dragBlockClass"),Zi("getBounds",Aa),St("useTabstopAt",Ur),St("eventOrder",{}),Es("modalBehaviours",[no]),Iu("onExecute"),ba("onEscape")]),iI={sketch:_n},aR=ct([Ph({name:"draghandle",overrides:function(u,h){return{behaviours:jn([_S.config({mode:"mouse",getTarget:function(v){return Wp(v,'[role="dialog"]').getOr(v)},blockerClass:u.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(h,null,2)).message),getBounds:u.getDragBounds})])}}}),bu({schema:[pn("dom")],name:"title"}),bu({factory:iI,schema:[pn("dom")],name:"close"}),bu({factory:iI,schema:[pn("dom")],name:"body"}),Ph({factory:iI,schema:[pn("dom")],name:"footer"}),Xd({factory:{sketch:function(u,h){return qe(qe({},u),{dom:h.dom,components:h.components})}},schema:[St("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),St("components",[])],name:"blocker"})]),iu=Ul({name:"ModalDialog",configFields:oI(),partFields:aR(),factory:function(u,h,v,w){var A,P=Cs(),H=Br("modal-events"),Y=qe(qe({},u.eventOrder),((A={})[Ku()]=[H].concat(u.eventOrder["alloy.system.attached"]||[]),A));return{uid:u.uid,dom:u.dom,components:h,apis:{show:function(X){P.set(X);var oe=u.lazySink(X).getOrDie(),ue=w.blocker(),de=oe.getSystem().build(qe(qe({},ue),{components:ue.components.concat([jc(X)]),behaviours:jn([_o.config({}),tr("dialog-blocker-events",[qv(Rd(),function(){no.focusIn(X)})])])}));Sc(oe,de),no.focusIn(X)},hide:function(X){P.clear(),Xr(X.element).each(function(oe){X.getSystem().getByDom(oe).each(function(ue){qm(ue)})})},getBody:function(X){return mo(X,u,"body")},getFooter:function(X){return mo(X,u,"footer")},setIdle:function(X){F1.unblock(X)},setBusy:function(X,oe){F1.block(X,oe)}},eventOrder:Y,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:tu(u.modalBehaviours,[Eo.config({}),no.config({mode:"cyclic",onEnter:u.onExecute,onEscape:u.onEscape,useTabstopAt:u.useTabstopAt}),F1.config({getRoot:P.get}),tr(H,[ja(function(X){var oe,ue,de,ye=X.element,Se=mo(X,u,"title").element,Pe=Ds(ye,"id").fold(function(){var Oe=Br("dialog-label");return Gr(Se,"id",Oe),Oe},_n);Gr(ye,"aria-labelledby",Pe),oe=X.element,ue=mo(X,u,"body").element,de=$.from(Wa(oe,"id")).fold(function(){var Oe=Br("dialog-describe");return Gr(ue,"id",Oe),Oe},_n),Gr(oe,"aria-describedby",de)})])])}},apis:{show:function(u,h){u.show(h)},hide:function(u,h){u.hide(h)},getBody:function(u,h){return u.getBody(h)},getFooter:function(u,h){return u.getFooter(h)},setBusy:function(u,h,v){u.setBusy(h,v)},setIdle:function(u,h){u.setIdle(h)}}}),aI=ke([Yr("type"),Yr("name")].concat(Qb)),xM=Ct,p2=[$n("name","name",il(function(){return Br("button-name")}),rt),Qi("icon"),ys("align","end",["start","end"]),ds("primary",!1),ds("disabled",!1)],sI=ln(ln([],p2,!0),[Yr("text")],!1),g2=ln([fh("type",["submit","cancel","custom"])],sI,!0),cE=es("type",{submit:g2,cancel:g2,custom:g2,menu:ln([fh("type",["menu"]),Qi("text"),Qi("tooltip"),Qi("icon"),al("items",aI)],p2,!0)}),sR=[Yr("type"),Yr("text"),fh("level",["info","warn","error","success"]),Yr("icon"),St("url","")],fE=ke(sR),uR=[Yr("type"),Yr("text"),ds("disabled",!1),ds("primary",!1),$n("name","name",il(function(){return Br("button-name")}),rt),Qi("icon"),ds("borderless",!1)],lR=ke(uR),m2=[Yr("type"),Yr("name"),Yr("label"),ds("disabled",!1)],cR=ke(m2),fR=Ct,uI=[Yr("type"),Yr("name")],yg=uI.concat([Qi("label")]),wS=yg.concat([St("columns","auto")]),vT=ke(wS),_M=Fe([Yr("value"),Yr("text"),Yr("icon")]),dR=ke(yg),dE=rt,hR=ke(yg),pR=rt,hE=uI.concat([nc("tag","textarea"),Yr("scriptId"),Yr("scriptUrl"),Fc("settings",void 0,An)]),gR=uI.concat([nc("tag","textarea"),Xu("init")]),lI=Od(function(u){return ga("customeditor.old",qu(gR),u).orThunk(function(){return ga("customeditor.new",qu(hE),u)})}),pE=rt,gE=ke(yg),mE=zc(Me),vE=[Yr("type"),Yr("html"),ys("presets","presentation",["presentation","document"])],cI=ke(vE),fI=yg.concat([ds("sandboxed",!0)]),dI=ke(fI),yE=rt,hI=yg.concat([tc("currentState",ke([pn("blob"),Yr("url")]))]),SS=ke(hI),bE=yg.concat([Qi("inputMode"),Qi("placeholder"),ds("maximized",!1),ds("disabled",!1)]),xE=ke(bE),_E=rt,pI=[Yr("text"),Yr("value")],W1=[Yr("text"),al("items",(rI=Zt(function(){return v2}),{extract:function(u,h){return rI().extract(u,h)},toString:function(){return rI().toString()}}))],v2=du([ke(pI),ke(W1)]),wE=yg.concat([al("items",v2),ds("disabled",!1)]),gI=ke(wE),SE=rt,mR=yg.concat([Df("items",[Yr("text"),Yr("value")]),Ks("size",1),ds("disabled",!1)]),CE=ke(mR),mI=rt,vI=yg.concat([ds("constrain",!0),ds("disabled",!1)]),yI=ke(vI),bI=ke([Yr("width"),Yr("height")]),ME=[Yr("type"),al("header",rt),al("cells",zc(rt))],vR=ke(ME),kE=yg.concat([Qi("placeholder"),ds("maximized",!1),ds("disabled",!1)]),y2=ke(kE),TE=rt,DE=yg.concat([ys("filetype","file",["image","media","file"]),St("disabled",!1)]),AE=ke(DE),IE=ke([Yr("value"),St("meta",{})]),yT=Dm(function(){return hu("type",{alertbanner:fE,bar:ke((v=f2("bar"),[Yr("type"),v])),button:lR,checkbox:cR,colorinput:dR,colorpicker:hR,dropzone:gE,grid:ke((u=f2("grid"),[Yr("type"),tc("columns",ot),u])),iframe:dI,input:xE,listbox:gI,selectbox:CE,sizeinput:yI,textarea:y2,urlinput:AE,customeditor:lI,htmlpanel:cI,imagetools:SS,collection:vT,label:ke((h=f2("label"),[Yr("type"),Yr("label"),h])),table:vR,panel:OE});var u,h,v}),yR=[Yr("type"),St("classes",[]),al("items",yT)],OE=ke(yR),bR=[$n("name","name",il(function(){return Br("tab-name")}),rt),Yr("title"),al("items",yT)],xR=[Yr("type"),Df("tabs",bR)],EE=ke(xR),_R=sI,wR=cE,SR=ke([Yr("title"),tc("body",hu("type",{panel:OE,tabpanel:EE})),nc("size","normal"),al("buttons",wR),St("initialData",{}),Zi("onAction",Gt),Zi("onChange",Gt),Zi("onSubmit",Gt),Zi("onClose",Gt),Zi("onCancel",Gt),St("onTabChange",Gt)]),CR=ke(ln([fh("type",["cancel","custom"])],_R,!0)),MR=ke([Yr("title"),Yr("url"),$y("height"),$y("width"),of("buttons",CR),Zi("onAction",Gt),Zi("onCancel",Gt),Zi("onClose",Gt),Zi("onMessage",Gt)]),b2=function(u){return Bn(u)?[u].concat(dr(un(u),b2)):mi(u)?dr(u,b2):[]},xI={checkbox:fR,colorinput:dE,colorpicker:pR,dropzone:mE,input:_E,iframe:yE,sizeinput:bI,selectbox:mI,listbox:SE,size:bI,textarea:TE,urlinput:IE,customeditor:pE,collection:_M,togglemenuitem:xM},bT={open:function(u,h){var v=d2(h);return u(v.internalDialog,v.initialData,v.dataValidator)},openUrl:function(u,h){return u(Vs(ga("dialog",MR,h)))},redial:d2},kR=kc({name:"TabButton",configFields:[St("uid",void 0),pn("value"),$n("dom","dom",Oo(function(){return{attributes:{role:"tab",id:Br("aria"),"aria-selected":"false"}}}),Ze()),vi("action"),St("domModification",{}),Es("tabButtonBehaviours",[_o,no,or]),pn("view")],factory:function(u,h){return{uid:u.uid,dom:u.dom,components:u.components,events:pv(u.action),behaviours:tu(u.tabButtonBehaviours,[_o.config({}),no.config({mode:"execution",useSpace:!0,useEnter:!0}),or.config({store:{mode:"memory",initialValue:u.value}})]),domModification:u.domModification}}}),TR=ct([pn("tabs"),pn("dom"),St("clickToDismiss",!1),Es("tabbarBehaviours",[fi,no]),ko(["tabClass","selectedClass"])]),DR=ct([_y({factory:kR,name:"tabs",unit:"tab",overrides:function(u){return{action:function(h){var v=h.getSystem().getByUid(u.uid).getOrDie(),w=fi.isHighlighted(v,h);(w&&u.clickToDismiss?function(A,P){fi.dehighlight(A,P),vr(A,Vp(),{tabbar:A,button:P})}:w?Gt:function(A,P){fi.highlight(A,P),vr(A,Zv(),{tabbar:A,button:P})})(v,h)},domModification:{classes:[u.markers.tabClass]}}}})]),PE=Ul({name:"Tabbar",configFields:TR(),partFields:DR(),factory:function(u,h,v,w){return{uid:u.uid,dom:u.dom,components:h,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:tu(u.tabbarBehaviours,[fi.config({highlightClass:u.markers.selectedClass,itemClass:u.markers.tabClass,onHighlight:function(A,P){Gr(P.element,"aria-selected","true")},onDehighlight:function(A,P){Gr(P.element,"aria-selected","false")}}),no.config({mode:"flow",getInitial:function(A){return fi.getHighlighted(A).map(function(P){return P.element})},selector:"."+u.markers.tabClass,executeOnMove:!0})])}}}),__=kc({name:"Tabview",configFields:[Es("tabviewBehaviours",[Eo])],factory:function(u,h){return{uid:u.uid,dom:u.dom,behaviours:tu(u.tabviewBehaviours,[Eo.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),x2=ct([St("selectFirst",!0),ei("onChangeTab"),ei("onDismissTab"),St("tabs",[]),Es("tabSectionBehaviours",[])]),w_=ct([bu({factory:PE,schema:[pn("dom"),Tf("markers",[pn("tabClass"),pn("selectedClass")])],name:"tabbar",defaults:function(u){return{tabs:u.tabs}}}),bu({factory:__,name:"tabview"})]),wM=Ul({name:"TabSection",configFields:x2(),partFields:w_(),factory:function(u,h,v,w){function A(P,H){ii(P,u,"tabbar").each(function(Y){H(Y).each(ma)})}return{uid:u.uid,dom:u.dom,components:h,behaviours:op(u.tabSectionBehaviours),events:ia(De([u.selectFirst?[ja(function(P,H){A(P,fi.getFirst)})]:[],[on(Zv(),function(P,H){var Y=H.event.button,X=or.getValue(Y);ii(Y,u,"tabview").each(function(oe){Yi(u.tabs,function(ue){return ue.value===X}).each(function(ue){var de=ue.view();Ds(Y.element,"id").each(function(ye){Gr(oe.element,"aria-labelledby",ye)}),Eo.set(oe,de),u.onChangeTab(oe,Y,de)})})}),on(Vp(),function(P,H){u.onDismissTab(P,H.event.button)})]])),apis:{getViewItems:function(P){return ii(P,u,"tabview").map(function(H){return Eo.contents(H)}).getOr([])},showTab:function(P,H){A(P,function(Y){return Yi(fi.getCandidates(Y),function(X){return or.getValue(X)===H}).filter(function(X){return!fi.isHighlighted(Y,X)})})}}}},apis:{getViewItems:function(u,h){return u.getViewItems(h)},showTab:function(u,h,v){u.showTab(h,v)}}}),RE="send-data-to-section",_I="send-data-to-view",_2=Br("update-dialog"),LE=Br("update-title"),NE=Br("update-body"),BE=Br("update-footer"),wI=Br("body-send-message");function CS(u){return(CS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(h){return typeof h}:function(h){return h&&"function"==typeof Symbol&&h.constructor===Symbol&&h!==Symbol.prototype?"symbol":typeof h})(u)}function zE(u,h){return(zE=Object.setPrototypeOf||function(v,w){return v.__proto__=w,v})(u,h)}function SM(u,h,v){return(SM=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch{return}}}()?Reflect.construct:function(w,A,P){var H=[null];H.push.apply(H,A);var Y=new(Function.bind.apply(w,H));return P&&zE(Y,P.prototype),Y}).apply(null,arguments)}function Xy(u){return function(h){if(Array.isArray(h))return SI(h)}(u)||function(){if("undefined"!=typeof Symbol&&null!=u[Symbol.iterator]||null!=u["@@iterator"])return Array.from(u)}()||function(h){if(h){if("string"==typeof h)return SI(h,void 0);var v=Object.prototype.toString.call(h).slice(8,-1);return"Map"===(v="Object"===v&&h.constructor?h.constructor.name:v)||"Set"===v?Array.from(h):"Arguments"===v||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(v)?SI(h,void 0):void 0}}(u)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function SI(u,h){(null==h||h>u.length)&&(h=u.length);for(var v=0,w=new Array(h);v<h;v++)w[v]=u[v];return w}var FE,AR=Object.hasOwnProperty,VE=Object.setPrototypeOf,IR=Object.isFrozen,CI=Object.getPrototypeOf,HE=Object.getOwnPropertyDescriptor,sh=Object.freeze,Zy=Object.seal,MI=Object.create,WE="undefined"!=typeof Reflect&&Reflect,GE=WE.apply||function(u,h,v){return u.apply(h,v)},kI=(sh=sh||function(u){return u},Zy=Zy||function(u){return u},WE.construct||function(u,h){return SM(u,Xy(h))}),UE=Hv(Array.prototype.forEach),jE=Hv(Array.prototype.pop),xT=Hv(Array.prototype.push),w2=Hv(String.prototype.toLowerCase),OR=Hv(String.prototype.match),S_=Hv(String.prototype.replace),ER=Hv(String.prototype.indexOf),PR=Hv(String.prototype.trim),yp=Hv(RegExp.prototype.test),S2=(FE=TypeError,function(){for(var u=arguments.length,h=new Array(u),v=0;v<u;v++)h[v]=arguments[v];return kI(FE,h)});function Hv(u){return function(h){for(var v=arguments.length,w=new Array(1<v?v-1:0),A=1;A<v;A++)w[A-1]=arguments[A];return GE(u,h,w)}}function La(u,h){VE&&VE(u,null);for(var v=h.length;v--;){var w,A=h[v];"string"!=typeof A||(w=w2(A))!==A&&(IR(h)||(h[v]=w),A=w),u[A]=!0}return u}function MS(u){var h,v=MI(null);for(h in u)GE(AR,u,[h])&&(v[h]=u[h]);return v}function C2(u,h){for(;null!==u;){var v=HE(u,h);if(v){if(v.get)return Hv(v.get);if("function"==typeof v.value)return Hv(v.value)}u=CI(u)}return function(w){return console.warn("fallback value for",w),null}}var TI=sh(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),M2=sh(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),DI=sh(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),RR=sh(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),AI=sh(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),LR=sh(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),II=sh(["#text"]),YE=sh(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),OI=sh(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qE=sh(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),_T=sh(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),NR=Zy(/\{\{[\w\W]*|[\w\W]*\}\}/gm),k2=Zy(/<%[\w\W]*|[\w\W]*%>/gm),BR=Zy(/^data-[\-\w.\u00B7-\uFFFF]/),zR=Zy(/^aria-[\-\w]+$/),XE=Zy(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),FR=Zy(/^(?:\w+script|data):/i),VR=Zy(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),HR=Zy(/^html$/i);function EI(u,h){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[u,h]}}function T2(u,h){return iu.parts.close(Xl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":h.translate("Close")}},action:u,buttonBehaviours:jn([pi.config({})])}))}function ZE(){return iu.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function PI(u,h){return iu.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:cn("<p>"+(v=h.translate(u),tP().sanitize(v)+"</p>"))}]}]});var v}function D2(u){return iu.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:u})}function RI(u,h){return[xu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:u}),xu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:h})]}function A2(u){var h,v="tox-dialog",w=v+"-wrap",A=w+"__backdrop",P=v+"__disable-scroll";return iu.sketch({lazySink:u.lazySink,onEscape:function(H){return u.onEscape(H),$.some(!0)},useTabstopAt:function(H){return!_u(H)},dom:{tag:"div",classes:[v].concat(u.extraClasses),styles:qe({position:"relative"},u.extraStyles)},components:ln([u.header,u.body],u.footer.toArray(),!0),parts:{blocker:{dom:cn('<div class="'+w+'"></div>'),components:[{dom:{tag:"div",classes:jI?[A,A+"--opaque"]:[A]}}]}},dragBlockClass:w,modalBehaviours:jn(ln([_o.config({}),tr("dialog-events",u.dialogEvents.concat([qv(Rd(),function(H,Y){no.focusIn(H)})])),tr("scroll-lock",[ja(function(){qn(Da(),P)}),Nd(function(){yi(Da(),P)})])],u.extraBehaviours,!0)),eventOrder:qe(((h={})[af()]=["dialog-events"],h[Ku()]=["scroll-lock","dialog-events","alloy.base.behaviour"],h[Gc()]=["alloy.base.behaviour","dialog-events","scroll-lock"],h),u.eventOrder)})}function LI(u){return Xl.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":u.translate("Close"),title:u.translate("Close")}},components:[Wf("close",{tag:"div",classes:["tox-icon"]},u.icons)],action:function(h){Rr(h,p1)}})}function NI(u,h,v){function w(A){return[ph(v.translate(A.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:qe({},h.map(function(A){return{id:A}}).getOr({}))},components:w(u),behaviours:jn([$f.config({channel:LE,renderComponents:w})])}}function BI(){return{dom:cn('<div class="tox-dialog__draghandle"></div>')}}function zI(u,h){return v={title:h.shared.providers.translate(u),draggable:h.dialog.isDraggableModal()},w=h.shared.providers,A=iu.parts.title(NI(v,$.none(),w)),P=iu.parts.draghandle(BI()),H=iu.parts.close(LI(w)),Y=[A].concat(v.draggable?[P]:[]).concat([H]),xu.sketch({dom:cn('<div class="tox-dialog__header"></div>'),components:Y});var v,w,A,P,H,Y}function KE(u,h,v){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":v.translate(u)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:h,components:[{dom:cn('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}function $E(u,h,v){return{onClose:function(){return v.closeWindow()},onBlock:function(w){iu.setBusy(u(),function(A,P){return KE(w.message,P,h)})},onUnblock:function(){iu.setIdle(u())}}}function FI(u,h,v,w){var A;return Ma(A2(qe(qe({},u),{lazySink:w.shared.getSink,extraBehaviours:ln([$f.config({channel:_2,updateState:function(P,H){return $.some(H)},initialData:h}),Wy({})],u.extraBehaviours,!0),onEscape:function(P){Rr(P,p1)},dialogEvents:v,eventOrder:((A={})[hi()]=[$f.name(),Ss.name()],A[Ku()]=["scroll-lock",$f.name(),"messages","dialog-events","alloy.base.behaviour"],A[Gc()]=["alloy.base.behaviour","dialog-events","messages",$f.name(),"scroll-lock"],A)})))}function VI(u){return nn(u,function(h){return"menu"===h.type?(w=nn((v=h).items,function(A){var P=Nr(!1);return qe(qe({},A),{storage:P})}),qe(qe({},v),{items:w})):h;var v,w})}function HI(u){return yo(u,function(h,v){return"menu"!==v.type?h:yo(v.items,function(w,A){return w[A.name]=A.storage,w},h)},{})}function I2(u,h){return[Ap(Rd(),Us),u(q0,function(v,w){h.onClose(),w.onClose()}),u(p1,function(v,w,A,P){w.onCancel(v),Rr(P,q0)}),on(TC,function(v,w){return h.onUnblock()}),on(wv,function(v,w){return h.onBlock(w.event)})]}function CM(u,h){function v(A,P){return xu.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+A]},components:nn(P,function(H){return H.memento.asSpec()})})}var w=Ce(h.map(function(A){return A.footerButtons}).getOr([]),function(A){return"start"===A.align});return[v("start",w.pass),v("end",w.fail)]}function WI(u,h){return{dom:cn('<div class="tox-dialog__footer"></div>'),components:[],behaviours:jn([$f.config({channel:BE,initialData:u,updateState:function(v,w){var A=nn(w.buttons,function(P){var H=Li(bf(P,P.type,h));return{name:P.name,align:P.align,memento:H}});return $.some({lookupByName:function(P,H){return Y=P,X=H,Yi(A,function(oe){return oe.name===X}).bind(function(oe){return oe.memento.getOpt(Y)});var Y,X},footerButtons:A})},renderComponents:CM})])}}function GI(u,h){return iu.parts.footer(WI(u,h))}function UI(u,h){if(u.getRoot().getSystem().isConnected()){var v=ti.getCurrent(u.getFormWrapper()).getOr(u.getFormWrapper());return qf.getField(v,h).fold(function(){var w=u.getFooter();return $f.getState(w).get().bind(function(A){return A.lookupByName(v,h)})},function(w){return $.some(w)})}return $.none()}function JE(u,h,v){function w(P){var H=u.getRoot();H.getSystem().isConnected()&&P(H)}var A={getData:function(){var P=u.getRoot(),H=P.getSystem().isConnected()?u.getFormWrapper():P,Y=or.getValue(H),X=On(v,function(oe){return oe.get()});return qe(qe({},Y),X)},setData:function(P){w(function(H){var Y,X,oe=A.getData(),ue=qe(qe({},oe),P),de=(Y=ue,X=u.getRoot(),$f.getState(X).get().map(function(Se){return Vs(ga("data",Se.dataValidator,Y))}).getOr(Y)),ye=u.getFormWrapper();or.setValue(ye,de),Ht(v,function(Se,Pe){hr(ue,Pe)&&Se.set(ue[Pe])})})},disable:function(P){UI(u,P).each(Vr.disable)},enable:function(P){UI(u,P).each(Vr.enable)},focus:function(P){UI(u,P).each(_o.focus)},block:function(P){if(!Pr(P))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");w(function(H){vr(H,wv,{message:P})})},unblock:function(){w(function(P){Rr(P,TC)})},showTab:function(P){w(function(H){var Y=u.getBody();$f.getState(Y).get().exists(function(X){return X.isTabPanel()})&&ti.getCurrent(Y).each(function(X){wM.showTab(X,P)})})},redial:function(P){w(function(H){var Y=h(P);H.getSystem().broadcastOn([_2],Y),H.getSystem().broadcastOn([LE],Y.internalDialog),H.getSystem().broadcastOn([NE],Y.internalDialog),H.getSystem().broadcastOn([BE],Y.internalDialog),A.setData(Y.initialData)})},close:function(){w(function(P){Rr(P,q0)})}};return A}function QE(u){return Bn(u)&&-1!==oP.indexOf(u.mceAction)}function eP(u){function v(ye,Se,Pe,Oe){return bT.open(function(Re,Ne,We){function Te(){return Jf.on(function(ta){Rs.reposition(ta),Zf.refresh(ta)})}var Ve,Qe,lt,Ft,Tt,Ut,dn,Jt,yn,En,Wr,No,wi,Ui,Ni,Zo,Xi,$i,Ji,Si,Na,Zl,js=Vs(ga("data",We,Ne)),Jf=Cs(),Ba=Y.shared.header.isPositionedAtTop(),Td=(Qe={dataValidator:We,initialData:js,internalDialog:Re},lt={redial:bT.redial,closeWindow:function(){Jf.on(Rs.hide),X.off("ResizeEditor",Te),Jf.clear(),Pe(Td.instanceApi)}},Ft=Y,Tt=Oe,wi=Br("dialog-label"),Ui=Br("dialog-content"),Ni=Li((Jt={title:Qe.internalDialog.title,draggable:!0},yn=wi,En=Ft.shared.providers,xu.sketch({dom:cn('<div class="tox-dialog__header"></div>'),components:[NI(Jt,$.some(yn),En),BI(),LI(En)],containerBehaviours:jn([_S.config({mode:"mouse",blockerClass:"blocker",getTarget:function(ta){return fd(ta,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),Zo=Li((Wr=Ft,No=Tt,lE({body:Qe.internalDialog.body},$.some(Ui),Wr,No))),$i=HI(Xi=VI(Qe.internalDialog.buttons)),Ji=Li(GR({buttons:Xi},Ft)),Si=rP(function(){return Zl},{onBlock:function(ta){F1.block(Na,function(Qn,Bo){return KE(ta.message,Bo,Ft.shared.providers)})},onUnblock:function(){F1.unblock(Na)},onClose:function(){return lt.closeWindow()}},Ft.shared.getSink),Na=Ma({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((Ut={role:"dialog"})["aria-labelledby"]=wi,Ut["aria-describedby"]=Ui,Ut)},eventOrder:((dn={})[hi()]=[$f.name(),Ss.name()],dn[af()]=["execute-on-form"],dn[Ku()]=["reflecting","execute-on-form"],dn),behaviours:jn([no.config({mode:"cyclic",onEscape:function(ta){return Rr(ta,q0),$.some(!0)},useTabstopAt:function(ta){return!_u(ta)&&("button"!==qt(ta)||"disabled"!==Wa(ta,"disabled"))}}),$f.config({channel:_2,updateState:function(ta,Qn){return $.some(Qn)},initialData:Qe}),_o.config({}),tr("execute-on-form",Si.concat([qv(Rd(),function(ta,Qn){no.focusIn(ta)})])),F1.config({getRoot:function(){return $.some(Na)}}),Eo.config({}),Wy({})]),components:[Ni.asSpec(),Zo.asSpec(),Ji.asSpec()]}),Zl=JE({getRoot:ct(Na),getFooter:function(){return Ji.get(Na)},getBody:function(){return Zo.get(Na)},getFormWrapper:function(){var ta=Zo.get(Na);return ti.getCurrent(ta).getOr(ta)}},lt.redial,$i),{dialog:Na,instanceApi:Zl}),au=Ma(Rs.sketch(qe(qe({lazySink:Y.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},Ba?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:jn(ln([tr("window-manager-inline-events",[on(Fp(),function(ta,Qn){Rr(Td.dialog,p1)})])],(Ve=X,oe&&Ba?[]:[Zf.config({contextual:{lazyContext:function(){return $.some(Sl(it.fromDom(Ve.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]),!0)),isExtraPart:function(ta,Qn){return h1(Bo=Qn,".tox-alert-dialog")||h1(Bo,".tox-confirm-dialog");var Bo}})));return Jf.set(au),Rs.showWithin(au,jc(Td.dialog),{anchor:Se},$.some(Da())),oe&&Ba||(Zf.refresh(au),X.on("ResizeEditor",Te)),Td.instanceApi.setData(js),no.focusIn(Td.dialog),Td.instanceApi},ye)}var w,A,P,H,Y=u.backstage,X=u.editor,oe=Ly(X),ue=(A=(w=u).backstage.shared,{open:function(ye,Se){function Pe(){iu.hide(We),Se()}var Oe=Li(bf({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:$.none()},"cancel",w.backstage)),Re=ZE(),Ne=T2(Pe,A.providers),We=Ma(A2({lazySink:function(){return A.getSink()},header:EI(Re,Ne),body:PI(ye,A.providers),footer:$.some(D2(RI([],[Oe.asSpec()]))),onEscape:Pe,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[on(p1,Pe)],eventOrder:{}}));iu.show(We);var Te=Oe.get(We);_o.focus(Te)}}),de=(H=(P=u).backstage.shared,{open:function(ye,Se){function Pe(Qe){iu.hide(Te),Se(Qe)}var Oe=Li(bf({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:$.none()},"submit",P.backstage)),Re=bf({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:$.none()},"cancel",P.backstage),Ne=ZE(),We=T2(function(){return Pe(!1)},H.providers),Te=Ma(A2({lazySink:function(){return H.getSink()},header:EI(Ne,We),body:PI(ye,H.providers),footer:$.some(D2(RI([],[Re,Oe.asSpec()]))),onEscape:function(){return Pe(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[on(p1,function(){return Pe(!1)}),on(Yf,function(){return Pe(!0)})],eventOrder:{}}));iu.show(Te);var Ve=Oe.get(Te);_o.focus(Ve)}});return{open:function(ye,Se,Pe){return void 0!==Se&&"toolbar"===Se.inline?v(ye,Y.shared.anchors.inlineDialog(),Pe,Se.ariaAttrs):void 0!==Se&&"cursor"===Se.inline?v(ye,Y.shared.anchors.cursor(),Pe,Se.ariaAttrs):function h(ye,Se){return bT.open(function(Pe,Oe,Re){var Ne,We,Te,Ve,Qe,lt,Ft,Tt,Ut,dn,Jt,yn,En,pr,Wr=Oe,No=(We={redial:bT.redial,closeWindow:function(){iu.hide(No.dialog),Se(No.instanceApi)}},lt=zI((Ne={dataValidator:Re,initialData:Wr,internalDialog:Pe}).internalDialog.title,Te=Y),Ve=Te,Qe=lE({body:Ne.internalDialog.body},$.none(),Ve,!1),Ft=iu.parts.body(Qe),Ut=HI(Tt=VI(Ne.internalDialog.buttons)),dn=GI({buttons:Tt},Te),Jt=rP(function(){return pr},$E(function(){return En},Te.shared.providers,We),Te.shared.getSink),yn=function(){switch(Ne.internalDialog.size){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(),En=FI({header:lt,body:Ft,footer:$.some(dn),extraClasses:yn,extraBehaviours:[],extraStyles:{}},Ne,Jt,Te),pr=JE({getRoot:ct(En),getBody:function(){return iu.getBody(En)},getFooter:function(){return iu.getFooter(En)},getFormWrapper:function(){var wi=iu.getBody(En);return ti.getCurrent(wi).getOr(wi)}},We.redial,Ut),{dialog:En,instanceApi:pr});return iu.show(No.dialog),No.instanceApi.setData(Wr),No.instanceApi},ye)}(ye,Pe)},openUrl:function(ye,Se){return Pe=Se,bT.openUrl(function(Oe){var Re=function WR(u,h,v,w){var A,P,H,Y=zI(u.title,w),X=(P={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[kk({dom:{tag:"iframe",attributes:{src:u.url}},behaviours:jn([pi.config({}),_o.config({})])})]}],behaviours:jn([no.config({mode:"acyclic",useTabstopAt:qr(_u)})])},iu.parts.body(P)),oe=u.buttons.bind(function(Te){return 0===Te.length?$.none():$.some(GI({buttons:Te},w))}),ue=nP(function(){return Ne},$E(function(){return Re},w.shared.providers,h)),de=qe(qe({},u.height.fold(function(){return{}},function(Te){return{height:Te+"px","max-height":Te+"px"}})),u.width.fold(function(){return{}},function(Te){return{width:Te+"px","max-width":Te+"px"}})),ye=u.width.isNone()&&u.height.isNone()?["tox-dialog--width-lg"]:[],Se=new O2(u.url,{base_uri:new O2(window.location.href)}),Pe=Se.protocol+"://"+Se.host+(Se.port?":"+Se.port:""),Oe=Dh(),Re=FI({header:Y,body:X,footer:oe,extraClasses:ye,extraBehaviours:[tr("messages",[ja(function(){var Te=Js(it.fromDom(window),"message",function(Ve){var Qe,lt;Se.isSameOrigin(new O2(Ve.raw.origin))&&(QE(Qe=Ve.raw.data)?function(Ft,Tt,Ut){switch(Ut.mceAction){case"insertContent":Ft.insertContent(Ut.content);break;case"setContent":Ft.setContent(Ut.content);break;case"execCommand":var dn=!!Ci(Ut.ui)&&Ut.ui;Ft.execCommand(Ut.cmd,dn,Ut.value);break;case"close":Tt.close();break;case"block":Tt.block(Ut.message);break;case"unblock":Tt.unblock()}}(v,Ne,Qe):!QE(lt=Qe)&&Bn(lt)&&hr(lt,"mceAction")&&u.onMessage(Ne,Qe))});Oe.set(Te)}),Nd(Oe.clear)]),Ss.config({channels:((A={})[wI]={onReceive:function(Te,Ve){Ya(Te.element,"iframe").each(function(Qe){Qe.dom.contentWindow.postMessage(Ve,Pe)})}},A)})],extraStyles:de},u,ue,w),Ne={block:function(Te){if(!Pr(Te))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");We(function(Ve){vr(Ve,wv,{message:Te})})},unblock:function(){We(function(Te){Rr(Te,TC)})},close:function(){We(function(Te){Rr(Te,q0)})},sendMessage:function(Te){We(function(Ve){Ve.getSystem().broadcastOn([wI],Te)})}};function We(Te){H.getSystem().isConnected()&&Te(H)}return{dialog:H=Re,instanceApi:Ne}}(Oe,{closeWindow:function(){iu.hide(Re.dialog),Pe(Re.instanceApi)}},X,Y);return iu.show(Re.dialog),Re.instanceApi},ye);var Pe},alert:function(ye,Se){ue.open(ye,function(){Se()})},close:function(ye){ye.close()},confirm:function(ye,Se){de.open(ye,function(Pe){Se(Pe)})}}}var tP=function u(h){function v(jt){return u(jt)}var w=0<arguments.length&&void 0!==h?h:"undefined"==typeof window?null:window;if(v.version="2.3.8",v.removed=[],!w||!w.document||9!==w.document.nodeType)return v.isSupported=!1,v;var A,P=w.document,H=w.document,Y=w.DocumentFragment,X=w.HTMLTemplateElement,oe=w.Node,ue=w.Element,de=w.NodeFilter,ye=w.NamedNodeMap,Se=void 0===ye?w.NamedNodeMap||w.MozNamedAttrMap:ye,Pe=w.HTMLFormElement,Oe=w.DOMParser,Re=w.trustedTypes,Ne=ue.prototype,We=C2(Ne,"cloneNode"),Te=C2(Ne,"nextSibling"),Ve=C2(Ne,"childNodes"),Qe=C2(Ne,"parentNode");"function"!=typeof X||(A=H.createElement("template")).content&&A.content.ownerDocument&&(H=A.content.ownerDocument);var lt=function(jt,Ko){if("object"!==CS(jt)||"function"!=typeof jt.createPolicy)return null;var Wo=null,xf="data-tt-policy-suffix",$l="dompurify"+((Wo=Ko.currentScript&&Ko.currentScript.hasAttribute(xf)?Ko.currentScript.getAttribute(xf):Wo)?"#"+Wo:"");try{return jt.createPolicy($l,{createHTML:function(tf){return tf}})}catch{return console.warn("TrustedTypes policy "+$l+" could not be created."),null}}(Re,P),Ft=lt?lt.createHTML(""):"",Tt=H,Ut=Tt.implementation,dn=Tt.createNodeIterator,Jt=Tt.createDocumentFragment,yn=Tt.getElementsByTagName,En=P.importNode,pr={};try{pr=MS(H).documentMode?H.documentMode:{}}catch{}var Wr={};function No(jt){return jt instanceof RegExp||jt instanceof Function}function wi(jt){jv&&jv===jt||(jt=MS(jt=jt&&"object"===CS(jt)?jt:{}),Ba="ALLOWED_TAGS"in jt?La({},jt.ALLOWED_TAGS):Td,au="ALLOWED_ATTR"in jt?La({},jt.ALLOWED_ATTR):ta,gb="ADD_URI_SAFE_ATTR"in jt?La(MS(C_),jt.ADD_URI_SAFE_ATTR):C_,Wv="ADD_DATA_URI_TAGS"in jt?La(MS(Gv),jt.ADD_DATA_URI_TAGS):Gv,Il="FORBID_CONTENTS"in jt?La({},jt.FORBID_CONTENTS):Sm,Bo="FORBID_TAGS"in jt?La({},jt.FORBID_TAGS):{},ha="FORBID_ATTR"in jt?La({},jt.FORBID_ATTR):{},Ui="USE_PROFILES"in jt&&jt.USE_PROFILES,ka=!1!==jt.ALLOW_ARIA_ATTR,ms=!1!==jt.ALLOW_DATA_ATTR,ef=jt.ALLOW_UNKNOWN_PROTOCOLS||!1,Nu=jt.SAFE_FOR_TEMPLATES||!1,vl=jt.WHOLE_DOCUMENT||!1,bl=jt.RETURN_DOM||!1,Kl=jt.RETURN_DOM_FRAGMENT||!1,xl=jt.RETURN_TRUSTED_TYPE||!1,yl=jt.FORCE_BODY||!1,bp=!1!==jt.SANITIZE_DOM,ui=!1!==jt.KEEP_CONTENT,Qf=jt.IN_PLACE||!1,Jf=jt.ALLOWED_URI_REGEXP||Jf,k_=jt.NAMESPACE||Ky,jt.CUSTOM_ELEMENT_HANDLING&&No(jt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Qn.tagNameCheck=jt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),jt.CUSTOM_ELEMENT_HANDLING&&No(jt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Qn.attributeNameCheck=jt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),jt.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof jt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Qn.allowCustomizedBuiltInElements=jt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ni=-1===Uv.indexOf(jt.PARSER_MEDIA_TYPE)?"text/html":jt.PARSER_MEDIA_TYPE,Zo="application/xhtml+xml"===Ni?function(Ko){return Ko}:w2,Nu&&(ms=!1),Kl&&(bl=!0),Ui&&(Ba=La({},Xy(II)),au=[],!0===Ui.html&&(La(Ba,TI),La(au,YE)),!0===Ui.svg&&(La(Ba,M2),La(au,OI),La(au,_T)),!0===Ui.svgFilters&&(La(Ba,DI),La(au,OI),La(au,_T)),!0===Ui.mathMl&&(La(Ba,AI),La(au,qE),La(au,_T))),jt.ADD_TAGS&&La(Ba=Ba===Td?MS(Ba):Ba,jt.ADD_TAGS),jt.ADD_ATTR&&La(au=au===ta?MS(au):au,jt.ADD_ATTR),jt.ADD_URI_SAFE_ATTR&&La(gb,jt.ADD_URI_SAFE_ATTR),jt.FORBID_CONTENTS&&La(Il=Il===Sm?MS(Il):Il,jt.FORBID_CONTENTS),ui&&(Ba["#text"]=!0),vl&&La(Ba,["html","head","body"]),Ba.table&&(La(Ba,["tbody"]),delete Bo.tbody),sh&&sh(jt),jv=jt)}v.isSupported="function"==typeof Qe&&Ut&&void 0!==Ut.createHTMLDocument&&9!==pr;var Ui,Ni,Zo,Xi,$i=NR,Ji=k2,Si=BR,Na=zR,Zl=FR,js=VR,Jf=XE,Ba=null,Td=La({},[].concat(Xy(TI),Xy(M2),Xy(DI),Xy(AI),Xy(II))),au=null,ta=La({},[].concat(Xy(YE),Xy(OI),Xy(qE),Xy(_T))),Qn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),Bo=null,ha=null,ka=!0,ms=!0,ef=!1,Nu=!1,vl=!1,Ec=!1,yl=!1,bl=!1,Kl=!1,xl=!1,bp=!0,ui=!0,Qf=!1,Il=null,Sm=La({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),Wv=null,Gv=La({},["audio","video","img","source","image","track"]),gb=null,C_=La({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),M_="http://www.w3.org/1998/Math/MathML",kS="http://www.w3.org/2000/svg",Ky="http://www.w3.org/1999/xhtml",k_=Ky,Uv=["application/xhtml+xml","text/html"],jv=null,MM=H.createElement("form"),TS=La({},["mi","mo","mn","ms","mtext"]),DS=La({},["foreignobject","desc","title","annotation-xml"]),iP=La({},["title","style","font","a","script"]),wT=La({},M2);La(wT,DI),La(wT,RR);var YI=La({},AI);function G1(jt){xT(v.removed,{element:jt});try{jt.parentNode.removeChild(jt)}catch{try{jt.outerHTML=Ft}catch{jt.remove()}}}function aP(jt,Ko){try{xT(v.removed,{attribute:Ko.getAttributeNode(jt),from:Ko})}catch{xT(v.removed,{attribute:null,from:Ko})}if(Ko.removeAttribute(jt),"is"===jt&&!au[jt])if(bl||Kl)try{G1(Ko)}catch{}else try{Ko.setAttribute(jt,"")}catch{}}function qI(jt){var Ko,Wo,xf;yl?jt="<remove></remove>"+jt:xf=(Wo=OR(jt,/^[\r\n\t ]+/))&&Wo[0],"application/xhtml+xml"===Ni&&(jt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+jt+"</body></html>");var $l=lt?lt.createHTML(jt):jt;if(k_===Ky)try{Ko=(new Oe).parseFromString($l,Ni)}catch{}if(!Ko||!Ko.documentElement){Ko=Ut.createDocument(k_,"template",null);try{Ko.documentElement.innerHTML=Xi?"":$l}catch{}}var tf=Ko.body||Ko.documentElement;return jt&&xf&&tf.insertBefore(H.createTextNode(xf),tf.childNodes[0]||null),k_===Ky?yn.call(Ko,vl?"html":"body")[0]:vl?Ko.documentElement:tf}function sP(jt){return dn.call(jt.ownerDocument||jt,jt,de.SHOW_ELEMENT|de.SHOW_COMMENT|de.SHOW_TEXT,null,!1)}function Cm(jt){return"object"===CS(oe)?jt instanceof oe:jt&&"object"===CS(jt)&&"number"==typeof jt.nodeType&&"string"==typeof jt.nodeName}function U1(jt,Ko,Wo){Wr[jt]&&UE(Wr[jt],function(xf){xf.call(v,Ko,Wo,jv)})}function XI(jt){var Ko;if(U1("beforeSanitizeElements",jt,null),jt instanceof Pe&&("string"!=typeof jt.nodeName||"string"!=typeof jt.textContent||"function"!=typeof jt.removeChild||!(jt.attributes instanceof Se)||"function"!=typeof jt.removeAttribute||"function"!=typeof jt.setAttribute||"string"!=typeof jt.namespaceURI||"function"!=typeof jt.insertBefore)||yp(/[\u0080-\uFFFF]/,jt.nodeName))return G1(jt),1;var Wo=Zo(jt.nodeName);if(U1("uponSanitizeElement",jt,{tagName:Wo,allowedTags:Ba}),jt.hasChildNodes()&&!Cm(jt.firstElementChild)&&(!Cm(jt.content)||!Cm(jt.content.firstElementChild))&&yp(/<[/\w]/g,jt.innerHTML)&&yp(/<[/\w]/g,jt.textContent)||"select"===Wo&&yp(/<template/i,jt.innerHTML))return G1(jt),1;if(Ba[Wo]&&!Bo[Wo])return jt instanceof ue&&!function(Gh){var Ol=Qe(Gh);Ol&&Ol.tagName||(Ol={namespaceURI:Ky,tagName:"template"});var uh=w2(Gh.tagName),ed=w2(Ol.tagName);return Gh.namespaceURI===kS?Ol.namespaceURI===Ky?"svg"===uh:Ol.namespaceURI===M_?"svg"===uh&&("annotation-xml"===ed||TS[ed]):Boolean(wT[uh]):Gh.namespaceURI===M_?Ol.namespaceURI===Ky?"math"===uh:Ol.namespaceURI===kS?"math"===uh&&DS[ed]:Boolean(YI[uh]):Gh.namespaceURI===Ky&&(Ol.namespaceURI!==kS||DS[ed])&&(Ol.namespaceURI!==M_||TS[ed])&&!YI[uh]&&(iP[uh]||!wT[uh])}(jt)||("noscript"===Wo||"noembed"===Wo)&&yp(/<\/no(script|embed)/i,jt.innerHTML)?(G1(jt),1):(Nu&&3===jt.nodeType&&(Ko=S_(Ko=jt.textContent,$i," "),Ko=S_(Ko,Ji," "),jt.textContent!==Ko&&(xT(v.removed,{element:jt.cloneNode()}),jt.textContent=Ko)),U1("afterSanitizeElements",jt,null),0);if(Bo[Wo]||!E2(Wo)||!(Qn.tagNameCheck instanceof RegExp&&yp(Qn.tagNameCheck,Wo)||Qn.tagNameCheck instanceof Function&&Qn.tagNameCheck(Wo))){if(ui&&!Il[Wo]){var xf=Qe(jt)||jt.parentNode,$l=Ve(jt)||jt.childNodes;if($l&&xf)for(var tf=$l.length-1;0<=tf;--tf)xf.insertBefore(We($l[tf],!0),Te(jt))}return G1(jt),1}}function uP(jt,Ko,Wo){if(bp&&("id"===Ko||"name"===Ko)&&(Wo in H||Wo in MM))return!1;if((!ms||ha[Ko]||!yp(Si,Ko))&&(!ka||!yp(Na,Ko)))if(!au[Ko]||ha[Ko]){if(!(E2(jt)&&(Qn.tagNameCheck instanceof RegExp&&yp(Qn.tagNameCheck,jt)||Qn.tagNameCheck instanceof Function&&Qn.tagNameCheck(jt))&&(Qn.attributeNameCheck instanceof RegExp&&yp(Qn.attributeNameCheck,Ko)||Qn.attributeNameCheck instanceof Function&&Qn.attributeNameCheck(Ko))||"is"===Ko&&Qn.allowCustomizedBuiltInElements&&(Qn.tagNameCheck instanceof RegExp&&yp(Qn.tagNameCheck,Wo)||Qn.tagNameCheck instanceof Function&&Qn.tagNameCheck(Wo))))return!1}else if(!gb[Ko]&&!yp(Jf,S_(Wo,js,""))&&("src"!==Ko&&"xlink:href"!==Ko&&"href"!==Ko||"script"===jt||0!==ER(Wo,"data:")||!Wv[jt])&&(!ef||yp(Zl,S_(Wo,js,"")))&&Wo)return!1;return!0}function ZI(jt){U1("beforeSanitizeAttributes",jt,null);var Ko=jt.attributes;if(Ko){for(var Wo={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:au},xf=Ko.length;xf--;){var $l,tf=($l=Ko[xf]).name,Gh=$l.namespaceURI,Ol="value"===tf?$l.value:PR($l.value),uh=Zo(tf);if(Wo.attrName=uh,Wo.attrValue=Ol,Wo.keepAttr=!0,Wo.forceKeepAttr=void 0,U1("uponSanitizeAttribute",jt,Wo),Ol=Wo.attrValue,!Wo.forceKeepAttr&&(aP(tf,jt),Wo.keepAttr))if(yp(/\/>/i,Ol))aP(tf,jt);else if(Nu&&(Ol=S_(Ol,$i," "),Ol=S_(Ol,Ji," ")),uP(Zo(jt.nodeName),uh,Ol))try{Gh?jt.setAttributeNS(Gh,tf,Ol):jt.setAttribute(tf,Ol),jE(v.removed)}catch{}}U1("afterSanitizeAttributes",jt,null)}}La(YI,LR);var E2=function(jt){return 0<jt.indexOf("-")};return v.sanitize=function(jt,Ko){var Wo,xf,$l,tf,Gh;if("string"!=typeof(jt=(Xi=!jt)?"\x3c!--\x3e":jt)&&!Cm(jt)){if("function"!=typeof jt.toString)throw S2("toString is not a function");if("string"!=typeof(jt=jt.toString()))throw S2("dirty is not a string, aborting")}if(!v.isSupported){if("object"===CS(w.toStaticHTML)||"function"==typeof w.toStaticHTML){if("string"==typeof jt)return w.toStaticHTML(jt);if(Cm(jt))return w.toStaticHTML(jt.outerHTML)}return jt}if(Ec||wi(Ko),v.removed=[],Qf="string"!=typeof jt&&Qf){if(jt.nodeName){var Ol=Zo(jt.nodeName);if(!Ba[Ol]||Bo[Ol])throw S2("root node is forbidden and cannot be sanitized in-place")}}else if(jt instanceof oe)1===(xf=(Wo=qI("\x3c!----\x3e")).ownerDocument.importNode(jt,!0)).nodeType&&"BODY"===xf.nodeName||"HTML"===xf.nodeName?Wo=xf:Wo.appendChild(xf);else{if(!bl&&!Nu&&!vl&&-1===jt.indexOf("<"))return lt&&xl?lt.createHTML(jt):jt;if(!(Wo=qI(jt)))return bl?null:xl?Ft:""}Wo&&yl&&G1(Wo.firstChild);for(var uh=sP(Qf?jt:Wo);$l=uh.nextNode();)3===$l.nodeType&&$l===tf||XI($l)||($l.content instanceof Y&&function UR(KI){var kM,$I=sP(KI);for(U1("beforeSanitizeShadowDOM",KI,null);kM=$I.nextNode();)U1("uponSanitizeShadowNode",kM,null),XI(kM)||(kM.content instanceof Y&&UR(kM.content),ZI(kM));U1("afterSanitizeShadowDOM",KI,null)}($l.content),ZI($l),tf=$l);if(tf=null,Qf)return jt;if(bl){if(Kl)for(Gh=Jt.call(Wo.ownerDocument);Wo.firstChild;)Gh.appendChild(Wo.firstChild);else Gh=Wo;return au.shadowroot?En.call(P,Gh,!0):Gh}var ed=vl?Wo.outerHTML:Wo.innerHTML;return vl&&Ba["!doctype"]&&Wo.ownerDocument&&Wo.ownerDocument.doctype&&Wo.ownerDocument.doctype.name&&yp(HR,Wo.ownerDocument.doctype.name)&&(ed="<!DOCTYPE "+Wo.ownerDocument.doctype.name+">\n"+ed),Nu&&(ed=S_(ed,$i," "),ed=S_(ed,Ji," ")),lt&&xl?lt.createHTML(ed):ed},v.setConfig=function(jt){wi(jt),Ec=!0},v.clearConfig=function(){jv=null,Ec=!1},v.isValidAttribute=function(jt,Ko,Wo){return jv||wi({}),uP(Zo(jt),Zo(Ko),Wo)},v.addHook=function(jt,Ko){"function"==typeof Ko&&(Wr[jt]=Wr[jt]||[],xT(Wr[jt],Ko))},v.removeHook=function(jt){if(Wr[jt])return jE(Wr[jt])},v.removeHooks=function(jt){Wr[jt]&&(Wr[jt]=[])},v.removeAllHooks=function(){Wr={}},v}(),jI=yC.deviceType.isTouch(),nP=function(u,h){function v(w,A){return on(w,function(P,H){var X;X=function(oe,ue){A(u(),oe,H.event,P)},$f.getState(P).get().each(function(oe){X(oe)})})}return ln(ln([],I2(v,h),!0),[v(cg,function(w,A,P){A.onAction(w,{name:P.name})})],!1)},rP=function(u,h,v){function w(A,P){return on(A,function(H,Y){var oe;oe=function(ue,de){P(u(),ue,Y.event,H)},$f.getState(H).get().each(function(ue){oe(ue.internalDialog)})})}return ln(ln([],I2(w,h),!0),[w(Yf,function(A,P){return P.onSubmit(A)}),w(eh,function(A,P,H){P.onChange(A,{name:H.name})}),w(cg,function(A,P,H,Y){function X(){return no.focusIn(Y)}function oe(ye){return Bs(ye,"disabled")||Ds(ye,"aria-disabled").exists(function(Se){return"true"===Se})}var ue=zi(Y.element),de=Go(ue);P.onAction(A,{name:H.name,value:H.value}),Go(ue).fold(X,function(ye){oe(ye)||de.exists(function(Se){return gn(ye,Se)&&oe(Se)})?X():v().toOptional().filter(function(Se){return!gn(Se.element,ye)}).each(X)})}),w(pk,function(A,P,H){P.onTabChange(A,{newTabName:H.name,oldTabName:H.oldName})}),Nd(function(A){var P=u();or.setValue(A,P.getData())})],!1)},GR=WI,O2=tinymce.util.Tools.resolve("tinymce.util.URI"),oP=["insertContent","setContent","execCommand","close","block","unblock"];ho.add("silver",function(u){var h=iE(u),v=h.uiMothership,w=h.backstage,A=h.renderUI,P=h.getUi;return function q2(u,h){function v(){return H.get().isSome()}function w(){v()&&Rs.hide(X)}var A,P,H=Cs(),Y=Nr(!1),X=Ma(Rs.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:jn([tr("dismissAutocompleter",[on(Fp(),function(){return oe()})])]),lazySink:h.getSink})),oe=function(){var Pe;v()&&(Pe=H.get().map(function(Oe){return Oe.element}),kx(Pe.getOr(it.fromDom(u.selection.getNode()))).each(Xs),w(),H.clear(),Y.set(!1))},ue=Zt(function(){return Pe=wn(Re=On(u.ui.registry.getAll().popups,function(Te){return ga("Autocompleter",KM,Te).fold(function(Ve){throw new Error(Un(Ve))},_n)}),function(Te){return Te.ch}),Oe={},Tr(Pe,function(Te){Oe[Te]={}}),Ne=ra(Oe),We=un(Re),{dataset:Re,triggerChars:Ne,lookupByChar:function(Te){return mt(We,function(Ve){return Ve.ch===Te})}};var Pe,Oe,Re,Ne,We}),de=function(Pe){var Oe=Pe;H.get().map(function(Re){return ow(u.dom,u.selection.getRng(),Re.triggerChar).bind(function(Ne){return O0(u,ue,Ne,Oe)})}).getOrThunk(function(){return Re=u,We=(Ne=ue)(),Te=Re.selection.getRng(),Ve=Re.dom,Qe=Te,sn(We.triggerChars,function(lt){return ow(Ve,Qe,lt)}).bind(function(lt){return O0(Re,Ne,lt)});var Re,Ne,We,Te,Ve,Qe}).fold(oe,function(Re){var Ne,We=Re.context;v()||(Ne=function om(u,h){return kx(it.fromDom(u.selection.getNode())).getOrThunk(function(){var v,w,A=it.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',u.getDoc());return Qa(A,it.fromDom(h.extractContents())),h.insertNode(A.dom),Xr(A).each(function(P){return P.dom.normalize()}),v=Nb,(w=function(P){for(var H=Ti(P),Y=H.length-1;0<=Y;Y--){var X=H[Y];if(v(X))return $.some(X);var oe=w(X);if(oe.isSome())return oe}return $.none()})(A).map(function(P){var H;u.selection.setCursorLocation(P.dom,"img"===qt(H=P)?1:Lb(H).fold(function(){return Ti(H).length},function(Y){return Y.length}))}),A})}(u,We.range),H.set({triggerChar:We.triggerChar,element:Ne,matchLength:We.text.length}),Y.set(!1)),Re.lookupData.then(function(Te){H.get().map(function(Ve){var Qe,lt,Ft,Tt,Ut=Re.context;Ve.triggerChar===Ut.triggerChar&&(lt=Ut.triggerChar,Tt=sn(Ft=Te,function(dn){return $.from(dn.columns)}).getOr(1),0<(Qe=dr(Ft,function(dn){return function $T(u,h,v,w,A,P,H){var Y=1===w,X=!Y||Zb(u);return Ao(nn(u,function(oe){switch(oe.type){case"separator":return ga("Autocompleter.Separator",ZM,oe).fold(yv,function(ue){return $.some(ck(ue))});case"cardmenuitem":return ga("cardmenuitem",Dl,oe).fold(yv,function(ue){return $.some((de=qe(qe({},ue),{onAction:function(Re){ue.onAction(Re),v(ue.value,ue.meta)}}),ye=A,Se=P,Pe={itemBehaviours:vw(ue.meta,P),cardText:{matchText:h,highlightOn:H}},Oe={dom:dC(de.label),optComponents:[$.some({dom:{tag:"div",classes:[iC,nk]},components:qT(de.items,Pe)})]},$c({data:B0(qe({text:$.none()},de)),disabled:de.disabled,getApi:function(Re){return{isDisabled:function(){return Vr.isDisabled(Re)},setDisabled:function(Ne){Vr.set(Re,Ne),Tr(Gl(Re.element,"*"),function(We){Re.getSystem().getByDom(We).each(function(Te){Te.hasConfigured(Vr)&&Vr.set(Te,Ne)})})}}},onAction:de.onAction,onSetup:de.onSetup,triggersSubmenu:!1,itemBehaviours:$.from(Pe.itemBehaviours).getOr([])},Oe,ye,Se.providers)));var de,ye,Se,Pe,Oe});default:return ga("Autocompleter.Item",Yb,oe).fold(yv,function(ue){return $.some(function(de,ye,Se,Pe,Oe,Re,Ne,We){void 0===We&&(We=!0);var Te=Lx({presets:"normal",textContent:$.none(),htmlContent:Se?de.text.map(function(Ve){return Nx(Ve,ye)}):$.none(),ariaLabel:de.text,iconContent:de.icon,shortcutContent:$.none(),checkMark:$.none(),caret:$.none(),value:de.value},Ne.providers,We,de.icon);return $c({data:B0(de),disabled:de.disabled,getApi:ct({}),onAction:function(Ve){return Oe(de.value,de.meta)},onSetup:ct(Gt),triggersSubmenu:!1,itemBehaviours:vw(de.meta,Ne)},Te,Re,Ne.providers)}(ue,h,Y,0,v,A,P,X))})}}))}(dn.items,dn.matchText,function(Jt,yn){var En=u.selection.getRng();ow(u.dom,En,lt).fold(function(){return console.error("Lost context. Cursor probably moved")},function(pr){var Wr=pr.range,No={hide:function(){oe()},reload:function(wi){w(),de(wi)}};Y.set(!0),dn.onAction(No,Wr,Jt,yn),Y.set(!1)})},Tt,ug.BUBBLE_TO_SANDBOX,h,dn.highlightOn)})).length?function(dn,Jt,yn,En){dn.matchLength=Jt.text.length;var pr,Wr,No,wi,Ui,Ni,Zo=sn(yn,function(Xi){return $.from(Xi.columns)}).getOr(1);Rs.showAt(X,lp.sketch((pr=nC("autocompleter-value",!0,En,Zo,"normal"),Wr=Zo,wi=((No=Cw.ContentFocus)===Cw.ContentFocus?yd:py)(),Ui=Ux(Wr,"normal"),Ni=Xb("normal"),{dom:pr.dom,components:pr.components,items:pr.items,value:pr.value,markers:{selectedItem:Ni.selectedItem,item:Ni.item},movement:Ui,fakeFocus:No===Cw.ContentFocus,focusManager:wi,menuBehaviours:Ox("auto"!==Wr?[]:[ja(function(Xi,$i){sw(Xi,4,Ni.item).each(function(Ji){no.setGridSize(Xi,Ji.numRows,Ji.numColumns)})})])})),{anchor:{type:"node",root:it.fromDom(u.getBody()),node:$.from(dn.element)}}),Rs.getContent(X).each(fi.highlightFirst)}(Ve,Ut,Te,Qe):(10<=Ut.text.length-Ve.matchLength?oe:w)())})})})},ye={onKeypress:I0(function(Pe){27!==Pe.which&&de()},50),cancelIfNecessary:oe,isMenuOpen:function(){return Rs.isOpen(X)},isActive:v,isProcessingAction:Y.get,getView:function(){return Rs.getContent(X)}};function Se(Pe,Oe){vr(Pe,gh(),{raw:Oe})}!1===u.hasPlugin("rtc")&&((P=u).on("keypress compositionend",(A=ye).onKeypress.throttle),P.on("remove",A.onKeypress.cancel),P.on("keydown",function(Pe){function Oe(){return A.getView().bind(fi.getHighlighted)}8===Pe.which&&A.onKeypress.throttle(Pe),A.isActive()&&(27===Pe.which&&A.cancelIfNecessary(),A.isMenuOpen()?13===Pe.which?(Oe().each(ma),Pe.preventDefault()):40===Pe.which?(Oe().fold(function(){A.getView().each(fi.highlightFirst)},function(Re){Se(Re,Pe)}),Pe.preventDefault(),Pe.stopImmediatePropagation()):37!==Pe.which&&38!==Pe.which&&39!==Pe.which||Oe().each(function(Re){Se(Re,Pe),Pe.preventDefault(),Pe.stopImmediatePropagation()}):13!==Pe.which&&38!==Pe.which&&40!==Pe.which||A.cancelIfNecessary())}),P.on("NodeChange",function(Pe){A.isActive()&&!A.isProcessingAction()&&kx(it.fromDom(Pe.element)).isNone()&&A.cancelIfNecessary()}))}(u,w.shared),{renderUI:A,getWindowManagerImpl:ct(eP({editor:u,backstage:w})),getNotificationManagerImpl:function(){return H=u,Y=v,X=w.shared,{open:function(oe,ue){function de(){ue(),Rs.hide(Pe)}var ye=!oe.closeButton&&oe.timeout&&(0<oe.timeout||oe.timeout<0),Se=Ma(A0.sketch({text:oe.text,level:Fo(["success","error","warning","warn","info"],oe.type)?oe.type:void 0,progress:!0===oe.progressBar,icon:$.from(oe.icon),closeButton:!ye,onAction:de,iconProvider:X.providers.icons,translationProvider:X.providers.translate})),Pe=Ma(Rs.sketch(qe({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:X.getSink,fireDismissalEventInstead:{}},X.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));function Oe(){var Re=Sl(it.fromDom(H.getContentAreaContainer())),Ne=Aa(),We=lf(Ne.x,Re.x,Re.right),Te=lf(Ne.y,Re.y,Re.bottom),Ve=Math.max(Re.right,Ne.right),Qe=Math.max(Re.bottom,Ne.bottom);return $.some(Gu(We,Te,Ve-We,Qe-Te))}return Y.add(Pe),0<oe.timeout&&Ty.setTimeout(function(){de()},oe.timeout),{close:de,moveTo:function(Re,Ne){Rs.showAt(Pe,jc(Se),{anchor:{type:"makeshift",x:Re,y:Ne}})},moveRel:function(Re,Ne){var We,Te,Ve,Qe=jc(Se),lt={maxHeightFunction:np()};"banner"!==Ne&&Kr(Re)?(We=function(){switch(Ne){case"bc-bc":return D0;case"tc-tc":return ag;case"tc-bc":return Xc;default:return Ju}}(),Te={type:"node",root:Da(),node:$.some(it.fromDom(Re)),overrides:lt,layouts:{onRtl:function(){return[We]},onLtr:function(){return[We]}}},Rs.showWithinBounds(Pe,Qe,{anchor:Te},Oe)):(Ve=qe(qe({},X.anchors.banner()),{overrides:lt}),Rs.showWithinBounds(Pe,Qe,{anchor:Ve},Oe))},text:function(Re){A0.updateText(Se,Re)},settings:oe,getEl:function(){return Se.element.dom},progressBar:{value:function(Re){A0.updateProgress(Se,Re)}}}},close:function(oe){oe.close()},reposition:function(oe){0<oe.length&&Tr(oe,function(ue,de){0===de?ue.moveRel(null,"banner"):ue.moveRel(oe[de-1].getEl(),"bc-tc")})},getArgs:function(oe){return oe.settings}};var H,Y,X},ui:P()}})}(),function(){"use strict";function mr(Ot){return function(Dn){return bt=typeof(Ke=Dn),(null===Ke?"null":"object"==bt&&(Array.prototype.isPrototypeOf(Ke)||Ke.constructor&&"Array"===Ke.constructor.name)?"array":"object"==bt&&(String.prototype.isPrototypeOf(Ke)||Ke.constructor&&"String"===Ke.constructor.name)?"string":bt)===Ot;var Ke,bt}}function oi(Ot){return function(Dn){return typeof Dn===Ot}}function gt(){}function us(Ot){return function(){return Ot}}function zn(Ot){return Ot}function Gt(Ot,Dn){return Ot===Dn}function cr(){return wo}var _n=tinymce.util.Tools.resolve("tinymce.PluginManager"),jr=tinymce.util.Tools.resolve("tinymce.util.VK"),Pr=mr("string"),Bn=mr("array"),_l=oi("boolean"),Ci=oi("function"),Mi=us(!1),Kr=us(!null),wo={fold:function(Ot,Dn){return Ot()},isSome:Mi,isNone:Kr,getOr:zn,getOrThunk:Va,getOrDie:function(Ot){throw new Error(Ot||"error: getOrDie called on none.")},getOrNull:us(null),getOrUndefined:us(void 0),or:zn,orThunk:Va,map:cr,each:gt,bind:cr,exists:Mi,forall:Kr,filter:function(){return wo},toArray:function(){return[]},toString:us("none()")};function Va(Ot){return Ot()}function qr(Ot){for(var Dn=[],Ke=0,bt=Ot.length;Ke<bt;++Ke){if(!Bn(Ot[Ke]))throw new Error("Arr.flatten item "+Ke+" was not an array, input: "+Ot);Sr.apply(Dn,Ot[Ke])}return Dn}function ts(Ot,Dn){for(var Ke=0;Ke<Ot.length;Ke++){var bt=Dn(Ot[Ke],Ke);if(bt.isSome())return bt}return rn.none()}function uo(Ot,Dn,Ke){return void 0===Ke&&(Ke=Gt),Ot.exists(function(bt){return Ke(bt,Dn)})}function Ur(Ot,Dn){return Ot?rn.some(Dn):rn.none()}function ho(Ot){var Dn=Ot.getParam("link_assume_external_targets",!1);return _l(Dn)&&Dn?1:!Pr(Dn)||"http"!==Dn&&"https"!==Dn?0:Dn}function qe(Ot){return Ot.getParam("default_link_target")}function an(Ot){return Ot.getParam("target_list",!0)}function ln(Ot){return Ot.getParam("rel_list",[],"array")}function la(Ot){return Ot.getParam("allow_unsafe_link_target",!1,"boolean")}function Lt(Ot){return Pr(Ot.value)?Ot.value:""}function Yn(Ot){return void 0===Ot&&(Ot=Lt),function(Dn){return rn.from(Dn).map(function(Ke){return ki(Ke,Ot)})}}function Ir(Ot,Dn){return rs.call(Ot,Dn)}function Cu(Ot){return Ot&&"a"===Ot.nodeName.toLowerCase()}function na(Ot){return Cu(Ot)&&!!Or(Ot)}function nn(Ot,Dn){if(Ot.collapsed)return[];for(var Ke=Ot.cloneContents(),bt=new Ys(Ke.firstChild,Ke),it=[],qt=Ke.firstChild;Dn(qt)&&it.push(qt),qt=bt.next(););return it}function Ce(Ot){return/^\w+:/i.test(Ot)}function mt(Ot,Dn){function Ke(Zt){return Zt.filter(function(er){return-1===Ao.inArray(it,er)})}var bt,it=["noopener"],qt=Ot?Ot.split(/\s+/):[],Bt=Dn?0<(bt=Ke(bt=qt)).length?bt.concat(it):it:Ke(qt);return 0<Bt.length?Ao.trim(Bt.sort().join(" ")):""}function Pn(Ot,Dn){return Dn=Dn||Ot.selection.getNode(),$(Dn)?Ot.dom.select("a[href]",Dn)[0]:Ot.dom.getParent(Dn,"a[href]")}function yo(Ot,Dn){return(Dn?Dn.innerText||Dn.textContent:Ot.getContent({format:"text"})).replace(/\uFEFF/g,"")}function Yi(Ot){return 0<Ao.grep(Ot,na).length}function rr(Ot){var Dn=Ot.schema.getTextInlineElements();return 0===nn(Ot.selection.getRng(),function(Ke){return 1===Ke.nodeType&&!Cu(Ke)&&!Ir(Dn,Ke.nodeName.toLowerCase())}).length}function dr(Ot,Dn,Ke){var bt,it,qt,Bt,er,Rn,Fn,ur,Ln,fn=(bt=Ot,it=Ke.href,ni(ni({},Ke),{href:Ts.isDomSafe(it,"a",bt.settings)?it:""}));Ot.hasPlugin("rtc",!0)?Ot.execCommand("createlink",!1,(er=fn.href,Rn=fn.rel,Fn=fn.target,ur=fn.text,Ln=fn.title,function Jo(Ot,Dn,Ke,bt){(function(it){for(var qt=Fu(it),Bt=0,Zt=qt.length;Bt<Zt;Bt++){var er=qt[Bt];(Dn(Rn=it[er],Fn=er)?Ke:bt)(Rn,Fn)}var Rn,Fn})(Ot)}({class:fn.class.getOrNull(),href:er,rel:Rn.getOrNull(),target:Fn.getOrNull(),text:ur.getOrNull(),title:Ln.getOrNull()},function(gn,Dt){return!1===function(Ot){return null===Ot}(gn)},(qt=Bt={},function(gn,Dt){qt[Dt]=gn}),gt),Bt)):function De(Ot,Dn,Ke){var bt,it,qt,Bt,Zt,er,Rn,Fn=Ot.selection.getNode(),ur=Pn(Ot,Fn),Ln=(it=Ot,qt=function Yo(Ot,Dn,Ke){return function(bt){for(var qt=0,Bt=bt.length;qt<Bt;qt++)Ke=Dn(Ke,bt[qt],qt)}(Ot),Ke}(["title","rel","class","target"],function(fn,gn){return bt[gn].each(function(Dt){fn[gn]=0<Dt.length?Dt:null}),fn},{href:(bt=Ke).href}),Rn=ni({},qt),0<ln(it).length||!1!==la(it)||(Bt=mt(Rn.rel,"_blank"===Rn.target),Rn.rel=Bt||null),rn.from(Rn.target).isNone()&&!1===an(it)&&(Rn.target=qe(it)),Rn.href=(Zt=Rn.href,"http"!==(er=ho(it))&&"https"!==er||Ce(Zt)?Zt:er+"://"+Zt),Rn);Ot.undoManager.transact(function(){var fn,gn,Dt,ro,so,eo,bo;Ke.href===Dn.href&&Dn.attach(),ur?(Ot.focus(),so=Ot,eo=ur,bo=Ln,Ke.text.each(function(Ti){Ir(eo,"innerText")?eo.innerText=Ti:eo.textContent=Ti}),so.dom.setAttribs(eo,bo),so.selection.select(eo)):(fn=Ot,Dt=Ke.text,ro=Ln,$(gn=Fn)?su(fn,gn,ro):Dt.fold(function(){fn.execCommand("mceInsertLink",!1,ro)},function(Ti){fn.insertContent(fn.dom.createHTML("a",ro,fn.dom.encode(Ti)))}))})}(Ot,Dn,fn)}function Ue(Ot){var Dn;Ot.hasPlugin("rtc",!0)?Ot.execCommand("unlink"):(Dn=Ot).undoManager.transact(function(){var Ke,bt,it,qt,Bt,Zt,er,Rn=Dn.selection.getNode();$(Rn)?El(Dn,Rn):(bt=(Ke=Dn).dom,qt=(it=Ke.selection).getBookmark(),Bt=it.getRng().cloneRange(),Zt=bt.getParent(Bt.startContainer,"a[href]",Ke.getBody()),er=bt.getParent(Bt.endContainer,"a[href]",Ke.getBody()),Zt&&Bt.setStartBefore(Zt),er&&Bt.setEndAfter(er),it.setRng(Bt),Ke.execCommand("unlink"),it.moveToBookmark(qt)),Dn.focus()})}function yr(Ot){var Dn=Ot.href;return 0<Dn.indexOf("@")&&-1===Dn.indexOf("/")&&-1===Dn.indexOf("mailto:")?rn.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(Ke){return ni(ni({},Ke),{href:"mailto:"+Dn})}}):rn.none()}function ir(Ot,Dn,Ke){var bt=Ot.getAttrib(Dn,Ke);return null!==bt&&0<bt.length?rn.some(bt):rn.none()}function gr(Ot,Dn){return Ot.dom.getParent(Dn,"a[href]")}function wr(Ot){return gr(Ot,Ot.selection.getStart())}function Mu(Ot,Dn){var Ke,bt;Dn&&(Ke=Or(Dn),/^#/.test(Ke)?(bt=Ot.$(Ke)).length&&Ot.selection.scrollIntoView(bt[0],!0):function(it){var qt=document.createElement("a");qt.target="_blank",qt.href=it,qt.rel="noreferrer noopener";var Bt,Zt,er=document.createEvent("MouseEvents");er.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),Bt=qt,Zt=er,document.body.appendChild(Bt),Bt.dispatchEvent(Zt),document.body.removeChild(Bt)}(Dn.href))}function ca(Ot){return function(){!function gc(Ot){var Dn,Ke=Pn(Dn=Ot);hr(Dn,Ke).then(function(bt){var it,qt,Bt,Zt,Rn=Bt=Ot,Fn=(it=Zt=bt).anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),ur=it.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],Ln=rn.from(qe(Rn)),fn=it.anchor,gn={url:{value:qt=fn.url.getOr(""),meta:{original:{value:qt}}},text:fn.text.getOr(""),title:fn.title.getOr(""),anchor:qt,link:qt,rel:fn.rel.getOr(""),target:fn.target.or(Ln).getOr(""),linkClass:fn.linkClass.getOr("")},Dt=it.catalogs,ro=Fo(gn,Dt);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:qr([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Fn,ur,function(so){for(var eo=[],Xr=function(Ti){eo.push(Ti)},bo=0;bo<so.length;bo++)so[bo].each(Xr);return eo}([Dt.anchor.map(ns.createUi("anchor","Anchors")),Dt.rels.map(ns.createUi("rel","Rel")),Dt.targets.map(ns.createUi("target","Open link in...")),Dt.link.map(ns.createUi("link","Link list")),Dt.classes.map(ns.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:gn,onChange:function(so,eo){ro.onChange(so.getData,{name:eo.name}).each(function(bo){so.setData(bo)})},onSubmit:function(so){var eo=so.getData();if(!eo.url.value)return Ue(Bt),void so.close();function Xr($r){return rn.from(eo[$r]).filter(function(uu){return!uo(Zt.anchor[$r],uu)})}var bo={href:eo.url.value,text:Xr("text"),target:Xr("target"),rel:Xr("rel"),class:Xr("linkClass"),title:Xr("title")},Ti={href:eo.url.value,attach:void 0!==eo.url.meta&&eo.url.meta.attach?eo.url.meta.attach:gt};ra(Bt,bo).then(function($r){dr(Bt,Ti,$r)}),so.close()}}}).then(function(bt){Ot.windowManager.open(bt)})}(Ot)}}function ku(Ot){return function(){Mu(Ot,wr(Ot))}}function sn(Ot,Dn){return Ot.on("NodeChange",Dn),function(){return Ot.off("NodeChange",Dn)}}function Ht(Ot){return function(Dn){function Ke(){return Dn.setActive(!Ot.mode.isReadOnly()&&null!==Pn(Ot,Ot.selection.getNode()))}return Ke(),sn(Ot,Ke)}}function On(Ot){return function(Dn){function Ke(){return Dn.setDisabled(null===Pn(Ot,Ot.selection.getNode()))}return Ke(),sn(Ot,Ke)}}function wn(Ot){return function(Dn){function Ke(it){return Yi(it)||0<nn(Ot.selection.getRng(),na).length}var bt=Ot.dom.getParents(Ot.selection.getStart());return Dn.setDisabled(!Ke(bt)),sn(Ot,function(it){return Dn.setDisabled(!Ke(it.parents))})}}function Hn(Ot){var Dn=qr(function(Ke,bt){for(var it=Ke.length,qt=new Array(it),Bt=0;Bt<it;Bt++)qt[Bt]=bt(Ke[Bt]);return qt}(Ot.dom.select("a:not([href])"),function(Ke){var bt=Ke.name||Ke.id;return bt?[{text:bt,value:"#"+bt}]:[]}));return 0<Dn.length?rn.some([{text:"None",value:""}].concat(Dn)):rn.none()}var un=function(Ot){function Dn(){return it}function Ke(qt){return qt(Ot)}var bt=us(Ot),it={fold:function(qt,Bt){return Bt(Ot)},isSome:Kr,isNone:Mi,getOr:bt,getOrThunk:bt,getOrDie:bt,getOrNull:bt,getOrUndefined:bt,or:Dn,orThunk:Dn,map:function(qt){return un(qt(Ot))},each:function(qt){qt(Ot)},bind:Ke,exists:Ke,forall:Ke,filter:function(qt){return qt(Ot)?it:wo},toArray:function(){return[Ot]},toString:function(){return"some("+Ot+")"}};return it},rn={some:un,none:cr,from:function(Ot){return null==Ot?wo:un(Ot)}},zo=Array.prototype.indexOf,Sr=Array.prototype.push,Ao=tinymce.util.Tools.resolve("tinymce.util.Tools"),ki=function(Ot,Dn){var Ke=[];return Ao.each(Ot,function(bt){var it,qt,Bt,Zt=Pr((it=bt).text)?it.text:Pr(it.title)?it.title:"";void 0!==bt.menu?(qt=ki(bt.menu,Dn),Ke.push({text:Zt,items:qt})):(Bt=Dn(bt),Ke.push({text:Zt,value:Bt}))}),Ke},ns={sanitize:function(Ot){return Yn(Lt)(Ot)},sanitizeWith:Yn,createUi:function(Ot,Dn){return function(Ke){return{name:Ot,type:"listbox",label:Dn,items:Ke}}},getValue:Lt},ni=function(){return(ni=Object.assign||function(Ot){for(var Dn,Ke=1,bt=arguments.length;Ke<bt;Ke++)for(var it in Dn=arguments[Ke])Object.prototype.hasOwnProperty.call(Dn,it)&&(Ot[it]=Dn[it]);return Ot}).apply(this,arguments)},Fu=Object.keys,rs=Object.hasOwnProperty,Ys=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ts=tinymce.util.Tools.resolve("tinymce.util.URI"),Or=function(Ot){return Ot.getAttribute("data-mce-href")||Ot.getAttribute("href")},$=function(Ot){return Ot&&"FIGURE"===Ot.nodeName&&/\bimage\b/i.test(Ot.className)},El=function(Ot,Dn){var Ke,bt=Ot.dom.select("img",Dn)[0];!bt||(Ke=Ot.dom.getParents(bt,"a[href]",Dn)[0])&&(Ke.parentNode.insertBefore(bt,Ke),Ot.dom.remove(Ke))},su=function(Ot,Dn,Ke){var bt,it=Ot.dom.select("img",Dn)[0];it&&(bt=Ot.dom.create("a",Ke),it.parentNode.insertBefore(bt,it),bt.appendChild(it))},br=function(Ot,Dn){return ts(Dn,function(Ke){return Ir(bt=Ke,"items")&&null!=bt.items?br(Ot,Ke.items):Ur(Ke.value===Ot,Ke);var bt})},Fo=function(Ot,Dn){var bt={text:Ot.text,title:Ot.title};return{onChange:function(it,qt){var Zt,er,Fn,ur,Ln=qt.name;return"url"===Ln?(Zt=it(),Fn=Ur(bt.text.length<=0,rn.from((er=Zt.url).meta.text).getOr(er.value)),ur=Ur(bt.title.length<=0,rn.from(Zt.url.meta.title).getOr("")),Fn.isSome()||ur.isSome()?rn.some(ni(ni({},Fn.map(function(fn){return{text:fn}}).getOr({})),ur.map(function(fn){return{title:fn}}).getOr({}))):rn.none()):-1<zo.call(["anchor","link"],Ln)?function Ke(it,qt){var Bt,Zt,Fn,ur,Ln=("link"===(Bt=qt.name)?Dn.link:"anchor"===Bt?Dn.anchor:rn.none()).getOr([]);return ur=0<(Zt=bt.text).length,void 0!==(Fn=it[qt.name])?br(Fn,Ln).map(function(fn){return{url:{value:fn.value,meta:{text:ur?Zt:fn.text,attach:gt}},text:ur?Zt:fn.text}}):rn.none()}(it(),qt):("text"!==Ln&&"title"!==Ln||(bt[Ln]=it()[Ln]),rn.none())}}},Tr=tinymce.util.Tools.resolve("tinymce.util.Delay"),lh=tinymce.util.Tools.resolve("tinymce.util.Promise"),ra=function(Ot,Dn){return ts([yr,(Ke=ho(Ot),bt=Ot.getParam("link_default_protocol","http","string"),function(it){var qt=it.href;return 1===Ke&&!Ce(qt)||0===Ke&&/^\s*www(\.|\d\.)/i.test(qt)?rn.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+bt+":// prefix?",preprocess:function(Bt){return ni(ni({},Bt),{href:bt+"://"+qt})}}):rn.none()})],function(it){return it(Dn)}).fold(function(){return lh.resolve(Dn)},function(it){return new lh(function(qt){var Bt=Ot,Zt=it.message,Rn=Bt.selection.getRng();Tr.setEditorTimeout(Bt,function(){Bt.windowManager.confirm(Zt,function(Fn){Bt.selection.setRng(Rn),function(Fn){qt(Fn?it.preprocess(Dn):Dn)}(Fn)})})})});var Ke,bt},po=tinymce.util.Tools.resolve("tinymce.util.XHR"),Vu=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],hr=function(Ot,Dn){return it=(bt=Ot).getParam("link_list"),new lh(function(qt){Pr(it)?po.send({url:it,success:function(Bt){return qt(function(Zt){try{return rn.some(JSON.parse(Zt))}catch{return rn.none()}}(Bt))},error:function(Bt){return qt(rn.none())}}):Ci(it)?it(function(Bt){return qt(rn.some(Bt))}):qt(rn.from(it))}).then(function(qt){return qt.bind(ns.sanitizeWith(Ke)).map(function(Bt){return 0<Bt.length?[{text:"None",value:""}].concat(Bt):Bt})}).then(function(qt){var Bt,Zt,er,Rn,Fn,ur,Ln,fn,gn,Dt,ro=(Zt=Dn,er=(Bt=Ot).dom,Rn=rr(Bt)?rn.some(yo(Bt.selection,Zt)):rn.none(),Fn=Zt?rn.some(er.getAttrib(Zt,"href")):rn.none(),ur=Zt?rn.from(er.getAttrib(Zt,"target")):rn.none(),Ln=ir(er,Zt,"rel"),fn=ir(er,Zt,"class"),{url:Fn,text:Rn,title:ir(er,Zt,"title"),target:ur,rel:Ln,linkClass:fn});return{anchor:ro,catalogs:{targets:(Dt=an(Ot),Bn(Dt)?ns.sanitize(Dt).orThunk(function(){return rn.some(Vu)}):!1===Dt?rn.none():rn.some(Vu)),rels:function(so,eo){var Xr=ln(so);if(0<Xr.length){var bo=uo(eo,"_blank");return(!1===la(so)?ns.sanitizeWith(function(Ti){return mt(ns.getValue(Ti),bo)}):ns.sanitize)(Xr)}return rn.none()}(Ot,ro.target),classes:0<(gn=Ot.getParam("link_class_list",[],"array")).length?ns.sanitize(gn):rn.none(),anchor:Hn(Ot),link:qt},optNode:rn.from(Dn),flags:{titleEnabled:Ot.getParam("link_title",!0,"boolean")}}});function Ke(qt){return bt.convertURL(qt.value||qt.url,"href")}var bt,it};_n.add("link",function(Ot){var Dn,Ke,bt,it,qt,Bt,Zt;function er(Rn){var Fn=Zt.selection.getNode();return Rn.setDisabled(!Pn(Zt,Fn)),gt}(Dn=Ot).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:ca(Dn),onSetup:Ht(Dn)}),Dn.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:ku(Dn),onSetup:On(Dn)}),Dn.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return Ue(Dn)},onSetup:wn(Dn)}),(Ke=Ot).ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:ku(Ke),onSetup:On(Ke)}),Ke.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:ca(Ke)}),Ke.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return Ue(Ke)},onSetup:wn(Ke)}),(bt=Ot).ui.registry.addContextMenu("link",{update:function(Rn){return Yi(bt.dom.getParents(Rn,"a"))?"link unlink openlink":"link"}}),(Zt=Ot).ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:Ht(Zt)},label:"Link",predicate:function(Rn){return!!Pn(Zt,Rn)&&Zt.getParam("link_context_toolbar",!1,"boolean")},initValue:function(){var Rn=Pn(Zt);return Rn?Or(Rn):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(Rn){var Fn=Zt.selection.getNode();return Rn.setActive(!!Pn(Zt,Fn)),Ht(Zt)(Rn)},onAction:function(Rn){var Fn=Rn.getValue(),ur=function(Ln){var fn=Pn(Zt),gn=rr(Zt);if(fn||!gn)return rn.none();var Dt=yo(Zt.selection,fn);return rn.some(0<Dt.length?Dt:Ln)}(Fn);dr(Zt,{href:Fn,attach:gt},{href:Fn,text:ur,title:rn.none(),rel:rn.none(),target:rn.none(),class:rn.none()}),Zt.selection.collapse(!1),Rn.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:er,onAction:function(Rn){Ue(Zt),Rn.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:er,onAction:function(Rn){ku(Zt)(),Rn.hide()}}]}),(Bt=Ot).on("click",function(Rn){var Fn=gr(Bt,Rn.target);Fn&&jr.metaKeyPressed(Rn)&&(Rn.preventDefault(),Mu(Bt,Fn))}),Bt.on("keydown",function(Rn){var Fn=wr(Bt);Fn&&13===Rn.keyCode&&!0===Rn.altKey&&!1===Rn.shiftKey&&!1===Rn.ctrlKey&&!1===Rn.metaKey&&(Rn.preventDefault(),Mu(Bt,Fn))}),(it=Ot).addCommand("mceLink",function(){it.getParam("link_quicklink",!1,"boolean")?it.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):ca(it)()}),(qt=Ot).addShortcut("Meta+K","",function(){qt.execCommand("mceLink")})})}(),function(){"use strict";function mr(Ke){var bt=Ke;return{get:function(){return bt},set:function(it){bt=it}}}function oi(Ke){return null!=Ke}function gt(){}function us(Ke){return function(){return Ke}}function zn(Ke){return Ke}function Gt(){return Bn}var ct=tinymce.util.Tools.resolve("tinymce.PluginManager"),_n=function(Ke){return it=typeof(bt=Ke),"array"==(null===bt?"null":"object"==it&&(Array.prototype.isPrototypeOf(bt)||bt.constructor&&"Array"===bt.constructor.name)?"array":"object"==it&&(String.prototype.isPrototypeOf(bt)||bt.constructor&&"String"===bt.constructor.name)?"string":it);var bt,it},jr=us(!1),Pr=us(!0),Bn={fold:function(Ke,bt){return Ke()},isSome:jr,isNone:Pr,getOr:zn,getOrThunk:mi,getOrDie:function(Ke){throw new Error(Ke||"error: getOrDie called on none.")},getOrNull:us(null),getOrUndefined:us(void 0),or:zn,orThunk:mi,map:Gt,each:gt,bind:Gt,exists:jr,forall:Pr,filter:function(){return Bn},toArray:function(){return[]},toString:us("none()")};function mi(Ke){return Ke()}function _l(Ke,bt){for(var it=0,qt=Ke.length;it<qt;it++)if(bt(Ke[it],it))return!0;return!1}function Ci(Ke,bt){for(var it=Ke.length,qt=new Array(it),Bt=0;Bt<it;Bt++)qt[Bt]=bt(Ke[Bt],Bt);return qt}function Mi(Ke,bt){for(var it=0,qt=Ke.length;it<qt;it++)bt(Ke[it],it)}function Kr(){var Ke,bt,it=(Ke=gt,bt=mr(Ao.none()),{clear:function(){qt(),bt.set(Ao.none())},isSet:function(){return bt.get().isSome()},get:function(){return bt.get()},set:function(Bt){qt(),bt.set(Ao.some(Bt))}});function qt(){return bt.get().each(Ke)}return Fu(Fu({},it),{on:function(Bt){return it.get().each(Bt)}})}function wo(Ke,bt,it){return""===bt||Ke.length>=bt.length&&Ke.substr(it,it+bt.length)===bt}function Va(Ke,bt){return Ke.fire("PastePlainTextToggle",{state:bt})}function Yo(Ke){return Ke.getParam("paste_data_images",!1)}function qr(Ke){return Ke.getParam("paste_retain_style_properties")}function ts(Ke){return Ke.getParam("validate")}function uo(Ke){return Ke.getParam("paste_data_images",!1,"boolean")}function Ur(Ke){return $.explode(Ke.getParam("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"))}function ho(Ke){return-1!==Ke.indexOf(su)}function an(Ke,bt){return $.each(bt,function(it){Ke=it.constructor===RegExp?Ke.replace(it,""):Ke.replace(it[0],it[1])}),Ke}function ln(Ke){return an(Ke,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(bt,it,qt){return it||qt?"\xa0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function la(Ke){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(Ke)||/class="OutlineElement/.test(Ke)||/id="?docs\-internal\-guid\-/.test(Ke)}function Yn(Ke,bt){return{content:Ke,cancelled:bt}}function Ir(Ke,bt){return Ke.insertContent(bt,{merge:Ke.getParam("paste_merge_formats",!0),paste:!0}),!0}function Cu(Ke){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(Ke)}function na(Ke,bt,it){return!(!1!==Ke.selection.isCollapsed()||!Cu(bt)||(Bt=bt,Zt=it,(qt=Ke).undoManager.extra(function(){Zt(qt,Bt)},function(){qt.execCommand("mceInsertLink",!1,Bt)}),0));var qt,Bt,Zt}function nn(Ke,bt,it){return qt=Ke,!(!Cu(Bt=bt)||!_l(Ur(qt),function(Fn){return wo(ur=Bt.toLowerCase(),Ln="."+Fn.toLowerCase(),ur.length-Ln.length);var ur,Ln})||(er=bt,Rn=it,(Zt=Ke).undoManager.extra(function(){Rn(Zt,er)},function(){Zt.insertContent('<img src="'+er+'">')}),0));var qt,Bt,Zt,er,Rn}function Ce(Ke){return"\n"===Ke||"\r"===Ke}function mt(Ke,bt,it,qt){var Bt,Zt,er,Rn,Fn=function Jo(Ke,bt,it){var qt,Bt,Zt,er,Rn,Fn,ur,Ln,fn,gn,Dt,ro,so=la(bt),eo=so?(Bt=bt,(qt=Ke).getParam("paste_enable_default_filters",!0)?function Lt(Ke,bt){var it,qt=qr(Ke);qt&&(it=$.makeMap(qt.split(/[, ]/))),bt=an(bt,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(Fn,ur){return 0<ur.length?ur.replace(/./," ").slice(Math.floor(ur.length/2)).split("").join("\xa0"):""}]]);var Bt=Ke.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody"),Zt=Vu({valid_elements:Bt,valid_children:"-li[p]"});$.each(Zt.elements,function(Fn){Fn.attributes.class||(Fn.attributes.class={},Fn.attributesOrder.push("class")),Fn.attributes.style||(Fn.attributes.style={},Fn.attributesOrder.push("style"))});var er=lh({},Zt);er.addAttributeFilter("style",function(Fn){for(var ur,Ln=Fn.length;Ln--;)(ur=Fn[Ln]).attr("style",function(fn,gn,Dt,ro){var so={},eo=fn.dom.parseStyle(ro);return $.each(eo,function(Xr,bo){switch(bo){case"mso-list":var Ti=/\w+ \w+([0-9]+)/i.exec(ro);Ti&&(Dt._listLevel=parseInt(Ti[1],10)),/Ignore/i.test(Xr)&&Dt.firstChild&&(Dt._listIgnore=!0,Dt.firstChild._listIgnore=!0);break;case"horiz-align":bo="text-align";break;case"vert-align":bo="vertical-align";break;case"font-color":case"mso-foreground":bo="color";break;case"mso-background":case"mso-highlight":bo="background";break;case"font-weight":case"font-style":return void("normal"!==Xr&&(so[bo]=Xr));case"mso-element":if(/^(comment|comment-list)$/i.test(Xr))return void Dt.remove()}0!==bo.indexOf("mso-comment")?0!==bo.indexOf("mso-")&&("all"===qr(fn)||gn&&gn[bo])&&(so[bo]=Xr):Dt.remove()}),/(bold)/i.test(so["font-weight"])&&(delete so["font-weight"],Dt.wrap(new po("b",1))),/(italic)/i.test(so["font-style"])&&(delete so["font-style"],Dt.wrap(new po("i",1))),fn.dom.serializeStyle(so,Dt.name)||null}(Ke,it,ur,ur.attr("style"))),"span"===ur.name&&ur.parent&&!ur.attributes.length&&ur.unwrap()}),er.addAttributeFilter("class",function(Fn){for(var ur,Ln,fn=Fn.length;fn--;)Ln=(ur=Fn[fn]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test(Ln)&&ur.remove(),ur.attr("class",null)}),er.addNodeFilter("del",function(Fn){for(var ur=Fn.length;ur--;)Fn[ur].remove()}),er.addNodeFilter("a",function(Fn){for(var ur,Ln,fn,gn=Fn.length;gn--;)Ln=(ur=Fn[gn]).attr("href"),fn=ur.attr("name"),Ln&&-1!==Ln.indexOf("#_msocom_")?ur.remove():!(Ln=Ln&&0===Ln.indexOf("file://")?(Ln=Ln.split("#")[1])&&"#"+Ln:Ln)&&!fn||fn&&!/^_?(?:toc|edn|ftn)/i.test(fn)?ur.unwrap():ur.attr({href:Ln,name:fn})});var Rn=er.parse(bt);return Ke.getParam("paste_convert_word_fake_lists",!0)&&function(Fn){for(var ur,Ln,fn=1,gn=function(Dr){var go="";if(3===Dr.type)return Dr.value;if(Dr=Dr.firstChild)for(;go+=gn(Dr),Dr=Dr.next;);return go},Dt=function(Dr,go){if(3===Dr.type&&go.test(Dr.value))return Dr.value=Dr.value.replace(go,""),!1;if(Dr=Dr.firstChild)do{if(!Dt(Dr,go))return!1}while(Dr=Dr.next);return!0},ro=function(Dr){if(Dr._listIgnore)Dr.remove();else if(Dr=Dr.firstChild)for(;ro(Dr),Dr=Dr.next;);},so=function(Dr,go,oa){var Ns=Dr._listLevel||fn;(ur=Ns!==fn?Ns<fn?ur&&ur.parent.parent:(Ln=ur,null):ur)&&ur.name===go?ur.append(Dr):(Ln=Ln||ur,ur=new po(go,1),1<oa&&ur.attr("start",""+oa),Dr.wrap(ur)),Dr.name="li",fn<Ns&&Ln&&Ln.lastChild.append(ur),fn=Ns,ro(Dr),Dt(Dr,/^\u00a0+/),Dt(Dr,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),Dt(Dr,/^\u00a0+/)},eo=[],Xr=Fn.firstChild;null!=Xr;)if(eo.push(Xr),null!==(Xr=Xr.walk()))for(;void 0!==Xr&&Xr.parent!==Fn;)Xr=Xr.walk();for(var bo,Ti,$r,uu=0;uu<eo.length;uu++)"p"===(Fn=eo[uu]).name&&Fn.firstChild?(bo=gn(Fn),/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(bo)?so(Fn,"ul"):function(Dr){var go=!1;return Dr=bo.replace(/^[\u00a0 ]+/,""),$.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],function(oa){if(oa.test(Dr))return!(go=!0)}),go}(bo)?($r=1,so(Fn,"ol",$r=(Ti=/([0-9]+)\./.exec(bo))?parseInt(Ti[1],10):$r)):Fn._listLevel?so(Fn,"ul",1):ur=null):(Ln=ur,ur=null)}(Rn),ra({validate:ts(Ke)},Zt).serialize(Rn)}(qt,Bt):Bt):bt;return Dt=(Zt=Ke).fire("PastePreProcess",{content:eo,internal:er=it,wordContent:Rn=so}),ro=function(Xr,bo){var Ti=lh({},Xr.schema);Ti.addNodeFilter("meta",function(uu){$.each(uu,function(Dr){Dr.remove()})});var $r=Ti.parse(bo,{forced_root_block:!1,isRootContent:!0});return ra({validate:ts(Xr)},Xr.schema).serialize($r)}(Zt,Dt.content),Zt.hasEventListeners("PastePostProcess")&&!Dt.isDefaultPrevented()?(ur=er,Ln=Rn,fn=(Fn=Zt).dom.create("div",{style:"display:none"},ro),Yn((gn=Fn.fire("PastePostProcess",{node:fn,internal:ur,wordContent:Ln})).node.innerHTML,gn.isDefaultPrevented())):Yn(ro,Dt.isDefaultPrevented())}(Ke,bt,it);!1===Fn.cancelled&&(Bt=Ke,Zt=Fn.content,qt||!1===Bt.getParam("smart_paste",!0)?Ir(Bt,Zt):(er=Bt,Rn=Zt,$.each([na,nn,Ir],function(ur){return!0!==ur(er,Rn,Ir)})))}function Pn(Ke,bt,it){var qt=it||ho(bt);mt(Ke,bt.replace(su,""),qt,!1)}function yo(Ke,bt){var it,qt,Bt,Zt,er,Rn,ur=function qe(Ke,bt,it){return bt?(qt=!0===bt?"p":bt,Bt=it,Zt=Ke.split(/\n\n/),er=function(ur,Ln){var gn=[],Dt="<"+ur;if("object"==typeof Ln){for(var ro in Ln)Fo.call(Ln,ro)&&gn.push(ro+'="'+Tr.encodeAllRaw(Ln[ro])+'"');gn.length&&(Dt+=" "+gn.join(" "))}return Dt+">"}(qt,Bt),Rn="</"+qt+">",1===(Fn=$.map(Zt,function(ur){return ur.split(/\n/).join("<br />")})).length?Fn[0]:$.map(Fn,function(ur){return er+ur+Rn}).join("")):Ke.replace(/\r?\n/g,"<br>");var qt,Bt,Zt,er,Rn,Fn}((it=Ke.dom.encode(bt).replace(/\r\n/g,"\n"),Zt=(qt=Ke.getParam("paste_tab_spaces",4,"number"))<=0?"":new Array(qt+1).join(" "),er=it.replace(/\t/g,Zt),Rn={pcIsSpace:!(Bt=function(Ln,fn){return-1!==" \f\t\v".indexOf(fn)||"\xa0"===fn?Ln.pcIsSpace||""===Ln.str||Ln.str.length===er.length-1||(gn=Ln.str.length+1)<er.length&&0<=gn&&Ce(er[gn])?{pcIsSpace:!1,str:Ln.str+"\xa0"}:{pcIsSpace:!0,str:Ln.str+" "}:{pcIsSpace:Ce(fn),str:Ln.str+fn};var gn}),str:""},Mi(er,function(Ln,fn){Rn=Bt(Rn,Ln)}),Rn.str),Ke.getParam("forced_root_block"),Ke.getParam("forced_root_block_attrs"));mt(Ke,ur,!1,!0)}function Yi(Ke){var bt,it={};if(Ke&&(!Ke.getData||(bt=Ke.getData("Text"))&&0<bt.length&&-1===bt.indexOf("data:text/mce-internal,")&&(it["text/plain"]=bt),Ke.types))for(var qt=0;qt<Ke.types.length;qt++){var Bt=Ke.types[qt];try{it[Bt]=Ke.getData(Bt)}catch{it[Bt]=""}}return it}function rr(Ke,bt){return bt in Ke&&0<Ke[bt].length}function De(Ke){return rr(Ke,"text/html")||rr(Ke,"text/plain")}function dr(Ke,bt,it){var qt,Bt,Zt,er,Rn,Fn="paste"===bt.type?bt.clipboardData:bt.dataTransfer;if(uo(Ke)&&Fn){var ur=(qt=Ke,Zt=(Bt=Fn).items?function(Ln){for(var fn=[],gn=0,Dt=Ln.length;gn<Dt;++gn){if(!_n(Ln[gn]))throw new Error("Arr.flatten item "+gn+" was not an array, input: "+Ln);ns.apply(fn,Ln[gn])}return fn}(Ci(ni(Bt.items),function(Ln){return"file"===Ln.kind?[Ln.getAsFile()]:[]})):[],er=Bt.files?ni(Bt.files):[],function(Ln,fn){for(var gn=[],Dt=0,ro=Ln.length;Dt<ro;Dt++){var so=Ln[Dt];fn(so,Dt)&&gn.push(so)}return gn}(0<Zt.length?Zt:er,(Rn=Ur(qt),function(Ln){return wo(Ln.type,"image/",0)&&_l(Rn,function(fn){return gn=fn.toLowerCase(),($.hasOwn(Dt={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},gn)?"image/"+Dt[gn]:"image/"+gn)===Ln.type;var gn,Dt})})));if(0<ur.length)return bt.preventDefault(),Ts.all(Ci(ur,function(Ln){return new Ts(function(fn){var gn=oi(Ln.getAsFile)?Ln.getAsFile():Ln,Dt=new window.FileReader;Dt.onload=function(){fn({blob:gn,uri:Dt.result})},Dt.readAsDataURL(gn)})})).then(function(Ln){it&&Ke.selection.setRng(it),Mi(Ln,function(fn){var gn,Dt,ro,so,eo,Xr,bo,Ti,uu,Dr,go,oa,Ns,qs,Gr,Ha,Wa,Ds,Bs;gn=Ke,ro=(Dt=fn).uri,Gr=(qs=(so=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(ro))?{type:so[1],data:decodeURIComponent(so[2])}:{type:null,data:null}).data,Ha=qs.type,Wa=hr(),Ds=Dt.blob,(Bs=new Image).src=Dt.uri,oa=Bs,!(Ns=gn.getParam("images_dataimg_filter"))||Ns(oa)?(uu=void 0,(Xr=(eo=gn.editorUpload.blobCache).getByData(Gr,Ha))?uu=Xr:(Ti=(bo=gn.getParam("images_reuse_filename")&&oi(Ds.name))?(Dr=gn,oi(go=Ds.name.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i))?Dr.dom.encode(go[1]):null):Wa,uu=eo.create(Wa,Ds,Gr,Ti,bo?Ds.name:void 0),eo.add(uu)),Pn(gn,'<img src="'+uu.blobUri()+'">',!1)):Pn(gn,'<img src="'+Dt.uri+'">',!1)})}),!0}return!1}function Ue(Ke){return Or.metaKeyPressed(Ke)&&86===Ke.keyCode||Ke.shiftKey&&45===Ke.keyCode}function ir(Ke){return rs.ie&&Ke.inline?document.body:Ke.getBody()}function gr(Ke,bt,it,qt){!function(Bt,Zt,er){if(!1===rs.iOS&&"function"==typeof(null==Bt?void 0:Bt.setData))try{return Bt.clearData(),Bt.setData("text/html",Zt),Bt.setData("text/plain",er),Bt.setData(br(),Zt),1}catch{return}}(Ke.clipboardData,bt.html,bt.text)?it(bt.html,qt):(Ke.preventDefault(),qt())}function wr(Ke){return function(bt,it){var qt=su+bt,Bt=Ke.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),Zt=Ke.dom.create("div",{contenteditable:"true"},qt);Ke.dom.setStyles(Bt,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),Bt.appendChild(Zt),Ke.dom.add(Ke.getBody(),Bt);var er=Ke.selection.getRng();Zt.focus();var Rn=Ke.dom.createRng();Rn.selectNodeContents(Zt),Ke.selection.setRng(Rn),Ys.setTimeout(function(){Ke.selection.setRng(er),Bt.parentNode.removeChild(Bt),it()},0)}}function Mu(Ke){return{html:Ke.selection.getContent({contextual:!0}),text:Ke.selection.getContent({format:"text"})}}function ca(Ke){return!Ke.selection.isCollapsed()||(bt=Ke).dom.getParent(bt.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",bt.getBody());var bt}function ku(Ke,bt){return Dn.getCaretRangeFromPoint(bt.clientX,bt.clientY,Ke.getDoc())}function sn(Ke,bt){Ke.focus(),Ke.selection.setRng(bt)}function Ht(Ke,bt){Ke.on("PastePreProcess",function(it){it.content=bt(Ke,it.content,it.internal,it.wordContent)})}function On(Ke,bt){if(!la(bt))return bt;var it=[];return $.each(Ke.schema.getBlockElements(),function(qt,Bt){it.push(Bt)}),bt=an(bt,[[new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+it.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),"$1"]]),an(bt,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function wn(Ke,bt,it,qt){if(qt||it)return bt;var Bt,Zt,er,Rn=Ke.getParam("paste_webkit_styles");return!1===Ke.getParam("paste_remove_styles_if_webkit",!0)||"all"===Rn?bt:(bt=(Bt=Rn?Rn.split(/[, ]/):Bt)?(Zt=Ke.dom,er=Ke.selection.getNode(),bt.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(Fn,ur,Ln,fn){var gn=Zt.parseStyle(Zt.decode(Ln)),Dt={};if("none"===Bt)return ur+fn;for(var ro=0;ro<Bt.length;ro++){var so=gn[Bt[ro]],eo=Zt.getStyle(er,Bt[ro],!0);/color/.test(Bt[ro])&&(so=Zt.toHex(so),eo=Zt.toHex(eo)),eo!==so&&(Dt[Bt[ro]]=so)}var Xr=Zt.serializeStyle(Dt,"span");return Xr?ur+' style="'+Xr+'"'+fn:ur+fn})):bt.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")).replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(Fn,ur,Ln,fn){return ur+' style="'+Ln+'"'+fn})}function Hn(Ke,bt){Ke.$("a",bt).find("font,u").each(function(it,qt){Ke.dom.remove(qt,!0)})}function un(Ke,bt){return function(it){function qt(Bt){return it.setActive(Bt.state)}return it.setActive("text"===bt.pasteFormat.get()),Ke.on("PastePlainTextToggle",qt),function(){return Ke.off("PastePlainTextToggle",qt)}}}function rn(Ke){return Ke.dom.get("mcepastebin")}var zo,Sr=function(Ke){function bt(){return Bt}function it(Zt){return Zt(Ke)}var qt=us(Ke),Bt={fold:function(Zt,er){return er(Ke)},isSome:Pr,isNone:jr,getOr:qt,getOrThunk:qt,getOrDie:qt,getOrNull:qt,getOrUndefined:qt,or:bt,orThunk:bt,map:function(Zt){return Sr(Zt(Ke))},each:function(Zt){Zt(Ke)},bind:it,exists:it,forall:it,filter:function(Zt){return Zt(Ke)?Bt:Bn},toArray:function(){return[Ke]},toString:function(){return"some("+Ke+")"}};return Bt},Ao={some:Sr,none:Gt,from:function(Ke){return null==Ke?Bn:Sr(Ke)}},ki=Array.prototype.slice,ns=Array.prototype.push,ni="function"==typeof Array.from?Array.from:function(Ke){return ki.call(Ke)},Fu=function(){return(Fu=Object.assign||function(Ke){for(var bt,it=1,qt=arguments.length;it<qt;it++)for(var Bt in bt=arguments[it])Object.prototype.hasOwnProperty.call(bt,Bt)&&(Ke[Bt]=bt[Bt]);return Ke}).apply(this,arguments)},rs=tinymce.util.Tools.resolve("tinymce.Env"),Ys=tinymce.util.Tools.resolve("tinymce.util.Delay"),Ts=tinymce.util.Tools.resolve("tinymce.util.Promise"),Or=tinymce.util.Tools.resolve("tinymce.util.VK"),$=tinymce.util.Tools.resolve("tinymce.util.Tools"),El="x-tinymce/html",su="\x3c!-- "+El+" --\x3e",br=us(El),Fo=Object.hasOwnProperty,Tr=tinymce.util.Tools.resolve("tinymce.html.Entities"),lh=tinymce.util.Tools.resolve("tinymce.html.DomParser"),ra=tinymce.util.Tools.resolve("tinymce.html.Serializer"),po=tinymce.util.Tools.resolve("tinymce.html.Node"),Vu=tinymce.util.Tools.resolve("tinymce.html.Schema"),hr=(zo=0,function(){return"mceclip"+zo++}),Ot=function(Ke,bt){var it=rn(Ke);return it&&"mcepastebin"===it.id&&it.innerHTML===bt},Dn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils");ct.add("paste",function(Ke){if(0==(!!Ke.hasPlugin("powerpaste",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0))){var bt=mr(!1),it=mr(Ke.getParam("paste_as_text",!1)?"text":"html"),qt=(bo=it,Ti=function gc(Ke){var bt=mr(null),it="%MCEPASTEBIN%";return{create:function(){return function(qt,Bt,Zt){var er=qt.dom,Rn=qt.getBody();Bt.set(qt.selection.getRng());var Fn,ur,fn,gn=qt.dom.add(ir(qt),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},"%MCEPASTEBIN%");(rs.ie||rs.gecko)&&er.setStyle(gn,"left","rtl"===er.getStyle(Rn,"direction",!0)?65535:-65535),er.bind(gn,"beforedeactivate focusin focusout",function(Dt){Dt.stopPropagation()}),ur=gn,ir(fn=Fn=qt)!==fn.getBody()&&Fn.dom.bind(ur,"paste keyup",function(Dt){Ot(Fn,"%MCEPASTEBIN%")||Fn.fire("paste")}),gn.focus(),qt.selection.select(gn,!0)}(Ke,bt)},remove:function(){return function(qt,Bt){if(rn(qt)){for(var Zt,er=Bt.get();Zt=qt.dom.get("mcepastebin");)qt.dom.remove(Zt),qt.dom.unbind(Zt);er&&qt.selection.setRng(er)}Bt.set(null)}(Ke,bt)},getEl:function(){return rn(Ke)},getHtml:function(){return function(qt){function Bt(Ln,fn){Ln.appendChild(fn),qt.dom.remove(fn,!0)}var Zt=$.grep(ir(qt).childNodes,function(Ln){return"mcepastebin"===Ln.id}),er=Zt.shift();$.each(Zt,function(Ln){Bt(er,Ln)});for(var Rn=qt.dom.select("div[id=mcepastebin]",er),Fn=Rn.length-1;0<=Fn;Fn--){var ur=qt.dom.create("div");er.insertBefore(ur,Rn[Fn]),Bt(ur,Rn[Fn])}return er?er.innerHTML:""}(Ke)},getLastRng:bt.get,isDefault:function(){return Ot(Ke,it)},isDefaultContent:function(qt){return qt===it}}}(Xr=Ke),Xr.on("PreInit",function(){return function yr(Ke,bt,it){var qt,Bt,Zt,er,Rn,Fn,ur;function Ln(fn,gn,Dt,ro,so){var eo;rr(gn,"text/html")?eo=gn["text/html"]:(eo=Zt.getHtml(),so=so||ho(eo),Zt.isDefaultContent(eo)&&(ro=!0)),eo=ln(eo),Zt.remove();var Xr,bo,Ti,$r,uu,Dr,go,oa,Ns=!1===so&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(eo),qs=Cu(eo);((ro=!eo.length||Ns&&!qs||ro)||qs)&&(eo=rr(gn,"text/plain")&&Ns?gn["text/plain"]:(Xr=eo,bo=Vu(),Ti=lh({},bo),$r="",uu=bo.getShortEndedElements(),Dr=$.makeMap("script noscript style textarea video audio iframe object"," "),go=bo.getBlockElements(),oa=function(Gr){var Ha=Gr.name,Wa=Gr;if("br"!==Ha){if("wbr"!==Ha)if(uu[Ha]&&($r+=" "),Dr[Ha])$r+=" ";else{if(3===Gr.type&&($r+=Gr.value),!Gr.shortEnded&&(Gr=Gr.firstChild))for(;oa(Gr),Gr=Gr.next;);go[Ha]&&Wa.next&&($r+="\n","p"===Ha&&($r+="\n"))}}else $r+="\n"},Xr=an(Xr,[/<!\[[^\]]+\]>/g]),oa(Ti.parse(Xr)),$r)),Zt.isDefaultContent(eo)?Dt||fn.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):ro?yo(fn,eo):Pn(fn,eo,so)}Bt=Ke,Zt=bt,er=it,Fn=Kr(),ur=Kr(),Bt.on("keyup",ur.clear),Bt.on("keydown",function(fn){function gn(Dt){Ue(Dt)&&!Dt.isDefaultPrevented()&&Zt.remove()}if(Ue(fn)&&!fn.isDefaultPrevented()&&(!(Rn=fn.shiftKey&&86===fn.keyCode)||!rs.webkit||-1===navigator.userAgent.indexOf("Version/"))){if(fn.stopImmediatePropagation(),Fn.set(fn),ur.set(!0),rs.ie&&Rn)return fn.preventDefault(),void Bt.fire("paste",{ieFake:!0});Zt.remove(),Zt.create(),Bt.once("keyup",gn),Bt.once("paste",function(){Bt.off("keyup",gn)})}}),Bt.on("paste",function(fn){var gn=Fn.isSet()||ur.isSet();gn&&Fn.clear();var Dt,ro=Yi(fn.clipboardData||Bt.getDoc().dataTransfer),so="text"===er.get()||Rn,eo=rr(ro,br());Rn=!1,fn.isDefaultPrevented()||(Dt=fn.clipboardData,-1!==navigator.userAgent.indexOf("Android")&&Dt&&Dt.items&&0===Dt.items.length)||!De(ro)&&dr(Bt,fn,Zt.getLastRng()||Bt.selection.getRng())?Zt.remove():(gn||fn.preventDefault(),!rs.ie||gn&&!fn.ieFake||rr(ro,"text/html")||(Zt.create(),Bt.dom.bind(Zt.getEl(),"paste",function(Xr){Xr.stopPropagation()}),Bt.getDoc().execCommand("Paste",!1,null),ro["text/html"]=Zt.getHtml()),rr(ro,"text/html")?(fn.preventDefault(),eo=eo||ho(ro["text/html"]),Ln(Bt,ro,gn,so,eo)):Ys.setEditorTimeout(Bt,function(){Ln(Bt,ro,gn,so,eo)},0))}),Ke.parser.addNodeFilter("img",function(fn,gn,Dt){var ro;if(!uo(Ke)&&Dt.data&&!0===Dt.data.paste)for(var so=fn.length;so--;)(qt=fn[so].attr("src"))&&(0!==qt.indexOf("webkit-fake-url")&&(Ke.getParam("allow_html_data_urls",!1,"boolean")||0!==qt.indexOf("data:"))||(ro=fn[so]).attr("data-mce-object")||qt===rs.transparentSrc||ro.remove())})}(Xr,Ti,bo)}),{pasteFormat:bo,pasteHtml:function(Dr,go){return Pn(Xr,Dr,go)},pasteText:function(Dr){return yo(Xr,Dr)},pasteImageData:function(Dr,go){return dr(Xr,Dr,go)},getDataTransferItems:Yi,hasHtmlOrText:De,hasContentType:rr}),ro=Ke;return rs.webkit&&Ht(ro,wn),rs.ie&&(Ht(ro,On),eo=Hn,(so=ro).on("PastePostProcess",function(Dr){eo(so,Dr.node)})),(gn=Ke).ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:$r,onSetup:un(gn,Dt=qt)}),gn.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:$r,onSetup:un(gn,Dt)}),fn=qt,(Ln=Ke).addCommand("mceTogglePlainTextPaste",function(){var Dr,go=Ln;"text"===(Dr=fn).pasteFormat.get()?(Dr.pasteFormat.set("html"),Va(go,!1)):(Dr.pasteFormat.set("text"),Va(go,!0)),go.focus()}),Ln.addCommand("mceInsertClipboardContent",function(Dr,go){go.content&&fn.pasteHtml(go.content,go.internal),go.text&&fn.pasteText(go.text)}),function(Dr){var go=Dr.plugins.paste,oa=Dr.getParam("paste_preprocess");oa&&Dr.on("PastePreProcess",function(qs){oa.call(go,go,qs)});var Ns=Dr.getParam("paste_postprocess");Ns&&Dr.on("PastePostProcess",function(qs){Ns.call(go,go,qs)})}(Ke),(Rn=Ke).on("cut",(Fn=Rn,function(Dr){ca(Fn)&&gr(Dr,Mu(Fn),wr(Fn),function(){var go;rs.browser.isChrome()||rs.browser.isFirefox()?(go=Fn.selection.getRng(),Ys.setEditorTimeout(Fn,function(){Fn.selection.setRng(go),Fn.execCommand("Delete")},0)):Fn.execCommand("Delete")})})),Rn.on("copy",(ur=Rn,function(Dr){ca(ur)&&gr(Dr,Mu(ur),wr(ur),gt)})),Zt=qt,er=bt,(Bt=Ke).getParam("paste_block_drop",!1)&&Bt.on("dragend dragover draggesture dragdrop drop drag",function(Dr){Dr.preventDefault(),Dr.stopPropagation()}),Yo(Bt)||Bt.on("drop",function(Dr){var go=Dr.dataTransfer;go&&go.files&&0<go.files.length&&Dr.preventDefault()}),Bt.on("drop",function(Dr){var go,oa,Ns,qs,Gr=ku(Bt,Dr);Dr.isDefaultPrevented()||er.get()||(go=Zt.getDataTransferItems(Dr.dataTransfer),oa=Zt.hasContentType(go,br()),(!Zt.hasHtmlOrText(go)||(Ns=go["text/plain"])&&0===Ns.indexOf("file://"))&&Zt.pasteImageData(Dr,Gr)||!Gr||!Bt.getParam("paste_filter_drop",!0)||(qs=go["mce-internal"]||go["text/html"]||go["text/plain"])&&(Dr.preventDefault(),Ys.setEditorTimeout(Bt,function(){Bt.undoManager.transact(function(){go["mce-internal"]&&Bt.execCommand("Delete"),sn(Bt,Gr),qs=ln(qs),go["text/html"]?Zt.pasteHtml(qs,oa):Zt.pasteText(qs)})})))}),Bt.on("dragstart",function(Dr){er.set(!0)}),Bt.on("dragover dragend",function(Dr){Yo(Bt)&&!1===er.get()&&(Dr.preventDefault(),sn(Bt,ku(Bt,Dr))),"dragend"===Dr.type&&er.set(!1)}),{clipboard:qt}}var Bt,Zt,er,Rn,Fn,ur,Ln,fn,gn,Dt,so,eo,Xr,bo,Ti;function $r(){return gn.execCommand("mceTogglePlainTextPaste")}})}(),function(){"use strict";function mr(M){return function(R){return J=typeof(W=R),(null===W?"null":"object"==J&&(Array.prototype.isPrototypeOf(W)||W.constructor&&"Array"===W.constructor.name)?"array":"object"==J&&(String.prototype.isPrototypeOf(W)||W.constructor&&"String"===W.constructor.name)?"string":J)===M;var W,J}}function oi(M){return function(R){return typeof R===M}}function gt(M){return function(R){return M===R}}function us(M){return null!=M}function zn(){}function Gt(M){return function(){return M}}function cr(M){return M}function ct(M,R){return M===R}var _n=mr("string"),jr=mr("object"),Pr=mr("array"),Bn=gt(null),mi=oi("boolean"),_l=gt(void 0),Ci=oi("function"),Mi=oi("number");function Kr(M){for(var R=[],W=1;W<arguments.length;W++)R[W-1]=arguments[W];return function(){for(var J=[],se=0;se<arguments.length;se++)J[se]=arguments[se];var ce=R.concat(J);return M.apply(null,ce)}}function wo(M){return function(R){return!M(R)}}function Va(){return ts}var Yo=Gt(!1),qr=Gt(!0),ts={fold:function(M,R){return M()},isSome:Yo,isNone:qr,getOr:cr,getOrThunk:uo,getOrDie:function(M){throw new Error(M||"error: getOrDie called on none.")},getOrNull:Gt(null),getOrUndefined:Gt(void 0),or:cr,orThunk:uo,map:Va,each:zn,bind:Va,exists:Yo,forall:qr,filter:function(){return ts},toArray:function(){return[]},toString:Gt("none()")};function uo(M){return M()}function Ur(M,R){return-1<ir.call(M,R)}function ho(M,R){for(var W=0,J=M.length;W<J;W++)if(R(M[W],W))return!0;return!1}function qe(M,R){for(var W=[],J=0;J<M;J++)W.push(R(J));return W}function an(M,R){for(var W=M.length,J=new Array(W),se=0;se<W;se++)J[se]=R(M[se],se);return J}function ln(M,R){for(var W=0,J=M.length;W<J;W++)R(M[W],W)}function la(M,R){for(var W=[],J=[],se=0,ce=M.length;se<ce;se++){var we=M[se];(R(we,se)?W:J).push(we)}return{pass:W,fail:J}}function Lt(M,R){for(var W=[],J=0,se=M.length;J<se;J++){var ce=M[J];R(ce,J)&&W.push(ce)}return W}function Yn(M,R,W){return function(J){for(var ce=J.length-1;0<=ce;ce--)W=R(W,J[ce],ce)}(M),W}function Jo(M,R,W){return ln(M,function(J,se){W=R(W,J,se)}),W}function Ir(M,R){return function(W,J,se){for(var ce=0,we=W.length;ce<we;ce++){var Ie=W[ce];if(J(Ie,ce))return Ue.some(Ie);if(se(Ie,ce))break}return Ue.none()}(M,R,Yo)}function Cu(M,R){for(var W=0,J=M.length;W<J;W++)if(R(M[W],W))return Ue.some(W);return Ue.none()}function na(M){for(var R=[],W=0,J=M.length;W<J;++W){if(!Pr(M[W]))throw new Error("Arr.flatten item "+W+" was not an array, input: "+M);gc.apply(R,M[W])}return R}function nn(M,R){return na(an(M,R))}function Ce(M,R){for(var W=0,J=M.length;W<J;++W)if(!0!==R(M[W],W))return!1;return!0}function mt(M,R){for(var W={},J=0,se=M.length;J<se;J++){var ce=M[J];W[String(ce)]=R(ce,J)}return W}function Pn(M){return[M]}function yo(M,R){return 0<=R&&R<M.length?Ue.some(M[R]):Ue.none()}function Yi(M){return yo(M,0)}function rr(M){return yo(M,M.length-1)}function De(M,R){for(var W=0;W<M.length;W++){var J=R(M[W],W);if(J.isSome())return J}return Ue.none()}var dr=function(M){function R(){return se}function W(ce){return ce(M)}var J=Gt(M),se={fold:function(ce,we){return we(M)},isSome:qr,isNone:Yo,getOr:J,getOrThunk:J,getOrDie:J,getOrNull:J,getOrUndefined:J,or:R,orThunk:R,map:function(ce){return dr(ce(M))},each:function(ce){ce(M)},bind:W,exists:W,forall:W,filter:function(ce){return ce(M)?se:ts},toArray:function(){return[M]},toString:function(){return"some("+M+")"}};return se},Ue={some:dr,none:Va,from:function(M){return null==M?ts:dr(M)}},yr=Array.prototype.slice,ir=Array.prototype.indexOf,gc=Array.prototype.push,gr=function(){return(gr=Object.assign||function(M){for(var R,W=1,J=arguments.length;W<J;W++)for(var se in R=arguments[W])Object.prototype.hasOwnProperty.call(R,se)&&(M[se]=R[se]);return M}).apply(this,arguments)};function wr(M,R,W){if(W||2===arguments.length)for(var J,se=0,ce=R.length;se<ce;se++)!J&&se in R||((J=J||Array.prototype.slice.call(R,0,se))[se]=R[se]);return M.concat(J||Array.prototype.slice.call(R))}function Mu(M){var R,W=!1;return function(){for(var J=[],se=0;se<arguments.length;se++)J[se]=arguments[se];return W||(W=!0,R=M.apply(null,J)),R}}function ca(M,R){var W=String(R).toLowerCase();return Ir(M,function(J){return J.search(W)})}function ku(M,R,W){return""===R||M.length>=R.length&&M.substr(W,W+R.length)===R}function sn(M,R){return-1!==M.indexOf(R)}function Ht(M,R){return ku(M,R,M.length-R.length)}function On(M){return 0<M.length}function wn(M){return function(R){return sn(R,M)}}function Hn(M){return window.matchMedia(M).matches}function un(M,R){var W=M.dom;if(1!==W.nodeType)return!1;var J=W;if(void 0!==J.matches)return J.matches(R);if(void 0!==J.msMatchesSelector)return J.msMatchesSelector(R);if(void 0!==J.webkitMatchesSelector)return J.webkitMatchesSelector(R);if(void 0!==J.mozMatchesSelector)return J.mozMatchesSelector(R);throw new Error("Browser lacks native selectors")}function rn(M){return 1!==M.nodeType&&9!==M.nodeType&&11!==M.nodeType||0===M.childElementCount}function zo(M,R){var W=void 0===R?document:R.dom;return rn(W)?Ue.none():Ue.from(W.querySelector(M)).map(Dt.fromDom)}function Sr(M,R){return M.dom===R.dom}function Ao(M,R){return gn().browser.isIE()?(se=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(M.dom.compareDocumentPosition(R.dom)&se)):(ce=M.dom)!==(we=R.dom)&&ce.contains(we);var se,ce,we}function ki(M,R){for(var W=so(M),J=0,se=W.length;J<se;J++){var ce=W[J];R(M[ce],ce)}}function ns(M,R){return Xr(M,function(W,J){return{k:J,v:R(W,J)}})}function ni(M,R){var W={},J=R,se=W,ce=function(Ie,He){se[He]=Ie},we=zn;return ki(M,function(Ie,He){(J(Ie,He)?ce:we)(Ie,He)}),W}function Fu(M,R){var W=[];return ki(M,function(J,se){W.push(R(J,se))}),W}function rs(M){return Fu(M,cr)}function Ys(M){return so(M).length}function Ts(M,R){return bo(M,R)?Ue.from(M[R]):Ue.none()}function Or(M,R){return bo(M,R)&&null!=M[R]}function $(M,R,W){return{element:M,rowspan:R,colspan:W}}function El(M,R,W){return{element:M,cells:R,section:W}}function su(M,R,W){return{element:M,isNew:R,isLocked:W}}function br(M,R,W,J){return{element:M,cells:R,section:W,isNew:J}}function Fo(){return Vu(0,0)}function Tr(M){function R(se){return function(){return W===se}}var W=M.current;return{current:W,version:M.version,isEdge:R("Edge"),isChrome:R("Chrome"),isIE:R("IE"),isOpera:R("Opera"),isFirefox:R(it),isSafari:R("Safari")}}function lh(M){function R(se){return function(){return W===se}}var W=M.current;return{current:W,version:M.version,isWindows:R(Zt),isiOS:R("iOS"),isAndroid:R(er),isOSX:R("OSX"),isLinux:R("Linux"),isSolaris:R(Rn),isFreeBSD:R(Fn),isChromeOS:R(ur)}}function ra(M){if(null==M)throw new Error("Node cannot be null or undefined");return{dom:M}}var po,Vu=function(M,R){return{major:M,minor:R}},hr={nu:Vu,detect:function(M,R){var W,J,se=String(R).toLowerCase();return 0===M.length?Fo():(J=function(we,Ie){for(var He=0;He<we.length;He++){var Ye=we[He];if(Ye.test(Ie))return Ye}}(M,W=se))?Vu(ce(1),ce(2)):{major:0,minor:0};function ce(we){return Number(W.replace(J,"$"+we))}},unknown:Fo},Ot=function(M,R){return ku(M,R,0)},Dn=(po=/^\s+|\s+$/g,function(M){return M.replace(po,"")}),Ke=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,bt={browsers:Gt([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(M){return sn(M,"edge/")&&sn(M,"chrome")&&sn(M,"safari")&&sn(M,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ke],search:function(M){return sn(M,"chrome")&&!sn(M,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(M){return sn(M,"msie")||sn(M,"trident")}},{name:"Opera",versionRegexes:[Ke,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wn("firefox")},{name:"Safari",versionRegexes:[Ke,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(M){return(sn(M,"safari")||sn(M,"mobile/"))&&sn(M,"applewebkit")}}]),oses:Gt([{name:"Windows",search:wn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(M){return sn(M,"iphone")||sn(M,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:wn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wn("linux"),versionRegexes:[]},{name:"Solaris",search:wn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:wn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},it="Firefox",qt=function(){return Tr({current:void 0,version:hr.unknown()})},Bt=Tr,Zt=(Gt("Edge"),Gt("Chrome"),Gt("IE"),Gt("Opera"),Gt(it),Gt("Safari"),"Windows"),er="Android",Rn="Solaris",Fn="FreeBSD",ur="ChromeOS",Ln=function(){return lh({current:void 0,version:hr.unknown()})},fn=lh,gn=(Gt(Zt),Gt("iOS"),Gt(er),Gt("Linux"),Gt("OSX"),Gt(Rn),Gt(Fn),Gt(ur),Mu(function(){return M=navigator.userAgent,R=Ue.from(navigator.userAgentData),W=Hn,zt=bt.browsers(),Xt=bt.oses(),{browser:ft=R.bind(function(xn){return wt=zt,De(xn.brands,function(Sn){var $t=Sn.brand.toLowerCase();return Ir(wt,function(Er){var Tn;return $t===(null===(Tn=Er.brand)||void 0===Tn?void 0:Tn.toLowerCase())}).map(function(Er){return{current:Er.name,version:hr.nu(parseInt(Sn.version,10),0)}})});var wt}).orThunk(function(){return ca(zt,xn=M).map(function(wt){var Sn=hr.detect(wt.versionRegexes,xn);return{current:wt.name,version:Sn}});var xn}).fold(qt,Bt),os:Pt=ca(Xt,J=M).map(function(xn){var wt=hr.detect(xn.versionRegexes,J);return{current:xn.name,version:wt}}).fold(Ln,fn),deviceType:(ce=ft,we=M,Ie=W,He=(se=Pt).isiOS()&&!0===/ipad/i.test(we),Ye=se.isiOS()&&!He,ut=(at=se.isiOS()||se.isAndroid())||Ie("(pointer:coarse)"),st=He||!Ye&&at&&Ie("(min-device-width:768px)"),Mt=Ye||at&&!st,ht=ce.isSafari()&&se.isiOS()&&!1===/safari/i.test(we),{isiPad:Gt(He),isiPhone:Gt(Ye),isTablet:Gt(st),isPhone:Gt(Mt),isTouch:Gt(ut),isAndroid:se.isAndroid,isiOS:se.isiOS,isWebView:Gt(ht),isDesktop:Gt(!Mt&&!st&&!ht)})};var M,R,W,J,se,ce,we,Ie,He,Ye,at,ut,st,Mt,ht,zt,Xt,ft,Pt})),Dt={fromHtml:function(M,R){var W=(R||document).createElement("div");if(W.innerHTML=M,!W.hasChildNodes()||1<W.childNodes.length)throw console.error("HTML does not have a single root node",M),new Error("HTML must have a single root node");return ra(W.childNodes[0])},fromTag:function(M,R){return ra((R||document).createElement(M))},fromText:function(M,R){return ra((R||document).createTextNode(M))},fromDom:ra,fromPoint:function(M,R,W){return Ue.from(M.dom.elementFromPoint(R,W)).map(ra)}},ro=un,so=Object.keys,eo=Object.hasOwnProperty,Xr=function(M,R){var W={};return ki(M,function(J,se){var ce=R(J,se);W[ce.k]=ce.v}),W},bo=function(M,R){return eo.call(M,R)},Ti=["tfoot","thead","tbody","colgroup"];function $r(M){return M.dom.nodeName.toLowerCase()}function uu(M){return M.dom.nodeType}function Dr(M){return function(R){return uu(R)===M}}function go(M){return 8===uu(M)||"#comment"===$r(M)}function oa(M){return function(R){return Tu(R)&&$r(R)===M}}function Ns(M){return Dt.fromDom(M.dom.ownerDocument)}function qs(M){return Di(M)?M:Ns(M)}function Gr(M){return Ue.from(M.dom.parentNode).map(Dt.fromDom)}function Ha(M,R){for(var W=Ci(R)?R:Yo,J=M.dom,se=[];null!=J.parentNode;){var ce=J.parentNode,we=Dt.fromDom(ce);if(se.push(we),!0===W(we))break;J=ce}return se}function Wa(M){return Ue.from(M.dom.previousSibling).map(Dt.fromDom)}function Ds(M){return Ue.from(M.dom.nextSibling).map(Dt.fromDom)}function Bs(M){return an(M.dom.childNodes,Dt.fromDom)}function ls(M,R){return Ue.from(M.dom.childNodes[R]).map(Dt.fromDom)}function Mm(M){return Dt.fromDom(M.dom.host)}function xp(M,R,W){return J=function(se){return un(se,R)},Lt(Ha(M,W),J);var J}function to(M,R){return W=function(J){return un(J,R)},Lt(Bs(M),W);var W}function wa(M,R){return rn(W=void 0===M?document:M.dom)?[]:an(W.querySelectorAll(R),Dt.fromDom);var W}"undefined"!=typeof window||Function("return this;")();var Tu=Dr(1),As=Dr(3),Di=Dr(9),Pc=Dr(11),Lo=Ci(Element.prototype.attachShadow)&&Ci(Node.prototype.getRootNode),_p=Gt(Lo),bg=Lo?function(M){return Dt.fromDom(M.dom.getRootNode())}:qs,Fr=function(M){var R=As(M)?M.dom.parentNode:M.dom;if(null==R||null===R.ownerDocument)return!1;var W,J,se,ce,we,Ie=R.ownerDocument;return se=Dt.fromDom(R),we=bg(se),(Pc(ce=we)&&us(ce.dom.host)?Ue.some(we):Ue.none()).fold(function(){return Ie.body.contains(R)},(W=Fr,J=Mm,function(He){return W(J(He))}))},Rc=function(M){var R=M.dom.body;if(null==R)throw new Error("Body is not available yet");return Dt.fromDom(R)},Pl=function(M,R){var W=[];return ln(Bs(M),function(J){W=(W=R(J)?W.concat([J]):W).concat(Pl(J,R))}),W};function Qt(M,R,W,J,se){return M(W,J)?Ue.some(W):Ci(se)&&se(W)?Ue.none():R(W,J,se)}function It(M,R,W){for(var J=M.dom,se=Ci(W)?W:Yo;J.parentNode;){var ce=Dt.fromDom(J=J.parentNode);if(R(ce))return Ue.some(ce);if(se(ce))break}return Ue.none()}function Ga(M,R,W){return It(M,function(J){return un(J,R)},W)}function wp(M,R){return W=function(J){return un(J,R)},Ir(M.dom.childNodes,function(J){return W(Dt.fromDom(J))}).map(Dt.fromDom);var W}function lo(M,R){return zo(R,M)}function lu(M,R,W){return Qt(un,Ga,M,R,W)}function Dd(M,R,W){if(!(_n(W)||mi(W)||Mi(W)))throw console.error("Invalid call to Attribute.set. Key ",R,":: Value ",W,":: Element ",M),new Error("Attribute value was not simple");M.setAttribute(R,W+"")}function cs(M,R,W){Dd(M.dom,R,W)}function cu(M,R){var W=M.dom;ki(R,function(J,se){Dd(W,se,J)})}function Xs(M,R){var W=M.dom.getAttribute(R);return null===W?void 0:W}function $o(M,R){return Ue.from(Xs(M,R))}function nd(M){return Jo(M.dom.attributes,function(R,W){return R[W.name]=W.value,R},{})}function Ql(M,R,W){return void 0===W&&(W=ct),M.exists(function(J){return W(J,R)})}function Io(M){for(var R=[],W=function(se){R.push(se)},J=0;J<M.length;J++)M[J].each(W);return R}function xg(M,R,W){return M.isSome()&&R.isSome()?Ue.some(W(M.getOrDie(),R.getOrDie())):Ue.none()}function rl(M,R){return M?Ue.some(R):Ue.none()}function mc(M){return void 0!==M.style&&Ci(M.style.getPropertyValue)}function Uh(M,R,W){if(!_n(W))throw console.error("Invalid call to CSS.set. Property ",R,":: Value ",W,":: Element ",M),new Error("CSS value must be a string: "+W);mc(M)&&M.style.setProperty(R,W)}function zs(M,R,W){Uh(M.dom,R,W)}function Rl(M,R){var W=M.dom;ki(R,function(J,se){Uh(W,se,J)})}function Du(M,R){var W=M.dom,J=window.getComputedStyle(W).getPropertyValue(R);return""!==J||Fr(M)?J:co(W,R)}function Au(M,R){var J=co(M.dom,R);return Ue.from(J).filter(function(se){return 0<se.length})}function Ll(M,R){var W,J=R;mc(W=M.dom)&&W.style.removeProperty(J),Ql($o(M,"style").map(Dn),"")&&Ia(M,"style")}function Lc(M,R,W){return void 0===W&&(W=0),$o(M,R).map(function(J){return parseInt(J,10)}).getOr(W)}function Sp(M,R){return Lc(M,R,1)}function Cp(M){return oa("col")(M)?1<Lc(M,"span",1):1<Sp(M,"colspan")}function Ad(M){return 1<Sp(M,"rowspan")}function Id(M,R){return parseInt(Du(M,R),10)}function _g(M,R){return ju(M,R,qr)}function jh(M,R){return W=["td","th"],(se=void 0===(se=R)?Yo:R)(J=M)?Ue.none():Ur(W,$r(J))?Ue.some(J):Ga(J,W.join(","),function(ce){return un(ce,"table")||se(ce)});var W,J,se}function vc(M){return _g(M,"th,td")}function Ai(M){return un(M,"colgroup")?to(M,"col"):nn(il(M),function(R){return to(R,"col")})}function sa(M,R){return lu(M,"table",R)}function ch(M){return _g(M,"tr")}function Nl(M,R){return an(M,function(W){if("colgroup"!==$r(W))return El(W,J=an(vc(W),function(se){return $(se,Lc(se,"rowspan",1),Lc(se,"colspan",1))}),R(W));var J=an(Ai(W),function(se){return $(se,1,Lc(se,"span",1))});return El(W,J,"colgroup")})}function Cf(M){return Gr(M).map(function(R){var W=$r(R);return Ur(Ti,W)?W:"tbody"}).getOr("tbody")}function Mf(M){var R=ch(M);return Nl(wr(wr([],il(M),!0),R,!0),Cf)}function ol(M,R,W){var J=M.cells,se=J.slice(0,R),ce=J.slice(R),we=se.concat(W).concat(ce);return Yh(M,we)}function nf(M,R,W){return ol(M,R,[W])}function fu(M,R,W){M.cells[R]=W}function yc(M,R){return M.cells[R]}function Ta(M,R){return yc(M,R).element}function fs(M){return M.cells.length}function zi(M){var R=la(M,function(W){return"colgroup"===W.section});return{rows:R.fail,cols:R.pass}}function Bl(M,R,W){var J=an(M.cells,W);return br(R(M.element),J,M.section,!0)}function ec(M){return $o(M,os).bind(function(R){return Ue.from(R.match(/\d+/g))}).map(function(R){return mt(R,qr)})}function Zs(M){var R,W=Fu(Jo(zi(M).rows,function(J,se){return ln(se.cells,function(ce,we){ce.isLocked&&(J[we]=!0)}),J},{}),function(J,se){return parseInt(se,10)});return(R=yr.call(W,0)).sort(void 0),R}function Da(M){var R={},W=[],J=Yi(M).map(function(st){return st.element}).bind(sa).bind(ec).getOr({}),se=0,ce=0,we=0,Ie=la(M,function(st){return"colgroup"===st.section}),He=Ie.pass;ln(Ie.fail,function(st){var Mt=[];ln(st.cells,function(ht){for(var zt=0;void 0!==R[we+","+zt];)zt++;for(var Xt=Or(J,zt.toString()),ft={element:ht.element,rowspan:ht.rowspan,colspan:ht.colspan,row:we,column:zt,isLocked:Xt},Pt=0;Pt<ht.colspan;Pt++)for(var xn=0;xn<ht.rowspan;xn++){var wt=zt+Pt;R[we+xn+","+wt]=ft,ce=Math.max(ce,wt+1)}Mt.push(ft)}),se++,W.push(El(st.element,Mt,st.section)),we++});var Ye=rr(He).map(function(st){var Mt,ht,zt=(Mt={},ht=0,ln(st.cells,function(Xt){var ft=Xt.colspan;qe(ft,function(Pt){var xn=ht+Pt;Mt[xn]={element:Xt.element,colspan:ft,column:xn}}),ht+=ft}),Mt);return{colgroups:[{element:st.element,columns:rs(zt)}],columns:zt}}).getOrThunk(function(){return{colgroups:[],columns:{}}});return{grid:{rows:se,columns:ce},access:R,all:W,columns:Ye.columns,colgroups:Ye.colgroups}}function rd(M,R){return R.column<=M.finishCol&&R.column+R.colspan-1>=M.startCol&&R.row<=M.finishRow&&R.row+R.rowspan-1>=M.startRow}function zl(M,R){return R.column>=M.startCol&&R.column+R.colspan-1<=M.finishCol&&R.row>=M.startRow&&R.row+R.rowspan-1<=M.finishRow}function Nc(M,R,W){var J=Oo.findItem(M,R,Sr),se=Oo.findItem(M,W,Sr);return J.bind(function(ce){return se.map(function(we){return Ie=ce,He=we,{startRow:Math.min(Ie.row,He.row),startCol:Math.min(Ie.column,He.column),finishRow:Math.max(Ie.row+Ie.rowspan-1,He.row+He.rowspan-1),finishCol:Math.max(Ie.column+Ie.colspan-1,He.column+He.colspan-1)};var Ie,He})})}function kf(M,R,W){return Nc(M,R,W).map(function(J){return an(Oo.filterItems(M,Kr(rd,J)),function(se){return se.element})})}function Ja(M,R){return Oo.findItem(M,R,function(W,J){return Ao(J,W)}).map(function(W){return W.element})}function km(M,R,W,J,se){var ce=Yu(M),we=Sr(M,W)?Ue.some(R):Ja(ce,R),Ie=Sr(M,se)?Ue.some(J):Ja(ce,J);return we.bind(function(He){return Ie.bind(function(Ye){return kf(ce,He,Ye)})})}function Sa(M,R){Gr(M).each(function(W){W.dom.insertBefore(R.dom,M.dom)})}function wl(M,R){Ds(M).fold(function(){Gr(M).each(function(W){oo(W,R)})},function(W){Sa(W,R)})}function Qa(M,R){ls(M,0).fold(function(){oo(M,R)},function(W){M.dom.insertBefore(R.dom,W.dom)})}function rf(M,R){Sa(M,R),oo(R,M)}function yb(M,R){ln(R,function(W,J){wl(0===J?M:R[J-1],W)})}function Wu(M,R){ln(R,function(W){oo(M,W)})}function Gu(M){M.dom.textContent="",ln(Bs(M),function(R){vs(R)})}function Sl(M){var R,W=Bs(M);0<W.length&&(R=M,ln(W,function(J){Sa(R,J)})),vs(M)}function Aa(M){return Cl.get(M)}function Fs(M){return Cl.getOption(M)}function Is(M,R){return Cl.set(M,R)}function Vo(M,R){return Lt(nn(M.all,function(W){return W.cells}),R)}var Mp,Uu,Ia=function(M,R){M.dom.removeAttribute(R)},co=function(M,R){return mc(M)?M.style.getPropertyValue(R):""},Bc=Gt(10),Ar=Gt(10),ju=function(M,R,W){return nn(Bs(M),function(J){return un(J,R)?W(J)?[J]:[]:ju(J,R,W)})},il=function(M){return sa(M).fold(Gt([]),function(R){return to(R,"colgroup")})},Yh=function(M,R){return br(M.element,R,M.section,M.isNew)},os="data-snooker-locked-cols",Oo={fromTable:function(M){return Da(Mf(M))},generate:Da,getAt:function(M,R,W){return Ue.from(M.access[R+","+W])},findItem:function(M,R,W){var J=Vo(M,function(se){return W(R,se.element)});return 0<J.length?Ue.some(J[0]):Ue.none()},filterItems:Vo,justCells:function(M){return nn(M.all,function(R){return R.cells})},justColumns:function(M){return rs(M.columns)},hasColumns:function(M){return 0<so(M.columns).length},getColumnAt:function(M,R){return Ue.from(M.columns[R])}},Yu=Oo.fromTable,oo=function(M,R){M.dom.appendChild(R.dom)},vs=function(M){var R=M.dom;null!==R.parentNode&&R.parentNode.removeChild(R)},Cl=(Mp=As,{get:function(M){if(!Mp(M))throw new Error("Can only get text value of a text node");return Uu(M).getOr("")},getOption:Uu=function(M){return Mp(M)?Ue.from(M.dom.nodeValue):Ue.none()},set:function(M,R){if(!Mp(M))throw new Error("Can only set raw text value of a text node");M.dom.nodeValue=R}}),Tm=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Dm(){return{up:Gt({selector:Ga,closest:lu,predicate:It,all:Ha}),down:Gt({selector:wa,predicate:Pl}),styles:Gt({get:Du,getRaw:Au,set:zs,remove:Ll}),attrs:Gt({get:Xs,set:cs,remove:Ia,copyTo:function(M,R){cu(R,nd(M))}}),insert:Gt({before:Sa,after:wl,afterAll:yb,append:oo,appendAll:Wu,prepend:Qa,wrap:rf}),remove:Gt({unwrap:Sl,remove:vs}),create:Gt({nu:Dt.fromTag,clone:function(M){return Dt.fromDom(M.dom.cloneNode(!1))},text:Dt.fromText}),query:Gt({comparePosition:function(M,R){return M.dom.compareDocumentPosition(R.dom)},prevSibling:Wa,nextSibling:Ds}),property:Gt({children:Bs,name:$r,parent:Gr,document:function(M){return qs(M).dom},isText:As,isComment:go,isElement:Tu,isSpecial:function(M){return Ur(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],$r(M))},getLanguage:function(M){return Tu(M)?$o(M,"lang"):Ue.none()},getText:Aa,setText:Is,isBoundary:function(M){return!!Tu(M)&&("body"===$r(M)||Ur(Tm,$r(M)))},isEmptyTag:function(M){return!!Tu(M)&&Ur(["br","img","hr","input"],$r(M))},isNonEditable:function(M){return Tu(M)&&"false"===Xs(M,"contenteditable")}}),eq:Sr,is:ro}}function qu(M,R){return E(U,function(W,J){return M(J)},R)}function zc(M){return Ga(M,"table")}function du(M,R,W){function J(se){return function(ce){return void 0!==W&&W(ce)||Sr(ce,se)}}return Sr(M,R)?Ue.some({boxes:Ue.some([M]),start:M,finish:R}):zc(M).bind(function(se){return zc(R).bind(function(ce){if(Sr(se,ce))return Ue.some({boxes:(Ye=M,at=R,kf(Yu(se),Ye,at)),start:M,finish:R});if(Ao(se,ce)){var we=0<(Ie=xp(R,"td,th",J(se))).length?Ie[Ie.length-1]:R;return Ue.some({boxes:km(se,M,se,R,ce),start:M,finish:we})}if(Ao(ce,se)){var Ie,He=0<(Ie=xp(M,"td,th",J(ce))).length?Ie[Ie.length-1]:M;return Ue.some({boxes:km(ce,M,se,R,ce),start:M,finish:He})}return B(U,M,R,void 0).shared.bind(function(ut){return lu(ut,"table",W).bind(function(st){var Mt=xp(R,"td,th",J(st)),ht=0<Mt.length?Mt[Mt.length-1]:R,zt=xp(M,"td,th",J(st)),Xt=0<zt.length?zt[zt.length-1]:M;return Ue.some({boxes:km(st,M,se,R,ce),start:Xt,finish:ht})})});var Ye,at})})}function od(M,R){var W=wa(M,R);return 0<W.length?Ue.some(W):Ue.none()}function hu(M,R,W){return lo(M,R).bind(function(J){return lo(M,W).bind(function(se){return qu(zc,[J,se]).map(function(ce){return{first:J,last:se,table:ce}})})})}function ga(M,R,W,J){return M.fold(R,W,J)}function Vs(M,R){return Dt.fromDom(M.dom.cloneNode(R))}function pu(M){return Vs(M,!1)}function es(M){return Vs(M,!0)}function kp(M,R){var W=Dt.fromTag(R);return cu(W,nd(M)),W}function pn(M,R){function W(se){var ce=R(se);if(ce<=0||null===ce){var we=Du(se,M);return parseFloat(we)||0}return ce}function J(se,ce){return Jo(ce,function(we,Ie){var He=Du(se,Ie),Ye=void 0===He?0:parseInt(He,10);return isNaN(Ye)?we:we+Ye},0)}return{set:function(se,ce){if(!Mi(ce)&&!ce.match(/^[0-9]+$/))throw new Error(M+".set accepts only positive integer values. Value was "+ce);var we=se.dom;mc(we)&&(we.style[M]=ce+"px")},get:W,getOuter:W,aggregate:J,max:function(se,ce,we){var Ie=J(se,we);return Ie<ce?ce-Ie:0}}}function tc(){var M=gn().browser;return M.isIE()||M.isEdge()}function Yr(M,R,W){return J=Du(M,R),se=W,ce=parseFloat(J),(isNaN(ce)?Ue.none():Ue.some(ce)).getOr(se);var J,se,ce}function fh(M){return Du(M,"box-sizing")}function Xu(M,R,W,J){return R-Yr(M,"padding-"+W,0)-Yr(M,"padding-"+J,0)-Yr(M,"border-"+W+"-width",0)-Yr(M,"border-"+J+"-width",0)}function Tf(M,R){var W=M.dom,J=W.getBoundingClientRect().width||W.offsetWidth;return"border-box"===R?J:Xu(M,J,"left","right")}function Df(M){return Fe.get(M)}function al(M){return Fe.getOuter(M)}function vi(M,R){void 0===R&&(R=qr);var W=M.grid,J=qe(W.columns,cr),se=qe(W.rows,cr);return an(J,function(ce){return rt(function(){return nn(se,function(we){return Oo.getAt(M,we,ce).filter(function(Ie){return Ie.column===ce}).toArray()})},function(we){return 1===we.colspan&&R(we.element)},function(){return Oo.getAt(M,0,ce)})})}function id(M){var R=M.grid,W=qe(R.rows,cr),J=qe(R.columns,cr);return an(W,function(se){return rt(function(){return nn(J,function(ce){return Oo.getAt(M,se,ce).filter(function(we){return we.row===se}).fold(Gt([]),function(we){return[we]})})},function(ce){return 1===ce.rowspan},function(){return Oo.getAt(M,se,0)})})}function $y(M,R){return function(W){return"rtl"===Ct(W)?R:M}}function Qi(M){return Vt.get(M)}function bc(M){return Vt.getOuter(M)}function of(M,R){return void 0!==M?M:void 0!==R?R:0}function Pi(M){var R=M.dom.ownerDocument,W=R.body,J=R.defaultView,se=R.documentElement;if(W===M.dom)return Un(W.offsetLeft,W.offsetTop);var ce=of(null==J?void 0:J.pageYOffset,se.scrollTop),we=of(null==J?void 0:J.pageXOffset,se.scrollLeft),Ie=of(se.clientTop,W.clientTop),He=of(se.clientLeft,W.clientLeft);return $n(M).translate(we-He,ce-Ie)}function St(M,R){return{row:M,y:R}}function Fc(M,R){return{col:M,x:R}}function Ks(M){return Pi(M).left+al(M)}function nc(M){return Pi(M).left}function ys(M,R){return Fc(M,nc(R))}function ds(M,R){return Fc(M,Ks(R))}function Zi(M){return Pi(M).top}function sl(M,R){return St(M,Zi(R))}function Tp(M,R){return St(M,Zi(R)+bc(R))}function Nr(M,R,W){if(0===W.length)return[];var J=an(W.slice(1),function(ce,we){return ce.map(function(Ie){return M(we,Ie)})}),se=W[W.length-1].map(function(ce){return R(W.length-1,ce)});return J.concat([se])}function bs(M){if(!Pr(M))throw new Error("cases must be an array");if(0===M.length)throw new Error("there must be at least one case");var R=[],W={};return ln(M,function(J,se){var ce=so(J);if(1!==ce.length)throw new Error("one and only one name per case");var we=ce[0],Ie=J[we];if(void 0!==W[we])throw new Error("duplicate key detected:"+we);if("cata"===we)throw new Error("cannot have a case named cata (sorry)");if(!Pr(Ie))throw new Error("case arguments must be an array");R.push(we),W[we]=function(){for(var He=[],Ye=0;Ye<arguments.length;Ye++)He[Ye]=arguments[Ye];var at=He.length;if(at!==Ie.length)throw new Error("Wrong number of arguments to case "+we+". Expected "+Ie.length+" ("+Ie+"), got "+at);return{fold:function(){for(var ut=[],st=0;st<arguments.length;st++)ut[st]=arguments[st];if(ut.length!==M.length)throw new Error("Wrong number of arguments to fold. Expected "+M.length+", got "+ut.length);return ut[se].apply(null,He)},match:function(ut){var st=so(ut);if(R.length!==st.length)throw new Error("Wrong number of arguments to match. Expected: "+R.join(",")+"\nActual: "+st.join(","));if(!Ce(R,function(Mt){return Ur(st,Mt)}))throw new Error("Not all branches were specified when using match. Specified: "+st.join(", ")+"\nRequired: "+R.join(", "));return ut[we].apply(null,He)},log:function(ut){console.log(ut,{constructors:R,constructor:we,params:He})}}}}),W}var Dp,ad,y,E=function(M,R,W){return 0<W.length?(J=M,se=R,ce=W[0],Yn(W.slice(1),function(we,Ie){var He=se(J,Ie);return function(M,R,W){return R.bind(function(J){return W.filter(Kr(M.eq,J))})}(J,we,He)},se(J,ce))):Ue.none();var J,se,ce},B=function(M,R,W,J){function se(at){return Cu(at,J).fold(function(){return at},function(ut){return at.slice(0,ut+1)})}void 0===J&&(J=Yo);var ce=[R].concat(M.up().all(R)),we=[W].concat(M.up().all(W)),Ie=se(ce),He=se(we),Ye=Ir(Ie,function(at){return ho(He,Kr(M.eq,at))});return{firstpath:Ie,secondpath:He,shared:Ye}},U=Dm(),ne=od,ee=bs([{none:[]},{multiple:["elements"]},{single:["element"]}]),ae=ee.none,fe=ee.multiple,Me=ee.single,ke=tinymce.util.Tools.resolve("tinymce.PluginManager"),Fe=pn("width",function(M){return M.dom.offsetWidth}),Ze=function(M){return Tf(M,"content-box")},ot=function(M){return tc()?Tf(M,fh(M)):Yr(M,"width",M.dom.offsetWidth)},rt=function(M,R,W){var J=M();return Ir(J,R).orThunk(function(){return Ue.from(J[0]).orThunk(W)}).map(function(se){return se.element})},Ct=function(M){return"rtl"===Du(M,"direction")?"rtl":"ltr"},Vt=pn("height",function(M){var R=M.dom;return Fr(M)?R.getBoundingClientRect().height:R.offsetHeight}),An=function(M,R){return{left:M,top:R,translate:function(W,J){return An(M+W,R+J)}}},Un=An,$n=function(M){var R,W=M.dom,J=W.ownerDocument.body;return J===W?Un(J.offsetLeft,J.offsetTop):Fr(M)?(R=W.getBoundingClientRect(),Un(R.left,R.top)):Un(0,0)},fr={delta:cr,positions:function(M){return Nr(sl,Tp,M)},edge:Zi},Hr=$y({delta:cr,edge:nc,positions:function(M){return Nr(ys,ds,M)}},{delta:function(M){return-M},edge:Ks,positions:function(M){return Nr(ds,ys,M)}}),Co={delta:function(M,R){return Hr(R).delta(M,R)},positions:function(M,R){return Hr(R).positions(M,R)},edge:function(M){return Hr(M).edge(M)}},Mo={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},Zr=(y=["Infinity",(Dp="[0-9]+")+"\\."+Qo(Dp)+Qo(ad="[eE][+-]?[0-9]+"),"\\."+Dp+Qo(ad),Dp+Qo(ad)].join("|"),new RegExp("^([+-]?(?:"+y+"))(.*)$"));function Qo(M){return"(?:"+M+")?"}function Ki(M,R,W){var J=Ue.from(M.dom.parentElement).map(Dt.fromDom).getOrThunk(function(){return Rc(Ns(M))});return R(M)/W(J)*100}function Ii(M,R){zs(M,"width",R+"px")}function To(M,R){zs(M,"width",R+"%")}function Rr(M,R){zs(M,"height",R+"px")}function ma(M,R){return Au(M,R).orThunk(function(){return $o(M,R).map(function(W){return W+"px"})})}function Fi(M){return ma(M,"width")}function xa(M){return Ki(M,Df,Ze)}function ua(M){return(tx(M)?Df:ot)(M)}function Fl(M){return function vr(M){var R,W,J,se,ce,we,Ie,He,Ye,at,ut=function(M){return tc()?(W=fh(R=M),se=(J=R.dom).getBoundingClientRect().height||J.offsetHeight,"border-box"===W?se:Xu(R,se,"top","bottom")):Yr(M,"height",M.dom.offsetHeight);var R,W,J,se}(M)+"px";return ut?(R=ut,W=M,J=Qi,se=Rr,at=parseFloat(R),Ht(R,"%")&&"table"!==$r(W)?(we=at,Ie=J,He=se,Ye=sa(ce=W).map(function(st){var Mt=Ie(st);return Math.floor(we/100*Mt)}).getOr(we),He(ce,Ye),Ye):at):Qi(M)}(R=M)/Sp(R,"rowspan");var R}function on(M,R,W){zs(M,"width",R+W)}function Vl(M){return Ki(M,Df,Ze)+"%"}function va(M){return Fi(M).getOrThunk(function(){return ua(M)+"px"})}function dh(M){return ma(M,"height").getOrThunk(function(){return Fl(M)+"px"})}function Ap(M,R,W,J,se,ce){return M.filter(J).fold(function(){return ce(function(we,Ie){if(Ie<0||Ie>=we.length-1)return Ue.none();var He=we[Ie].fold(function(){var at,ut;return De((at=we.slice(0,Ie),(ut=yr.call(at,0)).reverse(),ut),function(st,Mt){return st.map(function(ht){return{value:ht,delta:Mt+1}})})},function(at){return Ue.some({value:at,delta:0})}),Ye=we[Ie+1].fold(function(){return De(we.slice(Ie+1),function(at,ut){return at.map(function(st){return{value:st,delta:ut+1}})})},function(at){return Ue.some({value:at,delta:1})});return He.bind(function(at){return Ye.map(function(ut){var st=ut.delta+at.delta;return Math.abs(ut.value-at.value)/st})})}(W,R))},function(we){return se(we)})}function hh(M,R,W,J){var se=vi(M),ce=Oo.hasColumns(M)?an(Oo.justColumns(M),function(He){return Ue.from(He.element)}):se,we=[Ue.some(Co.edge(R))].concat(an(Co.positions(se,R),function(He){return He.map(function(Ye){return Ye.x})})),Ie=wo(Cp);return an(ce,function(He,Ye){return Ap(He,Ye,we,Ie,function(at){return st=at,ht=(Mt=gn().browser).isChrome()||Mt.isFirefox(),!zm(st)||ht?W(at):Ap(null!=(ut=se[Ye])?ut:Ue.none(),Ye,we,Ie,function(zt){return J(Ue.some(Df(zt)))},J);var ut,st,Mt,ht},J)})}function qv(M){return M.map(function(R){return R+"px"}).getOr("")}function Ip(M,R,W){return hh(M,R,ua,function(J){return J.getOrThunk(W.minCellWidth)})}function Jy(M,R,W,J,se){var ce=id(M),we=[Ue.some(W.edge(R))].concat(an(W.positions(ce,R),function(Ie){return Ie.map(function(He){return He.y})}));return an(ce,function(Ie,He){return Ap(Ie,He,we,wo(Ad),J,se)})}function sd(M,R){return function(){return Fr(M)?R(M):parseFloat(Au(M,"width").getOr("0"))}}function Br(M){var R=sd(M,function(J){return parseFloat(Vl(J))}),W=sd(M,Df);return{width:R,pixelWidth:W,getWidths:function(J,se){return ce=se,hh(J,M,xa,function(we){return we.fold(function(){return ce.minCellWidth()},function(Ie){return Ie/ce.pixelWidth()*100})});var ce},getCellDelta:function(J){return J/W()*100},singleColumnWidth:function(J,se){return[100-J]},minCellWidth:function(){return Bc()/W()*100},setElementWidth:To,adjustTableWidth:function(J){var se=R();To(M,se+J/100*se)},isRelative:!0,label:"percent"}}function Am(M){var R=sd(M,Df);return{width:R,pixelWidth:R,getWidths:function(W,J){return Ip(W,M,J)},getCellDelta:cr,singleColumnWidth:function(W,J){return[Math.max(Bc(),W+J)-W]},minCellWidth:Bc,setElementWidth:Ii,adjustTableWidth:function(W){var J=R()+W;Ii(M,J)},isRelative:!1,label:"pixel"}}function Ed(M){return"img"===$r(M)?1:Fs(M).fold(function(){return Bs(M).length},function(R){return R.length})}function xo(M){return Fs(M).filter(function(R){return 0!==R.trim().length||-1<R.indexOf("\xa0")}).isSome()||Ur(nx,$r(M))}function Op(M){return R=xo,(W=function(J){for(var se=0;se<J.childNodes.length;se++){var ce=Dt.fromDom(J.childNodes[se]);if(R(ce))return Ue.some(ce);var we=W(J.childNodes[se]);if(we.isSome())return we}return Ue.none()})(M.dom);var R,W}function Ep(M){return Fm(M,xo)}function Pd(M){return function(){var R=Dt.fromTag("td",M.dom);return oo(R,Dt.fromTag("br",M.dom)),R}}function wg(M){return function(){return Dt.fromTag("col",M.dom)}}function I_(M){return function(){return Dt.fromTag("colgroup",M.dom)}}function bb(M){return function(){return Dt.fromTag("tr",M.dom)}}function Qy(M,R,W){var J,se,ce=(Wu(se=kp(J=M,R),Bs(es(J))),se);return ki(W,function(we,Ie){null===we?Ia(ce,Ie):cs(ce,Ie,we)}),ce}function fa(M){return M}function qn(M,R,W){function J(se,ce){var we=se.element.dom,Ie=ce.dom;mc(we)&&mc(Ie)&&(Ie.style.cssText=we.style.cssText),Ll(ce,"height"),1!==se.colspan&&Ll(ce,"width")}return{col:function(se){var ce=Dt.fromTag($r(se.element),R.dom);return J(se,ce),M(se.element,ce),ce},colgroup:I_(R),row:bb(R),cell:function(se){var ce,we,Ie,He,Ye,at=Dt.fromTag($r(se.element),R.dom),ut=W.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),st=0<ut.length?(we=at,Ie=ut,Op(ce=se.element).map(function(Mt){return Yn(xp(Mt,Ie.join(","),function(ht){return Sr(ht,ce)}),function(ht,zt){var Xt=pu(zt);return Ia(Xt,"contenteditable"),oo(ht,Xt),Xt},we)}).getOr(we)):at;return oo(st,Dt.fromTag("br")),J(se,at),He=se.element,Ye=at,ki(kl,function(Mt,ht){return $o(He,ht).filter(function(zt){return Ur(Mt,zt)}).each(function(zt){return cs(Ye,ht,zt)})}),M(se.element,at),at},replace:Qy,colGap:wg(R),gap:Pd(R)}}function yi(M){return{col:wg(M),colgroup:I_(M),row:bb(M),cell:Pd(M),replace:fa,colGap:wg(M),gap:Pd(M)}}function Ua(M){return an(M,Dt.fromDom)}function Zu(M){return Dt.fromDom(M.getBody())}function ud(M){return M.getBoundingClientRect().width}function Vc(M){return M.getBoundingClientRect().height}function rc(M){return function(R){return Sr(R,Zu(M))}}function Pp(M){return/^\d+(\.\d+)?$/.test(M)?M+"px":M}function ld(M){function R(W){return Ia(W,"data-mce-style")}Ia(M,"data-mce-style"),ln(vc(M),R),ln(Ai(M),R),ln(ch(M),R)}function gu(M){return Dt.fromDom(M.selection.getStart())}function Rp(M){return ga(M.get(),Gt([]),cr,Pn)}function ph(M,R,W){return{element:W,mergable:(ce=R,we=sc,ga(M.get(),Ue.none,function(Ie){return Ie.length<=1?Ue.none():function qh(M,R,W){return hu(M,R,W).bind(function(J){function se(He){return Sr(M,He)}var ce="thead,tfoot,tbody,table",we=Ga(J.first,ce,se),Ie=Ga(J.last,ce,se);return we.bind(function(He){return Ie.bind(function(Ye){return Sr(He,Ye)?(st=J.first,Mt=J.last,ht=Yu(J.table),Nc(at=ht,st,Mt).bind(function(zt){return function(Xt,ft){for(var Pt=!0,xn=Kr(zl,ft),wt=ft.startRow;wt<=ft.finishRow;wt++)for(var Sn=ft.startCol;Sn<=ft.finishCol;Sn++)Pt=Pt&&Oo.getAt(Xt,wt,Sn).exists(xn);return Pt?Ue.some(ft):Ue.none()}(at,zt)})):Ue.none();var at,st,Mt,ht})})})}(ce,we.firstSelectedSelector,we.lastSelectedSelector).map(function(He){return{bounds:He,cells:Ie}})},Ue.none)),unmergable:0<(se=Rp(M)).length&&Ce(se,function(Ie){return J(Ie,"rowspan")||J(Ie,"colspan")})?Ue.some(se):Ue.none(),selection:Rp(M)};function J(Ie,He){return $o(Ie,He).exists(function(Ye){return 1<parseInt(Ye,10)})}var se,ce,we}function Af(M){return function(R,W){var J,se=$r(R);return lu("col"===se||"colgroup"===se?sa(J=R).bind(function(ce){return ne(ce,sc.firstSelectedSelector)}).fold(Gt(J),function(ce){return ce[0]}):R,M,W)}}function xb(M,R,W){for(var J=0,se=M;se<R;se++)J+=void 0!==W[se]?W[se]:0;return J}function xs(M,R,W){var J,se,ce,we;ln((se=R,Oo.hasColumns(J=M)?(we=se,an(Oo.justColumns(J),function(Ie,He){return{element:Ie.element,width:we[He],colspan:Ie.colspan}})):(ce=se,an(Oo.justCells(J),function(Ie){var He=xb(Ie.column,Ie.column+Ie.colspan,ce);return{element:Ie.element,width:He,colspan:Ie.colspan}}))),function(Ie){W.setElementWidth(Ie.element,Ie.width)})}function ul(M,R,W,J,se){var ce,we,Ie,He,Ye,at,ut,st,Mt,ht,zt=Oo.fromTable(M),Xt=se.getCellDelta(R),ft=se.getWidths(zt,se),Pt=W===zt.grid.columns-1,xn=J.clampTableDelta(ft,W,Xt,se.minCellWidth(),Pt),wt=(we=W,Ie=xn,He=se,Ye=J,st=(ce=ft).slice(0),ut=we,Mt=0===(at=ce).length?Hm.none():1===at.length?Hm.only(0):0===ut?Hm.left(0,1):ut===at.length-1?Hm.right(ut-1,ut):0<ut&&ut<at.length-1?Hm.middle(ut-1,ut,ut+1):Hm.none(),ht=Gt(an(st,Gt(0))),Mt.fold(ht,function(Sn){return He.singleColumnWidth(st[Sn],Ie)},function(Sn,$t){return Ye.calcLeftEdgeDeltas(st,Sn,$t,Ie,He.minCellWidth(),He.isRelative)},function(Sn,$t,Er){return Ye.calcMiddleDeltas(st,Sn,$t,Er,Ie,He.minCellWidth(),He.isRelative)},function(Sn,$t){return Ye.calcRightEdgeDeltas(st,Sn,$t,Ie,He.minCellWidth(),He.isRelative)}));xs(zt,an(wt,function(Sn,$t){return Sn+ft[$t]}),se),J.resizeTable(se.adjustTableWidth,xn,Pt)}function Hc(M){return an(M,Gt(0))}function Oa(M,R,W,J,se){return se(M.slice(0,R)).concat(J).concat(se(M.slice(W)))}function Ca(M){return function(R,W,J,se){if(M(J)){var ce=Math.max(se,R[W]-Math.abs(J)),we=Math.abs(ce-R[W]);return 0<=J?we:-we}return J}}function Wc(){function M(W,J,se,ce){var we=(100+se)/100,Ie=Math.max(ce,(W[J]+se)/we);return an(W,function(He,Ye){return(Ye===J?Ie:He/we)-He})}function R(W,J,se,ce,we,Ie){return Ie?M(W,J,ce,we):(at=se,ut=Wm(He=W,Ye=J,ce,we),Oa(He,Ye,at+1,[ut,0],Hc));var He,Ye,at,ut}return{resizeTable:function(W,J){return W(J)},clampTableDelta:Wm,calcLeftEdgeDeltas:R,calcMiddleDeltas:function(W,J,se,ce,we,Ie,He){return R(W,se,ce,we,Ie,He)},calcRightEdgeDeltas:function(W,J,se,ce,we,Ie){if(Ie)return M(W,se,ce,we);var He=Wm(W,se,ce,we);return Hc(W.slice(0,se)).concat([He])},calcRedestributedWidths:function(W,J,se,ce){if(ce){var we=(J+se)/J,Ie=an(W,function(He){return He/we});return{delta:100*we-100,newSizes:Ie}}return{delta:se,newSizes:W}}}}function Im(){function M(R,W,J,se,ce){var we=rx(R,0<=se?J:W,se,ce);return Oa(R,W,J+1,[we,-we],Hc)}return{resizeTable:function(R,W,J){J&&R(W)},clampTableDelta:function(R,W,J,se,ce){if(ce){if(0<=J)return J;var we=Jo(R,function(Ie,He){return Ie+He-se},0);return Math.max(-we,J)}return Wm(R,W,J,se)},calcLeftEdgeDeltas:M,calcMiddleDeltas:function(R,W,J,se,ce,we){return M(R,J,se,ce,we)},calcRightEdgeDeltas:function(R,W,J,se,ce,we){return we?Hc(R):an(R,Gt(se/R.length))},calcRedestributedWidths:function(R,W,J,se){return{delta:0,newSizes:R}}}}function Sg(M,R,W){var J=W.substring(0,W.length-M.length),se=parseFloat(J);return J===se.toString()?R(se):jp.invalid(W)}function _b(M,R,W){var J,se,ce,we,Ie=Ih.from(W),He=Ce(M,function(Ye){return"0px"===Ye})?(J=M.length,se=Ie.fold(function(){return Gt("")},function(Ye){return Gt(Ye/J+"px")},function(){return Gt(100/J+"%")}),qe(J,se)):(ce=M,we=R,Ie.fold(function(){return ce},function(Ye){return ut=(at=Ye)/we,an(ce,function(st){return Ih.from(st).fold(function(){return st},function(Mt){return Mt*ut+"px"},function(Mt){return Mt/100*at+"px"})});var at,ut},function(Ye){return at=we,an(ce,function(ut){return Ih.from(ut).fold(function(){return ut},function(st){return st/at*100+"%"},function(st){return st+"%"})});var at}));return ay(He)}function Ri(M,R){return 0===M.length?R:Yn(M,function(W,J){return Ih.from(J).fold(Gt(0),cr,cr)+W},0)}function Rd(M){return sy(M).fold(Gt("px"),Gt("px"),Gt("%"))}function Lp(M,R,W){var J=Oo.fromTable(M),se=J.all,ce=Oo.justCells(J),we=Oo.justColumns(J);R.each(function(Ie){var He,Ye,at,ut,st=Rd(Ie),Mt=Df(M),ht=_b(hh(J,M,va,qv),Mt,Ie);Oo.hasColumns(J)?(at=ht,ut=st,ln(we,function(zt,Xt){var ft=Ri([at[Xt]],Bc());zs(zt.element,"width",ft+ut)})):(He=ht,Ye=st,ln(ce,function(zt){var Xt=Ri(He.slice(zt.column,zt.colspan+zt.column),Bc());zs(zt.element,"width",Xt+Ye)})),zs(M,"width",Ie)}),W.each(function(Ie){var He=Rd(Ie),Ye=Qi(M),at=_b(Jy(J,M,fr,dh,qv),Ye,Ie),ut=se,st=He;ln(ce,function(Mt){var ht=Ri(at.slice(Mt.row,Mt.rowspan+Mt.row),Ar());zs(Mt.element,"height",ht+st)}),ln(ut,function(Mt,ht){zs(Mt.element,"height",at[ht])}),zs(M,"height",Ie)})}function gh(M){return Oo.fromTable(M).grid}function ci(M){var R=[];return{bind:function(W){if(void 0===W)throw new Error("Event bind error: undefined handler");R.push(W)},unbind:function(W){R=Lt(R,function(J){return J!==W})},trigger:function(){for(var W=[],J=0;J<arguments.length;J++)W[J]=arguments[J];var se={};ln(M,function(ce,we){se[ce]=W[we]}),ln(R,function(ce){ce(se)})}}}function hs(M){return{registry:ns(M,function(R){return{bind:R.bind,unbind:R.unbind}}),trigger:ns(M,function(R){return R.trigger})}}function Ld(M){return M.slice(0).sort()}function oc(M,R){var W=Lt(R,function(J){return!Ur(M,J)});0<W.length&&function(){throw new Error("Unsupported keys for object: "+Ld(W).join(", "))}()}function Np(M){return function(R,W,J){if(0===W.length)throw new Error("You must specify at least one required field.");var se;return function(ce,we){if(!Pr(we))throw new Error("The "+ce+" fields must be an array. Was: "+we+".");ln(we,function(Ie){if(!_n(Ie))throw new Error("The value "+Ie+" in the "+ce+" fields was not a string.")})}("required",W),Ir(se=Ld(W),function(ce,we){return we<se.length-1&&ce===se[we+1]}).each(function(ce){throw new Error("The field: "+ce+" occurs more than once in the combined fields: ["+se.join(", ")+"].")}),function(ce){var we=so(ce);Ce(W,function(He){return Ur(we,He)})||function(He,Ye){throw new Error("All required keys ("+Ld(He).join(", ")+") were not specified. Specified keys were: "+Ld(Ye).join(", ")+".")}(W,we),R(W,we);var Ie=Lt(W,function(He){return!J.validate(ce[He],He)});return 0<Ie.length&&function(He,Ye){throw new Error("All values need to be of type: "+Ye+". Keys ("+Ld(He).join(", ")+") were not.")}(Ie,J.label),ce}}(oc,M,{validate:Ci,label:"function"})}function Xv(M){function R(){return M.stopPropagation()}function W(){return M.preventDefault()}var J,se,ce=Dt.fromDom(function(Ie){if(_p()&&us(Ie.target)){var He=Dt.fromDom(Ie.target);if(Tu(He)&&function(M){return us(M.dom.shadowRoot)}(He)&&Ie.composed&&Ie.composedPath){var Ye=Ie.composedPath();if(Ye)return Yi(Ye)}}return Ue.from(Ie.target)}(M).getOr(M.target)),we=(J=W,se=R,function(){for(var Ie=[],He=0;He<arguments.length;He++)Ie[He]=arguments[He];return J(se.apply(null,Ie))});return{target:ce,x:M.clientX,y:M.clientY,stop:R,prevent:W,kill:we,raw:M}}function Hs(M,R,W){return we=V_,Ie=W,(J=M).dom.addEventListener(se=R,He=function(Ye){we(Ye)&&Ie(Xv(Ye))},!1),{unbind:Kr(Rb,J,se,He,!1)};var J,se,we,Ie,He}function is(M){return void 0!==M.dom.classList}function mh(M,R){is(M)?M.dom.classList.add(R):function ic(M,R){return se=R,cs(M,"class",(void 0===(J=Xs(M,"class"))||""===J?[]:J.split(" ")).concat([se]).join(" ")),1;var J,se}(M,R)}function vh(M,R){return is(M)&&M.dom.classList.contains(R)}function hi(M){var R=M.replace(/\./g,"-");return{resolve:function(W){return R+"-"+W}}}function af(M){return lu(M,"[contenteditable]")}function cd(M,R){return void 0===R&&(R=!1),!gn().browser.isIE()&&Fr(M)?M.dom.isContentEditable:af(M).fold(Gt(R),function(W){return"true"===Lb(W)})}function yh(M){ln(wa(M.parent(),"."+Gl),vs)}function ll(M,R,W){var J=M.origin();ln(R,function(se){se.each(function(ce){var we=W(J,ce);mh(we,Gl),oo(M.parent(),we)})})}function Bp(M,R){var W;yh(M),M.isResizable(R)&&function Kh(M,R,W,J,se){var ce,we,Ie,He,Ye,at=Pi(W),ut=R.isResizable,st=0<J.length?fr.positions(J,W):[],Mt=0<st.length?(ce=ut,nn(M.all,function(Lr,Qr){return ce(Lr.element)?[Qr]:[]})):[];we=R,Ie=Lt(st,function(Lr,Qr){return ho(Mt,function(io){return Qr===io})}),He=at,Ye=al(W),ll(we,Ie,function(Lr,Qr){var io,Po,ri,Do,si,Hi=(io=Qr.row,Po=He.left-Lr.left,ri=Qr.y-Lr.top,Do=Ye,Rl(si=Dt.fromTag("div"),{position:"absolute",left:Po+"px",top:ri-3.5+"px",height:"7px",width:Do+"px"}),cu(si,{"data-row":io,role:"presentation"}),si);return mh(Hi,d0),Hi});var zt,Xt,ft,Pt,xn,wt,Sn,$t=0<se.length?Co.positions(se,W):[],Er=0<$t.length?(Xt=ut,ft=[],qe((zt=M).grid.columns,function(Lr){Oo.getColumnAt(zt,Lr).map(function(Qr){return Qr.element}).forall(Xt)&&ft.push(Lr)}),Lt(ft,function(Lr){return Ce(Oo.filterItems(zt,function(Qr){return Qr.column===Lr}),function(Qr){return Xt(Qr.element)})})):[];Pt=R,xn=Lt($t,function(Lr,Qr){return ho(Er,function(io){return Qr===io})}),wt=at,Sn=bc(W),ll(Pt,xn,function(Lr,Qr){var io,Po,ri,Do,si,Hi=(io=Qr.col,Po=Qr.x-Lr.left,ri=wt.top-Lr.top,Do=Sn,Rl(si=Dt.fromTag("div"),{position:"absolute",left:Po-3.5+"px",top:ri+"px",height:Do+"px",width:"7px"}),cu(si,{"data-column":io,role:"presentation"}),si);return mh(Hi,Um),Hi})}(W=Oo.fromTable(R),M,R,id(W),vi(W))}function e0(M,R){ln(wa(M.parent(),"."+Gl),R)}function zp(M){e0(M,function(R){zs(R,"display","none")})}function O_(M){e0(M,function(R){zs(R,"display","block")})}function _s(M,R){return M.fire("newrow",{node:R})}function Ku(M,R){return M.fire("newcell",{node:R})}function Gc(M,R,W){M.fire("TableModified",gr(gr({},W),{table:R}))}function Fp(M){return M.getParam("table_sizing_mode","auto")}function t0(M){return M.getParam("table_responsive_width")}function E_(M){return M.getParam("table_border_widths",qp,"array")}function wb(M){return M.getParam("table_border_styles",ly,"array")}function Zv(M){return M.getParam("table_default_attributes",OS,"object")}function Vp(M){return M.getParam("table_default_styles",function(R){var W;if(jm(R)){var J=R.dom,se=null!==(W=J.getParent(R.selection.getStart(),J.isBlock))&&void 0!==W?W:R.getBody(),ce=Ze(Dt.fromDom(se));return gr(gr({},Yp),{width:ce+"px"})}return Xp(R)?ni(Yp,function(we,Ie){return"width"!==Ie}):Yp}(M),"object")}function q1(M){return M.getParam("table_cell_advtab",!0,"boolean")}function Om(M){return M.getParam("table_row_advtab",!0,"boolean")}function $h(M){return M.getParam("table_advtab",!0,"boolean")}function ia(M){return M.getParam("table_style_by_css",!1,"boolean")}function ja(M){return M.getParam("table_cell_class_list",[],"array")}function Nd(M){return M.getParam("table_class_list",[],"array")}function Cg(M){return"relative"===Fp(M)||!0===t0(M)}function bh(M){var R="section",W=M.getParam("table_header_type",R,"string");return Ur(["section","cells","sectionCells","auto"],W)?W:R}function Jh(M){var R=M.getParam("table_column_resizing",uc,"string");return Ir(["preservetable","resizetable"],function(W){return W===R}).getOr(uc)}function ya(M){return"preservetable"===Jh(M)}function Sb(M){return"resizetable"===Jh(M)}function xh(M){var R=M.getParam("table_clone_elements");return _n(R)?Ue.some(R.split(/[ ,]/)):Array.isArray(R)?Ue.some(R):Ue.none()}function P_(M){return M.getParam("table_background_color_map",[],"array")}function Mg(M){return M.getParam("table_border_color_map",[],"array")}function Cb(M,R){return(Cg(M)?F_:jm(M)?vu:gd)(R)}function kg(M){Ia(M,"width")}function Hp(M){return"false"!==Xs(M,"data-mce-resize")}function Em(M,R){return{element:M,offset:R}}function Tg(M,R){return(M.property().isText(R)?M.property().getText(R):M.property().children(R)).length}function _h(M,R){1===Sp(M,"colspan")&&Fi(M).bind(function(W){return J=["fixed","relative","empty"],Ue.from(Zr.exec(W)).bind(function(se){var ce=Number(se[1]),we=se[2],Ie=we;return ho(J,function(He){return ho(Mo[He],function(Ye){return Ie===Ye})})?Ue.some({value:ce,unit:we}):Ue.none()});var J}).each(function(W){var J=W.value/2;on(M,J,W.unit),on(R,J,W.unit)})}function ac(M){return Ce(M,function(R){return rp(R.element)})}function Uc(M){var R="thead"===M.section,W=Ql(Vg(M.cells),"th");return R||W?{type:"header",subType:R&&W?"sectionCells":R?"section":"cells"}:"tfoot"===M.section?{type:"footer"}:{type:"body"}}function X1(M,R,W){return su(W(M.element,R),!0,M.isLocked)}function Ml(M,R){return M.section!==R?br(M.element,M.cells,R,M.isNew):M}function sf(){return{transformRow:Ml,transformCell:function(M,R,W){var J,se,ce=W(M.element,R);return su("td"!==$r(ce)?(se=kp(J=ce,"td"),Sa(J,se),Wu(se,Bs(J)),vs(J),se):ce,M.isNew,M.isLocked)}}}function Kv(){return{transformRow:Ml,transformCell:X1}}function $u(){return{transformRow:function(M,R){return Ml(M,"thead"===R?"tbody":R)},transformCell:X1}}function Ma(M,R,W,J){W===J?Ia(M,R):cs(M,R,W)}function jc(M,R,W){rr(to(M,R)).fold(function(){return Qa(M,W)},function(J){return wl(J,W)})}function Dg(M,R){if(0===M.length)return 0;var W=M[0];return Cu(M,function(J){return!R(W.element,J.element)}).getOr(M.length)}function Bd(M,R,W){var J=[];ln(M.colgroups,function(at){for(var ut=[],st=0;st<M.grid.columns;st++){var Mt=Oo.getColumnAt(M,st).map(function(ht){return su(ht.element,W,!1)}).getOrThunk(function(){return su(R.colGap(),!0,!1)});ut.push(Mt)}J.push(br(at.element,ut,"colgroup",W))});for(var se=0;se<M.grid.rows;se++){for(var ce=[],we=0;we<M.grid.columns;we++){var Ie=Oo.getAt(M,se,we).map(function(at){return su(at.element,W,at.isLocked)}).getOrThunk(function(){return su(R.gap(),!0,!1)});ce.push(Ie)}var He=M.all[se],Ye=br(He.element,ce,He.section,W);J.push(Ye)}return J}function Wp(M){return function Mb(M,R){var W=an(M,function(J){return an(J.cells,Yo)});return an(M,function(J,se){var ce=nn(J.cells,function(we,Ie){if(!1!==W[se][Ie])return[];var He,Ye,at,ut,st,Mt,ht,zt,Xt=(ut=R,zt="colgroup"===(ht=(He=M)[Ye=se]).section,{colspan:Dg(ht.cells.slice(at=Ie),ut),rowspan:zt?1:Dg((st=He.slice(Ye),Mt=at,an(st,function(ft){return yc(ft,Mt)})),ut)});return function(ft,Pt,xn,wt){for(var Sn=ft;Sn<ft+xn;Sn++)for(var $t=Pt;$t<Pt+wt;$t++)W[Sn][$t]=!0}(se,Ie,Xt.rowspan,Xt.colspan),[{element:we.element,rowspan:Xt.rowspan,colspan:Xt.colspan,isNew:we.isNew}]});return{element:J.element,cells:ce,section:J.section,isNew:J.isNew}})}(M,Sr)}function Ya(M,R){return De(M.all,function(W){return Ir(W.cells,function(J){return Sr(R,J.element)})})}function fd(M,R,W){var J=Io(an(R.selection,function(se){return jh(se).bind(function(ce){return Ya(M,ce)}).filter(W)}));return rl(0<J.length,J)}function cl(M,R,W,J,se){return function(ce,we,Ie,He,Ye){var at=Oo.fromTable(we),ut=Ue.from(null==Ye?void 0:Ye.section).getOrThunk(f0);return R(at,Ie).map(function(st){var Mt=Bd(at,He,!1),ht=M(Mt,st,Sr,se(He),ut),zt=Zs(ht.grid);return{info:st,grid:Wp(ht.grid),cursor:ht.cursor,lockedColumns:zt}}).bind(function(st){var Mt=function n0(M,R){function J(at,ut){0<at.length?function W(at,ut){var st,Mt,ht;Wu((Gu(ht=wp(st=M,Mt=ut).getOrThunk(function(){var zt=Dt.fromTag(Mt,Ns(st).dom);return"thead"===Mt?jc(st,"caption,colgroup",zt):"colgroup"===Mt?jc(st,"caption",zt):oo(st,zt),zt})),ht),("colgroup"===ut?function(zt){return nn(zt,function(Xt){return an(Xt.cells,function(ft){return Ma(ft.element,"span",ft.colspan,1),ft.element})})}:function(zt){return an(zt,function(Xt){Xt.isNew&&se.push(Xt.element);var ft=Xt.element;return Gu(ft),ln(Xt.cells,function(Pt){Pt.isNew&&ce.push(Pt.element),Ma(Pt.element,"colspan",Pt.colspan,1),Ma(Pt.element,"rowspan",Pt.rowspan,1),oo(ft,Pt.element)}),ft})})(at))}(at,ut):wp(M,ut).each(vs)}var se=[],ce=[],we=[],Ie=[],He=[],Ye=[];return ln(R,function(at){switch(at.section){case"thead":we.push(at);break;case"tbody":Ie.push(at);break;case"tfoot":He.push(at);break;case"colgroup":Ye.push(at)}}),J(Ye,"colgroup"),J(we,"thead"),J(Ie,"tbody"),J(He,"tfoot"),{newRows:se,newCells:ce}}(we,st.grid),ht=Ue.from(null==Ye?void 0:Ye.sizing).getOrThunk(function(){return gd(we)}),zt=Ue.from(null==Ye?void 0:Ye.resize).getOrThunk(Im);return W(we,st.grid,st.info,{sizing:ht,resize:zt,section:ut}),J(we),Bp(ce,we),Ia(we,os),0<st.lockedColumns.length&&cs(we,os,st.lockedColumns.join(",")),Ue.some({cursor:st.cursor,newRows:Mt.newRows,newCells:Mt.newCells})})}}function Ag(M,R){return fd(M,R,qr).map(function(W){return{cells:W,generators:R.generators,clipboard:R.clipboard}})}function Of(M,R){return fd(M,R,qr)}function Yc(M,R){return fd(M,R,function(W){return!W.isLocked})}function Z1(M,R){return Ce(R,function(W){return Ya(M,W).exists(function(J){return!J.isLocked})})}function qa(M,R){return R.mergable.filter(function(W){return Z1(M,W.cells)})}function wh(M,R){return R.unmergable.filter(function(W){return Z1(M,W)})}function Ig(M,R,W,J){for(var se=zi(M).rows,ce=!0,we=0;we<se.length;we++)for(var Ie=0;Ie<fs(se[0]);Ie++){var He=se[we],Ye=yc(He,Ie),at=W(Ye.element,R);!0===at&&!1===ce?fu(He,Ie,su(J(),!0,Ye.isLocked)):!0===at&&(ce=!1)}return M}function Qh(M,R){return{rowDelta:0,colDelta:fs(M[0])-fs(R[0])}}function dd(M,R){return{rowDelta:M.length-R.length,colDelta:0}}function Hl(M,R,W,J){var se="colgroup"===R.section?W.col:W.cell;return qe(M,function(ce){return su(se(),!0,J(ce))})}function ko(M,R,W,J){var se=M[M.length-1];return M.concat(qe(R,function(){var we=Bl(se,"colgroup"===se.section?W.colgroup:W.row,cr),Ie=Hl(we.cells.length,we,W,function(He){return bo(J,He.toString())});return Yh(we,Ie)}))}function Gp(M,R,W,J){return an(M,function(se){var ce=Hl(R,se,W,Yo);return ol(se,J,ce)})}function ei(M,R,W){var J=R.colDelta<0?Gp:cr,se=R.rowDelta<0?ko:cr,ce=Zs(M),we=fs(M[0]),Ie=ho(ce,function(at){return at===we-1}),He=J(M,Math.abs(R.colDelta),W,Ie?we-1:we),Ye=Zs(He);return se(He,Math.abs(R.rowDelta),W,mt(Ye,qr))}function Iu(M,R,W){return Lt(W,function(J){return J>=M.column&&J<=fs(R[0])+M.column})}function ba(M,R,W,J,se){var ce=M,we=se,Ie=J.cell;0<ce&&ce<R[0].cells.length&&ln(R,function(Ye){var ut=Ye.cells[ce];we(ut.element,Ye.cells[ce-1].element)&&fu(Ye,ce,su(Ie(),!0,ut.isLocked))});var He=ei(W,dd(W,R),J);return an(ei(R,dd(R,He),J),function(Ye,at){return ol(Ye,M,He[at].cells)})}function ea(M,R,W,J,se){!function Sh(M,R,W,J){var ce,we=zi(M).rows;0<R&&R<we.length&&(ce=W,ln(Jo(we[R-1].cells,function(Ie,He){return ho(Ie,function(Ye){return ce(Ye.element,He.element)})?Ie:Ie.concat([He])},[]),function(Ie){for(var He=Ue.none(),Ye=R;Ye<we.length;Ye++)for(var at=0;at<fs(we[0]);at++)!function(ut){var st=we[Ye],Mt=yc(st,ut);W(Mt.element,Ie.element)&&(He=He.isNone()?Ue.some(J()):He).each(function(ht){fu(st,ut,su(ht,!0,Mt.isLocked))})}(at)}))}(R,M,se,J.cell);var ce,we,Ie=Zs(R),He=Qh(R,W),Ye=ei(R,gr(gr({},He),{colDelta:He.colDelta-Ie.length}),J),at=zi(Ye),ut=at.cols,st=at.rows,Mt=Zs(Ye),ht=Qh(W,R),zt=gr(gr({},ht),{colDelta:ht.colDelta+Mt.length}),Xt=ei((ce=J,we=Mt,an(W,function(ft){return Jo(we,function(Pt,xn){return nf(Pt,xn,Hl(1,ft,ce,qr)[0])},ft)})),zt,J);return ut.concat(st.slice(0,M)).concat(Xt).concat(st.slice(M,st.length))}function $v(M,R,W,J,se){var we,Ie,He,Ye=zi(M),at=Ye.rows,ut=Ye.cols,st=at.slice(0,R),Mt=at.slice(R),ht=(we=function(zt,Xt){return 0<R&&R<at.length&&J(Ta(at[R-1],Xt),Ta(at[R],Xt))?yc(at[R],Xt):su(se(zt.element,J),!0,zt.isLocked)},Ie=J,He=se,Bl(at[W],function(zt){return He(zt,Ie)},we));return ut.concat(st).concat([ht]).concat(Mt)}function mu(M,R,W,J,se){return an(M,function(ce){var Ie,He=0<R&&R<fs(ce)&&J(Ta(ce,R-1),Ta(ce,R)),Ye=(Ie=se,"colgroup"!==ce.section&&He?yc(ce,R):su(Ie(yc(ce,W).element,J),!0,!1));return nf(ce,R,Ye)})}function qc(M,R,W,J){return void 0!==Ta((ce=M)[we=R],W)&&0<we&&J(Ta(ce[we-1],W),Ta(ce[we],W))||(se=M[R],0<W&&J(Ta(se,W-1),Ta(se,W)));var se,ce,we}function Xa(M,R,W,J){function se(ce){return("row"===ce?Ad:Cp)(R)?ce+"group":ce}return M?rp(R)?se(W):null:J&&rp(R)?se("row"===W?"col":"row"):null}function Os(M,R,W){return su(W(M.element,R),!0,M.isLocked)}function Ch(M,R,W,J,se,ce,we){return an(M,function(Ie,He){return ut=an((Ye=Ie).cells,function(st,Mt){if(zt=st,ho(R,function(Xt){return W(zt.element,Xt.element)})){var ht=we(st,He,Mt)?se(st,W,J):st;return ce(ht,He,Mt).each(function(Xt){var ft=ht.element;ki({scope:Ue.from(Xt)},function(Pt,xn){Pt.fold(function(){Ia(ft,xn)},function(wt){Dd(ft.dom,xn,wt)})})}),ht}return st;var zt}),br(Ye.element,ut,Ye.section,Ye.isNew);var Ye,ut})}function Pm(M,R,W){return nn(M,function(J,se){return qc(M,se,R,W)?[]:[yc(J,R)]})}function Jv(M,R,W,J,se){var ce,we,Ie,He,Ye=zi(M).rows,at=nn(R,function(ht){return Pm(Ye,ht,J)}),ut=an(M,function(ht){return ac(ht.cells)}),st=(ce=at,Ce(we=ut,cr)&&ac(ce)?qr:function(ht,zt,Xt){return!("th"===$r(ht.element)&&we[zt])}),Mt=(Ie=W,He=ut,function(ht,zt){return Ue.some(Xa(Ie,ht.element,"row",He[zt]))});return Ch(M,at,J,se,Os,Mt,st)}function hd(M,R,W,J){var se=zi(M).rows;return Ch(M,an(R,function(ce){return yc(se[ce.row],ce.column)}),W,J,Os,Ue.none,qr)}function ws(M){return Jo(M,function(R,W){return ho(R,function(J){return J.column===W.column})?R:R.concat([W])},[]).sort(function(R,W){return R.column-W.column})}function zd(M){return"tr"===$r(M)||lc(M)}function K1(M){return{element:M,colspan:Lc(M,"colspan",1),rowspan:Lc(M,"rowspan",1)}}function Mh(M){return $o(M,"scope").map(function(R){return R.substr(0,3)})}function Fd(M){return R=M,W=zb.property().name(R),Ur(W_,W);var R,W}function ep(M){return R=M,Ur(["ol","ul"],zb.property().name(R));var R}function uf(M){return cd(M,!0)}function xc(M){0===vc(M).length&&vs(M)}function kb(M,R){return{grid:M,cursor:R}}function _a(M,R,W){var J,se,ce,we,Ie;return kb(M,(J=R,se=W,Ie=zi(M).rows,Ue.from(null===(we=null===(ce=Ie[J])||void 0===ce?void 0:ce.cells[se])||void 0===we?void 0:we.element).filter(uf).orThunk(function(){return De(Ie,function(Ye){return De(Ye.cells,function(at){var ut=at.element;return rl(uf(ut),ut)})})})))}function Qv(M){return Jo(M,function(R,W){return ho(R,function(J){return J.row===W.row})?R:R.concat([W])},[]).sort(function(R,W){return R.row-W.row})}function Rm(M,R){return function(W,J,se,ce,we){return _a(function(Ie,He,Ye,at,ut,st,Mt){var ht=zi(Ie),zt=ht.cols,Xt=ht.rows,ft=Xt[He[0]],Pt=nn(He,function(Po){return si=ut,nn((ri=Xt)[Do=Po].cells,function(Hi,Ea){return qc(ri,Do,Ea,si)?[]:[Hi]});var ri,Do,si}),xn=an(ft.cells,function(Po,ri){return ac(Pm(Xt,ri,ut))}),wt=wr([],Xt,!0);ln(He,function(Po){wt[Po]=Mt.transformRow(Xt[Po],Ye)});var Sn,$t,Er,Tn,Lr=zt.concat(wt),Qr=(Sn=ft,Ce($t=xn,cr)&&ac(Sn.cells)?qr:function(Po,ri,Do){return!("th"===$r(Po.element)&&$t[Do])}),io=(Er=at,Tn=xn,function(Po,ri,Do){return Ue.some(Xa(Er,Po.element,"col",Tn[Do]))});return Ch(Lr,Pt,ut,st,Mt.transformCell,io,Qr)}(W,an(Qv(J),function(Ie){return Ie.row}),M,R,se,ce.replaceOrInit,we),J[0].row,J[0].column)}}function Vd(M,R,W){var J,se=(J=W.section,Nl(M,function(){return J}));return Bd(Oo.generate(se),R,!0)}function tp(M,R,W,J){var se=J.sizing,ce=Oo.generate(R);xs(ce,se.getWidths(ce,se),se)}function Go(M,R,W,J){var se=W,ce=J.sizing,we=J.resize,Ie=Oo.generate(R),He=ce.getWidths(Ie,ce),Ye=ce.pixelWidth(),at=we.calcRedestributedWidths(He,Ye,se.pixelDelta,ce.isRelative),st=at.delta;xs(Ie,at.newSizes,ce),ce.adjustTableWidth(st)}function Hd(M,R){return ho(R,function(W){return 0===W.column&&W.isLocked})}function Og(M,R){return ho(R,function(W){return W.column+W.colspan>=M.grid.columns&&W.isLocked})}function _c(M,R){var W=vi(M);return Jo(ws(R),function(J,se){return J+W[se.column].map(al).getOr(0)},0)}function $1(M){return function(R,W){return Of(R,W).filter(function(J){return!(M?Hd:Og)(R,J)}).map(function(J){return{details:J,pixelDelta:_c(R,J)}})}}function fl(M){return function(R,W){return Ag(R,W).filter(function(J){return!(M?Hd:Og)(R,J.cells)})}}function kh(M,R){var W=Oo.fromTable(M);return Of(W,R).bind(function(J){var se=J[J.length-1],ce=J[0].column,we=se.column+se.colspan,Ie=na(an(W.all,function(He){return Lt(He.cells,function(Ye){return Ye.column>=ce&&Ye.column<we})}));return Vg(Ie)}).getOr("")}function Eg(M,R){return Of(Oo.fromTable(M),R).bind(Vg).getOr("")}function Th(M,R,W,J){return qe(M,function(se){return function(ce,we,Ie,He){for(var Ye=Dt.fromTag("tr"),at=0;at<ce;at++){var ut=Dt.fromTag(He<we||at<Ie?"th":"td");at<Ie&&cs(ut,"scope","row"),He<we&&cs(ut,"scope","col"),oo(ut,Dt.fromTag("br")),oo(Ye,ut)}return Ye}(R,W,J,se)})}function Pf(M,R){M.selection.select(R.dom,!0),M.selection.collapse(!0)}function r0(M,R,W,J,se){var ce=Vp(M),we={styles:ce,attributes:Zv(M),colGroups:M.getParam("table_use_colgroups",!1,"boolean")};return M.undoManager.ignore(function(){var Ie=function(st,Mt,ht,zt,Xt,ft){void 0===ft&&(ft=kc);var Pt,xn,wt=Dt.fromTag("table"),Sn="cells"!==Xt;Rl(wt,ft.styles),cu(wt,ft.attributes),ft.colGroups&&oo(wt,(Pt=Mt,xn=Dt.fromTag("colgroup"),qe(Pt,function(){return oo(xn,Dt.fromTag("col"))}),xn));var $t,Er=Math.min(st,ht);Sn&&0<ht&&($t=Dt.fromTag("thead"),oo(wt,$t),Wu($t,Th(ht,Mt,"sectionCells"===Xt?Er:0,zt)));var Tn=Dt.fromTag("tbody");return oo(wt,Tn),Wu(Tn,Th(Sn?st-Er:st,Mt,Sn?0:ht,zt)),wt}(W,R,se,J,bh(M),we);cs(Ie,"data-mce-id","__mce");var He,Ye,at,ut=(He=Ie,Ye=Dt.fromTag("div"),at=Dt.fromDom(He.dom.cloneNode(!0)),oo(Ye,at),Ye.dom.innerHTML);M.insertContent(ut),M.addVisual()}),lo(Zu(M),'table[data-mce-id="__mce"]').map(function(Ie){var He,Ye,at;return jm(M)?Zc(Ie):Xp(M)?df(Ie):(Cg(M)||_n(He=ce.width)&&-1!==He.indexOf("%"))&&Zp(Ie),ld(Ie),Ia(Ie,"data-mce-id"),Ye=M,ln(wa(Ie,"tr"),function(ut){_s(Ye,ut.dom),ln(wa(ut,"th,td"),function(st){Ku(Ye,st.dom)})}),at=M,lo(Ie,"td,th").each(Kr(Pf,at)),Ie.dom}).getOr(null)}function bi(M,R,W,J,se){function ce(Ie){return Mi(Ie)&&0<Ie}return void 0===J&&(J={}),ce(R)&&ce(W)?r0(M,W,R,J.headerColumns||0,J.headerRows||0):(console.error(se),null)}function ey(M){return function(){return M().fold(function(){return[]},function(R){return an(R,function(W){return W.dom})})}}function Tb(M){return function(R){var W=0<R.length?Ue.some(Ua(R)):Ue.none();M(W)}}function Oi(M,R,W){var J=Lc(M,R,1);1===W||J<=1?Ia(M,R):cs(M,R,Math.min(W,J))}function o0(M,R,W){return function(J,se){for(var ce=0;ce<se.length;ce++){var we=M.getStyle(se[ce],W);if((J=void 0===J?we:J)!==we)return""}return J}(void 0,M.select("td,th",R))}function Up(M,R,W){W&&M.formatter.apply("align"+W,{},R)}function i0(M,R){Ul.each("left center right".split(" "),function(W){M.formatter.remove("align"+W,{},R)})}function lf(M){return hy.test(W=M)||hf.test(W)?Ue.some({value:(Ot(R=M,"#")?R.substring(1):R).toUpperCase()}):Ue.none();var R,W}function Rf(M){var R=M.toString(16);return(1===R.length?"0"+R:R).toUpperCase()}function Ou(M){return{value:Rf(M.red)+Rf(M.green)+Rf(M.blue)}}function dl(M,R,W,J){return{red:M,green:R,blue:W,alpha:J}}function wc(M,R,W,J){return dl(parseInt(M,10),parseInt(R,10),parseInt(W,10),parseFloat(J))}function $s(M){var R=M;return{get:function(){return R},set:function(W){R=W}}}function Xc(M){function R(){return W.get().each(M)}var W=$s(Ue.none());return{clear:function(){R(),W.set(Ue.none())},isSet:function(){return W.get().isSome()},get:function(){return W.get()},set:function(J){R(),W.set(Ue.some(J))}}}function Ju(){var M=Xc(zn);return gr(gr({},M),{on:function(R){return M.get().each(R)}})}function Db(M){return Or(M,"menu")}function So(M,R){return function(W){var J;M.execCommand("mceTableApplyCellStyle",!1,((J={})[R]=W,J))}}function Lm(M,R,W,J,se){return function(ce){return ce(ap(M,R,W,J,se))}}function jn(M,R,W){var J=an(R,function(se){return{text:se.title,value:"#"+lf(ce=se.value).orThunk(function(){return function(we){if("transparent"===we)return Ue.some(dl(0,0,0,0));var Ie=v0.exec(we);if(null!==Ie)return Ue.some(wc(Ie[1],Ie[2],Ie[3],"1"));var He=ip.exec(we);return null!==He?Ue.some(wc(He[1],He[2],He[3],He[4])):Ue.none()}(ce).map(Ou)}).getOrThunk(function(){var we=document.createElement("canvas");we.height=1,we.width=1;var Ie=we.getContext("2d");Ie.clearRect(0,0,we.width,we.height),Ie.fillStyle="#FFFFFF",Ie.fillStyle=ce,Ie.fillRect(0,0,1,1);var He=Ie.getImageData(0,0,1,1).data;return Ou(dl(He[0],He[1],He[2],He[3]))}).value,type:"choiceitem"};var ce});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<J.length?J:void 0,allowCustomColors:!1},onAction:function(se){var ce;M.execCommand("mceTableApplyCellStyle",!1,((ce={})[W]="remove"===se.value?"":se.value,ce))}}]}function N_(M){return function(){var R=M.queryCommandValue("mceTableRowType");M.execCommand("mceTableRowType",!1,{type:"header"===R?"body":"header"})}}function ty(M){return function(){var R=M.queryCommandValue("mceTableColType");M.execCommand("mceTableColType",!1,{type:"th"===R?"td":"th"})}}function a0(M){return y0.concat((0<(R=zf(ja(M))).length?Ue.some({name:"class",type:"listbox",label:"Class",items:R}):Ue.none()).toArray());var R}function Ss(M,R){var W=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(zf(wb(M)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===R?[{name:"borderwidth",type:"input",label:"Border width"}].concat(W):W}}function Pg(M){return function(R,W){var J=R.dom;return{setAttrib:function(se,ce){M&&!ce||J.setAttrib(W,se,ce)},setStyle:function(se,ce){M&&!ce||J.setStyle(W,se,ce)},setFormat:function(se,ce){M&&!ce||(""===ce?R.formatter.remove(se,{value:null},W,!0):R.formatter.apply(se,{value:ce},W))}}}}function Wd(M){return function(R){return Ot(R,"rgb")?M.toHex(R):R}}function en(M,R){var W=Dt.fromDom(R);return{borderwidth:Au(W,"border-width").getOr(""),borderstyle:Au(W,"border-style").getOr(""),bordercolor:Au(W,"border-color").map(Wd(M)).getOr(""),backgroundcolor:Au(W,"background-color").map(Wd(M)).getOr("")}}function Rg(M){var R=M[0];return ln(M.slice(1),function(W){ln(so(R),function(J){ki(W,function(se,ce){var we=R[J];""!==we&&J===ce&&we!==se&&(R[J]="")})})}),R}function Nm(M,R,W,J){return Ir(M,function(se){return!_l(W.formatter.matchNode(J,R+se))}).getOr("")}function Bm(M,R){var W=Oo.fromTable(M);return an(Lt(Oo.justCells(W),function(J){return ho(R,function(se){return Sr(J.element,se)})}),function(J){return{element:J.element.dom,column:Oo.getColumnAt(W,J.column).map(function(se){return se.element.dom})}})}function ny(M,R,W,J){var se=J.getData();J.close(),M.undoManager.transact(function(){var ce,we=M,Ie=R,He=W,Ye=ni(ce=se,function(at,ut){return He[ut]!==at});0<Ys(Ye)&&1<=Ie.length&&sa(Ie[0]).each(function(at){var ut,st,Mt,ht=Bm(at,Ie),zt=0<Ys(ni(Ye,function(ft,Pt){return"scope"!==Pt&&"celltype"!==Pt})),Xt=bo(Ye,"celltype");(zt||bo(Ye,"scope"))&&(ut=we,st=ce,Mt=1===ht.length,ln(ht,function(ft){var Pt,xn,wt,Sn,$t,Er,Tn=ft.element,Lr=Mt?vd.normal(ut,Tn):vd.ifTruthy(ut,Tn),Qr=ft.column.map(function(Po){return Mt?vd.normal(ut,Po):vd.ifTruthy(ut,Po)}).getOr(Lr),io=st;(Pt=Lr).setAttrib("scope",io.scope),Pt.setAttrib("class",io.class),Pt.setStyle("height",Pp(io.height)),Qr.setStyle("width",Pp(io.width)),q1(ut)&&((xn=Lr).setFormat("tablecellbackgroundcolor",(wt=st).backgroundcolor),xn.setFormat("tablecellbordercolor",wt.bordercolor),xn.setFormat("tablecellborderstyle",wt.borderstyle),xn.setFormat("tablecellborderwidth",Pp(wt.borderwidth))),Mt&&(i0(ut,Tn),Sn=ut,$t=Tn,Ul.each("top middle bottom".split(" "),function(Po){Sn.formatter.remove("valign"+Po,{},$t)})),st.halign&&Up(ut,Tn,st.halign),!st.valign||(Er=st.valign)&&ut.formatter.apply("valign"+Er,{},Tn)})),Xt&&we.execCommand("mceTableCellType",!1,{type:ce.celltype,no_events:!0}),Gc(we,at.dom,{structure:Xt,style:zt})}),M.focus()})}function Dh(M,R){var W,J,se,ce,we,Ie=Bg(R);0!==Ie.length&&(J=M,W=Rg(sa((se=Ie)[0]).map(function(He){return an(Bm(He,se),function(Ye){return ut=J,st=Ye.element,Mt=q1(J),zt=ut.dom,Xt=Ye.column.getOr(st),gr({width:at(Xt,"width"),height:at(st,"height"),scope:zt.getAttrib(st,"scope"),celltype:st.nodeName.toLowerCase(),class:zt.getAttrib(st,"class",""),halign:Qm(ut,st),valign:jo(ut,st)},Mt?en(zt,st):{});function at(ft,Pt){return zt.getStyle(ft,Pt)||zt.getAttrib(ft,Pt)}var ut,st,Mt,zt,Xt})}).getOrDie()),ce={type:"tabpanel",tabs:[{title:"General",name:"general",items:a0(M)},Ss(M,"cell")]},we={type:"panel",items:[{type:"grid",columns:2,items:a0(M)}]},M.windowManager.open({title:"Cell Properties",size:"normal",body:q1(M)?ce:we,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:W,onSubmit:Kr(ny,M,Ie,W)}))}function Cs(M){return hl.concat((0<(R=zf(M.getParam("table_row_class_list",[],"array"))).length?Ue.some({name:"class",type:"listbox",label:"Class",items:R}):Ue.none()).toArray());var R}function Js(M,R,W,J){var se=J.getData();J.close(),M.undoManager.transact(function(){var ce,we,Ie,He,Ye,at,ut,st=M,Mt=R,ht=W,zt=ni(ce=se,function(Xt,ft){return ht[ft]!==Xt});0<Ys(zt)&&(we=bo(zt,"type"),(Ie=!we||1<Ys(zt))&&(He=st,Ye=ce,at=ht,ut=1===Mt.length,ln(Mt,function(Xt){var ft,Pt,xn,wt=ut?vd.normal(He,Xt):vd.ifTruthy(He,Xt),Sn=Ye;(ft=wt).setAttrib("class",Sn.class),ft.setStyle("height",Pp(Sn.height)),Om(He)&&((Pt=wt).setStyle("background-color",(xn=Ye).backgroundcolor),Pt.setStyle("border-color",xn.bordercolor),Pt.setStyle("border-style",xn.borderstyle)),Ye.align!==at.align&&(i0(He,Xt),Up(He,Xt,Ye.align))})),we&&st.execCommand("mceTableRowType",!1,{type:ce.type,no_events:!0}),sa(Dt.fromDom(Mt[0])).each(function(Xt){return Gc(st,Xt.dom,{structure:we,style:Ie})})),M.focus()})}function Lg(M){var R,W,J,se,ce,we,Ie,He=(R=gu(M),W=sc.selected,se=(J=ff(R)).bind(function(Ye){return sa(Ye)}).map(ch),xg(J,se,function(Ye,at){return Lt(at,function(ut){return ho(Ua(ut.dom.cells),function(st){return"1"===Xs(st,W)||Sr(st,Ye)})})}).getOr([]));0!==He.length&&(ce=Rg(an(He,function(Ye){return at=M,ut=Ye.dom,st=Om(M),gr({height:(ht=at.dom).getStyle(ut,"height")||ht.getAttrib(ut,"height"),class:ht.getAttrib(ut,"class",""),type:sa(Dt.fromDom(Mt=ut)).map(function(zt){var Xt={selection:Ua(Mt.cells)};return Jm(zt,Xt)}).getOr(""),align:Qm(at,ut)},st?en(ht,ut):{});var at,ut,st,Mt,ht})),we={type:"tabpanel",tabs:[{title:"General",name:"general",items:Cs(M)},Ss(M,"row")]},Ie={type:"panel",items:[{type:"grid",columns:2,items:Cs(M)}]},M.windowManager.open({title:"Row Properties",size:"normal",body:Om(M)?we:Ie,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ce,onSubmit:Kr(Js,M,an(He,function(Ye){return Ye.dom}),ce)}))}function B_(M,R,W,J){var se=M.dom,ce=J.getData(),we=ni(ce,function(Ie,He){return W[He]!==Ie});J.close(),""===ce.class&&delete ce.class,M.undoManager.transact(function(){var Ie,He,Ye,at,ut;R||(Ie=parseInt(ce.cols,10)||1,He=parseInt(ce.rows,10)||1,R=r0(M,Ie,He,0,0)),0<Ys(we)&&(function(st,Mt,ht){var zt,Xt=st.dom,ft={},Pt={};if(ft.class=ht.class,Pt.height=Pp(ht.height),Xt.getAttrib(Mt,"width")&&!ia(st)?ft.width=(zt=ht.width)?zt.replace(/px$/,""):"":Pt.width=Pp(ht.width),ia(st)?(Pt["border-width"]=Pp(ht.border),Pt["border-spacing"]=Pp(ht.cellspacing)):(ft.border=ht.border,ft.cellpadding=ht.cellpadding,ft.cellspacing=ht.cellspacing),ia(st)&&Mt.children)for(var xn=0;xn<Mt.children.length;xn++)sp(Xt,Mt.children[xn],{"border-width":Pp(ht.border),padding:Pp(ht.cellpadding)}),$h(st)&&sp(Xt,Mt.children[xn],{"border-color":ht.bordercolor});$h(st)&&(Pt["background-color"]=ht.backgroundcolor,Pt["border-color"]=ht.bordercolor,Pt["border-style"]=ht.borderstyle),ft.style=Xt.serializeStyle(gr(gr({},Vp(st)),Pt)),Xt.setAttribs(Mt,gr(gr({},Zv(st)),ft))}(M,R,ce),((Ye=se.select("caption",R)[0])&&!ce.caption||!Ye&&ce.caption)&&M.execCommand("mceTableToggleCaption"),""===ce.align?i0(M,R):Up(M,R,ce.align)),M.focus(),M.addVisual(),0<Ys(we)&&(ut=!(at=bo(we,"caption"))||1<Ys(we),Gc(M,R,{structure:at,style:ut}))})}function J1(M,R){var W,J,se,ce,we,Ie,He,Ye,at,ut,st,Mt,ht,zt,Xt,ft,Pt,xn,wt,Sn=M.dom,$t=(se=$h(J=M),Ye=Vp(J),at=Zv(J),ut=se?(ce=J.dom,{borderstyle:Ts(Ye,"border-style").getOr(""),bordercolor:Wd(ce)(Ts(Ye,"border-color").getOr("")),backgroundcolor:Wd(ce)(Ts(Ye,"background-color").getOr(""))}):{},gr(gr(gr(gr(gr(gr({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),Ye),at),ut),(He=Ye["border-width"],ia(J)&&He?{border:He}:Ts(at,"border").fold(function(){return{}},function(Do){return{border:Do}}))),(we=Ts(Ye,"border-spacing").or(Ts(at,"cellspacing")).fold(function(){return{}},function(Do){return{cellspacing:Do}}),Ie=Ts(Ye,"border-padding").or(Ts(at,"cellpadding")).fold(function(){return{}},function(Do){return{cellpadding:Do}}),gr(gr({},we),Ie))));!1===R?(W=Sn.getParent(M.selection.getStart(),"table",M.getBody()))?(Mt=W,ht=$h(st=M),Pt=st.dom,xn=ia(st)?Pt.getStyle(Mt,"border-spacing")||Pt.getAttrib(Mt,"cellspacing"):Pt.getAttrib(Mt,"cellspacing")||Pt.getStyle(Mt,"border-spacing"),wt=ia(st)?o0(Pt,Mt,"padding")||Pt.getAttrib(Mt,"cellpadding"):Pt.getAttrib(Mt,"cellpadding")||o0(Pt,Mt,"padding"),$t=gr({width:Pt.getStyle(Mt,"width")||Pt.getAttrib(Mt,"width"),height:Pt.getStyle(Mt,"height")||Pt.getAttrib(Mt,"height"),cellspacing:xn,cellpadding:wt,border:(zt=Pt,ft=Au(Dt.fromDom(Xt=Mt),"border-width"),ia(st)&&ft.isSome()?ft.getOr(""):zt.getAttrib(Xt,"border")||o0(st.dom,Xt,"border-width")||o0(st.dom,Xt,"border")),caption:!!Pt.select("caption",Mt)[0],class:Pt.getAttrib(Mt,"class",""),align:Qm(st,Mt)},ht?en(Pt,Mt):{})):$h(M)&&($t.borderstyle="",$t.bordercolor="",$t.backgroundcolor=""):($t.cols="1",$t.rows="1",$h(M)&&($t.borderstyle="",$t.bordercolor="",$t.backgroundcolor=""));var Er=zf(Nd(M));0<Er.length&&$t.class&&($t.class=$t.class.replace(/\s*mce\-item\-table\s*/g,""));var Tn,Lr,Qr,io,Po={type:"grid",columns:2,items:(Tn=Er,Lr=R?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Qr=M.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],io=0<Tn.length?[{type:"listbox",name:"class",label:"Class",items:Tn}]:[],Lr.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(Qr).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(io))},ri=$h(M)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[Po]},Ss(M,"table")]}:{type:"panel",items:[Po]};M.windowManager.open({title:"Table Properties",size:"normal",body:ri,onSubmit:Kr(B_,M,W,$t),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:$t})}function s0(M){return Lf(gu(M),rc(M))}function ex(M,R){return sa(M,R).bind(function(W){var J=vc(W);return Cu(J,function(se){return Sr(M,se)}).map(function(se){return{index:se,all:J}})})}function ry(M,R){var W=M.document.createRange();return W.selectNode(R.dom),W}function u0(M,R){var W=M.document.createRange();return Gg(W,R),W}function Gd(M,R,W){var J,se=M.document.createRange(),ce=se;return R.fold(function(we){ce.setStartBefore(we.dom)},function(we,Ie){ce.setStart(we.dom,Ie)},function(we){ce.setStartAfter(we.dom)}),J=se,W.fold(function(we){J.setEndBefore(we.dom)},function(we,Ie){J.setEnd(we.dom,Ie)},function(we){J.setEndAfter(we.dom)}),se}function Za(M,R,W,J,se){var ce=M.document.createRange();return ce.setStart(R.dom,W),ce.setEnd(J.dom,se),ce}function l0(M){return{left:M.left,top:M.top,right:M.right,bottom:M.bottom,width:M.width,height:M.height}}function Ng(M,R,W){return R(Dt.fromDom(W.startContainer),W.startOffset,Dt.fromDom(W.endContainer),W.endOffset)}function Ab(M,R){var W,J,se,ce=(W=M,R.match({domRange:function(we){return{ltr:Gt(we),rtl:Ue.none}},relative:function(we,Ie){return{ltr:Mu(function(){return Gd(W,we,Ie)}),rtl:Mu(function(){return Ue.some(Gd(W,Ie,we))})}},exact:function(we,Ie,He,Ye){return{ltr:Mu(function(){return Za(W,we,Ie,He,Ye)}),rtl:Mu(function(){return Ue.some(Za(W,He,Ye,we,Ie))})}}}));return(se=(J=ce).ltr()).collapsed?J.rtl().filter(function(we){return!1===we.collapsed}).map(function(we){return Yd.rtl(Dt.fromDom(we.endContainer),we.endOffset,Dt.fromDom(we.startContainer),we.startOffset)}).getOrThunk(function(){return Ng(0,Yd.ltr,se)}):Ng(0,Yd.ltr,se)}function oy(M,R){return Ab(M,R).match({ltr:function(W,J,se,ce){var we=M.document.createRange();return we.setStart(W.dom,J),we.setEnd(se.dom,ce),we},rtl:function(W,J,se,ce){var we=M.document.createRange();return we.setStart(se.dom,ce),we.setEnd(W.dom,J),we}})}function pd(M,R){return{parent:Gt(Ue.from(M.dom.documentElement).map(Dt.fromDom).getOr(M)),view:Gt(M),origin:Gt(Un(0,0)),isResizable:R}}function Ah(M){return Fi(M).exists(function(R){return Eb.test(R)})}function Ib(M){return Fi(M).exists(function(R){return iy.test(R)})}function c0(M){return Fi(M).isNone()}function f0(){return{transformRow:cr,transformCell:X1}}function cf(M,R){function W(se){if(zd(se))return lc((we={element:se}).element)?M.colgroup(we):M.row(we);var ce,we,Ie=(ce=R(se),Pu(ce.element)?M.col(ce):M.cell(ce));return J=Ue.some({item:se,replacement:Ie}),Ie}void 0===R&&(R=K1);var J=Ue.none();return{getOrInit:function(se,ce){return J.fold(function(){return W(se)},function(we){return ce(se,we.item)?we.replacement:W(se)})}}}function np(M){return function(R){function W(se){var ce=R.replace(se,M,"td"===M?{scope:null}:{});return J.push({item:se,sub:ce}),ce}var J=[];return{replaceOrInit:function(se,ce){return zd(se)||Pu(se)?se:(we=se,Ie=ce,Ir(J,function(He){return Ie(He.item,we)}).fold(function(){return W(se)},function(He){return ce(se,He.item)?He.sub:W(se)}));var we,Ie}}}}function Ob(M){return{unmerge:function(R){var W=Mh(R);return W.each(function(J){return cs(R,"scope",J)}),function(){var J=M.cell({element:R,colspan:1,rowspan:1});return Ll(J,"width"),Ll(R,"width"),W.each(function(se){return cs(J,"scope",se)}),J}},merge:function(R){return Ll(R[0],"width"),function(){var W=Io(an(R,Mh));if(0===W.length)return Ue.none();var J=W[0],se=["row","col"];return ho(W,function(ce){return ce!==J&&Ur(se,ce)})?Ue.none():Ue.from(J)}().fold(function(){return Ia(R[0],"scope")},function(W){return cs(R[0],"scope",W+"group")}),Gt(R[0])}}}var Eb=/(\d+(\.\d+)?)%/,iy=/(\d+(\.\d+)?)px|em/,tx=oa("col"),z_=Gt(Eb),zm=oa("col"),gd=function(M){return Fi(M).fold(function(){return{width:W=sd(R=M,Df),pixelWidth:W,getWidths:function(se,ce){return Ip(se,R,ce)},getCellDelta:J=Gt(0),singleColumnWidth:Gt([0]),minCellWidth:J,setElementWidth:zn,adjustTableWidth:zn,isRelative:!0,label:"none"};var R,W,J},function(R){return W=M,J=R,(null!==z_().exec(J)?Br:Am)(W);var W,J})},vu=Am,F_=Br,nx=["img","br"],Fm=function(M,R){var W=function(J){for(var se=Bs(J),ce=se.length-1;0<=ce;ce--){var we=se[ce];if(R(we))return Ue.some(we);var Ie=W(we);if(Ie.isSome())return Ie}return Ue.none()};return W(M)},kl={scope:["row","col"]},sc={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Lf=Af("th,td,caption"),ff=Af("th,td"),Bg=Rp,Vm=bs([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Hm=gr({},Vm),Wm=Ca(function(M){return M<0}),rx=Ca(qr),jp=bs([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),Ih=gr(gr({},jp),{from:function(M){return Ht(M,"%")?Sg("%",jp.percent,M):Ht(M,"px")?Sg("px",jp.pixels,M):jp.invalid(M)}}),ay=function(M){if(0===M.length)return M;var R,W,J=Yn(M,function(ce,we){var Ie=Ih.from(we).fold(function(){return{value:we,remainder:0}},function(He){return Ye=He,{value:(at=Math.floor(Ye))+"px",remainder:Ye-at};var Ye,at},function(He){return{value:He+"%",remainder:0}});return{output:[Ie.value].concat(ce.output),remainder:ce.remainder+Ie.remainder}},{output:[],remainder:0}),se=J.output;return se.slice(0,se.length-1).concat([(R=se[se.length-1],W=Math.round(J.remainder),Ih.from(R).fold(Gt(R),function(ce){return ce+W+"px"},function(ce){return ce+W+"%"}))])},sy=Ih.from,Eu=Np(["compare","extract","mutate","sink"]),Pb=Np(["element","start","stop","destroy"]),Nf=Np(["forceDrop","drop","move","delayDrop"]),Rb=function(M,R,W,J){M.dom.removeEventListener(R,W,J)},V_=qr,zg=Xv,Gm=hi("ephox-dragster").resolve,Fg=Eu({compare:function(M,R){return Un(R.left-M.left,R.top-M.top)},extract:function(M){return Ue.some(Un(M.x,M.y))},sink:function(M,R){var W,J,se,ce=(W=R,J=gr({layerClass:Gm("blocker")},W),cs(se=Dt.fromTag("div"),"role","presentation"),Rl(se,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),mh(se,Gm("blocker")),mh(se,J.layerClass),{element:Gt(se),destroy:function(){vs(se)}}),we=Hs(ce.element(),"mousedown",M.forceDrop),Ie=Hs(ce.element(),"mouseup",M.drop),He=Hs(ce.element(),"mousemove",M.move),Ye=Hs(ce.element(),"mouseout",M.delayDrop);return Pb({element:ce.element,start:function(at){oo(at,ce.element())},stop:function(){vs(ce.element())},destroy:function(){ce.destroy(),Ie.unbind(),He.unbind(),Ye.unbind(),we.unbind()}})},mutate:function(M,R){M.mutate(R.left,R.top)}}),Lb=function(M){return M.dom.contentEditable},Nb=hi("ephox-snooker").resolve,Gl=Nb("resizer-bar"),d0=Nb("resizer-rows"),Um=Nb("resizer-cols"),Bf=Nb("resizer-bar-dragging"),uy={structure:!1,style:!0},Qs={structure:!0,style:!1},H_={structure:!0,style:!0},Yp={"border-collapse":"collapse",width:"100%"},qp=qe(5,function(M){var R=M+1+"px";return{title:R,value:R}}),ly=an(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(M){return{title:M,value:M.toLowerCase()}}),OS={border:"1"},uc="preservetable",jm=function(M){return"fixed"===Fp(M)||!1===t0(M)},Xp=function(M){return"responsive"===Fp(M)},Zp=function(M){var R=Vl(M);Lp(M,Ue.some(R),Ue.none()),kg(M)},Zc=function(M){var R=Df(M)+"px";Lp(M,Ue.some(R),Ue.none()),kg(M)},df=function(M){Ll(M,"width");var R=Ai(M);ln(0<R.length?R:vc(M),function(W){Ll(W,"width"),kg(W)}),kg(M)},Ym="bar-",ox=function(M,R,W){return M.property().isText(R)&&0===M.property().getText(R).trim().length||M.property().isComment(R)?W(R).bind(function(J){return ox(M,J,W).orThunk(function(){return Ue.some(J)})}):Ue.none()},Sc=function(M,R){var W=ox(M,R,M.query().prevSibling).getOr(R);if(M.property().isText(W))return Em(W,Tg(M,W));var J=M.property().children(W);return 0<J.length?Sc(M,J[J.length-1]):Em(W,Tg(M,W))},Cc=Sc,qm=Dm(),rp=oa("th"),Vg=function(M){var R=Lt(M,function(W){return rp(W.element)});return 0===R.length?Ue.some("td"):R.length===M.length?Ue.some("th"):Ue.none()},cy=sf,eu=Kv,Xm=$u,Qu=function(M){return{isValue:qr,isError:Yo,getOr:Gt(M),getOrThunk:Gt(M),getOrDie:Gt(M),or:function(R){return Qu(M)},orThunk:function(R){return Qu(M)},fold:function(R,W){return W(M)},map:function(R){return Qu(R(M))},mapError:function(R){return Qu(M)},each:function(R){R(M)},bind:function(R){return R(M)},exists:function(R){return R(M)},forall:function(R){return R(M)},toOptional:function(){return Ue.some(M)}}},fy=function(M){return{isValue:Yo,isError:qr,getOr:cr,getOrThunk:function(R){return R()},getOrDie:function(){return R=String(M),function(){throw new Error(R)}();var R},or:cr,orThunk:function(R){return R()},fold:function(R,W){return R(M)},map:function(R){return fy(M)},mapError:function(R){return fy(R(M))},each:zn,bind:function(R){return fy(M)},exists:Yo,forall:qr,toOptional:Ue.none}},Bb={value:Qu,error:fy,fromOption:function(M,R){return M.fold(function(){return fy(R)},Qu)}},Pu=oa("col"),lc=oa("colgroup"),W_=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],zb=Dm(),cc=Rm("thead",!0),dy=Rm("tbody",!1),Es=Rm("tfoot",!1),op=np("th"),tu=np("td"),Kp=cl(function(M,R,W,J){var se=R[0].row;return _a(Yn(Qv(R),function(ce,we){return{grid:$v(ce.grid,se,we.row+ce.delta,W,J.getOrInit),delta:ce.delta+1}},{grid:M,delta:0}).grid,se,R[0].column)},Of,zn,zn,cf),h0=cl(function(M,R,W,J){var se=Qv(R),ce=se[se.length-1],we=ce.row+ce.rowspan;return _a(Yn(se,function(Ie,He){return $v(Ie,we,He.row,W,J.getOrInit)},M),we,R[0].column)},Of,zn,zn,cf),Ud=cl(function(M,R,W,J){var se=R.details,ce=ws(se),we=ce[0].column;return _a(Yn(ce,function(Ie,He){return{grid:mu(Ie.grid,we,He.column+Ie.delta,W,J.getOrInit),delta:Ie.delta+1}},{grid:M,delta:0}).grid,se[0].row,we)},$1(!0),Go,zn,cf),Mc=cl(function(M,R,W,J){var se=R.details,ce=se[se.length-1],we=ce.column+ce.colspan;return _a(Yn(ws(se),function(Ie,He){return mu(Ie,we,He.column,W,J.getOrInit)},M),se[0].row,we)},$1(!1),Go,zn,cf),Zm=cl(function(M,R,W,J){var se,ce,we=ws(R.details),Ie=(se=M,ce=an(we,function(Ye){return Ye.column}),nn(se,function(Ye){var ut=Yn(ce,function(st,Mt){return 0<=Mt&&Mt<st.length?st.slice(0,Mt).concat(st.slice(Mt+1)):st},Ye.cells);return 0<ut.length?[br(Ye.element,ut,Ye.section,Ye.isNew)]:[]}));return _a(Ie,we[0].row,Math.min(we[0].column,0<Ie.length?Ie[0].cells.length-1:0))},function(M,R){return Yc(M,R).map(function(W){return{details:W,pixelDelta:-_c(M,W)}})},Go,xc,cf),Km=cl(function(M,R,W,J){var se,ce,we,Ie,He=Qv(R),Ye=(se=He[0].row,ce=He[He.length-1].row,Ie=(we=zi(M)).rows,we.cols.concat(Ie.slice(0,se)).concat(Ie.slice(ce+1)));return _a(Ye,Math.min(R[0].row,0<Ye.length?Ye.length-1:0),R[0].column)},Of,zn,xc,cf),Hg=cl(function(M,R,W,J){return _a(Jv(M,an(ws(R),function(se){return se.column}),!0,W,J.replaceOrInit),R[0].row,R[0].column)},Yc,zn,zn,op),G_=cl(function(M,R,W,J){return _a(Jv(M,an(ws(R),function(se){return se.column}),!1,W,J.replaceOrInit),R[0].row,R[0].column)},Yc,zn,zn,tu),p0=cl(cc,Yc,zn,zn,op),ix=cl(dy,Yc,zn,zn,tu),Kc=cl(Es,Yc,zn,zn,tu),ii=cl(function(M,R,W,J){return _a(hd(M,R,W,J.replaceOrInit),R[0].row,R[0].column)},Yc,zn,zn,op),mo=cl(function(M,R,W,J){return _a(hd(M,R,W,J.replaceOrInit),R[0].row,R[0].column)},Yc,zn,zn,tu),as=cl(function(M,R,W,J){var se=R.cells;return function Wl(M){function R(ce){return"br"===$r(ce)}var J,se=0===(J=nn(M,function(ce){var we=Bs(ce);return Ce(we,function(Ie){return R(Ie)||As(Ie)&&0===Aa(Ie).trim().length})?[]:we.concat(function W(ce){return Ep(ce).bind(function(we){var Ie=Ds(we).map(function(He){return!!Fd(He)||(Ye=He,!!Ur(["br","img","hr","input"],zb.property().name(Ye))&&"img"!==$r(He));var Ye}).getOr(!1);return Gr(we).map(function(He){return!0===Ie||"li"===$r(Ye=He)||It(Ye,ep).isSome()||R(we)||Fd(He)&&!Sr(ce,He)?[]:[Dt.fromTag("br")];var Ye})}).getOr([])}(ce))})).length?[Dt.fromTag("br")]:J;Gu(M[0]),Wu(M[0],se)}(se),kb(function(ce,we,Ie){var He=zi(ce).rows;if(0===He.length)return ce;for(var Ye=we.startRow;Ye<=we.finishRow;Ye++)for(var at=we.startCol;at<=we.finishCol;at++){var ut=He[Ye],st=yc(ut,at).isLocked;fu(ut,at,su(Ie(),!1,st))}return ce}(M,R.bounds,J.merge(se)),Ue.from(se[0]))},qa,tp,zn,Ob),$m=cl(function(M,R,W,J){return kb(Yn(R,function(se,ce){return Ig(se,ce,W,J.unmerge(ce))},M),Ue.from(R[0]))},wh,tp,zn,Ob),$p=cl(function(M,R,W,J){var ce,we=(ce=R.generators,Bd(Oo.fromTable(R.clipboard),ce,!0));return function Ef(M,R,W,J,se){var ce,we,Ie,He=Zs(R),Ye=(ce=M,we=He,Ie=fs(R[0]),{row:zi(R).cols.length+ce.row,column:Ir(qe(Ie-ce.column,function(st){return st+ce.column}),function(st){return Ce(we,function(Mt){return Mt!==st})}).getOr(Ie-1)}),at=zi(W).rows,ut=Iu(Ye,at,He);return function(st,Mt,ht){if(st.row>=Mt.length||st.column>fs(Mt[0]))return Bb.error("invalid start address out of table bounds, row: "+st.row+", column: "+st.column);var zt=Mt.slice(st.row),Xt=zt[0].cells.slice(st.column),ft=fs(ht[0]);return Bb.value({rowDelta:zt.length-ht.length,colDelta:Xt.length-ft})}(Ye,R,at).map(function(st){var Mt=gr(gr({},st),{colDelta:st.colDelta-ut.length}),ht=ei(R,Mt,J),zt=Zs(ht),Xt=Iu(Ye,at,zt);return function(ft,Pt,xn,wt,Sn,$t){for(var Er,Tn,Lr,Qr,io,Po=ft.row,ri=ft.column,Do=Po+xn.length,si=ri+fs(xn[0])+$t.length,Hi=mt($t,qr),Ea=Po;Ea<Do;Ea++)for(var tr,da,di,Wi=0,Ws=ri;Ws<si;Ws++)Hi[Ws]?Wi++:(Qr=void 0,Qr=Kr(Sn,yc((Er=Pt)[Tn=Ea],Lr=Ws).element),io=Er[Tn],1<Er.length&&1<fs(io)&&(0<Lr&&Qr(Ta(io,Lr-1))||Lr<io.cells.length-1&&Qr(Ta(io,Lr+1))||0<Tn&&Qr(Ta(Er[Tn-1],Lr))||Tn<Er.length-1&&Qr(Ta(Er[Tn+1],Lr)))&&Ig(Pt,Ta(Pt[Ea],Ws),Sn,wt.cell),da=(tr=yc(xn[Ea-Po],Ws-ri-Wi)).element,di=wt.replace(da),fu(Pt[Ea],Ws,su(di,!0,tr.isLocked)));return Pt}(Ye,ht,at,J,se,Xt)})}({row:R.row,column:R.column},M,we,R.generators,W).fold(function(){return kb(M,Ue.some(R.element))},function(Ie){return _a(Ie,R.row,R.column)})},function(M,R){return jh(R.element).bind(function(W){return Ya(M,W).map(function(J){return gr(gr({},J),{generators:R.generators,clipboard:R.clipboard})})})},tp,zn,cf),ax=cl(function(M,R,W,J){var se=zi(M).rows;return _a(ba(R.cells[0].column,M,Vd(R.clipboard,R.generators,se[R.cells[0].row]),R.generators,W),R.cells[0].row,R.cells[0].column)},fl(!0),zn,zn,cf),g0=cl(function(M,R,W,J){var se=zi(M).rows;return _a(ba(R.cells[R.cells.length-1].column+R.cells[R.cells.length-1].colspan,M,Vd(R.clipboard,R.generators,se[R.cells[0].row]),R.generators,W),R.cells[0].row,R.cells[0].column)},fl(!1),zn,zn,cf),md=cl(function(M,R,W,J){var se=zi(M).rows,ce=R.cells[0].row;return _a(ea(ce,M,Vd(R.clipboard,R.generators,se[ce]),R.generators,W),R.cells[0].row,R.cells[0].column)},Ag,zn,zn,cf),m0=cl(function(M,R,W,J){var se=zi(M).rows;return _a(ea(R.cells[R.cells.length-1].row+R.cells[R.cells.length-1].rowspan,M,Vd(R.clipboard,R.generators,se[R.cells[0].row]),R.generators,W),R.cells[0].row,R.cells[0].column)},Ag,zn,zn,cf),Jm=function(M,R){var W=Oo.fromTable(M);return Of(W,R).bind(function(J){var se=J[J.length-1],ce=J[0].row,we=se.row+se.rowspan;return function(){var Ie=an(W.all.slice(ce,we),function(ut){return Uc(ut).type}),He=Ur(Ie,"header"),Ye=Ur(Ie,"footer");if(He||Ye){var at=Ur(Ie,"body");return!He||at||Ye?He||at||!Ye?Ue.none():Ue.some("footer"):Ue.some("header")}return Ue.some("body")}()}).getOr("")},kc={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Ul=tinymce.util.Tools.resolve("tinymce.util.Tools"),jd=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],hy=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,hf=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,v0=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,ip=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,zf=function(M){return an(M,function(R){var W=R.text||R.title;return Db(R)?{text:W,items:zf(R.menu)}:{text:W,value:R.value}})},ap=function(M,R,W,J,se){return an(W,function(ce){var we,Ie,He,Ye,at=ce.text||ce.title;return Db(ce)?{type:"nestedmenuitem",text:at,getSubmenuItems:function(){return ap(M,R,ce.menu,J,se)}}:{text:at,type:"togglemenuitem",onAction:function(){return se(ce.value)},onSetup:(we=M,Ie=R,He=J,Ye=ce.value,function(ut){function st(){function zt(ft){return we.formatter.match(He,{value:Ye},ft.dom,ht)}var Xt=Bg(Ie);ht?(ut.setActive(!ho(Xt,zt)),Mt.set(we.formatter.formatChanged(He,function(ft){return ut.setActive(!ft)},!0))):(ut.setActive(Ce(Xt,zt)),Mt.set(we.formatter.formatChanged(He,ut.setActive,!1,{value:Ye})))}var Mt=Xc(function(zt){return zt.unbind()}),ht=!On(Ye);return we.initialized?st():we.on("init",st),Mt.clear})}})},fc=function(M){return nn(M,function(R){return Db(R)?[gr(gr({},R),{menu:fc(R.menu)})]:On(R.value)?[R]:[]})},y0=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:jd}],vd={normal:Pg(!1),ifTruthy:Pg(!0)},Qm=Kr(Nm,["left","center","right"],"align"),jo=Kr(Nm,["top","middle","bottom"],"valign"),hl=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],sp=function(M,R,W,J){if("TD"===R.tagName||"TH"===R.tagName)_n(W)?M.setStyle(R,W,J):M.setStyle(R,W);else if(R.children)for(var se=0;se<R.children.length;se++)sp(M,R.children[se],W,J)},sx={remove_similar:!0,inherit:!1},Ho=gr({selector:"td,th"},sx),Fb={tablecellbackgroundcolor:gr({styles:{backgroundColor:"%value"}},Ho),tablecellverticalalign:gr({styles:{"vertical-align":"%value"}},Ho),tablecellbordercolor:gr({styles:{borderColor:"%value"}},Ho),tablecellclass:gr({classes:["%value"]},Ho),tableclass:gr({selector:"table",classes:["%value"]},sx),tablecellborderstyle:gr({styles:{borderStyle:"%value"}},Ho),tablecellborderwidth:gr({styles:{borderWidth:"%value"}},Ho)},py=bs([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),yd=gr(gr({},py),{none:function(M){return py.none(M=void 0===M?void 0:M)}}),Wg=function(M,R,W,J,se){void 0===se&&(se=qr);var ce=1===J;if(!ce&&W<=0)return yd.first(M[0]);if(ce&&W>=M.length-1)return yd.last(M[M.length-1]);var we=W+J,Ie=M[we];return se(Ie)?yd.middle(R,Ie):Wg(M,R,we,J,se)},gy=function(M,R,W,J){return{start:M,soffset:R,finish:W,foffset:J}},Ff=bs([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),yu={before:Ff.before,on:Ff.on,after:Ff.after,cata:function(M,R,W,J){return M.fold(R,W,J)},getStart:function(M){return M.fold(cr,cr,cr)}},ev=bs([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Tl={domRange:ev.domRange,relative:ev.relative,exact:ev.exact,exactFromRange:function(M){return ev.exact(M.start,M.soffset,M.finish,M.foffset)},getWin:function(M){var R=M.match({domRange:function(W){return Dt.fromDom(W.startContainer)},relative:function(W,J){return yu.getStart(W)},exact:function(W,J,se,ce){return W}});return Dt.fromDom(qs(R).dom.defaultView)},range:gy},Gg=function(M,R){return M.selectNodeContents(R.dom)},Yd=bs([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function pf(M,R,W){return R>=M.left&&R<=M.right&&W>=M.top&&W<=M.bottom}function ps(M,R){return R-M.left<M.right-R}function gs(M,R,W){var J=M.dom.createRange();return J.selectNode(R.dom),J.collapse(W),J}function Vi(M,R,W){var J=M.dom.createRange();J.selectNode(R.dom);var se=ps(J.getBoundingClientRect(),W);return(!0===se?Op:Ep)(R).map(function(ce){return gs(M,ce,se)})}function qd(M,R,W){var J=ps(R.dom.getBoundingClientRect(),W);return Ue.some(gs(M,R,J))}function Ug(M,R){var W=$r(M);return"input"===W?yu.after(M):Ur(["br","img"],W)?0===R?yu.before(M):yu.after(M):yu.on(M,R)}function U_(M,R){var W=M.fold(yu.before,Ug,yu.after),J=R.fold(yu.before,Ug,yu.after);return Tl.relative(W,J)}function tv(M,R,W,J){var se=Ug(M,R),ce=Ug(W,J);return Tl.relative(se,ce)}function vy(M){return Ue.from(M.getSelection())}function nv(M,R){vy(M).each(function(W){W.removeAllRanges(),W.addRange(R)})}function Jp(M,R,W,J,se){nv(M,Za(M,R,W,J,se))}function jl(M,R){return Ab(M,R).match({ltr:function(W,J,se,ce){Jp(M,W,J,se,ce)},rtl:function(W,J,se,ce){vy(M).each(function(we){if(we.setBaseAndExtent)we.setBaseAndExtent(W.dom,J,se.dom,ce);else if(we.extend)try{He=se,Ye=ce,(Ie=we).collapse(W.dom,J),Ie.extend(He.dom,Ye)}catch{Jp(M,se,ce,W,J)}else Jp(M,se,ce,W,J);var Ie,He,Ye})}})}function b0(M,R,W,J,se){jl(M,tv(R,W,J,se))}function rv(M,R,W){jl(M,U_(R,W))}function x0(M){if(0<M.rangeCount){var R=M.getRangeAt(0),W=M.getRangeAt(M.rangeCount-1);return Ue.some(gy(Dt.fromDom(R.startContainer),R.startOffset,Dt.fromDom(W.endContainer),W.endOffset))}return Ue.none()}function ux(M){if(null===M.anchorNode||null===M.focusNode)return x0(M);var R,W,J,se,ce,we,Ie,He,Ye,at,ut,st=Dt.fromDom(M.anchorNode),Mt=Dt.fromDom(M.focusNode);return we=W=M.anchorOffset,Ie=J=Mt,He=se=M.focusOffset,(Ye=Ns(ce=R=st).dom.createRange()).setStart(ce.dom,we),Ye.setEnd(Ie.dom,He),at=Ye,ut=Sr(R,J)&&W===se,at.collapsed&&!ut?Ue.some(gy(st,M.anchorOffset,Mt,M.focusOffset)):x0(M)}function lx(M,R,W){nv(M,((W=void 0===W||W)?u0:ry)(M,R))}function jg(M){return vy(M).filter(function(R){return 0<R.rangeCount}).bind(ux).map(function(R){return Tl.exact(R.start,R.soffset,R.finish,R.foffset)})}function ai(M,R,W){return _y(M,R,(se=cd,ex(J=W,void 0).fold(function(){return yd.none(J)},function(ce){return Wg(ce.all,J,ce.index,1,se)})));var J,se}function Qp(M,R){var W=oy(M,R);return gy(Dt.fromDom(W.startContainer),W.startOffset,Dt.fromDom(W.endContainer),W.endOffset)}function Yg(M,R){return{item:M,mode:R}}function _0(M,R,W,J){return void 0===J&&(J=Eh),M.property().parent(R).map(function(se){return Yg(se,J)})}function cx(M){return function(R){return 0===M.property().children(R).length}}function ES(M,R){return px(Rh,M,cx(Rh),R)}function fx(M,R){return Wb(Rh,M,cx(Rh),R)}function aa(M){return lu(M,"tr")}function dx(M){return"br"===$r(M)}function Oh(M,R){return{left:M.left,top:M.top+R,right:M.right,bottom:M.bottom+R}}function or(M,R){return{left:M.left,top:M.top-R,right:M.right,bottom:M.bottom-R}}function eg(M,R,W){return{left:M.left+R,top:M.top+W,right:M.right+R,bottom:M.bottom+W}}function Vf(M){return{left:M.left,top:M.top,right:M.right,bottom:M.bottom}}function qg(M,R){return Ue.some(M.getRect(R))}function tg(M,R,W){return Tu(R)?qg(M,R).map(Vf):As(R)?(J=M,se=R,(0<=(ce=W)&&ce<Ed(se)?J.getRangedRect(se,ce,se,ce+1):0<ce?J.getRangedRect(se,ce-1,se,ce):Ue.none()).map(Vf)):Ue.none();var J,se,ce}function iv(M,R){return Tu(R)?qg(M,R).map(Vf):As(R)?M.getRangedRect(R,0,R,Ed(R)).map(Vf):Ue.none()}function Jr(M,R,W){return Qt(function(J,se){return se(J)},It,R,Fd,void 0).fold(Yo,function(J){return iv(M,J).exists(function(se){return(ce=W).left<(we=se).left||Math.abs(we.right-ce.left)<1||ce.left>we.right;var ce,we})})}function hx(M,R,W){var J,se=M.move(W,5),ce=bd(R,M,W,se,100).getOr(se),we=ce,Ie=R;return((J=M).point(we)>Ie.getInnerHeight()?Ue.some(J.point(we)-Ie.getInnerHeight()):J.point(we)<0?Ue.some(-J.point(we)):Ue.none()).fold(function(){return R.situsFromPoint(ce.left,M.point(ce))},function(He){return R.scrollBy(0,He),R.situsFromPoint(ce.left,M.point(ce)-He)})}function yy(M,R,W,J,se){return lu(J,"td,th",R).bind(function(ce){return lu(ce,"table",R).bind(function(we){return at=we,It(se,function(ht){return Gr(ht).exists(function(zt){return Sr(zt,at)})},void 0).isSome()?(Ie=ut=M,He=st=R,Ye=Mt=W,Ie.getSelection().bind(function(ht){return function ov(M,R,W,J){var se,ce,we,Ie,He,Ye,at;return(dx(R)?(se=M,(we=J).traverse(ce=R).orThunk(function(){return $g(ce,we.gather,se)}).map(we.relative)):(Ie=M,He=J,ls(Ye=R,at=W).filter(dx).orThunk(function(){return ls(Ye,at-1).filter(dx)}).bind(function(ut){return He.traverse(ut).fold(function(){return $g(ut,He.gather,Ie).map(He.relative)},function(st){return Gr(Mt=st).bind(function(ht){var zt=Bs(ht);return Vr(zt,Mt).map(function(Xt){return{parent:ht,children:zt,element:Mt,index:Xt}})}).map(function(ht){return yu.on(ht.parent,ht.index)});var Mt})}))).map(function(ut){return{start:ut,finish:ut}})}(He,ht.finish,ht.foffset,Ye).fold(function(){return Ue.some(Em(ht.finish,ht.foffset))},function(zt){var Xt=Ie.fromSitus(zt),ft=cv.verify(Ie,ht.finish,ht.foffset,Xt.finish,Xt.foffset,Ye.failure,He);return cv.cata(ft,function(Pt){return Ue.none()},function(){return Ue.none()},function(Pt){return Ue.some(Em(Pt,0))},function(Pt){return Ue.some(Em(Pt,Ed(Pt)))})})}).bind(function(ht){return fv(ut,st,ht.element,ht.offset,Mt,20).map(ut.fromSitus)}).bind(function(ht){return lu(ht.finish,"td,th",R).map(function(zt){return{start:ce,finish:zt,range:ht}})})):Ue.none();var Ie,He,Ye,at,ut,st,Mt})})}function by(M,R,W,J,se,ce){return gn().browser.isIE()?Ue.none():ce(J,R).orThunk(function(){return yy(M,R,W,J,se).map(function(we){var Ie=we.range;return Zd(Ue.some(Kg(Ie.start,Ie.soffset,Ie.finish,Ie.foffset)),!0)})})}function Vb(M,R){return lu(M,"tr",R).bind(function(W){return lu(W,"table",R).bind(function(J){var se=wa(J,"tr");return Sr(W,se[0])?px(Rh,J,function(ce){return Ep(ce).isSome()},R).map(function(ce){var we=Ed(ce);return Zd(Ue.some(Kg(ce,we,ce,we)),!0)}):Ue.none()})})}function av(M,R){return lu(M,"tr",R).bind(function(W){return lu(W,"table",R).bind(function(J){var se=wa(J,"tr");return Sr(W,se[se.length-1])?Wb(Rh,J,function(ce){return Op(ce).isSome()},R).map(function(ce){return Zd(Ue.some(Kg(ce,0,ce,0)),!0)}):Ue.none()})})}function xy(M,R,W,J,se,ce,we){return yy(M,W,J,se,ce).bind(function(Ie){return Sy(R,W,Ie.start,Ie.finish,we)})}function ng(M,R){return lu(M,"td,th",R)}function rg(M){return function(R){return R===M}}function Xg(M){return 37<=M&&M<=40}function Zg(M){return{elementFromPoint:function(R,W){return Dt.fromPoint(Dt.fromDom(M.document),R,W)},getRect:function(R){return R.dom.getBoundingClientRect()},getRangedRect:function(R,W,J,se){var ce,we,Ie,He=Tl.exact(R,W,J,se);return 0<(we=0<(Ie=(ce=oy(M,He)).getClientRects()).length?Ie[0]:ce.getBoundingClientRect()).width||0<we.height?Ue.some(we).map(l0):Ue.none()},getSelection:function(){return jg(M).map(function(R){return Qp(M,R)})},fromSitus:function(R){var W=Tl.relative(R.start,R.finish);return Qp(M,W)},situsFromPoint:function(R,W){return J=R,se=W,ce=Dt.fromDom(M.document),Xd(ce,J,se).map(function(we){return gy(Dt.fromDom(we.startContainer),we.startOffset,Dt.fromDom(we.endContainer),we.endOffset)}).map(function(we){return wy(we.start,we.soffset,we.finish,we.foffset)});var J,se,ce},clearSelection:function(){vy(M).each(function(R){return R.removeAllRanges()})},collapseSelection:function(R){void 0===R&&(R=!1),jg(M).each(function(W){return W.fold(function(J){return J.collapse(R)},function(J,se){var ce=R?J:se;rv(M,ce,ce)},function(J,se,ce,we){var Ie=R?J:ce,He=R?se:we;b0(M,Ie,He,Ie,He)})})},setSelection:function(R){b0(M,R.start,R.soffset,R.finish,R.foffset)},setRelativeSelection:function(R,W){rv(M,R,W)},selectNode:function(R){lx(M,R,!1)},selectContents:function(R){lx(M,R)},getInnerHeight:function(){return M.innerHeight},getScrollY:function(){var R=Dt.fromDom(M.document),W=void 0!==R?R.dom:document;return Un(W.body.scrollLeft||W.documentElement.scrollLeft,W.body.scrollTop||W.documentElement.scrollTop).top},scrollBy:function(R,W){var J,se=R,ce=W,we=Dt.fromDom(M.document);(J=(void 0!==we?we.dom:document).defaultView)&&J.scrollBy(se,ce)}}}function sv(M,R){return{rows:M,cols:R}}function Tc(M){return!1===vh(Dt.fromDom(M.target),"ephox-snooker-resizer-bar")}function Eh(M,R,W,J){return void 0===J&&(J=lv),W.sibling(M,R).map(function(se){return Yg(se,J)})}var bu=function(M,R,W,J){return As(R)?(ce=R,we=W,Ie=J,(He=(se=M).dom.createRange()).selectNode(ce.dom),De(He.getClientRects(),function(ht){return pf(ht,we,Ie)?Ue.some(ht):Ue.none()}).map(function(ht){return function my(M,R,W,J,se){function ce(He){var Ye=M.dom.createRange();return Ye.setStart(R.dom,He),Ye.collapse(!0),Ye}var we=Aa(R).length,Ie=function(He,Ye,at,ut){if(0===ut)return 0;if(He===at)return ut-1;for(var st=at,Mt=1;Mt<ut;Mt++){var ht=ce(Mt).getBoundingClientRect(),zt=Math.abs(He-ht.left);if(Ye<=ht.bottom){if(Ye<ht.top||st<zt)return Mt-1;st=zt}}return 0}(W,J,se.right,we);return ce(Ie)}(se,ce,we,Ie,ht)})):(at=R,ut=W,st=J,Mt=(Ye=M).dom.createRange(),De(Bs(at),function(ht){return Mt.selectNode(ht.dom),pf(Mt.getBoundingClientRect(),ut,st)?bu(Ye,ht,ut,st):Ue.none()}));var se,ce,we,Ie,He,Ye,at,ut,st,Mt},Xd=document.caretPositionFromPoint?function(M,R,W){var J,se;return Ue.from(null===(se=(J=M.dom).caretPositionFromPoint)||void 0===se?void 0:se.call(J,R,W)).bind(function(ce){if(null===ce.offsetNode)return Ue.none();var we=M.dom.createRange();return we.setStart(ce.offsetNode,ce.offset),we.collapse(),Ue.some(we)})}:document.caretRangeFromPoint?function(M,R,W){var J,se;return Ue.from(null===(se=(J=M.dom).caretRangeFromPoint)||void 0===se?void 0:se.call(J,R,W))}:function(M,R,W){return Dt.fromPoint(M,R,W).bind(function(J){function se(){return ce=M,Ie=R,(0===Bs(we=J).length?qd:Vi)(ce,we,Ie);var ce,we,Ie}return 0===Bs(J).length?se():function(ce,we,Ie,He){var Ye=ce.dom.createRange();Ye.selectNode(we.dom);var at=Ye.getBoundingClientRect();return function(ut,st,Mt,ht){var zt=ut.dom.createRange();zt.selectNode(st.dom);var Xt=zt.getBoundingClientRect(),ft=Math.max(Xt.left,Math.min(Xt.right,Mt)),Pt=Math.max(Xt.top,Math.min(Xt.bottom,ht));return bu(ut,st,ft,Pt)}(ce,we,Math.max(at.left,Math.min(at.right,Ie)),Math.max(at.top,Math.min(at.bottom,He)))}(M,J,R,W).orThunk(se)})},Ph=tinymce.util.Tools.resolve("tinymce.util.VK"),_y=function(M,R,W){return W.fold(Ue.none,Ue.none,function(J,se){return Op(se).map(function(ce){return at=Tl.exact(ce,0,ce,0),He=Tl.getWin(Ie=at).dom,Ye=Ie.match({domRange:function(ut){var st=Dt.fromDom(ut.startContainer),Mt=Dt.fromDom(ut.endContainer);return tv(st,ut.startOffset,Mt,ut.endOffset)},relative:U_,exact:tv}),Ab(He,Ye).match({ltr:we,rtl:we});function we(ut,st,Mt,ht){return Za(He,ut,st,Mt,ht)}var Ie,He,Ye,at})},function(J){return M.execCommand("mceTableInsertRowAfter"),ai(M,R,J)})},uv=["table","li","dl"],Zd=function(M,R){return{selection:M,kill:R}},wy=function(M,R,W,J){return{start:yu.on(M,R),finish:yu.on(W,J)}},Kg=wy,Sy=function(M,R,W,J,se){return Sr(W,J)?Ue.none():du(W,J,R).bind(function(ce){var we=ce.boxes.getOr([]);return 1<we.length?(se(M,we,ce.start,ce.finish),Ue.some(Zd(Ue.some(Kg(W,0,W,Ed(W))),!0))):Ue.none()})},lv=function(M,R,W,J){void 0===J&&(J=lv);var se=M.property().children(R);return W.first(se).map(function(ce){return Yg(ce,J)})},RS=[{current:_0,next:Eh,fallback:Ue.none()},{current:Eh,next:lv,fallback:Ue.some(_0)},{current:lv,next:lv,fallback:Ue.some(Eh)}],Hb=function(M,R,W,J,se){return Ir(se=void 0===se?RS:se,function(ce){return ce.current===W}).bind(function(ce){return ce.current(M,R,J,ce.next).orThunk(function(){return ce.fallback.bind(function(we){return Hb(M,R,we,J)})})})},ti=function(M,R,W,J,se,ce){return Hb(M,R,J,se).bind(function(we){return ce(we.item)?Ue.none():W(we.item)?Ue.some(we.item):ti(M,we.item,W,we.mode,se,ce)})},px=function(M,R,W,J){return ti(M,R,W,Eh,{sibling:function(se,ce){return se.query().prevSibling(ce)},first:function(se){return 0<se.length?Ue.some(se[se.length-1]):Ue.none()}},J)},Wb=function(M,R,W,J){return ti(M,R,W,Eh,{sibling:function(se,ce){return se.query().nextSibling(ce)},first:function(se){return 0<se.length?Ue.some(se[0]):Ue.none()}},J)},Rh=Dm(),Cy=bs([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),cv=gr(gr({},Cy),{verify:function(M,R,W,J,se,ce,we){return lu(J,"td,th",we).bind(function(Ie){return lu(R,"td,th",we).map(function(He){return Sr(Ie,He)?Sr(J,Ie)&&Ed(Ie)===se?ce(He):Cy.none("in same cell"):qu(aa,[Ie,He]).fold(function(){return at=Ie,ut=(Ye=M).getRect(He),(st=Ye.getRect(at)).right>ut.left&&st.left<ut.right?Cy.success():ce(He);var Ye,at,ut,st},function(Ye){return ce(He)})})}).getOr(Cy.none("default"))},cata:function(M,R,W,J,se){return M.fold(R,W,J,se)}}),Vr=function(M,R){return Cu(M,Kr(Sr,R))},$g=function(M,R,W){return R(M,W).bind(function(J){return As(J)&&0===Aa(J).trim().length?$g(J,R,W):Ue.some(J)})},fi=bs([{none:[]},{retry:["caret"]}]),j_={point:function(M){return M.bottom},adjuster:function(M,R,W,J,se){var ce=Oh(se,5);return Math.abs(W.bottom-J.bottom)<1||W.top>se.bottom?fi.retry(ce):W.top===se.bottom?fi.retry(Oh(se,1)):Jr(M,R,se)?fi.retry(eg(ce,5,0)):fi.none()},move:Oh,gather:fx},bd=function(M,R,W,J,se){return 0===se?Ue.some(J):(we=M,Ie=J.left,He=R.point(J),we.elementFromPoint(Ie,He).filter(function(Ye){return"table"===$r(Ye)}).isSome()?(ce=se-1,bd(M,R,W,R.move(J,5),ce)):M.situsFromPoint(J.left,R.point(J)).bind(function(Ye){return Ye.start.fold(Ue.none,function(at){return iv(M,at).bind(function(ut){return R.adjuster(M,at,ut,W,J).fold(Ue.none,function(st){return bd(M,R,W,st,se-1)})}).orThunk(function(){return Ue.some(J)})},Ue.none)}));var ce,we,Ie,He},pl={tryUp:Kr(hx,{point:function(M){return M.top},adjuster:function(M,R,W,J,se){var ce=or(se,5);return Math.abs(W.top-J.top)<1||W.bottom<se.top?fi.retry(ce):W.bottom===se.top?fi.retry(or(se,1)):Jr(M,R,se)?fi.retry(eg(ce,5,0)):fi.none()},move:or,gather:ES}),tryDown:Kr(hx,j_),ieTryUp:function(M,R){return M.situsFromPoint(R.left,R.top-5)},ieTryDown:function(M,R){return M.situsFromPoint(R.left,R.bottom+5)},getJumpSize:Gt(5)},fv=function(M,R,W,J,se,ce){return 0===ce?Ue.none():Qg(M,R,W,J,se).bind(function(we){var Ie=M.fromSitus(we),He=cv.verify(M,W,J,Ie.finish,Ie.foffset,se.failure,R);return cv.cata(He,function(){return Ue.none()},function(){return Ue.some(we)},function(Ye){return Sr(W,Ye)&&0===J?el(M,W,J,or,se):fv(M,R,Ye,0,se,ce-1)},function(Ye){return Sr(W,Ye)&&J===Ed(Ye)?el(M,W,J,Oh,se):fv(M,R,Ye,Ed(Ye),se,ce-1)})})},el=function(M,R,W,J,se){return tg(M,R,W).bind(function(ce){return Jg(M,se,J(ce,pl.getJumpSize()))})},Jg=function(M,R,W){var J=gn().browser;return J.isChrome()||J.isSafari()||J.isFirefox()||J.isEdge()?R.otherRetry(M,W):J.isIE()?R.ieRetry(M,W):Ue.none()},Qg=function(M,R,W,J,se){return tg(M,W,J).bind(function(ce){return Jg(M,se,ce)})},dv={traverse:Ds,gather:fx,relative:yu.before,otherRetry:pl.tryDown,ieRetry:pl.ieTryDown,failure:cv.failedDown},gf={traverse:Wa,gather:ES,relative:yu.before,otherRetry:pl.tryUp,ieRetry:pl.ieTryUp,failure:cv.failedUp},og=rg(38),Yl=rg(40),tl={isBackward:rg(37),isForward:rg(39)},hv={isBackward:rg(39),isForward:rg(37)},ig=tinymce.util.Tools.resolve("tinymce.Env");ke.add("table",function(M){var R,W,J,se,ce,we,Ie,He,Ye,at,ut,st,Mt=(R=function(){return Zu(M)},W=function(){return ff(gu(M),rc(M))},J=sc.selectedSelector,{get:function(){return ne(R(),J).fold(function(){return W().fold(ae,Me)},function(wt){return fe(wt)})}}),ht=function tm(M,R){function W(ft){return Mt.forall(function(Pt){return!Pt[ft]})}function J(){return Lf(gu(M),rc(M)).bind(function(ft){return xg(sa(ft),Lf(Dt.fromDom(M.selection.getEnd()),rc(M)).bind(sa),function(Pt,xn){return Sr(Pt,xn)?ht(ft)?Ue.some({element:wt=ft,mergable:Ue.none(),unmergable:Ue.none(),selection:[wt]}):Ue.some(ph(R,Pt,ft)):Ue.none();var wt}).bind(cr)})}function se(ft){return sa(ft.element).map(function(Pt){var xn=Oo.fromTable(Pt),wt=Jo(Of(xn,ft).getOr([]),function(Sn,$t){return $t.isLocked&&(Sn.onAny=!0,0===$t.column?Sn.onFirst=!0:$t.column+$t.colspan>=xn.grid.columns&&(Sn.onLast=!0)),Sn},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:qa(xn,ft).isSome(),unmergeable:wh(xn,ft).isSome(),locked:wt}})}function ce(){ut.set(Mu(J)()),Mt=ut.get().bind(se),ln(st.get(),function(ft){return ft()})}function we(ft){return ft(),st.set(st.get().concat([ft])),function(){st.set(Lt(st.get(),function(Pt){return Pt!==ft}))}}function Ie(ft,Pt){return we(function(){return ut.get().fold(function(){ft.setDisabled(!0)},function(xn){ft.setDisabled(Pt(xn))})})}function He(ft,Pt,xn){return we(function(){return ut.get().fold(function(){ft.setDisabled(!0),ft.setActive(!1)},function(wt){ft.setDisabled(Pt(wt)),ft.setActive(xn(wt))})})}function Ye(ft){return Mt.exists(function(Pt){return Pt.locked[ft]})}function at(ft,Pt){return function(xn){return He(xn,function(wt){return ht(wt.element)},function(){return M.queryCommandValue(ft)===Pt})}}var ut=$s(Ue.none()),st=$s([]),Mt=Ue.none(),ht=oa("caption"),zt=at("mceTableRowType","header"),Xt=at("mceTableColType","th");return M.on("NodeChange ExecCommand TableSelectorChange",ce),{onSetupTable:function(ft){return Ie(ft,function(Pt){return!1})},onSetupCellOrRow:function(ft){return Ie(ft,function(Pt){return ht(Pt.element)})},onSetupColumn:function(ft){return function(Pt){return Ie(Pt,function(xn){return ht(xn.element)||Ye(ft)})}},onSetupPasteable:function(ft){return function(Pt){return Ie(Pt,function(xn){return ht(xn.element)||ft().isNone()})}},onSetupPasteableColumn:function(ft,Pt){return function(xn){return Ie(xn,function(wt){return ht(wt.element)||ft().isNone()||Ye(Pt)})}},onSetupMergeable:function(ft){return Ie(ft,function(Pt){return W("mergeable")})},onSetupUnmergeable:function(ft){return Ie(ft,function(Pt){return W("unmergeable")})},resetTargets:ce,onSetupTableWithCaption:function(ft){return He(ft,Yo,function(Pt){return sa(Pt.element,rc(M)).exists(function(xn){return wp(xn,"caption").isSome()})})},onSetupTableRowHeaders:zt,onSetupTableColumnHeaders:Xt,targets:ut.get}}(M,Mt),zt=function R_(M){function R(Ye){return"TABLE"===Ye.nodeName}function W(Ye){return Cb(M,Ye)}function J(){return(ya(M)?Im:Wc)()}var se,ce,we=Ue.none(),Ie=Ue.none(),He=Ue.none();return M.on("init",function(){var Ye,at,ut,st,Mt,ht,zt,Xt,ft,Pt,xn,wt,Sn,$t,Er=(at=Hp,(Ye=M).inline?(ht=Zu(Ye),Rl(Xt=Dt.fromTag("div"),{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),oo(Rc(Dt.fromDom(document)),Xt),zt=at,{parent:Gt(Xt),view:Gt(ht),origin:Gt(Un(0,0)),isResizable:zt}):pd(Dt.fromDom(Ye.getDoc()),at));He=Ue.some(Er),Mt=M.getParam("object_resizing",!0),(_n(Mt)?"table"===Mt:Mt)&&M.getParam("table_resize_bars",!0,"boolean")&&(ut=J(),ft=ut,Pt=W,xn=fr,wt=Co,Sn=function If(M){function R(ft,Pt){return Ue.from(Xs(ft,Pt))}var W,J,se,ce,we,Ie,He=(ce=hs({drag:ci(["xDelta","yDelta","target"])}),we=Ue.none(),(Ie={mutate:function(ft,Pt){se.trigger.drag(ft,Pt)},events:(se=hs({drag:ci(["xDelta","yDelta"])})).registry}).events.drag.bind(function(ft){we.each(function(Pt){ce.trigger.drag(ft.xDelta,ft.yDelta,Pt)})}),{assign:function(ft){we=Ue.some(ft)},get:function(){return we},mutate:Ie.mutate,events:ce.registry}),Ye=(J=void 0!==(W={}).mode?W.mode:Fg,function(ft,Pt,xn){function wt(){ri.stop(),Lr.isOn()&&(Lr.off(),Tn.trigger.stop())}var Sn,$t,Er=!1,Tn=hs({start:ci([]),stop:ci([])}),Lr=function Zh(){var M,R,W={onEvent:zn,reset:zn,events:hs({move:ci(["info"])}).registry},J=(M=Ue.none(),{onEvent:function(ce,we){we.extract(ce).each(function(Ie){var He=we,Ye=Ie,at=M.map(function(ut){return He.compare(ut,Ye)});M=Ue.some(Ye),at.each(function(ut){R.trigger.move(ut)})})},reset:function(){M=Ue.none()},events:(R=hs({move:ci(["info"])})).registry}),se=W;return{on:function(){se.reset(),se=J},off:function(){se.reset(),se=W},isOn:function(){return se===J},onEvent:function(ce,we){se.onEvent(ce,we)},events:J.events}}(),Qr=(Sn=wt,$t=null,{cancel:io,throttle:function(){for(var Do=[],si=0;si<arguments.length;si++)Do[si]=arguments[si];io(),$t=setTimeout(function(){$t=null,Sn.apply(null,Do)},200)}});function io(){Bn($t)||(clearTimeout($t),$t=null)}function Po(Do){return function(){for(var si=[],Hi=0;Hi<arguments.length;Hi++)si[Hi]=arguments[Hi];Er&&Do.apply(null,si)}}Lr.events.move.bind(function(Do){Pt.mutate(ft,Do.info)});var ri=Pt.sink(Nf({forceDrop:wt,drop:Po(wt),move:Po(function(Do){Qr.cancel(),Lr.onEvent(Do,Pt)}),delayDrop:Po(Qr.throttle)}),xn);return{element:ri.element,go:function(Do){ri.start(Do),Lr.on(),Tn.trigger.start()},on:function(){Er=!0},off:function(){Er=!1},destroy:function(){ri.destroy()},events:Tn.registry}}(He,J,W)),at=Ue.none();function ut(ft,Pt){return Id(ft,Pt)-Lc(ft,"data-initial-"+Pt,0)}function st(ft,Pt){Xt.trigger.startAdjust(),He.assign(ft),cs(ft,"data-initial-"+Pt,Id(ft,Pt)),mh(ft,Bf),zs(ft,"opacity","0.2"),Ye.go(M.parent())}function Mt(ft){return Sr(ft,M.view())}He.events.drag.bind(function(ft){R(ft.target,"data-row").each(function(Pt){var xn=Id(ft.target,"top");zs(ft.target,"top",xn+ft.yDelta+"px")}),R(ft.target,"data-column").each(function(Pt){var xn=Id(ft.target,"left");zs(ft.target,"left",xn+ft.xDelta+"px")})}),Ye.events.stop.bind(function(){He.get().each(function(ft){at.each(function(Pt){R(ft,"data-row").each(function(xn){var wt=ut(ft,"top");Ia(ft,"data-initial-top"),Xt.trigger.adjustHeight(Pt,wt,parseInt(xn,10))}),R(ft,"data-column").each(function(xn){var wt=ut(ft,"left");Ia(ft,"data-initial-left"),Xt.trigger.adjustWidth(Pt,wt,parseInt(xn,10))}),Bp(M,Pt)})})});var ht=Hs(M.parent(),"mousedown",function(ft){vh(ft.target,d0)&&st(ft.target,"top"),vh(ft.target,Um)&&st(ft.target,"left")}),zt=Hs(M.view(),"mouseover",function(ft){lu(ft.target,"table",Mt).filter(cd).fold(function(){Fr(ft.target)&&yh(M)},function(Pt){at=Ue.some(Pt),Bp(M,Pt)})}),Xt=hs({adjustHeight:ci(["table","delta","row"]),adjustWidth:ci(["table","delta","column"]),startAdjust:ci([])});return{destroy:function(){ht.unbind(),zt.unbind(),Ye.destroy(),yh(M)},refresh:function(ft){Bp(M,ft)},on:Ye.on,off:Ye.off,hideBars:Kr(zp,M),showBars:Kr(O_,M),events:Xt.registry}}(Er),$t=hs({beforeResize:ci(["table","type"]),afterResize:ci(["table","type"]),startDrag:ci([])}),Sn.events.adjustHeight.bind(function(Tn){var Lr=Tn.table;$t.trigger.beforeResize(Lr,"row");var Qr,io,Po,ri,Do,si,Hi,Ea,tr,da=xn.delta(Tn.delta,Lr);io=da,Po=Tn.row,ri=xn,Ea=an(Jy(Hi=Oo.fromTable(Qr=Lr),Qr,ri,Fl,function(di){return di.getOrThunk(Ar)}),function(di,Wi){return Po===Wi?Math.max(io+di,Ar()):di}),Do=Ea,tr=an(Oo.justCells(Hi),function(di){var Wi=xb(di.row,di.row+di.rowspan,Do);return{element:di.element,height:Wi,rowspan:di.rowspan}}),ln((si=Ea,an(Hi.all,function(di,Wi){return{element:di.element,height:si[Wi]}})),function(di){Rr(di.element,di.height)}),ln(tr,function(di){Rr(di.element,di.height)}),Rr(Qr,Yn(Ea,function(di,Wi){return di+Wi},0)),$t.trigger.afterResize(Lr,"row")}),Sn.events.startAdjust.bind(function(Tn){$t.trigger.startDrag()}),Sn.events.adjustWidth.bind(function(Tn){var Lr=Tn.table;$t.trigger.beforeResize(Lr,"col");var Qr=wt.delta(Tn.delta,Lr),io=Pt(Lr);ul(Lr,Qr,Tn.column,ft,io),$t.trigger.afterResize(Lr,"col")}),(st={on:Sn.on,off:Sn.off,hideBars:Sn.hideBars,showBars:Sn.showBars,destroy:Sn.destroy,events:$t.registry}).on(),st.events.startDrag.bind(function(Tn){we=Ue.some(M.selection.getRng())}),st.events.beforeResize.bind(function(Tn){var Lr,Qr=Tn.table.dom,io=M,Po=ud(Lr=Qr),ri=Vc(Qr);io.fire("ObjectResizeStart",{target:Lr,width:Po,height:ri,origin:Ym+Tn.type})}),st.events.afterResize.bind(function(Tn){var Lr,Qr,io,Po,Do=Tn.table,si=Do.dom;ld(Do),we.each(function(Hi){M.selection.setRng(Hi),M.focus()}),Lr=M,io=ud(Qr=si),Po=Vc(si),Lr.fire("ObjectResized",{target:Qr,width:io,height:Po,origin:Ym+Tn.type}),M.undoManager.add()}),Ie=Ue.some(st))}),M.on("ObjectResizeStart",function(Ye){var at,ut,st,Mt,ht=Ye.target;R(ht)&&(at=Dt.fromDom(ht),ln(M.dom.select(".mce-clonedresizable"),function(zt){M.dom.addClass(zt,"mce-"+Jh(M)+"-columns")}),!Ib(at)&&jm(M)?Zc(at):!Ah(at)&&Cg(M)&&Zp(at),c0(at)&&Ot(Ye.origin,Ym)&&Zp(at),se=Ye.width,ce=Xp(M)?"":(Mt=(ut=M).dom.getStyle(st=ht,"width")||ut.dom.getAttrib(st,"width"),Ue.from(Mt).filter(On).getOr("")))}),M.on("ObjectResized",function(Ye){var at,ut,st,Mt,ht,zt,Xt,ft,Pt,xn,wt=Ye.target;R(wt)&&(at=Dt.fromDom(wt),Ot(ut=Ye.origin,"corner-")&&(st=at,Mt=Ye.width,xn=Ht(ut,"e"),""===ce&&Zp(st),Mt!==se&&""!==ce?(zs(st,"width",ce),ht=J(),zt=W(st),Xt=ya(M)||xn?gh(st).columns-1:0,ul(st,Mt-se,Xt,ht,zt)):/^(\d+(\.\d+)?)%$/.test(ce)&&zs(st,"width",Mt*parseFloat(ce.replace("%",""))/se+"%"),/^(\d+(\.\d+)?)px$/.test(ce)&&(Pt=Oo.fromTable(ft=st),Oo.hasColumns(Pt)||ln(vc(ft),function(Sn){zs(Sn,"width",Du(Sn,"width")),Ia(Sn,"width")}))),ld(at),Gc(M,at.dom,uy))}),M.on("SwitchMode",function(){Ie.each(function(Ye){M.mode.isReadOnly()?Ye.hideBars():Ye.showBars()})}),{lazyResize:function(){return Ie},lazyWire:function(){return He.getOr(pd(Dt.fromDom(M.getBody()),Hp))},destroy:function(){Ie.each(function(Ye){Ye.destroy()}),He.each(function(Ye){M.inline&&vs(Ye.parent())})}}}(M),Xt=function em(M,R,W){var J=function PS(M,R,W){function J(Ie){Ia(Ie,M.selected),Ia(Ie,M.firstSelected),Ia(Ie,M.lastSelected)}function se(Ie){cs(Ie,M.selected,"1")}function ce(Ie){we(Ie),W()}function we(Ie){ln(wa(Ie,M.selectedSelector+","+M.firstSelectedSelector+","+M.lastSelectedSelector),J)}return{clearBeforeUpdate:we,clear:ce,selectRange:function(Ie,He,Ye,at){ce(Ie),ln(He,se),cs(Ye,M.firstSelected,"1"),cs(at,M.lastSelected,"1"),R(He,Ye,at)},selectedSelector:M.selectedSelector,firstSelectedSelector:M.firstSelectedSelector,lastSelectedSelector:M.lastSelectedSelector}}(sc,function(se,ce,we){W.targets().each(function(Ie){sa(ce).each(function(He){var Ye,at,ut,st=xh(M),Mt=qn(zn,Dt.fromDom(M.getDoc()),st),ht=(Ye=Ie,at=Mt,Of(ut=Oo.fromTable(He),Ye).map(function(zt){var Xt,ft,Pt=Bd(ut,at,!1);return{upOrLeftCells:nn(Wp(Pt.slice(0,(Xt=zt)[Xt.length-1].row+1)),function(xn){return an(xn.cells.slice(0,Xt[Xt.length-1].column+1),function(wt){return wt.element})}),downOrRightCells:nn(Wp(Pt.slice((ft=zt)[0].row+ft[0].rowspan-1,Pt.length)),function(xn){return an(xn.cells.slice(ft[0].column+ft[0].colspan-1,xn.cells.length),function(wt){return wt.element})})}}));M.fire("TableSelectionChange",{cells:se,start:ce,finish:we,otherCells:ht})})})},function(){M.fire("TableSelectionClear")});return M.on("init",function(se){var ce,we,Ie,He,Ye,at,ut,st,Mt,ht,zt,Xt,ft,Pt,xn,wt,Sn=M.getWin(),$t=Zu(M),Er=rc(M),Tn=(ce=Zg(Sn),{clearstate:(zt=ce,Xt=$t,ft=Er,Pt=J,xn=Ju(),(we={clearstate:wt=xn.clear,mousedown:function(tr){Pt.clear(Xt),ng(tr.target,ft).each(xn.set)},mouseover:function(tr){Po(tr)},mouseup:function(tr){Po(tr),wt()}}).clearstate),mousedown:we.mousedown,mouseover:we.mouseover,mouseup:we.mouseup}),Lr=(ht=Zg(Sn),{keydown:function(tr,da,di,Wi,Ws,mf){var Gs=tr.raw,Ms=Gs.which,Kd=!0===Gs.shiftKey;return od(ut,Mt.selectedSelector).fold(function(){return Xg(Ms)&&!Kd&&Mt.clearBeforeUpdate(ut),Yl(Ms)&&Kd?Kr(xy,ht,ut,st,dv,Wi,da,Mt.selectRange):og(Ms)&&Kd?Kr(xy,ht,ut,st,gf,Wi,da,Mt.selectRange):Yl(Ms)?Kr(by,ht,st,dv,Wi,da,av):og(Ms)?Kr(by,ht,st,gf,Wi,da,Vb):Ue.none},function(pv){function nm(xd){return function(){return De(xd,function(vf){return ql=ut,function Od(M,R,W,J,se){return ce=se,Ir(M,function(we){return un(we,ce)}).bind(function(we){return He=R,Ye=W,sa(Ie=we).bind(function(at){var ut=Yu(at),st=He,Mt=Ye;return Oo.findItem(ut,Ie,Sr).bind(function(ht){return Oo.getAt(ut,(0<st?ht.row+ht.rowspan-1:ht.row)+st,(0<Mt?ht.column+ht.colspan-1:ht.column)+Mt).map(function(ft){return ft.element})})}).bind(function(at){return st=J,Ga(ut=at,"table").bind(function(Mt){return lo(Mt,st).bind(function(ht){return du(ht,ut).bind(function(zt){return zt.boxes.map(function(Xt){return{boxes:Xt,start:zt.start,finish:zt.finish}})})})});var ut,st});var Ie,He,Ye});var ce}(pv,vf.rows,vf.cols,(Lh=Mt).firstSelectedSelector,Lh.lastSelectedSelector).map(function(Ps){return Lh.clearBeforeUpdate(ql),Lh.selectRange(ql,Ps.boxes,Ps.start,Ps.finish),Ps.boxes});var ql,Lh}).fold(function(){return hu(ut,Mt.firstSelectedSelector,Mt.lastSelectedSelector).map(function(vf){var up=Yl(Ms)||mf.isForward(Ms)?yu.after:yu.before;return ht.setRelativeSelection(yu.on(vf.first,0),up(vf.table)),Mt.clear(ut),Zd(Ue.none(),!0)})},function(vf){return Ue.some(Zd(Ue.none(),!0))})}}return Yl(Ms)&&Kd?nm([sv(1,0)]):og(Ms)&&Kd?nm([sv(-1,0)]):mf.isBackward(Ms)&&Kd?nm([sv(0,-1),sv(-1,0)]):mf.isForward(Ms)&&Kd?nm([sv(0,1),sv(1,0)]):Xg(Ms)&&!Kd?io:Ue.none})()},keyup:function(tr,da,di,Wi,Ws){return od(ut,Mt.selectedSelector).fold(function(){var mf,Gs,Ms,Kd,pv,nm=tr.raw;return!0===nm.shiftKey&&Xg(nm.which)?(mf=ut,Gs=st,pv=Mt.selectRange,Sr(Ms=da,Kd=Wi)&&di===Ws?Ue.none():lu(Ms,"td,th",Gs).bind(function(vf){return lu(Kd,"td,th",Gs).bind(function(up){return Sy(mf,Gs,vf,up,pv)})})):Ue.none()},Ue.none)}}),Qr=(Ie=ut=$t,He=st=Er,Ye=Mt=J,at=Zg(Sn),function(tr,da){Ye.clearBeforeUpdate(Ie),du(tr,da,He).each(function(di){var Wi=di.boxes.getOr([]);Ye.selectRange(Ie,Wi,di.start,di.finish),at.selectContents(da),at.collapseSelection()})});function io(){return Mt.clear(ut),Ue.none()}function Po(tr){xn.on(function(da){Pt.clearBeforeUpdate(Xt),ng(tr.target,ft).each(function(di){du(da,di,ft).each(function(Wi){var Ws,mf,Gs,Ms=Wi.boxes.getOr([]);1===Ms.length?(mf="false"===Lb(Ws=Ms[0]),Gs=Ql(af(tr.target),Ws,Sr),mf&&Gs&&(Pt.selectRange(Xt,Ms,Ws,Ws),zt.selectContents(Ws))):1<Ms.length&&(Pt.selectRange(Xt,Ms,Wi.start,Wi.finish),zt.selectContents(di))})})})}function ri(tr,da){!0===tr.raw.shiftKey&&(da.kill&&tr.kill(),da.selection.each(function(di){var Wi=Tl.relative(di.start,di.finish),Ws=oy(Sn,Wi);M.selection.setRng(Ws)}))}function Do(tr){return 0===tr.button}M.on("TableSelectorChange",function(tr){return Qr(tr.start,tr.finish)});var si,Hi,Ea=(si=$s(Dt.fromDom($t)),Hi=$s(0),{touchEnd:function(tr){var da,di,Wi=Dt.fromDom(tr.target);"td"!==$r(Wi)&&"th"!==$r(Wi)||(da=si.get(),di=Hi.get(),Sr(da,Wi)&&tr.timeStamp-di<300&&(tr.preventDefault(),Qr(Wi,Wi))),si.set(Wi),Hi.set(tr.timeStamp)}});M.on("dragstart",function(tr){Tn.clearstate()}),M.on("mousedown",function(tr){Do(tr)&&Tc(tr)&&Tn.mousedown(zg(tr))}),M.on("mouseover",function(tr){var da;(void 0===(da=tr).buttons||ig.browser.isEdge()&&0===da.buttons||0!=(1&da.buttons))&&Tc(tr)&&Tn.mouseover(zg(tr))}),M.on("mouseup",function(tr){Do(tr)&&Tc(tr)&&Tn.mouseup(zg(tr))}),M.on("touchend",Ea.touchEnd),M.on("keyup",function(tr){var da,di,Wi,Ws=zg(tr);Ws.raw.shiftKey&&Xg(Ws.raw.which)&&(da=M.selection.getRng(),di=Dt.fromDom(da.startContainer),Wi=Dt.fromDom(da.endContainer),Lr.keyup(Ws,di,da.startOffset,Wi,da.endOffset).each(function(mf){ri(Ws,mf)}))}),M.on("keydown",function(tr){var da=zg(tr);R().each(function(Gs){return Gs.hideBars()});var di=M.selection.getRng(),Wi=Dt.fromDom(di.startContainer),Ws=Dt.fromDom(di.endContainer),mf=$y(tl,hv)(Dt.fromDom(M.selection.getStart()));Lr.keydown(da,Wi,di.startOffset,Ws,di.endOffset,mf).each(function(Gs){ri(da,Gs)}),R().each(function(Gs){return Gs.showBars()})}),M.on("NodeChange",function(){var tr=M.selection;qu(sa,[Dt.fromDom(tr.getStart()),Dt.fromDom(tr.getEnd())]).fold(function(){return J.clear($t)},zn)})}),{clear:J.clear}}(M,zt.lazyResize,ht),ft=function L_(M,R,W){function J(Ie){return"table"===$r(Zu(Ie))}function se(Ie,He,Ye,at,ut){return function(st,Mt,ht){void 0===ht&&(ht=!1),ld(st);var zt=at(),Xt=Dt.fromDom(M.getDoc()),ft=qn(Ye,Xt,ce),Pt={sizing:Cb(M,st),resize:(Sb(M)?Wc:Im)(),section:function(xn){switch(bh(M)){case"section":return cy();case"sectionCells":return eu();case"cells":return Xm();default:return function(wt,Sn){switch(De(Oo.fromTable(wt).all,function(Er){var Tn=Uc(Er);return"header"===Tn.type?Ue.from(Tn.subType):Ue.none()}).getOr("section")){case"section":return sf();case"sectionCells":return Kv();case"cells":return $u()}}(xn)}}(st)};return He(st)?Ie(zt,st,Mt,ft,Pt).bind(function(xn){ln(xn.newRows,function($t){_s(M,$t.dom)}),ln(xn.newCells,function($t){Ku(M,$t.dom)});var wt,Sn=(wt=st,xn.cursor.fold(function(){return Yi(vc(wt)).filter(Fr).map(function($t){R.clear(wt);var Er=M.dom.createRng();return Er.selectNode($t.dom),M.selection.setRng(Er),cs($t,"data-mce-selected","1"),Er})},function($t){var Er=Cc(qm,$t),Tn=M.dom.createRng();return Tn.setStart(Er.element.dom,Er.offset),Tn.setEnd(Er.element.dom,Er.offset),M.selection.setRng(Tn),R.clear(wt),Ue.some(Tn)}));return Fr(st)&&(ld(st),ht||Gc(M,st.dom,ut)),Sn.map(function($t){return{rng:$t,effect:ut}})}):Ue.none()}}var ce=xh(M),we=Sb(M)?zn:_h;return{deleteRow:se(Km,function(Ie){return!1===J(M)||1<gh(Ie).rows},zn,W,Qs),deleteColumn:se(Zm,function(Ie){return!1===J(M)||1<gh(Ie).columns},zn,W,Qs),insertRowsBefore:se(Kp,qr,zn,W,Qs),insertRowsAfter:se(h0,qr,zn,W,Qs),insertColumnsBefore:se(Ud,qr,we,W,Qs),insertColumnsAfter:se(Mc,qr,we,W,Qs),mergeCells:se(as,qr,zn,W,Qs),unmergeCells:se($m,qr,zn,W,Qs),pasteColsBefore:se(ax,qr,zn,W,Qs),pasteColsAfter:se(g0,qr,zn,W,Qs),pasteRowsBefore:se(md,qr,zn,W,Qs),pasteRowsAfter:se(m0,qr,zn,W,Qs),pasteCells:se($p,qr,zn,W,H_),makeCellsHeader:se(ii,qr,zn,W,Qs),unmakeCellsHeader:se(mo,qr,zn,W,Qs),makeColumnsHeader:se(Hg,qr,zn,W,Qs),unmakeColumnsHeader:se(G_,qr,zn,W,Qs),makeRowsHeader:se(p0,qr,zn,W,Qs),makeRowsBody:se(ix,qr,zn,W,Qs),makeRowsFooter:se(Kc,qr,zn,W,Qs),getTableRowType:Jm,getTableCellType:Eg,getTableColType:kh}}(M,Xt,zt.lazyWire),Pt=(se=Ju(),ce=Ju(),{getRows:se.get,setRows:function(wt){wt.fold(se.clear,se.set),ce.clear()},clearRows:se.clear,getColumns:ce.get,setColumns:function(wt){wt.fold(ce.clear,ce.set),se.clear()},clearColumns:ce.clear});return function Q1(M,R,W,J,se){function ce(ht){return sa(ht,Mt)}function we(ht){return ff(gu(zt=M),rc(zt)).bind(function(Xt){return ce(Xt).map(function(ft){return ht(ft,Xt)})});var zt}function Ie(ht){M.focus()}function He(ht,zt){return void 0===zt&&(zt=!1),we(function(Xt,ft){var Pt=ph(J,Xt,ft);ht(Xt,Pt,zt).each(Ie)})}function Ye(){return we(function(ht,zt){var Xt,ft,Pt,xn=ph(J,ht,zt),wt=qn(zn,Dt.fromDom(M.getDoc()),Ue.none());return Xt=xn,ft=wt,Of(Pt=Oo.fromTable(ht),Xt).bind(function(Sn){var $t=Wp(nn(zi(Bd(Pt,ft,!1)).rows.slice(Sn[0].row,Sn[Sn.length-1].row+Sn[Sn.length-1].rowspan),function(Er){var Tn=Lt(Er.cells,function(Lr){return!Lr.isLocked});return 0<Tn.length?[gr(gr({},Er),{cells:Tn})]:[]}));return rl(0<$t.length,$t)}).map(function(Sn){return an(Sn,function($t){var Er=pu($t.element);return ln($t.cells,function(Tn){var Lr=es(Tn.element);Ma(Lr,"colspan",Tn.colspan,1),Ma(Lr,"rowspan",Tn.rowspan,1),oo(Er,Lr)}),Er})})})}function at(){return we(function(ht,zt){var Xt,ft;return Xt=ph(J,ht,zt),Yc(ft=Oo.fromTable(ht),Xt).map(function(xn){var wt,Sn,$t=xn[xn.length-1],Er=xn[0].column,Tn=$t.column+$t.colspan,Lr=function(io,Po,ri){if(Oo.hasColumns(io)){var Do=an(Lt(Oo.justColumns(io),function(Hi){return Hi.column>=Po&&Hi.column<ri}),function(Hi){var Ea=es(Hi.element);return Oi(Ea,"span",ri-Po),Ea}),si=Dt.fromTag("colgroup");return Wu(si,Do),[si]}return[]}(ft,Er,Tn),Qr=(wt=Er,Sn=Tn,an(ft.all,function(io){var Po=an(Lt(io.cells,function(Do){return Do.column>=wt&&Do.column<Sn}),function(Do){var si=es(Do.element);return Oi(si,"colspan",Sn-wt),si}),ri=Dt.fromTag("tr");return Wu(ri,Po),ri}));return wr(wr([],Lr,!0),Qr,!0)})})}function ut(ht,zt){return zt().each(function(Xt){var ft=an(Xt,es);we(function(Pt,xn){var wt,Sn,$t=yi(Dt.fromDom(M.getDoc())),Er=(wt=ft,Sn=$t,{selection:Rp(J),clipboard:wt,generators:Sn});ht(Pt,Er).each(Ie)})})}function st(ht){return function(zt,Xt){return Ts(Xt,"type").each(function(ft){He(ht(ft),Xt.no_events)})}}var Mt=rc(M);ki({mceTableSplitCells:function(){return He(R.unmergeCells)},mceTableMergeCells:function(){return He(R.mergeCells)},mceTableInsertRowBefore:function(){return He(R.insertRowsBefore)},mceTableInsertRowAfter:function(){return He(R.insertRowsAfter)},mceTableInsertColBefore:function(){return He(R.insertColumnsBefore)},mceTableInsertColAfter:function(){return He(R.insertColumnsAfter)},mceTableDeleteCol:function(){return He(R.deleteColumn)},mceTableDeleteRow:function(){return He(R.deleteRow)},mceTableCutCol:function(){return at().each(function(ht){se.setColumns(ht),He(R.deleteColumn)})},mceTableCutRow:function(){return Ye().each(function(ht){se.setRows(ht),He(R.deleteRow)})},mceTableCopyCol:function(){return at().each(function(ht){return se.setColumns(ht)})},mceTableCopyRow:function(){return Ye().each(function(ht){return se.setRows(ht)})},mceTablePasteColBefore:function(){return ut(R.pasteColsBefore,se.getColumns)},mceTablePasteColAfter:function(){return ut(R.pasteColsAfter,se.getColumns)},mceTablePasteRowBefore:function(){return ut(R.pasteRowsBefore,se.getRows)},mceTablePasteRowAfter:function(){return ut(R.pasteRowsAfter,se.getRows)},mceTableDelete:function(){return s0(M).each(function(ht){sa(ht,Mt).filter(wo(Mt)).each(function(zt){var Xt,ft=Dt.fromText("");wl(zt,ft),vs(zt),M.dom.isEmpty(M.getBody())?(M.setContent(""),M.selection.setCursorLocation()):((Xt=M.dom.createRng()).setStart(ft.dom,0),Xt.setEnd(ft.dom,0),M.selection.setRng(Xt),M.nodeChanged())})})},mceTableCellToggleClass:function(ht,zt){we(function(Xt){var ft=Bg(J),Pt=Ce(ft,function(xn){return M.formatter.match("tablecellclass",{value:zt},xn.dom)})?M.formatter.remove:M.formatter.apply;ln(ft,function(xn){return Pt("tablecellclass",{value:zt},xn.dom)}),Gc(M,Xt.dom,uy)})},mceTableToggleClass:function(ht,zt){we(function(Xt){M.formatter.toggle("tableclass",{value:zt},Xt.dom),Gc(M,Xt.dom,uy)})},mceTableToggleCaption:function(){s0(M).each(function(ht){sa(ht,Mt).each(function(zt){wp(zt,"caption").fold(function(){var Xt,ft,Pt=Dt.fromTag("caption");oo(Pt,Dt.fromText("Caption")),ft=Pt,ls(Xt=zt,0).fold(function(){oo(Xt,ft)},function(xn){Sa(xn,ft)}),M.selection.setCursorLocation(Pt.dom,0)},function(Xt){oa("caption")(ht)&&zo("td",zt).each(function(ft){return M.selection.setCursorLocation(ft.dom,0)}),vs(Xt)}),Gc(M,zt.dom,Qs)})})},mceTableSizingMode:function(ht,zt){return Xt=zt,s0(M).each(function(ft){Xp(M)||jm(M)||Cg(M)||sa(ft,Mt).each(function(Pt){"relative"!==Xt||Ah(Pt)?"fixed"!==Xt||Ib(Pt)?"responsive"!==Xt||c0(Pt)||df(Pt):Zc(Pt):Zp(Pt),ld(Pt),Gc(M,Pt.dom,Qs)})});var Xt},mceTableCellType:st(function(ht){return"th"===ht?R.makeCellsHeader:R.unmakeCellsHeader}),mceTableColType:st(function(ht){return"th"===ht?R.makeColumnsHeader:R.unmakeColumnsHeader}),mceTableRowType:st(function(ht){switch(ht){case"header":return R.makeRowsHeader;case"footer":return R.makeRowsFooter;default:return R.makeRowsBody}})},function(ht,zt){return M.addCommand(zt,ht)}),ki({mceTableProps:Kr(J1,M,!1),mceTableRowProps:Kr(Lg,M),mceTableCellProps:Kr(Dh,M,J)},function(ht,zt){return M.addCommand(zt,function(){return ht()})}),M.addCommand("mceInsertTable",function(ht,zt){jr(zt)&&0<so(zt).length?bi(M,zt.rows,zt.columns,zt.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):J1(M,!0)}),M.addCommand("mceTableApplyCellStyle",function(ht,zt){function Xt(xn){return"tablecell"+xn.toLowerCase().replace("-","")}var ft,Pt;!jr(zt)||0!==(ft=Bg(J)).length&&(function(xn){for(var wt in xn)if(eo.call(xn,wt))return;return 1}(Pt=ni(zt,function(xn,wt){return M.formatter.has(Xt(wt))&&_n(xn)}))||(ki(Pt,function(xn,wt){ln(ft,function(Sn){vd.normal(M,Sn.dom).setFormat(Xt(wt),xn)})}),ce(ft[0]).each(function(xn){return Gc(M,xn.dom,uy)})))})}(M,ft,0,Mt,Pt),at=ft,ut=Mt,st=rc(Ye=M),ki({mceTableRowType:function(){return xn(at.getTableRowType)},mceTableCellType:function(){return xn(at.getTableCellType)},mceTableColType:function(){return xn(at.getTableColType)}},function(wt,Sn){return Ye.addQueryValueHandler(Sn,wt)}),function Xh(M,R,W){M.on("BeforeGetContent",function(J){!0===J.selection&&ga(R.get(),zn,function(se){J.preventDefault(),sa(se[0]).map(function(ce){var we=function Y1(M,R){function W(Sn){return un(Sn.element,R)}var J,ce,we,Ie,He,Ye,at,ut,st,Mt,ht,zt=es(M),Xt=Mf(zt),ft=gd(M),Pt=Oo.generate(Xt),xn=(J=W,ce=Pt.grid.rows,we=Pt.grid.columns,He=Ie=0,Ye=[],at=[],ki(Pt.access,function(Sn){var $t,Er,Tn,Lr;Ye.push(Sn),J(Sn)&&(at.push(Sn),Er=($t=Sn.row)+Sn.rowspan-1,Lr=(Tn=Sn.column)+Sn.colspan-1,$t<ce?ce=$t:Ie<Er&&(Ie=Er),Tn<we?we=Tn:He<Lr&&(He=Lr))}),{minRow:ce,minCol:we,maxRow:Ie,maxCol:He,allCells:Ye,selectedCells:at}),wt="th:not("+R+"),td:not("+R+")";return ln(ju(zt,"th,td",function(Sn){return un(Sn,wt)}),vs),function(Sn,$t,Er,Tn){for(var Lr,Qr,io,Po=$t.grid.columns,ri=$t.grid.rows,Do=0;Do<ri;Do++)for(var si=!1,Hi=0;Hi<Po;Hi++)Do<Er.minRow||Do>Er.maxRow||Hi<Er.minCol||Hi>Er.maxCol||(Oo.getAt($t,Do,Hi).filter(Tn).isNone()?(Lr=si,Qr=Sn[Do].element,io=Dt.fromTag("td"),oo(io,Dt.fromTag("br")),(Lr?oo:Qa)(Qr,io)):si=!0)}(Xt,Pt,xn,W),ut=zt,st=xn,Mt=Pt,ht=function(Sn,$t,Er,Tn){if(0===Tn.minCol&&$t.grid.columns===Tn.maxCol+1)return 0;var Lr=Ip($t,Sn,Er),Qr=Jo(Lr,function(Po,ri){return Po+ri},0),io=Jo(Lr.slice(Tn.minCol,Tn.maxCol+1),function(Po,ri){return Po+ri},0)/Qr*Er.pixelWidth()-Er.pixelWidth();return Er.getCellDelta(io)}(M,Oo.fromTable(M),ft,xn),ki(Mt.columns,function(Sn){(Sn.column<st.minCol||Sn.column>st.maxCol)&&vs(Sn.element)}),ln(Lt(_g(ut,"tr"),function(Sn){return 0===Sn.dom.childElementCount}),vs),st.minCol!==st.maxCol&&st.minRow!==st.maxRow||ln(_g(ut,"th,td"),function(Sn){Ia(Sn,"rowspan"),Ia(Sn,"colspan")}),Ia(ut,os),Ia(ut,"data-snooker-col-series"),gd(ut).adjustTableWidth(ht),zt}(ce,"[data-mce-selected]");return ld(we),[we]}).each(function(ce){var we;J.content="text"===J.format?an(ce,function(Ie){return Ie.dom.innerText}).join(""):(we=M,an(ce,function(Ie){return we.selection.serializer.serialize(Ie.dom,{})}).join(""))})},zn)}),M.on("BeforeSetContent",function(J){!0===J.selection&&!0===J.paste&&Yi(Bg(R)).each(function(se){sa(se).each(function(ce){var we,Ie,He,at=Lt((we=J.content,(Ie=document.createElement("div")).innerHTML=we,Bs(Dt.fromDom(Ie))),function(st){return"meta"!==$r(st)}),ut=oa("table");1===at.length&&ut(at[0])&&(J.preventDefault(),He=yi(Dt.fromDom(M.getDoc())),W.pasteCells(ce,{element:se,clipboard:at[0],generators:He}).each(function(){M.focus()}))})})})}(M,Mt,ft),function(wt,Sn,$t,Er){function Tn(Ea){return function(){return wt.execCommand(Ea)}}function Lr(Ea){wt.execCommand("mceInsertTable",!1,{rows:Ea.numRows,columns:Ea.numColumns})}var Qr={text:"Table properties",onSetup:$t.onSetupTable,onAction:Tn("mceTableProps")},io={text:"Delete table",icon:"table-delete-table",onSetup:$t.onSetupTable,onAction:Tn("mceTableDelete")};wt.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:Tn("mceTableInsertRowBefore"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:Tn("mceTableInsertRowAfter"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:Tn("mceTableDeleteRow"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:Tn("mceTableRowProps"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:Tn("mceTableCutRow"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:Tn("mceTableCopyRow"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:Tn("mceTablePasteRowBefore"),onSetup:$t.onSetupPasteable(Er.getRows)}),wt.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:Tn("mceTablePasteRowAfter"),onSetup:$t.onSetupPasteable(Er.getRows)});var Po={type:"nestedmenuitem",text:"Row",getSubmenuItems:Gt("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};wt.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:Tn("mceTableInsertColBefore"),onSetup:$t.onSetupColumn("onFirst")}),wt.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:Tn("mceTableInsertColAfter"),onSetup:$t.onSetupColumn("onLast")}),wt.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:Tn("mceTableDeleteCol"),onSetup:$t.onSetupColumn("onAny")}),wt.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:Tn("mceTableCutCol"),onSetup:$t.onSetupColumn("onAny")}),wt.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:Tn("mceTableCopyCol"),onSetup:$t.onSetupColumn("onAny")}),wt.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:Tn("mceTablePasteColBefore"),onSetup:$t.onSetupPasteableColumn(Er.getColumns,"onFirst")}),wt.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:Tn("mceTablePasteColAfter"),onSetup:$t.onSetupPasteableColumn(Er.getColumns,"onLast")});var ri={type:"nestedmenuitem",text:"Column",getSubmenuItems:Gt("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};wt.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:Tn("mceTableCellProps"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:Tn("mceTableMergeCells"),onSetup:$t.onSetupMergeable}),wt.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:Tn("mceTableSplitCells"),onSetup:$t.onSetupUnmergeable});var Do={type:"nestedmenuitem",text:"Cell",getSubmenuItems:Gt("tablecellprops tablemergecells tablesplitcells")};!1===wt.getParam("table_grid",!0,"boolean")?wt.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:Tn("mceInsertTable")}):wt.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:Lr}]}}),wt.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:Tn("mceInsertTable")}),wt.ui.registry.addMenuItem("tableprops",Qr),wt.ui.registry.addMenuItem("deletetable",io),wt.ui.registry.addNestedMenuItem("row",Po),wt.ui.registry.addNestedMenuItem("column",ri),wt.ui.registry.addNestedMenuItem("cell",Do),wt.ui.registry.addContextMenu("table",{update:function(){return $t.resetTargets(),$t.targets().fold(Gt(""),function(Ea){return"caption"===$r(Ea.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var si=fc(Nd(wt));0!==si.length&&wt.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return ap(wt,Sn,si,"tableclass",function(Ea){return wt.execCommand("mceTableToggleClass",!1,Ea)})},onSetup:$t.onSetupTable});var Hi=fc(ja(wt));0!==Hi.length&&wt.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return ap(wt,Sn,Hi,"tablecellclass",function(Ea){return wt.execCommand("mceTableCellToggleClass",!1,Ea)})},onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return ap(wt,Sn,jd,"tablecellverticalalign",So(wt,"vertical-align"))},onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return ap(wt,Sn,E_(wt),"tablecellborderwidth",So(wt,"border-width"))},onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return ap(wt,Sn,wb(wt),"tablecellborderstyle",So(wt,"border-style"))},onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:Tn("mceTableToggleCaption"),onSetup:$t.onSetupTableWithCaption}),wt.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return jn(wt,P_(wt),"background-color")},onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return jn(wt,Mg(wt),"border-color")},onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:N_(wt),onSetup:$t.onSetupTableRowHeaders}),wt.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:ty(wt),onSetup:$t.onSetupTableColumnHeaders})}(M,Mt,ht,Pt),function(wt,Sn,$t,Er){function Tn(io){return function(){return wt.execCommand(io)}}wt.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(io){return io("inserttable | cell row column | advtablesort | tableprops deletetable")}}),wt.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:Tn("mceTableProps"),icon:"table",onSetup:$t.onSetupTable}),wt.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:Tn("mceTableDelete"),icon:"table-delete-table",onSetup:$t.onSetupTable}),wt.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:Tn("mceTableCellProps"),icon:"table-cell-properties",onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:Tn("mceTableMergeCells"),icon:"table-merge-cells",onSetup:$t.onSetupMergeable}),wt.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:Tn("mceTableSplitCells"),icon:"table-split-cells",onSetup:$t.onSetupUnmergeable}),wt.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:Tn("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:Tn("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:Tn("mceTableDeleteRow"),icon:"table-delete-row",onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:Tn("mceTableRowProps"),icon:"table-row-properties",onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:Tn("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:$t.onSetupColumn("onFirst")}),wt.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:Tn("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:$t.onSetupColumn("onLast")}),wt.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:Tn("mceTableDeleteCol"),icon:"table-delete-column",onSetup:$t.onSetupColumn("onAny")}),wt.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:Tn("mceTableCutRow"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:Tn("mceTableCopyRow"),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:Tn("mceTablePasteRowBefore"),onSetup:$t.onSetupPasteable(Er.getRows)}),wt.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:Tn("mceTablePasteRowAfter"),onSetup:$t.onSetupPasteable(Er.getRows)}),wt.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:Tn("mceTableCutCol"),onSetup:$t.onSetupColumn("onAny")}),wt.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:Tn("mceTableCopyCol"),onSetup:$t.onSetupColumn("onAny")}),wt.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:Tn("mceTablePasteColBefore"),onSetup:$t.onSetupPasteableColumn(Er.getColumns,"onFirst")}),wt.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:Tn("mceTablePasteColAfter"),onSetup:$t.onSetupPasteableColumn(Er.getColumns,"onLast")}),wt.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:Tn("mceInsertTable"),icon:"table"});var Lr=fc(Nd(wt));0!==Lr.length&&wt.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:Lm(wt,Sn,Lr,"tableclass",function(io){return wt.execCommand("mceTableToggleClass",!1,io)}),onSetup:$t.onSetupTable});var Qr=fc(ja(wt));0!==Qr.length&&wt.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:Lm(wt,Sn,Qr,"tablecellclass",function(io){return wt.execCommand("mceTableCellToggleClass",!1,io)}),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:Lm(wt,Sn,jd,"tablecellverticalalign",So(wt,"vertical-align")),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:Lm(wt,Sn,E_(wt),"tablecellborderwidth",So(wt,"border-width")),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:Lm(wt,Sn,wb(wt),"tablecellborderstyle",So(wt,"border-style")),onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:Tn("mceTableToggleCaption"),icon:"table-caption",onSetup:$t.onSetupTableWithCaption}),wt.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(io){return io(jn(wt,P_(wt),"background-color"))},onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(io){return io(jn(wt,Mg(wt),"border-color"))},onSetup:$t.onSetupCellOrRow}),wt.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:N_(wt),onSetup:$t.onSetupTableRowHeaders}),wt.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:ty(wt),onSetup:$t.onSetupTableColumnHeaders})}(M,Mt,ht,Pt),0<(He=(Ie=M).getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&Ie.ui.registry.addContextToolbar("table",{predicate:function(wt){return Ie.dom.is(wt,"table")&&Ie.getBody().contains(wt)},items:He,scope:"node",position:"node"}),M.on("PreInit",function(){M.serializer.addTempAttr(sc.firstSelected),M.serializer.addTempAttr(sc.lastSelected),M.formatter.register(Fb)}),M.getParam("table_tab_navigation",!0,"boolean")&&M.on("keydown",function(wt){var Sn,$t,Er,Tn,Lr=M,Qr=Xt;(Sn=wt).keyCode===Ph.TAB&&($t=Zu(Lr),Er=function(io){var Po=$r(io);return Sr(io,$t)||Ur(uv,Po)},Tn=Lr.selection.getRng(),jh(Dt.fromDom(Sn.shiftKey?Tn.startContainer:Tn.endContainer),Er).each(function(io){Sn.preventDefault(),sa(io,Er).each(Qr.clear),Lr.selection.collapse(Sn.shiftKey),(Sn.shiftKey?function(Po,ri,Do){return _y(Po,ri,(Hi=cd,ex(si=Do,void 0).fold(function(){return yd.none()},function(Ea){return Wg(Ea.all,si,Ea.index,-1,Hi)})));var si,Hi}:ai)(Lr,Er,io).each(function(Po){Lr.selection.setRng(Po)})}))}),M.on("remove",function(){zt.destroy()}),{insertTable:(we=M,function(wt,Sn,$t){var Er=bi(we,Sn,wt,$t=void 0===$t?{}:$t,"Invalid values for insertTable - rows and columns values are required to insert a table.");return we.undoManager.add(),Er}),setClipboardRows:Tb(Pt.setRows),getClipboardRows:ey(Pt.getRows),setClipboardCols:Tb(Pt.setColumns),getClipboardCols:ey(Pt.getColumns),resizeHandler:zt,selectionTargets:ht};function xn(wt){return ff(gu(Ye)).bind(function(Sn){return sa(Sn,st).map(function($t){var Er=ph(ut,$t,Sn);return wt($t,Er)})}).getOr("")}})}(),function(mr,oi){"object"==typeof exports&&"undefined"!=typeof module?oi(exports):"function"==typeof define&&define.amd?define(["exports"],oi):oi((mr="undefined"!=typeof globalThis?globalThis:mr||self).echarts={})}(this,function(mr){"use strict";var oi=function(n,t){return(oi=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])})(n,t)};function gt(n,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=n}oi(n,t),n.prototype=null===t?Object.create(t):(e.prototype=t.prototype,new e)}var us=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},zn=new function(){this.browser=new us,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(zn.wxa=!0,zn.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?zn.worker=!0:"undefined"==typeof navigator?(zn.node=!0,zn.svgSupported=!0):function(n,t){var e=t.browser,r=n.match(/Firefox\/([\d.]+)/),o=n.match(/MSIE\s([\d.]+)/)||n.match(/Trident\/.+?rv:(([\d.]+))/),i=n.match(/Edge?\/([\d.]+)/),s=/micromessenger/i.test(n);r&&(e.firefox=!0,e.version=r[1]),o&&(e.ie=!0,e.version=o[1]),i&&(e.edge=!0,e.version=i[1],e.newEdge=+i[1].split(".")[0]>18),s&&(e.weChat=!0),t.svgSupported="undefined"!=typeof SVGRect,t.touchEventsSupported="ontouchstart"in window&&!e.ie&&!e.edge,t.pointerEventsSupported="onpointerdown"in window&&(e.edge||e.ie&&+e.version>=11),t.domSupported="undefined"!=typeof document;var l=document.documentElement.style;t.transform3dSupported=(e.ie&&"transition"in l||e.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in l)&&!("OTransition"in l),t.transformSupported=t.transform3dSupported||e.ie&&+e.version>=9}(navigator.userAgent,zn);var ct,_n,Gt="sans-serif",cr="12px "+Gt,jr=function(n){var t={};if("undefined"==typeof JSON)return t;for(var e=0;e<n.length;e++){var r=String.fromCharCode(e+32),o=(n.charCodeAt(e)-20)/100;t[r]=o}return t}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),Pr={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(n,t){if(!ct){var e=Pr.createCanvas();ct=e&&e.getContext("2d")}if(ct)return _n!==t&&(_n=ct.font=t||cr),ct.measureText(n);n=n||"";var r=/(\d+)px/.exec(t=t||cr),o=r&&+r[1]||12,i=0;if(t.indexOf("mono")>=0)i=o*n.length;else for(var s=0;s<n.length;s++){var l=jr[n[s]];i+=null==l?o:l*o}return{width:i}},loadImage:function(n,t,e){var r=new Image;return r.onload=t,r.onerror=e,r.src=n,r}};function Bn(n){for(var t in Pr)n[t]&&(Pr[t]=n[t])}var mi=Pn(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],function(n,t){return n["[object "+t+"]"]=!0,n},{}),_l=Pn(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],function(n,t){return n["[object "+t+"Array]"]=!0,n},{}),Ci=Object.prototype.toString,Mi=Array.prototype,Kr=Mi.forEach,wo=Mi.filter,Va=Mi.slice,Yo=Mi.map,qr=function(){}.constructor,ts=qr?qr.prototype:null,uo="__proto__",Ur=2311;function ho(){return Ur++}function qe(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];"undefined"!=typeof console&&console.error.apply(console,n)}function an(n){if(null==n||"object"!=typeof n)return n;var t=n,e=Ci.call(n);if("[object Array]"===e){if(!Fu(n)){t=[];for(var r=0,o=n.length;r<o;r++)t[r]=an(n[r])}}else if(_l[e]){if(!Fu(n)){var i=n.constructor;if(i.from)t=i.from(n);else for(t=new i(n.length),r=0,o=n.length;r<o;r++)t[r]=n[r]}}else if(!mi[e]&&!Fu(n)&&!ku(n))for(var s in t={},n)n.hasOwnProperty(s)&&s!==uo&&(t[s]=an(n[s]));return t}function ln(n,t,e){if(!wr(t)||!wr(n))return e?an(t):n;for(var r in t)if(t.hasOwnProperty(r)&&r!==uo){var o=n[r],i=t[r];!wr(i)||!wr(o)||Ue(i)||Ue(o)||ku(i)||ku(o)||Mu(i)||Mu(o)||Fu(i)||Fu(o)?!e&&r in n||(n[r]=an(t[r])):ln(o,i,e)}return n}function la(n,t){for(var e=n[0],r=1,o=n.length;r<o;r++)e=ln(e,n[r],t);return e}function Lt(n,t){if(Object.assign)Object.assign(n,t);else for(var e in t)t.hasOwnProperty(e)&&e!==uo&&(n[e]=t[e]);return n}function Yn(n,t,e){for(var r=rr(t),o=0;o<r.length;o++){var i=r[o];(e?null!=t[i]:null==n[i])&&(n[i]=t[i])}return n}var Jo=Pr.createCanvas;function Ir(n,t){if(n){if(n.indexOf)return n.indexOf(t);for(var e=0,r=n.length;e<r;e++)if(n[e]===t)return e}return-1}function Cu(n,t){var e=n.prototype;function r(){}for(var o in r.prototype=t.prototype,n.prototype=new r,e)e.hasOwnProperty(o)&&(n.prototype[o]=e[o]);n.prototype.constructor=n,n.superClass=t}function na(n,t,e){if(n="prototype"in n?n.prototype:n,t="prototype"in t?t.prototype:t,Object.getOwnPropertyNames)for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;o++){var i=r[o];"constructor"!==i&&(e?null!=t[i]:null==n[i])&&(n[i]=t[i])}else Yn(n,t,e)}function nn(n){return!!n&&"string"!=typeof n&&"number"==typeof n.length}function Ce(n,t,e){if(n&&t)if(n.forEach&&n.forEach===Kr)n.forEach(t,e);else if(n.length===+n.length)for(var r=0,o=n.length;r<o;r++)t.call(e,n[r],r,n);else for(var i in n)n.hasOwnProperty(i)&&t.call(e,n[i],i,n)}function mt(n,t,e){if(!n)return[];if(!t)return zo(n);if(n.map&&n.map===Yo)return n.map(t,e);for(var r=[],o=0,i=n.length;o<i;o++)r.push(t.call(e,n[o],o,n));return r}function Pn(n,t,e,r){if(n&&t){for(var o=0,i=n.length;o<i;o++)e=t.call(r,e,n[o],o,n);return e}}function yo(n,t,e){if(!n)return[];if(!t)return zo(n);if(n.filter&&n.filter===wo)return n.filter(t,e);for(var r=[],o=0,i=n.length;o<i;o++)t.call(e,n[o],o,n)&&r.push(n[o]);return r}function Yi(n,t,e){if(n&&t)for(var r=0,o=n.length;r<o;r++)if(t.call(e,n[r],r,n))return n[r]}function rr(n){if(!n)return[];if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t}var De=ts&&yr(ts.bind)?ts.call.bind(ts.bind):function(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return function(){return n.apply(t,e.concat(Va.call(arguments)))}};function dr(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return function(){return n.apply(this,t.concat(Va.call(arguments)))}}function Ue(n){return Array.isArray?Array.isArray(n):"[object Array]"===Ci.call(n)}function yr(n){return"function"==typeof n}function ir(n){return"string"==typeof n}function gc(n){return"[object String]"===Ci.call(n)}function gr(n){return"number"==typeof n}function wr(n){var t=typeof n;return"function"===t||!!n&&"object"===t}function Mu(n){return!!mi[Ci.call(n)]}function ca(n){return!!_l[Ci.call(n)]}function ku(n){return"object"==typeof n&&"number"==typeof n.nodeType&&"object"==typeof n.ownerDocument}function sn(n){return null!=n.colorStops}function Ht(n){return null!=n.image}function On(n){return"[object RegExp]"===Ci.call(n)}function wn(n){return n!=n}function Hn(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];for(var e=0,r=n.length;e<r;e++)if(null!=n[e])return n[e]}function un(n,t){return null!=n?n:t}function rn(n,t,e){return null!=n?n:null!=t?t:e}function zo(n){for(var t=[],e=1;e<arguments.length;e++)t[e-1]=arguments[e];return Va.apply(n,t)}function Sr(n){if("number"==typeof n)return[n,n,n,n];var t=n.length;return 2===t?[n[0],n[1],n[0],n[1]]:3===t?[n[0],n[1],n[2],n[1]]:n}function Ao(n,t){if(!n)throw new Error(t)}function ki(n){return null==n?null:"function"==typeof n.trim?n.trim():n.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var ns="__ec_primitive__";function ni(n){n[ns]=!0}function Fu(n){return n[ns]}var rs=function(){function n(){this.data={}}return n.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},n.prototype.has=function(t){return this.data.hasOwnProperty(t)},n.prototype.get=function(t){return this.data[t]},n.prototype.set=function(t,e){return this.data[t]=e,this},n.prototype.keys=function(){return rr(this.data)},n.prototype.forEach=function(t){var e=this.data;for(var r in e)e.hasOwnProperty(r)&&t(e[r],r)},n}(),Ys="function"==typeof Map,Ts=function(){function n(t){var e=Ue(t);this.data=Ys?new Map:new rs;var r=this;function o(i,s){e?r.set(i,s):r.set(s,i)}t instanceof n?t.each(o):t&&Ce(t,o)}return n.prototype.hasKey=function(t){return this.data.has(t)},n.prototype.get=function(t){return this.data.get(t)},n.prototype.set=function(t,e){return this.data.set(t,e),e},n.prototype.each=function(t,e){this.data.forEach(function(r,o){t.call(e,r,o)})},n.prototype.keys=function(){var t=this.data.keys();return Ys?Array.from(t):t},n.prototype.removeKey=function(t){this.data.delete(t)},n}();function Or(n){return new Ts(n)}function $(n,t){for(var e=new n.constructor(n.length+t.length),r=0;r<n.length;r++)e[r]=n[r];var o=n.length;for(r=0;r<t.length;r++)e[r+o]=t[r];return e}function El(n,t){var e;if(Object.create)e=Object.create(n);else{var r=function(){};r.prototype=n,e=new r}return t&&Lt(e,t),e}function su(n){var t=n.style;t.webkitUserSelect="none",t.userSelect="none",t.webkitTapHighlightColor="rgba(0,0,0,0)",t["-webkit-touch-callout"]="none"}function br(n,t){return n.hasOwnProperty(t)}function Fo(){}var Tr=180/Math.PI,lh=Object.freeze({__proto__:null,guid:ho,logError:qe,clone:an,merge:ln,mergeAll:la,extend:Lt,defaults:Yn,createCanvas:Jo,indexOf:Ir,inherits:Cu,mixin:na,isArrayLike:nn,each:Ce,map:mt,reduce:Pn,filter:yo,find:Yi,keys:rr,bind:De,curry:dr,isArray:Ue,isFunction:yr,isString:ir,isStringSafe:gc,isNumber:gr,isObject:wr,isBuiltInObject:Mu,isTypedArray:ca,isDom:ku,isGradientObject:sn,isImagePatternObject:Ht,isRegExp:On,eqNaN:wn,retrieve:Hn,retrieve2:un,retrieve3:rn,slice:zo,normalizeCssArray:Sr,assert:Ao,trim:ki,setAsPrimitive:ni,isPrimitive:Fu,HashMap:Ts,createHashMap:Or,concatArray:$,createObject:El,disableUserSelect:su,hasOwn:br,noop:Fo,RADIAN_TO_DEGREE:Tr});function ra(n,t){return null==n&&(n=0),null==t&&(t=0),[n,t]}function po(n,t){return n[0]=t[0],n[1]=t[1],n}function Vu(n){return[n[0],n[1]]}function hr(n,t,e){return n[0]=t,n[1]=e,n}function Ot(n,t,e){return n[0]=t[0]+e[0],n[1]=t[1]+e[1],n}function Dn(n,t,e,r){return n[0]=t[0]+e[0]*r,n[1]=t[1]+e[1]*r,n}function Ke(n,t,e){return n[0]=t[0]-e[0],n[1]=t[1]-e[1],n}function bt(n){return Math.sqrt(qt(n))}function qt(n){return n[0]*n[0]+n[1]*n[1]}function Zt(n,t,e){return n[0]=t[0]*e,n[1]=t[1]*e,n}function er(n,t){var e=bt(t);return 0===e?(n[0]=0,n[1]=0):(n[0]=t[0]/e,n[1]=t[1]/e),n}function Rn(n,t){return Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1]))}var Fn=Rn;function ur(n,t){return(n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])}var Ln=ur;function fn(n,t,e,r){return n[0]=t[0]+r*(e[0]-t[0]),n[1]=t[1]+r*(e[1]-t[1]),n}function gn(n,t,e){var r=t[0],o=t[1];return n[0]=e[0]*r+e[2]*o+e[4],n[1]=e[1]*r+e[3]*o+e[5],n}function Dt(n,t,e){return n[0]=Math.min(t[0],e[0]),n[1]=Math.min(t[1],e[1]),n}function ro(n,t,e){return n[0]=Math.max(t[0],e[0]),n[1]=Math.max(t[1],e[1]),n}var so=Object.freeze({__proto__:null,create:ra,copy:po,clone:Vu,set:hr,add:Ot,scaleAndAdd:Dn,sub:Ke,len:bt,length:bt,lenSquare:qt,lengthSquare:qt,mul:function(n,t,e){return n[0]=t[0]*e[0],n[1]=t[1]*e[1],n},div:function(n,t,e){return n[0]=t[0]/e[0],n[1]=t[1]/e[1],n},dot:function(n,t){return n[0]*t[0]+n[1]*t[1]},scale:Zt,normalize:er,distance:Rn,dist:Fn,distanceSquare:ur,distSquare:Ln,negate:function(n,t){return n[0]=-t[0],n[1]=-t[1],n},lerp:fn,applyTransform:gn,min:Dt,max:ro}),eo=function(n,t){this.target=n,this.topTarget=t&&t.topTarget},Xr=function(){function n(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return n.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new eo(e,t),"dragstart",t.event))},n.prototype._drag=function(t){var e=this._draggingTarget;if(e){var r=t.offsetX,o=t.offsetY,i=r-this._x,s=o-this._y;this._x=r,this._y=o,e.drift(i,s,t),this.handler.dispatchToElement(new eo(e,t),"drag",t.event);var l=this.handler.findHover(r,o,e).target,c=this._dropTarget;this._dropTarget=l,e!==l&&(c&&l!==c&&this.handler.dispatchToElement(new eo(c,t),"dragleave",t.event),l&&l!==c&&this.handler.dispatchToElement(new eo(l,t),"dragenter",t.event))}},n.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new eo(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new eo(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},n}(),bo=function(){function n(t){t&&(this._$eventProcessor=t)}return n.prototype.on=function(t,e,r,o){this._$handlers||(this._$handlers={});var i=this._$handlers;if("function"==typeof e&&(o=r,r=e,e=null),!r||!t)return this;var s=this._$eventProcessor;null!=e&&s&&s.normalizeQuery&&(e=s.normalizeQuery(e)),i[t]||(i[t]=[]);for(var l=0;l<i[t].length;l++)if(i[t][l].h===r)return this;var c={h:r,query:e,ctx:o||this,callAtLast:r.zrEventfulCallAtLast},d=i[t].length-1,p=i[t][d];return p&&p.callAtLast?i[t].splice(d,0,c):i[t].push(c),this},n.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},n.prototype.off=function(t,e){var r=this._$handlers;if(!r)return this;if(!t)return this._$handlers={},this;if(e){if(r[t]){for(var o=[],i=0,s=r[t].length;i<s;i++)r[t][i].h!==e&&o.push(r[t][i]);r[t]=o}r[t]&&0===r[t].length&&delete r[t]}else delete r[t];return this},n.prototype.trigger=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!this._$handlers)return this;var o=this._$handlers[t],i=this._$eventProcessor;if(o)for(var s=e.length,l=o.length,c=0;c<l;c++){var d=o[c];if(!i||!i.filter||null==d.query||i.filter(t,d.query))switch(s){case 0:d.h.call(d.ctx);break;case 1:d.h.call(d.ctx,e[0]);break;case 2:d.h.call(d.ctx,e[0],e[1]);break;default:d.h.apply(d.ctx,e)}}return i&&i.afterTrigger&&i.afterTrigger(t),this},n.prototype.triggerWithContext=function(t){for(var e=[],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(!this._$handlers)return this;var o=this._$handlers[t],i=this._$eventProcessor;if(o)for(var s=e.length,l=e[s-1],c=o.length,d=0;d<c;d++){var p=o[d];if(!i||!i.filter||null==p.query||i.filter(t,p.query))switch(s){case 0:p.h.call(l);break;case 1:p.h.call(l,e[0]);break;case 2:p.h.call(l,e[0],e[1]);break;default:p.h.apply(l,e.slice(1,s-1))}}return i&&i.afterTrigger&&i.afterTrigger(t),this},n}(),Ti=Math.log(2);function $r(n,t,e,r,o,i){var s=r+"-"+o,l=n.length;if(i.hasOwnProperty(s))return i[s];if(1===t){var c=Math.round(Math.log((1<<l)-1&~o)/Ti);return n[e][c]}for(var d=r|1<<e,p=e+1;r&1<<p;)p++;for(var m=0,b=0,_=0;b<l;b++){var S=1<<b;S&o||(m+=(_%2?-1:1)*n[e][b]*$r(n,t-1,p,d,o|S,i),_++)}return i[s]=m,m}function uu(n,t){var e=[[n[0],n[1],1,0,0,0,-t[0]*n[0],-t[0]*n[1]],[0,0,0,n[0],n[1],1,-t[1]*n[0],-t[1]*n[1]],[n[2],n[3],1,0,0,0,-t[2]*n[2],-t[2]*n[3]],[0,0,0,n[2],n[3],1,-t[3]*n[2],-t[3]*n[3]],[n[4],n[5],1,0,0,0,-t[4]*n[4],-t[4]*n[5]],[0,0,0,n[4],n[5],1,-t[5]*n[4],-t[5]*n[5]],[n[6],n[7],1,0,0,0,-t[6]*n[6],-t[6]*n[7]],[0,0,0,n[6],n[7],1,-t[7]*n[6],-t[7]*n[7]]],r={},o=$r(e,8,0,0,0,r);if(0!==o){for(var i=[],s=0;s<8;s++)for(var l=0;l<8;l++)null==i[l]&&(i[l]=0),i[l]+=((s+l)%2?-1:1)*$r(e,7,0===s?1:0,1<<s,1<<l,r)/o*t[s];return function(c,d,p){var m=d*i[6]+p*i[7]+1;c[0]=(d*i[0]+p*i[1]+i[2])/m,c[1]=(d*i[3]+p*i[4]+i[5])/m}}}var Dr="___zrEVENTSAVED",go=[];function oa(n,t,e,r,o){if(t.getBoundingClientRect&&zn.domSupported&&!Ns(t)){var i=t[Dr]||(t[Dr]={}),l=function(c,d,p){for(var m=p?"invTrans":"trans",b=d[m],_=d.srcCoords,S=[],k=[],D=!0,O=0;O<4;O++){var N=c[O].getBoundingClientRect(),F=2*O,V=N.left,q=N.top;S.push(V,q),D=D&&_&&V===_[F]&&q===_[F+1],k.push(c[O].offsetLeft,c[O].offsetTop)}return D&&b?b:(d.srcCoords=S,d[m]=p?uu(k,S):uu(S,k))}(function(c,d){var p=d.markers;if(p)return p;p=d.markers=[];for(var m=["left","right"],b=["top","bottom"],_=0;_<4;_++){var S=document.createElement("div"),k=_%2,D=(_>>1)%2;S.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",m[k]+":0",b[D]+":0",m[1-k]+":auto",b[1-D]+":auto",""].join("!important;"),c.appendChild(S),p.push(S)}return p}(t,i),i,o);if(l)return l(n,e,r),!0}return!1}function Ns(n){return"CANVAS"===n.nodeName.toUpperCase()}var qs=/([&<>"'])/g,Gr={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Ha(n){return null==n?"":(n+"").replace(qs,function(t,e){return Gr[e]})}var Wa=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ds=[],Bs=zn.browser.firefox&&+zn.browser.version.split(".")[0]<39;function ls(n,t,e,r){return e=e||{},r?Mm(n,t,e):Bs&&null!=t.layerX&&t.layerX!==t.offsetX?(e.zrX=t.layerX,e.zrY=t.layerY):null!=t.offsetX?(e.zrX=t.offsetX,e.zrY=t.offsetY):Mm(n,t,e),e}function Mm(n,t,e){if(zn.domSupported&&n.getBoundingClientRect){var r=t.clientX,o=t.clientY;if(Ns(n)){var i=n.getBoundingClientRect();return e.zrX=r-i.left,void(e.zrY=o-i.top)}if(oa(Ds,n,r,o))return e.zrX=Ds[0],void(e.zrY=Ds[1])}e.zrX=e.zrY=0}function xp(n){return n||window.event}function to(n,t,e){if(null!=(t=xp(t)).zrX)return t;var r=t.type;if(r&&r.indexOf("touch")>=0){var o="touchend"!==r?t.targetTouches[0]:t.changedTouches[0];o&&ls(n,o,t,e)}else{ls(n,t,t,e);var i=function(l){var c=l.wheelDelta;if(c)return c;var d=l.deltaX,p=l.deltaY;return null==d||null==p?c:3*Math.abs(0!==p?p:d)*(p>0?-1:p<0?1:d>0?-1:1)}(t);t.zrDelta=i?i/120:-(t.detail||0)/3}var s=t.button;return null==t.which&&void 0!==s&&Wa.test(t.type)&&(t.which=1&s?1:2&s?3:4&s?2:0),t}function wa(n,t,e,r){n.addEventListener(t,e,r)}var Tu=function(n){n.preventDefault(),n.stopPropagation(),n.cancelBubble=!0};function As(n){return 2===n.which||3===n.which}var Di=function(){function n(){this._track=[]}return n.prototype.recognize=function(t,e,r){return this._doTrack(t,e,r),this._recognize(t)},n.prototype.clear=function(){return this._track.length=0,this},n.prototype._doTrack=function(t,e,r){var o=t.touches;if(o){for(var i={points:[],touches:[],target:e,event:t},s=0,l=o.length;s<l;s++){var c=o[s],d=ls(r,c,{});i.points.push([d.zrX,d.zrY]),i.touches.push(c)}this._track.push(i)}},n.prototype._recognize=function(t){for(var e in Lo)if(Lo.hasOwnProperty(e)){var r=Lo[e](this._track,t);if(r)return r}},n}();function Pc(n){var t=n[1][0]-n[0][0],e=n[1][1]-n[0][1];return Math.sqrt(t*t+e*e)}var Lo={pinch:function(n,t){var e=n.length;if(e){var r,o=(n[e-1]||{}).points,i=(n[e-2]||{}).points||o;if(i&&i.length>1&&o&&o.length>1){var s=Pc(o)/Pc(i);!isFinite(s)&&(s=1),t.pinchScale=s;var l=[((r=o)[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2];return t.pinchX=l[0],t.pinchY=l[1],{type:"pinch",target:n[0].target,event:t}}}}};function bg(n){return n[0]=1,n[1]=0,n[2]=0,n[3]=1,n[4]=0,n[5]=0,n}function Hu(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n}function Fr(n,t,e){var o=t[1]*e[0]+t[3]*e[1],i=t[0]*e[2]+t[2]*e[3],s=t[1]*e[2]+t[3]*e[3],l=t[0]*e[4]+t[2]*e[5]+t[4],c=t[1]*e[4]+t[3]*e[5]+t[5];return n[0]=t[0]*e[0]+t[2]*e[1],n[1]=o,n[2]=i,n[3]=s,n[4]=l,n[5]=c,n}function Rc(n,t,e){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4]+e[0],n[5]=t[5]+e[1],n}function Pl(n,t,e){var r=t[0],o=t[2],i=t[4],s=t[1],l=t[3],c=t[5],d=Math.sin(e),p=Math.cos(e);return n[0]=r*p+s*d,n[1]=-r*d+s*p,n[2]=o*p+l*d,n[3]=-o*d+p*l,n[4]=p*i+d*c,n[5]=p*c-d*i,n}function Qt(n,t,e){var r=e[0],o=e[1];return n[0]=t[0]*r,n[1]=t[1]*o,n[2]=t[2]*r,n[3]=t[3]*o,n[4]=t[4]*r,n[5]=t[5]*o,n}function It(n,t){var e=t[0],r=t[2],o=t[4],i=t[1],s=t[3],l=t[5],c=e*s-i*r;return c?(n[0]=s*(c=1/c),n[1]=-i*c,n[2]=-r*c,n[3]=e*c,n[4]=(r*l-s*o)*c,n[5]=(i*o-e*l)*c,n):null}function Ga(n){var t=[1,0,0,1,0,0];return Hu(t,n),t}var wp=Object.freeze({__proto__:null,create:function _p(){return[1,0,0,1,0,0]},identity:bg,copy:Hu,mul:Fr,translate:Rc,rotate:Pl,scale:Qt,invert:It,clone:Ga}),lo=function(){function n(t,e){this.x=t||0,this.y=e||0}return n.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},n.prototype.clone=function(){return new n(this.x,this.y)},n.prototype.set=function(t,e){return this.x=t,this.y=e,this},n.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},n.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},n.prototype.scale=function(t){this.x*=t,this.y*=t},n.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},n.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},n.prototype.dot=function(t){return this.x*t.x+this.y*t.y},n.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},n.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},n.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},n.prototype.distance=function(t){var e=this.x-t.x,r=this.y-t.y;return Math.sqrt(e*e+r*r)},n.prototype.distanceSquare=function(t){var e=this.x-t.x,r=this.y-t.y;return e*e+r*r},n.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},n.prototype.transform=function(t){if(t){var e=this.x,r=this.y;return this.x=t[0]*e+t[2]*r+t[4],this.y=t[1]*e+t[3]*r+t[5],this}},n.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},n.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},n.set=function(t,e,r){t.x=e,t.y=r},n.copy=function(t,e){t.x=e.x,t.y=e.y},n.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},n.lenSquare=function(t){return t.x*t.x+t.y*t.y},n.dot=function(t,e){return t.x*e.x+t.y*e.y},n.add=function(t,e,r){t.x=e.x+r.x,t.y=e.y+r.y},n.sub=function(t,e,r){t.x=e.x-r.x,t.y=e.y-r.y},n.scale=function(t,e,r){t.x=e.x*r,t.y=e.y*r},n.scaleAndAdd=function(t,e,r,o){t.x=e.x+r.x*o,t.y=e.y+r.y*o},n.lerp=function(t,e,r,o){var i=1-o;t.x=i*e.x+o*r.x,t.y=i*e.y+o*r.y},n}(),lu=Math.min,Dd=Math.max,cs=new lo,cu=new lo,Xs=new lo,$o=new lo,nd=new lo,Ql=new lo,Io=function(){function n(t,e,r,o){r<0&&(t+=r,r=-r),o<0&&(e+=o,o=-o),this.x=t,this.y=e,this.width=r,this.height=o}return n.prototype.union=function(t){var e=lu(t.x,this.x),r=lu(t.y,this.y);this.width=isFinite(this.x)&&isFinite(this.width)?Dd(t.x+t.width,this.x+this.width)-e:t.width,this.height=isFinite(this.y)&&isFinite(this.height)?Dd(t.y+t.height,this.y+this.height)-r:t.height,this.x=e,this.y=r},n.prototype.applyTransform=function(t){n.applyTransform(this,this,t)},n.prototype.calculateTransform=function(t){var e=this,r=t.width/e.width,o=t.height/e.height,i=[1,0,0,1,0,0];return Rc(i,i,[-e.x,-e.y]),Qt(i,i,[r,o]),Rc(i,i,[t.x,t.y]),i},n.prototype.intersect=function(t,e){if(!t)return!1;t instanceof n||(t=n.create(t));var r=this,o=r.x,i=r.x+r.width,s=r.y,l=r.y+r.height,c=t.x,d=t.x+t.width,p=t.y,m=t.y+t.height,b=!(i<c||d<o||l<p||m<s);if(e){var _=1/0,S=0,k=Math.abs(i-c),D=Math.abs(d-o),O=Math.abs(l-p),N=Math.abs(m-s),F=Math.min(k,D),V=Math.min(O,N);i<c||d<o?F>S&&(S=F,lo.set(Ql,k<D?-k:D,0)):F<_&&(_=F,lo.set(nd,k<D?k:-D,0)),l<p||m<s?V>S&&(S=V,lo.set(Ql,0,O<N?-O:N)):F<_&&(_=F,lo.set(nd,0,O<N?O:-N))}return e&&lo.copy(e,b?nd:Ql),b},n.prototype.contain=function(t,e){var r=this;return t>=r.x&&t<=r.x+r.width&&e>=r.y&&e<=r.y+r.height},n.prototype.clone=function(){return new n(this.x,this.y,this.width,this.height)},n.prototype.copy=function(t){n.copy(this,t)},n.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},n.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},n.prototype.isZero=function(){return 0===this.width||0===this.height},n.create=function(t){return new n(t.x,t.y,t.width,t.height)},n.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},n.applyTransform=function(t,e,r){if(r){if(r[1]<1e-5&&r[1]>-1e-5&&r[2]<1e-5&&r[2]>-1e-5){var o=r[0],i=r[3],l=r[5];return t.x=e.x*o+r[4],t.y=e.y*i+l,t.width=e.width*o,t.height=e.height*i,t.width<0&&(t.x+=t.width,t.width=-t.width),void(t.height<0&&(t.y+=t.height,t.height=-t.height))}cs.x=Xs.x=e.x,cs.y=$o.y=e.y,cu.x=$o.x=e.x+e.width,cu.y=Xs.y=e.y+e.height,cs.transform(r),$o.transform(r),cu.transform(r),Xs.transform(r),t.x=lu(cs.x,cu.x,Xs.x,$o.x),t.y=lu(cs.y,cu.y,Xs.y,$o.y);var c=Dd(cs.x,cu.x,Xs.x,$o.x),d=Dd(cs.y,cu.y,Xs.y,$o.y);t.width=c-t.x,t.height=d-t.y}else t!==e&&n.copy(t,e)},n}();function rl(){Tu(this.event)}var mc=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.handler=null,e}return gt(t,n),t.prototype.dispose=function(){},t.prototype.setCursor=function(){},t}(bo),Uh=function(n,t){this.x=n,this.y=t},zs=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],Rl=new Io(0,0,0,0),Du=function(n){function t(e,r,o,i,s){var l=n.call(this)||this;return l._hovered=new Uh(0,0),l.storage=e,l.painter=r,l.painterRoot=i,l._pointerSize=s,o=o||new mc,l.proxy=null,l.setHandlerProxy(o),l._draggingMgr=new Xr(l),l}return gt(t,n),t.prototype.setHandlerProxy=function(e){this.proxy&&this.proxy.dispose(),e&&(Ce(zs,function(r){e.on&&e.on(r,this[r],this)},this),e.handler=this),this.proxy=e},t.prototype.mousemove=function(e){var r=e.zrX,o=e.zrY,i=Lc(this,r,o),s=this._hovered,l=s.target;l&&!l.__zr&&(l=(s=this.findHover(s.x,s.y)).target);var c=this._hovered=i?new Uh(r,o):this.findHover(r,o),d=c.target,p=this.proxy;p.setCursor&&p.setCursor(d?d.cursor:"default"),l&&d!==l&&this.dispatchToElement(s,"mouseout",e),this.dispatchToElement(c,"mousemove",e),d&&d!==l&&this.dispatchToElement(c,"mouseover",e)},t.prototype.mouseout=function(e){var r=e.zrEventControl;"only_globalout"!==r&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==r&&this.trigger("globalout",{type:"globalout",event:e})},t.prototype.resize=function(){this._hovered=new Uh(0,0)},t.prototype.dispatch=function(e,r){var o=this[e];o&&o.call(this,r)},t.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},t.prototype.setCursorStyle=function(e){var r=this.proxy;r.setCursor&&r.setCursor(e)},t.prototype.dispatchToElement=function(e,r,o){var d,p,i=(e=e||{}).target;if(!i||!i.silent){for(var s="on"+r,l={type:r,event:p=o,target:(d=e).target,topTarget:d.topTarget,cancelBubble:!1,offsetX:p.zrX,offsetY:p.zrY,gestureEvent:p.gestureEvent,pinchX:p.pinchX,pinchY:p.pinchY,pinchScale:p.pinchScale,wheelDelta:p.zrDelta,zrByTouch:p.zrByTouch,which:p.which,stop:rl};i&&(i[s]&&(l.cancelBubble=!!i[s].call(i,l)),i.trigger(r,l),i=i.__hostTarget?i.__hostTarget:i.parent,!l.cancelBubble););l.cancelBubble||(this.trigger(r,l),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer(function(c){"function"==typeof c[s]&&c[s].call(c,l),c.trigger&&c.trigger(r,l)}))}},t.prototype.findHover=function(e,r,o){var i=this.storage.getDisplayList(),s=new Uh(e,r);if(Ll(i,s,e,r,o),this._pointerSize&&!s.target){for(var l=[],c=this._pointerSize,d=c/2,p=new Io(e-d,r-d,c,c),m=i.length-1;m>=0;m--){var b=i[m];b===o||b.ignore||b.ignoreCoarsePointer||b.parent&&b.parent.ignoreCoarsePointer||(Rl.copy(b.getBoundingRect()),b.transform&&Rl.applyTransform(b.transform),Rl.intersect(p)&&l.push(b))}if(l.length)for(var _=Math.PI/12,S=2*Math.PI,k=0;k<d;k+=4)for(var D=0;D<S;D+=_)if(Ll(l,s,e+k*Math.cos(D),r+k*Math.sin(D),o),s.target)return s}return s},t.prototype.processGesture=function(e,r){this._gestureMgr||(this._gestureMgr=new Di);var o=this._gestureMgr;"start"===r&&o.clear();var i=o.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===r&&o.clear(),i){var s=i.type;e.gestureEvent=s;var l=new Uh;l.target=i.target,this.dispatchToElement(l,s,i.event)}},t}(bo);function Au(n,t,e){if(n[n.rectHover?"rectContain":"contain"](t,e)){for(var r=n,o=void 0,i=!1;r;){if(r.ignoreClip&&(i=!0),!i){var s=r.getClipPath();if(s&&!s.contain(t,e))return!1;r.silent&&(o=!0)}r=r.__hostTarget||r.parent}return!o||"silent"}return!1}function Ll(n,t,e,r,o){for(var i=n.length-1;i>=0;i--){var s=n[i],l=void 0;if(s!==o&&!s.ignore&&(l=Au(s,e,r))&&(!t.topTarget&&(t.topTarget=s),"silent"!==l)){t.target=s;break}}}function Lc(n,t,e){var r=n.painter;return t<0||t>r.getWidth()||e<0||e>r.getHeight()}function Sp(n,t,e,r){var o=t+1;if(o===e)return 1;if(r(n[o++],n[t])<0){for(;o<e&&r(n[o],n[o-1])<0;)o++;!function(i,s,l){for(l--;s<l;){var c=i[s];i[s++]=i[l],i[l--]=c}}(n,t,o)}else for(;o<e&&r(n[o],n[o-1])>=0;)o++;return o-t}function Cp(n,t,e,r,o){for(r===t&&r++;r<e;r++){for(var i,s=n[r],l=t,c=r;l<c;)o(s,n[i=l+c>>>1])<0?c=i:l=i+1;var d=r-l;switch(d){case 3:n[l+3]=n[l+2];case 2:n[l+2]=n[l+1];case 1:n[l+1]=n[l];break;default:for(;d>0;)n[l+d]=n[l+d-1],d--}n[l]=s}}function Ad(n,t,e,r,o,i){var s=0,l=0,c=1;if(i(n,t[e+o])>0){for(l=r-o;c<l&&i(n,t[e+o+c])>0;)s=c,(c=1+(c<<1))<=0&&(c=l);c>l&&(c=l),s+=o,c+=o}else{for(l=o+1;c<l&&i(n,t[e+o-c])<=0;)s=c,(c=1+(c<<1))<=0&&(c=l);c>l&&(c=l);var d=s;s=o-c,c=o-d}for(s++;s<c;){var p=s+(c-s>>>1);i(n,t[e+p])>0?s=p+1:c=p}return c}function Id(n,t,e,r,o,i){var s=0,l=0,c=1;if(i(n,t[e+o])<0){for(l=o+1;c<l&&i(n,t[e+o-c])<0;)s=c,(c=1+(c<<1))<=0&&(c=l);c>l&&(c=l);var d=s;s=o-c,c=o-d}else{for(l=r-o;c<l&&i(n,t[e+o+c])>=0;)s=c,(c=1+(c<<1))<=0&&(c=l);c>l&&(c=l),s+=o,c+=o}for(s++;s<c;){var p=s+(c-s>>>1);i(n,t[e+p])<0?c=p:s=p+1}return c}function jh(n,t,e,r){e||(e=0),r||(r=n.length);var o=r-e;if(!(o<2)){var i=0;if(o<32)Cp(n,e,r,e+(i=Sp(n,e,r,t)),t);else{var s=function _g(n,t){var e,r,o=7,i=0,s=[];function l(c){var d=e[c],p=r[c],m=e[c+1],b=r[c+1];r[c]=p+b,c===i-3&&(e[c+1]=e[c+2],r[c+1]=r[c+2]),i--;var _=Id(n[m],n,d,p,0,t);d+=_,0!=(p-=_)&&0!==(b=Ad(n[d+p-1],n,m,b,b-1,t))&&(p<=b?function(S,k,D,O){var N=0;for(N=0;N<k;N++)s[N]=n[S+N];var F=0,V=D,q=S;if(n[q++]=n[V++],0!=--O)if(1!==k){for(var Z,Q,re,he=o;;){Z=0,Q=0,re=!1;do{if(t(n[V],s[F])<0){if(n[q++]=n[V++],Q++,Z=0,0==--O){re=!0;break}}else if(n[q++]=s[F++],Z++,Q=0,1==--k){re=!0;break}}while((Z|Q)<he);if(re)break;do{if(0!==(Z=Id(n[V],s,F,k,0,t))){for(N=0;N<Z;N++)n[q+N]=s[F+N];if(q+=Z,F+=Z,(k-=Z)<=1){re=!0;break}}if(n[q++]=n[V++],0==--O){re=!0;break}if(0!==(Q=Ad(s[F],n,V,O,0,t))){for(N=0;N<Q;N++)n[q+N]=n[V+N];if(q+=Q,V+=Q,0==(O-=Q)){re=!0;break}}if(n[q++]=s[F++],1==--k){re=!0;break}he--}while(Z>=7||Q>=7);if(re)break;he<0&&(he=0),he+=2}if((o=he)<1&&(o=1),1===k){for(N=0;N<O;N++)n[q+N]=n[V+N];n[q+O]=s[F]}else{if(0===k)throw new Error;for(N=0;N<k;N++)n[q+N]=s[F+N]}}else{for(N=0;N<O;N++)n[q+N]=n[V+N];n[q+O]=s[F]}else for(N=0;N<k;N++)n[q+N]=s[F+N]}(d,p,m,b):function(S,k,D,O){var N=0;for(N=0;N<O;N++)s[N]=n[D+N];var F=S+k-1,V=O-1,q=D+O-1,Z=0,Q=0;if(n[q--]=n[F--],0!=--k)if(1!==O){for(var re=o;;){var he=0,ge=0,ve=!1;do{if(t(s[V],n[F])<0){if(n[q--]=n[F--],he++,ge=0,0==--k){ve=!0;break}}else if(n[q--]=s[V--],ge++,he=0,1==--O){ve=!0;break}}while((he|ge)<re);if(ve)break;do{if(0!=(he=k-Id(s[V],n,S,k,k-1,t))){for(k-=he,Q=1+(q-=he),Z=1+(F-=he),N=he-1;N>=0;N--)n[Q+N]=n[Z+N];if(0===k){ve=!0;break}}if(n[q--]=s[V--],1==--O){ve=!0;break}if(0!=(ge=O-Ad(n[F],s,0,O,O-1,t))){for(O-=ge,Q=1+(q-=ge),Z=1+(V-=ge),N=0;N<ge;N++)n[Q+N]=s[Z+N];if(O<=1){ve=!0;break}}if(n[q--]=n[F--],0==--k){ve=!0;break}re--}while(he>=7||ge>=7);if(ve)break;re<0&&(re=0),re+=2}if((o=re)<1&&(o=1),1===O){for(Q=1+(q-=k),Z=1+(F-=k),N=k-1;N>=0;N--)n[Q+N]=n[Z+N];n[q]=s[V]}else{if(0===O)throw new Error;for(Z=q-(O-1),N=0;N<O;N++)n[Z+N]=s[N]}}else{for(Q=1+(q-=k),Z=1+(F-=k),N=k-1;N>=0;N--)n[Q+N]=n[Z+N];n[q]=s[V]}else for(Z=q-(O-1),N=0;N<O;N++)n[Z+N]=s[N]}(d,p,m,b))}return e=[],r=[],{mergeRuns:function(){for(;i>1;){var c=i-2;if(c>=1&&r[c-1]<=r[c]+r[c+1]||c>=2&&r[c-2]<=r[c]+r[c-1])r[c-1]<r[c+1]&&c--;else if(r[c]>r[c+1])break;l(c)}},forceMergeRuns:function(){for(;i>1;){var c=i-2;c>0&&r[c-1]<r[c+1]&&c--,l(c)}},pushRun:function(c,d){e[i]=c,r[i]=d,i+=1}}}(n,t),l=function(d){for(var p=0;d>=32;)p|=1&d,d>>=1;return d+p}(o);do{if((i=Sp(n,e,r,t))<l){var c=o;c>l&&(c=l),Cp(n,e,e+c,e+i,t),i=c}s.pushRun(e,i),s.mergeRuns(),o-=i,e+=i}while(0!==o);s.forceMergeRuns()}}}Ce(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(n){Du.prototype[n]=function(t){var e,r,o=t.zrX,i=t.zrY,s=Lc(this,o,i);if("mouseup"===n&&s||(r=(e=this.findHover(o,i)).target),"mousedown"===n)this._downEl=r,this._downPoint=[t.zrX,t.zrY],this._upEl=r;else if("mouseup"===n)this._upEl=r;else if("click"===n){if(this._downEl!==this._upEl||!this._downPoint||Fn(this._downPoint,[t.zrX,t.zrY])>4)return;this._downPoint=null}this.dispatchToElement(e,n,t)}});var vc=!1;function Ai(){vc||(vc=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function sa(n,t){return n.zlevel===t.zlevel?n.z===t.z?n.z2-t.z2:n.z-t.z:n.zlevel-t.zlevel}var ch=function(){function n(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=sa}return n.prototype.traverse=function(t,e){for(var r=0;r<this._roots.length;r++)this._roots[r].traverse(t,e)},n.prototype.getDisplayList=function(t,e){e=e||!1;var r=this._displayList;return!t&&r.length||this.updateDisplayList(e),r},n.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,r=this._displayList,o=0,i=e.length;o<i;o++)this._updateAndAddDisplayable(e[o],null,t);r.length=this._displayListLen,jh(r,sa)},n.prototype._updateAndAddDisplayable=function(t,e,r){if(!t.ignore||r){t.beforeUpdate(),t.update(),t.afterUpdate();var o=t.getClipPath();if(t.ignoreClip)e=null;else if(o){e=e?e.slice():[];for(var i=o,s=t;i;)i.parent=s,i.updateTransform(),e.push(i),s=i,i=i.getClipPath()}if(t.childrenRef){for(var l=t.childrenRef(),c=0;c<l.length;c++){var d=l[c];t.__dirty&&(d.__dirty|=1),this._updateAndAddDisplayable(d,e,r)}t.__dirty=0}else{var p=t;e&&e.length?p.__clipPaths=e:p.__clipPaths&&p.__clipPaths.length>0&&(p.__clipPaths=[]),isNaN(p.z)&&(Ai(),p.z=0),isNaN(p.z2)&&(Ai(),p.z2=0),isNaN(p.zlevel)&&(Ai(),p.zlevel=0),this._displayList[this._displayListLen++]=p}var m=t.getDecalElement&&t.getDecalElement();m&&this._updateAndAddDisplayable(m,e,r);var b=t.getTextGuideLine();b&&this._updateAndAddDisplayable(b,e,r);var _=t.getTextContent();_&&this._updateAndAddDisplayable(_,e,r)}},n.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},n.prototype.delRoot=function(t){if(t instanceof Array)for(var e=0,r=t.length;e<r;e++)this.delRoot(t[e]);else{var o=Ir(this._roots,t);o>=0&&this._roots.splice(o,1)}},n.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},n.prototype.getRoots=function(){return this._roots},n.prototype.dispose=function(){this._displayList=null,this._roots=null},n}(),Nl=zn.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(n){return setTimeout(n,16)},Cf={linear:function(n){return n},quadraticIn:function(n){return n*n},quadraticOut:function(n){return n*(2-n)},quadraticInOut:function(n){return(n*=2)<1?.5*n*n:-.5*(--n*(n-2)-1)},cubicIn:function(n){return n*n*n},cubicOut:function(n){return--n*n*n+1},cubicInOut:function(n){return(n*=2)<1?.5*n*n*n:.5*((n-=2)*n*n+2)},quarticIn:function(n){return n*n*n*n},quarticOut:function(n){return 1- --n*n*n*n},quarticInOut:function(n){return(n*=2)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2)},quinticIn:function(n){return n*n*n*n*n},quinticOut:function(n){return--n*n*n*n*n+1},quinticInOut:function(n){return(n*=2)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2)},sinusoidalIn:function(n){return 1-Math.cos(n*Math.PI/2)},sinusoidalOut:function(n){return Math.sin(n*Math.PI/2)},sinusoidalInOut:function(n){return.5*(1-Math.cos(Math.PI*n))},exponentialIn:function(n){return 0===n?0:Math.pow(1024,n-1)},exponentialOut:function(n){return 1===n?1:1-Math.pow(2,-10*n)},exponentialInOut:function(n){return 0===n?0:1===n?1:(n*=2)<1?.5*Math.pow(1024,n-1):.5*(2-Math.pow(2,-10*(n-1)))},circularIn:function(n){return 1-Math.sqrt(1-n*n)},circularOut:function(n){return Math.sqrt(1- --n*n)},circularInOut:function(n){return(n*=2)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1)},elasticIn:function(n){var t,e=.1;return 0===n?0:1===n?1:(!e||e<1?(e=1,t=.1):t=.4*Math.asin(1/e)/(2*Math.PI),-e*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/.4))},elasticOut:function(n){var t,e=.1;return 0===n?0:1===n?1:(!e||e<1?(e=1,t=.1):t=.4*Math.asin(1/e)/(2*Math.PI),e*Math.pow(2,-10*n)*Math.sin((n-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(n){var t,e=.1;return 0===n?0:1===n?1:(!e||e<1?(e=1,t=.1):t=.4*Math.asin(1/e)/(2*Math.PI),(n*=2)<1?e*Math.pow(2,10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/.4)*-.5:e*Math.pow(2,-10*(n-=1))*Math.sin((n-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(n){var t=1.70158;return n*n*((t+1)*n-t)},backOut:function(n){var t=1.70158;return--n*n*((t+1)*n+t)+1},backInOut:function(n){var t=2.5949095;return(n*=2)<1?n*n*((t+1)*n-t)*.5:.5*((n-=2)*n*((t+1)*n+t)+2)},bounceIn:function(n){return 1-Cf.bounceOut(1-n)},bounceOut:function(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},bounceInOut:function(n){return n<.5?.5*Cf.bounceIn(2*n):.5*Cf.bounceOut(2*n-1)+.5}},Mf=Math.pow,ol=Math.sqrt,yc=ol(3),Ta=1/3,fs=ra(),zi=ra(),Bl=ra();function ec(n){return n>-1e-8&&n<1e-8}function Zs(n){return n>1e-8||n<-1e-8}function Da(n,t,e,r,o){var i=1-o;return i*i*(i*n+3*o*t)+o*o*(o*r+3*i*e)}function rd(n,t,e,r,o){var i=1-o;return 3*(((t-n)*i+2*(e-t)*o)*i+(r-e)*o*o)}function zl(n,t,e,r,o,i){var s=r+3*(t-e)-n,l=3*(e-2*t+n),c=3*(t-n),d=n-o,p=l*l-3*s*c,m=l*c-9*s*d,b=c*c-3*l*d,_=0;if(ec(p)&&ec(m))ec(l)?i[0]=0:(re=-c/l)>=0&&re<=1&&(i[_++]=re);else{var S=m*m-4*p*b;if(ec(S)){var k=m/p,D=-k/2;(re=-l/s+k)>=0&&re<=1&&(i[_++]=re),D>=0&&D<=1&&(i[_++]=D)}else if(S>0){var O=ol(S),N=p*l+1.5*s*(-m+O),F=p*l+1.5*s*(-m-O);(re=(-l-((N=N<0?-Mf(-N,Ta):Mf(N,Ta))+(F=F<0?-Mf(-F,Ta):Mf(F,Ta))))/(3*s))>=0&&re<=1&&(i[_++]=re)}else{var V=(2*p*l-3*s*m)/(2*ol(p*p*p)),q=Math.acos(V)/3,Z=ol(p),Q=Math.cos(q),re=(-l-2*Z*Q)/(3*s),he=(D=(-l+Z*(Q+yc*Math.sin(q)))/(3*s),(-l+Z*(Q-yc*Math.sin(q)))/(3*s));re>=0&&re<=1&&(i[_++]=re),D>=0&&D<=1&&(i[_++]=D),he>=0&&he<=1&&(i[_++]=he)}}return _}function Nc(n,t,e,r,o){var i=6*e-12*t+6*n,s=9*t+3*r-3*n-9*e,l=3*t-3*n,c=0;if(ec(s))Zs(i)&&(p=-l/i)>=0&&p<=1&&(o[c++]=p);else{var d=i*i-4*s*l;if(ec(d))o[0]=-i/(2*s);else if(d>0){var p,m=ol(d),b=(-i-m)/(2*s);(p=(-i+m)/(2*s))>=0&&p<=1&&(o[c++]=p),b>=0&&b<=1&&(o[c++]=b)}}return c}function kf(n,t,e,r,o,i){var s=(t-n)*o+n,l=(e-t)*o+t,c=(r-e)*o+e,d=(l-s)*o+s,p=(c-l)*o+l,m=(p-d)*o+d;i[0]=n,i[1]=s,i[2]=d,i[3]=m,i[4]=m,i[5]=p,i[6]=c,i[7]=r}function Ja(n,t,e,r,o,i,s,l,c,d,p){var m,b,_,S,k,D=.005,O=1/0;fs[0]=c,fs[1]=d;for(var N=0;N<1;N+=.05)zi[0]=Da(n,e,o,s,N),zi[1]=Da(t,r,i,l,N),(S=Ln(fs,zi))<O&&(m=N,O=S);O=1/0;for(var F=0;F<32&&!(D<1e-4);F++)_=m+D,zi[0]=Da(n,e,o,s,b=m-D),zi[1]=Da(t,r,i,l,b),S=Ln(zi,fs),b>=0&&S<O?(m=b,O=S):(Bl[0]=Da(n,e,o,s,_),Bl[1]=Da(t,r,i,l,_),k=Ln(Bl,fs),_<=1&&k<O?(m=_,O=k):D*=.5);return p&&(p[0]=Da(n,e,o,s,m),p[1]=Da(t,r,i,l,m)),ol(O)}function km(n,t,e,r,o,i,s,l,c){for(var d=n,p=t,m=0,b=1/c,_=1;_<=c;_++){var S=_*b,k=Da(n,e,o,s,S),D=Da(t,r,i,l,S),O=k-d,N=D-p;m+=Math.sqrt(O*O+N*N),d=k,p=D}return m}function Sa(n,t,e,r){var o=1-r;return o*(o*n+2*r*t)+r*r*e}function wl(n,t,e,r){return 2*((1-r)*(t-n)+r*(e-t))}function Qa(n,t,e){var r=n+e-2*t;return 0===r?.5:(n-t)/r}function rf(n,t,e,r,o){var i=(t-n)*r+n,s=(e-t)*r+t,l=(s-i)*r+i;o[0]=n,o[1]=i,o[2]=l,o[3]=l,o[4]=s,o[5]=e}function yb(n,t,e,r,o,i,s,l,c){var d,p=.005,m=1/0;fs[0]=s,fs[1]=l;for(var b=0;b<1;b+=.05)zi[0]=Sa(n,e,o,b),zi[1]=Sa(t,r,i,b),(D=Ln(fs,zi))<m&&(d=b,m=D);m=1/0;for(var _=0;_<32&&!(p<1e-4);_++){var S=d-p,k=d+p;zi[0]=Sa(n,e,o,S),zi[1]=Sa(t,r,i,S);var D=Ln(zi,fs);if(S>=0&&D<m)d=S,m=D;else{Bl[0]=Sa(n,e,o,k),Bl[1]=Sa(t,r,i,k);var O=Ln(Bl,fs);k<=1&&O<m?(d=k,m=O):p*=.5}}return c&&(c[0]=Sa(n,e,o,d),c[1]=Sa(t,r,i,d)),ol(m)}function Wu(n,t,e,r,o,i,s){for(var l=n,c=t,d=0,p=1/s,m=1;m<=s;m++){var b=m*p,_=Sa(n,e,o,b),S=Sa(t,r,i,b),k=_-l,D=S-c;d+=Math.sqrt(k*k+D*D),l=_,c=S}return d}var Gu=/cubic-bezier\(([0-9,\.e ]+)\)/;function Sl(n){var t=n&&Gu.exec(n);if(t){var e=t[1].split(","),r=+ki(e[0]),o=+ki(e[1]),i=+ki(e[2]),s=+ki(e[3]);if(isNaN(r+o+i+s))return;var l=[];return function(c){return c<=0?0:c>=1?1:zl(0,r,i,1,c,l)&&Da(0,o,s,1,l[0])}}}var Aa=function(){function n(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||Fo,this.ondestroy=t.ondestroy||Fo,this.onrestart=t.onrestart||Fo,t.easing&&this.setEasing(t.easing)}return n.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),!this._paused){var r=this._life,o=t-this._startTime-this._pausedTime,i=o/r;i<0&&(i=0),i=Math.min(i,1);var s=this.easingFunc,l=s?s(i):i;if(this.onframe(l),1===i){if(!this.loop)return!0;this._startTime=t-o%r,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=e},n.prototype.pause=function(){this._paused=!0},n.prototype.resume=function(){this._paused=!1},n.prototype.setEasing=function(t){this.easing=t,this.easingFunc=yr(t)?t:Cf[t]||Sl(t)},n}(),Fs=function(n){this.value=n},Is=function(){function n(){this._len=0}return n.prototype.insert=function(t){var e=new Fs(t);return this.insertEntry(e),e},n.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},n.prototype.remove=function(t){var e=t.prev,r=t.next;e?e.next=r:this.head=r,r?r.prev=e:this.tail=e,t.next=t.prev=null,this._len--},n.prototype.len=function(){return this._len},n.prototype.clear=function(){this.head=this.tail=null,this._len=0},n}(),Vo=function(){function n(t){this._list=new Is,this._maxSize=10,this._map={},this._maxSize=t}return n.prototype.put=function(t,e){var r=this._list,o=this._map,i=null;if(null==o[t]){var s=r.len(),l=this._lastRemovedEntry;if(s>=this._maxSize&&s>0){var c=r.head;r.remove(c),delete o[c.key],i=c.value,this._lastRemovedEntry=c}l?l.value=e:l=new Fs(e),l.key=t,r.insertEntry(l),o[t]=l}return i},n.prototype.get=function(t){var e=this._map[t],r=this._list;if(null!=e)return e!==r.tail&&(r.remove(e),r.insertEntry(e)),e.value},n.prototype.clear=function(){this._list.clear(),this._map={}},n.prototype.len=function(){return this._list.len()},n}(),Mp={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Uu(n){return(n=Math.round(n))<0?0:n>255?255:n}function Ia(n){return n<0?0:n>1?1:n}function co(n){var t=n;return t.length&&"%"===t.charAt(t.length-1)?Uu(parseFloat(t)/100*255):Uu(parseInt(t,10))}function Bc(n){var t=n;return t.length&&"%"===t.charAt(t.length-1)?Ia(parseFloat(t)/100):Ia(parseFloat(t))}function Ar(n,t,e){return e<0?e+=1:e>1&&(e-=1),6*e<1?n+(t-n)*e*6:2*e<1?t:3*e<2?n+(t-n)*(2/3-e)*6:n}function ju(n,t,e){return n+(t-n)*e}function il(n,t,e,r,o){return n[0]=t,n[1]=e,n[2]=r,n[3]=o,n}function Yh(n,t){return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}var os=new Vo(20),Oo=null;function Yu(n,t){Oo&&Yh(Oo,t),Oo=os.put(n,Oo||t.slice())}function oo(n,t){if(n){t=t||[];var e=os.get(n);if(e)return Yh(t,e);var r=(n+="").replace(/ /g,"").toLowerCase();if(r in Mp)return Yh(t,Mp[r]),Yu(n,t),t;var o,i=r.length;if("#"===r.charAt(0))return 4===i||5===i?(o=parseInt(r.slice(1,4),16))>=0&&o<=4095?(il(t,(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,5===i?parseInt(r.slice(4),16)/15:1),Yu(n,t),t):void il(t,0,0,0,1):7===i||9===i?(o=parseInt(r.slice(1,7),16))>=0&&o<=16777215?(il(t,(16711680&o)>>16,(65280&o)>>8,255&o,9===i?parseInt(r.slice(7),16)/255:1),Yu(n,t),t):void il(t,0,0,0,1):void 0;var s=r.indexOf("("),l=r.indexOf(")");if(-1!==s&&l+1===i){var c=r.substr(0,s),d=r.substr(s+1,l-(s+1)).split(","),p=1;switch(c){case"rgba":if(4!==d.length)return 3===d.length?il(t,+d[0],+d[1],+d[2],1):il(t,0,0,0,1);p=Bc(d.pop());case"rgb":return d.length>=3?(il(t,co(d[0]),co(d[1]),co(d[2]),3===d.length?p:Bc(d[3])),Yu(n,t),t):void il(t,0,0,0,1);case"hsla":return 4!==d.length?void il(t,0,0,0,1):(d[3]=Bc(d[3]),vs(d,t),Yu(n,t),t);case"hsl":return 3!==d.length?void il(t,0,0,0,1):(vs(d,t),Yu(n,t),t);default:return}}il(t,0,0,0,1)}}function vs(n,t){var e=(parseFloat(n[0])%360+360)%360/360,r=Bc(n[1]),o=Bc(n[2]),i=o<=.5?o*(r+1):o+r-o*r,s=2*o-i;return il(t=t||[],Uu(255*Ar(s,i,e+1/3)),Uu(255*Ar(s,i,e)),Uu(255*Ar(s,i,e-1/3)),1),4===n.length&&(t[3]=n[3]),t}function Cl(n,t){var e=oo(n);if(e){for(var r=0;r<3;r++)e[r]=t<0?e[r]*(1-t)|0:(255-e[r])*t+e[r]|0,e[r]>255?e[r]=255:e[r]<0&&(e[r]=0);return hu(e,4===e.length?"rgba":"rgb")}}function Tm(n,t,e){if(t&&t.length&&n>=0&&n<=1){e=e||[];var r=n*(t.length-1),o=Math.floor(r),i=Math.ceil(r),s=t[o],l=t[i],c=r-o;return e[0]=Uu(ju(s[0],l[0],c)),e[1]=Uu(ju(s[1],l[1],c)),e[2]=Uu(ju(s[2],l[2],c)),e[3]=Ia(ju(s[3],l[3],c)),e}}function qu(n,t,e){if(t&&t.length&&n>=0&&n<=1){var r=n*(t.length-1),o=Math.floor(r),i=Math.ceil(r),s=oo(t[o]),l=oo(t[i]),c=r-o,d=hu([Uu(ju(s[0],l[0],c)),Uu(ju(s[1],l[1],c)),Uu(ju(s[2],l[2],c)),Ia(ju(s[3],l[3],c))],"rgba");return e?{color:d,leftIndex:o,rightIndex:i,value:r}:d}}function du(n,t,e,r){var i,o=oo(n);if(n)return o=function(i){if(i){var s,l,c=i[0]/255,d=i[1]/255,p=i[2]/255,m=Math.min(c,d,p),b=Math.max(c,d,p),_=b-m,S=(b+m)/2;if(0===_)s=0,l=0;else{l=S<.5?_/(b+m):_/(2-b-m);var k=((b-c)/6+_/2)/_,D=((b-d)/6+_/2)/_,O=((b-p)/6+_/2)/_;c===b?s=O-D:d===b?s=1/3+k-O:p===b&&(s=2/3+D-k),s<0&&(s+=1),s>1&&(s-=1)}var N=[360*s,l,S];return null!=i[3]&&N.push(i[3]),N}}(o),null!=t&&(o[0]=(i=t,(i=Math.round(i))<0?0:i>360?360:i)),null!=e&&(o[1]=Bc(e)),null!=r&&(o[2]=Bc(r)),hu(vs(o),"rgba")}function od(n,t){var e=oo(n);if(e&&null!=t)return e[3]=Ia(t),hu(e,"rgba")}function hu(n,t){if(n&&n.length){var e=n[0]+","+n[1]+","+n[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(e+=","+n[3]),t+"("+e+")"}}function Od(n,t){var e=oo(n);return e?(.299*e[0]+.587*e[1]+.114*e[2])*e[3]/255+(1-e[3])*t:0}var qh=Object.freeze({__proto__:null,parse:oo,lift:Cl,toHex:function(n){var t=oo(n);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)},fastLerp:Tm,fastMapToColor:Tm,lerp:qu,mapToColor:qu,modifyHSL:du,modifyAlpha:od,stringify:hu,lum:Od,random:function(){return hu([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")}}),ga=Math.round;function Vs(n){var t;if(n&&"transparent"!==n){if("string"==typeof n&&n.indexOf("rgba")>-1){var e=oo(n);e&&(n="rgb("+e[0]+","+e[1]+","+e[2]+")",t=e[3])}}else n="none";return{color:n,opacity:null==t?1:t}}function es(n){return n<1e-4&&n>-1e-4}function kp(n){return ga(1e3*n)/1e3}function pn(n){return ga(1e4*n)/1e4}var tc={left:"start",right:"end",center:"middle",middle:"middle"};function Yr(n){return n&&!!n.image}function fh(n){return Yr(n)||(t=n)&&!!t.svgElement;var t}function Xu(n){return"linear"===n.type}function Tf(n){return"radial"===n.type}function Df(n){return n&&("linear"===n.type||"radial"===n.type)}function al(n){return"url(#"+n+")"}function vi(n){var t=n.getGlobalScale(),e=Math.max(t[0],t[1]);return Math.max(Math.ceil(Math.log(e)/Math.log(10)),1)}function id(n){var t=n.x||0,e=n.y||0,r=(n.rotation||0)*Tr,o=un(n.scaleX,1),i=un(n.scaleY,1),s=n.skewX||0,l=n.skewY||0,c=[];return(t||e)&&c.push("translate("+t+"px,"+e+"px)"),r&&c.push("rotate("+r+")"),1===o&&1===i||c.push("scale("+o+","+i+")"),(s||l)&&c.push("skew("+ga(s*Tr)+"deg, "+ga(l*Tr)+"deg)"),c.join(" ")}var $y=zn.hasGlobalWindow&&yr(window.btoa)?function(n){return window.btoa(unescape(encodeURIComponent(n)))}:"undefined"!=typeof Buffer?function(n){return Buffer.from(n).toString("base64")}:function(n){return null},Qi=Array.prototype.slice;function bc(n,t,e){return(t-n)*e+n}function of(n,t,e,r){for(var o=t.length,i=0;i<o;i++)n[i]=bc(t[i],e[i],r);return n}function Pi(n,t,e,r){for(var o=t.length,i=0;i<o;i++)n[i]=t[i]+e[i]*r;return n}function St(n,t,e,r){for(var o=t.length,i=o&&t[0].length,s=0;s<o;s++){n[s]||(n[s]=[]);for(var l=0;l<i;l++)n[s][l]=t[s][l]+e[s][l]*r}return n}function Fc(n,t){for(var e=n.length,r=t.length,o=e>r?t:n,i=Math.min(e,r),s=o[i-1]||{color:[0,0,0,0],offset:0},l=i;l<Math.max(e,r);l++)o.push({offset:s.offset,color:s.color.slice()})}function Ks(n,t,e){var r=n,o=t;if(r.push&&o.push){var i=r.length,s=o.length;if(i!==s)if(i>s)r.length=s;else for(var l=i;l<s;l++)r.push(1===e?o[l]:Qi.call(o[l]));var c=r[0]&&r[0].length;for(l=0;l<r.length;l++)if(1===e)isNaN(r[l])&&(r[l]=o[l]);else for(var d=0;d<c;d++)isNaN(r[l][d])&&(r[l][d]=o[l][d])}}function nc(n){if(nn(n)){var t=n.length;if(nn(n[0])){for(var e=[],r=0;r<t;r++)e.push(Qi.call(n[r]));return e}return Qi.call(n)}return n}function ys(n){return n[0]=Math.floor(n[0])||0,n[1]=Math.floor(n[1])||0,n[2]=Math.floor(n[2])||0,n[3]=null==n[3]?1:n[3],"rgba("+n.join(",")+")"}function ds(n){return 4===n||5===n}function Zi(n){return 1===n||2===n}var sl=[0,0,0,0],Tp=function(){function n(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return n.prototype.isFinished=function(){return this._finished},n.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},n.prototype.needsAnimate=function(){return this.keyframes.length>=1},n.prototype.getAdditiveTrack=function(){return this._additiveTrack},n.prototype.addKeyframe=function(t,e,r){this._needsSort=!0;var _,o=this.keyframes,i=o.length,s=!1,l=6,c=e;if(nn(e)){var d=nn((_=e)&&_[0])?2:1;l=d,(1===d&&!gr(e[0])||2===d&&!gr(e[0][0]))&&(s=!0)}else if(gr(e)&&!wn(e))l=0;else if(ir(e))if(isNaN(+e)){var p=oo(e);p&&(c=p,l=3)}else l=0;else if(sn(e)){var m=Lt({},c);m.colorStops=mt(e.colorStops,function(_){return{offset:_.offset,color:oo(_.color)}}),Xu(e)?l=4:Tf(e)&&(l=5),c=m}0===i?this.valType=l:l===this.valType&&6!==l||(s=!0),this.discrete=this.discrete||s;var b={time:t,value:c,rawValue:e,percent:0};return r&&(b.easing=r,b.easingFunc=yr(r)?r:Cf[r]||Sl(r)),o.push(b),b},n.prototype.prepare=function(t,e){var r=this.keyframes;this._needsSort&&r.sort(function(k,D){return k.time-D.time});for(var o=this.valType,i=r.length,s=r[i-1],l=this.discrete,c=Zi(o),d=ds(o),p=0;p<i;p++){var m=r[p],b=m.value,_=s.value;m.percent=m.time/t,l||(c&&p!==i-1?Ks(b,_,o):d&&Fc(b.colorStops,_.colorStops))}if(!l&&5!==o&&e&&this.needsAnimate()&&e.needsAnimate()&&o===e.valType&&!e._finished){this._additiveTrack=e;var S=r[0].value;for(p=0;p<i;p++)0===o?r[p].additiveValue=r[p].value-S:3===o?r[p].additiveValue=Pi([],r[p].value,S,-1):Zi(o)&&(r[p].additiveValue=1===o?Pi([],r[p].value,S,-1):St([],r[p].value,S,-1))}},n.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var r,o,i,s=null!=this._additiveTrack,l=s?"additiveValue":"value",c=this.valType,d=this.keyframes,p=d.length,m=this.propName,b=3===c,_=this._lastFr,S=Math.min;if(1===p)o=i=d[0];else{if(e<0)r=0;else if(e<this._lastFrP){for(r=S(_+1,p-1);r>=0&&!(d[r].percent<=e);r--);r=S(r,p-2)}else{for(r=_;r<p&&!(d[r].percent>e);r++);r=S(r-1,p-2)}i=d[r+1],o=d[r]}if(o&&i){this._lastFr=r,this._lastFrP=e;var k=i.percent-o.percent,D=0===k?1:S((e-o.percent)/k,1);i.easingFunc&&(D=i.easingFunc(D));var O=s?this._additiveValue:b?sl:t[m];if(!Zi(c)&&!b||O||(O=this._additiveValue=[]),this.discrete)t[m]=D<1?o.rawValue:i.rawValue;else if(Zi(c))1===c?of(O,o[l],i[l],D):function(Z,Q,re,he){for(var ge=Q.length,ve=ge&&Q[0].length,_e=0;_e<ge;_e++){Z[_e]||(Z[_e]=[]);for(var Ee=0;Ee<ve;Ee++)Z[_e][Ee]=bc(Q[_e][Ee],re[_e][Ee],he)}}(O,o[l],i[l],D);else if(ds(c)){var N=o[l],F=i[l],V=4===c;t[m]={type:V?"linear":"radial",x:bc(N.x,F.x,D),y:bc(N.y,F.y,D),colorStops:mt(N.colorStops,function(Z,Q){var re=F.colorStops[Q];return{offset:bc(Z.offset,re.offset,D),color:ys(of([],Z.color,re.color,D))}}),global:F.global},V?(t[m].x2=bc(N.x2,F.x2,D),t[m].y2=bc(N.y2,F.y2,D)):t[m].r=bc(N.r,F.r,D)}else if(b)of(O,o[l],i[l],D),s||(t[m]=ys(O));else{var q=bc(o[l],i[l],D);s?this._additiveValue=q:t[m]=q}s&&this._addToTarget(t)}}},n.prototype._addToTarget=function(t){var e=this.valType,r=this.propName,o=this._additiveValue;0===e?t[r]=t[r]+o:3===e?(oo(t[r],sl),Pi(sl,sl,o,1),t[r]=ys(sl)):1===e?Pi(t[r],t[r],o,1):2===e&&St(t[r],t[r],o,1)},n}(),Nr=function(){function n(t,e,r,o){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&o?qe("Can' use additive animation on looped animation."):(this._additiveAnimators=o,this._allowDiscrete=r)}return n.prototype.getMaxTime=function(){return this._maxTime},n.prototype.getDelay=function(){return this._delay},n.prototype.getLoop=function(){return this._loop},n.prototype.getTarget=function(){return this._target},n.prototype.changeTarget=function(t){this._target=t},n.prototype.when=function(t,e,r){return this.whenWithKeys(t,e,rr(e),r)},n.prototype.whenWithKeys=function(t,e,r,o){for(var i=this._tracks,s=0;s<r.length;s++){var l=r[s],c=i[l];if(!c){c=i[l]=new Tp(l);var d=void 0,p=this._getAdditiveTrack(l);if(p){var m=p.keyframes,b=m[m.length-1];d=b&&b.value,3===p.valType&&d&&(d=ys(d))}else d=this._target[l];if(null==d)continue;t>0&&c.addKeyframe(0,nc(d),o),this._trackKeys.push(l)}c.addKeyframe(t,nc(e[l]),o)}return this._maxTime=Math.max(this._maxTime,t),this},n.prototype.pause=function(){this._clip.pause(),this._paused=!0},n.prototype.resume=function(){this._clip.resume(),this._paused=!1},n.prototype.isPaused=function(){return!!this._paused},n.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},n.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,r=0;r<e;r++)t[r].call(this)},n.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var r=0;r<e.length;r++)e[r].call(this)},n.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,r=0;r<e.length;r++)t[e[r]].setFinished()},n.prototype._getAdditiveTrack=function(t){var e,r=this._additiveAnimators;if(r)for(var o=0;o<r.length;o++){var i=r[o].getTrack(t);i&&(e=i)}return e},n.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,r=[],o=this._maxTime||0,i=0;i<this._trackKeys.length;i++){var s=this._trackKeys[i],l=this._tracks[s],c=this._getAdditiveTrack(s),d=l.keyframes,p=d.length;if(l.prepare(o,c),l.needsAnimate())if(!this._allowDiscrete&&l.discrete){var m=d[p-1];m&&(e._target[l.propName]=m.rawValue),l.setFinished()}else r.push(l)}if(r.length||this._force){var b=new Aa({life:o,loop:this._loop,delay:this._delay||0,onframe:function(_){e._started=2;var S=e._additiveAnimators;if(S){for(var k=!1,D=0;D<S.length;D++)if(S[D]._clip){k=!0;break}k||(e._additiveAnimators=null)}for(D=0;D<r.length;D++)r[D].step(e._target,_);var O=e._onframeCbs;if(O)for(D=0;D<O.length;D++)O[D](e._target,_)},ondestroy:function(){e._doneCallback()}});this._clip=b,this.animation&&this.animation.addClip(b),t&&b.setEasing(t)}else this._doneCallback();return this}},n.prototype.stop=function(t){this._clip&&(t&&this._clip.onframe(1),this._abortedCallback())},n.prototype.delay=function(t){return this._delay=t,this},n.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},n.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},n.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},n.prototype.getClip=function(){return this._clip},n.prototype.getTrack=function(t){return this._tracks[t]},n.prototype.getTracks=function(){var t=this;return mt(this._trackKeys,function(e){return t._tracks[e]})},n.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var r=this._tracks,o=this._trackKeys,i=0;i<t.length;i++){var s=r[t[i]];s&&!s.isFinished()&&(e?s.step(this._target,1):1===this._started&&s.step(this._target,0),s.setFinished())}var l=!0;for(i=0;i<o.length;i++)if(!r[o[i]].isFinished()){l=!1;break}return l&&this._abortedCallback(),l},n.prototype.saveTo=function(t,e,r){if(t){e=e||this._trackKeys;for(var o=0;o<e.length;o++){var i=e[o],s=this._tracks[i];if(s&&!s.isFinished()){var l=s.keyframes,c=l[r?0:l.length-1];c&&(t[i]=nc(c.rawValue))}}}},n.prototype.__changeFinalValue=function(t,e){e=e||rr(t);for(var r=0;r<e.length;r++){var o=e[r],i=this._tracks[o];if(i){var s=i.keyframes;if(s.length>1){var l=s.pop();i.addKeyframe(l.time,t[o]),i.prepare(this._maxTime,i.getAdditiveTrack())}}}},n}();function bs(){return(new Date).getTime()}var Dp,ad,y=function(n){function t(e){var r=n.call(this)||this;return r._running=!1,r._time=0,r._pausedTime=0,r._pauseStart=0,r._paused=!1,r.stage=(e=e||{}).stage||{},r}return gt(t,n),t.prototype.addClip=function(e){e.animation&&this.removeClip(e),this._head?(this._tail.next=e,e.prev=this._tail,e.next=null,this._tail=e):this._head=this._tail=e,e.animation=this},t.prototype.addAnimator=function(e){e.animation=this;var r=e.getClip();r&&this.addClip(r)},t.prototype.removeClip=function(e){if(e.animation){var r=e.prev,o=e.next;r?r.next=o:this._head=o,o?o.prev=r:this._tail=r,e.next=e.prev=e.animation=null}},t.prototype.removeAnimator=function(e){var r=e.getClip();r&&this.removeClip(r),e.animation=null},t.prototype.update=function(e){for(var r=bs()-this._pausedTime,o=r-this._time,i=this._head;i;){var s=i.next;i.step(r,o)&&(i.ondestroy(),this.removeClip(i)),i=s}this._time=r,e||(this.trigger("frame",o),this.stage.update&&this.stage.update())},t.prototype._startLoop=function(){var e=this;this._running=!0,Nl(function r(){e._running&&(Nl(r),!e._paused&&e.update())})},t.prototype.start=function(){this._running||(this._time=bs(),this._pausedTime=0,this._startLoop())},t.prototype.stop=function(){this._running=!1},t.prototype.pause=function(){this._paused||(this._pauseStart=bs(),this._paused=!0)},t.prototype.resume=function(){this._paused&&(this._pausedTime+=bs()-this._pauseStart,this._paused=!1)},t.prototype.clear=function(){for(var e=this._head;e;){var r=e.next;e.prev=e.next=e.animation=null,e=r}this._head=this._tail=null},t.prototype.isFinished=function(){return null==this._head},t.prototype.animate=function(e,r){r=r||{},this.start();var o=new Nr(e,r.loop);return this.addAnimator(o),o},t}(bo),T=zn.domSupported,E=(ad={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Dp=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:mt(Dp,function(n){var t=n.replace("mouse","pointer");return ad.hasOwnProperty(t)?t:n})}),B=["mousemove","mouseup"],U=["pointermove","pointerup"],ne=!1;function ee(n){var t=n.pointerType;return"pen"===t||"touch"===t}function ae(n){n&&(n.zrByTouch=!0)}function fe(n,t){for(var e=t,r=!1;e&&9!==e.nodeType&&!(r=e.domBelongToZr||e!==t&&e===n.painterRoot);)e=e.parentNode;return r}var Me=function(n,t){this.stopPropagation=Fo,this.stopImmediatePropagation=Fo,this.preventDefault=Fo,this.type=t.type,this.target=this.currentTarget=n.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY},ke={mousedown:function(n){n=to(this.dom,n),this.__mayPointerCapture=[n.zrX,n.zrY],this.trigger("mousedown",n)},mousemove:function(n){n=to(this.dom,n);var t=this.__mayPointerCapture;!t||n.zrX===t[0]&&n.zrY===t[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",n)},mouseup:function(n){n=to(this.dom,n),this.__togglePointerCapture(!1),this.trigger("mouseup",n)},mouseout:function(n){fe(this,(n=to(this.dom,n)).toElement||n.relatedTarget)||(this.__pointerCapturing&&(n.zrEventControl="no_globalout"),this.trigger("mouseout",n))},wheel:function(n){ne=!0,n=to(this.dom,n),this.trigger("mousewheel",n)},mousewheel:function(n){ne||(n=to(this.dom,n),this.trigger("mousewheel",n))},touchstart:function(n){ae(n=to(this.dom,n)),this.__lastTouchMoment=new Date,this.handler.processGesture(n,"start"),ke.mousemove.call(this,n),ke.mousedown.call(this,n)},touchmove:function(n){ae(n=to(this.dom,n)),this.handler.processGesture(n,"change"),ke.mousemove.call(this,n)},touchend:function(n){ae(n=to(this.dom,n)),this.handler.processGesture(n,"end"),ke.mouseup.call(this,n),+new Date-+this.__lastTouchMoment<300&&ke.click.call(this,n)},pointerdown:function(n){ke.mousedown.call(this,n)},pointermove:function(n){ee(n)||ke.mousemove.call(this,n)},pointerup:function(n){ke.mouseup.call(this,n)},pointerout:function(n){ee(n)||ke.mouseout.call(this,n)}};Ce(["click","dblclick","contextmenu"],function(n){ke[n]=function(t){t=to(this.dom,t),this.trigger(n,t)}});var Fe={pointermove:function(n){ee(n)||Fe.mousemove.call(this,n)},pointerup:function(n){Fe.mouseup.call(this,n)},mousemove:function(n){this.trigger("mousemove",n)},mouseup:function(n){var t=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",n),t&&(n.zrEventControl="only_globalout",this.trigger("mouseout",n))}};function rt(n,t,e,r){n.mounted[t]=e,n.listenerOpts[t]=r,wa(n.domTarget,t,e,r)}function Ct(n){var i=n.mounted;for(var s in i)i.hasOwnProperty(s)&&n.domTarget.removeEventListener(s,i[s],n.listenerOpts[s]);n.mounted={}}var Vt=function(n,t){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=n,this.domHandlers=t},Wn=function(n){function t(e,r){var o=n.call(this)||this;return o.__pointerCapturing=!1,o.dom=e,o.painterRoot=r,o._localHandlerScope=new Vt(e,ke),T&&(o._globalHandlerScope=new Vt(document,Fe)),function Ze(n,t){var e=t.domHandlers;zn.pointerEventsSupported?Ce(E.pointer,function(r){rt(t,r,function(o){e[r].call(n,o)})}):(zn.touchEventsSupported&&Ce(E.touch,function(r){rt(t,r,function(o){var i;e[r].call(n,o),(i=t).touching=!0,null!=i.touchTimer&&(clearTimeout(i.touchTimer),i.touchTimer=null),i.touchTimer=setTimeout(function(){i.touching=!1,i.touchTimer=null},700)})}),Ce(E.mouse,function(r){rt(t,r,function(o){o=xp(o),t.touching||e[r].call(n,o)})}))}(o,o._localHandlerScope),o}return gt(t,n),t.prototype.dispose=function(){Ct(this._localHandlerScope),T&&Ct(this._globalHandlerScope)},t.prototype.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},t.prototype.__togglePointerCapture=function(e){if(this.__mayPointerCapture=null,T&&+this.__pointerCapturing^+e){this.__pointerCapturing=e;var r=this._globalHandlerScope;e?function ot(n,t){function e(r){rt(t,r,function(o){var i;o=xp(o),fe(n,o.target)||(o=to((i=n).dom,new Me(i,o),!0),t.domHandlers[r].call(n,o))},{capture:!0})}zn.pointerEventsSupported?Ce(U,e):zn.touchEventsSupported||Ce(B,e)}(this,r):Ct(r)}},t}(bo),An=1;zn.hasGlobalWindow&&(An=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var Un=An,$n="#333",fr="#ccc",Hr=bg;function Mo(n){return n>5e-5||n<-5e-5}var Zr=[],Qo=[],Ki=[1,0,0,1,0,0],Ii=Math.abs,To=function(){function n(){}return n.prototype.getLocalTransform=function(t){return n.getLocalTransform(this,t)},n.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},n.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},n.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},n.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},n.prototype.needLocalTransform=function(){return Mo(this.rotation)||Mo(this.x)||Mo(this.y)||Mo(this.scaleX-1)||Mo(this.scaleY-1)||Mo(this.skewX)||Mo(this.skewY)},n.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),r=this.transform;e||t?(r=r||[1,0,0,1,0,0],e?this.getLocalTransform(r):Hr(r),t&&(e?Fr(r,t,r):Hu(r,t)),this.transform=r,this._resolveGlobalScaleRatio(r)):r&&Hr(r)},n.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(null!=e&&1!==e){this.getGlobalScale(Zr);var r=Zr[0]<0?-1:1,o=Zr[1]<0?-1:1,i=((Zr[0]-r)*e+r)/Zr[0]||0,s=((Zr[1]-o)*e+o)/Zr[1]||0;t[0]*=i,t[1]*=i,t[2]*=s,t[3]*=s}this.invTransform=this.invTransform||[1,0,0,1,0,0],It(this.invTransform,t)},n.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},n.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],r=t[2]*t[2]+t[3]*t[3],o=Math.atan2(t[1],t[0]),i=Math.PI/2+o-Math.atan2(t[3],t[2]);r=Math.sqrt(r)*Math.cos(i),e=Math.sqrt(e),this.skewX=i,this.skewY=0,this.rotation=-o,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=r,this.originX=0,this.originY=0}},n.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(Fr(Qo,t.invTransform,e),e=Qo);var r=this.originX,o=this.originY;(r||o)&&(Ki[4]=r,Ki[5]=o,Fr(Qo,e,Ki),Qo[4]-=r,Qo[5]-=o,e=Qo),this.setLocalTransform(e)}},n.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},n.prototype.transformCoordToLocal=function(t,e){var r=[t,e],o=this.invTransform;return o&&gn(r,r,o),r},n.prototype.transformCoordToGlobal=function(t,e){var r=[t,e],o=this.transform;return o&&gn(r,r,o),r},n.prototype.getLineScale=function(){var t=this.transform;return t&&Ii(t[0]-1)>1e-10&&Ii(t[3]-1)>1e-10?Math.sqrt(Ii(t[0]*t[3]-t[2]*t[1])):1},n.prototype.copyTransform=function(t){vr(this,t)},n.getLocalTransform=function(t,e){e=e||[];var r=t.originX||0,o=t.originY||0,i=t.scaleX,s=t.scaleY,l=t.anchorX,c=t.anchorY,d=t.rotation||0,p=t.x,m=t.y,b=t.skewX?Math.tan(t.skewX):0,_=t.skewY?Math.tan(-t.skewY):0;if(r||o||l||c){var S=r+l,k=o+c;e[4]=-S*i-b*k*s,e[5]=-k*s-_*S*i}else e[4]=e[5]=0;return e[0]=i,e[3]=s,e[1]=_*i,e[2]=b*s,d&&Pl(e,e,d),e[4]+=r+p,e[5]+=o+m,e},n.initDefaultProps=((t=n.prototype).scaleX=t.scaleY=t.globalScaleRatio=1,void(t.x=t.y=t.originX=t.originY=t.skewX=t.skewY=t.rotation=t.anchorX=t.anchorY=0)),n;var t}(),Rr=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function vr(n,t){for(var e=0;e<Rr.length;e++){var r=Rr[e];n[r]=t[r]}}var ma={};function Fi(n,t){var e=ma[t=t||cr];e||(e=ma[t]=new Vo(500));var r=e.get(n);return null==r&&(r=Pr.measureText(n,t).width,e.put(n,r)),r}function xa(n,t,e,r){var o=Fi(n,t),i=Vl(t),s=Fl(0,o,e),l=on(0,i,r);return new Io(s,l,o,i)}function ua(n,t,e,r){var o=((n||"")+"").split("\n");if(1===o.length)return xa(o[0],t,e,r);for(var i=new Io(0,0,0,0),s=0;s<o.length;s++){var l=xa(o[s],t,e,r);0===s?i.copy(l):i.union(l)}return i}function Fl(n,t,e){return"right"===e?n-=t:"center"===e&&(n-=t/2),n}function on(n,t,e){return"middle"===e?n-=t/2:"bottom"===e&&(n-=t),n}function Vl(n){return Fi("\u56fd",n)}function va(n,t){return"string"==typeof n?n.lastIndexOf("%")>=0?parseFloat(n)/100*t:parseFloat(n):n}function dh(n,t,e){var r=t.position||"inside",o=null!=t.distance?t.distance:5,i=e.height,s=e.width,l=i/2,c=e.x,d=e.y,p="left",m="top";if(r instanceof Array)c+=va(r[0],e.width),d+=va(r[1],e.height),p=null,m=null;else switch(r){case"left":c-=o,d+=l,p="right",m="middle";break;case"right":c+=o+s,d+=l,m="middle";break;case"top":c+=s/2,d-=o,p="center",m="bottom";break;case"bottom":c+=s/2,d+=i+o,p="center";break;case"inside":c+=s/2,d+=l,p="center",m="middle";break;case"insideLeft":c+=o,d+=l,m="middle";break;case"insideRight":c+=s-o,d+=l,p="right",m="middle";break;case"insideTop":c+=s/2,d+=o,p="center";break;case"insideBottom":c+=s/2,d+=i-o,p="center",m="bottom";break;case"insideTopLeft":c+=o,d+=o;break;case"insideTopRight":c+=s-o,d+=o,p="right";break;case"insideBottomLeft":c+=o,d+=i-o,m="bottom";break;case"insideBottomRight":c+=s-o,d+=i-o,p="right",m="bottom"}return(n=n||{}).x=c,n.y=d,n.align=p,n.verticalAlign=m,n}var Ap="__zr_normal__",hh=Rr.concat(["ignore"]),qv=Pn(Rr,function(n,t){return n[t]=!0,n},{ignore:!1}),Ip={},Jy=new Io(0,0,0,0),sd=function(){function n(t){this.id=ho(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return n.prototype._init=function(t){this.attr(t)},n.prototype.drift=function(t,e,r){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var o=this.transform;o||(o=this.transform=[1,0,0,1,0,0]),o[4]+=t,o[5]+=e,this.decomposeTransform(),this.markRedraw()},n.prototype.beforeUpdate=function(){},n.prototype.afterUpdate=function(){},n.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},n.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var r=this.textConfig,o=r.local,i=e.innerTransformable,s=void 0,l=void 0,c=!1;i.parent=o?this:null;var d=!1;if(i.copyTransform(e),null!=r.position){var p=Jy;p.copy(r.layoutRect?r.layoutRect:this.getBoundingRect()),o||p.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(Ip,r,p):dh(Ip,r,p),i.x=Ip.x,i.y=Ip.y,s=Ip.align,l=Ip.verticalAlign;var m=r.origin;if(m&&null!=r.rotation){var b=void 0,_=void 0;"center"===m?(b=.5*p.width,_=.5*p.height):(b=va(m[0],p.width),_=va(m[1],p.height)),d=!0,i.originX=-i.x+b+(o?0:p.x),i.originY=-i.y+_+(o?0:p.y)}}null!=r.rotation&&(i.rotation=r.rotation);var S=r.offset;S&&(i.x+=S[0],i.y+=S[1],d||(i.originX=-S[0],i.originY=-S[1]));var k=null==r.inside?"string"==typeof r.position&&r.position.indexOf("inside")>=0:r.inside,D=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),O=void 0,N=void 0,F=void 0;k&&this.canBeInsideText()?(N=r.insideStroke,null!=(O=r.insideFill)&&"auto"!==O||(O=this.getInsideTextFill()),null!=N&&"auto"!==N||(N=this.getInsideTextStroke(O),F=!0)):(N=r.outsideStroke,null!=(O=r.outsideFill)&&"auto"!==O||(O=this.getOutsideFill()),null!=N&&"auto"!==N||(N=this.getOutsideStroke(O),F=!0)),(O=O||"#000")===D.fill&&N===D.stroke&&F===D.autoStroke&&s===D.align&&l===D.verticalAlign||(c=!0,D.fill=O,D.stroke=N,D.autoStroke=F,D.align=s,D.verticalAlign=l,e.setDefaultTextStyle(D)),e.__dirty|=1,c&&e.dirtyStyle(!0)}},n.prototype.canBeInsideText=function(){return!0},n.prototype.getInsideTextFill=function(){return"#fff"},n.prototype.getInsideTextStroke=function(t){return"#000"},n.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?fr:$n},n.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),r="string"==typeof e&&oo(e);r||(r=[255,255,255,1]);for(var o=r[3],i=this.__zr.isDarkMode(),s=0;s<3;s++)r[s]=r[s]*o+(i?0:255)*(1-o);return r[3]=1,hu(r,"rgba")},n.prototype.traverse=function(t,e){},n.prototype.attrKV=function(t,e){"textConfig"===t?this.setTextConfig(e):"textContent"===t?this.setTextContent(e):"clipPath"===t?this.setClipPath(e):"extra"===t?(this.extra=this.extra||{},Lt(this.extra,e)):this[t]=e},n.prototype.hide=function(){this.ignore=!0,this.markRedraw()},n.prototype.show=function(){this.ignore=!1,this.markRedraw()},n.prototype.attr=function(t,e){if("string"==typeof t)this.attrKV(t,e);else if(wr(t))for(var r=rr(t),o=0;o<r.length;o++){var i=r[o];this.attrKV(i,t[i])}return this.markRedraw(),this},n.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,r=0;r<this.animators.length;r++){var o=this.animators[r],i=o.__fromStateTransition;if(!(o.getLoop()||i&&i!==Ap)){var s=o.targetName;o.saveTo(s?e[s]:e)}}},n.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,hh)},n.prototype._savePrimaryToNormal=function(t,e,r){for(var o=0;o<r.length;o++){var i=r[o];null==t[i]||i in e||(e[i]=this[i])}},n.prototype.hasState=function(){return this.currentStates.length>0},n.prototype.getState=function(t){return this.states[t]},n.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},n.prototype.clearStates=function(t){this.useState(Ap,!1,t)},n.prototype.useState=function(t,e,r,o){var i=t===Ap;if(this.hasState()||!i){var s=this.currentStates,l=this.stateTransition;if(!(Ir(s,t)>=0)||!e&&1!==s.length){var c;if(this.stateProxy&&!i&&(c=this.stateProxy(t)),c||(c=this.states&&this.states[t]),c||i){i||this.saveCurrentToNormalState(c);var d=!!(c&&c.hoverLayer||o);d&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,c,this._normalState,e,!r&&!this.__inHover&&l&&l.duration>0,l);var p=this._textContent,m=this._textGuide;return p&&p.useState(t,e,r,d),m&&m.useState(t,e,r,d),i?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!d&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),c}qe("State "+t+" not exists.")}}},n.prototype.useStates=function(t,e,r){if(t.length){var o=[],i=this.currentStates,s=t.length,l=s===i.length;if(l)for(var c=0;c<s;c++)if(t[c]!==i[c]){l=!1;break}if(l)return;for(c=0;c<s;c++){var d=t[c],p=void 0;this.stateProxy&&(p=this.stateProxy(d,t)),p||(p=this.states[d]),p&&o.push(p)}var m=o[s-1],b=!!(m&&m.hoverLayer||r);b&&this._toggleHoverLayerFlag(!0);var _=this._mergeStates(o),S=this.stateTransition;this.saveCurrentToNormalState(_),this._applyStateObj(t.join(","),_,this._normalState,!1,!e&&!this.__inHover&&S&&S.duration>0,S);var k=this._textContent,D=this._textGuide;k&&k.useStates(t,e,b),D&&D.useStates(t,e,b),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!b&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}else this.clearStates()},n.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},n.prototype.removeState=function(t){var e=Ir(this.currentStates,t);if(e>=0){var r=this.currentStates.slice();r.splice(e,1),this.useStates(r)}},n.prototype.replaceState=function(t,e,r){var o=this.currentStates.slice(),i=Ir(o,t),s=Ir(o,e)>=0;i>=0?s?o.splice(i,1):o[i]=e:r&&!s&&o.push(e),this.useStates(o)},n.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},n.prototype._mergeStates=function(t){for(var e,r={},o=0;o<t.length;o++){var i=t[o];Lt(r,i),i.textConfig&&Lt(e=e||{},i.textConfig)}return e&&(r.textConfig=e),r},n.prototype._applyStateObj=function(t,e,r,o,i,s){var l=!(e&&o);e&&e.textConfig?(this.textConfig=Lt({},o?this.textConfig:r.textConfig),Lt(this.textConfig,e.textConfig)):l&&r.textConfig&&(this.textConfig=r.textConfig);for(var c={},d=!1,p=0;p<hh.length;p++){var m=hh[p],b=i&&qv[m];e&&null!=e[m]?b?(d=!0,c[m]=e[m]):this[m]=e[m]:l&&null!=r[m]&&(b?(d=!0,c[m]=r[m]):this[m]=r[m])}if(!i)for(p=0;p<this.animators.length;p++){var _=this.animators[p],S=_.targetName;_.getLoop()||_.__changeFinalValue(S?(e||r)[S]:e||r)}d&&this._transitionState(t,c,s)},n.prototype._attachComponent=function(t){if((!t.__zr||t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},n.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},n.prototype.getClipPath=function(){return this._clipPath},n.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},n.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},n.prototype.getTextContent=function(){return this._textContent},n.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new To,this._attachComponent(t),this._textContent=t,this.markRedraw())},n.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),Lt(this.textConfig,t),this.markRedraw()},n.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},n.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},n.prototype.getTextGuideLine=function(){return this._textGuide},n.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},n.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},n.prototype.markRedraw=function(){this.__dirty|=1;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},n.prototype.dirty=function(){this.markRedraw()},n.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,r=this._textGuide;e&&(e.__inHover=t),r&&(r.__inHover=t)},n.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var r=0;r<e.length;r++)t.animation.addAnimator(e[r]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},n.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var r=0;r<e.length;r++)t.animation.removeAnimator(e[r]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},n.prototype.animate=function(t,e,r){var i=new Nr(t?this[t]:this,e,r);return t&&(i.targetName=t),this.addAnimator(i,t),i},n.prototype.addAnimator=function(t,e){var r=this.__zr,o=this;t.during(function(){o.updateDuringAnimation(e)}).done(function(){var i=o.animators,s=Ir(i,t);s>=0&&i.splice(s,1)}),this.animators.push(t),r&&r.animation.addAnimator(t),r&&r.wakeUp()},n.prototype.updateDuringAnimation=function(t){this.markRedraw()},n.prototype.stopAnimation=function(t,e){for(var r=this.animators,o=r.length,i=[],s=0;s<o;s++){var l=r[s];t&&t!==l.scope?i.push(l):l.stop(e)}return this.animators=i,this},n.prototype.animateTo=function(t,e,r){Br(this,t,e,r)},n.prototype.animateFrom=function(t,e,r){Br(this,t,e,r,!0)},n.prototype._transitionState=function(t,e,r,o){for(var i=Br(this,e,r,o),s=0;s<i.length;s++)i[s].__fromStateTransition=t},n.prototype.getBoundingRect=function(){return null},n.prototype.getPaintRect=function(){return null},n.initDefaultProps=function(){var t=n.prototype;function e(r,o,i,s){function l(c,d){Object.defineProperty(d,0,{get:function(){return c[i]},set:function(p){c[i]=p}}),Object.defineProperty(d,1,{get:function(){return c[s]},set:function(p){c[s]=p}})}Object.defineProperty(t,r,{get:function(){return this[o]||l(this,this[o]=[]),this[o]},set:function(c){this[i]=c[0],this[s]=c[1],this[o]=c,l(this,c)}})}t.type="element",t.name="",t.ignore=t.silent=t.isGroup=t.draggable=t.dragging=t.ignoreClip=t.__inHover=!1,t.__dirty=1,Object.defineProperty&&(e("position","_legacyPos","x","y"),e("scale","_legacyScale","scaleX","scaleY"),e("origin","_legacyOrigin","originX","originY"))}(),n}();function Br(n,t,e,r,o){var i=[];Ed(n,"",n,t,e=e||{},r,i,o);var s=i.length,l=!1,c=e.done,d=e.aborted,p=function(){l=!0,--s<=0&&(l?c&&c():d&&d())},m=function(){--s<=0&&(l?c&&c():d&&d())};s||c&&c(),i.length>0&&e.during&&i[0].during(function(S,k){e.during(k)});for(var b=0;b<i.length;b++){var _=i[b];p&&_.done(p),m&&_.aborted(m),e.force&&_.duration(e.duration),_.start(e.easing)}return i}function Am(n,t,e){for(var r=0;r<e;r++)n[r]=t[r]}function Y1(n,t,e){if(nn(t[e]))if(nn(n[e])||(n[e]=[]),ca(t[e])){var r=t[e].length;n[e].length!==r&&(n[e]=new t[e].constructor(r),Am(n[e],t[e],r))}else{var o=t[e],i=n[e],s=o.length;if(nn(o[0]))for(var l=o[0].length,c=0;c<s;c++)i[c]?Am(i[c],o[c],l):i[c]=Array.prototype.slice.call(o[c]);else Am(i,o,s);i.length=o.length}else n[e]=t[e]}function Ed(n,t,e,r,o,i,s,l){for(var c=rr(r),d=o.duration,p=o.delay,m=o.additive,b=o.setToFinal,_=!wr(i),S=n.animators,k=[],D=0;D<c.length;D++){var O=c[D],N=r[O];if(null!=N&&null!=e[O]&&(_||i[O]))if(!wr(N)||nn(N)||sn(N))k.push(O);else{if(t){l||(e[O]=N,n.updateDuringAnimation(t));continue}Ed(n,O,e[O],N,o,i&&i[O],s,l)}else l||(e[O]=N,n.updateDuringAnimation(t),k.push(O))}var F=k.length;if(!m&&F)for(var V=0;V<S.length;V++)if((Z=S[V]).targetName===t&&Z.stopTracks(k)){var q=Ir(S,Z);S.splice(q,1)}if(o.force||(F=(k=yo(k,function(ge){return!((ve=r[ge])===(_e=e[ge])||nn(ve)&&nn(_e)&&function(Ee,ze){var Ge=Ee.length;if(Ge!==ze.length)return!1;for(var Xe=0;Xe<Ge;Xe++)if(Ee[Xe]!==ze[Xe])return!1;return!0}(ve,_e));var ve,_e})).length),F>0||o.force&&!s.length){var Z,Q=void 0,re=void 0,he=void 0;if(l)for(re={},b&&(Q={}),V=0;V<F;V++)re[O=k[V]]=e[O],b?Q[O]=r[O]:e[O]=r[O];else if(b)for(he={},V=0;V<F;V++)he[O=k[V]]=nc(e[O]),Y1(e,r,O);(Z=new Nr(e,!1,!1,m?yo(S,function(ge){return ge.targetName===t}):null)).targetName=t,o.scope&&(Z.scope=o.scope),b&&Q&&Z.whenWithKeys(0,Q,k),he&&Z.whenWithKeys(0,he,k),Z.whenWithKeys(null==d?500:d,l?re:r,k).delay(p||0),n.addAnimator(Z,t),s.push(Z)}}na(sd,bo),na(sd,To);var xo=function(n){function t(e){var r=n.call(this)||this;return r.isGroup=!0,r._children=[],r.attr(e),r}return gt(t,n),t.prototype.childrenRef=function(){return this._children},t.prototype.children=function(){return this._children.slice()},t.prototype.childAt=function(e){return this._children[e]},t.prototype.childOfName=function(e){for(var r=this._children,o=0;o<r.length;o++)if(r[o].name===e)return r[o]},t.prototype.childCount=function(){return this._children.length},t.prototype.add=function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},t.prototype.addBefore=function(e,r){if(e&&e!==this&&e.parent!==this&&r&&r.parent===this){var o=this._children,i=o.indexOf(r);i>=0&&(o.splice(i,0,e),this._doAdd(e))}return this},t.prototype.replace=function(e,r){var o=Ir(this._children,e);return o>=0&&this.replaceAt(r,o),this},t.prototype.replaceAt=function(e,r){var o=this._children,i=o[r];if(e&&e!==this&&e.parent!==this&&e!==i){o[r]=e,i.parent=null;var s=this.__zr;s&&i.removeSelfFromZr(s),this._doAdd(e)}return this},t.prototype._doAdd=function(e){e.parent&&e.parent.remove(e),e.parent=this;var r=this.__zr;r&&r!==e.__zr&&e.addSelfToZr(r),r&&r.refresh()},t.prototype.remove=function(e){var r=this.__zr,o=this._children,i=Ir(o,e);return i<0||(o.splice(i,1),e.parent=null,r&&e.removeSelfFromZr(r),r&&r.refresh()),this},t.prototype.removeAll=function(){for(var e=this._children,r=this.__zr,o=0;o<e.length;o++){var i=e[o];r&&i.removeSelfFromZr(r),i.parent=null}return e.length=0,this},t.prototype.eachChild=function(e,r){for(var o=this._children,i=0;i<o.length;i++)e.call(r,o[i],i);return this},t.prototype.traverse=function(e,r){for(var o=0;o<this._children.length;o++){var i=this._children[o],s=e.call(r,i);i.isGroup&&!s&&i.traverse(e,r)}return this},t.prototype.addSelfToZr=function(e){n.prototype.addSelfToZr.call(this,e);for(var r=0;r<this._children.length;r++)this._children[r].addSelfToZr(e)},t.prototype.removeSelfFromZr=function(e){n.prototype.removeSelfFromZr.call(this,e);for(var r=0;r<this._children.length;r++)this._children[r].removeSelfFromZr(e)},t.prototype.getBoundingRect=function(e){for(var r=new Io(0,0,0,0),o=e||this._children,i=[],s=null,l=0;l<o.length;l++){var c=o[l];if(!c.ignore&&!c.invisible){var d=c.getBoundingRect(),p=c.getLocalTransform(i);p?(Io.applyTransform(r,d,p),(s=s||r.clone()).union(r)):(s=s||d.clone()).union(d)}}return s||r},t}(sd);xo.prototype.type="group";var Op={},Ep={},Pd=function(){function n(t,e,r){var o=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,r=r||{},this.dom=e,this.id=t;var i=new ch,s=r.renderer||"canvas";Op[s]||(s=rr(Op)[0]),r.useDirtyRect=null!=r.useDirtyRect&&r.useDirtyRect;var l=new Op[s](e,i,r,t),c=r.ssr||l.ssrOnly;this.storage=i,this.painter=l;var d,p=zn.node||zn.worker||c?null:new Wn(l.getViewportRoot(),l.root),m=r.useCoarsePointer;(null==m||"auto"===m?zn.touchEventsSupported:!!m)&&(d=un(r.pointerSize,44)),this.handler=new Du(i,l,p,l.root,d),this.animation=new y({stage:{update:c?null:function(){return o._flush(!0)}}}),c||this.animation.start()}return n.prototype.add=function(t){t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},n.prototype.remove=function(t){t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},n.prototype.configLayer=function(t,e){this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh()},n.prototype.setBackgroundColor=function(t){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=function(e){if(!e)return!1;if("string"==typeof e)return Od(e,1)<.4;if(e.colorStops){for(var r=e.colorStops,o=0,i=r.length,s=0;s<i;s++)o+=Od(r[s].color,1);return(o/=i)<.4}return!1}(t)},n.prototype.getBackgroundColor=function(){return this._backgroundColor},n.prototype.setDarkMode=function(t){this._darkMode=t},n.prototype.isDarkMode=function(){return this._darkMode},n.prototype.refreshImmediately=function(t){t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1},n.prototype.refresh=function(){this._needsRefresh=!0,this.animation.start()},n.prototype.flush=function(){this._flush(!1)},n.prototype._flush=function(t){var e,r=bs();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var o=bs();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:o-r})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},n.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},n.prototype.wakeUp=function(){this.animation.start(),this._stillFrameAccum=0},n.prototype.refreshHover=function(){this._needsRefreshHover=!0},n.prototype.refreshHoverImmediately=function(){this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover()},n.prototype.resize=function(t){this.painter.resize((t=t||{}).width,t.height),this.handler.resize()},n.prototype.clearAnimation=function(){this.animation.clear()},n.prototype.getWidth=function(){return this.painter.getWidth()},n.prototype.getHeight=function(){return this.painter.getHeight()},n.prototype.setCursorStyle=function(t){this.handler.setCursorStyle(t)},n.prototype.findHover=function(t,e){return this.handler.findHover(t,e)},n.prototype.on=function(t,e,r){return this.handler.on(t,e,r),this},n.prototype.off=function(t,e){this.handler.off(t,e)},n.prototype.trigger=function(t,e){this.handler.trigger(t,e)},n.prototype.clear=function(){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof xo&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()},n.prototype.dispose=function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,delete Ep[this.id]},n}();function wg(n,t){var e=new Pd(ho(),n,t);return Ep[e.id]=e,e}function I_(n,t){Op[n]=t}var bb=Object.freeze({__proto__:null,init:wg,dispose:function(n){n.dispose()},disposeAll:function(){for(var n in Ep)Ep.hasOwnProperty(n)&&Ep[n].dispose();Ep={}},getInstance:function(n){return Ep[n]},registerPainter:I_,version:"5.4.3"});function fa(n,t,e,r){var o=t[0],i=t[1],s=e[0],l=e[1],c=i-o,d=l-s;if(0===c)return 0===d?s:(s+l)/2;if(r)if(c>0){if(n<=o)return s;if(n>=i)return l}else{if(n>=o)return s;if(n<=i)return l}else{if(n===o)return s;if(n===i)return l}return(n-o)/c*d+s}function qn(n,t){switch(n){case"center":case"middle":n="50%";break;case"left":case"top":n="0%";break;case"right":case"bottom":n="100%"}return ir(n)?(e=n,e.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(n)/100*t:parseFloat(n):null==n?NaN:+n;var e}function yi(n,t,e){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),n=(+n).toFixed(t),e?n:+n}function Ua(n){return n.sort(function(t,e){return t-e}),n}function Zu(n){if(n=+n,isNaN(n))return 0;if(n>1e-14)for(var t=1,e=0;e<15;e++,t*=10)if(Math.round(n*t)/t===n)return e;return ud(n)}function ud(n){var t=n.toString().toLowerCase(),e=t.indexOf("e"),r=e>0?+t.slice(e+1):0,o=e>0?e:t.length,i=t.indexOf(".");return Math.max(0,(i<0?0:o-1-i)-r)}function Vc(n,t){var e=Math.log,r=Math.LN10,o=Math.floor(e(n[1]-n[0])/r),i=Math.round(e(Math.abs(t[1]-t[0]))/r),s=Math.min(Math.max(-o+i,0),20);return isFinite(s)?s:20}function rc(n,t){var e=Pn(n,function(_,S){return _+(isNaN(S)?0:S)},0);if(0===e)return[];for(var r=Math.pow(10,t),o=mt(n,function(_){return(isNaN(_)?0:_)/e*r*100}),i=100*r,s=mt(o,function(_){return Math.floor(_)}),l=Pn(s,function(_,S){return _+S},0),c=mt(o,function(_,S){return _-s[S]});l<i;){for(var d=Number.NEGATIVE_INFINITY,p=null,m=0,b=c.length;m<b;++m)c[m]>d&&(d=c[m],p=m);++s[p],c[p]=0,++l}return mt(s,function(_){return _/r})}function Pp(n,t){var e=Math.max(Zu(n),Zu(t)),r=n+t;return e>20?r:yi(r,e)}var ld=9007199254740991;function gu(n){var t=2*Math.PI;return(n%t+t)%t}function Rp(n){return n>-1e-4&&n<1e-4}var ph=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Af(n){if(n instanceof Date)return n;if(ir(n)){var t=ph.exec(n);if(!t)return new Date(NaN);if(t[8]){var e=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(e-=+t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,e,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,t[7]?+t[7].substring(0,3):0)}return null==n?new Date(NaN):new Date(Math.round(n))}function Xh(n){return Math.pow(10,xb(n))}function xb(n){if(0===n)return 0;var t=Math.floor(Math.log(n)/Math.LN10);return n/Math.pow(10,t)>=10&&t++,t}function xs(n,t){var e=xb(n),r=Math.pow(10,e),o=n/r;return n=(t?o<1.5?1:o<2.5?2:o<4?3:o<7?5:10:o<1?1:o<2?2:o<3?3:o<5?5:10)*r,e>=-20?+n.toFixed(e<0?-e:0):n}function ul(n,t){var e=(n.length-1)*t+1,r=Math.floor(e),o=+n[r-1],i=e-r;return i?o+i*(n[r]-o):o}function Hc(n){n.sort(function(c,d){return l(c,d,0)?-1:1});for(var t=-1/0,e=1,r=0;r<n.length;){for(var o=n[r].interval,i=n[r].close,s=0;s<2;s++)o[s]<=t&&(o[s]=t,i[s]=s?1:1-e),t=o[s],e=i[s];o[0]===o[1]&&i[0]*i[1]!=1?n.splice(r,1):r++}return n;function l(c,d,p){return c.interval[p]<d.interval[p]||c.interval[p]===d.interval[p]&&(c.close[p]-d.close[p]==(p?-1:1)||!p&&l(c,d,1))}}function Oa(n){var t=parseFloat(n);return t==n&&(0!==t||!ir(n)||n.indexOf("x")<=0)?t:NaN}function Ca(n){return!isNaN(Oa(n))}function Wc(){return Math.round(9*Math.random())}function Im(n,t){return 0===t?n:Im(t,n%t)}function Sg(n,t){return null==n?t:null==t?n:n*t/Im(n,t)}function Ri(n){throw new Error(n)}function Rd(n,t,e){return(t-n)*e+n}var Lp="series\0";function ci(n){return n instanceof Array?n:null==n?[]:[n]}function hs(n,t,e){if(n){n[t]=n[t]||{},n.emphasis=n.emphasis||{},n.emphasis[t]=n.emphasis[t]||{};for(var r=0,o=e.length;r<o;r++){var i=e[r];!n.emphasis[t].hasOwnProperty(i)&&n[t].hasOwnProperty(i)&&(n.emphasis[t][i]=n[t][i])}}}var Ld=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function oc(n){return!wr(n)||Ue(n)||n instanceof Date?n:n.value}function Np(n){return wr(n)&&!(n instanceof Array)}function Zh(n,t,e){var r="normalMerge"===e,o="replaceMerge"===e,i="replaceAll"===e;n=n||[],t=(t||[]).slice();var s=Or();Ce(t,function(p,m){wr(p)||(t[m]=null)});var l,c,p,m,b,_,d=function(p,m,b){var _=[];if("replaceAll"===b)return _;for(var S=0;S<p.length;S++){var k=p[S];k&&null!=k.id&&m.set(k.id,S),_.push({existing:"replaceMerge"===b||mh(k)?null:k,newOption:null,keyInfo:null,brandNew:null})}return _}(n,s,e);return(r||o)&&(p=d,m=n,b=s,Ce(_=t,function(S,k){if(S&&null!=S.id){var D=Hs(S.id),O=b.get(D);if(null!=O){var N=p[O];Ao(!N.newOption,'Duplicated option on id "'+D+'".'),N.newOption=S,N.existing=m[O],_[k]=null}}})),r&&function(p,m){Ce(m,function(b,_){if(b&&null!=b.name)for(var S=0;S<p.length;S++){var k=p[S].existing;if(!p[S].newOption&&k&&(null==k.id||null==b.id)&&!mh(b)&&!mh(k)&&Xv("name",k,b))return p[S].newOption=b,void(m[_]=null)}})}(d,t),r||o?function(p,m,b){Ce(m,function(_){if(_){for(var S,k=0;(S=p[k])&&(S.newOption||mh(S.existing)||S.existing&&null!=_.id&&!Xv("id",_,S.existing));)k++;S?(S.newOption=_,S.brandNew=b):p.push({newOption:_,brandNew:b,existing:null,keyInfo:null}),k++}})}(d,t,o):i&&function(p,m){Ce(m,function(b){p.push({newOption:b,brandNew:!0,existing:null,keyInfo:null})})}(d,t),l=d,c=Or(),Ce(l,function(p){var m=p.existing;m&&c.set(m.id,p)}),Ce(l,function(p){var m=p.newOption;Ao(!m||null==m.id||!c.get(m.id)||c.get(m.id)===p,"id duplicates: "+(m&&m.id)),m&&null!=m.id&&c.set(m.id,p),!p.keyInfo&&(p.keyInfo={})}),Ce(l,function(p,m){var b=p.existing,_=p.newOption,S=p.keyInfo;if(wr(_)){if(S.name=null!=_.name?Hs(_.name):b?b.name:Lp+m,b)S.id=Hs(b.id);else if(null!=_.id)S.id=Hs(_.id);else{var k=0;do{S.id="\0"+S.name+"\0"+k++}while(c.get(S.id))}c.set(S.id,p)}}),d}function Xv(n,t,e){var r=is(t[n],null),o=is(e[n],null);return null!=r&&null!=o&&r===o}function Hs(n){return is(n,"")}function is(n,t){return null==n?t:ir(n)?n:gr(n)||gc(n)?n+"":t}function ic(n){var t=n.name;return!(!t||!t.indexOf(Lp))}function mh(n){return n&&null!=n.id&&0===Hs(n.id).indexOf("\0_ec_\0")}function vh(n,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?Ue(t.dataIndex)?mt(t.dataIndex,function(e){return n.indexOfRawIndex(e)}):n.indexOfRawIndex(t.dataIndex):null!=t.name?Ue(t.name)?mt(t.name,function(e){return n.indexOfName(e)}):n.indexOfName(t.name):void 0}function hi(){var n="__ec_inner_"+af++;return function(t){return t[n]||(t[n]={})}}var af=Wc();function cd(n,t,e){var r=yh(t,e),i=r.queryOptionMap,s=r.others,l=e?e.defaultMainType:null;return!r.mainTypeSpecified&&l&&i.set(l,{}),i.each(function(c,d){var p=Bp(n,d,c,{useDefault:l===d,enableAll:!e||null==e.enableAll||e.enableAll,enableNone:!e||null==e.enableNone||e.enableNone});s[d+"Models"]=p.models,s[d+"Model"]=p.models[0]}),s}function yh(n,t){var e;if(ir(n)){var r={};r[n+"Index"]=0,e=r}else e=n;var o=Or(),i={},s=!1;return Ce(e,function(l,c){if("dataIndex"!==c&&"dataIndexInside"!==c){var d=c.match(/^(\w+)(Index|Id|Name)$/)||[],p=d[1],m=(d[2]||"").toLowerCase();p&&m&&!(t&&t.includeMainTypes&&Ir(t.includeMainTypes,p)<0)&&(s=s||!!p,(o.get(p)||o.set(p,{}))[m]=l)}else i[c]=l}),{mainTypeSpecified:s,queryOptionMap:o,others:i}}var ll={useDefault:!0,enableAll:!1,enableNone:!1},Kh={useDefault:!1,enableAll:!0,enableNone:!0};function Bp(n,t,e,r){r=r||ll;var o=e.index,i=e.id,s=e.name,l={models:null,specified:null!=o||null!=i||null!=s};if(!l.specified){var c=void 0;return l.models=r.useDefault&&(c=n.getComponent(t))?[c]:[],l}return"none"===o||!1===o?(Ao(r.enableNone,'`"none"` or `false` is not a valid value on index option.'),l.models=[],l):("all"===o&&(Ao(r.enableAll,'`"all"` is not a valid value on index option.'),o=i=s=null),l.models=n.queryComponents({mainType:t,index:o,id:i,name:s}),l)}function e0(n,t,e){n.setAttribute?n.setAttribute(t,e):n[t]=e}function zp(n,t){var e=Or(),r=[];return Ce(n,function(o){var i=t(o);(e.get(i)||(r.push(i),e.set(i,[]))).push(o)}),{keys:r,buckets:e}}function O_(n,t,e,r,o){var i=null==t||"auto"===t;if(null==r)return r;if(gr(r))return yi(S=Rd(e||0,r,o),i?Math.max(Zu(e||0),Zu(r)):t);if(ir(r))return o<1?e:r;for(var s=[],l=e,c=r,d=Math.max(l?l.length:0,c.length),p=0;p<d;++p){var m=n.getDimensionInfo(p);if(m&&"ordinal"===m.type)s[p]=(o<1&&l?l:c)[p];else{var b=l&&l[p]?l[p]:0,_=c[p],S=Rd(b,_,o);s[p]=yi(S,i?Math.max(Zu(b),Zu(_)):t)}}return s}var If="___EC__COMPONENT__CONTAINER___",_s="___EC__EXTENDED_CLASS___";function Ku(n){var t={main:"",sub:""};if(n){var e=n.split(".");t.main=e[0]||"",t.sub=e[1]||""}return t}function Gc(n,t){n.$constructor=n,n.extend=function(e){var r,o,i=this;return yr(o=i)&&/^class\s/.test(Function.prototype.toString.call(o))?r=function(s){function l(){return s.apply(this,arguments)||this}return gt(l,s),l}(i):(r=function(){(e.$constructor||i).apply(this,arguments)},Cu(r,this)),Lt(r.prototype,e),r[_s]=!0,r.extend=this.extend,r.superCall=E_,r.superApply=wb,r.superClass=i,r}}function Fp(n,t){n.extend=t.extend}var t0=Math.round(10*Math.random());function E_(n,t){for(var e=[],r=2;r<arguments.length;r++)e[r-2]=arguments[r];return this.superClass.prototype[t].apply(n,e)}function wb(n,t,e){return this.superClass.prototype[t].apply(n,e)}function Zv(n){var t={};n.registerClass=function(e){var r,l,c,o=e.type||e.prototype.type;if(o){Ao(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(r=o),'componentType "'+r+'" illegal'),e.prototype.type=o;var i=Ku(o);i.sub?i.sub!==If&&(((c=t[(l=i).main])&&c[If]||((c=t[l.main]={})[If]=!0),c)[i.sub]=e):t[i.main]=e}return e},n.getClass=function(e,r,o){var i=t[e];if(i&&i[If]&&(i=r?i[r]:null),o&&!i)throw new Error(r?"Component "+e+"."+(r||"")+" is used but not imported.":e+".type should be specified.");return i},n.getClassesByMainType=function(e){var r=Ku(e),o=[],i=t[r.main];return i&&i[If]?Ce(i,function(s,l){l!==If&&o.push(s)}):o.push(i),o},n.hasClass=function(e){var r=Ku(e);return!!t[r.main]},n.getAllClassMainTypes=function(){var e=[];return Ce(t,function(r,o){e.push(o)}),e},n.hasSubTypes=function(e){var r=Ku(e),o=t[r.main];return o&&o[If]}}function Vp(n,t){for(var e=0;e<n.length;e++)n[e][1]||(n[e][1]=n[e][0]);return t=t||!1,function(r,o,i){for(var s={},l=0;l<n.length;l++){var c=n[l][1];if(!(o&&Ir(o,c)>=0||i&&Ir(i,c)<0)){var d=r.getShallow(c,t);null!=d&&(s[n[l][0]]=d)}}return s}}var q1=Vp([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Om=function(){function n(){}return n.prototype.getAreaStyle=function(t,e){return q1(this,t,e)},n}(),$h=new Vo(50);function ia(n){if("string"==typeof n){var t=$h.get(n);return t&&t.image}return n}function ja(n,t,e,r,o){if(n){if("string"==typeof n){if(t&&t.__zrImageSrc===n||!e)return t;var i=$h.get(n),s={hostEl:e,cb:r,cbPayload:o};return i?!Cg(t=i.image)&&i.pending.push(s):((t=Pr.loadImage(n,Nd,Nd)).__zrImageSrc=n,$h.put(n,t.__cachedImgObj={image:t,pending:[s]})),t}return n}return t}function Nd(){var n=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<n.pending.length;t++){var e=n.pending[t],r=e.cb;r&&r(this,e.cbPayload),e.hostEl.dirty()}n.pending.length=0}function Cg(n){return n&&n.width&&n.height}var bh=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function Jh(n,t,e,r,o){if(!t)return"";var i=(n+"").split("\n");o=ya(t,e,r,o);for(var s=0,l=i.length;s<l;s++)i[s]=Sb(i[s],o);return i.join("\n")}function ya(n,t,e,r){var o=Lt({},r=r||{});o.font=t,e=un(e,"..."),o.maxIterations=un(r.maxIterations,2);var i=o.minChar=un(r.minChar,0);o.cnCharWidth=Fi("\u56fd",t);var s=o.ascCharWidth=Fi("a",t);o.placeholder=un(r.placeholder,"");for(var l=n=Math.max(0,n-1),c=0;c<i&&l>=s;c++)l-=s;var d=Fi(e,t);return d>l&&(e="",d=0),l=n-d,o.ellipsis=e,o.ellipsisWidth=d,o.contentWidth=l,o.containerWidth=n,o}function Sb(n,t){var e=t.containerWidth,r=t.font,o=t.contentWidth;if(!e)return"";var i=Fi(n,r);if(i<=e)return n;for(var s=0;;s++){if(i<=o||s>=t.maxIterations){n+=t.ellipsis;break}var l=0===s?xh(n,o,t.ascCharWidth,t.cnCharWidth):i>0?Math.floor(n.length*o/i):0;i=Fi(n=n.substr(0,l),r)}return""===n&&(n=t.placeholder),n}function xh(n,t,e,r){for(var o=0,i=0,s=n.length;i<s&&o<t;i++){var l=n.charCodeAt(i);o+=0<=l&&l<=127?e:r}return i}var P_=function(){},Mg=function(n){this.tokens=[],n&&(this.tokens=n)},Cb=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function kg(n,t,e,r,o){var i,s,l=""===t,c=o&&e.rich[o]||{},d=n.lines,p=c.font||e.font,m=!1;if(r){var b=c.padding,_=b?b[1]+b[3]:0;if(null!=c.width&&"auto"!==c.width){var S=va(c.width,r.width)+_;d.length>0&&S+r.accumWidth>r.width&&(i=t.split("\n"),m=!0),r.accumWidth=S}else{var k=Em(t,p,r.width,r.breakAll,r.accumWidth);r.accumWidth=k.accumWidth+_,s=k.linesWidths,i=k.lines}}else i=t.split("\n");for(var D=0;D<i.length;D++){var O=i[D],N=new P_;if(N.styleName=o,N.text=O,N.isLineHolder=!O&&!l,N.width="number"==typeof c.width?c.width:s?s[D]:Fi(O,p),D||m)d.push(new Mg([N]));else{var F=(d[d.length-1]||(d[0]=new Mg)).tokens,V=F.length;1===V&&F[0].isLineHolder?F[0]=N:(O||!V||l)&&F.push(N)}}}var Hp=Pn(",&?/;] ".split(""),function(n,t){return n[t]=!0,n},{});function R_(n){return!(((e=n.charCodeAt(0))>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303)&&!Hp[n]);var e}function Em(n,t,e,r,o){for(var i=[],s=[],l="",c="",d=0,p=0,m=0;m<n.length;m++){var b=n.charAt(m);if("\n"!==b){var _=Fi(b,t),S=!r&&!R_(b);(i.length?p+_>e:o+p+_>e)?p?(l||c)&&(S?(l||(l=c,c="",p=d=0),i.push(l),s.push(p-d),c+=b,l="",p=d+=_):(c&&(l+=c,c="",d=0),i.push(l),s.push(p),l=b,p=_)):S?(i.push(c),s.push(d),c=b,d=_):(i.push(b),s.push(_)):(p+=_,S?(c+=b,d+=_):(c&&(l+=c,c="",d=0),l+=b))}else c&&(l+=c,p+=d),i.push(l),s.push(p),l="",c="",d=0,p=0}return i.length||l||(l=n,c="",d=0),c&&(l+=c),l&&(i.push(l),s.push(p)),1===i.length&&(p+=o),{accumWidth:p,lines:i,linesWidths:s}}var Tg="__zr_style_"+Math.round(10*Math.random()),_h={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},ac={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};_h[Tg]=!0;var Uc=["z","z2","invisible"],X1=["invisible"],Ml=function(n){function t(r){return n.call(this,r)||this}var e;return gt(t,n),t.prototype._init=function(r){for(var o=rr(r),i=0;i<o.length;i++){var s=o[i];"style"===s?this.useStyle(r[s]):n.prototype.attrKV.call(this,s,r[s])}this.style||this.useStyle({})},t.prototype.beforeBrush=function(){},t.prototype.afterBrush=function(){},t.prototype.innerBeforeBrush=function(){},t.prototype.innerAfterBrush=function(){},t.prototype.shouldBePainted=function(r,o,i,s){var p,m,b,l=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&(m=r,b=o,sf.copy((p=this).getBoundingRect()),p.transform&&sf.applyTransform(p.transform),Kv.width=m,Kv.height=b,!sf.intersect(Kv))||l&&!l[0]&&!l[3])return!1;if(i&&this.__clipPaths)for(var c=0;c<this.__clipPaths.length;++c)if(this.__clipPaths[c].isZeroArea())return!1;if(s&&this.parent)for(var d=this.parent;d;){if(d.ignore)return!1;d=d.parent}return!0},t.prototype.contain=function(r,o){return this.rectContain(r,o)},t.prototype.traverse=function(r,o){r.call(o,this)},t.prototype.rectContain=function(r,o){var i=this.transformCoordToLocal(r,o);return this.getBoundingRect().contain(i[0],i[1])},t.prototype.getPaintRect=function(){var r=this._paintRect;if(!this._paintRect||this.__dirty){var o=this.transform,i=this.getBoundingRect(),s=this.style,l=s.shadowBlur||0,c=s.shadowOffsetX||0,d=s.shadowOffsetY||0;r=this._paintRect||(this._paintRect=new Io(0,0,0,0)),o?Io.applyTransform(r,i,o):r.copy(i),(l||c||d)&&(r.width+=2*l+Math.abs(c),r.height+=2*l+Math.abs(d),r.x=Math.min(r.x,r.x+c-l),r.y=Math.min(r.y,r.y+d-l));var p=this.dirtyRectTolerance;r.isZero()||(r.x=Math.floor(r.x-p),r.y=Math.floor(r.y-p),r.width=Math.ceil(r.width+1+2*p),r.height=Math.ceil(r.height+1+2*p))}return r},t.prototype.setPrevPaintRect=function(r){r?(this._prevPaintRect=this._prevPaintRect||new Io(0,0,0,0),this._prevPaintRect.copy(r)):this._prevPaintRect=null},t.prototype.getPrevPaintRect=function(){return this._prevPaintRect},t.prototype.animateStyle=function(r){return this.animate("style",r)},t.prototype.updateDuringAnimation=function(r){"style"===r?this.dirtyStyle():this.markRedraw()},t.prototype.attrKV=function(r,o){"style"!==r?n.prototype.attrKV.call(this,r,o):this.style?this.setStyle(o):this.useStyle(o)},t.prototype.setStyle=function(r,o){return"string"==typeof r?this.style[r]=o:Lt(this.style,r),this.dirtyStyle(),this},t.prototype.dirtyStyle=function(r){r||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},t.prototype.dirty=function(){this.dirtyStyle()},t.prototype.styleChanged=function(){return!!(2&this.__dirty)},t.prototype.styleUpdated=function(){this.__dirty&=-3},t.prototype.createStyle=function(r){return El(_h,r)},t.prototype.useStyle=function(r){r[Tg]||(r=this.createStyle(r)),this.__inHover?this.__hoverStyle=r:this.style=r,this.dirtyStyle()},t.prototype.isStyleObject=function(r){return r[Tg]},t.prototype._innerSaveToNormal=function(r){n.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.style&&!o.style&&(o.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(r,o,Uc)},t.prototype._applyStateObj=function(r,o,i,s,l,c){n.prototype._applyStateObj.call(this,r,o,i,s,l,c);var d,p=!(o&&s);if(o&&o.style?l?s?d=o.style:(d=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(d,o.style)):(d=this._mergeStyle(this.createStyle(),s?this.style:i.style),this._mergeStyle(d,o.style)):p&&(d=i.style),d)if(l){var m=this.style;if(this.style=this.createStyle(p?{}:m),p)for(var b=rr(m),_=0;_<b.length;_++)(k=b[_])in d&&(d[k]=d[k],this.style[k]=m[k]);var S=rr(d);for(_=0;_<S.length;_++){var k=S[_];this.style[k]=this.style[k]}this._transitionState(r,{style:d},c,this.getAnimationStyleProps())}else this.useStyle(d);var D=this.__inHover?X1:Uc;for(_=0;_<D.length;_++)k=D[_],o&&null!=o[k]?this[k]=o[k]:p&&null!=i[k]&&(this[k]=i[k])},t.prototype._mergeStates=function(r){for(var o,i=n.prototype._mergeStates.call(this,r),s=0;s<r.length;s++){var l=r[s];l.style&&this._mergeStyle(o=o||{},l.style)}return o&&(i.style=o),i},t.prototype._mergeStyle=function(r,o){return Lt(r,o),r},t.prototype.getAnimationStyleProps=function(){return ac},t.initDefaultProps=((e=t.prototype).type="displayable",e.invisible=!1,e.z=0,e.z2=0,e.zlevel=0,e.culling=!1,e.cursor="pointer",e.rectHover=!1,e.incremental=!1,e._rect=null,e.dirtyRectTolerance=0,void(e.__dirty=3)),t}(sd),sf=new Io(0,0,0,0),Kv=new Io(0,0,0,0),$u=Math.min,Ma=Math.max,jc=Math.sin,n0=Math.cos,Dg=2*Math.PI,Mb=ra(),Bd=ra(),Wp=ra();function Ya(n,t,e){if(0!==n.length){for(var r=n[0],o=r[0],i=r[0],s=r[1],l=r[1],c=1;c<n.length;c++)o=$u(o,(r=n[c])[0]),i=Ma(i,r[0]),s=$u(s,r[1]),l=Ma(l,r[1]);t[0]=o,t[1]=s,e[0]=i,e[1]=l}}function fd(n,t,e,r,o,i){o[0]=$u(n,e),o[1]=$u(t,r),i[0]=Ma(n,e),i[1]=Ma(t,r)}var cl=[],Ag=[];function Of(n,t,e,r,o,i,s,l,c,d){var p=Nc,m=Da,b=p(n,e,o,s,cl);c[0]=1/0,c[1]=1/0,d[0]=-1/0,d[1]=-1/0;for(var _=0;_<b;_++){var S=m(n,e,o,s,cl[_]);c[0]=$u(S,c[0]),d[0]=Ma(S,d[0])}for(b=p(t,r,i,l,Ag),_=0;_<b;_++){var k=m(t,r,i,l,Ag[_]);c[1]=$u(k,c[1]),d[1]=Ma(k,d[1])}c[0]=$u(n,c[0]),d[0]=Ma(n,d[0]),c[0]=$u(s,c[0]),d[0]=Ma(s,d[0]),c[1]=$u(t,c[1]),d[1]=Ma(t,d[1]),c[1]=$u(l,c[1]),d[1]=Ma(l,d[1])}function Yc(n,t,e,r,o,i,s,l){var c=Qa,d=Sa,p=Ma($u(c(n,e,o),1),0),m=Ma($u(c(t,r,i),1),0),b=d(n,e,o,p),_=d(t,r,i,m);s[0]=$u(n,o,b),s[1]=$u(t,i,_),l[0]=Ma(n,o,b),l[1]=Ma(t,i,_)}function Z1(n,t,e,r,o,i,s,l,c){var d=Dt,p=ro,m=Math.abs(o-i);if(m%Dg<1e-4&&m>1e-4)return l[0]=n-e,l[1]=t-r,c[0]=n+e,void(c[1]=t+r);if(Mb[0]=n0(o)*e+n,Mb[1]=jc(o)*r+t,Bd[0]=n0(i)*e+n,Bd[1]=jc(i)*r+t,d(l,Mb,Bd),p(c,Mb,Bd),(o%=Dg)<0&&(o+=Dg),(i%=Dg)<0&&(i+=Dg),o>i&&!s?i+=Dg:o<i&&s&&(o+=Dg),s){var b=i;i=o,o=b}for(var _=0;_<i;_+=Math.PI/2)_>o&&(Wp[0]=n0(_)*e+n,Wp[1]=jc(_)*r+t,d(l,Wp,l),p(c,Wp,c))}var qa={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},wh=[],Ig=[],Sh=[],Qh=[],dd=[],Hl=[],ko=Math.min,Gp=Math.max,ei=Math.cos,Iu=Math.sin,Ef=Math.abs,ba=Math.PI,ea=2*ba,$v="undefined"!=typeof Float32Array,mu=[];function qc(n){return Math.round(n/ba*1e8)/1e8%2*ba}function Xa(n,t){var e=qc(n[0]);e<0&&(e+=ea);var o=n[1];o+=e-n[0],!t&&o-e>=ea?o=e+ea:t&&e-o>=ea?o=e-ea:!t&&e>o?o=e+(ea-qc(e-o)):t&&e<o&&(o=e-(ea-qc(o-e))),n[0]=e,n[1]=o}var Os=function(){function n(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return n.prototype.increaseVersion=function(){this._version++},n.prototype.getVersion=function(){return this._version},n.prototype.setScale=function(t,e,r){(r=r||0)>0&&(this._ux=Ef(r/Un/t)||0,this._uy=Ef(r/Un/e)||0)},n.prototype.setDPR=function(t){this.dpr=t},n.prototype.setContext=function(t){this._ctx=t},n.prototype.getContext=function(){return this._ctx},n.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},n.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},n.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(qa.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},n.prototype.lineTo=function(t,e){var r=Ef(t-this._xi),o=Ef(e-this._yi),i=r>this._ux||o>this._uy;if(this.addData(qa.L,t,e),this._ctx&&i&&this._ctx.lineTo(t,e),i)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var s=r*r+o*o;s>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=s)}return this},n.prototype.bezierCurveTo=function(t,e,r,o,i,s){return this._drawPendingPt(),this.addData(qa.C,t,e,r,o,i,s),this._ctx&&this._ctx.bezierCurveTo(t,e,r,o,i,s),this._xi=i,this._yi=s,this},n.prototype.quadraticCurveTo=function(t,e,r,o){return this._drawPendingPt(),this.addData(qa.Q,t,e,r,o),this._ctx&&this._ctx.quadraticCurveTo(t,e,r,o),this._xi=r,this._yi=o,this},n.prototype.arc=function(t,e,r,o,i,s){this._drawPendingPt(),mu[0]=o,mu[1]=i,Xa(mu,s);var l=(i=mu[1])-(o=mu[0]);return this.addData(qa.A,t,e,r,r,o,l,0,s?0:1),this._ctx&&this._ctx.arc(t,e,r,o,i,s),this._xi=ei(i)*r+t,this._yi=Iu(i)*r+e,this},n.prototype.arcTo=function(t,e,r,o,i){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,r,o,i),this},n.prototype.rect=function(t,e,r,o){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,r,o),this.addData(qa.R,t,e,r,o),this},n.prototype.closePath=function(){this._drawPendingPt(),this.addData(qa.Z);var t=this._ctx,e=this._x0,r=this._y0;return t&&t.closePath(),this._xi=e,this._yi=r,this},n.prototype.fill=function(t){t&&t.fill(),this.toStatic()},n.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},n.prototype.len=function(){return this._len},n.prototype.setData=function(t){var e=t.length;this.data&&this.data.length===e||!$v||(this.data=new Float32Array(e));for(var r=0;r<e;r++)this.data[r]=t[r];this._len=e},n.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,r=0,o=this._len,i=0;i<e;i++)r+=t[i].len();for($v&&this.data instanceof Float32Array&&(this.data=new Float32Array(o+r)),i=0;i<e;i++)for(var s=t[i].data,l=0;l<s.length;l++)this.data[o++]=s[l];this._len=o},n.prototype.addData=function(t,e,r,o,i,s,l,c,d){if(this._saveData){var p=this.data;this._len+arguments.length>p.length&&(this._expandData(),p=this.data);for(var m=0;m<arguments.length;m++)p[this._len++]=arguments[m]}},n.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},n.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},n.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,$v&&this._len>11&&(this.data=new Float32Array(t)))}},n.prototype.getBoundingRect=function(){Sh[0]=Sh[1]=dd[0]=dd[1]=Number.MAX_VALUE,Qh[0]=Qh[1]=Hl[0]=Hl[1]=-Number.MAX_VALUE;var t,e=this.data,r=0,o=0,i=0,s=0;for(t=0;t<this._len;){var l=e[t++],c=1===t;switch(c&&(i=r=e[t],s=o=e[t+1]),l){case qa.M:r=i=e[t++],o=s=e[t++],dd[0]=i,dd[1]=s,Hl[0]=i,Hl[1]=s;break;case qa.L:fd(r,o,e[t],e[t+1],dd,Hl),r=e[t++],o=e[t++];break;case qa.C:Of(r,o,e[t++],e[t++],e[t++],e[t++],e[t],e[t+1],dd,Hl),r=e[t++],o=e[t++];break;case qa.Q:Yc(r,o,e[t++],e[t++],e[t],e[t+1],dd,Hl),r=e[t++],o=e[t++];break;case qa.A:var d=e[t++],p=e[t++],m=e[t++],b=e[t++],_=e[t++],S=e[t++]+_;t+=1;var k=!e[t++];c&&(i=ei(_)*m+d,s=Iu(_)*b+p),Z1(d,p,m,b,_,S,k,dd,Hl),r=ei(S)*m+d,o=Iu(S)*b+p;break;case qa.R:fd(i=r=e[t++],s=o=e[t++],i+e[t++],s+e[t++],dd,Hl);break;case qa.Z:r=i,o=s}Dt(Sh,Sh,dd),ro(Qh,Qh,Hl)}return 0===t&&(Sh[0]=Sh[1]=Qh[0]=Qh[1]=0),new Io(Sh[0],Sh[1],Qh[0]-Sh[0],Qh[1]-Sh[1])},n.prototype._calculateLength=function(){var t=this.data,e=this._len,r=this._ux,o=this._uy,i=0,s=0,l=0,c=0;this._pathSegLen||(this._pathSegLen=[]);for(var d=this._pathSegLen,p=0,m=0,b=0;b<e;){var _=t[b++],S=1===b;S&&(l=i=t[b],c=s=t[b+1]);var k=-1;switch(_){case qa.M:i=l=t[b++],s=c=t[b++];break;case qa.L:var D=t[b++],O=(V=t[b++])-s;(Ef(ze=D-i)>r||Ef(O)>o||b===e-1)&&(k=Math.sqrt(ze*ze+O*O),i=D,s=V);break;case qa.C:var N=t[b++],F=t[b++],V=(D=t[b++],t[b++]),q=t[b++],Z=t[b++];k=km(i,s,N,F,D,V,q,Z,10),i=q,s=Z;break;case qa.Q:k=Wu(i,s,N=t[b++],F=t[b++],D=t[b++],V=t[b++],10),i=D,s=V;break;case qa.A:var Q=t[b++],re=t[b++],he=t[b++],ge=t[b++],ve=t[b++],_e=t[b++],Ee=_e+ve;b+=1,b++,S&&(l=ei(ve)*he+Q,c=Iu(ve)*ge+re),k=Gp(he,ge)*ko(ea,Math.abs(_e)),i=ei(Ee)*he+Q,s=Iu(Ee)*ge+re;break;case qa.R:l=i=t[b++],c=s=t[b++],k=2*t[b++]+2*t[b++];break;case qa.Z:var ze=l-i;O=c-s,k=Math.sqrt(ze*ze+O*O),i=l,s=c}k>=0&&(d[m++]=k,p+=k)}return this._pathLen=p,p},n.prototype.rebuildPath=function(t,e){var r,o,i,s,l,c,d,p,m,b,_=this.data,S=this._ux,k=this._uy,D=this._len,O=e<1,N=0,F=0,V=0;if(!O||(this._pathSegLen||this._calculateLength(),d=this._pathSegLen,p=e*this._pathLen))e:for(var q=0;q<D;){var Z=_[q++],Q=1===q;switch(Q&&(r=i=_[q],o=s=_[q+1]),Z!==qa.L&&V>0&&(t.lineTo(m,b),V=0),Z){case qa.M:r=i=_[q++],o=s=_[q++],t.moveTo(i,s);break;case qa.L:l=_[q++],c=_[q++];var re=Ef(l-i),he=Ef(c-s);if(re>S||he>k){if(O){if(N+(qo=d[F++])>p){var ge=(p-N)/qo;t.lineTo(i*(1-ge)+l*ge,s*(1-ge)+c*ge);break e}N+=qo}t.lineTo(l,c),i=l,s=c,V=0}else{var ve=re*re+he*he;ve>V&&(m=l,b=c,V=ve)}break;case qa.C:var _e=_[q++],Ee=_[q++],ze=_[q++],Ge=_[q++],Xe=_[q++],$e=_[q++];if(O){if(N+(qo=d[F++])>p){kf(i,_e,ze,Xe,ge=(p-N)/qo,wh),kf(s,Ee,Ge,$e,ge,Ig),t.bezierCurveTo(wh[1],Ig[1],wh[2],Ig[2],wh[3],Ig[3]);break e}N+=qo}t.bezierCurveTo(_e,Ee,ze,Ge,Xe,$e),i=Xe,s=$e;break;case qa.Q:if(_e=_[q++],Ee=_[q++],ze=_[q++],Ge=_[q++],O){if(N+(qo=d[F++])>p){rf(i,_e,ze,ge=(p-N)/qo,wh),rf(s,Ee,Ge,ge,Ig),t.quadraticCurveTo(wh[1],Ig[1],wh[2],Ig[2]);break e}N+=qo}t.quadraticCurveTo(_e,Ee,ze,Ge),i=ze,s=Ge;break;case qa.A:var nt=_[q++],yt=_[q++],_t=_[q++],Et=_[q++],hn=_[q++],Zn=_[q++],Rt=_[q++],Mn=!_[q++],lr=_t>Et?_t:Et,ar=Ef(_t-Et)>.001,Kn=hn+Zn,xr=!1;if(O&&(N+(qo=d[F++])>p&&(Kn=hn+Zn*(p-N)/qo,xr=!0),N+=qo),ar&&t.ellipse?t.ellipse(nt,yt,_t,Et,Rt,hn,Kn,Mn):t.arc(nt,yt,lr,hn,Kn,Mn),xr)break e;Q&&(r=ei(hn)*_t+nt,o=Iu(hn)*Et+yt),i=ei(Kn)*_t+nt,s=Iu(Kn)*Et+yt;break;case qa.R:r=i=_[q],o=s=_[q+1],l=_[q++],c=_[q++];var nr=_[q++],Cr=_[q++];if(O){if(N+(qo=d[F++])>p){var zr=p-N;t.moveTo(l,c),t.lineTo(l+ko(zr,nr),c),(zr-=nr)>0&&t.lineTo(l+nr,c+ko(zr,Cr)),(zr-=Cr)>0&&t.lineTo(l+Gp(nr-zr,0),c+Cr),(zr-=nr)>0&&t.lineTo(l,c+Gp(Cr-zr,0));break e}N+=qo}t.rect(l,c,nr,Cr);break;case qa.Z:if(O){var qo;if(N+(qo=d[F++])>p){t.lineTo(i*(1-(ge=(p-N)/qo))+r*ge,s*(1-ge)+o*ge);break e}N+=qo}t.closePath(),i=r,s=o}}},n.prototype.clone=function(){var t=new n,e=this.data;return t.data=e.slice?e.slice():Array.prototype.slice.call(e),t._len=this._len,t},n.CMD=qa,n.initDefaultProps=((t=n.prototype)._saveData=!0,t._ux=0,t._uy=0,t._pendingPtDist=0,void(t._version=0)),n;var t}();function Ch(n,t,e,r,o,i,s){if(0===o)return!1;var c,l=o;if(s>t+l&&s>r+l||s<t-l&&s<r-l||i>n+l&&i>e+l||i<n-l&&i<e-l)return!1;if(n===e)return Math.abs(i-n)<=l/2;var d=(c=(t-r)/(n-e))*i-s+(n*r-e*t)/(n-e);return d*d/(c*c+1)<=l/2*l/2}function Pm(n,t,e,r,o,i,s,l,c,d,p){if(0===c)return!1;var m=c;return!(p>t+m&&p>r+m&&p>i+m&&p>l+m||p<t-m&&p<r-m&&p<i-m&&p<l-m||d>n+m&&d>e+m&&d>o+m&&d>s+m||d<n-m&&d<e-m&&d<o-m&&d<s-m)&&Ja(n,t,e,r,o,i,s,l,d,p,null)<=m/2}function Jv(n,t,e,r,o,i,s,l,c){if(0===s)return!1;var d=s;return!(c>t+d&&c>r+d&&c>i+d||c<t-d&&c<r-d&&c<i-d||l>n+d&&l>e+d&&l>o+d||l<n-d&&l<e-d&&l<o-d)&&yb(n,t,e,r,o,i,l,c,null)<=d/2}var hd=2*Math.PI;function ws(n){return(n%=hd)<0&&(n+=hd),n}var zd=2*Math.PI;function K1(n,t,e,r,o,i,s,l,c){if(0===s)return!1;var d=s;l-=n,c-=t;var p=Math.sqrt(l*l+c*c);if(p-d>e||p+d<e)return!1;if(Math.abs(r-o)%zd<1e-4)return!0;if(i){var m=r;r=ws(o),o=ws(m)}else r=ws(r),o=ws(o);r>o&&(o+=zd);var b=Math.atan2(c,l);return b<0&&(b+=zd),b>=r&&b<=o||b+zd>=r&&b+zd<=o}function Mh(n,t,e,r,o,i){if(i>t&&i>r||i<t&&i<r||r===t)return 0;var s=(i-t)/(r-t),l=r<t?1:-1;1!==s&&0!==s||(l=r<t?.5:-.5);var c=s*(e-n)+n;return c===o?1/0:c>o?l:0}var Fd=Os.CMD,ep=2*Math.PI,Wl=[-1,-1,-1],uf=[-1,-1];function xc(n,t,e,r,o,i,s,l,c,d){if(d>t&&d>r&&d>i&&d>l||d<t&&d<r&&d<i&&d<l)return 0;var p,m=zl(t,r,i,l,d,Wl);if(0===m)return 0;for(var b=0,_=-1,S=void 0,k=void 0,D=0;D<m;D++){var O=Wl[D],N=0===O||1===O?.5:1;Da(n,e,o,s,O)<c||(_<0&&(_=Nc(t,r,i,l,uf),uf[1]<uf[0]&&_>1&&(p=uf[0],uf[0]=uf[1],uf[1]=p),S=Da(t,r,i,l,uf[0]),_>1&&(k=Da(t,r,i,l,uf[1]))),b+=2===_?O<uf[0]?S<t?N:-N:O<uf[1]?k<S?N:-N:l<k?N:-N:O<uf[0]?S<t?N:-N:l<S?N:-N)}return b}function kb(n,t,e,r,o,i,s,l){if(l>t&&l>r&&l>i||l<t&&l<r&&l<i)return 0;var c=function(S,k,D,O,N){var F=S-2*k+D,V=2*(k-S),q=S-O,Z=0;if(ec(F))Zs(V)&&(re=-q/V)>=0&&re<=1&&(N[Z++]=re);else{var Q=V*V-4*F*q;if(ec(Q))(re=-V/(2*F))>=0&&re<=1&&(N[Z++]=re);else if(Q>0){var re,he=ol(Q),ge=(-V-he)/(2*F);(re=(-V+he)/(2*F))>=0&&re<=1&&(N[Z++]=re),ge>=0&&ge<=1&&(N[Z++]=ge)}}return Z}(t,r,i,l,Wl);if(0===c)return 0;var d=Qa(t,r,i);if(d>=0&&d<=1){for(var p=0,m=Sa(t,r,i,d),b=0;b<c;b++){var _=0===Wl[b]||1===Wl[b]?.5:1;Sa(n,e,o,Wl[b])<s||(p+=Wl[b]<d?m<t?_:-_:i<m?_:-_)}return p}return _=0===Wl[0]||1===Wl[0]?.5:1,Sa(n,e,o,Wl[0])<s?0:i<t?_:-_}function _a(n,t,e,r,o,i,s,l){if((l-=t)>e||l<-e)return 0;var c=Math.sqrt(e*e-l*l);Wl[0]=-c,Wl[1]=c;var d=Math.abs(r-o);if(d<1e-4)return 0;if(d>=ep-1e-4){r=0,o=ep;var p=i?1:-1;return s>=Wl[0]+n&&s<=Wl[1]+n?p:0}if(r>o){var m=r;r=o,o=m}r<0&&(r+=ep,o+=ep);for(var b=0,_=0;_<2;_++){var S=Wl[_];if(S+n>s){var k=Math.atan2(l,S);p=i?1:-1,k<0&&(k=ep+k),(k>=r&&k<=o||k+ep>=r&&k+ep<=o)&&(k>Math.PI/2&&k<1.5*Math.PI&&(p=-p),b+=p)}}return b}function Qv(n,t,e,r,o){for(var i,s,d=n.data,p=n.len(),m=0,b=0,_=0,S=0,k=0,D=0;D<p;){var O=d[D++],N=1===D;switch(O===Fd.M&&D>1&&(e||(m+=Mh(b,_,S,k,r,o))),N&&(S=b=d[D],k=_=d[D+1]),O){case Fd.M:b=S=d[D++],_=k=d[D++];break;case Fd.L:if(e){if(Ch(b,_,d[D],d[D+1],t,r,o))return!0}else m+=Mh(b,_,d[D],d[D+1],r,o)||0;b=d[D++],_=d[D++];break;case Fd.C:if(e){if(Pm(b,_,d[D++],d[D++],d[D++],d[D++],d[D],d[D+1],t,r,o))return!0}else m+=xc(b,_,d[D++],d[D++],d[D++],d[D++],d[D],d[D+1],r,o)||0;b=d[D++],_=d[D++];break;case Fd.Q:if(e){if(Jv(b,_,d[D++],d[D++],d[D],d[D+1],t,r,o))return!0}else m+=kb(b,_,d[D++],d[D++],d[D],d[D+1],r,o)||0;b=d[D++],_=d[D++];break;case Fd.A:var F=d[D++],V=d[D++],q=d[D++],Z=d[D++],Q=d[D++],re=d[D++];D+=1;var he=!!(1-d[D++]);i=Math.cos(Q)*q+F,s=Math.sin(Q)*Z+V,N?(S=i,k=s):m+=Mh(b,_,i,s,r,o);var ge=(r-F)*Z/q+F;if(e){if(K1(F,V,Z,Q,Q+re,he,t,ge,o))return!0}else m+=_a(F,V,Z,Q,Q+re,he,ge,o);b=Math.cos(Q+re)*q+F,_=Math.sin(Q+re)*Z+V;break;case Fd.R:if(S=b=d[D++],k=_=d[D++],i=S+d[D++],s=k+d[D++],e){if(Ch(S,k,i,k,t,r,o)||Ch(i,k,i,s,t,r,o)||Ch(i,s,S,s,t,r,o)||Ch(S,s,S,k,t,r,o))return!0}else m+=Mh(i,k,i,s,r,o),m+=Mh(S,s,S,k,r,o);break;case Fd.Z:if(e){if(Ch(b,_,S,k,t,r,o))return!0}else m+=Mh(b,_,S,k,r,o);b=S,_=k}}return e||Math.abs(_-k)<1e-4||(m+=Mh(b,_,S,k,r,o)||0),0!==m}var Rm=Yn({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},_h),Vd={style:Yn({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},ac.style)},tp=Rr.concat(["invisible","culling","z","z2","zlevel","parent"]),Go=function(n){function t(r){return n.call(this,r)||this}var e;return gt(t,n),t.prototype.update=function(){var r=this;n.prototype.update.call(this);var o=this.style;if(o.decal){var i=this._decalEl=this._decalEl||new t;i.buildPath===t.prototype.buildPath&&(i.buildPath=function(d){r.buildPath(d,r.shape)}),i.silent=!0;var s=i.style;for(var l in o)s[l]!==o[l]&&(s[l]=o[l]);s.fill=o.fill?o.decal:null,s.decal=null,s.shadowColor=null,o.strokeFirst&&(s.stroke=null);for(var c=0;c<tp.length;++c)i[tp[c]]=this[tp[c]];i.__dirty|=1}else this._decalEl&&(this._decalEl=null)},t.prototype.getDecalElement=function(){return this._decalEl},t.prototype._init=function(r){var o=rr(r);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var s=0;s<o.length;s++){var l=o[s],c=r[l];"style"===l?this.style?Lt(this.style,c):this.useStyle(c):"shape"===l?Lt(this.shape,c):n.prototype.attrKV.call(this,l,c)}this.style||this.useStyle({})},t.prototype.getDefaultStyle=function(){return null},t.prototype.getDefaultShape=function(){return{}},t.prototype.canBeInsideText=function(){return this.hasFill()},t.prototype.getInsideTextFill=function(){var r=this.style.fill;if("none"!==r){if(ir(r)){var o=Od(r,0);return o>.5?$n:o>.2?"#eee":fr}if(r)return fr}return $n},t.prototype.getInsideTextStroke=function(r){var o=this.style.fill;if(ir(o)){var i=this.__zr;if(!(!i||!i.isDarkMode())==Od(r,0)<.4)return o}},t.prototype.buildPath=function(r,o,i){},t.prototype.pathUpdated=function(){this.__dirty&=-5},t.prototype.getUpdatedPathProxy=function(r){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,r),this.path},t.prototype.createPathProxy=function(){this.path=new Os(!1)},t.prototype.hasStroke=function(){var r=this.style,o=r.stroke;return!(null==o||"none"===o||!(r.lineWidth>0))},t.prototype.hasFill=function(){var r=this.style.fill;return null!=r&&"none"!==r},t.prototype.getBoundingRect=function(){var r=this._rect,o=this.style,i=!r;if(i){var s=!1;this.path||(s=!0,this.createPathProxy());var l=this.path;(s||4&this.__dirty)&&(l.beginPath(),this.buildPath(l,this.shape,!1),this.pathUpdated()),r=l.getBoundingRect()}if(this._rect=r,this.hasStroke()&&this.path&&this.path.len()>0){var c=this._rectStroke||(this._rectStroke=r.clone());if(this.__dirty||i){c.copy(r);var d=o.strokeNoScale?this.getLineScale():1,p=o.lineWidth;if(!this.hasFill()){var m=this.strokeContainThreshold;p=Math.max(p,null==m?4:m)}d>1e-10&&(c.width+=p/d,c.height+=p/d,c.x-=p/d/2,c.y-=p/d/2)}return c}return r},t.prototype.contain=function(r,o){var i=this.transformCoordToLocal(r,o),s=this.getBoundingRect(),l=this.style;if(s.contain(r=i[0],o=i[1])){var c=this.path;if(this.hasStroke()){var d=l.lineWidth,p=l.strokeNoScale?this.getLineScale():1;if(p>1e-10&&(this.hasFill()||(d=Math.max(d,this.strokeContainThreshold)),Qv(c,d/p,!0,r,o)))return!0}if(this.hasFill())return Qv(c,0,!1,r,o)}return!1},t.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},t.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},t.prototype.animateShape=function(r){return this.animate("shape",r)},t.prototype.updateDuringAnimation=function(r){"style"===r?this.dirtyStyle():"shape"===r?this.dirtyShape():this.markRedraw()},t.prototype.attrKV=function(r,o){"shape"===r?this.setShape(o):n.prototype.attrKV.call(this,r,o)},t.prototype.setShape=function(r,o){var i=this.shape;return i||(i=this.shape={}),"string"==typeof r?i[r]=o:Lt(i,r),this.dirtyShape(),this},t.prototype.shapeChanged=function(){return!!(4&this.__dirty)},t.prototype.createStyle=function(r){return El(Rm,r)},t.prototype._innerSaveToNormal=function(r){n.prototype._innerSaveToNormal.call(this,r);var o=this._normalState;r.shape&&!o.shape&&(o.shape=Lt({},this.shape))},t.prototype._applyStateObj=function(r,o,i,s,l,c){n.prototype._applyStateObj.call(this,r,o,i,s,l,c);var d,p=!(o&&s);if(o&&o.shape?l?s?d=o.shape:(d=Lt({},i.shape),Lt(d,o.shape)):(d=Lt({},s?this.shape:i.shape),Lt(d,o.shape)):p&&(d=i.shape),d)if(l){this.shape=Lt({},this.shape);for(var m={},b=rr(d),_=0;_<b.length;_++){var S=b[_];"object"==typeof d[S]?this.shape[S]=d[S]:m[S]=d[S]}this._transitionState(r,{shape:m},c)}else this.shape=d,this.dirtyShape()},t.prototype._mergeStates=function(r){for(var o,i=n.prototype._mergeStates.call(this,r),s=0;s<r.length;s++){var l=r[s];l.shape&&this._mergeStyle(o=o||{},l.shape)}return o&&(i.shape=o),i},t.prototype.getAnimationStyleProps=function(){return Vd},t.prototype.isZeroArea=function(){return!1},t.extend=function(r){var o=function(s){function l(c){var d=s.call(this,c)||this;return r.init&&r.init.call(d,c),d}return gt(l,s),l.prototype.getDefaultStyle=function(){return an(r.style)},l.prototype.getDefaultShape=function(){return an(r.shape)},l}(t);for(var i in r)"function"==typeof r[i]&&(o.prototype[i]=r[i]);return o},t.initDefaultProps=((e=t.prototype).type="path",e.strokeContainThreshold=5,e.segmentIgnoreThreshold=0,e.subPixelOptimize=!1,e.autoBatch=!1,void(e.__dirty=7)),t}(Ml),Hd=Yn({strokeFirst:!0,font:cr,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},Rm),Og=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.hasStroke=function(){var e=this.style,r=e.stroke;return null!=r&&"none"!==r&&e.lineWidth>0},t.prototype.hasFill=function(){var e=this.style.fill;return null!=e&&"none"!==e},t.prototype.createStyle=function(e){return El(Hd,e)},t.prototype.setBoundingRect=function(e){this._rect=e},t.prototype.getBoundingRect=function(){var e=this.style;if(!this._rect){var r=e.text;null!=r?r+="":r="";var o=ua(r,e.font,e.textAlign,e.textBaseline);if(o.x+=e.x||0,o.y+=e.y||0,this.hasStroke()){var i=e.lineWidth;o.x-=i/2,o.y-=i/2,o.width+=i,o.height+=i}this._rect=o}return this._rect},t.initDefaultProps=void(t.prototype.dirtyRectTolerance=10),t}(Ml);Og.prototype.type="tspan";var _c=Yn({x:0,y:0},_h),$1={style:Yn({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},ac.style)},fl=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.createStyle=function(e){return El(_c,e)},t.prototype._getSize=function(e){var r=this.style,o=r[e];if(null!=o)return o;var i,s=(i=r.image)&&"string"!=typeof i&&i.width&&i.height?r.image:this.__image;if(!s)return 0;var l="width"===e?"height":"width",c=r[l];return null==c?s[e]:s[e]/s[l]*c},t.prototype.getWidth=function(){return this._getSize("width")},t.prototype.getHeight=function(){return this._getSize("height")},t.prototype.getAnimationStyleProps=function(){return $1},t.prototype.getBoundingRect=function(){var e=this.style;return this._rect||(this._rect=new Io(e.x||0,e.y||0,this.getWidth(),this.getHeight())),this._rect},t}(Ml);fl.prototype.type="image";var kh=Math.round;function Eg(n,t,e){if(t){var r=t.x1,o=t.x2,i=t.y1,s=t.y2;n.x1=r,n.x2=o,n.y1=i,n.y2=s;var l=e&&e.lineWidth;return l&&(kh(2*r)===kh(2*o)&&(n.x1=n.x2=Th(r,l,!0)),kh(2*i)===kh(2*s)&&(n.y1=n.y2=Th(i,l,!0))),n}}function L_(n,t,e){if(t){var r=t.x,o=t.y,i=t.width,s=t.height;n.x=r,n.y=o,n.width=i,n.height=s;var l=e&&e.lineWidth;return l&&(n.x=Th(r,l,!0),n.y=Th(o,l,!0),n.width=Math.max(Th(r+i,l,!1)-n.x,0===i?0:1),n.height=Math.max(Th(o+s,l,!1)-n.y,0===s?0:1)),n}}function Th(n,t,e){if(!t)return n;var r=kh(2*n);return(r+kh(t))%2==0?r/2:(r+(e?1:-1))/2}var Pf=function(){this.x=0,this.y=0,this.width=0,this.height=0},r0={},bi=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultShape=function(){return new Pf},t.prototype.buildPath=function(e,r){var o,i,s,l,d,p,m,b,_,S,k,D,O,N,F,V;if(this.subPixelOptimize){var c=L_(r0,r,this.style);o=c.x,i=c.y,s=c.width,l=c.height,c.r=r.r,r=c}else o=r.x,i=r.y,s=r.width,l=r.height;r.r?(d=e,D=(p=r).x,O=p.y,(N=p.width)<0&&(D+=N,N=-N),(F=p.height)<0&&(O+=F,F=-F),"number"==typeof(V=p.r)?m=b=_=S=V:V instanceof Array?1===V.length?m=b=_=S=V[0]:2===V.length?(m=_=V[0],b=S=V[1]):3===V.length?(m=V[0],b=S=V[1],_=V[2]):(m=V[0],b=V[1],_=V[2],S=V[3]):m=b=_=S=0,m+b>N&&(m*=N/(k=m+b),b*=N/k),_+S>N&&(_*=N/(k=_+S),S*=N/k),b+_>F&&(b*=F/(k=b+_),_*=F/k),m+S>F&&(m*=F/(k=m+S),S*=F/k),d.moveTo(D+m,O),d.lineTo(D+N-b,O),0!==b&&d.arc(D+N-b,O+b,b,-Math.PI/2,0),d.lineTo(D+N,O+F-_),0!==_&&d.arc(D+N-_,O+F-_,_,0,Math.PI/2),d.lineTo(D+S,O+F),0!==S&&d.arc(D+S,O+F-S,S,Math.PI/2,Math.PI),d.lineTo(D,O+m),0!==m&&d.arc(D+m,O+m,m,Math.PI,1.5*Math.PI)):e.rect(o,i,s,l)},t.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},t}(Go);bi.prototype.type="rect";var ey={fill:"#000"},Tb={style:Yn({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},ac.style)},Oi=function(n){function t(e){var r=n.call(this)||this;return r.type="text",r._children=[],r._defaultStyle=ey,r.attr(e),r}return gt(t,n),t.prototype.childrenRef=function(){return this._children},t.prototype.update=function(){n.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var r=this._children[e];r.zlevel=this.zlevel,r.z=this.z,r.z2=this.z2,r.culling=this.culling,r.cursor=this.cursor,r.invisible=this.invisible}},t.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):n.prototype.updateTransform.call(this)},t.prototype.getLocalTransform=function(e){var r=this.innerTransformable;return r?r.getLocalTransform(e):n.prototype.getLocalTransform.call(this,e)},t.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),n.prototype.getComputedTransform.call(this)},t.prototype._updateSubTexts=function(){var e;this._childCursor=0,dl(e=this.style),Ce(e.rich,dl),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},t.prototype.addSelfToZr=function(e){n.prototype.addSelfToZr.call(this,e);for(var r=0;r<this._children.length;r++)this._children[r].__zr=e},t.prototype.removeSelfFromZr=function(e){n.prototype.removeSelfFromZr.call(this,e);for(var r=0;r<this._children.length;r++)this._children[r].__zr=null},t.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var e=new Io(0,0,0,0),r=this._children,o=[],i=null,s=0;s<r.length;s++){var l=r[s],c=l.getBoundingRect(),d=l.getLocalTransform(o);d?(e.copy(c),e.applyTransform(d),(i=i||e.clone()).union(e)):(i=i||c.clone()).union(c)}this._rect=i||e}return this._rect},t.prototype.setDefaultTextStyle=function(e){this._defaultStyle=e||ey},t.prototype.setTextContent=function(e){},t.prototype._mergeStyle=function(e,r){if(!r)return e;var o=r.rich,i=e.rich||o&&{};return Lt(e,r),o&&i?(this._mergeRich(i,o),e.rich=i):i&&(e.rich=i),e},t.prototype._mergeRich=function(e,r){for(var o=rr(r),i=0;i<o.length;i++){var s=o[i];e[s]=e[s]||{},Lt(e[s],r[s])}},t.prototype.getAnimationStyleProps=function(){return Tb},t.prototype._getOrCreateChild=function(e){var r=this._children[this._childCursor];return r&&r instanceof e||(r=new e),this._children[this._childCursor++]=r,r.__zr=this.__zr,r.parent=this,r},t.prototype._updatePlainTexts=function(){var e=this.style,r=e.font||cr,o=e.padding,i=function(Xe,$e){null!=Xe&&(Xe+="");var nt,yt=$e.overflow,_t=$e.padding,Et=$e.font,hn="truncate"===yt,Zn=Vl(Et),Rt=un($e.lineHeight,Zn),Mn=!!$e.backgroundColor,lr="truncate"===$e.lineOverflow,ar=$e.width,Kn=(nt=null==ar||"break"!==yt&&"breakAll"!==yt?Xe?Xe.split("\n"):[]:Xe?Em(Xe,$e.font,ar,"breakAll"===yt,0).lines:[]).length*Rt,xr=un($e.height,Kn);if(Kn>xr&&lr){var nr=Math.floor(xr/Rt);nt=nt.slice(0,nr)}if(Xe&&hn&&null!=ar)for(var Cr=ya(ar,Et,$e.ellipsis,{minChar:$e.truncateMinChar,placeholder:$e.placeholder}),zr=0;zr<nt.length;zr++)nt[zr]=Sb(nt[zr],Cr);var qo=xr,li=0;for(zr=0;zr<nt.length;zr++)li=Math.max(Fi(nt[zr],Et),li);null==ar&&(ar=li);var ss=li;return _t&&(qo+=_t[0]+_t[2],ss+=_t[1]+_t[3],ar+=_t[1]+_t[3]),Mn&&(ss=ar),{lines:nt,height:xr,outerWidth:ss,outerHeight:qo,lineHeight:Rt,calculatedLineHeight:Zn,contentWidth:li,contentHeight:Kn,width:ar}}(Ju(e),e),s=Db(e),l=!!e.backgroundColor,c=i.outerHeight,d=i.outerWidth,p=i.contentWidth,m=i.lines,b=i.lineHeight,_=this._defaultStyle,S=e.x||0,k=e.y||0,D=e.align||_.align||"left",O=e.verticalAlign||_.verticalAlign||"top",N=S,F=on(k,i.contentHeight,O);if(s||o){var V=Fl(S,d,D),q=on(k,c,O);s&&this._renderBackground(e,e,V,q,d,c)}F+=b/2,o&&(N=Xc(S,D,o),"top"===O?F+=o[0]:"bottom"===O&&(F-=o[2]));for(var Z=0,Q=!1,re=($s("fill"in e?e.fill:(Q=!0,_.fill))),he=(wc("stroke"in e?e.stroke:l||_.autoStroke&&!Q?null:(Z=2,_.stroke))),ge=e.textShadowBlur>0,ve=null!=e.width&&("truncate"===e.overflow||"break"===e.overflow||"breakAll"===e.overflow),_e=i.calculatedLineHeight,Ee=0;Ee<m.length;Ee++){var ze=this._getOrCreateChild(Og),Ge=ze.createStyle();ze.useStyle(Ge),Ge.text=m[Ee],Ge.x=N,Ge.y=F,D&&(Ge.textAlign=D),Ge.textBaseline="middle",Ge.opacity=e.opacity,Ge.strokeFirst=!0,ge&&(Ge.shadowBlur=e.textShadowBlur||0,Ge.shadowColor=e.textShadowColor||"transparent",Ge.shadowOffsetX=e.textShadowOffsetX||0,Ge.shadowOffsetY=e.textShadowOffsetY||0),Ge.stroke=he,Ge.fill=re,he&&(Ge.lineWidth=e.lineWidth||Z,Ge.lineDash=e.lineDash,Ge.lineDashOffset=e.lineDashOffset||0),Ge.font=r,Rf(Ge,e),F+=b,ve&&ze.setBoundingRect(new Io(Fl(Ge.x,e.width,Ge.textAlign),on(Ge.y,_e,Ge.textBaseline),p,_e))}},t.prototype._updateRichTexts=function(){var e=this.style,r=function(ze,Ge){var Xe=new Cb;if(null!=ze&&(ze+=""),!ze)return Xe;for(var $e,nt=Ge.width,yt=Ge.height,_t=Ge.overflow,Et="break"!==_t&&"breakAll"!==_t||null==nt?null:{width:nt,accumWidth:0,breakAll:"breakAll"===_t},hn=bh.lastIndex=0;null!=($e=bh.exec(ze));){var Zn=$e.index;Zn>hn&&kg(Xe,ze.substring(hn,Zn),Ge,Et),kg(Xe,$e[2],Ge,Et,$e[1]),hn=bh.lastIndex}hn<ze.length&&kg(Xe,ze.substring(hn,ze.length),Ge,Et);var Rt=[],Mn=0,lr=0,ar=Ge.padding,Kn="truncate"===_t,xr="truncate"===Ge.lineOverflow;function nr(Jl,_f,wf){Jl.width=_f,Jl.lineHeight=wf,Mn+=wf,lr=Math.max(lr,_f)}e:for(var Cr=0;Cr<Xe.lines.length;Cr++){for(var zr=Xe.lines[Cr],qo=0,li=0,ss=0;ss<zr.tokens.length;ss++){var ji=(Xo=zr.tokens[ss]).styleName&&Ge.rich[Xo.styleName]||{},pa=Xo.textPadding=ji.padding,za=pa?pa[1]+pa[3]:0,Bu=Xo.font=ji.font||Ge.font;Xo.contentHeight=Vl(Bu);var nl=un(ji.height,Xo.contentHeight);if(Xo.innerHeight=nl,pa&&(nl+=pa[0]+pa[2]),Xo.height=nl,Xo.lineHeight=rn(ji.lineHeight,Ge.lineHeight,nl),Xo.align=ji&&ji.align||Ge.align,Xo.verticalAlign=ji&&ji.verticalAlign||"middle",xr&&null!=yt&&Mn+Xo.lineHeight>yt){ss>0?(zr.tokens=zr.tokens.slice(0,ss),nr(zr,li,qo),Xe.lines=Xe.lines.slice(0,Cr+1)):Xe.lines=Xe.lines.slice(0,Cr);break e}var td=ji.width,Yv=null==td||"auto"===td;if("string"==typeof td&&"%"===td.charAt(td.length-1))Xo.percentWidth=td,Rt.push(Xo),Xo.contentWidth=Fi(Xo.text,Bu);else{if(Yv){var A_=ji.backgroundColor,Fa=A_&&A_.image;Fa&&Cg(Fa=ia(Fa))&&(Xo.width=Math.max(Xo.width,Fa.width*nl/Fa.height))}var Bi=Kn&&null!=nt?nt-li:null;null!=Bi&&Bi<Xo.width?!Yv||Bi<za?(Xo.text="",Xo.width=Xo.contentWidth=0):(Xo.text=Jh(Xo.text,Bi-za,Bu,Ge.ellipsis,{minChar:Ge.truncateMinChar}),Xo.width=Xo.contentWidth=Fi(Xo.text,Bu)):Xo.contentWidth=Fi(Xo.text,Bu)}Xo.width+=za,li+=Xo.width,ji&&(qo=Math.max(qo,Xo.lineHeight))}nr(zr,li,qo)}for(Xe.outerWidth=Xe.width=un(nt,lr),Xe.outerHeight=Xe.height=un(yt,Mn),Xe.contentHeight=Mn,Xe.contentWidth=lr,ar&&(Xe.outerWidth+=ar[1]+ar[3],Xe.outerHeight+=ar[0]+ar[2]),Cr=0;Cr<Rt.length;Cr++){var Xo,zu=(Xo=Rt[Cr]).percentWidth;Xo.width=parseInt(zu,10)/100*Xe.width}return Xe}(Ju(e),e),o=r.width,i=r.outerWidth,s=r.outerHeight,l=e.padding,d=e.y||0,p=this._defaultStyle,b=e.verticalAlign||p.verticalAlign,_=Fl(e.x||0,i,e.align||p.align),S=on(d,s,b),k=_,D=S;l&&(k+=l[3],D+=l[0]);var O=k+o;Db(e)&&this._renderBackground(e,e,_,S,i,s);for(var N=!!e.backgroundColor,F=0;F<r.lines.length;F++){for(var V=r.lines[F],q=V.tokens,Z=q.length,Q=V.lineHeight,re=V.width,he=0,ge=k,ve=O,_e=Z-1,Ee=void 0;he<Z&&(!(Ee=q[he]).align||"left"===Ee.align);)this._placeToken(Ee,e,Q,D,ge,"left",N),re-=Ee.width,ge+=Ee.width,he++;for(;_e>=0&&"right"===(Ee=q[_e]).align;)this._placeToken(Ee,e,Q,D,ve,"right",N),re-=Ee.width,ve-=Ee.width,_e--;for(ge+=(o-(ge-k)-(O-ve)-re)/2;he<=_e;)this._placeToken(Ee=q[he],e,Q,D,ge+Ee.width/2,"center",N),ge+=Ee.width,he++;D+=Q}},t.prototype._placeToken=function(e,r,o,i,s,l,c){var d=r.rich[e.styleName]||{};d.text=e.text;var p=e.verticalAlign,m=i+o/2;"top"===p?m=i+e.height/2:"bottom"===p&&(m=i+o-e.height/2),!e.isLineHolder&&Db(d)&&this._renderBackground(d,r,"right"===l?s-e.width:"center"===l?s-e.width/2:s,m-e.height/2,e.width,e.height);var b=!!d.backgroundColor,_=e.textPadding;_&&(s=Xc(s,l,_),m-=e.height/2-_[0]-e.innerHeight/2);var S=this._getOrCreateChild(Og),k=S.createStyle();S.useStyle(k);var D=this._defaultStyle,O=!1,N=0,F=$s("fill"in d?d.fill:"fill"in r?r.fill:(O=!0,D.fill)),V=wc("stroke"in d?d.stroke:"stroke"in r?r.stroke:b||c||D.autoStroke&&!O?null:(N=2,D.stroke)),q=d.textShadowBlur>0||r.textShadowBlur>0;k.text=e.text,k.x=s,k.y=m,q&&(k.shadowBlur=d.textShadowBlur||r.textShadowBlur||0,k.shadowColor=d.textShadowColor||r.textShadowColor||"transparent",k.shadowOffsetX=d.textShadowOffsetX||r.textShadowOffsetX||0,k.shadowOffsetY=d.textShadowOffsetY||r.textShadowOffsetY||0),k.textAlign=l,k.textBaseline="middle",k.font=e.font||cr,k.opacity=rn(d.opacity,r.opacity,1),Rf(k,d),V&&(k.lineWidth=rn(d.lineWidth,r.lineWidth,N),k.lineDash=un(d.lineDash,r.lineDash),k.lineDashOffset=r.lineDashOffset||0,k.stroke=V),F&&(k.fill=F);var Z=e.contentWidth,Q=e.contentHeight;S.setBoundingRect(new Io(Fl(k.x,Z,k.textAlign),on(k.y,Q,k.textBaseline),Z,Q))},t.prototype._renderBackground=function(e,r,o,i,s,l){var c,d,p,m=e.backgroundColor,b=e.borderWidth,_=e.borderColor,S=m&&m.image,k=m&&!S,D=e.borderRadius,O=this;if(k||e.lineHeight||b&&_){(c=this._getOrCreateChild(bi)).useStyle(c.createStyle()),c.style.fill=null;var N=c.shape;N.x=o,N.y=i,N.width=s,N.height=l,N.r=D,c.dirtyShape()}if(k)(p=c.style).fill=m||null,p.fillOpacity=un(e.fillOpacity,1);else if(S){(d=this._getOrCreateChild(fl)).onload=function(){O.dirtyStyle()};var F=d.style;F.image=m.image,F.x=o,F.y=i,F.width=s,F.height=l}b&&_&&((p=c.style).lineWidth=b,p.stroke=_,p.strokeOpacity=un(e.strokeOpacity,1),p.lineDash=e.borderDash,p.lineDashOffset=e.borderDashOffset||0,c.strokeContainThreshold=0,c.hasFill()&&c.hasStroke()&&(p.strokeFirst=!0,p.lineWidth*=2));var V=(c||d).style;V.shadowBlur=e.shadowBlur||0,V.shadowColor=e.shadowColor||"transparent",V.shadowOffsetX=e.shadowOffsetX||0,V.shadowOffsetY=e.shadowOffsetY||0,V.opacity=rn(e.opacity,r.opacity,1)},t.makeFont=function(e){var r="";return Ou(e)&&(r=[e.fontStyle,e.fontWeight,lf(e.fontSize),e.fontFamily||"sans-serif"].join(" ")),r&&ki(r)||e.textFont||e.font},t}(Ml),o0={left:!0,right:1,center:1},Up={top:1,bottom:1,middle:1},i0=["fontStyle","fontWeight","fontSize","fontFamily"];function lf(n){return"string"!=typeof n||-1===n.indexOf("px")&&-1===n.indexOf("rem")&&-1===n.indexOf("em")?isNaN(+n)?"12px":n+"px":n}function Rf(n,t){for(var e=0;e<i0.length;e++){var r=i0[e],o=t[r];null!=o&&(n[r]=o)}}function Ou(n){return null!=n.fontSize||n.fontFamily||n.fontWeight}function dl(n){if(n){n.font=Oi.makeFont(n);var t=n.align;"middle"===t&&(t="center"),n.align=null==t||o0[t]?t:"left";var e=n.verticalAlign;"center"===e&&(e="middle"),n.verticalAlign=null==e||Up[e]?e:"top",n.padding&&(n.padding=Sr(n.padding))}}function wc(n,t){return null==n||t<=0||"transparent"===n||"none"===n?null:n.image||n.colorStops?"#000":n}function $s(n){return null==n||"none"===n?null:n.image||n.colorStops?"#000":n}function Xc(n,t,e){return"right"===t?n-e[1]:"center"===t?n+e[3]/2-e[1]/2:n+e[3]}function Ju(n){var t=n.text;return null!=t&&(t+=""),t}function Db(n){return!!(n.backgroundColor||n.lineHeight||n.borderWidth&&n.borderColor)}var So=hi(),Lm=function(n,t,e,r){if(r){var o=So(r);o.dataIndex=e,o.dataType=t,o.seriesIndex=n,"group"===r.type&&r.traverse(function(i){var s=So(i);s.seriesIndex=n,s.dataIndex=e,s.dataType=t})}},jn=1,N_={},ty=hi(),a0=hi(),Ss=["emphasis","blur","select"],Pg=["normal","emphasis","blur","select"],en="highlight",Rg="downplay",Nm="select",Bm="unselect",ny="toggleSelect";function Dh(n){return null!=n&&"none"!==n}var Cs=new Vo(100);function Js(n){if(ir(n)){var t=Cs.get(n);return t||(t=Cl(n,-.1),Cs.put(n,t)),t}if(sn(n)){var e=Lt({},n);return e.colorStops=mt(n.colorStops,function(r){return{offset:r.offset,color:Cl(r.color,-.1)}}),e}return n}function Lg(n,t,e){n.onHoverStateChange&&(n.hoverState||0)!==e&&n.onHoverStateChange(t),n.hoverState=e}function B_(n){Lg(n,"emphasis",2)}function J1(n){2===n.hoverState&&Lg(n,"normal",0)}function s0(n){Lg(n,"blur",1)}function Q1(n){1===n.hoverState&&Lg(n,"normal",0)}function ex(n){n.selected=!0}function ry(n){n.selected=!1}function u0(n,t,e){t(n,e)}function Gd(n,t,e){u0(n,t,e),n.isGroup&&n.traverse(function(r){u0(r,t,e)})}function Za(n,t){switch(t){case"emphasis":n.hoverState=2;break;case"normal":n.hoverState=0;break;case"blur":n.hoverState=1;break;case"select":n.selected=!0}}function l0(n,t){var o,i,s,l,c,d,e=this.states[n];if(this.style){if("emphasis"===n)return function(r,o,i,s){var l=i&&Ir(i,"select")>=0,c=!1;if(r instanceof Go){var d=ty(r),p=l&&d.selectFill||d.normalFill,m=l&&d.selectStroke||d.normalStroke;if(Dh(p)||Dh(m)){var b=(s=s||{}).style||{};"inherit"===b.fill?(c=!0,s=Lt({},s),(b=Lt({},b)).fill=p):!Dh(b.fill)&&Dh(p)?(c=!0,s=Lt({},s),(b=Lt({},b)).fill=Js(p)):!Dh(b.stroke)&&Dh(m)&&(c||(s=Lt({},s),b=Lt({},b)),b.stroke=Js(m)),s.style=b}}if(s&&null==s.z2){c||(s=Lt({},s));var _=r.z2EmphasisLift;s.z2=r.z2+(null!=_?_:10)}return s}(this,0,t,e);if("blur"===n)return i=e,s=Ir(this.currentStates,o=n)>=0,l=this.style.opacity,c=s?null:function(p,m,b,_){for(var S=p.style,k={},D=0;D<m.length;D++){var O=m[D],N=S[O];k[O]=null==N?_&&_[O]:N}for(D=0;D<p.animators.length;D++){var F=p.animators[D];F.__fromStateTransition&&F.__fromStateTransition.indexOf(b)<0&&"style"===F.targetName&&F.saveTo(k,m)}return k}(this,["opacity"],o,{opacity:1}),null==(d=(i=i||{}).style||{}).opacity&&(i=Lt({},i),d=Lt({opacity:s?l:.1*c.opacity},d),i.style=d),i;if("select"===n)return function(r,o,i){if(i&&null==i.z2){i=Lt({},i);var s=r.z2SelectLift;i.z2=r.z2+(null!=s?s:9)}return i}(this,0,e)}return e}function Ng(n){n.stateProxy=l0;var t=n.getTextContent(),e=n.getTextGuideLine();t&&(t.stateProxy=l0),e&&(e.stateProxy=l0)}function Ab(n,t){!np(n,t)&&!n.__highByOuter&&Gd(n,B_)}function oy(n,t){!np(n,t)&&!n.__highByOuter&&Gd(n,J1)}function pd(n,t){n.__highByOuter|=1<<(t||0),Gd(n,B_)}function Ah(n,t){!(n.__highByOuter&=~(1<<(t||0)))&&Gd(n,J1)}function Ib(n){Gd(n,s0)}function c0(n){Gd(n,Q1)}function f0(n){Gd(n,ex)}function cf(n){Gd(n,ry)}function np(n,t){return n.__highDownSilentOnTouch&&t.zrByTouch}function Ob(n){var t=n.getModel(),e=[],r=[];t.eachComponent(function(o,i){var s=a0(i),l="series"===o,c=l?n.getViewOfSeriesModel(i):n.getViewOfComponentModel(i);!l&&r.push(c),s.isBlured&&(c.group.traverse(function(d){Q1(d)}),l&&e.push(i)),s.isBlured=!1}),Ce(r,function(o){o&&o.toggleBlurSeries&&o.toggleBlurSeries(e,!1,t)})}function Eb(n,t,e,r){var o=r.getModel();function i(d,p){for(var m=0;m<p.length;m++){var b=d.getItemGraphicEl(p[m]);b&&c0(b)}}if(e=e||"coordinateSystem",null!=n&&t&&"none"!==t){var s=o.getSeriesByIndex(n),l=s.coordinateSystem;l&&l.master&&(l=l.master);var c=[];o.eachSeries(function(d){var p=s===d,m=d.coordinateSystem;if(m&&m.master&&(m=m.master),!("series"===e&&!p||"coordinateSystem"===e&&!(m&&l?m===l:p)||"series"===t&&p)){if(r.getViewOfSeriesModel(d).group.traverse(function(S){s0(S)}),nn(t))i(d.getData(),t);else if(wr(t))for(var b=rr(t),_=0;_<b.length;_++)i(d.getData(b[_]),t[b[_]]);c.push(d),a0(d).isBlured=!0}}),o.eachComponent(function(d,p){if("series"!==d){var m=r.getViewOfComponentModel(p);m&&m.toggleBlurSeries&&m.toggleBlurSeries(c,!0,o)}})}}function iy(n,t,e){if(null!=n&&null!=t){var r=e.getModel().getComponent(n,t);if(r){a0(r).isBlured=!0;var o=e.getViewOfComponentModel(r);o&&o.focusBlurEnabled&&o.group.traverse(function(i){s0(i)})}}}function tx(n,t,e,r){var o={focusSelf:!1,dispatchers:null};if(null==n||"series"===n||null==t||null==e)return o;var i=r.getModel().getComponent(n,t);if(!i)return o;var s=r.getViewOfComponentModel(i);if(!s||!s.findHighDownDispatchers)return o;for(var l,c=s.findHighDownDispatchers(e),d=0;d<c.length;d++)if("self"===So(c[d]).focus){l=!0;break}return{focusSelf:l,dispatchers:c}}function z_(n){Ce(n.getAllData(),function(t){var r=t.type;t.data.eachItemGraphicEl(function(o,i){n.isSelected(i,r)?f0(o):cf(o)})})}function zm(n){var t=[];return n.eachSeries(function(e){Ce(e.getAllData(),function(r){var o=r.type,i=e.getSelectedDataIndices();if(i.length>0){var s={dataIndex:i,seriesIndex:e.seriesIndex};null!=o&&(s.dataType=o),t.push(s)}})}),t}function gd(n,t,e){sc(n,!0),Gd(n,Ng),F_(n,t,e)}function vu(n,t,e,r){r?sc(n,!1):gd(n,t,e)}function F_(n,t,e){var r=So(n);null!=t?(r.focus=t,r.blurScope=e):r.focus&&(r.focus=null)}var nx=["emphasis","blur","select"],Fm={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function kl(n,t,e,r){e=e||"itemStyle";for(var o=0;o<nx.length;o++){var i=nx[o],s=t.getModel([i,e]);n.ensureState(i).style=r?r(s):s[Fm[e]]()}}function sc(n,t){var e=!1===t,r=n;n.highDownSilentOnTouch&&(r.__highDownSilentOnTouch=n.highDownSilentOnTouch),e&&!r.__highDownDispatcher||(r.__highByOuter=r.__highByOuter||0,r.__highDownDispatcher=!e)}function Lf(n){return!(!n||!n.__highDownDispatcher)}function ff(n){var t=n.type;return t===Nm||t===Bm||t===ny}function Bg(n){var t=n.type;return t===en||t===Rg}var Vm=Os.CMD,Hm=[[],[],[]],Wm=Math.sqrt,rx=Math.atan2;function jp(n,t){if(t){var e,r,o,i,s,l,c=n.data,d=n.len(),p=Vm.M,m=Vm.C,b=Vm.L,_=Vm.R,S=Vm.A,k=Vm.Q;for(o=0,i=0;o<d;){switch(e=c[o++],i=o,r=0,e){case p:case b:r=1;break;case m:r=3;break;case k:r=2;break;case S:var D=t[4],O=t[5],N=Wm(t[0]*t[0]+t[1]*t[1]),F=Wm(t[2]*t[2]+t[3]*t[3]),V=rx(-t[1]/F,t[0]/N);c[o]*=N,c[o++]+=D,c[o]*=F,c[o++]+=O,c[o++]*=N,c[o++]*=F,c[o++]+=V,c[o++]+=V,i=o+=2;break;case _:l[0]=c[o++],l[1]=c[o++],gn(l,l,t),c[i++]=l[0],c[i++]=l[1],l[0]+=c[o++],l[1]+=c[o++],gn(l,l,t),c[i++]=l[0],c[i++]=l[1]}for(s=0;s<r;s++){var q=Hm[s];q[0]=c[o++],q[1]=c[o++],gn(q,q,t),c[i++]=q[0],c[i++]=q[1]}}n.increaseVersion()}}var Ih=Math.sqrt,ay=Math.sin,sy=Math.cos,Eu=Math.PI;function Pb(n){return Math.sqrt(n[0]*n[0]+n[1]*n[1])}function Nf(n,t){return(n[0]*t[0]+n[1]*t[1])/(Pb(n)*Pb(t))}function Rb(n,t){return(n[0]*t[1]<n[1]*t[0]?-1:1)*Math.acos(Nf(n,t))}function V_(n,t,e,r,o,i,s,l,c,d,p){var m=c*(Eu/180),b=sy(m)*(n-e)/2+ay(m)*(t-r)/2,_=-1*ay(m)*(n-e)/2+sy(m)*(t-r)/2,S=b*b/(s*s)+_*_/(l*l);S>1&&(s*=Ih(S),l*=Ih(S));var k=(o===i?-1:1)*Ih((s*s*(l*l)-s*s*(_*_)-l*l*(b*b))/(s*s*(_*_)+l*l*(b*b)))||0,D=k*s*_/l,O=k*-l*b/s,N=(n+e)/2+sy(m)*D-ay(m)*O,F=(t+r)/2+ay(m)*D+sy(m)*O,V=Rb([1,0],[(b-D)/s,(_-O)/l]),q=[(b-D)/s,(_-O)/l],Z=[(-1*b-D)/s,(-1*_-O)/l],Q=Rb(q,Z);if(Nf(q,Z)<=-1&&(Q=Eu),Nf(q,Z)>=1&&(Q=0),Q<0){var re=Math.round(Q/Eu*1e6)/1e6;Q=2*Eu+re%2*Eu}p.addData(d,N,F,s,l,V,Q,m,i)}var zg=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,Gm=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,Fg=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.applyTransform=function(e){},t}(Go);function Lb(n){return null!=n.setData}function Nb(n,t){var e=function(o){var i=new Os;if(!o)return i;var s,l=0,c=0,d=l,p=c,m=Os.CMD,b=o.match(zg);if(!b)return i;for(var _=0;_<b.length;_++){for(var S=b[_],k=S.charAt(0),D=void 0,O=S.match(Gm)||[],N=O.length,F=0;F<N;F++)O[F]=parseFloat(O[F]);for(var V=0;V<N;){var q=void 0,Z=void 0,Q=void 0,re=void 0,he=void 0,ge=void 0,ve=void 0,_e=l,Ee=c,ze=void 0,Ge=void 0;switch(k){case"l":l+=O[V++],c+=O[V++],i.addData(D=m.L,l,c);break;case"L":l=O[V++],c=O[V++],i.addData(D=m.L,l,c);break;case"m":l+=O[V++],c+=O[V++],i.addData(D=m.M,l,c),d=l,p=c,k="l";break;case"M":l=O[V++],c=O[V++],i.addData(D=m.M,l,c),d=l,p=c,k="L";break;case"h":l+=O[V++],i.addData(D=m.L,l,c);break;case"H":l=O[V++],i.addData(D=m.L,l,c);break;case"v":c+=O[V++],i.addData(D=m.L,l,c);break;case"V":c=O[V++],i.addData(D=m.L,l,c);break;case"C":i.addData(D=m.C,O[V++],O[V++],O[V++],O[V++],O[V++],O[V++]),l=O[V-2],c=O[V-1];break;case"c":i.addData(D=m.C,O[V++]+l,O[V++]+c,O[V++]+l,O[V++]+c,O[V++]+l,O[V++]+c),l+=O[V-2],c+=O[V-1];break;case"S":q=l,Z=c,ze=i.len(),Ge=i.data,s===m.C&&(q+=l-Ge[ze-4],Z+=c-Ge[ze-3]),_e=O[V++],Ee=O[V++],l=O[V++],c=O[V++],i.addData(D=m.C,q,Z,_e,Ee,l,c);break;case"s":q=l,Z=c,ze=i.len(),Ge=i.data,s===m.C&&(q+=l-Ge[ze-4],Z+=c-Ge[ze-3]),_e=l+O[V++],Ee=c+O[V++],l+=O[V++],c+=O[V++],i.addData(D=m.C,q,Z,_e,Ee,l,c);break;case"Q":_e=O[V++],Ee=O[V++],l=O[V++],c=O[V++],i.addData(D=m.Q,_e,Ee,l,c);break;case"q":_e=O[V++]+l,Ee=O[V++]+c,l+=O[V++],c+=O[V++],i.addData(D=m.Q,_e,Ee,l,c);break;case"T":q=l,Z=c,ze=i.len(),Ge=i.data,s===m.Q&&(q+=l-Ge[ze-4],Z+=c-Ge[ze-3]),l=O[V++],c=O[V++],i.addData(D=m.Q,q,Z,l,c);break;case"t":q=l,Z=c,ze=i.len(),Ge=i.data,s===m.Q&&(q+=l-Ge[ze-4],Z+=c-Ge[ze-3]),l+=O[V++],c+=O[V++],i.addData(D=m.Q,q,Z,l,c);break;case"A":Q=O[V++],re=O[V++],he=O[V++],ge=O[V++],ve=O[V++],V_(_e=l,Ee=c,l=O[V++],c=O[V++],ge,ve,Q,re,he,D=m.A,i);break;case"a":Q=O[V++],re=O[V++],he=O[V++],ge=O[V++],ve=O[V++],V_(_e=l,Ee=c,l+=O[V++],c+=O[V++],ge,ve,Q,re,he,D=m.A,i)}}"z"!==k&&"Z"!==k||(i.addData(D=m.Z),l=d,c=p),s=D}return i.toStatic(),i}(n),r=Lt({},t);return r.buildPath=function(o){if(Lb(o))o.setData(e.data),(i=o.getContext())&&o.rebuildPath(i,1);else{var i=o;e.rebuildPath(i,1)}},r.applyTransform=function(o){jp(e,o),this.dirtyShape()},r}function Gl(n,t){return new Fg(Nb(n,t))}function d0(n,t){t=t||{};var e=new Go;return n.shape&&e.setShape(n.shape),e.setStyle(n.style),t.bakeTransform?jp(e.path,n.getComputedTransform()):t.toLocal?e.setLocalTransform(n.getComputedTransform()):e.copyTransform(n),e.buildPath=n.buildPath,e.applyTransform=e.applyTransform,e.z=n.z,e.z2=n.z2,e.zlevel=n.zlevel,e}var Um=function(){this.cx=0,this.cy=0,this.r=0},Bf=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultShape=function(){return new Um},t.prototype.buildPath=function(e,r){e.moveTo(r.cx+r.r,r.cy),e.arc(r.cx,r.cy,r.r,0,2*Math.PI)},t}(Go);Bf.prototype.type="circle";var uy=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},Qs=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultShape=function(){return new uy},t.prototype.buildPath=function(e,r){var o=.5522848,i=r.cx,s=r.cy,l=r.rx,c=r.ry,d=l*o,p=c*o;e.moveTo(i-l,s),e.bezierCurveTo(i-l,s-p,i-d,s-c,i,s-c),e.bezierCurveTo(i+d,s-c,i+l,s-p,i+l,s),e.bezierCurveTo(i+l,s+p,i+d,s+c,i,s+c),e.bezierCurveTo(i-d,s+c,i-l,s+p,i-l,s),e.closePath()},t}(Go);Qs.prototype.type="ellipse";var H_=Math.PI,Yp=2*H_,qp=Math.sin,ly=Math.cos,OS=Math.acos,uc=Math.atan2,jm=Math.abs,Xp=Math.sqrt,Zp=Math.max,Zc=Math.min,df=1e-4;function Ym(n,t,e,r,o,i,s){var l=n-e,c=t-r,d=(s?i:-i)/Xp(l*l+c*c),p=d*c,m=-d*l,b=n+p,_=t+m,S=e+p,k=r+m,D=(b+S)/2,O=(_+k)/2,N=S-b,F=k-_,V=N*N+F*F,q=o-i,Z=b*k-S*_,Q=(F<0?-1:1)*Xp(Zp(0,q*q*V-Z*Z)),re=(Z*F-N*Q)/V,he=(-Z*N-F*Q)/V,ge=(Z*F+N*Q)/V,ve=(-Z*N+F*Q)/V,_e=re-D,Ee=he-O,ze=ge-D,Ge=ve-O;return _e*_e+Ee*Ee>ze*ze+Ge*Ge&&(re=ge,he=ve),{cx:re,cy:he,x0:-p,y0:-m,x1:re*(o/q-1),y1:he*(o/q-1)}}var Sc=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},Cc=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultShape=function(){return new Sc},t.prototype.buildPath=function(e,r){!function ox(n,t){var e,r=Zp(t.r,0),o=Zp(t.r0||0,0),i=r>0;if(i||o>0){if(i||(r=o,o=0),o>r){var s=r;r=o,o=s}var l=t.startAngle,c=t.endAngle;if(!isNaN(l)&&!isNaN(c)){var d=t.cx,p=t.cy,m=!!t.clockwise,b=jm(c-l),_=b>Yp&&b%Yp;if(_>df&&(b=_),r>df)if(b>Yp-df)n.moveTo(d+r*ly(l),p+r*qp(l)),n.arc(d,p,r,l,c,!m),o>df&&(n.moveTo(d+o*ly(c),p+o*qp(c)),n.arc(d,p,o,c,l,m));else{var S=void 0,k=void 0,D=void 0,O=void 0,N=void 0,F=void 0,V=void 0,q=void 0,Z=void 0,Q=void 0,re=void 0,he=void 0,ge=void 0,ve=void 0,_e=void 0,Ee=void 0,ze=r*ly(l),Ge=r*qp(l),Xe=o*ly(c),$e=o*qp(c),nt=b>df;if(nt){var yt=t.cornerRadius;yt&&(S=(e=function(zr){var qo;if(Ue(zr)){var li=zr.length;if(!li)return zr;qo=1===li?[zr[0],zr[0],0,0]:2===li?[zr[0],zr[0],zr[1],zr[1]]:3===li?zr.concat(zr[2]):zr}else qo=[zr,zr,zr,zr];return qo}(yt))[0],k=e[1],D=e[2],O=e[3]);var _t=jm(r-o)/2;if(N=Zc(_t,D),F=Zc(_t,O),V=Zc(_t,S),q=Zc(_t,k),re=Z=Zp(N,F),he=Q=Zp(V,q),(Z>df||Q>df)&&(ge=r*ly(c),ve=r*qp(c),_e=o*ly(l),Ee=o*qp(l),b<H_)){var Et=function(zr,qo,li,ss,ji,pa,za,Bu){var nl=li-zr,td=ss-qo,Yv=za-ji,A_=Bu-pa,Fa=A_*nl-Yv*td;if(!(Fa*Fa<df))return[zr+(Fa=(Yv*(qo-pa)-A_*(zr-ji))/Fa)*nl,qo+Fa*td]}(ze,Ge,_e,Ee,ge,ve,Xe,$e);if(Et){var hn=ze-Et[0],Zn=Ge-Et[1],Rt=ge-Et[0],Mn=ve-Et[1],lr=1/qp(OS((hn*Rt+Zn*Mn)/(Xp(hn*hn+Zn*Zn)*Xp(Rt*Rt+Mn*Mn)))/2),ar=Xp(Et[0]*Et[0]+Et[1]*Et[1]);re=Zc(Z,(r-ar)/(lr+1)),he=Zc(Q,(o-ar)/(lr-1))}}}if(nt)if(re>df){var Kn=Zc(D,re),xr=Zc(O,re),nr=Ym(_e,Ee,ze,Ge,r,Kn,m),Cr=Ym(ge,ve,Xe,$e,r,xr,m);n.moveTo(d+nr.cx+nr.x0,p+nr.cy+nr.y0),re<Z&&Kn===xr?n.arc(d+nr.cx,p+nr.cy,re,uc(nr.y0,nr.x0),uc(Cr.y0,Cr.x0),!m):(Kn>0&&n.arc(d+nr.cx,p+nr.cy,Kn,uc(nr.y0,nr.x0),uc(nr.y1,nr.x1),!m),n.arc(d,p,r,uc(nr.cy+nr.y1,nr.cx+nr.x1),uc(Cr.cy+Cr.y1,Cr.cx+Cr.x1),!m),xr>0&&n.arc(d+Cr.cx,p+Cr.cy,xr,uc(Cr.y1,Cr.x1),uc(Cr.y0,Cr.x0),!m))}else n.moveTo(d+ze,p+Ge),n.arc(d,p,r,l,c,!m);else n.moveTo(d+ze,p+Ge);o>df&&nt?he>df?(Kn=Zc(S,he),nr=Ym(Xe,$e,ge,ve,o,-(xr=Zc(k,he)),m),Cr=Ym(ze,Ge,_e,Ee,o,-Kn,m),n.lineTo(d+nr.cx+nr.x0,p+nr.cy+nr.y0),he<Q&&Kn===xr?n.arc(d+nr.cx,p+nr.cy,he,uc(nr.y0,nr.x0),uc(Cr.y0,Cr.x0),!m):(xr>0&&n.arc(d+nr.cx,p+nr.cy,xr,uc(nr.y0,nr.x0),uc(nr.y1,nr.x1),!m),n.arc(d,p,o,uc(nr.cy+nr.y1,nr.cx+nr.x1),uc(Cr.cy+Cr.y1,Cr.cx+Cr.x1),m),Kn>0&&n.arc(d+Cr.cx,p+Cr.cy,Kn,uc(Cr.y1,Cr.x1),uc(Cr.y0,Cr.x0),!m))):(n.lineTo(d+Xe,p+$e),n.arc(d,p,o,c,l,m)):n.lineTo(d+Xe,p+$e)}else n.moveTo(d,p);n.closePath()}}}(e,r)},t.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},t}(Go);Cc.prototype.type="sector";var qm=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},rp=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultShape=function(){return new qm},t.prototype.buildPath=function(e,r){var o=r.cx,i=r.cy,s=2*Math.PI;e.moveTo(o+r.r,i),e.arc(o,i,r.r,0,s,!1),e.moveTo(o+r.r0,i),e.arc(o,i,r.r0,0,s,!0)},t}(Go);function Vg(n,t,e){var r=t.smooth,o=t.points;if(o&&o.length>=2){if(r){var i=function(b,_,S,k){var D,O,N,F,V=[],q=[],Z=[],Q=[];if(k){N=[1/0,1/0],F=[-1/0,-1/0];for(var re=0,he=b.length;re<he;re++)Dt(N,N,b[re]),ro(F,F,b[re]);Dt(N,N,k[0]),ro(F,F,k[1])}for(re=0,he=b.length;re<he;re++){var ge=b[re];if(S)D=b[re?re-1:he-1],O=b[(re+1)%he];else{if(0===re||re===he-1){V.push(Vu(b[re]));continue}D=b[re-1],O=b[re+1]}Ke(q,O,D),Zt(q,q,_);var ve=Rn(ge,D),_e=Rn(ge,O),Ee=ve+_e;0!==Ee&&(ve/=Ee,_e/=Ee),Zt(Z,q,-ve),Zt(Q,q,_e);var ze=Ot([],ge,Z),Ge=Ot([],ge,Q);k&&(ro(ze,ze,N),Dt(ze,ze,F),ro(Ge,Ge,N),Dt(Ge,Ge,F)),V.push(ze),V.push(Ge)}return S&&V.push(V.shift()),V}(o,r,e,t.smoothConstraint);n.moveTo(o[0][0],o[0][1]);for(var s=o.length,l=0;l<(e?s:s-1);l++){var c=i[2*l],d=i[2*l+1],p=o[(l+1)%s];n.bezierCurveTo(c[0],c[1],d[0],d[1],p[0],p[1])}}else{n.moveTo(o[0][0],o[0][1]),l=1;for(var m=o.length;l<m;l++)n.lineTo(o[l][0],o[l][1])}e&&n.closePath()}}rp.prototype.type="ring";var cy=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},eu=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultShape=function(){return new cy},t.prototype.buildPath=function(e,r){Vg(e,r,!0)},t}(Go);eu.prototype.type="polygon";var Xm=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},Qu=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Xm},t.prototype.buildPath=function(e,r){Vg(e,r,!1)},t}(Go);Qu.prototype.type="polyline";var fy={},Bb=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},Pu=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new Bb},t.prototype.buildPath=function(e,r){var o,i,s,l;if(this.subPixelOptimize){var c=Eg(fy,r,this.style);o=c.x1,i=c.y1,s=c.x2,l=c.y2}else o=r.x1,i=r.y1,s=r.x2,l=r.y2;var d=r.percent;0!==d&&(e.moveTo(o,i),d<1&&(s=o*(1-d)+s*d,l=i*(1-d)+l*d),e.lineTo(s,l))},t.prototype.pointAt=function(e){var r=this.shape;return[r.x1*(1-e)+r.x2*e,r.y1*(1-e)+r.y2*e]},t}(Go);Pu.prototype.type="line";var lc=[],W_=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function zb(n,t,e){return null!=n.cpx2||null!=n.cpy2?[(e?rd:Da)(n.x1,n.cpx1,n.cpx2,n.x2,t),(e?rd:Da)(n.y1,n.cpy1,n.cpy2,n.y2,t)]:[(e?wl:Sa)(n.x1,n.cpx1,n.x2,t),(e?wl:Sa)(n.y1,n.cpy1,n.y2,t)]}var cc=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new W_},t.prototype.buildPath=function(e,r){var o=r.x1,i=r.y1,s=r.x2,l=r.y2,c=r.cpx1,d=r.cpy1,p=r.cpx2,m=r.cpy2,b=r.percent;0!==b&&(e.moveTo(o,i),null==p||null==m?(b<1&&(rf(o,c,s,b,lc),c=lc[1],s=lc[2],rf(i,d,l,b,lc),d=lc[1],l=lc[2]),e.quadraticCurveTo(c,d,s,l)):(b<1&&(kf(o,c,p,s,b,lc),c=lc[1],p=lc[2],s=lc[3],kf(i,d,m,l,b,lc),d=lc[1],m=lc[2],l=lc[3]),e.bezierCurveTo(c,d,p,m,s,l)))},t.prototype.pointAt=function(e){return zb(this.shape,e,!1)},t.prototype.tangentAt=function(e){var r=zb(this.shape,e,!0);return er(r,r)},t}(Go);cc.prototype.type="bezier-curve";var dy=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},Es=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new dy},t.prototype.buildPath=function(e,r){var o=r.cx,i=r.cy,s=Math.max(r.r,0),l=r.startAngle,c=r.endAngle,d=r.clockwise,p=Math.cos(l),m=Math.sin(l);e.moveTo(p*s+o,m*s+i),e.arc(o,i,s,l,c,!d)},t}(Go);Es.prototype.type="arc";var op=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="compound",e}return gt(t,n),t.prototype._updatePathDirty=function(){for(var e=this.shape.paths,r=this.shapeChanged(),o=0;o<e.length;o++)r=r||e[o].shapeChanged();r&&this.dirtyShape()},t.prototype.beforeBrush=function(){this._updatePathDirty();for(var e=this.shape.paths||[],r=this.getGlobalScale(),o=0;o<e.length;o++)e[o].path||e[o].createPathProxy(),e[o].path.setScale(r[0],r[1],e[o].segmentIgnoreThreshold)},t.prototype.buildPath=function(e,r){for(var o=r.paths||[],i=0;i<o.length;i++)o[i].buildPath(e,o[i].shape,!0)},t.prototype.afterBrush=function(){for(var e=this.shape.paths||[],r=0;r<e.length;r++)e[r].pathUpdated()},t.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),Go.prototype.getBoundingRect.call(this)},t}(Go),tu=function(){function n(t){this.colorStops=t||[]}return n.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},n}(),Kp=function(n){function t(e,r,o,i,s,l){var c=n.call(this,s)||this;return c.x=null==e?0:e,c.y=null==r?0:r,c.x2=null==o?1:o,c.y2=null==i?0:i,c.type="linear",c.global=l||!1,c}return gt(t,n),t}(tu),h0=function(n){function t(e,r,o,i,s){var l=n.call(this,i)||this;return l.x=null==e?.5:e,l.y=null==r?.5:r,l.r=null==o?.5:o,l.type="radial",l.global=s||!1,l}return gt(t,n),t}(tu),Ud=[0,0],Mc=[0,0],Zm=new lo,Km=new lo,Hg=function(){function n(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var r=0;r<4;r++)this._corners[r]=new lo;for(r=0;r<2;r++)this._axes[r]=new lo;t&&this.fromBoundingRect(t,e)}return n.prototype.fromBoundingRect=function(t,e){var r=this._corners,o=this._axes,i=t.x,s=t.y,l=i+t.width,c=s+t.height;if(r[0].set(i,s),r[1].set(l,s),r[2].set(l,c),r[3].set(i,c),e)for(var d=0;d<4;d++)r[d].transform(e);for(lo.sub(o[0],r[1],r[0]),lo.sub(o[1],r[3],r[0]),o[0].normalize(),o[1].normalize(),d=0;d<2;d++)this._origin[d]=o[d].dot(r[0])},n.prototype.intersect=function(t,e){var r=!0,o=!e;return Zm.set(1/0,1/0),Km.set(0,0),!this._intersectCheckOneSide(this,t,Zm,Km,o,1)&&(r=!1,o)||!this._intersectCheckOneSide(t,this,Zm,Km,o,-1)&&(r=!1,o)||o||lo.copy(e,r?Zm:Km),r},n.prototype._intersectCheckOneSide=function(t,e,r,o,i,s){for(var l=!0,c=0;c<2;c++){var d=this._axes[c];if(this._getProjMinMaxOnAxis(c,t._corners,Ud),this._getProjMinMaxOnAxis(c,e._corners,Mc),Ud[1]<Mc[0]||Ud[0]>Mc[1]){if(l=!1,i)return l;var p=Math.abs(Mc[0]-Ud[1]),m=Math.abs(Ud[0]-Mc[1]);Math.min(p,m)>o.len()&&lo.scale(o,d,p<m?-p*s:m*s)}else r&&(p=Math.abs(Mc[0]-Ud[1]),m=Math.abs(Ud[0]-Mc[1]),Math.min(p,m)<r.len()&&lo.scale(r,d,p<m?p*s:-m*s))}return l},n.prototype._getProjMinMaxOnAxis=function(t,e,r){for(var o=this._axes[t],i=this._origin,s=e[0].dot(o)+i[t],l=s,c=s,d=1;d<e.length;d++){var p=e[d].dot(o)+i[t];l=Math.min(p,l),c=Math.max(p,c)}r[0]=l,r[1]=c},n}(),G_=[],p0=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return gt(t,n),t.prototype.traverse=function(e,r){e.call(r,this)},t.prototype.useStyle=function(){this.style={}},t.prototype.getCursor=function(){return this._cursor},t.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},t.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},t.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},t.prototype.addDisplayable=function(e,r){r?this._temporaryDisplayables.push(e):this._displayables.push(e),this.markRedraw()},t.prototype.addDisplayables=function(e,r){r=r||!1;for(var o=0;o<e.length;o++)this.addDisplayable(e[o],r)},t.prototype.getDisplayables=function(){return this._displayables},t.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},t.prototype.eachPendingDisplayable=function(e){for(var r=this._cursor;r<this._displayables.length;r++)e&&e(this._displayables[r]);for(r=0;r<this._temporaryDisplayables.length;r++)e&&e(this._temporaryDisplayables[r])},t.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(r=this._displayables[e]).parent=this,r.update(),r.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var r;(r=this._temporaryDisplayables[e]).parent=this,r.update(),r.parent=null}},t.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new Io(1/0,1/0,-1/0,-1/0),r=0;r<this._displayables.length;r++){var o=this._displayables[r],i=o.getBoundingRect().clone();o.needLocalTransform()&&i.applyTransform(o.getLocalTransform(G_)),e.union(i)}this._rect=e}return this._rect},t.prototype.contain=function(e,r){var o=this.transformCoordToLocal(e,r);if(this.getBoundingRect().contain(o[0],o[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(e,r))return!0;return!1},t}(Ml),ix=hi();function Kc(n,t,e,r,o){var i;if(t&&t.ecModel){var s=t.ecModel.getUpdatePayload();i=s&&s.animation}var l="update"===n;if(t&&t.isAnimationEnabled()){var c=void 0,d=void 0,p=void 0;return r?(c=un(r.duration,200),d=un(r.easing,"cubicOut"),p=0):(c=t.getShallow(l?"animationDurationUpdate":"animationDuration"),d=t.getShallow(l?"animationEasingUpdate":"animationEasing"),p=t.getShallow(l?"animationDelayUpdate":"animationDelay")),i&&(null!=i.duration&&(c=i.duration),null!=i.easing&&(d=i.easing),null!=i.delay&&(p=i.delay)),yr(p)&&(p=p(e,o)),yr(c)&&(c=c(e)),{duration:c||0,delay:p,easing:d}}return null}function ii(n,t,e,r,o,i,s){var l,c=!1;yr(o)?(s=i,i=o,o=null):wr(o)&&(i=o.cb,s=o.during,c=o.isFrom,l=o.removeOpt,o=o.dataIndex);var d="leave"===n;d||t.stopAnimation("leave");var p=Kc(n,r,o,d?l||{}:null,r&&r.getAnimationDelayParams?r.getAnimationDelayParams(t,o):null);if(p&&p.duration>0){var m={duration:p.duration,delay:p.delay||0,easing:p.easing,done:i,force:!!i||!!s,setToFinal:!d,scope:n,during:s};c?t.animateFrom(e,m):t.animateTo(e,m)}else t.stopAnimation(),!c&&t.attr(e),s&&s(1),i&&i()}function mo(n,t,e,r,o,i){ii("update",n,t,e,r,o,i)}function as(n,t,e,r,o,i){ii("enter",n,t,e,r,o,i)}function $m(n){if(!n.__zr)return!0;for(var t=0;t<n.animators.length;t++)if("leave"===n.animators[t].scope)return!0;return!1}function $p(n,t,e,r,o,i){$m(n)||ii("leave",n,t,e,r,o,i)}function ax(n,t,e,r){n.removeTextContent(),n.removeTextGuideLine(),$p(n,{style:{opacity:0}},t,e,r)}function g0(n,t,e){function r(){n.parent&&n.parent.remove(n)}n.isGroup?n.traverse(function(o){o.isGroup||ax(o,t,e,r)}):ax(n,t,e,r)}function md(n){ix(n).oldStyle=n.style}var m0=Math.max,Jm=Math.min,kc={};function Ul(n){return Go.extend(n)}function hy(n,t){return function(n,t){var e=Nb(n,t);return function(r){function o(i){var s=r.call(this,i)||this;return s.applyTransform=e.applyTransform,s.buildPath=e.buildPath,s}return gt(o,r),o}(Fg)}(n,t)}function hf(n,t){kc[n]=t}function v0(n){if(kc.hasOwnProperty(n))return kc[n]}function ip(n,t,e,r){var o=Gl(n,t);return e&&("center"===r&&(e=ap(e,o.getBoundingRect())),y0(o,e)),o}function zf(n,t,e){var r=new fl({style:{image:n,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(o){"center"===e&&r.setStyle(ap(t,{width:o.width,height:o.height}))}});return r}function ap(n,t){var e,r=t.width/t.height,o=n.height*r;return e=o<=n.width?n.height:(o=n.width)/r,{x:n.x+n.width/2-o/2,y:n.y+n.height/2-e/2,width:o,height:e}}var fc=function(n,t){for(var e=[],r=n.length,o=0;o<r;o++)e.push(n[o].getUpdatedPathProxy(!0));var s=new Go(t);return s.createPathProxy(),s.buildPath=function(l){if(Lb(l)){l.appendPath(e);var c=l.getContext();c&&l.rebuildPath(c,1)}},s};function y0(n,t){if(n.applyTransform){var e=n.getBoundingRect().calculateTransform(t);n.applyTransform(e)}}function vd(n,t){return Eg(n,n,{lineWidth:t}),n}var Qm=Th;function jo(n,t){for(var e=bg([]);n&&n!==t;)Fr(e,n.getLocalTransform(),e),n=n.parent;return e}function hl(n,t,e){return t&&!nn(t)&&(t=To.getLocalTransform(t)),e&&(t=It([],t)),gn([],n,t)}function sp(n,t,e){var r=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),o=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),i=["left"===n?-r:"right"===n?r:0,"top"===n?-o:"bottom"===n?o:0];return i=hl(i,t,e),Math.abs(i[0])>Math.abs(i[1])?i[0]>0?"right":"left":i[1]>0?"bottom":"top"}function sx(n){return!n.isGroup}function Ho(n,t,e){if(n&&t){var r,o=(r={},n.traverse(function(s){sx(s)&&s.anid&&(r[s.anid]=s)}),r);t.traverse(function(s){if(sx(s)&&s.anid){var l=o[s.anid];if(l){var c=i(s);s.attr(i(l)),mo(s,c,e,So(s).dataIndex)}}})}function i(s){var l={x:s.x,y:s.y,rotation:s.rotation};return null!=s.shape&&(l.shape=Lt({},s.shape)),l}}function Fb(n,t){return mt(n,function(e){var r=e[0];r=m0(r,t.x),r=Jm(r,t.x+t.width);var o=e[1];return o=m0(o,t.y),[r,o=Jm(o,t.y+t.height)]})}function py(n,t){var e=m0(n.x,t.x),r=Jm(n.x+n.width,t.x+t.width),o=m0(n.y,t.y),i=Jm(n.y+n.height,t.y+t.height);if(r>=e&&i>=o)return{x:e,y:o,width:r-e,height:i-o}}function yd(n,t,e){var r=Lt({rectHover:!0},t),o=r.style={strokeNoScale:!0};if(e=e||{x:-1,y:-1,width:2,height:2},n)return 0===n.indexOf("image://")?(o.image=n.slice(8),Yn(o,e),new fl(r)):ip(n.replace("path://",""),r,e,"center")}function Wg(n,t,e,r,o){for(var i=0,s=o[o.length-1];i<o.length;i++){var l=o[i];if(gy(n,t,e,r,l[0],l[1],s[0],s[1]))return!0;s=l}}function gy(n,t,e,r,o,i,s,l){var c,d=e-n,p=r-t,m=s-o,b=l-i,_=Ff(m,b,d,p);if((c=_)<=1e-6&&c>=-1e-6)return!1;var S=n-o,k=t-i,D=Ff(S,k,d,p)/_;if(D<0||D>1)return!1;var O=Ff(S,k,m,b)/_;return!(O<0||O>1)}function Ff(n,t,e,r){return n*r-e*t}function yu(n){var t=n.itemTooltipOption,e=n.componentModel,r=n.itemName,o=ir(t)?{formatter:t}:t,i=e.mainType,s=e.componentIndex,l={componentType:i,name:r,$vars:["name"]};l[i+"Index"]=s;var c=n.formatterParamsExtra;c&&Ce(rr(c),function(p){br(l,p)||(l[p]=c[p],l.$vars.push(p))});var d=So(n.el);d.componentMainType=i,d.componentIndex=s,d.tooltipConfig={name:r,option:Yn({content:r,formatterParams:l},o)}}function ev(n,t){var e;n.isGroup&&(e=t(n)),e||n.traverse(t)}function Tl(n,t){if(n)if(Ue(n))for(var e=0;e<n.length;e++)ev(n[e],t);else ev(n,t)}hf("circle",Bf),hf("ellipse",Qs),hf("sector",Cc),hf("ring",rp),hf("polygon",eu),hf("polyline",Qu),hf("rect",bi),hf("line",Pu),hf("bezierCurve",cc),hf("arc",Es);var Gg=Object.freeze({__proto__:null,updateProps:mo,initProps:as,removeElement:$p,removeElementWithFadeOut:g0,isElementRemoved:$m,extendShape:Ul,extendPath:hy,registerShape:hf,getShapeClass:v0,makePath:ip,makeImage:zf,mergePath:fc,resizePath:y0,subPixelOptimizeLine:vd,subPixelOptimizeRect:function(n){return L_(n.shape,n.shape,n.style),n},subPixelOptimize:Qm,getTransform:jo,applyTransform:hl,transformDirection:sp,groupTransition:Ho,clipPointsByRect:Fb,clipRectByRect:py,createIcon:yd,linePolygonIntersect:Wg,lineLineIntersect:gy,setTooltipConfig:yu,traverseElements:Tl,Group:xo,Image:fl,Text:Oi,Circle:Bf,Ellipse:Qs,Sector:Cc,Ring:rp,Polygon:eu,Polyline:Qu,Rect:bi,Line:Pu,BezierCurve:cc,Arc:Es,IncrementalDisplayable:p0,CompoundPath:op,LinearGradient:Kp,RadialGradient:h0,BoundingRect:Io,OrientedBoundingRect:Hg,Point:lo,Path:Go}),Yd={};function pf(n,t){for(var e=0;e<Ss.length;e++){var r=Ss[e],o=t[r],i=n.ensureState(r);i.style=i.style||{},i.style.text=o}var s=n.currentStates.slice();n.clearStates(!0),n.setStyle({text:t.normal}),n.useStates(s,!0)}function my(n,t,e){var r,o=n.labelFetcher,i=n.labelDataIndex,s=n.labelDimIndex,l=t.normal;o&&(r=o.getFormattedLabel(i,"normal",null,s,l&&l.get("formatter"),null!=e?{interpolatedValue:e}:null)),null==r&&(r=yr(n.defaultText)?n.defaultText(i,n,e):n.defaultText);for(var c={normal:r},d=0;d<Ss.length;d++){var p=Ss[d],m=t[p];c[p]=un(o?o.getFormattedLabel(i,p,null,s,m&&m.get("formatter")):null,r)}return c}function ps(n,t,e,r){e=e||Yd;for(var o=n instanceof Oi,i=!1,s=0;s<Pg.length;s++)if((b=t[Pg[s]])&&b.getShallow("show")){i=!0;break}var l=o?n:n.getTextContent();if(i){o||(l||(l=new Oi,n.setTextContent(l)),n.stateProxy&&(l.stateProxy=n.stateProxy));var c=my(e,t),d=t.normal,p=!!d.getShallow("show"),m=Vi(d,r&&r.normal,e,!1,!o);for(m.text=c.normal,o||n.setTextConfig(qd(d,e,!1)),s=0;s<Ss.length;s++){var b,_=Ss[s];if(b=t[_]){var S=l.ensureState(_),k=!!un(b.getShallow("show"),p);k!==p&&(S.ignore=!k),S.style=Vi(b,r&&r[_],e,!0,!o),S.style.text=c[_],!o&&(n.ensureState(_).textConfig=qd(b,e,!0))}}l.silent=!!d.getShallow("silent"),null!=l.style.x&&(m.x=l.style.x),null!=l.style.y&&(m.y=l.style.y),l.ignore=!p,l.useStyle(m),l.dirty(),e.enableTextSetter&&(Jp(l).setLabelText=function(D){var O=my(e,t,D);pf(l,O)})}else l&&(l.ignore=!0);n.dirty()}function gs(n,t){for(var e={normal:n.getModel(t=t||"label")},r=0;r<Ss.length;r++){var o=Ss[r];e[o]=n.getModel([o,t])}return e}function Vi(n,t,e,r,o){var i={};return function(s,l,c,d,p){c=c||Yd;var m,b=l.ecModel,_=b&&b.option.textStyle,S=function(F){for(var V;F&&F!==F.ecModel;){var q=(F.option||Yd).rich;if(q){V=V||{};for(var Z=rr(q),Q=0;Q<Z.length;Q++)V[Z[Q]]=1}F=F.parentModel}return V}(l);if(S)for(var k in m={},S)if(S.hasOwnProperty(k)){var D=l.getModel(["rich",k]);vy(m[k]={},D,_,c,d,p,!1,!0)}m&&(s.rich=m);var O=l.get("overflow");O&&(s.overflow=O);var N=l.get("minMargin");null!=N&&(s.margin=N),vy(s,l,_,c,d,p,!0,!1)}(i,n,e,r,o),t&&Lt(i,t),i}function qd(n,t,e){t=t||{};var r,o={},i=n.getShallow("rotate"),s=un(n.getShallow("distance"),e?null:5),l=n.getShallow("offset");return"outside"===(r=n.getShallow("position")||(e?null:"inside"))&&(r=t.defaultOutsidePosition||"top"),null!=r&&(o.position=r),null!=l&&(o.offset=l),null!=i&&(i*=Math.PI/180,o.rotation=i),null!=s&&(o.distance=s),o.outsideFill="inherit"===n.get("color")?t.inheritColor||null:"auto",o}var Ug=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],U_=["align","lineHeight","width","height","tag","verticalAlign"],tv=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function vy(n,t,e,r,o,i,s,l){e=!o&&e||Yd;var c=r&&r.inheritColor,d=t.getShallow("color"),p=t.getShallow("textBorderColor"),m=un(t.getShallow("opacity"),e.opacity);"inherit"!==d&&"auto"!==d||(d=c||null),"inherit"!==p&&"auto"!==p||(p=c||null),i||(d=d||e.color,p=p||e.textBorderColor),null!=d&&(n.fill=d),null!=p&&(n.stroke=p);var b=un(t.getShallow("textBorderWidth"),e.textBorderWidth);null!=b&&(n.lineWidth=b);var _=un(t.getShallow("textBorderType"),e.textBorderType);null!=_&&(n.lineDash=_);var S=un(t.getShallow("textBorderDashOffset"),e.textBorderDashOffset);null!=S&&(n.lineDashOffset=S),o||null!=m||l||(m=r&&r.defaultOpacity),null!=m&&(n.opacity=m),o||i||null==n.fill&&r.inheritColor&&(n.fill=r.inheritColor);for(var k=0;k<Ug.length;k++){var D=Ug[k];null!=(N=un(t.getShallow(D),e[D]))&&(n[D]=N)}for(k=0;k<U_.length;k++)null!=(N=t.getShallow(D=U_[k]))&&(n[D]=N);if(null==n.verticalAlign){var O=t.getShallow("baseline");null!=O&&(n.verticalAlign=O)}if(!s||!r.disableBox){for(k=0;k<tv.length;k++){var N;null!=(N=t.getShallow(D=tv[k]))&&(n[D]=N)}var F=t.getShallow("borderType");null!=F&&(n.borderDash=F),"auto"!==n.backgroundColor&&"inherit"!==n.backgroundColor||!c||(n.backgroundColor=c),"auto"!==n.borderColor&&"inherit"!==n.borderColor||!c||(n.borderColor=c)}}function nv(n,t){var e=t&&t.getModel("textStyle");return ki([n.fontStyle||e&&e.getShallow("fontStyle")||"",n.fontWeight||e&&e.getShallow("fontWeight")||"",(n.fontSize||e&&e.getShallow("fontSize")||12)+"px",n.fontFamily||e&&e.getShallow("fontFamily")||"sans-serif"].join(" "))}var Jp=hi();function jl(n,t,e,r){if(n){var o=Jp(n);o.prevValue=o.value,o.value=e;var i=t.normal;o.valueAnimation=i.get("valueAnimation"),o.valueAnimation&&(o.precision=i.get("precision"),o.defaultInterpolatedText=r,o.statesModels=t)}}function b0(n,t,e,r,o){var i=Jp(n);if(i.valueAnimation&&i.prevValue!==i.value){var s=i.defaultInterpolatedText,l=un(i.interpolatedValue,i.prevValue),c=i.value;n.percent=0,(null==i.prevValue?as:mo)(n,{percent:1},r,t,null,function(d){var p=O_(e,i.precision,l,c,d);i.interpolatedValue=1===d?null:p;var m=my({labelDataIndex:t,labelFetcher:o,defaultText:s?s(p):p+""},i.statesModels,p);pf(n,m)})}}var rv,x0,ux=["textStyle","color"],lx=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],jg=new Oi,ai=function(){function n(){}return n.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(ux):null)},n.prototype.getFont=function(){return nv({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},n.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},r=0;r<lx.length;r++)e[lx[r]]=this.getShallow(lx[r]);return jg.useStyle(e),jg.update(),jg.getBoundingRect()},n}(),Qp=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],Yg=Vp(Qp),_0=function(){function n(){}return n.prototype.getLineStyle=function(t){return Yg(this,t)},n}(),cx=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],ES=Vp(cx),fx=function(){function n(){}return n.prototype.getItemStyle=function(t,e){return ES(this,t,e)},n}(),aa=function(){function n(t,e,r){this.parentModel=e,this.ecModel=r,this.option=t}return n.prototype.init=function(t,e,r){for(var o=[],i=3;i<arguments.length;i++)o[i-3]=arguments[i]},n.prototype.mergeOption=function(t,e){ln(this.option,t,!0)},n.prototype.get=function(t,e){return null==t?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},n.prototype.getShallow=function(t,e){var r=this.option,o=null==r?r:r[t];if(null==o&&!e){var i=this.parentModel;i&&(o=i.getShallow(t))}return o},n.prototype.getModel=function(t,e){var r=null!=t,o=r?this.parsePath(t):null;return new n(r?this._doGet(o):this.option,e=e||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(o)),this.ecModel)},n.prototype.isEmpty=function(){return null==this.option},n.prototype.restoreData=function(){},n.prototype.clone=function(){return new this.constructor(an(this.option))},n.prototype.parsePath=function(t){return"string"==typeof t?t.split("."):t},n.prototype.resolveParentPath=function(t){return t},n.prototype.isAnimationEnabled=function(){if(!zn.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},n.prototype._doGet=function(t,e){var r=this.option;if(!t)return r;for(var o=0;o<t.length&&(!t[o]||null!=(r=r&&"object"==typeof r?r[t[o]]:null));o++);return null==r&&e&&(r=e._doGet(this.resolveParentPath(t),e.parentModel)),r},n}();Gc(aa),rv=aa,x0=["__\0is_clz",t0++].join("_"),rv.prototype[x0]=!0,rv.isInstance=function(n){return!(!n||!n[x0])},na(aa,_0),na(aa,fx),na(aa,Om),na(aa,ai);var dx=Math.round(10*Math.random());function ov(n){return[n||"",dx++].join("_")}function Oh(n,t){return ln(ln({},n,!0),t,!0)}var qg={},tg={},iv=zn.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage).toUpperCase().indexOf("ZH")>-1?"ZH":"EN";function Jr(n,t){n=n.toUpperCase(),tg[n]=new aa(t),qg[n]=t}function hx(n){return tg[n]}Jr("EN",{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),Jr("ZH",{time:{month:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"],monthAbbr:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayOfWeek:["\u661f\u671f\u65e5","\u661f\u671f\u4e00","\u661f\u671f\u4e8c","\u661f\u671f\u4e09","\u661f\u671f\u56db","\u661f\u671f\u4e94","\u661f\u671f\u516d"],dayOfWeekAbbr:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]},legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}});var av=864e5,xy=31536e6,ng={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},rg="{yyyy}-{MM}-{dd}",Xg={year:"{yyyy}",month:"{yyyy}-{MM}",day:rg,hour:rg+" "+ng.hour,minute:rg+" "+ng.minute,second:rg+" "+ng.second,millisecond:ng.none},Zg=["year","month","day","hour","minute","second","millisecond"],sv=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Tc(n,t){return"0000".substr(0,t-(n+="").length)+n}function Eh(n){switch(n){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return n}}function PS(n){return n===Eh(n)}function bu(n,t,e,r){var o=Af(n),i=o[_y(e)](),s=o[uv(e)]()+1,l=Math.floor((s-1)/3)+1,c=o[Zd(e)](),d=o["get"+(e?"UTC":"")+"Day"](),p=o[wy(e)](),m=(p-1)%12+1,b=o[Kg(e)](),_=o[Sy(e)](),S=o[lv(e)](),k=(r instanceof aa?r:hx(r||iv)||tg.EN).getModel("time"),D=k.get("month"),O=k.get("monthAbbr"),N=k.get("dayOfWeek"),F=k.get("dayOfWeekAbbr");return(t||"").replace(/{yyyy}/g,i+"").replace(/{yy}/g,i%100+"").replace(/{Q}/g,l+"").replace(/{MMMM}/g,D[s-1]).replace(/{MMM}/g,O[s-1]).replace(/{MM}/g,Tc(s,2)).replace(/{M}/g,s+"").replace(/{dd}/g,Tc(c,2)).replace(/{d}/g,c+"").replace(/{eeee}/g,N[d]).replace(/{ee}/g,F[d]).replace(/{e}/g,d+"").replace(/{HH}/g,Tc(p,2)).replace(/{H}/g,p+"").replace(/{hh}/g,Tc(m+"",2)).replace(/{h}/g,m+"").replace(/{mm}/g,Tc(b,2)).replace(/{m}/g,b+"").replace(/{ss}/g,Tc(_,2)).replace(/{s}/g,_+"").replace(/{SSS}/g,Tc(S,3)).replace(/{S}/g,S+"")}function Xd(n,t){var e=Af(n),r=e[uv(t)]()+1,o=e[Zd(t)](),i=e[wy(t)](),s=e[Kg(t)](),l=e[Sy(t)](),c=0===e[lv(t)](),d=c&&0===l,p=d&&0===s,m=p&&0===i,b=m&&1===o;return b&&1===r?"year":b?"month":m?"day":p?"hour":d?"minute":c?"second":"millisecond"}function Ph(n,t,e){var r=gr(n)?Af(n):n;switch(t=t||Xd(n,e)){case"year":return r[_y(e)]();case"half-year":return r[uv(e)]()>=6?1:0;case"quarter":return Math.floor((r[uv(e)]()+1)/4);case"month":return r[uv(e)]();case"day":return r[Zd(e)]();case"half-day":return r[wy(e)]()/24;case"hour":return r[wy(e)]();case"minute":return r[Kg(e)]();case"second":return r[Sy(e)]();case"millisecond":return r[lv(e)]()}}function _y(n){return n?"getUTCFullYear":"getFullYear"}function uv(n){return n?"getUTCMonth":"getMonth"}function Zd(n){return n?"getUTCDate":"getDate"}function wy(n){return n?"getUTCHours":"getHours"}function Kg(n){return n?"getUTCMinutes":"getMinutes"}function Sy(n){return n?"getUTCSeconds":"getSeconds"}function lv(n){return n?"getUTCMilliseconds":"getMilliseconds"}function RS(n){return n?"setUTCFullYear":"setFullYear"}function Hb(n){return n?"setUTCMonth":"setMonth"}function ti(n){return n?"setUTCDate":"setDate"}function px(n){return n?"setUTCHours":"setHours"}function Wb(n){return n?"setUTCMinutes":"setMinutes"}function Rh(n){return n?"setUTCSeconds":"setSeconds"}function Cy(n){return n?"setUTCMilliseconds":"setMilliseconds"}function cv(n){if(!Ca(n))return ir(n)?n:"-";var t=(n+"").split(".");return t[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(t.length>1?"."+t[1]:"")}function Vr(n,t){return n=(n||"").toLowerCase().replace(/-(.)/g,function(e,r){return r.toUpperCase()}),t&&n&&(n=n.charAt(0).toUpperCase()+n.slice(1)),n}var $g=Sr;function fi(n,t,e){function r(d){return d&&ki(d)?d:"-"}function o(d){return!(null==d||isNaN(d)||!isFinite(d))}var i="time"===t,s=n instanceof Date;if(i||s){var l=i?Af(n):n;if(!isNaN(+l))return bu(l,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",e);if(s)return"-"}if("ordinal"===t)return gc(n)?r(n):gr(n)&&o(n)?n+"":"-";var c=Oa(n);return o(c)?cv(c):gc(n)?r(n):"boolean"==typeof n?n+"":"-"}var j_=["a","b","c","d","e","f","g"],bd=function(n,t){return"{"+n+(null==t?"":t)+"}"};function pl(n,t,e){Ue(t)||(t=[t]);var r=t.length;if(!r)return"";for(var o=t[0].$vars||[],i=0;i<o.length;i++){var s=j_[i];n=n.replace(bd(s),bd(s,0))}for(var l=0;l<r;l++)for(var c=0;c<o.length;c++){var d=t[l][o[c]];n=n.replace(bd(j_[c],l),e?Ha(d):d)}return n}function fv(n,t){var e=ir(n)?{color:n,extraCssText:t}:n||{},r=e.color,o=e.type;t=e.extraCssText;var i=e.renderMode||"html";return r?"html"===i?"subItem"===o?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Ha(r)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+Ha(r)+";"+(t||"")+'"></span>':{renderMode:i,content:"{"+(e.markerId||"markerX")+"|}  ",style:"subItem"===o?{width:4,height:4,borderRadius:2,backgroundColor:r}:{width:10,height:10,borderRadius:5,backgroundColor:r}}:""}function el(n,t){return t=t||"transparent",ir(n)?n:wr(n)&&n.colorStops&&(n.colorStops[0]||{}).color||t}function Jg(n,t){if("_blank"===t||"blank"===t){var e=window.open();e.opener=null,e.location.href=n}else window.open(n,t)}var Qg=Ce,dv=["left","right","top","bottom","width","height"],gf=[["width","left","right"],["height","top","bottom"]];function og(n,t,e,r,o){var i=0,s=0;null==r&&(r=1/0),null==o&&(o=1/0);var l=0;t.eachChild(function(c,d){var p,m,b=c.getBoundingRect(),_=t.childAt(d+1),S=_&&_.getBoundingRect();if("horizontal"===n){var k=b.width+(S?-S.x+b.x:0);(p=i+k)>r||c.newline?(i=0,p=k,s+=l+e,l=b.height):l=Math.max(l,b.height)}else{var D=b.height+(S?-S.y+b.y:0);(m=s+D)>o||c.newline?(i+=l+e,s=0,m=D,l=b.width):l=Math.max(l,b.width)}c.newline||(c.x=i,c.y=s,c.markRedraw(),"horizontal"===n?i=p+e:s=m+e)})}var Yl=og;function tl(n,t,e){e=$g(e||0);var r=t.width,o=t.height,i=qn(n.left,r),s=qn(n.top,o),l=qn(n.right,r),c=qn(n.bottom,o),d=qn(n.width,r),p=qn(n.height,o),m=e[2]+e[0],b=e[1]+e[3],_=n.aspect;switch(isNaN(d)&&(d=r-l-b-i),isNaN(p)&&(p=o-c-m-s),null!=_&&(isNaN(d)&&isNaN(p)&&(_>r/o?d=.8*r:p=.8*o),isNaN(d)&&(d=_*p),isNaN(p)&&(p=d/_)),isNaN(i)&&(i=r-l-d-b),isNaN(s)&&(s=o-c-p-m),n.left||n.right){case"center":i=r/2-d/2-e[3];break;case"right":i=r-d-b}switch(n.top||n.bottom){case"middle":case"center":s=o/2-p/2-e[0];break;case"bottom":s=o-p-m}i=i||0,s=s||0,isNaN(d)&&(d=r-b-i-(l||0)),isNaN(p)&&(p=o-m-s-(c||0));var S=new Io(i+e[3],s+e[0],d,p);return S.margin=e,S}function hv(n,t,e,r,o,i){var s,l=!o||!o.hv||o.hv[0],c=!o||!o.hv||o.hv[1],d=o&&o.boundingMode||"all";if((i=i||n).x=n.x,i.y=n.y,!l&&!c)return!1;if("raw"===d)s="group"===n.type?new Io(0,0,+t.width||0,+t.height||0):n.getBoundingRect();else if(s=n.getBoundingRect(),n.needLocalTransform()){var p=n.getLocalTransform();(s=s.clone()).applyTransform(p)}var m=tl(Yn({width:s.width,height:s.height},t),e,r),b=l?m.x-s.x:0,_=c?m.y-s.y:0;return"raw"===d?(i.x=b,i.y=_):(i.x+=b,i.y+=_),i===n&&n.markRedraw(),!0}function ig(n){var t=n.layoutMode||n.constructor.layoutMode;return wr(t)?t:t?{type:t}:null}function em(n,t,e){var r=e&&e.ignoreSize;!Ue(r)&&(r=[r,r]);var o=s(gf[0],0),i=s(gf[1],1);function s(p,m){var b={},_=0,S={},k=0;if(Qg(p,function(N){S[N]=n[N]}),Qg(p,function(N){l(t,N)&&(b[N]=S[N]=t[N]),c(b,N)&&_++,c(S,N)&&k++}),r[m])return c(t,p[1])?S[p[2]]=null:c(t,p[2])&&(S[p[1]]=null),S;if(2!==k&&_){if(_>=2)return b;for(var D=0;D<p.length;D++){var O=p[D];if(!l(b,O)&&l(n,O)){b[O]=n[O];break}}return b}return S}function l(p,m){return p.hasOwnProperty(m)}function c(p,m){return null!=p[m]&&"auto"!==p[m]}function d(p,m,b){Qg(p,function(_){m[_]=b[_]})}d(gf[0],n,o),d(gf[1],n,i)}function tm(n){return M({},n)}function M(n,t){return t&&n&&Qg(dv,function(e){t.hasOwnProperty(e)&&(n[e]=t[e])}),n}dr(og,"vertical"),dr(og,"horizontal");var n,t,R=hi(),W=function(n){function t(e,r,o){var i=n.call(this,e,r,o)||this;return i.uid=ov("ec_cpt_model"),i}return gt(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o)},t.prototype.mergeDefaultAndTheme=function(e,r){var o=ig(this),i=o?tm(e):{};ln(e,r.getTheme().get(this.mainType)),ln(e,this.getDefaultOption()),o&&em(e,i,o)},t.prototype.mergeOption=function(e,r){ln(this.option,e,!0);var o=ig(this);o&&em(this.option,e,o)},t.prototype.optionUpdated=function(e,r){},t.prototype.getDefaultOption=function(){var d,e=this.constructor;if(!(d=e)||!d[_s])return e.defaultOption;var r=R(this);if(!r.defaultOption){for(var o=[],i=e;i;){var s=i.prototype.defaultOption;s&&o.push(s),i=i.superClass}for(var l={},c=o.length-1;c>=0;c--)l=ln(l,o[c],!0);r.defaultOption=l}return r.defaultOption},t.prototype.getReferringComponents=function(e,r){var i=e+"Id";return Bp(this.ecModel,e,{index:this.get(e+"Index",!0),id:this.get(i,!0)},r)},t.prototype.getBoxLayoutParams=function(){var e=this;return{left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")}},t.prototype.getZLevelKey=function(){return""},t.prototype.setZLevel=function(e){this.option.zlevel=e},t.protoInitialize=((e=t.prototype).type="component",e.id="",e.name="",e.mainType="",e.subType="",void(e.componentIndex=0)),t;var e}(aa);Fp(W,aa),Zv(W),t={},(n=W).registerSubTypeDefaulter=function(e,r){var o=Ku(e);t[o.main]=r},n.determineSubType=function(e,r){var o=r.type;if(!o){var i=Ku(e).main;n.hasSubTypes(e)&&t[i]&&(o=t[i](r))}return o},function(n,t){function e(r,o){return r[o]||(r[o]={predecessor:[],successor:[]}),r[o]}n.topologicalTravel=function(r,o,i,s){if(r.length){var l=(O={},N=[],Ce(D=o,function(F){var Z,Q,re,V=e(O,F),q=(Z=V.originalDeps=function(n){var t=[];return Ce(W.getClassesByMainType(n),function(e){t=t.concat(e.dependencies||e.prototype.dependencies||[])}),t=mt(t,function(e){return Ku(e).main}),"dataset"!==n&&Ir(t,"dataset")<=0&&t.unshift("dataset"),t}(F),Q=D,re=[],Ce(Z,function(he){Ir(Q,he)>=0&&re.push(he)}),re);V.entryCount=q.length,0===V.entryCount&&N.push(F),Ce(q,function(Z){Ir(V.predecessor,Z)<0&&V.predecessor.push(Z);var Q=e(O,Z);Ir(Q.successor,Z)<0&&Q.successor.push(F)})}),{graph:O,noEntryList:N}),c=l.graph,d=l.noEntryList,p={};for(Ce(r,function(D){p[D]=!0});d.length;){var m=d.pop(),b=c[m],_=!!p[m];_&&(i.call(s,m,b.originalDeps.slice()),delete p[m]),Ce(b.successor,_?k:S)}Ce(p,function(){throw new Error("")})}var D,O,N;function S(D){c[D].entryCount--,0===c[D].entryCount&&d.push(D)}function k(D){p[D]=!0,S(D)}}}(W);var J="";"undefined"!=typeof navigator&&(J=navigator.platform||"");var se="rgba(0, 0, 0, 0.2)",ce={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:se,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:se,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:se,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:se,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:se,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:se,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:J.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},we=Or(["tooltip","label","itemName","itemId","itemGroupId","seriesName"]),Ie="original",He="arrayRows",Ye="objectRows",at="keyedColumns",ut="typedArray",st="unknown",Mt="column",ht="row",Pt=hi();function xn(n,t,e){var r={},o=Sn(t);if(!o||!n)return r;var i,s,l=[],c=[],p=Pt(t.ecModel).datasetMap,m=o.uid+"_"+e.seriesLayoutBy;Ce(n=n.slice(),function(k,D){var O=wr(k)?k:n[D]={name:k};"ordinal"===O.type&&null==i&&(i=D,s=S(O)),r[O.name]=[]});var b=p.get(m)||p.set(m,{categoryWayDim:s,valueWayDim:0});function _(k,D,O){for(var N=0;N<O;N++)k.push(D+N)}function S(k){var D=k.dimsDef;return D?D.length:1}return Ce(n,function(k,D){var O=k.name,N=S(k);if(null==i){var F=b.valueWayDim;_(r[O],F,N),_(c,F,N),b.valueWayDim+=N}else i===D?(_(r[O],0,N),_(l,0,N)):(_(r[O],F=b.categoryWayDim,N),_(c,F,N),b.categoryWayDim+=N)}),l.length&&(r.itemName=l),c.length&&(r.seriesName=c),r}function wt(n,t,e){var r={};if(!Sn(n))return r;var o,i=t.sourceFormat,s=t.dimensionsDefine;i!==Ye&&i!==at||Ce(s,function(d,p){"name"===(wr(d)?d.name:d)&&(o=p)});var l=function(){for(var d={},p={},m=[],b=0,_=Math.min(5,e);b<_;b++){var S=Er(t.data,i,t.seriesLayoutBy,s,t.startIndex,b);m.push(S);var k=3===S;if(k&&null==d.v&&b!==o&&(d.v=b),(null==d.n||d.n===d.v||!k&&3===m[d.n])&&(d.n=b),D(d)&&3!==m[d.n])return d;k||(2===S&&null==p.v&&b!==o&&(p.v=b),null!=p.n&&p.n!==p.v||(p.n=b))}function D(O){return null!=O.v&&null!=O.n}return D(d)?d:D(p)?p:null}();if(l){r.value=[l.v];var c=null!=o?o:l.n;r.itemName=[c],r.seriesName=[c]}return r}function Sn(n){if(!n.get("data",!0))return Bp(n.ecModel,"dataset",{index:n.get("datasetIndex",!0),id:n.get("datasetId",!0)},ll).models[0]}function $t(n,t){return Er(n.data,n.sourceFormat,n.seriesLayoutBy,n.dimensionsDefine,n.startIndex,t)}function Er(n,t,e,r,o,i){var s,l,c;if(ca(n))return 3;if(r){var d=r[i];wr(d)?(l=d.name,c=d.type):ir(d)&&(l=d)}if(null!=c)return"ordinal"===c?1:3;if(t===He){var p=n;if(e===ht){for(var m=p[i],b=0;b<(m||[]).length&&b<5;b++)if(null!=(s=N(m[o+b])))return s}else for(b=0;b<p.length&&b<5;b++){var _=p[o+b];if(_&&null!=(s=N(_[i])))return s}}else if(t===Ye){var S=n;if(!l)return 3;for(b=0;b<S.length&&b<5;b++)if((D=S[b])&&null!=(s=N(D[l])))return s}else if(t===at){if(!l||!(m=n[l])||ca(m))return 3;for(b=0;b<m.length&&b<5;b++)if(null!=(s=N(m[b])))return s}else if(t===Ie){var k=n;for(b=0;b<k.length&&b<5;b++){var D,O=oc(D=k[b]);if(!Ue(O))return 3;if(null!=(s=N(O[i])))return s}}function N(F){var V=ir(F);return null!=F&&isFinite(F)&&""!==F?V?2:3:V&&"-"!==F?1:void 0}return 3}var Lr,Qr,io,Tn=Or(),Po=hi(),ri=hi(),Do=function(){function n(){}return n.prototype.getColorFromPalette=function(t,e,r){var o=ci(this.get("color",!0)),i=this.get("colorLayer",!0);return Hi(this,Po,o,i,t,e,r)},n.prototype.clearColorPalette=function(){!function(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}(this,Po)},n}();function si(n,t,e,r){var o=ci(n.get(["aria","decal","decals"]));return Hi(n,ri,o,null,t,e,r)}function Hi(n,t,e,r,o,i,s){var l=t(i=i||n),c=l.paletteIdx||0,d=l.paletteNameMap=l.paletteNameMap||{};if(d.hasOwnProperty(o))return d[o];var p=null!=s&&r?function(b,_){for(var S=b.length,k=0;k<S;k++)if(b[k].length>_)return b[k];return b[S-1]}(r,s):e;if((p=p||e)&&p.length){var m=p[c];return o&&(d[o]=m),l.paletteIdx=(c+1)%p.length,m}}var Ea="\0_ec_inner",tr=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.init=function(e,r,o,i,s,l){i=i||{},this.option=null,this._theme=new aa(i),this._locale=new aa(s),this._optionManager=l},t.prototype.setOption=function(e,r,o){var i=Wi(r);this._optionManager.setOption(e,o,i),this._resetOption(null,i)},t.prototype.resetOption=function(e,r){return this._resetOption(e,Wi(r))},t.prototype._resetOption=function(e,r){var o=!1,i=this._optionManager;if(!e||"recreate"===e){var s=i.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this._mergeOption(s,r)):io(this,s),o=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var l=i.getTimelineOption(this);l&&(o=!0,this._mergeOption(l,r))}if(!e||"recreate"===e||"media"===e){var c=i.getMediaOption(this);c.length&&Ce(c,function(d){o=!0,this._mergeOption(d,r)},this)}return o},t.prototype.mergeOption=function(e){this._mergeOption(e,null)},t.prototype._mergeOption=function(e,r){var o=this.option,i=this._componentsMap,s=this._componentsCount,l=[],c=Or(),d=r&&r.replaceMergeMainTypeMap;Pt(this).datasetMap=Or(),Ce(e,function(p,m){null!=p&&(W.hasClass(m)?m&&(l.push(m),c.set(m,!0)):o[m]=null==o[m]?an(p):ln(o[m],p,!0))}),d&&d.each(function(p,m){W.hasClass(m)&&!c.get(m)&&(l.push(m),c.set(m,!0))}),W.topologicalTravel(l,W.getAllClassMainTypes(),function(p){var V,q,m=function(F,V,q){var Z=Tn.get(V);if(!Z)return q;var Q=Z(F);return Q?q.concat(Q):q}(this,p,ci(e[p])),b=i.get(p),S=Zh(b,m,b?d&&d.get(p)?"replaceMerge":"normalMerge":"replaceAll");V=p,q=W,Ce(S,function(Z){var he,ge,Q=Z.newOption;wr(Q)&&(Z.keyInfo.mainType=V,Z.keyInfo.subType=(ge=Z.existing,(he=Q).type?he.type:ge?ge.subType:q.determineSubType(V,he)))}),o[p]=null,i.set(p,null),s.set(p,0);var k,D=[],O=[],N=0;Ce(S,function(F,V){var q=F.existing,Z=F.newOption;if(Z){var re=W.getClass(p,F.keyInfo.subType,!("series"===p));if(!re)return;if("tooltip"===p){if(k)return;k=!0}if(q&&q.constructor===re)q.name=F.keyInfo.name,q.mergeOption(Z,this),q.optionUpdated(Z,!1);else{var he=Lt({componentIndex:V},F.keyInfo);Lt(q=new re(Z,this,this,he),he),F.brandNew&&(q.__requireNewView=!0),q.init(Z,this,this),q.optionUpdated(null,!0)}}else q&&(q.mergeOption({},this),q.optionUpdated({},!1));q?(D.push(q.option),O.push(q),N++):(D.push(void 0),O.push(void 0))},this),o[p]=D,i.set(p,O),s.set(p,N),"series"===p&&Lr(this)},this),this._seriesIndices||Lr(this)},t.prototype.getOption=function(){var e=an(this.option);return Ce(e,function(r,o){if(W.hasClass(o)){for(var i=ci(r),s=i.length,l=!1,c=s-1;c>=0;c--)i[c]&&!mh(i[c])?l=!0:(i[c]=null,!l&&s--);i.length=s,e[o]=i}}),delete e[Ea],e},t.prototype.getTheme=function(){return this._theme},t.prototype.getLocaleModel=function(){return this._locale},t.prototype.setUpdatePayload=function(e){this._payload=e},t.prototype.getUpdatePayload=function(){return this._payload},t.prototype.getComponent=function(e,r){var o=this._componentsMap.get(e);if(o){var i=o[r||0];if(i)return i;if(null==r)for(var s=0;s<o.length;s++)if(o[s])return o[s]}},t.prototype.queryComponents=function(e){var r=e.mainType;if(!r)return[];var o,i=e.index,s=e.id,l=e.name,c=this._componentsMap.get(r);return c&&c.length?(null!=i?(o=[],Ce(ci(i),function(d){c[d]&&o.push(c[d])})):o=null!=s?da("id",s,c):null!=l?da("name",l,c):yo(c,function(d){return!!d}),di(o,e)):[]},t.prototype.findComponents=function(e){var r,o,i,s,l,d=e.mainType,p=(o=d+"Index",i=d+"Id",s=d+"Name",!(r=e.query)||null==r[o]&&null==r[i]&&null==r[s]?null:{mainType:d,index:r[o],id:r[i],name:r[s]});return l=di(p?this.queryComponents(p):yo(this._componentsMap.get(d),function(b){return!!b}),e),e.filter?yo(l,e.filter):l},t.prototype.eachComponent=function(e,r,o){var i=this._componentsMap;if(yr(e)){var s=r,l=e;i.each(function(m,b){for(var _=0;m&&_<m.length;_++){var S=m[_];S&&l.call(s,b,S,S.componentIndex)}})}else for(var c=ir(e)?i.get(e):wr(e)?this.findComponents(e):null,d=0;c&&d<c.length;d++){var p=c[d];p&&r.call(o,p,p.componentIndex)}},t.prototype.getSeriesByName=function(e){var r=is(e,null);return yo(this._componentsMap.get("series"),function(o){return!!o&&null!=r&&o.name===r})},t.prototype.getSeriesByIndex=function(e){return this._componentsMap.get("series")[e]},t.prototype.getSeriesByType=function(e){return yo(this._componentsMap.get("series"),function(r){return!!r&&r.subType===e})},t.prototype.getSeries=function(){return yo(this._componentsMap.get("series"),function(e){return!!e})},t.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},t.prototype.eachSeries=function(e,r){Qr(this),Ce(this._seriesIndices,function(o){var i=this._componentsMap.get("series")[o];e.call(r,i,o)},this)},t.prototype.eachRawSeries=function(e,r){Ce(this._componentsMap.get("series"),function(o){o&&e.call(r,o,o.componentIndex)})},t.prototype.eachSeriesByType=function(e,r,o){Qr(this),Ce(this._seriesIndices,function(i){var s=this._componentsMap.get("series")[i];s.subType===e&&r.call(o,s,i)},this)},t.prototype.eachRawSeriesByType=function(e,r,o){return Ce(this.getSeriesByType(e),r,o)},t.prototype.isSeriesFiltered=function(e){return Qr(this),null==this._seriesIndicesMap.get(e.componentIndex)},t.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},t.prototype.filterSeries=function(e,r){Qr(this);var o=[];Ce(this._seriesIndices,function(i){var s=this._componentsMap.get("series")[i];e.call(r,s,i)&&o.push(i)},this),this._seriesIndices=o,this._seriesIndicesMap=Or(o)},t.prototype.restoreData=function(e){Lr(this);var r=this._componentsMap,o=[];r.each(function(i,s){W.hasClass(s)&&o.push(s)}),W.topologicalTravel(o,W.getAllClassMainTypes(),function(i){Ce(r.get(i),function(s){!s||"series"===i&&function(l,c){if(c){var d=c.seriesIndex,p=c.seriesId,m=c.seriesName;return null!=d&&l.componentIndex!==d||null!=p&&l.id!==p||null!=m&&l.name!==m}}(s,e)||s.restoreData()})})},t.internalField=(Lr=function(e){var r=e._seriesIndices=[];Ce(e._componentsMap.get("series"),function(o){o&&r.push(o.componentIndex)}),e._seriesIndicesMap=Or(r)},Qr=function(e){},void(io=function(e,r){e.option={},e.option[Ea]=1,e._componentsMap=Or({series:[]}),e._componentsCount=Or();var i,l,o=r.aria;wr(o)&&null==o.enabled&&(o.enabled=!0),l=(i=r).color&&!i.colorLayer,Ce(e._theme.option,function(c,d){"colorLayer"===d&&l||W.hasClass(d)||("object"==typeof c?i[d]=i[d]?ln(i[d],c,!1):an(c):null==i[d]&&(i[d]=c))}),ln(r,ce,!1),e._mergeOption(r,null)})),t}(aa);function da(n,t,e){if(Ue(t)){var r=Or();return Ce(t,function(i){null!=i&&null!=is(i,null)&&r.set(i,!0)}),yo(e,function(i){return i&&r.get(i[n])})}var o=is(t,null);return yo(e,function(i){return i&&null!=o&&i[n]===o})}function di(n,t){return t.hasOwnProperty("subType")?yo(n,function(e){return e&&e.subType===t.subType}):n}function Wi(n){var t=Or();return n&&Ce(ci(n.replaceMerge),function(e){t.set(e,!0)}),{replaceMergeMainTypeMap:t}}na(tr,Do);var Ws=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],mf=function(n){Ce(Ws,function(t){this[t]=De(n[t],n)},this)},Gs={},Ms=function(){function n(){this._coordinateSystems=[]}return n.prototype.create=function(t,e){var r=[];Ce(Gs,function(o,i){var s=o.create(t,e);r=r.concat(s||[])}),this._coordinateSystems=r},n.prototype.update=function(t,e){Ce(this._coordinateSystems,function(r){r.update&&r.update(t,e)})},n.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},n.register=function(t,e){Gs[t]=e},n.get=function(t){return Gs[t]},n}(),Kd=/^(min|max)?(.+)$/,pv=function(){function n(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return n.prototype.setOption=function(t,e,r){t&&(Ce(ci(t.series),function(s){s&&s.data&&ca(s.data)&&ni(s.data)}),Ce(ci(t.dataset),function(s){s&&s.source&&ca(s.source)&&ni(s.source)})),t=an(t);var o=this._optionBackup,i=function(s,l,c){var d,p,m=[],b=s.baseOption,_=s.timeline,S=s.options,k=s.media,D=!!s.media,O=!!(S||_||b&&b.timeline);function N(F){Ce(l,function(V){V(F,c)})}return b?(p=b).timeline||(p.timeline=_):((O||D)&&(s.options=s.media=null),p=s),D&&Ue(k)&&Ce(k,function(F){F&&F.option&&(F.query?m.push(F):d||(d=F))}),N(p),Ce(S,function(F){return N(F)}),Ce(m,function(F){return N(F.option)}),{baseOption:p,timelineOptions:S||[],mediaDefault:d,mediaList:m}}(t,e,!o);this._newBaseOption=i.baseOption,o?(i.timelineOptions.length&&(o.timelineOptions=i.timelineOptions),i.mediaList.length&&(o.mediaList=i.mediaList),i.mediaDefault&&(o.mediaDefault=i.mediaDefault)):this._optionBackup=i},n.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],an(t?e.baseOption:this._newBaseOption)},n.prototype.getTimelineOption=function(t){var e,r=this._timelineOptions;if(r.length){var o=t.getComponent("timeline");o&&(e=an(r[o.getCurrentIndex()]))}return e},n.prototype.getMediaOption=function(t){var r,o=this._api.getWidth(),i=this._api.getHeight(),s=this._mediaList,l=this._mediaDefault,c=[],d=[];if(!s.length&&!l)return d;for(var p=0,m=s.length;p<m;p++)nm(s[p].query,o,i)&&c.push(p);return!c.length&&l&&(c=[-1]),c.length&&(r=this._currentMediaIndices,c.join(",")!==r.join(","))&&(d=mt(c,function(b){return an(-1===b?l.option:s[b].option)})),this._currentMediaIndices=c,d},n}();function nm(n,t,e){var r={width:t,height:e,aspectratio:t/e},o=!0;return Ce(n,function(i,s){var p,m,b,l=s.match(Kd);if(l&&l[1]&&l[2]){var c=l[1],d=l[2].toLowerCase();p=r[d],m=i,("min"===(b=c)?p>=m:"max"===b?p<=m:p===m)||(o=!1)}}),o}var xd=Ce,vf=wr,up=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function gv(n){var t=n&&n.itemStyle;if(t)for(var e=0,r=up.length;e<r;e++){var o=up[e],i=t.normal,s=t.emphasis;i&&i[o]&&(n[o]=n[o]||{},n[o].normal?ln(n[o].normal,i[o]):n[o].normal=i[o],i[o]=null),s&&s[o]&&(n[o]=n[o]||{},n[o].emphasis?ln(n[o].emphasis,s[o]):n[o].emphasis=s[o],s[o]=null)}}function ql(n,t,e){if(n&&n[t]&&(n[t].normal||n[t].emphasis)){var r=n[t].normal,o=n[t].emphasis;r&&(e?(n[t].normal=n[t].emphasis=null,Yn(n[t],r)):n[t]=r),o&&(n.emphasis=n.emphasis||{},n.emphasis[t]=o,o.focus&&(n.emphasis.focus=o.focus),o.blurScope&&(n.emphasis.blurScope=o.blurScope))}}function Lh(n){ql(n,"itemStyle"),ql(n,"lineStyle"),ql(n,"areaStyle"),ql(n,"label"),ql(n,"labelLine"),ql(n,"upperLabel"),ql(n,"edgeLabel")}function Ps(n,t){var e=vf(n)&&n[t],r=vf(e)&&e.textStyle;if(r)for(var o=0,i=Ld.length;o<i;o++){var s=Ld[o];r.hasOwnProperty(s)&&(e[s]=r[s])}}function Hf(n){n&&(Lh(n),Ps(n,"label"),n.emphasis&&Ps(n.emphasis,"label"))}function $d(n){return Ue(n)?n:n?[n]:[]}function gx(n){return(Ue(n)?n[0]:n)||{}}function IM(n){n&&Ce(OM,function(t){t[0]in n&&!(t[1]in n)&&(n[t[1]]=n[t[0]])})}var OM=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],H2=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],EM=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Li(n){var t=n&&n.itemStyle;if(t)for(var e=0;e<EM.length;e++){var r=EM[e][1];null!=t[r]&&(t[EM[e][0]]=t[r])}}function q_(n){n&&"edge"===n.alignTo&&null!=n.margin&&null==n.edgeDistance&&(n.edgeDistance=n.margin)}function Gb(n){n&&n.downplay&&!n.blur&&(n.blur=n.downplay)}function X_(n,t){if(n)for(var e=0;e<n.length;e++)t(n[e]),n[e]&&X_(n[e].children,t)}function Z_(n,t){(function Y_(n,t){xd($d(n.series),function(r){vf(r)&&function(o){if(vf(o)){gv(o),Lh(o),Ps(o,"label"),Ps(o,"upperLabel"),Ps(o,"edgeLabel"),o.emphasis&&(Ps(o.emphasis,"label"),Ps(o.emphasis,"upperLabel"),Ps(o.emphasis,"edgeLabel"));var i=o.markPoint;i&&(gv(i),Hf(i));var s=o.markLine;s&&(gv(s),Hf(s));var l=o.markArea;l&&Hf(l);var c=o.data;if("graph"===o.type){c=c||o.nodes;var d=o.links||o.edges;if(d&&!ca(d))for(var p=0;p<d.length;p++)Hf(d[p]);Ce(o.categories,function(_){Lh(_)})}if(c&&!ca(c))for(p=0;p<c.length;p++)Hf(c[p]);if((i=o.markPoint)&&i.data){var m=i.data;for(p=0;p<m.length;p++)Hf(m[p])}if((s=o.markLine)&&s.data){var b=s.data;for(p=0;p<b.length;p++)Ue(b[p])?(Hf(b[p][0]),Hf(b[p][1])):Hf(b[p])}"gauge"===o.type?(Ps(o,"axisLabel"),Ps(o,"title"),Ps(o,"detail")):"treemap"===o.type?(ql(o.breadcrumb,"itemStyle"),Ce(o.levels,function(_){Lh(_)})):"tree"===o.type&&Lh(o.leaves)}}(r)});var e=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&e.push("valueAxis","categoryAxis","logAxis","timeAxis"),xd(e,function(r){xd($d(n[r]),function(o){o&&(Ps(o,"axisLabel"),Ps(o.axisPointer,"label"))})}),xd($d(n.parallel),function(r){var o=r&&r.parallelAxisDefault;Ps(o,"axisLabel"),Ps(o&&o.axisPointer,"label")}),xd($d(n.calendar),function(r){ql(r,"itemStyle"),Ps(r,"dayLabel"),Ps(r,"monthLabel"),Ps(r,"yearLabel")}),xd($d(n.radar),function(r){Ps(r,"name"),r.name&&null==r.axisName&&(r.axisName=r.name,delete r.name),null!=r.nameGap&&null==r.axisNameGap&&(r.axisNameGap=r.nameGap,delete r.nameGap)}),xd($d(n.geo),function(r){vf(r)&&(Hf(r),xd($d(r.regions),function(o){Hf(o)}))}),xd($d(n.timeline),function(r){Hf(r),ql(r,"label"),ql(r,"itemStyle"),ql(r,"controlStyle",!0);var o=r.data;Ue(o)&&Ce(o,function(i){wr(i)&&(ql(i,"label"),ql(i,"itemStyle"))})}),xd($d(n.toolbox),function(r){ql(r,"iconStyle"),xd(r.feature,function(o){ql(o,"iconStyle")})}),Ps(gx(n.axisPointer),"label"),Ps(gx(n.tooltip).axisPointer,"label")})(n,t),n.series=ci(n.series),Ce(n.series,function(e){if(wr(e)){var r=e.type;if("line"===r)null!=e.clipOverflow&&(e.clip=e.clipOverflow);else if("pie"===r||"gauge"===r){if(null!=e.clockWise&&(e.clockwise=e.clockWise),q_(e.label),(s=e.data)&&!ca(s))for(var o=0;o<s.length;o++)q_(s[o]);null!=e.hoverOffset&&(e.emphasis=e.emphasis||{},(e.emphasis.scaleSize=null)&&(e.emphasis.scaleSize=e.hoverOffset))}else if("gauge"===r){var i=function(c,d){for(var p="pointer.color".split(","),m=c,b=0;b<p.length&&null!=(m=m&&m[p[b]]);b++);return m}(e);null!=i&&function(c,d,p,m){for(var b,_="itemStyle.color".split(","),S=c,k=0;k<_.length-1;k++)null==S[b=_[k]]&&(S[b]={}),S=S[b];null==S[_[k]]&&(S[_[k]]=p)}(e,0,i)}else if("bar"===r){var s;if(Li(e),Li(e.backgroundStyle),Li(e.emphasis),(s=e.data)&&!ca(s))for(o=0;o<s.length;o++)"object"==typeof s[o]&&(Li(s[o]),Li(s[o]&&s[o].emphasis))}else if("sunburst"===r){var l=e.highlightPolicy;l&&(e.emphasis=e.emphasis||{},e.emphasis.focus||(e.emphasis.focus=l)),Gb(e),X_(e.data,Gb)}else"graph"===r||"sankey"===r?(c=e)&&null!=c.focusNodeAdjacency&&(c.emphasis=c.emphasis||{},null==c.emphasis.focus&&(c.emphasis.focus="adjacency")):"map"===r&&(e.mapType&&!e.map&&(e.map=e.mapType),e.mapLocation&&Yn(e,e.mapLocation));null!=e.hoverAnimation&&(e.emphasis=e.emphasis||{},e.emphasis&&null==e.emphasis.scale&&(e.emphasis.scale=e.hoverAnimation)),IM(e)}var c}),n.dataRange&&(n.visualMap=n.dataRange),Ce(H2,function(e){var r=n[e];r&&(Ue(r)||(r=[r]),Ce(r,function(o){IM(o)}))})}function PM(n){Ce(n,function(t,e){var r=[],o=[NaN,NaN],i=[t.stackResultDimension,t.stackedOverDimension],s=t.data,l=t.isStackedByIndex,c=t.seriesModel.get("stackStrategy")||"samesign";s.modify(i,function(d,p,m){var b,_,S=s.get(t.stackedDimension,m);if(isNaN(S))return o;l?_=s.getRawIndex(m):b=s.get(t.stackedByDimension,m);for(var k=NaN,D=e-1;D>=0;D--){var O=n[D];if(l||(_=O.data.rawIndexOf(O.stackedByDimension,b)),_>=0){var N=O.data.getByRawIndex(O.stackResultDimension,_);if("all"===c||"positive"===c&&N>0||"negative"===c&&N<0||"samesign"===c&&S>=0&&N>0||"samesign"===c&&S<=0&&N<0){S=Pp(S,N),k=N;break}}}return r[0]=S,r[1]=k,r})})}var w0,Wf,S0,RM,LS,NS=function(n){this.data=n.data||(n.sourceFormat===at?{}:[]),this.sourceFormat=n.sourceFormat||st,this.seriesLayoutBy=n.seriesLayoutBy||Mt,this.startIndex=n.startIndex||0,this.dimensionsDetectedCount=n.dimensionsDetectedCount,this.metaRawOption=n.metaRawOption;var t=this.dimensionsDefine=n.dimensionsDefine;if(t)for(var e=0;e<t.length;e++){var r=t[e];null==r.type&&1===$t(this,e)&&(r.type="ordinal")}};function LM(n){return n instanceof NS}function My(n,t,e){e=e||$_(n);var r=t.seriesLayoutBy,o=function(i,s,l,c,d){var p,m;if(!i)return{dimensionsDefine:mx(d),startIndex:m,dimensionsDetectedCount:p};if(s===He){var b=i;"auto"===c||null==c?BS(function(S){null!=S&&"-"!==S&&(ir(S)?null==m&&(m=1):m=0)},l,b,10):m=gr(c)?c:c?1:0,d||1!==m||(d=[],BS(function(S,k){d[k]=null!=S?S+"":""},l,b,1/0)),p=d?d.length:l===ht?b.length:b[0]?b[0].length:null}else if(s===Ye)d||(d=function(S){for(var k,D=0;D<S.length&&!(k=S[D++]););if(k)return rr(k)}(i));else if(s===at)d||(d=[],Ce(i,function(S,k){d.push(k)}));else if(s===Ie){var _=oc(i[0]);p=Ue(_)&&_.length||1}return{startIndex:m,dimensionsDefine:mx(d),dimensionsDetectedCount:p}}(n,e,r,t.sourceHeader,t.dimensions);return new NS({data:n,sourceFormat:e,seriesLayoutBy:r,dimensionsDefine:o.dimensionsDefine,startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount,metaRawOption:an(t)})}function K_(n){return new NS({data:n,sourceFormat:ca(n)?ut:Ie})}function $_(n){var t=st;if(ca(n))t=ut;else if(Ue(n)){0===n.length&&(t=He);for(var e=0,r=n.length;e<r;e++){var o=n[e];if(null!=o){if(Ue(o)){t=He;break}if(wr(o)){t=Ye;break}}}}else if(wr(n))for(var i in n)if(br(n,i)&&nn(n[i])){t=at;break}return t}function mx(n){if(n){var t=Or();return mt(n,function(e,r){var o={name:(e=wr(e)?e:{name:e}).name,displayName:e.displayName,type:e.type};if(null==o.name)return o;o.name+="",null==o.displayName&&(o.displayName=o.name);var i=t.get(o.name);return i?o.name+="-"+i.count++:t.set(o.name,{count:1}),o})}}function BS(n,t,e,r){if(t===ht)for(var o=0;o<e.length&&o<r;o++)n(e[o]?e[o][0]:null,o);else{var i=e[0]||[];for(o=0;o<i.length&&o<r;o++)n(i[o],o)}}function vx(n){var t=n.sourceFormat;return t===Ye||t===at}var J_=function(){function n(t,e){var r=LM(t)?t:K_(t);this._source=r;var o=this._data=r.data;r.sourceFormat===ut&&(this._offset=0,this._dimSize=e,this._data=o),LS(this,o,r)}return n.prototype.getSource=function(){return this._source},n.prototype.count=function(){return 0},n.prototype.getItem=function(t,e){},n.prototype.appendData=function(t){},n.prototype.clean=function(){},n.protoInitialize=function(){var t=n.prototype;t.pure=!1,t.persistent=!0}(),n.internalField=function(){var t;LS=function(s,l,c){var d=c.sourceFormat,p=c.seriesLayoutBy,m=c.startIndex,b=c.dimensionsDefine;if(Lt(s,RM[HS(d,p)]),d===ut)s.getItem=e,s.count=o,s.fillStorage=r;else{var S=FS(d,p);s.getItem=De(S,null,l,m,b);var k=BM(d,p);s.count=De(k,null,l,m,b)}};var e=function(s,l){l=l||[];for(var c=this._data,d=this._dimSize,p=d*(s-=this._offset),m=0;m<d;m++)l[m]=c[p+m];return l},r=function(s,l,c,d){for(var p=this._data,m=this._dimSize,b=0;b<m;b++){for(var _=d[b],S=null==_[0]?1/0:_[0],k=null==_[1]?-1/0:_[1],D=l-s,O=c[b],N=0;N<D;N++){var F=p[N*m+b];O[s+N]=F,F<S&&(S=F),F>k&&(k=F)}_[0]=S,_[1]=k}},o=function(){return this._data?this._data.length/this._dimSize:0};function i(s){for(var l=0;l<s.length;l++)this._data.push(s[l])}(t={})[He+"_"+Mt]={pure:!0,appendData:i},t[He+"_"+ht]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Ye]={pure:!0,appendData:i},t[at]={pure:!0,appendData:function(s){var l=this._data;Ce(s,function(c,d){for(var p=l[d]||(l[d]=[]),m=0;m<(c||[]).length;m++)p.push(c[m])})}},t[Ie]={appendData:i},t[ut]={persistent:!1,pure:!0,appendData:function(s){this._data=s},clean:function(){this._offset+=this.count(),this._data=null}},RM=t}(),n}(),zS=function(n,t,e,r){return n[r]},MT=((w0={})[He+"_"+Mt]=function(n,t,e,r){return n[r+t]},w0[He+"_"+ht]=function(n,t,e,r,o){r+=t;for(var i=o||[],s=n,l=0;l<s.length;l++){var c=s[l];i[l]=c?c[r]:null}return i},w0[Ye]=zS,w0[at]=function(n,t,e,r,o){for(var i=o||[],s=0;s<e.length;s++){var c=n[e[s].name];i[s]=c?c[r]:null}return i},w0[Ie]=zS,w0);function FS(n,t){return MT[HS(n,t)]}var NM=function(n,t,e){return n.length},W2=((Wf={})[He+"_"+Mt]=function(n,t,e){return Math.max(0,n.length-t)},Wf[He+"_"+ht]=function(n,t,e){var r=n[0];return r?Math.max(0,r.length-t):0},Wf[Ye]=NM,Wf[at]=function(n,t,e){var o=n[e[0].name];return o?o.length:0},Wf[Ie]=NM,Wf);function BM(n,t){return W2[HS(n,t)]}var Q_=function(n,t,e){return n[t]},kT=((S0={})[He]=Q_,S0[Ye]=function(n,t,e){return n[e]},S0[at]=Q_,S0[Ie]=function(n,t,e){var r=oc(n);return r instanceof Array?r[t]:r},S0[ut]=Q_,S0);function VS(n){return kT[n]}function HS(n,t){return n===He?n+"_"+t:n}function yx(n,t,e){if(n){var r=n.getRawDataItem(t);if(null!=r){var o=n.getStore(),i=o.getSource().sourceFormat;if(null!=e){var s=n.getDimensionIndex(e),l=o.getDimensionProperty(s);return VS(i)(r,s,l)}var c=r;return i===Ie&&(c=oc(r)),c}}}var TT=/\{@(.+?)\}/g,WS=function(){function n(){}return n.prototype.getDataParams=function(t,e){var r=this.getData(e),o=this.getRawValue(t,e),i=r.getRawIndex(t),s=r.getName(t),l=r.getRawDataItem(t),c=r.getItemVisual(t,"style"),d=c&&c[r.getItemVisual(t,"drawType")||"fill"],p=c&&c.stroke,m=this.mainType,b="series"===m,_=r.userOutput&&r.userOutput.get();return{componentType:m,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:b?this.subType:null,seriesIndex:this.seriesIndex,seriesId:b?this.id:null,seriesName:b?this.name:null,name:s,dataIndex:i,data:l,dataType:e,value:o,color:d,borderColor:p,dimensionNames:_?_.fullDimensions:null,encode:_?_.encode:null,$vars:["seriesName","name","value"]}},n.prototype.getFormattedLabel=function(t,e,r,o,i,s){e=e||"normal";var l=this.getData(r),c=this.getDataParams(t,r);return s&&(c.value=s.interpolatedValue),null!=o&&Ue(c.value)&&(c.value=c.value[o]),i||(i=l.getItemModel(t).get("normal"===e?["label","formatter"]:[e,"label","formatter"])),yr(i)?(c.status=e,c.dimensionIndex=o,i(c)):ir(i)?pl(i,c).replace(TT,function(d,p){var m=p.length,b=p;"["===b.charAt(0)&&"]"===b.charAt(m-1)&&(b=+b.slice(1,m-1));var _=yx(l,t,b);if(s&&Ue(s.interpolatedValue)){var S=l.getDimensionIndex(b);S>=0&&(_=s.interpolatedValue[S])}return null!=_?_+"":""}):void 0},n.prototype.getRawValue=function(t,e){return yx(this.getData(e),t)},n.prototype.formatTooltip=function(t,e,r){},n}();function DT(n){var t,e;return wr(n)?n.type&&(e=n):t=n,{text:t,frag:e}}function C0(n){return new zM(n)}var zM=function(){function n(t){this._reset=(t=t||{}).reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return n.prototype.perform=function(t){var e,r=this._upstream,o=t&&t.skip;if(this._dirty&&r){var i=this.context;i.data=i.outputData=r.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!o&&(e=this._plan(this.context));var s,l=m(this._modBy),c=this._modDataCount||0,d=m(t&&t.modBy),p=t&&t.modDataCount||0;function m(N){return!(N>=1)&&(N=1),N}l===d&&c===p||(e="reset"),(this._dirty||"reset"===e)&&(this._dirty=!1,s=this._doReset(o)),this._modBy=d,this._modDataCount=p;var b=t&&t.step;if(this._dueEnd=r?r._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var _=this._dueIndex,S=Math.min(null!=b?this._dueIndex+b:1/0,this._dueEnd);if(!o&&(s||_<S)){var k=this._progress;if(Ue(k))for(var D=0;D<k.length;D++)this._doProgress(k[D],_,S,d,p);else this._doProgress(k,_,S,d,p)}this._dueIndex=S,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:S}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},n.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},n.prototype._doProgress=function(t,e,r,o,i){AT.reset(e,r,o,i),this._callingProgress=t,this._callingProgress({start:e,end:r,count:r-e,next:AT.next},this.context)},n.prototype._doReset=function(t){var e,r;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!t&&this._reset&&((e=this._reset(this.context))&&e.progress&&(r=e.forceFirstProgress,e=e.progress),Ue(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var o=this._downstream;return o&&o.dirty(),r},n.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},n.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},n.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},n.prototype.getUpstream=function(){return this._upstream},n.prototype.getDownstream=function(){return this._downstream},n.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},n}(),AT=function(){var n,t,e,r,o,i={reset:function(c,d,p,m){t=c,n=d,e=p,r=m,o=Math.ceil(r/e),i.next=e>1&&r>0?l:s}};return i;function s(){return t<n?t++:null}function l(){var c=t%o*e+Math.ceil(t/o),d=t>=n?null:c<r?c:t;return t++,d}}();function M0(n,t){var e=t&&t.type;return"ordinal"===e?n:("time"!==e||gr(n)||null==n||"-"===n||(n=+Af(n)),null==n||""===n?NaN:+n)}var FM=Or({number:function(n){return parseFloat(n)},time:function(n){return+Af(n)},trim:function(n){return ir(n)?ki(n):n}});function VM(n){return FM.get(n)}var IT={lt:function(n,t){return n<t},lte:function(n,t){return n<=t},gt:function(n,t){return n>t},gte:function(n,t){return n>=t}},G2=function(){function n(t,e){gr(e)||Ri(""),this._opFn=IT[t],this._rvalFloat=Oa(e)}return n.prototype.evaluate=function(t){return gr(t)?this._opFn(t,this._rvalFloat):this._opFn(Oa(t),this._rvalFloat)},n}(),GS=function(){function n(t,e){var r="desc"===t;this._resultLT=r?1:-1,null==e&&(e=r?"min":"max"),this._incomparable="min"===e?-1/0:1/0}return n.prototype.evaluate=function(t,e){var r=gr(t)?t:Oa(t),o=gr(e)?e:Oa(e),i=isNaN(r),s=isNaN(o);if(i&&(r=this._incomparable),s&&(o=this._incomparable),i&&s){var l=ir(t),c=ir(e);l&&(r=c?t:0),c&&(o=l?e:0)}return r<o?this._resultLT:r>o?-this._resultLT:0},n}(),HM=function(){function n(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=Oa(e)}return n.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var r=typeof t;r===this._rvalTypeof||"number"!==r&&"number"!==this._rvalTypeof||(e=Oa(t)===this._rvalFloat)}return this._isEQ?e:!e},n}();function U2(n,t){return"eq"===n||"ne"===n?new HM("eq"===n,t):br(IT,n)?new G2(n,t):null}var OT=function(){function n(){}return n.prototype.getRawData=function(){throw new Error("not supported")},n.prototype.getRawDataItem=function(t){throw new Error("not supported")},n.prototype.cloneRawData=function(){},n.prototype.getDimensionInfo=function(t){},n.prototype.cloneAllDimensionInfo=function(){},n.prototype.count=function(){},n.prototype.retrieveValue=function(t,e){},n.prototype.retrieveValueFromItem=function(t,e){},n.prototype.convertValue=function(t,e){return M0(t,e)},n}();function WM(n){return US(n.sourceFormat)||Ri(""),n.data}function ET(n){var t=n.sourceFormat,e=n.data;if(US(t)||Ri(""),t===He){for(var o=[],i=0,s=e.length;i<s;i++)o.push(e[i].slice());return o}if(t===Ye){for(o=[],i=0,s=e.length;i<s;i++)o.push(Lt({},e[i]));return o}}function no(n,t,e){if(null!=e)return gr(e)||!isNaN(e)&&!br(t,e)?n[e]:br(t,e)?t[e]:void 0}function bx(n){return an(n)}var Eo=Or();function GM(n,t,e,r){t.length||Ri(""),wr(n)||Ri("");var s=Eo.get(n.type);s||Ri("");var l=mt(t,function(d){return function(p,m){var b=new OT,_=p.data,S=b.sourceFormat=p.sourceFormat,k=p.startIndex;p.seriesLayoutBy!==Mt&&Ri("");var O=[],N={},F=p.dimensionsDefine;if(F)Ce(F,function(he,ge){var ve=he.name,_e={index:ge,name:ve,displayName:he.displayName};O.push(_e),null!=ve&&(br(N,ve)&&Ri(""),N[ve]=_e)});else for(var V=0;V<p.dimensionsDetectedCount;V++)O.push({index:V});var q=FS(S,Mt);m.__isBuiltIn&&(b.getRawDataItem=function(he){return q(_,k,O,he)},b.getRawData=De(WM,null,p)),b.cloneRawData=De(ET,null,p);var Z=BM(S,Mt);b.count=De(Z,null,_,k,O);var Q=VS(S);b.retrieveValue=function(he,ge){var ve=q(_,k,O,he);return re(ve,ge)};var re=b.retrieveValueFromItem=function(he,ge){if(null!=he){var ve=O[ge];return ve?Q(he,ge,ve.name):void 0}};return b.getDimensionInfo=De(no,null,O,N),b.cloneAllDimensionInfo=De(bx,null,O),b}(d,s)});return mt(ci(s.transform({upstream:l[0],upstreamList:l,config:an(n.config)})),function(d,p){var m;wr(d)||Ri(""),d.data||Ri(""),US($_(d.data))||Ri("");var _=t[0];if(_&&0===p&&!d.dimensions){var S=_.startIndex;S&&(d.data=_.data.slice(0,S).concat(d.data)),m={seriesLayoutBy:Mt,sourceHeader:S,dimensions:_.metaRawOption.dimensions}}else m={seriesLayoutBy:Mt,sourceHeader:0,dimensions:d.dimensions};return My(d.data,m,null)})}function US(n){return n===He||n===Ye}var _o,xx="undefined",UM=typeof Uint32Array===xx?Array:Uint32Array,Ei=typeof Uint16Array===xx?Array:Uint16Array,jS=typeof Int32Array===xx?Array:Int32Array,YS=typeof Float64Array===xx?Array:Float64Array,jM={float:YS,int:jS,ordinal:Array,number:Array,time:YS};function ew(n){return n>65535?UM:Ei}function PT(n,t,e,r,o){var i=jM[e||"float"];if(o){var s=n[t],l=s&&s.length;if(l!==r){for(var c=new i(r),d=0;d<l;d++)c[d]=s[d];n[t]=c}}else n[t]=new i(r)}var qS=function(){function n(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=Or()}return n.prototype.initData=function(t,e,r){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var o=t.getSource(),i=this.defaultDimValueGetter=_o[o.sourceFormat];this._dimValueGetter=r||i,this._rawExtent=[],vx(o),this._dimensions=mt(e,function(s){return{type:s.type,property:s.property}}),this._initDataFromProvider(0,t.count())},n.prototype.getProvider=function(){return this._provider},n.prototype.getSource=function(){return this._provider.getSource()},n.prototype.ensureCalculationDimension=function(t,e){var r=this._calcDimNameToIdx,o=this._dimensions,i=r.get(t);if(null!=i){if(o[i].type===e)return i}else i=o.length;return o[i]={type:e},r.set(t,i),this._chunks[i]=new jM[e||"float"](this._rawCount),this._rawExtent[i]=[1/0,-1/0],i},n.prototype.collectOrdinalMeta=function(t,e){var r=this._chunks[t],o=this._dimensions[t],i=this._rawExtent,s=o.ordinalOffset||0,l=r.length;0===s&&(i[t]=[1/0,-1/0]);for(var c=i[t],d=s;d<l;d++){var p=r[d]=e.parseAndCollect(r[d]);isNaN(p)||(c[0]=Math.min(p,c[0]),c[1]=Math.max(p,c[1]))}o.ordinalMeta=e,o.ordinalOffset=l,o.type="ordinal"},n.prototype.getOrdinalMeta=function(t){return this._dimensions[t].ordinalMeta},n.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},n.prototype.appendData=function(t){var e=this._provider,r=this.count();e.appendData(t);var o=e.count();return e.persistent||(o+=r),r<o&&this._initDataFromProvider(r,o,!0),[r,o]},n.prototype.appendValues=function(t,e){for(var r=this._chunks,o=this._dimensions,i=o.length,s=this._rawExtent,l=this.count(),c=l+Math.max(t.length,e||0),d=0;d<i;d++)PT(r,d,(S=o[d]).type,c,!0);for(var p=[],m=l;m<c;m++)for(var b=m-l,_=0;_<i;_++){var S=o[_],k=_o.arrayRows.call(this,t[b]||p,S.property,b,_);r[_][m]=k;var D=s[_];k<D[0]&&(D[0]=k),k>D[1]&&(D[1]=k)}return this._rawCount=this._count=c,{start:l,end:c}},n.prototype._initDataFromProvider=function(t,e,r){for(var o=this._provider,i=this._chunks,s=this._dimensions,l=s.length,c=this._rawExtent,d=mt(s,function(N){return N.property}),p=0;p<l;p++){var m=s[p];c[p]||(c[p]=[1/0,-1/0]),PT(i,p,m.type,e,r)}if(o.fillStorage)o.fillStorage(t,e,i,c);else for(var b=[],_=t;_<e;_++){b=o.getItem(_,b);for(var S=0;S<l;S++){var k=i[S],D=this._dimValueGetter(b,d[S],_,S);k[_]=D;var O=c[S];D<O[0]&&(O[0]=D),D>O[1]&&(O[1]=D)}}!o.persistent&&o.clean&&o.clean(),this._rawCount=this._count=e,this._extent=[]},n.prototype.count=function(){return this._count},n.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var r=this._chunks[t];return r?r[this.getRawIndex(e)]:NaN},n.prototype.getValues=function(t,e){var r=[],o=[];if(null==e){e=t,t=[];for(var i=0;i<this._dimensions.length;i++)o.push(i)}else o=t;i=0;for(var s=o.length;i<s;i++)r.push(this.get(o[i],e));return r},n.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var r=this._chunks[t];return r?r[e]:NaN},n.prototype.getSum=function(t){var e=0;if(this._chunks[t])for(var r=0,o=this.count();r<o;r++){var i=this.get(t,r);isNaN(i)||(e+=i)}return e},n.prototype.getMedian=function(t){var e=[];this.each([t],function(i){isNaN(i)||e.push(i)});var r=e.sort(function(i,s){return i-s}),o=this.count();return 0===o?0:o%2==1?r[(o-1)/2]:(r[o/2]+r[o/2-1])/2},n.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,r=e[t];if(null!=r&&r<this._count&&r===t)return t;for(var o=0,i=this._count-1;o<=i;){var s=(o+i)/2|0;if(e[s]<t)o=s+1;else{if(!(e[s]>t))return s;i=s-1}}return-1},n.prototype.indicesOfNearest=function(t,e,r){var o=this._chunks[t],i=[];if(!o)return i;null==r&&(r=1/0);for(var s=1/0,l=-1,c=0,d=0,p=this.count();d<p;d++){var m=e-o[this.getRawIndex(d)],b=Math.abs(m);b<=r&&((b<s||b===s&&m>=0&&l<0)&&(s=b,l=m,c=0),m===l&&(i[c++]=d))}return i.length=c,i},n.prototype.getIndices=function(){var t,e=this._indices;if(e){var r=e.constructor,o=this._count;if(r===Array){t=new r(o);for(var i=0;i<o;i++)t[i]=e[i]}else t=new r(e.buffer,0,o)}else for(t=new(r=ew(this._rawCount))(this.count()),i=0;i<t.length;i++)t[i]=i;return t},n.prototype.filter=function(t,e){if(!this._count)return this;for(var r=this.clone(),o=r.count(),i=new(ew(r._rawCount))(o),s=[],l=t.length,c=0,d=t[0],p=r._chunks,m=0;m<o;m++){var b=void 0,_=r.getRawIndex(m);if(0===l)b=e(m);else if(1===l)b=e(p[d][_],m);else{for(var S=0;S<l;S++)s[S]=p[t[S]][_];s[S]=m,b=e.apply(null,s)}b&&(i[c++]=_)}return c<o&&(r._indices=i),r._count=c,r._extent=[],r._updateGetRawIdx(),r},n.prototype.selectRange=function(t){var e=this.clone(),r=e._count;if(!r)return this;var o=rr(t),i=o.length;if(!i)return this;var s=e.count(),l=new(ew(e._rawCount))(s),c=0,d=o[0],p=t[d][0],m=t[d][1],b=e._chunks,_=!1;if(!e._indices){var S=0;if(1===i){for(var k=b[o[0]],D=0;D<r;D++)((V=k[D])>=p&&V<=m||isNaN(V))&&(l[c++]=S),S++;_=!0}else if(2===i){k=b[o[0]];var O=b[o[1]],N=t[o[1]][0],F=t[o[1]][1];for(D=0;D<r;D++){var V=k[D],q=O[D];(V>=p&&V<=m||isNaN(V))&&(q>=N&&q<=F||isNaN(q))&&(l[c++]=S),S++}_=!0}}if(!_)if(1===i)for(D=0;D<s;D++){var Z=e.getRawIndex(D);((V=b[o[0]][Z])>=p&&V<=m||isNaN(V))&&(l[c++]=Z)}else for(D=0;D<s;D++){for(var Q=!0,re=(Z=e.getRawIndex(D),0);re<i;re++){var he=o[re];((V=b[he][Z])<t[he][0]||V>t[he][1])&&(Q=!1)}Q&&(l[c++]=e.getRawIndex(D))}return c<s&&(e._indices=l),e._count=c,e._extent=[],e._updateGetRawIdx(),e},n.prototype.map=function(t,e){var r=this.clone(t);return this._updateDims(r,t,e),r},n.prototype.modify=function(t,e){this._updateDims(this,t,e)},n.prototype._updateDims=function(t,e,r){for(var o=t._chunks,i=[],s=e.length,l=t.count(),c=[],d=t._rawExtent,p=0;p<e.length;p++)d[e[p]]=[1/0,-1/0];for(var m=0;m<l;m++){for(var b=t.getRawIndex(m),_=0;_<s;_++)c[_]=o[e[_]][b];c[s]=m;var S=r&&r.apply(null,c);if(null!=S)for("object"!=typeof S&&(i[0]=S,S=i),p=0;p<S.length;p++){var k=e[p],D=S[p],O=d[k],N=o[k];N&&(N[b]=D),D<O[0]&&(O[0]=D),D>O[1]&&(O[1]=D)}}},n.prototype.lttbDownSample=function(t,e){var r,o,i,s=this.clone([t],!0),l=s._chunks[t],c=this.count(),d=0,p=Math.floor(1/e),m=this.getRawIndex(0),b=new(ew(this._rawCount))(Math.min(2*(Math.ceil(c/p)+2),c));b[d++]=m;for(var _=1;_<c-1;_+=p){for(var S=Math.min(_+p,c-1),k=Math.min(_+2*p,c),D=(k+S)/2,O=0,N=S;N<k;N++){var F=l[ge=this.getRawIndex(N)];isNaN(F)||(O+=F)}O/=k-S;var V=_,q=Math.min(_+p,c),Z=_-1,Q=l[m];r=-1,i=V;var re=-1,he=0;for(N=V;N<q;N++){var ge;F=l[ge=this.getRawIndex(N)],isNaN(F)?(he++,re<0&&(re=ge)):(o=Math.abs((Z-D)*(F-Q)-(Z-N)*(O-Q)))>r&&(r=o,i=ge)}he>0&&he<q-V&&(b[d++]=Math.min(re,i),i=Math.max(re,i)),b[d++]=i,m=i}return b[d++]=this.getRawIndex(c-1),s._count=d,s._indices=b,s.getRawIndex=this._getRawIdx,s},n.prototype.downSample=function(t,e,r,o){for(var i=this.clone([t],!0),s=i._chunks,l=[],c=Math.floor(1/e),d=s[t],p=this.count(),m=i._rawExtent[t]=[1/0,-1/0],b=new(ew(this._rawCount))(Math.ceil(p/c)),_=0,S=0;S<p;S+=c){c>p-S&&(l.length=c=p-S);for(var k=0;k<c;k++){var D=this.getRawIndex(S+k);l[k]=d[D]}var O=r(l),N=this.getRawIndex(Math.min(S+o(l,O)||0,p-1));d[N]=O,O<m[0]&&(m[0]=O),O>m[1]&&(m[1]=O),b[_++]=N}return i._count=_,i._indices=b,i._updateGetRawIdx(),i},n.prototype.each=function(t,e){if(this._count)for(var r=t.length,o=this._chunks,i=0,s=this.count();i<s;i++){var l=this.getRawIndex(i);switch(r){case 0:e(i);break;case 1:e(o[t[0]][l],i);break;case 2:e(o[t[0]][l],o[t[1]][l],i);break;default:for(var c=0,d=[];c<r;c++)d[c]=o[t[c]][l];d[c]=i,e.apply(null,d)}}},n.prototype.getDataExtent=function(t){var e=this._chunks[t],r=[1/0,-1/0];if(!e)return r;var o,i=this.count();if(!this._indices)return this._rawExtent[t].slice();if(o=this._extent[t])return o.slice();for(var s=(o=r)[0],l=o[1],c=0;c<i;c++){var d=e[this.getRawIndex(c)];d<s&&(s=d),d>l&&(l=d)}return this._extent[t]=o=[s,l],o},n.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var r=[],o=this._chunks,i=0;i<o.length;i++)r.push(o[i][e]);return r},n.prototype.clone=function(t,e){var r,o,i=new n,s=this._chunks,l=t&&Pn(t,function(d,p){return d[p]=!0,d},{});if(l)for(var c=0;c<s.length;c++)i._chunks[c]=l[c]?(o=void 0,(o=(r=s[c]).constructor)===Array?r.slice():new o(r)):s[c];else i._chunks=s;return this._copyCommonProps(i),e||(i._indices=this._cloneIndices()),i._updateGetRawIdx(),i},n.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=an(this._extent),t._rawExtent=an(this._rawExtent)},n.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var r=this._indices.length;e=new t(r);for(var o=0;o<r;o++)e[o]=this._indices[o]}else e=new t(this._indices);return e}return null},n.prototype._getRawIdxIdentity=function(t){return t},n.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},n.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},n.internalField=function(){function t(e,r,o,i){return M0(e[i],this._dimensions[i])}_o={arrayRows:t,objectRows:function(e,r,o,i){return M0(e[r],this._dimensions[i])},keyedColumns:t,original:function(e,r,o,i){var s=e&&(null==e.value?e:e.value);return M0(s instanceof Array?s[i]:s,this._dimensions[i])},typedArray:function(e,r,o,i){return e[i]}}}(),n}(),tw=function(){function n(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return n.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},n.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},n.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},n.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},n.prototype._createSource=function(){this._setLocalSource([],[]);var t,e,r=this._sourceHost,o=this._getUpstreamSourceManagers(),i=!!o.length;if(Sx(r)){var s=r,l=void 0,c=void 0,d=void 0;if(i){var p=o[0];p.prepareSource(),l=(d=p.getSource()).data,c=d.sourceFormat,e=[p._getVersionSign()]}else c=ca(l=s.get("data",!0))?ut:Ie,e=[];var m=this._getSourceMetaRawOption()||{},b=d&&d.metaRawOption||{},_=un(m.seriesLayoutBy,b.seriesLayoutBy)||null,S=un(m.sourceHeader,b.sourceHeader),k=un(m.dimensions,b.dimensions);t=_!==b.seriesLayoutBy||!!S!=!!b.sourceHeader||k?[My(l,{seriesLayoutBy:_,sourceHeader:S,dimensions:k},c)]:[]}else{var D=r;if(i){var O=this._applyTransform(o);t=O.sourceList,e=O.upstreamSignList}else t=[My(D.get("source",!0),this._getSourceMetaRawOption(),null)],e=[]}this._setLocalSource(t,e)},n.prototype._applyTransform=function(t){var e,r=this._sourceHost,o=r.get("transform",!0),i=r.get("fromTransformResult",!0);null!=i&&1!==t.length&&RT("");var l,c=[],d=[];return Ce(t,function(p){p.prepareSource();var m=p.getSource(i||0);null==i||m||RT(""),c.push(m),d.push(p._getVersionSign())}),o?e=function(p,m,b){var _=ci(p),S=_.length;S||Ri("");for(var D=0,O=S;D<O;D++)m=GM(_[D],m),D!==O-1&&(m.length=Math.max(m.length,1));return m}(o,c):null!=i&&(e=[(l=c[0],new NS({data:l.data,sourceFormat:l.sourceFormat,seriesLayoutBy:l.seriesLayoutBy,dimensionsDefine:an(l.dimensionsDefine),startIndex:l.startIndex,dimensionsDetectedCount:l.dimensionsDetectedCount}))]),{sourceList:e,upstreamSignList:d}},n.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var r=t[e];if(r._isDirty()||this._upstreamSignList[e]!==r._getVersionSign())return!0}},n.prototype.getSource=function(t){var e=this._sourceList[t=t||0];if(!e){var r=this._getUpstreamSourceManagers();return r[0]&&r[0].getSource(t)}return e},n.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},n.prototype._innerGetDataStore=function(t,e,r){var o=this._storeList,i=o[0];i||(i=o[0]={});var s=i[r];if(!s){var l=this._getUpstreamSourceManagers()[0];Sx(this._sourceHost)&&l?s=l._innerGetDataStore(t,e,r):(s=new qS).initData(new J_(e,t.length),t),i[r]=s}return s},n.prototype._getUpstreamSourceManagers=function(){var r,t=this._sourceHost;if(Sx(t)){var e=Sn(t);return e?[e.getSourceManager()]:[]}return mt((r=t).get("transform",!0)||r.get("fromTransformResult",!0)?Bp(r.ecModel,"dataset",{index:r.get("fromDatasetIndex",!0),id:r.get("fromDatasetId",!0)},ll).models:[],function(r){return r.getSourceManager()})},n.prototype._getSourceMetaRawOption=function(){var t,e,r,o=this._sourceHost;if(Sx(o))t=o.get("seriesLayoutBy",!0),e=o.get("sourceHeader",!0),r=o.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var i=o;t=i.get("seriesLayoutBy",!0),e=i.get("sourceHeader",!0),r=i.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:e,dimensions:r}},n}();function _x(n){n.option.transform&&ni(n.option.transform)}function Sx(n){return"series"===n.mainType}function RT(n){throw new Error(n)}var LT="line-height:1";function k0(n,t){var e=n.color||"#6e7079",r=n.fontSize||12,o=n.fontWeight||"400",i=n.color||"#464646",s=n.fontSize||14,l=n.fontWeight||"900";return"html"===t?{nameStyle:"font-size:"+Ha(r+"")+"px;color:"+Ha(e)+";font-weight:"+Ha(o+""),valueStyle:"font-size:"+Ha(s+"")+"px;color:"+Ha(i)+";font-weight:"+Ha(l+"")}:{nameStyle:{fontSize:r,fill:e,fontWeight:o},valueStyle:{fontSize:s,fill:i,fontWeight:l}}}var lp=[0,10,20,30],YM=["","\n","\n\n","\n\n\n"];function Dc(n,t){return t.type=n,t}function mv(n){return"section"===n.type}function ky(n){return mv(n)?Rs:T0}function vv(n){if(mv(n)){var t=0,e=n.blocks.length,r=e>1||e>0&&!n.noHeader;return Ce(n.blocks,function(o){var i=vv(o);i>=t&&(t=i+ +(r&&(!i||mv(o)&&!o.noHeader)))}),t}return 0}function Rs(n,t,e,r){var o,i=t.noHeader,s=(o=vv(t),{html:lp[o],richText:YM[o]}),l=[],c=t.blocks||[];Ao(!c||Ue(c)),c=c||[];var d=n.orderMode;if(t.sortBlocks&&d){c=c.slice();var p={valueAsc:"asc",valueDesc:"desc"};if(br(p,d)){var m=new GS(p[d],null);c.sort(function(k,D){return m.evaluate(k.sortParam,D.sortParam)})}else"seriesDesc"===d&&c.reverse()}Ce(c,function(k,D){var O=t.valueFormatter,N=ky(k)(O?Lt(Lt({},n),{valueFormatter:O}):n,k,D>0?s.html:0,r);null!=N&&l.push(N)});var b="richText"===n.renderMode?l.join(s.richText):D0(l.join(""),i?e:s.html);if(i)return b;var _=fi(t.header,"ordinal",n.useUTC),S=k0(r,n.renderMode).nameStyle;return"richText"===n.renderMode?Ty(n,_,S)+s.richText+b:D0('<div style="'+S+";"+LT+';">'+Ha(_)+"</div>"+b,e)}function T0(n,t,e,r){var V,q,he,o=n.renderMode,i=t.noName,s=t.noValue,l=!t.markerType,c=t.name,d=n.useUTC,p=t.valueFormatter||n.valueFormatter||function(V){return mt(V=Ue(V)?V:[V],function(q,Z){return fi(q,Ue(_)?_[Z]:_,d)})};if(!i||!s){var m=l?"":n.markupStyleCreator.makeTooltipMarker(t.markerType,t.markerColor||"#333",o),b=i?"":fi(c,"ordinal",d),_=t.valueType,S=s?[]:p(t.value),k=!l||!i,D=!l&&i,O=k0(r,o),N=O.nameStyle,F=O.valueStyle;return"richText"===o?(l?"":m)+(i?"":Ty(n,b,N))+(s?"":(V=n,q=S,he=[F],k&&he.push({padding:[0,0,0,D?10:20],align:"right"}),V.markupStyleCreator.wrapRichTextStyle(Ue(q)?q.join("  "):q,he))):D0((l?"":m)+(i?"":function(V,q,Z){return'<span style="'+Z+";"+(q?"margin-left:2px":"")+'">'+Ha(V)+"</span>"}(b,!l,N))+(s?"":function(V,q,Z,Q){return'<span style="'+(q?"float:right;margin-left:"+(Z?"10px":"20px"):"")+";"+Q+'">'+mt(V=Ue(V)?V:[V],function(ge){return Ha(ge)}).join("&nbsp;&nbsp;")+"</span>"}(S,k,D,F)),e)}}function ag(n,t,e,r,o,i){if(n)return ky(n)({useUTC:o,renderMode:e,orderMode:r,markupStyleCreator:t,valueFormatter:n.valueFormatter},n,0,i)}function D0(n,t){return'<div style="margin: '+t+"px 0 0;"+LT+';">'+n+'<div style="clear:both"></div></div>'}function Ty(n,t,e){return n.markupStyleCreator.wrapRichTextStyle(t,e)}function Xl(n,t){return el(n.getData().getItemVisual(t,"style")[n.visualDrawType])}function cp(n,t){var e=n.get("padding");return null!=e?e:"richText"===t?[8,10]:10}var nw=function(){function n(){this.richTextStyles={},this._nextStyleNameId=Wc()}return n.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},n.prototype.makeTooltipMarker=function(t,e,r){var o="richText"===r?this._generateStyleName():null,i=fv({color:e,type:t,renderMode:r,markerId:o});return ir(i)?i:(this.richTextStyles[o]=i.style,i.content)},n.prototype.wrapRichTextStyle=function(t,e){var r={};Ue(e)?Ce(e,function(i){return Lt(r,i)}):Lt(r,e);var o=this._generateStyleName();return this.richTextStyles[o]=r,"{"+o+"|"+t+"}"},n}();function rw(n){var t,e,r,o,i=n.series,s=n.dataIndex,l=n.multipleSeries,c=i.getData(),d=c.mapDimensionsAll("defaultedTooltip"),p=d.length,m=i.getRawValue(s),b=Ue(m),_=Xl(i,s);if(p>1||b&&!p){var S=function(V,q,Z,Q,re){var he=q.getData(),ge=Pn(V,function(Ge,Xe,$e){var nt=he.getDimensionInfo($e);return Ge||nt&&!1!==nt.tooltip&&null!=nt.displayName},!1),ve=[],_e=[],Ee=[];function ze(Ge,Xe){var $e=he.getDimensionInfo(Xe);$e&&!1!==$e.otherDims.tooltip&&(ge?Ee.push(Dc("nameValue",{markerType:"subItem",markerColor:re,name:$e.displayName,value:Ge,valueType:$e.type})):(ve.push(Ge),_e.push($e.type)))}return Q.length?Ce(Q,function(Ge){ze(yx(he,Z,Ge),Ge)}):Ce(V,ze),{inlineValues:ve,inlineValueTypes:_e,blocks:Ee}}(m,i,s,d,_);t=S.inlineValues,e=S.inlineValueTypes,r=S.blocks,o=S.inlineValues[0]}else if(p){var k=c.getDimensionInfo(d[0]);o=t=yx(c,s,d[0]),e=k.type}else o=t=b?m[0]:m;var D=ic(i),O=D&&i.name||"",N=c.getName(s),F=l?O:N;return Dc("section",{header:O,noHeader:l||!D,sortParam:o,blocks:[Dc("nameValue",{markerType:"item",markerColor:_,name:F,noName:!ki(F),value:t,valueType:e})].concat(r||[])})}var rm=hi();function A0(n,t){return n.getName(t)||n.getId(t)}var I0="__universalTransitionEnabled",Ka=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return gt(t,n),t.prototype.init=function(e,r,o){this.seriesIndex=this.componentIndex,this.dataTask=C0({count:Ub,reset:qM}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,o),(rm(this).sourceManager=new tw(this)).prepareSource();var i=this.getInitialData(e,o);ow(i,this),this.dataTask.context.data=i,rm(this).dataBeforeProcessed=i,om(this),this._initSelectedMapFromData(i)},t.prototype.mergeDefaultAndTheme=function(e,r){var o=ig(this),i=o?tm(e):{},s=this.subType;W.hasClass(s)&&(s+="Series"),ln(e,r.getTheme().get(this.subType)),ln(e,this.getDefaultOption()),hs(e,"label",["show"]),this.fillDataTextStyle(e.data),o&&em(e,i,o)},t.prototype.mergeOption=function(e,r){e=ln(this.option,e,!0),this.fillDataTextStyle(e.data);var o=ig(this);o&&em(this.option,e,o);var i=rm(this).sourceManager;i.dirty(),i.prepareSource();var s=this.getInitialData(e,r);ow(s,this),this.dataTask.dirty(),this.dataTask.context.data=s,rm(this).dataBeforeProcessed=s,om(this),this._initSelectedMapFromData(s)},t.prototype.fillDataTextStyle=function(e){if(e&&!ca(e))for(var r=["show"],o=0;o<e.length;o++)e[o]&&e[o].label&&hs(e[o],"label",r)},t.prototype.getInitialData=function(e,r){},t.prototype.appendData=function(e){this.getRawData().appendData(e.data)},t.prototype.getData=function(e){var r=Mx(this);if(r){var o=r.context.data;return null==e?o:o.getLinkedData(e)}return rm(this).data},t.prototype.getAllData=function(){var e=this.getData();return e&&e.getLinkedDataAll?e.getLinkedDataAll():[{data:e}]},t.prototype.setData=function(e){var r=Mx(this);if(r){var o=r.context;o.outputData=e,r!==this.dataTask&&(o.data=e)}rm(this).data=e},t.prototype.getEncode=function(){var e=this.get("encode",!0);if(e)return Or(e)},t.prototype.getSourceManager=function(){return rm(this).sourceManager},t.prototype.getSource=function(){return this.getSourceManager().getSource()},t.prototype.getRawData=function(){return rm(this).dataBeforeProcessed},t.prototype.getColorBy=function(){return this.get("colorBy")||"series"},t.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},t.prototype.getBaseAxis=function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},t.prototype.formatTooltip=function(e,r,o){return rw({series:this,dataIndex:e,multipleSeries:r})},t.prototype.isAnimationEnabled=function(){var e=this.ecModel;if(zn.node&&(!e||!e.ssr))return!1;var r=this.getShallow("animation");return r&&this.getData().count()>this.getShallow("animationThreshold")&&(r=!1),!!r},t.prototype.restoreData=function(){this.dataTask.dirty()},t.prototype.getColorFromPalette=function(e,r,o){var i=this.ecModel,s=Do.prototype.getColorFromPalette.call(this,e,r,o);return s||(s=i.getColorFromPalette(e,r,o)),s},t.prototype.coordDimToDataDim=function(e){return this.getRawData().mapDimensionsAll(e)},t.prototype.getProgressive=function(){return this.get("progressive")},t.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},t.prototype.select=function(e,r){this._innerSelect(this.getData(r),e)},t.prototype.unselect=function(e,r){var o=this.option.selectedMap;if(o){var i=this.option.selectedMode,s=this.getData(r);if("series"===i||"all"===o)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var l=0;l<e.length;l++){var c=A0(s,e[l]);o[c]=!1,this._selectedDataIndicesMap[c]=-1}}},t.prototype.toggleSelect=function(e,r){for(var o=[],i=0;i<e.length;i++)o[0]=e[i],this.isSelected(e[i],r)?this.unselect(o,r):this.select(o,r)},t.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var e=this._selectedDataIndicesMap,r=rr(e),o=[],i=0;i<r.length;i++){var s=e[r[i]];s>=0&&o.push(s)}return o},t.prototype.isSelected=function(e,r){var o=this.option.selectedMap;if(!o)return!1;var i=this.getData(r);return("all"===o||o[A0(i,e)])&&!i.getItemModel(e).get(["select","disabled"])},t.prototype.isUniversalTransitionEnabled=function(){if(this[I0])return!0;var e=this.option.universalTransition;return!!e&&(!0===e||e&&e.enabled)},t.prototype._innerSelect=function(e,r){var o,i,s=this.option,l=s.selectedMode,c=r.length;if(l&&c)if("series"===l)s.selectedMap="all";else if("multiple"===l){wr(s.selectedMap)||(s.selectedMap={});for(var d=s.selectedMap,p=0;p<c;p++){var m=r[p];d[_=A0(e,m)]=!0,this._selectedDataIndicesMap[_]=e.getRawIndex(m)}}else if("single"===l||!0===l){var b=r[c-1],_=A0(e,b);s.selectedMap=((o={})[_]=!0,o),this._selectedDataIndicesMap=((i={})[_]=e.getRawIndex(b),i)}},t.prototype._initSelectedMapFromData=function(e){if(!this.option.selectedMap){var r=[];e.hasItemOption&&e.each(function(o){var i=e.getRawDataItem(o);i&&i.selected&&r.push(o)}),r.length>0&&this._innerSelect(e,r)}},t.registerClass=function(e){return W.registerClass(e)},t.protoInitialize=((e=t.prototype).type="series.__base__",e.seriesIndex=0,e.ignoreStyleOnData=!1,e.hasSymbolVisual=!1,e.defaultSymbol="circle",e.visualStyleAccessPath="itemStyle",void(e.visualDrawType="fill")),t;var e}(W);function om(n){var r,o,i,t=n.name;ic(n)||(n.name=(o=(r=n.getRawData()).mapDimensionsAll("seriesName"),i=[],Ce(o,function(s){var l=r.getDimensionInfo(s);l.displayName&&i.push(l.displayName)}),i.join(" ")||t))}function Ub(n){return n.model.getRawData().count()}function qM(n){var t=n.model;return t.setData(t.getRawData().cloneShallow()),Cx}function Cx(n,t){t.outputData&&n.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function ow(n,t){Ce($(n.CHANGABLE_METHODS,n.DOWNSAMPLE_METHODS),function(e){n.wrapMethod(e,dr(XS,t))})}function XS(n,t){var e=Mx(n);return e&&e.setOutputEnd((t||this).count()),t}function Mx(n){var t=(n.ecModel||{}).scheduler,e=t&&t.getPipeline(n.uid);if(e){var r=e.currentTask;if(r){var o=r.agentStubMap;o&&(r=o.get(n.uid))}return r}}na(Ka,WS),na(Ka,Do),Fp(Ka,W);var ks=function(){function n(){this.group=new xo,this.uid=ov("viewComponent")}return n.prototype.init=function(t,e){},n.prototype.render=function(t,e,r,o){},n.prototype.dispose=function(t,e){},n.prototype.updateView=function(t,e,r,o){},n.prototype.updateLayout=function(t,e,r,o){},n.prototype.updateVisual=function(t,e,r,o){},n.prototype.toggleBlurSeries=function(t,e,r){},n.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},n}();function O0(){var n=hi();return function(t){var e=n(t),r=t.pipelineContext,o=!!e.large,i=!!e.progressiveRender,s=e.large=!(!r||!r.large),l=e.progressiveRender=!(!r||!r.progressiveRender);return!(o===s&&i===l)&&"reset"}}Gc(ks),Zv(ks);var ZS=hi(),iw=O0(),$a=function(){function n(){this.group=new xo,this.uid=ov("viewChart"),this.renderTask=C0({plan:XM,reset:KS}),this.renderTask.context={view:this}}return n.prototype.init=function(t,e){},n.prototype.render=function(t,e,r,o){},n.prototype.highlight=function(t,e,r,o){var i=t.getData(o&&o.dataType);i&&jb(i,o,"emphasis")},n.prototype.downplay=function(t,e,r,o){var i=t.getData(o&&o.dataType);i&&jb(i,o,"normal")},n.prototype.remove=function(t,e){this.group.removeAll()},n.prototype.dispose=function(t,e){},n.prototype.updateView=function(t,e,r,o){this.render(t,e,r,o)},n.prototype.updateLayout=function(t,e,r,o){this.render(t,e,r,o)},n.prototype.updateVisual=function(t,e,r,o){this.render(t,e,r,o)},n.prototype.eachRendered=function(t){Tl(this.group,t)},n.markUpdateMethod=function(t,e){ZS(t).updateMethod=e},n.protoInitialize=void(n.prototype.type="chart"),n}();function kx(n,t,e){n&&Lf(n)&&("emphasis"===t?pd:Ah)(n,e)}function jb(n,t,e){var i,s,r=vh(n,t),o=t&&null!=t.highlightKey?(null==(s=N_[i=t.highlightKey])&&jn<=32&&(s=N_[i]=jn++),s):null;null!=r?Ce(ci(r),function(i){kx(n.getItemGraphicEl(i),e,o)}):n.eachItemGraphicEl(function(i){kx(i,e,o)})}function XM(n){return iw(n.model)}function KS(n){var t=n.model,e=n.ecModel,r=n.api,o=n.payload,i=t.pipelineContext.progressiveRender,s=n.view,l=o&&ZS(o).updateMethod,c=i?"incrementalPrepareRender":l&&s[l]?l:"render";return"render"!==c&&s[c](t,e,r,o),ZM[c]}Gc($a),Zv($a);var ZM={incrementalPrepareRender:{progress:function(n,t){t.view.incrementalRender(n,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(n,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},Yb="\0__throttleOriginMethod",KM="\0__throttleRate",im="\0__throttleType";function aw(n,t,e){var r,o,i,s,l,c=0,d=0,p=null;function m(){d=(new Date).getTime(),p=null,n.apply(i,s||[])}t=t||0;var b=function(){for(var _=[],S=0;S<arguments.length;S++)_[S]=arguments[S];r=(new Date).getTime(),i=this,s=_;var k=l||t,D=l||e;l=null,o=r-(D?c:d)-k,clearTimeout(p),D?p=setTimeout(m,k):o>=0?m():p=setTimeout(m,-o),c=r};return b.clear=function(){p&&(clearTimeout(p),p=null)},b.debounceNextCall=function(_){l=_},b}function E0(n,t,e,r){var o=n[t];if(o){var i=o[Yb]||o;if(o[KM]!==e||o[im]!==r){if(null==e||!r)return n[t]=i;(o=n[t]=aw(i,e,"debounce"===r))[Yb]=i,o[im]=r,o[KM]=e}return o}}function Tx(n,t){var e=n[t];e&&e[Yb]&&(e.clear&&e.clear(),n[t]=e[Yb])}var $S=hi(),$M={itemStyle:Vp(cx,!0),lineStyle:Vp(Qp,!0)},j2={lineStyle:"stroke",itemStyle:"fill"};function JS(n,t){return n.visualStyleMapper||$M[t]||(console.warn("Unknown style type '"+t+"'."),$M.itemStyle)}function QS(n,t){return n.visualDrawType||j2[t]||(console.warn("Unknown style type '"+t+"'."),"fill")}var NT={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var e=n.getData(),r=n.visualStyleAccessPath||"itemStyle",o=n.getModel(r),i=JS(n,r)(o),s=o.getShallow("decal");s&&(e.setVisual("decal",s),s.dirty=!0);var l=QS(n,r),c=i[l],d=yr(c)?c:null;if(!i[l]||d||"auto"===i.fill||"auto"===i.stroke){var m=n.getColorFromPalette(n.name,null,t.getSeriesCount());i[l]||(i[l]=m,e.setVisual("colorFromPalette",!0)),i.fill="auto"===i.fill||yr(i.fill)?m:i.fill,i.stroke="auto"===i.stroke||yr(i.stroke)?m:i.stroke}if(e.setVisual("style",i),e.setVisual("drawType",l),!t.isSeriesFiltered(n)&&d)return e.setVisual("colorFromPalette",!1),{dataEach:function(b,_){var S=n.getDataParams(_),k=Lt({},i);k[l]=d(S),b.setItemVisual(_,"style",k)}}}},Dx=new aa,BT={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(!n.ignoreStyleOnData&&!t.isSeriesFiltered(n)){var e=n.getData(),r=n.visualStyleAccessPath||"itemStyle",o=JS(n,r),i=e.getVisual("drawType");return{dataEach:e.hasItemOption?function(s,l){var c=s.getRawDataItem(l);if(c&&c[r]){Dx.option=c[r];var d=o(Dx);Lt(s.ensureUniqueItemVisual(l,"style"),d),Dx.option.decal&&(s.setItemVisual(l,"decal",Dx.option.decal),Dx.option.decal.dirty=!0),i in d&&s.setItemVisual(l,"colorFromPalette",!1)}}:null}}}},JM={performRawSeries:!0,overallReset:function(n){var t=Or();n.eachSeries(function(e){var r=e.getColorBy();if(!e.isColorBySeries()){var o=e.type+"-"+r,i=t.get(o);i||t.set(o,i={}),$S(e).scope=i}}),n.eachSeries(function(e){if(!e.isColorBySeries()&&!n.isSeriesFiltered(e)){var r=e.getRawData(),o={},i=e.getData(),s=$S(e).scope,c=QS(e,e.visualStyleAccessPath||"itemStyle");i.each(function(d){var p=i.getRawIndex(d);o[p]=d}),r.each(function(d){var p=o[d];if(i.getItemVisual(p,"colorFromPalette")){var m=i.ensureUniqueItemVisual(p,"style"),b=r.getName(d)||d+"",_=r.count();m[c]=e.getColorFromPalette(b,s,_)}})}})}},qb=Math.PI,Xb=function(){function n(t,e,r,o){this._stageTaskMap=Or(),this.ecInstance=t,this.api=e,r=this._dataProcessorHandlers=r.slice(),o=this._visualHandlers=o.slice(),this._allHandlers=r.concat(o)}return n.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each(function(r){var o=r.overallTask;o&&o.dirty()})},n.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var r=this._pipelineMap.get(t.__pipeline.id),o=r.context,i=!e&&r.progressiveEnabled&&(!o||o.progressiveRender)&&t.__idxInPipeline>r.blockIndex?r.step:null,s=o&&o.modDataCount;return{step:i,modBy:null!=s?Math.ceil(s/i):null,modDataCount:s}}},n.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},n.prototype.updateStreamModes=function(t,e){var r=this._pipelineMap.get(t.uid),o=t.getData().count(),i=r.progressiveEnabled&&e.incrementalPrepareRender&&o>=r.threshold,s=t.get("large")&&o>=t.get("largeThreshold"),l="mod"===t.get("progressiveChunkMode")?o:null;t.pipelineContext=r.context={progressiveRender:i,modDataCount:l,large:s}},n.prototype.restorePipelines=function(t){var e=this,r=e._pipelineMap=Or();t.eachSeries(function(o){var i=o.getProgressive(),s=o.uid;r.set(s,{id:s,head:null,tail:null,threshold:o.getProgressiveThreshold(),progressiveEnabled:i&&!(o.preventIncremental&&o.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),e._pipe(o,o.dataTask)})},n.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),r=this.api;Ce(this._allHandlers,function(o){var i=t.get(o.uid)||t.set(o.uid,{});Ao(!(o.reset&&o.overallReset),""),o.reset&&this._createSeriesStageTask(o,i,e,r),o.overallReset&&this._createOverallStageTask(o,i,e,r)},this)},n.prototype.prepareView=function(t,e,r,o){var i=t.renderTask,s=i.context;s.model=e,s.ecModel=r,s.api=o,i.__block=!t.incrementalPrepareRender,this._pipe(e,i)},n.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},n.prototype.performVisualTasks=function(t,e,r){this._performStageTasks(this._visualHandlers,t,e,r)},n.prototype._performStageTasks=function(t,e,r,o){o=o||{};var i=!1,s=this;function l(c,d){return c.setDirty&&(!c.dirtyMap||c.dirtyMap.get(d.__pipeline.id))}Ce(t,function(c,d){if(!o.visualType||o.visualType===c.visualType){var p=s._stageTaskMap.get(c.uid),m=p.seriesTaskMap,b=p.overallTask;if(b){var _,S=b.agentStubMap;S.each(function(D){l(o,D)&&(D.dirty(),_=!0)}),_&&b.dirty(),s.updatePayload(b,r);var k=s.getPerformArgs(b,o.block);S.each(function(D){D.perform(k)}),b.perform(k)&&(i=!0)}else m&&m.each(function(D,O){l(o,D)&&D.dirty();var N=s.getPerformArgs(D,o.block);N.skip=!c.performRawSeries&&e.isSeriesFiltered(D.context.model),s.updatePayload(D,r),D.perform(N)&&(i=!0)})}}),this.unfinished=i||this.unfinished},n.prototype.performSeriesTasks=function(t){var e;t.eachSeries(function(r){e=r.dataTask.perform()||e}),this.unfinished=e||this.unfinished},n.prototype.plan=function(){this._pipelineMap.each(function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)})},n.prototype.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},n.prototype._createSeriesStageTask=function(t,e,r,o){var i=this,s=e.seriesTaskMap,l=e.seriesTaskMap=Or(),c=t.seriesType,d=t.getTargetSeries;function p(m){var b=m.uid,_=l.set(b,s&&s.get(b)||C0({plan:Zb,reset:yv,count:sw}));_.context={model:m,ecModel:r,api:o,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:i},i._pipe(m,_)}t.createOnAllSeries?r.eachRawSeries(p):c?r.eachRawSeriesByType(c,p):d&&d(r,o).each(p)},n.prototype._createOverallStageTask=function(t,e,r,o){var i=this,s=e.overallTask=e.overallTask||C0({reset:eC});s.context={ecModel:r,api:o,overallReset:t.overallReset,scheduler:i};var l=s.agentStubMap,c=s.agentStubMap=Or(),d=t.seriesType,p=t.getTargetSeries,m=!0,b=!1;function S(k){var D=k.uid,O=c.set(D,l&&l.get(D)||(b=!0,C0({reset:tC,onDirty:QM})));O.context={model:k,overallProgress:m},O.agent=s,O.__block=m,i._pipe(k,O)}Ao(!t.createOnAllSeries,""),d?r.eachRawSeriesByType(d,S):p?p(r,o).each(S):(m=!1,Ce(r.getSeries(),S)),b&&s.dirty()},n.prototype._pipe=function(t,e){var o=this._pipelineMap.get(t.uid);!o.head&&(o.head=e),o.tail&&o.tail.pipe(e),o.tail=e,e.__idxInPipeline=o.count++,e.__pipeline=o},n.wrapStageHandler=function(t,e){return yr(t)&&(t={overallReset:t,seriesType:rC(t)}),t.uid=ov("stageHandler"),e&&(t.visualType=e),t},n}();function eC(n){n.overallReset(n.ecModel,n.api,n.payload)}function tC(n){return n.overallProgress&&zT}function zT(){this.agent.dirty(),this.getDownstream().dirty()}function QM(){this.agent&&this.agent.dirty()}function Zb(n){return n.plan?n.plan(n.model,n.ecModel,n.api,n.payload):null}function yv(n){n.useClearVisual&&n.data.clearAllVisual();var t=n.resetDefines=ci(n.reset(n.model,n.ecModel,n.api,n.payload));return t.length>1?mt(t,function(e,r){return nC(r)}):FT}var FT=nC(0);function nC(n){return function(t,e){var r=e.data,o=e.resetDefines[n];if(o&&o.dataEach)for(var i=t.start;i<t.end;i++)o.dataEach(r,i);else o&&o.progress&&o.progress(t,r)}}function sw(n){return n.data.count()}function rC(n){Kb=null;try{n($b,Ax)}catch{}return Kb}var Kb,$b={},Ax={};function uw(n,t){for(var e in t.prototype)n[e]=Fo}uw($b,tr),uw(Ax,mf),$b.eachSeriesByType=$b.eachRawSeriesByType=function(n){Kb=n},$b.eachComponent=function(n){"series"===n.mainType&&n.subType&&(Kb=n.subType)};var Jb=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],ek={color:Jb,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Jb]},yf="#B9B8CE",sg="#100C2A",lw=function(){return{axisLine:{lineStyle:{color:yf}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},Gf=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],Ru={darkMode:!0,color:Gf,backgroundColor:sg,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:yf}},textStyle:{color:yf},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:yf}},dataZoom:{borderColor:"#71708A",textStyle:{color:yf},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:yf}},timeline:{lineStyle:{color:yf},label:{color:yf},controlStyle:{color:yf,borderColor:yf}},calendar:{itemStyle:{color:sg},dayLabel:{color:yf},monthLabel:{color:yf},yearLabel:{color:yf}},timeAxis:lw(),logAxis:lw(),valueAxis:lw(),categoryAxis:lw(),line:{symbol:"circle"},graph:{color:Gf},gauge:{title:{color:yf},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:yf},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};Ru.categoryAxis.splitLine.show=!1;var P0=function(){function n(){}return n.prototype.normalizeQuery=function(t){var e={},r={},o={};if(ir(t)){var i=Ku(t);e.mainType=i.main||null,e.subType=i.sub||null}else{var s=["Index","Name","Id"],l={name:1,dataIndex:1,dataType:1};Ce(t,function(c,d){for(var p=!1,m=0;m<s.length;m++){var b=s[m],_=d.lastIndexOf(b);if(_>0&&_===d.length-b.length){var S=d.slice(0,_);"data"!==S&&(e.mainType=S,e[b.toLowerCase()]=c,p=!0)}}l.hasOwnProperty(d)&&(r[d]=c,p=!0),p||(o[d]=c)})}return{cptQuery:e,dataQuery:r,otherQuery:o}},n.prototype.filter=function(t,e){var r=this.eventInfo;if(!r)return!0;var o=r.targetEl,i=r.packedEvent,s=r.model,l=r.view;if(!s||!l)return!0;var c=e.cptQuery,d=e.dataQuery;return p(c,s,"mainType")&&p(c,s,"subType")&&p(c,s,"index","componentIndex")&&p(c,s,"name")&&p(c,s,"id")&&p(d,i,"name")&&p(d,i,"dataIndex")&&p(d,i,"dataType")&&(!l.filterForExposedEvent||l.filterForExposedEvent(t,e.otherQuery,o,i));function p(m,b,_,S){return null==m[_]||b[S||_]===m[_]}},n.prototype.afterTrigger=function(){this.eventInfo=null},n}(),Ix=["symbol","symbolSize","symbolRotate","symbolOffset"],ug=Ix.concat(["symbolKeepAspect"]),oC={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){var e=n.getData();if(n.legendIcon&&e.setVisual("legendIcon",n.legendIcon),n.hasSymbolVisual){for(var r={},o={},i=!1,s=0;s<Ix.length;s++){var l=Ix[s],c=n.get(l);yr(c)?(i=!0,o[l]=c):r[l]=c}if(r.symbol=r.symbol||n.defaultSymbol,e.setVisual(Lt({legendIcon:n.legendIcon||r.symbol,symbolKeepAspect:n.get("symbolKeepAspect")},r)),!t.isSeriesFiltered(n)){var d=rr(o);return{dataEach:i?function(p,m){for(var b=n.getRawValue(m),_=n.getDataParams(m),S=0;S<d.length;S++){var k=d[S];p.setItemVisual(m,k,o[k](b,_))}}:null}}}}},cw={createOnAllSeries:!0,performRawSeries:!0,reset:function(n,t){if(n.hasSymbolVisual&&!t.isSeriesFiltered(n))return{dataEach:n.getData().hasItemOption?function(e,r){for(var o=e.getItemModel(r),i=0;i<ug.length;i++){var s=ug[i],l=o.getShallow(s,!0);null!=l&&e.setItemVisual(r,s,l)}}:null}}};function fw(n,t,e){switch(e){case"color":return n.getItemVisual(t,"style")[n.getVisual("drawType")];case"opacity":return n.getItemVisual(t,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getItemVisual(t,e)}}function Dy(n,t){switch(t){case"color":return n.getVisual("style")[n.getVisual("drawType")];case"opacity":return n.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return n.getVisual(t)}}function tk(n,t,e,r){switch(e){case"color":n.ensureUniqueItemVisual(t,"style")[n.getVisual("drawType")]=r,n.setItemVisual(t,"colorFromPalette",!1);break;case"opacity":n.ensureUniqueItemVisual(t,"style").opacity=r;break;case"symbol":case"symbolSize":case"liftZ":n.setItemVisual(t,e,r)}}function dw(n,t){function e(r,o){var i=[];return r.eachComponent({mainType:"series",subType:n,query:o},function(s){i.push(s.seriesIndex)}),i}Ce([[n+"ToggleSelect","toggleSelect"],[n+"Select","select"],[n+"UnSelect","unselect"]],function(r){t(r[0],function(o,i,s){o=Lt({},o),s.dispatchAction(Lt(o,{type:r[1],seriesIndex:e(i,o)}))})})}function fp(n,t,e,r,o){var i=n+t;e.isSilent(i)||r.eachComponent({mainType:"series",subType:"pie"},function(s){for(var l=s.seriesIndex,c=s.option.selectedMap,d=o.selected,p=0;p<d.length;p++)if(d[p].seriesIndex===l){var m=s.getData(),b=vh(m,o.fromActionPayload);e.trigger(i,{type:i,seriesId:s.id,name:Ue(b)?m.getName(b[0]):m.getName(b),selected:ir(c)?c:Lt({},c)})}})}function Ay(n,t,e){for(var r;n&&(!t(n)||(r=n,!e));)n=n.__hostTarget||n.parent;return r}var R0=Math.round(9*Math.random()),iC="function"==typeof Object.defineProperty,nk=function(){function n(){this._id="__ec_inner_"+R0++}return n.prototype.get=function(t){return this._guard(t)[this._id]},n.prototype.set=function(t,e){var r=this._guard(t);return iC?Object.defineProperty(r,this._id,{value:e,enumerable:!1,configurable:!0}):r[this._id]=e,this},n.prototype.delete=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},n.prototype.has=function(t){return!!this._guard(t)[this._id]},n.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},n}(),VT=Go.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var e=t.cx,r=t.cy,o=t.width/2,i=t.height/2;n.moveTo(e,r-i),n.lineTo(e+o,r+i),n.lineTo(e-o,r+i),n.closePath()}}),Y2=Go.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(n,t){var e=t.cx,r=t.cy,o=t.width/2,i=t.height/2;n.moveTo(e,r-i),n.lineTo(e+o,r),n.lineTo(e,r+i),n.lineTo(e-o,r),n.closePath()}}),HT=Go.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var e=t.x,r=t.y,o=t.width/5*3,i=Math.max(o,t.height),s=o/2,l=s*s/(i-s),c=r-i+s+l,d=Math.asin(l/s),p=Math.cos(d)*s,m=Math.sin(d),b=Math.cos(d),_=.6*s,S=.7*s;n.moveTo(e-p,c+l),n.arc(e,c,s,Math.PI-d,2*Math.PI+d),n.bezierCurveTo(e+p-m*_,c+l+b*_,e,r-S,e,r),n.bezierCurveTo(e,r-S,e-p+m*_,c+l+b*_,e-p,c+l),n.closePath()}}),WT=Go.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(n,t){var e=t.height,o=t.x,i=t.y,s=t.width/3*2;n.moveTo(o,i),n.lineTo(o+s,i+e),n.lineTo(o,i+e/4*3),n.lineTo(o-s,i+e),n.lineTo(o,i),n.closePath()}}),GT={line:function(n,t,e,r,o){o.x1=n,o.y1=t+r/2,o.x2=n+e,o.y2=t+r/2},rect:function(n,t,e,r,o){o.x=n,o.y=t,o.width=e,o.height=r},roundRect:function(n,t,e,r,o){o.x=n,o.y=t,o.width=e,o.height=r,o.r=Math.min(e,r)/4},square:function(n,t,e,r,o){var i=Math.min(e,r);o.x=n,o.y=t,o.width=i,o.height=i},circle:function(n,t,e,r,o){o.cx=n+e/2,o.cy=t+r/2,o.r=Math.min(e,r)/2},diamond:function(n,t,e,r,o){o.cx=n+e/2,o.cy=t+r/2,o.width=e,o.height=r},pin:function(n,t,e,r,o){o.x=n+e/2,o.y=t+r/2,o.width=e,o.height=r},arrow:function(n,t,e,r,o){o.x=n+e/2,o.y=t+r/2,o.width=e,o.height=r},triangle:function(n,t,e,r,o){o.cx=n+e/2,o.cy=t+r/2,o.width=e,o.height=r}},hw={};Ce({line:Pu,rect:bi,roundRect:bi,square:bi,circle:Bf,diamond:Y2,pin:HT,arrow:WT,triangle:VT},function(n,t){hw[t]=new n});var rk=Go.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(n,t,e){var r=dh(n,t,e),o=this.shape;return o&&"pin"===o.symbolType&&"inside"===t.position&&(r.y=e.y+.4*e.height),r},buildPath:function(n,t,e){var r=t.symbolType;if("none"!==r){var o=hw[r];o||(o=hw[r="rect"]),GT[r](t.x,t.y,t.width,t.height,o.shape),o.buildPath(n,o.shape,e)}}});function Qb(n,t){if("image"!==this.type){var e=this.style;this.__isEmptyBrush?(e.stroke=n,e.fill=t||"#fff",e.lineWidth=2):"line"===this.shape.symbolType?e.stroke=n:e.fill=n,this.markRedraw()}}function Dl(n,t,e,r,o,i,s){var l,c=0===n.indexOf("empty");return c&&(n=n.substr(5,1).toLowerCase()+n.substr(6)),(l=0===n.indexOf("image://")?zf(n.slice(8),new Io(t,e,r,o),s?"center":"cover"):0===n.indexOf("path://")?ip(n.slice(7),{},new Io(t,e,r,o),s?"center":"cover"):new rk({shape:{symbolType:n,x:t,y:e,width:r,height:o}})).__isEmptyBrush=c,l.setColor=Qb,i&&l.setColor(i),l}function e1(n){return Ue(n)||(n=[+n,+n]),[n[0]||0,n[1]||0]}function t1(n,t){if(null!=n)return Ue(n)||(n=[n,n]),[qn(n[0],t[0])||0,qn(un(n[1],n[0]),t[1])||0]}function Iy(n){return isFinite(n)}function n1(n,t,e){for(var r="radial"===t.type?(s=n,l=t,void 0,void 0,void 0,b=void 0,_=void 0,S=void 0,d=(c=e).width,p=c.height,m=Math.min(d,p),b=null==l.x?.5:l.x,_=null==l.y?.5:l.y,S=null==l.r?.5:l.r,l.global||(b=b*d+c.x,_=_*p+c.y,S*=m),b=Iy(b)?b:.5,_=Iy(_)?_:.5,S=S>=0&&Iy(S)?S:.5,s.createRadialGradient(b,_,0,b,_,S)):function(s,l,c){var d=null==l.x?0:l.x,p=null==l.x2?1:l.x2,m=null==l.y?0:l.y,b=null==l.y2?0:l.y2;return l.global||(d=d*c.width+c.x,p=p*c.width+c.x,m=m*c.height+c.y,b=b*c.height+c.y),d=Iy(d)?d:0,p=Iy(p)?p:1,m=Iy(m)?m:0,b=Iy(b)?b:0,s.createLinearGradient(d,m,p,b)}(n,t,e),o=t.colorStops,i=0;i<o.length;i++)r.addColorStop(o[i].offset,o[i].color);var s,l,c,d,p,m,b,_,S;return r}function aC(n){return parseInt(n,10)}function L0(n,t,e){var r=["width","height"][t],o=["clientWidth","clientHeight"][t],i=["paddingLeft","paddingTop"][t],s=["paddingRight","paddingBottom"][t];if(null!=e[r]&&"auto"!==e[r])return parseFloat(e[r]);var l=document.defaultView.getComputedStyle(n);return(n[o]||aC(l[r])||aC(n.style[r]))-(aC(l[i])||0)-(aC(l[s])||0)|0}function Ox(n){var t,e,r=n.style,o=r.lineDash&&r.lineWidth>0&&(e=r.lineWidth,(t=r.lineDash)&&"solid"!==t&&e>0?"dashed"===t?[4*e,2*e]:"dotted"===t?[e]:gr(t)?[t]:Ue(t)?t:null:null),i=r.lineDashOffset;if(o){var s=r.strokeNoScale&&n.getLineScale?n.getLineScale():1;s&&1!==s&&(o=mt(o,function(l){return l/s}),i/=s)}return[o,i]}var UT=new Os(!0);function Oy(n){var t=n.stroke;return!(null==t||"none"===t||!(n.lineWidth>0))}function N0(n){return"string"==typeof n&&"none"!==n}function r1(n){var t=n.fill;return null!=t&&"none"!==t}function jT(n,t){if(null!=t.fillOpacity&&1!==t.fillOpacity){var e=n.globalAlpha;n.globalAlpha=t.fillOpacity*t.opacity,n.fill(),n.globalAlpha=e}else n.fill()}function o1(n,t){if(null!=t.strokeOpacity&&1!==t.strokeOpacity){var e=n.globalAlpha;n.globalAlpha=t.strokeOpacity*t.opacity,n.stroke(),n.globalAlpha=e}else n.stroke()}function bv(n,t,e){var r=ja(t.image,t.__image,e);if(Cg(r)){var o=n.createPattern(r,t.repeat||"repeat");if("function"==typeof DOMMatrix&&o&&o.setTransform){var i=new DOMMatrix;i.translateSelf(t.x||0,t.y||0),i.rotateSelf(0,0,(t.rotation||0)*Tr),i.scaleSelf(t.scaleX||1,t.scaleY||1),o.setTransform(i)}return o}}var ok=["shadowBlur","shadowOffsetX","shadowOffsetY"],pw=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Ex(n,t,e,r,o){var i=!1;if(!r&&t===(e=e||{}))return!1;if(r||t.opacity!==e.opacity){_d(n,o),i=!0;var s=Math.max(Math.min(t.opacity,1),0);n.globalAlpha=isNaN(s)?_h.opacity:s}(r||t.blend!==e.blend)&&(i||(_d(n,o),i=!0),n.globalCompositeOperation=t.blend||_h.blend);for(var l=0;l<ok.length;l++){var c=ok[l];(r||t[c]!==e[c])&&(i||(_d(n,o),i=!0),n[c]=n.dpr*(t[c]||0))}return(r||t.shadowColor!==e.shadowColor)&&(i||(_d(n,o),i=!0),n.shadowColor=t.shadowColor||_h.shadowColor),i}function Ey(n,t,e,r,o){var i=Py(t,o.inHover),s=r?null:e&&Py(e,o.inHover)||{};if(i===s)return!1;var l=Ex(n,i,s,r,o);if((r||i.fill!==s.fill)&&(l||(_d(n,o),l=!0),N0(i.fill)&&(n.fillStyle=i.fill)),(r||i.stroke!==s.stroke)&&(l||(_d(n,o),l=!0),N0(i.stroke)&&(n.strokeStyle=i.stroke)),(r||i.opacity!==s.opacity)&&(l||(_d(n,o),l=!0),n.globalAlpha=null==i.opacity?1:i.opacity),t.hasStroke()){var c=i.lineWidth/(i.strokeNoScale&&t.getLineScale?t.getLineScale():1);n.lineWidth!==c&&(l||(_d(n,o),l=!0),n.lineWidth=c)}for(var d=0;d<pw.length;d++){var p=pw[d],m=p[0];(r||i[m]!==s[m])&&(l||(_d(n,o),l=!0),n[m]=i[m]||p[1])}return l}function sC(n,t){var e=t.transform,r=n.dpr||1;e?n.setTransform(r*e[0],r*e[1],r*e[2],r*e[3],r*e[4],r*e[5]):n.setTransform(r,0,0,r,0,0)}function _d(n,t){t.batchFill&&n.fill(),t.batchStroke&&n.stroke(),t.batchFill="",t.batchStroke=""}function Py(n,t){return t&&n.__hoverStyle||n.style}function gw(n,t){Ry(n,t,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Ry(n,t,e,r){var o=t.transform;if(!t.shouldBePainted(e.viewWidth,e.viewHeight,!1,!1))return t.__dirty&=-2,void(t.__isRendered=!1);var S,k,D,i=t.__clipPaths,s=e.prevElClipPaths,l=!1,c=!1;if(s&&!function(S,k){if(S===k||!S&&!k)return!1;if(!S||!k||S.length!==k.length)return!0;for(var D=0;D<S.length;D++)if(S[D]!==k[D])return!0;return!1}(i,s)||(s&&s.length&&(_d(n,e),n.restore(),c=l=!0,e.prevElClipPaths=null,e.allClipped=!1,e.prevEl=null),i&&i.length&&(_d(n,e),n.save(),function(S,k,D){for(var O=!1,N=0;N<S.length;N++){var F=S[N];O=O||F.isZeroArea(),sC(k,F),k.beginPath(),F.buildPath(k,F.shape),k.clip()}D.allClipped=O}(i,n,e),l=!0),e.prevElClipPaths=i),e.allClipped)t.__isRendered=!1;else{t.beforeBrush&&t.beforeBrush(),t.innerBeforeBrush();var d=e.prevEl;d||(c=l=!0);var p,m,b=t instanceof Go&&t.autoBatch&&(k=r1(S=t.style),D=Oy(S),!(S.lineDash||!(+k^+D)||k&&"string"!=typeof S.fill||D&&"string"!=typeof S.stroke||S.strokePercent<1||S.strokeOpacity<1||S.fillOpacity<1));l||(m=d.transform,(p=o)&&m?p[0]!==m[0]||p[1]!==m[1]||p[2]!==m[2]||p[3]!==m[3]||p[4]!==m[4]||p[5]!==m[5]:p||m)?(_d(n,e),sC(n,t)):b||_d(n,e);var _=Py(t,e.inHover);t instanceof Go?(1!==e.lastDrawType&&(c=!0,e.lastDrawType=1),Ey(n,t,d,c,e),b&&(e.batchFill||e.batchStroke)||n.beginPath(),function(S,k,D,O){var N,F=Oy(D),V=r1(D),q=D.strokePercent,Z=q<1,Q=!k.path;k.silent&&!Z||!Q||k.createPathProxy();var re=k.path||UT,he=k.__dirty;if(!O){var ge=D.fill,ve=D.stroke,_e=V&&!!ge.colorStops,Ee=F&&!!ve.colorStops,ze=V&&!!ge.image,Ge=F&&!!ve.image,Xe=void 0,$e=void 0,nt=void 0,yt=void 0,_t=void 0;(_e||Ee)&&(_t=k.getBoundingRect()),_e&&(Xe=he?n1(S,ge,_t):k.__canvasFillGradient,k.__canvasFillGradient=Xe),Ee&&($e=he?n1(S,ve,_t):k.__canvasStrokeGradient,k.__canvasStrokeGradient=$e),ze&&(nt=he||!k.__canvasFillPattern?bv(S,ge,k):k.__canvasFillPattern,k.__canvasFillPattern=nt),Ge&&(yt=he||!k.__canvasStrokePattern?bv(S,ve,k):k.__canvasStrokePattern,k.__canvasStrokePattern=nt),_e?S.fillStyle=Xe:ze&&(nt?S.fillStyle=nt:V=!1),Ee?S.strokeStyle=$e:Ge&&(yt?S.strokeStyle=yt:F=!1)}var Et,hn,Zn=k.getGlobalScale();re.setScale(Zn[0],Zn[1],k.segmentIgnoreThreshold),S.setLineDash&&D.lineDash&&(Et=(N=Ox(k))[0],hn=N[1]);var Rt=!0;(Q||4&he)&&(re.setDPR(S.dpr),Z?re.setContext(null):(re.setContext(S),Rt=!1),re.reset(),k.buildPath(re,k.shape,O),re.toStatic(),k.pathUpdated()),Rt&&re.rebuildPath(S,Z?q:1),Et&&(S.setLineDash(Et),S.lineDashOffset=hn),O||(D.strokeFirst?(F&&o1(S,D),V&&jT(S,D)):(V&&jT(S,D),F&&o1(S,D))),Et&&S.setLineDash([])}(n,t,_,b),b&&(e.batchFill=_.fill||"",e.batchStroke=_.stroke||"")):t instanceof Og?(3!==e.lastDrawType&&(c=!0,e.lastDrawType=3),Ey(n,t,d,c,e),function(S,k,D){var O,N=D.text;if(null!=N&&(N+=""),N){S.font=D.font||cr,S.textAlign=D.textAlign,S.textBaseline=D.textBaseline;var F=void 0,V=void 0;S.setLineDash&&D.lineDash&&(F=(O=Ox(k))[0],V=O[1]),F&&(S.setLineDash(F),S.lineDashOffset=V),D.strokeFirst?(Oy(D)&&S.strokeText(N,D.x,D.y),r1(D)&&S.fillText(N,D.x,D.y)):(r1(D)&&S.fillText(N,D.x,D.y),Oy(D)&&S.strokeText(N,D.x,D.y)),F&&S.setLineDash([])}}(n,t,_)):t instanceof fl?(2!==e.lastDrawType&&(c=!0,e.lastDrawType=2),function(S,k,D,O,N){Ex(S,Py(k,N.inHover),D&&Py(D,N.inHover),O,N)}(n,t,d,c,e),function(S,k,D){var O=k.__image=ja(D.image,k.__image,k,k.onload);if(O&&Cg(O)){var N=D.x||0,F=D.y||0,V=k.getWidth(),q=k.getHeight(),Z=O.width/O.height;if(null==V&&null!=q?V=q*Z:null==q&&null!=V?q=V/Z:null==V&&null==q&&(V=O.width,q=O.height),D.sWidth&&D.sHeight){var Q=D.sx||0,re=D.sy||0;S.drawImage(O,Q,re,D.sWidth,D.sHeight,N,F,V,q)}else if(D.sx&&D.sy){var he=V-(Q=D.sx),ge=q-(re=D.sy);S.drawImage(O,Q,re,he,ge,N,F,V,q)}else S.drawImage(O,N,F,V,q)}}(n,t,_)):t.getTemporalDisplayables&&(4!==e.lastDrawType&&(c=!0,e.lastDrawType=4),function(S,k,D){var O=k.getDisplayables(),N=k.getTemporalDisplayables();S.save();var F,V,q={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:D.viewWidth,viewHeight:D.viewHeight,inHover:D.inHover};for(F=k.getCursor(),V=O.length;F<V;F++)(re=O[F]).beforeBrush&&re.beforeBrush(),re.innerBeforeBrush(),Ry(S,re,q,F===V-1),re.innerAfterBrush(),re.afterBrush&&re.afterBrush(),q.prevEl=re;for(var Z=0,Q=N.length;Z<Q;Z++){var re;(re=N[Z]).beforeBrush&&re.beforeBrush(),re.innerBeforeBrush(),Ry(S,re,q,Z===Q-1),re.innerAfterBrush(),re.afterBrush&&re.afterBrush(),q.prevEl=re}k.clearTemporalDisplayables(),k.notClear=!0,S.restore()}(n,t,e)),b&&r&&_d(n,e),t.innerAfterBrush(),t.afterBrush&&t.afterBrush(),e.prevEl=t,t.__dirty=0,t.__isRendered=!0}}var Ly=new nk,i1=new Vo(100),uC=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function Ls(n,t){if("none"===n)return null;var e=t.getDevicePixelRatio(),r=t.getZr(),o="svg"===r.painter.type;n.dirty&&Ly.delete(n);var i=Ly.get(n);if(i)return i;var s=Yn(n,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===s.backgroundColor&&(s.backgroundColor=null);var l={repeat:"repeat"};return function(c){for(var d,p=[e],m=!0,b=0;b<uC.length;++b){var _=s[uC[b]];if(null!=_&&!Ue(_)&&!ir(_)&&!gr(_)&&"boolean"!=typeof _){m=!1;break}p.push(_)}if(m){d=p.join(",")+(o?"-svg":"");var S=i1.get(d);S&&(o?c.svgElement=S:c.image=S)}var k,D=a1(s.dashArrayX),O=function(he){if(!he||"object"==typeof he&&0===he.length)return[0,0];if(gr(he)){var ge=Math.ceil(he);return[ge,ge]}var ve=mt(he,function(_e){return Math.ceil(_e)});return he.length%2?ve.concat(ve):ve}(s.dashArrayY),N=Px(s.symbol),F=mt(D,function(he){return Rx(he)}),V=Rx(O),q=!o&&Pr.createCanvas(),Z=o&&{tag:"g",attrs:{},key:"dcl",children:[]},Q=function(){for(var he=1,ge=0,ve=F.length;ge<ve;++ge)he=Sg(he,F[ge]);var _e=1;for(ge=0,ve=N.length;ge<ve;++ge)_e=Sg(_e,N[ge].length);he*=_e;var Ee=V*F.length*N.length;return{width:Math.max(1,Math.min(he,s.maxTileWidth)),height:Math.max(1,Math.min(Ee,s.maxTileHeight))}}();q&&(q.width=Q.width*e,q.height=Q.height*e,k=q.getContext("2d")),function(){k&&(k.clearRect(0,0,q.width,q.height),s.backgroundColor&&(k.fillStyle=s.backgroundColor,k.fillRect(0,0,q.width,q.height)));for(var he=0,ge=0;ge<O.length;++ge)he+=O[ge];if(!(he<=0))for(var ve=-V,_e=0,Ee=0,ze=0;ve<Q.height;){if(_e%2==0){for(var Ge=Ee/2%N.length,Xe=0,$e=0,nt=0;Xe<2*Q.width;){var yt=0;for(ge=0;ge<D[ze].length;++ge)yt+=D[ze][ge];if(yt<=0)break;if($e%2==0){var _t=.5*(1-s.symbolSize);lr(Xe+D[ze][$e]*_t,ve+O[_e]*_t,D[ze][$e]*s.symbolSize,O[_e]*s.symbolSize,N[Ge][nt/2%N[Ge].length])}Xe+=D[ze][$e],++nt,++$e===D[ze].length&&($e=0)}++ze===D.length&&(ze=0)}ve+=O[_e],++Ee,++_e===O.length&&(_e=0)}function lr(ar,Kn,xr,nr,Cr){var zr=o?1:e,qo=Dl(Cr,ar*zr,Kn*zr,xr*zr,nr*zr,s.color,s.symbolKeepAspect);if(o){var li=r.painter.renderOneToVNode(qo);li&&Z.children.push(li)}else gw(k,qo)}}(),m&&i1.put(d,q||Z),c.image=q,c.svgElement=Z,c.svgWidth=Q.width,c.svgHeight=Q.height}(l),l.rotation=s.rotation,l.scaleX=l.scaleY=o?1:1/e,Ly.set(n,l),n.dirty=!1,l}function Px(n){if(!n||0===n.length)return[["rect"]];if(ir(n))return[[n]];for(var t=!0,e=0;e<n.length;++e)if(!ir(n[e])){t=!1;break}if(t)return Px([n]);var r=[];for(e=0;e<n.length;++e)ir(n[e])?r.push([n[e]]):r.push(n[e]);return r}function a1(n){if(!n||0===n.length)return[[0,0]];if(gr(n))return[[o=Math.ceil(n),o]];for(var t=!0,e=0;e<n.length;++e)if(!gr(n[e])){t=!1;break}if(t)return a1([n]);var r=[];for(e=0;e<n.length;++e)if(gr(n[e])){var o=Math.ceil(n[e]);r.push([o,o])}else(o=mt(n[e],function(i){return Math.ceil(i)})).length%2==1?r.push(o.concat(o)):r.push(o);return r}function Rx(n){for(var t=0,e=0;e<n.length;++e)t+=n[e];return n.length%2==1?2*t:t}var $c=new bo,B0={};function lC(n){return B0[n]}var fC={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:4500,ARIA:6e3,DECAL:7e3}},wd="__flagInMainProcess",Sd="__pendingUpdate",dC="__needsUpdateStatus",Lx=/^[a-zA-Z0-9_]+$/,vw="__connectUpdateStatus";function Nx(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!this.isDisposed())return ak(this,n,t)}}function ik(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ak(this,n,t)}}function ak(n,t,e){return e[0]=e[0]&&e[0].toLowerCase(),bo.prototype[t].apply(n,e)}var z0,s1,dc,Uf,yw,F0,u1,V0,H0,Bx,zx,Fx,hC,pC,sk,gC,Jd,YT,W0=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t}(bo),mC=W0.prototype;mC.on=ik("on"),mC.off=ik("off");var vC=function(n){function t(e,r,o){var i=n.call(this,new P0)||this;i._chartsViews=[],i._chartsMap={},i._componentsViews=[],i._componentsMap={},i._pendingActions=[],o=o||{},ir(r)&&(r=bw[r]),i._dom=e;var d=i._zr=wg(e,{renderer:o.renderer||"canvas",devicePixelRatio:o.devicePixelRatio,width:o.width,height:o.height,ssr:o.ssr,useDirtyRect:un(o.useDirtyRect,!1),useCoarsePointer:un(o.useCoarsePointer,"auto"),pointerSize:o.pointerSize});i._ssr=o.ssr,i._throttledZrFlush=aw(De(d.flush,d),17),(r=an(r))&&Z_(r,!0),i._theme=r,i._locale=function(b){if(ir(b)){var _=qg[b.toUpperCase()]||{};return"ZH"===b||"EN"===b?an(_):ln(an(_),an(qg.EN),!1)}return ln(an(b),an(qg.EN),!1)}(o.locale||iv),i._coordSysMgr=new Ms;var p=i._api=sk(i);function m(b,_){return b.__prio-_.__prio}return jh(jf,m),jh(xv,m),i._scheduler=new Xb(i,p,xv,jf),i._messageCenter=new W0,i._initEvents(),i.resize=De(i.resize,i),d.animation.on("frame",i._onframe,i),Bx(d,i),zx(d,i),ni(i),i}return gt(t,n),t.prototype._onframe=function(){if(!this._disposed){YT(this);var e=this._scheduler;if(this[Sd]){var r=this[Sd].silent;this[wd]=!0;try{z0(this),Uf.update.call(this,null,this[Sd].updateParams)}catch(c){throw this[wd]=!1,this[Sd]=null,c}this._zr.flush(),this[wd]=!1,this[Sd]=null,V0.call(this,r),H0.call(this,r)}else if(e.unfinished){var o=1,i=this._model,s=this._api;e.unfinished=!1;do{var l=+new Date;e.performSeriesTasks(i),e.performDataProcessorTasks(i),F0(this,i),e.performVisualTasks(i),pC(this,this._model,s,"remain",{}),o-=+new Date-l}while(o>0&&e.unfinished);e.unfinished||this._zr.flush()}}},t.prototype.getDom=function(){return this._dom},t.prototype.getId=function(){return this.id},t.prototype.getZr=function(){return this._zr},t.prototype.isSSR=function(){return this._ssr},t.prototype.setOption=function(e,r,o){if(!this[wd])if(this._disposed);else{var i,s,l;if(wr(r)&&(o=r.lazyUpdate,i=r.silent,s=r.replaceMerge,l=r.transition,r=r.notMerge),this[wd]=!0,!this._model||r){var c=new pv(this._api),d=this._theme,p=this._model=new tr;p.scheduler=this._scheduler,p.ssr=this._ssr,p.init(null,null,null,d,this._locale,c)}this._model.setOption(e,{replaceMerge:s},am);var m={seriesTransition:l,optionChanged:!0};if(o)this[Sd]={silent:i,updateParams:m},this[wd]=!1,this.getZr().wakeUp();else{try{z0(this),Uf.update.call(this,null,m)}catch(b){throw this[Sd]=null,this[wd]=!1,b}this._ssr||this._zr.flush(),this[Sd]=null,this[wd]=!1,V0.call(this,i),H0.call(this,i)}}},t.prototype.setTheme=function(){},t.prototype.getModel=function(){return this._model},t.prototype.getOption=function(){return this._model&&this._model.getOption()},t.prototype.getWidth=function(){return this._zr.getWidth()},t.prototype.getHeight=function(){return this._zr.getHeight()},t.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||zn.hasGlobalWindow&&window.devicePixelRatio||1},t.prototype.getRenderedCanvas=function(e){return this.renderToCanvas(e)},t.prototype.renderToCanvas=function(e){return this._zr.painter.getRenderedCanvas({backgroundColor:(e=e||{}).backgroundColor||this._model.get("backgroundColor"),pixelRatio:e.pixelRatio||this.getDevicePixelRatio()})},t.prototype.renderToSVGString=function(e){return this._zr.painter.renderToString({useViewBox:(e=e||{}).useViewBox})},t.prototype.getSvgDataURL=function(){if(zn.svgSupported){var e=this._zr;return Ce(e.storage.getDisplayList(),function(r){r.stopAnimation(null,!0)}),e.painter.toDataURL()}},t.prototype.getDataURL=function(e){if(!this._disposed){var r=(e=e||{}).excludeComponents,o=this._model,i=[],s=this;Ce(r,function(c){o.eachComponent({mainType:c},function(d){var p=s._componentsMap[d.__viewId];p.group.ignore||(i.push(p),p.group.ignore=!0)})});var l="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return Ce(i,function(c){c.group.ignore=!1}),l}},t.prototype.getConnectedDataURL=function(e){if(!this._disposed){var r="svg"===e.type,o=this.group,i=Math.min,s=Math.max,l=1/0;if(xw[o]){var c=l,d=l,p=-1/0,m=-1/0,b=[],_=e&&e.pixelRatio||this.getDevicePixelRatio();Ce(G0,function(F,V){if(F.group===o){var q=r?F.getZr().painter.getSvgDom().innerHTML:F.renderToCanvas(an(e)),Z=F.getDom().getBoundingClientRect();c=i(Z.left,c),d=i(Z.top,d),p=s(Z.right,p),m=s(Z.bottom,m),b.push({dom:q,left:Z.left,top:Z.top})}});var S=(p*=_)-(c*=_),k=(m*=_)-(d*=_),D=Pr.createCanvas(),O=wg(D,{renderer:r?"svg":"canvas"});if(O.resize({width:S,height:k}),r){var N="";return Ce(b,function(F){N+='<g transform="translate('+(F.left-c)+","+(F.top-d)+')">'+F.dom+"</g>"}),O.painter.getSvgRoot().innerHTML=N,e.connectedBackgroundColor&&O.painter.setBackgroundColor(e.connectedBackgroundColor),O.refreshImmediately(),O.painter.toDataURL()}return e.connectedBackgroundColor&&O.add(new bi({shape:{x:0,y:0,width:S,height:k},style:{fill:e.connectedBackgroundColor}})),Ce(b,function(F){var V=new fl({style:{x:F.left*_-c,y:F.top*_-d,image:F.dom}});O.add(V)}),O.refreshImmediately(),D.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},t.prototype.convertToPixel=function(e,r){return yw(this,"convertToPixel",e,r)},t.prototype.convertFromPixel=function(e,r){return yw(this,"convertFromPixel",e,r)},t.prototype.containPixel=function(e,r){var o;if(!this._disposed)return Ce(cd(this._model,e),function(i,s){s.indexOf("Models")>=0&&Ce(i,function(l){var c=l.coordinateSystem;if(c&&c.containPoint)o=o||!!c.containPoint(r);else if("seriesModels"===s){var d=this._chartsMap[l.__viewId];d&&d.containPoint&&(o=o||d.containPoint(r,l))}},this)},this),!!o},t.prototype.getVisual=function(e,r){var o=cd(this._model,e,{defaultMainType:"series"}),s=o.seriesModel.getData(),l=o.hasOwnProperty("dataIndexInside")?o.dataIndexInside:o.hasOwnProperty("dataIndex")?s.indexOfRawIndex(o.dataIndex):null;return null!=l?fw(s,l,r):Dy(s,r)},t.prototype.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},t.prototype.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]},t.prototype._initEvents=function(){var r,o,i=this;Ce(yC,function(s){var l=function(c){var d,p=i.getModel(),m=c.target;if("globalout"===s?d={}:m&&Ay(m,function(O){var N=So(O);if(N&&null!=N.dataIndex){var F=N.dataModel||p.getSeriesByIndex(N.seriesIndex);return d=F&&F.getDataParams(N.dataIndex,N.dataType)||{},!0}if(N.eventData)return d=Lt({},N.eventData),!0},!0),d){var _=d.componentType,S=d.componentIndex;"markLine"!==_&&"markPoint"!==_&&"markArea"!==_||(_="series",S=d.seriesIndex);var k=_&&null!=S&&p.getComponent(_,S),D=k&&i["series"===k.mainType?"_chartsMap":"_componentsMap"][k.__viewId];d.event=c,d.type=s,i._$eventProcessor.eventInfo={targetEl:m,packedEvent:d,model:k,view:D},i.trigger(s,d)}};l.zrEventfulCallAtLast=!0,i._zr.on(s,l,i)}),Ce(l1,function(s,l){i._messageCenter.on(l,function(c){this.trigger(l,c)},i)}),Ce(["selectchanged"],function(s){i._messageCenter.on(s,function(l){this.trigger(s,l)},i)}),r=this,o=this._api,this._messageCenter.on("selectchanged",function(s){var l=o.getModel();s.isFromClick?(fp("map","selectchanged",r,l,s),fp("pie","selectchanged",r,l,s)):"select"===s.fromAction?(fp("map","selected",r,l,s),fp("pie","selected",r,l,s)):"unselect"===s.fromAction&&(fp("map","unselected",r,l,s),fp("pie","unselected",r,l,s))})},t.prototype.isDisposed=function(){return this._disposed},t.prototype.clear=function(){this._disposed||this.setOption({series:[]},!0)},t.prototype.dispose=function(){if(this._disposed);else{this._disposed=!0,this.getDom()&&e0(this.getDom(),_w,"");var e=this,r=e._api,o=e._model;Ce(e._componentsViews,function(i){i.dispose(o,r)}),Ce(e._chartsViews,function(i){i.dispose(o,r)}),e._zr.dispose(),e._dom=e._model=e._chartsMap=e._componentsMap=e._chartsViews=e._componentsViews=e._scheduler=e._api=e._zr=e._throttledZrFlush=e._theme=e._coordSysMgr=e._messageCenter=null,delete G0[e.id]}},t.prototype.resize=function(e){if(!this[wd])if(this._disposed);else{this._zr.resize(e);var r=this._model;if(this._loadingFX&&this._loadingFX.resize(),r){var o=r.resetOption("media"),i=e&&e.silent;this[Sd]&&(null==i&&(i=this[Sd].silent),o=!0,this[Sd]=null),this[wd]=!0;try{o&&z0(this),Uf.update.call(this,{type:"resize",animation:Lt({duration:0},e&&e.animation)})}catch(s){throw this[wd]=!1,s}this[wd]=!1,V0.call(this,i),H0.call(this,i)}}},t.prototype.showLoading=function(e,r){if(this._disposed);else if(wr(e)&&(r=e,e=""),e=e||"default",this.hideLoading(),Hx[e]){var o=Hx[e](this._api,r),i=this._zr;this._loadingFX=o,i.add(o)}},t.prototype.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},t.prototype.makeActionFromEvent=function(e){var r=Lt({},e);return r.type=l1[e.type],r},t.prototype.dispatchAction=function(e,r){if(this._disposed);else if(wr(r)||(r={silent:!!r}),Vx[e.type]&&this._model)if(this[wd])this._pendingActions.push(e);else{var o=r.silent;u1.call(this,e,o);var i=r.flush;i?this._zr.flush():!1!==i&&zn.browser.weChat&&this._throttledZrFlush(),V0.call(this,o),H0.call(this,o)}},t.prototype.updateLabelLayout=function(){$c.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},t.prototype.appendData=function(e){if(this._disposed);else{var r=e.seriesIndex;this.getModel().getSeriesByIndex(r).appendData(e),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},t.internalField=function(){function e(c){c.clearColorPalette(),c.eachSeries(function(d){d.clearColorPalette()})}function r(c){for(var d=[],p=c.currentStates,m=0;m<p.length;m++){var b=p[m];"emphasis"!==b&&"blur"!==b&&"select"!==b&&d.push(b)}c.selected&&c.states.select&&d.push("select"),2===c.hoverState&&c.states.emphasis?d.push("emphasis"):1===c.hoverState&&c.states.blur&&d.push("blur"),c.useStates(d)}function o(c,d){if(!c.preventAutoZ){var p=c.get("z")||0,m=c.get("zlevel")||0;d.eachRendered(function(b){return i(b,p,m,-1/0),!0})}}function i(c,d,p,m){var b=c.getTextContent(),_=c.getTextGuideLine();if(c.isGroup)for(var S=c.childrenRef(),k=0;k<S.length;k++)m=Math.max(i(S[k],d,p,m),m);else c.z=d,c.zlevel=p,m=Math.max(c.z2,m);if(b&&(b.z=d,b.zlevel=p,isFinite(m)&&(b.z2=m+2)),_){var D=c.textGuideLineConfig;_.z=d,_.zlevel=p,isFinite(m)&&(_.z2=m+(D&&D.showAbove?1:-1))}return m}function s(c,d){d.eachRendered(function(p){if(!$m(p)){var m=p.getTextContent(),b=p.getTextGuideLine();p.stateTransition&&(p.stateTransition=null),m&&m.stateTransition&&(m.stateTransition=null),b&&b.stateTransition&&(b.stateTransition=null),p.hasState()?(p.prevStates=p.currentStates,p.clearStates()):p.prevStates&&(p.prevStates=null)}})}function l(c,d){var p=c.getModel("stateAnimation"),m=c.isAnimationEnabled(),b=p.get("duration"),_=b>0?{duration:b,delay:p.get("delay"),easing:p.get("easing")}:null;d.eachRendered(function(S){if(S.states&&S.states.emphasis){if($m(S))return;if(S instanceof Go&&function(N){var F=ty(N);F.normalFill=N.style.fill,F.normalStroke=N.style.stroke;var V=N.states.select||{};F.selectFill=V.style&&V.style.fill||null,F.selectStroke=V.style&&V.style.stroke||null}(S),S.__dirty){var k=S.prevStates;k&&S.useStates(k)}if(m){S.stateTransition=_;var D=S.getTextContent(),O=S.getTextGuideLine();D&&(D.stateTransition=_),O&&(O.stateTransition=_)}S.__dirty&&r(S)}})}z0=function(c){var d=c._scheduler;d.restorePipelines(c._model),d.prepareStageTasks(),s1(c,!0),s1(c,!1),d.plan()},s1=function(c,d){for(var p=c._model,m=c._scheduler,b=d?c._componentsViews:c._chartsViews,_=d?c._componentsMap:c._chartsMap,S=c._zr,k=c._api,D=0;D<b.length;D++)b[D].__alive=!1;function O(F){var V=F.__requireNewView;F.__requireNewView=!1;var q="_ec_"+F.id+"_"+F.type,Z=!V&&_[q];if(!Z){var Q=Ku(F.type);(Z=new(d?ks.getClass(Q.main,Q.sub):$a.getClass(Q.sub))).init(p,k),_[q]=Z,b.push(Z),S.add(Z.group)}F.__viewId=Z.__id=q,Z.__alive=!0,Z.__model=F,Z.group.__ecComponentInfo={mainType:F.mainType,index:F.componentIndex},!d&&m.prepareView(Z,F,p,k)}for(d?p.eachComponent(function(F,V){"series"!==F&&O(V)}):p.eachSeries(O),D=0;D<b.length;){var N=b[D];N.__alive?D++:(!d&&N.renderTask.dispose(),S.remove(N.group),N.dispose(p,k),b.splice(D,1),_[N.__id]===N&&delete _[N.__id],N.__id=N.group.__ecComponentInfo=null)}},dc=function(c,d,p,m,b){var _=c._model;if(_.setUpdatePayload(p),m){var S={};S[m+"Id"]=p[m+"Id"],S[m+"Index"]=p[m+"Index"],S[m+"Name"]=p[m+"Name"];var k={mainType:m,query:S};b&&(k.subType=b);var D,O=p.excludeSeriesId;null!=O&&(D=Or(),Ce(ci(O),function(F){var V=is(F,null);null!=V&&D.set(V,!0)})),_&&_.eachComponent(k,function(F){if(!D||null==D.get(F.id))if(Bg(p))if(F instanceof Ka)p.type!==en||p.notBlur||F.get(["emphasis","disabled"])||function(Q,re,he){var ge=Q.seriesIndex,ve=Q.getData(re.dataType);if(ve){var _e=vh(ve,re);_e=(Ue(_e)?_e[0]:_e)||0;var Ee=ve.getItemGraphicEl(_e);if(!Ee)for(var ze=ve.count(),Ge=0;!Ee&&Ge<ze;)Ee=ve.getItemGraphicEl(Ge++);if(Ee){var Xe=So(Ee);Eb(ge,Xe.focus,Xe.blurScope,he)}else{var $e=Q.get(["emphasis","focus"]),nt=Q.get(["emphasis","blurScope"]);null!=$e&&Eb(ge,$e,nt,he)}}}(F,p,c._api);else{var V=tx(F.mainType,F.componentIndex,p.name,c._api),Z=V.dispatchers;p.type===en&&V.focusSelf&&!p.notBlur&&iy(F.mainType,F.componentIndex,c._api),Z&&Ce(Z,function(Q){p.type===en?pd(Q):Ah(Q)})}else ff(p)&&F instanceof Ka&&(function(Q,re,he){if(ff(re)){var ge=re.dataType,ve=vh(Q.getData(ge),re);Ue(ve)||(ve=[ve]),Q[re.type===ny?"toggleSelect":re.type===Nm?"select":"unselect"](ve,ge)}}(F,p),z_(F),Jd(c))},c),_&&_.eachComponent(k,function(F){D&&null!=D.get(F.id)||N(c["series"===m?"_chartsMap":"_componentsMap"][F.__viewId])},c)}else Ce([].concat(c._componentsViews).concat(c._chartsViews),N);function N(F){F&&F.__alive&&F[d]&&F[d](F.__model,_,c._api,p)}},Uf={prepareAndUpdate:function(c){z0(this),Uf.update.call(this,c,{optionChanged:null!=c.newOption})},update:function(c,d){var p=this._model,m=this._api,b=this._zr,_=this._coordSysMgr,S=this._scheduler;if(p){p.setUpdatePayload(c),S.restoreData(p,c),S.performSeriesTasks(p),_.create(p,m),S.performDataProcessorTasks(p,c),F0(this,p),_.update(p,m),e(p),S.performVisualTasks(p,c),Fx(this,p,m,c,d);var k=p.get("backgroundColor")||"transparent",D=p.get("darkMode");b.setBackgroundColor(k),null!=D&&"auto"!==D&&b.setDarkMode(D),$c.trigger("afterupdate",p,m)}},updateTransform:function(c){var d=this,p=this._model,m=this._api;if(p){p.setUpdatePayload(c);var b=[];p.eachComponent(function(S,k){if("series"!==S){var D=d.getViewOfComponentModel(k);if(D&&D.__alive)if(D.updateTransform){var O=D.updateTransform(k,p,m,c);O&&O.update&&b.push(D)}else b.push(D)}});var _=Or();p.eachSeries(function(S){var k=d._chartsMap[S.__viewId];if(k.updateTransform){var D=k.updateTransform(S,p,m,c);D&&D.update&&_.set(S.uid,1)}else _.set(S.uid,1)}),e(p),this._scheduler.performVisualTasks(p,c,{setDirty:!0,dirtyMap:_}),pC(this,p,m,c,{},_),$c.trigger("afterupdate",p,m)}},updateView:function(c){var d=this._model;d&&(d.setUpdatePayload(c),$a.markUpdateMethod(c,"updateView"),e(d),this._scheduler.performVisualTasks(d,c,{setDirty:!0}),Fx(this,d,this._api,c,{}),$c.trigger("afterupdate",d,this._api))},updateVisual:function(c){var d=this,p=this._model;p&&(p.setUpdatePayload(c),p.eachSeries(function(m){m.getData().clearAllVisual()}),$a.markUpdateMethod(c,"updateVisual"),e(p),this._scheduler.performVisualTasks(p,c,{visualType:"visual",setDirty:!0}),p.eachComponent(function(m,b){if("series"!==m){var _=d.getViewOfComponentModel(b);_&&_.__alive&&_.updateVisual(b,p,d._api,c)}}),p.eachSeries(function(m){d._chartsMap[m.__viewId].updateVisual(m,p,d._api,c)}),$c.trigger("afterupdate",p,this._api))},updateLayout:function(c){Uf.update.call(this,c)}},yw=function(c,d,p,m){if(c._disposed);else for(var b,_=c._model,S=c._coordSysMgr.getCoordinateSystems(),k=cd(_,p),D=0;D<S.length;D++){var O=S[D];if(O[d]&&null!=(b=O[d](_,k,m)))return b}},F0=function(c,d){var p=c._chartsMap,m=c._scheduler;d.eachSeries(function(b){m.updateStreamModes(b,p[b.__viewId])})},u1=function(c,d){var p=this,m=this.getModel(),b=c.type,_=c.escapeConnect,S=Vx[b],k=S.actionInfo,D=(k.update||"update").split(":"),O=D.pop(),N=null!=D[0]&&Ku(D[0]);this[wd]=!0;var F=[c],V=!1;c.batch&&(V=!0,F=mt(c.batch,function(ve){return(ve=Yn(Lt({},ve),c)).batch=null,ve}));var q,Z=[],Q=ff(c),re=Bg(c);if(re&&Ob(this._api),Ce(F,function(ve){if((q=(q=S.action(ve,p._model,p._api))||Lt({},ve)).type=k.event||q.type,Z.push(q),re){var _e=yh(c),ze=_e.mainTypeSpecified?_e.queryOptionMap.keys()[0]:"series";dc(p,O,ve,ze),Jd(p)}else Q?(dc(p,O,ve,"series"),Jd(p)):N&&dc(p,O,ve,N.main,N.sub)}),"none"!==O&&!re&&!Q&&!N)try{this[Sd]?(z0(this),Uf.update.call(this,c),this[Sd]=null):Uf[O].call(this,c)}catch(ve){throw this[wd]=!1,ve}if(q=V?{type:k.event||b,escapeConnect:_,batch:Z}:Z[0],this[wd]=!1,!d){var he=this._messageCenter;if(he.trigger(q.type,q),Q){var ge={type:"selectchanged",escapeConnect:_,selected:zm(m),isFromClick:c.isFromClick||!1,fromAction:c.type,fromActionPayload:c};he.trigger(ge.type,ge)}}},V0=function(c){for(var d=this._pendingActions;d.length;){var p=d.shift();u1.call(this,p,c)}},H0=function(c){!c&&this.trigger("updated")},Bx=function(c,d){c.on("rendered",function(p){d.trigger("rendered",p),!c.animation.isFinished()||d[Sd]||d._scheduler.unfinished||d._pendingActions.length||d.trigger("finished")})},zx=function(c,d){c.on("mouseover",function(p){var b,_,S,k,D,O,m=Ay(p.target,Lf);m&&(_=p,S=d._api,(O=(D=tx((k=So(b=m)).componentMainType,k.componentIndex,k.componentHighDownName,S)).dispatchers)?(D.focusSelf&&iy(k.componentMainType,k.componentIndex,S),Ce(O,function(F){return Ab(F,_)})):(Eb(k.seriesIndex,k.focus,k.blurScope,S),"self"===k.focus&&iy(k.componentMainType,k.componentIndex,S),Ab(b,_)),Jd(d))}).on("mouseout",function(p){var m=Ay(p.target,Lf);m&&(function(b,_,S){Ob(S);var k=So(b),D=tx(k.componentMainType,k.componentIndex,k.componentHighDownName,S).dispatchers;D?Ce(D,function(O){return oy(O,_)}):oy(b,_)}(m,p,d._api),Jd(d))}).on("click",function(p){var m=Ay(p.target,function(S){return null!=So(S).dataIndex},!0);if(m){var b=m.selected?"unselect":"select",_=So(m);d._api.dispatchAction({type:b,dataType:_.dataType,dataIndexInside:_.dataIndex,seriesIndex:_.seriesIndex,isFromClick:!0})}})},Fx=function(c,d,p,m,b){(function(_){var S=[],k=[],D=!1;if(_.eachComponent(function(V,q){var Z=q.get("zlevel")||0,Q=q.get("z")||0,re=q.getZLevelKey();D=D||!!re,("series"===V?k:S).push({zlevel:Z,z:Q,idx:q.componentIndex,type:V,key:re})}),D){var O,N,F=S.concat(k);jh(F,function(V,q){return V.zlevel===q.zlevel?V.z-q.z:V.zlevel-q.zlevel}),Ce(F,function(V){var q=_.getComponent(V.type,V.idx),Z=V.zlevel,Q=V.key;null!=O&&(Z=Math.max(O,Z)),Q?(Z===O&&Q!==N&&Z++,N=Q):N&&(Z===O&&Z++,N=""),O=Z,q.setZLevel(Z)})}})(d),hC(c,d,p,m,b),Ce(c._chartsViews,function(_){_.__alive=!1}),pC(c,d,p,m,b),Ce(c._chartsViews,function(_){_.__alive||_.remove(d,p)})},hC=function(c,d,p,m,b,_){Ce(_||c._componentsViews,function(S){var k=S.__model;s(0,S),S.render(k,d,p,m),o(k,S),l(k,S)})},pC=function(c,d,p,m,b,_){var S=c._scheduler;b=Lt(b||{},{updatedSeries:d.getSeries()}),$c.trigger("series:beforeupdate",d,p,b);var D,O,V,k=!1;d.eachSeries(function(D){var O=c._chartsMap[D.__viewId];O.__alive=!0;var V,q,N=O.renderTask;S.updatePayload(N,m),s(0,O),_&&_.get(D.uid)&&N.dirty(),N.perform(S.getPerformArgs(N))&&(k=!0),O.group.silent=!!D.get("silent"),V=O,q=D.get("blendMode")||null,V.eachRendered(function(Z){Z.isGroup||(Z.style.blend=q)}),z_(D)}),S.unfinished=k||S.unfinished,$c.trigger("series:layoutlabels",d,p,b),$c.trigger("series:transition",d,p,b),d.eachSeries(function(D){var O=c._chartsMap[D.__viewId];o(D,O),l(D,O)}),O=d,V=0,(D=c)._zr.storage.traverse(function(q){q.isGroup||V++}),V>O.get("hoverLayerThreshold")&&!zn.node&&!zn.worker&&O.eachSeries(function(q){if(!q.preventUsingHoverLayer){var Z=D._chartsMap[q.__viewId];Z.__alive&&Z.eachRendered(function(Q){Q.states.emphasis&&(Q.states.emphasis.hoverLayer=!0)})}}),$c.trigger("series:afterupdate",d,p,b)},Jd=function(c){c[dC]=!0,c.getZr().wakeUp()},YT=function(c){c[dC]&&(c.getZr().storage.traverse(function(d){$m(d)||r(d)}),c[dC]=!1)},sk=function(c){return new(function(d){function p(){return null!==d&&d.apply(this,arguments)||this}return gt(p,d),p.prototype.getCoordinateSystems=function(){return c._coordSysMgr.getCoordinateSystems()},p.prototype.getComponentByElement=function(m){for(;m;){var b=m.__ecComponentInfo;if(null!=b)return c._model.getComponent(b.mainType,b.index);m=m.parent}},p.prototype.enterEmphasis=function(m,b){pd(m,b),Jd(c)},p.prototype.leaveEmphasis=function(m,b){Ah(m,b),Jd(c)},p.prototype.enterBlur=function(m){Ib(m),Jd(c)},p.prototype.leaveBlur=function(m){c0(m),Jd(c)},p.prototype.enterSelect=function(m){f0(m),Jd(c)},p.prototype.leaveSelect=function(m){cf(m),Jd(c)},p.prototype.getModel=function(){return c.getModel()},p.prototype.getViewOfComponentModel=function(m){return c.getViewOfComponentModel(m)},p.prototype.getViewOfSeriesModel=function(m){return c.getViewOfSeriesModel(m)},p}(mf))(c)},gC=function(c){function d(p,m){for(var b=0;b<p.length;b++)p[b][vw]=m}Ce(l1,function(p,m){c._messageCenter.on(m,function(b){if(xw[c.group]&&0!==c[vw]){if(b&&b.escapeConnect)return;var _=c.makeActionFromEvent(b),S=[];Ce(G0,function(k){k!==c&&k.group===c.group&&S.push(k)}),d(S,0),Ce(S,function(k){1!==k[vw]&&k.dispatchAction(_)}),d(S,2)}})})}}(),t}(bo),Ny=vC.prototype;Ny.on=Nx("on"),Ny.off=Nx("off"),Ny.one=function(n,t,e){var r=this;this.on.call(this,n,function o(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];t&&t.apply&&t.apply(this,i),r.off(n,o)},e)};var yC=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"],Vx={},l1={},xv=[],am=[],jf=[],bw={},Hx={},G0={},xw={},Wx=+new Date-0,uk=+new Date-0,_w="_echarts_instance_";function bC(n){xw[n]=!1}var XT=bC;function ww(n){return G0[function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}(n,_w)]}function Sw(n,t){bw[n]=t}function Gx(n){Ir(am,n)<0&&am.push(n)}function c1(n,t){jx(xv,n,t,2e3)}function xC(n){U0("afterinit",n)}function lk(n){U0("afterupdate",n)}function U0(n,t){$c.on(n,t)}function Ac(n,t,e){yr(t)&&(e=t,t="");var r=wr(n)?n.type:[n,n={event:t}][0];n.event=(n.event||r).toLowerCase(),l1[t=n.event]||(Ao(Lx.test(r)&&Lx.test(t)),Vx[r]||(Vx[r]={action:e,actionInfo:n}),l1[t]=r)}function By(n,t){Ms.register(n,t)}function Ux(n,t){jx(jf,n,t,1e3,"layout")}function sm(n,t){jx(jf,n,t,3e3,"visual")}var Cw=[];function jx(n,t,e,r,o){if((yr(t)||wr(t))&&(e=t,t=r),!(Ir(Cw,e)>=0)){Cw.push(e);var i=Xb.wrapStageHandler(e,o);i.__prio=t,i.__raw=e,n.push(i)}}function Lu(n,t){Hx[n]=t}function Mw(n,t,e){var r=lC("registerMap");r&&r(n,t,e)}var _C=function(n){var t=(n=an(n)).type;t||Ri("");var r=t.split(":");2!==r.length&&Ri("");var o=!1;"echarts"===r[0]&&(t=r[1],o=!0),n.__isBuiltIn=o,Eo.set(t,n)};sm(2e3,NT),sm(4500,BT),sm(4500,JM),sm(2e3,oC),sm(4500,cw),sm(7e3,function(n,t){n.eachRawSeries(function(e){if(!n.isSeriesFiltered(e)){var r=e.getData();r.hasItemVisual()&&r.each(function(i){var s=r.getItemVisual(i,"decal");s&&(r.ensureUniqueItemVisual(i,"style").decal=Ls(s,t))});var o=r.getVisual("decal");o&&(r.getVisual("style").decal=Ls(o,t))}})}),Gx(Z_),c1(900,function(n){var t=Or();n.eachSeries(function(e){var r=e.get("stack");if(r){var o=t.get(r)||t.set(r,[]),i=e.getData(),s={stackResultDimension:i.getCalculationInfo("stackResultDimension"),stackedOverDimension:i.getCalculationInfo("stackedOverDimension"),stackedDimension:i.getCalculationInfo("stackedDimension"),stackedByDimension:i.getCalculationInfo("stackedByDimension"),isStackedByIndex:i.getCalculationInfo("isStackedByIndex"),data:i,seriesModel:e};if(!s.stackedDimension||!s.isStackedByIndex&&!s.stackedByDimension)return;o.length&&i.setCalculationInfo("stackedOnSeries",o[o.length-1].seriesModel),o.push(s)}}),t.each(PM)}),Lu("default",function(n,t){Yn(t=t||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var e=new xo,r=new bi({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});e.add(r);var o,i=new Oi({style:{text:t.text,fill:t.textColor,fontSize:t.fontSize,fontWeight:t.fontWeight,fontStyle:t.fontStyle,fontFamily:t.fontFamily},zlevel:t.zlevel,z:10001}),s=new bi({style:{fill:"none"},textContent:i,textConfig:{position:"right",distance:10},zlevel:t.zlevel,z:10001});return e.add(s),t.showSpinner&&((o=new Es({shape:{startAngle:-qb/2,endAngle:-qb/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*qb/2}).start("circularInOut"),o.animateShape(!0).when(1e3,{startAngle:3*qb/2}).delay(300).start("circularInOut"),e.add(o)),e.resize=function(){var l=i.getBoundingRect().width,c=t.showSpinner?t.spinnerRadius:0,d=(n.getWidth()-2*c-(t.showSpinner&&l?10:0)-l)/2-(t.showSpinner&&l?0:5+l/2)+(t.showSpinner?0:l/2)+(l?0:c),p=n.getHeight()/2;t.showSpinner&&o.setShape({cx:d,cy:p}),s.setShape({x:d-c,y:p-c,width:2*c,height:2*c}),r.setShape({x:0,y:0,width:n.getWidth(),height:n.getHeight()})},e.resize(),e}),Ac({type:en,event:en,update:en},Fo),Ac({type:Rg,event:Rg,update:Rg},Fo),Ac({type:Nm,event:Nm,update:Nm},Fo),Ac({type:Bm,event:Bm,update:Bm},Fo),Ac({type:ny,event:ny,update:ny},Fo),Sw("light",ek),Sw("dark",Ru);var kw=[],ZT={registerPreprocessor:Gx,registerProcessor:c1,registerPostInit:xC,registerPostUpdate:lk,registerUpdateLifecycle:U0,registerAction:Ac,registerCoordinateSystem:By,registerLayout:Ux,registerVisual:sm,registerTransform:_C,registerLoading:Lu,registerMap:Mw,registerImpl:function(n,t){B0[n]=t},PRIORITY:fC,ComponentModel:W,ComponentView:ks,SeriesModel:Ka,ChartView:$a,registerComponentModel:function(n){W.registerClass(n)},registerComponentView:function(n){ks.registerClass(n)},registerSeriesModel:function(n){Ka.registerClass(n)},registerChartView:function(n){$a.registerClass(n)},registerSubTypeDefaulter:function(n,t){W.registerSubTypeDefaulter(n,t)},registerPainter:function(n,t){I_(n,t)}};function xi(n){Ue(n)?Ce(n,function(t){xi(t)}):Ir(kw,n)>=0||(kw.push(n),yr(n)&&(n={install:n}),n.install(ZT))}function f1(n){return null==n?0:n.length||1}function Yx(n){return n}var lg=function(){function n(t,e,r,o,i,s){this._old=t,this._new=e,this._oldKeyGetter=r||Yx,this._newKeyGetter=o||Yx,this.context=i,this._diffModeMultiple="multiple"===s}return n.prototype.add=function(t){return this._add=t,this},n.prototype.update=function(t){return this._update=t,this},n.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},n.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},n.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},n.prototype.remove=function(t){return this._remove=t,this},n.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},n.prototype._executeOneToOne=function(){var t=this._old,e=this._new,r={},o=new Array(t.length),i=new Array(e.length);this._initIndexMap(t,null,o,"_oldKeyGetter"),this._initIndexMap(e,r,i,"_newKeyGetter");for(var s=0;s<t.length;s++){var l=o[s],c=r[l],d=f1(c);if(d>1){var p=c.shift();1===c.length&&(r[l]=c[0]),this._update&&this._update(p,s)}else 1===d?(r[l]=null,this._update&&this._update(c,s)):this._remove&&this._remove(s)}this._performRestAdd(i,r)},n.prototype._executeMultiple=function(){var e=this._new,r={},o={},i=[],s=[];this._initIndexMap(this._old,r,i,"_oldKeyGetter"),this._initIndexMap(e,o,s,"_newKeyGetter");for(var l=0;l<i.length;l++){var c=i[l],d=r[c],p=o[c],m=f1(d),b=f1(p);if(m>1&&1===b)this._updateManyToOne&&this._updateManyToOne(p,d),o[c]=null;else if(1===m&&b>1)this._updateOneToMany&&this._updateOneToMany(p,d),o[c]=null;else if(1===m&&1===b)this._update&&this._update(p,d),o[c]=null;else if(m>1&&b>1)this._updateManyToMany&&this._updateManyToMany(p,d),o[c]=null;else if(m>1)for(var _=0;_<m;_++)this._remove&&this._remove(d[_]);else this._remove&&this._remove(d)}this._performRestAdd(s,o)},n.prototype._performRestAdd=function(t,e){for(var r=0;r<t.length;r++){var o=t[r],i=e[o],s=f1(i);if(s>1)for(var l=0;l<s;l++)this._add&&this._add(i[l]);else 1===s&&this._add&&this._add(i);e[o]=null}},n.prototype._initIndexMap=function(t,e,r,o){for(var i=this._diffModeMultiple,s=0;s<t.length;s++){var l="_ec_"+this[o](t[s],s);if(i||(r[s]=l),e){var c=e[l],d=f1(c);0===d?(e[l]=s,i&&r.push(l)):1===d?e[l]=[c,s]:c.push(s)}}},n}(),ck=function(){function n(t,e){this._encode=t,this._schema=e}return n.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},n.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},n}();function wC(n,t){return n.hasOwnProperty(t)||(n[t]=[]),n[t]}function Tw(n){return"category"===n?"ordinal":"time"===n?"time":"float"}var d1=function(n){this.otherDims={},null!=n&&Lt(this,n)},KT=hi(),$T={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Dw=function(){function n(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return n.prototype.isDimensionOmitted=function(){return this._dimOmitted},n.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=fk(this.source)))},n.prototype.getSourceDimensionIndex=function(t){return un(this._dimNameMap.get(t),-1)},n.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},n.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=vx(this.source),r=!dk(t),o="",i=[],s=0,l=0;s<t;s++){var c=void 0,d=void 0,p=void 0,m=this.dimensions[l];if(m&&m.storeDimIndex===s)c=e?m.name:null,d=m.type,p=m.ordinalMeta,l++;else{var b=this.getSourceDimension(s);b&&(c=e?b.name:null,d=b.type)}i.push({property:c,type:d,ordinalMeta:p}),!e||null==c||m&&m.isCalculationCoord||(o+=r?c.replace(/\`/g,"`1").replace(/\$/g,"`2"):c),o+="$",o+=$T[d]||"f",p&&(o+=p.uid),o+="$"}var _=this.source;return{dimensions:i,hash:[_.seriesLayoutBy,_.startIndex,o].join("$$")}},n.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,r=0;e<this._fullDimCount;e++){var o=void 0,i=this.dimensions[r];if(i&&i.storeDimIndex===e)i.isCalculationCoord||(o=i.name),r++;else{var s=this.getSourceDimension(e);s&&(o=s.name)}t.push(o)}return t},n.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},n}();function SC(n){return n instanceof Dw}function h1(n){for(var t=Or(),e=0;e<(n||[]).length;e++){var r=n[e],o=wr(r)?r.name:r;null!=o&&null==t.get(o)&&t.set(o,e)}return t}function fk(n){var t=KT(n);return t.dimNameMap||(t.dimNameMap=h1(n.dimensionsDefine))}function dk(n){return n>30}var CC,MC,qx,Xx,kC,Nh,j0,Qd=wr,um=mt,JT="undefined"==typeof Int32Array?Array:Int32Array,q2=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Aw=["_approximateExtent"],Jc=function(){function n(t,e){var r;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var o=!1;SC(t)?(r=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(o=!0,r=t),r=r||["x","y"];for(var i={},s=[],l={},c=!1,d={},p=0;p<r.length;p++){var m=r[p],b=ir(m)?new d1({name:m}):m instanceof d1?m:new d1(m),_=b.name;b.type=b.type||"float",b.coordDim||(b.coordDim=_,b.coordDimIndex=0);var S=b.otherDims=b.otherDims||{};s.push(_),i[_]=b,null!=d[_]&&(c=!0),b.createInvertedIndices&&(l[_]=[]),0===S.itemName&&(this._nameDimIdx=p),0===S.itemId&&(this._idDimIdx=p),o&&(b.storeDimIndex=p)}if(this.dimensions=s,this._dimInfos=i,this._initGetDimensionInfo(c),this.hostModel=e,this._invertedIndicesMap=l,this._dimOmitted){var k=this._dimIdxToName=Or();Ce(s,function(D){k.set(i[D].storeDimIndex,D)})}}return n.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(null==e)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var r=this._dimIdxToName.get(e);if(null!=r)return r;var o=this._schema.getSourceDimension(e);return o?o.name:void 0},n.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(null!=e)return e;if(null==t)return-1;var r=this._getDimInfo(t);return r?r.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},n.prototype._recognizeDimIndex=function(t){if(gr(t)||null!=t&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},n.prototype._getStoreDimIndex=function(t){return this.getDimensionIndex(t)},n.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},n.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(r){return e.hasOwnProperty(r)?e[r]:void 0}:function(r){return e[r]}},n.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},n.prototype.mapDimension=function(t,e){var r=this._dimSummary;if(null==e)return r.encodeFirstDimNotExtra[t];var o=r.encode[t];return o?o[e]:null},n.prototype.mapDimensionsAll=function(t){return(this._dimSummary.encode[t]||[]).slice()},n.prototype.getStore=function(){return this._store},n.prototype.initData=function(t,e,r){var o,i=this;if(t instanceof qS&&(o=t),!o){var s=this.dimensions,l=LM(t)||nn(t)?new J_(t,s.length):t;o=new qS;var c=um(s,function(d){return{type:i._dimInfos[d].type,property:d}});o.initData(l,c,r)}this._store=o,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,o.count()),this._dimSummary=function(d,p){var m={},b=m.encode={},_=Or(),S=[],k=[],D={};Ce(d.dimensions,function(q){var Z,Q=d.getDimensionInfo(q),re=Q.coordDim;if(re){var he=Q.coordDimIndex;wC(b,re)[he]=q,Q.isExtraCoord||(_.set(re,1),"ordinal"!==(Z=Q.type)&&"time"!==Z&&(S[0]=q),wC(D,re)[he]=d.getDimensionIndex(Q.name)),Q.defaultTooltip&&k.push(q)}we.each(function(ge,ve){var _e=wC(b,ve),Ee=Q.otherDims[ve];null!=Ee&&!1!==Ee&&(_e[Ee]=Q.name)})});var O=[],N={};_.each(function(q,Z){var Q=b[Z];N[Z]=Q[0],O=O.concat(Q)}),m.dataDimsOnCoord=O,m.dataDimIndicesOnCoord=mt(O,function(q){return d.getDimensionInfo(q).storeDimIndex}),m.encodeFirstDimNotExtra=N;var F=b.label;F&&F.length&&(S=F.slice());var V=b.tooltip;return V&&V.length?k=V.slice():k.length||(k=S.slice()),b.defaultedLabel=S,b.defaultedTooltip=k,m.userOutput=new ck(D,p),m}(this,this._schema),this.userOutput=this._dimSummary.userOutput},n.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},n.prototype.appendValues=function(t,e){var r=this._store.appendValues(t,e.length),o=r.start,i=r.end,s=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var l=o;l<i;l++)this._nameList[l]=e[l-o],s&&j0(this,l)},n.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,r=0;r<e.length;r++){var o=this._dimInfos[e[r]];o.ordinalMeta&&t.collectOrdinalMeta(o.storeDimIndex,o.ordinalMeta)}},n.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return null==this._idDimIdx&&t.getSource().sourceFormat!==ut&&!t.fillStorage},n.prototype._doInit=function(t,e){if(!(t>=e)){var r=this._store.getProvider();this._updateOrdinalMeta();var o=this._nameList,i=this._idList;if(r.getSource().sourceFormat===Ie&&!r.pure)for(var s=[],l=t;l<e;l++){var c=r.getItem(l,s);if(!this.hasItemOption&&Np(c)&&(this.hasItemOption=!0),c){var d=c.name;null==o[l]&&null!=d&&(o[l]=is(d,null));var p=c.id;null==i[l]&&null!=p&&(i[l]=is(p,null))}}if(this._shouldMakeIdFromName())for(l=t;l<e;l++)j0(this,l);CC(this)}},n.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},n.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},n.prototype.setCalculationInfo=function(t,e){Qd(t)?Lt(this._calculationInfo,t):this._calculationInfo[t]=e},n.prototype.getName=function(t){var e=this.getRawIndex(t),r=this._nameList[e];return null==r&&null!=this._nameDimIdx&&(r=qx(this,this._nameDimIdx,e)),null==r&&(r=""),r},n.prototype._getCategory=function(t,e){var r=this._store.get(t,e),o=this._store.getOrdinalMeta(t);return o?o.categories[r]:r},n.prototype.getId=function(t){return MC(this,this.getRawIndex(t))},n.prototype.count=function(){return this._store.count()},n.prototype.get=function(t,e){var o=this._dimInfos[t];if(o)return this._store.get(o.storeDimIndex,e)},n.prototype.getByRawIndex=function(t,e){var o=this._dimInfos[t];if(o)return this._store.getByRawIndex(o.storeDimIndex,e)},n.prototype.getIndices=function(){return this._store.getIndices()},n.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},n.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},n.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},n.prototype.getValues=function(t,e){var r=this,o=this._store;return Ue(t)?o.getValues(um(t,function(i){return r._getStoreDimIndex(i)}),e):o.getValues(t)},n.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,r=0,o=e.length;r<o;r++)if(isNaN(this._store.get(e[r],t)))return!1;return!0},n.prototype.indexOfName=function(t){for(var e=0,r=this._store.count();e<r;e++)if(this.getName(e)===t)return e;return-1},n.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},n.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},n.prototype.rawIndexOf=function(t,e){var o=(t&&this._invertedIndicesMap[t])[e];return null==o||isNaN(o)?-1:o},n.prototype.indicesOfNearest=function(t,e,r){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,r)},n.prototype.each=function(t,e,r){yr(t)&&(r=e,e=t,t=[]);var o=r||this,i=um(Xx(t),this._getStoreDimIndex,this);this._store.each(i,o?De(e,o):e)},n.prototype.filterSelf=function(t,e,r){yr(t)&&(r=e,e=t,t=[]);var o=r||this,i=um(Xx(t),this._getStoreDimIndex,this);return this._store=this._store.filter(i,o?De(e,o):e),this},n.prototype.selectRange=function(t){var e=this,r={};return Ce(rr(t),function(o){var i=e._getStoreDimIndex(o);r[i]=t[o]}),this._store=this._store.selectRange(r),this},n.prototype.mapArray=function(t,e,r){yr(t)&&(r=e,e=t,t=[]);var o=[];return this.each(t,function(){o.push(e&&e.apply(this,arguments))},r=r||this),o},n.prototype.map=function(t,e,r,o){var i=r||o||this,s=um(Xx(t),this._getStoreDimIndex,this),l=Nh(this);return l._store=this._store.map(s,i?De(e,i):e),l},n.prototype.modify=function(t,e,r,o){var i=r||o||this,s=um(Xx(t),this._getStoreDimIndex,this);this._store.modify(s,i?De(e,i):e)},n.prototype.downSample=function(t,e,r,o){var i=Nh(this);return i._store=this._store.downSample(this._getStoreDimIndex(t),e,r,o),i},n.prototype.lttbDownSample=function(t,e){var r=Nh(this);return r._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),r},n.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},n.prototype.getItemModel=function(t){var e=this.hostModel,r=this.getRawDataItem(t);return new aa(r,e,e&&e.ecModel)},n.prototype.diff=function(t){var e=this;return new lg(t?t.getStore().getIndices():[],this.getStore().getIndices(),function(r){return MC(t,r)},function(r){return MC(e,r)})},n.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},n.prototype.setVisual=function(t,e){this._visual=this._visual||{},Qd(t)?Lt(this._visual,t):this._visual[t]=e},n.prototype.getItemVisual=function(t,e){var r=this._itemVisuals[t],o=r&&r[e];return null==o?this.getVisual(e):o},n.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},n.prototype.ensureUniqueItemVisual=function(t,e){var r=this._itemVisuals,o=r[t];o||(o=r[t]={});var i=o[e];return null==i&&(Ue(i=this.getVisual(e))?i=i.slice():Qd(i)&&(i=Lt({},i)),o[e]=i),i},n.prototype.setItemVisual=function(t,e,r){var o=this._itemVisuals[t]||{};this._itemVisuals[t]=o,Qd(e)?Lt(o,e):o[e]=r},n.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},n.prototype.setLayout=function(t,e){Qd(t)?Lt(this._layout,t):this._layout[t]=e},n.prototype.getLayout=function(t){return this._layout[t]},n.prototype.getItemLayout=function(t){return this._itemLayouts[t]},n.prototype.setItemLayout=function(t,e,r){this._itemLayouts[t]=r?Lt(this._itemLayouts[t]||{},e):e},n.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},n.prototype.setItemGraphicEl=function(t,e){Lm(this.hostModel&&this.hostModel.seriesIndex,this.dataType,t,e),this._graphicEls[t]=e},n.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},n.prototype.eachItemGraphicEl=function(t,e){Ce(this._graphicEls,function(r,o){r&&t&&t.call(e,r,o)})},n.prototype.cloneShallow=function(t){return t||(t=new n(this._schema?this._schema:um(this.dimensions,this._getDimInfo,this),this.hostModel)),kC(t,this),t._store=this._store,t},n.prototype.wrapMethod=function(t,e){var r=this[t];yr(r)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var o=r.apply(this,arguments);return e.apply(this,[o].concat(zo(arguments)))})},n.internalField=(CC=function(t){var e=t._invertedIndicesMap;Ce(e,function(r,o){var i=t._dimInfos[o],s=i.ordinalMeta,l=t._store;if(s){r=e[o]=new JT(s.categories.length);for(var c=0;c<r.length;c++)r[c]=-1;for(c=0;c<l.count();c++)r[l.get(i.storeDimIndex,c)]=c}})},qx=function(t,e,r){return is(t._getCategory(e,r),null)},MC=function(t,e){var r=t._idList[e];return null==r&&null!=t._idDimIdx&&(r=qx(t,t._idDimIdx,e)),null==r&&(r="e\0\0"+e),r},Xx=function(t){return Ue(t)||(t=null!=t?[t]:[]),t},Nh=function(t){var e=new n(t._schema?t._schema:um(t.dimensions,t._getDimInfo,t),t.hostModel);return kC(e,t),e},kC=function(t,e){Ce(q2.concat(e.__wrappedMethods||[]),function(r){e.hasOwnProperty(r)&&(t[r]=e[r])}),t.__wrappedMethods=e.__wrappedMethods,Ce(Aw,function(r){t[r]=an(e[r])}),t._calculationInfo=Lt({},e._calculationInfo)},void(j0=function(t,e){var r=t._nameList,o=t._idList,i=t._nameDimIdx,s=t._idDimIdx,l=r[e],c=o[e];if(null==l&&null!=i&&(r[e]=l=qx(t,i,e)),null==c&&null!=s&&(o[e]=c=qx(t,s,e)),null==c&&null!=l){var d=t._nameRepeatCount,p=d[l]=(d[l]||0)+1;c=l,p>1&&(c+="__ec__"+p),o[e]=c}})),n}();function _v(n,t){LM(n)||(n=K_(n));var he,_e,e=(t=t||{}).coordDimensions||[],r=t.dimensionsDefine||n.dimensionsDefine||[],o=Or(),i=[],s=(he=e,_e=Math.max(n.dimensionsDetectedCount||1,he.length,r.length,t.dimensionsCount||0),Ce(he,function(Ee){var ze;wr(Ee)&&(ze=Ee.dimsDef)&&(_e=Math.max(_e,ze.length))}),_e),l=t.canOmitUnusedDimensions&&dk(s),c=r===n.dimensionsDefine,d=c?fk(n):h1(r),p=t.encodeDefine;!p&&t.encodeDefaulter&&(p=t.encodeDefaulter(n,s));for(var m=Or(p),b=new jS(s),_=0;_<b.length;_++)b[_]=-1;function S(re){var he=b[re];if(he<0){var ge=r[re],ve=wr(ge)?ge:{name:ge},_e=new d1,Ee=ve.name;return null!=Ee&&null!=d.get(Ee)&&(_e.name=_e.displayName=Ee),null!=ve.type&&(_e.type=ve.type),null!=ve.displayName&&(_e.displayName=ve.displayName),b[re]=i.length,_e.storeDimIndex=re,i.push(_e),_e}return i[he]}if(!l)for(_=0;_<s;_++)S(_);m.each(function(re,he){var ge=ci(re).slice();if(1===ge.length&&!ir(ge[0])&&ge[0]<0)m.set(he,!1);else{var ve=m.set(he,[]);Ce(ge,function(_e,Ee){var ze=ir(_e)?d.get(_e):_e;null!=ze&&ze<s&&(ve[Ee]=ze,D(S(ze),he,Ee))})}});var k=0;function D(re,he,ge){null!=we.get(he)?re.otherDims[he]=ge:(re.coordDim=he,re.coordDimIndex=ge,o.set(he,!0))}Ce(e,function(re){var he,ge,ve,_e;if(ir(re))he=re,_e={};else{he=(_e=re).name;var Ee=_e.ordinalMeta;_e.ordinalMeta=null,(_e=Lt({},_e)).ordinalMeta=Ee,ge=_e.dimsDef,ve=_e.otherDims,_e.name=_e.coordDim=_e.coordDimIndex=_e.dimsDef=_e.otherDims=null}var ze=m.get(he);if(!1!==ze){if(!(ze=ci(ze)).length)for(var Ge=0;Ge<(ge&&ge.length||1);Ge++){for(;k<s&&null!=S(k).coordDim;)k++;k<s&&ze.push(k++)}Ce(ze,function(Xe,$e){var nt=S(Xe);if(c&&null!=_e.type&&(nt.type=_e.type),D(Yn(nt,_e),he,$e),null==nt.name&&ge){var yt=ge[$e];!wr(yt)&&(yt={name:yt}),nt.name=nt.displayName=yt.name,nt.defaultTooltip=yt.defaultTooltip}ve&&Yn(nt.otherDims,ve)})}});var O=t.generateCoord,N=t.generateCoordCount,F=null!=N;N=O?N||1:0;var V=O||"value";function q(re){null==re.name&&(re.name=re.coordDim)}if(l)Ce(i,function(re){q(re)}),i.sort(function(re,he){return re.storeDimIndex-he.storeDimIndex});else for(var Z=0;Z<s;Z++){var Q=S(Z);null==Q.coordDim&&(Q.coordDim=xu(V,o,F),Q.coordDimIndex=0,(!O||N<=0)&&(Q.isExtraCoord=!0),N--),q(Q),null!=Q.type||1!==$t(n,Z)&&(!Q.isExtraCoord||null==Q.otherDims.itemName&&null==Q.otherDims.seriesName)||(Q.type="ordinal")}return function(re){for(var he=Or(),ge=0;ge<re.length;ge++){var ve=re[ge],_e=ve.name,Ee=he.get(_e)||0;Ee>0&&(ve.name=_e+(Ee-1)),Ee++,he.set(_e,Ee)}}(i),new Dw({source:n,dimensions:i,fullDimensionCount:s,dimensionOmitted:l})}function xu(n,t,e){if(e||t.hasKey(n)){for(var r=0;t.hasKey(n+r);)r++;n+=r}return t.set(n,!0),n}var Y0=function(n){this.coordSysDims=[],this.axisMap=Or(),this.categoryAxisMap=Or(),this.coordSysName=n},QT={cartesian2d:function(n,t,e,r){var o=n.getReferringComponents("xAxis",ll).models[0],i=n.getReferringComponents("yAxis",ll).models[0];t.coordSysDims=["x","y"],e.set("x",o),e.set("y",i),_i(o)&&(r.set("x",o),t.firstCategoryDimIndex=0),_i(i)&&(r.set("y",i),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},singleAxis:function(n,t,e,r){var o=n.getReferringComponents("singleAxis",ll).models[0];t.coordSysDims=["single"],e.set("single",o),_i(o)&&(r.set("single",o),t.firstCategoryDimIndex=0)},polar:function(n,t,e,r){var o=n.getReferringComponents("polar",ll).models[0],i=o.findAxisModel("radiusAxis"),s=o.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],e.set("radius",i),e.set("angle",s),_i(i)&&(r.set("radius",i),t.firstCategoryDimIndex=0),_i(s)&&(r.set("angle",s),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(n,t,e,r){t.coordSysDims=["lng","lat"]},parallel:function(n,t,e,r){var o=n.ecModel,i=o.getComponent("parallel",n.get("parallelIndex")),s=t.coordSysDims=i.dimensions.slice();Ce(i.parallelAxisIndex,function(l,c){var d=o.getComponent("parallelAxis",l),p=s[c];e.set(p,d),_i(d)&&(r.set(p,d),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=c))})}};function _i(n){return"category"===n.get("type")}function Iw(n,t,e){var r,o,i,s=(e=e||{}).byIndex,l=e.stackedCoordDimension;SC(t.schema)?(r=(o=t.schema).dimensions,i=t.store):r=t;var c,d,p,m,b=!(!n||!n.get("stack"));if(Ce(r,function(N,F){ir(N)&&(r[F]=N={name:N}),b&&!N.isExtraCoord&&(s||c||!N.ordinalMeta||(c=N),d||"ordinal"===N.type||"time"===N.type||l&&l!==N.coordDim||(d=N))}),!d||s||c||(s=!0),d){p="__\0ecstackresult_"+n.id,m="__\0ecstackedover_"+n.id,c&&(c.createInvertedIndices=!0);var _=d.coordDim,S=d.type,k=0;Ce(r,function(N){N.coordDim===_&&k++});var D={name:p,coordDim:_,coordDimIndex:k,type:S,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length},O={name:m,coordDim:m,coordDimIndex:k+1,type:S,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:r.length+1};o?(i&&(D.storeDimIndex=i.ensureCalculationDimension(m,S),O.storeDimIndex=i.ensureCalculationDimension(p,S)),o.appendCalculationDimension(D),o.appendCalculationDimension(O)):(r.push(D),r.push(O))}return{stackedDimension:d&&d.name,stackedByDimension:c&&c.name,isStackedByIndex:s,stackedOverDimension:m,stackResultDimension:p}}function pi(n,t){return!!t&&t===n.getCalculationInfo("stackedDimension")}function hk(n,t){return pi(n,t)?n.getCalculationInfo("stackResultDimension"):t}function lm(n,t,e){e=e||{};var r,o=t.getSourceManager(),i=!1;n?(i=!0,r=K_(n)):i=(r=o.getSource()).sourceFormat===Ie;var O,N,F,V,s=function(D){var O=D.get("coordinateSystem"),N=new Y0(O),F=QT[O];if(F)return F(D,N,N.axisMap,N.categoryAxisMap),N}(t),l=(O=s,F=t.get("coordinateSystem"),V=Ms.get(F),O&&O.coordSysDims&&(N=mt(O.coordSysDims,function(q){var Z={name:q},Q=O.axisMap.get(q);if(Q){var re=Q.get("type");Z.type=Tw(re)}return Z})),N||(N=V&&(V.getDimensionsInfo?V.getDimensionsInfo():V.dimensions.slice())||["x","y"]),N),c=e.useEncodeDefaulter,d=yr(c)?c:c?dr(xn,l,t):null,p=_v(r,{coordDimensions:l,generateCoord:e.generateCoord,encodeDefine:t.getEncode(),encodeDefaulter:d,canOmitUnusedDimensions:!i}),m=function(D,O,N){var F,V;return N&&Ce(D,function(q,Z){var re=N.categoryAxisMap.get(q.coordDim);re&&(null==F&&(F=Z),q.ordinalMeta=re.getOrdinalMeta(),O&&(q.createInvertedIndices=!0)),null!=q.otherDims.itemName&&(V=!0)}),V||null==F||(D[F].otherDims.itemName=0),F}(p.dimensions,e.createInvertedIndices,s),b=i?null:o.getSharedDataStore(p),_=Iw(t,{schema:p,store:b}),S=new Jc(p,t);S.setCalculationInfo(_);var k=null!=m&&function(D){if(D.sourceFormat===Ie){var O=function(N){for(var F=0;F<N.length&&null==N[F];)F++;return N[F]}(D.data||[]);return!Ue(oc(O))}}(r)?function(D,O,N,F){return F===m?N:this.defaultDimValueGetter(D,O,N,F)}:null;return S.hasItemOption=!1,S.initData(i?r:b,null,k),S}var cm=function(){function n(t){this._setting=t||{},this._extent=[1/0,-1/0]}return n.prototype.getSetting=function(t){return this._setting[t]},n.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},n.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.setExtent=function(t,e){var r=this._extent;isNaN(t)||(r[0]=t),isNaN(e)||(r[1]=e)},n.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},n.prototype.isBlank=function(){return this._isBlank},n.prototype.setBlank=function(t){this._isBlank=t},n}();Zv(cm);var eh=0,q0=function(){function n(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++eh}return n.createByAxisModel=function(t){var e=t.option,r=e.data,o=r&&mt(r,p1);return new n({categories:o,needCollect:!o,deduplication:!1!==e.dedplication})},n.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},n.prototype.parseAndCollect=function(t){var e,r=this._needCollect;if(!ir(t)&&!r)return t;if(r&&!this._deduplication)return this.categories[e=this.categories.length]=t,e;var o=this._getOrCreateMap();return null==(e=o.get(t))&&(r?(this.categories[e=this.categories.length]=t,o.set(t,e)):e=NaN),e},n.prototype._getOrCreateMap=function(){return this._map||(this._map=Or(this.categories))},n}();function p1(n){return wr(n)&&null!=n.value?n.value:n+""}function cg(n){return"interval"===n.type||"log"===n.type}function wv(n){var t=Math.pow(10,xb(n)),e=n/t;return e?2===e?e=3:3===e?e=5:e*=2:e=1,yi(e*t)}function TC(n){return Zu(n)+2}function pk(n,t,e){n[t]=Math.max(Math.min(n[t],e[1]),e[0])}function hc(n,t){return n>=t[0]&&n<=t[1]}function g1(n,t){return t[1]===t[0]?.5:(n-t[0])/(t[1]-t[0])}function zy(n,t){return n*(t[1]-t[0])+t[0]}var X0=function(n){function t(e){var r=n.call(this,e)||this;r.type="ordinal";var o=r.getSetting("ordinalMeta");return o||(o=new q0({})),Ue(o)&&(o=new q0({categories:mt(o,function(i){return wr(i)?i.value:i})})),r._ordinalMeta=o,r._extent=r.getSetting("extent")||[0,o.categories.length-1],r}return gt(t,n),t.prototype.parse=function(e){return null==e?NaN:ir(e)?this._ordinalMeta.getOrdinal(e):Math.round(e)},t.prototype.contain=function(e){return hc(e=this.parse(e),this._extent)&&null!=this._ordinalMeta.categories[e]},t.prototype.normalize=function(e){return g1(e=this._getTickNumber(this.parse(e)),this._extent)},t.prototype.scale=function(e){return e=Math.round(zy(e,this._extent)),this.getRawOrdinalNumber(e)},t.prototype.getTicks=function(){for(var e=[],r=this._extent,o=r[0];o<=r[1];)e.push({value:o}),o++;return e},t.prototype.getMinorTicks=function(e){},t.prototype.setSortInfo=function(e){if(null!=e){for(var r=e.ordinalNumbers,o=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],s=0,l=this._ordinalMeta.categories.length,c=Math.min(l,r.length);s<c;++s){var d=r[s];o[s]=d,i[d]=s}for(var p=0;s<l;++s){for(;null!=i[p];)p++;o.push(p),i[p]=s}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},t.prototype._getTickNumber=function(e){var r=this._ticksByOrdinalNumber;return r&&e>=0&&e<r.length?r[e]:e},t.prototype.getRawOrdinalNumber=function(e){var r=this._ordinalNumbersByTick;return r&&e>=0&&e<r.length?r[e]:e},t.prototype.getLabel=function(e){if(!this.isBlank()){var r=this.getRawOrdinalNumber(e.value),o=this._ordinalMeta.categories[r];return null==o?"":o+""}},t.prototype.count=function(){return this._extent[1]-this._extent[0]+1},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.isInExtentRange=function(e){return e=this._getTickNumber(e),this._extent[0]<=e&&this._extent[1]>=e},t.prototype.getOrdinalMeta=function(){return this._ordinalMeta},t.prototype.calcNiceTicks=function(){},t.prototype.calcNiceExtent=function(){},t.type="ordinal",t}(cm);cm.registerClass(X0);var Sv=yi,Cv=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return gt(t,n),t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return hc(e,this._extent)},t.prototype.normalize=function(e){return g1(e,this._extent)},t.prototype.scale=function(e){return zy(e,this._extent)},t.prototype.setExtent=function(e,r){var o=this._extent;isNaN(e)||(o[0]=parseFloat(e)),isNaN(r)||(o[1]=parseFloat(r))},t.prototype.unionExtent=function(e){var r=this._extent;e[0]<r[0]&&(r[0]=e[0]),e[1]>r[1]&&(r[1]=e[1]),this.setExtent(r[0],r[1])},t.prototype.getInterval=function(){return this._interval},t.prototype.setInterval=function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=TC(e)},t.prototype.getTicks=function(e){var r=this._interval,o=this._extent,i=this._niceExtent,s=this._intervalPrecision,l=[];if(!r)return l;o[0]<i[0]&&l.push(e?{value:Sv(i[0]-r,s)}:{value:o[0]});for(var c=i[0];c<=i[1]&&(l.push({value:c}),(c=Sv(c+r,s))!==l[l.length-1].value);)if(l.length>1e4)return[];var d=l.length?l[l.length-1].value:i[1];return o[1]>d&&l.push(e?{value:Sv(d+r,s)}:{value:o[1]}),l},t.prototype.getMinorTicks=function(e){for(var r=this.getTicks(!0),o=[],i=this.getExtent(),s=1;s<r.length;s++){for(var c=r[s-1],d=0,p=[],m=(r[s].value-c.value)/e;d<e-1;){var b=Sv(c.value+(d+1)*m);b>i[0]&&b<i[1]&&p.push(b),d++}o.push(p)}return o},t.prototype.getLabel=function(e,r){if(null==e)return"";var o=r&&r.precision;return null==o?o=Zu(e.value)||0:"auto"===o&&(o=this._intervalPrecision),cv(Sv(e.value,o,!0))},t.prototype.calcNiceTicks=function(e,r,o){e=e||5;var i=this._extent,s=i[1]-i[0];if(isFinite(s)){s<0&&(s=-s,i.reverse());var l=function Yf(n,t,e,r){var o={},s=o.interval=xs((n[1]-n[0])/t,!0);null!=e&&s<e&&(s=o.interval=e),null!=r&&s>r&&(s=o.interval=r);var c,d,l=o.intervalPrecision=TC(s);return c=o.niceTickExtent=[yi(Math.ceil(n[0]/s)*s,l),yi(Math.floor(n[1]/s)*s,l)],d=n,!isFinite(c[0])&&(c[0]=d[0]),!isFinite(c[1])&&(c[1]=d[1]),pk(c,0,d),pk(c,1,d),c[0]>c[1]&&(c[0]=c[1]),o}(i,e,r,o);this._intervalPrecision=l.intervalPrecision,this._interval=l.interval,this._niceExtent=l.niceTickExtent}},t.prototype.calcNiceExtent=function(e){var r=this._extent;if(r[0]===r[1])if(0!==r[0]){var o=Math.abs(r[0]);e.fixMax||(r[1]+=o/2),r[0]-=o/2}else r[1]=1;isFinite(r[1]-r[0])||(r[0]=0,r[1]=1),this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval);var s=this._interval;e.fixMin||(r[0]=Sv(Math.floor(r[0]/s)*s)),e.fixMax||(r[1]=Sv(Math.ceil(r[1]/s)*s))},t.prototype.setNiceExtent=function(e,r){this._niceExtent=[e,r]},t.type="interval",t}(cm);cm.registerClass(Cv);var Ow="undefined"!=typeof Float32Array,gk=Ow?Float32Array:Array;function fm(n){return Ue(n)?Ow?new Float32Array(n):n:new gk(n)}var Zx="__ec_stack_";function dm(n){return n.get("stack")||Zx+n.seriesIndex}function Cd(n){return n.dim+n.index}function Fy(n,t){var e=[];return t.eachSeriesByType(n,function(r){Mv(r)&&e.push(r)}),e}function Bh(n){var t=function(r){var o={};Ce(r,function(m){var b=m.coordinateSystem.getBaseAxis();if("time"===b.type||"value"===b.type)for(var _=m.getData(),S=b.dim+"_"+b.index,k=_.getDimensionIndex(_.mapDimension(b.dim)),D=_.getStore(),O=0,N=D.count();O<N;++O){var F=D.get(k,O);o[S]?o[S].push(F):o[S]=[F]}});var i={};for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];if(l){l.sort(function(m,b){return m-b});for(var c=null,d=1;d<l.length;++d){var p=l[d]-l[d-1];p>0&&(c=null===c?p:Math.min(c,p))}i[s]=c}}return i}(n),e=[];return Ce(n,function(r){var o,i=r.coordinateSystem.getBaseAxis(),s=i.getExtent();if("category"===i.type)o=i.getBandWidth();else if("value"===i.type||"time"===i.type){var c=t[i.dim+"_"+i.index],d=Math.abs(s[1]-s[0]),p=i.scale.getExtent(),m=Math.abs(p[1]-p[0]);o=c?d/m*c:d}else{var b=r.getData();o=Math.abs(s[1]-s[0])/b.count()}var _=qn(r.get("barWidth"),o),S=qn(r.get("barMaxWidth"),o),k=qn(r.get("barMinWidth")||(fg(r)?.5:1),o),D=r.get("barGap"),O=r.get("barCategoryGap");e.push({bandWidth:o,barWidth:_,barMaxWidth:S,barMinWidth:k,barGap:D,barCategoryGap:O,axisKey:Cd(i),stackId:dm(r)})}),DC(e)}function DC(n){var t={};Ce(n,function(r,o){var i=r.axisKey,s=r.bandWidth,l=t[i]||{bandWidth:s,remainedWidth:s,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},c=l.stacks;t[i]=l;var d=r.stackId;c[d]||l.autoWidthCount++,c[d]=c[d]||{width:0,maxWidth:0};var p=r.barWidth;p&&!c[d].width&&(c[d].width=p,p=Math.min(l.remainedWidth,p),l.remainedWidth-=p);var m=r.barMaxWidth;m&&(c[d].maxWidth=m);var b=r.barMinWidth;b&&(c[d].minWidth=b);var _=r.barGap;null!=_&&(l.gap=_);var S=r.barCategoryGap;null!=S&&(l.categoryGap=S)});var e={};return Ce(t,function(r,o){e[o]={};var i=r.stacks,s=r.bandWidth,l=r.categoryGap;if(null==l){var c=rr(i).length;l=Math.max(35-4*c,15)+"%"}var d=qn(l,s),p=qn(r.gap,1),m=r.remainedWidth,b=r.autoWidthCount,_=(m-d)/(b+(b-1)*p);_=Math.max(_,0),Ce(i,function(O){var N=O.maxWidth,F=O.minWidth;if(O.width)V=O.width,N&&(V=Math.min(V,N)),F&&(V=Math.max(V,F)),O.width=V,m-=V+p*V,b--;else{var V=_;N&&N<V&&(V=Math.min(N,m)),F&&F>V&&(V=F),V!==_&&(O.width=V,m-=V+p*V,b--)}}),_=(m-d)/(b+(b-1)*p),_=Math.max(_,0);var S,k=0;Ce(i,function(O,N){O.width||(O.width=_),S=O,k+=O.width*(1+p)}),S&&(k-=S.width*p);var D=-k/2;Ce(i,function(O,N){e[o][N]=e[o][N]||{bandWidth:s,offset:D,width:O.width},D+=O.width*(1+p)})}),e}function eD(n,t){var e=Fy(n,t),r=Bh(e);Ce(e,function(o){var i=o.getData(),s=o.coordinateSystem.getBaseAxis(),l=dm(o),c=r[Cd(s)][l];i.setLayout({bandWidth:c.bandWidth,offset:c.offset,size:c.width})})}function Z0(n){return{seriesType:n,plan:O0(),reset:function(t){if(Mv(t)){var e=t.getData(),r=t.coordinateSystem,o=r.getBaseAxis(),i=r.getOtherAxis(o),s=e.getDimensionIndex(e.mapDimension(i.dim)),l=e.getDimensionIndex(e.mapDimension(o.dim)),c=t.get("showBackground",!0),d=e.mapDimension(i.dim),p=e.getCalculationInfo("stackResultDimension"),m=pi(e,d)&&!!e.getCalculationInfo("stackedOnSeries"),b=i.isHorizontal(),_=(V=i).toGlobalCoord(V.dataToCoord("log"===V.type?1:0)),S=fg(t),k=t.get("barMinHeight")||0,D=p&&e.getDimensionIndex(p),O=e.getLayout("size"),N=e.getLayout("offset");return{progress:function(F,V){for(var q,Z=F.count,Q=S&&fm(3*Z),re=S&&c&&fm(3*Z),he=S&&fm(Z),ge=r.master.getRect(),ve=b?ge.width:ge.height,_e=V.getStore(),Ee=0;null!=(q=F.next());){var ze=_e.get(m?D:s,q),Ge=_e.get(l,q),Xe=_,$e=void 0;m&&($e=+ze-_e.get(s,q));var nt=void 0,yt=void 0,_t=void 0,Et=void 0;if(b){var hn=r.dataToPoint([ze,Ge]);m&&(Xe=r.dataToPoint([$e,Ge])[0]),nt=Xe,yt=hn[1]+N,_t=hn[0]-Xe,Et=O,Math.abs(_t)<k&&(_t=(_t<0?-1:1)*k)}else hn=r.dataToPoint([Ge,ze]),m&&(Xe=r.dataToPoint([Ge,$e])[1]),nt=hn[0]+N,yt=Xe,_t=O,Et=hn[1]-Xe,Math.abs(Et)<k&&(Et=(Et<=0?-1:1)*k);S?(Q[Ee]=nt,Q[Ee+1]=yt,Q[Ee+2]=b?_t:Et,re&&(re[Ee]=b?ge.x:nt,re[Ee+1]=b?yt:ge.y,re[Ee+2]=ve),he[q]=q):V.setItemLayout(q,{x:nt,y:yt,width:_t,height:Et}),Ee+=3}S&&V.setLayout({largePoints:Q,largeDataIndices:he,largeBackgroundPoints:re,valueAxisHorizontal:b})}}}var V}}}function Mv(n){return n.coordinateSystem&&"cartesian2d"===n.coordinateSystem.type}function fg(n){return n.pipelineContext&&n.pipelineContext.large}var Ew=function(n){function t(e){var r=n.call(this,e)||this;return r.type="time",r}return gt(t,n),t.prototype.getLabel=function(e){var r=this.getSetting("useUTC");return bu(e.value,Xg[function(o){switch(o){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(Eh(this._minLevelUnit))]||Xg.second,r,this.getSetting("locale"))},t.prototype.getFormattedLabel=function(e,r,o){var i=this.getSetting("useUTC");return function(s,l,c,d,p){var m=null;if(ir(c))m=c;else if(yr(c))m=c(s.value,l,{level:s.level});else{var b=Lt({},ng);if(s.level>0)for(var _=0;_<Zg.length;++_)b[Zg[_]]="{primary|"+b[Zg[_]]+"}";var S=c?!1===c.inherit?c:Yn(c,b):b,k=Xd(s.value,p);if(S[k])m=S[k];else if(S.inherit){for(_=sv.indexOf(k)-1;_>=0;--_)if(S[k]){m=S[k];break}m=m||b.none}if(Ue(m)){var D=null==s.level?0:s.level>=0?s.level:m.length+s.level;m=m[D=Math.min(D,m.length-1)]}}return bu(new Date(s.value),m,p,d)}(e,r,o,this.getSetting("locale"),i)},t.prototype.getTicks=function(){var r=this._extent,o=[];if(!this._interval)return o;o.push({value:r[0],level:0});var i=this.getSetting("useUTC"),s=function(l,c,d,p){var b=sv,_=0;function S(Xe,$e,nt,yt,_t,Et,hn){for(var Zn=new Date($e),Rt=$e,Mn=Zn[yt]();Rt<nt&&Rt<=p[1];)hn.push({value:Rt}),Zn[_t](Mn+=Xe),Rt=Zn.getTime();hn.push({value:Rt,notAdd:!0})}function k(Xe,$e,nt){var yt=[],_t=!$e.length;if(!function(Kn,xr,nr,Cr){var zr=Af(xr),qo=Af(nr),li=function(Yv){return Ph(zr,Yv,Cr)===Ph(qo,Yv,Cr)},ss=function(){return li("year")},ji=function(){return ss()&&li("month")},pa=function(){return ji()&&li("day")},za=function(){return pa()&&li("hour")},Bu=function(){return za()&&li("minute")},nl=function(){return Bu()&&li("second")};switch(Kn){case"year":return ss();case"month":return ji();case"day":return pa();case"hour":return za();case"minute":return Bu();case"second":return nl();case"millisecond":return nl()&&li("millisecond")}}(Eh(Xe),p[0],p[1],d)){_t&&($e=[{value:Tv(new Date(p[0]),Xe,d)},{value:p[1]}]);for(var Et=0;Et<$e.length-1;Et++){var hn=$e[Et].value,Zn=$e[Et+1].value;if(hn!==Zn){var Rt=void 0,Mn=void 0,lr=void 0;switch(Xe){case"year":Rt=Math.max(1,Math.round(c/av/365)),Mn=_y(d),lr=RS(d);break;case"half-year":case"quarter":case"month":Rt=kv(c),Mn=uv(d),lr=Hb(d);break;case"week":case"half-week":case"day":Rt=tD(c),Mn=Zd(d),lr=ti(d);break;case"half-day":case"quarter-day":case"hour":Rt=AC(c),Mn=wy(d),lr=px(d);break;case"minute":Rt=nu(c,!0),Mn=Kg(d),lr=Wb(d);break;case"second":Rt=nu(c,!1),Mn=Sy(d),lr=Rh(d);break;case"millisecond":Rt=nD(c),Mn=lv(d),lr=Cy(d)}S(Rt,hn,Zn,Mn,lr,0,yt),"year"===Xe&&nt.length>1&&0===Et&&nt.unshift({value:nt[0].value-Rt})}}for(Et=0;Et<yt.length;Et++)nt.push(yt[Et]);return yt}}for(var D=[],O=[],N=0,F=0,V=0;V<b.length&&_++<1e4;++V){var q=Eh(b[V]);if(PS(b[V])&&(k(b[V],D[D.length-1]||[],O),q!==(b[V+1]?Eh(b[V+1]):null))){if(O.length){F=N,O.sort(function(Xe,$e){return Xe.value-$e.value});for(var Z=[],Q=0;Q<O.length;++Q){var re=O[Q].value;0!==Q&&O[Q-1].value===re||(Z.push(O[Q]),re>=p[0]&&re<=p[1]&&N++)}var he=(p[1]-p[0])/c;if(N>1.5*he&&F>he/1.5||(D.push(Z),N>he||l===b[V]))break}O=[]}}var ge=yo(mt(D,function(Xe){return yo(Xe,function($e){return $e.value>=p[0]&&$e.value<=p[1]&&!$e.notAdd})}),function(Xe){return Xe.length>0}),ve=[],_e=ge.length-1;for(V=0;V<ge.length;++V)for(var Ee=ge[V],ze=0;ze<Ee.length;++ze)ve.push({value:Ee[ze].value,level:_e-V});ve.sort(function(Xe,$e){return Xe.value-$e.value});var Ge=[];for(V=0;V<ve.length;++V)0!==V&&ve[V].value===ve[V-1].value||Ge.push(ve[V]);return Ge}(this._minLevelUnit,this._approxInterval,i,r);return(o=o.concat(s)).push({value:r[1],level:0}),o},t.prototype.calcNiceExtent=function(e){var r=this._extent;if(r[0]===r[1]&&(r[0]-=av,r[1]+=av),r[1]===-1/0&&r[0]===1/0){var o=new Date;r[1]=+new Date(o.getFullYear(),o.getMonth(),o.getDate()),r[0]=r[1]-av}this.calcNiceTicks(e.splitNumber,e.minInterval,e.maxInterval)},t.prototype.calcNiceTicks=function(e,r,o){var i=this._extent;this._approxInterval=(i[1]-i[0])/(e=e||10),null!=r&&this._approxInterval<r&&(this._approxInterval=r),null!=o&&this._approxInterval>o&&(this._approxInterval=o);var l=Kx.length,c=Math.min(function(d,p,m,b){for(;m<b;){var _=m+b>>>1;d[_][1]<p?m=_+1:b=_}return m}(Kx,this._approxInterval,0,l),l-1);this._interval=Kx[c][1],this._minLevelUnit=Kx[Math.max(c-1,0)][0]},t.prototype.parse=function(e){return gr(e)?e:+Af(e)},t.prototype.contain=function(e){return hc(this.parse(e),this._extent)},t.prototype.normalize=function(e){return g1(this.parse(e),this._extent)},t.prototype.scale=function(e){return zy(e,this._extent)},t.type="time",t}(Cv),Kx=[["second",1e3],["minute",6e4],["hour",36e5],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",xy/2],["year",xy]];function tD(n,t){return(n/=av)>16?16:n>7.5?7:n>3.5?4:n>1.5?2:1}function kv(n){return(n/=2592e6)>6?6:n>3?3:n>2?2:1}function AC(n){return(n/=36e5)>12?12:n>6?6:n>3.5?4:n>2?2:1}function nu(n,t){return(n/=t?6e4:1e3)>30?30:n>20?20:n>15?15:n>10?10:n>5?5:n>2?2:1}function nD(n){return xs(n,!0)}function Tv(n,t,e){var r=new Date(n);switch(Eh(t)){case"year":case"month":r[Hb(e)](0);case"day":r[ti(e)](1);case"hour":r[px(e)](0);case"minute":r[Wb(e)](0);case"second":r[Rh(e)](0),r[Cy(e)](0)}return r.getTime()}cm.registerClass(Ew);var Pw=cm.prototype,K0=Cv.prototype,m1=yi,mk=Math.floor,$x=Math.ceil,Jx=Math.pow,zh=Math.log,hm=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new Cv,e._interval=0,e}return gt(t,n),t.prototype.getTicks=function(e){var o=this._extent,i=this._originalScale.getExtent();return mt(K0.getTicks.call(this,e),function(s){var l=s.value,c=yi(Jx(this.base,l));return c=l===o[0]&&this._fixMin?Dv(c,i[0]):c,{value:c=l===o[1]&&this._fixMax?Dv(c,i[1]):c}},this)},t.prototype.setExtent=function(e,r){var o=zh(this.base);e=zh(Math.max(0,e))/o,r=zh(Math.max(0,r))/o,K0.setExtent.call(this,e,r)},t.prototype.getExtent=function(){var e=this.base,r=Pw.getExtent.call(this);r[0]=Jx(e,r[0]),r[1]=Jx(e,r[1]);var o=this._originalScale.getExtent();return this._fixMin&&(r[0]=Dv(r[0],o[0])),this._fixMax&&(r[1]=Dv(r[1],o[1])),r},t.prototype.unionExtent=function(e){this._originalScale.unionExtent(e);var r=this.base;e[0]=zh(e[0])/zh(r),e[1]=zh(e[1])/zh(r),Pw.unionExtent.call(this,e)},t.prototype.unionExtentFromData=function(e,r){this.unionExtent(e.getApproximateExtent(r))},t.prototype.calcNiceTicks=function(e){e=e||10;var r=this._extent,o=r[1]-r[0];if(!(o===1/0||o<=0)){var i=Xh(o);for(e/o*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var s=[yi($x(r[0]/i)*i),yi(mk(r[1]/i)*i)];this._interval=i,this._niceExtent=s}},t.prototype.calcNiceExtent=function(e){K0.calcNiceExtent.call(this,e),this._fixMin=e.fixMin,this._fixMax=e.fixMax},t.prototype.parse=function(e){return e},t.prototype.contain=function(e){return hc(e=zh(e)/zh(this.base),this._extent)},t.prototype.normalize=function(e){return g1(e=zh(e)/zh(this.base),this._extent)},t.prototype.scale=function(e){return e=zy(e,this._extent),Jx(this.base,e)},t.type="log",t}(cm),Rw=hm.prototype;function Dv(n,t){return m1(n,Zu(t))}Rw.getMinorTicks=K0.getMinorTicks,Rw.getLabel=K0.getLabel,cm.registerClass(hm);var Av=function(){function n(t,e,r){this._prepareParams(t,e,r)}return n.prototype._prepareParams=function(t,e,r){r[1]<r[0]&&(r=[NaN,NaN]),this._dataMin=r[0],this._dataMax=r[1];var o=this._isOrdinal="ordinal"===t.type;this._needCrossZero="interval"===t.type&&e.getNeedCrossZero&&e.getNeedCrossZero();var i=this._modelMinRaw=e.get("min",!0);yr(i)?this._modelMinNum=Iv(t,i({min:r[0],max:r[1]})):"dataMin"!==i&&(this._modelMinNum=Iv(t,i));var s=this._modelMaxRaw=e.get("max",!0);if(yr(s)?this._modelMaxNum=Iv(t,s({min:r[0],max:r[1]})):"dataMax"!==s&&(this._modelMaxNum=Iv(t,s)),o)this._axisDataLen=e.getCategories().length;else{var l=e.get("boundaryGap"),c=Ue(l)?l:[l||0,l||0];this._boundaryGapInner="boolean"==typeof c[0]||"boolean"==typeof c[1]?[0,0]:[va(c[0],1),va(c[1],1)]}},n.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,r=this._dataMax,o=this._axisDataLen,i=this._boundaryGapInner,s=t?null:r-e||Math.abs(e),l="dataMin"===this._modelMinRaw?e:this._modelMinNum,c="dataMax"===this._modelMaxRaw?r:this._modelMaxNum,d=null!=l,p=null!=c;null==l&&(l=t?o?0:NaN:e-i[0]*s),null==c&&(c=t?o?o-1:NaN:r+i[1]*s),(null==l||!isFinite(l))&&(l=NaN),(null==c||!isFinite(c))&&(c=NaN);var m=wn(l)||wn(c)||t&&!o;this._needCrossZero&&(l>0&&c>0&&!d&&(l=0),l<0&&c<0&&!p&&(c=0));var b=this._determinedMin,_=this._determinedMax;return null!=b&&(l=b,d=!0),null!=_&&(c=_,p=!0),{min:l,max:c,minFixed:d,maxFixed:p,isBlank:m}},n.prototype.modifyDataMinMax=function(t,e){this[Nw[t]]=e},n.prototype.setDeterminedMinMax=function(t,e){this[Lw[t]]=e},n.prototype.freeze=function(){this.frozen=!0},n}(),Lw={min:"_determinedMin",max:"_determinedMax"},Nw={min:"_dataMin",max:"_dataMax"};function pm(n,t,e){var r=n.rawExtentInfo;return r||(r=new Av(n,t,e),n.rawExtentInfo=r,r)}function Iv(n,t){return null==t?null:wn(t)?NaN:n.parse(t)}function Bw(n,t){var e=n.type,r=pm(n,t,n.getExtent()).calculate();n.setBlank(r.isBlank);var o=r.min,i=r.max,s=t.ecModel;if(s&&"time"===e){var l=Fy("bar",s),c=!1;if(Ce(l,function(m){c=c||m.getBaseAxis()===t.axis}),c){var d=Bh(l),p=function(m,b,_,S){var k=_.axis.getExtent(),D=k[1]-k[0],O=function(Q,re,he){if(Q&&re)return Q[Cd(re)]}(S,_.axis);if(void 0===O)return{min:m,max:b};var N=1/0;Ce(O,function(Q){N=Math.min(Q.offset,N)});var F=-1/0;Ce(O,function(Q){F=Math.max(Q.offset+Q.width,F)}),N=Math.abs(N),F=Math.abs(F);var V=N+F,q=b-m,Z=q/(1-(N+F)/D)-q;return{min:m-=Z*(N/V),max:b+=Z*(F/V)}}(o,i,t,d);o=p.min,i=p.max}}return{extent:[o,i],fixMin:r.minFixed,fixMax:r.maxFixed}}function dp(n,t){var e=t,r=Bw(n,e),o=r.extent,i=e.get("splitNumber");n instanceof hm&&(n.base=e.get("logBase"));var s=n.type,l=e.get("interval"),c="interval"===s||"time"===s;n.setExtent(o[0],o[1]),n.calcNiceExtent({splitNumber:i,fixMin:r.fixMin,fixMax:r.fixMax,minInterval:c?e.get("minInterval"):null,maxInterval:c?e.get("maxInterval"):null}),null!=l&&n.setInterval&&n.setInterval(l)}function $0(n,t){if(t=t||n.get("type"))switch(t){case"category":return new X0({ordinalMeta:n.getOrdinalMeta?n.getOrdinalMeta():n.getCategories(),extent:[1/0,-1/0]});case"time":return new Ew({locale:n.ecModel.getLocaleModel(),useUTC:n.ecModel.get("useUTC")});default:return new(cm.getClass(t)||Cv)}}function Ov(n){var t,e,i,r=n.getLabelModel().get("formatter"),o="category"===n.type?n.scale.getExtent()[0]:null;return"time"===n.scale.type?(e=r,function(i,s){return n.scale.getFormattedLabel(i,s,e)}):ir(r)?(i=r,function(s){var l=n.scale.getLabel(s);return i.replace("{value}",null!=l?l:"")}):yr(r)?(t=r,function(i,s){return null!=o&&(s=i.value-o),t(v1(n,i),s,null!=i.level?{level:i.level}:null)}):function(i){return n.scale.getLabel(i)}}function v1(n,t){return"category"===n.type?n.scale.getLabel(t):t.value}function vk(n,t){var e=t*Math.PI/180,r=n.width,o=n.height,i=r*Math.abs(Math.cos(e))+Math.abs(o*Math.sin(e)),s=r*Math.abs(Math.sin(e))+Math.abs(o*Math.cos(e));return new Io(n.x,n.y,i,s)}function zw(n){var t=n.get("interval");return null==t?"auto":t}function J0(n){return"category"===n.type&&0===zw(n.getLabelModel())}function Qx(n,t){var e={};return Ce(n.mapDimensionsAll(t),function(r){e[hk(n,r)]=!0}),rr(e)}var Q0=function(){function n(){}return n.prototype.getNeedCrossZero=function(){return!this.option.scale},n.prototype.getCoordSysModel=function(){},n}(),Fw=Object.freeze({__proto__:null,createList:function(n){return lm(null,n)},getLayoutRect:tl,dataStack:{isDimensionStacked:pi,enableDataStack:Iw,getStackedDimension:hk},createScale:function(n,t){var e=t;t instanceof aa||(e=new aa(t));var r=$0(e);return r.setExtent(n[0],n[1]),dp(r,e),r},mixinAxisModelCommonMethods:function(n){na(n,Q0)},getECData:So,createTextStyle:function(n,t){return Vi(n,null,null,"normal"!==(t=t||{}).state)},createDimensions:function(n,t){return _v(n,t).dimensions},createSymbol:Dl,enableHoverEmphasis:gd});function Vw(n,t){return Math.abs(n-t)<1e-8}function eb(n,t,e){var r=0,o=n[0];if(!o)return!1;for(var i=1;i<n.length;i++){var s=n[i];r+=Mh(o[0],o[1],s[0],s[1],t,e),o=s}var l=n[0];return Vw(o[0],l[0])&&Vw(o[1],l[1])||(r+=Mh(o[0],o[1],l[0],l[1],t,e)),0!==r}var bk=[];function IC(n,t){for(var e=0;e<n.length;e++)gn(n[e],n[e],t)}function gm(n,t,e,r){for(var o=0;o<n.length;o++){var i=n[o];r&&(i=r.project(i)),i&&isFinite(i[0])&&isFinite(i[1])&&(Dt(t,t,i),ro(e,e,i))}}var Ev=function(){function n(t){this.name=t}return n.prototype.setCenter=function(t){this._center=t},n.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},n}(),Fh=function(n,t){this.type="polygon",this.exterior=n,this.interiors=t},Hw=function(n){this.type="linestring",this.points=n},OC=function(n){function t(e,r,o){var i=n.call(this,e)||this;return i.type="geoJSON",i.geometries=r,i._center=o&&[o[0],o[1]],i}return gt(t,n),t.prototype.calcCenter=function(){for(var e,r=this.geometries,o=0,i=0;i<r.length;i++){var s=r[i],l=s.exterior,c=l&&l.length;c>o&&(e=s,o=c)}if(e)return function(p){for(var m=0,b=0,_=0,S=p.length,k=p[S-1][0],D=p[S-1][1],O=0;O<S;O++){var N=p[O][0],F=p[O][1],V=k*F-N*D;m+=V,b+=(k+N)*V,_+=(D+F)*V,k=N,D=F}return m?[b/m/3,_/m/3,m]:[p[0][0]||0,p[0][1]||0]}(e.exterior);var d=this.getBoundingRect();return[d.x+d.width/2,d.y+d.height/2]},t.prototype.getBoundingRect=function(e){var r=this._rect;if(r&&!e)return r;var o=[1/0,1/0],i=[-1/0,-1/0];return Ce(this.geometries,function(s){"polygon"===s.type?gm(s.exterior,o,i,e):Ce(s.points,function(l){gm(l,o,i,e)})}),isFinite(o[0])&&isFinite(o[1])&&isFinite(i[0])&&isFinite(i[1])||(o[0]=o[1]=i[0]=i[1]=0),r=new Io(o[0],o[1],i[0]-o[0],i[1]-o[1]),e||(this._rect=r),r},t.prototype.contain=function(e){var r=this.getBoundingRect(),o=this.geometries;if(!r.contain(e[0],e[1]))return!1;e:for(var i=0,s=o.length;i<s;i++){var l=o[i];if("polygon"===l.type){var d=l.interiors;if(eb(l.exterior,e[0],e[1])){for(var p=0;p<(d?d.length:0);p++)if(eb(d[p],e[0],e[1]))continue e;return!0}}}return!1},t.prototype.transformTo=function(e,r,o,i){var s=this.getBoundingRect(),l=s.width/s.height;o?i||(i=o/l):o=l*i;for(var c=new Io(e,r,o,i),d=s.calculateTransform(c),p=this.geometries,m=0;m<p.length;m++){var b=p[m];"polygon"===b.type?(IC(b.exterior,d),Ce(b.interiors,function(_){IC(_,d)})):Ce(b.points,function(_){IC(_,d)})}(s=this._rect).copy(c),this._center=[s.x+s.width/2,s.y+s.height/2]},t.prototype.cloneShallow=function(e){null==e&&(e=this.name);var r=new t(e,this.geometries,this._center);return r._rect=this._rect,r.transformTo=null,r},t}(Ev),xk=function(n){function t(e,r){var o=n.call(this,e)||this;return o.type="geoSVG",o._elOnlyForCalculate=r,o}return gt(t,n),t.prototype.calcCenter=function(){for(var e=this._elOnlyForCalculate,r=e.getBoundingRect(),o=[r.x+r.width/2,r.y+r.height/2],i=bg(bk),s=e;s&&!s.isGeoSVGGraphicRoot;)Fr(i,s.getLocalTransform(),i),s=s.parent;return It(i,i),gn(o,o,i),o},t}(Ev);function EC(n,t,e){for(var r=0;r<n.length;r++)n[r]=_k(n[r],t[r],e)}function _k(n,t,e){for(var r=[],o=t[0],i=t[1],s=0;s<n.length;s+=2){var l=n.charCodeAt(s)-64,c=n.charCodeAt(s+1)-64;l=l>>1^-(1&l),c=c>>1^-(1&c),o=l+=o,i=c+=i,r.push([l/e,c/e])}return r}function hp(n,t){return mt(yo((n=function(e){if(!e.UTF8Encoding)return e;var r=e,o=r.UTF8Scale;return null==o&&(o=1024),Ce(r.features,function(i){var s=i.geometry,l=s.encodeOffsets,c=s.coordinates;if(l)switch(s.type){case"LineString":s.coordinates=_k(c,l,o);break;case"Polygon":case"MultiLineString":EC(c,l,o);break;case"MultiPolygon":Ce(c,function(d,p){return EC(d,l[p],o)})}}),r.UTF8Encoding=!1,r}(n)).features,function(e){return e.geometry&&e.properties&&e.geometry.coordinates.length>0}),function(e){var r=e.properties,o=e.geometry,i=[];switch(o.type){case"Polygon":var s=o.coordinates;i.push(new Fh(s[0],s.slice(1)));break;case"MultiPolygon":Ce(o.coordinates,function(c){c[0]&&i.push(new Fh(c[0],c.slice(1)))});break;case"LineString":i.push(new Hw([o.coordinates]));break;case"MultiLineString":i.push(new Hw(o.coordinates))}var l=new OC(r[t||"name"],i,r.cp);return l.properties=r,l})}var gi=Object.freeze({__proto__:null,linearMap:fa,round:yi,asc:Ua,getPrecision:Zu,getPrecisionSafe:ud,getPixelPrecision:Vc,getPercentWithPrecision:function(n,t,e){return n[t]&&rc(n,e)[t]||0},MAX_SAFE_INTEGER:ld,remRadian:gu,isRadianAroundZero:Rp,parseDate:Af,quantity:Xh,quantityExponent:xb,nice:xs,quantile:ul,reformIntervals:Hc,isNumeric:Ca,numericToNumber:Oa}),y1=Object.freeze({__proto__:null,parse:Af,format:bu}),Ww=Object.freeze({__proto__:null,extendShape:Ul,extendPath:hy,makePath:ip,makeImage:zf,mergePath:fc,resizePath:y0,createIcon:yd,updateProps:mo,initProps:as,getTransform:jo,clipPointsByRect:Fb,clipRectByRect:py,registerShape:hf,getShapeClass:v0,Group:xo,Image:fl,Text:Oi,Circle:Bf,Ellipse:Qs,Sector:Cc,Ring:rp,Polygon:eu,Polyline:Qu,Rect:bi,Line:Pu,BezierCurve:cc,Arc:Es,IncrementalDisplayable:p0,CompoundPath:op,LinearGradient:Kp,RadialGradient:h0,BoundingRect:Io}),wk=Object.freeze({__proto__:null,addCommas:cv,toCamelCase:Vr,normalizeCssArray:$g,encodeHTML:Ha,formatTpl:pl,getTooltipMarker:fv,formatTime:function(n,t,e){"week"!==n&&"month"!==n&&"quarter"!==n&&"half-year"!==n&&"year"!==n||(n="MM-dd\nyyyy");var r=Af(t),o=e?"getUTC":"get",i=r[o+"FullYear"](),s=r[o+"Month"]()+1,l=r[o+"Date"](),c=r[o+"Hours"](),d=r[o+"Minutes"](),p=r[o+"Seconds"](),m=r[o+"Milliseconds"]();return n.replace("MM",Tc(s,2)).replace("M",s).replace("yyyy",i).replace("yy",Tc(i%100+"",2)).replace("dd",Tc(l,2)).replace("d",l).replace("hh",Tc(c,2)).replace("h",c).replace("mm",Tc(d,2)).replace("m",d).replace("ss",Tc(p,2)).replace("s",p).replace("SSS",Tc(m,3))},capitalFirst:function(n){return n&&n.charAt(0).toUpperCase()+n.substr(1)},truncateText:Jh,getTextRect:function(n,t,e,r,o,i,s,l){return new Oi({style:{text:n,font:t,align:e,verticalAlign:r,padding:o,rich:i,overflow:s?"truncate":null,lineHeight:l}}).getBoundingRect()}}),Sk=Object.freeze({__proto__:null,map:mt,each:Ce,indexOf:Ir,inherits:Cu,reduce:Pn,filter:yo,bind:De,curry:dr,isArray:Ue,isString:ir,isObject:wr,isFunction:yr,extend:Lt,defaults:Yn,clone:an,merge:ln}),b1=hi();function e_(n,t){var r,l,c,o=PC(n,"labels"),i=zw(t);return RC(o,i)||Gw(o,i,{labels:yr(i)?tb(n,i):t_(n,r="auto"===i?null!=(c=b1(l=n).autoInterval)?c:b1(l).autoInterval=l.calculateCategoryInterval():i),labelCategoryInterval:r})}function PC(n,t){return b1(n)[t]||(b1(n)[t]=[])}function RC(n,t){for(var e=0;e<n.length;e++)if(n[e].key===t)return n[e].value}function Gw(n,t,e){return n.push({key:t,value:e}),e}function t_(n,t,e){var r=Ov(n),o=n.scale,i=o.getExtent(),s=n.getLabelModel(),l=[],c=Math.max((t||0)+1,1),d=i[0],p=o.count();0!==d&&c>1&&p/c>2&&(d=Math.round(Math.ceil(d/c)*c));var m=J0(n),b=s.get("showMinLabel")||m,_=s.get("showMaxLabel")||m;b&&d!==i[0]&&k(i[0]);for(var S=d;S<=i[1];S+=c)k(S);function k(D){var O={value:D};l.push(e?D:{formattedLabel:r(O),rawLabel:o.getLabel(O),tickValue:D})}return _&&S-c!==i[1]&&k(i[1]),l}function tb(n,t,e){var r=n.scale,o=Ov(n),i=[];return Ce(r.getTicks(),function(s){var l=r.getLabel(s),c=s.value;t(s.value,l)&&i.push(e?c:{formattedLabel:o(s),rawLabel:l,tickValue:c})}),i}var Uw=[0,1],th=function(){function n(t,e,r){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=r||[0,0]}return n.prototype.contain=function(t){var e=this._extent,r=Math.min(e[0],e[1]),o=Math.max(e[0],e[1]);return t>=r&&t<=o},n.prototype.containData=function(t){return this.scale.contain(t)},n.prototype.getExtent=function(){return this._extent.slice()},n.prototype.getPixelPrecision=function(t){return Vc(t||this.scale.getExtent(),this._extent)},n.prototype.setExtent=function(t,e){var r=this._extent;r[0]=t,r[1]=e},n.prototype.dataToCoord=function(t,e){var r=this._extent,o=this.scale;return t=o.normalize(t),this.onBand&&"ordinal"===o.type&&n_(r=r.slice(),o.count()),fa(t,Uw,r,e)},n.prototype.coordToData=function(t,e){var r=this._extent,o=this.scale;this.onBand&&"ordinal"===o.type&&n_(r=r.slice(),o.count());var i=fa(t,r,Uw,e);return this.scale.scale(i)},n.prototype.pointToData=function(t,e){},n.prototype.getTicksCoords=function(t){var e=(t=t||{}).tickModel||this.getTickModel(),r=mt(function rD(n,t){return"category"===n.type?function(e,r){var o,i,s=PC(e,"ticks"),l=zw(r),c=RC(s,l);if(c)return c;if(r.get("show")&&!e.scale.isBlank()||(o=[]),yr(l))o=tb(e,l,!0);else if("auto"===l){var d=e_(e,e.getLabelModel());i=d.labelCategoryInterval,o=mt(d.labels,function(p){return p.tickValue})}else o=t_(e,i=l,!0);return Gw(s,l,{ticks:o,tickCategoryInterval:i})}(n,t):{ticks:mt(n.scale.getTicks(),function(e){return e.value})}}(this,e).ticks,function(o){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(o):o),tickValue:o}},this);return function(o,i,s,l){var c=i.length;if(o.onBand&&!s&&c){var d,p,m=o.getExtent();if(1===c)i[0].coord=m[0],d=i[1]={coord:m[0]};else{var _=(i[c-1].coord-i[0].coord)/(i[c-1].tickValue-i[0].tickValue);Ce(i,function(D){D.coord-=_/2}),p=1+o.scale.getExtent()[1]-i[c-1].tickValue,i.push(d={coord:i[c-1].coord+_*p})}var S=m[0]>m[1];k(i[0].coord,m[0])&&(l?i[0].coord=m[0]:i.shift()),l&&k(m[0],i[0].coord)&&i.unshift({coord:m[0]}),k(m[1],d.coord)&&(l?d.coord=m[1]:i.pop()),l&&k(d.coord,m[1])&&i.push({coord:m[1]})}function k(D,O){return D=yi(D),O=yi(O),S?D>O:D<O}}(this,r,e.get("alignWithLabel"),t.clamp),r},n.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return t>0&&t<100||(t=5),mt(this.scale.getMinorTicks(t),function(e){return mt(e,function(r){return{coord:this.dataToCoord(r),tickValue:r}},this)},this)},n.prototype.getViewLabels=function(){return function Ck(n){return"category"===n.type?function(t){var e=t.getLabelModel(),r=e_(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:r.labelCategoryInterval}:r}(n):function(t){var e=t.scale.getTicks(),r=Ov(t);return{labels:mt(e,function(o,i){return{level:o.level,formattedLabel:r(o,i),rawLabel:t.scale.getLabel(o),tickValue:o.value}})}}(n)}(this).labels},n.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},n.prototype.getTickModel=function(){return this.model.getModel("axisTick")},n.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),r=e[1]-e[0]+(this.onBand?1:0);0===r&&(r=1);var o=Math.abs(t[1]-t[0]);return Math.abs(o)/r},n.prototype.calculateCategoryInterval=function(){return function(t){var he,ge,e=(ge=(he=t).getLabelModel(),{axisRotate:he.getRotate?he.getRotate():he.isHorizontal&&!he.isHorizontal()?90:0,labelRotate:ge.get("rotate")||0,font:ge.getFont()}),r=Ov(t),o=(e.axisRotate-e.labelRotate)/180*Math.PI,i=t.scale,s=i.getExtent(),l=i.count();if(s[1]-s[0]<1)return 0;var c=1;l>40&&(c=Math.max(1,Math.floor(l/40)));for(var d=s[0],p=t.dataToCoord(d+1)-t.dataToCoord(d),m=Math.abs(p*Math.cos(o)),b=Math.abs(p*Math.sin(o)),_=0,S=0;d<=s[1];d+=c){var D,O=ua(r({value:d}),e.font,"center","top");D=1.3*O.height,_=Math.max(_,1.3*O.width,7),S=Math.max(S,D,7)}var N=_/m,F=S/b;isNaN(N)&&(N=1/0),isNaN(F)&&(F=1/0);var V=Math.max(0,Math.floor(Math.min(N,F))),q=b1(t.model),Z=t.getExtent(),Q=q.lastAutoInterval,re=q.lastTickCount;return null!=Q&&null!=re&&Math.abs(Q-V)<=1&&Math.abs(re-l)<=1&&Q>V&&q.axisExtent0===Z[0]&&q.axisExtent1===Z[1]?V=Q:(q.lastTickCount=l,q.lastAutoInterval=V,q.axisExtent0=Z[0],q.axisExtent1=Z[1]),V}(this)},n}();function n_(n,t){var e=(n[1]-n[0])/t/2;n[0]+=e,n[1]-=e}var mm=2*Math.PI,pp=Os.CMD,LC=["top","right","bottom","left"];function Mk(n,t,e,r,o){var i=e.width,s=e.height;switch(n){case"top":r.set(e.x+i/2,e.y-t),o.set(0,-1);break;case"bottom":r.set(e.x+i/2,e.y+s+t),o.set(0,1);break;case"left":r.set(e.x-t,e.y+s/2),o.set(-1,0);break;case"right":r.set(e.x+i+t,e.y+s/2),o.set(1,0)}}function oD(n,t,e,r,o,i,s,l,c){s-=n,l-=t;var d=Math.sqrt(s*s+l*l),p=(s/=d)*e+n,m=(l/=d)*e+t;if(Math.abs(r-o)%mm<1e-4)return c[0]=p,c[1]=m,d-e;if(i){var b=r;r=ws(o),o=ws(b)}else r=ws(r),o=ws(o);r>o&&(o+=mm);var _=Math.atan2(l,s);if(_<0&&(_+=mm),_>=r&&_<=o||_+mm>=r&&_+mm<=o)return c[0]=p,c[1]=m,d-e;var S=e*Math.cos(r)+n,k=e*Math.sin(r)+t,D=e*Math.cos(o)+n,O=e*Math.sin(o)+t,N=(S-s)*(S-s)+(k-l)*(k-l),F=(D-s)*(D-s)+(O-l)*(O-l);return N<F?(c[0]=S,c[1]=k,Math.sqrt(N)):(c[0]=D,c[1]=O,Math.sqrt(F))}function r_(n,t,e,r,o,i,s,l){var c=o-n,d=i-t,p=e-n,m=r-t,b=Math.sqrt(p*p+m*m),_=(c*(p/=b)+d*(m/=b))/b;l&&(_=Math.min(Math.max(_,0),1));var S=s[0]=n+(_*=b)*p,k=s[1]=t+_*m;return Math.sqrt((S-o)*(S-o)+(k-i)*(k-i))}function NC(n,t,e,r,o,i,s){e<0&&(n+=e,e=-e),r<0&&(t+=r,r=-r);var l=n+e,c=t+r,d=s[0]=Math.min(Math.max(o,n),l),p=s[1]=Math.min(Math.max(i,t),c);return Math.sqrt((d-o)*(d-o)+(p-i)*(p-i))}var nh=[];function iD(n,t,e){var r=NC(t.x,t.y,t.width,t.height,n.x,n.y,nh);return e.set(nh[0],nh[1]),r}function kk(n,t,e){for(var r,o,i=0,s=0,l=0,c=0,d=1/0,p=t.data,m=n.x,b=n.y,_=0;_<p.length;){var S=p[_++];1===_&&(l=i=p[_],c=s=p[_+1]);var k=d;switch(S){case pp.M:i=l=p[_++],s=c=p[_++];break;case pp.L:k=r_(i,s,p[_],p[_+1],m,b,nh,!0),i=p[_++],s=p[_++];break;case pp.C:k=Ja(i,s,p[_++],p[_++],p[_++],p[_++],p[_],p[_+1],m,b,nh),i=p[_++],s=p[_++];break;case pp.Q:k=yb(i,s,p[_++],p[_++],p[_],p[_+1],m,b,nh),i=p[_++],s=p[_++];break;case pp.A:var D=p[_++],O=p[_++],N=p[_++],F=p[_++],V=p[_++],q=p[_++];_+=1;var Z=!!(1-p[_++]);r=Math.cos(V)*N+D,o=Math.sin(V)*F+O,_<=1&&(l=r,c=o),k=oD(D,O,F,V,V+q,Z,(m-D)*F/N+D,b,nh),i=Math.cos(V+q)*N+D,s=Math.sin(V+q)*F+O;break;case pp.R:k=NC(l=i=p[_++],c=s=p[_++],p[_++],p[_++],m,b,nh);break;case pp.Z:k=r_(i,s,l,c,m,b,nh,!0),i=l,s=c}k<d&&(d=k,e.set(nh[0],nh[1]))}return d}var dg=new lo,Us=new lo,_u=new lo,rh=new lo,Pv=new lo;function jw(n,t){if(n){var e=n.getTextGuideLine(),r=n.getTextContent();if(r&&e){var o=n.textGuideLineConfig||{},i=[[0,0],[0,0],[0,0]],s=o.candidates||LC,l=r.getBoundingRect().clone();l.applyTransform(r.getComputedTransform());var c=1/0,d=o.anchor,p=n.getComputedTransform(),m=p&&It([],p),b=t.get("length2")||0;d&&_u.copy(d);for(var _=0;_<s.length;_++){Mk(s[_],0,l,dg,rh),lo.scaleAndAdd(Us,dg,rh,b),Us.transform(m);var S=n.getBoundingRect(),k=d?d.distance(Us):n instanceof Go?kk(Us,n.path,_u):iD(Us,S,_u);k<c&&(c=k,Us.transform(p),_u.transform(p),_u.toArray(i[0]),Us.toArray(i[1]),dg.toArray(i[2]))}Yw(i,t.get("minTurnAngle")),e.setShape({points:i})}}}var x1=[],Md=new lo;function Yw(n,t){if(t<=180&&t>0){t=t/180*Math.PI,dg.fromArray(n[0]),Us.fromArray(n[1]),_u.fromArray(n[2]),lo.sub(rh,dg,Us),lo.sub(Pv,_u,Us);var e=rh.len(),r=Pv.len();if(!(e<.001||r<.001)){rh.scale(1/e),Pv.scale(1/r);var o=rh.dot(Pv);if(Math.cos(t)<o){var i=r_(Us.x,Us.y,_u.x,_u.y,dg.x,dg.y,x1,!1);Md.fromArray(x1),Md.scaleAndAdd(Pv,i/Math.tan(Math.PI-t));var s=_u.x!==Us.x?(Md.x-Us.x)/(_u.x-Us.x):(Md.y-Us.y)/(_u.y-Us.y);if(isNaN(s))return;s<0?lo.copy(Md,Us):s>1&&lo.copy(Md,_u),Md.toArray(n[1])}}}}function nb(n,t,e){if(e<=180&&e>0){e=e/180*Math.PI,dg.fromArray(n[0]),Us.fromArray(n[1]),_u.fromArray(n[2]),lo.sub(rh,Us,dg),lo.sub(Pv,_u,Us);var r=rh.len(),o=Pv.len();if(!(r<.001||o<.001)&&(rh.scale(1/r),Pv.scale(1/o),rh.dot(t)<Math.cos(e))){var i=r_(Us.x,Us.y,_u.x,_u.y,dg.x,dg.y,x1,!1);Md.fromArray(x1);var s=Math.PI/2,l=s+Math.acos(Pv.dot(t))-e;if(l>=s)lo.copy(Md,_u);else{Md.scaleAndAdd(Pv,i/Math.tan(Math.PI/2-l));var c=_u.x!==Us.x?(Md.x-Us.x)/(_u.x-Us.x):(Md.y-Us.y)/(_u.y-Us.y);if(isNaN(c))return;c<0?lo.copy(Md,Us):c>1&&lo.copy(Md,_u)}Md.toArray(n[1])}}}function Tk(n,t,e,r){var o="normal"===e,i=o?n:n.ensureState(e);i.ignore=t;var s=r.get("smooth");s&&!0===s&&(s=.3),i.shape=i.shape||{},s>0&&(i.shape.smooth=s);var l=r.getModel("lineStyle").getLineStyle();o?n.useStyle(l):i.style=l}function rb(n,t){var e=t.smooth,r=t.points;if(r)if(n.moveTo(r[0][0],r[0][1]),e>0&&r.length>=3){var o=Fn(r[0],r[1]),i=Fn(r[1],r[2]);if(!o||!i)return n.lineTo(r[1][0],r[1][1]),void n.lineTo(r[2][0],r[2][1]);var s=Math.min(o,i)*e,l=fn([],r[1],r[0],s/o),c=fn([],r[1],r[2],s/i),d=fn([],l,c,.5);n.bezierCurveTo(l[0],l[1],l[0],l[1],d[0],d[1]),n.bezierCurveTo(c[0],c[1],c[0],c[1],r[2][0],r[2][1])}else for(var p=1;p<r.length;p++)n.lineTo(r[p][0],r[p][1])}function _1(n,t,e){var r=n.getTextGuideLine(),o=n.getTextContent();if(o){for(var i=t.normal,s=i.get("show"),l=o.ignore,c=0;c<Pg.length;c++){var d=Pg[c],p=t[d],m="normal"===d;if(p){var b=p.get("show");if((m?l:un(o.states[d]&&o.states[d].ignore,l))||!un(b,s)){var _=m?r:r&&r.states[d];_&&(_.ignore=!0);continue}r||(r=new Qu,n.setTextGuideLine(r),m||!l&&s||Tk(r,!0,"normal",t.normal),n.stateProxy&&(r.stateProxy=n.stateProxy)),Tk(r,!1,d,p)}}if(r){Yn(r.style,e),r.style.fill=null;var S=i.get("showAbove");(n.textGuideLineConfig=n.textGuideLineConfig||{}).showAbove=S||!1,r.buildPath=rb}}else r&&n.removeTextGuideLine()}function qw(n,t){for(var e={normal:n.getModel(t=t||"labelLine")},r=0;r<Ss.length;r++){var o=Ss[r];e[o]=n.getModel([o,t])}return e}function ob(n){for(var t=[],e=0;e<n.length;e++){var r=n[e];if(!r.defaultAttr.ignore){var o=r.label,i=o.getComputedTransform(),s=o.getBoundingRect(),l=!i||i[1]<1e-5&&i[2]<1e-5,c=o.style.margin||0,d=s.clone();d.applyTransform(i),d.x-=c/2,d.y-=c/2,d.width+=c,d.height+=c;var p=l?new Hg(s,i):null;t.push({label:o,labelLine:r.labelLine,rect:d,localRect:s,obb:p,priority:r.priority,defaultAttr:r.defaultAttr,layoutOption:r.computedLayoutOption,axisAligned:l,transform:i})}}return t}function BC(n,t,e,r,o,i){var s=n.length;if(!(s<2)){n.sort(function(Q,re){return Q.rect[t]-re.rect[t]});for(var l,c=0,d=!1,p=0,m=0;m<s;m++){var b=n[m],_=b.rect;(l=_[t]-c)<0&&(_[t]-=l,b.label[t]-=l,d=!0),p+=Math.max(-l,0),c=_[t]+_[e]}p>0&&i&&V(-p/s,0,s);var S,k,D=n[0],O=n[s-1];return N(),S<0&&q(-S,.8),k<0&&q(k,.8),N(),F(S,k,1),F(k,S,-1),N(),S<0&&Z(-S),k<0&&Z(k),d}function N(){S=D.rect[t]-r,k=o-O.rect[t]-O.rect[e]}function F(Q,re,he){if(Q<0){var ge=Math.min(re,-Q);if(ge>0){V(ge*he,0,s);var ve=ge+Q;ve<0&&q(-ve*he,1)}else q(-Q*he,1)}}function V(Q,re,he){0!==Q&&(d=!0);for(var ge=re;ge<he;ge++){var ve=n[ge];ve.rect[t]+=Q,ve.label[t]+=Q}}function q(Q,re){for(var he=[],ge=0,ve=1;ve<s;ve++){var _e=n[ve-1].rect,Ee=Math.max(n[ve].rect[t]-_e[t]-_e[e],0);he.push(Ee),ge+=Ee}if(ge){var ze=Math.min(Math.abs(Q)/ge,re);if(Q>0)for(ve=0;ve<s-1;ve++)V(he[ve]*ze,0,ve+1);else for(ve=s-1;ve>0;ve--)V(-he[ve-1]*ze,ve,s)}}function Z(Q){var re=Q<0?-1:1;Q=Math.abs(Q);for(var he=Math.ceil(Q/(s-1)),ge=0;ge<s-1;ge++)if(re>0?V(he,0,ge+1):V(-he,s-ge-1,s),(Q-=he)<=0)return}}function oh(n,t,e,r){return BC(n,"y","height",t,e,r)}function Dk(n){var t=[];n.sort(function(k,D){return D.priority-k.priority});var e=new Io(0,0,0,0);function r(k){if(!k.ignore){var D=k.ensureState("emphasis");null==D.ignore&&(D.ignore=!1)}k.ignore=!0}for(var o=0;o<n.length;o++){var i=n[o],s=i.axisAligned,l=i.localRect,c=i.transform,d=i.label,p=i.labelLine;e.copy(i.rect),e.width-=.1,e.height-=.1,e.x+=.05,e.y+=.05;for(var m=i.obb,b=!1,_=0;_<t.length;_++){var S=t[_];if(e.intersect(S.rect)){if(s&&S.axisAligned){b=!0;break}if(S.obb||(S.obb=new Hg(S.localRect,S.transform)),m||(m=new Hg(l,c)),m.intersect(S.obb)){b=!0;break}}}b?(r(d),p&&r(p)):(d.attr("ignore",i.defaultAttr.ignore),p&&p.attr("ignore",i.defaultAttr.labelGuideIgnore),t.push(i))}}function aD(n){if(n){for(var t=[],e=0;e<n.length;e++)t.push(n[e].slice());return t}}function sD(n,t){var e=n.label,r=t&&t.getTextGuideLine();return{dataIndex:n.dataIndex,dataType:n.dataType,seriesIndex:n.seriesModel.seriesIndex,text:n.label.style.text,rect:n.hostRect,labelRect:n.rect,align:e.style.align,verticalAlign:e.style.verticalAlign,labelLinePoints:aD(r&&r.shape.points)}}var Ak=["align","verticalAlign","width","height","fontSize"],Vh=new To,zC=hi(),uD=hi();function Xw(n,t,e){for(var r=0;r<e.length;r++){var o=e[r];null!=t[o]&&(n[o]=t[o])}}var w1=["x","y","rotation"],lD=function(){function n(){this._labelList=[],this._chartViewList=[]}return n.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},n.prototype._addLabel=function(t,e,r,o,i){var s=o.style,l=o.__hostTarget.textConfig||{},c=o.getComputedTransform(),d=o.getBoundingRect().plain();Io.applyTransform(d,d,c),c?Vh.setLocalTransform(c):(Vh.x=Vh.y=Vh.rotation=Vh.originX=Vh.originY=0,Vh.scaleX=Vh.scaleY=1);var p,m=o.__hostTarget;if(m){p=m.getBoundingRect().plain();var b=m.getComputedTransform();Io.applyTransform(p,p,b)}var _=p&&m.getTextGuideLine();this._labelList.push({label:o,labelLine:_,seriesModel:r,dataIndex:t,dataType:e,layoutOption:i,computedLayoutOption:null,rect:d,hostRect:p,priority:p?p.width*p.height:0,defaultAttr:{ignore:o.ignore,labelGuideIgnore:_&&_.ignore,x:Vh.x,y:Vh.y,scaleX:Vh.scaleX,scaleY:Vh.scaleY,rotation:Vh.rotation,style:{x:s.x,y:s.y,align:s.align,verticalAlign:s.verticalAlign,width:s.width,height:s.height,fontSize:s.fontSize},cursor:o.cursor,attachedPos:l.position,attachedRot:l.rotation}})},n.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var r=t.__model,o=r.get("labelLayout");(yr(o)||rr(o).length)&&t.group.traverse(function(i){if(i.ignore)return!0;var s=i.getTextContent(),l=So(i);s&&!s.disableLabelLayout&&e._addLabel(l.dataIndex,l.dataType,r,s,o)})},n.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),r=t.getHeight();function o(O,N){return function(){jw(O,N)}}for(var i=0;i<this._labelList.length;i++){var s=this._labelList[i],l=s.label,c=l.__hostTarget,d=s.defaultAttr,p=void 0;p=(p=yr(s.layoutOption)?s.layoutOption(sD(s,c)):s.layoutOption)||{},s.computedLayoutOption=p;var m=Math.PI/180;c&&c.setTextConfig({local:!1,position:null!=p.x||null!=p.y?null:d.attachedPos,rotation:null!=p.rotate?p.rotate*m:d.attachedRot,offset:[p.dx||0,p.dy||0]});var b=!1;if(null!=p.x?(l.x=qn(p.x,e),l.setStyle("x",0),b=!0):(l.x=d.x,l.setStyle("x",d.style.x)),null!=p.y?(l.y=qn(p.y,r),l.setStyle("y",0),b=!0):(l.y=d.y,l.setStyle("y",d.style.y)),p.labelLinePoints){var _=c.getTextGuideLine();_&&(_.setShape({points:p.labelLinePoints}),b=!1)}zC(l).needsUpdateLabelLine=b,l.rotation=null!=p.rotate?p.rotate*m:d.rotation,l.scaleX=d.scaleX,l.scaleY=d.scaleY;for(var S=0;S<Ak.length;S++){var k=Ak[S];l.setStyle(k,null!=p[k]?p[k]:d.style[k])}if(p.draggable){if(l.draggable=!0,l.cursor="move",c){var D=s.seriesModel;null!=s.dataIndex&&(D=s.seriesModel.getData(s.dataType).getItemModel(s.dataIndex)),l.on("drag",o(c,D.getModel("labelLine")))}}else l.off("drag"),l.cursor=d.cursor}},n.prototype.layout=function(t){var r=t.getWidth(),o=t.getHeight(),i=ob(this._labelList),s=yo(i,function(c){return"shiftX"===c.layoutOption.moveOverlap}),l=yo(i,function(c){return"shiftY"===c.layoutOption.moveOverlap});BC(s,"x","width",0,r,void 0),oh(l,0,o),Dk(yo(i,function(c){return c.layoutOption.hideOverlap}))},n.prototype.processLabelsOverall=function(){var t=this;Ce(this._chartViewList,function(e){var r=e.__model,o=e.ignoreLabelLineUpdate,i=r.isAnimationEnabled();e.group.traverse(function(s){if(s.ignore&&!s.forceLabelAnimation)return!0;var l=!o,c=s.getTextContent();!l&&c&&(l=zC(c).needsUpdateLabelLine),l&&t._updateLabelLine(s,r),i&&t._animateLabels(s,r)})})},n.prototype._updateLabelLine=function(t,e){var r=t.getTextContent(),o=So(t),i=o.dataIndex;if(r&&null!=i){var s=e.getData(o.dataType),l=s.getItemModel(i),c={},d=s.getItemVisual(i,"style"),p=s.getVisual("drawType");c.stroke=d[p];var m=l.getModel("labelLine");_1(t,qw(l),c),jw(t,m)}},n.prototype._animateLabels=function(t,e){var r=t.getTextContent(),o=t.getTextGuideLine();if(r&&(t.forceLabelAnimation||!r.ignore&&!r.invisible&&!t.disableLabelAnimation&&!$m(t))){var i=(S=zC(r)).oldLayout,s=So(t),l=s.dataIndex,c={x:r.x,y:r.y,rotation:r.rotation},d=e.getData(s.dataType);if(i){r.attr(i);var p=t.prevStates;p&&(Ir(p,"select")>=0&&r.attr(S.oldLayoutSelect),Ir(p,"emphasis")>=0&&r.attr(S.oldLayoutEmphasis)),mo(r,c,e,l)}else if(r.attr(c),!Jp(r).valueAnimation){var m=un(r.style.opacity,1);r.style.opacity=0,as(r,{style:{opacity:m}},e,l)}if(S.oldLayout=c,r.states.select){var b=S.oldLayoutSelect={};Xw(b,c,w1),Xw(b,r.states.select,w1)}if(r.states.emphasis){var _=S.oldLayoutEmphasis={};Xw(_,c,w1),Xw(_,r.states.emphasis,w1)}b0(r,l,d,e,e)}if(o&&!o.ignore&&!o.invisible){i=(S=uD(o)).oldLayout;var S,k={points:o.shape.points};i?(o.attr({shape:i}),mo(o,{shape:k},e)):(o.setShape(k),o.style.strokePercent=0,as(o,{style:{strokePercent:1}},e)),S.oldLayout=k}},n}(),Zw=hi(),o_=Math.sin,S1=Math.cos,C1=Math.PI,M1=2*Math.PI,FC=180/C1,VC=function(){function n(){}return n.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},n.prototype.moveTo=function(t,e){this._add("M",t,e)},n.prototype.lineTo=function(t,e){this._add("L",t,e)},n.prototype.bezierCurveTo=function(t,e,r,o,i,s){this._add("C",t,e,r,o,i,s)},n.prototype.quadraticCurveTo=function(t,e,r,o){this._add("Q",t,e,r,o)},n.prototype.arc=function(t,e,r,o,i,s){this.ellipse(t,e,r,r,0,o,i,s)},n.prototype.ellipse=function(t,e,r,o,i,s,l,c){var S,d=l-s,p=!c,m=Math.abs(d),b=es(m-M1)||(p?d>=M1:-d>=M1),_=d>0?d%M1:d%M1+M1;S=!!b||!es(m)&&_>=C1==!!p;var k=t+r*S1(s),D=e+o*o_(s);this._start&&this._add("M",k,D);var O=Math.round(i*FC);if(b){var N=1/this._p,F=(p?1:-1)*(M1-N);this._add("A",r,o,O,1,+p,t+r*S1(s+F),e+o*o_(s+F)),N>.01&&this._add("A",r,o,O,0,+p,k,D)}else{var V=t+r*S1(l),q=e+o*o_(l);this._add("A",r,o,O,+S,+p,V,q)}},n.prototype.rect=function(t,e,r,o){this._add("M",t,e),this._add("l",r,0),this._add("l",0,o),this._add("l",-r,0),this._add("Z")},n.prototype.closePath=function(){this._d.length>0&&this._add("Z")},n.prototype._add=function(t,e,r,o,i,s,l,c,d){for(var p=[],m=this._p,b=1;b<arguments.length;b++){var _=arguments[b];if(isNaN(_))return void(this._invalid=!0);p.push(Math.round(_*m)/m)}this._d.push(t+p.join(" ")),this._start="Z"===t},n.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},n.prototype.getStr=function(){return this._str},n}(),i_="none",cD=Math.round,HC=["lineCap","miterLimit","lineJoin"],Ik=mt(HC,function(n){return"stroke-"+n.toLowerCase()}),bf="http://www.w3.org/2000/svg",Ok="http://www.w3.org/1999/xlink";function WC(n){return document.createElementNS(bf,n)}function Ic(n,t,e,r,o){return{tag:n,attrs:e||{},children:r,text:o,key:t}}function Kw(n,t){var e=(t=t||{}).newline?"\n":"";return function r(o){var i=o.children,s=o.tag,c=o.text;return function(d,p){var m=[];if(p)for(var b in p){var _=p[b],S=b;!1!==_&&(!0!==_&&null!=_&&(S+='="'+_+'"'),m.push(S))}return"<"+d+" "+m.join(" ")+">"}(s,o.attrs)+("style"!==s?Ha(c):c||"")+(i?""+e+mt(i,function(d){return r(d)}).join(e)+e:"")+"</"+s+">"}(n)}function GC(n){return{zrId:n,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssClassIdx:0,cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function UC(n,t,e,r){return Ic("svg","root",{width:n,height:t,xmlns:bf,"xmlns:xlink":Ok,version:"1.1",baseProfile:"full",viewBox:!!r&&"0 0 "+n+" "+t},e)}var $w={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},ib="transform-origin";function ab(n,t,e){var r=Lt({},n.shape);Lt(r,t),n.buildPath(e,r);var o=new VC;return o.reset(vi(n)),e.rebuildPath(o,1),o.generateStr(),o.getStr()}function X2(n,t){var e=t.originX,r=t.originY;(e||r)&&(n[ib]=e+"px "+r+"px")}var dD={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function Ek(n,t){var e=t.zrId+"-ani-"+t.cssAnimIdx++;return t.cssAnims[e]=n,e}function a_(n){return ir(n)?$w[n]?"cubic-bezier("+$w[n]+")":Sl(n)?n:"":""}function Jw(n,t,e,r){var o=n.animators,i=o.length,s=[];if(n instanceof op){var l=function(N,F,V){var q,Z,re={};if(Ce(N.shape.paths,function(ge){var ve=GC(V.zrId);ve.animation=!0,Jw(ge,{},ve,!0);var _e=ve.cssAnims,Ee=ve.cssNodes,ze=rr(_e),Ge=ze.length;if(Ge){var Xe=_e[Z=ze[Ge-1]];for(var $e in Xe){var nt=Xe[$e];re[$e]=re[$e]||{d:""},re[$e].d+=nt.d||""}for(var yt in Ee){var _t=Ee[yt].animation;_t.indexOf(Z)>=0&&(q=_t)}}}),q){F.d=!1;var he=Ek(re,V);return q.replace(Z,he)}}(n,t,e);if(l)s.push(l);else if(!i)return}else if(!i)return;for(var c={},d=0;d<i;d++){var p=o[d],m=[p.getMaxTime()/1e3+"s"],b=a_(p.getClip().easing),_=p.getDelay();m.push(b||"linear"),_&&m.push(_/1e3+"s"),p.getLoop()&&m.push("infinite");var S=m.join(" ");c[S]=c[S]||[S,[]],c[S][1].push(p)}function k(N){var F,V=N[1],q=V.length,Z={},Q={},re={},he="animation-timing-function";function ge(ar,Kn,xr){for(var nr=ar.getTracks(),Cr=ar.getMaxTime(),zr=0;zr<nr.length;zr++){var qo=nr[zr];if(qo.needsAnimate()){var li=qo.keyframes,ss=qo.propName;if(xr&&(ss=xr(ss)),ss)for(var ji=0;ji<li.length;ji++){var pa=li[ji],za=Math.round(pa.time/Cr*100)+"%",Bu=a_(pa.easing),nl=pa.rawValue;(ir(nl)||gr(nl))&&(Kn[za]=Kn[za]||{},Kn[za][ss]=pa.rawValue,Bu&&(Kn[za][he]=Bu))}}}}for(var ve=0;ve<q;ve++)(Et=(_t=V[ve]).targetName)?"shape"===Et&&ge(_t,Q):!r&&ge(_t,Z);for(var _e in Z){var Ee={};vr(Ee,n),Lt(Ee,Z[_e]);var ze=id(Ee),Ge=Z[_e][he];re[_e]=ze?{transform:ze}:{},X2(re[_e],Ee),Ge&&(re[_e][he]=Ge)}var Xe=!0;for(var _e in Q){re[_e]=re[_e]||{};var $e=!F;Ge=Q[_e][he],$e&&(F=new Os);var nt=F.len();F.reset(),re[_e].d=ab(n,Q[_e],F);var yt=F.len();if(!$e&&nt!==yt){Xe=!1;break}Ge&&(re[_e][he]=Ge)}if(!Xe)for(var _e in re)delete re[_e].d;if(!r)for(ve=0;ve<q;ve++){var _t,Et;"style"===(Et=(_t=V[ve]).targetName)&&ge(_t,re,function(ar){return dD[ar]})}var hn,Zn=rr(re),Rt=!0;for(ve=1;ve<Zn.length;ve++){var Mn=Zn[ve-1];if(re[Mn][ib]!==re[Zn[ve]][ib]){Rt=!1;break}hn=re[Mn][ib]}if(Rt&&hn){for(var _e in re)re[_e][ib]&&delete re[_e][ib];t[ib]=hn}if(yo(Zn,function(ar){return rr(re[ar]).length>0}).length)return Ek(re,e)+" "+N[0]+" both"}for(var D in c)(l=k(c[D]))&&s.push(l);if(s.length){var O=e.zrId+"-cls-"+e.cssClassIdx++;e.cssNodes["."+O]={animation:s.join(",")},t.class=O}}var s_=Math.round;function jC(n){return n&&ir(n.src)}function Pk(n){return n&&yr(n.toDataURL)}function ih(n,t,e,r){(function fD(n,t,e,r){var F,o=null==t.opacity?1:t.opacity;if(e instanceof fl)n("opacity",o);else{if(null!=(F=t.fill)&&F!==i_){var i=Vs(t.fill);n("fill",i.color);var s=null!=t.fillOpacity?t.fillOpacity*i.opacity*o:i.opacity*o;(r||s<1)&&n("fill-opacity",s)}else n("fill",i_);if(function(N){var F=N.stroke;return null!=F&&F!==i_}(t)){var l=Vs(t.stroke);n("stroke",l.color);var c=t.strokeNoScale?e.getLineScale():1,d=c?(t.lineWidth||0)/c:0,p=null!=t.strokeOpacity?t.strokeOpacity*l.opacity*o:l.opacity*o,m=t.strokeFirst;if((r||1!==d)&&n("stroke-width",d),(r||m)&&n("paint-order",m?"stroke":"fill"),(r||p<1)&&n("stroke-opacity",p),t.lineDash){var b=Ox(e),_=b[0],S=b[1];_&&(S=cD(S||0),n("stroke-dasharray",_.join(",")),(S||r)&&n("stroke-dashoffset",S))}else r&&n("stroke-dasharray",i_);for(var k=0;k<HC.length;k++){var D=HC[k];if(r||t[D]!==Rm[D]){var O=t[D]||Rm[D];O&&n(Ik[k],O)}}}else r&&n("stroke",i_)}})(function(o,i){var s="fill"===o||"stroke"===o;s&&Df(i)?Nk(t,n,o,r):s&&fh(i)?Bk(e,n,o,r):n[o]=i},t,e,!1),function(o,i,s){var q,l=o.style;if((q=l)&&(q.shadowBlur||q.shadowOffsetX||q.shadowOffsetY)){var c=function(q){var Z=q.style,Q=q.getGlobalScale();return[Z.shadowColor,(Z.shadowBlur||0).toFixed(2),(Z.shadowOffsetX||0).toFixed(2),(Z.shadowOffsetY||0).toFixed(2),Q[0],Q[1]].join(",")}(o),d=s.shadowCache,p=d[c];if(!p){var m=o.getGlobalScale(),b=m[0],_=m[1];if(!b||!_)return;var S=l.shadowOffsetX||0,k=l.shadowOffsetY||0,D=l.shadowBlur,O=Vs(l.shadowColor),N=O.opacity,F=O.color,V=D/2/b+" "+D/2/_;p=s.zrId+"-s"+s.shadowIdx++,s.defs[p]=Ic("filter",p,{id:p,x:"-100%",y:"-100%",width:"300%",height:"300%"},[Ic("feDropShadow","",{dx:S/b,dy:k/_,stdDeviation:V,"flood-color":F,"flood-opacity":N})]),d[c]=p}i.filter=al(p)}}(e,n,r)}function u_(n){return es(n[0]-1)&&es(n[1])&&es(n[2])&&es(n[3]-1)}function Qw(n,t,e){if(t&&(!es((o=t)[4])||!es(o[5])||!u_(t))){var r=e?10:1e4;n.transform=u_(t)?"translate("+s_(t[4]*r)/r+" "+s_(t[5]*r)/r+")":function(o){return"matrix("+kp(o[0])+","+kp(o[1])+","+kp(o[2])+","+kp(o[3])+","+pn(o[4])+","+pn(o[5])+")"}(t)}var o}function YC(n,t,e){for(var r=n.points,o=[],i=0;i<r.length;i++)o.push(s_(r[i][0]*e)/e),o.push(s_(r[i][1]*e)/e);t.points=o.join(" ")}function eS(n){return!n.smooth}var qC,Rk,hD={circle:[(qC=["cx","cy","r"],Rk=mt(qC,function(n){return"string"==typeof n?[n,n]:n}),function(n,t,e){for(var r=0;r<Rk.length;r++){var o=Rk[r],i=n[o[0]];null!=i&&(t[o[1]]=s_(i*e)/e)}})],polyline:[YC,eS],polygon:[YC,eS]};function Lk(n,t){var e=n.style,r=n.shape,o=hD[n.type],i={},s=t.animation,l="path",c=n.style.strokePercent,d=t.compress&&vi(n)||4;if(!o||t.willUpdate||o[1]&&!o[1](r)||s&&function(D){for(var O=D.animators,N=0;N<O.length;N++)if("shape"===O[N].targetName)return!0;return!1}(n)||c<1){var p=!n.path||n.shapeChanged();n.path||n.createPathProxy();var m=n.path;p&&(m.beginPath(),n.buildPath(m,n.shape),n.pathUpdated());var b=m.getVersion(),_=n,S=_.__svgPathBuilder;_.__svgPathVersion===b&&S&&c===_.__svgPathStrokePercent||(S||(S=_.__svgPathBuilder=new VC),S.reset(d),m.rebuildPath(S,c),S.generateStr(),_.__svgPathVersion=b,_.__svgPathStrokePercent=c),i.d=S.getStr()}else{l=n.type;var k=Math.pow(10,d);o[0](r,i,k)}return Qw(i,n.transform),ih(i,e,n,t),t.animation&&Jw(n,i,t),Ic(l,n.id+"",i)}function pD(n,t){return n instanceof Go?Lk(n,t):n instanceof fl?function(e,r){var o=e.style,i=o.image;if(i&&!ir(i)&&(jC(i)?i=i.src:Pk(i)&&(i=i.toDataURL())),i){var s=o.x||0,l=o.y||0,c={href:i,width:o.width,height:o.height};return s&&(c.x=s),l&&(c.y=l),Qw(c,e.transform),ih(c,o,e,r),r.animation&&Jw(e,c,r),Ic("image",e.id+"",c)}}(n,t):n instanceof Og?function(e,r){var k,D,O,o=e.style,i=o.text;if(null!=i&&(i+=""),i&&!isNaN(o.x)&&!isNaN(o.y)){var s=o.font||cr,l=o.x||0,c=(k=o.y||0,D=Vl(s),"top"===(O=o.textBaseline)?k+=D/2:"bottom"===O&&(k-=D/2),k),d={"dominant-baseline":"central","text-anchor":tc[o.textAlign]||o.textAlign};if(Ou(o)){var p="",m=o.fontStyle,b=lf(o.fontSize);if(!parseFloat(b))return;var S=o.fontWeight;p+="font-size:"+b+";font-family:"+(o.fontFamily||Gt)+";",m&&"normal"!==m&&(p+="font-style:"+m+";"),S&&"normal"!==S&&(p+="font-weight:"+S+";"),d.style=p}else d.style="font: "+s;return i.match(/\s/)&&(d["xml:space"]="preserve"),l&&(d.x=l),c&&(d.y=c),Qw(d,e.transform),ih(d,o,e,r),r.animation&&Jw(e,d,r),Ic("text",e.id+"",d,void 0,i)}}(n,t):void 0}function Nk(n,t,e,r){var o,i=n[e],s={gradientUnits:i.global?"userSpaceOnUse":"objectBoundingBox"};if(Xu(i))o="linearGradient",s.x1=i.x,s.y1=i.y,s.x2=i.x2,s.y2=i.y2;else{if(!Tf(i))return;o="radialGradient",s.cx=un(i.x,.5),s.cy=un(i.y,.5),s.r=un(i.r,.5)}for(var l=i.colorStops,c=[],d=0,p=l.length;d<p;++d){var m=100*pn(l[d].offset)+"%",b=Vs(l[d].color),S=b.opacity,k={offset:m};k["stop-color"]=b.color,S<1&&(k["stop-opacity"]=S),c.push(Ic("stop",d+"",k))}var D=Kw(Ic(o,"",s,c)),O=r.gradientCache,N=O[D];N||(N=r.zrId+"-g"+r.gradientIdx++,O[D]=N,s.id=N,r.defs[N]=Ic(o,N,s,c)),t[e]=al(N)}function Bk(n,t,e,r){var o,i=n.style[e],s=n.getBoundingRect(),l={},c=i.repeat,d="no-repeat"===c,p="repeat-x"===c,m="repeat-y"===c;if(Yr(i)){var b=i.imageWidth,_=i.imageHeight,S=void 0,k=i.image;if(ir(k)?S=k:jC(k)?S=k.src:Pk(k)&&(S=k.toDataURL()),"undefined"==typeof Image){var D="Image width/height must been given explictly in svg-ssr renderer.";Ao(b,D),Ao(_,D)}else if(null==b||null==_){var O=function(ge,ve){if(ge){var _e=ge.elm,Ee=b||ve.width,ze=_||ve.height;"pattern"===ge.tag&&(p?(ze=1,Ee/=s.width):m&&(Ee=1,ze/=s.height)),ge.attrs.width=Ee,ge.attrs.height=ze,_e&&(_e.setAttribute("width",Ee),_e.setAttribute("height",ze))}},N=ja(S,null,n,function(ge){d||O(Z,ge),O(o,ge)});N&&N.width&&N.height&&(b=b||N.width,_=_||N.height)}o=Ic("image","img",{href:S,width:b,height:_}),l.width=b,l.height=_}else i.svgElement&&(o=an(i.svgElement),l.width=i.svgWidth,l.height=i.svgHeight);if(o){var F,V;d?F=V=1:p?(V=1,F=l.width/s.width):m?(F=1,V=l.height/s.height):l.patternUnits="userSpaceOnUse",null==F||isNaN(F)||(l.width=F),null==V||isNaN(V)||(l.height=V);var q=id(i);q&&(l.patternTransform=q);var Z=Ic("pattern","",l,[o]),Q=Kw(Z),re=r.patternCache,he=re[Q];he||(he=r.zrId+"-p"+r.patternIdx++,re[Q]=he,l.id=he,Z=r.defs[he]=Ic("pattern",he,l,[o])),t[e]=al(he)}}function gD(n,t,e){var r=e.clipPathCache,o=e.defs,i=r[n.id];if(!i){var s={id:i=e.zrId+"-c"+e.clipPathIdx++};r[n.id]=i,o[i]=Ic("clipPath",i,s,[Lk(n,e)])}t["clip-path"]=al(i)}function mD(n){return document.createTextNode(n)}function vm(n,t,e){n.insertBefore(t,e)}function XC(n,t){n.removeChild(t)}function ZC(n,t){n.appendChild(t)}function zk(n){return n.parentNode}function tS(n){return n.nextSibling}function Fk(n,t){n.textContent=t}var vD=Ic("","");function KC(n){return void 0===n}function kd(n){return void 0!==n}function Vk(n,t,e){for(var r={},o=t;o<=e;++o){var i=n[o].key;void 0!==i&&(r[i]=o)}return r}function Vy(n,t){return n.tag===t.tag&&n.key===t.key}function nS(n){var t,e=n.children,r=n.tag;if(kd(r)){var o=n.elm=WC(r);if(Wk(vD,n),Ue(e))for(t=0;t<e.length;++t){var i=e[t];null!=i&&ZC(o,nS(i))}else kd(n.text)&&!wr(n.text)&&ZC(o,mD(n.text))}else n.elm=mD(n.text);return n.elm}function Hk(n,t,e,r,o){for(;r<=o;++r){var i=e[r];null!=i&&vm(n,nS(i),t)}}function Rv(n,t,e,r){for(;e<=r;++e){var o=t[e];null!=o&&(kd(o.tag)?XC(zk(o.elm),o.elm):XC(n,o.elm))}}function Wk(n,t){var e,r=t.elm,o=n&&n.attrs||{},i=t.attrs||{};if(o!==i){for(e in i){var s=i[e];o[e]!==s&&(!0===s?r.setAttribute(e,""):!1===s?r.removeAttribute(e):120!==e.charCodeAt(0)?r.setAttribute(e,s):"xmlns:xlink"===e||"xmlns"===e?r.setAttributeNS("http://www.w3.org/2000/xmlns/",e,s):58===e.charCodeAt(3)?r.setAttributeNS("http://www.w3.org/XML/1998/namespace",e,s):58===e.charCodeAt(5)?r.setAttributeNS(Ok,e,s):r.setAttribute(e,s))}for(e in o)e in i||r.removeAttribute(e)}}function l_(n,t){var e=t.elm=n.elm,r=n.children,o=t.children;n!==t&&(Wk(n,t),KC(t.text)?kd(r)&&kd(o)?r!==o&&function(i,s,l){for(var c,d,p,m=0,b=0,_=s.length-1,S=s[0],k=s[_],D=l.length-1,O=l[0],N=l[D];m<=_&&b<=D;)null==S?S=s[++m]:null==k?k=s[--_]:null==O?O=l[++b]:null==N?N=l[--D]:Vy(S,O)?(l_(S,O),S=s[++m],O=l[++b]):Vy(k,N)?(l_(k,N),k=s[--_],N=l[--D]):Vy(S,N)?(l_(S,N),vm(i,S.elm,tS(k.elm)),S=s[++m],N=l[--D]):Vy(k,O)?(l_(k,O),vm(i,k.elm,S.elm),k=s[--_],O=l[++b]):(KC(c)&&(c=Vk(s,m,_)),KC(d=c[O.key])||(p=s[d]).tag!==O.tag?vm(i,nS(O),S.elm):(l_(p,O),s[d]=void 0,vm(i,p.elm,S.elm)),O=l[++b]);(m<=_||b<=D)&&(m>_?Hk(i,null==l[D+1]?null:l[D+1].elm,l,b,D):Rv(i,s,m,_))}(e,r,o):kd(o)?(kd(n.text)&&Fk(e,""),Hk(e,null,o,0,o.length-1)):kd(r)?Rv(e,r,0,r.length-1):kd(n.text)&&Fk(e,""):n.text!==t.text&&(kd(r)&&Rv(e,r,0,r.length-1),Fk(e,t.text)))}var Z2=0,$C=function(){function n(t,e,r){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=e,this._opts=r=Lt({},r),this.root=t,this._id="zr"+Z2++,this._oldVNode=UC(r.width,r.height),t&&!r.ssr){var o=this._viewport=document.createElement("div");o.style.cssText="position:relative;overflow:hidden";var i=this._svgDom=this._oldVNode.elm=WC("svg");Wk(null,this._oldVNode),o.appendChild(i),t.appendChild(o)}this.resize(r.width,r.height)}return n.prototype.getType=function(){return this.type},n.prototype.getViewportRoot=function(){return this._viewport},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.getSvgDom=function(){return this._svgDom},n.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",function(e,r){if(Vy(e,r))l_(e,r);else{var o=e.elm,i=zk(o);nS(r),null!==i&&(vm(i,r.elm,tS(o)),Rv(i,[e],0,0))}}(this._oldVNode,t),this._oldVNode=t}},n.prototype.renderOneToVNode=function(t){return pD(t,GC(this._id))},n.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),r=this._width,o=this._height,i=GC(this._id);i.animation=t.animation,i.willUpdate=t.willUpdate,i.compress=t.compress;var s=[],l=this._bgVNode=function(b,_,S,k){var D;if(S&&"none"!==S)if(D=Ic("rect","bg",{width:b,height:_,x:"0",y:"0",id:"0"}),Df(S))Nk({fill:S},D.attrs,"fill",k);else if(fh(S))Bk({style:{fill:S},dirty:Fo,getBoundingRect:function(){return{width:b,height:_}}},D.attrs,"fill",k);else{var O=Vs(S),F=O.opacity;D.attrs.fill=O.color,F<1&&(D.attrs["fill-opacity"]=F)}return D}(r,o,this._backgroundColor,i);l&&s.push(l);var c=t.compress?null:this._mainVNode=Ic("g","main",{},[]);this._paintList(e,i,c?c.children:s),c&&s.push(c);var b,_,k,D,O,N,F,d=mt(rr(i.defs),function(b){return i.defs[b]});if(d.length&&s.push(Ic("defs","defs",{},d)),t.animation){var p=(_=i.cssAnims,D=" {"+(k=({newline:!0}||{}).newline?"\n":""),O=k+"}",N=mt(rr(b=i.cssNodes),function(V){return V+D+mt(rr(b[V]),function(q){return q+":"+b[V][q]+";"}).join(k)+O}).join(k),F=mt(rr(_),function(V){return"@keyframes "+V+D+mt(rr(_[V]),function(q){return q+D+mt(rr(_[V][q]),function(Z){var Q=_[V][q][Z];return"d"===Z&&(Q='path("'+Q+'")'),Z+":"+Q+";"}).join(k)+O}).join(k)+O}).join(k),N||F?["<![CDATA[",N,F,"]]>"].join(k):"");if(p){var m=Ic("style","stl",{},[],p);s.push(m)}}return UC(r,o,s,t.useViewBox)},n.prototype.renderToString=function(t){return Kw(this.renderToVNode({animation:un((t=t||{}).cssAnimation,!0),willUpdate:!1,compress:!0,useViewBox:un(t.useViewBox,!0)}),{newline:!0})},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t},n.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},n.prototype._paintList=function(t,e,r){for(var o,i,s=t.length,l=[],c=0,d=0,p=0;p<s;p++){var m=t[p];if(!m.invisible){var b=m.__clipPaths,_=b&&b.length||0,S=i&&i.length||0,k=void 0;for(k=Math.max(_-1,S-1);k>=0&&(!b||!i||b[k]!==i[k]);k--);for(var D=S-1;D>k;D--)o=l[--c-1];for(var O=k+1;O<_;O++){var N={};gD(b[O],N,e);var F=Ic("g","clip-g-"+d++,N,[]);(o?o.children:r).push(F),l[c++]=F,o=F}i=b;var V=pD(m,e);V&&(o?o.children:r).push(V)}}},n.prototype.resize=function(t,e){var r=this._opts,o=this.root,i=this._viewport;if(null!=t&&(r.width=t),null!=e&&(r.height=e),o&&i&&(i.style.display="none",t=L0(o,0,r),e=L0(o,1,r),i.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,i){var s=i.style;s.width=t+"px",s.height=e+"px"}if(fh(this._backgroundColor))this.refresh();else{var l=this._svgDom;l&&(l.setAttribute("width",t),l.setAttribute("height",e));var c=this._bgVNode&&this._bgVNode.elm;c&&(c.setAttribute("width",t),c.setAttribute("height",e))}}},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},n.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},n.prototype.toDataURL=function(t){var e=this.renderToString(),r="data:image/svg+xml;";return t?(e=$y(e))&&r+"base64,"+e:r+"charset=UTF-8,"+encodeURIComponent(e)},n}();function bD(n,t,e){var r=Pr.createCanvas(),o=t.getWidth(),i=t.getHeight(),s=r.style;return s&&(s.position="absolute",s.left="0",s.top="0",s.width=o+"px",s.height=i+"px",r.setAttribute("data-zr-dom-id",n)),r.width=o*e,r.height=i*e,r}var JC=function(n){function t(e,r,o){var i,s=n.call(this)||this;s.motionBlur=!1,s.lastFrameAlpha=.7,s.dpr=1,s.virtual=!1,s.config={},s.incremental=!1,s.zlevel=0,s.maxRepaintRectCount=5,s.__dirty=!0,s.__firstTimePaint=!0,s.__used=!1,s.__drawIndex=0,s.__startIndex=0,s.__endIndex=0,s.__prevStartIndex=null,s.__prevEndIndex=null,o=o||Un,"string"==typeof e?i=bD(e,r,o):wr(e)&&(e=(i=e).id),s.id=e,s.dom=i;var l=i.style;return l&&(su(i),i.onselectstart=function(){return!1},l.padding="0",l.margin="0",l.borderWidth="0"),s.painter=r,s.dpr=o,s}return gt(t,n),t.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},t.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},t.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},t.prototype.setUnpainted=function(){this.__firstTimePaint=!0},t.prototype.createBackBuffer=function(){var e=this.dpr;this.domBack=bD("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},t.prototype.createRepaintRects=function(e,r,o,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var s,l=[],c=this.maxRepaintRectCount,d=!1,p=new Io(0,0,0,0);function m(N){if(N.isFinite()&&!N.isZero())if(0===l.length)(F=new Io(0,0,0,0)).copy(N),l.push(F);else{for(var F,V=!1,q=1/0,Z=0,Q=0;Q<l.length;++Q){var re=l[Q];if(re.intersect(N)){var he=new Io(0,0,0,0);he.copy(re),he.union(N),l[Q]=he,V=!0;break}if(d){p.copy(N),p.union(re);var _e=p.width*p.height-N.width*N.height-re.width*re.height;_e<q&&(q=_e,Z=Q)}}d&&(l[Z].union(N),V=!0),!V&&((F=new Io(0,0,0,0)).copy(N),l.push(F)),d||(d=l.length>=c)}}for(var b=this.__startIndex;b<this.__endIndex;++b)if(k=e[b]){var _=k.shouldBePainted(o,i,!0,!0);(D=k.__isRendered&&(1&k.__dirty||!_)?k.getPrevPaintRect():null)&&m(D);var S=_&&(1&k.__dirty||!k.__isRendered)?k.getPaintRect():null;S&&m(S)}for(b=this.__prevStartIndex;b<this.__prevEndIndex;++b){var k,D;_=(k=r[b]).shouldBePainted(o,i,!0,!0),k&&(!_||!k.__zr)&&k.__isRendered&&(D=k.getPrevPaintRect())&&m(D)}do{for(s=!1,b=0;b<l.length;)if(l[b].isZero())l.splice(b,1);else{for(var O=b+1;O<l.length;)l[b].intersect(l[O])?(s=!0,l[b].union(l[O]),l.splice(O,1)):O++;b++}}while(s);return this._paintRects=l,l},t.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},t.prototype.resize=function(e,r){var o=this.dpr,i=this.dom,s=i.style,l=this.domBack;s&&(s.width=e+"px",s.height=r+"px"),i.width=e*o,i.height=r*o,l&&(l.width=e*o,l.height=r*o,1!==o&&this.ctxBack.scale(o,o))},t.prototype.clear=function(e,r,o){var i=this.dom,s=this.ctx,l=i.width,c=i.height;r=r||this.clearColor;var d=this.motionBlur&&!e,p=this.lastFrameAlpha,m=this.dpr,b=this;d&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,l/m,c/m));var _=this.domBack;function S(k,D,O,N){if(s.clearRect(k,D,O,N),r&&"transparent"!==r){var F=void 0;sn(r)?(F=(r.global||r.__width===O&&r.__height===N)&&r.__canvasGradient||n1(s,r,{x:0,y:0,width:O,height:N}),r.__canvasGradient=F,r.__width=O,r.__height=N):Ht(r)&&(r.scaleX=r.scaleX||m,r.scaleY=r.scaleY||m,F=bv(s,r,{dirty:function(){b.setUnpainted(),b.__painter.refresh()}})),s.save(),s.fillStyle=F||r,s.fillRect(k,D,O,N),s.restore()}d&&(s.save(),s.globalAlpha=p,s.drawImage(_,k,D,O,N),s.restore())}!o||d?S(0,0,l,c):o.length&&Ce(o,function(k){S(k.x*m,k.y*m,k.width*m,k.height*m)})},t}(bo),k1=314159,rS=function(){function n(t,e,r,o){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var i=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=r=Lt({},r||{}),this.dpr=r.devicePixelRatio||Un,this._singleCanvas=i,this.root=t,t.style&&(su(t),t.innerHTML=""),this.storage=e;var s=this._zlevelList;this._prevDisplayList=[];var _,S,k,l=this._layers;if(i){var c=t,d=c.width,p=c.height;null!=r.width&&(d=r.width),null!=r.height&&(p=r.height),this.dpr=r.devicePixelRatio||1,c.width=d*this.dpr,c.height=p*this.dpr,this._width=d,this._height=p;var m=new JC(c,this,this.dpr);m.__builtin__=!0,m.initContext(),l[314159]=m,m.zlevel=k1,s.push(k1),this._domRoot=t}else{this._width=L0(t,0,r),this._height=L0(t,1,r);var b=this._domRoot=(_=this._width,S=this._height,(k=document.createElement("div")).style.cssText=["position:relative","width:"+_+"px","height:"+S+"px","padding:0","margin:0","border-width:0"].join(";")+";",k);t.appendChild(b)}}return n.prototype.getType=function(){return"canvas"},n.prototype.isSingleCanvas=function(){return this._singleCanvas},n.prototype.getViewportRoot=function(){return this._domRoot},n.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},n.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),r=this._prevDisplayList,o=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,r,t,this._redrawId);for(var i=0;i<o.length;i++){var l=this._layers[o[i]];!l.__builtin__&&l.refresh&&l.refresh(0===i?this._backgroundColor:null)}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},n.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},n.prototype._paintHoverList=function(t){var e=t.length,r=this._hoverlayer;if(r&&r.clear(),e){for(var o,i={inHover:!0,viewWidth:this._width,viewHeight:this._height},s=0;s<e;s++){var l=t[s];l.__inHover&&(r||(r=this._hoverlayer=this.getLayer(1e5)),o||(o=r.ctx).save(),Ry(o,l,i,s===e-1))}o&&o.restore()}},n.prototype.getHoverLayer=function(){return this.getLayer(1e5)},n.prototype.paintOne=function(t,e){gw(t,e)},n.prototype._paintList=function(t,e,r,o){if(this._redrawId===o){r=r||!1,this._updateLayerStatus(t);var i=this._doPaintList(t,e,r),s=i.finished,l=i.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),l&&this._paintHoverList(t),s)this.eachLayer(function(d){d.afterBrush&&d.afterBrush()});else{var c=this;Nl(function(){c._paintList(t,e,r,o)})}}},n.prototype._compositeManually=function(){var t=this.getLayer(k1).ctx,e=this._domRoot.width,r=this._domRoot.height;t.clearRect(0,0,e,r),this.eachBuiltinLayer(function(o){o.virtual&&t.drawImage(o.dom,0,0,e,r)})},n.prototype._doPaintList=function(t,e,r){for(var o=this,i=[],s=this._opts.useDirtyRect,l=0;l<this._zlevelList.length;l++){var d=this._layers[this._zlevelList[l]];d.__builtin__&&d!==this._hoverlayer&&(d.__dirty||r)&&i.push(d)}for(var p=!0,m=!1,b=function(k){var D,O=i[k],N=O.ctx,F=s&&O.createRepaintRects(t,e,_._width,_._height),V=r?O.__startIndex:O.__drawIndex,q=!r&&O.incremental&&Date.now,Z=q&&Date.now(),Q=O.zlevel===_._zlevelList[0]?_._backgroundColor:null;if(O.__startIndex===O.__endIndex)O.clear(!1,Q,F);else if(V===O.__startIndex){var re=t[V];re.incremental&&re.notClear&&!r||O.clear(!1,Q,F)}-1===V&&(console.error("For some unknown reason. drawIndex is -1"),V=O.__startIndex);var he=function(Ee){var ze={inHover:!1,allClipped:!1,prevEl:null,viewWidth:o._width,viewHeight:o._height};for(D=V;D<O.__endIndex;D++){var Ge=t[D];if(Ge.__inHover&&(m=!0),o._doPaintEl(Ge,O,s,Ee,ze,D===O.__endIndex-1),q&&Date.now()-Z>15)break}ze.prevElClipPaths&&N.restore()};if(F)if(0===F.length)D=O.__endIndex;else for(var ge=_.dpr,ve=0;ve<F.length;++ve){var _e=F[ve];N.save(),N.beginPath(),N.rect(_e.x*ge,_e.y*ge,_e.width*ge,_e.height*ge),N.clip(),he(_e),N.restore()}else N.save(),he(),N.restore();O.__drawIndex=D,O.__drawIndex<O.__endIndex&&(p=!1)},_=this,S=0;S<i.length;S++)b(S);return zn.wxa&&Ce(this._layers,function(k){k&&k.ctx&&k.ctx.draw&&k.ctx.draw()}),{finished:p,needsRefreshHover:m}},n.prototype._doPaintEl=function(t,e,r,o,i,s){var l=e.ctx;if(r){var c=t.getPaintRect();(!o||c&&c.intersect(o))&&(Ry(l,t,i,s),t.setPrevPaintRect(c))}else Ry(l,t,i,s)},n.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=k1);var r=this._layers[t];return r||((r=new JC("zr_"+t,this,this.dpr)).zlevel=t,r.__builtin__=!0,this._layerConfig[t]?ln(r,this._layerConfig[t],!0):this._layerConfig[t-.01]&&ln(r,this._layerConfig[t-.01],!0),e&&(r.virtual=e),this.insertLayer(t,r),r.initContext()),r},n.prototype.insertLayer=function(t,e){var p,r=this._layers,o=this._zlevelList,i=o.length,s=this._domRoot,l=null,c=-1;if(!r[t]&&(p=e)&&(p.__builtin__||"function"==typeof p.resize&&"function"==typeof p.refresh)){if(i>0&&t>o[0]){for(c=0;c<i-1&&!(o[c]<t&&o[c+1]>t);c++);l=r[o[c]]}if(o.splice(c+1,0,t),r[t]=e,!e.virtual)if(l){var d=l.dom;d.nextSibling?s.insertBefore(e.dom,d.nextSibling):s.appendChild(e.dom)}else s.firstChild?s.insertBefore(e.dom,s.firstChild):s.appendChild(e.dom);e.__painter=this}},n.prototype.eachLayer=function(t,e){for(var r=this._zlevelList,o=0;o<r.length;o++){var i=r[o];t.call(e,this._layers[i],i)}},n.prototype.eachBuiltinLayer=function(t,e){for(var r=this._zlevelList,o=0;o<r.length;o++){var i=r[o],s=this._layers[i];s.__builtin__&&t.call(e,s,i)}},n.prototype.eachOtherLayer=function(t,e){for(var r=this._zlevelList,o=0;o<r.length;o++){var i=r[o],s=this._layers[i];s.__builtin__||t.call(e,s,i)}},n.prototype.getLayers=function(){return this._layers},n.prototype._updateLayerStatus=function(t){function e(m){s&&(s.__endIndex!==m&&(s.__dirty=!0),s.__endIndex=m)}if(this.eachBuiltinLayer(function(m,b){m.__dirty=m.__used=!1}),this._singleCanvas)for(var r=1;r<t.length;r++)if((c=t[r]).zlevel!==t[r-1].zlevel||c.incremental){this._needsManuallyCompositing=!0;break}var o,i,s=null,l=0;for(i=0;i<t.length;i++){var c,d=(c=t[i]).zlevel,p=void 0;o!==d&&(o=d,l=0),c.incremental?((p=this.getLayer(d+.001,this._needsManuallyCompositing)).incremental=!0,l=1):p=this.getLayer(d+(l>0?.01:0),this._needsManuallyCompositing),p.__builtin__||qe("ZLevel "+d+" has been used by unkown layer "+p.id),p!==s&&(p.__used=!0,p.__startIndex!==i&&(p.__dirty=!0),p.__startIndex=i,p.__drawIndex=p.incremental?-1:i,e(i),s=p),1&c.__dirty&&!c.__inHover&&(p.__dirty=!0,p.incremental&&p.__drawIndex<0&&(p.__drawIndex=i))}e(i),this.eachBuiltinLayer(function(m,b){!m.__used&&m.getElementCount()>0&&(m.__dirty=!0,m.__startIndex=m.__endIndex=m.__drawIndex=0),m.__dirty&&m.__drawIndex<0&&(m.__drawIndex=m.__startIndex)})},n.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},n.prototype._clearLayer=function(t){t.clear()},n.prototype.setBackgroundColor=function(t){this._backgroundColor=t,Ce(this._layers,function(e){e.setUnpainted()})},n.prototype.configLayer=function(t,e){if(e){var r=this._layerConfig;r[t]?ln(r[t],e,!0):r[t]=e;for(var o=0;o<this._zlevelList.length;o++){var i=this._zlevelList[o];(i===t||i===t+.01)&&ln(this._layers[i],r[t],!0)}}},n.prototype.delLayer=function(t){var e=this._layers,r=this._zlevelList,o=e[t];o&&(o.dom.parentNode.removeChild(o.dom),delete e[t],r.splice(Ir(r,t),1))},n.prototype.resize=function(t,e){if(this._domRoot.style){var r=this._domRoot;r.style.display="none";var o=this._opts,i=this.root;if(null!=t&&(o.width=t),null!=e&&(o.height=e),t=L0(i,0,o),e=L0(i,1,o),r.style.display="",this._width!==t||e!==this._height){for(var s in r.style.width=t+"px",r.style.height=e+"px",this._layers)this._layers.hasOwnProperty(s)&&this._layers[s].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(k1).resize(t,e)}return this},n.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},n.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},n.prototype.getRenderedCanvas=function(t){if(this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new JC("image",this,(t=t||{}).pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var r=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var o=e.dom.width,i=e.dom.height;this.eachLayer(function(m){m.__builtin__?r.drawImage(m.dom,0,0,o,i):m.renderToCanvas&&(r.save(),m.renderToCanvas(r),r.restore())})}else for(var s={inHover:!1,viewWidth:this._width,viewHeight:this._height},l=this.storage.getDisplayList(!0),c=0,d=l.length;c<d;c++)Ry(r,l[c],s,c===d-1);return e.dom},n.prototype.getWidth=function(){return this._width},n.prototype.getHeight=function(){return this._height},n}(),K2=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return gt(t,n),t.prototype.getInitialData=function(e){return lm(null,this,{useEncodeDefaulter:!0})},t.prototype.getLegendIcon=function(e){var r=new xo,o=Dl("line",0,e.itemHeight/2,e.itemWidth,0,e.lineStyle.stroke,!1);r.add(o),o.setStyle(e.lineStyle);var i=this.getData().getVisual("symbol"),s=this.getData().getVisual("symbolRotate"),l="none"===i?"circle":i,c=.8*e.itemHeight,d=Dl(l,(e.itemWidth-c)/2,(e.itemHeight-c)/2,c,c,e.itemStyle.fill);return r.add(d),d.setStyle(e.itemStyle),d.rotation=("inherit"===e.iconRotate?s:e.iconRotate||0)*Math.PI/180,d.setOrigin([e.itemWidth/2,e.itemHeight/2]),l.indexOf("empty")>-1&&(d.style.stroke=d.style.fill,d.style.fill="#fff",d.style.lineWidth=2),r},t.type="series.line",t.dependencies=["grid","polar"],t.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},t}(Ka);function qf(n,t){var e=n.mapDimensionsAll("defaultedLabel"),r=e.length;if(1===r){var o=yx(n,t,e[0]);return null!=o?o+"":null}if(r){for(var i=[],s=0;s<e.length;s++)i.push(yx(n,t,e[s]));return i.join(" ")}}function QC(n,t){var e=n.mapDimensionsAll("defaultedLabel");if(!Ue(t))return t+"";for(var r=[],o=0;o<e.length;o++){var i=n.getDimensionIndex(e[o]);i>=0&&r.push(t[i])}return r.join(" ")}var hg=function(n){function t(e,r,o,i){var s=n.call(this)||this;return s.updateData(e,r,o,i),s}return gt(t,n),t.prototype._createSymbol=function(e,r,o,i,s){this.removeAll();var l=Dl(e,-1,-1,2,2,null,s);l.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),l.drift=xD,this._symbolType=e,this.add(l)},t.prototype.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(null,e)},t.prototype.getSymbolType=function(){return this._symbolType},t.prototype.getSymbolPath=function(){return this.childAt(0)},t.prototype.highlight=function(){pd(this.childAt(0))},t.prototype.downplay=function(){Ah(this.childAt(0))},t.prototype.setZ=function(e,r){var o=this.childAt(0);o.zlevel=e,o.z=r},t.prototype.setDraggable=function(e,r){var o=this.childAt(0);o.draggable=e,o.cursor=!r&&e?"move":o.cursor},t.prototype.updateData=function(e,r,o,i){this.silent=!1;var s=e.getItemVisual(r,"symbol")||"circle",l=e.hostModel,c=t.getSymbolSize(e,r),d=s!==this._symbolType,p=i&&i.disableAnimation;if(d){var m=e.getItemVisual(r,"symbolKeepAspect");this._createSymbol(s,e,r,c,m)}else{(_=this.childAt(0)).silent=!1;var b={scaleX:c[0]/2,scaleY:c[1]/2};p?_.attr(b):mo(_,b,l,r),md(_)}if(this._updateCommon(e,r,c,o,i),d){var _=this.childAt(0);p||(b={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:_.style.opacity}},_.scaleX=_.scaleY=0,_.style.opacity=0,as(_,b,l,r))}p&&this.childAt(0).stopAnimation("leave")},t.prototype._updateCommon=function(e,r,o,i,s){var l,c,d,p,m,b,_,S,k,D=this.childAt(0),O=e.hostModel;if(i&&(l=i.emphasisItemStyle,c=i.blurItemStyle,d=i.selectItemStyle,p=i.focus,m=i.blurScope,_=i.labelStatesModels,S=i.hoverScale,k=i.cursorStyle,b=i.emphasisDisabled),!i||e.hasItemOption){var N=i&&i.itemModel?i.itemModel:e.getItemModel(r),F=N.getModel("emphasis");l=F.getModel("itemStyle").getItemStyle(),d=N.getModel(["select","itemStyle"]).getItemStyle(),c=N.getModel(["blur","itemStyle"]).getItemStyle(),p=F.get("focus"),m=F.get("blurScope"),b=F.get("disabled"),_=gs(N),S=F.getShallow("scale"),k=N.getShallow("cursor")}var V=e.getItemVisual(r,"symbolRotate");D.attr("rotation",(V||0)*Math.PI/180||0);var q=t1(e.getItemVisual(r,"symbolOffset"),o);q&&(D.x=q[0],D.y=q[1]),k&&D.attr("cursor",k);var Z=e.getItemVisual(r,"style"),Q=Z.fill;if(D instanceof fl){var re=D.style;D.useStyle(Lt({image:re.image,x:re.x,y:re.y,width:re.width,height:re.height},Z))}else D.useStyle(D.__isEmptyBrush?Lt({},Z):Z),D.style.decal=null,D.setColor(Q,s&&s.symbolInnerColor),D.style.strokeNoScale=!0;var he=e.getItemVisual(r,"liftZ"),ge=this._z2;null!=he?null==ge&&(this._z2=D.z2,D.z2+=he):null!=ge&&(D.z2=ge,this._z2=null);var ve=s&&s.useNameLabel;ps(D,_,{labelFetcher:O,labelDataIndex:r,defaultText:function(ze){return ve?e.getName(ze):qf(e,ze)},inheritColor:Q,defaultOpacity:Z.opacity}),this._sizeX=o[0]/2,this._sizeY=o[1]/2;var _e=D.ensureState("emphasis");_e.style=l,D.ensureState("select").style=d,D.ensureState("blur").style=c;var Ee=null==S||!0===S?Math.max(1.1,3/this._sizeY):isFinite(S)&&S>0?+S:1;_e.scaleX=this._sizeX*Ee,_e.scaleY=this._sizeY*Ee,this.setSymbolScale(1),vu(this,p,m,b)},t.prototype.setSymbolScale=function(e){this.scaleX=this.scaleY=e},t.prototype.fadeOut=function(e,r,o){var i=this.childAt(0),s=So(this).dataIndex,l=o&&o.animation;if(this.silent=i.silent=!0,o&&o.fadeLabel){var c=i.getTextContent();c&&$p(c,{style:{opacity:0}},r,{dataIndex:s,removeOpt:l,cb:function(){i.removeTextContent()}})}else i.removeTextContent();$p(i,{style:{opacity:0},scaleX:0,scaleY:0},r,{dataIndex:s,cb:e,removeOpt:l})},t.getSymbolSize=function(e,r){return e1(e.getItemVisual(r,"symbolSize"))},t}(xo);function xD(n,t){this.parent.drift(n,t)}function D1(n,t,e,r){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(r.isIgnore&&r.isIgnore(e))&&!(r.clipShape&&!r.clipShape.contain(t[0],t[1]))&&"none"!==n.getItemVisual(e,"symbol")}function sb(n){return null==n||wr(n)||(n={isIgnore:n}),n||{}}function ub(n){var t=n.hostModel,e=t.getModel("emphasis");return{emphasisItemStyle:e.getModel("itemStyle").getItemStyle(),blurItemStyle:t.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:t.getModel(["select","itemStyle"]).getItemStyle(),focus:e.get("focus"),blurScope:e.get("blurScope"),emphasisDisabled:e.get("disabled"),hoverScale:e.get("scale"),labelStatesModels:gs(t),cursorStyle:t.get("cursor")}}var lb=function(){function n(t){this.group=new xo,this._SymbolCtor=t||hg}return n.prototype.updateData=function(t,e){this._progressiveEls=null,e=sb(e);var r=this.group,o=t.hostModel,i=this._data,s=this._SymbolCtor,l=e.disableAnimation,c=ub(t),d={disableAnimation:l},p=e.getSymbolPoint||function(m){return t.getItemLayout(m)};i||r.removeAll(),t.diff(i).add(function(m){var b=p(m);if(D1(t,b,m,e)){var _=new s(t,m,c,d);_.setPosition(b),t.setItemGraphicEl(m,_),r.add(_)}}).update(function(m,b){var _=i.getItemGraphicEl(b),S=p(m);if(D1(t,S,m,e)){var k=t.getItemVisual(m,"symbol")||"circle",D=_&&_.getSymbolType&&_.getSymbolType();if(!_||D&&D!==k)r.remove(_),(_=new s(t,m,c,d)).setPosition(S);else{_.updateData(t,m,c,d);var O={x:S[0],y:S[1]};l?_.attr(O):mo(_,O,o)}r.add(_),t.setItemGraphicEl(m,_)}else r.remove(_)}).remove(function(m){var b=i.getItemGraphicEl(m);b&&b.fadeOut(function(){r.remove(b)},o)}).execute(),this._getSymbolPoint=p,this._data=t},n.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl(function(r,o){var i=t._getSymbolPoint(o);r.setPosition(i),r.markRedraw()})},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=ub(t),this._data=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,e,r){function o(c){c.isGroup||(c.incremental=!0,c.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],r=sb(r);for(var i=t.start;i<t.end;i++){var s=e.getItemLayout(i);if(D1(e,s,i,r)){var l=new this._SymbolCtor(e,i,this._seriesScope);l.traverse(o),l.setPosition(s),this.group.add(l),e.setItemGraphicEl(i,l),this._progressiveEls.push(l)}}},n.prototype.eachRendered=function(t){Tl(this._progressiveEls||this.group,t)},n.prototype.remove=function(t){var e=this.group,r=this._data;r&&t?r.eachItemGraphicEl(function(o){o.fadeOut(function(){e.remove(o)},r.hostModel)}):e.removeAll()},n}();function Gk(n,t,e){var k,D,O,r=n.getBaseAxis(),o=n.getOtherAxis(r),i=(k=e,D=0,O=o.scale.getExtent(),"start"===k?D=O[0]:"end"===k?D=O[1]:gr(k)&&!isNaN(k)?D=k:O[0]>0?D=O[0]:O[1]<0&&(D=O[1]),D),s=r.dim,l=o.dim,c=t.mapDimension(l),d=t.mapDimension(s),p="x"===l||"radius"===l?1:0,m=mt(n.dimensions,function(S){return t.mapDimension(S)}),b=!1,_=t.getCalculationInfo("stackResultDimension");return pi(t,m[0])&&(b=!0,m[0]=_),pi(t,m[1])&&(b=!0,m[1]=_),{dataDimsForPoint:m,valueStart:i,valueAxisDim:l,baseAxisDim:s,stacked:!!b,valueDim:c,baseDim:d,baseDataOffset:p,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function Lv(n,t,e,r){var o=NaN;n.stacked&&(o=e.get(e.getCalculationInfo("stackedOverDimension"),r)),isNaN(o)&&(o=n.valueStart);var i=n.baseDataOffset,s=[];return s[i]=e.get(n.baseDim,r),s[1-i]=o,t.dataToPoint(s)}var Hy=Math.min,cb=Math.max;function gp(n,t){return isNaN(n)||isNaN(t)}function Wy(n,t,e,r,o,i,s,l,c){for(var d,p,m,b,_,S,k=e,D=0;D<r;D++){var O=t[2*k],N=t[2*k+1];if(k>=o||k<0)break;if(gp(O,N)){if(c){k+=i;continue}break}if(k===e)n[i>0?"moveTo":"lineTo"](O,N),m=O,b=N;else{var F=O-d,V=N-p;if(F*F+V*V<.5){k+=i;continue}if(s>0){for(var q=k+i,Z=t[2*q],Q=t[2*q+1];Z===O&&Q===N&&D<r;)D++,Z=t[2*(q+=i)],Q=t[2*q+1],F=(O=t[2*(k+=i)])-d,V=(N=t[2*k+1])-p;var re=D+1;if(c)for(;gp(Z,Q)&&re<r;)re++,Z=t[2*(q+=i)],Q=t[2*q+1];var he=.5,ge=0,ve=0,_e=void 0,Ee=void 0;if(re>=r||gp(Z,Q))_=O,S=N;else{ge=Z-d,ve=Q-p;var ze=O-d,Ge=Z-O,Xe=N-p,$e=Q-N,nt=void 0,yt=void 0;if("x"===l){var _t=ge>0?1:-1;_=O-_t*(nt=Math.abs(ze))*s,S=N,_e=O+_t*(yt=Math.abs(Ge))*s,Ee=N}else if("y"===l){var Et=ve>0?1:-1;_=O,S=N-Et*(nt=Math.abs(Xe))*s,_e=O,Ee=N+Et*(yt=Math.abs($e))*s}else nt=Math.sqrt(ze*ze+Xe*Xe),_=O-ge*s*(1-(he=(yt=Math.sqrt(Ge*Ge+$e*$e))/(yt+nt))),S=N-ve*s*(1-he),Ee=N+ve*s*he,_e=Hy(_e=O+ge*s*he,cb(Z,O)),Ee=Hy(Ee,cb(Q,N)),_e=cb(_e,Hy(Z,O)),S=N-(ve=(Ee=cb(Ee,Hy(Q,N)))-N)*nt/yt,_=Hy(_=O-(ge=_e-O)*nt/yt,cb(d,O)),S=Hy(S,cb(p,N)),_e=O+(ge=O-(_=cb(_,Hy(d,O))))*yt/nt,Ee=N+(ve=N-(S=cb(S,Hy(p,N))))*yt/nt}n.bezierCurveTo(m,b,_,S,O,N),m=_e,b=Ee}else n.lineTo(O,N)}d=O,p=N,k+=i}return D}var A1=function(){this.smooth=0,this.smoothConstraint=!0},eM=function(n){function t(e){var r=n.call(this,e)||this;return r.type="ec-polyline",r}return gt(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new A1},t.prototype.buildPath=function(e,r){var o=r.points,i=0,s=o.length/2;if(r.connectNulls){for(;s>0&&gp(o[2*s-2],o[2*s-1]);s--);for(;i<s&&gp(o[2*i],o[2*i+1]);i++);}for(;i<s;)i+=Wy(e,o,i,s,s,1,r.smooth,r.smoothMonotone,r.connectNulls)+1},t.prototype.getPointOn=function(e,r){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var o,i,s=this.path.data,l=Os.CMD,c="x"===r,d=[],p=0;p<s.length;){var m=void 0,b=void 0,_=void 0,S=void 0,k=void 0,D=void 0,O=void 0;switch(s[p++]){case l.M:o=s[p++],i=s[p++];break;case l.L:if(m=s[p++],b=s[p++],(O=c?(e-o)/(m-o):(e-i)/(b-i))<=1&&O>=0){var N=c?(b-i)*O+i:(m-o)*O+o;return c?[e,N]:[N,e]}o=m,i=b;break;case l.C:m=s[p++],b=s[p++],_=s[p++],S=s[p++],k=s[p++],D=s[p++];var F=c?zl(o,m,_,k,e,d):zl(i,b,S,D,e,d);if(F>0)for(var V=0;V<F;V++){var q=d[V];if(q<=1&&q>=0)return N=c?Da(i,b,S,D,q):Da(o,m,_,k,q),c?[e,N]:[N,e]}o=k,i=D}}},t}(Go),$2=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t}(A1),pg=function(n){function t(e){var r=n.call(this,e)||this;return r.type="ec-polygon",r}return gt(t,n),t.prototype.getDefaultShape=function(){return new $2},t.prototype.buildPath=function(e,r){var o=r.points,i=r.stackedOnPoints,s=0,l=o.length/2,c=r.smoothMonotone;if(r.connectNulls){for(;l>0&&gp(o[2*l-2],o[2*l-1]);l--);for(;s<l&&gp(o[2*s],o[2*s+1]);s++);}for(;s<l;){var d=Wy(e,o,s,l,l,1,r.smooth,c,r.connectNulls);Wy(e,i,s+d-1,d,l,-1,r.stackedOnSmooth,c,r.connectNulls),s+=d+1,e.closePath()}},t}(Go);function tM(n,t,e,r,o){var i=n.getArea(),s=i.x,l=i.y,c=i.width,d=i.height,p=e.get(["lineStyle","width"])||2;s-=p/2,l-=p/2,c+=p,d+=p,s=Math.floor(s),c=Math.round(c);var m=new bi({shape:{x:s,y:l,width:c,height:d}});if(t){var b=n.getBaseAxis(),_=b.isHorizontal(),S=b.inverse;_?(S&&(m.shape.x+=c),m.shape.width=0):(S||(m.shape.y+=d),m.shape.height=0);var k=yr(o)?function(D){o(D,m)}:null;as(m,{shape:{width:c,height:d,x:s,y:l}},e,null,r,k)}return m}function _D(n,t,e){var r=n.getArea(),o=yi(r.r0,1),i=yi(r.r,1),s=new Cc({shape:{cx:yi(n.cx,1),cy:yi(n.cy,1),r0:o,r:i,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}});return t&&("angle"===n.getBaseAxis().dim?s.shape.endAngle=r.startAngle:s.shape.r=o,as(s,{shape:{endAngle:r.endAngle,r:i}},e)),s}function I1(n,t,e,r,o){return n?"polar"===n.type?_D(n,t,e):"cartesian2d"===n.type?tM(n,t,e,r,o):null:null}function fb(n,t){return n.type===t}function Nv(n,t){if(n.length===t.length){for(var e=0;e<n.length;e++)if(n[e]!==t[e])return;return!0}}function db(n){for(var t=1/0,e=1/0,r=-1/0,o=-1/0,i=0;i<n.length;){var s=n[i++],l=n[i++];isNaN(s)||(t=Math.min(s,t),r=Math.max(s,r)),isNaN(l)||(e=Math.min(l,e),o=Math.max(l,o))}return[[t,e],[r,o]]}function Uk(n,t){var e=db(n),r=e[0],o=e[1],i=db(t),s=i[0],l=i[1];return Math.max(Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]),Math.abs(o[0]-l[0]),Math.abs(o[1]-l[1]))}function wD(n){return gr(n)?n:n?.5:0}function Gy(n,t,e,r){var o=t.getBaseAxis(),i="x"===o.dim||"radius"===o.dim?0:1,s=[],l=0,c=[],d=[],p=[],m=[];if(r){for(l=0;l<n.length;l+=2)isNaN(n[l])||isNaN(n[l+1])||m.push(n[l],n[l+1]);n=m}for(l=0;l<n.length-2;l+=2)switch(p[0]=n[l+2],p[1]=n[l+3],d[0]=n[l],d[1]=n[l+1],s.push(d[0],d[1]),e){case"end":c[i]=p[i],c[1-i]=d[1-i],s.push(c[0],c[1]);break;case"middle":var _=[];c[i]=_[i]=(d[i]+p[i])/2,c[1-i]=d[1-i],_[1-i]=p[1-i],s.push(c[0],c[1]),s.push(_[0],_[1]);break;default:c[i]=d[i],c[1-i]=p[1-i],s.push(c[0],c[1])}return s.push(n[l++],n[l++]),s}function qi(n,t){return[n[2*t],n[2*t+1]]}function jk(n){if(n.get(["endLabel","show"]))return!0;for(var t=0;t<Ss.length;t++)if(n.get([Ss[t],"endLabel","show"]))return!0;return!1}function rM(n,t,e,r){if(fb(t,"cartesian2d")){var o=r.getModel("endLabel"),i=o.get("valueAnimation"),s=r.getData(),l={lastFrameIndex:0},c=jk(r)?function(_,S){n._endLabelOnDuring(_,S,s,l,i,o,t)}:null,d=t.getBaseAxis().isHorizontal(),p=tM(t,e,r,function(){var _=n._endLabel;_&&e&&null!=l.originalX&&_.attr({x:l.originalX,y:l.originalY})},c);if(!r.get("clip",!0)){var m=p.shape,b=Math.max(m.width,m.height);d?(m.y-=b,m.height+=2*b):(m.x-=b,m.width+=2*b)}return c&&c(1,p),p}return _D(t,e,r)}var Yk=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.init=function(){var e=new xo,r=new lb;this.group.add(r.group),this._symbolDraw=r,this._lineGroup=e},t.prototype.render=function(e,r,o){var i=this,s=e.coordinateSystem,l=this.group,c=e.getData(),d=e.getModel("lineStyle"),p=e.getModel("areaStyle"),m=c.getLayout("points")||[],b="polar"===s.type,_=this._coordSys,S=this._symbolDraw,k=this._polyline,D=this._polygon,O=this._lineGroup,N=!r.ssr&&e.isAnimationEnabled(),F=!p.isEmpty(),V=p.get("origin"),q=Gk(s,c,V),Z=F&&function(Rt,Mn,lr){if(!lr.valueDim)return[];for(var ar=Mn.count(),Kn=fm(2*ar),xr=0;xr<ar;xr++){var nr=Lv(lr,Rt,Mn,xr);Kn[2*xr]=nr[0],Kn[2*xr+1]=nr[1]}return Kn}(s,c,q),Q=e.get("showSymbol"),re=e.get("connectNulls"),he=Q&&!b&&function nM(n,t,e){var r=n.get("showAllSymbol"),o="auto"===r;if(!r||o){var i=e.getAxesByScale("ordinal")[0];if(i&&(!o||!function(c,d){var p=c.getExtent(),m=Math.abs(p[1]-p[0])/c.scale.count();isNaN(m)&&(m=0);for(var b=d.count(),_=Math.max(1,Math.round(b/5)),S=0;S<b;S+=_)if(1.5*hg.getSymbolSize(d,S)[c.isHorizontal()?1:0]>m)return!1;return!0}(i,t))){var s=t.mapDimension(i.dim),l={};return Ce(i.getViewLabels(),function(c){var d=i.scale.getRawOrdinalNumber(c.tickValue);l[d]=1}),function(c){return!l.hasOwnProperty(t.get(s,c))}}}}(e,c,s),ge=this._data;ge&&ge.eachItemGraphicEl(function(Rt,Mn){Rt.__temp&&(l.remove(Rt),ge.setItemGraphicEl(Mn,null))}),Q||S.remove(),l.add(O);var ve,_e=!b&&e.get("step");s&&s.getArea&&e.get("clip",!0)&&(null!=(ve=s.getArea()).width?(ve.x-=.1,ve.y-=.1,ve.width+=.2,ve.height+=.2):ve.r0&&(ve.r0-=.5,ve.r+=.5)),this._clipShapeForSymbol=ve;var Ee=function SD(n,t,e){var r=n.getVisual("visualMeta");if(r&&r.length&&n.count()&&"cartesian2d"===t.type){for(var o,i,s=r.length-1;s>=0;s--){var l=n.getDimensionInfo(r[s].dimension);if("x"===(o=l&&l.coordDim)||"y"===o){i=r[s];break}}if(i){var c=t.getAxis(o),d=mt(i.stops,function(N){return{coord:c.toGlobalCoord(c.dataToCoord(N.value)),color:N.color}}),p=d.length,m=i.outerColors.slice();p&&d[0].coord>d[p-1].coord&&(d.reverse(),m.reverse());var b=function(N,F){var V,q,Z=[],Q=N.length;function re(_e,Ee,ze){var Ge=_e.coord;return{coord:ze,color:qu((ze-Ge)/(Ee.coord-Ge),[_e.color,Ee.color])}}for(var he=0;he<Q;he++){var ge=N[he],ve=ge.coord;if(ve<0)V=ge;else{if(ve>F){q?Z.push(re(q,ge,F)):V&&Z.push(re(V,ge,0),re(V,ge,F));break}V&&(Z.push(re(V,ge,0)),V=null),Z.push(ge),q=ge}}return Z}(d,"x"===o?e.getWidth():e.getHeight()),_=b.length;if(!_&&p)return d[0].coord<0?m[1]?m[1]:d[p-1].color:m[0]?m[0]:d[0].color;var S=b[0].coord-10,k=b[_-1].coord+10,D=k-S;if(D<.001)return"transparent";Ce(b,function(N){N.offset=(N.coord-S)/D}),b.push({offset:_?b[_-1].offset:.5,color:m[1]||"transparent"}),b.unshift({offset:_?b[0].offset:.5,color:m[0]||"transparent"});var O=new Kp(0,0,0,0,b,!0);return O[o]=S,O[o+"2"]=k,O}}}(c,s,o)||c.getVisual("style")[c.getVisual("drawType")];if(k&&_.type===s.type&&_e===this._step){F&&!D?D=this._newPolygon(m,Z):D&&!F&&(O.remove(D),D=this._polygon=null),b||this._initOrUpdateEndLabel(e,s,el(Ee));var ze=O.getClipPath();ze?as(ze,{shape:rM(this,s,!1,e).shape},e):O.setClipPath(rM(this,s,!0,e)),Q&&S.updateData(c,{isIgnore:he,clipShape:ve,disableAnimation:!0,getSymbolPoint:function(Rt){return[m[2*Rt],m[2*Rt+1]]}}),Nv(this._stackedOnPoints,Z)&&Nv(this._points,m)||(N?this._doUpdateAnimation(c,Z,s,o,_e,V,re):(_e&&(m=Gy(m,s,_e,re),Z&&(Z=Gy(Z,s,_e,re))),k.setShape({points:m}),D&&D.setShape({points:m,stackedOnPoints:Z})))}else Q&&S.updateData(c,{isIgnore:he,clipShape:ve,disableAnimation:!0,getSymbolPoint:function(Rt){return[m[2*Rt],m[2*Rt+1]]}}),N&&this._initSymbolLabelAnimation(c,s,ve),_e&&(m=Gy(m,s,_e,re),Z&&(Z=Gy(Z,s,_e,re))),k=this._newPolyline(m),F?D=this._newPolygon(m,Z):D&&(O.remove(D),D=this._polygon=null),b||this._initOrUpdateEndLabel(e,s,el(Ee)),O.setClipPath(rM(this,s,!0,e));var Ge=e.getModel("emphasis"),Xe=Ge.get("focus"),$e=Ge.get("blurScope"),nt=Ge.get("disabled");k.useStyle(Yn(d.getLineStyle(),{fill:"none",stroke:Ee,lineJoin:"bevel"})),kl(k,e,"lineStyle"),k.style.lineWidth>0&&"bolder"===e.get(["emphasis","lineStyle","width"])&&(k.getState("emphasis").style.lineWidth=+k.style.lineWidth+1),So(k).seriesIndex=e.seriesIndex,vu(k,Xe,$e,nt);var yt=wD(e.get("smooth")),_t=e.get("smoothMonotone");if(k.setShape({smooth:yt,smoothMonotone:_t,connectNulls:re}),D){var Et=c.getCalculationInfo("stackedOnSeries"),hn=0;D.useStyle(Yn(p.getAreaStyle(),{fill:Ee,opacity:.7,lineJoin:"bevel",decal:c.getVisual("style").decal})),Et&&(hn=wD(Et.get("smooth"))),D.setShape({smooth:yt,stackedOnSmooth:hn,smoothMonotone:_t,connectNulls:re}),kl(D,e,"areaStyle"),So(D).seriesIndex=e.seriesIndex,vu(D,Xe,$e,nt)}var Zn=function(Rt){i._changePolyState(Rt)};c.eachItemGraphicEl(function(Rt){Rt&&(Rt.onHoverStateChange=Zn)}),this._polyline.onHoverStateChange=Zn,this._data=c,this._coordSys=s,this._stackedOnPoints=Z,this._points=m,this._step=_e,this._valueOrigin=V,e.get("triggerLineEvent")&&(this.packEventData(e,k),D&&this.packEventData(e,D))},t.prototype.packEventData=function(e,r){So(r).eventData={componentType:"series",componentSubType:"line",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"line"}},t.prototype.highlight=function(e,r,o,i){var s=e.getData(),l=vh(s,i);if(this._changePolyState("emphasis"),!(l instanceof Array)&&null!=l&&l>=0){var c=s.getLayout("points"),d=s.getItemGraphicEl(l);if(!d){var p=c[2*l],m=c[2*l+1];if(isNaN(p)||isNaN(m)||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(p,m))return;var b=e.get("zlevel")||0,_=e.get("z")||0;(d=new hg(s,l)).x=p,d.y=m,d.setZ(b,_);var S=d.getSymbolPath().getTextContent();S&&(S.zlevel=b,S.z=_,S.z2=this._polyline.z2+1),d.__temp=!0,s.setItemGraphicEl(l,d),d.stopSymbolAnimation(!0),this.group.add(d)}d.highlight()}else $a.prototype.highlight.call(this,e,r,o,i)},t.prototype.downplay=function(e,r,o,i){var s=e.getData(),l=vh(s,i);if(this._changePolyState("normal"),null!=l&&l>=0){var c=s.getItemGraphicEl(l);c&&(c.__temp?(s.setItemGraphicEl(l,null),this.group.remove(c)):c.downplay())}else $a.prototype.downplay.call(this,e,r,o,i)},t.prototype._changePolyState=function(e){var r=this._polygon;Za(this._polyline,e),r&&Za(r,e)},t.prototype._newPolyline=function(e){var r=this._polyline;return r&&this._lineGroup.remove(r),r=new eM({shape:{points:e},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(r),this._polyline=r,r},t.prototype._newPolygon=function(e,r){var o=this._polygon;return o&&this._lineGroup.remove(o),o=new pg({shape:{points:e,stackedOnPoints:r},segmentIgnoreThreshold:2}),this._lineGroup.add(o),this._polygon=o,o},t.prototype._initSymbolLabelAnimation=function(e,r,o){var i,s,l=r.getBaseAxis(),c=l.inverse;"cartesian2d"===r.type?(i=l.isHorizontal(),s=!1):"polar"===r.type&&(i="angle"===l.dim,s=!0);var d=e.hostModel,p=d.get("animationDuration");yr(p)&&(p=p(null));var m=d.get("animationDelay")||0,b=yr(m)?m(null):m;e.eachItemGraphicEl(function(_,S){var k=_;if(k){var O=void 0,N=void 0,F=void 0;if(o)if(s){var V=o,q=r.pointToCoord([_.x,_.y]);i?(O=V.startAngle,N=V.endAngle,F=-q[1]/180*Math.PI):(O=V.r0,N=V.r,F=q[0])}else i?(O=o.x,N=o.x+o.width,F=_.x):(O=o.y+o.height,N=o.y,F=_.y);var Q=N===O?0:(F-O)/(N-O);c&&(Q=1-Q);var re=yr(m)?m(S):p*Q+b,he=k.getSymbolPath(),ge=he.getTextContent();k.attr({scaleX:0,scaleY:0}),k.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:re}),ge&&ge.animateFrom({style:{opacity:0}},{duration:300,delay:re}),he.disableLabelAnimation=!0}})},t.prototype._initOrUpdateEndLabel=function(e,r,o){var m,_,S,k,D,O,i=e.getModel("endLabel");if(jk(e)){var s=e.getData(),l=this._polyline,c=s.getLayout("points");if(!c)return l.removeTextContent(),void(this._endLabel=null);var d=this._endLabel;d||((d=this._endLabel=new Oi({z2:200})).ignoreClip=!0,l.setTextContent(this._endLabel),l.disableLabelAnimation=!0);var p=function(m){for(var _,S=m.length/2;S>0&&(_=m[2*S-1],isNaN(m[2*S-2])||isNaN(_));S--);return S-1}(c);p>=0&&(ps(l,gs(e,"endLabel"),{inheritColor:o,labelFetcher:e,labelDataIndex:p,defaultText:function(m,b,_){return null!=_?QC(s,_):qf(s,m)},enableTextSetter:!0},(m=i,S=(_=r.getBaseAxis()).isHorizontal(),k=_.inverse,D=S?k?"right":"left":"center",O=S?"middle":k?"top":"bottom",{normal:{align:m.get("align")||D,verticalAlign:m.get("verticalAlign")||O}})),l.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},t.prototype._endLabelOnDuring=function(e,r,o,i,s,l,c){var d=this._endLabel,p=this._polyline;if(d){e<1&&null==i.originalX&&(i.originalX=d.x,i.originalY=d.y);var m=o.getLayout("points"),b=o.hostModel,_=b.get("connectNulls"),S=l.get("precision"),k=l.get("distance")||0,D=c.getBaseAxis(),O=D.isHorizontal(),N=D.inverse,F=r.shape,V=N?O?F.x:F.y+F.height:O?F.x+F.width:F.y,q=(O?k:0)*(N?-1:1),Z=(O?0:-k)*(N?-1:1),Q=O?"x":"y",re=function(Xe,$e,nt){for(var yt,_t,Et=Xe.length/2,hn="x"===nt?0:1,Zn=0,Rt=-1,Mn=0;Mn<Et;Mn++)if(_t=Xe[2*Mn+hn],!isNaN(_t)&&!isNaN(Xe[2*Mn+1-hn]))if(0!==Mn){if(yt<=$e&&_t>=$e||yt>=$e&&_t<=$e){Rt=Mn;break}Zn=Mn,yt=_t}else yt=_t;return{range:[Zn,Rt],t:($e-yt)/(_t-yt)}}(m,V,Q),he=re.range,ge=he[1]-he[0],ve=void 0;if(ge>=1){if(ge>1&&!_){var _e=qi(m,he[0]);d.attr({x:_e[0]+q,y:_e[1]+Z}),s&&(ve=b.getRawValue(he[0]))}else{(_e=p.getPointOn(V,Q))&&d.attr({x:_e[0]+q,y:_e[1]+Z});var Ee=b.getRawValue(he[0]),ze=b.getRawValue(he[1]);s&&(ve=O_(o,S,Ee,ze,re.t))}i.lastFrameIndex=he[0]}else{var Ge=1===e||i.lastFrameIndex>0?he[0]:0;_e=qi(m,Ge),s&&(ve=b.getRawValue(Ge)),d.attr({x:_e[0]+q,y:_e[1]+Z})}s&&Jp(d).setLabelText(ve)}},t.prototype._doUpdateAnimation=function(e,r,o,i,s,l,c){var d=this._polyline,p=this._polygon,m=e.hostModel,b=function(Z,Q,re,he,ge,ve,_e,Ee){for(var ze=function(zu,Jl){var _f=[];return Jl.diff(zu).add(function(wf){_f.push({cmd:"+",idx:wf})}).update(function(wf,Sf){_f.push({cmd:"=",idx:Sf,idx1:wf})}).remove(function(wf){_f.push({cmd:"-",idx:wf})}).execute(),_f}(Z,Q),Ge=[],Xe=[],$e=[],nt=[],yt=[],_t=[],Et=[],hn=Gk(ge,Q,_e),Zn=Z.getLayout("points")||[],Rt=Q.getLayout("points")||[],Mn=0;Mn<ze.length;Mn++){var lr=ze[Mn],ar=!0,Kn=void 0,xr=void 0;switch(lr.cmd){case"=":var nr=Zn[Kn=2*lr.idx],Cr=Zn[Kn+1],zr=Rt[xr=2*lr.idx1],qo=Rt[xr+1];(isNaN(nr)||isNaN(Cr))&&(nr=zr,Cr=qo),Ge.push(nr,Cr),Xe.push(zr,qo),$e.push(re[Kn],re[Kn+1]),nt.push(he[xr],he[xr+1]),Et.push(Q.getRawIndex(lr.idx1));break;case"+":var li=lr.idx,ss=hn.dataDimsForPoint,ji=ge.dataToPoint([Q.get(ss[0],li),Q.get(ss[1],li)]);xr=2*li,Ge.push(ji[0],ji[1]),Xe.push(Rt[xr],Rt[xr+1]);var pa=Lv(hn,ge,Q,li);$e.push(pa[0],pa[1]),nt.push(he[xr],he[xr+1]),Et.push(Q.getRawIndex(li));break;case"-":ar=!1}ar&&(yt.push(lr),_t.push(_t.length))}_t.sort(function(zu,Jl){return Et[zu]-Et[Jl]});var za=Ge.length,Bu=fm(za),nl=fm(za),td=fm(za),Yv=fm(za),A_=[];for(Mn=0;Mn<_t.length;Mn++){var Fa=_t[Mn],Bi=2*Mn,Xo=2*Fa;Bu[Bi]=Ge[Xo],Bu[Bi+1]=Ge[Xo+1],nl[Bi]=Xe[Xo],nl[Bi+1]=Xe[Xo+1],td[Bi]=$e[Xo],td[Bi+1]=$e[Xo+1],Yv[Bi]=nt[Xo],Yv[Bi+1]=nt[Xo+1],A_[Mn]=yt[Fa]}return{current:Bu,next:nl,stackedOnCurrent:td,stackedOnNext:Yv,status:A_}}(this._data,e,this._stackedOnPoints,r,this._coordSys,0,this._valueOrigin),_=b.current,S=b.stackedOnCurrent,k=b.next,D=b.stackedOnNext;if(s&&(_=Gy(b.current,o,s,c),S=Gy(b.stackedOnCurrent,o,s,c),k=Gy(b.next,o,s,c),D=Gy(b.stackedOnNext,o,s,c)),Uk(_,k)>3e3||p&&Uk(S,D)>3e3)return d.stopAnimation(),d.setShape({points:k}),void(p&&(p.stopAnimation(),p.setShape({points:k,stackedOnPoints:D})));d.shape.__points=b.current,d.shape.points=_;var O={shape:{points:k}};b.current!==_&&(O.shape.__points=b.next),d.stopAnimation(),mo(d,O,m),p&&(p.setShape({points:_,stackedOnPoints:S}),p.stopAnimation(),mo(p,{shape:{stackedOnPoints:D}},m),d.shape.points!==p.shape.points&&(p.shape.points=d.shape.points));for(var N=[],F=b.status,V=0;V<F.length;V++)if("="===F[V].cmd){var q=e.getItemGraphicEl(F[V].idx1);q&&N.push({el:q,ptIdx:V})}d.animators&&d.animators.length&&d.animators[0].during(function(){p&&p.dirtyShape();for(var Z=d.shape.__points,Q=0;Q<N.length;Q++){var re=N[Q].el,he=2*N[Q].ptIdx;re.x=Z[he],re.y=Z[he+1],re.markRedraw()}})},t.prototype.remove=function(e){var r=this.group,o=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),o&&o.eachItemGraphicEl(function(i,s){i.__temp&&(r.remove(i),o.setItemGraphicEl(s,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},t.type="line",t}($a);function Uy(n,t){return{seriesType:n,plan:O0(),reset:function(e){var r=e.getData(),o=e.coordinateSystem,s=t||e.pipelineContext.large;if(o){var l=mt(o.dimensions,function(_){return r.mapDimension(_)}).slice(0,2),c=l.length,d=r.getCalculationInfo("stackResultDimension");pi(r,l[0])&&(l[0]=d),pi(r,l[1])&&(l[1]=d);var p=r.getStore(),m=r.getDimensionIndex(l[0]),b=r.getDimensionIndex(l[1]);return c&&{progress:function(_,S){for(var D=s&&fm((_.end-_.start)*c),O=[],N=[],F=_.start,V=0;F<_.end;F++){var q=void 0;if(1===c){var Z=p.get(m,F);q=o.dataToPoint(Z,null,N)}else O[0]=p.get(m,F),O[1]=p.get(b,F),q=o.dataToPoint(O,null,N);s?(D[V++]=q[0],D[V++]=q[1]):S.setItemLayout(F,q.slice())}s&&S.setLayout("points",D)}}}}}}var Xf={average:function(n){for(var t=0,e=0,r=0;r<n.length;r++)isNaN(n[r])||(t+=n[r],e++);return 0===e?NaN:t/e},sum:function(n){for(var t=0,e=0;e<n.length;e++)t+=n[e]||0;return t},max:function(n){for(var t=-1/0,e=0;e<n.length;e++)n[e]>t&&(t=n[e]);return isFinite(t)?t:NaN},min:function(n){for(var t=1/0,e=0;e<n.length;e++)n[e]<t&&(t=n[e]);return isFinite(t)?t:NaN},nearest:function(n){return n[0]}},CD=function(n){return Math.round(n.length/2)};function ym(n){return{seriesType:n,reset:function(t,e,r){var o=t.getData(),i=t.get("sampling"),s=t.coordinateSystem,l=o.count();if(l>10&&"cartesian2d"===s.type&&i){var c=s.getBaseAxis(),d=s.getOtherAxis(c),p=c.getExtent(),m=r.getDevicePixelRatio(),b=Math.abs(p[1]-p[0])*(m||1),_=Math.round(l/b);if(isFinite(_)&&_>1){"lttb"===i&&t.setData(o.lttbDownSample(o.mapDimension(d.dim),1/_));var S=void 0;ir(i)?S=Xf[i]:yr(i)&&(S=i),S&&t.setData(o.downSample(o.mapDimension(d.dim),1/_,S,CD))}}}}}var c_=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.getInitialData=function(e,r){return lm(null,this,{useEncodeDefaulter:!0})},t.prototype.getMarkerPosition=function(e,r,o){var i=this.coordinateSystem;if(i&&i.clampData){var s=i.clampData(e),l=i.dataToPoint(s);if(o)Ce(i.getAxes(),function(b,_){if("category"===b.type&&null!=r){var S=b.getTicksCoords(),k=s[_],D="x1"===r[_]||"y1"===r[_];if(D&&(k+=1),S.length<2)return;if(2===S.length)return void(l[_]=b.toGlobalCoord(b.getExtent()[D?1:0]));for(var O=void 0,N=void 0,F=1,V=0;V<S.length;V++){var q=S[V].coord,Z=V===S.length-1?S[V-1].tickValue+F:S[V].tickValue;if(Z===k){N=q;break}if(Z<k)O=q;else if(null!=O&&Z>k){N=(q+O)/2;break}1===V&&(F=Z-S[0].tickValue)}null==N&&(O?O&&(N=S[S.length-1].coord):N=S[0].coord),l[_]=b.toGlobalCoord(N)}});else{var c=this.getData(),d=c.getLayout("offset"),p=c.getLayout("size"),m=i.getBaseAxis().isHorizontal()?0:1;l[m]+=d+p/2}return l}return[NaN,NaN]},t.type="series.__base_bar__",t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},t}(Ka);Ka.registerClass(c_);var J2=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.getInitialData=function(){return lm(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},t.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},t.prototype.getProgressiveThreshold=function(){var e=this.get("progressiveThreshold"),r=this.get("largeThreshold");return r>e&&(e=r),e},t.prototype.brushSelector=function(e,r,o){return o.rect(r.getItemLayout(e))},t.type="series.bar",t.dependencies=["grid","polar"],t.defaultOption=Oh(c_.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),t}(c_),MD=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},gl=function(n){function t(e){var r=n.call(this,e)||this;return r.type="sausage",r}return gt(t,n),t.prototype.getDefaultShape=function(){return new MD},t.prototype.buildPath=function(e,r){var o=r.cx,i=r.cy,s=Math.max(r.r0||0,0),l=Math.max(r.r,0),c=.5*(l-s),d=s+c,p=r.startAngle,m=r.endAngle,b=r.clockwise,_=2*Math.PI,S=b?m-p<_:p-m<_;S||(p=m-(b?_:-_));var k=Math.cos(p),D=Math.sin(p),O=Math.cos(m),N=Math.sin(m);S?(e.moveTo(k*s+o,D*s+i),e.arc(k*d+o,D*d+i,c,-Math.PI+p,p,!b)):e.moveTo(k*l+o,D*l+i),e.arc(o,i,l,p,m,!b),e.arc(O*d+o,N*d+i,c,m-2*Math.PI,m-Math.PI,!b),0!==s&&e.arc(o,i,s,m,p,b)},t}(Go);function Pa(n,t,e){return t*Math.sin(n)*(e?-1:1)}function oM(n,t,e){return t*Math.cos(n)*(e?1:-1)}function Hh(n,t,e){var r=n.get("borderRadius");if(null==r)return e?{cornerRadius:0}:null;Ue(r)||(r=[r,r,r,r]);var o=Math.abs(t.r||0-t.r0||0);return{cornerRadius:mt(r,function(i){return va(i,o)})}}var iM=Math.max,Qc=Math.min,O1=function(n){function t(){var e=n.call(this)||this;return e.type=t.type,e._isFirstFrame=!0,e}return gt(t,n),t.prototype.render=function(e,r,o,i){this._model=e,this._removeOnRenderedListener(o),this._updateDrawMode(e);var s=e.get("coordinateSystem");("cartesian2d"===s||"polar"===s)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(e,r,o):this._renderNormal(e,r,o,i))},t.prototype.incrementalPrepareRender=function(e){this._clear(),this._updateDrawMode(e),this._updateLargeClip(e)},t.prototype.incrementalRender=function(e,r){this._progressiveEls=[],this._incrementalRenderLarge(e,r)},t.prototype.eachRendered=function(e){Tl(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var r=e.pipelineContext.large;null!=this._isLargeDraw&&r===this._isLargeDraw||(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(e,r,o,i){var s,l=this.group,c=e.getData(),d=this._data,p=e.coordinateSystem,m=p.getBaseAxis();"cartesian2d"===p.type?s=m.isHorizontal():"polar"===p.type&&(s="angle"===m.dim);var b=e.isAnimationEnabled()?e:null,_=function(ve,_e){var Ee=ve.get("realtimeSort",!0),ze=_e.getBaseAxis();if(Ee&&"category"===ze.type&&"cartesian2d"===_e.type)return{baseAxis:ze,otherAxis:_e.getOtherAxis(ze)}}(e,p);_&&this._enableRealtimeSort(_,c,o);var S=e.get("clip",!0)||_,k=function(ve,_e){var Ee=ve.getArea&&ve.getArea();if(fb(ve,"cartesian2d")){var ze=ve.getBaseAxis();if("category"!==ze.type||!ze.onBand){var Ge=_e.getLayout("bandWidth");ze.isHorizontal()?(Ee.x-=Ge,Ee.width+=2*Ge):(Ee.y-=Ge,Ee.height+=2*Ge)}}return Ee}(p,c);l.removeClipPath();var D=e.get("roundCap",!0),O=e.get("showBackground",!0),N=e.getModel("backgroundStyle"),F=N.get("borderRadius")||0,V=[],q=this._backgroundEls,Z=i&&i.isInitSort,Q=i&&"changeAxisOrder"===i.type;function re(ve){var ze,_e=aM[p.type](c,ve),Ee=new("polar"===(ze=p).type?Cc:bi)({shape:h_(s,_e,ze),silent:!0,z2:0});return Ee.useStyle(N.getItemStyle()),Ee.setShape("cartesian2d"===p.type?"r":"cornerRadius",F),V[ve]=Ee,Ee}c.diff(d).add(function(ve){var _e=c.getItemModel(ve),Ee=aM[p.type](c,ve,_e);if(O&&re(ve),c.hasValue(ve)&&oS[p.type](Ee)){var ze=!1;S&&(ze=f_[p.type](k,Ee));var Ge=bm[p.type](e,c,ve,Ee,s,b,m.model,!1,D);_&&(Ge.forceLabelAnimation=!0),P1(Ge,c,ve,_e,Ee,e,s,"polar"===p.type),Z?Ge.attr({shape:Ee}):_?qk(_,b,Ge,Ee,ve,s,!1,!1):as(Ge,{shape:Ee},e,ve),c.setItemGraphicEl(ve,Ge),l.add(Ge),Ge.ignore=ze}}).update(function(ve,_e){var Ee=c.getItemModel(ve),ze=aM[p.type](c,ve,Ee);if(O){var Ge=void 0;0===q.length?Ge=re(_e):((Ge=q[_e]).useStyle(N.getItemStyle()),Ge.setShape("cartesian2d"===p.type?"r":"cornerRadius",F),V[ve]=Ge);var Xe=aM[p.type](c,ve);mo(Ge,{shape:h_(s,Xe,p)},b,ve)}var $e=d.getItemGraphicEl(_e);if(c.hasValue(ve)&&oS[p.type](ze)){var nt=!1;if(S&&(nt=f_[p.type](k,ze))&&l.remove($e),$e?md($e):$e=bm[p.type](e,c,ve,ze,s,b,m.model,!!$e,D),_&&($e.forceLabelAnimation=!0),Q){var yt=$e.getTextContent();if(yt){var _t=Jp(yt);null!=_t.prevValue&&(_t.prevValue=_t.value)}}else P1($e,c,ve,Ee,ze,e,s,"polar"===p.type);Z?$e.attr({shape:ze}):_?qk(_,b,$e,ze,ve,s,!0,Q):mo($e,{shape:ze},e,ve,null),c.setItemGraphicEl(ve,$e),$e.ignore=nt,l.add($e)}else l.remove($e)}).remove(function(ve){var _e=d.getItemGraphicEl(ve);_e&&g0(_e,e,ve)}).execute();var he=this._backgroundGroup||(this._backgroundGroup=new xo);he.removeAll();for(var ge=0;ge<V.length;++ge)he.add(V[ge]);l.add(he),this._backgroundEls=V,this._data=c},t.prototype._renderLarge=function(e,r,o){this._clear(),jy(e,this.group),this._updateLargeClip(e)},t.prototype._incrementalRenderLarge=function(e,r){this._removeBackground(),jy(r,this.group,this._progressiveEls,!0)},t.prototype._updateLargeClip=function(e){var r=e.get("clip",!0)&&I1(e.coordinateSystem,!1,e),o=this.group;r?o.setClipPath(r):o.removeClipPath()},t.prototype._enableRealtimeSort=function(e,r,o){var i=this;if(r.count()){var s=e.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(r,e,o),this._isFirstFrame=!1;else{var l=function(c){var d=r.getItemGraphicEl(c),p=d&&d.shape;return p&&Math.abs(s.isHorizontal()?p.height:p.width)||0};this._onRendered=function(){i._updateSortWithinSameData(r,l,s,o)},o.getZr().on("rendered",this._onRendered)}}},t.prototype._dataSort=function(e,r,o){var i=[];return e.each(e.mapDimension(r.dim),function(s,l){var c=o(l);i.push({dataIndex:l,mappedValue:c=null==c?NaN:c,ordinalNumber:s})}),i.sort(function(s,l){return l.mappedValue-s.mappedValue}),{ordinalNumbers:mt(i,function(s){return s.ordinalNumber})}},t.prototype._isOrderChangedWithinSameData=function(e,r,o){for(var i=o.scale,s=e.mapDimension(o.dim),l=Number.MAX_VALUE,c=0,d=i.getOrdinalMeta().categories.length;c<d;++c){var p=e.rawIndexOf(s,i.getRawOrdinalNumber(c)),m=p<0?Number.MIN_VALUE:r(e.indexOfRawIndex(p));if(m>l)return!0;l=m}return!1},t.prototype._isOrderDifferentInView=function(e,r){for(var o=r.scale,i=o.getExtent(),s=Math.max(0,i[0]),l=Math.min(i[1],o.getOrdinalMeta().categories.length-1);s<=l;++s)if(e.ordinalNumbers[s]!==o.getRawOrdinalNumber(s))return!0},t.prototype._updateSortWithinSameData=function(e,r,o,i){if(this._isOrderChangedWithinSameData(e,r,o)){var s=this._dataSort(e,o,r);this._isOrderDifferentInView(s,o)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:o.dim+"Axis",axisId:o.index,sortInfo:s}))}},t.prototype._dispatchInitSort=function(e,r,o){var i=r.baseAxis,s=this._dataSort(e,i,function(l){return e.get(e.mapDimension(r.otherAxis.dim),l)});o.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:s})},t.prototype.remove=function(e,r){this._clear(this._model),this._removeOnRenderedListener(r)},t.prototype.dispose=function(e,r){this._removeOnRenderedListener(r)},t.prototype._removeOnRenderedListener=function(e){this._onRendered&&(e.getZr().off("rendered",this._onRendered),this._onRendered=null)},t.prototype._clear=function(e){var r=this.group,o=this._data;e&&e.isAnimationEnabled()&&o&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],o.eachItemGraphicEl(function(i){g0(i,e,So(i).dataIndex)})):r.removeAll(),this._data=null,this._isFirstFrame=!0},t.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},t.type="bar",t}($a),f_={cartesian2d:function(n,t){var e=t.width<0?-1:1,r=t.height<0?-1:1;e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height);var o=n.x+n.width,i=n.y+n.height,s=iM(t.x,n.x),l=Qc(t.x+t.width,o),c=iM(t.y,n.y),d=Qc(t.y+t.height,i),p=l<s,m=d<c;return t.x=p&&s>o?l:s,t.y=m&&c>i?d:c,t.width=p?0:l-s,t.height=m?0:d-c,e<0&&(t.x+=t.width,t.width=-t.width),r<0&&(t.y+=t.height,t.height=-t.height),p||m},polar:function(n,t){var e=t.r0<=t.r?1:-1;if(e<0){var r=t.r;t.r=t.r0,t.r0=r}var o=Qc(t.r,n.r),i=iM(t.r0,n.r0);t.r=o,t.r0=i;var s=o-i<0;return e<0&&(r=t.r,t.r=t.r0,t.r0=r),s}},bm={cartesian2d:function(n,t,e,r,o,i,s,l,c){var d=new bi({shape:Lt({},r),z2:1});return d.__dataIndex=e,d.name="item",i&&(d.shape[o?"height":"width"]=0),d},polar:function(n,t,e,r,o,i,s,l,c){var d=!o&&c?gl:Cc,p=new d({shape:r,z2:1});p.name="item";var m,b,_=kD(o);if(p.calculateTextPosition=(m=_,b=d===gl,function(D,O,N){var F=O.position;if(!F||F instanceof Array)return dh(D,O,N);var V=m(F),q=null!=O.distance?O.distance:5,Z=this.shape,Q=Z.cx,re=Z.cy,he=Z.r,ge=Z.r0,ve=(he+ge)/2,_e=Z.startAngle,Ee=Z.endAngle,ze=(_e+Ee)/2,Ge=b?Math.abs(he-ge)/2:0,Xe=Math.cos,$e=Math.sin,nt=Q+he*Xe(_e),yt=re+he*$e(_e),_t="left",Et="top";switch(V){case"startArc":nt=Q+(ge-q)*Xe(ze),yt=re+(ge-q)*$e(ze),_t="center",Et="top";break;case"insideStartArc":nt=Q+(ge+q)*Xe(ze),yt=re+(ge+q)*$e(ze),_t="center",Et="bottom";break;case"startAngle":nt=Q+ve*Xe(_e)+Pa(_e,q+Ge,!1),yt=re+ve*$e(_e)+oM(_e,q+Ge,!1),_t="right",Et="middle";break;case"insideStartAngle":nt=Q+ve*Xe(_e)+Pa(_e,-q+Ge,!1),yt=re+ve*$e(_e)+oM(_e,-q+Ge,!1),_t="left",Et="middle";break;case"middle":nt=Q+ve*Xe(ze),yt=re+ve*$e(ze),_t="center",Et="middle";break;case"endArc":nt=Q+(he+q)*Xe(ze),yt=re+(he+q)*$e(ze),_t="center",Et="bottom";break;case"insideEndArc":nt=Q+(he-q)*Xe(ze),yt=re+(he-q)*$e(ze),_t="center",Et="top";break;case"endAngle":nt=Q+ve*Xe(Ee)+Pa(Ee,q+Ge,!0),yt=re+ve*$e(Ee)+oM(Ee,q+Ge,!0),_t="left",Et="middle";break;case"insideEndAngle":nt=Q+ve*Xe(Ee)+Pa(Ee,-q+Ge,!0),yt=re+ve*$e(Ee)+oM(Ee,-q+Ge,!0),_t="right",Et="middle";break;default:return dh(D,O,N)}return(D=D||{}).x=nt,D.y=yt,D.align=_t,D.verticalAlign=Et,D}),i){var S=o?"r":"endAngle",k={};p.shape[S]=o?r.r0:r.startAngle,k[S]=r[S],(l?mo:as)(p,{shape:k},i)}return p}};function qk(n,t,e,r,o,i,s,l){var c,d;i?(d={x:r.x,width:r.width},c={y:r.y,height:r.height}):(d={y:r.y,height:r.height},c={x:r.x,width:r.width}),l||(s?mo:as)(e,{shape:c},t,o,null),(s?mo:as)(e,{shape:d},t?n.baseAxis.model:null,o)}function E1(n,t){for(var e=0;e<t.length;e++)if(!isFinite(n[t[e]]))return!0;return!1}var Xk=["x","y","width","height"],d_=["cx","cy","r","startAngle","endAngle"],oS={cartesian2d:function(n){return!E1(n,Xk)},polar:function(n){return!E1(n,d_)}},aM={cartesian2d:function(n,t,e){var r=n.getItemLayout(t),o=e?function(l,c){var d=l.get(["itemStyle","borderColor"]);if(!d||"none"===d)return 0;var p=l.get(["itemStyle","borderWidth"])||0,m=isNaN(c.width)?Number.MAX_VALUE:Math.abs(c.width),b=isNaN(c.height)?Number.MAX_VALUE:Math.abs(c.height);return Math.min(p,m,b)}(e,r):0,i=r.width>0?1:-1,s=r.height>0?1:-1;return{x:r.x+i*o/2,y:r.y+s*o/2,width:r.width-i*o,height:r.height-s*o}},polar:function(n,t,e){var r=n.getItemLayout(t);return{cx:r.cx,cy:r.cy,r0:r.r0,r:r.r,startAngle:r.startAngle,endAngle:r.endAngle,clockwise:r.clockwise}}};function kD(n){return function(t){var e=t?"Arc":"Angle";return function(r){switch(r){case"start":case"insideStart":case"end":case"insideEnd":return r+e;default:return r}}}(n)}function P1(n,t,e,r,o,i,s,l){var c=t.getItemVisual(e,"style");if(l){if(!i.get("roundCap")){var d=n.shape;Lt(d,Hh(r.getModel("itemStyle"),d,!0)),n.setShape(d)}}else{var p=r.get(["itemStyle","borderRadius"])||0;n.setShape("r",p)}n.useStyle(c);var m=r.getShallow("cursor");m&&n.attr("cursor",m);var b=l?s?o.r>=o.r0?"endArc":"startArc":o.endAngle>=o.startAngle?"endAngle":"startAngle":s?o.height>=0?"bottom":"top":o.width>=0?"right":"left",_=gs(r);ps(n,_,{labelFetcher:i,labelDataIndex:e,defaultText:qf(i.getData(),e),inheritColor:c.fill,defaultOpacity:c.opacity,defaultOutsidePosition:b});var S=n.getTextContent();if(l&&S){var k=r.get(["label","position"]);n.textConfig.inside="middle"===k||null,function(O,N,F,V){if(gr(V))O.setTextConfig({rotation:V});else if(Ue(N))O.setTextConfig({rotation:0});else{var q,Z=O.shape,Q=Z.clockwise?Z.startAngle:Z.endAngle,re=Z.clockwise?Z.endAngle:Z.startAngle,he=(Q+re)/2,ge=F(N);switch(ge){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":q=he;break;case"startAngle":case"insideStartAngle":q=Q;break;case"endAngle":case"insideEndAngle":q=re;break;default:return void O.setTextConfig({rotation:0})}var ve=1.5*Math.PI-q;"middle"===ge&&ve>Math.PI/2&&ve<1.5*Math.PI&&(ve-=Math.PI),O.setTextConfig({rotation:ve})}}(n,"outside"===k?b:k,kD(s),r.get(["label","rotate"]))}jl(S,_,i.getRawValue(e),function(O){return QC(t,O)});var O,D=r.getModel(["emphasis"]);vu(n,D.get("focus"),D.get("blurScope"),D.get("disabled")),kl(n,r),null!=(O=o).startAngle&&null!=O.endAngle&&O.startAngle===O.endAngle&&(n.style.fill="none",n.style.stroke="none",Ce(n.states,function(O){O.style&&(O.style.fill=O.style.stroke="none")}))}var Q2=function(){},R1=function(n){function t(e){var r=n.call(this,e)||this;return r.type="largeBar",r}return gt(t,n),t.prototype.getDefaultShape=function(){return new Q2},t.prototype.buildPath=function(e,r){for(var o=r.points,i=this.baseDimIdx,s=1-this.baseDimIdx,l=[],c=[],d=this.barWidth,p=0;p<o.length;p+=3)c[i]=d,c[s]=o[p+2],l[i]=o[p+i],l[s]=o[p+s],e.rect(l[0],l[1],c[0],c[1])},t}(Go);function jy(n,t,e,r){var o=n.getData(),i=o.getLayout("valueAxisHorizontal")?1:0,s=o.getLayout("largeDataIndices"),l=o.getLayout("size"),c=n.getModel("backgroundStyle"),d=o.getLayout("largeBackgroundPoints");if(d){var p=new R1({shape:{points:d},incremental:!!r,silent:!0,z2:0});p.baseDimIdx=i,p.largeDataIndices=s,p.barWidth=l,p.useStyle(c.getItemStyle()),t.add(p),e&&e.push(p)}var m=new R1({shape:{points:o.getLayout("largePoints")},incremental:!!r,ignoreCoarsePointer:!0,z2:1});m.baseDimIdx=i,m.largeDataIndices=s,m.barWidth=l,t.add(m),m.useStyle(o.getVisual("style")),So(m).seriesIndex=n.seriesIndex,n.get("silent")||(m.on("mousedown",L1),m.on("mousemove",L1)),e&&e.push(m)}var L1=aw(function(n){var t=function(e,r,o){for(var i=e.baseDimIdx,s=1-i,l=e.shape.points,c=e.largeDataIndices,d=[],p=[],m=e.barWidth,b=0,_=l.length/3;b<_;b++){var S=3*b;if(p[i]=m,p[s]=l[S+2],d[i]=l[S+i],d[s]=l[S+s],p[s]<0&&(d[s]+=p[s],p[s]=-p[s]),r>=d[0]&&r<=d[0]+p[0]&&o>=d[1]&&o<=d[1]+p[1])return c[b]}return-1}(this,n.offsetX,n.offsetY);So(this).dataIndex=t>=0?t:null},30,!1);function h_(n,t,e){if(fb(e,"cartesian2d")){var r=t,o=e.getArea();return{x:n?r.x:o.x,y:n?o.y:r.y,width:n?r.width:o.width,height:n?o.height:r.height}}var i=t;return{cx:(o=e.getArea()).cx,cy:o.cy,r0:n?o.r0:i.r0,r:n?o.r:i.r,startAngle:n?i.startAngle:0,endAngle:n?i.endAngle:2*Math.PI}}var N1=2*Math.PI,Bv=Math.PI/180;function iS(n,t){return tl(n.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function sM(n,t){var e=iS(n,t),r=n.get("center"),o=n.get("radius");Ue(o)||(o=[0,o]);var i,s,l=qn(e.width,t.getWidth()),c=qn(e.height,t.getHeight()),d=Math.min(l,c),p=qn(o[0],d/2),m=qn(o[1],d/2),b=n.coordinateSystem;if(b){var _=b.dataToPoint(r);i=_[0]||0,s=_[1]||0}else Ue(r)||(r=[r,r]),i=qn(r[0],l)+e.x,s=qn(r[1],c)+e.y;return{cx:i,cy:s,r0:p,r:m}}function uM(n,t,e){t.eachSeriesByType(n,function(r){var o=r.getData(),i=o.mapDimension("value"),s=iS(r,e),l=sM(r,e),c=l.cx,d=l.cy,p=l.r,m=l.r0,b=-r.get("startAngle")*Bv,_=r.get("minAngle")*Bv,S=0;o.each(i,function(ge){!isNaN(ge)&&S++});var k=o.getSum(i),D=Math.PI/(k||S)*2,O=r.get("clockwise"),N=r.get("roseType"),F=r.get("stillShowZeroSum"),V=o.getDataExtent(i);V[0]=0;var q=N1,Z=0,Q=b,re=O?1:-1;if(o.setLayout({viewRect:s,r:p}),o.each(i,function(ge,ve){var _e;if(isNaN(ge))o.setItemLayout(ve,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:O,cx:c,cy:d,r0:m,r:N?NaN:p});else{(_e="area"!==N?0===k&&F?D:ge*D:N1/S)<_?(_e=_,q-=_):Z+=ge;var Ee=Q+re*_e;o.setItemLayout(ve,{angle:_e,startAngle:Q,endAngle:Ee,clockwise:O,cx:c,cy:d,r0:m,r:N?fa(ge,V,[m,p]):p}),Q=Ee}}),q<N1&&S)if(q<=.001){var he=N1/S;o.each(i,function(ge,ve){if(!isNaN(ge)){var _e=o.getItemLayout(ve);_e.angle=he,_e.startAngle=b+re*ve*he,_e.endAngle=b+re*(ve+1)*he}})}else D=q/Z,Q=b,o.each(i,function(ge,ve){if(!isNaN(ge)){var _e=o.getItemLayout(ve),Ee=_e.angle===_?_:ge*D;_e.startAngle=Q,_e.endAngle=Q+re*Ee,Q+=re*Ee}})})}function wu(n){return{seriesType:n,reset:function(t,e){var r=e.findComponents({mainType:"legend"});if(r&&r.length){var o=t.getData();o.filterSelf(function(i){for(var s=o.getName(i),l=0;l<r.length;l++)if(!r[l].isSelected(s))return!1;return!0})}}}}var TD=Math.PI/180;function aS(n,t,e,r,o,i,s,l,c,d){if(!(n.length<2)){for(var p=n.length,m=0;m<p;m++)"outer"===n[m].position&&"labelLine"===n[m].labelAlignTo&&(n[m].linePoints[1][0]+=n[m].label.x-d,n[m].label.x=d);oh(n,c,c+s)&&function(S){for(var k={list:[],maxY:0},D={list:[],maxY:0},O=0;O<S.length;O++)if("none"===S[O].labelAlignTo){var N=S[O],F=N.label.y>e?D:k,V=Math.abs(N.label.y-e);if(V>=F.maxY){var q=N.label.x-t-N.len2*o,Z=r+N.len,Q=Math.abs(q)<Z?Math.sqrt(V*V/(1-q*q/Z/Z)):Z;F.rB=Q,F.maxY=V}F.list.push(N)}_(k),_(D)}(n)}function _(S){for(var k=S.rB,D=k*k,O=0;O<S.list.length;O++){var N=S.list[O],F=Math.abs(N.label.y-e),V=r+N.len,q=V*V,Z=Math.sqrt((1-Math.abs(F*F/D))*q),Q=t+(Z+N.len2)*o;p_(N,N.targetTextWidth-(Q-N.label.x)*o,!0),N.label.x=Q}}}function p_(n,t,e){if(void 0===e&&(e=!1),null==n.labelStyleWidth){var r=n.label,o=r.style,i=n.rect,s=o.backgroundColor,l=o.padding,c=l?l[1]+l[3]:0,d=o.overflow,p=i.width+(s?0:c);if(t<p||e){var m=i.height;if(d&&d.match("break")){r.setStyle("backgroundColor",null),r.setStyle("width",t-c);var b=r.getBoundingRect();r.setStyle("width",Math.ceil(b.width)),r.setStyle("backgroundColor",s)}else{var _=t-c;r.setStyle("width",t<p?_:e?_>n.unconstrainedWidth?null:_:null)}var k=r.getBoundingRect();i.width=k.width,i.height=k.height+((r.style.margin||0)+2.1),i.y-=(i.height-m)/2}}}function g_(n){return"center"===n.position}var Zk=function(n){function t(e,r,o){var i=n.call(this)||this;i.z2=2;var s=new Oi;return i.setTextContent(s),i.updateData(e,r,o,!0),i}return gt(t,n),t.prototype.updateData=function(e,r,o,i){var s=this,l=e.hostModel,c=e.getItemModel(r),d=c.getModel("emphasis"),p=e.getItemLayout(r),m=Lt(Hh(c.getModel("itemStyle"),p,!0),p);if(isNaN(m.startAngle))s.setShape(m);else{if(i){s.setShape(m);var b=l.getShallow("animationType");l.ecModel.ssr?(as(s,{scaleX:0,scaleY:0},l,{dataIndex:r,isFrom:!0}),s.originX=m.cx,s.originY=m.cy):"scale"===b?(s.shape.r=p.r0,as(s,{shape:{r:p.r}},l,r)):null!=o?(s.setShape({startAngle:o,endAngle:o}),as(s,{shape:{startAngle:p.startAngle,endAngle:p.endAngle}},l,r)):(s.shape.endAngle=p.startAngle,mo(s,{shape:{endAngle:p.endAngle}},l,r))}else md(s),mo(s,{shape:m},l,r);s.useStyle(e.getItemVisual(r,"style")),kl(s,c);var _=(p.startAngle+p.endAngle)/2,S=l.get("selectedOffset"),k=Math.cos(_)*S,D=Math.sin(_)*S,O=c.getShallow("cursor");O&&s.attr("cursor",O),this._updateLabel(l,e,r),s.ensureState("emphasis").shape=Lt({r:p.r+(d.get("scale")&&d.get("scaleSize")||0)},Hh(d.getModel("itemStyle"),p)),Lt(s.ensureState("select"),{x:k,y:D,shape:Hh(c.getModel(["select","itemStyle"]),p)}),Lt(s.ensureState("blur"),{shape:Hh(c.getModel(["blur","itemStyle"]),p)});var N=s.getTextGuideLine(),F=s.getTextContent();N&&Lt(N.ensureState("select"),{x:k,y:D}),Lt(F.ensureState("select"),{x:k,y:D}),vu(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))}},t.prototype._updateLabel=function(e,r,o){var i=this,s=r.getItemModel(o),l=s.getModel("labelLine"),c=r.getItemVisual(o,"style"),d=c&&c.fill,p=c&&c.opacity;ps(i,gs(s),{labelFetcher:r.hostModel,labelDataIndex:o,inheritColor:d,defaultOpacity:p,defaultText:e.getFormattedLabel(o,"normal")||r.getName(o)});var m=i.getTextContent();i.setTextConfig({position:null,rotation:null}),m.attr({z2:10});var b=e.get(["label","position"]);if("outside"!==b&&"outer"!==b)i.removeTextGuideLine();else{var _=this.getTextGuideLine();_||(_=new Qu,this.setTextGuideLine(_)),_1(this,qw(s),{stroke:d,opacity:rn(l.get(["lineStyle","opacity"]),p,1)})}},t}(Cc),Kk=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return gt(t,n),t.prototype.render=function(e,r,o,i){var s,l=e.getData(),c=this._data,d=this.group;if(!c&&l.count()>0){for(var p=l.getItemLayout(0),m=1;isNaN(p&&p.startAngle)&&m<l.count();++m)p=l.getItemLayout(m);p&&(s=p.startAngle)}if(this._emptyCircleSector&&d.remove(this._emptyCircleSector),0===l.count()&&e.get("showEmptyCircle")){var b=new Cc({shape:sM(e,o)});b.useStyle(e.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=b,d.add(b)}l.diff(c).add(function(_){var S=new Zk(l,_,s);l.setItemGraphicEl(_,S),d.add(S)}).update(function(_,S){var k=c.getItemGraphicEl(S);k.updateData(l,_,s),k.off("click"),d.add(k),l.setItemGraphicEl(_,k)}).remove(function(_){g0(c.getItemGraphicEl(_),e,_)}).execute(),function DD(n){var t,e,r=n.getData(),o=[],i=!1,s=(n.get("minShowLabelAngle")||0)*TD,l=r.getLayout("viewRect"),c=r.getLayout("r"),d=l.width,p=l.x,m=l.y,b=l.height;function _(q){q.ignore=!0}r.each(function(q){var Z=r.getItemGraphicEl(q),Q=Z.shape,re=Z.getTextContent(),he=Z.getTextGuideLine(),ge=r.getItemModel(q),ve=ge.getModel("label"),_e=ve.get("position")||ge.get(["emphasis","label","position"]),Ee=ve.get("distanceToLabelLine"),ze=ve.get("alignTo"),Ge=qn(ve.get("edgeDistance"),d),Xe=ve.get("bleedMargin"),$e=ge.getModel("labelLine"),nt=$e.get("length");nt=qn(nt,d);var yt=$e.get("length2");if(yt=qn(yt,d),Math.abs(Q.endAngle-Q.startAngle)<s)return Ce(re.states,_),re.ignore=!0,void(he&&(Ce(he.states,_),he.ignore=!0));if(function(nl){if(!nl.ignore)return!0;for(var td in nl.states)if(!1===nl.states[td].ignore)return!0;return!1}(re)){var _t,Et,hn,Zn,Rt=(Q.startAngle+Q.endAngle)/2,Mn=Math.cos(Rt),lr=Math.sin(Rt);t=Q.cx,e=Q.cy;var ar="inside"===_e||"inner"===_e;if("center"===_e)_t=Q.cx,Et=Q.cy,Zn="center";else{var Kn=(ar?(Q.r+Q.r0)/2*Mn:Q.r*Mn)+t,xr=(ar?(Q.r+Q.r0)/2*lr:Q.r*lr)+e;if(_t=Kn+3*Mn,Et=xr+3*lr,!ar){var nr=Kn+Mn*(nt+c-Q.r),Cr=xr+lr*(nt+c-Q.r),zr=nr+(Mn<0?-1:1)*yt;_t="edge"===ze?Mn<0?p+Ge:p+d-Ge:zr+(Mn<0?-Ee:Ee),Et=Cr,hn=[[Kn,xr],[nr,Cr],[zr,Cr]]}Zn=ar?"center":"edge"===ze?Mn>0?"right":"left":Mn>0?"left":"right"}var qo=Math.PI,li=0,ss=ve.get("rotate");if(gr(ss))li=ss*(qo/180);else if("center"===_e)li=0;else if("radial"===ss||!0===ss)li=Mn<0?-Rt+qo:-Rt;else if("tangential"===ss&&"outside"!==_e&&"outer"!==_e){var ji=Math.atan2(Mn,lr);ji<0&&(ji=2*qo+ji),lr>0&&(ji=qo+ji),li=ji-qo}if(i=!!li,re.x=_t,re.y=Et,re.rotation=li,re.setStyle({verticalAlign:"middle"}),ar){re.setStyle({align:Zn});var pa=re.states.select;pa&&(pa.x+=re.x,pa.y+=re.y)}else{var za=re.getBoundingRect().clone();za.applyTransform(re.getComputedTransform());var Bu=(re.style.margin||0)+2.1;za.y-=Bu/2,za.height+=Bu,o.push({label:re,labelLine:he,position:_e,len:nt,len2:yt,minTurnAngle:$e.get("minTurnAngle"),maxSurfaceAngle:$e.get("maxSurfaceAngle"),surfaceNormal:new lo(Mn,lr),linePoints:hn,textAlign:Zn,labelDistance:Ee,labelAlignTo:ze,edgeDistance:Ge,bleedMargin:Xe,rect:za,unconstrainedWidth:za.width,labelStyleWidth:re.style.width})}Z.setTextConfig({inside:ar})}}),!i&&n.get("avoidLabelOverlap")&&function(q,Z,Q,re,he,ge,ve,_e){for(var Ee=[],ze=[],Ge=Number.MAX_VALUE,Xe=-Number.MAX_VALUE,$e=0;$e<q.length;$e++){var nt=q[$e].label;g_(q[$e])||(nt.x<Z?(Ge=Math.min(Ge,nt.x),Ee.push(q[$e])):(Xe=Math.max(Xe,nt.x),ze.push(q[$e])))}for($e=0;$e<q.length;$e++)if(!g_(Et=q[$e])&&Et.linePoints){if(null!=Et.labelStyleWidth)continue;nt=Et.label;var _t,yt=Et.linePoints;Et.targetTextWidth=_t="edge"===Et.labelAlignTo?nt.x<Z?yt[2][0]-Et.labelDistance-ve-Et.edgeDistance:ve+he-Et.edgeDistance-yt[2][0]-Et.labelDistance:"labelLine"===Et.labelAlignTo?nt.x<Z?Ge-ve-Et.bleedMargin:ve+he-Xe-Et.bleedMargin:nt.x<Z?nt.x-ve-Et.bleedMargin:ve+he-nt.x-Et.bleedMargin,p_(Et,_t)}for(aS(ze,Z,Q,re,1,0,ge,0,_e,Xe),aS(Ee,Z,Q,re,-1,0,ge,0,_e,Ge),$e=0;$e<q.length;$e++){var Et;if(!g_(Et=q[$e])&&Et.linePoints){var Zn=(nt=Et.label).style.padding,lr=Et.rect.width+(nt.style.backgroundColor?0:Zn?Zn[1]+Zn[3]:0),ar=(yt=Et.linePoints)[1][0]-yt[2][0];"edge"===Et.labelAlignTo?yt[2][0]=nt.x<Z?ve+Et.edgeDistance+lr+Et.labelDistance:ve+he-Et.edgeDistance-lr-Et.labelDistance:(yt[2][0]=nt.x<Z?nt.x+Et.labelDistance:nt.x-Et.labelDistance,yt[1][0]=yt[2][0]+ar),yt[1][1]=yt[2][1]=nt.y}}}(o,t,e,c,d,b,p,m);for(var S=0;S<o.length;S++){var k=o[S],D=k.label,O=k.labelLine,N=isNaN(D.x)||isNaN(D.y);if(D){D.setStyle({align:k.textAlign}),N&&(Ce(D.states,_),D.ignore=!0);var F=D.states.select;F&&(F.x+=D.x,F.y+=D.y)}if(O){var V=k.linePoints;N||!V?(Ce(O.states,_),O.ignore=!0):(Yw(V,k.minTurnAngle),nb(V,k.surfaceNormal,k.maxSurfaceAngle),O.setShape({points:V}),D.__hostTarget.textGuideLineConfig={anchor:new lo(V[0][0],V[0][1])})}}}(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=l)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,r){var o=r.getData().getItemLayout(0);if(o){var i=e[0]-o.cx,s=e[1]-o.cy,l=Math.sqrt(i*i+s*s);return l<=o.r&&l>=o.r0}},t.type="pie",t}($a);function a(n,t,e){t=Ue(t)&&{coordDimensions:t}||Lt({encodeDefine:n.getEncode()},t);var r=n.getSource(),o=_v(r,t).dimensions,i=new Jc(o,n);return i.initData(r,e),i}var f=function(){function n(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return n.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},n.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},n.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},n.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},n}(),g=hi(),x=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new f(De(this.getData,this),De(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.mergeOption=function(){n.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return a(this,{coordDimensions:["value"],encodeDefaulter:dr(wt,this)})},t.prototype.getDataParams=function(e){var r=this.getData(),o=g(r),i=o.seats;if(!i){var s=[];r.each(r.mapDimension("value"),function(c){s.push(c)}),i=o.seats=rc(s,r.hostModel.get("percentPrecision"))}var l=n.prototype.getDataParams.call(this,e);return l.percent=i[e]||0,l.$vars.push("percent"),l},t.prototype._defaultLabelLine=function(e){hs(e,"labelLine",["show"]);var r=e.labelLine,o=e.emphasis.labelLine;r.show=r.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(Ka),C=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return gt(t,n),t.prototype.getInitialData=function(e,r){return lm(null,this,{useEncodeDefaulter:!0})},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},t.prototype.brushSelector=function(e,r,o){return o.point(r.getItemLayout(e))},t.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},t.type="series.scatter",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},t}(Ka),I=function(){},L=function(n){function t(e){var r=n.call(this,e)||this;return r._off=0,r.hoverDataIdx=-1,r}return gt(t,n),t.prototype.getDefaultShape=function(){return new I},t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.buildPath=function(e,r){var o,i=r.points,s=r.size,l=this.symbolProxy,c=l.shape,d=e.getContext?e.getContext():e,m=this.softClipShape;if(d&&s[0]<4)this._ctx=d;else{for(this._ctx=null,o=this._off;o<i.length;){var b=i[o++],_=i[o++];isNaN(b)||isNaN(_)||m&&!m.contain(b,_)||(c.x=b-s[0]/2,c.y=_-s[1]/2,c.width=s[0],c.height=s[1],l.buildPath(e,c,!0))}this.incremental&&(this._off=o,this.notClear=!0)}},t.prototype.afterBrush=function(){var e,r=this.shape,o=r.points,i=r.size,s=this._ctx,l=this.softClipShape;if(s){for(e=this._off;e<o.length;){var c=o[e++],d=o[e++];isNaN(c)||isNaN(d)||l&&!l.contain(c,d)||s.fillRect(c-i[0]/2,d-i[1]/2,i[0],i[1])}this.incremental&&(this._off=e,this.notClear=!0)}},t.prototype.findDataIndex=function(e,r){for(var o=this.shape,i=o.points,s=o.size,l=Math.max(s[0],4),c=Math.max(s[1],4),d=i.length/2-1;d>=0;d--){var p=2*d,m=i[p]-l/2,b=i[p+1]-c/2;if(e>=m&&r>=b&&e<=m+l&&r<=b+c)return d}return-1},t.prototype.contain=function(e,r){var o=this.transformCoordToLocal(e,r);return this.getBoundingRect().contain(e=o[0],r=o[1])?(this.hoverDataIdx=this.findDataIndex(e,r))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var r=this.shape,o=r.points,i=r.size,s=i[0],l=i[1],c=1/0,d=1/0,p=-1/0,m=-1/0,b=0;b<o.length;){var _=o[b++],S=o[b++];c=Math.min(_,c),p=Math.max(_,p),d=Math.min(S,d),m=Math.max(S,m)}e=this._rect=new Io(c-s/2,d-l/2,p-c+s,m-d+l)}return e},t}(Go),z=function(){function n(){this.group=new xo}return n.prototype.updateData=function(t,e){this._clear();var r=this._create();r.setShape({points:t.getLayout("points")}),this._setCommon(r,t,e)},n.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild(function(r){null!=r.startIndex&&(e=new Float32Array(e.buffer,4*r.startIndex*2,2*(r.endIndex-r.startIndex))),r.setShape("points",e),r.reset()})},n.prototype.incrementalPrepareUpdate=function(t){this._clear()},n.prototype.incrementalUpdate=function(t,e,r){var o=this._newAdded[0],i=e.getLayout("points"),s=o&&o.shape.points;if(s&&s.length<2e4){var l=s.length,c=new Float32Array(l+i.length);c.set(s),c.set(i,l),o.endIndex=t.end,o.setShape({points:c})}else{this._newAdded=[];var d=this._create();d.startIndex=t.start,d.endIndex=t.end,d.incremental=!0,d.setShape({points:i}),this._setCommon(d,e,r)}},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new L({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},n.prototype._setCommon=function(t,e,r){var o=e.hostModel;r=r||{};var i=e.getVisual("symbolSize");t.setShape("size",i instanceof Array?i:[i,i]),t.softClipShape=r.clipShape||null,t.symbolProxy=Dl(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var s=t.shape.size[0]<4;t.useStyle(o.getModel("itemStyle").getItemStyle(s?["color","shadowBlur","shadowColor"]:["color"]));var l=e.getVisual("style"),c=l&&l.fill;c&&t.setColor(c);var d=So(t);d.seriesIndex=o.seriesIndex,t.on("mousemove",function(p){d.dataIndex=null;var m=t.hoverDataIdx;m>=0&&(d.dataIndex=m+(t.startIndex||0))})},n.prototype.remove=function(){this._clear()},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),j=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){var i=e.getData();this._updateSymbolDraw(i,e).updateData(i,{clipShape:this._getClipShape(e)}),this._finished=!0},t.prototype.incrementalPrepareRender=function(e,r,o){var i=e.getData();this._updateSymbolDraw(i,e).incrementalPrepareUpdate(i),this._finished=!1},t.prototype.incrementalRender=function(e,r,o){this._symbolDraw.incrementalUpdate(e,r.getData(),{clipShape:this._getClipShape(r)}),this._finished=e.end===r.getData().count()},t.prototype.updateTransform=function(e,r,o){var i=e.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var s=Uy("").reset(e,r,o);s.progress&&s.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},t.prototype.eachRendered=function(e){this._symbolDraw&&this._symbolDraw.eachRendered(e)},t.prototype._getClipShape=function(e){var r=e.coordinateSystem,o=r&&r.getArea&&r.getArea();return e.get("clip",!0)?o:null},t.prototype._updateSymbolDraw=function(e,r){var o=this._symbolDraw,i=r.pipelineContext.large;return o&&i===this._isLargeDraw||(o&&o.remove(),o=this._symbolDraw=i?new z:new lb,this._isLargeDraw=i,this.group.removeAll()),this.group.add(o.group),o},t.prototype.remove=function(e,r){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},t.prototype.dispose=function(){},t.type="scatter",t}($a),G=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.type="grid",t.dependencies=["xAxis","yAxis"],t.layoutMode="box",t.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},t}(W),te=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",ll).models[0]},t.type="cartesian2dAxis",t}(W);na(te,Q0);var K={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},ie=ln({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},K),le=ln({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},K),pe={category:ie,value:le,time:ln({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},le),log:Yn({logBase:10},le)},me={value:1,category:1,time:1,log:1};function xe(n,t,e,r){Ce(me,function(o,i){var s=ln(ln({},pe[i],!0),r,!0),l=function(c){function d(){var p=null!==c&&c.apply(this,arguments)||this;return p.type=t+"Axis."+i,p}return gt(d,c),d.prototype.mergeDefaultAndTheme=function(p,m){var b=ig(this),_=b?tm(p):{};ln(p,m.getTheme().get(i+"Axis")),ln(p,this.getDefaultOption()),p.type=be(p),b&&em(p,_,b)},d.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=q0.createByAxisModel(this))},d.prototype.getCategories=function(p){var m=this.option;if("category"===m.type)return p?m.data:this.__ordinalMeta.categories},d.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},d.type=t+"Axis."+i,d.defaultOption=s,d}(e);n.registerComponentModel(l)}),n.registerSubTypeDefaulter(t+"Axis",be)}function be(n){return n.type||(n.data?"category":"value")}var Ae=function(){function n(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return n.prototype.getAxis=function(t){return this._axes[t]},n.prototype.getAxes=function(){return mt(this._dimList,function(t){return this._axes[t]},this)},n.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),yo(this.getAxes(),function(e){return e.scale.type===t})},n.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},n}(),Le=["x","y"];function Je(n){return"interval"===n.type||"time"===n.type}var pt=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=Le,e}return gt(t,n),t.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var e=this.getAxis("x").scale,r=this.getAxis("y").scale;if(Je(e)&&Je(r)){var o=e.getExtent(),i=r.getExtent(),s=this.dataToPoint([o[0],i[0]]),l=this.dataToPoint([o[1],i[1]]),c=o[1]-o[0],d=i[1]-i[0];if(c&&d){var p=(l[0]-s[0])/c,m=(l[1]-s[1])/d,S=this._transform=[p,0,0,m,s[0]-o[0]*p,s[1]-i[0]*m];this._invTransform=It([],S)}}},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},t.prototype.containPoint=function(e){var r=this.getAxis("x"),o=this.getAxis("y");return r.contain(r.toLocalCoord(e[0]))&&o.contain(o.toLocalCoord(e[1]))},t.prototype.containData=function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},t.prototype.containZone=function(e,r){var o=this.dataToPoint(e),i=this.dataToPoint(r),s=this.getArea(),l=new Io(o[0],o[1],i[0]-o[0],i[1]-o[1]);return s.intersect(l)},t.prototype.dataToPoint=function(e,r,o){o=o||[];var i=e[0],s=e[1];if(this._transform&&null!=i&&isFinite(i)&&null!=s&&isFinite(s))return gn(o,e,this._transform);var l=this.getAxis("x"),c=this.getAxis("y");return o[0]=l.toGlobalCoord(l.dataToCoord(i,r)),o[1]=c.toGlobalCoord(c.dataToCoord(s,r)),o},t.prototype.clampData=function(e,r){var o=this.getAxis("x").scale,i=this.getAxis("y").scale,s=o.getExtent(),l=i.getExtent(),c=o.parse(e[0]),d=i.parse(e[1]);return(r=r||[])[0]=Math.min(Math.max(Math.min(s[0],s[1]),c),Math.max(s[0],s[1])),r[1]=Math.min(Math.max(Math.min(l[0],l[1]),d),Math.max(l[0],l[1])),r},t.prototype.pointToData=function(e,r){var o=[];if(this._invTransform)return gn(o,e,this._invTransform);var i=this.getAxis("x"),s=this.getAxis("y");return o[0]=i.coordToData(i.toLocalCoord(e[0]),r),o[1]=s.coordToData(s.toLocalCoord(e[1]),r),o},t.prototype.getOtherAxis=function(e){return this.getAxis("x"===e.dim?"y":"x")},t.prototype.getArea=function(){var e=this.getAxis("x").getGlobalExtent(),r=this.getAxis("y").getGlobalExtent(),o=Math.min(e[0],e[1]),i=Math.min(r[0],r[1]),s=Math.max(e[0],e[1])-o,l=Math.max(r[0],r[1])-i;return new Io(o,i,s,l)},t}(Ae),Be=function(n){function t(e,r,o,i,s){var l=n.call(this,e,r,o)||this;return l.index=0,l.type=i||"value",l.position=s||"bottom",l}return gt(t,n),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.getGlobalExtent=function(e){var r=this.getExtent();return r[0]=this.toGlobalCoord(r[0]),r[1]=this.toGlobalCoord(r[1]),e&&r[0]>r[1]&&r.reverse(),r},t.prototype.pointToData=function(e,r){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),r)},t.prototype.setCategorySortInfo=function(e){if("category"!==this.type)return!1;this.model.option.categorySortInfo=e,this.scale.setSortInfo(e)},t}(th);function je(n,t,e){e=e||{};var r=n.coordinateSystem,o=t.axis,i={},s=o.getAxesOnZeroOf()[0],l=o.position,c=s?"onZero":l,d=o.dim,p=r.getRect(),m=[p.x,p.x+p.width,p.y,p.y+p.height],b={left:0,right:1,top:0,bottom:1,onZero:2},_=t.get("offset")||0,S="x"===d?[m[2]-_,m[3]+_]:[m[0]-_,m[1]+_];if(s){var k=s.toGlobalCoord(s.dataToCoord(0));S[b.onZero]=Math.max(Math.min(k,S[1]),S[0])}i.position=["y"===d?S[b[c]]:m[0],"x"===d?S[b[c]]:m[3]],i.rotation=Math.PI/2*("x"===d?0:1),i.labelDirection=i.tickDirection=i.nameDirection={top:-1,bottom:1,left:-1,right:1}[l],i.labelOffset=s?S[b[l]]-S[b.onZero]:0,t.get(["axisTick","inside"])&&(i.tickDirection=-i.tickDirection),Hn(e.labelInside,t.get(["axisLabel","inside"]))&&(i.labelDirection=-i.labelDirection);var D=t.get(["axisLabel","rotate"]);return i.labelRotate="top"===c?-D:D,i.z2=1,i}function et(n){return"cartesian2d"===n.get("coordinateSystem")}function At(n){var t={xAxisModel:null,yAxisModel:null};return Ce(t,function(e,r){var o=r.replace(/Model$/,""),i=n.getReferringComponents(o,ll).models[0];t[r]=i}),t}var Nt=Math.log;function Kt(n,t,e){var r=Cv.prototype,o=r.getTicks.call(e),i=r.getTicks.call(e,!0),s=o.length-1,l=r.getInterval.call(e),c=Bw(n,t),d=c.extent,p=c.fixMin,m=c.fixMax;if("log"===n.type){var b=Nt(n.base);d=[Nt(d[0])/b,Nt(d[1])/b]}n.setExtent(d[0],d[1]),n.calcNiceExtent({splitNumber:s,fixMin:p,fixMax:m});var _=r.getExtent.call(n);p&&(d[0]=_[0]),m&&(d[1]=_[1]);var S=r.getInterval.call(n),k=d[0],D=d[1];if(p&&m)S=(D-k)/s;else if(p)for(D=d[0]+S*s;D<d[1]&&isFinite(D)&&isFinite(d[1]);)S=wv(S),D=d[0]+S*s;else if(m)for(k=d[1]-S*s;k>d[0]&&isFinite(k)&&isFinite(d[0]);)S=wv(S),k=d[1]-S*s;else{n.getTicks().length-1>s&&(S=wv(S));var O=S*s;(k=yi((D=Math.ceil(d[1]/S)*S)-O))<0&&d[0]>=0?(k=0,D=yi(O)):D>0&&d[1]<=0&&(D=0,k=-yi(O))}var N=(o[0].value-i[0].value)/l,F=(o[s].value-i[s].value)/l;r.setExtent.call(n,k+S*N,D+S*F),r.setInterval.call(n,S),(N||F)&&r.setNiceExtent.call(n,k+S,D-S)}var Yt=function(){function n(t,e,r){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=Le,this._initCartesian(t,e,r),this.model=t}return n.prototype.getRect=function(){return this._rect},n.prototype.update=function(t,e){var r=this._axesMap;function o(s){var l,c=rr(s),d=c.length;if(d){for(var p=[],m=d-1;m>=0;m--){var b=s[+c[m]],_=b.model,S=b.scale;cg(S)&&_.get("alignTicks")&&null==_.get("interval")?p.push(b):(dp(S,_),cg(S)&&(l=b))}p.length&&(l||dp((l=p.pop()).scale,l.model),Ce(p,function(k){Kt(k.scale,k.model,l.scale)}))}}this._updateScale(t,this.model),o(r.x),o(r.y);var i={};Ce(r.x,function(s){vt(r,"y",s,i)}),Ce(r.y,function(s){vt(r,"x",s,i)}),this.resize(this.model,e)},n.prototype.resize=function(t,e,r){var o=t.getBoxLayoutParams(),i=!r&&t.get("containLabel"),s=tl(o,{width:e.getWidth(),height:e.getHeight()});this._rect=s;var l=this._axesList;function c(){Ce(l,function(d){var _,S,k,D,p=d.isHorizontal(),m=p?[0,s.width]:[0,s.height],b=d.inverse?1:0;d.setExtent(m[b],m[1-b]),S=p?s.x:s.y,k=(_=d).getExtent(),D=k[0]+k[1],_.toGlobalCoord="x"===_.dim?function(O){return O+S}:function(O){return D-O+S},_.toLocalCoord="x"===_.dim?function(O){return O-S}:function(O){return D-O+S}})}c(),i&&(Ce(l,function(d){if(!d.model.get(["axisLabel","inside"])){var p=function(_){var k=_.scale;if(_.model.get(["axisLabel","show"])&&!k.isBlank()){var D,O,N=k.getExtent();O=k instanceof X0?k.count():(D=k.getTicks()).length;var F,V=_.getLabelModel(),q=Ov(_),Z=1;O>40&&(Z=Math.ceil(O/40));for(var Q=0;Q<O;Q+=Z){var re=q(D?D[Q]:{value:N[0]+Q},Q),he=vk(V.getTextRect(re),V.get("rotate")||0);F?F.union(he):F=he}return F}}(d);if(p){var m=d.isHorizontal()?"height":"width",b=d.model.get(["axisLabel","margin"]);s[m]-=p[m]+b,"top"===d.position?s.y+=p.height+b:"left"===d.position&&(s.x+=p.width+b)}}}),c()),Ce(this._coordsList,function(d){d.calcAffineTransform()})},n.prototype.getAxis=function(t,e){var r=this._axesMap[t];if(null!=r)return r[e||0]},n.prototype.getAxes=function(){return this._axesList.slice()},n.prototype.getCartesian=function(t,e){if(null!=t&&null!=e)return this._coordsMap["x"+t+"y"+e];wr(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var o=0,i=this._coordsList;o<i.length;o++)if(i[o].getAxis("x").index===t||i[o].getAxis("y").index===e)return i[o]},n.prototype.getCartesians=function(){return this._coordsList.slice()},n.prototype.convertToPixel=function(t,e,r){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.dataToPoint(r):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(r)):null},n.prototype.convertFromPixel=function(t,e,r){var o=this._findConvertTarget(e);return o.cartesian?o.cartesian.pointToData(r):o.axis?o.axis.coordToData(o.axis.toLocalCoord(r)):null},n.prototype._findConvertTarget=function(t){var e,r,o=t.seriesModel,i=t.xAxisModel||o&&o.getReferringComponents("xAxis",ll).models[0],s=t.yAxisModel||o&&o.getReferringComponents("yAxis",ll).models[0],l=t.gridModel;return o?Ir(this._coordsList,e=o.coordinateSystem)<0&&(e=null):i&&s?e=this.getCartesian(i.componentIndex,s.componentIndex):i?r=this.getAxis("x",i.componentIndex):s?r=this.getAxis("y",s.componentIndex):l&&l.coordinateSystem===this&&(e=this._coordsList[0]),{cartesian:e,axis:r}},n.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},n.prototype._initCartesian=function(t,e,r){var o=this,i=this,s={left:!1,right:!1,top:!1,bottom:!1},l={x:{},y:{}},c={x:0,y:0};if(e.eachComponent("xAxis",d("x"),this),e.eachComponent("yAxis",d("y"),this),!c.x||!c.y)return this._axesMap={},void(this._axesList=[]);function d(p){return function(m,b){if(dt(m,t)){var _=m.get("position");"x"===p?"top"!==_&&"bottom"!==_&&(_=s.bottom?"top":"bottom"):"left"!==_&&"right"!==_&&(_=s.left?"right":"left"),s[_]=!0;var S=new Be(p,$0(m),[0,0],m.get("type"),_);S.onBand="category"===S.type&&m.get("boundaryGap"),S.inverse=m.get("inverse"),m.axis=S,S.model=m,S.grid=i,S.index=b,i._axesList.push(S),l[p][b]=S,c[p]++}}}this._axesMap=l,Ce(l.x,function(p,m){Ce(l.y,function(b,_){var S="x"+m+"y"+_,k=new pt(S);k.master=o,k.model=t,o._coordsMap[S]=k,o._coordsList.push(k),k.addAxis(p),k.addAxis(b)})})},n.prototype._updateScale=function(t,e){function r(o,i){Ce(Qx(o,i.dim),function(s){i.scale.unionExtentFromData(o,s)})}Ce(this._axesList,function(o){if(o.scale.setExtent(1/0,-1/0),"category"===o.type){var i=o.model.get("categorySortInfo");o.scale.setSortInfo(i)}}),t.eachSeries(function(o){if(et(o)){var i=At(o),s=i.xAxisModel,l=i.yAxisModel;if(!dt(s,e)||!dt(l,e))return;var c=this.getCartesian(s.componentIndex,l.componentIndex),d=o.getData(),p=c.getAxis("x"),m=c.getAxis("y");r(d,p),r(d,m)}},this)},n.prototype.getTooltipAxes=function(t){var e=[],r=[];return Ce(this.getCartesians(),function(o){var i=null!=t&&"auto"!==t?o.getAxis(t):o.getBaseAxis(),s=o.getOtherAxis(i);Ir(e,i)<0&&e.push(i),Ir(r,s)<0&&r.push(s)}),{baseAxes:e,otherAxes:r}},n.create=function(t,e){var r=[];return t.eachComponent("grid",function(o,i){var s=new n(o,t,e);s.name="grid_"+i,s.resize(o,e,!0),o.coordinateSystem=s,r.push(s)}),t.eachSeries(function(o){if(et(o)){var i=At(o),s=i.xAxisModel,l=i.yAxisModel,c=s.getCoordSysModel();o.coordinateSystem=c.coordinateSystem.getCartesian(s.componentIndex,l.componentIndex)}}),r},n.dimensions=Le,n}();function dt(n,t){return n.getCoordSysModel()===t}function vt(n,t,e,r){e.getAxesOnZeroOf=function(){return o?[o]:[]};var o,i=n[t],s=e.model,l=s.get(["axisLine","onZero"]),c=s.get(["axisLine","onZeroAxisIndex"]);if(l){if(null!=c)kt(i[c])&&(o=i[c]);else for(var d in i)if(i.hasOwnProperty(d)&&kt(i[d])&&!r[p(i[d])]){o=i[d];break}o&&(r[p(o)]=!0)}function p(m){return m.dim+"_"+m.index}}function kt(n){return n&&"category"!==n.type&&"time"!==n.type&&function(t){var e=t.scale.getExtent(),r=e[0],o=e[1];return!(r>0&&o>0||r<0&&o<0)}(n)}var Wt=Math.PI,bn=function(){function n(t,e){this.group=new xo,this.opt=e,this.axisModel=t,Yn(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var r=new xo({x:e.position[0],y:e.position[1],rotation:e.rotation});r.updateTransform(),this._transformGroup=r}return n.prototype.hasBuilder=function(t){return!!Xn[t]},n.prototype.add=function(t){Xn[t](this.opt,this.axisModel,this.group,this._transformGroup)},n.prototype.getGroup=function(){return this.group},n.innerTextLayout=function(t,e,r){var o,i,s=gu(e-t);return Rp(s)?(i=r>0?"top":"bottom",o="center"):Rp(s-Wt)?(i=r>0?"bottom":"top",o="center"):(i="middle",o=s>0&&s<Wt?r>0?"right":"left":r>0?"left":"right"),{rotation:s,textAlign:o,textVerticalAlign:i}},n.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},n.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},n}(),Xn={axisLine:function(n,t,e,r){var o=t.get(["axisLine","show"]);if("auto"===o&&n.handleAutoShown&&(o=n.handleAutoShown("axisLine")),o){var i=t.axis.getExtent(),s=r.transform,l=[i[0],0],c=[i[1],0],d=l[0]>c[0];s&&(gn(l,l,s),gn(c,c,s));var p=Lt({lineCap:"round"},t.getModel(["axisLine","lineStyle"]).getLineStyle()),m=new Pu({shape:{x1:l[0],y1:l[1],x2:c[0],y2:c[1]},style:p,strokeContainThreshold:n.strokeContainThreshold||5,silent:!0,z2:1});vd(m.shape,m.style.lineWidth),m.anid="line",e.add(m);var b=t.get(["axisLine","symbol"]);if(null!=b){var _=t.get(["axisLine","symbolSize"]);ir(b)&&(b=[b,b]),(ir(_)||gr(_))&&(_=[_,_]);var S=t1(t.get(["axisLine","symbolOffset"])||0,_),k=_[0],D=_[1];Ce([{rotate:n.rotation+Math.PI/2,offset:S[0],r:0},{rotate:n.rotation-Math.PI/2,offset:S[1],r:Math.sqrt((l[0]-c[0])*(l[0]-c[0])+(l[1]-c[1])*(l[1]-c[1]))}],function(O,N){if("none"!==b[N]&&null!=b[N]){var F=Dl(b[N],-k/2,-D/2,k,D,p.stroke,!0),V=O.r+O.offset,q=d?c:l;F.attr({rotation:O.rotate,x:q[0]+V*Math.cos(n.rotation),y:q[1]-V*Math.sin(n.rotation),silent:!0,z2:11}),e.add(F)}})}}},axisTickLabel:function(n,t,e,r){var o=function(s,l,c,d){var p=c.axis,m=c.getModel("axisTick"),b=m.get("show");if("auto"===b&&d.handleAutoShown&&(b=d.handleAutoShown("axisTick")),b&&!p.scale.isBlank()){for(var _=m.getModel("lineStyle"),S=d.tickDirection*m.get("length"),k=Vn(p.getTicksCoords(),l.transform,S,Yn(_.getLineStyle(),{stroke:c.get(["axisLine","lineStyle","color"])}),"ticks"),D=0;D<k.length;D++)s.add(k[D]);return k}}(e,r,t,n),i=function(s,l,c,d){var p=c.axis;if(Hn(d.axisLabelShow,c.get(["axisLabel","show"]))&&!p.scale.isBlank()){var b=c.getModel("axisLabel"),_=b.get("margin"),S=p.getViewLabels(),k=(Hn(d.labelRotate,b.get("rotate"))||0)*Wt/180,D=bn.innerTextLayout(d.rotation,k,d.labelDirection),O=c.getCategories&&c.getCategories(!0),N=[],F=bn.isLabelSilent(c),V=c.get("triggerEvent");return Ce(S,function(q,Z){var Q="ordinal"===p.scale.type?p.scale.getRawOrdinalNumber(q.tickValue):q.tickValue,re=q.formattedLabel,he=q.rawLabel,ge=b;if(O&&O[Q]){var ve=O[Q];wr(ve)&&ve.textStyle&&(ge=new aa(ve.textStyle,b,c.ecModel))}var _e=ge.getTextColor()||c.get(["axisLine","lineStyle","color"]),Ee=p.dataToCoord(Q),ze=new Oi({x:Ee,y:d.labelOffset+d.labelDirection*_,rotation:D.rotation,silent:F,z2:10+(q.level||0),style:Vi(ge,{text:re,align:ge.getShallow("align",!0)||D.textAlign,verticalAlign:ge.getShallow("verticalAlign",!0)||ge.getShallow("baseline",!0)||D.textVerticalAlign,fill:yr(_e)?_e("category"===p.type?he:"value"===p.type?Q+"":Q,Z):_e})});if(ze.anid="label_"+Q,V){var Ge=bn.makeAxisEventDataBase(c);Ge.targetType="axisLabel",Ge.value=he,Ge.tickIndex=Z,"category"===p.type&&(Ge.dataIndex=Q),So(ze).eventData=Ge}l.add(ze),ze.updateTransform(),N.push(ze),s.add(ze),ze.decomposeTransform()}),N}}(e,r,t,n);(function(s,l,c){if(!J0(s.axis)){var d=s.get(["axisLabel","showMinLabel"]),p=s.get(["axisLabel","showMaxLabel"]),m=(l=l||[])[0],b=l[1],_=l[l.length-1],S=l[l.length-2],k=(c=c||[])[0],D=c[1],O=c[c.length-1],N=c[c.length-2];!1===d?(vn(m),vn(k)):Gn(m,b)&&(d?(vn(b),vn(D)):(vn(m),vn(k))),!1===p?(vn(_),vn(O)):Gn(S,_)&&(p?(vn(S),vn(N)):(vn(_),vn(O)))}})(t,i,o),function(s,l,c,d){var p=c.axis,m=c.getModel("minorTick");if(m.get("show")&&!p.scale.isBlank()){var b=p.getMinorTicksCoords();if(b.length)for(var _=m.getModel("lineStyle"),S=d*m.get("length"),k=Yn(_.getLineStyle(),Yn(c.getModel("axisTick").getLineStyle(),{stroke:c.get(["axisLine","lineStyle","color"])})),D=0;D<b.length;D++)for(var O=Vn(b[D],l.transform,S,k,"minorticks_"+D),N=0;N<O.length;N++)s.add(O[N])}}(e,r,t,n.tickDirection),t.get(["axisLabel","hideOverlap"])&&Dk(ob(mt(i,function(s){return{label:s,priority:s.z2,defaultAttr:{ignore:s.ignore}}})))},axisName:function(n,t,e,r){var Z,re,he,ge,ve,_e,Ee,o=Hn(n.axisName,t.get("name"));if(o){var i,s,l=t.get("nameLocation"),c=n.nameDirection,d=t.getModel("nameTextStyle"),p=t.get("nameGap")||0,m=t.axis.getExtent(),b=m[0]>m[1]?-1:1,_=["start"===l?m[0]-b*p:"end"===l?m[1]+b*p:(m[0]+m[1])/2,kn(l)?n.labelOffset+c*p:0],S=t.get("nameRotate");null!=S&&(S=S*Wt/180),kn(l)?i=bn.innerTextLayout(n.rotation,null!=S?S:n.rotation,c):(Z=l,re=m,ve=gu((S||0)-n.rotation),_e=re[0]>re[1],Ee="start"===Z&&!_e||"start"!==Z&&_e,Rp(ve-Wt/2)?(ge=Ee?"bottom":"top",he="center"):Rp(ve-1.5*Wt)?(ge=Ee?"top":"bottom",he="center"):(ge="middle",he=ve<1.5*Wt&&ve>Wt/2?Ee?"left":"right":Ee?"right":"left"),i={rotation:ve,textAlign:he,textVerticalAlign:ge},null!=(s=n.axisNameAvailableWidth)&&(s=Math.abs(s/Math.sin(i.rotation)),!isFinite(s)&&(s=null)));var k=d.getFont(),D=t.get("nameTruncate",!0)||{},O=D.ellipsis,N=Hn(n.nameTruncateMaxWidth,D.maxWidth,s),F=new Oi({x:_[0],y:_[1],rotation:i.rotation,silent:bn.isLabelSilent(t),style:Vi(d,{text:o,font:k,overflow:"truncate",width:N,ellipsis:O,fill:d.getTextColor()||t.get(["axisLine","lineStyle","color"]),align:d.get("align")||i.textAlign,verticalAlign:d.get("verticalAlign")||i.textVerticalAlign}),z2:1});if(yu({el:F,componentModel:t,itemName:o}),F.__fullText=o,F.anid="name",t.get("triggerEvent")){var V=bn.makeAxisEventDataBase(t);V.targetType="axisName",V.name=o,So(F).eventData=V}r.add(F),F.updateTransform(),e.add(F),F.decomposeTransform()}}};function vn(n){n&&(n.ignore=!0)}function Gn(n,t){var e=n&&n.getBoundingRect().clone(),r=t&&t.getBoundingRect().clone();if(e&&r){var o=bg([]);return Pl(o,o,-n.rotation),e.applyTransform(Fr([],o,n.getLocalTransform())),r.applyTransform(Fr([],o,t.getLocalTransform())),e.intersect(r)}}function kn(n){return"middle"===n||"center"===n}function Vn(n,t,e,r,o){for(var i=[],s=[],l=[],c=0;c<n.length;c++){var d=n[c].coord;s[0]=d,s[1]=0,l[0]=d,l[1]=e,t&&(gn(s,s,t),gn(l,l,t));var p=new Pu({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:r,z2:2,autoBatch:!0,silent:!0});vd(p.shape,p.style.lineWidth),p.anid=o+"_"+n[c].tickValue,i.push(p)}return i}function _r(n,t){return"all"===n||Ue(n)&&Ir(n,t)>=0||n===t}function mn(n){var t=sr(n);if(t){var e=t.axisPointerModel,r=t.axis.scale,o=e.option,i=e.get("status"),s=e.get("value");null!=s&&(s=r.parse(s));var l=In(e);null==i&&(o.status=l?"show":"hide");var c=r.getExtent().slice();c[0]>c[1]&&c.reverse(),(null==s||s>c[1])&&(s=c[1]),s<c[0]&&(s=c[0]),o.value=s,l&&(o.status=t.axis.scale.isBlank()?"hide":"show")}}function sr(n){var t=(n.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Mr(n)]}function In(n){return!!n.get(["handle","show"])}function Mr(n){return n.type+"||"+n.id}var kr={},Uo=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o,i){this.axisPointerClass&&mn(e),n.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,o,!0)},t.prototype.updateAxisPointer=function(e,r,o,i){this._doUpdateAxisPointerClass(e,o,!1)},t.prototype.remove=function(e,r){var o=this._axisPointer;o&&o.remove(r)},t.prototype.dispose=function(e,r){this._disposeAxisPointer(r),n.prototype.dispose.apply(this,arguments)},t.prototype._doUpdateAxisPointerClass=function(e,r,o){var c,i=t.getAxisPointerClass(this.axisPointerClass);if(i){var s=(c=sr(e))&&c.axisPointerModel;s?(this._axisPointer||(this._axisPointer=new i)).render(e,s,r,o):this._disposeAxisPointer(r)}},t.prototype._disposeAxisPointer=function(e){this._axisPointer&&this._axisPointer.dispose(e),this._axisPointer=null},t.registerAxisPointerClass=function(e,r){kr[e]=r},t.getAxisPointerClass=function(e){return e&&kr[e]},t.type="axis",t}(ks),tt=hi();function xt(n,t,e,r){var o=e.axis;if(!o.scale.isBlank()){var i=e.getModel("splitArea"),s=i.getModel("areaStyle"),l=s.get("color"),c=r.coordinateSystem.getRect(),d=o.getTicksCoords({tickModel:i,clamp:!0});if(d.length){var p=l.length,m=tt(n).splitAreaColors,b=Or(),_=0;if(m)for(var S=0;S<d.length;S++){var k=m.get(d[S].tickValue);if(null!=k){_=(k+(p-1)*S)%p;break}}var D=o.toGlobalCoord(d[0].coord),O=s.getAreaStyle();for(l=Ue(l)?l:[l],S=1;S<d.length;S++){var N=o.toGlobalCoord(d[S].coord),F=void 0,V=void 0,q=void 0,Z=void 0;o.isHorizontal()?(V=c.y,Z=c.height,D=(F=D)+(q=N-F)):(F=c.x,q=c.width,D=(V=D)+(Z=N-V));var Q=d[S-1].tickValue;null!=Q&&b.set(Q,_),t.add(new bi({anid:null!=Q?"area_"+Q:null,shape:{x:F,y:V,width:q,height:Z},style:Yn({fill:l[_]},O),autoBatch:!0,silent:!0})),_=(_+1)%p}tt(n).splitAreaColors=b}}}function tn(n){tt(n).splitAreaColors=null}var Cn=["axisLine","axisTickLabel","axisName"],cn=["splitArea","splitLine","minorSplitLine"],Jn=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="CartesianAxisPointer",e}return gt(t,n),t.prototype.render=function(e,r,o,i){this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new xo,this.group.add(this._axisGroup),e.get("show")){var l=e.getCoordSysModel(),c=je(l,e),d=new bn(e,Lt({handleAutoShown:function(p){for(var m=l.coordinateSystem.getCartesians(),b=0;b<m.length;b++)if(cg(m[b].getOtherAxis(e.axis).scale))return!0;return!1}},c));Ce(Cn,d.add,d),this._axisGroup.add(d.getGroup()),Ce(cn,function(p){e.get([p,"show"])&&ao[p](this,this._axisGroup,e,l)},this),i&&"changeAxisOrder"===i.type&&i.isInitSort||Ho(s,this._axisGroup,e),n.prototype.render.call(this,e,r,o,i)}},t.prototype.remove=function(){tn(this)},t.type="cartesianAxis",t}(Uo),ao={splitLine:function(n,t,e,r){var o=e.axis;if(!o.scale.isBlank()){var i=e.getModel("splitLine"),s=i.getModel("lineStyle"),l=s.get("color");l=Ue(l)?l:[l];for(var c=r.coordinateSystem.getRect(),d=o.isHorizontal(),p=0,m=o.getTicksCoords({tickModel:i}),b=[],_=[],S=s.getLineStyle(),k=0;k<m.length;k++){var D=o.toGlobalCoord(m[k].coord);d?(b[0]=D,b[1]=c.y,_[0]=D,_[1]=c.y+c.height):(b[0]=c.x,b[1]=D,_[0]=c.x+c.width,_[1]=D);var O=p++%l.length,F=new Pu({anid:null!=m[k].tickValue?"line_"+m[k].tickValue:null,autoBatch:!0,shape:{x1:b[0],y1:b[1],x2:_[0],y2:_[1]},style:Yn({stroke:l[O]},S),silent:!0});vd(F.shape,S.lineWidth),t.add(F)}}},minorSplitLine:function(n,t,e,r){var o=e.axis,i=e.getModel("minorSplitLine").getModel("lineStyle"),s=r.coordinateSystem.getRect(),l=o.isHorizontal(),c=o.getMinorTicksCoords();if(c.length)for(var d=[],p=[],m=i.getLineStyle(),b=0;b<c.length;b++)for(var _=0;_<c[b].length;_++){var S=o.toGlobalCoord(c[b][_].coord);l?(d[0]=S,d[1]=s.y,p[0]=S,p[1]=s.y+s.height):(d[0]=s.x,d[1]=S,p[0]=s.x+s.width,p[1]=S);var k=new Pu({anid:"minor_line_"+c[b][_].tickValue,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:p[0],y2:p[1]},style:m,silent:!0});vd(k.shape,m.lineWidth),t.add(k)}},splitArea:function(n,t,e,r){xt(n,t,e,r)}},vo=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="xAxis",t}(Jn),Ra=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=vo.type,e}return gt(t,n),t.type="yAxis",t}(Jn),Ro=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="grid",e}return gt(t,n),t.prototype.render=function(e,r){this.group.removeAll(),e.get("show")&&this.group.add(new bi({shape:e.coordinateSystem.getRect(),style:Yn({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))},t.type="grid",t}(ks),fo={offset:0};function Gi(n){n.registerComponentView(Ro),n.registerComponentModel(G),n.registerCoordinateSystem("cartesian2d",Yt),xe(n,"x",te,fo),xe(n,"y",te,fo),n.registerComponentView(vo),n.registerComponentView(Ra),n.registerPreprocessor(function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})})}function ou(n){n.eachSeriesByType("radar",function(t){var e=t.getData(),r=[],o=t.coordinateSystem;if(o){var i=o.getIndicatorAxes();Ce(i,function(s,l){e.each(e.mapDimension(i[l].dim),function(c,d){r[d]=r[d]||[];var p=o.dataToPoint(c,l);r[d][l]=Al(p)?p:pc(o)})}),e.each(function(s){var l=Yi(r[s],function(c){return Al(c)})||pc(o);r[s].push(l.slice()),e.setItemLayout(s,r[s])})}})}function Al(n){return!isNaN(n[0])&&!isNaN(n[1])}function pc(n){return[n.cx,n.cy]}function ml(n){var t=n.polar;if(t){Ue(t)||(t=[t]);var e=[];Ce(t,function(r,o){r.indicator?(r.type&&!r.shape&&(r.shape=r.type),n.radar=n.radar||[],Ue(n.radar)||(n.radar=[n.radar]),n.radar.push(r)):e.push(r)}),n.polar=e}Ce(n.series,function(r){r&&"radar"===r.type&&r.polarIndex&&(r.radarIndex=r.polarIndex)})}var Oc=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){var i=e.coordinateSystem,s=this.group,l=e.getData(),c=this._data;function d(b,_){var S=b.getItemVisual(_,"symbol")||"circle";if("none"!==S){var k=e1(b.getItemVisual(_,"symbolSize")),D=Dl(S,-1,-1,2,2),O=b.getItemVisual(_,"symbolRotate")||0;return D.attr({style:{strokeNoScale:!0},z2:100,scaleX:k[0]/2,scaleY:k[1]/2,rotation:O*Math.PI/180||0}),D}}function p(b,_,S,k,D,O){S.removeAll();for(var N=0;N<_.length-1;N++){var F=d(k,D);F&&(F.__dimIdx=N,b[N]?(F.setPosition(b[N]),Gg[O?"initProps":"updateProps"](F,{x:_[N][0],y:_[N][1]},e,D)):F.setPosition(_[N]),S.add(F))}}function m(b){return mt(b,function(_){return[i.cx,i.cy]})}l.diff(c).add(function(b){var _=l.getItemLayout(b);if(_){var S=new eu,k=new Qu,D={shape:{points:_}};S.shape.points=m(_),k.shape.points=m(_),as(S,D,e,b),as(k,D,e,b);var O=new xo,N=new xo;O.add(k),O.add(S),O.add(N),p(k.shape.points,_,N,l,b,!0),l.setItemGraphicEl(b,O)}}).update(function(b,_){var S=c.getItemGraphicEl(_),k=S.childAt(0),D=S.childAt(1),O=S.childAt(2),N={shape:{points:l.getItemLayout(b)}};N.shape.points&&(p(k.shape.points,N.shape.points,O,l,b,!1),md(D),md(k),mo(k,N,e),mo(D,N,e),l.setItemGraphicEl(b,S))}).remove(function(b){s.remove(c.getItemGraphicEl(b))}).execute(),l.eachItemGraphicEl(function(b,_){var S=l.getItemModel(_),k=b.childAt(0),D=b.childAt(1),O=b.childAt(2),N=l.getItemVisual(_,"style"),F=N.fill;s.add(b),k.useStyle(Yn(S.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:F})),kl(k,S,"lineStyle"),kl(D,S,"areaStyle");var V=S.getModel("areaStyle"),q=V.isEmpty()&&V.parentModel.isEmpty();D.ignore=q,Ce(["emphasis","select","blur"],function(re){var he=S.getModel([re,"areaStyle"]),ge=he.isEmpty()&&he.parentModel.isEmpty();D.ensureState(re).ignore=ge&&q}),D.useStyle(Yn(V.getAreaStyle(),{fill:F,opacity:.7,decal:N.decal}));var Z=S.getModel("emphasis"),Q=Z.getModel("itemStyle").getItemStyle();O.eachChild(function(re){if(re instanceof fl){var he=re.style;re.useStyle(Lt({image:he.image,x:he.x,y:he.y,width:he.width,height:he.height},N))}else re.useStyle(N),re.setColor(F),re.style.strokeNoScale=!0;re.ensureState("emphasis").style=an(Q);var ge=l.getStore().get(l.getDimensionIndex(re.__dimIdx),_);(null==ge||isNaN(ge))&&(ge=""),ps(re,gs(S),{labelFetcher:l.hostModel,labelDataIndex:_,labelDimIndex:re.__dimIdx,defaultText:ge,inheritColor:F,defaultOpacity:N.opacity})}),vu(b,Z.get("focus"),Z.get("blurScope"),Z.get("disabled"))}),this._data=l},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.type="radar",t}($a),zv=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return gt(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new f(De(this.getData,this),De(this.getRawData,this))},t.prototype.getInitialData=function(e,r){return a(this,{generateCoord:"indicator_",generateCoordCount:1/0})},t.prototype.formatTooltip=function(e,r,o){var i=this.getData(),s=this.coordinateSystem.getIndicatorAxes(),l=this.getData().getName(e),c=""===l?this.name:l,d=Xl(this,e);return Dc("section",{header:c,sortBlocks:!0,blocks:mt(s,function(p){var m=i.get(i.mapDimension(p.dim),e);return Dc("nameValue",{markerType:"subItem",markerColor:d,name:p.name,value:m,sortParam:m})})})},t.prototype.getTooltipPosition=function(e){if(null!=e)for(var r=this.getData(),o=this.coordinateSystem,i=r.getValues(mt(o.dimensions,function(d){return r.mapDimension(d)}),e),s=0,l=i.length;s<l;s++)if(!isNaN(i[s])){var c=o.getIndicatorAxes();return o.coordToPoint(c[s].dataToCoord(i[s]),s)}},t.type="series.radar",t.dependencies=["radar"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},t}(Ka),ah=pe.value;function gg(n,t){return Yn({show:t},n)}var mp=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.optionUpdated=function(){var e=this.get("boundaryGap"),r=this.get("splitNumber"),o=this.get("scale"),i=this.get("axisLine"),s=this.get("axisTick"),l=this.get("axisLabel"),c=this.get("axisName"),d=this.get(["axisName","show"]),p=this.get(["axisName","formatter"]),m=this.get("axisNameGap"),b=this.get("triggerEvent"),_=mt(this.get("indicator")||[],function(S){null!=S.max&&S.max>0&&!S.min?S.min=0:null!=S.min&&S.min<0&&!S.max&&(S.max=0);var k=c;null!=S.color&&(k=Yn({color:S.color},c));var D=ln(an(S),{boundaryGap:e,splitNumber:r,scale:o,axisLine:i,axisTick:s,axisLabel:l,name:S.text,showName:d,nameLocation:"end",nameGap:m,nameTextStyle:k,triggerEvent:b},!1);if(ir(p)){var O=D.name;D.name=p.replace("{value}",null!=O?O:"")}else yr(p)&&(D.name=p(D.name,D));var N=new aa(D,null,this.ecModel);return na(N,Q0.prototype),N.mainType="radar",N.componentIndex=this.componentIndex,N},this);this._indicatorModels=_},t.prototype.getIndicatorModels=function(){return this._indicatorModels},t.type="radar",t.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:ln({lineStyle:{color:"#bbb"}},ah.axisLine),axisLabel:gg(ah.axisLabel,!1),axisTick:gg(ah.axisTick,!1),splitLine:gg(ah.splitLine,!0),splitArea:gg(ah.splitArea,!0),indicator:[]},t}(W),hb=["axisLine","axisTickLabel","axisName"],pb=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},t.prototype._buildAxes=function(e){var r=e.coordinateSystem;Ce(mt(r.getIndicatorAxes(),function(o){var i=o.model.get("showName")?o.name:"";return new bn(o.model,{axisName:i,position:[r.cx,r.cy],rotation:o.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(o){Ce(hb,o.add,o),this.group.add(o.getGroup())},this)},t.prototype._buildSplitLineAndArea=function(e){var r=e.coordinateSystem,o=r.getIndicatorAxes();if(o.length){var i=e.get("shape"),s=e.getModel("splitLine"),l=e.getModel("splitArea"),c=s.getModel("lineStyle"),d=l.getModel("areaStyle"),p=s.get("show"),m=l.get("show"),b=c.get("color"),_=d.get("color"),S=Ue(b)?b:[b],k=Ue(_)?_:[_],D=[],O=[];if("circle"===i)for(var N=o[0].getTicksCoords(),F=r.cx,V=r.cy,q=0;q<N.length;q++)p&&D[Ee(D,S,q)].push(new Bf({shape:{cx:F,cy:V,r:N[q].coord}})),m&&q<N.length-1&&O[Ee(O,k,q)].push(new rp({shape:{cx:F,cy:V,r0:N[q].coord,r:N[q+1].coord}}));else{var Z,Q=mt(o,function(ze,Ge){var Xe=ze.getTicksCoords();return Z=null==Z?Xe.length-1:Math.min(Xe.length-1,Z),mt(Xe,function($e){return r.coordToPoint($e.coord,Ge)})}),re=[];for(q=0;q<=Z;q++){for(var he=[],ge=0;ge<o.length;ge++)he.push(Q[ge][q]);he[0]&&he.push(he[0].slice()),p&&D[Ee(D,S,q)].push(new Qu({shape:{points:he}})),m&&re&&O[Ee(O,k,q-1)].push(new eu({shape:{points:he.concat(re)}})),re=he.slice().reverse()}}var ve=c.getLineStyle(),_e=d.getAreaStyle();Ce(O,function(ze,Ge){this.group.add(fc(ze,{style:Yn({stroke:"none",fill:k[Ge%k.length]},_e),silent:!0}))},this),Ce(D,function(ze,Ge){this.group.add(fc(ze,{style:Yn({fill:"none",stroke:S[Ge%S.length]},ve),silent:!0}))},this)}function Ee(ze,Ge,Xe){var $e=Xe%Ge.length;return ze[$e]=ze[$e]||[],$e}},t.type="radar",t}(ks),$k=function(n){function t(e,r,o){var i=n.call(this,e,r,o)||this;return i.type="value",i.angle=0,i.name="",i}return gt(t,n),t}(th),AD=function(){function n(t,e,r){this.dimensions=[],this._model=t,this._indicatorAxes=mt(t.getIndicatorModels(),function(o,i){var s="indicator_"+i,l=new $k(s,new Cv);return l.name=o.get("name"),l.model=o,o.axis=l,this.dimensions.push(s),l},this),this.resize(t,r)}return n.prototype.getIndicatorAxes=function(){return this._indicatorAxes},n.prototype.dataToPoint=function(t,e){return this.coordToPoint(this._indicatorAxes[e].dataToCoord(t),e)},n.prototype.coordToPoint=function(t,e){var r=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(r),this.cy-t*Math.sin(r)]},n.prototype.pointToData=function(t){var e=t[0]-this.cx,r=t[1]-this.cy,o=Math.sqrt(e*e+r*r);e/=o,r/=o;for(var i,s=Math.atan2(-r,e),l=1/0,c=-1,d=0;d<this._indicatorAxes.length;d++){var p=this._indicatorAxes[d],m=Math.abs(s-p.angle);m<l&&(i=p,c=d,l=m)}return[c,+(i&&i.coordToData(o))]},n.prototype.resize=function(t,e){var r=t.get("center"),o=e.getWidth(),i=e.getHeight(),s=Math.min(o,i)/2;this.cx=qn(r[0],o),this.cy=qn(r[1],i),this.startAngle=t.get("startAngle")*Math.PI/180;var l=t.get("radius");(ir(l)||gr(l))&&(l=[0,l]),this.r0=qn(l[0],s),this.r=qn(l[1],s),Ce(this._indicatorAxes,function(c,d){c.setExtent(this.r0,this.r);var p=this.startAngle+d*Math.PI*2/this._indicatorAxes.length;p=Math.atan2(Math.sin(p),Math.cos(p)),c.angle=p},this)},n.prototype.update=function(t,e){var r=this._indicatorAxes,o=this._model;Ce(r,function(l){l.scale.setExtent(1/0,-1/0)}),t.eachSeriesByType("radar",function(l,c){if("radar"===l.get("coordinateSystem")&&t.getComponent("radar",l.get("radarIndex"))===o){var d=l.getData();Ce(r,function(p){p.scale.unionExtentFromData(d,d.mapDimension(p.dim))})}},this);var i=o.get("splitNumber"),s=new Cv;s.setExtent(0,i),s.setInterval(1),Ce(r,function(l,c){Kt(l.scale,l.model,s)})},n.prototype.convertToPixel=function(t,e,r){return console.warn("Not implemented."),null},n.prototype.convertFromPixel=function(t,e,r){return console.warn("Not implemented."),null},n.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},n.create=function(t,e){var r=[];return t.eachComponent("radar",function(o){var i=new n(o,t,e);r.push(i),o.coordinateSystem=i}),t.eachSeriesByType("radar",function(o){"radar"===o.get("coordinateSystem")&&(o.coordinateSystem=r[o.get("radarIndex")||0])}),r},n.dimensions=[],n}();function Jk(n){n.registerCoordinateSystem("radar",AD),n.registerComponentModel(mp),n.registerComponentView(pb),n.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each(function(r){e.setItemVisual(r,"legendIcon","roundRect")}),e.setVisual("legendIcon","roundRect")}})}var lM="\0_ec_interaction_mutex";function Qk(n,t){return!!m_(n)[t]}function m_(n){return n[lM]||(n[lM]={})}Ac({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},Fo);var v_=function(n){function t(e){var r=n.call(this)||this;r._zr=e;var o=De(r._mousedownHandler,r),i=De(r._mousemoveHandler,r),s=De(r._mouseupHandler,r),l=De(r._mousewheelHandler,r),c=De(r._pinchHandler,r);return r.enable=function(d,p){this.disable(),this._opt=Yn(an(p)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==d&&(d=!0),!0!==d&&"move"!==d&&"pan"!==d||(e.on("mousedown",o),e.on("mousemove",i),e.on("mouseup",s)),!0!==d&&"scale"!==d&&"zoom"!==d||(e.on("mousewheel",l),e.on("pinch",c))},r.disable=function(){e.off("mousedown",o),e.off("mousemove",i),e.off("mouseup",s),e.off("mousewheel",l),e.off("pinch",c)},r}return gt(t,n),t.prototype.isDragging=function(){return this._dragging},t.prototype.isPinching=function(){return this._pinching},t.prototype.setPointerChecker=function(e){this.pointerChecker=e},t.prototype.dispose=function(){this.disable()},t.prototype._mousedownHandler=function(e){if(!As(e)){for(var r=e.target;r;){if(r.draggable)return;r=r.__hostTarget||r.parent}var o=e.offsetX,i=e.offsetY;this.pointerChecker&&this.pointerChecker(e,o,i)&&(this._x=o,this._y=i,this._dragging=!0)}},t.prototype._mousemoveHandler=function(e){if(this._dragging&&B1("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!Qk(this._zr,"globalPan")){var r=e.offsetX,o=e.offsetY,i=this._x,s=this._y,l=r-i,c=o-s;this._x=r,this._y=o,this._opt.preventDefaultMouseMove&&Tu(e.event),mg(this,"pan","moveOnMouseMove",e,{dx:l,dy:c,oldX:i,oldY:s,newX:r,newY:o,isAvailableBehavior:null})}},t.prototype._mouseupHandler=function(e){As(e)||(this._dragging=!1)},t.prototype._mousewheelHandler=function(e){var r=B1("zoomOnMouseWheel",e,this._opt),o=B1("moveOnMouseWheel",e,this._opt),i=e.wheelDelta,s=Math.abs(i),l=e.offsetX,c=e.offsetY;if(0!==i&&(r||o)){if(r){var d=s>3?1.4:s>1?1.2:1.1;ID(this,"zoom","zoomOnMouseWheel",e,{scale:i>0?d:1/d,originX:l,originY:c,isAvailableBehavior:null})}if(o){var p=Math.abs(i);ID(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(i>0?1:-1)*(p>3?.4:p>1?.15:.05),originX:l,originY:c,isAvailableBehavior:null})}}},t.prototype._pinchHandler=function(e){Qk(this._zr,"globalPan")||ID(this,"zoom",null,e,{scale:e.pinchScale>1?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY,isAvailableBehavior:null})},t}(bo);function ID(n,t,e,r,o){n.pointerChecker&&n.pointerChecker(r,o.originX,o.originY)&&(Tu(r.event),mg(n,t,e,r,o))}function mg(n,t,e,r,o){o.isAvailableBehavior=De(B1,null,e,r),n.trigger(t,o)}function B1(n,t,e){var r=e[n];return!n||r&&(!ir(r)||t.event[r+"Key"])}function sS(n,t,e){var r=n.target;r.x+=t,r.y+=e,r.dirty()}function OD(n,t,e,r){var o=n.target,i=n.zoomLimit,s=n.zoom=n.zoom||1;if(s*=t,i){var l=i.min||0;s=Math.max(Math.min(i.max||1/0,s),l)}var d=s/n.zoom;n.zoom=s,o.x-=(e-o.x)*(d-1),o.y-=(r-o.y)*(d-1),o.scaleX*=d,o.scaleY*=d,o.dirty()}var eA,tA={axisPointer:1,tooltip:1,brush:1};function eT(n,t,e){var r=t.getComponentByElement(n.topTarget),o=r&&r.coordinateSystem;return r&&r!==e&&!tA.hasOwnProperty(r.mainType)&&o&&o.model!==e}function uS(n){ir(n)&&(n=(new DOMParser).parseFromString(n,"text/xml"));var t=n;for(9===t.nodeType&&(t=t.firstChild);"svg"!==t.nodeName.toLowerCase()||1!==t.nodeType;)t=t.nextSibling;return t}var lS={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},nA=rr(lS),tT={"alignment-baseline":"textBaseline","stop-color":"stopColor"},rA=rr(tT),OP=function(){function n(){this._defs={},this._root=null}return n.prototype.parse=function(t,e){e=e||{};var r=uS(t);this._defsUsePending=[];var o=new xo;this._root=o;var i=[],s=r.getAttribute("viewBox")||"",l=parseFloat(r.getAttribute("width")||e.width),c=parseFloat(r.getAttribute("height")||e.height);isNaN(l)&&(l=null),isNaN(c)&&(c=null),_m(r,o,null,!0,!1);for(var d,p,m=r.firstChild;m;)this._parseNode(m,o,i,null,!1,!1),m=m.nextSibling;if(function(S,k){for(var D=0;D<k.length;D++){var O=k[D];O[0].style[O[1]]=S[O[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],s){var b=PD(s);b.length>=4&&(d={x:parseFloat(b[0]||0),y:parseFloat(b[1]||0),width:parseFloat(b[2]),height:parseFloat(b[3])})}if(d&&null!=l&&null!=c&&(p=LD(d,{x:0,y:0,width:l,height:c}),!e.ignoreViewBox)){var _=o;(o=new xo).add(_),_.scaleX=_.scaleY=p.scale,_.x=p.x,_.y=p.y}return e.ignoreRootClip||null==l||null==c||o.setClipPath(new bi({shape:{x:0,y:0,width:l,height:c}})),{root:o,width:l,height:c,viewBoxRect:d,viewBoxTransform:p,named:i}},n.prototype._parseNode=function(t,e,r,o,i,s){var l,c=t.nodeName.toLowerCase(),d=o;if("defs"===c&&(i=!0),"text"===c&&(s=!0),"defs"===c||"switch"===c)l=e;else{if(!i){var p=eA[c];if(p&&br(eA,c)){l=p.call(this,t,e);var m=t.getAttribute("name");if(m){var b={name:m,namedFrom:null,svgNodeTagLower:c,el:l};r.push(b),"g"===c&&(d=b)}else o&&r.push({name:o.name,namedFrom:o,svgNodeTagLower:c,el:l});e.add(l)}}var _=uO[c];if(_&&br(uO,c)){var S=_.call(this,t),k=t.getAttribute("id");k&&(this._defs[k]=S)}}if(l&&l.isGroup)for(var D=t.firstChild;D;)1===D.nodeType?this._parseNode(D,l,r,d,i,s):3===D.nodeType&&s&&this._parseText(D,l),D=D.nextSibling},n.prototype._parseText=function(t,e){var r=new Og({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});xm(e,r),_m(t,r,this._defsUsePending,!1,!1),function(c,d){var p=d.__selfStyle;if(p){var m=p.textBaseline,b=m;m&&"auto"!==m?"baseline"===m?b="alphabetic":"before-edge"===m||"text-before-edge"===m?b="top":"after-edge"===m||"text-after-edge"===m?b="bottom":"central"!==m&&"mathematical"!==m||(b="middle"):b="alphabetic",c.style.textBaseline=b}var _=d.__inheritedStyle;if(_){var S=_.textAlign,k=S;S&&("middle"===S&&(k="center"),c.style.textAlign=k)}}(r,e);var o=r.style,i=o.fontSize;i&&i<9&&(o.fontSize=9,r.scaleX*=i/9,r.scaleY*=i/9);var s=(o.fontSize||o.fontFamily)&&[o.fontStyle,o.fontWeight,(o.fontSize||12)+"px",o.fontFamily||"sans-serif"].join(" ");o.font=s;var l=r.getBoundingRect();return this._textX+=l.width,e.add(r),r},n.internalField=void(eA={g:function(t,e){var r=new xo;return xm(e,r),_m(t,r,this._defsUsePending,!1,!1),r},rect:function(t,e){var r=new bi;return xm(e,r),_m(t,r,this._defsUsePending,!1,!1),r.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),r.silent=!0,r},circle:function(t,e){var r=new Bf;return xm(e,r),_m(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),r.silent=!0,r},line:function(t,e){var r=new Pu;return xm(e,r),_m(t,r,this._defsUsePending,!1,!1),r.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),r.silent=!0,r},ellipse:function(t,e){var r=new Qs;return xm(e,r),_m(t,r,this._defsUsePending,!1,!1),r.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),r.silent=!0,r},polygon:function(t,e){var r,o=t.getAttribute("points");o&&(r=ED(o));var i=new eu({shape:{points:r||[]},silent:!0});return xm(e,i),_m(t,i,this._defsUsePending,!1,!1),i},polyline:function(t,e){var r,o=t.getAttribute("points");o&&(r=ED(o));var i=new Qu({shape:{points:r||[]},silent:!0});return xm(e,i),_m(t,i,this._defsUsePending,!1,!1),i},image:function(t,e){var r=new fl;return xm(e,r),_m(t,r,this._defsUsePending,!1,!1),r.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),r.silent=!0,r},text:function(t,e){var r=t.getAttribute("x")||"0",o=t.getAttribute("y")||"0",i=t.getAttribute("dx")||"0",s=t.getAttribute("dy")||"0";this._textX=parseFloat(r)+parseFloat(i),this._textY=parseFloat(o)+parseFloat(s);var l=new xo;return xm(e,l),_m(t,l,this._defsUsePending,!1,!0),l},tspan:function(t,e){var r=t.getAttribute("x"),o=t.getAttribute("y");null!=r&&(this._textX=parseFloat(r)),null!=o&&(this._textY=parseFloat(o));var i=t.getAttribute("dx")||"0",s=t.getAttribute("dy")||"0",l=new xo;return xm(e,l),_m(t,l,this._defsUsePending,!1,!0),this._textX+=parseFloat(i),this._textY+=parseFloat(s),l},path:function(t,e){var r=Gl(t.getAttribute("d")||"");return xm(e,r),_m(t,r,this._defsUsePending,!1,!1),r.silent=!0,r}}),n}(),uO={lineargradient:function(n){var t=parseInt(n.getAttribute("x1")||"0",10),e=parseInt(n.getAttribute("y1")||"0",10),r=parseInt(n.getAttribute("x2")||"10",10),o=parseInt(n.getAttribute("y2")||"0",10),i=new Kp(t,e,r,o);return lO(n,i),oA(n,i),i},radialgradient:function(n){var t=parseInt(n.getAttribute("cx")||"0",10),e=parseInt(n.getAttribute("cy")||"0",10),r=parseInt(n.getAttribute("r")||"0",10),o=new h0(t,e,r);return lO(n,o),oA(n,o),o}};function lO(n,t){"userSpaceOnUse"===n.getAttribute("gradientUnits")&&(t.global=!0)}function oA(n,t){for(var e=n.firstChild;e;){if(1===e.nodeType&&"stop"===e.nodeName.toLocaleLowerCase()){var o,r=e.getAttribute("offset");o=r&&r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var i={};dO(e,i,i);var s=i.stopColor||e.getAttribute("stop-color")||"#000000";t.colorStops.push({offset:o,color:s})}e=e.nextSibling}}function xm(n,t){n&&n.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Yn(t.__inheritedStyle,n.__inheritedStyle))}function ED(n){for(var t=PD(n),e=[],r=0;r<t.length;r+=2){var o=parseFloat(t[r]),i=parseFloat(t[r+1]);e.push([o,i])}return e}function _m(n,t,e,r,o){var i=t,s=i.__inheritedStyle=i.__inheritedStyle||{},l={};1===n.nodeType&&(function(c,d){var p=c.getAttribute("transform");if(p){p=p.replace(/,/g," ");var m=[],b=null;p.replace(PP,function(O,N,F){return m.push(N,F),""});for(var _=m.length-1;_>0;_-=2){var k=m[_-1],D=PD(m[_]);switch(b=b||[1,0,0,1,0,0],k){case"translate":Rc(b,b,[parseFloat(D[0]),parseFloat(D[1]||"0")]);break;case"scale":Qt(b,b,[parseFloat(D[0]),parseFloat(D[1]||D[0])]);break;case"rotate":Pl(b,b,-parseFloat(D[0])*RD);break;case"skewX":Fr(b,[1,0,Math.tan(parseFloat(D[0])*RD),1,0,0],b);break;case"skewY":Fr(b,[1,Math.tan(parseFloat(D[0])*RD),0,1,0,0],b);break;case"matrix":b[0]=parseFloat(D[0]),b[1]=parseFloat(D[1]),b[2]=parseFloat(D[2]),b[3]=parseFloat(D[3]),b[4]=parseFloat(D[4]),b[5]=parseFloat(D[5])}}d.setLocalTransform(b)}}(n,t),dO(n,s,l),r||function(c,d,p){for(var m=0;m<nA.length;m++){var b=nA[m];null!=(_=c.getAttribute(b))&&(d[lS[b]]=_)}for(m=0;m<rA.length;m++){var _;null!=(_=c.getAttribute(b=rA[m]))&&(p[tT[b]]=_)}}(n,s,l)),i.style=i.style||{},null!=s.fill&&(i.style.fill=cO(i,"fill",s.fill,e)),null!=s.stroke&&(i.style.stroke=cO(i,"stroke",s.stroke,e)),Ce(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(c){null!=s[c]&&(i.style[c]=parseFloat(s[c]))}),Ce(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],function(c){null!=s[c]&&(i.style[c]=s[c])}),o&&(i.__selfStyle=l),s.lineDash&&(i.style.lineDash=mt(PD(s.lineDash),function(c){return parseFloat(c)})),"hidden"!==s.visibility&&"collapse"!==s.visibility||(i.invisible=!0),"none"===s.display&&(i.ignore=!0)}var EP=/^url\(\s*#(.*?)\)/;function cO(n,t,e,r){var o=e&&e.match(EP);if(!o)return"none"===e&&(e=null),e;var i=ki(o[1]);r.push([n,t,i])}var cS=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function PD(n){return n.match(cS)||[]}var PP=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,RD=Math.PI/180,fO=/([^\s:;]+)\s*:\s*([^:;]+)/g;function dO(n,t,e){var r,o=n.getAttribute("style");if(o)for(fO.lastIndex=0;null!=(r=fO.exec(o));){var i=r[1],s=br(lS,i)?lS[i]:null;s&&(t[s]=r[2]);var l=br(tT,i)?tT[i]:null;l&&(e[l]=r[2])}}function LD(n,t){var o=Math.min(t.width/n.width,t.height/n.height);return{scale:o,x:-(n.x+n.width/2)*o+(t.x+t.width/2),y:-(n.y+n.height/2)*o+(t.y+t.height/2)}}for(var hO=Or(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),pO=function(){function n(t,e){this.type="geoSVG",this._usedGraphicMap=Or(),this._freedGraphics=[],this._mapName=t,this._parsedXML=uS(e)}return n.prototype.load=function(){var i,s,l,t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=(i=t.named,s=[],l=Or(),Ce(i,function(c){if(null==c.namedFrom){var d=new xk(c.name,c.el);s.push(d),l.set(c.name,d)}}),{regions:s,regionsMap:l}),o=e.regionsMap;this._regions=e.regions,this._regionsMap=o}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},n.prototype._buildGraphic=function(t){var e,r,o,i;try{Ao(null!=(r=(e=t&&(o=t,i={ignoreViewBox:!0,ignoreRootClip:!0},(new OP).parse(o,i))||{}).root))}catch(N){throw new Error("Invalid svg format\n"+N.message)}var s=new xo;s.add(r),s.isGeoSVGGraphicRoot=!0;var l=e.width,c=e.height,d=e.viewBoxRect,p=this._boundingRect;if(!p){var m=void 0,b=void 0,_=void 0,S=void 0;if(null!=l?(m=0,_=l):d&&(m=d.x,_=d.width),null!=c?(b=0,S=c):d&&(b=d.y,S=d.height),null==m||null==b){var k=r.getBoundingRect();null==m&&(m=k.x,_=k.width),null==b&&(b=k.y,S=k.height)}p=this._boundingRect=new Io(m,b,_,S)}if(d){var D=LD(d,p);r.scaleX=r.scaleY=D.scale,r.x=D.x,r.y=D.y}s.setClipPath(new bi({shape:p.plain()}));var O=[];return Ce(e.named,function(N){var F;null!=hO.get(N.svgNodeTagLower)&&(O.push(N),(F=N.el).silent=!1,F.isGroup&&F.traverse(function(V){V.silent=!1}))}),{root:s,boundingRect:p,named:O}},n.prototype.useGraphic=function(t){var e=this._usedGraphicMap,r=e.get(t);return r||(r=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,r),r)},n.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,r=e.get(t);r&&(e.removeKey(t),this._freedGraphics.push(r))},n}(),ND=[126,25],fS=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],dS=0;dS<fS.length;dS++)for(var cM=0;cM<fS[dS].length;cM++)fS[dS][cM][0]/=10.5,fS[dS][cM][1]/=-14,fS[dS][cM][0]+=ND[0],fS[dS][cM][1]+=ND[1];var BD={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},Wh=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],hS=function(){function n(t,e,r){var o;this.type="geoJSON",this._parsedMap=Or(),this._mapName=t,this._specialAreas=r,this._geoJSON=ir(o=e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(o):new Function("return ("+o+");")():o}return n.prototype.load=function(t,e){var r=this._parsedMap.get(e=e||"name");if(!r){var o=this._parseToRegions(e);r=this._parsedMap.set(e,{regions:o,boundingRect:RP(o)})}var i=Or(),s=[];return Ce(r.regions,function(l){var c=l.name;t&&br(t,c)&&(l=l.cloneShallow(c=t[c])),s.push(l),i.set(c,l)}),{regions:s,boundingRect:r.boundingRect||new Io(0,0,0,0),regionsMap:i}},n.prototype._parseToRegions=function(t){var e,r=this._mapName,o=this._geoJSON;try{e=o?hp(o,t):[]}catch(i){throw new Error("Invalid geoJson format\n"+i.message)}return function(i,s){if("china"===i){for(var l=0;l<s.length;l++)if("\u5357\u6d77\u8bf8\u5c9b"===s[l].name)return;s.push(new OC("\u5357\u6d77\u8bf8\u5c9b",mt(fS,function(c){return{type:"polygon",exterior:c}}),ND))}}(r,e),Ce(e,function(i){var d,s=i.name;(function(c,d){if("china"===c){var p=BD[d.name];if(p){var m=d.getCenter();m[0]+=p[0]/10.5,m[1]+=-p[1]/14,d.setCenter(m)}}})(r,i),d=i,"china"===r&&"\u53f0\u6e7e"===d.name&&d.geometries.push({type:"polygon",exterior:Wh[0]});var l=this._specialAreas&&this._specialAreas[s];l&&i.transformTo(l.left,l.top,l.width,l.height)},this),e},n.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},n}();function RP(n){for(var t,e=0;e<n.length;e++){var r=n[e].getBoundingRect();(t=t||r.clone()).union(r)}return t}var nT=Or(),z1=function(n){return nT.get(n)},wm=function(n,t,e){var r=nT.get(n);if(r)return r.load(t,e)},zD=["rect","circle","line","ellipse","polygon","polyline","path"],NP=Or(zD),iA=Or(zD.concat(["g"])),aA=Or(zD.concat(["g"])),vO=hi();function FD(n){var t=n.getItemStyle(),e=n.get("areaColor");return null!=e&&(t.fill=e),t}function Zf(n){var t=n.style;t&&(t.stroke=t.stroke||t.fill,t.fill=null)}var VD=function(){function n(t){var e=new xo;this.uid=ov("ec_map_draw"),this._controller=new v_(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new xo),e.add(this._svgGroup=new xo)}return n.prototype.draw=function(t,e,r,o,i){var s="geo"===t.mainType,l=t.getData&&t.getData();s&&e.eachComponent({mainType:"series",subType:"map"},function(D){l||D.getHostGeoModel()!==t||(l=D.getData())});var c=t.coordinateSystem,d=this._regionsGroup,p=this.group,m=c.getTransformInfo(),b=m.raw,_=m.roam;!d.childAt(0)||i?(p.x=_.x,p.y=_.y,p.scaleX=_.scaleX,p.scaleY=_.scaleY,p.dirty()):mo(p,_,t);var S=l&&l.getVisual("visualMeta")&&l.getVisual("visualMeta").length>0,k={api:r,geo:c,mapOrGeoModel:t,data:l,isVisualEncodedByVisualMap:S,isGeo:s,transformInfoRaw:b};"geoJSON"===c.resourceType?this._buildGeoJSON(k):"geoSVG"===c.resourceType&&this._buildSVG(k),this._updateController(t,e,r),this._updateMapSelectHandler(t,d,r,o)},n.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=Or(),r=Or(),o=this._regionsGroup,i=t.transformInfoRaw,s=t.mapOrGeoModel,l=t.data,c=t.geo.projection,d=c&&c.stream;function p(_,S){return S&&(_=S(_)),_&&[_[0]*i.scaleX+i.x,_[1]*i.scaleY+i.y]}function m(_){for(var S=[],k=!d&&c&&c.project,D=0;D<_.length;++D){var O=p(_[D],k);O&&S.push(O)}return S}function b(_){return{shape:{points:m(_)}}}o.removeAll(),Ce(t.geo.regions,function(_){var S=_.name,k=e.get(S),D=r.get(S)||{},O=D.dataIdx,N=D.regionModel;k||(k=e.set(S,new xo),o.add(k),O=l?l.indexOfName(S):null,N=t.isGeo?s.getRegionModel(S):l?l.getItemModel(O):null,r.set(S,{dataIdx:O,regionModel:N}));var F=[],V=[];Ce(_.geometries,function(Q){if("polygon"===Q.type){var re=[Q.exterior].concat(Q.interiors||[]);d&&(re=xO(re,d)),Ce(re,function(ge){F.push(new eu(b(ge)))})}else{var he=Q.points;d&&(he=xO(he,d,!0)),Ce(he,function(ge){V.push(new Qu(b(ge)))})}});var q=p(_.getCenter(),c&&c.project);function Z(Q,re){if(Q.length){var he=new op({culling:!0,segmentIgnoreThreshold:1,shape:{paths:Q}});k.add(he),Yy(t,he,O,N),sA(t,he,S,N,s,O,q),re&&(Zf(he),Ce(he.states,Zf))}}Z(F),Z(V,!0)}),e.each(function(_,S){var k=r.get(S),O=k.regionModel;uA(t,_,S,O,s,k.dataIdx),yO(t,_,S,O,s),bO(t,_,S,O,s)},this)},n.prototype._buildSVG=function(t){var e=t.geo.map,r=t.transformInfoRaw;this._svgGroup.x=r.x,this._svgGroup.y=r.y,this._svgGroup.scaleX=r.scaleX,this._svgGroup.scaleY=r.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var o=this._svgDispatcherMap=Or(),i=!1;Ce(this._svgGraphicRecord.named,function(s){var l=s.name,c=t.mapOrGeoModel,d=t.data,p=s.svgNodeTagLower,m=s.el,b=d?d.indexOfName(l):null,_=c.getRegionModel(l);null!=NP.get(p)&&m instanceof Ml&&Yy(t,m,b,_),m instanceof Ml&&(m.culling=!0),m.z2EmphasisLift=0,s.namedFrom||(null!=aA.get(p)&&sA(t,m,l,_,c,b,null),uA(t,m,l,_,c,b),yO(t,m,l,_,c),null!=iA.get(p)&&("self"===bO(t,m,l,_,c)&&(i=!0),(o.get(l)||o.set(l,[])).push(m)))},this),this._enableBlurEntireSVG(i,t)},n.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var r=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse(function(o){if(!o.isGroup){Ng(o);var i=o.ensureState("blur").style||{};null==i.opacity&&null!=r&&(i.opacity=r),o.ensureState("emphasis")}})}},n.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},n.prototype.findHighDownDispatchers=function(t,e){if(null==t)return[];var r=e.coordinateSystem;if("geoJSON"===r.resourceType){var o=this._regionsGroupByName;if(o){var i=o.get(t);return i?[i]:[]}}else if("geoSVG"===r.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},n.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},n.prototype._useSVG=function(t){var e=z1(t);if(e&&"geoSVG"===e.type){var r=e.useGraphic(this.uid);this._svgGroup.add(r.root),this._svgGraphicRecord=r,this._svgMapName=t}},n.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var e=z1(t);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},n.prototype._updateController=function(t,e,r){var o=t.coordinateSystem,i=this._controller,s=this._controllerHost;s.zoomLimit=t.get("scaleLimit"),s.zoom=o.getZoom(),i.enable(t.get("roam")||!1);var l=t.mainType;function c(){var d={type:"geoRoam",componentType:l};return d[l+"Id"]=t.id,d}i.off("pan").on("pan",function(d){this._mouseDownFlag=!1,sS(s,d.dx,d.dy),r.dispatchAction(Lt(c(),{dx:d.dx,dy:d.dy,animation:{duration:0}}))},this),i.off("zoom").on("zoom",function(d){this._mouseDownFlag=!1,OD(s,d.scale,d.originX,d.originY),r.dispatchAction(Lt(c(),{zoom:d.scale,originX:d.originX,originY:d.originY,animation:{duration:0}}))},this),i.setPointerChecker(function(d,p,m){return o.containPoint([p,m])&&!eT(d,r,t)})},n.prototype.resetForLabelLayout=function(){this.group.traverse(function(t){var e=t.getTextContent();e&&(e.ignore=vO(e).ignore)})},n.prototype._updateMapSelectHandler=function(t,e,r,o){var i=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",function(){i._mouseDownFlag=!0}),e.on("click",function(s){i._mouseDownFlag&&(i._mouseDownFlag=!1)}))},n}();function Yy(n,t,e,r){var o=r.getModel("itemStyle"),i=r.getModel(["emphasis","itemStyle"]),s=r.getModel(["blur","itemStyle"]),l=r.getModel(["select","itemStyle"]),c=FD(o),d=FD(i),p=FD(l),m=FD(s),b=n.data;if(b){var _=b.getItemVisual(e,"style"),S=b.getItemVisual(e,"decal");n.isVisualEncodedByVisualMap&&_.fill&&(c.fill=_.fill),S&&(c.decal=Ls(S,n.api))}t.setStyle(c),t.style.strokeNoScale=!0,t.ensureState("emphasis").style=d,t.ensureState("select").style=p,t.ensureState("blur").style=m,Ng(t)}function sA(n,t,e,r,o,i,s){var l=n.data,c=n.isGeo,d=l&&isNaN(l.get(l.mapDimension("value"),i)),p=l&&l.getItemLayout(i);if(c||d||p&&p.showLabel){var m=c?e:i,b=void 0;(!l||i>=0)&&(b=o);var _=s?{normal:{align:"center",verticalAlign:"middle"}}:null;ps(t,gs(r),{labelFetcher:b,labelDataIndex:m,defaultText:e},_);var S=t.getTextContent();if(S&&(vO(S).ignore=S.ignore,t.textConfig&&s)){var k=t.getBoundingRect().clone();t.textConfig.layoutRect=k,t.textConfig.position=[(s[0]-k.x)/k.width*100+"%",(s[1]-k.y)/k.height*100+"%"]}t.disableLabelAnimation=!0}else t.removeTextContent(),t.removeTextConfig(),t.disableLabelAnimation=null}function uA(n,t,e,r,o,i){n.data?n.data.setItemGraphicEl(i,t):So(t).eventData={componentType:"geo",componentIndex:o.componentIndex,geoIndex:o.componentIndex,name:e,region:r&&r.option||{}}}function yO(n,t,e,r,o){n.data||yu({el:t,componentModel:o,itemName:e,itemTooltipOption:r.get("tooltip")})}function bO(n,t,e,r,o){t.highDownSilentOnTouch=!!o.get("selectedMode");var c,d,p,i=r.getModel("emphasis"),s=i.get("focus");return vu(t,s,i.get("blurScope"),i.get("disabled")),n.isGeo&&(c=o,d=e,(p=So(t)).componentMainType=c.mainType,p.componentIndex=c.componentIndex,p.componentHighDownName=d),s}function xO(n,t,e){var r,o=[];function i(){r=[]}function s(){r.length&&(o.push(r),r=[])}var l=t({polygonStart:i,polygonEnd:s,lineStart:i,lineEnd:s,point:function(c,d){isFinite(c)&&isFinite(d)&&r.push([c,d])},sphere:function(){}});return!e&&l.polygonStart(),Ce(n,function(c){l.lineStart();for(var d=0;d<c.length;d++)l.point(c[d][0],c[d][1]);l.lineEnd()}),!e&&l.polygonEnd(),o}var BP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var s=this.group;if(s.removeAll(),!e.getHostGeoModel()){if(this._mapDraw&&i&&"geoRoam"===i.type&&this._mapDraw.resetForLabelLayout(),i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===e.id)(l=this._mapDraw)&&s.add(l.group);else if(e.needsDrawMap){var l=this._mapDraw||new VD(o);s.add(l.group),l.draw(e,r,o,this,i),this._mapDraw=l}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&r.getComponent("legend")&&this._renderSymbols(e,r,o)}}},t.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},t.prototype._renderSymbols=function(e,r,o){var i=e.originalData,s=this.group;i.each(i.mapDimension("value"),function(l,c){if(!isNaN(l)){var d=i.getItemLayout(c);if(d&&d.point){var p=d.point,m=d.offset,b=new Bf({style:{fill:e.getData().getVisual("style").fill},shape:{cx:p[0]+9*m,cy:p[1],r:3},silent:!0,z2:8+(m?0:11)});if(!m){var _=e.mainSeries.getData(),S=i.getName(c),k=_.indexOfName(S),D=i.getItemModel(c),O=D.getModel("label"),N=_.getItemGraphicEl(k);ps(b,gs(D),{labelFetcher:{getFormattedLabel:function(F,V){return e.getFormattedLabel(k,V)}},defaultText:S}),b.disableLabelAnimation=!0,O.get("position")||b.setTextConfig({position:"bottom"}),N.onHoverStateChange=function(F){Za(b,F)}}s.add(b)}}})},t.type="map",t}($a),zP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.needsDrawMap=!1,e.seriesGroup=[],e.getTooltipPosition=function(r){if(null!=r){var o=this.getData().getName(r),i=this.coordinateSystem,s=i.getRegion(o);return s&&i.dataToPoint(s.getCenter())}},e}return gt(t,n),t.prototype.getInitialData=function(e){for(var r=a(this,{coordDimensions:["value"],encodeDefaulter:dr(wt,this)}),o=Or(),i=[],s=0,l=r.count();s<l;s++){var c=r.getName(s);o.set(c,!0)}return Ce(wm(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(d){var p=d.name;o.get(p)||i.push(p)}),r.appendValues([],i),r},t.prototype.getHostGeoModel=function(){var e=this.option.geoIndex;return null!=e?this.ecModel.getComponent("geo",e):null},t.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},t.prototype.getRawValue=function(e){var r=this.getData();return r.get(r.mapDimension("value"),e)},t.prototype.getRegionModel=function(e){var r=this.getData();return r.getItemModel(r.indexOfName(e))},t.prototype.formatTooltip=function(e,r,o){for(var i=this.getData(),s=this.getRawValue(e),l=i.getName(e),c=this.seriesGroup,d=[],p=0;p<c.length;p++){var m=c[p].originalData.indexOfName(l),b=i.mapDimension("value");isNaN(c[p].originalData.get(b,m))||d.push(c[p].name)}return Dc("section",{header:d.join(", "),noHeader:!d.length,blocks:[Dc("nameValue",{name:l,value:s})]})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.getLegendIcon=function(e){var r=e.icon||"roundRect",o=Dl(r,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return o.setStyle(e.itemStyle),o.style.stroke="none",r.indexOf("empty")>-1&&(o.style.stroke=o.style.fill,o.style.fill="#fff",o.style.lineWidth=2),o},t.type="series.map",t.dependencies=["geo"],t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},t}(Ka);function lA(n){var t={};n.eachSeriesByType("map",function(e){var r=e.getHostGeoModel(),o=r?"o"+r.id:"i"+e.getMapType();(t[o]=t[o]||[]).push(e)}),Ce(t,function(e,r){for(var o,i,s,l=(o=mt(e,function(d){return d.getData()}),i=e[0].get("mapValueCalculation"),s={},Ce(o,function(d){d.each(d.mapDimension("value"),function(p,m){var b="ec-"+d.getName(m);s[b]=s[b]||[],isNaN(p)||s[b].push(p)})}),o[0].map(o[0].mapDimension("value"),function(d,p){for(var m="ec-"+o[0].getName(p),b=0,_=1/0,S=-1/0,k=s[m].length,D=0;D<k;D++)_=Math.min(_,s[m][D]),S=Math.max(S,s[m][D]),b+=s[m][D];return 0===k?NaN:"min"===i?_:"max"===i?S:"average"===i?b/k:b})),c=0;c<e.length;c++)e[c].originalData=e[c].getData();for(c=0;c<e.length;c++)e[c].seriesGroup=e,e[c].needsDrawMap=0===c&&!e[c].getHostGeoModel(),e[c].setData(l.cloneShallow()),e[c].mainSeries=e[0]})}function FP(n){var t={};n.eachSeriesByType("map",function(e){var r=e.getMapType();if(!e.getHostGeoModel()&&!t[r]){var o={};Ce(e.seriesGroup,function(s){var l=s.coordinateSystem,c=s.originalData;s.get("showLegendSymbol")&&n.getComponent("legend")&&c.each(c.mapDimension("value"),function(d,p){var m=c.getName(p),b=l.getRegion(m);if(b&&!isNaN(d)){var _=o[m]||0,S=l.dataToPoint(b.getCenter());o[m]=_+1,c.setItemLayout(p,{point:S,offset:_})}})});var i=e.getData();i.each(function(s){var l=i.getName(s),c=i.getItemLayout(s)||{};c.showLabel=!o[l],i.setItemLayout(s,c)}),t[r]=!0}})}var _O=gn,vp=function(n){function t(e){var r=n.call(this)||this;return r.type="view",r.dimensions=["x","y"],r._roamTransformable=new To,r._rawTransformable=new To,r.name=e,r}return gt(t,n),t.prototype.setBoundingRect=function(e,r,o,i){return this._rect=new Io(e,r,o,i),this._rect},t.prototype.getBoundingRect=function(){return this._rect},t.prototype.setViewRect=function(e,r,o,i){this._transformTo(e,r,o,i),this._viewRect=new Io(e,r,o,i)},t.prototype._transformTo=function(e,r,o,i){var s=this.getBoundingRect(),l=this._rawTransformable;l.transform=s.calculateTransform(new Io(e,r,o,i));var c=l.parent;l.parent=null,l.decomposeTransform(),l.parent=c,this._updateTransform()},t.prototype.setCenter=function(e,r){e&&(this._center=[qn(e[0],r.getWidth()),qn(e[1],r.getHeight())],this._updateCenterAndZoom())},t.prototype.setZoom=function(e){e=e||1;var r=this.zoomLimit;r&&(null!=r.max&&(e=Math.min(r.max,e)),null!=r.min&&(e=Math.max(r.min,e))),this._zoom=e,this._updateCenterAndZoom()},t.prototype.getDefaultCenter=function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},t.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},t.prototype.getZoom=function(){return this._zoom||1},t.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},t.prototype._updateCenterAndZoom=function(){var e=this._rawTransformable.getLocalTransform(),r=this._roamTransformable,o=this.getDefaultCenter(),i=this.getCenter(),s=this.getZoom();i=gn([],i,e),o=gn([],o,e),r.originX=i[0],r.originY=i[1],r.x=o[0]-i[0],r.y=o[1]-i[1],r.scaleX=r.scaleY=s,this._updateTransform()},t.prototype._updateTransform=function(){var e=this._roamTransformable,r=this._rawTransformable;r.parent=e,e.updateTransform(),r.updateTransform(),Hu(this.transform||(this.transform=[]),r.transform||[1,0,0,1,0,0]),this._rawTransform=r.getLocalTransform(),this.invTransform=this.invTransform||[],It(this.invTransform,this.transform),this.decomposeTransform()},t.prototype.getTransformInfo=function(){var e=this._rawTransformable,r=this._roamTransformable,o=new To;return o.transform=r.transform,o.decomposeTransform(),{roam:{x:o.x,y:o.y,scaleX:o.scaleX,scaleY:o.scaleY},raw:{x:e.x,y:e.y,scaleX:e.scaleX,scaleY:e.scaleY}}},t.prototype.getViewRect=function(){return this._viewRect},t.prototype.getViewRectAfterRoam=function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},t.prototype.dataToPoint=function(e,r,o){var i=r?this._rawTransform:this.transform;return o=o||[],i?_O(o,e,i):po(o,e)},t.prototype.pointToData=function(e){var r=this.invTransform;return r?_O([],e,r):[e[0],e[1]]},t.prototype.convertToPixel=function(e,r,o){var i=cA(r);return i===this?i.dataToPoint(o):null},t.prototype.convertFromPixel=function(e,r,o){var i=cA(r);return i===this?i.pointToData(o):null},t.prototype.containPoint=function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])},t.dimensions=["x","y"],t}(To);function cA(n){var t=n.seriesModel;return t?t.coordinateSystem:null}var VP={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},wO=["lng","lat"],Fv=function(n){function t(e,r,o){var i=n.call(this,e)||this;i.dimensions=wO,i.type="geo",i._nameCoordMap=Or(),i.map=r;var s,l=o.projection,c=wm(r,o.nameMap,o.nameProperty),d=z1(r),p=(i.resourceType=d?d.type:null,i.regions=c.regions),m=VP[d.type];if(i._regionsMap=c.regionsMap,i.regions=c.regions,i.projection=l,l)for(var b=0;b<p.length;b++){var _=p[b].getBoundingRect(l);(s=s||_.clone()).union(_)}else s=c.boundingRect;return i.setBoundingRect(s.x,s.y,s.width,s.height),i.aspectScale=l?1:un(o.aspectScale,m.aspectScale),i._invertLongitute=!l&&m.invertLongitute,i}return gt(t,n),t.prototype._transformTo=function(e,r,o,i){var s=this.getBoundingRect(),l=this._invertLongitute;s=s.clone(),l&&(s.y=-s.y-s.height);var c=this._rawTransformable;c.transform=s.calculateTransform(new Io(e,r,o,i));var d=c.parent;c.parent=null,c.decomposeTransform(),c.parent=d,l&&(c.scaleY=-c.scaleY),this._updateTransform()},t.prototype.getRegion=function(e){return this._regionsMap.get(e)},t.prototype.getRegionByCoord=function(e){for(var r=this.regions,o=0;o<r.length;o++){var i=r[o];if("geoJSON"===i.type&&i.contain(e))return r[o]}},t.prototype.addGeoCoord=function(e,r){this._nameCoordMap.set(e,r)},t.prototype.getGeoCoord=function(e){var r=this._regionsMap.get(e);return this._nameCoordMap.get(e)||r&&r.getCenter()},t.prototype.dataToPoint=function(e,r,o){if(ir(e)&&(e=this.getGeoCoord(e)),e){var i=this.projection;return i&&(e=i.project(e)),e&&this.projectedToPoint(e,r,o)}},t.prototype.pointToData=function(e){var r=this.projection;return r&&(e=r.unproject(e)),e&&this.pointToProjected(e)},t.prototype.pointToProjected=function(e){return n.prototype.pointToData.call(this,e)},t.prototype.projectedToPoint=function(e,r,o){return n.prototype.dataToPoint.call(this,e,r,o)},t.prototype.convertToPixel=function(e,r,o){var i=SO(r);return i===this?i.dataToPoint(o):null},t.prototype.convertFromPixel=function(e,r,o){var i=SO(r);return i===this?i.pointToData(o):null},t}(vp);function SO(n){var t=n.geoModel,e=n.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem||(e.getReferringComponents("geo",ll).models[0]||{}).coordinateSystem:null}function HD(n,t){var e=n.get("boundingCoords");if(null!=e){var r=e[0],o=e[1];if(isFinite(r[0])&&isFinite(r[1])&&isFinite(o[0])&&isFinite(o[1])){var i=this.projection;if(i){var s=r[0],l=r[1],c=o[0],d=o[1];r=[1/0,1/0],o=[-1/0,-1/0];var p=function(Z,Q,re,he){for(var ge=re-Z,ve=he-Q,_e=0;_e<=100;_e++){var Ee=_e/100,ze=i.project([Z+ge*Ee,Q+ve*Ee]);Dt(r,r,ze),ro(o,o,ze)}};p(s,l,c,l),p(c,l,c,d),p(c,d,s,d),p(s,d,c,l)}this.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1])}}var m,b,_,S=this.getBoundingRect(),k=n.get("layoutCenter"),D=n.get("layoutSize"),O=t.getWidth(),N=t.getHeight(),F=S.width/S.height*this.aspectScale,V=!1;if(k&&D&&(m=[qn(k[0],O),qn(k[1],N)],b=qn(D,Math.min(O,N)),isNaN(m[0])||isNaN(m[1])||isNaN(b)||(V=!0)),V)_={},F>1?(_.width=b,_.height=b/F):(_.height=b,_.width=b*F),_.y=m[1]-_.height/2,_.x=m[0]-_.width/2;else{var q=n.getBoxLayoutParams();q.aspect=F,_=tl(q,{width:O,height:N})}this.setViewRect(_.x,_.y,_.width,_.height),this.setCenter(n.get("center"),t),this.setZoom(n.get("zoom"))}na(Fv,vp);var fA=function(){function n(){this.dimensions=wO}return n.prototype.create=function(t,e){var r=[];function o(s){return{nameProperty:s.get("nameProperty"),aspectScale:s.get("aspectScale"),projection:s.get("projection")}}t.eachComponent("geo",function(s,l){var c=s.get("map"),d=new Fv(c+l,c,Lt({nameMap:s.get("nameMap")},o(s)));d.zoomLimit=s.get("scaleLimit"),r.push(d),s.coordinateSystem=d,d.model=s,d.resize=HD,d.resize(s,e)}),t.eachSeries(function(s){if("geo"===s.get("coordinateSystem")){var l=s.get("geoIndex")||0;s.coordinateSystem=r[l]}});var i={};return t.eachSeriesByType("map",function(s){if(!s.getHostGeoModel()){var l=s.getMapType();i[l]=i[l]||[],i[l].push(s)}}),Ce(i,function(s,l){var c=mt(s,function(p){return p.get("nameMap")}),d=new Fv(l,l,Lt({nameMap:la(c)},o(s[0])));d.zoomLimit=Hn.apply(null,mt(s,function(p){return p.get("scaleLimit")})),r.push(d),d.resize=HD,d.resize(s[0],e),Ce(s,function(p){var m;p.coordinateSystem=d,m=d,Ce(p.get("geoCoord"),function(_,S){m.addGeoCoord(S,_)})})}),r},n.prototype.getFilledRegions=function(t,e,r,o){for(var i=(t||[]).slice(),s=Or(),l=0;l<i.length;l++)s.set(i[l].name,i[l]);return Ce(wm(e,r,o).regions,function(c){var d=c.name;!s.get(d)&&i.push({name:d})}),i},n}(),CO=new fA,F1=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e,r,o){var i=z1(e.map);if(i&&"geoJSON"===i.type){var s=e.itemStyle=e.itemStyle||{};"color"in s||(s.color="#eee")}this.mergeDefaultAndTheme(e,o),hs(e,"label",["show"])},t.prototype.optionUpdated=function(){var e=this,r=this.option;r.regions=CO.getFilledRegions(r.regions,r.map,r.nameMap,r.nameProperty);var o={};this._optionModelMap=Pn(r.regions||[],function(i,s){var l=s.name;return l&&(i.set(l,new aa(s,e,e.ecModel)),s.selected&&(o[l]=!0)),i},Or()),r.selectedMap||(r.selectedMap=o)},t.prototype.getRegionModel=function(e){return this._optionModelMap.get(e)||new aa(null,this,this.ecModel)},t.prototype.getFormattedLabel=function(e,r){var i=this.getRegionModel(e).get("normal"===r?["label","formatter"]:["emphasis","label","formatter"]),s={name:e};return yr(i)?(s.status=r,i(s)):ir(i)?i.replace("{a}",null!=e?e:""):void 0},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.select=function(e){var r=this.option,o=r.selectedMode;o&&("multiple"!==o&&(r.selectedMap=null),(r.selectedMap||(r.selectedMap={}))[e]=!0)},t.prototype.unSelect=function(e){var r=this.option.selectedMap;r&&(r[e]=!1)},t.prototype.toggleSelected=function(e){this[this.isSelected(e)?"unSelect":"select"](e)},t.prototype.isSelected=function(e){var r=this.option.selectedMap;return!(!r||!r[e])},t.type="geo",t.layoutMode="box",t.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},t}(W);function dA(n,t){return n.pointToProjected?n.pointToProjected(t):n.pointToData(t)}function hA(n,t,e,r){var o=n.getZoom(),i=n.getCenter(),s=t.zoom,l=n.projectedToPoint?n.projectedToPoint(i):n.dataToPoint(i);if(null!=t.dx&&null!=t.dy&&(l[0]-=t.dx,l[1]-=t.dy,n.setCenter(dA(n,l),r)),null!=s){if(e){var c=e.min||0;s=Math.max(Math.min(o*s,e.max||1/0),c)/o}n.scaleX*=s,n.scaleY*=s;var m=(t.originY-n.y)*(s-1);n.x-=(t.originX-n.x)*(s-1),n.y-=m,n.updateTransform(),n.setCenter(dA(n,l),r),n.setZoom(s*o)}return{center:n.getCenter(),zoom:n.getZoom()}}var HP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.focusBlurEnabled=!0,e}return gt(t,n),t.prototype.init=function(e,r){this._api=r},t.prototype.render=function(e,r,o,i){if(this._model=e,!e.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new VD(o));var s=this._mapDraw;s.draw(e,r,o,this,i),s.group.on("click",this._handleRegionClick,this),s.group.silent=e.get("silent"),this.group.add(s.group),this.updateSelectStatus(e,r,o)},t.prototype._handleRegionClick=function(e){var r;Ay(e.target,function(o){return null!=(r=So(o).eventData)},!0),r&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:r.name})},t.prototype.updateSelectStatus=function(e,r,o){var i=this;this._mapDraw.group.traverse(function(s){var l=So(s).eventData;if(l)return i._model.isSelected(l.name)?o.enterSelect(s):o.leaveSelect(s),!0})},t.prototype.findHighDownDispatchers=function(e){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(e,this._model)},t.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},t.type="geo",t}(ks);function pA(n,t,e){!function(n,t,e){if(t.svg){var r=new pO(n,t.svg);nT.set(n,r)}else{var o=t.geoJson||t.geoJSON;o&&!t.features?e=t.specialAreas:o=t,r=new hS(n,o,e),nT.set(n,r)}}(n,t,e)}function MO(n){function t(e,r){r.update="geo:updateSelectStatus",n.registerAction(r,function(o,i){var s={},l=[];return i.eachComponent({mainType:"geo",query:o},function(c){c[e](o.name),Ce(c.coordinateSystem.regions,function(p){s[p.name]=c.isSelected(p.name)||!1});var d=[];Ce(s,function(p,m){s[m]&&d.push(m)}),l.push({geoIndex:c.componentIndex,name:d})}),{selected:s,allSelected:l,name:o.name}})}n.registerCoordinateSystem("geo",CO),n.registerComponentModel(F1),n.registerComponentView(HP),n.registerImpl("registerMap",pA),n.registerImpl("getMap",function(e){return function(n){var t=nT.get(n);return t&&"geoJSON"===t.type&&t.getMapForUser()}(e)}),t("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),t("select",{type:"geoSelect",event:"geoselected"}),t("unSelect",{type:"geoUnSelect",event:"geounselected"}),n.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,r,o){var i=e.componentType||"series";r.eachComponent({mainType:i,query:e},function(s){var l=s.coordinateSystem;if("geo"===l.type){var c=hA(l,e,s.get("scaleLimit"),o);s.setCenter&&s.setCenter(c.center),s.setZoom&&s.setZoom(c.zoom),"series"===i&&Ce(s.seriesGroup,function(d){d.setCenter(c.center),d.setZoom(c.zoom)})}})})}function WP(n,t){var e=n.isExpand?n.children:[],r=n.parentNode.children,o=n.hierNode.i?r[n.hierNode.i-1]:null;if(e.length){!function(s){for(var l=s.children,c=l.length,d=0,p=0;--c>=0;){var m=l[c];m.hierNode.prelim+=d,m.hierNode.modifier+=d,d+=m.hierNode.shift+(p+=m.hierNode.change)}}(n);var i=(e[0].hierNode.prelim+e[e.length-1].hierNode.prelim)/2;o?(n.hierNode.prelim=o.hierNode.prelim+t(n,o),n.hierNode.modifier=n.hierNode.prelim-i):n.hierNode.prelim=i}else o&&(n.hierNode.prelim=o.hierNode.prelim+t(n,o));n.parentNode.hierNode.defaultAncestor=function(s,l,c,d){if(l){for(var p=s,m=s,b=m.parentNode.children[0],_=l,S=p.hierNode.modifier,k=m.hierNode.modifier,D=b.hierNode.modifier,O=_.hierNode.modifier;_=fM(_),m=WD(m),_&&m;){p=fM(p),b=WD(b),p.hierNode.ancestor=s;var N=_.hierNode.prelim+O-m.hierNode.prelim-k+d(_,m);N>0&&(UP(GP(_,s,c),s,N),k+=N,S+=N),O+=_.hierNode.modifier,k+=m.hierNode.modifier,S+=p.hierNode.modifier,D+=b.hierNode.modifier}_&&!fM(p)&&(p.hierNode.thread=_,p.hierNode.modifier+=O-S),m&&!WD(b)&&(b.hierNode.thread=m,b.hierNode.modifier+=k-D,c=s)}return c}(n,o,n.parentNode.hierNode.defaultAncestor||r[0],t)}function pS(n){n.setLayout({x:n.hierNode.prelim+n.parentNode.hierNode.modifier},!0),n.hierNode.modifier+=n.parentNode.hierNode.modifier}function kO(n){return arguments.length?n:gA}function rT(n,t){return n-=Math.PI/2,{x:t*Math.cos(n),y:t*Math.sin(n)}}function fM(n){var t=n.children;return t.length&&n.isExpand?t[t.length-1]:n.hierNode.thread}function WD(n){var t=n.children;return t.length&&n.isExpand?t[0]:n.hierNode.thread}function GP(n,t,e){return n.hierNode.ancestor.parentNode===t.parentNode?n.hierNode.ancestor:e}function UP(n,t,e){var r=e/(t.hierNode.i-n.hierNode.i);t.hierNode.change-=r,t.hierNode.shift+=e,t.hierNode.modifier+=e,t.hierNode.prelim+=e,n.hierNode.change+=r}function gA(n,t){return n.parentNode===t.parentNode?1:2}var jP=function(){this.parentPoint=[],this.childPoints=[]},YP=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new jP},t.prototype.buildPath=function(e,r){var o=r.childPoints,i=o.length,s=r.parentPoint,l=o[0],c=o[i-1];if(1===i)return e.moveTo(s[0],s[1]),void e.lineTo(l[0],l[1]);var d=r.orient,p="TB"===d||"BT"===d?0:1,m=1-p,b=qn(r.forkPosition,1),_=[];_[p]=s[p],_[m]=s[m]+(c[m]-s[m])*b,e.moveTo(s[0],s[1]),e.lineTo(_[0],_[1]),e.moveTo(l[0],l[1]),_[p]=l[p],e.lineTo(_[0],_[1]),_[p]=c[p],e.lineTo(_[0],_[1]),e.lineTo(c[0],c[1]);for(var S=1;S<i-1;S++){var k=o[S];e.moveTo(k[0],k[1]),_[p]=k[p],e.lineTo(_[0],_[1])}},t}(Go),qP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._mainGroup=new xo,e}return gt(t,n),t.prototype.init=function(e,r){this._controller=new v_(r.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},t.prototype.render=function(e,r,o){var i=e.getData(),s=e.layoutInfo,l=this._mainGroup;"radial"===e.get("layout")?(l.x=s.x+s.width/2,l.y=s.y+s.height/2):(l.x=s.x,l.y=s.y),this._updateViewCoordSys(e,o),this._updateController(e,r,o);var c=this._data;i.diff(c).add(function(d){TO(i,d)&&DO(i,d,null,l,e)}).update(function(d,p){var m=c.getItemGraphicEl(p);TO(i,d)?DO(i,d,m,l,e):m&&Su(c,p,m,l,e)}).remove(function(d){var p=c.getItemGraphicEl(d);p&&Su(c,d,p,l,e)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===e.get("expandAndCollapse")&&i.eachItemGraphicEl(function(d,p){d.off("click").on("click",function(){o.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:p})})}),this._data=i},t.prototype._updateViewCoordSys=function(e,r){var o=e.getData(),i=[];o.each(function(m){var b=o.getItemLayout(m);!b||isNaN(b.x)||isNaN(b.y)||i.push([+b.x,+b.y])});var s=[],l=[];Ya(i,s,l);var c=this._min,d=this._max;l[0]-s[0]==0&&(s[0]=c?c[0]:s[0]-1,l[0]=d?d[0]:l[0]+1),l[1]-s[1]==0&&(s[1]=c?c[1]:s[1]-1,l[1]=d?d[1]:l[1]+1);var p=e.coordinateSystem=new vp;p.zoomLimit=e.get("scaleLimit"),p.setBoundingRect(s[0],s[1],l[0]-s[0],l[1]-s[1]),p.setCenter(e.get("center"),r),p.setZoom(e.get("zoom")),this.group.attr({x:p.x,y:p.y,scaleX:p.scaleX,scaleY:p.scaleY}),this._min=s,this._max=l},t.prototype._updateController=function(e,r,o){var i=this,s=this._controller,l=this._controllerHost,c=this.group;s.setPointerChecker(function(d,p,m){var b=c.getBoundingRect();return b.applyTransform(c.transform),b.contain(p,m)&&!eT(d,o,e)}),s.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(d){sS(l,d.dx,d.dy),o.dispatchAction({seriesId:e.id,type:"treeRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){OD(l,d.scale,d.originX,d.originY),o.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),i._updateNodeAndLinkScale(e),o.updateLabelLayout()})},t.prototype._updateNodeAndLinkScale=function(e){var r=e.getData(),o=this._getNodeGlobalScale(e);r.eachItemGraphicEl(function(i,s){i.setSymbolScale(o)})},t.prototype._getNodeGlobalScale=function(e){var r=e.coordinateSystem;if("view"!==r.type)return 1;var o=this._nodeScaleRatio,i=r.scaleX||1;return((r.getZoom()-1)*o+1)/i},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},t.type="tree",t}($a);function TO(n,t){var e=n.getItemLayout(t);return e&&!isNaN(e.x)&&!isNaN(e.y)}function DO(n,t,e,r,o){var i=!e,s=n.tree.getNodeByDataIndex(t),l=s.getModel(),c=s.getVisual("style").fill,d=!1===s.isExpand&&0!==s.children.length?c:"#fff",p=n.tree.root,m=s.parentNode===p?s:s.parentNode||s,b=n.getItemGraphicEl(m.dataIndex),_=m.getLayout(),S=b?{x:b.__oldX,y:b.__oldY,rawX:b.__radialOldRawX,rawY:b.__radialOldRawY}:_,k=s.getLayout();i?((e=new hg(n,t,null,{symbolInnerColor:d,useNameLabel:!0})).x=S.x,e.y=S.y):e.updateData(n,t,null,{symbolInnerColor:d,useNameLabel:!0}),e.__radialOldRawX=e.__radialRawX,e.__radialOldRawY=e.__radialRawY,e.__radialRawX=k.rawX,e.__radialRawY=k.rawY,r.add(e),n.setItemGraphicEl(t,e),e.__oldX=e.x,e.__oldY=e.y,mo(e,{x:k.x,y:k.y},o);var D=e.getSymbolPath();if("radial"===o.get("layout")){var O=p.children[0],N=O.getLayout(),F=O.children.length,V=void 0,q=void 0;if(k.x===N.x&&!0===s.isExpand&&O.children.length){var Z={x:(O.children[0].getLayout().x+O.children[F-1].getLayout().x)/2,y:(O.children[0].getLayout().y+O.children[F-1].getLayout().y)/2};(V=Math.atan2(Z.y-N.y,Z.x-N.x))<0&&(V=2*Math.PI+V),(q=Z.x<N.x)&&(V-=Math.PI)}else(V=Math.atan2(k.y-N.y,k.x-N.x))<0&&(V=2*Math.PI+V),0===s.children.length||0!==s.children.length&&!1===s.isExpand?(q=k.x<N.x)&&(V-=Math.PI):(q=k.x>N.x)||(V-=Math.PI);var Q=q?"left":"right",re=l.getModel("label"),he=re.get("rotate"),ge=he*(Math.PI/180),ve=D.getTextContent();ve&&(D.setTextConfig({position:re.get("position")||Q,rotation:null==he?-V:ge,origin:"center"}),ve.setStyle("verticalAlign","middle"))}var _e=l.get(["emphasis","focus"]),Ee="relative"===_e?$(s.getAncestorsIndices(),s.getDescendantIndices()):"ancestor"===_e?s.getAncestorsIndices():"descendant"===_e?s.getDescendantIndices():null;Ee&&(So(e).focus=Ee),function(ze,Ge,Xe,$e,nt,yt,_t,Et){var hn=Ge.getModel(),Zn=ze.get("edgeShape"),Rt=ze.get("layout"),Mn=ze.getOrient(),lr=ze.get(["lineStyle","curveness"]),ar=ze.get("edgeForkPosition"),Kn=hn.getModel("lineStyle").getLineStyle(),xr=$e.__edge;if("curve"===Zn)Ge.parentNode&&Ge.parentNode!==Xe&&(xr||(xr=$e.__edge=new cc({shape:GD(Rt,Mn,lr,nt,nt)})),mo(xr,{shape:GD(Rt,Mn,lr,yt,_t)},ze));else if("polyline"===Zn&&"orthogonal"===Rt&&Ge!==Xe&&Ge.children&&0!==Ge.children.length&&!0===Ge.isExpand){for(var nr=Ge.children,Cr=[],zr=0;zr<nr.length;zr++){var qo=nr[zr].getLayout();Cr.push([qo.x,qo.y])}xr||(xr=$e.__edge=new YP({shape:{parentPoint:[_t.x,_t.y],childPoints:[[_t.x,_t.y]],orient:Mn,forkPosition:ar}})),mo(xr,{shape:{parentPoint:[_t.x,_t.y],childPoints:Cr}},ze)}xr&&("polyline"!==Zn||Ge.isExpand)&&(xr.useStyle(Yn({strokeNoScale:!0,fill:null},Kn)),kl(xr,hn,"lineStyle"),Ng(xr),Et.add(xr))}(o,s,p,e,S,_,k,r),e.__edge&&(e.onHoverStateChange=function(ze){if("blur"!==ze){var Ge=s.parentNode&&n.getItemGraphicEl(s.parentNode.dataIndex);Ge&&1===Ge.hoverState||Za(e.__edge,ze)}})}function AO(n,t,e,r,o){var i=IO(t.tree.root,n),s=i.source,l=i.sourceLayout,c=t.getItemGraphicEl(n.dataIndex);if(c){var d=t.getItemGraphicEl(s.dataIndex).__edge,p=c.__edge||(!1===s.isExpand||1===s.children.length?d:void 0),m=r.get("edgeShape"),b=r.get("layout"),_=r.get("orient"),S=r.get(["lineStyle","curveness"]);p&&("curve"===m?$p(p,{shape:GD(b,_,S,l,l),style:{opacity:0}},r,{cb:function(){e.remove(p)},removeOpt:o}):"polyline"===m&&"orthogonal"===r.get("layout")&&$p(p,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},r,{cb:function(){e.remove(p)},removeOpt:o}))}}function IO(n,t){for(var e,r=t.parentNode===n?t:t.parentNode||t;null==(e=r.getLayout());)r=r.parentNode===n?r:r.parentNode||r;return{source:r,sourceLayout:e}}function Su(n,t,e,r,o){var i=n.tree.getNodeByDataIndex(t),s=IO(n.tree.root,i).sourceLayout,l={duration:o.get("animationDurationUpdate"),easing:o.get("animationEasingUpdate")};$p(e,{x:s.x+1,y:s.y+1},o,{cb:function(){r.remove(e),n.setItemGraphicEl(t,null)},removeOpt:l}),e.fadeOut(null,n.hostModel,{fadeLabel:!0,animation:l}),i.children.forEach(function(c){AO(c,n,r,o,l)}),AO(i,n,r,o,l)}function GD(n,t,e,r,o){var i,s,l,c,d,p,m,b;if("radial"===n){p=o.rawX,b=o.rawY;var _=rT(d=r.rawX,m=r.rawY),S=rT(d,m+(b-m)*e),k=rT(p,b+(m-b)*e),D=rT(p,b);return{x1:_.x||0,y1:_.y||0,x2:D.x||0,y2:D.y||0,cpx1:S.x||0,cpy1:S.y||0,cpx2:k.x||0,cpy2:k.y||0}}return d=r.x,m=r.y,p=o.x,b=o.y,"LR"!==t&&"RL"!==t||(i=d+(p-d)*e,s=m,l=p+(d-p)*e,c=b),"TB"!==t&&"BT"!==t||(i=d,s=m+(b-m)*e,l=p,c=b+(m-b)*e),{x1:d,y1:m,x2:p,y2:b,cpx1:i,cpy1:s,cpx2:l,cpy2:c}}var Vv=hi();function OO(n){var t=n.mainData,e=n.datas;e||(e={main:t},n.datasAttr={main:"data"}),n.datas=n.mainData=null,vA(t,e,n),Ce(e,function(r){Ce(t.TRANSFERABLE_METHODS,function(o){r.wrapMethod(o,dr(mA,n))})}),t.wrapMethod("cloneShallow",dr(PO,n)),Ce(t.CHANGABLE_METHODS,function(r){t.wrapMethod(r,dr(EO,n))}),Ao(e[t.dataType]===t)}function mA(n,t){if(Vv(this).mainData===this){var e=Lt({},Vv(this).datas);e[this.dataType]=t,vA(t,e,n)}else UD(t,this.dataType,Vv(this).mainData,n);return t}function EO(n,t){return n.struct&&n.struct.update(),t}function PO(n,t){return Ce(Vv(t).datas,function(e,r){e!==t&&UD(e.cloneShallow(),r,t,n)}),t}function RO(n){var t=Vv(this).mainData;return null==n||null==t?t:Vv(t).datas[n]}function LO(){var n=Vv(this).mainData;return null==n?[{data:n}]:mt(rr(Vv(n).datas),function(t){return{type:t,data:Vv(n).datas[t]}})}function vA(n,t,e){Vv(n).datas={},Ce(t,function(r,o){UD(r,o,n,e)})}function UD(n,t,e,r){Vv(e).datas[t]=n,Vv(n).mainData=e,n.dataType=t,r.struct&&(n[r.structAttr]=r.struct,r.struct[r.datasAttr[t]]=n),n.getLinkedData=RO,n.getLinkedDataAll=LO}var NO=function(){function n(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return n.prototype.isRemoved=function(){return this.dataIndex<0},n.prototype.eachNode=function(t,e,r){yr(t)&&(r=e,e=t,t=null),ir(t=t||{})&&(t={order:t});var o,i=t.order||"preorder",s=this[t.attr||"children"];"preorder"===i&&(o=e.call(r,this));for(var l=0;!o&&l<s.length;l++)s[l].eachNode(t,e,r);"postorder"===i&&e.call(r,this)},n.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var r=0;r<this.children.length;r++){var o=this.children[r];o.updateDepthAndHeight(t+1),o.height>e&&(e=o.height)}this.height=e+1},n.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,r=this.children,o=r.length;e<o;e++){var i=r[e].getNodeById(t);if(i)return i}},n.prototype.contains=function(t){if(t===this)return!0;for(var e=0,r=this.children,o=r.length;e<o;e++){var i=r[e].contains(t);if(i)return i}},n.prototype.getAncestors=function(t){for(var e=[],r=t?this:this.parentNode;r;)e.push(r),r=r.parentNode;return e.reverse(),e},n.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},n.prototype.getDescendantIndices=function(){var t=[];return this.eachNode(function(e){t.push(e.dataIndex)}),t},n.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},n.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},n.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},n.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},n.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},n.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},n.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},n.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},n.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},n.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},n.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},n.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},n}(),yA=function(){function n(t){this.type="tree",this._nodes=[],this.hostModel=t}return n.prototype.eachNode=function(t,e,r){this.root.eachNode(t,e,r)},n.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},n.prototype.getNodeById=function(t){return this.root.getNodeById(t)},n.prototype.update=function(){for(var t=this.data,e=this._nodes,r=0,o=e.length;r<o;r++)e[r].dataIndex=-1;for(r=0,o=t.count();r<o;r++)e[t.getRawIndex(r)].dataIndex=r},n.prototype.clearLayouts=function(){this.data.clearItemLayouts()},n.createTree=function(t,e,r){var o=new n(e),i=[],s=1;(function d(p,m){var b=p.value;s=Math.max(s,Ue(b)?b.length:1),i.push(p);var D,O,_=new NO(is(p.name,""),o);m?(D=_).parentNode!==(O=m)&&(O.children.push(D),D.parentNode=O):o.root=_,o._nodes.push(_);var S=p.children;if(S)for(var k=0;k<S.length;k++)d(S[k],_)})(t),o.root.updateDepthAndHeight(0);var l=_v(i,{coordDimensions:["value"],dimensionsCount:s}).dimensions,c=new Jc(l,e);return c.initData(i),r&&r(c),OO({mainData:c,struct:o,structAttr:"tree"}),o.update(),o},n}();function oT(n,t,e){if(n&&Ir(t,n.type)>=0){var r=e.getData().tree.root,o=n.targetNode;if(ir(o)&&(o=r.getNodeById(o)),o&&r.contains(o))return{node:o};var i=n.targetNodeId;if(null!=i&&(o=r.getNodeById(i)))return{node:o}}}function bA(n){for(var t=[];n;)(n=n.parentNode)&&t.push(n);return t.reverse()}function iT(n,t){return Ir(bA(n),t)>=0}function aT(n,t){for(var e=[];n;){var r=n.dataIndex;e.push({name:n.name,dataIndex:r,value:t.getRawValue(r)}),n=n.parentNode}return e.reverse(),e}var sT=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return gt(t,n),t.prototype.getInitialData=function(e){var r={name:e.name,children:e.data},i=new aa(e.leaves||{},this,this.ecModel),s=yA.createTree(r,this,function(d){d.wrapMethod("getItemModel",function(p,m){var b=s.getNodeByDataIndex(m);return b&&b.children.length&&b.isExpand||(p.parentModel=i),p})}),l=0;s.eachNode("preorder",function(d){d.depth>l&&(l=d.depth)});var c=e.expandAndCollapse&&e.initialTreeDepth>=0?e.initialTreeDepth:l;return s.root.eachNode("preorder",function(d){var p=d.hostTree.data.getRawDataItem(d.dataIndex);d.isExpand=p&&null!=p.collapsed?!p.collapsed:d.depth<=c}),s.data},t.prototype.getOrient=function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.formatTooltip=function(e,r,o){for(var i=this.getData().tree,s=i.root.children[0],l=i.getNodeByDataIndex(e),c=l.getValue(),d=l.name;l&&l!==s;)d=l.parentNode.name+"."+d,l=l.parentNode;return Dc("nameValue",{name:d,value:c,noValue:isNaN(c)||null==c})},t.prototype.getDataParams=function(e){var r=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return r.treeAncestors=aT(o,this),r.collapsed=!o.isExpand,r},t.type="series.tree",t.layoutMode="box",t.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},t}(Ka);function dM(n,t){for(var e,r=[n];e=r.pop();)if(t(e),e.isExpand){var o=e.children;if(o.length)for(var i=o.length-1;i>=0;i--)r.push(o[i])}}function xA(n,t){n.eachSeriesByType("tree",function(e){!function(r,o){var Q,i=(Q=o,tl(r.getBoxLayoutParams(),{width:Q.getWidth(),height:Q.getHeight()}));r.layoutInfo=i;var s=r.get("layout"),l=0,c=0,d=null;"radial"===s?(l=2*Math.PI,c=Math.min(i.height,i.width)/2,d=kO(function(Z,Q){return(Z.parentNode===Q.parentNode?1:2)/Z.depth})):(l=i.width,c=i.height,d=kO());var p=r.getData().tree.root,m=p.children[0];if(m){(function(Z){var Q=Z;Q.hierNode={defaultAncestor:null,ancestor:Q,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var re,he,ge=[Q];re=ge.pop();)if(he=re.children,re.isExpand&&he.length)for(var ve=he.length-1;ve>=0;ve--){var _e=he[ve];_e.hierNode={defaultAncestor:null,ancestor:_e,prelim:0,modifier:0,change:0,shift:0,i:ve,thread:null},ge.push(_e)}})(p),function(Z,Q,re){for(var he,ge=[Z],ve=[];he=ge.pop();)if(ve.push(he),he.isExpand){var _e=he.children;if(_e.length)for(var Ee=0;Ee<_e.length;Ee++)ge.push(_e[Ee])}for(;he=ve.pop();)Q(he,re)}(m,WP,d),p.hierNode.modifier=-m.hierNode.prelim,dM(m,pS);var b=m,_=m,S=m;dM(m,function(Z){var Q=Z.getLayout().x;Q<b.getLayout().x&&(b=Z),Q>_.getLayout().x&&(_=Z),Z.depth>S.depth&&(S=Z)});var k=b===_?1:d(b,_)/2,D=k-b.getLayout().x,O=0,N=0,F=0,V=0;if("radial"===s)O=l/(_.getLayout().x+k+D),N=c/(S.depth-1||1),dM(m,function(Z){var Q=rT(F=(Z.getLayout().x+D)*O,V=(Z.depth-1)*N);Z.setLayout({x:Q.x,y:Q.y,rawX:F,rawY:V},!0)});else{var q=r.getOrient();"RL"===q||"LR"===q?(N=c/(_.getLayout().x+k+D),O=l/(S.depth-1||1),dM(m,function(Z){V=(Z.getLayout().x+D)*N,Z.setLayout({x:F="LR"===q?(Z.depth-1)*O:l-(Z.depth-1)*O,y:V},!0)})):"TB"!==q&&"BT"!==q||(O=l/(_.getLayout().x+k+D),N=c/(S.depth-1||1),dM(m,function(Z){F=(Z.getLayout().x+D)*O,Z.setLayout({x:F,y:V="TB"===q?(Z.depth-1)*N:c-(Z.depth-1)*N},!0)}))}}}(e,t)})}function _A(n){n.eachSeriesByType("tree",function(t){var e=t.getData();e.tree.eachNode(function(r){var o=r.getModel().getModel("itemStyle").getItemStyle();Lt(e.ensureUniqueItemVisual(r.dataIndex,"style"),o)})})}var uT=["treemapZoomToNode","treemapRender","treemapMove"];function wA(n){var t=n.getData().tree,e={};t.eachNode(function(r){for(var o=r;o&&o.depth>1;)o=o.parentNode;var i=si(n.ecModel,o.name||o.dataIndex+"",e);r.setVisual("decal",i)})}var XP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.preventUsingHoverLayer=!0,e}return gt(t,n),t.prototype.getInitialData=function(e,r){var o={name:e.name,children:e.data};SA(o);var i=e.levels||[],s=this.designatedVisualItemStyle={},l=new aa({itemStyle:s},this,r),c=mt((i=e.levels=function(p,m){var b,_,S=ci(m.get("color")),k=ci(m.get(["aria","decal","decals"]));if(S){Ce(p=p||[],function(O){var N=new aa(O),F=N.get("color"),V=N.get("decal");(N.get(["itemStyle","color"])||F&&"none"!==F)&&(b=!0),(N.get(["itemStyle","decal"])||V&&"none"!==V)&&(_=!0)});var D=p[0]||(p[0]={});return b||(D.color=S.slice()),!_&&k&&(D.decal=k.slice()),p}}(i,r))||[],function(p){return new aa(p,l,r)},this),d=yA.createTree(o,this,function(p){p.wrapMethod("getItemModel",function(m,b){var _=d.getNodeByDataIndex(b);return m.parentModel=(_?c[_.depth]:null)||l,m})});return d.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.formatTooltip=function(e,r,o){var i=this.getData(),s=this.getRawValue(e);return Dc("nameValue",{name:i.getName(e),value:s})},t.prototype.getDataParams=function(e){var r=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return r.treeAncestors=aT(o,this),r.treePathInfo=r.treeAncestors,r},t.prototype.setLayoutInfo=function(e){this.layoutInfo=this.layoutInfo||{},Lt(this.layoutInfo,e)},t.prototype.mapIdToIndex=function(e){var r=this._idIndexMap;r||(r=this._idIndexMap=Or(),this._idIndexMapCount=0);var o=r.get(e);return null==o&&r.set(e,o=this._idIndexMapCount++),o},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var r=this.getRawData().tree.root;e&&(e===r||r.contains(e))||(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){wA(this)},t.type="series.treemap",t.layoutMode="box",t.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},t}(Ka);function SA(n){var t=0;Ce(n.children,function(r){SA(r);var o=r.value;Ue(o)&&(o=o[0]),t+=o});var e=n.value;Ue(e)&&(e=e[0]),(null==e||isNaN(e))&&(e=t),e<0&&(e=0),Ue(n.value)?n.value[0]=e:n.value=e}var BO=function(){function n(t){this.group=new xo,t.add(this.group)}return n.prototype.render=function(t,e,r,o){var i=t.getModel("breadcrumb"),s=this.group;if(s.removeAll(),i.get("show")&&r){var l=i.getModel("itemStyle"),c=i.getModel("emphasis"),d=l.getModel("textStyle"),p=c.getModel(["itemStyle","textStyle"]),m={pos:{left:i.get("left"),right:i.get("right"),top:i.get("top"),bottom:i.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:i.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(r,m,d),this._renderContent(t,m,l,c,d,p,o),hv(s,m.pos,m.box)}},n.prototype._prepare=function(t,e,r){for(var o=t;o;o=o.parentNode){var i=is(o.getModel().get("name"),""),s=r.getTextRect(i),l=Math.max(s.width+16,e.emptyItemWidth);e.totalWidth+=l+8,e.renderList.push({node:o,text:i,width:l})}},n.prototype._renderContent=function(t,e,r,o,i,s,l){for(var c,d,p,m,b,_,S,k,D,O=0,N=e.emptyItemWidth,F=t.get(["breadcrumb","height"]),V=(b=(d=e.box).height,_=qn((c=e.pos).left,m=d.width),S=qn(c.top,b),k=qn(c.right,m),D=qn(c.bottom,b),(isNaN(_)||isNaN(parseFloat(c.left)))&&(_=0),(isNaN(k)||isNaN(parseFloat(c.right)))&&(k=m),(isNaN(S)||isNaN(parseFloat(c.top)))&&(S=0),(isNaN(D)||isNaN(parseFloat(c.bottom)))&&(D=b),p=$g(p||0),{width:Math.max(k-_-p[1]-p[3],0),height:Math.max(D-S-p[0]-p[2],0)}),q=e.totalWidth,Z=e.renderList,Q=o.getModel("itemStyle").getItemStyle(),re=Z.length-1;re>=0;re--){var he=Z[re],ge=he.node,ve=he.width,_e=he.text;q>V.width&&(q-=ve-N,ve=N,_e=null);var Ee=new eu({shape:{points:zO(O,0,ve,F,re===Z.length-1,0===re)},style:Yn(r.getItemStyle(),{lineJoin:"bevel"}),textContent:new Oi({style:Vi(i,{text:_e})}),textConfig:{position:"inside"},z2:1e5,onclick:dr(l,ge)});Ee.disableLabelAnimation=!0,Ee.getTextContent().ensureState("emphasis").style=Vi(s,{text:_e}),Ee.ensureState("emphasis").style=Q,vu(Ee,o.get("focus"),o.get("blurScope"),o.get("disabled")),this.group.add(Ee),CA(Ee,t,ge),O+=ve+8}},n.prototype.remove=function(){this.group.removeAll()},n}();function zO(n,t,e,r,o,i){var s=[[o?n:n-5,t],[n+e,t],[n+e,t+r],[o?n:n-5,t+r]];return!i&&s.splice(2,0,[n+e+5,t+r/2]),!o&&s.push([n,t+r/2]),s}function CA(n,t,e){So(n).eventData={componentType:"series",componentSubType:"treemap",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:e&&e.dataIndex,name:e&&e.name},treePathInfo:e&&aT(e,t)}}var FO=function(){function n(){this._storage=[],this._elExistsMap={}}return n.prototype.add=function(t,e,r,o,i){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:r,delay:o,easing:i}),!0)},n.prototype.finished=function(t){return this._finishedCallback=t,this},n.prototype.start=function(){for(var t=this,e=this._storage.length,r=function(){--e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},o=0,i=this._storage.length;o<i;o++){var s=this._storage[o];s.el.animateTo(s.target,{duration:s.duration,delay:s.delay,easing:s.easing,setToFinal:!0,done:r,aborted:r})}return this},n}(),jD=xo,VO=bi,HO="upperLabel",gS=Vp([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),WO=function(n){var t=gS(n);return t.stroke=t.fill=t.lineWidth=null,t},mS=hi(),MA=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._state="ready",e._storage={nodeGroup:[],background:[],content:[]},e}return gt(t,n),t.prototype.render=function(e,r,o,i){if(!(Ir(r.findComponents({mainType:"series",subType:"treemap",query:i}),e)<0)){this.seriesModel=e,this.api=o,this.ecModel=r;var s=oT(i,["treemapZoomToNode","treemapRootToNode"],e),l=i&&i.type,c=e.layoutInfo,d=!this._oldTree,p=this._storage,m="treemapRootToNode"===l&&s&&p?{rootNodeGroup:p.nodeGroup[s.node.getRawIndex()],direction:i.direction}:null,b=this._giveContainerGroup(c),_=e.get("animation"),S=this._doRender(b,e,m);!_||d||l&&"treemapZoomToNode"!==l&&"treemapRootToNode"!==l?S.renderFinally():this._doAnimation(b,S,e,m),this._resetController(o),this._renderBreadcrumb(e,o,s)}},t.prototype._giveContainerGroup=function(e){var r=this._containerGroup;return r||(r=this._containerGroup=new jD,this._initEvents(r),this.group.add(r)),r.x=e.x,r.y=e.y,r},t.prototype._doRender=function(e,r,o){var i=r.getData().tree,s=this._oldTree,l={nodeGroup:[],background:[],content:[]},c={nodeGroup:[],background:[],content:[]},d=this._storage,p=[];!function _(S,k,D,O,N){function F(q){return q.getId()}function V(q,Z){var Q=null!=q?S[q]:null,re=null!=Z?k[Z]:null,he=function m(_,S,k,D){return function(O,N,F,V,q,Z,Q,re,he,ge){if(Q){var ve=Q.getLayout(),_e=O.getData(),Ee=Q.getModel();if(_e.setItemGraphicEl(Q.dataIndex,null),ve&&ve.isInView){var ze=ve.width,Ge=ve.height,Xe=ve.borderWidth,$e=ve.invisible,nt=Q.getRawIndex(),yt=re&&re.getRawIndex(),_t=Q.viewChildren,Et=ve.upperHeight,hn=_t&&_t.length,Zn=Ee.getModel("itemStyle"),Rt=Ee.getModel(["emphasis","itemStyle"]),Mn=Ee.getModel(["blur","itemStyle"]),lr=Ee.getModel(["select","itemStyle"]),ar=Zn.get("borderRadius")||0,Kn=td("nodeGroup",jD);if(Kn){if(he.add(Kn),Kn.x=ve.x||0,Kn.y=ve.y||0,Kn.markRedraw(),mS(Kn).nodeWidth=ze,mS(Kn).nodeHeight=Ge,ve.isAboveViewRoot)return Kn;var xr=td("background",VO,ge,20);xr&&function ji(Fa,Bi,Xo){var zu=So(Bi);if(zu.dataIndex=Q.dataIndex,zu.seriesIndex=O.seriesIndex,Bi.setShape({x:0,y:0,width:ze,height:Ge,r:ar}),$e)za(Bi);else{Bi.invisible=!1;var Jl=Q.getVisual("style"),_f=Jl.stroke,wf=WO(Zn);wf.fill=_f;var Sf=gS(Rt);Sf.fill=Rt.get("borderColor");var j1=gS(Mn);j1.fill=Mn.get("borderColor");var IS=gS(lr);IS.fill=lr.get("borderColor"),Xo?Bu(Bi,_f,Jl.opacity,{x:Xe,y:0,width:ze-2*Xe,height:Et}):Bi.removeTextContent(),Bi.setStyle(wf),Bi.ensureState("emphasis").style=Sf,Bi.ensureState("blur").style=j1,Bi.ensureState("select").style=IS,Ng(Bi)}Fa.add(Bi)}(Kn,xr,hn&&ve.upperLabelHeight);var nr=Ee.getModel("emphasis"),Cr=nr.get("focus"),zr=nr.get("blurScope"),qo=nr.get("disabled"),li="ancestor"===Cr?Q.getAncestorsIndices():"descendant"===Cr?Q.getDescendantIndices():Cr;if(hn)Lf(Kn)&&sc(Kn,!1),xr&&(sc(xr,!qo),_e.setItemGraphicEl(Q.dataIndex,xr),F_(xr,li,zr));else{var ss=td("content",VO,ge,30);ss&&function pa(Fa,Bi){var Xo=So(Bi);Xo.dataIndex=Q.dataIndex,Xo.seriesIndex=O.seriesIndex;var zu=Math.max(ze-2*Xe,0),Jl=Math.max(Ge-2*Xe,0);if(Bi.culling=!0,Bi.setShape({x:Xe,y:Xe,width:zu,height:Jl,r:ar}),$e)za(Bi);else{Bi.invisible=!1;var _f=Q.getVisual("style"),wf=_f.fill,Sf=WO(Zn);Sf.fill=wf,Sf.decal=_f.decal;var j1=gS(Rt),IS=gS(Mn),V2=gS(lr);Bu(Bi,wf,_f.opacity,null),Bi.setStyle(Sf),Bi.ensureState("emphasis").style=j1,Bi.ensureState("blur").style=IS,Bi.ensureState("select").style=V2,Ng(Bi)}Fa.add(Bi)}(Kn,ss),xr.disableMorphing=!0,xr&&Lf(xr)&&sc(xr,!1),sc(Kn,!qo),_e.setItemGraphicEl(Q.dataIndex,Kn),F_(Kn,li,zr)}return Kn}}}function za(Fa){!Fa.invisible&&Z.push(Fa)}function Bu(Fa,Bi,Xo,zu){var Jl=Ee.getModel(zu?HO:"label"),_f=is(Ee.get("name"),null),wf=Jl.getShallow("show");ps(Fa,gs(Ee,zu?HO:"label"),{defaultText:wf?_f:null,inheritColor:Bi,defaultOpacity:Xo,labelFetcher:O,labelDataIndex:Q.dataIndex});var Sf=Fa.getTextContent();if(Sf){var j1=Sf.style,IS=Sr(j1.padding||0);zu&&(Fa.setTextConfig({layoutRect:zu}),Sf.disableLabelLayout=!0),Sf.beforeUpdate=function(){var ZB=Math.max((zu?zu.width:Fa.shape.width)-IS[1]-IS[3],0),KB=Math.max((zu?zu.height:Fa.shape.height)-IS[0]-IS[2],0);j1.width===ZB&&j1.height===KB||Sf.setStyle({width:ZB,height:KB})},j1.truncateMinChar=2,j1.lineOverflow="truncate",nl(j1,zu,ve);var V2=Sf.getState("emphasis");nl(V2?V2.style:null,zu,ve)}}function nl(Fa,Bi,Xo){var zu=Fa?Fa.text:null;if(!Bi&&Xo.isLeafRoot&&null!=zu){var Jl=O.get("drillDownIcon",!0);Fa.text=Jl?Jl+" "+zu:zu}}function td(Fa,Bi,Xo,zu){var Jl=null!=yt&&F[Fa][yt],_f=q[Fa];return Jl?(F[Fa][yt]=null,function Yv(Fa,Bi){var Xo=Fa[nt]={};Bi instanceof jD?(Xo.oldX=Bi.x,Xo.oldY=Bi.y):Xo.oldShape=Lt({},Bi.shape)}(_f,Jl)):$e||((Jl=new Bi)instanceof Ml&&(Jl.z2=100*Xo+zu),function A_(Fa,Bi){var Xo=Fa[nt]={},zu=Q.parentNode,Jl=Bi instanceof xo;if(zu&&(!V||"drillDown"===V.direction)){var _f=0,wf=0,Sf=q.background[zu.getRawIndex()];!V&&Sf&&Sf.oldShape&&(_f=Sf.oldShape.width,wf=Sf.oldShape.height),Jl?(Xo.oldX=0,Xo.oldY=wf):Xo.oldShape={x:_f,y:wf,width:0,height:0}}Xo.fadein=!Jl}(_f,Jl)),N[Fa][nt]=Jl}}(r,c,d,o,l,p,_,S,k,D)}(Q,re,D,N);he&&_(Q&&Q.viewChildren||[],re&&re.viewChildren||[],he,O,N+1)}O?(k=S,Ce(S,function(q,Z){!q.isRemoved()&&V(Z,Z)})):new lg(k,S,F,F).add(V).update(V).remove(dr(V,null)).execute()}(i.root?[i.root]:[],s&&s.root?[s.root]:[],e,i===s||!s,0);var _,S,b=(S={nodeGroup:[],background:[],content:[]},(_=d)&&Ce(_,function(k,D){var O=S[D];Ce(k,function(N){N&&(O.push(N),mS(N).willDelete=!0)})}),S);return this._oldTree=i,this._storage=c,{lastsForAnimation:l,willDeleteEls:b,renderFinally:function(){Ce(b,function(_){Ce(_,function(S){S.parent&&S.parent.remove(S)})}),Ce(p,function(_){_.invisible=!0,_.dirty()})}}},t.prototype._doAnimation=function(e,r,o,i){var s=o.get("animationDurationUpdate"),l=o.get("animationEasing"),c=(yr(s)?0:s)||0,d=(yr(l)?null:l)||"cubicOut",p=new FO;Ce(r.willDeleteEls,function(m,b){Ce(m,function(_,S){if(!_.invisible){var k,D=_.parent,O=mS(D);if(i&&"drillDown"===i.direction)k=D===i.rootNodeGroup?{shape:{x:0,y:0,width:O.nodeWidth,height:O.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var N=0,F=0;O.willDelete||(N=O.nodeWidth/2,F=O.nodeHeight/2),k="nodeGroup"===b?{x:N,y:F,style:{opacity:0}}:{shape:{x:N,y:F,width:0,height:0},style:{opacity:0}}}k&&p.add(_,k,c,0,d)}})}),Ce(this._storage,function(m,b){Ce(m,function(_,S){var k=r.lastsForAnimation[b][S],D={};k&&(_ instanceof xo?null!=k.oldX&&(D.x=_.x,D.y=_.y,_.x=k.oldX,_.y=k.oldY):(k.oldShape&&(D.shape=Lt({},_.shape),_.setShape(k.oldShape)),k.fadein?(_.setStyle("opacity",0),D.style={opacity:1}):1!==_.style.opacity&&(D.style={opacity:1})),p.add(_,D,c,0,d))})},this),this._state="animating",p.finished(De(function(){this._state="ready",r.renderFinally()},this)).start()},t.prototype._resetController=function(e){var r=this._controller;r||((r=this._controller=new v_(e.getZr())).enable(this.seriesModel.get("roam")),r.on("pan",De(this._onPan,this)),r.on("zoom",De(this._onZoom,this)));var o=new Io(0,0,e.getWidth(),e.getHeight());r.setPointerChecker(function(i,s,l){return o.contain(s,l)})},t.prototype._clearController=function(){var e=this._controller;e&&(e.dispose(),e=null)},t.prototype._onPan=function(e){if("animating"!==this._state&&(Math.abs(e.dx)>3||Math.abs(e.dy)>3)){var r=this.seriesModel.getData().tree.root;if(!r)return;var o=r.getLayout();if(!o)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x+e.dx,y:o.y+e.dy,width:o.width,height:o.height}})}},t.prototype._onZoom=function(e){var r=e.originX,o=e.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var s=i.getLayout();if(!s)return;var l=new Io(s.x,s.y,s.width,s.height),c=this.seriesModel.layoutInfo,d=[1,0,0,1,0,0];Rc(d,d,[-(r-=c.x),-(o-=c.y)]),Qt(d,d,[e.scale,e.scale]),Rc(d,d,[r,o]),l.applyTransform(d),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:l.x,y:l.y,width:l.width,height:l.height}})}},t.prototype._initEvents=function(e){var r=this;e.on("click",function(o){if("ready"===r._state){var i=r.seriesModel.get("nodeClick",!0);if(i){var s=r.findTarget(o.offsetX,o.offsetY);if(s){var l=s.node;if(l.getLayout().isLeafRoot)r._rootToNode(s);else if("zoomToNode"===i)r._zoomToNode(s);else if("link"===i){var c=l.hostTree.data.getItemModel(l.dataIndex),d=c.get("link",!0),p=c.get("target",!0)||"blank";d&&Jg(d,p)}}}}},this)},t.prototype._renderBreadcrumb=function(e,r,o){var i=this;o||(o=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(r.getWidth()/2,r.getHeight()/2))||(o={node:e.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new BO(this.group))).render(e,r,o.node,function(s){"animating"!==i._state&&(iT(e.getViewRoot(),s)?i._rootToNode({node:s}):i._zoomToNode({node:s}))})},t.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},t.prototype.dispose=function(){this._clearController()},t.prototype._zoomToNode=function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype._rootToNode=function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},t.prototype.findTarget=function(e,r){var o;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(i){var s=this._storage.background[i.getRawIndex()];if(s){var l=s.transformCoordToLocal(e,r),c=s.shape;if(!(c.x<=l[0]&&l[0]<=c.x+c.width&&c.y<=l[1]&&l[1]<=c.y+c.height))return!1;o={node:i,offsetX:l[0],offsetY:l[1]}}},this),o},t.type="treemap",t}($a),hM=Ce,kA=wr,Kf=function(){function n(t){var e=t.mappingMethod,r=t.type,o=this.option=an(t);this.type=r,this.mappingMethod=e,this._normalizeData=UO[e];var s,l,i=n.visualHandlers[r];this.applyVisual=i.applyVisual,this.getColorMapper=i.getColorMapper,this._normalizedToVisual=i._normalizedToVisual[e],"piecewise"===e?(DA(o),l=(s=o).pieceList,s.hasSpecialVisual=!1,Ce(l,function(c,d){c.originIndex=d,null!=c.visual&&(s.hasSpecialVisual=!0)})):"category"===e?o.categories?function(s){var l=s.categories,c=s.categoryMap={},d=s.visual;if(hM(l,function(b,_){c[b]=_}),!Ue(d)){var p=[];wr(d)?hM(d,function(b,_){var S=c[_];p[null!=S?S:-1]=b}):p[-1]=d,d=AA(s,p)}for(var m=l.length-1;m>=0;m--)null==d[m]&&(delete c[l[m]],l.pop())}(o):DA(o,!0):(Ao("linear"!==e||o.dataExtent),DA(o))}return n.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},n.prototype.getNormalizer=function(){return De(this._normalizeData,this)},n.listVisualTypes=function(){return rr(n.visualHandlers)},n.isValidType=function(t){return n.visualHandlers.hasOwnProperty(t)},n.eachVisual=function(t,e,r){wr(t)?Ce(t,e,r):e.call(r,t)},n.mapVisual=function(t,e,r){var o,i=Ue(t)?[]:wr(t)?{}:(o=!0,null);return n.eachVisual(t,function(s,l){var c=e.call(r,s,l);o?i=c:i[l]=c}),i},n.retrieveVisuals=function(t){var e,r={};return t&&hM(n.visualHandlers,function(o,i){t.hasOwnProperty(i)&&(r[i]=t[i],e=!0)}),e?r:null},n.prepareVisualTypes=function(t){if(Ue(t))t=t.slice();else{if(!kA(t))return[];var e=[];hM(t,function(r,o){e.push(o)}),t=e}return t.sort(function(r,o){return"color"===o&&"color"!==r&&0===r.indexOf("color")?1:-1}),t},n.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},n.findPieceIndex=function(t,e,r){for(var o,i=1/0,s=0,l=e.length;s<l;s++){var c=e[s].value;if(null!=c){if(c===t||ir(c)&&c===t+"")return s;r&&b(c,s)}}for(s=0,l=e.length;s<l;s++){var d=e[s],p=d.interval,m=d.close;if(p){if(p[0]===-1/0){if(ZD(m[1],t,p[1]))return s}else if(p[1]===1/0){if(ZD(m[0],p[0],t))return s}else if(ZD(m[0],p[0],t)&&ZD(m[1],t,p[1]))return s;r&&b(p[0],s),r&&b(p[1],s)}}if(r)return t===1/0?e.length-1:t===-1/0?0:o;function b(_,S){var k=Math.abs(_-t);k<i&&(i=k,o=S)}},n.visualHandlers={color:{applyVisual:$f("color"),getColorMapper:function(){var t=this.option;return De("category"===t.mappingMethod?function(e,r){return!r&&(e=this._normalizeData(e)),lT.call(this,e)}:function(e,r,o){var i=!!o;return!r&&(e=this._normalizeData(e)),o=Tm(e,t.parsedVisual,o),i?o:hu(o,"rgba")},this)},_normalizedToVisual:{linear:function(t){return hu(Tm(t,this.option.parsedVisual),"rgba")},category:lT,piecewise:function(t,e){var r=XD.call(this,e);return null==r&&(r=hu(Tm(t,this.option.parsedVisual),"rgba")),r},fixed:vS}},colorHue:qD(function(t,e){return du(t,e)}),colorSaturation:qD(function(t,e){return du(t,null,e)}),colorLightness:qD(function(t,e){return du(t,null,null,e)}),colorAlpha:qD(function(t,e){return od(t,e)}),decal:{applyVisual:$f("decal"),_normalizedToVisual:{linear:null,category:lT,piecewise:null,fixed:null}},opacity:{applyVisual:$f("opacity"),_normalizedToVisual:pM([0,1])},liftZ:{applyVisual:$f("liftZ"),_normalizedToVisual:{linear:vS,category:vS,piecewise:vS,fixed:vS}},symbol:{applyVisual:function(t,e,r){r("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:GO,category:lT,piecewise:function(t,e){var r=XD.call(this,e);return null==r&&(r=GO.call(this,t)),r},fixed:vS}},symbolSize:{applyVisual:$f("symbolSize"),_normalizedToVisual:pM([0,1])}},n}();function DA(n,t){var e=n.visual,r=[];wr(e)?hM(e,function(o){r.push(o)}):null!=e&&r.push(e),t||1!==r.length||{color:1,symbol:1}.hasOwnProperty(n.type)||(r[1]=r[0]),AA(n,r)}function qD(n){return{applyVisual:function(t,e,r){var o=this.mapValueToVisual(t);r("color",n(e("color"),o))},_normalizedToVisual:pM([0,1])}}function GO(n){var t=this.option.visual;return t[Math.round(fa(n,[0,1],[0,t.length-1],!0))]||{}}function $f(n){return function(t,e,r){r(n,this.mapValueToVisual(t))}}function lT(n){var t=this.option.visual;return t[this.option.loop&&-1!==n?n%t.length:n]}function vS(){return this.option.visual[0]}function pM(n){return{linear:function(t){return fa(t,n,this.option.visual,!0)},category:lT,piecewise:function(t,e){var r=XD.call(this,e);return null==r&&(r=fa(t,n,this.option.visual,!0)),r},fixed:vS}}function XD(n){var t=this.option,e=t.pieceList;if(t.hasSpecialVisual){var r=e[Kf.findPieceIndex(n,e)];if(r&&r.visual)return r.visual[this.type]}}function AA(n,t){return n.visual=t,"color"===n.type&&(n.parsedVisual=mt(t,function(e){return oo(e)||[0,0,0,1]})),t}var UO={linear:function(n){return fa(n,this.option.dataExtent,[0,1],!0)},piecewise:function(n){var t=this.option.pieceList,e=Kf.findPieceIndex(n,t,!0);if(null!=e)return fa(e,[0,t.length-1],[0,1],!0)},category:function(n){var t=this.option.categories?this.option.categoryMap[n]:n;return null==t?-1:t},fixed:Fo};function ZD(n,t,e){return n?t<=e:t<e}var yS=hi(),jO={seriesType:"treemap",reset:function(n){var t=n.getData().tree.root;t.isRemoved()||cT(t,{},n.getViewRoot().getAncestors(),n)}};function cT(n,t,e,r){var k,D,O,N,F,o=n.getModel(),i=n.getLayout(),s=n.hostTree.data;if(i&&!i.invisible&&i.isInView){var l,c=o.getModel("itemStyle"),d=(k=c,O=r,N=Lt({},D=t),F=O.designatedVisualItemStyle,Ce(["color","colorAlpha","colorSaturation"],function(V){F[V]=D[V];var q=k.get(V);F[V]=null,null!=q&&(N[V]=q)}),N),p=s.ensureUniqueItemVisual(n.dataIndex,"style"),m=c.get("borderColor"),b=c.get("borderColorSaturation");null!=b&&(m=function(k,D){return null!=D?du(D,null,null,k):null}(b,l=IA(d))),p.stroke=m;var _=n.viewChildren;if(_&&_.length){var S=function(k,D,O,N,F,V){if(V&&V.length){var q=EA(D,"color")||null!=F.color&&"none"!==F.color&&(EA(D,"colorAlpha")||EA(D,"colorSaturation"));if(q){var Z=D.get("visualMin"),Q=D.get("visualMax"),re=O.dataExtent.slice();null!=Z&&Z<re[0]&&(re[0]=Z),null!=Q&&Q>re[1]&&(re[1]=Q);var he=D.get("colorMappingBy"),ge={type:q.name,dataExtent:re,visual:q.range};"color"!==ge.type||"index"!==he&&"id"!==he?ge.mappingMethod="linear":(ge.mappingMethod="category",ge.loop=!0);var ve=new Kf(ge);return yS(ve).drColorMappingBy=he,ve}}}(0,o,i,0,d,_);Ce(_,function(k,D){if(k.depth>=e.length||k===e[k.depth]){var O=function(N,F,V,q,Z,Q){var re=Lt({},F);if(Z){var he=Z.type,ge="color"===he&&yS(Z).drColorMappingBy,ve="index"===ge?q:"id"===ge?Q.mapIdToIndex(V.getId()):V.getValue(N.get("visualDimension"));re[he]=Z.mapValueToVisual(ve)}return re}(o,d,k,D,S,r);cT(k,O,e,r)}})}else l=IA(d),p.fill=l}}function IA(n){var t=OA(n,"color");if(t){var e=OA(n,"colorAlpha"),r=OA(n,"colorSaturation");return r&&(t=du(t,null,null,r)),e&&(t=od(t,e)),t}}function OA(n,t){var e=n[t];if(null!=e&&"none"!==e)return e}function EA(n,t){var e=n.get(t);return Ue(e)&&e.length?{name:t,range:e}:null}var fT=Math.max,dT=Math.min,YO=Hn,KD=Ce,PA=["itemStyle","borderWidth"],qO=["itemStyle","gapWidth"],XO=["upperLabel","show"],RA=["upperLabel","height"],LA={seriesType:"treemap",reset:function(n,t,e,r){var o=e.getWidth(),i=e.getHeight(),s=n.option,l=tl(n.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),c=s.size||[],d=qn(YO(l.width,c[0]),o),p=qn(YO(l.height,c[1]),i),m=r&&r.type,b=oT(r,["treemapZoomToNode","treemapRootToNode"],n),_="treemapRender"===m||"treemapMove"===m?r.rootRect:null,S=n.getViewRoot(),k=bA(S);if("treemapMove"!==m){var D="treemapZoomToNode"===m?function(q,Z,Q,re,he){var ge,ve=(Z||{}).node,_e=[re,he];if(!ve||ve===Q)return _e;for(var Ee=re*he,ze=Ee*q.option.zoomToNodeRatio;ge=ve.parentNode;){for(var Ge=0,Xe=ge.children,$e=0,nt=Xe.length;$e<nt;$e++)Ge+=Xe[$e].getValue();var yt=ve.getValue();if(0===yt)return _e;ze*=Ge/yt;var _t=ge.getModel(),Et=_t.get(PA);(ze+=4*Et*Et+(3*Et+Math.max(Et,NA(_t)))*Math.pow(ze,.5))>ld&&(ze=ld),ve=ge}ze<Ee&&(ze=Ee);var hn=Math.pow(ze/Ee,.5);return[re*hn,he*hn]}(n,b,S,d,p):_?[_.width,_.height]:[d,p],O=s.sort;O&&"asc"!==O&&"desc"!==O&&(O="desc");var N={squareRatio:s.squareRatio,sort:O,leafDepth:s.leafDepth};S.hostTree.clearLayouts();var F={x:0,y:0,width:D[0],height:D[1],area:D[0]*D[1]};S.setLayout(F),$D(S,N,!1,0),F=S.getLayout(),KD(k,function(q,Z){var Q=(k[Z+1]||S).getValue();q.setLayout(Lt({dataExtent:[Q,Q],borderWidth:0,upperHeight:0},F))})}var V=n.getData().tree.root;V.setLayout(function(q,Z,Q){if(Z)return{x:Z.x,y:Z.y};var re={x:0,y:0};if(!Q)return re;var he=Q.node,ge=he.getLayout();if(!ge)return re;for(var ve=[ge.width/2,ge.height/2],_e=he;_e;){var Ee=_e.getLayout();ve[0]+=Ee.x,ve[1]+=Ee.y,_e=_e.parentNode}return{x:q.width/2-ve[0],y:q.height/2-ve[1]}}(l,_,b),!0),n.setLayoutInfo(l),hT(V,new Io(-l.x,-l.y,o,i),k,S,0)}};function $D(n,t,e,r){var o,i;if(!n.isRemoved()){var s=n.getLayout();o=s.width,i=s.height;var l=n.getModel(),c=l.get(PA),d=l.get(qO)/2,p=NA(l),m=Math.max(c,p),b=c-d,_=m-d;n.setLayout({borderWidth:c,upperHeight:m,upperLabelHeight:p},!0);var S=(o=fT(o-2*b,0))*(i=fT(i-b-_,0)),k=function(he,ge,ve,_e,Ee,ze){var Ge=he.children||[],Xe=_e.sort;"asc"!==Xe&&"desc"!==Xe&&(Xe=null);var Zn,$e=null!=_e.leafDepth&&_e.leafDepth<=ze;if(Ee&&!$e)return he.viewChildren=[];Ge=yo(Ge,function(hn){return!hn.isRemoved()}),(Zn=Xe)&&Ge.sort(function(Rt,Mn){var lr="asc"===Zn?Rt.getValue()-Mn.getValue():Mn.getValue()-Rt.getValue();return 0===lr?"asc"===Zn?Rt.dataIndex-Mn.dataIndex:Mn.dataIndex-Rt.dataIndex:lr});var nt=function(hn,Zn,Rt){for(var Mn=0,lr=0,ar=Zn.length;lr<ar;lr++)Mn+=Zn[lr].getValue();var Kn,xr=hn.get("visualDimension");return Zn&&Zn.length?"value"===xr&&Rt?(Kn=[Zn[Zn.length-1].getValue(),Zn[0].getValue()],"asc"===Rt&&Kn.reverse()):(Kn=[1/0,-1/0],KD(Zn,function(nr){var Cr=nr.getValue(xr);Cr<Kn[0]&&(Kn[0]=Cr),Cr>Kn[1]&&(Kn[1]=Cr)})):Kn=[NaN,NaN],{sum:Mn,dataExtent:Kn}}(ge,Ge,Xe);if(0===nt.sum)return he.viewChildren=[];if(nt.sum=function(hn,Zn,Rt,Mn,lr){if(!Mn)return Rt;for(var ar=hn.get("visibleMin"),Kn=lr.length,xr=Kn,nr=Kn-1;nr>=0;nr--){var Cr=lr["asc"===Mn?Kn-nr-1:nr].getValue();Cr/Rt*Zn<ar&&(xr=nr,Rt-=Cr)}return lr.splice("asc"===Mn?0:xr,Kn-xr),Rt}(ge,ve,nt.sum,Xe,Ge),0===nt.sum)return he.viewChildren=[];for(var yt=0,_t=Ge.length;yt<_t;yt++){var Et=Ge[yt].getValue()/nt.sum*ve;Ge[yt].setLayout({area:Et})}return $e&&(Ge.length&&he.setLayout({isLeafRoot:!0},!0),Ge.length=0),he.viewChildren=Ge,he.setLayout({dataExtent:nt.dataExtent},!0),Ge}(n,l,S,t,e,r);if(k.length){var D={x:b,y:_,width:o,height:i},O=dT(o,i),N=1/0,F=[];F.area=0;for(var V=0,q=k.length;V<q;){var Z=k[V];F.push(Z),F.area+=Z.getLayout().area;var Q=ZP(F,O,t.squareRatio);Q<=N?(V++,N=Q):(F.area-=F.pop().getLayout().area,ZO(F,O,D,d,!1),O=dT(D.width,D.height),F.length=F.area=0,N=1/0)}if(F.length&&ZO(F,O,D,d,!0),!e){var re=l.get("childrenVisibleMin");null!=re&&S<re&&(e=!0)}for(V=0,q=k.length;V<q;V++)$D(k[V],t,e,r+1)}}}function ZP(n,t,e){for(var r=0,o=1/0,i=0,s=void 0,l=n.length;i<l;i++)(s=n[i].getLayout().area)&&(s<o&&(o=s),s>r&&(r=s));var c=n.area*n.area,d=t*t*e;return c?fT(d*r/c,c/(d*o)):1/0}function ZO(n,t,e,r,o){var i=t===e.width?0:1,s=1-i,l=["x","y"],c=["width","height"],d=e[l[i]],p=t?n.area/t:0;(o||p>e[c[s]])&&(p=e[c[s]]);for(var m=0,b=n.length;m<b;m++){var _=n[m],S={},k=p?_.getLayout().area/p:0,D=S[c[s]]=fT(p-2*r,0),O=e[l[i]]+e[c[i]]-d,N=m===b-1||O<k?O:k,F=S[c[i]]=fT(N-2*r,0);S[l[s]]=e[l[s]]+dT(r,D/2),S[l[i]]=d+dT(r,F/2),d+=N,_.setLayout(S,!0)}e[l[s]]+=p,e[c[s]]-=p}function hT(n,t,e,r,o){var i=n.getLayout(),s=e[o],l=s&&s===n;if(!(s&&!l||o===e.length&&n!==r)){n.setLayout({isInView:!0,invisible:!l&&!t.intersect(i),isAboveViewRoot:l},!0);var c=new Io(t.x-i.x,t.y-i.y,t.width,t.height);KD(n.viewChildren||[],function(d){hT(d,c,e,r,o+1)})}}function NA(n){return n.get(XO)?n.get(RA):0}function BA(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.eachSeriesByType("graph",function(e){var r=e.getCategoriesData(),o=e.getGraph().data,i=r.mapArray(r.getName);o.filterSelf(function(s){var l=o.getItemModel(s).getShallow("category");if(null!=l){gr(l)&&(l=i[l]);for(var c=0;c<t.length;c++)if(!t[c].isSelected(l))return!1}return!0})})}function KP(n){var t={};n.eachSeriesByType("graph",function(e){var r=e.getCategoriesData(),o=e.getData(),i={};r.each(function(s){var l=r.getName(s);i["ec-"+l]=s;var c=r.getItemModel(s),d=c.getModel("itemStyle").getItemStyle();d.fill||(d.fill=e.getColorFromPalette(l,t)),r.setItemVisual(s,"style",d);for(var p=["symbol","symbolSize","symbolKeepAspect"],m=0;m<p.length;m++){var b=c.getShallow(p[m],!0);null!=b&&r.setItemVisual(s,p[m],b)}}),r.count()&&o.each(function(s){var l=o.getItemModel(s).getShallow("category");if(null!=l){ir(l)&&(l=i["ec-"+l]);var c=r.getItemVisual(l,"style");Lt(o.ensureUniqueItemVisual(s,"style"),c);for(var d=["symbol","symbolSize","symbolKeepAspect"],p=0;p<d.length;p++)o.setItemVisual(s,d[p],r.getItemVisual(l,d[p]))}})})}function bS(n){return n instanceof Array||(n=[n,n]),n}function $P(n){n.eachSeriesByType("graph",function(t){var e=t.getGraph(),r=t.getEdgeData(),o=bS(t.get("edgeSymbol")),i=bS(t.get("edgeSymbolSize"));r.setVisual("fromSymbol",o&&o[0]),r.setVisual("toSymbol",o&&o[1]),r.setVisual("fromSymbolSize",i&&i[0]),r.setVisual("toSymbolSize",i&&i[1]),r.setVisual("style",t.getModel("lineStyle").getLineStyle()),r.each(function(s){var l=r.getItemModel(s),c=e.getEdgeByIndex(s),d=bS(l.getShallow("symbol",!0)),p=bS(l.getShallow("symbolSize",!0)),m=l.getModel("lineStyle").getLineStyle(),b=r.ensureUniqueItemVisual(s,"style");switch(Lt(b,m),b.stroke){case"source":var _=c.node1.getVisual("style");b.stroke=_&&_.fill;break;case"target":_=c.node2.getVisual("style"),b.stroke=_&&_.fill}d[0]&&c.setVisual("fromSymbol",d[0]),d[1]&&c.setVisual("toSymbol",d[1]),p[0]&&c.setVisual("fromSymbolSize",p[0]),p[1]&&c.setVisual("toSymbolSize",p[1])})})}var y_=function(n){return n.get("autoCurveness")||null},FA=function(n,t){var e=y_(n),r=20,o=[];if(gr(e))r=e;else if(Ue(e))return void(n.__curvenessList=e);t>r&&(r=t);var i=r%2?r+2:r+3;o=[];for(var s=0;s<i;s++)o.push((s%2?s+1:s)/10*(s%2?-1:1));n.__curvenessList=o},pT=function(n,t,e){var r=[n.id,n.dataIndex].join("."),o=[t.id,t.dataIndex].join(".");return[e.uid,r,o].join("--\x3e")},VA=function(n){var t=n.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},HA=function(n,t){var e=t.__edgeMap;return e[n]?e[n].length:0};function JD(n,t,e,r){var o=y_(t),i=Ue(o);if(!o)return null;var D,O,N,s=(N=pT((D=n).node1,D.node2,O=t),O.__edgeMap[N]);if(!s)return null;for(var l=-1,c=0;c<s.length;c++)if(s[c]===e){l=c;break}var d=function(D,O){return HA(pT(D.node1,D.node2,O),O)+HA(pT(D.node2,D.node1,O),O)}(n,t);FA(t,d),n.lineStyle=n.lineStyle||{};var p=pT(n.node1,n.node2,t),m=t.__curvenessList,b=i||d%2?0:1;if(s.isForward)return m[b+l];var _=VA(p),S=HA(_,t),k=m[l+S+b];return r?i?o&&0===o[0]?(S+b)%2?k:-k:((S%2?0:1)+b)%2?k:-k:(S+b)%2?k:-k:m[l+S+b]}function WA(n){var t=n.coordinateSystem;if(!t||"view"===t.type){var e=n.getGraph();e.eachNode(function(r){var o=r.getModel();r.setLayout([+o.get("x"),+o.get("y")])}),QD(e,n)}}function QD(n,t){n.eachEdge(function(e,r){var o=rn(e.getModel().get(["lineStyle","curveness"]),-JD(e,t,r,!0),0),i=Vu(e.node1.getLayout()),s=Vu(e.node2.getLayout()),l=[i,s];+o&&l.push([(i[0]+s[0])/2-(i[1]-s[1])*o,(i[1]+s[1])/2-(s[0]-i[0])*o]),e.setLayout(l)})}function KO(n,t){n.eachSeriesByType("graph",function(e){var r=e.get("layout"),o=e.coordinateSystem;if(o&&"view"!==o.type){var i=e.getData(),s=[];Ce(o.dimensions,function(b){s=s.concat(i.mapDimensionsAll(b))});for(var l=0;l<i.count();l++){for(var c=[],d=!1,p=0;p<s.length;p++){var m=i.get(s[p],l);isNaN(m)||(d=!0),c.push(m)}i.setItemLayout(l,d?o.dataToPoint(c):[NaN,NaN])}QD(i.graph,e)}else r&&"none"!==r||WA(e)})}function gM(n){var t=n.coordinateSystem;if("view"!==t.type)return 1;var e=n.option.nodeScaleRatio,r=t.scaleX;return((t.getZoom()-1)*e+1)/r}function mM(n){var t=n.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}var $O=Math.PI,vM=[];function yM(n,t,e,r){var o=n.coordinateSystem;if(!o||"view"===o.type){var i=o.getBoundingRect(),s=n.getData(),l=s.graph,c=i.width/2+i.x,d=i.height/2+i.y,p=Math.min(i.width,i.height)/2,m=s.count();if(s.setLayout({cx:c,cy:d}),m){if(e){var b=o.pointToData(r),k=[b[0]-c,b[1]-d];er(k,k),Zt(k,k,p),e.setLayout([c+k[0],d+k[1]],!0),gT(e,n.get(["circular","rotateLabel"]),c,d)}V1[t](n,l,s,p,c,d,m),l.eachEdge(function(D,O){var N,F=rn(D.getModel().get(["lineStyle","curveness"]),JD(D,n,O),0),V=Vu(D.node1.getLayout()),q=Vu(D.node2.getLayout());+F&&(N=[c*(F*=3)+(V[0]+q[0])/2*(1-F),d*F+(V[1]+q[1])/2*(1-F)]),D.setLayout([V,q,N])})}}}var V1={value:function(n,t,e,r,o,i,s){var l=0,c=e.getSum("value"),d=2*Math.PI/(c||s);t.eachNode(function(p){var m=p.getValue("value"),b=d*(c?m:1)/2;l+=b,p.setLayout([r*Math.cos(l)+o,r*Math.sin(l)+i]),l+=b})},symbolSize:function(n,t,e,r,o,i,s){var l=0;vM.length=s;var c=gM(n);t.eachNode(function(m){var b=mM(m);isNaN(b)&&(b=2),b<0&&(b=0),b*=c;var _=Math.asin(b/2/r);isNaN(_)&&(_=$O/2),vM[m.dataIndex]=_,l+=2*_});var d=(2*$O-l)/s/2,p=0;t.eachNode(function(m){var b=d+vM[m.dataIndex];p+=b,(!m.getLayout()||!m.getLayout().fixed)&&m.setLayout([r*Math.cos(p)+o,r*Math.sin(p)+i]),p+=b})}};function gT(n,t,e,r){var o=n.getGraphicEl();if(o){var i=n.getModel().get(["label","rotate"])||0,s=o.getSymbolPath();if(t){var l=n.getLayout(),c=Math.atan2(l[1]-r,l[0]-e);c<0&&(c=2*Math.PI+c);var d=l[0]<e;d&&(c-=Math.PI);var p=d?"left":"right";s.setTextConfig({rotation:-c,position:p,origin:"center"});var m=s.ensureState("emphasis");Lt(m.textConfig||(m.textConfig={}),{position:p})}else s.setTextConfig({rotation:i*=Math.PI/180})}}function bM(n){n.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&yM(t,"symbolSize")})}var xS=Dn;function JO(n){n.eachSeriesByType("graph",function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var r=t.preservedPoints||{},o=t.getGraph(),i=o.data,s=o.edgeData,l=t.getModel("force"),c=l.get("initLayout");t.preservedPoints?i.each(function(F){var V=i.getId(F);i.setItemLayout(F,r[V]||[NaN,NaN])}):c&&"none"!==c?"circular"===c&&yM(t,"value"):WA(t);var d=i.getDataExtent("value"),p=s.getDataExtent("value"),m=l.get("repulsion"),b=l.get("edgeLength"),_=Ue(m)?m:[m,m],S=Ue(b)?b:[b,b];S=[S[1],S[0]];var k=i.mapArray("value",function(F,V){var q=i.getItemLayout(V),Z=fa(F,d,_);return isNaN(Z)&&(Z=(_[0]+_[1])/2),{w:Z,rep:Z,fixed:i.getItemModel(V).get("fixed"),p:!q||isNaN(q[0])||isNaN(q[1])?null:q}}),D=s.mapArray("value",function(F,V){var q=o.getEdgeByIndex(V),Z=fa(F,p,S);isNaN(Z)&&(Z=(S[0]+S[1])/2);var Q=q.getModel(),re=rn(q.getModel().get(["lineStyle","curveness"]),-JD(q,t,V,!0),0);return{n1:k[q.node1.dataIndex],n2:k[q.node2.dataIndex],d:Z,curveness:re,ignoreForceLayout:Q.get("ignoreForceLayout")}}),O=e.getBoundingRect(),N=function(F,V,q){for(var Z=F,Q=V,re=q.rect,he=re.width,ge=re.height,ve=[re.x+he/2,re.y+ge/2],_e=null==q.gravity?.1:q.gravity,Ee=0;Ee<Z.length;Ee++){var ze=Z[Ee];ze.p||(ze.p=ra(he*(Math.random()-.5)+ve[0],ge*(Math.random()-.5)+ve[1])),ze.pp=Vu(ze.p),ze.edges=null}var Ge,Xe,$e=null==q.friction?.6:q.friction,nt=$e;return{warmUp:function(){nt=.8*$e},setFixed:function(yt){Z[yt].fixed=!0},setUnfixed:function(yt){Z[yt].fixed=!1},beforeStep:function(yt){Ge=yt},afterStep:function(yt){Xe=yt},step:function(yt){Ge&&Ge(Z,Q);for(var _t=[],Et=Z.length,hn=0;hn<Q.length;hn++){var Zn=Q[hn];if(!Zn.ignoreForceLayout){var Rt=Zn.n1;Ke(_t,(Kn=Zn.n2).p,Rt.p);var Mn=bt(_t)-Zn.d,lr=Kn.w/(Rt.w+Kn.w);isNaN(lr)&&(lr=0),er(_t,_t),!Rt.fixed&&xS(Rt.p,Rt.p,_t,lr*Mn*nt),!Kn.fixed&&xS(Kn.p,Kn.p,_t,-(1-lr)*Mn*nt)}}for(hn=0;hn<Et;hn++)(Cr=Z[hn]).fixed||(Ke(_t,ve,Cr.p),xS(Cr.p,Cr.p,_t,_e*nt));for(hn=0;hn<Et;hn++){Rt=Z[hn];for(var ar=hn+1;ar<Et;ar++){var Kn;Ke(_t,(Kn=Z[ar]).p,Rt.p),0===(Mn=bt(_t))&&(hr(_t,Math.random()-.5,Math.random()-.5),Mn=1);var xr=(Rt.rep+Kn.rep)/Mn/Mn;!Rt.fixed&&xS(Rt.pp,Rt.pp,_t,xr),!Kn.fixed&&xS(Kn.pp,Kn.pp,_t,-xr)}}var nr=[];for(hn=0;hn<Et;hn++){var Cr;(Cr=Z[hn]).fixed||(Ke(nr,Cr.p,Cr.pp),xS(Cr.p,Cr.p,nr,nt),po(Cr.pp,Cr.p))}var zr=(nt*=.992)<.01;Xe&&Xe(Z,Q,zr),yt&&yt(zr)}}}(k,D,{rect:O,gravity:l.get("gravity"),friction:l.get("friction")});N.beforeStep(function(F,V){for(var q=0,Z=F.length;q<Z;q++)F[q].fixed&&po(F[q].p,o.getNodeByIndex(q).getLayout())}),N.afterStep(function(F,V,q){for(var Z=0,Q=F.length;Z<Q;Z++)F[Z].fixed||o.getNodeByIndex(Z).setLayout(F[Z].p),r[i.getId(Z)]=F[Z].p;for(Z=0,Q=V.length;Z<Q;Z++){var re=V[Z],he=o.getEdgeByIndex(Z),ge=re.n1.p,ve=re.n2.p,_e=he.getLayout();(_e=_e?_e.slice():[])[0]=_e[0]||[],_e[1]=_e[1]||[],po(_e[0],ge),po(_e[1],ve),+re.curveness&&(_e[2]=[(ge[0]+ve[0])/2-(ge[1]-ve[1])*re.curveness,(ge[1]+ve[1])/2-(ve[0]-ge[0])*re.curveness]),he.setLayout(_e)}}),t.forceLayout=N,t.preservedPoints=r,N.step()}else t.forceLayout=null})}function GA(n,t){var e=[];return n.eachSeriesByType("graph",function(r){var D,O,o=r.get("coordinateSystem");if(!o||"view"===o){var i=r.getData(),s=[],l=[];Ya(i.mapArray(function(k){var D=i.getItemModel(k);return[+D.get("x"),+D.get("y")]}),s,l),l[0]-s[0]==0&&(l[0]+=1,s[0]-=1),l[1]-s[1]==0&&(l[1]+=1,s[1]-=1);var c=(l[0]-s[0])/(l[1]-s[1]),d=(D=t,O=c,tl(Lt(r.getBoxLayoutParams(),{aspect:O}),{width:D.getWidth(),height:D.getHeight()}));isNaN(c)&&(s=[d.x,d.y],l=[d.x+d.width,d.y+d.height]);var p=l[0]-s[0],m=l[1]-s[1],b=d.width,_=d.height,S=r.coordinateSystem=new vp;S.zoomLimit=r.get("scaleLimit"),S.setBoundingRect(s[0],s[1],p,m),S.setViewRect(d.x,d.y,b,_),S.setCenter(r.get("center"),t),S.setZoom(r.get("zoom")),e.push(S)}}),e}var UA=Pu.prototype,jA=cc.prototype,YA=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function e2(n){return isNaN(+n.cpx1)||isNaN(+n.cpy1)}!function(n){gt(function t(){return null!==n&&n.apply(this,arguments)||this},n)}(YA);var JP=function(n){function t(e){var r=n.call(this,e)||this;return r.type="ec-line",r}return gt(t,n),t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new YA},t.prototype.buildPath=function(e,r){e2(r)?UA.buildPath.call(this,e,r):jA.buildPath.call(this,e,r)},t.prototype.pointAt=function(e){return e2(this.shape)?UA.pointAt.call(this,e):jA.pointAt.call(this,e)},t.prototype.tangentAt=function(e){var r=this.shape,o=e2(r)?[r.x2-r.x1,r.y2-r.y1]:jA.tangentAt.call(this,e);return er(o,o)},t}(Go),t2=["fromSymbol","toSymbol"];function qA(n){return"_"+n+"Type"}function n2(n,t,e){var r=t.getItemVisual(e,n);if(r&&"none"!==r){var o=t.getItemVisual(e,n+"Size"),i=t.getItemVisual(e,n+"Rotate"),s=t.getItemVisual(e,n+"Offset"),l=t.getItemVisual(e,n+"KeepAspect"),c=e1(o),d=t1(s||0,c),p=Dl(r,-c[0]/2+d[0],-c[1]/2+d[1],c[0],c[1],null,l);return p.__specifiedRotation=null==i||isNaN(i)?void 0:+i*Math.PI/180||0,p.name=n,p}}function r2(n,t){n.x1=t[0][0],n.y1=t[0][1],n.x2=t[1][0],n.y2=t[1][1],n.percent=1;var e=t[2];e?(n.cpx1=e[0],n.cpy1=e[1]):(n.cpx1=NaN,n.cpy1=NaN)}var mT=function(n){function t(e,r,o){var i=n.call(this)||this;return i._createLine(e,r,o),i}return gt(t,n),t.prototype._createLine=function(e,r,o){var l,c,i=e.hostModel,s=(l=e.getItemLayout(r),r2((c=new JP({name:"line",subPixelOptimize:!0})).shape,l),c);s.shape.percent=0,as(s,{shape:{percent:1}},i,r),this.add(s),Ce(t2,function(l){var c=n2(l,e,r);this.add(c),this[qA(l)]=e.getItemVisual(r,l)},this),this._updateCommonStl(e,r,o)},t.prototype.updateData=function(e,r,o){var i=e.hostModel,s=this.childOfName("line"),l=e.getItemLayout(r),c={shape:{}};r2(c.shape,l),mo(s,c,i,r),Ce(t2,function(d){var p=e.getItemVisual(r,d),m=qA(d);if(this[m]!==p){this.remove(this.childOfName(d));var b=n2(d,e,r);this.add(b)}this[m]=p},this),this._updateCommonStl(e,r,o)},t.prototype.getLinePath=function(){return this.childAt(0)},t.prototype._updateCommonStl=function(e,r,o){var i=e.hostModel,s=this.childOfName("line"),l=o&&o.emphasisLineStyle,c=o&&o.blurLineStyle,d=o&&o.selectLineStyle,p=o&&o.labelStatesModels,m=o&&o.emphasisDisabled,b=o&&o.focus,_=o&&o.blurScope;if(!o||e.hasItemOption){var S=e.getItemModel(r),k=S.getModel("emphasis");l=k.getModel("lineStyle").getLineStyle(),c=S.getModel(["blur","lineStyle"]).getLineStyle(),d=S.getModel(["select","lineStyle"]).getLineStyle(),m=k.get("disabled"),b=k.get("focus"),_=k.get("blurScope"),p=gs(S)}var D=e.getItemVisual(r,"style"),O=D.stroke;s.useStyle(D),s.style.fill=null,s.style.strokeNoScale=!0,s.ensureState("emphasis").style=l,s.ensureState("blur").style=c,s.ensureState("select").style=d,Ce(t2,function(Z){var Q=this.childOfName(Z);if(Q){Q.setColor(O),Q.style.opacity=D.opacity;for(var re=0;re<Ss.length;re++){var he=Ss[re],ge=s.getState(he);if(ge){var ve=ge.style||{},_e=Q.ensureState(he),Ee=_e.style||(_e.style={});null!=ve.stroke&&(Ee[Q.__isEmptyBrush?"stroke":"fill"]=ve.stroke),null!=ve.opacity&&(Ee.opacity=ve.opacity)}}Q.markRedraw()}},this);var N=i.getRawValue(r);ps(this,p,{labelDataIndex:r,labelFetcher:{getFormattedLabel:function(Z,Q){return i.getFormattedLabel(Z,Q,e.dataType)}},inheritColor:O||"#000",defaultOpacity:D.opacity,defaultText:(null==N?e.getName(r):isFinite(N)?yi(N):N)+""});var F=this.getTextContent();if(F){var V=p.normal;F.__align=F.style.align,F.__verticalAlign=F.style.verticalAlign,F.__position=V.get("position")||"middle";var q=V.get("distance");Ue(q)||(q=[q,q]),F.__labelDistance=q}this.setTextConfig({position:null,local:!0,inside:!1}),vu(this,b,_,m)},t.prototype.highlight=function(){pd(this)},t.prototype.downplay=function(){Ah(this)},t.prototype.updateLayout=function(e,r){this.setLinePoints(e.getItemLayout(r))},t.prototype.setLinePoints=function(e){var r=this.childOfName("line");r2(r.shape,e),r.dirty()},t.prototype.beforeUpdate=function(){var e=this,r=e.childOfName("fromSymbol"),o=e.childOfName("toSymbol"),i=e.getTextContent();if(r||o||i&&!i.ignore){for(var s=1,l=this.parent;l;)l.scaleX&&(s/=l.scaleX),l=l.parent;var c=e.childOfName("line");if(this.__dirty||c.__dirty){var d=c.shape.percent,p=c.pointAt(0),m=c.pointAt(d),b=Ke([],m,p);if(er(b,b),r&&(r.setPosition(p),he(r,0),r.scaleX=r.scaleY=s*d,r.markRedraw()),o&&(o.setPosition(m),he(o,1),o.scaleX=o.scaleY=s*d,o.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var _=void 0,S=void 0,k=i.__labelDistance,D=k[0]*s,O=k[1]*s,N=d/2,F=c.tangentAt(N),V=[F[1],-F[0]],q=c.pointAt(N);V[1]>0&&(V[0]=-V[0],V[1]=-V[1]);var Z=F[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var Q=-Math.atan2(F[1],F[0]);m[0]<p[0]&&(Q=Math.PI+Q),i.rotation=Q}var re=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":re=-O,S="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":re=O,S="top";break;default:re=0,S="middle"}switch(i.__position){case"end":i.x=b[0]*D+m[0],i.y=b[1]*O+m[1],_=b[0]>.8?"left":b[0]<-.8?"right":"center",S=b[1]>.8?"top":b[1]<-.8?"bottom":"middle";break;case"start":i.x=-b[0]*D+p[0],i.y=-b[1]*O+p[1],_=b[0]>.8?"right":b[0]<-.8?"left":"center",S=b[1]>.8?"bottom":b[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=D*Z+p[0],i.y=p[1]+re,_=F[0]<0?"right":"left",i.originX=-D*Z,i.originY=-re;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=q[0],i.y=q[1]+re,_="center",i.originY=-re;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-D*Z+m[0],i.y=m[1]+re,_=F[0]>=0?"right":"left",i.originX=D*Z,i.originY=-re}i.scaleX=i.scaleY=s,i.setStyle({verticalAlign:i.__verticalAlign||S,align:i.__align||_})}}}function he(ge,ve){var _e=ge.__specifiedRotation;if(null==_e){var Ee=c.tangentAt(ve);ge.attr("rotation",(1===ve?-1:1)*Math.PI/2-Math.atan2(Ee[1],Ee[0]))}else ge.attr("rotation",_e)}},t}(xo),o2=function(){function n(t){this.group=new xo,this._LineCtor=t||mT}return n.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var r=this,o=r.group,i=r._lineData;r._lineData=t,i||o.removeAll();var s=XA(t);t.diff(i).add(function(l){e._doAdd(t,l,s)}).update(function(l,c){e._doUpdate(i,t,c,l,s)}).remove(function(l){o.remove(i.getItemGraphicEl(l))}).execute()},n.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl(function(e,r){e.updateLayout(t,r)},this)},n.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=XA(t),this._lineData=null,this.group.removeAll()},n.prototype.incrementalUpdate=function(t,e){function r(s){var l;s.isGroup||(l=s).animators&&l.animators.length>0||(s.incremental=!0,s.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var o=t.start;o<t.end;o++)if(i2(e.getItemLayout(o))){var i=new this._LineCtor(e,o,this._seriesScope);i.traverse(r),this.group.add(i),e.setItemGraphicEl(o,i),this._progressiveEls.push(i)}},n.prototype.remove=function(){this.group.removeAll()},n.prototype.eachRendered=function(t){Tl(this._progressiveEls||this.group,t)},n.prototype._doAdd=function(t,e,r){if(i2(t.getItemLayout(e))){var o=new this._LineCtor(t,e,r);t.setItemGraphicEl(e,o),this.group.add(o)}},n.prototype._doUpdate=function(t,e,r,o,i){var s=t.getItemGraphicEl(r);i2(e.getItemLayout(o))?(s?s.updateData(e,o,i):s=new this._LineCtor(e,o,i),e.setItemGraphicEl(o,s),this.group.add(s)):this.group.remove(s)},n}();function XA(n){var t=n.hostModel,e=t.getModel("emphasis");return{lineStyle:t.getModel("lineStyle").getLineStyle(),emphasisLineStyle:e.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:t.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:t.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:e.get("disabled"),blurScope:e.get("blurScope"),focus:e.get("focus"),labelStatesModels:gs(t)}}function ZA(n){return isNaN(n[0])||isNaN(n[1])}function i2(n){return n&&!ZA(n[0])&&!ZA(n[1])}var a2=[],KA=[],H1=[],qy=Sa,$A=Ln,JA=Math.abs;function QO(n,t,e){for(var r,o=n[0],i=n[1],s=n[2],l=1/0,c=e*e,d=.1,p=.1;p<=.9;p+=.1)a2[0]=qy(o[0],i[0],s[0],p),a2[1]=qy(o[1],i[1],s[1],p),(_=JA($A(a2,t)-c))<l&&(l=_,r=p);for(var m=0;m<32;m++){var b=r+d;KA[0]=qy(o[0],i[0],s[0],r),KA[1]=qy(o[1],i[1],s[1],r),H1[0]=qy(o[0],i[0],s[0],b),H1[1]=qy(o[1],i[1],s[1],b);var _=$A(KA,t)-c;if(JA(_)<.01)break;var S=$A(H1,t)-c;d/=2,_<0?S>=0?r+=d:r-=d:S>=0?r-=d:r+=d}return r}function QA(n,t){var e=[],r=rf,o=[[],[],[]],i=[[],[]],s=[];t/=2,n.eachEdge(function(l,c){var d=l.getLayout(),p=l.getVisual("fromSymbol"),m=l.getVisual("toSymbol");d.__original||(d.__original=[Vu(d[0]),Vu(d[1])],d[2]&&d.__original.push(Vu(d[2])));var b=d.__original;if(null!=d[2]){if(po(o[0],b[0]),po(o[1],b[2]),po(o[2],b[1]),p&&"none"!==p){var _=mM(l.node1),S=QO(o,b[0],_*t);r(o[0][0],o[1][0],o[2][0],S,e),o[0][0]=e[3],o[1][0]=e[4],r(o[0][1],o[1][1],o[2][1],S,e),o[0][1]=e[3],o[1][1]=e[4]}m&&"none"!==m&&(_=mM(l.node2),S=QO(o,b[1],_*t),r(o[0][0],o[1][0],o[2][0],S,e),o[1][0]=e[1],o[2][0]=e[2],r(o[0][1],o[1][1],o[2][1],S,e),o[1][1]=e[1],o[2][1]=e[2]),po(d[0],o[0]),po(d[1],o[2]),po(d[2],o[1])}else po(i[0],b[0]),po(i[1],b[1]),Ke(s,i[1],i[0]),er(s,s),p&&"none"!==p&&(_=mM(l.node1),Dn(i[0],i[0],s,_*t)),m&&"none"!==m&&(_=mM(l.node2),Dn(i[1],i[1],s,-_*t)),po(d[0],i[0]),po(d[1],i[1])})}function s2(n){return"view"===n.type}var eE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e,r){var o=new lb,i=new o2,s=this.group;this._controller=new v_(r.getZr()),this._controllerHost={target:s},s.add(o.group),s.add(i.group),this._symbolDraw=o,this._lineDraw=i,this._firstRender=!0},t.prototype.render=function(e,r,o){var i=this,s=e.coordinateSystem;this._model=e;var l=this._symbolDraw,c=this._lineDraw,d=this.group;if(s2(s)){var p={x:s.x,y:s.y,scaleX:s.scaleX,scaleY:s.scaleY};this._firstRender?d.attr(p):mo(d,p,e)}QA(e.getGraph(),gM(e));var m=e.getData();l.updateData(m);var b=e.getEdgeData();c.updateData(b),this._updateNodeAndLinkScale(),this._updateController(e,r,o),clearTimeout(this._layoutTimeout);var _=e.forceLayout,S=e.get(["force","layoutAnimation"]);_&&this._startForceLayoutIteration(_,S);var k=e.get("layout");m.graph.eachNode(function(F){var V=F.dataIndex,q=F.getGraphicEl(),Z=F.getModel();if(q){q.off("drag").off("dragend");var Q=Z.get("draggable");Q&&q.on("drag",function(re){switch(k){case"force":_.warmUp(),!i._layouting&&i._startForceLayoutIteration(_,S),_.setFixed(V),m.setItemLayout(V,[q.x,q.y]);break;case"circular":m.setItemLayout(V,[q.x,q.y]),F.setLayout({fixed:!0},!0),yM(e,"symbolSize",F,[re.offsetX,re.offsetY]),i.updateLayout(e);break;default:m.setItemLayout(V,[q.x,q.y]),QD(e.getGraph(),e),i.updateLayout(e)}}).on("dragend",function(){_&&_.setUnfixed(V)}),q.setDraggable(Q,!!Z.get("cursor")),"adjacency"===Z.get(["emphasis","focus"])&&(So(q).focus=F.getAdjacentDataIndices())}}),m.graph.eachEdge(function(F){var V=F.getGraphicEl(),q=F.getModel().get(["emphasis","focus"]);V&&"adjacency"===q&&(So(V).focus={edge:[F.dataIndex],node:[F.node1.dataIndex,F.node2.dataIndex]})});var D="circular"===e.get("layout")&&e.get(["circular","rotateLabel"]),O=m.getLayout("cx"),N=m.getLayout("cy");m.graph.eachNode(function(F){gT(F,D,O,N)}),this._firstRender=!1},t.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},t.prototype._startForceLayoutIteration=function(e,r){var o=this;!function i(){e.step(function(s){o.updateLayout(o._model),(o._layouting=!s)&&(r?o._layoutTimeout=setTimeout(i,16):i())})}()},t.prototype._updateController=function(e,r,o){var i=this,s=this._controller,l=this._controllerHost,c=this.group;s.setPointerChecker(function(d,p,m){var b=c.getBoundingRect();return b.applyTransform(c.transform),b.contain(p,m)&&!eT(d,o,e)}),s2(e.coordinateSystem)?(s.enable(e.get("roam")),l.zoomLimit=e.get("scaleLimit"),l.zoom=e.coordinateSystem.getZoom(),s.off("pan").off("zoom").on("pan",function(d){sS(l,d.dx,d.dy),o.dispatchAction({seriesId:e.id,type:"graphRoam",dx:d.dx,dy:d.dy})}).on("zoom",function(d){OD(l,d.scale,d.originX,d.originY),o.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:d.scale,originX:d.originX,originY:d.originY}),i._updateNodeAndLinkScale(),QA(e.getGraph(),gM(e)),i._lineDraw.updateLayout(),o.updateLabelLayout()})):s.disable()},t.prototype._updateNodeAndLinkScale=function(){var e=this._model,r=e.getData(),o=gM(e);r.eachItemGraphicEl(function(i,s){i&&i.setSymbolScale(o)})},t.prototype.updateLayout=function(e){QA(e.getGraph(),gM(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},t.prototype.remove=function(e,r){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},t.type="graph",t}($a);function b_(n){return"_EC_"+n}var u2=function(){function n(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return n.prototype.isDirected=function(){return this._directed},n.prototype.addNode=function(t,e){var r=this._nodesMap;if(!r[b_(t=null==t?""+e:""+t)]){var o=new vg(t,e);return o.hostGraph=this,this.nodes.push(o),r[b_(t)]=o,o}},n.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},n.prototype.getNodeById=function(t){return this._nodesMap[b_(t)]},n.prototype.addEdge=function(t,e,r){var o=this._nodesMap,i=this._edgesMap;if(gr(t)&&(t=this.nodes[t]),gr(e)&&(e=this.nodes[e]),t instanceof vg||(t=o[b_(t)]),e instanceof vg||(e=o[b_(e)]),t&&e){var s=t.id+"-"+e.id,l=new x_(t,e,r);return l.hostGraph=this,this._directed&&(t.outEdges.push(l),e.inEdges.push(l)),t.edges.push(l),t!==e&&e.edges.push(l),this.edges.push(l),i[s]=l,l}},n.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},n.prototype.getEdge=function(t,e){t instanceof vg&&(t=t.id),e instanceof vg&&(e=e.id);var r=this._edgesMap;return this._directed?r[t+"-"+e]:r[t+"-"+e]||r[e+"-"+t]},n.prototype.eachNode=function(t,e){for(var r=this.nodes,o=r.length,i=0;i<o;i++)r[i].dataIndex>=0&&t.call(e,r[i],i)},n.prototype.eachEdge=function(t,e){for(var r=this.edges,o=r.length,i=0;i<o;i++)r[i].dataIndex>=0&&r[i].node1.dataIndex>=0&&r[i].node2.dataIndex>=0&&t.call(e,r[i],i)},n.prototype.breadthFirstTraverse=function(t,e,r,o){if(e instanceof vg||(e=this._nodesMap[b_(e)]),e){for(var i="out"===r?"outEdges":"in"===r?"inEdges":"edges",s=0;s<this.nodes.length;s++)this.nodes[s].__visited=!1;if(!t.call(o,e,null))for(var l=[e];l.length;){var c=l.shift(),d=c[i];for(s=0;s<d.length;s++){var p=d[s],m=p.node1===c?p.node2:p.node1;if(!m.__visited){if(t.call(o,m,c))return;l.push(m),m.__visited=!0}}}}},n.prototype.update=function(){for(var t=this.data,e=this.edgeData,r=this.nodes,o=this.edges,i=0,s=r.length;i<s;i++)r[i].dataIndex=-1;for(i=0,s=t.count();i<s;i++)r[t.getRawIndex(i)].dataIndex=i;for(e.filterSelf(function(l){var c=o[e.getRawIndex(l)];return c.node1.dataIndex>=0&&c.node2.dataIndex>=0}),i=0,s=o.length;i<s;i++)o[i].dataIndex=-1;for(i=0,s=e.count();i<s;i++)o[e.getRawIndex(i)].dataIndex=i},n.prototype.clone=function(){for(var t=new n(this._directed),e=this.nodes,r=this.edges,o=0;o<e.length;o++)t.addNode(e[o].id,e[o].dataIndex);for(o=0;o<r.length;o++){var i=r[o];t.addEdge(i.node1.id,i.node2.id,i.dataIndex)}return t},n}(),vg=function(){function n(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==e?-1:e}return n.prototype.degree=function(){return this.edges.length},n.prototype.inDegree=function(){return this.inEdges.length},n.prototype.outDegree=function(){return this.outEdges.length},n.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},n.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var r=this.edges[e];r.dataIndex<0||(t.edge.push(r.dataIndex),t.node.push(r.node1.dataIndex,r.node2.dataIndex))}return t},n}(),x_=function(){function n(t,e,r){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=null==r?-1:r}return n.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},n.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},n}();function tE(n,t){return{getValue:function(e){var r=this[n][t];return r.getStore().get(r.getDimensionIndex(e||"value"),this.dataIndex)},setVisual:function(e,r){this.dataIndex>=0&&this[n][t].setItemVisual(this.dataIndex,e,r)},getVisual:function(e){return this[n][t].getItemVisual(this.dataIndex,e)},setLayout:function(e,r){this.dataIndex>=0&&this[n][t].setItemLayout(this.dataIndex,e,r)},getLayout:function(){return this[n][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[n][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[n][t].getRawIndex(this.dataIndex)}}}function nE(n,t,e,r,o){for(var i=new u2(r),s=0;s<n.length;s++)i.addNode(Hn(n[s].id,n[s].name,s),s);var l=[],c=[],d=0;for(s=0;s<t.length;s++){var p=t[s],m=p.source,b=p.target;i.addEdge(m,b,d)&&(c.push(p),l.push(Hn(is(p.id,null),m+" > "+b)),d++)}var _,S=e.get("coordinateSystem");if("cartesian2d"===S||"polar"===S)_=lm(n,e);else{var k=Ms.get(S),D=k&&k.dimensions||[];Ir(D,"value")<0&&D.concat(["value"]);var O=_v(n,{coordDimensions:D,encodeDefine:e.getEncode()}).dimensions;(_=new Jc(O,e)).initData(n)}var N=new Jc(["value"],e);return N.initData(c,l),o&&o(_,N),OO({mainData:_,struct:i,structAttr:"graph",datas:{node:_,edge:N},datasAttr:{node:"data",edge:"edgeData"}}),i.update(),i}na(vg,tE("hostGraph","data")),na(x_,tE("hostGraph","edgeData"));var QP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return gt(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments);var r=this;function o(){return r._categoriesData}this.legendVisualProvider=new f(o,o),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},t.prototype.mergeDefaultAndTheme=function(e){n.prototype.mergeDefaultAndTheme.apply(this,arguments),hs(e,"edgeLabel",["show"])},t.prototype.getInitialData=function(e,r){var o,i=e.edges||e.links||[],s=e.data||e.nodes||[],l=this;if(s&&i){y_(o=this)&&(o.__curvenessList=[],o.__edgeMap={},FA(o));var c=nE(s,i,this,!0,function(d,p){d.wrapMethod("getItemModel",function(S){var k=l._categoriesModels[S.getShallow("category")];return k&&(k.parentModel=S.parentModel,S.parentModel=k),S});var m=aa.prototype.getModel;function b(S,k){var D=m.call(this,S,k);return D.resolveParentPath=_,D}function _(S){if(S&&("label"===S[0]||"label"===S[1])){var k=S.slice();return"label"===S[0]?k[0]="edgeLabel":"label"===S[1]&&(k[1]="edgeLabel"),k}return S}p.wrapMethod("getItemModel",function(S){return S.resolveParentPath=_,S.getModel=b,S})});return Ce(c.edges,function(d){!function(p,m,b,_){if(y_(b)){var S=pT(p,m,b),k=b.__edgeMap,D=k[VA(S)];k[S]&&!D?k[S].isForward=!0:D&&k[S]&&(D.isForward=!0,k[S].isForward=!1),k[S]=k[S]||[],k[S].push(_)}}(d.node1,d.node2,this,d.dataIndex)},this),c.data}},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.getCategoriesData=function(){return this._categoriesData},t.prototype.formatTooltip=function(e,r,o){if("edge"===o){var i=this.getData(),s=this.getDataParams(e,o),l=i.graph.getEdgeByIndex(e),c=i.getName(l.node1.dataIndex),d=i.getName(l.node2.dataIndex),p=[];return null!=c&&p.push(c),null!=d&&p.push(d),Dc("nameValue",{name:p.join(" > "),value:s.value,noValue:null==s.value})}return rw({series:this,dataIndex:e,multipleSeries:r})},t.prototype._updateCategoriesData=function(){var e=mt(this.option.categories||[],function(o){return null!=o.value?o:Lt({value:0},o)}),r=new Jc(["value"],this);r.initData(e),this._categoriesData=r,this._categoriesModels=r.mapArray(function(o){return r.getItemModel(o)})},t.prototype.setZoom=function(e){this.option.zoom=e},t.prototype.setCenter=function(e){this.option.center=e},t.prototype.isAnimationEnabled=function(){return n.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},t.type="series.graph",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Ka),eI={type:"graphRoam",event:"graphRoam",update:"none"},eR=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},tI=function(n){function t(e){var r=n.call(this,e)||this;return r.type="pointer",r}return gt(t,n),t.prototype.getDefaultShape=function(){return new eR},t.prototype.buildPath=function(e,r){var o=Math.cos,i=Math.sin,s=r.r,l=r.width,c=r.angle,d=r.x-o(c)*l*(l>=s/3?1:2),p=r.y-i(c)*l*(l>=s/3?1:2);c=r.angle-Math.PI/2,e.moveTo(d,p),e.lineTo(r.x+o(c)*l,r.y+i(c)*l),e.lineTo(r.x+o(r.angle)*s,r.y+i(r.angle)*s),e.lineTo(r.x-o(c)*l,r.y-i(c)*l),e.lineTo(d,p)},t}(Go);function l2(n,t){var e=null==n?"":n+"";return t&&(ir(t)?e=t.replace("{value}",e):yr(t)&&(e=t(n))),e}var tR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){this.group.removeAll();var l,c,d,p,m,b,i=e.get(["axisLine","lineStyle","color"]),s=(c=o,d=(l=e).get("center"),p=c.getWidth(),m=c.getHeight(),b=Math.min(p,m),{cx:qn(d[0],c.getWidth()),cy:qn(d[1],c.getHeight()),r:qn(l.get("radius"),b/2)});this._renderMain(e,r,o,i,s),this._data=e.getData()},t.prototype.dispose=function(){},t.prototype._renderMain=function(e,r,o,i,s){var l=this.group,c=e.get("clockwise"),d=-e.get("startAngle")/180*Math.PI,p=-e.get("endAngle")/180*Math.PI,m=e.getModel("axisLine"),b=m.get("roundCap")?gl:Cc,_=m.get("show"),S=m.getModel("lineStyle"),k=S.get("width"),D=[d,p];Xa(D,!c);for(var O=(p=D[1])-(d=D[0]),N=d,F=[],V=0;_&&V<i.length;V++){var q=new b({shape:{startAngle:N,endAngle:p=d+O*Math.min(Math.max(i[V][0],0),1),cx:s.cx,cy:s.cy,clockwise:c,r0:s.r-k,r:s.r},silent:!0});q.setStyle({fill:i[V][1]}),q.setStyle(S.getLineStyle(["color","width"])),F.push(q),N=p}F.reverse(),Ce(F,function(Q){return l.add(Q)});var Z=function(Q){if(Q<=0)return i[0][1];var re;for(re=0;re<i.length;re++)if(i[re][0]>=Q&&(0===re?0:i[re-1][0])<Q)return i[re][1];return i[re-1][1]};this._renderTicks(e,r,o,Z,s,d,p,c,k),this._renderTitleAndDetail(e,r,o,Z,s),this._renderAnchor(e,s),this._renderPointer(e,r,o,Z,s,d,p,c,k)},t.prototype._renderTicks=function(e,r,o,i,s,l,c,d,p){for(var m,b,_=this.group,S=s.cx,k=s.cy,D=s.r,O=+e.get("min"),N=+e.get("max"),F=e.getModel("splitLine"),V=e.getModel("axisTick"),q=e.getModel("axisLabel"),Z=e.get("splitNumber"),Q=V.get("splitNumber"),re=qn(F.get("length"),D),he=qn(V.get("length"),D),ge=l,ve=(c-l)/Z,_e=ve/Q,Ee=F.getModel("lineStyle").getLineStyle(),ze=V.getModel("lineStyle").getLineStyle(),Ge=F.get("distance"),Xe=0;Xe<=Z;Xe++){if(m=Math.cos(ge),b=Math.sin(ge),F.get("show")){var $e=new Pu({shape:{x1:m*(D-(nt=Ge?Ge+p:p))+S,y1:b*(D-nt)+k,x2:m*(D-re-nt)+S,y2:b*(D-re-nt)+k},style:Ee,silent:!0});"auto"===Ee.stroke&&$e.setStyle({stroke:i(Xe/Z)}),_.add($e)}if(q.get("show")){var nt=q.get("distance")+Ge,yt=l2(yi(Xe/Z*(N-O)+O),q.get("formatter")),_t=i(Xe/Z),Et=m*(D-re-nt)+S,hn=b*(D-re-nt)+k,Zn=q.get("rotate"),Rt=0;"radial"===Zn?(Rt=-ge+2*Math.PI)>Math.PI/2&&(Rt+=Math.PI):"tangential"===Zn?Rt=-ge-Math.PI/2:gr(Zn)&&(Rt=Zn*Math.PI/180),_.add(new Oi(0===Rt?{style:Vi(q,{text:yt,x:Et,y:hn,verticalAlign:b<-.8?"top":b>.8?"bottom":"middle",align:m<-.4?"left":m>.4?"right":"center"},{inheritColor:_t}),silent:!0}:{style:Vi(q,{text:yt,x:Et,y:hn,verticalAlign:"middle",align:"center"},{inheritColor:_t}),silent:!0,originX:Et,originY:hn,rotation:Rt}))}if(V.get("show")&&Xe!==Z){nt=(nt=V.get("distance"))?nt+p:p;for(var Mn=0;Mn<=Q;Mn++){m=Math.cos(ge),b=Math.sin(ge);var lr=new Pu({shape:{x1:m*(D-nt)+S,y1:b*(D-nt)+k,x2:m*(D-he-nt)+S,y2:b*(D-he-nt)+k},silent:!0,style:ze});"auto"===ze.stroke&&lr.setStyle({stroke:i((Xe+Mn/Q)/Z)}),_.add(lr),ge+=_e}ge-=_e}else ge+=ve}},t.prototype._renderPointer=function(e,r,o,i,s,l,c,d,p){var m=this.group,b=this._data,_=this._progressEls,S=[],k=e.get(["pointer","show"]),D=e.getModel("progress"),O=D.get("show"),N=e.getData(),F=N.mapDimension("value"),V=+e.get("min"),q=+e.get("max"),Z=[V,q],Q=[l,c];function re(ge,ve){var _e,Ee=N.getItemModel(ge).getModel("pointer"),ze=qn(Ee.get("width"),s.r),Ge=qn(Ee.get("length"),s.r),Xe=e.get(["pointer","icon"]),$e=Ee.get("offsetCenter"),nt=qn($e[0],s.r),yt=qn($e[1],s.r),_t=Ee.get("keepAspect");return(_e=Xe?Dl(Xe,nt-ze/2,yt-Ge,ze,Ge,null,_t):new tI({shape:{angle:-Math.PI/2,width:ze,r:Ge,x:nt,y:yt}})).rotation=-(ve+Math.PI/2),_e.x=s.cx,_e.y=s.cy,_e}function he(ge,ve){var _e=D.get("roundCap")?gl:Cc,Ee=D.get("overlap"),ze=Ee?D.get("width"):p/N.count(),$e=new _e({shape:{startAngle:l,endAngle:ve,cx:s.cx,cy:s.cy,clockwise:d,r0:Ee?s.r-ze:s.r-(ge+1)*ze,r:Ee?s.r:s.r-ge*ze}});return Ee&&($e.z2=q-N.get(F,ge)%q),$e}(O||k)&&(N.diff(b).add(function(ge){var ve=N.get(F,ge);if(k){var _e=re(ge,l);as(_e,{rotation:-((isNaN(+ve)?Q[0]:fa(ve,Z,Q,!0))+Math.PI/2)},e),m.add(_e),N.setItemGraphicEl(ge,_e)}if(O){var Ee=he(ge,l),ze=D.get("clip");as(Ee,{shape:{endAngle:fa(ve,Z,Q,ze)}},e),m.add(Ee),Lm(e.seriesIndex,N.dataType,ge,Ee),S[ge]=Ee}}).update(function(ge,ve){var _e=N.get(F,ge);if(k){var Ee=b.getItemGraphicEl(ve),ze=Ee?Ee.rotation:l,Ge=re(ge,ze);Ge.rotation=ze,mo(Ge,{rotation:-((isNaN(+_e)?Q[0]:fa(_e,Z,Q,!0))+Math.PI/2)},e),m.add(Ge),N.setItemGraphicEl(ge,Ge)}if(O){var Xe=_[ve],$e=he(ge,Xe?Xe.shape.endAngle:l),nt=D.get("clip");mo($e,{shape:{endAngle:fa(_e,Z,Q,nt)}},e),m.add($e),Lm(e.seriesIndex,N.dataType,ge,$e),S[ge]=$e}}).execute(),N.each(function(ge){var ve=N.getItemModel(ge),_e=ve.getModel("emphasis"),Ee=_e.get("focus"),ze=_e.get("blurScope"),Ge=_e.get("disabled");if(k){var Xe=N.getItemGraphicEl(ge),$e=N.getItemVisual(ge,"style"),nt=$e.fill;if(Xe instanceof fl){var yt=Xe.style;Xe.useStyle(Lt({image:yt.image,x:yt.x,y:yt.y,width:yt.width,height:yt.height},$e))}else Xe.useStyle($e),"pointer"!==Xe.type&&Xe.setColor(nt);Xe.setStyle(ve.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===Xe.style.fill&&Xe.setStyle("fill",i(fa(N.get(F,ge),Z,[0,1],!0))),Xe.z2EmphasisLift=0,kl(Xe,ve),vu(Xe,Ee,ze,Ge)}if(O){var _t=S[ge];_t.useStyle(N.getItemVisual(ge,"style")),_t.setStyle(ve.getModel(["progress","itemStyle"]).getItemStyle()),_t.z2EmphasisLift=0,kl(_t,ve),vu(_t,Ee,ze,Ge)}}),this._progressEls=S)},t.prototype._renderAnchor=function(e,r){var o=e.getModel("anchor");if(o.get("show")){var i=o.get("size"),s=o.get("icon"),l=o.get("offsetCenter"),c=o.get("keepAspect"),d=Dl(s,r.cx-i/2+qn(l[0],r.r),r.cy-i/2+qn(l[1],r.r),i,i,null,c);d.z2=o.get("showAbove")?1:0,d.setStyle(o.getModel("itemStyle").getItemStyle()),this.group.add(d)}},t.prototype._renderTitleAndDetail=function(e,r,o,i,s){var l=this,c=e.getData(),d=c.mapDimension("value"),p=+e.get("min"),m=+e.get("max"),b=new xo,_=[],S=[],k=e.isAnimationEnabled(),D=e.get(["pointer","showAbove"]);c.diff(this._data).add(function(O){_[O]=new Oi({silent:!0}),S[O]=new Oi({silent:!0})}).update(function(O,N){_[O]=l._titleEls[N],S[O]=l._detailEls[N]}).execute(),c.each(function(O){var N=c.getItemModel(O),F=c.get(d,O),V=new xo,q=i(fa(F,[p,m],[0,1],!0)),Z=N.getModel("title");if(Z.get("show")){var Q=Z.get("offsetCenter"),re=s.cx+qn(Q[0],s.r),he=s.cy+qn(Q[1],s.r);($e=_[O]).attr({z2:D?0:2,style:Vi(Z,{x:re,y:he,text:c.getName(O),align:"center",verticalAlign:"middle"},{inheritColor:q})}),V.add($e)}var ge=N.getModel("detail");if(ge.get("show")){var ve=ge.get("offsetCenter"),_e=s.cx+qn(ve[0],s.r),Ee=s.cy+qn(ve[1],s.r),ze=qn(ge.get("width"),s.r),Ge=qn(ge.get("height"),s.r),Xe=e.get(["progress","show"])?c.getItemVisual(O,"style").fill:q,$e=S[O],nt=ge.get("formatter");$e.attr({z2:D?0:2,style:Vi(ge,{x:_e,y:Ee,text:l2(F,nt),width:isNaN(ze)?null:ze,height:isNaN(Ge)?null:Ge,align:"center",verticalAlign:"middle"},{inheritColor:Xe})}),jl($e,{normal:ge},F,function(yt){return l2(yt,nt)}),k&&b0($e,O,c,e,{getFormattedLabel:function(yt,_t,Et,hn,Zn,Rt){return l2(Rt?Rt.interpolatedValue:F,nt)}}),V.add($e)}b.add(V)}),this.group.add(b),this._titleEls=_,this._detailEls=S},t.type="gauge",t}($a),rE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="itemStyle",e}return gt(t,n),t.prototype.getInitialData=function(e,r){return a(this,["value"])},t.type="series.gauge",t.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},t}(Ka),nR=["itemStyle","opacity"],rR=function(n){function t(e,r){var o=n.call(this)||this,i=o,s=new Qu,l=new Oi;return i.setTextContent(l),o.setTextGuideLine(s),o.updateData(e,r,!0),o}return gt(t,n),t.prototype.updateData=function(e,r,o){var i=this,s=e.hostModel,l=e.getItemModel(r),c=e.getItemLayout(r),d=l.getModel("emphasis"),p=l.get(nR);p=null==p?1:p,o||md(i),i.useStyle(e.getItemVisual(r,"style")),i.style.lineJoin="round",o?(i.setShape({points:c.points}),i.style.opacity=0,as(i,{style:{opacity:p}},s,r)):mo(i,{style:{opacity:p},shape:{points:c.points}},s,r),kl(i,l),this._updateLabel(e,r),vu(this,d.get("focus"),d.get("blurScope"),d.get("disabled"))},t.prototype._updateLabel=function(e,r){var o=this,i=this.getTextGuideLine(),s=o.getTextContent(),l=e.hostModel,c=e.getItemModel(r),d=e.getItemLayout(r).label,p=e.getItemVisual(r,"style"),m=p.fill;ps(s,gs(c),{labelFetcher:e.hostModel,labelDataIndex:r,defaultOpacity:p.opacity,defaultText:e.getName(r)},{normal:{align:d.textAlign,verticalAlign:d.verticalAlign}}),o.setTextConfig({local:!0,inside:!!d.inside,insideStroke:m,outsideFill:m});var b=d.linePoints;i.setShape({points:b}),o.textGuideLineConfig={anchor:b?new lo(b[0][0],b[0][1]):null},mo(s,{style:{x:d.x,y:d.y}},l,r),s.attr({rotation:d.rotation,originX:d.x,originY:d.y,z2:10}),_1(o,qw(c),{stroke:m})},t}(eu),_S=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.ignoreLabelLineUpdate=!0,e}return gt(t,n),t.prototype.render=function(e,r,o){var i=e.getData(),s=this._data,l=this.group;i.diff(s).add(function(c){var d=new rR(i,c);i.setItemGraphicEl(c,d),l.add(d)}).update(function(c,d){var p=s.getItemGraphicEl(d);p.updateData(i,c),l.add(p),i.setItemGraphicEl(c,p)}).remove(function(c){g0(s.getItemGraphicEl(c),e,c)}).execute(),this._data=i},t.prototype.remove=function(){this.group.removeAll(),this._data=null},t.prototype.dispose=function(){},t.type="funnel",t}($a),oE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new f(De(this.getData,this),De(this.getRawData,this)),this._defaultLabelLine(e)},t.prototype.getInitialData=function(e,r){return a(this,{coordDimensions:["value"],encodeDefaulter:dr(wt,this)})},t.prototype._defaultLabelLine=function(e){hs(e,"labelLine",["show"]);var r=e.labelLine,o=e.emphasis.labelLine;r.show=r.show&&e.label.show,o.show=o.show&&e.emphasis.label.show},t.prototype.getDataParams=function(e){var r=this.getData(),o=n.prototype.getDataParams.call(this,e),i=r.mapDimension("value"),s=r.getSum(i);return o.percent=s?+(r.get(i,e)/s*100).toFixed(2):0,o.$vars.push("percent"),o},t.type="series.funnel",t.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},t}(Ka);function c2(n,t){n.eachSeriesByType("funnel",function(e){var ze,r=e.getData(),o=r.mapDimension("value"),i=e.get("sort"),s=(ze=t,tl(e.getBoxLayoutParams(),{width:ze.getWidth(),height:ze.getHeight()})),l=e.get("orient"),c=s.width,d=s.height,p=function(Ee,ze){for(var Ge=Ee.mapDimension("value"),Xe=Ee.mapArray(Ge,function(Et){return Et}),$e=[],nt="ascending"===ze,yt=0,_t=Ee.count();yt<_t;yt++)$e[yt]=yt;return yr(ze)?$e.sort(ze):"none"!==ze&&$e.sort(function(Et,hn){return nt?Xe[Et]-Xe[hn]:Xe[hn]-Xe[Et]}),$e}(r,i),m=s.x,b=s.y,_="horizontal"===l?[qn(e.get("minSize"),d),qn(e.get("maxSize"),d)]:[qn(e.get("minSize"),c),qn(e.get("maxSize"),c)],S=r.getDataExtent(o),k=e.get("min"),D=e.get("max");null==k&&(k=Math.min(S[0],0)),null==D&&(D=S[1]);var O=e.get("funnelAlign"),N=e.get("gap"),F=(("horizontal"===l?c:d)-N*(r.count()-1))/r.count(),V=function(Ee,ze){if("horizontal"===l){var Ge=fa(r.get(o,Ee)||0,[k,D],_,!0),Xe=void 0;switch(O){case"top":Xe=b;break;case"center":Xe=b+(d-Ge)/2;break;case"bottom":Xe=b+(d-Ge)}return[[ze,Xe],[ze,Xe+Ge]]}var $e,nt=fa(r.get(o,Ee)||0,[k,D],_,!0);switch(O){case"left":$e=m;break;case"center":$e=m+(c-nt)/2;break;case"right":$e=m+c-nt}return[[$e,ze],[$e+nt,ze]]};"ascending"===i&&(F=-F,N=-N,"horizontal"===l?m+=c:b+=d,p=p.reverse());for(var q=0;q<p.length;q++){var Z=p[q],Q=p[q+1],re=r.getItemModel(Z);if("horizontal"===l){var he=re.get(["itemStyle","width"]);null==he?he=F:(he=qn(he,c),"ascending"===i&&(he=-he));var ge=V(Z,m),ve=V(Q,m+he);m+=he+N,r.setItemLayout(Z,{points:ge.concat(ve.slice().reverse())})}else{var _e=re.get(["itemStyle","height"]);null==_e?_e=F:(_e=qn(_e,d),"ascending"===i&&(_e=-_e)),ge=V(Z,b),ve=V(Q,b+_e),b+=_e+N,r.setItemLayout(Z,{points:ge.concat(ve.slice().reverse())})}}!function(Ee){var ze=Ee.hostModel.get("orient");Ee.each(function(Ge){var Xe,$e,nt,yt,_t=Ee.getItemModel(Ge),Et=_t.getModel("label").get("position"),hn=_t.getModel("labelLine"),Zn=Ee.getItemLayout(Ge),Rt=Zn.points,Mn="inner"===Et||"inside"===Et||"center"===Et||"insideLeft"===Et||"insideRight"===Et;if(Mn)"insideLeft"===Et?($e=(Rt[0][0]+Rt[3][0])/2+5,nt=(Rt[0][1]+Rt[3][1])/2,Xe="left"):"insideRight"===Et?($e=(Rt[1][0]+Rt[2][0])/2-5,nt=(Rt[1][1]+Rt[2][1])/2,Xe="right"):($e=(Rt[0][0]+Rt[1][0]+Rt[2][0]+Rt[3][0])/4,nt=(Rt[0][1]+Rt[1][1]+Rt[2][1]+Rt[3][1])/4,Xe="center"),yt=[[$e,nt],[$e,nt]];else{var lr=void 0,ar=void 0,Kn=void 0,xr=void 0,nr=hn.get("length");"left"===Et?(ar=(Rt[3][1]+Rt[0][1])/2,$e=(Kn=(lr=(Rt[3][0]+Rt[0][0])/2)-nr)-5,Xe="right"):"right"===Et?(ar=(Rt[1][1]+Rt[2][1])/2,$e=(Kn=(lr=(Rt[1][0]+Rt[2][0])/2)+nr)+5,Xe="left"):"top"===Et?(lr=(Rt[3][0]+Rt[0][0])/2,nt=(xr=(ar=(Rt[3][1]+Rt[0][1])/2)-nr)-5,Xe="center"):"bottom"===Et?(lr=(Rt[1][0]+Rt[2][0])/2,nt=(xr=(ar=(Rt[1][1]+Rt[2][1])/2)+nr)+5,Xe="center"):"rightTop"===Et?(lr="horizontal"===ze?Rt[3][0]:Rt[1][0],ar="horizontal"===ze?Rt[3][1]:Rt[1][1],"horizontal"===ze?(nt=(xr=ar-nr)-5,Xe="center"):($e=(Kn=lr+nr)+5,Xe="top")):"rightBottom"===Et?(lr=Rt[2][0],ar=Rt[2][1],"horizontal"===ze?(nt=(xr=ar+nr)+5,Xe="center"):($e=(Kn=lr+nr)+5,Xe="bottom")):"leftTop"===Et?(lr=Rt[0][0],ar="horizontal"===ze?Rt[0][1]:Rt[1][1],"horizontal"===ze?(nt=(xr=ar-nr)-5,Xe="center"):($e=(Kn=lr-nr)-5,Xe="right")):"leftBottom"===Et?(lr="horizontal"===ze?Rt[1][0]:Rt[3][0],ar="horizontal"===ze?Rt[1][1]:Rt[2][1],"horizontal"===ze?(nt=(xr=ar+nr)+5,Xe="center"):($e=(Kn=lr-nr)-5,Xe="right")):(lr=(Rt[1][0]+Rt[2][0])/2,ar=(Rt[1][1]+Rt[2][1])/2,"horizontal"===ze?(nt=(xr=ar+nr)+5,Xe="center"):($e=(Kn=lr+nr)+5,Xe="left")),"horizontal"===ze?$e=Kn=lr:nt=xr=ar,yt=[[lr,ar],[Kn,xr]]}Zn.label={linePoints:yt,x:$e,y:nt,verticalAlign:"middle",textAlign:Xe,inside:Mn}})}(r)})}var oR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._dataGroup=new xo,e._initialized=!1,e}return gt(t,n),t.prototype.init=function(){this.group.add(this._dataGroup)},t.prototype.render=function(e,r,o,i){this._progressiveEls=null;var _,S,D,O,N,F,s=this._dataGroup,l=e.getData(),c=this._data,d=e.coordinateSystem,p=d.dimensions,m=aE(e);if(l.diff(c).add(function(_){d2(f2(l,s,_,p,d),l,_,m)}).update(function(_,S){var k=c.getItemGraphicEl(S),D=iE(l,_,p,d);l.setItemGraphicEl(_,k),mo(k,{shape:{points:D}},e,_),md(k),d2(k,l,_,m)}).remove(function(_){var S=c.getItemGraphicEl(_);s.remove(S)}).execute(),!this._initialized){this._initialized=!0;var b=(S=e,D=(_=d).model,O=_.getRect(),N=new bi({shape:{x:O.x,y:O.y,width:O.width,height:O.height}}),F="horizontal"===D.get("layout")?"width":"height",N.setShape(F,0),as(N,{shape:{width:O.width,height:O.height}},S,function(){setTimeout(function(){s.removeClipPath()})}),N);s.setClipPath(b)}this._data=l},t.prototype.incrementalPrepareRender=function(e,r,o){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},t.prototype.incrementalRender=function(e,r,o){for(var i=r.getData(),s=r.coordinateSystem,l=s.dimensions,c=aE(r),d=this._progressiveEls=[],p=e.start;p<e.end;p++){var m=f2(i,this._dataGroup,p,l,s);m.incremental=!0,d2(m,i,p,c),d.push(m)}},t.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},t.type="parallel",t}($a);function iE(n,t,e,r){for(var o,i=[],s=0;s<e.length;s++){var l=e[s],c=n.get(n.mapDimension(l),t);o=c,("category"===r.getAxis(l).type?null==o:null==o||isNaN(o))||i.push(r.dataToPoint(c,l))}return i}function f2(n,t,e,r,o){var i=iE(n,e,r,o),s=new Qu({shape:{points:i},z2:10});return t.add(s),n.setItemGraphicEl(e,s),s}function aE(n){var t=n.get("smooth",!0);return!0===t&&(t=.3),wn(t=Oa(t))&&(t=0),{smooth:t}}function d2(n,t,e,r){n.useStyle(t.getItemVisual(e,"style")),n.style.fill=null,n.setShape("smooth",r.smooth);var o=t.getItemModel(e),i=o.getModel("emphasis");kl(n,o,"lineStyle"),vu(n,i.get("focus"),i.get("blurScope"),i.get("disabled"))}var sE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return gt(t,n),t.prototype.getInitialData=function(e,r){return lm(null,this,{useEncodeDefaulter:De(uE,null,this)})},t.prototype.getRawIndicesByActiveState=function(e){var r=this.coordinateSystem,o=this.getData(),i=[];return r.eachActiveState(o,function(s,l){e===s&&i.push(o.getRawIndex(l))}),i},t.type="series.parallel",t.dependencies=["parallel"],t.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},t}(Ka);function uE(n){var t=n.ecModel.getComponent("parallel",n.get("parallelIndex"));if(t){var e={};return Ce(t.dimensions,function(r){var o=+r.replace("dim","");e[r]=o}),e}}var h2=["lineStyle","opacity"],nI={seriesType:"parallel",reset:function(n,t){var e=n.coordinateSystem,r={normal:n.get(["lineStyle","opacity"]),active:n.get("activeOpacity"),inactive:n.get("inactiveOpacity")};return{progress:function(o,i){e.eachActiveState(i,function(s,l){var c=r[s];if("normal"===s&&i.hasItemOption){var d=i.getItemModel(l).get(h2,!0);null!=d&&(c=d)}i.ensureUniqueItemVisual(l,"style").opacity=c},o.start,o.end)}}}};function iR(n){(function(t){if(!t.parallel){var e=!1;Ce(t.series,function(r){r&&"parallel"===r.type&&(e=!0)}),e&&(t.parallel=[{}])}})(n),function(t){Ce(ci(t.parallelAxis),function(r){if(wr(r)){var o=r.parallelIndex||0,i=ci(t.parallel)[o];i&&i.parallelAxisDefault&&ln(r,i.parallelAxisDefault,!1)}})}(n)}var lE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){this._model=e,this._api=o,this._handlers||(this._handlers={},Ce(rI,function(i,s){o.getZr().on(s,this._handlers[s]=De(i,this))},this)),E0(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},t.prototype.dispose=function(e,r){Tx(this,"_throttledDispatchExpand"),Ce(this._handlers,function(o,i){r.getZr().off(i,o)}),this._handlers=null},t.prototype._throttledDispatchExpand=function(e){this._dispatchExpand(e)},t.prototype._dispatchExpand=function(e){e&&this._api.dispatchAction(Lt({type:"parallelAxisExpand"},e))},t.type="parallel",t}(ks),rI={mousedown:function(n){oI(this,"click")&&(this._mouseDownPoint=[n.offsetX,n.offsetY])},mouseup:function(n){var t=this._mouseDownPoint;if(oI(this,"click")&&t){var e=[n.offsetX,n.offsetY];if(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)>5)return;var r=this._model.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]);"none"!==r.behavior&&this._dispatchExpand({axisExpandWindow:r.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(n){if(!this._mouseDownPoint&&oI(this,"mousemove")){var t=this._model,e=t.coordinateSystem.getSlidedAxisExpandWindow([n.offsetX,n.offsetY]),r=e.behavior;"jump"===r&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===r?null:{axisExpandWindow:e.axisExpandWindow,animation:"jump"===r?null:{duration:0}})}}};function oI(n,t){var e=n._model;return e.get("axisExpandable")&&e.get("axisExpandTriggerOn")===t}var iI=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(){n.prototype.init.apply(this,arguments),this.mergeOption({})},t.prototype.mergeOption=function(e){e&&ln(this.option,e,!0),this._initDimensions()},t.prototype.contains=function(e,r){var o=e.get("parallelIndex");return null!=o&&r.getComponent("parallel",o)===this},t.prototype.setAxisExpand=function(e){Ce(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(r){e.hasOwnProperty(r)&&(this.option[r]=e[r])},this)},t.prototype._initDimensions=function(){var e=this.dimensions=[],r=this.parallelAxisIndex=[];Ce(yo(this.ecModel.queryComponents({mainType:"parallelAxis"}),function(o){return(o.get("parallelIndex")||0)===this.componentIndex},this),function(o){e.push("dim"+o.get("dim")),r.push(o.componentIndex)})},t.type="parallel",t.dependencies=["parallelAxis"],t.layoutMode="box",t.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},t}(W),aR=function(n){function t(e,r,o,i,s){var l=n.call(this,e,r,o)||this;return l.type=i||"value",l.axisIndex=s,l}return gt(t,n),t.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},t}(th);function iu(n,t,e,r,o,i){n=n||0;var s=e[1]-e[0];if(null!=o&&(o=xM(o,[0,s])),null!=i&&(i=Math.max(i,null!=o?o:0)),"all"===r){var l=Math.abs(t[1]-t[0]);l=xM(l,[0,s]),o=i=xM(l,[o,i]),r=0}t[0]=xM(t[0],e),t[1]=xM(t[1],e);var c=aI(t,r);t[r]+=n;var d,p=o||0,m=e.slice();return c.sign<0?m[0]+=p:m[1]-=p,t[r]=xM(t[r],m),d=aI(t,r),null!=o&&(d.sign!==c.sign||d.span<o)&&(t[1-r]=t[r]+c.sign*o),d=aI(t,r),null!=i&&d.span>i&&(t[1-r]=t[r]+d.sign*i),t}function aI(n,t){var e=n[t]-n[1-t];return{span:Math.abs(e),sign:e>0?-1:e<0?1:t?-1:1}}function xM(n,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,n))}var p2=Ce,sI=Math.min,g2=Math.max,cE=Math.floor,sR=Math.ceil,fE=yi,uR=Math.PI,lR=function(){function n(t,e,r){this.type="parallel",this._axesMap=Or(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,r)}return n.prototype._init=function(t,e,r){var i=t.parallelAxisIndex;p2(t.dimensions,function(s,l){var c=i[l],d=e.getComponent("parallelAxis",c),p=this._axesMap.set(s,new aR(s,$0(d),[0,0],d.get("type"),c));p.onBand="category"===p.type&&d.get("boundaryGap"),p.inverse=d.get("inverse"),d.axis=p,p.model=d,p.coordinateSystem=d.coordinateSystem=this},this)},n.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},n.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),r=e.axisBase,o=e.layoutBase,i=e.pixelDimIndex,s=t[1-i],l=t[i];return s>=r&&s<=r+e.axisLength&&l>=o&&l<=o+e.layoutLength},n.prototype.getModel=function(){return this._model},n.prototype._updateAxesFromSeries=function(t,e){e.eachSeries(function(r){if(t.contains(r,e)){var o=r.getData();p2(this.dimensions,function(i){var s=this._axesMap.get(i);s.scale.unionExtentFromData(o,o.mapDimension(i)),dp(s.scale,s.model)},this)}},this)},n.prototype.resize=function(t,e){this._rect=tl(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},n.prototype.getRect=function(){return this._rect},n.prototype._makeLayoutInfo=function(){var t,e=this._model,r=this._rect,o=["x","y"],i=["width","height"],s=e.get("layout"),l="horizontal"===s?0:1,c=r[i[l]],d=[0,c],p=this.dimensions.length,m=m2(e.get("axisExpandWidth"),d),b=m2(e.get("axisExpandCount")||0,[0,p]),_=e.get("axisExpandable")&&p>3&&p>b&&b>1&&m>0&&c>0,S=e.get("axisExpandWindow");S?(t=m2(S[1]-S[0],d),S[1]=S[0]+t):(t=m2(m*(b-1),d),(S=[m*(e.get("axisExpandCenter")||cE(p/2))-t/2])[1]=S[0]+t);var k=(c-t)/(p-b);k<3&&(k=0);var D=[cE(fE(S[0]/m,1))+1,sR(fE(S[1]/m,1))-1];return{layout:s,pixelDimIndex:l,layoutBase:r[o[l]],layoutLength:c,axisBase:r[o[1-l]],axisLength:r[i[1-l]],axisExpandable:_,axisExpandWidth:m,axisCollapseWidth:k,axisExpandWindow:S,axisCount:p,winInnerIndices:D,axisExpandWindow0Pos:k/m*S[0]}},n.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,r=this.dimensions,o=this._makeLayoutInfo(),i=o.layout;e.each(function(s){var l=[0,o.axisLength],c=s.inverse?1:0;s.setExtent(l[c],l[1-c])}),p2(r,function(s,l){var c=(o.axisExpandable?fR:cR)(l,o),d={horizontal:{x:c.position,y:o.axisLength},vertical:{x:0,y:c.position}},m=[d[i].x+t.x,d[i].y+t.y],b={horizontal:uR/2,vertical:0}[i],_=[1,0,0,1,0,0];Pl(_,_,b),Rc(_,_,m),this._axesLayout[s]={position:m,rotation:b,transform:_,axisNameAvailableWidth:c.axisNameAvailableWidth,axisLabelShow:c.axisLabelShow,nameTruncateMaxWidth:c.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},n.prototype.getAxis=function(t){return this._axesMap.get(t)},n.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},n.prototype.eachActiveState=function(t,e,r,o){null==r&&(r=0),null==o&&(o=t.count());var i=this._axesMap,s=this.dimensions,l=[],c=[];Ce(s,function(k){l.push(t.mapDimension(k)),c.push(i.get(k).model)});for(var d=this.hasAxisBrushed(),p=r;p<o;p++){var m=void 0;if(d){m="active";for(var b=t.getValues(l,p),_=0,S=s.length;_<S;_++)if("inactive"===c[_].getActiveState(b[_])){m="inactive";break}}else m="normal";e(m,p)}},n.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,r=!1,o=0,i=t.length;o<i;o++)"normal"!==e.get(t[o]).model.getActiveState()&&(r=!0);return r},n.prototype.axisCoordToPoint=function(t,e){return hl([t,0],this._axesLayout[e].transform)},n.prototype.getAxisLayout=function(t){return an(this._axesLayout[t])},n.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),r=e.pixelDimIndex,o=e.axisExpandWindow.slice(),i=o[1]-o[0],s=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:o};var l,c=t[r]-e.layoutBase-e.axisExpandWindow0Pos,d="slide",p=e.axisCollapseWidth,m=this._model.get("axisExpandSlideTriggerArea"),b=null!=m[0];if(p)b&&p&&c<i*m[0]?(d="jump",l=c-i*m[2]):b&&p&&c>i*(1-m[0])?(d="jump",l=c-i*(1-m[2])):(l=c-i*m[1])>=0&&(l=c-i*(1-m[1]))<=0&&(l=0),(l*=e.axisExpandWidth/p)?iu(l,o,s,"all"):d="none";else{var _=o[1]-o[0];(o=[g2(0,s[1]*c/_-_/2)])[1]=sI(s[1],o[0]+_),o[0]=o[1]-_}return{axisExpandWindow:o,behavior:d}},n}();function m2(n,t){return sI(g2(n,t[0]),t[1])}function cR(n,t){var e=t.layoutLength/(t.axisCount-1);return{position:e*n,axisNameAvailableWidth:e,axisLabelShow:!0}}function fR(n,t){var e,r,i=t.axisExpandWidth,l=t.axisCollapseWidth,c=t.winInnerIndices,d=l,p=!1;return n<c[0]?(e=n*l,r=l):n<=c[1]?(e=t.axisExpandWindow0Pos+n*i-t.axisExpandWindow[0],d=i,p=!0):(e=t.layoutLength-(t.axisCount-1-n)*l,r=l),{position:e,axisNameAvailableWidth:d,axisLabelShow:p,nameTruncateMaxWidth:r}}var uI={create:function(n,t){var e=[];return n.eachComponent("parallel",function(r,o){var i=new lR(r,n,t);i.name="parallel_"+o,i.resize(r,t),r.coordinateSystem=i,i.model=r,e.push(i)}),n.eachSeries(function(r){if("parallel"===r.get("coordinateSystem")){var o=r.getReferringComponents("parallel",ll).models[0];r.coordinateSystem=o.coordinateSystem}}),e}},yg=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.activeIntervals=[],e}return gt(t,n),t.prototype.getAreaSelectStyle=function(){return Vp([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},t.prototype.setActiveIntervals=function(e){var r=this.activeIntervals=an(e);if(r)for(var o=r.length-1;o>=0;o--)Ua(r[o])},t.prototype.getActiveState=function(e){var r=this.activeIntervals;if(!r.length)return"normal";if(null==e||isNaN(+e))return"inactive";if(1===r.length){var o=r[0];if(o[0]<=e&&e<=o[1])return"active"}else for(var i=0,s=r.length;i<s;i++)if(r[i][0]<=e&&e<=r[i][1])return"active";return"inactive"},t}(W);na(yg,Q0);var wS=!0,vT=Math.min,_M=Math.max,dR=Math.pow,hR={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},pR={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},hE={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},gR=0,lI=function(n){function t(e){var r=n.call(this)||this;return r._track=[],r._covers=[],r._handlers={},r._zr=e,r.group=new xo,r._uid="brushController_"+gR++,Ce(vR,function(o,i){this._handlers[i]=De(o,this)},r),r}return gt(t,n),t.prototype.enableBrush=function(e){return this._brushType&&this._doDisableBrush(),e.brushType&&this._doEnableBrush(e),this},t.prototype._doEnableBrush=function(e){var s,r=this._zr;this._enableGlobalPan||(s=this._uid,m_(r).globalPan=s),Ce(this._handlers,function(o,i){r.on(i,o)}),this._brushType=e.brushType,this._brushOption=ln(an(hE),e,!0)},t.prototype._doDisableBrush=function(){var o,i,s,e=this._zr;o="globalPan",i=this._uid,(s=m_(e))[o]===i&&(s[o]=null),Ce(this._handlers,function(r,o){e.off(o,r)}),this._brushType=this._brushOption=null},t.prototype.setPanels=function(e){if(e&&e.length){var r=this._panels={};Ce(e,function(o){r[o.panelId]=an(o)})}else this._panels=null;return this},t.prototype.mount=function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var r=this.group;return this._zr.add(r),r.attr({x:e.x||0,y:e.y||0,rotation:e.rotation||0,scaleX:e.scaleX||1,scaleY:e.scaleY||1}),this._transform=r.getLocalTransform(),this},t.prototype.updateCovers=function(e){e=mt(e,function(d){return ln(an(hE),d,!0)});var r=this._covers,o=this._covers=[],i=this,s=this._creatingCover;return new lg(r,e,function(d,p){return l(d.__brushOption,p)},l).add(c).update(c).remove(function(d){r[d]!==s&&i.group.remove(r[d])}).execute(),this;function l(d,p){return(null!=d.id?d.id:"\0-brush-index-"+p)+"-"+d.brushType}function c(d,p){var m=e[d];if(null!=p&&r[p]===s)o[d]=r[p];else{var b=o[d]=null!=p?(r[p].__brushOption=m,r[p]):gE(i,pE(i,m));cI(i,b)}}},t.prototype.unmount=function(){return this.enableBrush(!1),hI(this),this._zr.remove(this.group),this},t.prototype.dispose=function(){this.unmount(),this.off()},t}(bo);function pE(n,t){var e=y2[t.brushType].createCover(n,t);return e.__brushOption=t,vE(e,t),n.group.add(e),e}function gE(n,t){var e=fI(t);return e.endCreating&&(e.endCreating(n,t),vE(t,t.__brushOption)),t}function mE(n,t){var e=t.__brushOption;fI(t).updateCoverShape(n,t,e.range,e)}function vE(n,t){var e=t.z;null==e&&(e=1e4),n.traverse(function(r){r.z=e,r.z2=e})}function cI(n,t){fI(t).updateCommon(n,t),mE(n,t)}function fI(n){return y2[n.__brushOption.brushType]}function dI(n,t,e){var r,o=n._panels;if(!o)return wS;var i=n._transform;return Ce(o,function(s){s.isTargetByCursor(t,e,i)&&(r=s)}),r}function yE(n,t){var e=n._panels;if(!e)return wS;var r=t.__brushOption.panelId;return null!=r?e[r]:wS}function hI(n){var t=n._covers,e=t.length;return Ce(t,function(r){n.group.remove(r)},n),t.length=0,!!e}function SS(n,t){var e=mt(n._covers,function(r){var o=r.__brushOption,i=an(o.range);return{brushType:o.brushType,panelId:o.panelId,range:i}});n.trigger("brush",{areas:e,isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function bE(n){var t=n.length-1;return t<0&&(t=0),[n[0],n[t]]}function xE(n,t,e,r){var o=new xo;return o.add(new bi({name:"main",style:v2(e),silent:!0,draggable:!0,cursor:"move",drift:dr(SE,n,t,o,["n","s","w","e"]),ondragend:dr(SS,t,{isEnd:!0})})),Ce(r,function(i){o.add(new bi({name:i.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:dr(SE,n,t,o,i),ondragend:dr(SS,t,{isEnd:!0})}))}),o}function _E(n,t,e,r){var o=r.brushStyle.lineWidth||0,i=_M(o,6),s=e[0][0],l=e[1][0],c=s-o/2,d=l-o/2,p=e[0][1],m=e[1][1],b=p-i+o/2,_=m-i+o/2,S=p-s,k=m-l,D=S+o,O=k+o;W1(n,t,"main",s,l,S,k),r.transformable&&(W1(n,t,"w",c,d,i,O),W1(n,t,"e",b,d,i,O),W1(n,t,"n",c,d,D,i),W1(n,t,"s",c,_,D,i),W1(n,t,"nw",c,d,i,i),W1(n,t,"ne",b,d,i,i),W1(n,t,"sw",c,_,i,i),W1(n,t,"se",b,_,i,i))}function pI(n,t){var e=t.__brushOption,r=e.transformable,o=t.childAt(0);o.useStyle(v2(e)),o.attr({silent:!r,cursor:r?"move":"default"}),Ce([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],function(i){var c,d,p,s=t.childOfName(i.join("")),l=1===i.length?gI(n,i[0]):(("e"===(p=[gI(c=n,(d=i)[0]),gI(c,d[1])])[0]||"w"===p[0])&&p.reverse(),p.join(""));s&&s.attr({silent:!r,invisible:!r,cursor:r?pR[l]+"-resize":null})})}function W1(n,t,e,r,o,i,s){var c,d,p,l=t.childOfName(e);l&&l.setShape((c=mI(n,t,[[r,o],[r+i,o+s]]),{x:d=vT(c[0][0],c[1][0]),y:p=vT(c[0][1],c[1][1]),width:_M(c[0][0],c[1][0])-d,height:_M(c[0][1],c[1][1])-p}))}function v2(n){return Yn({strokeNoScale:!0},n.brushStyle)}function wE(n,t,e,r){var o=[vT(n,e),vT(t,r)],i=[_M(n,e),_M(t,r)];return[[o[0],i[0]],[o[1],i[1]]]}function gI(n,t){return{left:"w",right:"e",top:"n",bottom:"s"}[sp({w:"left",e:"right",n:"top",s:"bottom"}[t],jo(n.group))]}function SE(n,t,e,r,o,i){var s=e.__brushOption,l=n.toRectRange(s.range),c=CE(t,o,i);Ce(r,function(d){var p=hR[d];l[p[0]][p[1]]+=c[p[0]]}),s.range=n.fromRectRange(wE(l[0][0],l[1][0],l[0][1],l[1][1])),cI(t,e),SS(t,{isEnd:!1})}function mR(n,t,e,r){var o=t.__brushOption.range,i=CE(n,e,r);Ce(o,function(s){s[0]+=i[0],s[1]+=i[1]}),cI(n,t),SS(n,{isEnd:!1})}function CE(n,t,e){var r=n.group,o=r.transformCoordToLocal(t,e),i=r.transformCoordToLocal(0,0);return[o[0]-i[0],o[1]-i[1]]}function mI(n,t,e){var r=yE(n,t);return r&&r!==wS?r.clipPath(e,n._transform):an(e)}function vI(n){var t=n.event;t.preventDefault&&t.preventDefault()}function yI(n,t,e){return n.childOfName("main").contain(t,e)}function bI(n,t,e,r){var o,i=n._creatingCover,s=n._creatingPanel,l=n._brushOption;if(n._track.push(e.slice()),function(p){var m=p._track;if(!m.length)return!1;var b=m[m.length-1],_=m[0],S=b[0]-_[0],k=b[1]-_[1];return dR(S*S+k*k,.5)>6}(n)||i){if(s&&!i){"single"===l.brushMode&&hI(n);var c=an(l);c.brushType=ME(c.brushType,s),c.panelId=s===wS?null:s.panelId,i=n._creatingCover=pE(n,c),n._covers.push(i)}if(i){var d=y2[ME(n._brushType,s)];i.__brushOption.range=d.getCreatingRange(mI(n,i,n._track)),r&&(gE(n,i),d.updateCommon(n,i)),mE(n,i),o={isEnd:r}}}else r&&"single"===l.brushMode&&l.removeOnClick&&dI(n,t,e)&&hI(n)&&(o={isEnd:r,removeOnClick:!0});return o}function ME(n,t){return"auto"===n?t.defaultBrushType:n}var vR={mousedown:function(n){if(this._dragging)kE(this,n);else if(!n.target||!n.target.draggable){vI(n);var t=this.group.transformCoordToLocal(n.offsetX,n.offsetY);this._creatingCover=null,(this._creatingPanel=dI(this,n,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(n){var r=this.group.transformCoordToLocal(n.offsetX,n.offsetY);if(function(i,s,l){if(i._brushType&&(k=s.offsetY,D=i._zr,!((S=s.offsetX)<0||S>D.getWidth()||k<0||k>D.getHeight()))){var c=i._zr,d=i._covers,p=dI(i,s,l);if(!i._dragging)for(var m=0;m<d.length;m++){var b=d[m].__brushOption;if(p&&(p===wS||b.panelId===p.panelId)&&y2[b.brushType].contain(d[m],l[0],l[1]))return}p&&c.setCursorStyle("crosshair")}var S,k,D}(this,n,r),this._dragging){vI(n);var o=bI(this,n,r,!1);o&&SS(this,o)}},mouseup:function(n){kE(this,n)}};function kE(n,t){if(n._dragging){vI(t);var o=n.group.transformCoordToLocal(t.offsetX,t.offsetY),i=bI(n,t,o,!0);n._dragging=!1,n._track=[],n._creatingCover=null,i&&SS(n,i)}}var y2={lineX:TE(0),lineY:TE(1),rect:{createCover:function(n,t){function e(r){return r}return xE({toRectRange:e,fromRectRange:e},n,t,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(n){var t=bE(n);return wE(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(n,t,e,r){_E(n,t,e,r)},updateCommon:pI,contain:yI},polygon:{createCover:function(n,t){var e=new xo;return e.add(new Qu({name:"main",style:v2(t),silent:!0})),e},getCreatingRange:function(n){return n},endCreating:function(n,t){t.remove(t.childAt(0)),t.add(new eu({name:"main",draggable:!0,drift:dr(mR,n,t),ondragend:dr(SS,n,{isEnd:!0})}))},updateCoverShape:function(n,t,e,r){t.childAt(0).setShape({points:mI(n,t,e)})},updateCommon:pI,contain:yI}};function TE(n){return{createCover:function(t,e){return xE({toRectRange:function(r){var o=[r,[0,100]];return n&&o.reverse(),o},fromRectRange:function(r){return r[n]}},t,e,[[["w"],["e"]],[["n"],["s"]]][n])},getCreatingRange:function(t){var e=bE(t);return[vT(e[0][n],e[1][n]),_M(e[0][n],e[1][n])]},updateCoverShape:function(t,e,r,o){var i,s=yE(t,e);if(s!==wS&&s.getLinearBrushOtherExtent)i=s.getLinearBrushOtherExtent(n);else{var l=t._zr;i=[0,[l.getWidth(),l.getHeight()][1-n]]}var c=[r,i];n&&c.reverse(),_E(t,e,c,o)},updateCommon:pI,contain:yI}}function DE(n){return n=yT(n),function(t){return Fb(t,n)}}function AE(n,t){return n=yT(n),function(e){var r=null!=t?t:e,i=r?n.x:n.y;return[i,i+((r?n.width:n.height)||0)]}}function IE(n,t,e){var r=yT(n);return function(o,i){return r.contain(i[0],i[1])&&!eT(o,t,e)}}function yT(n){return Io.create(n)}var yR=["axisLine","axisTickLabel","axisName"],OE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e,r){n.prototype.init.apply(this,arguments),(this._brushController=new lI(r.getZr())).on("brush",De(this._onBrush,this))},t.prototype.render=function(e,r,o,i){if(S=e,!(D=i)||"axisAreaSelect"!==D.type||r.findComponents({mainType:"parallelAxis",query:D})[0]!==S){this.axisModel=e,this.api=o,this.group.removeAll();var s=this._axisGroup;if(this._axisGroup=new xo,this.group.add(this._axisGroup),e.get("show")){var l=function(S,k){return k.getComponent("parallel",S.get("parallelIndex"))}(e,r),c=l.coordinateSystem,d=e.getAreaSelectStyle(),p=d.width,b=Lt({strokeContainThreshold:p},c.getAxisLayout(e.axis.dim)),_=new bn(e,b);Ce(yR,_.add,_),this._axisGroup.add(_.getGroup()),this._refreshBrushController(b,d,e,l,p,o),Ho(s,this._axisGroup,e)}}var S,D},t.prototype._refreshBrushController=function(e,r,o,i,s,l){var b,_,c=o.axis.getExtent(),d=c[1]-c[0],p=Math.min(30,.1*Math.abs(d)),m=Io.create({x:c[0],y:-s/2,width:d,height:s});m.x-=p,m.width+=2*p,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,x:e.position[0],y:e.position[1]}).setPanels([{panelId:"pl",clipPath:DE(m),isTargetByCursor:IE(m,l,i),getLinearBrushOtherExtent:AE(m,0)}]).enableBrush({brushType:"lineX",brushStyle:r,removeOnClick:!0}).updateCovers((_=(b=o).axis,mt(b.activeIntervals,function(S){return{brushType:"lineX",panelId:"pl",range:[_.dataToCoord(S[0],!0),_.dataToCoord(S[1],!0)]}})))},t.prototype._onBrush=function(e){var o=this.axisModel,i=o.axis,s=mt(e.areas,function(l){return[i.coordToData(l.range[0],!0),i.coordToData(l.range[1],!0)]});(!o.option.realtime===e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:o.id,intervals:s})},t.prototype.dispose=function(){this._brushController.dispose()},t.type="parallelAxis",t}(ks),bR={type:"axisAreaSelect",event:"axisAreaSelected"},xR={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function EE(n){n.registerComponentView(lE),n.registerComponentModel(iI),n.registerCoordinateSystem("parallel",uI),n.registerPreprocessor(iR),n.registerComponentModel(yg),n.registerComponentView(OE),xe(n,"parallel",yg,xR),function(t){t.registerAction(bR,function(e,r){r.eachComponent({mainType:"parallelAxis",query:e},function(o){o.axis.model.setActiveIntervals(e.intervals)})}),t.registerAction("parallelAxisExpand",function(e,r){r.eachComponent({mainType:"parallel",query:e},function(o){o.setAxisExpand(e)})})}(n)}var _R=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},wR=function(n){function t(e){return n.call(this,e)||this}return gt(t,n),t.prototype.getDefaultShape=function(){return new _R},t.prototype.buildPath=function(e,r){var o=r.extent;e.moveTo(r.x1,r.y1),e.bezierCurveTo(r.cpx1,r.cpy1,r.cpx2,r.cpy2,r.x2,r.y2),"vertical"===r.orient?(e.lineTo(r.x2+o,r.y2),e.bezierCurveTo(r.cpx2+o,r.cpy2,r.cpx1+o,r.cpy1,r.x1+o,r.y1)):(e.lineTo(r.x2,r.y2+o),e.bezierCurveTo(r.cpx2,r.cpy2+o,r.cpx1,r.cpy1+o,r.x1,r.y1+o)),e.closePath()},t.prototype.highlight=function(){pd(this)},t.prototype.downplay=function(){Ah(this)},t}(Go),SR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._focusAdjacencyDisabled=!1,e}return gt(t,n),t.prototype.render=function(e,r,o){var S,k,O,i=this,s=e.getGraph(),l=this.group,c=e.layoutInfo,d=c.width,p=c.height,m=e.getData(),b=e.getData("edge"),_=e.get("orient");this._model=e,l.removeAll(),l.x=c.x,l.y=c.y,s.eachEdge(function(S){var k=new wR,D=So(k);D.dataIndex=S.dataIndex,D.seriesIndex=e.seriesIndex,D.dataType="edge";var O,N,F,V,q,Z,Q,re,he=S.getModel(),ge=he.getModel("lineStyle"),ve=ge.get("curveness"),_e=S.node1.getLayout(),Ee=S.node1.getModel(),ze=Ee.get("localX"),Ge=Ee.get("localY"),Xe=S.node2.getLayout(),$e=S.node2.getModel(),nt=$e.get("localX"),yt=$e.get("localY"),_t=S.getLayout();switch(k.shape.extent=Math.max(1,_t.dy),k.shape.orient=_,"vertical"===_?(q=O=(null!=ze?ze*d:_e.x)+_t.sy,Z=(N=(null!=Ge?Ge*p:_e.y)+_e.dy)*(1-ve)+(V=null!=yt?yt*p:Xe.y)*ve,Q=F=(null!=nt?nt*d:Xe.x)+_t.ty,re=N*ve+V*(1-ve)):(q=(O=(null!=ze?ze*d:_e.x)+_e.dx)*(1-ve)+(F=null!=nt?nt*d:Xe.x)*ve,Z=N=(null!=Ge?Ge*p:_e.y)+_t.sy,Q=O*ve+F*(1-ve),re=V=(null!=yt?yt*p:Xe.y)+_t.ty),k.setShape({x1:O,y1:N,x2:F,y2:V,cpx1:q,cpy1:Z,cpx2:Q,cpy2:re}),k.useStyle(ge.getItemStyle()),k.style.fill){case"source":k.style.fill=S.node1.getVisual("color"),k.style.decal=S.node1.getVisual("style").decal;break;case"target":k.style.fill=S.node2.getVisual("color"),k.style.decal=S.node2.getVisual("style").decal;break;case"gradient":var Et=S.node1.getVisual("color"),hn=S.node2.getVisual("color");ir(Et)&&ir(hn)&&(k.style.fill=new Kp(0,0,+("horizontal"===_),+("vertical"===_),[{color:Et,offset:0},{color:hn,offset:1}]))}ps(k,gs(he,"edgeLabel"),{labelFetcher:e,labelDataIndex:S.dataIndex,defaultText:""+he.get("value")}),k.setTextConfig({position:"inside"});var Zn=he.getModel("emphasis");kl(k,he,"lineStyle",function(Mn){return Mn.getItemStyle()}),l.add(k),b.setItemGraphicEl(S.dataIndex,k);var Rt=Zn.get("focus");vu(k,"adjacency"===Rt?S.getAdjacentDataIndices():Rt,Zn.get("blurScope"),Zn.get("disabled")),So(k).dataType="edge"}),s.eachNode(function(S){var k=S.getLayout(),D=S.getModel(),O=D.get("localX"),N=D.get("localY"),F=D.getModel("emphasis"),V=new bi({shape:{x:null!=O?O*d:k.x,y:null!=N?N*p:k.y,width:k.dx,height:k.dy},style:D.getModel("itemStyle").getItemStyle(),z2:10});ps(V,gs(D),{labelFetcher:e,labelDataIndex:S.dataIndex,defaultText:S.id}),V.disableLabelAnimation=!0,V.setStyle("fill",S.getVisual("color")),V.setStyle("decal",S.getVisual("style").decal),kl(V,D),l.add(V),m.setItemGraphicEl(S.dataIndex,V),So(V).dataType="node";var q=F.get("focus");vu(V,"adjacency"===q?S.getAdjacentDataIndices():q,F.get("blurScope"),F.get("disabled"))}),m.eachItemGraphicEl(function(S,k){m.getItemModel(k).get("draggable")&&(S.drift=function(D,O){i._focusAdjacencyDisabled=!0,this.shape.x+=D,this.shape.y+=O,this.dirty(),o.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:m.getRawIndex(k),localX:this.shape.x/d,localY:this.shape.y/p})},S.ondragend=function(){i._focusAdjacencyDisabled=!1},S.draggable=!0,S.cursor="move")}),!this._data&&e.isAnimationEnabled()&&l.setClipPath((S=l.getBoundingRect(),k=e,as(O=new bi({shape:{x:S.x-10,y:S.y-10,width:0,height:S.height+20}}),{shape:{width:S.width+20}},k,function(){l.removeClipPath()}),O)),this._data=e.getData()},t.prototype.dispose=function(){},t.type="sankey",t}($a),CR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.getInitialData=function(e,r){var o=e.edges||e.links,i=e.data||e.nodes,s=e.levels;this.levelModels=[];for(var l=this.levelModels,c=0;c<s.length;c++)null!=s[c].depth&&s[c].depth>=0&&(l[s[c].depth]=new aa(s[c],this,r));if(i&&o)return nE(i,o,this,!0,function(p,m){p.wrapMethod("getItemModel",function(b,_){var S=b.parentModel,k=S.getData().getItemLayout(_);if(k){var O=S.levelModels[k.depth];O&&(b.parentModel=O)}return b}),m.wrapMethod("getItemModel",function(b,_){var S=b.parentModel,k=S.getGraph().getEdgeByIndex(_).node1.getLayout();if(k){var O=S.levelModels[k.depth];O&&(b.parentModel=O)}return b})}).data},t.prototype.setNodePosition=function(e,r){var o=(this.option.data||this.option.nodes)[e];o.localX=r[0],o.localY=r[1]},t.prototype.getGraph=function(){return this.getData().graph},t.prototype.getEdgeData=function(){return this.getGraph().edgeData},t.prototype.formatTooltip=function(e,r,o){function i(m){return isNaN(m)||null==m}if("edge"===o){var s=this.getDataParams(e,o),l=s.data,c=s.value;return Dc("nameValue",{name:l.source+" -- "+l.target,value:c,noValue:i(c)})}var d=this.getGraph().getNodeByIndex(e).getLayout().value,p=this.getDataParams(e,o).data.name;return Dc("nameValue",{name:null!=p?p+"":null,value:d,noValue:i(d)})},t.prototype.optionUpdated=function(){},t.prototype.getDataParams=function(e,r){var o=n.prototype.getDataParams.call(this,e,r);if(null==o.value&&"node"===r){var i=this.getGraph().getNodeByIndex(e).getLayout().value;o.value=i}return o},t.type="series.sankey",t.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},t}(Ka);function MR(n,t){n.eachSeriesByType("sankey",function(e){var b,r=e.get("nodeWidth"),o=e.get("nodeGap"),i=(b=t,tl(e.getBoxLayoutParams(),{width:b.getWidth(),height:b.getHeight()}));e.layoutInfo=i;var s=i.width,l=i.height,c=e.getGraph(),d=c.nodes,p=c.edges;Ce(d,function(b){var _=w_(b.outEdges,x2),S=w_(b.inEdges,x2),k=b.getValue()||0,D=Math.max(_,S,k);b.setLayout({value:D},!0)}),function(m,b,_,S,k,D,O,N,F){var V,Z;(function(V,q,Z,Q,re,he,ge){for(var ve=[],_e=[],Ee=[],ze=[],Ge=0,Xe=0;Xe<q.length;Xe++)ve[Xe]=1;for(Xe=0;Xe<V.length;Xe++)_e[Xe]=V[Xe].inEdges.length,0===_e[Xe]&&Ee.push(V[Xe]);for(var $e=-1;Ee.length;){for(var nt=0;nt<Ee.length;nt++){var yt=Ee[nt],_t=yt.hostGraph.data.getRawDataItem(yt.dataIndex),Et=null!=_t.depth&&_t.depth>=0;Et&&_t.depth>$e&&($e=_t.depth),yt.setLayout({depth:Et?_t.depth:Ge},!0),yt.setLayout("vertical"===he?{dy:Z}:{dx:Z},!0);for(var hn=0;hn<yt.outEdges.length;hn++){var Zn=yt.outEdges[hn];ve[q.indexOf(Zn)]=0;var Rt=Zn.node2;0==--_e[V.indexOf(Rt)]&&ze.indexOf(Rt)<0&&ze.push(Rt)}}++Ge,Ee=ze,ze=[]}for(Xe=0;Xe<ve.length;Xe++)if(1===ve[Xe])throw new Error("Sankey is a DAG, the original data has cycle!");var Kn,xr,Mn=$e>Ge-1?$e:Ge-1;ge&&"left"!==ge&&function(ar,Kn,xr,nr){if("right"===Kn){for(var Cr=[],zr=ar,qo=0;zr.length;){for(var li=0;li<zr.length;li++){var ss=zr[li];ss.setLayout({skNodeHeight:qo},!0);for(var ji=0;ji<ss.inEdges.length;ji++){var pa=ss.inEdges[ji];Cr.indexOf(pa.node1)<0&&Cr.push(pa.node1)}}zr=Cr,Cr=[],++qo}Ce(ar,function(za){b2(za)||za.setLayout({depth:Math.max(0,nr-za.getLayout().skNodeHeight)},!0)})}else"justify"===Kn&&(Bu=nr,Ce(ar,function(nl){b2(nl)||nl.outEdges.length||nl.setLayout({depth:Bu},!0)}));var Bu}(V,ge,0,Mn),Kn="vertical"===he?(re-Z)/Mn:(Q-Z)/Mn,xr=he,Ce(V,function(nr){var Cr=nr.getLayout().depth*Kn;nr.setLayout("vertical"===xr?{y:Cr}:{x:Cr},!0)})})(m,b,_,k,D,N,F),function(V,q,Z,Q,re,he,ge){var Ge,Xe,$e,ve=(Ge=[],Xe="vertical"===ge?"y":"x",($e=zp(V,function(nt){return nt.getLayout()[Xe]})).keys.sort(function(nt,yt){return nt-yt}),Ce($e.keys,function(nt){Ge.push($e.buckets.get(nt))}),Ge);(function(Ee,ze,Ge,Xe,$e,nt){var yt=1/0;Ce(Ee,function(_t){var Et=_t.length,hn=0;Ce(_t,function(Rt){hn+=Rt.getLayout().value});var Zn="vertical"===nt?(Xe-(Et-1)*$e)/hn:(Ge-(Et-1)*$e)/hn;Zn<yt&&(yt=Zn)}),Ce(Ee,function(_t){Ce(_t,function(Et,hn){var Zn=Et.getLayout().value*yt;"vertical"===nt?(Et.setLayout({x:hn},!0),Et.setLayout({dx:Zn},!0)):(Et.setLayout({y:hn},!0),Et.setLayout({dy:Zn},!0))})}),Ce(ze,function(_t){var Et=+_t.getValue()*yt;_t.setLayout({dy:Et},!0)})})(ve,q,Z,Q,re,ge),xI(ve,re,Z,Q,ge);for(var _e=1;he>0;he--)bT(ve,_e*=.99,ge),xI(ve,re,Z,Q,ge),wM(ve,_e,ge),xI(ve,re,Z,Q,ge)}(m,b,D,k,S,O,N),Z="vertical"===N?"x":"y",Ce(V=m,function(Q){Q.outEdges.sort(function(re,he){return re.node2.getLayout()[Z]-he.node2.getLayout()[Z]}),Q.inEdges.sort(function(re,he){return re.node1.getLayout()[Z]-he.node1.getLayout()[Z]})}),Ce(V,function(Q){var re=0,he=0;Ce(Q.outEdges,function(ge){ge.setLayout({sy:re},!0),re+=ge.getLayout().dy}),Ce(Q.inEdges,function(ge){ge.setLayout({ty:he},!0),he+=ge.getLayout().dy})})}(d,p,r,o,s,l,0!==yo(d,function(m){return 0===m.getLayout().value}).length?0:e.get("layoutIterations"),e.get("orient"),e.get("nodeAlign"))})}function b2(n){var t=n.hostGraph.data.getRawDataItem(n.dataIndex);return null!=t.depth&&t.depth>=0}function xI(n,t,e,r,o){var i="vertical"===o?"x":"y";Ce(n,function(s){var l,c,d;s.sort(function(S,k){return S.getLayout()[i]-k.getLayout()[i]});for(var p=0,m=s.length,b="vertical"===o?"dx":"dy",_=0;_<m;_++)(d=p-(c=s[_]).getLayout()[i])>0&&(l=c.getLayout()[i]+d,c.setLayout("vertical"===o?{x:l}:{y:l},!0)),p=c.getLayout()[i]+c.getLayout()[b]+t;if((d=p-t-("vertical"===o?r:e))>0)for(l=c.getLayout()[i]-d,c.setLayout("vertical"===o?{x:l}:{y:l},!0),p=l,_=m-2;_>=0;--_)(d=(c=s[_]).getLayout()[i]+c.getLayout()[b]+t-p)>0&&(l=c.getLayout()[i]-d,c.setLayout("vertical"===o?{x:l}:{y:l},!0)),p=c.getLayout()[i]})}function bT(n,t,e){Ce(n.slice().reverse(),function(r){Ce(r,function(o){if(o.outEdges.length){var i=w_(o.outEdges,kR,e)/w_(o.outEdges,x2);if(isNaN(i)){var s=o.outEdges.length;i=s?w_(o.outEdges,TR,e)/s:0}if("vertical"===e){var l=o.getLayout().x+(i-__(o,e))*t;o.setLayout({x:l},!0)}else{var c=o.getLayout().y+(i-__(o,e))*t;o.setLayout({y:c},!0)}}})})}function kR(n,t){return __(n.node2,t)*n.getValue()}function TR(n,t){return __(n.node2,t)}function DR(n,t){return __(n.node1,t)*n.getValue()}function PE(n,t){return __(n.node1,t)}function __(n,t){return"vertical"===t?n.getLayout().x+n.getLayout().dx/2:n.getLayout().y+n.getLayout().dy/2}function x2(n){return n.getValue()}function w_(n,t,e){for(var r=0,o=n.length,i=-1;++i<o;){var s=+t(n[i],e);isNaN(s)||(r+=s)}return r}function wM(n,t,e){Ce(n,function(r){Ce(r,function(o){if(o.inEdges.length){var i=w_(o.inEdges,DR,e)/w_(o.inEdges,x2);if(isNaN(i)){var s=o.inEdges.length;i=s?w_(o.inEdges,PE,e)/s:0}if("vertical"===e){var l=o.getLayout().x+(i-__(o,e))*t;o.setLayout({x:l},!0)}else{var c=o.getLayout().y+(i-__(o,e))*t;o.setLayout({y:c},!0)}}})})}function RE(n){n.eachSeriesByType("sankey",function(t){var e=t.getGraph(),r=e.nodes,o=e.edges;if(r.length){var i=1/0,s=-1/0;Ce(r,function(l){var c=l.getLayout().value;c<i&&(i=c),c>s&&(s=c)}),Ce(r,function(l){var c=new Kf({type:"color",mappingMethod:"linear",dataExtent:[i,s],visual:t.get("color")}).mapValueToVisual(l.getLayout().value),d=l.getModel().get(["itemStyle","color"]);null!=d?(l.setVisual("color",d),l.setVisual("style",{fill:d})):(l.setVisual("color",c),l.setVisual("style",{fill:c}))})}o.length&&Ce(o,function(l){var c=l.getModel().get("lineStyle");l.setVisual("style",c)})})}var _I=function(){function n(){}return n.prototype.getInitialData=function(t,e){var r,o,i=e.getComponent("xAxis",this.get("xAxisIndex")),s=e.getComponent("yAxis",this.get("yAxisIndex")),l=i.get("type"),c=s.get("type");"category"===l?(t.layout="horizontal",r=i.getOrdinalMeta(),o=!0):"category"===c?(t.layout="vertical",r=s.getOrdinalMeta(),o=!0):t.layout=t.layout||"horizontal";var d=["x","y"],p="horizontal"===t.layout?0:1,m=this._baseAxisDim=d[p],b=d[1-p],_=[i,s],S=_[p].get("type"),k=_[1-p].get("type"),D=t.data;if(D&&o){var O=[];Ce(D,function(V,q){var Z;Ue(V)?(Z=V.slice(),V.unshift(q)):Ue(V.value)?((Z=Lt({},V)).value=Z.value.slice(),V.value.unshift(q)):Z=V,O.push(Z)}),t.data=O}var N=this.defaultValueDimensions,F=[{name:m,type:Tw(S),ordinalMeta:r,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:b,type:Tw(k),dimsDef:N.slice()}];return a(this,{coordDimensions:F,dimensionsCount:N.length+1,encodeDefaulter:dr(xn,F,this)})},n.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},n}(),_2=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],e.visualDrawType="stroke",e}return gt(t,n),t.type="series.boxplot",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},t}(Ka);na(_2,_I,!0);var LE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){var i=e.getData(),s=this.group,l=this._data;this._data||s.removeAll();var c="horizontal"===e.get("layout")?1:0;i.diff(l).add(function(d){if(i.hasValue(d)){var p=wI(i.getItemLayout(d),i,d,c,!0);i.setItemGraphicEl(d,p),s.add(p)}}).update(function(d,p){var m=l.getItemGraphicEl(p);if(i.hasValue(d)){var b=i.getItemLayout(d);m?(md(m),CS(b,m,i,d)):m=wI(b,i,d,c),s.add(m),i.setItemGraphicEl(d,m)}else s.remove(m)}).remove(function(d){var p=l.getItemGraphicEl(d);p&&s.remove(p)}).execute(),this._data=i},t.prototype.remove=function(e){var r=this.group,o=this._data;this._data=null,o&&o.eachItemGraphicEl(function(i){i&&r.remove(i)})},t.type="boxplot",t}($a),NE=function(){},BE=function(n){function t(e){var r=n.call(this,e)||this;return r.type="boxplotBoxPath",r}return gt(t,n),t.prototype.getDefaultShape=function(){return new NE},t.prototype.buildPath=function(e,r){var o=r.points,i=0;for(e.moveTo(o[i][0],o[i][1]),i++;i<4;i++)e.lineTo(o[i][0],o[i][1]);for(e.closePath();i<o.length;i++)e.moveTo(o[i][0],o[i][1]),i++,e.lineTo(o[i][0],o[i][1])},t}(Go);function wI(n,t,e,r,o){var i=n.ends,s=new BE({shape:{points:o?zE(i,r,n):i}});return CS(n,s,t,e,o),s}function CS(n,t,e,r,o){(0,Gg[o?"initProps":"updateProps"])(t,{shape:{points:n.ends}},e.hostModel,r),t.useStyle(e.getItemVisual(r,"style")),t.style.strokeNoScale=!0,t.z2=100;var s=e.getItemModel(r),l=s.getModel("emphasis");kl(t,s),vu(t,l.get("focus"),l.get("blurScope"),l.get("disabled"))}function zE(n,t,e){return mt(n,function(r){return(r=r.slice())[t]=e.initBaseline,r})}var SM=Ce;function Xy(n){var r,o,t=(r=[],o=[],n.eachSeriesByType("boxplot",function(i){var s=i.getBaseAxis(),l=Ir(o,s);l<0&&(o[l=o.length]=s,r[l]={axis:s,seriesModels:[]}),r[l].seriesModels.push(i)}),r);SM(t,function(e){var r=e.seriesModels;r.length&&(function(o){var i,s=o.axis,l=o.seriesModels,c=l.length,d=o.boxWidthList=[],p=o.boxOffsetList=[],m=[];if("category"===s.type)i=s.getBandWidth();else{var b=0;SM(l,function(N){b=Math.max(b,N.getData().count())});var _=s.getExtent();i=Math.abs(_[1]-_[0])/b}SM(l,function(N){var F=N.get("boxWidth");Ue(F)||(F=[F,F]),m.push([qn(F[0],i)||0,qn(F[1],i)||0])});var S=.8*i-2,k=S/c*.3,D=(S-k*(c-1))/c,O=D/2-S/2;SM(l,function(N,F){p.push(O),O+=k+D,d.push(Math.min(Math.max(D,m[F][0]),m[F][1]))})}(e),SM(r,function(o,i){!function(s,l,c){var d=s.coordinateSystem,p=s.getData(),m=c/2,b="horizontal"===s.get("layout")?0:1,_=1-b,S=["x","y"],k=p.mapDimension(S[b]),D=p.mapDimensionsAll(S[_]);if(!(null==k||D.length<5))for(var O=0;O<p.count();O++){var N=p.get(k,O),F=he(N,D[2],O),V=he(N,D[0],O),q=he(N,D[1],O),Z=he(N,D[3],O),Q=he(N,D[4],O),re=[];ge(re,q,!1),ge(re,Z,!0),re.push(V,q,Q,Z),ve(re,V),ve(re,Q),ve(re,F),p.setItemLayout(O,{initBaseline:F[_],ends:re})}function he(_e,Ee,ze){var Ge,Xe=p.get(Ee,ze),$e=[];return $e[b]=_e,$e[_]=Xe,isNaN(_e)||isNaN(Xe)?Ge=[NaN,NaN]:(Ge=d.dataToPoint($e))[b]+=l,Ge}function ge(_e,Ee,ze){var Ge=Ee.slice(),Xe=Ee.slice();Ge[b]+=m,Xe[b]-=m,ze?_e.push(Ge,Xe):_e.push(Xe,Ge)}function ve(_e,Ee){var ze=Ee.slice(),Ge=Ee.slice();ze[b]-=m,Ge[b]+=m,_e.push(ze,Ge)}}(o,e.boxOffsetList[i],e.boxWidthList[i])}))})}var SI={type:"echarts:boxplot",transform:function(n){var t=n.upstream;t.sourceFormat!==He&&Ri("");var r=function(o,i){for(var s=[],l=[],c=(i=i||{}).boundIQR,d="none"===c||0===c,p=0;p<o.length;p++){var m=Ua(o[p].slice()),b=ul(m,.25),_=ul(m,.5),S=ul(m,.75),k=m[0],D=m[m.length-1],O=(null==c?1.5:c)*(S-b),N=d?k:Math.max(k,b-O),F=d?D:Math.min(D,S+O),V=i.itemNameFormatter,q=yr(V)?V({value:p}):ir(V)?V.replace("{value}",p+""):p+"";s.push([q,N,b,_,S,F]);for(var Z=0;Z<m.length;Z++){var Q=m[Z];(Q<N||Q>F)&&l.push([q,Q])}}return{boxData:s,outliers:l}}(t.getRawData(),n.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:r.boxData},{data:r.outliers}]}},FE=["color","borderColor"],AR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},t.prototype.incrementalPrepareRender=function(e,r,o){this._clear(),this._updateDrawMode(e)},t.prototype.incrementalRender=function(e,r,o,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(e,r):this._incrementalRenderNormal(e,r)},t.prototype.eachRendered=function(e){Tl(this._progressiveEls||this.group,e)},t.prototype._updateDrawMode=function(e){var r=e.pipelineContext.large;null!=this._isLargeDraw&&r===this._isLargeDraw||(this._isLargeDraw=r,this._clear())},t.prototype._renderNormal=function(e){var r=e.getData(),o=this._data,i=this.group,s=r.getLayout("isSimpleBox"),l=e.get("clip",!0),c=e.coordinateSystem,d=c.getArea&&c.getArea();this._data||i.removeAll(),r.diff(o).add(function(p){if(r.hasValue(p)){var m=r.getItemLayout(p);if(l&&HE(d,m))return;var b=CI(m,0,!0);as(b,{shape:{points:m.ends}},e,p),MI(b,r,p,s),i.add(b),r.setItemGraphicEl(p,b)}}).update(function(p,m){var b=o.getItemGraphicEl(m);if(r.hasValue(p)){var _=r.getItemLayout(p);l&&HE(d,_)?i.remove(b):(b?(mo(b,{shape:{points:_.ends}},e,p),md(b)):b=CI(_),MI(b,r,p,s),i.add(b),r.setItemGraphicEl(p,b))}else i.remove(b)}).remove(function(p){var m=o.getItemGraphicEl(p);m&&i.remove(m)}).execute(),this._data=r},t.prototype._renderLarge=function(e){this._clear(),Zy(e,this.group);var r=e.get("clip",!0)?I1(e.coordinateSystem,!1,e):null;r?this.group.setClipPath(r):this.group.removeClipPath()},t.prototype._incrementalRenderNormal=function(e,r){for(var o,i=r.getData(),s=i.getLayout("isSimpleBox");null!=(o=e.next());){var l=CI(i.getItemLayout(o));MI(l,i,o,s),l.incremental=!0,this.group.add(l),this._progressiveEls.push(l)}},t.prototype._incrementalRenderLarge=function(e,r){Zy(r,this.group,this._progressiveEls,!0)},t.prototype.remove=function(e){this._clear()},t.prototype._clear=function(){this.group.removeAll(),this._data=null},t.type="candlestick",t}($a),VE=function(){},IR=function(n){function t(e){var r=n.call(this,e)||this;return r.type="normalCandlestickBox",r}return gt(t,n),t.prototype.getDefaultShape=function(){return new VE},t.prototype.buildPath=function(e,r){var o=r.points;this.__simpleBox?(e.moveTo(o[4][0],o[4][1]),e.lineTo(o[6][0],o[6][1])):(e.moveTo(o[0][0],o[0][1]),e.lineTo(o[1][0],o[1][1]),e.lineTo(o[2][0],o[2][1]),e.lineTo(o[3][0],o[3][1]),e.closePath(),e.moveTo(o[4][0],o[4][1]),e.lineTo(o[5][0],o[5][1]),e.moveTo(o[6][0],o[6][1]),e.lineTo(o[7][0],o[7][1]))},t}(Go);function CI(n,t,e){var r=n.ends;return new IR({shape:{points:e?WE(r,n):r},z2:100})}function HE(n,t){for(var e=!0,r=0;r<t.ends.length;r++)if(n.contain(t.ends[r][0],t.ends[r][1])){e=!1;break}return e}function MI(n,t,e,r){var o=t.getItemModel(e);n.useStyle(t.getItemVisual(e,"style")),n.style.strokeNoScale=!0,n.__simpleBox=r,kl(n,o)}function WE(n,t){return mt(n,function(e){return(e=e.slice())[1]=t.initBaseline,e})}var GE=function(){},sh=function(n){function t(e){var r=n.call(this,e)||this;return r.type="largeCandlestickBox",r}return gt(t,n),t.prototype.getDefaultShape=function(){return new GE},t.prototype.buildPath=function(e,r){for(var o=r.points,i=0;i<o.length;)if(this.__sign===o[i++]){var s=o[i++];e.moveTo(s,o[i++]),e.lineTo(s,o[i++])}else i+=3},t}(Go);function Zy(n,t,e,r){var o=n.getData().getLayout("largePoints"),i=new sh({shape:{points:o},__sign:1,ignoreCoarsePointer:!0});t.add(i);var s=new sh({shape:{points:o},__sign:-1,ignoreCoarsePointer:!0});t.add(s);var l=new sh({shape:{points:o},__sign:0,ignoreCoarsePointer:!0});t.add(l),kI(1,i,n),kI(-1,s,n),kI(0,l,n),r&&(i.incremental=!0,s.incremental=!0),e&&e.push(i,s)}function kI(n,t,e,r){var o=e.get(["itemStyle",n>0?"borderColor":"borderColor0"])||e.get(["itemStyle",n>0?"color":"color0"]);0===n&&(o=e.get(["itemStyle","borderColorDoji"]));var i=e.getModel("itemStyle").getItemStyle(FE);t.useStyle(i),t.style.fill=null,t.style.stroke=o}var UE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],e}return gt(t,n),t.prototype.getShadowDim=function(){return"open"},t.prototype.brushSelector=function(e,r,o){var i=r.getItemLayout(e);return i&&o.rect(i.brushRect)},t.type="series.candlestick",t.dependencies=["xAxis","yAxis","grid"],t.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},t}(Ka);function jE(n){n&&Ue(n.series)&&Ce(n.series,function(t){wr(t)&&"k"===t.type&&(t.type="candlestick")})}na(UE,_I,!0);var xT=["itemStyle","borderColor"],w2=["itemStyle","borderColor0"],OR=["itemStyle","borderColorDoji"],S_=["itemStyle","color"],ER=["itemStyle","color0"],PR={seriesType:"candlestick",plan:O0(),performRawSeries:!0,reset:function(n,t){function e(o,i){return i.get(o>0?S_:ER)}function r(o,i){return i.get(0===o?OR:o>0?xT:w2)}if(!t.isSeriesFiltered(n))return!n.pipelineContext.large&&{progress:function(o,i){for(var s;null!=(s=o.next());){var l=i.getItemModel(s),c=i.getItemLayout(s).sign,d=l.getItemStyle();d.fill=e(c,l),d.stroke=r(c,l)||d.fill,Lt(i.ensureUniqueItemVisual(s,"style"),d)}}}}},yp={seriesType:"candlestick",plan:O0(),reset:function(n){var m,b,_,S,k,D,O,N,t=n.coordinateSystem,e=n.getData(),r=(b=e,k="category"===(S=(m=n).getBaseAxis()).type?S.getBandWidth():(_=S.getExtent(),Math.abs(_[1]-_[0])/b.count()),D=qn(un(m.get("barMaxWidth"),k),k),O=qn(un(m.get("barMinWidth"),1),k),null!=(N=m.get("barWidth"))?qn(N,k):Math.max(Math.min(k/2,D),O)),o=["x","y"],i=e.getDimensionIndex(e.mapDimension(o[0])),s=mt(e.mapDimensionsAll(o[1]),e.getDimensionIndex,e),l=s[0],c=s[1],d=s[2],p=s[3];if(e.setLayout({candleWidth:r,isSimpleBox:r<=1.3}),!(i<0||s.length<4))return{progress:n.pipelineContext.large?function(m,b){for(var _,S,k=fm(4*m.count),D=0,O=[],N=[],F=b.getStore(),V=!!n.get(["itemStyle","borderColorDoji"]);null!=(S=m.next());){var q=F.get(i,S),Z=F.get(l,S),Q=F.get(c,S),re=F.get(d,S),he=F.get(p,S);isNaN(q)||isNaN(re)||isNaN(he)?(k[D++]=NaN,D+=3):(k[D++]=S2(F,S,Z,Q,c,V),O[0]=q,O[1]=re,_=t.dataToPoint(O,null,N),k[D++]=_?_[0]:NaN,k[D++]=_?_[1]:NaN,O[1]=he,_=t.dataToPoint(O,null,N),k[D++]=_?_[1]:NaN)}b.setLayout("largePoints",k)}:function(m,b){for(var _,S=b.getStore();null!=(_=m.next());){var k=S.get(i,_),D=S.get(l,_),O=S.get(c,_),N=S.get(d,_),F=S.get(p,_),V=Math.min(D,O),q=Math.max(D,O),Z=_e(V,k),Q=_e(q,k),re=_e(N,k),he=_e(F,k),ge=[];Ee(ge,Q,0),Ee(ge,Z,1),ge.push(Ge(he),Ge(Q),Ge(re),Ge(Z));var ve=!!b.getItemModel(_).get(["itemStyle","borderColorDoji"]);b.setItemLayout(_,{sign:S2(S,_,D,O,c,ve),initBaseline:D>O?Q[1]:Z[1],ends:ge,brushRect:(Xe=N,$e=F,nt=k,yt=void 0,_t=void 0,yt=_e(Xe,nt),_t=_e($e,nt),yt[0]-=r/2,_t[0]-=r/2,{x:yt[0],y:yt[1],width:r,height:_t[1]-yt[1]})})}var Xe,$e,nt,yt,_t;function _e(Xe,$e){var nt=[];return nt[0]=$e,nt[1]=Xe,isNaN($e)||isNaN(Xe)?[NaN,NaN]:t.dataToPoint(nt)}function Ee(Xe,$e,nt){var yt=$e.slice(),_t=$e.slice();yt[0]=Qm(yt[0]+r/2,1,!1),_t[0]=Qm(_t[0]-r/2,1,!0),nt?Xe.push(yt,_t):Xe.push(_t,yt)}function Ge(Xe){return Xe[0]=Qm(Xe[0],1),Xe}}}}};function S2(n,t,e,r,o,i){return e>r?-1:e<r?1:i?0:t>0?n.get(o,t-1)<=r?1:-1:1}function Hv(n,t){var e=t.rippleEffectColor||t.color;n.eachChild(function(r){r.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?e:null,fill:"fill"===t.brushType?e:null}})})}var La=function(n){function t(e,r){var o=n.call(this)||this,i=new hg(e,r),s=new xo;return o.add(i),o.add(s),o.updateData(e,r),o}return gt(t,n),t.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},t.prototype.startEffectAnimation=function(e){for(var r=e.symbolType,o=e.color,i=e.rippleNumber,s=this.childAt(1),l=0;l<i;l++){var c=Dl(r,-1,-1,2,2,o);c.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var d=-l/i*e.period+e.effectOffset;c.animate("",!0).when(e.period,{scaleX:e.rippleScale/2,scaleY:e.rippleScale/2}).delay(d).start(),c.animateStyle(!0).when(e.period,{opacity:0}).delay(d).start(),s.add(c)}Hv(s,e)},t.prototype.updateEffectAnimation=function(e){for(var r=this._effectCfg,o=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],s=0;s<i.length;s++){var l=i[s];if(r[l]!==e[l])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}Hv(o,e)},t.prototype.highlight=function(){pd(this)},t.prototype.downplay=function(){Ah(this)},t.prototype.getSymbolType=function(){var e=this.childAt(0);return e&&e.getSymbolType()},t.prototype.updateData=function(e,r){var o=this,i=e.hostModel;this.childAt(0).updateData(e,r);var s=this.childAt(1),l=e.getItemModel(r),c=e.getItemVisual(r,"symbol"),d=e1(e.getItemVisual(r,"symbolSize")),p=e.getItemVisual(r,"style"),m=p&&p.fill,b=l.getModel("emphasis");s.setScale(d),s.traverse(function(D){D.setStyle("fill",m)});var _=t1(e.getItemVisual(r,"symbolOffset"),d);_&&(s.x=_[0],s.y=_[1]);var S=e.getItemVisual(r,"symbolRotate");s.rotation=(S||0)*Math.PI/180||0;var k={};k.showEffectOn=i.get("showEffectOn"),k.rippleScale=l.get(["rippleEffect","scale"]),k.brushType=l.get(["rippleEffect","brushType"]),k.period=1e3*l.get(["rippleEffect","period"]),k.effectOffset=r/e.count(),k.z=i.getShallow("z")||0,k.zlevel=i.getShallow("zlevel")||0,k.symbolType=c,k.color=m,k.rippleEffectColor=l.get(["rippleEffect","color"]),k.rippleNumber=l.get(["rippleEffect","number"]),"render"===k.showEffectOn?(this._effectCfg?this.updateEffectAnimation(k):this.startEffectAnimation(k),this._effectCfg=k):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(D){"emphasis"===D?"render"!==k.showEffectOn&&o.startEffectAnimation(k):"normal"===D&&"render"!==k.showEffectOn&&o.stopEffectAnimation()}),this._effectCfg=k,vu(this,b.get("focus"),b.get("blurScope"),b.get("disabled"))},t.prototype.fadeOut=function(e){e&&e()},t}(xo),MS=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(){this._symbolDraw=new lb(La)},t.prototype.render=function(e,r,o){var i=e.getData(),s=this._symbolDraw;s.updateData(i,{clipShape:this._getClipShape(e)}),this.group.add(s.group)},t.prototype._getClipShape=function(e){var r=e.coordinateSystem,o=r&&r.getArea&&r.getArea();return e.get("clip",!0)?o:null},t.prototype.updateTransform=function(e,r,o){var i=e.getData();this.group.dirty();var s=Uy("").reset(e,r,o);s.progress&&s.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},t.prototype._updateGroupTransform=function(e){var r=e.coordinateSystem;r&&r.getRoamTransform&&(this.group.transform=Ga(r.getRoamTransform()),this.group.decomposeTransform())},t.prototype.remove=function(e,r){this._symbolDraw&&this._symbolDraw.remove(!0)},t.type="effectScatter",t}($a),C2=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e}return gt(t,n),t.prototype.getInitialData=function(e,r){return lm(null,this,{useEncodeDefaulter:!0})},t.prototype.brushSelector=function(e,r,o){return o.point(r.getItemLayout(e))},t.type="series.effectScatter",t.dependencies=["grid","polar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},t}(Ka),TI=function(n){function t(e,r,o){var i=n.call(this)||this;return i.add(i.createLine(e,r,o)),i._updateEffectSymbol(e,r),i}return gt(t,n),t.prototype.createLine=function(e,r,o){return new mT(e,r,o)},t.prototype._updateEffectSymbol=function(e,r){var o=e.getItemModel(r).getModel("effect"),i=o.get("symbolSize"),s=o.get("symbol");Ue(i)||(i=[i,i]);var l=e.getItemVisual(r,"style"),c=o.get("color")||l&&l.stroke,d=this.childAt(1);this._symbolType!==s&&(this.remove(d),(d=Dl(s,-.5,-.5,1,1,c)).z2=100,d.culling=!0,this.add(d)),d&&(d.setStyle("shadowColor",c),d.setStyle(o.getItemStyle(["color"])),d.scaleX=i[0],d.scaleY=i[1],d.setColor(c),this._symbolType=s,this._symbolScale=i,this._updateEffectAnimation(e,o,r))},t.prototype._updateEffectAnimation=function(e,r,o){var i=this.childAt(1);if(i){var s=e.getItemLayout(o),l=1e3*r.get("period"),c=r.get("loop"),d=r.get("roundTrip"),p=r.get("constantSpeed"),m=Hn(r.get("delay"),function(_){return _/e.count()*l/3});if(i.ignore=!0,this._updateAnimationPoints(i,s),p>0&&(l=this._getLineLength(i)/p*1e3),l!==this._period||c!==this._loop||d!==this._roundTrip){i.stopAnimation();var b=void 0;b=yr(m)?m(o):m,i.__t>0&&(b=-l*i.__t),this._animateSymbol(i,l,b,c,d)}this._period=l,this._loop=c,this._roundTrip=d}},t.prototype._animateSymbol=function(e,r,o,i,s){if(r>0){e.__t=0;var l=this,c=e.animate("",i).when(s?2*r:r,{__t:s?2:1}).delay(o).during(function(){l._updateSymbolPosition(e)});i||c.done(function(){l.remove(e)}),c.start()}},t.prototype._getLineLength=function(e){return Fn(e.__p1,e.__cp1)+Fn(e.__cp1,e.__p2)},t.prototype._updateAnimationPoints=function(e,r){e.__p1=r[0],e.__p2=r[1],e.__cp1=r[2]||[(r[0][0]+r[1][0])/2,(r[0][1]+r[1][1])/2]},t.prototype.updateData=function(e,r,o){this.childAt(0).updateData(e,r,o),this._updateEffectSymbol(e,r)},t.prototype._updateSymbolPosition=function(e){var r=e.__p1,o=e.__p2,i=e.__cp1,s=e.__t<1?e.__t:2-e.__t,l=[e.x,e.y],c=l.slice(),d=Sa,p=wl;l[0]=d(r[0],i[0],o[0],s),l[1]=d(r[1],i[1],o[1],s);var m=e.__t<1?p(r[0],i[0],o[0],s):p(o[0],i[0],r[0],1-s),b=e.__t<1?p(r[1],i[1],o[1],s):p(o[1],i[1],r[1],1-s);e.rotation=-Math.atan2(b,m)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==e.__lastT&&e.__lastT<e.__t?(e.scaleY=1.05*Fn(c,l),1===s&&(l[0]=c[0]+(l[0]-c[0])/2,l[1]=c[1]+(l[1]-c[1])/2)):e.scaleY=1===e.__lastT?2*Fn(r,l):this._symbolScale[1]),e.__lastT=e.__t,e.ignore=!1,e.x=l[0],e.y=l[1]},t.prototype.updateLayout=function(e,r){this.childAt(0).updateLayout(e,r);var o=e.getItemModel(r).getModel("effect");this._updateEffectAnimation(e,o,r)},t}(xo),M2=function(n){function t(e,r,o){var i=n.call(this)||this;return i._createPolyline(e,r,o),i}return gt(t,n),t.prototype._createPolyline=function(e,r,o){var i=e.getItemLayout(r),s=new Qu({shape:{points:i}});this.add(s),this._updateCommonStl(e,r,o)},t.prototype.updateData=function(e,r,o){var i=e.hostModel;mo(this.childAt(0),{shape:{points:e.getItemLayout(r)}},i,r),this._updateCommonStl(e,r,o)},t.prototype._updateCommonStl=function(e,r,o){var i=this.childAt(0),s=e.getItemModel(r),l=o&&o.emphasisLineStyle,c=o&&o.focus,d=o&&o.blurScope,p=o&&o.emphasisDisabled;if(!o||e.hasItemOption){var m=s.getModel("emphasis");l=m.getModel("lineStyle").getLineStyle(),p=m.get("disabled"),c=m.get("focus"),d=m.get("blurScope")}i.useStyle(e.getItemVisual(r,"style")),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=l,vu(this,c,d,p)},t.prototype.updateLayout=function(e,r){this.childAt(0).setShape("points",e.getItemLayout(r))},t}(xo),DI=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return gt(t,n),t.prototype.createLine=function(e,r,o){return new M2(e,r,o)},t.prototype._updateAnimationPoints=function(e,r){this._points=r;for(var o=[0],i=0,s=1;s<r.length;s++)i+=Fn(r[s-1],r[s]),o.push(i);if(0!==i){for(s=0;s<o.length;s++)o[s]/=i;this._offsets=o,this._length=i}else this._length=0},t.prototype._getLineLength=function(){return this._length},t.prototype._updateSymbolPosition=function(e){var r=e.__t<1?e.__t:2-e.__t,o=this._points,i=this._offsets,s=o.length;if(i){var l,c=this._lastFrame;if(r<this._lastFramePercent){for(l=Math.min(c+1,s-1);l>=0&&!(i[l]<=r);l--);l=Math.min(l,s-2)}else{for(l=c;l<s&&!(i[l]>r);l++);l=Math.min(l-1,s-2)}var d=(r-i[l])/(i[l+1]-i[l]),p=o[l],m=o[l+1];e.x=p[0]*(1-d)+d*m[0],e.y=p[1]*(1-d)+d*m[1],e.rotation=-Math.atan2(e.__t<1?m[1]-p[1]:p[1]-m[1],e.__t<1?m[0]-p[0]:p[0]-m[0])-Math.PI/2,this._lastFrame=l,this._lastFramePercent=r,e.ignore=!1}},t}(TI),RR=function(){this.polyline=!1,this.curveness=0,this.segs=[]},AI=function(n){function t(e){var r=n.call(this,e)||this;return r._off=0,r.hoverDataIdx=-1,r}return gt(t,n),t.prototype.reset=function(){this.notClear=!1,this._off=0},t.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},t.prototype.getDefaultShape=function(){return new RR},t.prototype.buildPath=function(e,r){var o,i=r.segs,s=r.curveness;if(r.polyline)for(o=this._off;o<i.length;){var l=i[o++];if(l>0){e.moveTo(i[o++],i[o++]);for(var c=1;c<l;c++)e.lineTo(i[o++],i[o++])}}else for(o=this._off;o<i.length;){var d=i[o++],p=i[o++],m=i[o++],b=i[o++];e.moveTo(d,p),s>0?e.quadraticCurveTo((d+m)/2-(p-b)*s,(p+b)/2-(m-d)*s,m,b):e.lineTo(m,b)}this.incremental&&(this._off=o,this.notClear=!0)},t.prototype.findDataIndex=function(e,r){var o=this.shape,i=o.segs,s=o.curveness,l=this.style.lineWidth;if(o.polyline)for(var c=0,d=0;d<i.length;){var p=i[d++];if(p>0)for(var m=i[d++],b=i[d++],_=1;_<p;_++)if(Ch(m,b,S=i[d++],k=i[d++],l,e,r))return c;c++}else for(c=0,d=0;d<i.length;){m=i[d++],b=i[d++];var S=i[d++],k=i[d++];if(s>0){if(Jv(m,b,(m+S)/2-(b-k)*s,(b+k)/2-(S-m)*s,S,k,l,e,r))return c}else if(Ch(m,b,S,k,l,e,r))return c;c++}return-1},t.prototype.contain=function(e,r){var o=this.transformCoordToLocal(e,r);return this.getBoundingRect().contain(e=o[0],r=o[1])?(this.hoverDataIdx=this.findDataIndex(e,r))>=0:(this.hoverDataIdx=-1,!1)},t.prototype.getBoundingRect=function(){var e=this._rect;if(!e){for(var r=this.shape.segs,o=1/0,i=1/0,s=-1/0,l=-1/0,c=0;c<r.length;){var d=r[c++],p=r[c++];o=Math.min(d,o),s=Math.max(d,s),i=Math.min(p,i),l=Math.max(p,l)}e=this._rect=new Io(o,i,s,l)}return e},t}(Go),LR=function(){function n(){this.group=new xo}return n.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},n.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},n.prototype.incrementalUpdate=function(t,e){var r=this._newAdded[0],o=e.getLayout("linesPoints"),i=r&&r.shape.segs;if(i&&i.length<2e4){var s=i.length,l=new Float32Array(s+o.length);l.set(i),l.set(o,s),r.setShape({segs:l})}else{this._newAdded=[];var c=this._create();c.incremental=!0,c.setShape({segs:o}),this._setCommon(c,e),c.__startIndex=t.start}},n.prototype.remove=function(){this._clear()},n.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},n.prototype._create=function(){var t=new AI({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},n.prototype._setCommon=function(t,e,r){var o=e.hostModel;t.setShape({polyline:o.get("polyline"),curveness:o.get(["lineStyle","curveness"])}),t.useStyle(o.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var i=e.getVisual("style");i&&i.stroke&&t.setStyle("stroke",i.stroke),t.setStyle("fill",null);var s=So(t);s.seriesIndex=o.seriesIndex,t.on("mousemove",function(l){s.dataIndex=null;var c=t.hoverDataIdx;c>0&&(s.dataIndex=c+t.__startIndex)})},n.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},n}(),II={seriesType:"lines",plan:O0(),reset:function(n){var t=n.coordinateSystem;if(t){var e=n.get("polyline"),r=n.pipelineContext.large;return{progress:function(o,i){var s=[];if(r){var l=void 0,c=o.end-o.start;if(e){for(var d=0,p=o.start;p<o.end;p++)d+=n.getLineCoordsCount(p);l=new Float32Array(c+2*d)}else l=new Float32Array(4*c);var m=0,b=[];for(p=o.start;p<o.end;p++){var _=n.getLineCoords(p,s);e&&(l[m++]=_);for(var S=0;S<_;S++)b=t.dataToPoint(s[S],!1,b),l[m++]=b[0],l[m++]=b[1]}i.setLayout("linesPoints",l)}else for(p=o.start;p<o.end;p++){var k=i.getItemModel(p),D=(_=n.getLineCoords(p,s),[]);if(e)for(var O=0;O<_;O++)D.push(t.dataToPoint(s[O]));else{D[0]=t.dataToPoint(s[0]),D[1]=t.dataToPoint(s[1]);var N=k.get(["lineStyle","curveness"]);+N&&(D[2]=[(D[0][0]+D[1][0])/2-(D[0][1]-D[1][1])*N,(D[0][1]+D[1][1])/2-(D[1][0]-D[0][0])*N])}i.setItemLayout(p,D)}}}}}},YE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){var i=e.getData(),s=this._updateLineDraw(i,e),l=e.get("zlevel"),c=e.get(["effect","trailLength"]),d=o.getZr(),p="svg"===d.painter.getType();p||d.painter.getLayer(l).clear(!0),null==this._lastZlevel||p||d.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&c>0&&(p||d.configLayer(l,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(c/10+.9,1),0)})),s.updateData(i);var m=e.get("clip",!0)&&I1(e.coordinateSystem,!1,e);m?this.group.setClipPath(m):this.group.removeClipPath(),this._lastZlevel=l,this._finished=!0},t.prototype.incrementalPrepareRender=function(e,r,o){var i=e.getData();this._updateLineDraw(i,e).incrementalPrepareUpdate(i),this._clearLayer(o),this._finished=!1},t.prototype.incrementalRender=function(e,r,o){this._lineDraw.incrementalUpdate(e,r.getData()),this._finished=e.end===r.getData().count()},t.prototype.eachRendered=function(e){this._lineDraw&&this._lineDraw.eachRendered(e)},t.prototype.updateTransform=function(e,r,o){var i=e.getData(),s=e.pipelineContext;if(!this._finished||s.large||s.progressiveRender)return{update:!0};var l=II.reset(e,r,o);l.progress&&l.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(o)},t.prototype._updateLineDraw=function(e,r){var o=this._lineDraw,i=this._showEffect(r),s=!!r.get("polyline"),l=r.pipelineContext.large;return o&&i===this._hasEffet&&s===this._isPolyline&&l===this._isLargeDraw||(o&&o.remove(),o=this._lineDraw=l?new LR:new o2(s?i?DI:M2:i?TI:mT),this._hasEffet=i,this._isPolyline=s,this._isLargeDraw=l),this.group.add(o.group),o},t.prototype._showEffect=function(e){return!!e.get(["effect","show"])},t.prototype._clearLayer=function(e){var r=e.getZr();"svg"===r.painter.getType()||null==this._lastZlevel||r.painter.getLayer(this._lastZlevel).clear(!0)},t.prototype.remove=function(e,r){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(r)},t.prototype.dispose=function(e,r){this.remove(e,r)},t.type="lines",t}($a),OI="undefined"==typeof Uint32Array?Array:Uint32Array,qE="undefined"==typeof Float64Array?Array:Float64Array;function _T(n){var t=n.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(n.data=mt(t,function(e){var r={coords:[e[0].coord,e[1].coord]};return e[0].name&&(r.fromName=e[0].name),e[1].name&&(r.toName=e[1].name),la([r,e[0],e[1]])}))}var NR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.visualStyleAccessPath="lineStyle",e.visualDrawType="stroke",e}return gt(t,n),t.prototype.init=function(e){e.data=e.data||[],_T(e);var r=this._processFlatCoordsArray(e.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(e.data=new Float32Array(r.count)),n.prototype.init.apply(this,arguments)},t.prototype.mergeOption=function(e){if(_T(e),e.data){var r=this._processFlatCoordsArray(e.data);this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset,r.flatCoords&&(e.data=new Float32Array(r.count))}n.prototype.mergeOption.apply(this,arguments)},t.prototype.appendData=function(e){var r=this._processFlatCoordsArray(e.data);r.flatCoords&&(this._flatCoords?(this._flatCoords=$(this._flatCoords,r.flatCoords),this._flatCoordsOffset=$(this._flatCoordsOffset,r.flatCoordsOffset)):(this._flatCoords=r.flatCoords,this._flatCoordsOffset=r.flatCoordsOffset),e.data=new Float32Array(r.count)),this.getRawData().appendData(e.data)},t.prototype._getCoordsFromItemModel=function(e){var r=this.getData().getItemModel(e);return r.option instanceof Array?r.option:r.getShallow("coords")},t.prototype.getLineCoordsCount=function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},t.prototype.getLineCoords=function(e,r){if(this._flatCoordsOffset){for(var o=this._flatCoordsOffset[2*e],i=this._flatCoordsOffset[2*e+1],s=0;s<i;s++)r[s]=r[s]||[],r[s][0]=this._flatCoords[o+2*s],r[s][1]=this._flatCoords[o+2*s+1];return i}var l=this._getCoordsFromItemModel(e);for(s=0;s<l.length;s++)r[s]=r[s]||[],r[s][0]=l[s][0],r[s][1]=l[s][1];return l.length},t.prototype._processFlatCoordsArray=function(e){var r=0;if(this._flatCoords&&(r=this._flatCoords.length),gr(e[0])){for(var o=e.length,i=new OI(o),s=new qE(o),l=0,c=0,d=0,p=0;p<o;){d++;var m=e[p++];i[c++]=l+r,i[c++]=m;for(var b=0;b<m;b++){var _=e[p++],S=e[p++];s[l++]=_,s[l++]=S}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,c),flatCoords:s,count:d}}return{flatCoordsOffset:null,flatCoords:null,count:e.length}},t.prototype.getInitialData=function(e,r){var o=new Jc(["value"],this);return o.hasItemOption=!1,o.initData(e.data,[],function(i,s,l,c){if(i instanceof Array)return NaN;o.hasItemOption=!0;var d=i.value;return null!=d?d instanceof Array?d[c]:d:void 0}),o},t.prototype.formatTooltip=function(e,r,o){var i=this.getData().getItemModel(e),s=i.get("name");if(s)return s;var l=i.get("fromName"),c=i.get("toName"),d=[];return null!=l&&d.push(l),null!=c&&d.push(c),Dc("nameValue",{name:d.join(" > ")})},t.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},t.prototype.getProgressive=function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},t.prototype.getProgressiveThreshold=function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},t.prototype.getZLevelKey=function(){var e=this.getModel("effect"),r=e.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:e.get("show")&&r>0?r+"":""},t.type="series.lines",t.dependencies=["grid","polar","geo","calendar"],t.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},t}(Ka);function k2(n){return n instanceof Array||(n=[n,n]),n}var BR={seriesType:"lines",reset:function(n){var t=k2(n.get("symbol")),e=k2(n.get("symbolSize")),r=n.getData();return r.setVisual("fromSymbol",t&&t[0]),r.setVisual("toSymbol",t&&t[1]),r.setVisual("fromSymbolSize",e&&e[0]),r.setVisual("toSymbolSize",e&&e[1]),{dataEach:r.hasItemOption?function(o,i){var s=o.getItemModel(i),l=k2(s.getShallow("symbol",!0)),c=k2(s.getShallow("symbolSize",!0));l[0]&&o.setItemVisual(i,"fromSymbol",l[0]),l[1]&&o.setItemVisual(i,"toSymbol",l[1]),c[0]&&o.setItemVisual(i,"fromSymbolSize",c[0]),c[1]&&o.setItemVisual(i,"toSymbolSize",c[1])}:null}}},zR=function(){function n(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=Pr.createCanvas();this.canvas=t}return n.prototype.update=function(t,e,r,o,i,s){var l=this._getBrush(),c=this._getGradient(i,"inRange"),d=this._getGradient(i,"outOfRange"),p=this.pointSize+this.blurSize,m=this.canvas,b=m.getContext("2d"),_=t.length;m.width=e,m.height=r;for(var S=0;S<_;++S){var k=t[S],D=k[0],O=k[1],N=o(k[2]);b.globalAlpha=N,b.drawImage(l,D-p,O-p)}if(!m.width||!m.height)return m;for(var F=b.getImageData(0,0,m.width,m.height),V=F.data,q=0,Z=V.length,Q=this.minOpacity,re=this.maxOpacity-Q;q<Z;){N=V[q+3]/256;var he=4*Math.floor(255*N);if(N>0){var ge=s(N)?c:d;N>0&&(N=N*re+Q),V[q++]=ge[he],V[q++]=ge[he+1],V[q++]=ge[he+2],V[q++]=ge[he+3]*N*256}else q+=4}return b.putImageData(F,0,0),m},n.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=Pr.createCanvas()),e=this.pointSize+this.blurSize,r=2*e;t.width=r,t.height=r;var o=t.getContext("2d");return o.clearRect(0,0,r,r),o.shadowOffsetX=r,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-e,e,this.pointSize,0,2*Math.PI,!0),o.closePath(),o.fill(),t},n.prototype._getGradient=function(t,e){for(var r=this._gradientPixels,o=r[e]||(r[e]=new Uint8ClampedArray(1024)),i=[0,0,0,0],s=0,l=0;l<256;l++)t[e](l/255,!0,i),o[s++]=i[0],o[s++]=i[1],o[s++]=i[2],o[s++]=i[3];return o},n}();function XE(n){var t=n.dimensions;return"lng"===t[0]&&"lat"===t[1]}var FR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){var i;r.eachComponent("visualMap",function(l){l.eachTargetSeries(function(c){c===e&&(i=l)})}),this._progressiveEls=null,this.group.removeAll();var s=e.coordinateSystem;"cartesian2d"===s.type||"calendar"===s.type?this._renderOnCartesianAndCalendar(e,o,0,e.getData().count()):XE(s)&&this._renderOnGeo(s,e,i,o)},t.prototype.incrementalPrepareRender=function(e,r,o){this.group.removeAll()},t.prototype.incrementalRender=function(e,r,o,i){var s=r.coordinateSystem;s&&(XE(s)?this.render(r,o,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(r,i,e.start,e.end,!0)))},t.prototype.eachRendered=function(e){Tl(this._progressiveEls||this.group,e)},t.prototype._renderOnCartesianAndCalendar=function(e,r,o,i,s){var l,c,d,p,m=e.coordinateSystem,b=fb(m,"cartesian2d");if(b){var _=m.getAxis("x"),S=m.getAxis("y");l=_.getBandWidth()+.5,c=S.getBandWidth()+.5,d=_.scale.getExtent(),p=S.scale.getExtent()}for(var k=this.group,D=e.getData(),O=e.getModel(["emphasis","itemStyle"]).getItemStyle(),N=e.getModel(["blur","itemStyle"]).getItemStyle(),F=e.getModel(["select","itemStyle"]).getItemStyle(),V=e.get(["itemStyle","borderRadius"]),q=gs(e),Z=e.getModel("emphasis"),Q=Z.get("focus"),re=Z.get("blurScope"),he=Z.get("disabled"),ge=b?[D.mapDimension("x"),D.mapDimension("y"),D.mapDimension("value")]:[D.mapDimension("time"),D.mapDimension("value")],ve=o;ve<i;ve++){var _e=void 0,Ee=D.getItemVisual(ve,"style");if(b){var ze=D.get(ge[0],ve),Ge=D.get(ge[1],ve);if(isNaN(D.get(ge[2],ve))||isNaN(ze)||isNaN(Ge)||ze<d[0]||ze>d[1]||Ge<p[0]||Ge>p[1])continue;var Xe=m.dataToPoint([ze,Ge]);_e=new bi({shape:{x:Xe[0]-l/2,y:Xe[1]-c/2,width:l,height:c},style:Ee})}else{if(isNaN(D.get(ge[1],ve)))continue;_e=new bi({z2:1,shape:m.dataToRect([D.get(ge[0],ve)]).contentShape,style:Ee})}if(D.hasItemOption){var $e=D.getItemModel(ve),nt=$e.getModel("emphasis");O=nt.getModel("itemStyle").getItemStyle(),N=$e.getModel(["blur","itemStyle"]).getItemStyle(),F=$e.getModel(["select","itemStyle"]).getItemStyle(),V=$e.get(["itemStyle","borderRadius"]),Q=nt.get("focus"),re=nt.get("blurScope"),he=nt.get("disabled"),q=gs($e)}_e.shape.r=V;var yt=e.getRawValue(ve),_t="-";yt&&null!=yt[2]&&(_t=yt[2]+""),ps(_e,q,{labelFetcher:e,labelDataIndex:ve,defaultOpacity:Ee.opacity,defaultText:_t}),_e.ensureState("emphasis").style=O,_e.ensureState("blur").style=N,_e.ensureState("select").style=F,vu(_e,Q,re,he),_e.incremental=s,s&&(_e.states.emphasis.hoverLayer=!0),k.add(_e),D.setItemGraphicEl(ve,_e),this._progressiveEls&&this._progressiveEls.push(_e)}},t.prototype._renderOnGeo=function(e,r,o,i){var s=o.targetVisuals.inRange,l=o.targetVisuals.outOfRange,c=r.getData(),d=this._hmLayer||this._hmLayer||new zR;d.blurSize=r.get("blurSize"),d.pointSize=r.get("pointSize"),d.minOpacity=r.get("minOpacity"),d.maxOpacity=r.get("maxOpacity");var p=e.getViewRect().clone(),m=e.getRoamTransform();p.applyTransform(m);var Q,re,he,b=Math.max(p.x,0),_=Math.max(p.y,0),S=Math.min(p.width+p.x,i.getWidth()),k=Math.min(p.height+p.y,i.getHeight()),D=S-b,O=k-_,N=[c.mapDimension("lng"),c.mapDimension("lat"),c.mapDimension("value")],F=c.mapArray(N,function(Q,re,he){var ge=e.dataToPoint([Q,re]);return ge[0]-=b,ge[1]-=_,ge.push(he),ge}),V=o.getExtent(),q="visualMap.continuous"===o.type?(re=[((re=o.option.range)[0]-(Q=V)[0])/(he=Q[1]-Q[0]),(re[1]-Q[0])/he],function(ge){return ge>=re[0]&&ge<=re[1]}):function(Q,re,he){var ge=Q[1]-Q[0],ve=(re=mt(re,function(Ee){return{interval:[(Ee.interval[0]-Q[0])/ge,(Ee.interval[1]-Q[0])/ge]}})).length,_e=0;return function(Ee){var ze;for(ze=_e;ze<ve;ze++)if((Ge=re[ze].interval)[0]<=Ee&&Ee<=Ge[1]){_e=ze;break}if(ze===ve)for(ze=_e-1;ze>=0;ze--){var Ge;if((Ge=re[ze].interval)[0]<=Ee&&Ee<=Ge[1]){_e=ze;break}}return ze>=0&&ze<ve&&he[ze]}}(V,o.getPieceList(),o.option.selected);d.update(F,D,O,s.color.getNormalizer(),{inRange:s.color.getColorMapper(),outOfRange:l.color.getColorMapper()},q);var Z=new fl({style:{width:D,height:O,x:b,y:_,image:d.canvas},silent:!0});this.group.add(Z)},t.type="heatmap",t}($a),VR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.getInitialData=function(e,r){return lm(null,this,{generateCoord:"value"})},t.prototype.preventIncremental=function(){var e=Ms.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},t.type="series.heatmap",t.dependencies=["grid","geo","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},t}(Ka),HR=["itemStyle","borderWidth"],EI=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],T2=new Bf,ZE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){var i=this.group,s=e.getData(),l=this._data,c=e.coordinateSystem,d=c.getBaseAxis().isHorizontal(),p=c.master.getRect(),m={ecSize:{width:o.getWidth(),height:o.getHeight()},seriesModel:e,coordSys:c,coordSysExtent:[[p.x,p.x+p.width],[p.y,p.y+p.height]],isHorizontal:d,valueDim:EI[+d],categoryDim:EI[1-+d]};return s.diff(l).add(function(b){if(s.hasValue(b)){var _=zI(s,b),S=PI(s,b,_,m),k=FI(s,m,S);s.setItemGraphicEl(b,k),i.add(k),WI(k,m,S)}}).update(function(b,_){var N,F,V,S=l.getItemGraphicEl(_);if(s.hasValue(b)){var k=zI(s,b),D=PI(s,b,k,m),O=HI(s,D);S&&O!==S.__pictorialShapeStr&&(i.remove(S),s.setItemGraphicEl(b,null),S=null),S?(F=m,mo((N=S).__pictorialBundle,{x:(V=D).bundlePosition[0],y:V.bundlePosition[1]},V.animationModel,V.dataIndex),V.symbolRepeat?A2(N,F,V,!0):LI(N,0,V,!0),NI(N,V,!0),BI(N,F,V,!0)):S=FI(s,m,D,!0),s.setItemGraphicEl(b,S),S.__pictorialSymbolMeta=D,i.add(S),WI(S,m,D)}else i.remove(S)}).remove(function(b){var _=l.getItemGraphicEl(b);_&&VI(l,b,_.__pictorialSymbolMeta.animationModel,_)}).execute(),this._data=s,this.group},t.prototype.remove=function(e,r){var o=this.group,i=this._data;e.get("animation")?i&&i.eachItemGraphicEl(function(s){VI(i,So(s).dataIndex,e,s)}):o.removeAll()},t.type="pictorialBar",t}($a);function PI(n,t,e,r){var S,k,O,F,V,q,Z,Q,re,he,ge,ve,_e,o=n.getItemLayout(t),i=e.get("symbolRepeat"),s=e.get("symbolClip"),l=e.get("symbolPosition")||"start",c=(e.get("symbolRotate")||0)*Math.PI/180||0,d=e.get("symbolPatternSize")||2,p=e.isAnimationEnabled(),m={dataIndex:t,layout:o,itemModel:e,symbolType:n.getItemVisual(t,"symbol")||"circle",style:n.getItemVisual(t,"style"),symbolClip:s,symbolRepeat:i,symbolRepeatDirection:e.get("symbolRepeatDirection"),symbolPatternSize:d,rotation:c,animationModel:p?e:null,hoverScale:p&&e.get(["emphasis","scale"]),z2:e.getShallow("z",!0)||0};(function(S,k,D,O,N){var F,V=O.valueDim,q=S.get("symbolBoundingData"),Z=O.coordSys.getOtherAxis(O.coordSys.getBaseAxis()),Q=Z.toGlobalCoord(Z.dataToCoord(0)),re=1-+(D[V.wh]<=0);if(Ue(q)){var he=[D2(Z,q[0])-Q,D2(Z,q[1])-Q];he[1]<he[0]&&he.reverse(),F=he[re]}else F=null!=q?D2(Z,q)-Q:k?O.coordSysExtent[V.index][re]-Q:D[V.wh];N.boundingLength=F,k&&(N.repeatCutLength=D[V.wh]),N.pxSign=F>0?1:-1})(e,i,o,r,m),S=n,k=t,O=i,F=m.boundingLength,V=m.pxSign,q=d,Q=m,he=(Z=r).valueDim,ge=Z.categoryDim,ve=Math.abs(o[ge.wh]),(re=Ue(_e=S.getItemVisual(k,"symbolSize"))?_e.slice():null==_e?["100%","100%"]:[_e,_e])[ge.index]=qn(re[ge.index],ve),re[he.index]=qn(re[he.index],O?ve:Math.abs(F)),Q.symbolSize=re,(Q.symbolScale=[re[0]/q,re[1]/q])[he.index]*=(Z.isHorizontal?-1:1)*V,function(S,k,D,O,N){var F=S.get(HR)||0;F&&(T2.attr({scaleX:k[0],scaleY:k[1],rotation:D}),T2.updateTransform(),F/=T2.getLineScale(),F*=k[O.valueDim.index]),N.valueLineWidth=F||0}(e,m.symbolScale,c,r,m);var b=m.symbolSize,_=t1(e.get("symbolOffset"),b);return function(S,k,D,O,N,F,V,q,Z,Q,re,he){var ge=re.categoryDim,ve=re.valueDim,_e=he.pxSign,Ee=Math.max(k[ve.index]+q,0),ze=Ee;if(O){var Ge=Math.abs(Z),Xe=Hn(S.get("symbolMargin"),"15%")+"",$e=!1;Xe.lastIndexOf("!")===Xe.length-1&&($e=!0,Xe=Xe.slice(0,Xe.length-1));var nt=qn(Xe,k[ve.index]),yt=Math.max(Ee+2*nt,0),_t=$e?0:2*nt,Et=Ca(O),hn=Et?O:GI((Ge+_t)/yt);yt=Ee+2*(nt=(Ge-hn*Ee)/2/($e?hn:Math.max(hn-1,1))),_t=$e?0:2*nt,Et||"fixed"===O||(hn=Q?GI((Math.abs(Q)+_t)/yt):0),ze=hn*yt-_t,he.repeatTimes=hn,he.symbolMargin=nt}var Zn=_e*(ze/2),Rt=he.pathPosition=[];Rt[ge.index]=D[ge.wh]/2,Rt[ve.index]="start"===V?Zn:"end"===V?Z-Zn:Z/2,F&&(Rt[0]+=F[0],Rt[1]+=F[1]);var Mn=he.bundlePosition=[];Mn[ge.index]=D[ge.xy],Mn[ve.index]=D[ve.xy];var lr=he.barRectShape=Lt({},D);lr[ve.wh]=_e*Math.max(Math.abs(D[ve.wh]),Math.abs(Rt[ve.index]+Zn)),lr[ge.wh]=D[ge.wh];var ar=he.clipShape={};ar[ge.xy]=-D[ge.xy],ar[ge.wh]=re.ecSize[ge.wh],ar[ve.xy]=0,ar[ve.wh]=D[ve.wh]}(e,b,o,i,0,_,l,m.valueLineWidth,m.boundingLength,m.repeatCutLength,r,m),m}function D2(n,t){return n.toGlobalCoord(n.dataToCoord(n.scale.parse(t)))}function RI(n){var t=n.symbolPatternSize,e=Dl(n.symbolType,-t/2,-t/2,t,t);return e.attr({culling:!0}),"image"!==e.type&&e.setStyle({strokeNoScale:!0}),e}function A2(n,t,e,r){var o=n.__pictorialBundle,l=e.pathPosition,c=t.valueDim,d=e.repeatTimes||0,p=0,m=e.symbolSize[t.valueDim.index]+e.valueLineWidth+2*e.symbolMargin;for(I2(n,function(k){k.__pictorialAnimationIndex=p,k.__pictorialRepeatTimes=d,p<d?CM(k,null,S(p),e,r):CM(k,null,{scaleX:0,scaleY:0},e,r,function(){o.remove(k)}),p++});p<d;p++){var b=RI(e);b.__pictorialAnimationIndex=p,b.__pictorialRepeatTimes=d,o.add(b);var _=S(p);CM(b,{x:_.x,y:_.y,scaleX:0,scaleY:0},{scaleX:_.scaleX,scaleY:_.scaleY,rotation:_.rotation},e,r)}function S(k){var D=l.slice(),O=e.pxSign,N=k;return("start"===e.symbolRepeatDirection?O>0:O<0)&&(N=d-1-k),D[c.index]=m*(N-d/2+.5)+l[c.index],{x:D[0],y:D[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation}}}function LI(n,t,e,r){var o=n.__pictorialBundle,i=n.__pictorialMainPath;i?CM(i,null,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:e.symbolScale[0],scaleY:e.symbolScale[1],rotation:e.rotation},e,r):(i=n.__pictorialMainPath=RI(e),o.add(i),CM(i,{x:e.pathPosition[0],y:e.pathPosition[1],scaleX:0,scaleY:0,rotation:e.rotation},{scaleX:e.symbolScale[0],scaleY:e.symbolScale[1]},e,r))}function NI(n,t,e){var r=Lt({},t.barRectShape),o=n.__pictorialBarRect;o?CM(o,null,{shape:r},t,e):((o=n.__pictorialBarRect=new bi({z2:2,shape:r,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,n.add(o))}function BI(n,t,e,r){if(e.symbolClip){var o=n.__pictorialClipPath,i=Lt({},e.clipShape),s=t.valueDim,l=e.animationModel,c=e.dataIndex;if(o)mo(o,{shape:i},l,c);else{i[s.wh]=0,o=new bi({shape:i}),n.__pictorialBundle.setClipPath(o),n.__pictorialClipPath=o;var d={};d[s.wh]=e.clipShape[s.wh],Gg[r?"updateProps":"initProps"](o,{shape:d},l,c)}}}function zI(n,t){var e=n.getItemModel(t);return e.getAnimationDelayParams=KE,e.isAnimationEnabled=$E,e}function KE(n){return{index:n.__pictorialAnimationIndex,count:n.__pictorialRepeatTimes}}function $E(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function FI(n,t,e,r){var o=new xo,i=new xo;return o.add(i),o.__pictorialBundle=i,i.x=e.bundlePosition[0],i.y=e.bundlePosition[1],e.symbolRepeat?A2(o,t,e):LI(o,0,e),NI(o,e,r),BI(o,t,e,r),o.__pictorialShapeStr=HI(n,e),o.__pictorialSymbolMeta=e,o}function VI(n,t,e,r){var o=r.__pictorialBarRect;o&&o.removeTextContent();var i=[];I2(r,function(s){i.push(s)}),r.__pictorialMainPath&&i.push(r.__pictorialMainPath),r.__pictorialClipPath&&(e=null),Ce(i,function(s){$p(s,{scaleX:0,scaleY:0},e,t,function(){r.parent&&r.parent.remove(r)})}),n.setItemGraphicEl(t,null)}function HI(n,t){return[n.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function I2(n,t,e){Ce(n.__pictorialBundle.children(),function(r){r!==n.__pictorialBarRect&&t.call(e,r)})}function CM(n,t,e,r,o,i){t&&n.attr(t),r.symbolClip&&!o?e&&n.attr(e):e&&Gg[o?"updateProps":"initProps"](n,e,r.animationModel,r.dataIndex,i)}function WI(n,t,e){var r=e.dataIndex,o=e.itemModel,i=o.getModel("emphasis"),s=i.getModel("itemStyle").getItemStyle(),l=o.getModel(["blur","itemStyle"]).getItemStyle(),c=o.getModel(["select","itemStyle"]).getItemStyle(),d=o.getShallow("cursor"),p=i.get("focus"),m=i.get("blurScope"),b=i.get("scale");I2(n,function(S){if(S instanceof fl){var k=S.style;S.useStyle(Lt({image:k.image,x:k.x,y:k.y,width:k.width,height:k.height},e.style))}else S.useStyle(e.style);var D=S.ensureState("emphasis");D.style=s,b&&(D.scaleX=1.1*S.scaleX,D.scaleY=1.1*S.scaleY),S.ensureState("blur").style=l,S.ensureState("select").style=c,d&&(S.cursor=d),S.z2=e.z2});var _=t.valueDim.posDesc[+(e.boundingLength>0)];ps(n.__pictorialBarRect,gs(o),{labelFetcher:t.seriesModel,labelDataIndex:r,defaultText:qf(t.seriesModel.getData(),r),inheritColor:e.style.fill,defaultOpacity:e.style.opacity,defaultOutsidePosition:_}),vu(n,p,m,i.get("disabled"))}function GI(n){var t=Math.round(n);return Math.abs(n-t)<1e-4?t:Math.ceil(n)}var UI=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.hasSymbolVisual=!0,e.defaultSymbol="roundRect",e}return gt(t,n),t.prototype.getInitialData=function(e){return e.stack=null,n.prototype.getInitialData.apply(this,arguments)},t.type="series.pictorialBar",t.dependencies=["grid"],t.defaultOption=Oh(c_.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),t}(c_),JE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._layers=[],e}return gt(t,n),t.prototype.render=function(e,r,o){var i=e.getData(),s=this,l=this.group,c=e.getLayerSeries(),d=i.getLayout("layoutInfo"),p=d.rect,m=d.boundaryGap;function b(D){return D.name}l.x=0,l.y=p.y+m[0];var _=new lg(this._layersSeries||[],c,b,b),S=[];function k(D,O,N){var yt,_t,hn,F=s._layers;if("remove"!==D){for(var V,q,Z=[],Q=[],re=c[O].indices,he=0;he<re.length;he++){var ge=i.getItemLayout(re[he]),ve=ge.x,_e=ge.y0,Ee=ge.y;Z.push(ve,_e),Q.push(ve,_e+Ee),V=i.getItemVisual(re[he],"style")}var ze=i.getItemLayout(re[0]),Ge=e.getModel("label").get("margin"),Xe=e.getModel("emphasis");if("add"===D){var $e=S[O]=new xo;q=new pg({shape:{points:Z,stackedOnPoints:Q,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),$e.add(q),l.add($e),e.isAnimationEnabled()&&q.setClipPath((yt=q.getBoundingRect(),_t=e,as(hn=new bi({shape:{x:yt.x-10,y:yt.y-10,width:0,height:yt.height+20}}),{shape:{x:yt.x-50,width:yt.width+100,height:yt.height+20}},_t,function(){q.removeClipPath()}),hn))}else q=($e=F[N]).childAt(0),l.add($e),S[O]=$e,mo(q,{shape:{points:Z,stackedOnPoints:Q}},e),md(q);ps(q,gs(e),{labelDataIndex:re[he-1],defaultText:i.getName(re[he-1]),inheritColor:V.fill},{normal:{verticalAlign:"middle"}}),q.setTextConfig({position:null,local:!0});var nt=q.getTextContent();nt&&(nt.x=ze.x-Ge,nt.y=ze.y0+ze.y/2),q.useStyle(V),i.setItemGraphicEl(O,q),kl(q,e),vu(q,Xe.get("focus"),Xe.get("blurScope"),Xe.get("disabled"))}else l.remove(F[O])}_.add(De(k,this,"add")).update(De(k,this,"update")).remove(De(k,this,"remove")).execute(),this._layersSeries=c,this._layers=S},t.type="themeRiver",t}($a),QE=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e){n.prototype.init.apply(this,arguments),this.legendVisualProvider=new f(De(this.getData,this),De(this.getRawData,this))},t.prototype.fixData=function(e){var r=e.length,o={},i=zp(e,function(b){return o.hasOwnProperty(b[0]+"")||(o[b[0]+""]=-1),b[2]}),s=[];i.buckets.each(function(b,_){s.push({name:_,dataList:b})});for(var l=s.length,c=0;c<l;++c){for(var d=s[c].name,p=0;p<s[c].dataList.length;++p)o[m=s[c].dataList[p][0]+""]=c;for(var m in o)o.hasOwnProperty(m)&&o[m]!==c&&(o[m]=c,e[r]=[m,0,d],r++)}return e},t.prototype.getInitialData=function(e,r){for(var o=this.getReferringComponents("singleAxis",ll).models[0].get("type"),i=yo(e.data,function(_){return void 0!==_[2]}),s=this.fixData(i||[]),l=[],c=this.nameMap=Or(),d=0,p=0;p<s.length;++p)l.push(s[p][2]),c.get(s[p][2])||(c.set(s[p][2],d),d++);var m=_v(s,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Tw(o)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,b=new Jc(m,this);return b.initData(s),b},t.prototype.getLayerSeries=function(){for(var e=this.getData(),r=e.count(),o=[],i=0;i<r;++i)o[i]=i;var s=e.mapDimension("single"),l=zp(o,function(d){return e.get("name",d)}),c=[];return l.buckets.each(function(d,p){d.sort(function(m,b){return e.get(s,m)-e.get(s,b)}),c.push({name:p,indices:d})}),c},t.prototype.getAxisTooltipData=function(e,r,o){Ue(e)||(e=e?[e]:[]);for(var i,s=this.getData(),l=this.getLayerSeries(),c=[],d=l.length,p=0;p<d;++p){for(var m=Number.MAX_VALUE,b=-1,_=l[p].indices.length,S=0;S<_;++S){var k=s.get(e[0],l[p].indices[S]),D=Math.abs(k-r);D<=m&&(i=k,m=D,b=l[p].indices[S])}c.push(b)}return{dataIndices:c,nestestValue:i}},t.prototype.formatTooltip=function(e,r,o){var i=this.getData();return Dc("nameValue",{name:i.getName(e),value:i.get(i.mapDimension("value"),e)})},t.type="series.themeRiver",t.dependencies=["singleAxis"],t.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},t}(Ka);function WR(n,t){n.eachSeriesByType("themeRiver",function(e){var r=e.getData(),o=e.coordinateSystem,i={},s=o.getRect();i.rect=s;var l=e.get("boundaryGap"),c=o.getAxis();i.boundaryGap=l,"horizontal"===c.orient?(l[0]=qn(l[0],s.height),l[1]=qn(l[1],s.height),eP(r,e,s.height-l[0]-l[1])):(l[0]=qn(l[0],s.width),l[1]=qn(l[1],s.width),eP(r,e,s.width-l[0]-l[1])),r.setLayout("layoutInfo",i)})}function eP(n,t,e){if(n.count())for(var r,o=t.coordinateSystem,i=t.getLayerSeries(),s=n.mapDimension("single"),l=n.mapDimension("value"),c=mt(i,function(D){return mt(D.indices,function(O){var N=o.dataToPoint(n.get(s,O));return N[1]=n.get(l,O),N})}),d=function(D){for(var O=D.length,N=D[0].length,F=[],V=[],q=0,Z=0;Z<N;++Z){for(var Q=0,re=0;re<O;++re)Q+=D[re][Z][1];Q>q&&(q=Q),F.push(Q)}for(var he=0;he<N;++he)V[he]=(q-F[he])/2;q=0;for(var ge=0;ge<N;++ge){var ve=F[ge]+V[ge];ve>q&&(q=ve)}return{y0:V,max:q}}(c),p=d.y0,m=e/d.max,b=i.length,_=i[0].indices.length,S=0;S<_;++S){n.setItemLayout(i[0].indices[S],{layerIndex:0,x:c[0][S][0],y0:r=p[S]*m,y:c[0][S][1]*m});for(var k=1;k<b;++k)n.setItemLayout(i[k].indices[S],{layerIndex:k,x:c[k][S][0],y0:r+=c[k-1][S][1]*m,y:c[k][S][1]*m})}}var tP=function(n){function t(e,r,o,i){var s=n.call(this)||this;s.z2=2,s.textConfig={inside:!0},So(s).seriesIndex=r.seriesIndex;var l=new Oi({z2:4,silent:e.getModel().get(["label","silent"])});return s.setTextContent(l),s.updateData(!0,e,r,o,i),s}return gt(t,n),t.prototype.updateData=function(e,r,o,i,s){this.node=r,r.piece=this,o=o||this._seriesModel,i=i||this._ecModel;var l=this;So(l).dataIndex=r.dataIndex;var c=r.getModel(),d=c.getModel("emphasis"),p=r.getLayout(),m=Lt({},p);m.label=null;var b=r.getVisual("style");b.lineJoin="bevel";var _=r.getVisual("decal");_&&(b.decal=Ls(_,s));var S=Hh(c.getModel("itemStyle"),m,!0);Lt(m,S),Ce(Ss,function(O){var N=l.ensureState(O),F=c.getModel([O,"itemStyle"]);N.style=F.getItemStyle();var V=Hh(F,m);V&&(N.shape=V)}),e?(l.setShape(m),l.shape.r=p.r0,as(l,{shape:{r:p.r}},o,r.dataIndex)):(mo(l,{shape:m},o),md(l)),l.useStyle(b),this._updateLabel(o);var k=c.getShallow("cursor");k&&l.attr("cursor",k),this._seriesModel=o||this._seriesModel,this._ecModel=i||this._ecModel;var D=d.get("focus");vu(this,"ancestor"===D?r.getAncestorsIndices():"descendant"===D?r.getDescendantIndices():D,d.get("blurScope"),d.get("disabled"))},t.prototype._updateLabel=function(e){var r=this,o=this.node.getModel(),i=o.getModel("label"),s=this.node.getLayout(),l=s.endAngle-s.startAngle,c=(s.startAngle+s.endAngle)/2,d=Math.cos(c),p=Math.sin(c),m=this,b=m.getTextContent(),_=this.node.dataIndex,S=i.get("minAngle")/180*Math.PI,k=i.get("show")&&!(null!=S&&Math.abs(l)<S);function D(O,N){var F=O.get(N);return null==F?i.get(N):F}b.ignore=!k,Ce(Pg,function(O){var N=o.getModel("normal"===O?"label":[O,"label"]),F="normal"===O,V=F?b:b.ensureState(O),q=e.getFormattedLabel(_,O);F&&(q=q||r.node.name),V.style=Vi(N,{},null,"normal"!==O,!0),q&&(V.style.text=q);var Z=N.get("show");null==Z||F||(V.ignore=!Z);var Q,re=D(N,"position"),he=F?m:m.states[O],ge=he.style.fill;he.textConfig={outsideFill:"inherit"===N.get("color")?ge:null,inside:"outside"!==re};var ve=D(N,"distance")||0,_e=D(N,"align");"outside"===re?(Q=s.r+ve,_e=c>Math.PI/2?"right":"left"):_e&&"center"!==_e?"left"===_e?(Q=s.r0+ve,c>Math.PI/2&&(_e="right")):"right"===_e&&(Q=s.r-ve,c>Math.PI/2&&(_e="left")):(Q=l===2*Math.PI&&0===s.r0?0:(s.r+s.r0)/2,_e="center"),V.style.align=_e,V.style.verticalAlign=D(N,"verticalAlign")||"middle",V.x=Q*d+s.cx,V.y=Q*p+s.cy;var Ee=D(N,"rotate"),ze=0;"radial"===Ee?(ze=ws(-c))>Math.PI/2&&ze<1.5*Math.PI&&(ze+=Math.PI):"tangential"===Ee?(ze=Math.PI/2-c)>Math.PI/2?ze-=Math.PI:ze<-Math.PI/2&&(ze+=Math.PI):gr(Ee)&&(ze=Ee*Math.PI/180),V.rotation=ze}),b.dirtyStyle()},t}(Cc),jI="sunburstRootToNode",nP="sunburstHighlight",rP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o,i){var s=this;this.seriesModel=e,this.api=o,this.ecModel=r;var S,k,l=e.getData(),c=l.tree.root,d=e.getViewRoot(),p=this.group,m=e.get("renderLabelForZeroData"),b=[];d.eachNode(function(S){b.push(S)}),function(S,k){function D(N){return N.getId()}function O(N,F){!function(V,q){if(m||!V||V.getValue()||(V=null),V!==c&&q!==c)if(q&&q.piece)V?(q.piece.updateData(!1,V,e,r,o),l.setItemGraphicEl(V.dataIndex,q.piece)):!(Q=q)||Q.piece&&(p.remove(Q.piece),Q.piece=null);else if(V){var Z=new tP(V,e,r,o);p.add(Z),l.setItemGraphicEl(V.dataIndex,Z)}var Q}(null==N?null:S[N],null==F?null:k[F])}0===S.length&&0===k.length||new lg(k,S,D,D).add(O).update(O).remove(dr(O,null)).execute()}(b,this._oldChildren||[]),S=c,(k=d).depth>0?(s.virtualPiece?s.virtualPiece.updateData(!1,S,e,r,o):(s.virtualPiece=new tP(S,e,r,o),p.add(s.virtualPiece)),k.piece.off("click"),s.virtualPiece.on("click",function(D){s._rootToNode(k.parentNode)})):s.virtualPiece&&(p.remove(s.virtualPiece),s.virtualPiece=null),this._initEvents(),this._oldChildren=b},t.prototype._initEvents=function(){var e=this;this.group.off("click"),this.group.on("click",function(r){var o=!1;e.seriesModel.getViewRoot().eachNode(function(i){if(!o&&i.piece&&i.piece===r.target){var s=i.getModel().get("nodeClick");if("rootToNode"===s)e._rootToNode(i);else if("link"===s){var l=i.getModel(),c=l.get("link");c&&Jg(c,l.get("target",!0)||"_blank")}o=!0}})})},t.prototype._rootToNode=function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:jI,from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},t.prototype.containPoint=function(e,r){var o=r.getData().getItemLayout(0);if(o){var i=e[0]-o.cx,s=e[1]-o.cy,l=Math.sqrt(i*i+s*s);return l<=o.r&&l>=o.r0}},t.type="sunburst",t}($a),GR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.ignoreStyleOnData=!0,e}return gt(t,n),t.prototype.getInitialData=function(e,r){var o={name:e.name,children:e.data};O2(o);var i=this._levelModels=mt(e.levels||[],function(l){return new aa(l,this,r)},this),s=yA.createTree(o,this,function(l){l.wrapMethod("getItemModel",function(c,d){var p=s.getNodeByDataIndex(d),m=i[p.depth];return m&&(c.parentModel=m),c})});return s.data},t.prototype.optionUpdated=function(){this.resetViewRoot()},t.prototype.getDataParams=function(e){var r=n.prototype.getDataParams.apply(this,arguments),o=this.getData().tree.getNodeByDataIndex(e);return r.treePathInfo=aT(o,this),r},t.prototype.getLevelModel=function(e){return this._levelModels&&this._levelModels[e.depth]},t.prototype.getViewRoot=function(){return this._viewRoot},t.prototype.resetViewRoot=function(e){e?this._viewRoot=e:e=this._viewRoot;var r=this.getRawData().tree.root;e&&(e===r||r.contains(e))||(this._viewRoot=r)},t.prototype.enableAriaDecal=function(){wA(this)},t.type="series.sunburst",t.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},t}(Ka);function O2(n){var t=0;Ce(n.children,function(r){O2(r);var o=r.value;Ue(o)&&(o=o[0]),t+=o});var e=n.value;Ue(e)&&(e=e[0]),(null==e||isNaN(e))&&(e=t),e<0&&(e=0),Ue(n.value)?n.value[0]=e:n.value=e}var oP=Math.PI/180;function u(n,t,e){t.eachSeriesByType(n,function(r){var o=r.get("center"),i=r.get("radius");Ue(i)||(i=[0,i]),Ue(o)||(o=[o,o]);var s=e.getWidth(),l=e.getHeight(),c=Math.min(s,l),d=qn(o[0],s),p=qn(o[1],l),m=qn(i[0],c/2),b=qn(i[1],c/2),_=-r.get("startAngle")*oP,S=r.get("minAngle")*oP,k=r.getData().tree.root,D=r.getViewRoot(),O=D.depth,N=r.get("sort");null!=N&&h(D,N);var F=0;Ce(D.children,function(Xe){!isNaN(Xe.getValue())&&F++});var V=D.getValue(),q=Math.PI/(V||F)*2,Z=D.depth>0,re=(b-m)/(D.height-(Z?-1:1)||1),he=r.get("clockwise"),ge=r.get("stillShowZeroSum"),ve=he?1:-1,_e=function(Xe,$e){if(Xe){var nt=$e;if(Xe!==k){var yt=Xe.getValue(),_t=0===V&&ge?q:yt*q;_t<S&&(_t=S),nt=$e+ve*_t;var Et=Xe.depth-O-(Z?-1:1),hn=m+re*Et,Zn=m+re*(Et+1),Rt=r.getLevelModel(Xe);if(Rt){var Mn=Rt.get("r0",!0),lr=Rt.get("r",!0),ar=Rt.get("radius",!0);null!=ar&&(Mn=ar[0],lr=ar[1]),null!=Mn&&(hn=qn(Mn,c/2)),null!=lr&&(Zn=qn(lr,c/2))}Xe.setLayout({angle:_t,startAngle:$e,endAngle:nt,clockwise:he,cx:d,cy:p,r0:hn,r:Zn})}if(Xe.children&&Xe.children.length){var Kn=0;Ce(Xe.children,function(xr){Kn+=_e(xr,$e+Kn)})}return nt-$e}};if(Z){var Ge=2*Math.PI;k.setLayout({angle:Ge,startAngle:_,endAngle:_+Ge,clockwise:he,cx:d,cy:p,r0:m,r:m+re})}_e(D,_)})}function h(n,t){var e=n.children||[];n.children=function(r,o){if(yr(o)){var i=mt(r,function(l,c){var d=l.getValue();return{params:{depth:l.depth,height:l.height,dataIndex:l.dataIndex,getValue:function(){return d}},index:c}});return i.sort(function(l,c){return o(l.params,c.params)}),mt(i,function(l){return r[l.index]})}var s="asc"===o;return r.sort(function(l,c){var d=(l.getValue()-c.getValue())*(s?1:-1);return 0===d?(l.dataIndex-c.dataIndex)*(s?-1:1):d})}(e,t),e.length&&Ce(n.children,function(r){h(r,t)})}function v(n){var t={};n.eachSeriesByType("sunburst",function(e){var r=e.getData(),o=r.tree;o.eachNode(function(i){var s=i.getModel().getModel("itemStyle").getItemStyle();s.fill||(s.fill=function(l,c,d){for(var p=l;p&&p.depth>1;)p=p.parentNode;var m=c.getColorFromPalette(p.name||p.dataIndex+"",t);return l.depth>1&&ir(m)&&(m=Cl(m,(l.depth-1)/(d-1)*.5)),m}(i,e,o.root.height)),Lt(r.ensureUniqueItemVisual(i.dataIndex,"style"),s)})})}var w={color:"fill",borderColor:"stroke"},A={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},P=hi(),H=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},t.prototype.getInitialData=function(e,r){return lm(null,this)},t.prototype.getDataParams=function(e,r,o){var i=n.prototype.getDataParams.call(this,e,r);return o&&(i.info=P(o).info),i},t.type="series.custom",t.dependencies=["grid","polar","geo","singleAxis","calendar"],t.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},t}(Ka);function Y(n,t){return t=t||[0,0],mt(["x","y"],function(e,r){var o=this.getAxis(e),i=t[r],s=n[r]/2;return"category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-s)-o.dataToCoord(i+s))},this)}function X(n,t){return t=t||[0,0],mt([0,1],function(e){var r=t[e],o=n[e]/2,i=[],s=[];return i[e]=r-o,s[e]=r+o,i[1-e]=s[1-e]=t[1-e],Math.abs(this.dataToPoint(i)[e]-this.dataToPoint(s)[e])},this)}function oe(n,t){var e=this.getAxis(),r=t instanceof Array?t[0]:t,o=(n instanceof Array?n[0]:n)/2;return"category"===e.type?e.getBandWidth():Math.abs(e.dataToCoord(r-o)-e.dataToCoord(r+o))}function ue(n,t){return t=t||[0,0],mt(["Radius","Angle"],function(e,r){var o=this["get"+e+"Axis"](),i=t[r],s=n[r]/2,l="category"===o.type?o.getBandWidth():Math.abs(o.dataToCoord(i-s)-o.dataToCoord(i+s));return"Angle"===e&&(l=l*Math.PI/180),l},this)}function de(n,t,e,r){return n&&(n.legacy||!1!==n.legacy&&!e&&!r&&"tspan"!==t&&("text"===t||br(n,"text")))}function ye(n,t,e){var r,o,i,s=n;if("text"===t)i=s;else{i={},br(s,"text")&&(i.text=s.text),br(s,"rich")&&(i.rich=s.rich),br(s,"textFill")&&(i.fill=s.textFill),br(s,"textStroke")&&(i.stroke=s.textStroke),br(s,"fontFamily")&&(i.fontFamily=s.fontFamily),br(s,"fontSize")&&(i.fontSize=s.fontSize),br(s,"fontStyle")&&(i.fontStyle=s.fontStyle),br(s,"fontWeight")&&(i.fontWeight=s.fontWeight),o={type:"text",style:i,silent:!0},r={};var l=br(s,"textPosition");e?r.position=l?s.textPosition:"inside":l&&(r.position=s.textPosition),br(s,"textPosition")&&(r.position=s.textPosition),br(s,"textOffset")&&(r.offset=s.textOffset),br(s,"textRotation")&&(r.rotation=s.textRotation),br(s,"textDistance")&&(r.distance=s.textDistance)}return Se(i,n),Ce(i.rich,function(c){Se(c,c)}),{textConfig:r,textContent:o}}function Se(n,t){t&&(t.font=t.textFont||t.font,br(t,"textStrokeWidth")&&(n.lineWidth=t.textStrokeWidth),br(t,"textAlign")&&(n.align=t.textAlign),br(t,"textVerticalAlign")&&(n.verticalAlign=t.textVerticalAlign),br(t,"textLineHeight")&&(n.lineHeight=t.textLineHeight),br(t,"textWidth")&&(n.width=t.textWidth),br(t,"textHeight")&&(n.height=t.textHeight),br(t,"textBackgroundColor")&&(n.backgroundColor=t.textBackgroundColor),br(t,"textPadding")&&(n.padding=t.textPadding),br(t,"textBorderColor")&&(n.borderColor=t.textBorderColor),br(t,"textBorderWidth")&&(n.borderWidth=t.textBorderWidth),br(t,"textBorderRadius")&&(n.borderRadius=t.textBorderRadius),br(t,"textBoxShadowColor")&&(n.shadowColor=t.textBoxShadowColor),br(t,"textBoxShadowBlur")&&(n.shadowBlur=t.textBoxShadowBlur),br(t,"textBoxShadowOffsetX")&&(n.shadowOffsetX=t.textBoxShadowOffsetX),br(t,"textBoxShadowOffsetY")&&(n.shadowOffsetY=t.textBoxShadowOffsetY))}function Pe(n,t,e){var r=n;r.textPosition=r.textPosition||e.position||"inside",null!=e.offset&&(r.textOffset=e.offset),null!=e.rotation&&(r.textRotation=e.rotation),null!=e.distance&&(r.textDistance=e.distance);var o=r.textPosition.indexOf("inside")>=0,i=n.fill||"#000";Oe(r,t);var s=null==r.textFill;return o?s&&(r.textFill=e.insideFill||"#fff",!r.textStroke&&e.insideStroke&&(r.textStroke=e.insideStroke),!r.textStroke&&(r.textStroke=i),null==r.textStrokeWidth&&(r.textStrokeWidth=2)):(s&&(r.textFill=n.fill||e.outsideFill||"#000"),!r.textStroke&&e.outsideStroke&&(r.textStroke=e.outsideStroke)),r.text=t.text,r.rich=t.rich,Ce(t.rich,function(l){Oe(l,l)}),r}function Oe(n,t){t&&(br(t,"fill")&&(n.textFill=t.fill),br(t,"stroke")&&(n.textStroke=t.fill),br(t,"lineWidth")&&(n.textStrokeWidth=t.lineWidth),br(t,"font")&&(n.font=t.font),br(t,"fontStyle")&&(n.fontStyle=t.fontStyle),br(t,"fontWeight")&&(n.fontWeight=t.fontWeight),br(t,"fontSize")&&(n.fontSize=t.fontSize),br(t,"fontFamily")&&(n.fontFamily=t.fontFamily),br(t,"align")&&(n.textAlign=t.align),br(t,"verticalAlign")&&(n.textVerticalAlign=t.verticalAlign),br(t,"lineHeight")&&(n.textLineHeight=t.lineHeight),br(t,"width")&&(n.textWidth=t.width),br(t,"height")&&(n.textHeight=t.height),br(t,"backgroundColor")&&(n.textBackgroundColor=t.backgroundColor),br(t,"padding")&&(n.textPadding=t.padding),br(t,"borderColor")&&(n.textBorderColor=t.borderColor),br(t,"borderWidth")&&(n.textBorderWidth=t.borderWidth),br(t,"borderRadius")&&(n.textBorderRadius=t.borderRadius),br(t,"shadowColor")&&(n.textBoxShadowColor=t.shadowColor),br(t,"shadowBlur")&&(n.textBoxShadowBlur=t.shadowBlur),br(t,"shadowOffsetX")&&(n.textBoxShadowOffsetX=t.shadowOffsetX),br(t,"shadowOffsetY")&&(n.textBoxShadowOffsetY=t.shadowOffsetY),br(t,"textShadowColor")&&(n.textShadowColor=t.textShadowColor),br(t,"textShadowBlur")&&(n.textShadowBlur=t.textShadowBlur),br(t,"textShadowOffsetX")&&(n.textShadowOffsetX=t.textShadowOffsetX),br(t,"textShadowOffsetY")&&(n.textShadowOffsetY=t.textShadowOffsetY))}var Re={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},Ne=rr(Re),We=(Pn(Rr,function(n,t){return n[t]=1,n},{}),Rr.join(", "),["","style","shape","extra"]),Te=hi();function Ve(n,t,e,r,o){var i=n+"Animation",s=Kc(n,r,o)||{},l=Te(t).userDuring;return s.duration>0&&(s.during=l?De(Jt,{el:t,userDuring:l}):null,s.setToFinal=!0,s.scope=n),Lt(s,e[i]),s}function Qe(n,t,e,r){var o=(r=r||{}).dataIndex,i=r.isInit,s=r.clearStyle,l=e.isAnimationEnabled(),c=Te(n),d=t.style;c.userDuring=t.during;var S,k,p={},m={};if(function(S,k,D){for(var O=0;O<Ne.length;O++){var N=Ne[O],F=Re[N],V=k[N];V&&(D[F[0]]=V[0],D[F[1]]=V[1])}for(O=0;O<Rr.length;O++){var q=Rr[O];null!=k[q]&&(D[q]=k[q])}}(0,t,m),En("shape",t,m),En("extra",t,m),!i&&l&&(function(S,k,D){for(var O=k.transition,N=Tt(O)?Rr:ci(O||[]),F=0;F<N.length;F++){var V=N[F];"style"!==V&&"shape"!==V&&"extra"!==V&&(D[V]=S[V])}}(n,t,p),yn("shape",n,t,p),yn("extra",n,t,p),function(S,k,D,O){if(D){var N,F=S.style;if(F){var V=D.transition,q=k.transition;if(V&&!Tt(V)){var Z=ci(V);!N&&(N=O.style={});for(var Q=0;Q<Z.length;Q++){var re=F[_e=Z[Q]];N[_e]=re}}else if(S.getAnimationStyleProps&&(Tt(q)||Tt(V)||Ir(q,"style")>=0)){var he=S.getAnimationStyleProps(),ge=he?he.style:null;if(ge){!N&&(N=O.style={});var ve=rr(D);for(Q=0;Q<ve.length;Q++){var _e;ge[_e=ve[Q]]&&(N[_e]=re=F[_e])}}}}}}(n,t,d,p)),m.style=d,function(S,k,D){var O=k.style;if(!S.isGroup&&O){if(D){S.useStyle({});for(var N=S.animators,F=0;F<N.length;F++){var V=N[F];"style"===V.targetName&&V.changeTarget(S.style)}}S.setStyle(O)}k&&(k.style=null,k&&S.attr(k),k.style=O)}(n,m,s),S=n,br(k=t,"silent")&&(S.silent=k.silent),br(k,"ignore")&&(S.ignore=k.ignore),S instanceof Ml&&br(k,"invisible")&&(S.invisible=k.invisible),S instanceof Go&&br(k,"autoBatch")&&(S.autoBatch=k.autoBatch),l)if(i){var b={};Ce(We,function(S){var k=S?t[S]:t;k&&k.enterFrom&&(S&&(b[S]=b[S]||{}),Lt(S?b[S]:b,k.enterFrom))});var _=Ve("enter",n,t,e,o);_.duration>0&&n.animateFrom(b,_)}else!function(S,k,D,O,N){if(N){var F=Ve("update",S,k,O,D);F.duration>0&&S.animateFrom(N,F)}}(n,t,o||0,e,p);lt(n,t),d?n.dirty():n.markRedraw()}function lt(n,t){for(var e=Te(n).leaveToProps,r=0;r<We.length;r++){var o=We[r],i=o?t[o]:t;i&&i.leaveTo&&(e||(e=Te(n).leaveToProps={}),o&&(e[o]=e[o]||{}),Lt(o?e[o]:e,i.leaveTo))}}function Ft(n,t,e,r){if(n){var o=n.parent,i=Te(n).leaveToProps;if(i){var s=Ve("update",n,t,e,0);s.done=function(){o.remove(n),r&&r()},n.animateTo(i,s)}else o.remove(n),r&&r()}}function Tt(n){return"all"===n}var Ut={},dn={setTransform:function(n,t){return Ut.el[n]=t,this},getTransform:function(n){return Ut.el[n]},setShape:function(n,t){var e=Ut.el;return(e.shape||(e.shape={}))[n]=t,e.dirtyShape&&e.dirtyShape(),this},getShape:function(n){var t=Ut.el.shape;if(t)return t[n]},setStyle:function(n,t){var e=Ut.el,r=e.style;return r&&(r[n]=t,e.dirtyStyle&&e.dirtyStyle()),this},getStyle:function(n){var t=Ut.el.style;if(t)return t[n]},setExtra:function(n,t){return(Ut.el.extra||(Ut.el.extra={}))[n]=t,this},getExtra:function(n){var t=Ut.el.extra;if(t)return t[n]}};function Jt(){var n=this,t=n.el;if(t){var e=Te(t).userDuring,r=n.userDuring;e===r?(Ut.el=t,r(dn)):n.el=n.userDuring=null}}function yn(n,t,e,r){var o=e[n];if(o){var i,s=t[n];if(s){var l=e.transition,c=o.transition;if(c)if(!i&&(i=r[n]={}),Tt(c))Lt(i,s);else for(var d=ci(c),p=0;p<d.length;p++){var m=s[_=d[p]];i[_]=m}else if(Tt(l)||Ir(l,n)>=0){!i&&(i=r[n]={});var b=rr(s);for(p=0;p<b.length;p++){var _;m=s[_=b[p]],pr(o[_],m)&&(i[_]=m)}}}}}function En(n,t,e){var r=t[n];if(r)for(var o=e[n]={},i=rr(r),s=0;s<i.length;s++){var l=i[s];o[l]=nc(r[l])}}function pr(n,t){return nn(n)?n!==t:null!=n&&isFinite(n)}var Wr=hi(),No=["percent","easing","shape","style","extra"];function wi(n){n.stopAnimation("keyframe"),n.attr(Wr(n))}function Ui(n,t,e){if(e.isAnimationEnabled()&&t)if(Ue(t))Ce(t,function(l){Ui(n,l,e)});else{var r=t.keyframes,o=t.duration;if(e&&null==o){var i=Kc("enter",e,0);o=i&&i.duration}if(r&&o){var s=Wr(n);Ce(We,function(l){var c;l&&!n[l]||(r.sort(function(d,p){return d.percent-p.percent}),Ce(r,function(d){var p=n.animators,m=l?d[l]:d;if(m){var b=rr(m);if(l||(b=yo(b,function(k){return Ir(No,k)<0})),b.length){c||((c=n.animate(l,t.loop,!0)).scope="keyframe");for(var _=0;_<p.length;_++)p[_]!==c&&p[_].targetName===c.targetName&&p[_].stopTracks(b);l&&(s[l]=s[l]||{});var S=l?s[l]:s;Ce(b,function(k){S[k]=((l?n[l]:n)||{})[k]}),c.whenWithKeys(o*d.percent,m,b,d.easing)}}}),c&&c.delay(t.delay||0).duration(o).start(t.easing))})}}}var Ni="emphasis",Zo="normal",Xi="blur",$i="select",Ji=[Zo,Ni,Xi,$i],Si={normal:["itemStyle"],emphasis:[Ni,"itemStyle"],blur:[Xi,"itemStyle"],select:[$i,"itemStyle"]},Na={normal:["label"],emphasis:[Ni,"label"],blur:[Xi,"label"],select:[$i,"label"]},Zl=["x","y"],js={normal:{},emphasis:{},blur:{},select:{}},Jf={cartesian2d:function(n){var t=n.master.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return n.dataToPoint(e)},size:De(Y,n)}}},geo:function(n){var t=n.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:n.getZoom()},api:{coord:function(e){return n.dataToPoint(e)},size:De(X,n)}}},single:function(n){var t=n.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(e){return n.dataToPoint(e)},size:De(oe,n)}}},polar:function(n){var t=n.getRadiusAxis(),e=n.getAngleAxis(),r=t.getExtent();return r[0]>r[1]&&r.reverse(),{coordSys:{type:"polar",cx:n.cx,cy:n.cy,r:r[1],r0:r[0]},api:{coord:function(o){var i=t.dataToRadius(o[0]),s=e.dataToAngle(o[1]),l=n.coordToPoint([i,s]);return l.push(i,s*Math.PI/180),l},size:De(ue,n)}}},calendar:function(n){var t=n.getRect(),e=n.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:n.getCellWidth(),cellHeight:n.getCellHeight(),rangeInfo:{start:e.start,end:e.end,weeks:e.weeks,dayCount:e.allDay}},api:{coord:function(r,o){return n.dataToPoint(r,o)}}}}};function Ba(n){return n instanceof Go}function Td(n){return n instanceof Ml}var au=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o,i){this._progressiveEls=null;var s=this._data,l=e.getData(),c=this.group,d=ka(e,l,r,o);s||c.removeAll(),l.diff(s).add(function(m){ef(o,null,m,d(m,i),e,c,l)}).remove(function(m){var b=s.getItemGraphicEl(m);b&&Ft(b,P(b).option,e)}).update(function(m,b){var _=s.getItemGraphicEl(b);ef(o,_,m,d(m,i),e,c,l)}).execute();var p=e.get("clip",!0)?I1(e.coordinateSystem,!1,e):null;p?c.setClipPath(p):c.removeClipPath(),this._data=l},t.prototype.incrementalPrepareRender=function(e,r,o){this.group.removeAll(),this._data=null},t.prototype.incrementalRender=function(e,r,o,i,s){var l=r.getData(),c=ka(r,l,o,i),d=this._progressiveEls=[];function p(_){_.isGroup||(_.incremental=!0,_.ensureState("emphasis").hoverLayer=!0)}for(var m=e.start;m<e.end;m++){var b=ef(null,null,m,c(m,s),r,this.group,l);b&&(b.traverse(p),d.push(b))}},t.prototype.eachRendered=function(e){Tl(this._progressiveEls||this.group,e)},t.prototype.filterForExposedEvent=function(e,r,o,i){var s=r.element;if(null==s||o.name===s)return!0;for(;(o=o.__hostTarget||o.parent)&&o!==this.group;)if(o.name===s)return!0;return!1},t.type="custom",t}($a);function ta(n){var t,e=n.type;if("path"===e){var r=n.shape,o=null!=r.width&&null!=r.height?{x:r.x||0,y:r.y||0,width:r.width,height:r.height}:null,i=Qf(r);t=ip(i,null,o,r.layout||"center"),P(t).customPathData=i}else if("image"===e)t=new fl({}),P(t).customImagePath=n.style.image;else if("text"===e)t=new Oi({});else if("group"===e)t=new xo;else{if("compoundPath"===e)throw new Error('"compoundPath" is not supported yet.');var s=v0(e);s||Ri(""),t=new s}return P(t).customGraphicType=e,t.name=n.name,t.z2EmphasisLift=1,t.z2SelectLift=1,t}function Qn(n,t,e,r,o,i,s){wi(t);var l=o&&o.normal.cfg;l&&t.setTextConfig(l),r&&null==r.transition&&(r.transition=Zl);var c=r&&r.style;if(c){if("text"===t.type){var d=c;br(d,"textFill")&&(d.fill=d.textFill),br(d,"textStroke")&&(d.stroke=d.textStroke)}var p=void 0,m=Ba(t)?c.decal:null;n&&m&&(m.dirty=!0,p=Ls(m,n)),c.__decalPattern=p}Td(t)&&c&&(p=c.__decalPattern)&&(c.decal=p),Qe(t,r,i,{dataIndex:e,isInit:s,clearStyle:!0}),Ui(t,r.keyframeAnimation,i)}function Bo(n,t,e,r,o){var i=t.isGroup?null:t,s=o&&o[n].cfg;if(i){var l=i.ensureState(n);if(!1===r){var c=i.getState(n);c&&(c.style=null)}else l.style=r||null;s&&(l.textConfig=s),Ng(i)}}function ha(n,t,e){var r=e===Zo,o=r?t:yl(t,e),i=o?o.z2:null;null!=i&&((r?n:n.ensureState(e)).z2=i||0)}function ka(n,t,e,r){var o=n.get("renderItem"),i=n.coordinateSystem,s={};i&&(s=i.prepareCustoms?i.prepareCustoms(i):Jf[i.type](i));for(var l,c,d=Yn({getWidth:r.getWidth,getHeight:r.getHeight,getZr:r.getZr,getDevicePixelRatio:r.getDevicePixelRatio,value:function(Z,Q){return null==Q&&(Q=l),t.getStore().get(t.getDimensionIndex(Z||0),Q)},style:function(Z,Q){null==Q&&(Q=l);var re=t.getItemVisual(Q,"style"),he=re&&re.fill,ge=re&&re.opacity,ve=N(Q,Zo).getItemStyle();null!=he&&(ve.fill=he),null!=ge&&(ve.opacity=ge);var _e={inheritColor:ir(he)?he:"#000"},Ee=F(Q,Zo),ze=Vi(Ee,null,_e,!1,!0);ze.text=Ee.getShallow("show")?un(n.getFormattedLabel(Q,Zo),qf(t,Q)):null;var Ge=qd(Ee,_e,!1);return q(Z,ve),ve=Pe(ve,ze,Ge),Z&&V(ve,Z),ve.legacy=!0,ve},ordinalRawValue:function(Z,Q){null==Q&&(Q=l);var re=t.getDimensionInfo(Z=Z||0);if(!re){var he=t.getDimensionIndex(Z);return he>=0?t.getStore().get(he,Q):void 0}var ge=t.get(re.name,Q),ve=re&&re.ordinalMeta;return ve?ve.categories[ge]:ge},styleEmphasis:function(Z,Q){null==Q&&(Q=l);var re=N(Q,Ni).getItemStyle(),he=F(Q,Ni),ge=Vi(he,null,null,!0,!0);ge.text=he.getShallow("show")?rn(n.getFormattedLabel(Q,Ni),n.getFormattedLabel(Q,Zo),qf(t,Q)):null;var ve=qd(he,null,!0);return q(Z,re),re=Pe(re,ge,ve),Z&&V(re,Z),re.legacy=!0,re},visual:function(Z,Q){if(null==Q&&(Q=l),br(w,Z)){var re=t.getItemVisual(Q,"style");return re?re[w[Z]]:null}if(br(A,Z))return t.getItemVisual(Q,Z)},barLayout:function(Z){if("cartesian2d"===i.type)return function(Q){var re=[],he=Q.axis;if("category"===he.type){for(var ve=he.getBandWidth(),_e=0;_e<Q.count;_e++)re.push(Yn({bandWidth:ve,axisKey:"axis0",stackId:Zx+_e},Q));var Ee=DC(re),ze=[];for(_e=0;_e<Q.count;_e++){var Ge=Ee.axis0[Zx+_e];Ge.offsetCenter=Ge.offset+Ge.width/2,ze.push(Ge)}return ze}}(Yn({axis:i.getBaseAxis()},Z))},currentSeriesIndices:function(){return e.getCurrentSeriesIndices()},font:function(Z){return nv(Z,e)}},s.api||{}),p={context:{},seriesId:n.id,seriesName:n.name,seriesIndex:n.seriesIndex,coordSys:s.coordSys,dataInsideLength:t.count(),encode:ms(n.getData())},m={},b={},_={},S={},k=0;k<Ji.length;k++){var D=Ji[k];_[D]=n.getModel(Si[D]),S[D]=n.getModel(Na[D])}function O(Z){return Z===l?c||(c=t.getItemModel(Z)):t.getItemModel(Z)}function N(Z,Q){return t.hasItemOption?Z===l?m[Q]||(m[Q]=O(Z).getModel(Si[Q])):O(Z).getModel(Si[Q]):_[Q]}function F(Z,Q){return t.hasItemOption?Z===l?b[Q]||(b[Q]=O(Z).getModel(Na[Q])):O(Z).getModel(Na[Q]):S[Q]}return function(Z,Q){return l=Z,c=null,m={},b={},o&&o(Yn({dataIndexInside:Z,dataIndex:t.getRawIndex(Z),actionType:Q?Q.type:null},p),d)};function V(Z,Q){for(var re in Q)br(Q,re)&&(Z[re]=Q[re])}function q(Z,Q){Z&&(Z.textFill&&(Q.textFill=Z.textFill),Z.textPosition&&(Q.textPosition=Z.textPosition))}}function ms(n){var t={};return Ce(n.dimensions,function(e){var r=n.getDimensionInfo(e);if(!r.isExtraCoord){var o=r.coordDim;(t[o]=t[o]||[])[r.coordDimIndex]=n.getDimensionIndex(e)}}),t}function ef(n,t,e,r,o,i,s){if(r){var l=Nu(n,t,e,r,o,i);return l&&s.setItemGraphicEl(e,l),l&&vu(l,r.focus,r.blurScope,r.emphasisDisabled),l}i.remove(t)}function Nu(n,t,e,r,o,i){var s=-1,l=t;t&&vl(t,r,o)&&(s=Ir(i.childrenRef(),t),t=null);var c,d,p=!t,m=t;m?m.clearStates():(m=ta(r),l&&((d=m).copyTransform(c=l),Td(d)&&Td(c)&&(d.setStyle(c.style),d.z=c.z,d.z2=c.z2,d.zlevel=c.zlevel,d.invisible=c.invisible,d.ignore=c.ignore,Ba(d)&&Ba(c)&&d.setShape(c.shape)))),!1===r.morph?m.disableMorphing=!0:m.disableMorphing&&(m.disableMorphing=!1),js.normal.cfg=js.normal.conOpt=js.emphasis.cfg=js.emphasis.conOpt=js.blur.cfg=js.blur.conOpt=js.select.cfg=js.select.conOpt=null,js.isLegacy=!1,function(k,D,O,N,F,V){if(!k.isGroup){Ec(O,null,V),Ec(O,Ni,V);var q=V.normal.conOpt;if(null!=q||null!=V.emphasis.conOpt||null!=V.select.conOpt||null!=V.blur.conOpt){var he=k.getTextContent();if(!1===q)he&&k.removeTextContent();else{q=V.normal.conOpt=q||{type:"text"},he?he.clearStates():(he=ta(q),k.setTextContent(he)),Qn(null,he,D,q,null,N,F);for(var ge=q&&q.style,ve=0;ve<Ji.length;ve++){var _e=Ji[ve];_e!==Zo&&Bo(_e,he,0,bl(q,V[_e].conOpt,_e),null)}ge?he.dirty():he.markRedraw()}}}}(m,e,r,o,p,js),function(k,D,O,N,F){var V=O.clipPath;if(!1===V)k&&k.getClipPath()&&k.removeClipPath();else if(V){var q=k.getClipPath();q&&vl(q,V,N)&&(q=null),q||(q=ta(V),k.setClipPath(q)),Qn(null,q,D,V,null,N,F)}}(m,e,r,o,p),Qn(n,m,e,r,js,o,p),br(r,"info")&&(P(m).info=r.info);for(var b=0;b<Ji.length;b++){var _=Ji[b];_!==Zo&&Bo(_,m,0,bl(r,yl(r,_),_),js)}return function(k,D,O){if(!k.isGroup){var N=k,V=O.currentZLevel;N.z=O.currentZ,N.zlevel=V;var q=D.z2;null!=q&&(N.z2=q||0);for(var Z=0;Z<Ji.length;Z++)ha(N,D,Ji[Z])}}(m,r,o),"group"===r.type&&function(k,D,O,N,F){var V=N.children,q=V?V.length:0,Z=N.$mergeChildren,Q="byName"===Z||N.diffChildrenByName,re=!1===Z;if(q||Q||re){if(Q)return he={api:k,oldChildren:D.children()||[],newChildren:V||[],dataIndex:O,seriesModel:F,group:D},void new lg(he.oldChildren,he.newChildren,xl,xl,he).add(bp).update(bp).remove(ui).execute();var he;re&&D.removeAll();for(var ge=0;ge<q;ge++){var ve=V[ge],_e=D.childAt(ge);ve?(null==ve.ignore&&(ve.ignore=!1),Nu(k,_e,O,ve,F,D)):_e.ignore=!0}for(var Ee=D.childCount()-1;Ee>=ge;Ee--){var ze=D.childAt(Ee);Kl(D,ze,F)}}}(n,m,e,r,o),s>=0?i.replaceAt(m,s):i.add(m),m}function vl(n,t,e){var r,o=P(n),i=t.type,s=t.shape,l=t.style;return e.isUniversalTransitionEnabled()||null!=i&&i!==o.customGraphicType||"path"===i&&(r=s)&&(br(r,"pathData")||br(r,"d"))&&Qf(s)!==o.customPathData||"image"===i&&br(l,"image")&&l.image!==o.customImagePath}function Ec(n,t,e){var r=t?yl(n,t):n,o=t?bl(n,r,Ni):n.style,i=n.type,s=r?r.textConfig:null,l=n.textContent,c=l?t?yl(l,t):l:null;if(o&&(e.isLegacy||de(o,i,!!s,!!c))){e.isLegacy=!0;var d=ye(o,i,!t);!s&&d.textConfig&&(s=d.textConfig),!c&&d.textContent&&(c=d.textContent)}!t&&c&&!c.type&&(c.type="text");var m=t?e[t]:e.normal;m.cfg=s,m.conOpt=c}function yl(n,t){return t?n?n[t]:null:n}function bl(n,t,e){var r=t&&t.style;return null==r&&e===Ni&&n&&(r=n.styleEmphasis),r}function Kl(n,t,e){t&&Ft(t,P(n).option,e)}function xl(n,t){var e=n&&n.name;return null!=e?e:"e\0\0"+t}function bp(n,t){var e=this.context;Nu(e.api,null!=t?e.oldChildren[t]:null,e.dataIndex,null!=n?e.newChildren[n]:null,e.seriesModel,e.group)}function ui(n){var t=this.context,e=t.oldChildren[n];e&&Ft(e,P(e).option,t.seriesModel)}function Qf(n){return n&&(n.pathData||n.d)}var Il=hi(),Sm=an,Wv=De,Gv=function(){function n(){this._dragging=!1,this.animationThreshold=15}return n.prototype.render=function(t,e,r,o){var i=e.get("value"),s=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=r,o||this._lastValue!==i||this._lastStatus!==s){this._lastValue=i,this._lastStatus=s;var l=this._group,c=this._handle;if(!s||"hide"===s)return l&&l.hide(),void(c&&c.hide());l&&l.show(),c&&c.show();var d={};this.makeElOption(d,i,t,e,r);var p=d.graphicKey;p!==this._lastGraphicKey&&this.clear(r),this._lastGraphicKey=p;var m=this._moveAnimation=this.determineAnimation(t,e);if(l){var b=dr(gb,e,m);this.updatePointerEl(l,d,b),this.updateLabelEl(l,d,b,e)}else l=this._group=new xo,this.createPointerEl(l,d,t,e),this.createLabelEl(l,d,t,e),r.getZr().add(l);Ky(l,e,!0),this._renderHandle(i)}},n.prototype.remove=function(t){this.clear(t)},n.prototype.dispose=function(t){this.clear(t)},n.prototype.determineAnimation=function(t,e){var r=e.get("animation"),o=t.axis,i="category"===o.type,s=e.get("snap");if(!s&&!i)return!1;if("auto"===r||null==r){var l=this.animationThreshold;if(i&&o.getBandWidth()>l)return!0;if(s){var c=sr(t).seriesDataCount,d=o.getExtent();return Math.abs(d[0]-d[1])/c>l}return!1}return!0===r},n.prototype.makeElOption=function(t,e,r,o,i){},n.prototype.createPointerEl=function(t,e,r,o){var i=e.pointer;if(i){var s=Il(t).pointerEl=new Gg[i.type](Sm(e.pointer));t.add(s)}},n.prototype.createLabelEl=function(t,e,r,o){if(e.label){var i=Il(t).labelEl=new Oi(Sm(e.label));t.add(i),M_(i,o)}},n.prototype.updatePointerEl=function(t,e,r){var o=Il(t).pointerEl;o&&e.pointer&&(o.setStyle(e.pointer.style),r(o,{shape:e.pointer.shape}))},n.prototype.updateLabelEl=function(t,e,r,o){var i=Il(t).labelEl;i&&(i.setStyle(e.label.style),r(i,{x:e.label.x,y:e.label.y}),M_(i,o))},n.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var e,r=this._axisPointerModel,o=this._api.getZr(),i=this._handle,s=r.getModel("handle"),l=r.get("status");if(!s.get("show")||!l||"hide"===l)return i&&o.remove(i),void(this._handle=null);this._handle||(e=!0,i=this._handle=yd(s.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(d){Tu(d.event)},onmousedown:Wv(this._onHandleDragMove,this,0,0),drift:Wv(this._onHandleDragMove,this),ondragend:Wv(this._onHandleDragEnd,this)}),o.add(i)),Ky(i,r,!1),i.setStyle(s.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var c=s.get("size");Ue(c)||(c=[c,c]),i.scaleX=c[0]/2,i.scaleY=c[1]/2,E0(this,"_doDispatchAxisPointer",s.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},n.prototype._moveHandleToValue=function(t,e){gb(this._axisPointerModel,!e&&this._moveAnimation,this._handle,kS(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},n.prototype._onHandleDragMove=function(t,e){var r=this._handle;if(r){this._dragging=!0;var o=this.updateHandleTransform(kS(r),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=o,r.stopAnimation(),r.attr(kS(o)),Il(r).lastProp=null,this._doDispatchAxisPointer()}},n.prototype._doDispatchAxisPointer=function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},n.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},n.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),r=this._group,o=this._handle;e&&r&&(this._lastGraphicKey=null,r&&e.remove(r),o&&e.remove(o),this._group=null,this._handle=null,this._payloadInfo=null),Tx(this,"_doDispatchAxisPointer")},n.prototype.doClear=function(){},n.prototype.buildLabel=function(t,e,r){return{x:t[r=r||0],y:t[1-r],width:e[r],height:e[1-r]}},n}();function gb(n,t,e,r){C_(Il(e).lastProp,r)||(Il(e).lastProp=r,t?mo(e,r,n):(e.stopAnimation(),e.attr(r)))}function C_(n,t){if(wr(n)&&wr(t)){var e=!0;return Ce(t,function(r,o){e=e&&C_(n[o],r)}),!!e}return n===t}function M_(n,t){n[t.get(["label","show"])?"show":"hide"]()}function kS(n){return{x:n.x||0,y:n.y||0,rotation:n.rotation||0}}function Ky(n,t,e){var r=t.get("z"),o=t.get("zlevel");n&&n.traverse(function(i){"group"!==i.type&&(null!=r&&(i.z=r),null!=o&&(i.zlevel=o),i.silent=e)})}function k_(n){var t,e=n.get("type"),r=n.getModel(e+"Style");return"line"===e?(t=r.getLineStyle()).fill=null:"shadow"===e&&((t=r.getAreaStyle()).stroke=null),t}function Uv(n,t,e,r,o){var i=jv(e.get("value"),t.axis,t.ecModel,e.get("seriesDataIndices"),{precision:e.get(["label","precision"]),formatter:e.get(["label","formatter"])}),s=e.getModel("label"),l=$g(s.get("padding")||0),c=s.getFont(),d=ua(i,c),p=o.position,m=d.width+l[1]+l[3],b=d.height+l[0]+l[2],_=o.align;"right"===_&&(p[0]-=m),"center"===_&&(p[0]-=m/2);var D,O,N,F,V,q,S=o.verticalAlign;"bottom"===S&&(p[1]-=b),"middle"===S&&(p[1]-=b/2),D=p,O=m,N=b,V=(F=r).getWidth(),q=F.getHeight(),D[0]=Math.min(D[0]+O,V)-O,D[1]=Math.min(D[1]+N,q)-N,D[0]=Math.max(D[0],0),D[1]=Math.max(D[1],0);var k=s.get("backgroundColor");k&&"auto"!==k||(k=t.get(["axisLine","lineStyle","color"])),n.label={x:p[0],y:p[1],style:Vi(s,{text:i,font:c,fill:s.getTextColor(),padding:l,backgroundColor:k}),z2:10}}function jv(n,t,e,r,o){n=t.scale.parse(n);var i=t.scale.getLabel({value:n},{precision:o.precision}),s=o.formatter;if(s){var l={value:v1(t,{value:n}),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};Ce(r,function(c){var d=e.getSeriesByIndex(c.seriesIndex),m=d&&d.getDataParams(c.dataIndexInside);m&&l.seriesData.push(m)}),ir(s)?i=s.replace("{value}",i):yr(s)&&(i=s(l))}return i}function MM(n,t,e){var r=[1,0,0,1,0,0];return Pl(r,r,e.rotation),Rc(r,r,e.position),hl([n.dataToCoord(t),(e.labelOffset||0)+(e.labelDirection||1)*(e.labelMargin||0)],r)}function TS(n,t,e,r,o,i){var s=bn.innerTextLayout(e.rotation,0,e.labelDirection);e.labelMargin=o.get(["label","margin"]),Uv(t,r,o,i,{position:MM(r.axis,n,e),align:s.textAlign,verticalAlign:s.textVerticalAlign})}function DS(n,t,e){return{x1:n[e=e||0],y1:n[1-e],x2:t[e],y2:t[1-e]}}function iP(n,t,e){return{x:n[e=e||0],y:n[1-e],width:t[e],height:t[1-e]}}function wT(n,t,e,r,o,i){return{cx:n,cy:t,r0:e,r,startAngle:o,endAngle:i,clockwise:!0}}var YI=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.makeElOption=function(e,r,o,i,s){var l=o.axis,c=l.grid,d=i.get("type"),p=G1(c,l).getOtherAxis(l).getGlobalExtent(),m=l.toGlobalCoord(l.dataToCoord(r,!0));if(d&&"none"!==d){var b=k_(i),_=aP[d](l,m,p);_.style=b,e.graphicKey=_.type,e.pointer=_}TS(r,e,je(c.model,o),o,i,s)},t.prototype.getHandleTransform=function(e,r,o){var i=je(r.axis.grid.model,r,{labelInside:!1});i.labelMargin=o.get(["handle","margin"]);var s=MM(r.axis,e,i);return{x:s[0],y:s[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,r,o,i){var s=o.axis,l=s.grid,c=s.getGlobalExtent(!0),d=G1(l,s).getOtherAxis(s).getGlobalExtent(),p="x"===s.dim?0:1,m=[e.x,e.y];m[p]+=r[p],m[p]=Math.min(c[1],m[p]),m[p]=Math.max(c[0],m[p]);var b=(d[1]+d[0])/2,_=[b,b];return _[p]=m[p],{x:m[0],y:m[1],rotation:e.rotation,cursorPoint:_,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][p]}},t}(Gv);function G1(n,t){var e={};return e[t.dim+"AxisIndex"]=t.index,n.getCartesian(e)}var aP={line:function(n,t,e){return{type:"Line",subPixelOptimize:!0,shape:DS([t,e[0]],[t,e[1]],qI(n))}},shadow:function(n,t,e){var r=Math.max(1,n.getBandWidth());return{type:"Rect",shape:iP([t-r/2,e[0]],[r,e[1]-e[0]],qI(n))}}};function qI(n){return"x"===n.dim?0:1}var sP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="axisPointer",t.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},t}(W),Cm=hi(),U1=Ce;function XI(n,t,e){if(!zn.node){var r=t.getZr();Cm(r).records||(Cm(r).records={}),function(o,i){function s(l,c){o.on(l,function(d){var m,b,_,p=(m=i,{dispatchAction:_=function(S){var k=b[S.type];k?k.push(S):(S.dispatchAction=_,m.dispatchAction(S))},pendings:b={showTip:[],hideTip:[]}});U1(Cm(o).records,function(m){m&&c(m,d,p.dispatchAction)}),function(m,b){var _,S=m.showTip.length,k=m.hideTip.length;S?_=m.showTip[S-1]:k&&(_=m.hideTip[k-1]),_&&(_.dispatchAction=null,b.dispatchAction(_))}(p.pendings,i)})}Cm(o).initialized||(Cm(o).initialized=!0,s("click",dr(ZI,"click")),s("mousemove",dr(ZI,"mousemove")),s("globalout",uP))}(r,t),(Cm(r).records[n]||(Cm(r).records[n]={})).handler=e}}function uP(n,t,e){n.handler("leave",null,e)}function ZI(n,t,e,r){t.handler(n,e,r)}function E2(n,t){if(!zn.node){var e=t.getZr();(Cm(e).records||{})[n]&&(Cm(e).records[n]=null)}}var jt=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){var i=r.getComponent("tooltip"),s=e.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";XI("axisPointer",o,function(l,c,d){"none"!==s&&("leave"===l||s.indexOf(l)>=0)&&d({type:"updateAxisPointer",currTrigger:l,x:c&&c.offsetX,y:c&&c.offsetY})})},t.prototype.remove=function(e,r){E2("axisPointer",r)},t.prototype.dispose=function(e,r){E2("axisPointer",r)},t.type="axisPointer",t}(ks);function Ko(n,t){var e,r=[],o=n.seriesIndex;if(null==o||!(e=t.getSeriesByIndex(o)))return{point:[]};var i=e.getData(),s=vh(i,n);if(null==s||s<0||Ue(s))return{point:[]};var l=i.getItemGraphicEl(s),c=e.coordinateSystem;if(e.getTooltipPosition)r=e.getTooltipPosition(s)||[];else if(c&&c.dataToPoint)if(n.isStacked){var d=c.getBaseAxis(),p=c.getOtherAxis(d).dim,b="x"===p||"radius"===p?1:0,_=i.mapDimension(d.dim),S=[];S[b]=i.get(_,s),S[1-b]=i.get(i.getCalculationInfo("stackResultDimension"),s),r=c.dataToPoint(S)||[]}else r=c.dataToPoint(i.getValues(mt(c.dimensions,function(D){return i.mapDimension(D)}),s))||[];else if(l){var k=l.getBoundingRect().clone();k.applyTransform(l.transform),r=[k.x+k.width/2,k.y+k.height/2]}return{point:r,el:l}}var Wo=hi();function xf(n,t,e){var O,N,V,r=n.currTrigger,o=[n.x,n.y],i=n,s=n.dispatchAction||De(e.dispatchAction,e),l=t.getComponent("axisPointer").coordSysAxesInfo;if(l){uh(o)&&(o=Ko({seriesIndex:i.seriesIndex,dataIndex:i.dataIndex},t).point);var c=uh(o),d=i.axesInfo,p=l.axesInfo,m="leave"===r||uh(o),b={},_={},S={list:[],map:{}},k={showPointer:dr(tf,_),showTooltip:dr(Gh,S)};Ce(l.coordSysMap,function(O,N){var F=c||O.containPoint(o);Ce(l.coordSysAxesInfo[N],function(V,q){var Z=V.axis,Q=function(he,ge){for(var ve=0;ve<(he||[]).length;ve++){var _e=he[ve];if(ge.axis.dim===_e.axisDim&&ge.axis.model.componentIndex===_e.axisIndex)return _e}}(d,V);if(!m&&F&&(!d||Q)){var re=Q&&Q.value;null!=re||c||(re=Z.pointToData(o)),null!=re&&$l(V,re,k,!1,b)}})});var D={};return Ce(p,function(O,N){var F=O.linkGroup;F&&!_[N]&&Ce(F.axesInfo,function(V,q){var Z=_[q];if(V!==O&&Z){var Q=Z.value;F.mapper&&(Q=O.axis.scale.parse(F.mapper(Q,Ol(V),Ol(O)))),D[O.key]=Q}})}),Ce(D,function(O,N){$l(p[N],O,k,!0,b)}),O=_,N=p,V=b.axesInfo=[],Ce(N,function(q,Z){var Q=q.axisPointerModel.option,re=O[Z];re?(!q.useHandle&&(Q.status="show"),Q.value=re.value,Q.seriesDataIndices=(re.payloadBatch||[]).slice()):!q.useHandle&&(Q.status="hide"),"show"===Q.status&&V.push({axisDim:q.axis.dim,axisIndex:q.axis.model.componentIndex,value:Q.value})}),function(O,N,F,V){if(!uh(N)&&O.list.length){var q=((O.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};V({type:"showTip",escapeConnect:!0,x:N[0],y:N[1],tooltipOption:F.tooltipOption,position:F.position,dataIndexInside:q.dataIndexInside,dataIndex:q.dataIndex,seriesIndex:q.seriesIndex,dataByCoordSys:O.list})}else V({type:"hideTip"})}(S,o,n,s),function(O,N,F){var V=F.getZr(),q="axisPointerLastHighlights",Z=Wo(V)[q]||{},Q=Wo(V)[q]={};Ce(O,function(ge,ve){var _e=ge.axisPointerModel.option;"show"===_e.status&&Ce(_e.seriesDataIndices,function(Ee){Q[Ee.seriesIndex+" | "+Ee.dataIndex]=Ee})});var re=[],he=[];Ce(Z,function(ge,ve){!Q[ve]&&he.push(ge)}),Ce(Q,function(ge,ve){!Z[ve]&&re.push(ge)}),he.length&&F.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:he}),re.length&&F.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:re})}(p,0,e),b}}function $l(n,t,e,r,o){var d,p,m,b,_,S,k,D,i=n.axis;if(!i.scale.isBlank()&&i.containData(t))if(n.involveSeries){var s=(b=(m=(p=n).axis).dim,_=d=t,S=[],k=Number.MAX_VALUE,D=-1,Ce(p.seriesModels,function(O,N){var F,V,q=O.getData().mapDimensionsAll(b);if(O.getAxisTooltipData){var Z=O.getAxisTooltipData(q,d,m);V=Z.dataIndices,F=Z.nestestValue}else{if(!(V=O.getData().indicesOfNearest(q[0],d,"category"===m.type?.5:null)).length)return;F=O.getData().get(q[0],V[0])}if(null!=F&&isFinite(F)){var Q=d-F,re=Math.abs(Q);re<=k&&((re<k||Q>=0&&D<0)&&(k=re,D=Q,_=F,S.length=0),Ce(V,function(he){S.push({seriesIndex:O.seriesIndex,dataIndexInside:he,dataIndex:O.getData().getRawIndex(he)})}))}}),{payloadBatch:S,snapToValue:_}),l=s.payloadBatch,c=s.snapToValue;l[0]&&null==o.seriesIndex&&Lt(o,l[0]),!r&&n.snap&&i.containData(c)&&null!=c&&(t=c),e.showPointer(n,t,l),e.showTooltip(n,s,c)}else e.showPointer(n,t)}function tf(n,t,e,r){n[t.key]={value:e,payloadBatch:r}}function Gh(n,t,e,r){var o=e.payloadBatch,i=t.axis,s=i.model,l=t.axisPointerModel;if(t.triggerTooltip&&o.length){var c=t.coordSys.model,d=Mr(c),p=n.map[d];p||(p=n.map[d]={coordSysId:c.id,coordSysIndex:c.componentIndex,coordSysType:c.type,coordSysMainType:c.mainType,dataByAxis:[]},n.list.push(p)),p.dataByAxis.push({axisDim:i.dim,axisIndex:s.componentIndex,axisType:s.type,axisId:s.id,value:r,valueLabelOpt:{precision:l.get(["label","precision"]),formatter:l.get(["label","formatter"])},seriesDataIndices:o.slice()})}}function Ol(n){var t=n.axis.model,e={},r=e.axisDim=n.axis.dim;return e.axisIndex=e[r+"AxisIndex"]=t.componentIndex,e.axisName=e[r+"AxisName"]=t.name,e.axisId=e[r+"AxisId"]=t.id,e}function uh(n){return!n||null==n[0]||isNaN(n[0])||null==n[1]||isNaN(n[1])}function ed(n){Uo.registerAxisPointerClass("CartesianAxisPointer",YI),n.registerComponentModel(sP),n.registerComponentView(jt),n.registerPreprocessor(function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!Ue(e)&&(t.axisPointer.link=[e])}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=function Nn(n,t){var r,o,i,s,l,c,d,e={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return r=e,i=t,s=(o=n).getComponent("tooltip"),l=o.getComponent("axisPointer"),c=l.get("link",!0)||[],d=[],Ce(i.getCoordinateSystems(),function(p){if(p.axisPointerEnabled){var m=Mr(p.model),b=r.coordSysAxesInfo[m]={};r.coordSysMap[m]=p;var _=p.model.getModel("tooltip",s);if(Ce(p.getAxes(),dr(O,!1,null)),p.getTooltipAxes&&s&&_.get("show")){var S="axis"===_.get("trigger"),k="cross"===_.get(["axisPointer","type"]),D=p.getTooltipAxes(_.get(["axisPointer","axis"]));(S||k)&&Ce(D.baseAxes,dr(O,!k||"cross",S)),k&&Ce(D.otherAxes,dr(O,"cross",!1))}}function O(N,F,V){var q=V.model.getModel("axisPointer",l),Z=q.get("show");if(Z&&("auto"!==Z||N||In(q))){null==F&&(F=q.get("triggerTooltip"));var Q=(q=N?function(Ee,ze,Ge,Xe,$e,nt){var yt=ze.getModel("axisPointer"),_t={};Ce(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function(Rt){_t[Rt]=an(yt.get(Rt))}),_t.snap="category"!==Ee.type&&!!nt,"cross"===yt.get("type")&&(_t.type="line");var Et=_t.label||(_t.label={});if(null==Et.show&&(Et.show=!1),"cross"===$e){var hn=yt.get(["label","show"]);if(Et.show=null==hn||hn,!nt){var Zn=_t.lineStyle=yt.get("crossStyle");Zn&&Yn(Et,Zn.textStyle)}}return Ee.model.getModel("axisPointer",new aa(_t,Ge,Xe))}(V,_,l,o,N,F):q).get("snap"),re=Mr(V.model),he=F||Q||"category"===V.type,ge=r.axesInfo[re]={key:re,axis:V,coordSys:p,axisPointerModel:q,triggerTooltip:F,involveSeries:he,snap:Q,useHandle:In(q),seriesModels:[],linkGroup:null};b[re]=ge,r.seriesInvolved=r.seriesInvolved||he;var ve=function(Ee,ze){for(var Ge=ze.model,Xe=ze.dim,$e=0;$e<Ee.length;$e++){var nt=Ee[$e]||{};if(_r(nt[Xe+"AxisId"],Ge.id)||_r(nt[Xe+"AxisIndex"],Ge.componentIndex)||_r(nt[Xe+"AxisName"],Ge.name))return $e}}(c,V);if(null!=ve){var _e=d[ve]||(d[ve]={axesInfo:{}});_e.axesInfo[re]=ge,_e.mapper=c[ve].mapper,ge.linkGroup=_e}}}}),e.seriesInvolved&&function(r,o){o.eachSeries(function(i){var s=i.coordinateSystem,l=i.get(["tooltip","trigger"],!0),c=i.get(["tooltip","show"],!0);s&&"none"!==l&&!1!==l&&"item"!==l&&!1!==c&&!1!==i.get(["axisPointer","show"],!0)&&Ce(r.coordSysAxesInfo[Mr(s.model)],function(d){var p=d.axis;s.getAxis(p.dim)===p&&(d.seriesModels.push(i),null==d.seriesDataCount&&(d.seriesDataCount=0),d.seriesDataCount+=i.getData().count())})})}(e,n),e}(t,e)}),n.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},xf)}var UR=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.makeElOption=function(e,r,o,i,s){var l=o.axis;"angle"===l.dim&&(this.animationThreshold=Math.PI/18);var c=l.polar,d=c.getOtherAxis(l).getExtent(),p=l.dataToCoord(r),m=i.get("type");if(m&&"none"!==m){var b=k_(i),_=KI[m](l,c,p,d);_.style=b,e.graphicKey=_.type,e.pointer=_}var S=function(k,D,O,N,F){var V=D.axis,q=V.dataToCoord(k),Z=N.getAngleAxis().getExtent()[0];Z=Z/180*Math.PI;var Q,re,he,ge=N.getRadiusAxis().getExtent();if("radius"===V.dim){var ve=[1,0,0,1,0,0];Pl(ve,ve,Z),Rc(ve,ve,[N.cx,N.cy]),Q=hl([q,-F],ve);var _e=D.getModel("axisLabel").get("rotate")||0,Ee=bn.innerTextLayout(Z,_e*Math.PI/180,-1);re=Ee.textAlign,he=Ee.textVerticalAlign}else{var ze=ge[1];Q=N.coordToPoint([ze+F,q]);var Ge=N.cx,Xe=N.cy;re=Math.abs(Q[0]-Ge)/ze<.3?"center":Q[0]>Ge?"left":"right",he=Math.abs(Q[1]-Xe)/ze<.3?"middle":Q[1]>Xe?"top":"bottom"}return{position:Q,align:re,verticalAlign:he}}(r,o,0,c,i.get(["label","margin"]));Uv(e,o,i,s,S)},t}(Gv),KI={line:function(n,t,e,r){return"angle"===n.dim?{type:"Line",shape:DS(t.coordToPoint([r[0],e]),t.coordToPoint([r[1],e]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:e}}},shadow:function(n,t,e,r){var o=Math.max(1,n.getBandWidth()),i=Math.PI/180;return"angle"===n.dim?{type:"Sector",shape:wT(t.cx,t.cy,r[0],r[1],(-e-o/2)*i,(o/2-e)*i)}:{type:"Sector",shape:wT(t.cx,t.cy,e-o/2,e+o/2,0,2*Math.PI)}}},kM=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.findAxisModel=function(e){var r;return this.ecModel.eachComponent(e,function(o){o.getCoordSysModel()===this&&(r=o)},this),r},t.type="polar",t.dependencies=["radiusAxis","angleAxis"],t.defaultOption={z:0,center:["50%","50%"],radius:"80%"},t}(W),$I=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",ll).models[0]},t.type="polarAxis",t}(W);na($I,Q0);var $B=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="angleAxis",t}($I),JB=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="radiusAxis",t}($I),jR=function(n){function t(e,r){return n.call(this,"radius",e,r)||this}return gt(t,n),t.prototype.pointToData=function(e,r){return this.polar.pointToData(e,r)["radius"===this.dim?0:1]},t}(th);jR.prototype.dataToRadius=th.prototype.dataToCoord,jR.prototype.radiusToData=th.prototype.coordToData;var QB=hi(),YR=function(n){function t(e,r){return n.call(this,"angle",e,r||[0,360])||this}return gt(t,n),t.prototype.pointToData=function(e,r){return this.polar.pointToData(e,r)["radius"===this.dim?0:1]},t.prototype.calculateCategoryInterval=function(){var e=this,r=e.getLabelModel(),o=e.scale,i=o.getExtent(),s=o.count();if(i[1]-i[0]<1)return 0;var l=i[0],c=e.dataToCoord(l+1)-e.dataToCoord(l),d=Math.abs(c),p=ua(null==l?"":l+"",r.getFont(),"center","top"),m=Math.max(p.height,7)/d;isNaN(m)&&(m=1/0);var b=Math.max(0,Math.floor(m)),_=QB(e.model),S=_.lastAutoInterval,k=_.lastTickCount;return null!=S&&null!=k&&Math.abs(S-b)<=1&&Math.abs(k-s)<=1&&S>b?b=S:(_.lastTickCount=s,_.lastAutoInterval=b),b},t}(th);YR.prototype.dataToAngle=th.prototype.dataToCoord,YR.prototype.angleToData=th.prototype.coordToData;var zL=["radius","angle"],e5=function(){function n(t){this.dimensions=zL,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new jR,this._angleAxis=new YR,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return n.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},n.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},n.prototype.getAxis=function(t){return this["_"+t+"Axis"]},n.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},n.prototype.getAxesByScale=function(t){var e=[],r=this._angleAxis,o=this._radiusAxis;return r.scale.type===t&&e.push(r),o.scale.type===t&&e.push(o),e},n.prototype.getAngleAxis=function(){return this._angleAxis},n.prototype.getRadiusAxis=function(){return this._radiusAxis},n.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},n.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},n.prototype.getTooltipAxes=function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},n.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},n.prototype.pointToData=function(t,e){var r=this.pointToCoord(t);return[this._radiusAxis.radiusToData(r[0],e),this._angleAxis.angleToData(r[1],e)]},n.prototype.pointToCoord=function(t){var e=t[0]-this.cx,r=t[1]-this.cy,o=this.getAngleAxis(),i=o.getExtent(),s=Math.min(i[0],i[1]),l=Math.max(i[0],i[1]);o.inverse?s=l-360:l=s+360;var c=Math.sqrt(e*e+r*r);e/=c,r/=c;for(var d=Math.atan2(-r,e)/Math.PI*180,p=d<s?1:-1;d<s||d>l;)d+=360*p;return[c,d]},n.prototype.coordToPoint=function(t){var e=t[0],r=t[1]/180*Math.PI;return[Math.cos(r)*e+this.cx,-Math.sin(r)*e+this.cy]},n.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var r=t.getExtent(),o=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-r[0]*o,endAngle:-r[1]*o,clockwise:t.inverse,contain:function(i,s){var l=i-this.cx,c=s-this.cy,d=l*l+c*c-1e-4,p=this.r,m=this.r0;return d<=p*p&&d>=m*m}}},n.prototype.convertToPixel=function(t,e,r){return FL(e)===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(t,e,r){return FL(e)===this?this.pointToData(r):null},n}();function FL(n){var t=n.seriesModel,e=n.polarModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}function t5(n,t){var e=this,r=e.getAngleAxis(),o=e.getRadiusAxis();if(r.scale.setExtent(1/0,-1/0),o.scale.setExtent(1/0,-1/0),n.eachSeries(function(l){if(l.coordinateSystem===e){var c=l.getData();Ce(Qx(c,"radius"),function(d){o.scale.unionExtentFromData(c,d)}),Ce(Qx(c,"angle"),function(d){r.scale.unionExtentFromData(c,d)})}}),dp(r.scale,r.model),dp(o.scale,o.model),"category"===r.type&&!r.onBand){var i=r.getExtent(),s=360/r.scale.count();r.inverse?i[1]+=s:i[1]-=s,r.setExtent(i[0],i[1])}}function VL(n,t){if(n.type=t.get("type"),n.scale=$0(t),n.onBand=t.get("boundaryGap")&&"category"===n.type,n.inverse=t.get("inverse"),"angleAxis"===t.mainType){n.inverse=n.inverse!==t.get("clockwise");var e=t.get("startAngle");n.setExtent(e,e+(n.inverse?-360:360))}t.axis=n,n.model=t}var n5={dimensions:zL,create:function(n,t){var e=[];return n.eachComponent("polar",function(r,o){var i=new e5(o+"");i.update=t5;var s=i.getRadiusAxis(),l=i.getAngleAxis(),c=r.findAxisModel("radiusAxis"),d=r.findAxisModel("angleAxis");VL(s,c),VL(l,d),function(p,m,b){var _=m.get("center"),S=b.getWidth(),k=b.getHeight();p.cx=qn(_[0],S),p.cy=qn(_[1],k);var D=p.getRadiusAxis(),O=Math.min(S,k)/2,N=m.get("radius");null==N?N=[0,"100%"]:Ue(N)||(N=[0,N]);var F=[qn(N[0],O),qn(N[1],O)];D.inverse?D.setExtent(F[1],F[0]):D.setExtent(F[0],F[1])}(i,r,t),e.push(i),r.coordinateSystem=i,i.model=r}),n.eachSeries(function(r){if("polar"===r.get("coordinateSystem")){var o=r.getReferringComponents("polar",ll).models[0];r.coordinateSystem=o.coordinateSystem}}),e}},r5=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function lP(n,t,e){t[1]>t[0]&&(t=t.slice().reverse());var r=n.coordToPoint([t[0],e]),o=n.coordToPoint([t[1],e]);return{x1:r[0],y1:r[1],x2:o[0],y2:o[1]}}function cP(n){return n.getRadiusAxis().inverse?0:1}function HL(n){var t=n[0],e=n[n.length-1];t&&e&&Math.abs(Math.abs(t.coord-e.coord)-360)<1e-4&&n.pop()}var o5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return gt(t,n),t.prototype.render=function(e,r){if(this.group.removeAll(),e.get("show")){var o=e.axis,i=o.polar,s=i.getRadiusAxis().getExtent(),l=o.getTicksCoords(),c=o.getMinorTicksCoords(),d=mt(o.getViewLabels(),function(p){p=an(p);var m=o.scale,b="ordinal"===m.type?m.getRawOrdinalNumber(p.tickValue):p.tickValue;return p.coord=o.dataToCoord(b),p});HL(d),HL(l),Ce(r5,function(p){!e.get([p,"show"])||o.scale.isBlank()&&"axisLine"!==p||i5[p](this.group,e,i,l,c,s,d)},this)}},t.type="angleAxis",t}(Uo),i5={axisLine:function(n,t,e,r,o,i){var s,l=t.getModel(["axisLine","lineStyle"]),c=cP(e),d=c?0:1;(s=0===i[d]?new Bf({shape:{cx:e.cx,cy:e.cy,r:i[c]},style:l.getLineStyle(),z2:1,silent:!0}):new rp({shape:{cx:e.cx,cy:e.cy,r:i[c],r0:i[d]},style:l.getLineStyle(),z2:1,silent:!0})).style.fill=null,n.add(s)},axisTick:function(n,t,e,r,o,i){var s=t.getModel("axisTick"),l=(s.get("inside")?-1:1)*s.get("length"),c=i[cP(e)],d=mt(r,function(p){return new Pu({shape:lP(e,[c,c+l],p.coord)})});n.add(fc(d,{style:Yn(s.getModel("lineStyle").getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])})}))},minorTick:function(n,t,e,r,o,i){if(o.length){for(var s=t.getModel("axisTick"),l=t.getModel("minorTick"),c=(s.get("inside")?-1:1)*l.get("length"),d=i[cP(e)],p=[],m=0;m<o.length;m++)for(var b=0;b<o[m].length;b++)p.push(new Pu({shape:lP(e,[d,d+c],o[m][b].coord)}));n.add(fc(p,{style:Yn(l.getModel("lineStyle").getLineStyle(),Yn(s.getLineStyle(),{stroke:t.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(n,t,e,r,o,i,s){var l=t.getCategories(!0),c=t.getModel("axisLabel"),d=c.get("margin"),p=t.get("triggerEvent");Ce(s,function(m,b){var _=c,S=m.tickValue,k=i[cP(e)],D=e.coordToPoint([k+d,m.coord]),O=e.cx,N=e.cy,F=Math.abs(D[0]-O)/k<.3?"center":D[0]>O?"left":"right",V=Math.abs(D[1]-N)/k<.3?"middle":D[1]>N?"top":"bottom";if(l&&l[S]){var q=l[S];wr(q)&&q.textStyle&&(_=new aa(q.textStyle,c,c.ecModel))}var Z=new Oi({silent:bn.isLabelSilent(t),style:Vi(_,{x:D[0],y:D[1],fill:_.getTextColor()||t.get(["axisLine","lineStyle","color"]),text:m.formattedLabel,align:F,verticalAlign:V})});if(n.add(Z),p){var Q=bn.makeAxisEventDataBase(t);Q.targetType="axisLabel",Q.value=m.rawLabel,So(Z).eventData=Q}},this)},splitLine:function(n,t,e,r,o,i){var s=t.getModel("splitLine").getModel("lineStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var d=[],p=0;p<r.length;p++){var m=c++%l.length;d[m]=d[m]||[],d[m].push(new Pu({shape:lP(e,i,r[p].coord)}))}for(p=0;p<d.length;p++)n.add(fc(d[p],{style:Yn({stroke:l[p%l.length]},s.getLineStyle()),silent:!0,z:t.get("z")}))},minorSplitLine:function(n,t,e,r,o,i){if(o.length){for(var s=t.getModel("minorSplitLine").getModel("lineStyle"),l=[],c=0;c<o.length;c++)for(var d=0;d<o[c].length;d++)l.push(new Pu({shape:lP(e,i,o[c][d].coord)}));n.add(fc(l,{style:s.getLineStyle(),silent:!0,z:t.get("z")}))}},splitArea:function(n,t,e,r,o,i){if(r.length){var s=t.getModel("splitArea").getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var d=[],p=Math.PI/180,m=-r[0].coord*p,b=Math.min(i[0],i[1]),_=Math.max(i[0],i[1]),S=t.get("clockwise"),k=1,D=r.length;k<=D;k++){var O=k===D?r[0].coord:r[k].coord,N=c++%l.length;d[N]=d[N]||[],d[N].push(new Cc({shape:{cx:e.cx,cy:e.cy,r0:b,r:_,startAngle:m,endAngle:-O*p,clockwise:S},silent:!0})),m=-O*p}for(k=0;k<d.length;k++)n.add(fc(d[k],{style:Yn({fill:l[k%l.length]},s.getAreaStyle()),silent:!0}))}}},a5=["axisLine","axisTickLabel","axisName"],s5=["splitLine","splitArea","minorSplitLine"],u5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="PolarAxisPointer",e}return gt(t,n),t.prototype.render=function(e,r){if(this.group.removeAll(),e.get("show")){var o=this._axisGroup,i=this._axisGroup=new xo;this.group.add(i);var s=e.axis,l=s.polar,c=l.getAngleAxis(),d=s.getTicksCoords(),p=s.getMinorTicksCoords(),m=c.getExtent()[0],b=s.getExtent(),_={position:[(k=l).cx,k.cy],rotation:m/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1},S=new bn(e,_);Ce(a5,S.add,S),i.add(S.getGroup()),Ho(o,i,e),Ce(s5,function(k){e.get([k,"show"])&&!s.scale.isBlank()&&l5[k](this.group,e,l,m,b,d,p)},this)}var k},t.type="radiusAxis",t}(Uo),l5={splitLine:function(n,t,e,r,o,i){var s=t.getModel("splitLine").getModel("lineStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var d=[],p=0;p<i.length;p++){var m=c++%l.length;d[m]=d[m]||[],d[m].push(new Bf({shape:{cx:e.cx,cy:e.cy,r:Math.max(i[p].coord,0)}}))}for(p=0;p<d.length;p++)n.add(fc(d[p],{style:Yn({stroke:l[p%l.length],fill:null},s.getLineStyle()),silent:!0}))},minorSplitLine:function(n,t,e,r,o,i,s){if(s.length){for(var l=t.getModel("minorSplitLine").getModel("lineStyle"),c=[],d=0;d<s.length;d++)for(var p=0;p<s[d].length;p++)c.push(new Bf({shape:{cx:e.cx,cy:e.cy,r:s[d][p].coord}}));n.add(fc(c,{style:Yn({fill:null},l.getLineStyle()),silent:!0}))}},splitArea:function(n,t,e,r,o,i){if(i.length){var s=t.getModel("splitArea").getModel("areaStyle"),l=s.get("color"),c=0;l=l instanceof Array?l:[l];for(var d=[],p=i[0].coord,m=1;m<i.length;m++){var b=c++%l.length;d[b]=d[b]||[],d[b].push(new Cc({shape:{cx:e.cx,cy:e.cy,r0:p,r:i[m].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),p=i[m].coord}for(m=0;m<d.length;m++)n.add(fc(d[m],{style:Yn({fill:l[m%l.length]},s.getAreaStyle()),silent:!0}))}}};function WL(n){return n.get("stack")||"__ec_stack_"+n.seriesIndex}function GL(n,t){return t.dim+n.model.componentIndex}function c5(n,t,e){var r={},o=function(i){var s={};Ce(i,function(c,d){var p=c.getData(),m=c.coordinateSystem,b=m.getBaseAxis(),_=GL(m,b),S=b.getExtent(),k="category"===b.type?b.getBandWidth():Math.abs(S[1]-S[0])/p.count(),D=s[_]||{bandWidth:k,remainedWidth:k,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},O=D.stacks;s[_]=D;var N=WL(c);O[N]||D.autoWidthCount++,O[N]=O[N]||{width:0,maxWidth:0};var F=qn(c.get("barWidth"),k),V=qn(c.get("barMaxWidth"),k),q=c.get("barGap"),Z=c.get("barCategoryGap");F&&!O[N].width&&(F=Math.min(D.remainedWidth,F),O[N].width=F,D.remainedWidth-=F),V&&(O[N].maxWidth=V),null!=q&&(D.gap=q),null!=Z&&(D.categoryGap=Z)});var l={};return Ce(s,function(c,d){l[d]={};var p=c.stacks,b=qn(c.categoryGap,c.bandWidth),_=qn(c.gap,1),S=c.remainedWidth,k=c.autoWidthCount,D=(S-b)/(k+(k-1)*_);D=Math.max(D,0),Ce(p,function(V,q){var Z=V.maxWidth;Z&&Z<D&&(Z=Math.min(Z,S),V.width&&(Z=Math.min(Z,V.width)),S-=Z,V.width=Z,k--)}),D=(S-b)/(k+(k-1)*_),D=Math.max(D,0);var O,N=0;Ce(p,function(V,q){V.width||(V.width=D),O=V,N+=V.width*(1+_)}),O&&(N-=O.width*_);var F=-N/2;Ce(p,function(V,q){l[d][q]=l[d][q]||{offset:F,width:V.width},F+=V.width*(1+_)})}),l}(yo(t.getSeriesByType(n),function(i){return!t.isSeriesFiltered(i)&&i.coordinateSystem&&"polar"===i.coordinateSystem.type}));t.eachSeriesByType(n,function(i){if("polar"===i.coordinateSystem.type){var s=i.getData(),l=i.coordinateSystem,c=l.getBaseAxis(),d=GL(l,c),p=WL(i),m=o[d][p],b=m.offset,_=m.width,S=l.getOtherAxis(c),k=i.coordinateSystem.cx,D=i.coordinateSystem.cy,O=i.get("barMinHeight")||0,N=i.get("barMinAngle")||0;r[p]=r[p]||[];for(var F=s.mapDimension(S.dim),V=s.mapDimension(c.dim),q=pi(s,F),Z="radius"!==c.dim||!i.get("roundCap",!0),Q=S.dataToCoord(0),re=0,he=s.count();re<he;re++){var ge=s.get(F,re),ve=s.get(V,re),_e=ge>=0?"p":"n",Ee=Q;q&&(r[p][ve]||(r[p][ve]={p:Q,n:Q}),Ee=r[p][ve][_e]);var ze=void 0,Ge=void 0,Xe=void 0,$e=void 0;if("radius"===S.dim){var nt=S.dataToCoord(ge)-Q,yt=c.dataToCoord(ve);Math.abs(nt)<O&&(nt=(nt<0?-1:1)*O),ze=Ee,Ge=Ee+nt,$e=(Xe=yt-b)-_,q&&(r[p][ve][_e]=Ge)}else{var _t=S.dataToCoord(ge,Z)-Q,Et=c.dataToCoord(ve);Math.abs(_t)<N&&(_t=(_t<0?-1:1)*N),Ge=(ze=Et+b)+_,Xe=Ee,$e=Ee+_t,q&&(r[p][ve][_e]=$e)}s.setItemLayout(re,{cx:k,cy:D,r0:ze,r:Ge,startAngle:-Xe*Math.PI/180,endAngle:-$e*Math.PI/180,clockwise:Xe>=$e})}}})}var f5={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},d5={splitNumber:5},h5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="polar",t}(ks);function qR(n,t){t=t||{};var r=n.axis,o={},i=r.position,s=r.orient,l=n.coordinateSystem.getRect(),c=[l.x,l.x+l.width,l.y,l.y+l.height],d={horizontal:{top:c[2],bottom:c[3]},vertical:{left:c[0],right:c[1]}};o.position=["vertical"===s?d.vertical[i]:c[0],"horizontal"===s?d.horizontal[i]:c[3]],o.rotation=Math.PI/2*{horizontal:0,vertical:1}[s],o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,right:1,left:-1}[i],n.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),Hn(t.labelInside,n.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var p=t.rotate;return null==p&&(p=n.get(["axisLabel","rotate"])),o.labelRotation="top"===i?-p:p,o.z2=1,o}var p5=["axisLine","axisTickLabel","axisName"],g5=["splitArea","splitLine"],m5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.axisPointerClass="SingleAxisPointer",e}return gt(t,n),t.prototype.render=function(e,r,o,i){var s=this.group;s.removeAll();var l=this._axisGroup;this._axisGroup=new xo;var c=qR(e),d=new bn(e,c);Ce(p5,d.add,d),s.add(this._axisGroup),s.add(d.getGroup()),Ce(g5,function(p){e.get([p,"show"])&&v5[p](this,this.group,this._axisGroup,e)},this),Ho(l,this._axisGroup,e),n.prototype.render.call(this,e,r,o,i)},t.prototype.remove=function(){tn(this)},t.type="singleAxis",t}(Uo),v5={splitLine:function(n,t,e,r){var o=r.axis;if(!o.scale.isBlank()){var i=r.getModel("splitLine"),s=i.getModel("lineStyle"),l=s.get("color");l=l instanceof Array?l:[l];for(var c=s.get("width"),d=r.coordinateSystem.getRect(),p=o.isHorizontal(),m=[],b=0,_=o.getTicksCoords({tickModel:i}),S=[],k=[],D=0;D<_.length;++D){var O=o.toGlobalCoord(_[D].coord);p?(S[0]=O,S[1]=d.y,k[0]=O,k[1]=d.y+d.height):(S[0]=d.x,S[1]=O,k[0]=d.x+d.width,k[1]=O);var N=new Pu({shape:{x1:S[0],y1:S[1],x2:k[0],y2:k[1]},silent:!0});vd(N.shape,c);var F=b++%l.length;m[F]=m[F]||[],m[F].push(N)}var V=s.getLineStyle(["color"]);for(D=0;D<m.length;++D)t.add(fc(m[D],{style:Yn({stroke:l[D%l.length]},V),silent:!0}))}},splitArea:function(n,t,e,r){xt(n,e,r,r)}},fP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.getCoordSysModel=function(){return this},t.type="singleAxis",t.layoutMode="box",t.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},t}(W);na(fP,Q0.prototype);var y5=function(n){function t(e,r,o,i,s){var l=n.call(this,e,r,o)||this;return l.type=i||"value",l.position=s||"bottom",l}return gt(t,n),t.prototype.isHorizontal=function(){var e=this.position;return"top"===e||"bottom"===e},t.prototype.pointToData=function(e,r){return this.coordinateSystem.pointToData(e)[0]},t}(th),UL=["single"],b5=function(){function n(t,e,r){this.type="single",this.dimension="single",this.dimensions=UL,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,r)}return n.prototype._init=function(t,e,r){var i=new y5(this.dimension,$0(t),[0,0],t.get("type"),t.get("position"));i.onBand="category"===i.type&&t.get("boundaryGap"),i.inverse=t.get("inverse"),i.orient=t.get("orient"),t.axis=i,i.model=t,i.coordinateSystem=this,this._axis=i},n.prototype.update=function(t,e){t.eachSeries(function(r){if(r.coordinateSystem===this){var o=r.getData();Ce(o.mapDimensionsAll(this.dimension),function(i){this._axis.scale.unionExtentFromData(o,i)},this),dp(this._axis.scale,this._axis.model)}},this)},n.prototype.resize=function(t,e){this._rect=tl({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},n.prototype.getRect=function(){return this._rect},n.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,r=e.isHorizontal(),o=r?[0,t.width]:[0,t.height],i=e.inverse?1:0;e.setExtent(o[i],o[1-i]),this._updateAxisTransform(e,r?t.x:t.y)},n.prototype._updateAxisTransform=function(t,e){var r=t.getExtent(),o=r[0]+r[1],i=t.isHorizontal();t.toGlobalCoord=i?function(s){return s+e}:function(s){return o-s+e},t.toLocalCoord=i?function(s){return s-e}:function(s){return o-s+e}},n.prototype.getAxis=function(){return this._axis},n.prototype.getBaseAxis=function(){return this._axis},n.prototype.getAxes=function(){return[this._axis]},n.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},n.prototype.containPoint=function(t){var e=this.getRect(),r=this.getAxis();return"horizontal"===r.orient?r.contain(r.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:r.contain(r.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},n.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},n.prototype.dataToPoint=function(t){var e=this.getAxis(),r=this.getRect(),o=[],i="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),o[i]=e.toGlobalCoord(e.dataToCoord(+t)),o[1-i]=0===i?r.y+r.height/2:r.x+r.width/2,o},n.prototype.convertToPixel=function(t,e,r){return jL(e)===this?this.dataToPoint(r):null},n.prototype.convertFromPixel=function(t,e,r){return jL(e)===this?this.pointToData(r):null},n}();function jL(n){var t=n.seriesModel,e=n.singleAxisModel;return e&&e.coordinateSystem||t&&t.coordinateSystem}var x5={create:function(n,t){var e=[];return n.eachComponent("singleAxis",function(r,o){var i=new b5(r,n,t);i.name="single_"+o,i.resize(r,t),r.coordinateSystem=i,e.push(i)}),n.eachSeries(function(r){if("singleAxis"===r.get("coordinateSystem")){var o=r.getReferringComponents("singleAxis",ll).models[0];r.coordinateSystem=o&&o.coordinateSystem}}),e},dimensions:UL},YL=["x","y"],_5=["width","height"],w5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.makeElOption=function(e,r,o,i,s){var l=o.axis,c=l.coordinateSystem,d=XR(c,1-dP(l)),p=c.dataToPoint(r)[0],m=i.get("type");if(m&&"none"!==m){var b=k_(i),_=S5[m](l,p,d);_.style=b,e.graphicKey=_.type,e.pointer=_}TS(r,e,qR(o),o,i,s)},t.prototype.getHandleTransform=function(e,r,o){var i=qR(r,{labelInside:!1});i.labelMargin=o.get(["handle","margin"]);var s=MM(r.axis,e,i);return{x:s[0],y:s[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},t.prototype.updateHandleTransform=function(e,r,o,i){var s=o.axis,l=s.coordinateSystem,c=dP(s),d=XR(l,c),p=[e.x,e.y];p[c]+=r[c],p[c]=Math.min(d[1],p[c]),p[c]=Math.max(d[0],p[c]);var m=XR(l,1-c),b=(m[1]+m[0])/2,_=[b,b];return _[c]=p[c],{x:p[0],y:p[1],rotation:e.rotation,cursorPoint:_,tooltipOption:{verticalAlign:"middle"}}},t}(Gv),S5={line:function(n,t,e){return{type:"Line",subPixelOptimize:!0,shape:DS([t,e[0]],[t,e[1]],dP(n))}},shadow:function(n,t,e){var r=n.getBandWidth();return{type:"Rect",shape:iP([t-r/2,e[0]],[r,e[1]-e[0]],dP(n))}}};function dP(n){return n.isHorizontal()?0:1}function XR(n,t){var e=n.getRect();return[e[YL[t]],e[YL[t]]+e[_5[t]]]}var C5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="single",t}(ks),M5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e,r,o){var i=tm(e);n.prototype.init.apply(this,arguments),qL(e,i)},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),qL(this.option,e)},t.prototype.getCellSize=function(){return this.option.cellSize},t.type="calendar",t.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},t}(W);function qL(n,t){var e,r=n.cellSize;1===(e=Ue(r)?r:n.cellSize=[r,r]).length&&(e[1]=e[0]);var o=mt([0,1],function(i){return(null!=(s=t)[gf[l=i][0]]||null!=s[gf[l][1]]&&null!=s[gf[l][2]])&&(e[i]="auto"),null!=e[i]&&"auto"!==e[i];var s,l});em(n,t,{type:"box",ignoreSize:o})}var k5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){var i=this.group;i.removeAll();var s=e.coordinateSystem,l=s.getRangeInfo(),c=s.getOrient(),d=r.getLocaleModel();this._renderDayRect(e,l,i),this._renderLines(e,l,c,i),this._renderYearText(e,l,c,i),this._renderMonthText(e,d,c,i),this._renderWeekText(e,d,l,c,i)},t.prototype._renderDayRect=function(e,r,o){for(var i=e.coordinateSystem,s=e.getModel("itemStyle").getItemStyle(),l=i.getCellWidth(),c=i.getCellHeight(),d=r.start.time;d<=r.end.time;d=i.getNextNDay(d,1).time){var p=i.dataToRect([d],!1).tl,m=new bi({shape:{x:p[0],y:p[1],width:l,height:c},cursor:"default",style:s});o.add(m)}},t.prototype._renderLines=function(e,r,o,i){var s=this,l=e.coordinateSystem,c=e.getModel(["splitLine","lineStyle"]).getLineStyle(),d=e.get(["splitLine","show"]),p=c.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var m=r.start,b=0;m.time<=r.end.time;b++){S(m.formatedDate),0===b&&(m=l.getDateInfo(r.start.y+"-"+r.start.m));var _=m.date;_.setMonth(_.getMonth()+1),m=l.getDateInfo(_)}function S(k){s._firstDayOfMonth.push(l.getDateInfo(k)),s._firstDayPoints.push(l.dataToRect([k],!1).tl);var D=s._getLinePointsOfOneWeek(e,k,o);s._tlpoints.push(D[0]),s._blpoints.push(D[D.length-1]),d&&s._drawSplitline(D,c,i)}S(l.getNextNDay(r.end.time,1).formatedDate),d&&this._drawSplitline(s._getEdgesPoints(s._tlpoints,p,o),c,i),d&&this._drawSplitline(s._getEdgesPoints(s._blpoints,p,o),c,i)},t.prototype._getEdgesPoints=function(e,r,o){var i=[e[0].slice(),e[e.length-1].slice()],s="horizontal"===o?0:1;return i[0][s]=i[0][s]-r/2,i[1][s]=i[1][s]+r/2,i},t.prototype._drawSplitline=function(e,r,o){var i=new Qu({z2:20,shape:{points:e},style:r});o.add(i)},t.prototype._getLinePointsOfOneWeek=function(e,r,o){for(var i=e.coordinateSystem,s=i.getDateInfo(r),l=[],c=0;c<7;c++){var d=i.getNextNDay(s.time,c),p=i.dataToRect([d.time],!1);l[2*d.day]=p.tl,l[2*d.day+1]=p["horizontal"===o?"bl":"tr"]}return l},t.prototype._formatterLabel=function(e,r){return ir(e)&&e?(o=e,Ce(r,function(s,l){o=o.replace("{"+l+"}",s)}),o):yr(e)?e(r):r.nameMap;var o},t.prototype._yearTextPositionControl=function(e,r,o,i,s){var l=r[0],c=r[1],d=["center","bottom"];"bottom"===i?(c+=s,d=["center","top"]):"left"===i?l-=s:"right"===i?(l+=s,d=["center","top"]):c-=s;var p=0;return"left"!==i&&"right"!==i||(p=Math.PI/2),{rotation:p,x:l,y:c,style:{align:d[0],verticalAlign:d[1]}}},t.prototype._renderYearText=function(e,r,o,i){var s=e.getModel("yearLabel");if(s.get("show")){var l=s.get("margin"),c=s.get("position");c||(c="horizontal"!==o?"top":"left");var d=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],p=(d[0][0]+d[1][0])/2,m=(d[0][1]+d[1][1])/2,b="horizontal"===o?0:1,_={top:[p,d[b][1]],bottom:[p,d[1-b][1]],left:[d[1-b][0],m],right:[d[b][0],m]},S=r.start.y;+r.end.y>+r.start.y&&(S=S+"-"+r.end.y);var k=s.get("formatter"),O=this._formatterLabel(k,{start:r.start.y,end:r.end.y,nameMap:S}),N=new Oi({z2:30,style:Vi(s,{text:O})});N.attr(this._yearTextPositionControl(N,_[c],o,c,l)),i.add(N)}},t.prototype._monthTextPositionControl=function(e,r,o,i,s){var l="left",c="top",d=e[0],p=e[1];return"horizontal"===o?(p+=s,r&&(l="center"),"start"===i&&(c="bottom")):(d+=s,r&&(c="middle"),"start"===i&&(l="right")),{x:d,y:p,align:l,verticalAlign:c}},t.prototype._renderMonthText=function(e,r,o,i){var s=e.getModel("monthLabel");if(s.get("show")){var l=s.get("nameMap"),c=s.get("margin"),d=s.get("position"),p=s.get("align"),m=[this._tlpoints,this._blpoints];l&&!ir(l)||(l&&(r=hx(l)||r),l=r.get(["time","monthAbbr"])||[]);var b="start"===d?0:1,_="horizontal"===o?0:1;c="start"===d?-c:c;for(var S="center"===p,k=0;k<m[b].length-1;k++){var D=m[b][k].slice(),O=this._firstDayOfMonth[k];S&&(D[_]=(this._firstDayPoints[k][_]+m[0][k+1][_])/2);var F=s.get("formatter"),V=l[+O.m-1],q={yyyy:O.y,yy:(O.y+"").slice(2),MM:O.m,M:+O.m,nameMap:V},Z=this._formatterLabel(F,q),Q=new Oi({z2:30,style:Lt(Vi(s,{text:Z}),this._monthTextPositionControl(D,S,o,d,c))});i.add(Q)}}},t.prototype._weekTextPositionControl=function(e,r,o,i,s){var l="center",c="middle",d=e[0],p=e[1],m="start"===o;return"horizontal"===r?(d=d+i+(m?1:-1)*s[0]/2,l=m?"right":"left"):(p=p+i+(m?1:-1)*s[1]/2,c=m?"bottom":"top"),{x:d,y:p,align:l,verticalAlign:c}},t.prototype._renderWeekText=function(e,r,o,i,s){var l=e.getModel("dayLabel");if(l.get("show")){var c=e.coordinateSystem,d=l.get("position"),p=l.get("nameMap"),m=l.get("margin"),b=c.getFirstDayOfWeek();(!p||ir(p))&&(p&&(r=hx(p)||r),p=r.get(["time","dayOfWeekShort"])||mt(r.get(["time","dayOfWeekAbbr"]),function(V){return V[0]}));var _=c.getNextNDay(o.end.time,7-o.lweek).time,S=[c.getCellWidth(),c.getCellHeight()];m=qn(m,Math.min(S[1],S[0])),"start"===d&&(_=c.getNextNDay(o.start.time,-(7+o.fweek)).time,m=-m);for(var k=0;k<7;k++){var D,O=c.getNextNDay(_,k),N=c.dataToRect([O.time],!1).center;D=Math.abs((k+b)%7);var F=new Oi({z2:30,style:Lt(Vi(l,{text:p[D]}),this._weekTextPositionControl(N,i,d,m,S))});s.add(F)}}},t.type="calendar",t}(ks),ZR=864e5,T5=function(){function n(t,e,r){this.type="calendar",this.dimensions=n.dimensions,this.getDimensionsInfo=n.getDimensionsInfo,this._model=t}return n.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},n.prototype.getRangeInfo=function(){return this._rangeInfo},n.prototype.getModel=function(){return this._model},n.prototype.getRect=function(){return this._rect},n.prototype.getCellWidth=function(){return this._sw},n.prototype.getCellHeight=function(){return this._sh},n.prototype.getOrient=function(){return this._orient},n.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},n.prototype.getDateInfo=function(t){var e=(t=Af(t)).getFullYear(),r=t.getMonth()+1,o=r<10?"0"+r:""+r,i=t.getDate(),s=i<10?"0"+i:""+i,l=t.getDay();return{y:e+"",m:o,d:s,day:l=Math.abs((l+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+o+"-"+s,date:t}},n.prototype.getNextNDay=function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},n.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var r=this._rangeInfo.weeks||1,o=["width","height"],i=this._model.getCellSize().slice(),s=this._model.getBoxLayoutParams(),l="horizontal"===this._orient?[r,7]:[7,r];Ce([0,1],function(m){p(i,m)&&(s[o[m]]=i[m]*l[m])});var c={width:e.getWidth(),height:e.getHeight()},d=this._rect=tl(s,c);function p(m,b){return null!=m[b]&&"auto"!==m[b]}Ce([0,1],function(m){p(i,m)||(i[m]=d[o[m]]/l[m])}),this._sw=i[0],this._sh=i[1]},n.prototype.dataToPoint=function(t,e){Ue(t)&&(t=t[0]),null==e&&(e=!0);var r=this.getDateInfo(t),o=this._rangeInfo;if(e&&!(r.time>=o.start.time&&r.time<o.end.time+ZR))return[NaN,NaN];var s=r.day,l=this._getRangeInfo([o.start.time,r.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+s*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]:[this._rect.x+l*this._sw+this._sw/2,this._rect.y+s*this._sh+this._sh/2]},n.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},n.prototype.dataToRect=function(t,e){var r=this.dataToPoint(t,e);return{contentShape:{x:r[0]-(this._sw-this._lineWidth)/2,y:r[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:r,tl:[r[0]-this._sw/2,r[1]-this._sh/2],tr:[r[0]+this._sw/2,r[1]-this._sh/2],br:[r[0]+this._sw/2,r[1]+this._sh/2],bl:[r[0]-this._sw/2,r[1]+this._sh/2]}},n.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,r=Math.floor((t[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(r,e-1,o):this._getDateByWeeksAndDay(e,r-1,o)},n.prototype.convertToPixel=function(t,e,r){var o=XL(e);return o===this?o.dataToPoint(r):null},n.prototype.convertFromPixel=function(t,e,r){var o=XL(e);return o===this?o.pointToData(r):null},n.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},n.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(Ue(e)&&1===e.length&&(e=e[0]),Ue(e))t=e;else{var r=e.toString();if(/^\d{4}$/.test(r)&&(t=[r+"-01-01",r+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(r)){var o=this.getDateInfo(r),i=o.date;i.setMonth(i.getMonth()+1);var s=this.getNextNDay(i,-1);t=[o.formatedDate,s.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(r)&&(t=[r,r])}if(!t)return e;var l=this._getRangeInfo(t);return l.start.time>l.end.time&&t.reverse(),t},n.prototype._getRangeInfo=function(t){var e,r=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];r[0].time>r[1].time&&(e=!0,r.reverse());var o=Math.floor(r[1].time/ZR)-Math.floor(r[0].time/ZR)+1,i=new Date(r[0].time),s=i.getDate(),l=r[1].date.getDate();i.setDate(s+o-1);var c=i.getDate();if(c!==l)for(var d=i.getTime()-r[1].time>0?1:-1;(c=i.getDate())!==l&&(i.getTime()-r[1].time)*d>0;)o-=d,i.setDate(c-d);var p=Math.floor((o+r[0].day+6)/7),m=e?1-p:p-1;return e&&r.reverse(),{range:[r[0].formatedDate,r[1].formatedDate],start:r[0],end:r[1],allDay:o,weeks:p,nthWeek:m,fweek:r[0].day,lweek:r[1].day}},n.prototype._getDateByWeeksAndDay=function(t,e,r){var o=this._getRangeInfo(r);if(t>o.weeks||0===t&&e<o.fweek||t===o.weeks&&e>o.lweek)return null;var i=7*(t-1)-o.fweek+e,s=new Date(o.start.time);return s.setDate(+o.start.d+i),this.getDateInfo(s)},n.create=function(t,e){var r=[];return t.eachComponent("calendar",function(o){var i=new n(o,t,e);r.push(i),o.coordinateSystem=i}),t.eachSeries(function(o){"calendar"===o.get("coordinateSystem")&&(o.coordinateSystem=r[o.get("calendarIndex")||0])}),r},n.dimensions=["time","value"],n}();function XL(n){var t=n.calendarModel,e=n.seriesModel;return t?t.coordinateSystem:e?e.coordinateSystem:null}function ZL(n,t){var e;return Ce(t,function(r){null!=n[r]&&"auto"!==n[r]&&(e=!0)}),e}var KL=["transition","enterFrom","leaveTo"],D5=KL.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function hP(n,t,e){if(e&&(!n[e]&&t[e]&&(n[e]={}),n=n[e],t=t[e]),n&&t)for(var r=e?KL:D5,o=0;o<r.length;o++){var i=r[o];null==n[i]&&null!=t[i]&&(n[i]=t[i])}}var A5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.preventAutoZ=!0,e}return gt(t,n),t.prototype.mergeOption=function(e,r){var o=this.option.elements;this.option.elements=null,n.prototype.mergeOption.call(this,e,r),this.option.elements=o},t.prototype.optionUpdated=function(e,r){var o=this.option,i=(r?o:e).elements,s=o.elements=r?[]:o.elements,l=[];this._flatten(i,l,null);var c=Zh(s,l,"normalMerge"),d=this._elOptionsToUpdate=[];Ce(c,function(p,m){var _,S,k,D,O,N,b=p.newOption;b&&(d.push(b),function(_,S){var k=_.existing;if(S.id=_.keyInfo.id,!S.type&&k&&(S.type=k.type),null==S.parentId){var D=S.parentOption;D?S.parentId=D.id:k&&(S.parentId=k.parentId)}S.parentOption=null}(p,b),_=s,S=m,D=Lt({},k=b),O=_[S],"merge"===(N=k.$action||"merge")?O?(ln(O,D,!0),em(O,D,{ignoreSize:!0}),M(k,O),hP(k,O),hP(k,O,"shape"),hP(k,O,"style"),hP(k,O,"extra"),k.clipPath=O.clipPath):_[S]=D:"replace"===N?_[S]=D:"remove"===N&&O&&(_[S]=null),function(_,S){if(_&&(_.hv=S.hv=[ZL(S,["left","right"]),ZL(S,["top","bottom"])],"group"===_.type)){var k=_,D=S;null==k.width&&(k.width=D.width=0),null==k.height&&(k.height=D.height=0)}}(s[m],b))},this),o.elements=yo(s,function(p){return p&&delete p.$action,null!=p})},t.prototype._flatten=function(e,r,o){Ce(e,function(i){if(i){o&&(i.parentOption=o),r.push(i);var s=i.children;s&&s.length&&this._flatten(s,r,i),delete i.children}},this)},t.prototype.useElOptionsToUpdate=function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e},t.type="graphic",t.defaultOption={elements:[]},t}(W),$L={path:null,compoundPath:null,group:xo,image:fl,text:Oi},mb=hi(),I5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(){this._elMap=Or()},t.prototype.render=function(e,r,o){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,o)},t.prototype._updateElements=function(e){var r=e.useElOptionsToUpdate();if(r){var o=this._elMap,i=this.group,s=e.get("z"),l=e.get("zlevel");Ce(r,function(c){var d=is(c.id,null),p=null!=d?o.get(d):null,m=is(c.parentId,null),b=null!=m?o.get(m):i,_=c.type,S=c.style;"text"===_&&S&&c.hv&&c.hv[1]&&(S.textVerticalAlign=S.textBaseline=S.verticalAlign=S.align=null);var k=c.textContent,D=c.textConfig;if(S&&de(S,_,!!D,!!k)){var O=ye(S,_,!0);!D&&O.textConfig&&(D=c.textConfig=O.textConfig),!k&&O.textContent&&(k=O.textContent)}var Xe,N=(Xe=Lt({},Xe=c),Ce(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(dv),function($e){delete Xe[$e]}),Xe),F=c.$action||"merge",V="merge"===F,q="replace"===F;if(V){var Z=p;(Ee=!p)?Z=JL(d,b,c.type,o):(Z&&(mb(Z).isNew=!1),wi(Z)),Z&&(Qe(Z,N,e,{isInit:Ee}),QL(Z,c,s,l))}else if(q){pP(p,c,o,e);var Q=JL(d,b,c.type,o);Q&&(Qe(Q,N,e,{isInit:!0}),QL(Q,c,s,l))}else"remove"===F&&(lt(p,c),pP(p,c,o,e));var re=o.get(d);if(re&&k)if(V){var he=re.getTextContent();he?he.attr(k):re.setTextContent(new Oi(k))}else q&&re.setTextContent(new Oi(k));if(re){var ge=c.clipPath;if(ge){var ve=ge.type,_e=void 0,Ee=!1;if(V){var ze=re.getClipPath();_e=(Ee=!ze||mb(ze).type!==ve)?KR(ve):ze}else q&&(Ee=!0,_e=KR(ve));re.setClipPath(_e),Qe(_e,ge,e,{isInit:Ee}),Ui(_e,ge.keyframeAnimation,e)}var Ge=mb(re);re.setTextConfig(D),Ge.option=c,function(Xe,$e,nt){var yt=So(Xe).eventData;Xe.silent||Xe.ignore||yt||(yt=So(Xe).eventData={componentType:"graphic",componentIndex:$e.componentIndex,name:Xe.name}),yt&&(yt.info=nt.info)}(re,e,c),yu({el:re,componentModel:e,itemName:re.name,itemTooltipOption:c.tooltip}),Ui(re,c.keyframeAnimation,e)}})}},t.prototype._relocate=function(e,r){for(var o=e.option.elements,i=this.group,s=this._elMap,l=r.getWidth(),c=r.getHeight(),d=["x","y"],p=0;p<o.length;p++)if((D=null!=(k=is((S=o[p]).id,null))?s.get(k):null)&&D.isGroup){var m=(O=D.parent)===i,b=mb(D),_=mb(O);b.width=qn(b.option.width,m?l:_.width)||0,b.height=qn(b.option.height,m?c:_.height)||0}for(p=o.length-1;p>=0;p--){var S,k,D;if(D=null!=(k=is((S=o[p]).id,null))?s.get(k):null){var O=D.parent,N=(_=mb(O),{}),F=hv(D,S,O===i?{width:l,height:c}:{width:_.width,height:_.height},null,{hv:S.hv,boundingMode:S.bounding},N);if(!mb(D).isNew&&F){for(var V=S.transition,q={},Z=0;Z<d.length;Z++){var Q=d[Z],re=N[Q];V&&(Tt(V)||Ir(V,Q)>=0)?q[Q]=re:D[Q]=re}mo(D,q,e,0)}else D.attr(N)}}},t.prototype._clear=function(){var e=this,r=this._elMap;r.each(function(o){pP(o,mb(o).option,r,e._lastGraphicModel)}),this._elMap=Or()},t.prototype.dispose=function(){this._clear()},t.type="graphic",t}(ks);function KR(n){var e=new(br($L,n)?$L[n]:v0(n))({});return mb(e).type=n,e}function JL(n,t,e,r){var o=KR(e);return t.add(o),r.set(n,o),mb(o).id=n,mb(o).isNew=!0,o}function pP(n,t,e,r){n&&n.parent&&("group"===n.type&&n.traverse(function(o){pP(o,t,e,r)}),Ft(n,t,r),e.removeKey(mb(n).id))}function QL(n,t,e,r){n.isGroup||Ce([["cursor",Ml.prototype.cursor],["zlevel",r||0],["z",e||0],["z2",0]],function(o){var i=o[0];br(t,i)?n[i]=un(t[i],o[1]):null==n[i]&&(n[i]=o[1])}),Ce(rr(t),function(o){if(0===o.indexOf("on")){var i=t[o];n[o]=yr(i)?i:null}}),br(t,"draggable")&&(n.draggable=t.draggable),null!=t.name&&(n.name=t.name),null!=t.id&&(n.id=t.id)}var eN=["x","y","radius","angle","single"],O5=["cartesian2d","polar","singleAxis"];function TM(n){return n+"Axis"}function tN(n){var t=n.ecModel,e={infoList:[],infoMap:Or()};return n.eachTargetAxis(function(r,o){var i=t.getComponent(TM(r),o);if(i){var s=i.getCoordSysModel();if(s){var l=s.uid,c=e.infoMap.get(l);c||(e.infoList.push(c={model:s,axisModels:[]}),e.infoMap.set(l,c)),c.axisModels.push(i)}}}),e}var $R=function(){function n(){this.indexList=[],this.indexMap=[]}return n.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},n}(),JI=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._autoThrottle=!0,e._noTarget=!0,e._rangePropMode=["percent","percent"],e}return gt(t,n),t.prototype.init=function(e,r,o){var i=nN(e);this.settledOption=i,this.mergeDefaultAndTheme(e,o),this._doInit(i)},t.prototype.mergeOption=function(e){var r=nN(e);ln(this.option,e,!0),ln(this.settledOption,r,!0),this._doInit(r)},t.prototype._doInit=function(e){var r=this.option;this._setDefaultThrottle(e),this._updateRangeUse(e);var o=this.settledOption;Ce([["start","startValue"],["end","endValue"]],function(i,s){"value"===this._rangePropMode[s]&&(r[i[0]]=o[i[0]]=null)},this),this._resetTarget()},t.prototype._resetTarget=function(){var e=this.get("orient",!0),r=this._targetAxisInfoMap=Or();this._fillSpecifiedTargetAxis(r)?this._orient=e||this._makeAutoOrientByTargetAxis():(this._orient=e||"horizontal",this._fillAutoTargetAxisByOrient(r,this._orient)),this._noTarget=!0,r.each(function(o){o.indexList.length&&(this._noTarget=!1)},this)},t.prototype._fillSpecifiedTargetAxis=function(e){var r=!1;return Ce(eN,function(o){var i=this.getReferringComponents(TM(o),Kh);if(i.specified){r=!0;var s=new $R;Ce(i.models,function(l){s.add(l.componentIndex)}),e.set(o,s)}},this),r},t.prototype._fillAutoTargetAxisByOrient=function(e,r){var o=this.ecModel,i=!0;if(i){var s="vertical"===r?"y":"x";l(o.findComponents({mainType:s+"Axis"}),s)}function l(c,d){var p=c[0];if(p){var m=new $R;if(m.add(p.componentIndex),e.set(d,m),i=!1,"x"===d||"y"===d){var b=p.getReferringComponents("grid",ll).models[0];b&&Ce(c,function(_){p.componentIndex!==_.componentIndex&&b===_.getReferringComponents("grid",ll).models[0]&&m.add(_.componentIndex)})}}}i&&l(o.findComponents({mainType:"singleAxis",filter:function(c){return c.get("orient",!0)===r}}),"single"),i&&Ce(eN,function(c){if(i){var d=o.findComponents({mainType:TM(c),filter:function(m){return"category"===m.get("type",!0)}});if(d[0]){var p=new $R;p.add(d[0].componentIndex),e.set(c,p),i=!1}}},this)},t.prototype._makeAutoOrientByTargetAxis=function(){var e;return this.eachTargetAxis(function(r){!e&&(e=r)},this),"y"===e?"vertical":"horizontal"},t.prototype._setDefaultThrottle=function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var r=this.ecModel.option;this.option.throttle=r.animation&&r.animationDurationUpdate>0?100:20}},t.prototype._updateRangeUse=function(e){var r=this._rangePropMode,o=this.get("rangeMode");Ce([["start","startValue"],["end","endValue"]],function(i,s){var l=null!=e[i[0]],c=null!=e[i[1]];l&&!c?r[s]="percent":!l&&c?r[s]="value":o?r[s]=o[s]:l&&(r[s]="percent")})},t.prototype.noTarget=function(){return this._noTarget},t.prototype.getFirstTargetAxisModel=function(){var e;return this.eachTargetAxis(function(r,o){null==e&&(e=this.ecModel.getComponent(TM(r),o))},this),e},t.prototype.eachTargetAxis=function(e,r){this._targetAxisInfoMap.each(function(o,i){Ce(o.indexList,function(s){e.call(r,i,s)})})},t.prototype.getAxisProxy=function(e,r){var o=this.getAxisModel(e,r);if(o)return o.__dzAxisProxy},t.prototype.getAxisModel=function(e,r){var o=this._targetAxisInfoMap.get(e);if(o&&o.indexMap[r])return this.ecModel.getComponent(TM(e),r)},t.prototype.setRawRange=function(e){var r=this.option,o=this.settledOption;Ce([["start","startValue"],["end","endValue"]],function(i){null==e[i[0]]&&null==e[i[1]]||(r[i[0]]=o[i[0]]=e[i[0]],r[i[1]]=o[i[1]]=e[i[1]])},this),this._updateRangeUse(e)},t.prototype.setCalculatedRange=function(e){var r=this.option;Ce(["start","startValue","end","endValue"],function(o){r[o]=e[o]})},t.prototype.getPercentRange=function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},t.prototype.getValueRange=function(e,r){if(null!=e||null!=r)return this.getAxisProxy(e,r).getDataValueWindow();var o=this.findRepresentativeAxisProxy();return o?o.getDataValueWindow():void 0},t.prototype.findRepresentativeAxisProxy=function(e){if(e)return e.__dzAxisProxy;for(var r,o=this._targetAxisInfoMap.keys(),i=0;i<o.length;i++)for(var s=o[i],l=this._targetAxisInfoMap.get(s),c=0;c<l.indexList.length;c++){var d=this.getAxisProxy(s,l.indexList[c]);if(d.hostedBy(this))return d;r||(r=d)}return r},t.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},t.prototype.getOrient=function(){return this._orient},t.type="dataZoom",t.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],t.defaultOption={z:4,filterMode:"filter",start:0,end:100},t}(W);function nN(n){var t={};return Ce(["start","end","startValue","endValue","throttle"],function(e){n.hasOwnProperty(e)&&(t[e]=n[e])}),t}var P5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="dataZoom.select",t}(JI),JR=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o,i){this.dataZoomModel=e,this.ecModel=r,this.api=o},t.type="dataZoom",t}(ks),R5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="dataZoom.select",t}(JR),P2=Ce,rN=Ua,L5=function(){function n(t,e,r,o){this._dimName=t,this._axisIndex=e,this.ecModel=o,this._dataZoomModel=r}return n.prototype.hostedBy=function(t){return this._dataZoomModel===t},n.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},n.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},n.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries(function(e){if(s=e.get("coordinateSystem"),Ir(O5,s)>=0){var r=TM(this._dimName),o=e.getReferringComponents(r,ll).models[0];o&&this._axisIndex===o.componentIndex&&t.push(e)}var s},this),t},n.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},n.prototype.getMinMaxSpan=function(){return an(this._minMaxSpan)},n.prototype.calculateDataWindow=function(t){var e,r=this._dataExtent,o=this.getAxisModel().axis.scale,i=this._dataZoomModel.getRangePropMode(),s=[0,100],l=[],c=[];P2(["start","end"],function(m,b){var _=t[m],S=t[m+"Value"];"percent"===i[b]?(null==_&&(_=s[b]),S=o.parse(fa(_,s,r))):(e=!0,_=fa(S=null==S?r[b]:o.parse(S),r,s)),c[b]=null==S||isNaN(S)?r[b]:S,l[b]=null==_||isNaN(_)?s[b]:_}),rN(c),rN(l);var d=this._minMaxSpan;function p(m,b,_,S,k){var D=k?"Span":"ValueSpan";iu(0,m,_,"all",d["min"+D],d["max"+D]);for(var O=0;O<2;O++)b[O]=fa(m[O],_,S,!0),k&&(b[O]=o.parse(b[O]))}return e?p(c,l,r,s,!1):p(l,c,s,r,!0),{valueWindow:c,percentWindow:l}},n.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(o,i,s){var l=[1/0,-1/0];P2(s,function(p){var m,b;m=l,(b=p.getData())&&Ce(Qx(b,i),function(S){var k=b.getApproximateExtent(S);k[0]<m[0]&&(m[0]=k[0]),k[1]>m[1]&&(m[1]=k[1])})});var c=o.getAxisModel(),d=pm(c.axis.scale,c,l).calculate();return[d.min,d.max]}(this,this._dimName,e),this._updateMinMaxSpan();var r=this.calculateDataWindow(t.settledOption);this._valueWindow=r.valueWindow,this._percentWindow=r.percentWindow,this._setAxisModel()}},n.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var r=this._dimName,o=this.getTargetSeriesModels(),i=t.get("filterMode"),s=this._valueWindow;"none"!==i&&P2(o,function(l){var c=l.getData(),d=c.mapDimensionsAll(r);if(d.length){if("weakFilter"===i){var p=c.getStore(),m=mt(d,function(b){return c.getDimensionIndex(b)},c);c.filterSelf(function(b){for(var _,S,k,D=0;D<d.length;D++){var O=p.get(m[D],b),N=!isNaN(O),F=O<s[0],V=O>s[1];if(N&&!F&&!V)return!0;N&&(k=!0),F&&(_=!0),V&&(S=!0)}return k&&_&&S})}else P2(d,function(b){if("empty"===i)l.setData(c=c.map(b,function(S){return(k=S)>=s[0]&&k<=s[1]?S:NaN;var k}));else{var _={};_[b]=s,c.selectRange(_)}});P2(d,function(b){c.setApproximateExtent(s,b)})}})}},n.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,r=this._dataExtent;P2(["min","max"],function(o){var i=e.get(o+"Span"),s=e.get(o+"ValueSpan");null!=s&&(s=this.getAxisModel().axis.scale.parse(s)),null!=s?i=fa(r[0]+s,r,[0,100],!0):null!=i&&(s=fa(i,[0,100],r,!0)-r[0]),t[o+"Span"]=i,t[o+"ValueSpan"]=s},this)},n.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,r=this._valueWindow;if(e){var o=Vc(r,[0,500]);o=Math.min(o,20);var i=t.axis.scale.rawExtentInfo;0!==e[0]&&i.setDeterminedMinMax("min",+r[0].toFixed(o)),100!==e[1]&&i.setDeterminedMinMax("max",+r[1].toFixed(o)),i.freeze()}},n}(),N5={getTargetSeries:function(n){function t(o){n.eachComponent("dataZoom",function(i){i.eachTargetAxis(function(s,l){var c=n.getComponent(TM(s),l);o(s,l,c,i)})})}t(function(o,i,s,l){s.__dzAxisProxy=null});var e=[];t(function(o,i,s,l){s.__dzAxisProxy||(s.__dzAxisProxy=new L5(o,i,l,n),e.push(s.__dzAxisProxy))});var r=Or();return Ce(e,function(o){Ce(o.getTargetSeriesModels(),function(i){r.set(i.uid,i)})}),r},overallReset:function(n,t){n.eachComponent("dataZoom",function(e){e.eachTargetAxis(function(r,o){e.getAxisProxy(r,o).reset(e)}),e.eachTargetAxis(function(r,o){e.getAxisProxy(r,o).filterData(e,t)})}),n.eachComponent("dataZoom",function(e){var r=e.findRepresentativeAxisProxy();if(r){var o=r.getDataPercentWindow(),i=r.getDataValueWindow();e.setCalculatedRange({start:o[0],end:o[1],startValue:i[0],endValue:i[1]})}})}},oN=!1;function QR(n){oN||(oN=!0,n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,N5),function(t){t.registerAction("dataZoom",function(e,r){Ce(function E5(n,t){var e,r=Or(),o=[],i=Or();n.eachComponent({mainType:"dataZoom",query:t},function(c){i.get(c.uid)||l(c)});do{e=!1,n.eachComponent("dataZoom",s)}while(e);function s(c){var p;!i.get(c.uid)&&(p=!1,c.eachTargetAxis(function(m,b){var _=r.get(m);_&&_[b]&&(p=!0)}),p)&&(l(c),e=!0)}function l(c){i.set(c.uid,!0),o.push(c),c.eachTargetAxis(function(d,p){(r.get(d)||r.set(d,[]))[p]=!0})}return o}(r,e),function(o){o.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})})}(n),n.registerSubTypeDefaulter("dataZoom",function(){return"slider"}))}function B5(n){n.registerComponentModel(P5),n.registerComponentView(R5),QR(n)}var vb=function(){},iN={};function R2(n,t){iN[n]=t}function aN(n){return iN[n]}var z5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.optionUpdated=function(){n.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;Ce(this.option.feature,function(r,o){var i=aN(o);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),ln(r,i.defaultOption))})},t.type="toolbox",t.layoutMode={type:"box",ignoreSize:!0},t.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},t}(W);function sN(n,t){var e=$g(t.get("padding")),r=t.getItemStyle(["color","opacity"]);return r.fill=t.get("backgroundColor"),new bi({shape:{x:n.x-e[3],y:n.y-e[0],width:n.width+e[1]+e[3],height:n.height+e[0]+e[2],r:t.get("borderRadius")},style:r,silent:!0,z2:-1})}var F5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.render=function(e,r,o,i){var _,S,k,D,O,N,F,s=this.group;if(s.removeAll(),e.get("show")){var l=+e.get("itemSize"),c="vertical"===e.get("orient"),d=e.get("feature")||{},p=this._features||(this._features={}),m=[];Ce(d,function(_,S){m.push(S)}),new lg(this._featureNames||[],m).add(b).update(b).remove(dr(b,null)).execute(),this._featureNames=m,_=s,k=o,D=(S=e).getBoxLayoutParams(),O=S.get("padding"),F=tl(D,N={width:k.getWidth(),height:k.getHeight()},O),Yl(S.get("orient"),_,S.get("itemGap"),F.width,F.height),hv(_,D,N,O),s.add(sN(s.getBoundingRect(),e)),c||s.eachChild(function(_){var S=_.__title,k=_.ensureState("emphasis"),D=k.textConfig||(k.textConfig={}),O=_.getTextContent(),N=O&&O.ensureState("emphasis");if(N&&!yr(N)&&S){var F=N.style||(N.style={}),V=ua(S,Oi.makeFont(F)),q=_.x+s.x,Z=!1;_.y+s.y+l+V.height>o.getHeight()&&(D.position="top",Z=!0);var Q=Z?-5-V.height:l+10;q+V.width/2>o.getWidth()?(D.position=["100%",Q],F.align="right"):q-V.width/2<0&&(D.position=[0,Q],F.align="left")}})}function b(_,S){var k,D=m[_],O=m[S],N=d[D],F=new aa(N,e,e.ecModel);if(i&&null!=i.newTitle&&i.featureName===D&&(N.title=i.newTitle),D&&!O){if(0===D.indexOf("my"))k={onclick:F.option.onclick,featureName:D};else{var V=aN(D);if(!V)return;k=new V}p[D]=k}else if(!(k=p[O]))return;k.uid=ov("toolbox-feature"),k.model=F,k.ecModel=r,k.api=o;var q=k instanceof vb;D||!O?!F.get("show")||q&&k.unusable?q&&k.remove&&k.remove(r,o):(function(Z,Q,re){var he,ge,ve=Z.getModel("iconStyle"),_e=Z.getModel(["emphasis","iconStyle"]),Ee=Q instanceof vb&&Q.getIcons?Q.getIcons():Z.get("icon"),ze=Z.get("title")||{};ir(Ee)?(he={})[re]=Ee:he=Ee,ir(ze)?(ge={})[re]=ze:ge=ze;var Ge=Z.iconPaths={};Ce(he,function(Xe,$e){var nt=yd(Xe,{},{x:-l/2,y:-l/2,width:l,height:l});nt.setStyle(ve.getItemStyle()),nt.ensureState("emphasis").style=_e.getItemStyle();var yt=new Oi({style:{text:ge[$e],align:_e.get("textAlign"),borderRadius:_e.get("textBorderRadius"),padding:_e.get("textPadding"),fill:null},ignore:!0});nt.setTextContent(yt),yu({el:nt,componentModel:e,itemName:$e,formatterParamsExtra:{title:ge[$e]}}),nt.__title=ge[$e],nt.on("mouseover",function(){var _t=_e.getItemStyle(),Et=c?null==e.get("right")&&"right"!==e.get("left")?"right":"left":null==e.get("bottom")&&"bottom"!==e.get("top")?"bottom":"top";yt.setStyle({fill:_e.get("textFill")||_t.fill||_t.stroke||"#000",backgroundColor:_e.get("textBackgroundColor")}),nt.setTextConfig({position:_e.get("textPosition")||Et}),yt.ignore=!e.get("showTitle"),o.enterEmphasis(this)}).on("mouseout",function(){"emphasis"!==Z.get(["iconStatus",$e])&&o.leaveEmphasis(this),yt.hide()}),("emphasis"===Z.get(["iconStatus",$e])?pd:Ah)(nt),s.add(nt),nt.on("click",De(Q.onclick,Q,r,o,$e)),Ge[$e]=nt})}(F,k,D),F.setIconStatus=function(Z,Q){var re=this.option,he=this.iconPaths;re.iconStatus=re.iconStatus||{},re.iconStatus[Z]=Q,he[Z]&&("emphasis"===Q?pd:Ah)(he[Z])},k instanceof vb&&k.render&&k.render(F,r,o,i)):q&&k.dispose&&k.dispose(r,o)}},t.prototype.updateView=function(e,r,o,i){Ce(this._features,function(s){s instanceof vb&&s.updateView&&s.updateView(s.model,r,o,i)})},t.prototype.remove=function(e,r){Ce(this._features,function(o){o instanceof vb&&o.remove&&o.remove(e,r)}),this.group.removeAll()},t.prototype.dispose=function(e,r){Ce(this._features,function(o){o instanceof vb&&o.dispose&&o.dispose(e,r)})},t.type="toolbox",t}(ks),V5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.onclick=function(e,r){var o=this.model,i=o.get("name")||e.get("title.0.text")||"echarts",s="svg"===r.getZr().painter.getType(),l=s?"svg":o.get("type",!0)||"png",c=r.getConnectedDataURL({type:l,backgroundColor:o.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:o.get("connectedBackgroundColor"),excludeComponents:o.get("excludeComponents"),pixelRatio:o.get("pixelRatio")}),d=zn.browser;if(yr(MouseEvent)&&(d.newEdge||!d.ie&&!d.edge)){var p=document.createElement("a");p.download=i+"."+l,p.target="_blank",p.href=c;var m=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});p.dispatchEvent(m)}else if(window.navigator.msSaveOrOpenBlob||s){var b=c.split(","),_=b[0].indexOf("base64")>-1,S=s?decodeURIComponent(b[1]):b[1];_&&(S=window.atob(S));var k=i+"."+l;if(window.navigator.msSaveOrOpenBlob){for(var D=S.length,O=new Uint8Array(D);D--;)O[D]=S.charCodeAt(D);var N=new Blob([O]);window.navigator.msSaveOrOpenBlob(N,k)}else{var F=document.createElement("iframe");document.body.appendChild(F);var V=F.contentWindow,q=V.document;q.open("image/svg+xml","replace"),q.write(S),q.close(),V.focus(),q.execCommand("SaveAs",!0,k),document.body.removeChild(F)}}else{var Z=o.get("lang"),Q='<body style="margin:0;"><img src="'+c+'" style="max-width:100%;" title="'+(Z&&Z[0]||"")+'" /></body>',re=window.open();re.document.write(Q),re.document.title=i}},t.getDefaultOption=function(e){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:e.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:e.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},t}(vb),uN="__ec_magicType_stack__",H5=[["line","bar"],["stack"]],W5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.getIcons=function(){var e=this.model,r=e.get("icon"),o={};return Ce(e.get("type"),function(i){r[i]&&(o[i]=r[i])}),o},t.getDefaultOption=function(e){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:e.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},t.prototype.onclick=function(e,r,o){var i=this.model,s=i.get(["seriesIndex",o]);if(lN[o]){var l,c={series:[]};Ce(H5,function(p){Ir(p,o)>=0&&Ce(p,function(m){i.setIconStatus(m,"normal")})}),i.setIconStatus(o,"emphasis"),e.eachComponent({mainType:"series",query:null==s?null:{seriesIndex:s}},function(p){var _=lN[o](p.subType,p.id,p,i);_&&(Yn(_,p.option),c.series.push(_));var S=p.coordinateSystem;if(S&&"cartesian2d"===S.type&&("line"===o||"bar"===o)){var k=S.getAxesByScale("ordinal")[0];if(k){var D=k.dim+"Axis",O=p.getReferringComponents(D,ll).models[0].componentIndex;c[D]=c[D]||[];for(var N=0;N<=O;N++)c[D][O]=c[D][O]||{};c[D][O].boundaryGap="bar"===o}}});var d=o;"stack"===o&&(l=ln({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",o])&&(d="tiled")),r.dispatchAction({type:"changeMagicType",currentType:d,newOption:c,newTitle:l,featureName:"magicType"})}},t}(vb),lN={line:function(n,t,e,r){if("bar"===n)return ln({id:t,type:"line",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","line"])||{},!0)},bar:function(n,t,e,r){if("line"===n)return ln({id:t,type:"bar",data:e.get("data"),stack:e.get("stack"),markPoint:e.get("markPoint"),markLine:e.get("markLine")},r.get(["option","bar"])||{},!0)},stack:function(n,t,e,r){var o=e.get("stack")===uN;if("line"===n||"bar"===n)return r.setIconStatus("stack",o?"normal":"emphasis"),ln({id:t,stack:o?"":uN},r.get(["option","stack"])||{},!0)}};Ac({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(n,t){t.mergeOption(n.newOption)});var gP=new Array(60).join("-");function mP(n){return n.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var eL=new RegExp("[\t]+","g"),U5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.onclick=function(e,r){setTimeout(function(){r.dispatchAction({type:"hideTip"})});var o=r.getDom(),i=this.model;this._dom&&o.removeChild(this._dom);var s=document.createElement("div");s.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",s.style.backgroundColor=i.get("backgroundColor")||"#fff";var l=document.createElement("h4"),c=i.get("lang")||[];l.innerHTML=c[0]||i.get("title"),l.style.cssText="margin:10px 20px",l.style.color=i.get("textColor");var d=document.createElement("div"),p=document.createElement("textarea");d.style.cssText="overflow:auto";var re,he,ge,Ee,ze,Ge,ve,m=i.get("optionToContent"),b=i.get("contentToOption"),_=(Ee={},ze=[],Ge=[],e.eachRawSeries(function(Xe){var $e=Xe.coordinateSystem;if(!$e||"cartesian2d"!==$e.type&&"polar"!==$e.type)ze.push(Xe);else{var nt=$e.getBaseAxis();if("category"===nt.type){var yt=nt.dim+"_"+nt.index;Ee[yt]||(Ee[yt]={categoryAxis:nt,valueAxis:$e.getOtherAxis(nt),series:[]},Ge.push({axisDim:nt.dim,axisIndex:nt.index})),Ee[yt].series.push(Xe)}else ze.push(Xe)}}),{value:yo([(he=(ve={seriesGroupByCategoryAxis:Ee,other:ze,meta:Ge}).seriesGroupByCategoryAxis,ge=[],Ce(he,function(_e,Ee){var ze=_e.categoryAxis,Ge=_e.valueAxis.dim,Xe=[" "].concat(mt(_e.series,function(hn){return hn.name})),$e=[ze.model.getCategories()];Ce(_e.series,function(hn){var Zn=hn.getRawData();$e.push(hn.getRawData().mapArray(Zn.mapDimension(Ge),function(Rt){return Rt}))});for(var nt=[Xe.join("\t")],yt=0;yt<$e[0].length;yt++){for(var _t=[],Et=0;Et<$e.length;Et++)_t.push($e[Et][yt]);nt.push(_t.join("\t"))}ge.push(nt.join("\n"))}),ge.join("\n\n"+gP+"\n\n")),(re=ve.other,mt(re,function(_e){var Ee=_e.getRawData(),ze=[_e.name],Ge=[];return Ee.each(Ee.dimensions,function(){for(var Xe=arguments.length,$e=arguments[Xe-1],nt=Ee.getName($e),yt=0;yt<Xe-1;yt++)Ge[yt]=arguments[yt];ze.push((nt?nt+"\t":"")+Ge.join("\t"))}),ze.join("\n")}).join("\n\n"+gP+"\n\n"))],function(_e){return!!_e.replace(/[\n\t\s]/g,"")}).join("\n\n"+gP+"\n\n"),meta:ve.meta});if(yr(m)){var S=m(r.getOption());ir(S)?d.innerHTML=S:ku(S)&&d.appendChild(S)}else{p.readOnly=i.get("readOnly");var k=p.style;k.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",k.color=i.get("textColor"),k.borderColor=i.get("textareaBorderColor"),k.backgroundColor=i.get("textareaColor"),p.value=_.value,d.appendChild(p)}var D=_.meta,O=document.createElement("div");O.style.cssText="position:absolute;bottom:5px;left:0;right:0";var N="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",F=document.createElement("div"),V=document.createElement("div");N+=";background-color:"+i.get("buttonColor"),N+=";color:"+i.get("buttonTextColor");var q=this;function Z(){o.removeChild(s),q._dom=null}wa(F,"click",Z),wa(V,"click",function(){if(null==b&&null!=m||null!=b&&null==m)Z();else{var Q;try{Q=yr(b)?b(d,r.getOption()):function G5(n,t){var e=n.split(new RegExp("\n*"+gP+"\n*","g")),r={series:[]};return Ce(e,function(o,i){if(function(d){if(d.slice(0,d.indexOf("\n")).indexOf("\t")>=0)return!0}(o)){var s=function(d){for(var p=d.split(/\n+/g),m=[],b=mt(mP(p.shift()).split(eL),function(D){return{name:D,data:[]}}),_=0;_<p.length;_++){var S=mP(p[_]).split(eL);m.push(S.shift());for(var k=0;k<S.length;k++)b[k]&&(b[k].data[_]=S[k])}return{series:b,categories:m}}(o),l=t[i],c=l.axisDim+"Axis";l&&(r[c]=r[c]||[],r[c][l.axisIndex]={data:s.categories},r.series=r.series.concat(s.series))}else s=function(d){for(var p=d.split(/\n+/g),m=mP(p.shift()),b=[],_=0;_<p.length;_++){var S=mP(p[_]);if(S){var k=S.split(eL),D="",O=void 0,N=!1;isNaN(k[0])?(N=!0,D=k[0],k=k.slice(1),b[_]={name:D,value:[]},O=b[_].value):O=b[_]=[];for(var F=0;F<k.length;F++)O.push(+k[F]);1===O.length&&(N?b[_].value=O[0]:b[_]=O[0])}}return{name:m,data:b}}(o),r.series.push(s)}),r}(p.value,D)}catch(re){throw Z(),new Error("Data view format error "+re)}Q&&r.dispatchAction({type:"changeDataView",newOption:Q}),Z()}}),F.innerHTML=c[1],V.innerHTML=c[2],V.style.cssText=F.style.cssText=N,!i.get("readOnly")&&O.appendChild(V),O.appendChild(F),s.appendChild(l),s.appendChild(d),s.appendChild(O),d.style.height=o.clientHeight-80+"px",o.appendChild(s),this._dom=s},t.prototype.remove=function(e,r){this._dom&&r.getDom().removeChild(this._dom)},t.prototype.dispose=function(e,r){this.remove(e,r)},t.getDefaultOption=function(e){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:e.getLocaleModel().get(["toolbox","dataView","title"]),lang:e.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},t}(vb);function j5(n,t){return mt(n,function(e,r){var o=t&&t[r];if(wr(o)&&!Ue(o)){wr(e)&&!Ue(e)||(e={value:e});var i=null!=o.name&&null==e.name;return e=Yn(e,o),i&&delete e.name,e}return e})}Ac({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(n,t){var e=[];Ce(n.newOption.series,function(r){var o=t.getSeriesByName(r.name)[0];if(o){var i=o.get("data");e.push({name:r.name,data:j5(r.data,i)})}else e.push(Lt({type:"scatter"},r))}),t.mergeOption(Yn({series:e},n.newOption))});var cN=Ce,fN=hi();function tL(n){var t=fN(n);return t.snapshots||(t.snapshots=[{}]),t.snapshots}var Y5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.onclick=function(e,r){fN(e).snapshots=null,r.dispatchAction({type:"restore",from:this.uid})},t.getDefaultOption=function(e){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:e.getLocaleModel().get(["toolbox","restore","title"])}},t}(vb);Ac({type:"restore",event:"restore",update:"prepareAndUpdate"},function(n,t){t.resetOption("recreate")});var q5=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],nL=function(){function n(t,e,r){var o=this;this._targetInfoList=[];var i=dN(e,t);Ce(X5,function(s,l){(!r||!r.include||Ir(r.include,l)>=0)&&s(i,o._targetInfoList)})}return n.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,function(r,o,i){if((r.coordRanges||(r.coordRanges=[])).push(o),!r.coordRange){r.coordRange=o;var s=oL[r.brushType](0,i,o);r.__rangeOffset={offset:mN[r.brushType](s.values,r.range,[1,1]),xyMinMax:s.xyMinMax}}}),t},n.prototype.matchOutputRanges=function(t,e,r){Ce(t,function(o){var i=this.findTargetInfo(o,e);i&&!0!==i&&Ce(i.coordSyses,function(s){var l=oL[o.brushType](1,s,o.range,!0);r(o,l.values,s,e)})},this)},n.prototype.setInputRanges=function(t,e){Ce(t,function(r){var i,s,l,c,d=this.findTargetInfo(r,e);if(r.range=r.range||[],d&&!0!==d){r.panelId=d.panelId;var p=oL[r.brushType](0,d.coordSys,r.coordRange),m=r.__rangeOffset;r.range=m?mN[r.brushType](p.values,m.offset,(i=m.xyMinMax,s=yN(p.xyMinMax),l=yN(i),c=[s[0]/l[0],s[1]/l[1]],isNaN(c[0])&&(c[0]=1),isNaN(c[1])&&(c[1]=1),c)):p.values}},this)},n.prototype.makePanelOpts=function(t,e){return mt(this._targetInfoList,function(r){var o=r.getPanelRect();return{panelId:r.panelId,defaultBrushType:e?e(r):null,clipPath:DE(o),isTargetByCursor:IE(o,t,r.coordSysModel),getLinearBrushOtherExtent:AE(o)}})},n.prototype.controlSeries=function(t,e,r){var o=this.findTargetInfo(t,r);return!0===o||o&&Ir(o.coordSyses,e.coordinateSystem)>=0},n.prototype.findTargetInfo=function(t,e){for(var r=this._targetInfoList,o=dN(e,t),i=0;i<r.length;i++){var s=r[i],l=t.panelId;if(l){if(s.panelId===l)return s}else for(var c=0;c<hN.length;c++)if(hN[c](o,s))return s}return!0},n}();function rL(n){return n[0]>n[1]&&n.reverse(),n}function dN(n,t){return cd(n,t,{includeMainTypes:q5})}var X5={grid:function(n,t){var e=n.xAxisModels,r=n.yAxisModels,o=n.gridModels,i=Or(),s={},l={};(e||r||o)&&(Ce(e,function(c){var d=c.axis.grid.model;i.set(d.id,d),s[d.id]=!0}),Ce(r,function(c){var d=c.axis.grid.model;i.set(d.id,d),l[d.id]=!0}),Ce(o,function(c){i.set(c.id,c),s[c.id]=!0,l[c.id]=!0}),i.each(function(c){var p=[];Ce(c.coordinateSystem.getCartesians(),function(m,b){(Ir(e,m.getAxis("x").model)>=0||Ir(r,m.getAxis("y").model)>=0)&&p.push(m)}),t.push({panelId:"grid--"+c.id,gridModel:c,coordSysModel:c,coordSys:p[0],coordSyses:p,getPanelRect:pN.grid,xAxisDeclared:s[c.id],yAxisDeclared:l[c.id]})}))},geo:function(n,t){Ce(n.geoModels,function(e){var r=e.coordinateSystem;t.push({panelId:"geo--"+e.id,geoModel:e,coordSysModel:e,coordSys:r,coordSyses:[r],getPanelRect:pN.geo})})}},hN=[function(n,t){var e=n.xAxisModel,r=n.yAxisModel,o=n.gridModel;return!o&&e&&(o=e.axis.grid.model),!o&&r&&(o=r.axis.grid.model),o&&o===t.gridModel},function(n,t){var e=n.geoModel;return e&&e===t.geoModel}],pN={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var n=this.coordSys,t=n.getBoundingRect().clone();return t.applyTransform(jo(n)),t}},oL={lineX:dr(gN,0),lineY:dr(gN,1),rect:function(n,t,e,r){var o=n?t.pointToData([e[0][0],e[1][0]],r):t.dataToPoint([e[0][0],e[1][0]],r),i=n?t.pointToData([e[0][1],e[1][1]],r):t.dataToPoint([e[0][1],e[1][1]],r),s=[rL([o[0],i[0]]),rL([o[1],i[1]])];return{values:s,xyMinMax:s}},polygon:function(n,t,e,r){var o=[[1/0,-1/0],[1/0,-1/0]];return{values:mt(e,function(i){var s=n?t.pointToData(i,r):t.dataToPoint(i,r);return o[0][0]=Math.min(o[0][0],s[0]),o[1][0]=Math.min(o[1][0],s[1]),o[0][1]=Math.max(o[0][1],s[0]),o[1][1]=Math.max(o[1][1],s[1]),s}),xyMinMax:o}}};function gN(n,t,e,r){var o=e.getAxis(["x","y"][n]),i=rL(mt([0,1],function(l){return t?o.coordToData(o.toLocalCoord(r[l]),!0):o.toGlobalCoord(o.dataToCoord(r[l]))})),s=[];return s[n]=i,s[1-n]=[NaN,NaN],{values:i,xyMinMax:s}}var mN={lineX:dr(vN,0),lineY:dr(vN,1),rect:function(n,t,e){return[[n[0][0]-e[0]*t[0][0],n[0][1]-e[0]*t[0][1]],[n[1][0]-e[1]*t[1][0],n[1][1]-e[1]*t[1][1]]]},polygon:function(n,t,e){return mt(n,function(r,o){return[r[0]-e[0]*t[o][0],r[1]-e[1]*t[o][1]]})}};function vN(n,t,e,r){return[t[0]-r[n]*e[0],t[1]-r[n]*e[1]]}function yN(n){return n?[n[0][1]-n[0][0],n[1][1]-n[1][0]]:[NaN,NaN]}var aL,sL=Ce,K5=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.render=function(e,r,o,i){this._brushController||(this._brushController=new lI(o.getZr()),this._brushController.on("brush",De(this._onBrush,this)).mount()),function(s,l,c,d,p){var m=c._isZoomActive;d&&"takeGlobalCursor"===d.type&&(m="dataZoomSelect"===d.key&&d.dataZoomSelectActive),c._isZoomActive=m,s.setIconStatus("zoom",m?"emphasis":"normal");var _=new nL(uL(s),l,{include:["grid"]}).makePanelOpts(p,function(S){return S.xAxisDeclared&&!S.yAxisDeclared?"lineX":!S.xAxisDeclared&&S.yAxisDeclared?"lineY":"rect"});c._brushController.setPanels(_).enableBrush(!(!m||!_.length)&&{brushType:"auto",brushStyle:s.getModel("brushStyle").getItemStyle()})}(e,r,this,i,o),e.setIconStatus("back",tL(r).length>1?"emphasis":"normal")},t.prototype.onclick=function(e,r,o){$5[o].call(this)},t.prototype.remove=function(e,r){this._brushController&&this._brushController.unmount()},t.prototype.dispose=function(e,r){this._brushController&&this._brushController.dispose()},t.prototype._onBrush=function(e){var l,c,d,r=e.areas;if(e.isEnd&&r.length){var o={},i=this.ecModel;this._brushController.updateCovers([]),new nL(uL(this.model),i,{include:["grid"]}).matchOutputRanges(r,i,function(l,c,d){if("cartesian2d"===d.type){var p=l.brushType;"rect"===p?(s("x",d,c[0]),s("y",d,c[1])):s({lineX:"x",lineY:"y"}[p],d,c)}}),c=o,d=tL(l=i),cN(c,function(p,m){for(var b=d.length-1;b>=0&&!d[b][m];b--);if(b<0){var _=l.queryComponents({mainType:"dataZoom",subType:"select",id:m})[0];if(_){var S=_.getPercentRange();d[0][m]={dataZoomId:m,start:S[0],end:S[1]}}}}),d.push(c),this._dispatchZoomAction(o)}function s(l,c,d){var S,k,O,p=c.getAxis(l),m=p.model,b=(S=l,k=m,i.eachComponent({mainType:"dataZoom",subType:"select"},function(N){N.getAxisModel(S,k.componentIndex)&&(O=N)}),O),_=b.findRepresentativeAxisProxy(m).getMinMaxSpan();null==_.minValueSpan&&null==_.maxValueSpan||(d=iu(0,d.slice(),p.scale.getExtent(),0,_.minValueSpan,_.maxValueSpan)),b&&(o[b.id]={dataZoomId:b.id,startValue:d[0],endValue:d[1]})}},t.prototype._dispatchZoomAction=function(e){var r=[];sL(e,function(o,i){r.push(an(o))}),r.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:r})},t.getDefaultOption=function(e){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:e.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},t}(vb),$5={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(n){var t=tL(n),e=t[t.length-1];t.length>1&&t.pop();var r={};return cN(e,function(o,i){for(var s=t.length-1;s>=0;s--)if(o=t[s][i]){r[i]=o;break}}),r}(this.ecModel))}};function uL(n){var t={xAxisIndex:n.get("xAxisIndex",!0),yAxisIndex:n.get("yAxisIndex",!0),xAxisId:n.get("xAxisId",!0),yAxisId:n.get("yAxisId",!0)};return null==t.xAxisIndex&&null==t.xAxisId&&(t.xAxisIndex="all"),null==t.yAxisIndex&&null==t.yAxisId&&(t.yAxisIndex="all"),t}aL=function(n){var t=n.getComponent("toolbox",0),e=["feature","dataZoom"];if(t&&null!=t.get(e)){var r=t.getModel(e),o=[],i=cd(n,uL(r));return sL(i.xAxisModels,function(l){return s(l,"xAxis","xAxisIndex")}),sL(i.yAxisModels,function(l){return s(l,"yAxis","yAxisIndex")}),o}function s(l,c,d){var p=l.componentIndex,m={type:"select",$fromToolbox:!0,filterMode:r.get("filterMode",!0)||"filter",id:"\0_ec_\0toolbox-dataZoom_"+c+p};m[d]=p,o.push(m)}},Ao(null==Tn.get("dataZoom")&&aL),Tn.set("dataZoom",aL);var J5=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="tooltip",t.dependencies=["axisPointer"],t.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},t}(W);function bN(n){var t=n.get("confine");return null!=t?!!t:"richText"===n.get("renderMode")}function xN(n){if(zn.domSupported)for(var t=document.documentElement.style,e=0,r=n.length;e<r;e++)if(n[e]in t)return n[e]}var _N=xN(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function wN(n,t){if(!n)return t;t=Vr(t,!0);var e=n.indexOf(t);return(n=-1===e?t:"-"+n.slice(0,e)+"-"+t).toLowerCase()}var Q5=wN(xN(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),lL=wN(_N,"transform"),ez="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(zn.transform3dSupported?"will-change:transform;":"");function SN(n,t,e){var r=n.toFixed(0)+"px",o=t.toFixed(0)+"px";if(!zn.transformSupported)return e?"top:"+o+";left:"+r+";":[["top",o],["left",r]];var i=zn.transform3dSupported,s="translate"+(i?"3d":"")+"("+r+","+o+(i?",0":"")+")";return e?"top:0;left:0;"+lL+":"+s+";":[["top",0],["left",0],[_N,s]]}function CN(n,t,e,r,o){var c,p,i=t&&t.painter;if(e){var s=i&&i.getViewportRoot();s&&(c=n,p=document.body,oa(go,s,r,o,!0)&&oa(c,p,go[0],go[1]))}else{n[0]=r,n[1]=o;var l=i&&i.getViewportRootOffset();l&&(n[0]+=l.offsetLeft,n[1]+=l.offsetTop)}n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var nz=function(){function n(t,e,r){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,zn.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var i=this._zr=e.getZr(),s=this._appendToBody=r&&r.appendToBody;CN(this._styleCoord,i,s,e.getWidth()/2,e.getHeight()/2),s?document.body.appendChild(o):t.appendChild(o),this._container=t;var l=this;o.onmouseenter=function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0},o.onmousemove=function(c){if(c=c||window.event,!l._enterable){var d=i.handler;to(i.painter.getViewportRoot(),c,!0),d.dispatch("mousemove",c)}},o.onmouseleave=function(){l._inContent=!1,l._enterable&&l._show&&l.hideLater(l._hideDelay)}}return n.prototype.update=function(t){var e,o,i=this._container,s=("position",(o=(e=i).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(e))?o.position:null),l=i.style;"absolute"!==l.position&&"absolute"!==s&&(l.position="relative");var c=t.get("alwaysShowContent");c&&this._moveIfResized(),this._alwaysShowContent=c,this.el.className=t.get("className")||""},n.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var r=this.el,o=r.style,i=this._styleCoord;r.innerHTML?o.cssText=ez+function tz(n,t,e){var _,D,O,r=[],o=n.get("transitionDuration"),i=n.get("backgroundColor"),s=n.get("shadowBlur"),l=n.get("shadowColor"),c=n.get("shadowOffsetX"),d=n.get("shadowOffsetY"),p=n.getModel("textStyle"),m=cp(n,"html");return r.push("box-shadow:"+c+"px "+d+"px "+s+"px "+l),t&&o&&r.push((O="opacity"+(D=" "+(_=o)/2+"s "+"cubic-bezier(0.23,1,0.32,1)")+",visibility"+D,e||(D=" "+_+"s cubic-bezier(0.23,1,0.32,1)",O+=zn.transformSupported?","+lL+D:",left"+D+",top"+D),Q5+":"+O)),i&&r.push("background-color:"+i),Ce(["width","color","radius"],function(_){var S="border-"+_,k=Vr(S),D=n.get(k);null!=D&&r.push(S+":"+D+("color"===_?"":"px"))}),r.push(function(_){var S=[],k=_.get("fontSize"),D=_.getTextColor();D&&S.push("color:"+D),S.push("font:"+_.getFont()),k&&S.push("line-height:"+Math.round(3*k/2)+"px");var O=_.get("textShadowColor"),N=_.get("textShadowBlur")||0,F=_.get("textShadowOffsetX")||0,V=_.get("textShadowOffsetY")||0;return O&&N&&S.push("text-shadow:"+F+"px "+V+"px "+N+"px "+O),Ce(["decoration","align"],function(q){var Z=_.get(q);Z&&S.push("text-"+q+":"+Z)}),S.join(";")}(p)),null!=m&&r.push("padding:"+$g(m).join("px ")+"px"),r.join(";")+";"}(t,!this._firstShow,this._longHide)+SN(i[0],i[1],!0)+"border-color:"+el(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):o.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},n.prototype.setContent=function(t,e,r,o,i){var s=this.el;if(null!=t){var l="";if(ir(i)&&"item"===r.get("trigger")&&!bN(r)&&(l=function(p,m,b){if(!ir(b)||"inside"===b)return"";var _=p.get("backgroundColor"),S=p.get("borderWidth");m=el(m);var k,D,O="left"===(k=b)?"right":"right"===k?"left":"top"===k?"bottom":"top",N=Math.max(1.5*Math.round(S),6),F="",V=lL+":";Ir(["left","right"],O)>-1?(F+="top:50%",V+="translateY(-50%) rotate("+(D="left"===O?-225:-45)+"deg)"):(F+="left:50%",V+="translateX(-50%) rotate("+(D="top"===O?225:45)+"deg)");var q=D*Math.PI/180,Z=N+S,Q=Z*Math.abs(Math.cos(q))+Z*Math.abs(Math.sin(q)),re=m+" solid "+S+"px;";return'<div style="'+["position:absolute;width:"+N+"px;height:"+N+"px;z-index:-1;",(F+=";"+O+":-"+Math.round(100*((Q-Math.SQRT2*S)/2+Math.SQRT2*S-(Q-Z)/2))/100+"px")+";"+V+";","border-bottom:"+re,"border-right:"+re,"background-color:"+_+";"].join("")+'"></div>'}(r,o,i)),ir(t))s.innerHTML=t+l;else if(t){s.innerHTML="",Ue(t)||(t=[t]);for(var c=0;c<t.length;c++)ku(t[c])&&t[c].parentNode!==s&&s.appendChild(t[c]);if(l&&s.childNodes.length){var d=document.createElement("div");d.innerHTML=l,s.appendChild(d)}}}else s.innerHTML=""},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},n.prototype.moveTo=function(t,e){var r=this._styleCoord;if(CN(r,this._zr,this._appendToBody,t,e),null!=r[0]&&null!=r[1]){var o=this.el.style;Ce(SN(r[0],r[1]),function(i){o[i[0]]=i[1]})}},n.prototype._moveIfResized=function(){var e=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",zn.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout(function(){return t._longHide=!0},500)},n.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(De(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this.el.parentNode.removeChild(this.el)},n}(),rz=function(){function n(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),kN(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return n.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},n.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},n.prototype.setContent=function(t,e,r,o,i){var s=this;wr(t)&&Ri(""),this.el&&this._zr.remove(this.el);var l=r.getModel("textStyle");this.el=new Oi({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:o,textShadowColor:l.get("textShadowColor"),fill:r.get(["textStyle","color"]),padding:cp(r,"richText"),verticalAlign:"top",align:"left"},z:r.get("z")}),Ce(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],function(d){s.el.style[d]=r.get(d)}),Ce(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],function(d){s.el.style[d]=l.get(d)||0}),this._zr.add(this.el);var c=this;this.el.on("mouseover",function(){c._enterable&&(clearTimeout(c._hideTimeout),c._show=!0),c._inContent=!0}),this.el.on("mouseout",function(){c._enterable&&c._show&&c.hideLater(c._hideDelay),c._inContent=!1})},n.prototype.setEnterable=function(t){this._enterable=t},n.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),r=MN(t.style);return[e.width+r.left+r.right,e.height+r.top+r.bottom]},n.prototype.moveTo=function(t,e){var r=this.el;if(r){var o=this._styleCoord;kN(o,this._zr,t,e),t=o[0],e=o[1];var i=r.style,s=DM(i.borderWidth||0),l=MN(i);r.x=t+s+l.left,r.y=e+s+l.top,r.markRedraw()}},n.prototype._moveIfResized=function(){var e=this._styleCoord[3];this.moveTo(this._styleCoord[2]*this._zr.getWidth(),e*this._zr.getHeight())},n.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},n.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(De(this.hide,this),t)):this.hide())},n.prototype.isShow=function(){return this._show},n.prototype.dispose=function(){this._zr.remove(this.el)},n}();function DM(n){return Math.max(0,n)}function MN(n){var t=DM(n.shadowBlur||0),e=DM(n.shadowOffsetX||0),r=DM(n.shadowOffsetY||0);return{left:DM(t-e),right:DM(t+e),top:DM(t-r),bottom:DM(t+r)}}function kN(n,t,e,r){n[0]=e,n[1]=r,n[2]=n[0]/t.getWidth(),n[3]=n[1]/t.getHeight()}var oz=new bi({shape:{x:-1,y:-1,width:2,height:2}}),iz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e,r){if(!zn.node&&r.getDom()){var o,i=e.getComponent("tooltip"),s=this._renderMode="auto"===(o=i.get("renderMode"))?zn.domSupported?"html":"richText":o||"html";this._tooltipContent="richText"===s?new rz(r):new nz(r.getDom(),r,{appendToBody:i.get("appendToBody",!0)})}},t.prototype.render=function(e,r,o){if(!zn.node&&o.getDom()){this.group.removeAll(),this._tooltipModel=e,this._ecModel=r,this._api=o;var i=this._tooltipContent;i.update(e),i.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&e.get("transitionDuration")?E0(this,"_updatePosition",50,"fixRate"):Tx(this,"_updatePosition")}},t.prototype._initGlobalListener=function(){var e=this._tooltipModel.get("triggerOn");XI("itemTooltip",this._api,De(function(r,o,i){"none"!==e&&(e.indexOf(r)>=0?this._tryShow(o,i):"leave"===r&&this._hide(i))},this))},t.prototype._keepShow=function(){var e=this._tooltipModel,r=this._ecModel,o=this._api,i=e.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==i&&"click"!==i){var s=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){!o.isDisposed()&&s.manuallyShowTip(e,r,o,{x:s._lastX,y:s._lastY,dataByCoordSys:s._lastDataByCoordSys})})}},t.prototype.manuallyShowTip=function(e,r,o,i){if(i.from!==this.uid&&!zn.node&&o.getDom()){var s=TN(i,o);this._ticket="";var l=i.dataByCoordSys,c=function(S,k,D){var O=yh(S).queryOptionMap,N=O.keys()[0];if(N&&"series"!==N){var q,V=Bp(k,N,O.get(N),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(V&&(D.getViewOfComponentModel(V).group.traverse(function(Q){var re=So(Q).tooltipConfig;if(re&&re.name===S.name)return q=Q,!0}),q))return{componentMainType:N,componentIndex:V.componentIndex,el:q}}}(i,r,o);if(c){var d=c.el.getBoundingRect().clone();d.applyTransform(c.el.transform),this._tryShow({offsetX:d.x+d.width/2,offsetY:d.y+d.height/2,target:c.el,position:i.position,positionDefault:"bottom"},s)}else if(i.tooltip&&null!=i.x&&null!=i.y){var p=oz;p.x=i.x,p.y=i.y,p.update(),So(p).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:p},s)}else if(l)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:l,tooltipOption:i.tooltipOption},s);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(e,r,o,i))return;var m=Ko(i,r),b=m.point[0],_=m.point[1];null!=b&&null!=_&&this._tryShow({offsetX:b,offsetY:_,target:m.el,position:i.position,positionDefault:"bottom"},s)}else null!=i.x&&null!=i.y&&(o.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:o.getZr().findHover(i.x,i.y).target},s))}},t.prototype.manuallyHideTip=function(e,r,o,i){this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(TN(i,o))},t.prototype._manuallyAxisShowTip=function(e,r,o,i){var s=i.seriesIndex,l=i.dataIndex,c=r.getComponent("axisPointer").coordSysAxesInfo;if(null!=s&&null!=l&&null!=c){var d=r.getSeriesByIndex(s);if(d&&"axis"===eO([d.getData().getItemModel(l),d,(d.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return o.dispatchAction({type:"updateAxisPointer",seriesIndex:s,dataIndex:l,position:i.position}),!0}},t.prototype._tryShow=function(e,r){var o=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var i=e.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,e);else if(o){var s,l;this._lastDataByCoordSys=null,Ay(o,function(c){return null!=So(c).dataIndex?(s=c,!0):null!=So(c).tooltipConfig?(l=c,!0):void 0},!0),s?this._showSeriesItemTooltip(e,s,r):l?this._showComponentItemTooltip(e,l,r):this._hide(r)}else this._lastDataByCoordSys=null,this._hide(r)}},t.prototype._showOrMove=function(e,r){var o=e.get("showDelay");r=De(r,this),clearTimeout(this._showTimout),o>0?this._showTimout=setTimeout(r,o):r()},t.prototype._showAxisTooltip=function(e,r){var o=this._ecModel,i=this._tooltipModel,s=[r.offsetX,r.offsetY],l=eO([r.tooltipOption],i),c=this._renderMode,d=[],p=Dc("section",{blocks:[],noHeader:!0}),m=[],b=new nw;Ce(e,function(N){Ce(N.dataByAxis,function(F){var V=o.getComponent(F.axisDim+"Axis",F.axisIndex),q=F.value;if(V&&null!=q){var Z=jv(q,V.axis,o,F.seriesDataIndices,F.valueLabelOpt),Q=Dc("section",{header:Z,noHeader:!ki(Z),sortBlocks:!0,blocks:[]});p.blocks.push(Q),Ce(F.seriesDataIndices,function(re){var he=o.getSeriesByIndex(re.seriesIndex),ge=re.dataIndexInside,ve=he.getDataParams(ge);if(!(ve.dataIndex<0)){ve.axisDim=F.axisDim,ve.axisIndex=F.axisIndex,ve.axisType=F.axisType,ve.axisId=F.axisId,ve.axisValue=v1(V.axis,{value:q}),ve.axisValueLabel=Z,ve.marker=b.makeTooltipMarker("item",el(ve.color),c);var _e=DT(he.formatTooltip(ge,!0,null)),Ee=_e.frag;if(Ee){var ze=eO([he],i).get("valueFormatter");Q.blocks.push(ze?Lt({valueFormatter:ze},Ee):Ee)}_e.text&&m.push(_e.text),d.push(ve)}})}})}),p.blocks.reverse(),m.reverse();var _=r.position,S=l.get("order"),k=ag(p,b,c,S,o.get("useUTC"),l.get("textStyle"));k&&m.unshift(k);var O=m.join("richText"===c?"\n\n":"<br/>");this._showOrMove(l,function(){this._updateContentNotChangedOnAxis(e,d)?this._updatePosition(l,_,s[0],s[1],this._tooltipContent,d):this._showTooltipContent(l,O,d,Math.random()+"",s[0],s[1],_,null,b)})},t.prototype._showSeriesItemTooltip=function(e,r,o){var i=this._ecModel,s=So(r),l=s.seriesIndex,c=i.getSeriesByIndex(l),d=s.dataModel||c,p=s.dataIndex,m=s.dataType,b=d.getData(m),_=this._renderMode,S=e.positionDefault,k=eO([b.getItemModel(p),d,c&&(c.coordinateSystem||{}).model],this._tooltipModel,S?{position:S}:null),D=k.get("trigger");if(null==D||"item"===D){var O=d.getDataParams(p,m),N=new nw;O.marker=N.makeTooltipMarker("item",el(O.color),_);var F=DT(d.formatTooltip(p,!1,m)),V=k.get("order"),q=k.get("valueFormatter"),Z=F.frag,Q=Z?ag(q?Lt({valueFormatter:q},Z):Z,N,_,V,i.get("useUTC"),k.get("textStyle")):F.text,re="item_"+d.name+"_"+p;this._showOrMove(k,function(){this._showTooltipContent(k,Q,O,re,e.offsetX,e.offsetY,e.position,e.target,N)}),o({type:"showTip",dataIndexInside:p,dataIndex:b.getRawIndex(p),seriesIndex:l,from:this.uid})}},t.prototype._showComponentItemTooltip=function(e,r,o){var i=So(r),s=i.tooltipConfig.option||{};ir(s)&&(s={content:s,formatter:s});var l=[s],c=this._ecModel.getComponent(i.componentMainType,i.componentIndex);c&&l.push(c),l.push({formatter:s.content});var d=e.positionDefault,p=eO(l,this._tooltipModel,d?{position:d}:null),m=p.get("content"),b=Math.random()+"",_=new nw;this._showOrMove(p,function(){var S=an(p.get("formatterParams")||{});this._showTooltipContent(p,m,S,b,e.offsetX,e.offsetY,e.position,r,_)}),o({type:"showTip",from:this.uid})},t.prototype._showTooltipContent=function(e,r,o,i,s,l,c,d,p){if(this._ticket="",e.get("showContent")&&e.get("show")){var m=this._tooltipContent;m.setEnterable(e.get("enterable"));var b=e.get("formatter");c=c||e.get("position");var _=r,S=this._getNearestPoint([s,l],o,e.get("trigger"),e.get("borderColor")).color;if(b)if(ir(b)){var k=e.ecModel.get("useUTC"),D=Ue(o)?o[0]:o;_=b,D&&D.axisType&&D.axisType.indexOf("time")>=0&&(_=bu(D.axisValue,_,k)),_=pl(_,o,!0)}else if(yr(b)){var O=De(function(N,F){N===this._ticket&&(m.setContent(F,p,e,S,c),this._updatePosition(e,c,s,l,m,o,d))},this);this._ticket=i,_=b(o,i,O)}else _=b;m.setContent(_,p,e,S,c),m.show(e,S),this._updatePosition(e,c,s,l,m,o,d)}},t.prototype._getNearestPoint=function(e,r,o,i){return"axis"===o||Ue(r)?{color:i||("html"===this._renderMode?"#fff":"none")}:Ue(r)?void 0:{color:i||r.color||r.borderColor}},t.prototype._updatePosition=function(e,r,o,i,s,l,c){var d=this._api.getWidth(),p=this._api.getHeight();r=r||e.get("position");var N,F,q,Z,Q,re,he,ge,ve,m=s.getSize(),b=e.get("align"),_=e.get("verticalAlign"),S=c&&c.getBoundingRect().clone();if(c&&S.applyTransform(c.transform),yr(r)&&(r=r([o,i],l,s.el,S,{viewSize:[d,p],contentSize:m.slice()})),Ue(r))o=qn(r[0],d),i=qn(r[1],p);else if(wr(r)){var k=r;k.width=m[0],k.height=m[1];var D=tl(k,{width:d,height:p});o=D.x,i=D.y,b=null,_=null}else if(ir(r)&&c){var O=function(N,F,V,q){var Z=V[0],Q=V[1],re=Math.ceil(Math.SQRT2*q)+8,he=0,ge=0,ve=F.width,_e=F.height;switch(N){case"inside":he=F.x+ve/2-Z/2,ge=F.y+_e/2-Q/2;break;case"top":he=F.x+ve/2-Z/2,ge=F.y-Q-re;break;case"bottom":he=F.x+ve/2-Z/2,ge=F.y+_e+re;break;case"left":he=F.x-Z-re,ge=F.y+_e/2-Q/2;break;case"right":he=F.x+ve+re,ge=F.y+_e/2-Q/2}return[he,ge]}(r,S,m,e.get("borderWidth"));o=O[0],i=O[1]}else N=o,F=i,q=d,Z=p,Q=b?null:20,re=_?null:20,ge=(he=s.getSize())[0],ve=he[1],null!=Q&&(N+ge+Q+2>q?N-=ge+Q:N+=Q),null!=re&&(F+ve+re>Z?F-=ve+re:F+=re),o=(O=[N,F])[0],i=O[1];b&&(o-=DN(b)?m[0]/2:"right"===b?m[0]:0),_&&(i-=DN(_)?m[1]/2:"bottom"===_?m[1]:0),bN(e)&&(O=function(N,F,V,q,Z){var Q=V.getSize(),re=Q[0],he=Q[1];return N=Math.min(N+re,q)-re,F=Math.min(F+he,Z)-he,[N=Math.max(N,0),F=Math.max(F,0)]}(o,i,s,d,p),o=O[0],i=O[1]),s.moveTo(o,i)},t.prototype._updateContentNotChangedOnAxis=function(e,r){var o=this._lastDataByCoordSys,i=this._cbParamsList,s=!!o&&o.length===e.length;return s&&Ce(o,function(l,c){var d=l.dataByAxis||[],p=(e[c]||{}).dataByAxis||[];(s=s&&d.length===p.length)&&Ce(d,function(m,b){var _=p[b]||{},S=m.seriesDataIndices||[],k=_.seriesDataIndices||[];(s=s&&m.value===_.value&&m.axisType===_.axisType&&m.axisId===_.axisId&&S.length===k.length)&&Ce(S,function(D,O){var N=k[O];s=s&&D.seriesIndex===N.seriesIndex&&D.dataIndex===N.dataIndex}),i&&Ce(m.seriesDataIndices,function(D){var O=D.seriesIndex,N=r[O],F=i[O];N&&F&&F.data!==N.data&&(s=!1)})})}),this._lastDataByCoordSys=e,this._cbParamsList=r,!!s},t.prototype._hide=function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},t.prototype.dispose=function(e,r){!zn.node&&r.getDom()&&(Tx(this,"_updatePosition"),this._tooltipContent.dispose(),E2("itemTooltip",r))},t.type="tooltip",t}(ks);function eO(n,t,e){var r,o=t.ecModel;e?(r=new aa(e,o,o),r=new aa(t.option,r,o)):r=t;for(var i=n.length-1;i>=0;i--){var s=n[i];s&&(s instanceof aa&&(s=s.get("tooltip",!0)),ir(s)&&(s={formatter:s}),s&&(r=new aa(s,r,o)))}return r}function TN(n,t){return n.dispatchAction||De(t.dispatchAction,t)}function DN(n){return"center"===n||"middle"===n}var az=["rect","polygon","keep","clear"];function sz(n,t){var c,d,e=ci(n?n.brush:[]);if(e.length){var r=[];Ce(e,function(c){var d=c.hasOwnProperty("toolbox")?c.toolbox:[];d instanceof Array&&(r=r.concat(d))});var o=n&&n.toolbox;Ue(o)&&(o=o[0]),o||(n.toolbox=[o={feature:{}}]);var i=o.feature||(o.feature={}),s=i.brush||(i.brush={}),l=s.type||(s.type=[]);l.push.apply(l,r),d={},Ce(c=l,function(p){d[p]=1}),c.length=0,Ce(d,function(p,m){c.push(m)}),t&&!l.length&&l.push.apply(l,az)}}var AN=Ce;function IN(n){if(n)for(var t in n)if(n.hasOwnProperty(t))return!0}function cL(n,t,e){var r={};return AN(t,function(o){var i,s=r[o]=((i=function(){}).prototype.__hidden=i.prototype,new i);AN(n[o],function(l,c){if(Kf.isValidType(c)){var d={type:c,visual:l};e&&e(d,o),s[c]=new Kf(d),"opacity"===c&&((d=an(d)).type="colorAlpha",s.__hidden.__alphaForOpacity=new Kf(d))}})}),r}function ON(n,t,e){var r;Ce(e,function(o){t.hasOwnProperty(o)&&IN(t[o])&&(r=!0)}),r&&Ce(e,function(o){t.hasOwnProperty(o)&&IN(t[o])?n[o]=an(t[o]):delete n[o]})}var EN={lineX:PN(0),lineY:PN(1),rect:{point:function(n,t,e){return n&&e.boundingRect.contain(n[0],n[1])},rect:function(n,t,e){return n&&e.boundingRect.intersect(n)}},polygon:{point:function(n,t,e){return n&&e.boundingRect.contain(n[0],n[1])&&eb(e.range,n[0],n[1])},rect:function(n,t,e){var r=e.range;if(!n||r.length<=1)return!1;var o=n.x,i=n.y,s=n.width,l=n.height,c=r[0];return!!(eb(r,o,i)||eb(r,o+s,i)||eb(r,o,i+l)||eb(r,o+s,i+l)||Io.create(n).contain(c[0],c[1])||Wg(o,i,o+s,i,r)||Wg(o,i,o,i+l,r)||Wg(o+s,i,o+s,i+l,r)||Wg(o,i+l,o+s,i+l,r))||void 0}}};function PN(n){var t=["x","y"],e=["width","height"];return{point:function(r,o,i){if(r)return tO(r[n],i.range)},rect:function(r,o,i){if(r){var s=i.range,l=[r[t[n]],r[t[n]]+r[e[n]]];return l[1]<l[0]&&l.reverse(),tO(l[0],s)||tO(l[1],s)||tO(s[0],l)||tO(s[1],l)}}}}function tO(n,t){return t[0]<=n&&n<=t[1]}var RN=["inBrush","outOfBrush"],fL="__ecBrushSelect",dL="__ecInBrushSelectEvent";function LN(n){n.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new nL(t.option,n)).setInputRanges(t.areas,n)})}function uz(n,t,e){var r,o,i=[];n.eachComponent({mainType:"brush"},function(s){e&&"takeGlobalCursor"===e.type&&s.setBrushOption("brush"===e.key?e.brushOption:{brushType:!1})}),LN(n),n.eachComponent({mainType:"brush"},function(s,l){var c={brushId:s.id,brushIndex:l,brushName:s.name,areas:an(s.areas),selected:[]};i.push(c);var d=s.option,p=d.brushLink,m=[],b=[],_=[],S=!1;l||(r=d.throttleType,o=d.throttleDelay);var k=mt(s.areas,function(F){var Z,Q,re,V=cz[F.brushType],q=Yn({boundingRect:V?V(F):void 0},F);return q.selectors=(Q=(Z=q).brushType,re={point:function(he){return EN[Q].point(he,re,Z)},rect:function(he){return EN[Q].rect(he,re,Z)}}),q}),D=cL(s.option,RN,function(F){F.mappingMethod="fixed"});function O(F){return"all"===p||!!m[F]}function N(F){return!!F.length}Ue(p)&&Ce(p,function(F){m[F]=1}),n.eachSeries(function(F,V){var Z,Q,re,q=_[V]=[];"parallel"===F.subType?(Q=V,re=(Z=F).coordinateSystem,S=S||re.hasAxisBrushed(),O(Q)&&re.eachActiveState(Z.getData(),function(he,ge){"active"===he&&(b[ge]=1)})):function(Z,Q,re){if(Z.brushSelector&&(ve=Q,null==(_e=s.option.seriesIndex)||"all"===_e||!(Ue(_e)?Ir(_e,ve)<0:ve!==_e))&&(Ce(k,function(ge){s.brushTargetManager.controlSeries(ge,Z,n)&&re.push(ge),S=S||N(re)}),O(Q)&&N(re))){var he=Z.getData();he.each(function(ge){NN(Z,re,he,ge)&&(b[ge]=1)})}var ve,_e}(F,V,q)}),n.eachSeries(function(F,V){var q={seriesId:F.id,seriesIndex:V,seriesName:F.name,dataIndex:[]};c.selected.push(q);var Z=_[V],Q=F.getData(),re=O(V)?function(he){return b[he]?(q.dataIndex.push(Q.getRawIndex(he)),"inBrush"):"outOfBrush"}:function(he){return NN(F,Z,Q,he)?(q.dataIndex.push(Q.getRawIndex(he)),"inBrush"):"outOfBrush"};(O(V)?S:N(Z))&&function(he,ge,ve,_e,Ee,ze){var Ge,Xe={};function $e(_t){return fw(ve,Ge,_t)}function nt(_t,Et){tk(ve,Ge,_t,Et)}Ce(he,function(_t){var Et=Kf.prepareVisualTypes(ge[_t]);Xe[_t]=Et}),ve.each(function yt(_t,Et){var hn=ve.getRawDataItem(Ge=_t);if(!hn||!1!==hn.visualMap)for(var Zn=_e.call(void 0,_t),Rt=ge[Zn],Mn=Xe[Zn],lr=0,ar=Mn.length;lr<ar;lr++){var Kn=Mn[lr];Rt[Kn]&&Rt[Kn].applyVisual(_t,$e,nt)}})}(RN,D,Q,re)})}),function(s,l,c,d,p){if(p){var m=s.getZr();m[dL]||(m[fL]||(m[fL]=lz),E0(m,fL,c,l)(s,d))}}(t,r,o,i,e)}function lz(n,t){if(!n.isDisposed()){var e=n.getZr();e[dL]=!0,n.dispatchAction({type:"brushSelect",batch:t}),e[dL]=!1}}function NN(n,t,e,r){for(var o=0,i=t.length;o<i;o++){var s=t[o];if(n.brushSelector(r,e,s.selectors,s))return!0}}var cz={rect:function(n){return BN(n.range)},polygon:function(n){for(var t,e=n.range,r=0,o=e.length;r<o;r++){var i=e[r];i[0]<(t=t||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(t[0][0]=i[0]),i[0]>t[0][1]&&(t[0][1]=i[0]),i[1]<t[1][0]&&(t[1][0]=i[1]),i[1]>t[1][1]&&(t[1][1]=i[1])}return t&&BN(t)}};function BN(n){return new Io(n[0][0],n[1][0],n[0][1]-n[0][0],n[1][1]-n[1][0])}var fz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e,r){this.ecModel=e,this.api=r,(this._brushController=new lI(r.getZr())).on("brush",De(this._onBrush,this)).mount()},t.prototype.render=function(e,r,o,i){this.model=e,this._updateController(e,r,o,i)},t.prototype.updateTransform=function(e,r,o,i){LN(r),this._updateController(e,r,o,i)},t.prototype.updateVisual=function(e,r,o,i){this.updateTransform(e,r,o,i)},t.prototype.updateView=function(e,r,o,i){this._updateController(e,r,o,i)},t.prototype._updateController=function(e,r,o,i){(!i||i.$from!==e.id)&&this._brushController.setPanels(e.brushTargetManager.makePanelOpts(o)).enableBrush(e.brushOption).updateCovers(e.areas.slice())},t.prototype.dispose=function(){this._brushController.dispose()},t.prototype._onBrush=function(e){var r=this.model.id,o=this.model.brushTargetManager.setOutputRanges(e.areas,this.ecModel);(!e.isEnd||e.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:r,areas:an(o),$from:r}),e.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:r,areas:an(o),$from:r})},t.type="brush",t}(ks),dz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.areas=[],e.brushOption={},e}return gt(t,n),t.prototype.optionUpdated=function(e,r){var o=this.option;!r&&ON(o,e,["inBrush","outOfBrush"]);var i=o.inBrush=o.inBrush||{};o.outOfBrush=o.outOfBrush||{color:"#ddd"},i.hasOwnProperty("liftZ")||(i.liftZ=5)},t.prototype.setAreas=function(e){e&&(this.areas=mt(e,function(r){return zN(this.option,r)},this))},t.prototype.setBrushOption=function(e){this.brushOption=zN(this.option,e),this.brushType=this.brushOption.brushType},t.type="brush",t.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],t.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},t}(W);function zN(n,t){return ln({brushType:n.brushType,brushMode:n.brushMode,transformable:n.transformable,brushStyle:new aa(n.brushStyle).getItemStyle(),removeOnClick:n.removeOnClick,z:n.z},t,!0)}var hz=["rect","polygon","lineX","lineY","keep","clear"],pz=function(n){function t(){return null!==n&&n.apply(this,arguments)||this}return gt(t,n),t.prototype.render=function(e,r,o){var i,s,l;r.eachComponent({mainType:"brush"},function(c){i=c.brushType,s=c.brushOption.brushMode||"single",l=l||!!c.areas.length}),this._brushType=i,this._brushMode=s,Ce(e.get("type",!0),function(c){e.setIconStatus(c,("keep"===c?"multiple"===s:"clear"===c?l:c===i)?"emphasis":"normal")})},t.prototype.updateView=function(e,r,o){this.render(e,r,o)},t.prototype.getIcons=function(){var e=this.model,r=e.get("icon",!0),o={};return Ce(e.get("type",!0),function(i){r[i]&&(o[i]=r[i])}),o},t.prototype.onclick=function(e,r,o){var i=this._brushType,s=this._brushMode;"clear"===o?(r.dispatchAction({type:"axisAreaSelect",intervals:[]}),r.dispatchAction({type:"brush",command:"clear",areas:[]})):r.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===o?i:i!==o&&o,brushMode:"keep"===o?"multiple"===s?"single":"multiple":s}})},t.getDefaultOption=function(e){return{show:!0,type:hz.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:e.getLocaleModel().get(["toolbox","brush","title"])}},t}(vb),gz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return gt(t,n),t.type="title",t.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},t}(W),mz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.render=function(e,r,o){if(this.group.removeAll(),e.get("show")){var i=this.group,s=e.getModel("textStyle"),l=e.getModel("subtextStyle"),c=e.get("textAlign"),d=un(e.get("textBaseline"),e.get("textVerticalAlign")),p=new Oi({style:Vi(s,{text:e.get("text"),fill:s.getTextColor()},{disableBox:!0}),z2:10}),m=p.getBoundingRect(),b=e.get("subtext"),_=new Oi({style:Vi(l,{text:b,fill:l.getTextColor(),y:m.height+e.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),S=e.get("link"),k=e.get("sublink"),D=e.get("triggerEvent",!0);p.silent=!S&&!D,_.silent=!k&&!D,S&&p.on("click",function(){Jg(S,"_"+e.get("target"))}),k&&_.on("click",function(){Jg(k,"_"+e.get("subtarget"))}),So(p).eventData=So(_).eventData=D?{componentType:"title",componentIndex:e.componentIndex}:null,i.add(p),b&&i.add(_);var O=i.getBoundingRect(),N=e.getBoxLayoutParams();N.width=O.width,N.height=O.height;var F=tl(N,{width:o.getWidth(),height:o.getHeight()},e.get("padding"));c||("middle"===(c=e.get("left")||e.get("right"))&&(c="center"),"right"===c?F.x+=F.width:"center"===c&&(F.x+=F.width/2)),d||("center"===(d=e.get("top")||e.get("bottom"))&&(d="middle"),"bottom"===d?F.y+=F.height:"middle"===d&&(F.y+=F.height/2),d=d||"top"),i.x=F.x,i.y=F.y,i.markRedraw();var V={align:c,verticalAlign:d};p.setStyle(V),_.setStyle(V),O=i.getBoundingRect();var q=F.margin,Z=e.getItemStyle(["color","opacity"]);Z.fill=e.get("backgroundColor");var Q=new bi({shape:{x:O.x-q[3],y:O.y-q[0],width:O.width+q[1]+q[3],height:O.height+q[0]+q[2],r:e.get("borderRadius")},style:Z,subPixelOptimize:!0,silent:!0});i.add(Q)}},t.type="title",t}(ks),FN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode="box",e}return gt(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o),this._initData()},t.prototype.mergeOption=function(e){n.prototype.mergeOption.apply(this,arguments),this._initData()},t.prototype.setCurrentIndex=function(e){null==e&&(e=this.option.currentIndex);var r=this._data.count();this.option.loop?e=(e%r+r)%r:(e>=r&&(e=r-1),e<0&&(e=0)),this.option.currentIndex=e},t.prototype.getCurrentIndex=function(){return this.option.currentIndex},t.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},t.prototype.setPlayState=function(e){this.option.autoPlay=!!e},t.prototype.getPlayState=function(){return!!this.option.autoPlay},t.prototype._initData=function(){var e,r=this.option,o=r.data||[],i=r.axisType,s=this._names=[];"category"===i?(e=[],Ce(o,function(c,d){var p,m=is(oc(c),"");wr(c)?(p=an(c)).value=d:p=d,e.push(p),s.push(m)})):e=o,(this._data=new Jc([{name:"value",type:{category:"ordinal",time:"time",value:"number"}[i]||"number"}],this)).initData(e,s)},t.prototype.getData=function(){return this._data},t.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},t.type="timeline",t.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},t}(W),VN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="timeline.slider",t.defaultOption=Oh(FN.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),t}(FN);na(VN,WS.prototype);var vz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="timeline",t}(ks),yz=function(n){function t(e,r,o,i){var s=n.call(this,e,r,o)||this;return s.type=i||"value",s}return gt(t,n),t.prototype.getLabelModel=function(){return this.model.getModel("label")},t.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},t}(th),hL=Math.PI,HN=hi(),bz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(e,r){this.api=r},t.prototype.render=function(e,r,o){if(this.model=e,this.api=o,this.ecModel=r,this.group.removeAll(),e.get("show",!0)){var i=this._layout(e,o),s=this._createGroup("_mainGroup"),l=this._createGroup("_labelGroup"),c=this._axis=this._createAxis(i,e);e.formatTooltip=function(d){return Dc("nameValue",{noName:!0,value:c.scale.getLabel({value:d})})},Ce(["AxisLine","AxisTick","Control","CurrentPointer"],function(d){this["_render"+d](i,s,c,e)},this),this._renderAxisLabel(i,l,c,e),this._position(i,e)}this._doPlayStop(),this._updateTicksStatus()},t.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},t.prototype.dispose=function(){this._clearTimer()},t.prototype._layout=function(e,r){var o,i,s,l,_e,Ee,c=e.get(["label","position"]),d=e.get("orient"),p=(Ee=r,tl((_e=e).getBoxLayoutParams(),{width:Ee.getWidth(),height:Ee.getHeight()},_e.get("padding"))),m={horizontal:"center",vertical:(o=null==c||"auto"===c?"horizontal"===d?p.y+p.height/2<r.getHeight()/2?"-":"+":p.x+p.width/2<r.getWidth()/2?"+":"-":ir(c)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[d][c]:c)>=0||"+"===o?"left":"right"},b={horizontal:o>=0||"+"===o?"top":"bottom",vertical:"middle"},_={horizontal:0,vertical:hL/2},S="vertical"===d?p.height:p.width,k=e.getModel("controlStyle"),D=k.get("show",!0),O=D?k.get("itemSize"):0,N=D?k.get("itemGap"):0,F=O+N,V=e.get(["label","rotate"])||0;V=V*hL/180;var q=k.get("position",!0),Z=D&&k.get("showPlayBtn",!0),Q=D&&k.get("showPrevBtn",!0),re=D&&k.get("showNextBtn",!0),he=0,ge=S;"left"===q||"bottom"===q?(Z&&(i=[0,0],he+=F),Q&&(s=[he,0],he+=F),re&&(l=[ge-O,0],ge-=F)):(Z&&(i=[ge-O,0],ge-=F),Q&&(s=[0,0],he+=F),re&&(l=[ge-O,0],ge-=F));var ve=[he,ge];return e.get("inverse")&&ve.reverse(),{viewRect:p,mainLength:S,orient:d,rotation:_[d],labelRotation:V,labelPosOpt:o,labelAlign:e.get(["label","align"])||m[d],labelBaseline:e.get(["label","verticalAlign"])||e.get(["label","baseline"])||b[d],playPosition:i,prevBtnPosition:s,nextBtnPosition:l,axisExtent:ve,controlSize:O,controlGap:N}},t.prototype._position=function(e,r){var o=this._mainGroup,i=this._labelGroup,s=e.viewRect;if("vertical"===e.orient){var l=[1,0,0,1,0,0],c=s.x,d=s.y+s.height;Rc(l,l,[-c,-d]),Pl(l,l,-hL/2),Rc(l,l,[c,d]),(s=s.clone()).applyTransform(l)}var p=N(s),m=N(o.getBoundingRect()),b=N(i.getBoundingRect()),_=[o.x,o.y],S=[i.x,i.y];S[0]=_[0]=p[0][0];var k,D=e.labelPosOpt;function O(V){V.originX=p[0][0]-V.x,V.originY=p[1][0]-V.y}function N(V){return[[V.x,V.x+V.width],[V.y,V.y+V.height]]}function F(V,q,Z,Q,re){V[Q]+=Z[Q][re]-q[Q][re]}null==D||ir(D)?(F(_,m,p,1,k="+"===D?0:1),F(S,b,p,1,1-k)):(F(_,m,p,1,k=D>=0?0:1),S[1]=_[1]+D),o.setPosition(_),i.setPosition(S),o.rotation=i.rotation=e.rotation,O(o),O(i)},t.prototype._createAxis=function(e,r){var o=r.getData(),i=r.get("axisType"),s=function(d,p){if(p=p||d.get("type"))switch(p){case"category":return new X0({ordinalMeta:d.getCategories(),extent:[1/0,-1/0]});case"time":return new Ew({locale:d.ecModel.getLocaleModel(),useUTC:d.ecModel.get("useUTC")});default:return new Cv}}(r,i);s.getTicks=function(){return o.mapArray(["value"],function(d){return{value:d}})};var l=o.getDataExtent("value");s.setExtent(l[0],l[1]),s.calcNiceTicks();var c=new yz("value",s,e.axisExtent,i);return c.model=r,c},t.prototype._createGroup=function(e){var r=this[e]=new xo;return this.group.add(r),r},t.prototype._renderAxisLine=function(e,r,o,i){var s=o.getExtent();if(i.get(["lineStyle","show"])){var l=new Pu({shape:{x1:s[0],y1:0,x2:s[1],y2:0},style:Lt({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});r.add(l);var c=this._progressLine=new Pu({shape:{x1:s[0],x2:this._currentPointer?this._currentPointer.x:s[0],y1:0,y2:0},style:Yn({lineCap:"round",lineWidth:l.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});r.add(c)}},t.prototype._renderAxisTick=function(e,r,o,i){var s=this,l=i.getData(),c=o.scale.getTicks();this._tickSymbols=[],Ce(c,function(d){var p=o.dataToCoord(d.value),m=l.getItemModel(d.value),b=m.getModel("itemStyle"),_=m.getModel(["emphasis","itemStyle"]),S=m.getModel(["progress","itemStyle"]),k={x:p,y:0,onclick:De(s._changeTimeline,s,d.value)},D=WN(m,b,r,k);D.ensureState("emphasis").style=_.getItemStyle(),D.ensureState("progress").style=S.getItemStyle(),gd(D);var O=So(D);m.get("tooltip")?(O.dataIndex=d.value,O.dataModel=i):O.dataIndex=O.dataModel=null,s._tickSymbols.push(D)})},t.prototype._renderAxisLabel=function(e,r,o,i){var s=this;if(o.getLabelModel().get("show")){var l=i.getData(),c=o.getViewLabels();this._tickLabels=[],Ce(c,function(d){var p=d.tickValue,m=l.getItemModel(p),b=m.getModel("label"),_=m.getModel(["emphasis","label"]),S=m.getModel(["progress","label"]),k=o.dataToCoord(d.tickValue),D=new Oi({x:k,y:0,rotation:e.labelRotation-e.rotation,onclick:De(s._changeTimeline,s,p),silent:!1,style:Vi(b,{text:d.formattedLabel,align:e.labelAlign,verticalAlign:e.labelBaseline})});D.ensureState("emphasis").style=Vi(_),D.ensureState("progress").style=Vi(S),r.add(D),gd(D),HN(D).dataIndex=p,s._tickLabels.push(D)})}},t.prototype._renderControl=function(e,r,o,i){var s=e.controlSize,l=e.rotation,c=i.getModel("controlStyle").getItemStyle(),d=i.getModel(["emphasis","controlStyle"]).getItemStyle(),p=i.getPlayState(),m=i.get("inverse",!0);function b(_,S,k,D){if(_){var O=va(un(i.get(["controlStyle",S+"BtnSize"]),s),s),N=(q=[0,-O/2,O,O],Q=(Z={x:_[0],y:_[1],originX:s/2,originY:0,rotation:D?-l:0,rectHover:!0,style:c,onclick:k}).style,re=yd(i.get(["controlStyle",S+"Icon"]),Z||{},new Io(q[0],q[1],q[2],q[3])),Q&&re.setStyle(Q),re);N.ensureState("emphasis").style=d,r.add(N),gd(N)}var q,Z,Q,re}b(e.nextBtnPosition,"next",De(this._changeTimeline,this,m?"-":"+")),b(e.prevBtnPosition,"prev",De(this._changeTimeline,this,m?"+":"-")),b(e.playPosition,p?"stop":"play",De(this._handlePlayClick,this,!p),!0)},t.prototype._renderCurrentPointer=function(e,r,o,i){var s=i.getData(),l=i.getCurrentIndex(),c=s.getItemModel(l).getModel("checkpointStyle"),d=this;this._currentPointer=WN(c,c,this._mainGroup,{},this._currentPointer,{onCreate:function(m){m.draggable=!0,m.drift=De(d._handlePointerDrag,d),m.ondragend=De(d._handlePointerDragend,d),GN(m,d._progressLine,l,o,i,!0)},onUpdate:function(m){GN(m,d._progressLine,l,o,i)}})},t.prototype._handlePlayClick=function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},t.prototype._handlePointerDrag=function(e,r,o){this._clearTimer(),this._pointerChangeTimeline([o.offsetX,o.offsetY])},t.prototype._handlePointerDragend=function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},t.prototype._pointerChangeTimeline=function(e,r){var o=this._toAxisCoord(e)[0],i=Ua(this._axis.getExtent().slice());o>i[1]&&(o=i[1]),o<i[0]&&(o=i[0]),this._currentPointer.x=o,this._currentPointer.markRedraw();var s=this._progressLine;s&&(s.shape.x2=o,s.dirty());var l=this._findNearestTick(o),c=this.model;(r||l!==c.getCurrentIndex()&&c.get("realtime"))&&this._changeTimeline(l)},t.prototype._doPlayStop=function(){var e=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(function(){var r=e.model;e._changeTimeline(r.getCurrentIndex()+(r.get("rewind",!0)?-1:1))},this.model.get("playInterval")))},t.prototype._toAxisCoord=function(e){return hl(e,this._mainGroup.getLocalTransform(),!0)},t.prototype._findNearestTick=function(e){var r,o=this.model.getData(),i=1/0,s=this._axis;return o.each(["value"],function(l,c){var d=s.dataToCoord(l),p=Math.abs(d-e);p<i&&(i=p,r=c)}),r},t.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},t.prototype._changeTimeline=function(e){var r=this.model.getCurrentIndex();"+"===e?e=r+1:"-"===e&&(e=r-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})},t.prototype._updateTicksStatus=function(){var e=this.model.getCurrentIndex(),r=this._tickSymbols,o=this._tickLabels;if(r)for(var i=0;i<r.length;i++)r&&r[i]&&r[i].toggleState("progress",i<e);if(o)for(i=0;i<o.length;i++)o&&o[i]&&o[i].toggleState("progress",HN(o[i]).dataIndex<=e)},t.type="timeline.slider",t}(vz);function WN(n,t,e,r,o,i){var s=t.get("color");o?(o.setColor(s),e.add(o),i&&i.onUpdate(o)):((o=Dl(n.get("symbol"),-1,-1,2,2,s)).setStyle("strokeNoScale",!0),e.add(o),i&&i.onCreate(o));var l=t.getItemStyle(["color"]);o.setStyle(l),r=ln({rectHover:!0,z2:100},r,!0);var c=e1(n.get("symbolSize"));r.scaleX=c[0]/2,r.scaleY=c[1]/2;var d=t1(n.get("symbolOffset"),c);d&&(r.x=(r.x||0)+d[0],r.y=(r.y||0)+d[1]);var p=n.get("symbolRotate");return r.rotation=(p||0)*Math.PI/180||0,o.attr(r),o.updateTransform(),o}function GN(n,t,e,r,o,i){if(!n.dragging){var s=o.getModel("checkpointStyle"),l=r.dataToCoord(o.getData().get("value",e));if(i||!s.get("animation",!0))n.attr({x:l,y:0}),t&&t.attr({shape:{x2:l}});else{var c={duration:s.get("animationDuration",!0),easing:s.get("animationEasing",!0)};n.stopAnimation(null,!0),n.animateTo({x:l,y:0},c),t&&t.animateTo({shape:{x2:l}},c)}}}function xz(n){var t=n&&n.timeline;Ue(t)||(t=t?[t]:[]),Ce(t,function(e){e&&function(r){var o=r.type,i={number:"value",time:"time"};if(i[o]&&(r.axisType=i[o],delete r.type),UN(r),ST(r,"controlPosition")){var s=r.controlStyle||(r.controlStyle={});ST(s,"position")||(s.position=r.controlPosition),"none"!==s.position||ST(s,"show")||(s.show=!1,delete s.position),delete r.controlPosition}Ce(r.data||[],function(l){wr(l)&&!Ue(l)&&(!ST(l,"value")&&ST(l,"name")&&(l.value=l.name),UN(l))})}(e)})}function UN(n){var t=n.itemStyle||(n.itemStyle={}),e=t.emphasis||(t.emphasis={}),r=n.label||n.label||{},o=r.normal||(r.normal={}),i={normal:1,emphasis:1};Ce(r,function(s,l){i[l]||ST(o,l)||(o[l]=s)}),e.label&&!ST(r,"emphasis")&&(r.emphasis=e.label,delete e.label)}function ST(n,t){return n.hasOwnProperty(t)}function pL(n,t){if(!n)return!1;for(var e=Ue(n)?n:[n],r=0;r<e.length;r++)if(e[r]&&e[r][t])return!0;return!1}function vP(n){hs(n,"label",["show"])}var yP=hi(),AS=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.createdBySelf=!1,e}return gt(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o),this._mergeOption(e,o,!1,!0)},t.prototype.isAnimationEnabled=function(){if(zn.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},t.prototype.mergeOption=function(e,r){this._mergeOption(e,r,!1,!1)},t.prototype._mergeOption=function(e,r,o,i){var s=this.mainType;o||r.eachSeries(function(l){var c=l.get(this.mainType,!0),d=yP(l)[s];c&&c.data?(d?d._mergeOption(c,r,!0):(i&&vP(c),Ce(c.data,function(p){p instanceof Array?(vP(p[0]),vP(p[1])):vP(p)}),Lt(d=this.createMarkerModelFromSeries(c,this,r),{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),d.__hostSeries=l),yP(l)[s]=d):yP(l)[s]=null},this)},t.prototype.formatTooltip=function(e,r,o){var i=this.getData(),s=this.getRawValue(e),l=i.getName(e);return Dc("section",{header:this.name,blocks:[Dc("nameValue",{name:l,value:s,noName:!l,noValue:null==s})]})},t.prototype.getData=function(){return this._data},t.prototype.setData=function(e){this._data=e},t.getMarkerModelFromSeries=function(e,r){return yP(e)[r]},t.type="marker",t.dependencies=["series","grid","polar","geo"],t}(W);na(AS,WS.prototype);var _z=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.createMarkerModelFromSeries=function(e,r,o){return new t(e,r,o)},t.type="markPoint",t.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},t}(AS);function gL(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}function bP(n,t,e,r,o,i){var s=[],l=pi(t,r)?t.getCalculationInfo("stackResultDimension"):r,c=vL(t,l,n),d=t.indicesOfNearest(l,c)[0];s[o]=t.get(e,d),s[i]=t.get(l,d);var p=t.get(r,d),m=Zu(t.get(r,d));return(m=Math.min(m,20))>=0&&(s[i]=+s[i].toFixed(m)),[s,p]}var mL={min:dr(bP,"min"),max:dr(bP,"max"),average:dr(bP,"average"),median:dr(bP,"median")};function nO(n,t){if(t){var e=n.getData(),r=n.coordinateSystem,o=r&&r.dimensions;if(m=t,(isNaN(parseFloat(m.x))||isNaN(parseFloat(m.y)))&&!Ue(t.coord)&&Ue(o)){var i=jN(t,e,r,n);if((t=an(t)).type&&mL[t.type]&&i.baseAxis&&i.valueAxis){var s=Ir(o,i.baseAxis.dim),l=Ir(o,i.valueAxis.dim),c=mL[t.type](e,i.baseDataDim,i.valueDataDim,s,l);t.coord=c[0],t.value=c[1]}else t.coord=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis]}if(null!=t.coord&&Ue(o))for(var d=t.coord,p=0;p<2;p++)mL[d[p]]&&(d[p]=vL(e,e.mapDimension(o[p]),d[p]));else t.coord=[];return t}var m}function jN(n,t,e,r){var s,l,o={};return null!=n.valueIndex||null!=n.valueDim?(o.valueDataDim=null!=n.valueIndex?t.getDimension(n.valueIndex):n.valueDim,o.valueAxis=e.getAxis((s=o.valueDataDim,(l=r.getData().getDimensionInfo(s))&&l.coordDim)),o.baseAxis=e.getOtherAxis(o.valueAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim)):(o.baseAxis=r.getBaseAxis(),o.valueAxis=e.getOtherAxis(o.baseAxis),o.baseDataDim=t.mapDimension(o.baseAxis.dim),o.valueDataDim=t.mapDimension(o.valueAxis.dim)),o}function rO(n,t){return!(n&&n.containData&&t.coord&&!gL(t))||n.containData(t.coord)}function YN(n,t){return n?function(e,r,o,i){return M0(i<2?e.coord&&e.coord[i]:e.value,t[i])}:function(e,r,o,i){return M0(e.value,t[i])}}function vL(n,t,e){if("average"===e){var r=0,o=0;return n.each(t,function(i,s){isNaN(i)||(r+=i,o++)}),r/o}return"median"===e?n.getMedian(t):n.getDataExtent(t)["max"===e?1:0]}var yL=hi(),bL=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.init=function(){this.markerGroupMap=Or()},t.prototype.render=function(e,r,o){var i=this,s=this.markerGroupMap;s.each(function(l){yL(l).keep=!1}),r.eachSeries(function(l){var c=AS.getMarkerModelFromSeries(l,i.type);c&&i.renderSeries(l,c,r,o)}),s.each(function(l){!yL(l).keep&&i.group.remove(l.group)})},t.prototype.markKeep=function(e){yL(e).keep=!0},t.prototype.toggleBlurSeries=function(e,r){var o=this;Ce(e,function(i){var s=AS.getMarkerModelFromSeries(i,o.type);s&&s.getData().eachItemGraphicEl(function(l){l&&(r?Ib(l):c0(l))})})},t.type="marker",t}(ks);function qN(n,t,e){var r=t.coordinateSystem;n.each(function(o){var i,s=n.getItemModel(o),l=qn(s.get("x"),e.getWidth()),c=qn(s.get("y"),e.getHeight());if(isNaN(l)||isNaN(c)){if(t.getMarkerPosition)i=t.getMarkerPosition(n.getValues(n.dimensions,o));else if(r){var d=n.get(r.dimensions[0],o),p=n.get(r.dimensions[1],o);i=r.dataToPoint([d,p])}}else i=[l,c];isNaN(l)||(i[0]=l),isNaN(c)||(i[1]=c),n.setItemLayout(o,i)})}var wz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.updateTransform=function(e,r,o){r.eachSeries(function(i){var s=AS.getMarkerModelFromSeries(i,"markPoint");s&&(qN(s.getData(),i,o),this.markerGroupMap.get(i.id).updateLayout())},this)},t.prototype.renderSeries=function(e,r,o,i){var s=e.coordinateSystem,l=e.id,c=e.getData(),d=this.markerGroupMap,p=d.get(l)||d.set(l,new lb),m=function(b,_,S){var k;k=b?mt(b&&b.dimensions,function(F){return Lt(Lt({},_.getData().getDimensionInfo(_.getData().mapDimension(F))||{}),{name:F,ordinalMeta:null})}):[{name:"value",type:"float"}];var D=new Jc(k,S),O=mt(S.get("data"),dr(nO,_));b&&(O=yo(O,dr(rO,b)));var N=YN(!!b,k);return D.initData(O,null,N),D}(s,e,r);r.setData(m),qN(r.getData(),e,i),m.each(function(b){var _=m.getItemModel(b),S=_.getShallow("symbol"),k=_.getShallow("symbolSize"),D=_.getShallow("symbolRotate"),O=_.getShallow("symbolOffset"),N=_.getShallow("symbolKeepAspect");if(yr(S)||yr(k)||yr(D)||yr(O)){var F=r.getRawValue(b),V=r.getDataParams(b);yr(S)&&(S=S(F,V)),yr(k)&&(k=k(F,V)),yr(D)&&(D=D(F,V)),yr(O)&&(O=O(F,V))}var q=_.getModel("itemStyle").getItemStyle(),Z=Dy(c,"color");q.fill||(q.fill=Z),m.setItemVisual(b,{symbol:S,symbolSize:k,symbolRotate:D,symbolOffset:O,symbolKeepAspect:N,style:q})}),p.updateData(m),this.group.add(p.group),m.eachItemGraphicEl(function(b){b.traverse(function(_){So(_).dataModel=r})}),this.markKeep(p),p.group.silent=r.get("silent")||e.get("silent")},t.type="markPoint",t}(bL),Sz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.createMarkerModelFromSeries=function(e,r,o){return new t(e,r,o)},t.type="markLine",t.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},t}(AS),xP=hi(),Cz=function(n,t,e,r){var o,i=n.getData();if(Ue(r))o=r;else{var s=r.type;if("min"===s||"max"===s||"average"===s||"median"===s||null!=r.xAxis||null!=r.yAxis){var l=void 0,c=void 0;if(null!=r.yAxis||null!=r.xAxis)l=t.getAxis(null!=r.yAxis?"y":"x"),c=Hn(r.yAxis,r.xAxis);else{var d=jN(r,i,t,n);l=d.valueAxis,c=vL(i,hk(i,d.valueDataDim),s)}var p="x"===l.dim?0:1,m=1-p,b=an(r),_={coord:[]};b.type=null,b.coord=[],b.coord[m]=-1/0,_.coord[m]=1/0;var S=e.get("precision");S>=0&&gr(c)&&(c=+c.toFixed(Math.min(S,20))),b.coord[p]=_.coord[p]=c,o=[b,_,{type:s,valueIndex:r.valueIndex,value:c}]}else o=[]}var k=[nO(n,o[0]),nO(n,o[1]),Lt({},o[2])];return k[2].type=k[2].type||null,ln(k[2],k[0]),ln(k[2],k[1]),k};function _P(n){return!isNaN(n)&&!isFinite(n)}function XN(n,t,e,r){var o=1-n,i=r.dimensions[n];return _P(t[o])&&_P(e[o])&&t[n]===e[n]&&r.getAxis(i).containData(t[n])}function Mz(n,t){if("cartesian2d"===n.type){var e=t[0].coord,r=t[1].coord;if(e&&r&&(XN(1,e,r,n)||XN(0,e,r,n)))return!0}return rO(n,t[0])&&rO(n,t[1])}function xL(n,t,e,r,o){var i,s=r.coordinateSystem,l=n.getItemModel(t),c=qn(l.get("x"),o.getWidth()),d=qn(l.get("y"),o.getHeight());if(isNaN(c)||isNaN(d)){if(r.getMarkerPosition)i=r.getMarkerPosition(n.getValues(n.dimensions,t));else{var p=s.dimensions,m=n.get(p[0],t),b=n.get(p[1],t);i=s.dataToPoint([m,b])}if(fb(s,"cartesian2d")){var _=s.getAxis("x"),S=s.getAxis("y");_P(n.get((p=s.dimensions)[0],t))?i[0]=_.toGlobalCoord(_.getExtent()[e?0:1]):_P(n.get(p[1],t))&&(i[1]=S.toGlobalCoord(S.getExtent()[e?0:1]))}isNaN(c)||(i[0]=c),isNaN(d)||(i[1]=d)}else i=[c,d];n.setItemLayout(t,i)}var kz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.updateTransform=function(e,r,o){r.eachSeries(function(i){var s=AS.getMarkerModelFromSeries(i,"markLine");if(s){var l=s.getData(),c=xP(s).from,d=xP(s).to;c.each(function(p){xL(c,p,!0,i,o),xL(d,p,!1,i,o)}),l.each(function(p){l.setItemLayout(p,[c.getItemLayout(p),d.getItemLayout(p)])}),this.markerGroupMap.get(i.id).updateLayout()}},this)},t.prototype.renderSeries=function(e,r,o,i){var s=e.coordinateSystem,l=e.id,c=e.getData(),d=this.markerGroupMap,p=d.get(l)||d.set(l,new o2);this.group.add(p.group);var m=function(V,q,Z){var Q;Q=V?mt(V&&V.dimensions,function(Ee){return Lt(Lt({},q.getData().getDimensionInfo(q.getData().mapDimension(Ee))||{}),{name:Ee,ordinalMeta:null})}):[{name:"value",type:"float"}];var re=new Jc(Q,Z),he=new Jc(Q,Z),ge=new Jc([],Z),ve=mt(Z.get("data"),dr(Cz,q,V,Z));V&&(ve=yo(ve,dr(Mz,V)));var _e=YN(!!V,Q);return re.initData(mt(ve,function(Ee){return Ee[0]}),null,_e),he.initData(mt(ve,function(Ee){return Ee[1]}),null,_e),ge.initData(mt(ve,function(Ee){return Ee[2]})),ge.hasItemOption=!0,{from:re,to:he,line:ge}}(s,e,r),b=m.from,_=m.to,S=m.line;xP(r).from=b,xP(r).to=_,r.setData(S);var k=r.get("symbol"),D=r.get("symbolSize"),O=r.get("symbolRotate"),N=r.get("symbolOffset");function F(V,q,Z){var Q=V.getItemModel(q);xL(V,q,Z,e,i);var re=Q.getModel("itemStyle").getItemStyle();null==re.fill&&(re.fill=Dy(c,"color")),V.setItemVisual(q,{symbolKeepAspect:Q.get("symbolKeepAspect"),symbolOffset:un(Q.get("symbolOffset",!0),N[Z?0:1]),symbolRotate:un(Q.get("symbolRotate",!0),O[Z?0:1]),symbolSize:un(Q.get("symbolSize"),D[Z?0:1]),symbol:un(Q.get("symbol",!0),k[Z?0:1]),style:re})}Ue(k)||(k=[k,k]),Ue(D)||(D=[D,D]),Ue(O)||(O=[O,O]),Ue(N)||(N=[N,N]),m.from.each(function(V){F(b,V,!0),F(_,V,!1)}),S.each(function(V){var q=S.getItemModel(V).getModel("lineStyle").getLineStyle();S.setItemLayout(V,[b.getItemLayout(V),_.getItemLayout(V)]),null==q.stroke&&(q.stroke=b.getItemVisual(V,"style").fill),S.setItemVisual(V,{fromSymbolKeepAspect:b.getItemVisual(V,"symbolKeepAspect"),fromSymbolOffset:b.getItemVisual(V,"symbolOffset"),fromSymbolRotate:b.getItemVisual(V,"symbolRotate"),fromSymbolSize:b.getItemVisual(V,"symbolSize"),fromSymbol:b.getItemVisual(V,"symbol"),toSymbolKeepAspect:_.getItemVisual(V,"symbolKeepAspect"),toSymbolOffset:_.getItemVisual(V,"symbolOffset"),toSymbolRotate:_.getItemVisual(V,"symbolRotate"),toSymbolSize:_.getItemVisual(V,"symbolSize"),toSymbol:_.getItemVisual(V,"symbol"),style:q})}),p.updateData(S),m.line.eachItemGraphicEl(function(V){So(V).dataModel=r,V.traverse(function(q){So(q).dataModel=r})}),this.markKeep(p),p.group.silent=r.get("silent")||e.get("silent")},t.type="markLine",t}(bL),Tz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.createMarkerModelFromSeries=function(e,r,o){return new t(e,r,o)},t.type="markArea",t.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},t}(AS),wP=hi(),Dz=function(n,t,e,r){var o=r[0],i=r[1];if(o&&i){var s=nO(n,o),l=nO(n,i),c=s.coord,d=l.coord;c[0]=Hn(c[0],-1/0),c[1]=Hn(c[1],-1/0),d[0]=Hn(d[0],1/0),d[1]=Hn(d[1],1/0);var p=la([{},s,l]);return p.coord=[s.coord,l.coord],p.x0=s.x,p.y0=s.y,p.x1=l.x,p.y1=l.y,p}};function SP(n){return!isNaN(n)&&!isFinite(n)}function ZN(n,t,e,r){var o=1-n;return SP(t[o])&&SP(e[o])}function Az(n,t){var s,l,c,e=t.coord[0],r=t.coord[1],o={coord:e,x:t.x0,y:t.y0},i={coord:r,x:t.x1,y:t.y1};return fb(n,"cartesian2d")?!(!e||!r||!ZN(1,e,r)&&!ZN(0,e,r))||(l=o,c=i,!((s=n)&&s.containZone&&l.coord&&c.coord&&!gL(l)&&!gL(c))||s.containZone(l.coord,c.coord)):rO(n,o)||rO(n,i)}function KN(n,t,e,r,o){var i,s=r.coordinateSystem,l=n.getItemModel(t),c=qn(l.get(e[0]),o.getWidth()),d=qn(l.get(e[1]),o.getHeight());if(isNaN(c)||isNaN(d)){if(r.getMarkerPosition){var p=n.getValues(["x0","y0"],t),m=n.getValues(["x1","y1"],t),b=s.clampData(p),_=s.clampData(m),S=[];S[0]="x0"===e[0]?b[0]>_[0]?m[0]:p[0]:b[0]>_[0]?p[0]:m[0],S[1]="y0"===e[1]?b[1]>_[1]?m[1]:p[1]:b[1]>_[1]?p[1]:m[1],i=r.getMarkerPosition(S,e,!0)}else{var k=[N=n.get(e[0],t),F=n.get(e[1],t)];s.clampData&&s.clampData(k,k),i=s.dataToPoint(k,!0)}if(fb(s,"cartesian2d")){var D=s.getAxis("x"),O=s.getAxis("y"),N=n.get(e[0],t),F=n.get(e[1],t);SP(N)?i[0]=D.toGlobalCoord(D.getExtent()["x0"===e[0]?0:1]):SP(F)&&(i[1]=O.toGlobalCoord(O.getExtent()["y0"===e[1]?0:1]))}isNaN(c)||(i[0]=c),isNaN(d)||(i[1]=d)}else i=[c,d];return i}var $N=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],Iz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.updateTransform=function(e,r,o){r.eachSeries(function(i){var s=AS.getMarkerModelFromSeries(i,"markArea");if(s){var l=s.getData();l.each(function(c){var d=mt($N,function(p){return KN(l,c,p,i,o)});l.setItemLayout(c,d),l.getItemGraphicEl(c).setShape("points",d)})}},this)},t.prototype.renderSeries=function(e,r,o,i){var s=e.coordinateSystem,l=e.id,c=e.getData(),d=this.markerGroupMap,p=d.get(l)||d.set(l,{group:new xo});this.group.add(p.group),this.markKeep(p);var m=function(b,_,S){var k,D;if(b){var N=mt(b&&b.dimensions,function(q){var Z=_.getData();return Lt(Lt({},Z.getDimensionInfo(Z.mapDimension(q))||{}),{name:q,ordinalMeta:null})});D=mt(["x0","y0","x1","y1"],function(q,Z){return{name:q,type:N[Z%2].type}}),k=new Jc(D,S)}else k=new Jc(D=[{name:"value",type:"float"}],S);var F=mt(S.get("data"),dr(Dz,_,b,S));return b&&(F=yo(F,dr(Az,b))),k.initData(F,null,b?function(q,Z,Q,re){return M0(q.coord[Math.floor(re/2)][re%2],D[re])}:function(q,Z,Q,re){return M0(q.value,D[re])}),k.hasItemOption=!0,k}(s,e,r);r.setData(m),m.each(function(b){var _=mt($N,function(Q){return KN(m,b,Q,e,i)}),S=s.getAxis("x").scale,k=s.getAxis("y").scale,D=S.getExtent(),O=k.getExtent(),N=[S.parse(m.get("x0",b)),S.parse(m.get("x1",b))],F=[k.parse(m.get("y0",b)),k.parse(m.get("y1",b))];Ua(N),Ua(F),m.setItemLayout(b,{points:_,allClipped:D[0]>N[1]||D[1]<N[0]||O[0]>F[1]||O[1]<F[0]});var q=m.getItemModel(b).getModel("itemStyle").getItemStyle(),Z=Dy(c,"color");q.fill||(q.fill=Z,ir(q.fill)&&(q.fill=od(q.fill,.4))),q.stroke||(q.stroke=Z),m.setItemVisual(b,"style",q)}),m.diff(wP(p).data).add(function(b){var _=m.getItemLayout(b);if(!_.allClipped){var S=new eu({shape:{points:_.points}});m.setItemGraphicEl(b,S),p.group.add(S)}}).update(function(b,_){var S=wP(p).data.getItemGraphicEl(_),k=m.getItemLayout(b);k.allClipped?S&&p.group.remove(S):(S?mo(S,{shape:{points:k.points}},r,b):S=new eu({shape:{points:k.points}}),m.setItemGraphicEl(b,S),p.group.add(S))}).remove(function(b){var _=wP(p).data.getItemGraphicEl(b);p.group.remove(_)}).execute(),m.eachItemGraphicEl(function(b,_){var S=m.getItemModel(_),k=m.getItemVisual(_,"style");b.useStyle(m.getItemVisual(_,"style")),ps(b,gs(S),{labelFetcher:r,labelDataIndex:_,defaultText:m.getName(_)||"",inheritColor:ir(k.fill)?od(k.fill,1):"#000"}),kl(b,S),vu(b,null,null,S.get(["emphasis","disabled"])),So(b).dataModel=r}),wP(p).data=m,p.group.silent=r.get("silent")||e.get("silent")},t.type="markArea",t}(bL),_L=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.layoutMode={type:"box",ignoreSize:!0},e}return gt(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(e,r){n.prototype.mergeOption.call(this,e,r),this._updateSelector(e)},t.prototype._updateSelector=function(e){var r=e.selector,o=this.ecModel;!0===r&&(r=e.selector=["all","inverse"]),Ue(r)&&Ce(r,function(i,s){var l,c;ir(i)&&(i={type:i}),r[s]=ln(i,(l=o,"all"===(c=i.type)?{type:"all",title:l.getLocaleModel().get(["legend","selector","all"])}:"inverse"===c?{type:"inverse",title:l.getLocaleModel().get(["legend","selector","inverse"])}:void 0))})},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var r=!1,o=0;o<e.length;o++){var i=e[o].get("name");if(this.isSelected(i)){this.select(i),r=!0;break}}!r&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var r=[],o=[];e.eachRawSeries(function(c){var d;if(o.push(c.name),c.legendVisualProvider){var m=c.legendVisualProvider.getAllNames();e.isSeriesFiltered(c)||(o=o.concat(m)),m.length?r=r.concat(m):d=!0}else d=!0;d&&ic(c)&&r.push(c.name)}),this._availableNames=o;var i=this.get("data")||r,s=Or(),l=mt(i,function(c){return(ir(c)||gr(c))&&(c={name:c}),s.get(c.name)?null:(s.set(c.name,!0),new aa(c,this,this.ecModel))},this);this._data=yo(l,function(c){return!!c})},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var r=this.option.selected;"single"===this.get("selectedMode")&&Ce(this._data,function(o){r[o.get("name")]=!1}),r[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var r=this.option.selected;r.hasOwnProperty(e)||(r[e]=!0),this[r[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var r=this.option.selected;Ce(this._data,function(o){r[o.get("name",!0)]=!0})},t.prototype.inverseSelect=function(){var r=this.option.selected;Ce(this._data,function(o){var i=o.get("name",!0);r.hasOwnProperty(i)||(r[i]=!0),r[i]=!r[i]})},t.prototype.isSelected=function(e){var r=this.option.selected;return!(r.hasOwnProperty(e)&&!r[e])&&Ir(this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(W),L2=dr,wL=Ce,CP=xo,JN=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!1,e}return gt(t,n),t.prototype.init=function(){this.group.add(this._contentGroup=new CP),this.group.add(this._selectorGroup=new CP),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,r,o){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var s=e.get("align"),l=e.get("orient");s&&"auto"!==s||(s="right"===e.get("left")&&"vertical"===l?"right":"left");var c=e.get("selector",!0),d=e.get("selectorPosition",!0);!c||d&&"auto"!==d||(d="horizontal"===l?"end":"start"),this.renderInner(s,e,r,o,c,l,d);var p=e.getBoxLayoutParams(),m={width:o.getWidth(),height:o.getHeight()},b=e.get("padding"),_=tl(p,m,b),S=this.layoutInner(e,s,_,i,c,d),k=tl(Yn({width:S.width,height:S.height},p),m,b);this.group.x=k.x-S.x,this.group.y=k.y-S.y,this.group.markRedraw(),this.group.add(this._backgroundEl=sN(S,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,r,o,i,s,l,c){var d=this.getContentGroup(),p=Or(),m=r.get("selectedMode"),b=[];o.eachRawSeries(function(_){!_.get("legendHoverLink")&&b.push(_.id)}),wL(r.getData(),function(_,S){var k=_.get("name");if(!this.newlineDisabled&&(""===k||"\n"===k)){var D=new CP;return D.newline=!0,void d.add(D)}var O=o.getSeriesByName(k)[0];if(!p.get(k))if(O){var N=O.getData(),F=N.getVisual("legendLineStyle")||{},V=N.getVisual("legendIcon"),q=N.getVisual("style");this._createItem(O,k,S,_,r,e,F,q,V,m,i).on("click",L2(QN,k,null,i,b)).on("mouseover",L2(SL,O.name,null,i,b)).on("mouseout",L2(CL,O.name,null,i,b)),p.set(k,!0)}else o.eachRawSeries(function(Z){if(!p.get(k)&&Z.legendVisualProvider){var Q=Z.legendVisualProvider;if(!Q.containName(k))return;var re=Q.indexOfName(k),he=Q.getItemVisual(re,"style"),ge=Q.getItemVisual(re,"legendIcon"),ve=oo(he.fill);ve&&0===ve[3]&&(ve[3]=.2,he=Lt(Lt({},he),{fill:hu(ve,"rgba")})),this._createItem(Z,k,S,_,r,e,{},he,ge,m,i).on("click",L2(QN,null,k,i,b)).on("mouseover",L2(SL,null,k,i,b)).on("mouseout",L2(CL,null,k,i,b)),p.set(k,!0)}},this)},this),s&&this._createSelector(s,r,i,l,c)},t.prototype._createSelector=function(e,r,o,i,s){var l=this.getSelectorGroup();wL(e,function(c){var d=c.type,p=new Oi({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){o.dispatchAction({type:"all"===d?"legendAllSelect":"legendInverseSelect"})}});l.add(p),ps(p,{normal:r.getModel("selectorLabel"),emphasis:r.getModel(["emphasis","selectorLabel"])},{defaultText:c.title}),gd(p)})},t.prototype._createItem=function(e,r,o,i,s,l,c,d,p,m,b){var Ge,Xe,$e,_=e.visualDrawType,S=s.get("itemWidth"),k=s.get("itemHeight"),D=s.isSelected(r),O=i.get("symbolRotate"),N=i.get("symbolKeepAspect"),F=i.get("icon"),V=function(Ge,Xe,$e,nt,yt,_t,Et){function hn(Cr,zr){"auto"===Cr.lineWidth&&(Cr.lineWidth=zr.lineWidth>0?2:0),wL(Cr,function(qo,li){"inherit"===Cr[li]&&(Cr[li]=zr[li])})}var Zn=Xe.getModel("itemStyle"),Rt=Zn.getItemStyle(),Mn=0===Ge.lastIndexOf("empty",0)?"fill":"stroke",lr=Zn.getShallow("decal");Rt.decal=lr&&"inherit"!==lr?Ls(lr,Et):nt.decal,"inherit"===Rt.fill&&(Rt.fill=nt[yt]),"inherit"===Rt.stroke&&(Rt.stroke=nt[Mn]),"inherit"===Rt.opacity&&(Rt.opacity=("fill"===yt?nt:$e).opacity),hn(Rt,nt);var ar=Xe.getModel("lineStyle"),Kn=ar.getLineStyle();if(hn(Kn,$e),"auto"===Rt.fill&&(Rt.fill=nt.fill),"auto"===Rt.stroke&&(Rt.stroke=nt.fill),"auto"===Kn.stroke&&(Kn.stroke=nt.fill),!_t){var xr=Xe.get("inactiveBorderWidth");Rt.lineWidth="auto"===xr?nt.lineWidth>0&&Rt[Mn]?2:0:Rt.lineWidth,Rt.fill=Xe.get("inactiveColor"),Rt.stroke=Xe.get("inactiveBorderColor"),Kn.stroke=ar.get("inactiveColor"),Kn.lineWidth=ar.get("inactiveWidth")}return{itemStyle:Rt,lineStyle:Kn}}(p=F||p||"roundRect",i,c,d,_,D,b),q=new CP,Z=i.getModel("textStyle");if(!yr(e.getLegendIcon)||F&&"inherit"!==F){var Q="inherit"===F&&e.getData().getVisual("symbol")?"inherit"===O?e.getData().getVisual("symbolRotate"):O:0;q.add((($e=Dl(Xe=(Ge={itemWidth:S,itemHeight:k,icon:p,iconRotate:Q,itemStyle:V.itemStyle,lineStyle:V.lineStyle,symbolKeepAspect:N}).icon||"roundRect",0,0,Ge.itemWidth,Ge.itemHeight,Ge.itemStyle.fill,Ge.symbolKeepAspect)).setStyle(Ge.itemStyle),$e.rotation=(Ge.iconRotate||0)*Math.PI/180,$e.setOrigin([Ge.itemWidth/2,Ge.itemHeight/2]),Xe.indexOf("empty")>-1&&($e.style.stroke=$e.style.fill,$e.style.fill="#fff",$e.style.lineWidth=2),$e))}else q.add(e.getLegendIcon({itemWidth:S,itemHeight:k,icon:p,iconRotate:O,itemStyle:V.itemStyle,lineStyle:V.lineStyle,symbolKeepAspect:N}));var re="left"===l?S+5:-5,he=l,ge=s.get("formatter"),ve=r;ir(ge)&&ge?ve=ge.replace("{name}",null!=r?r:""):yr(ge)&&(ve=ge(r));var _e=i.get("inactiveColor");q.add(new Oi({style:Vi(Z,{text:ve,x:re,y:k/2,fill:D?Z.getTextColor():_e,align:he,verticalAlign:"middle"})}));var Ee=new bi({shape:q.getBoundingRect(),invisible:!0}),ze=i.getModel("tooltip");return ze.get("show")&&yu({el:Ee,componentModel:s,itemName:r,itemTooltipOption:ze.option}),q.add(Ee),q.eachChild(function(Ge){Ge.silent=!0}),Ee.silent=!m,this.getContentGroup().add(q),gd(q),q.__legendDataIndex=o,q},t.prototype.layoutInner=function(e,r,o,i,s,l){var c=this.getContentGroup(),d=this.getSelectorGroup();Yl(e.get("orient"),c,e.get("itemGap"),o.width,o.height);var p=c.getBoundingRect(),m=[-p.x,-p.y];if(d.markRedraw(),c.markRedraw(),s){Yl("horizontal",d,e.get("selectorItemGap",!0));var b=d.getBoundingRect(),_=[-b.x,-b.y],S=e.get("selectorButtonGap",!0),k=e.getOrient().index,D=0===k?"width":"height",O=0===k?"height":"width",N=0===k?"y":"x";"end"===l?_[k]+=p[D]+S:m[k]+=b[D]+S,_[1-k]+=p[O]/2-b[O]/2,d.x=_[0],d.y=_[1],c.x=m[0],c.y=m[1];var F={x:0,y:0};return F[D]=p[D]+S+b[D],F[O]=Math.max(p[O],b[O]),F[N]=Math.min(0,b[N]+_[1-k]),F}return c.x=m[0],c.y=m[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(ks);function QN(n,t,e,r){CL(n,t,e,r),e.dispatchAction({type:"legendToggleSelect",name:null!=n?n:t}),SL(n,t,e,r)}function eB(n){for(var t,e=n.getZr().storage.getDisplayList(),r=0,o=e.length;r<o&&!(t=e[r].states.emphasis);)r++;return t&&t.hoverLayer}function SL(n,t,e,r){eB(e)||e.dispatchAction({type:"highlight",seriesName:n,name:t,excludeSeriesId:r})}function CL(n,t,e,r){eB(e)||e.dispatchAction({type:"downplay",seriesName:n,name:t,excludeSeriesId:r})}function Oz(n){var t=n.findComponents({mainType:"legend"});t&&t.length&&n.filterSeries(function(e){for(var r=0;r<t.length;r++)if(!t[r].isSelected(e.name))return!1;return!0})}function oO(n,t,e){var r,o={},i="toggleSelected"===n;return e.eachComponent("legend",function(s){i&&null!=r?s[r?"select":"unSelect"](t.name):"allSelect"===n||"inverseSelect"===n?s[n]():(s[n](t.name),r=s.isSelected(t.name)),Ce(s.getData(),function(l){var c=l.get("name");if("\n"!==c&&""!==c){var d=s.isSelected(c);o[c]=o.hasOwnProperty(c)?o[c]&&d:d}})}),"allSelect"===n||"inverseSelect"===n?{selected:o}:{name:t.name,selected:o}}function tB(n){n.registerComponentModel(_L),n.registerComponentView(JN),n.registerProcessor(n.PRIORITY.PROCESSOR.SERIES_FILTER,Oz),n.registerSubTypeDefaulter("legend",function(){return"plain"}),function(t){t.registerAction("legendToggleSelect","legendselectchanged",dr(oO,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",dr(oO,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",dr(oO,"inverseSelect")),t.registerAction("legendSelect","legendselected",dr(oO,"select")),t.registerAction("legendUnSelect","legendunselected",dr(oO,"unSelect"))}(n)}var Ez=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(e,r,o){var i=tm(e);n.prototype.init.call(this,e,r,o),nB(this,e,i)},t.prototype.mergeOption=function(e,r){n.prototype.mergeOption.call(this,e,r),nB(this,this.option,e)},t.type="legend.scroll",t.defaultOption=Oh(_L.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(_L);function nB(n,t,e){var r=[1,1];r[n.getOrient().index]=0,em(t,e,{type:"box",ignoreSize:!!r})}var rB=xo,ML=["width","height"],kL=["x","y"],Pz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.newlineDisabled=!0,e._currentIndex=0,e}return gt(t,n),t.prototype.init=function(){n.prototype.init.call(this),this.group.add(this._containerGroup=new rB),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new rB)},t.prototype.resetInner=function(){n.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(e,r,o,i,s,l,c){var d=this;n.prototype.renderInner.call(this,e,r,o,i,s,l,c);var p=this._controllerGroup,m=r.get("pageIconSize",!0),b=Ue(m)?m:[m,m];S("pagePrev",0);var _=r.getModel("pageTextStyle");function S(k,D){var O=k+"DataIndex",N=yd(r.get("pageIcons",!0)[r.getOrient().name][D],{onclick:De(d._pageGo,d,O,r,i)},{x:-b[0]/2,y:-b[1]/2,width:b[0],height:b[1]});N.name=k,p.add(N)}p.add(new Oi({name:"pageText",style:{text:"xx/xx",fill:_.getTextColor(),font:_.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),S("pageNext",1)},t.prototype.layoutInner=function(e,r,o,i,s,l){var c=this.getSelectorGroup(),d=e.getOrient().index,p=ML[d],m=kL[d],b=ML[1-d],_=kL[1-d];s&&Yl("horizontal",c,e.get("selectorItemGap",!0));var S=e.get("selectorButtonGap",!0),k=c.getBoundingRect(),D=[-k.x,-k.y],O=an(o);s&&(O[p]=o[p]-k[p]-S);var N=this._layoutContentAndController(e,i,O,d,p,b,_,m);if(s){if("end"===l)D[d]+=N[p]+S;else{var F=k[p]+S;D[d]-=F,N[m]-=F}N[p]+=k[p]+S,D[1-d]+=N[_]+N[b]/2-k[b]/2,N[b]=Math.max(N[b],k[b]),N[_]=Math.min(N[_],k[_]+D[1-d]),c.x=D[0],c.y=D[1],c.markRedraw()}return N},t.prototype._layoutContentAndController=function(e,r,o,i,s,l,c,d){var p=this.getContentGroup(),m=this._containerGroup,b=this._controllerGroup;Yl(e.get("orient"),p,e.get("itemGap"),i?o.width:null,i?null:o.height),Yl("horizontal",b,e.get("pageButtonItemGap",!0));var _=p.getBoundingRect(),S=b.getBoundingRect(),k=this._showController=_[s]>o[s],D=[-_.x,-_.y];r||(D[i]=p[d]);var O=[0,0],N=[-S.x,-S.y],F=un(e.get("pageButtonGap",!0),e.get("itemGap",!0));k&&("end"===e.get("pageButtonPosition",!0)?N[i]+=o[s]-S[s]:O[i]+=S[s]+F),N[1-i]+=_[l]/2-S[l]/2,p.setPosition(D),m.setPosition(O),b.setPosition(N);var V={x:0,y:0};if(V[s]=k?o[s]:_[s],V[l]=Math.max(_[l],S[l]),V[c]=Math.min(0,S[c]+N[1-i]),m.__rectSize=o[s],k){var q={x:0,y:0};q[s]=Math.max(o[s]-S[s]-F,0),q[l]=V[l],m.setClipPath(new bi({shape:q})),m.__rectSize=q[s]}else b.eachChild(function(Q){Q.attr({invisible:!0,silent:!0})});var Z=this._getPageInfo(e);return null!=Z.pageIndex&&mo(p,{x:Z.contentPosition[0],y:Z.contentPosition[1]},k?e:null),this._updatePageInfoView(e,Z),V},t.prototype._pageGo=function(e,r,o){var i=this._getPageInfo(r)[e];null!=i&&o.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:r.id})},t.prototype._updatePageInfoView=function(e,r){var o=this._controllerGroup;Ce(["pagePrev","pageNext"],function(p){var m=null!=r[p+"DataIndex"],b=o.childOfName(p);b&&(b.setStyle("fill",e.get(m?"pageIconColor":"pageIconInactiveColor",!0)),b.cursor=m?"pointer":"default")});var i=o.childOfName("pageText"),s=e.get("pageFormatter"),l=r.pageIndex,c=null!=l?l+1:0,d=r.pageCount;i&&s&&i.setStyle("text",ir(s)?s.replace("{current}",null==c?"":c+"").replace("{total}",null==d?"":d+""):s({current:c,total:d}))},t.prototype._getPageInfo=function(e){var r=e.get("scrollDataIndex",!0),o=this.getContentGroup(),i=this._containerGroup.__rectSize,s=e.getOrient().index,l=ML[s],c=kL[s],d=this._findTargetItemIndex(r),p=o.children(),m=p[d],b=p.length,_=b?1:0,S={contentPosition:[o.x,o.y],pageCount:_,pageIndex:_-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!m)return S;var k=V(m);S.contentPosition[s]=-k.s;for(var D=d+1,O=k,N=k,F=null;D<=b;++D)(!(F=V(p[D]))&&N.e>O.s+i||F&&!q(F,O.s))&&(O=N.i>O.i?N:F)&&(null==S.pageNextDataIndex&&(S.pageNextDataIndex=O.i),++S.pageCount),N=F;for(D=d-1,O=k,N=k,F=null;D>=-1;--D)(F=V(p[D]))&&q(N,F.s)||!(O.i<N.i)||(N=O,null==S.pagePrevDataIndex&&(S.pagePrevDataIndex=O.i),++S.pageCount,++S.pageIndex),O=F;return S;function V(Z){if(Z){var Q=Z.getBoundingRect(),re=Q[c]+Z[c];return{s:re,e:re+Q[l],i:Z.__legendDataIndex}}}function q(Z,Q){return Z.e>=Q&&Z.s<=Q+i}},t.prototype._findTargetItemIndex=function(e){return this._showController?(this.getContentGroup().eachChild(function(i,s){var l=i.__legendDataIndex;null==o&&null!=l&&(o=s),l===e&&(r=s)}),null!=r?r:o):0;var r,o},t.type="legend.scroll",t}(JN);function Rz(n){xi(tB),n.registerComponentModel(Ez),n.registerComponentView(Pz),function(t){t.registerAction("legendScroll","legendscroll",function(e,r){var o=e.scrollDataIndex;null!=o&&r.eachComponent({mainType:"legend",subType:"scroll",query:e},function(i){i.setScrollDataIndex(o)})})}(n)}var Lz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="dataZoom.inside",t.defaultOption=Oh(JI.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),t}(JI),TL=hi();function Nz(n,t,e){TL(n).coordSysRecordMap.each(function(r){var o=r.dataZoomInfoMap.get(t.uid);o&&(o.getRange=e)})}function oB(n,t){if(t){n.removeKey(t.model.uid);var e=t.controller;e&&e.dispose()}}function Bz(n,t){n.isDisposed()||n.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:t})}function zz(n,t,e,r){return n.coordinateSystem.containPoint([e,r])}var Vz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return gt(t,n),t.prototype.render=function(e,r,o){n.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),Nz(o,e,{pan:De(DL.pan,this),zoom:De(DL.zoom,this),scrollMove:De(DL.scrollMove,this)}))},t.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){(function(e,r){for(var o=TL(e).coordSysRecordMap,i=o.keys(),s=0;s<i.length;s++){var c=o.get(i[s]),d=c.dataZoomInfoMap;if(d){var p=r.uid;d.get(p)&&(d.removeKey(p),d.keys().length||oB(o,c))}}})(this.api,this.dataZoomModel),this.range=null},t.type="dataZoom.inside",t}(JR),DL={zoom:function(n,t,e,r){var o=this.range,i=o.slice(),s=n.axisModels[0];if(s){var l=AL[t](null,[r.originX,r.originY],s,e,n),c=(l.signal>0?l.pixelStart+l.pixelLength-l.pixel:l.pixel-l.pixelStart)/l.pixelLength*(i[1]-i[0])+i[0],d=Math.max(1/r.scale,0);i[0]=(i[0]-c)*d+c,i[1]=(i[1]-c)*d+c;var p=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return iu(0,i,[0,100],0,p.minSpan,p.maxSpan),this.range=i,o[0]!==i[0]||o[1]!==i[1]?i:void 0}},pan:iB(function(n,t,e,r,o,i){var s=AL[r]([i.oldX,i.oldY],[i.newX,i.newY],t,o,e);return s.signal*(n[1]-n[0])*s.pixel/s.pixelLength}),scrollMove:iB(function(n,t,e,r,o,i){return AL[r]([0,0],[i.scrollDelta,i.scrollDelta],t,o,e).signal*(n[1]-n[0])*i.scrollDelta})};function iB(n){return function(t,e,r,o){var i=this.range,s=i.slice(),l=t.axisModels[0];if(l)return iu(n(s,l,t,e,r,o),s,[0,100],"all"),this.range=s,i[0]!==s[0]||i[1]!==s[1]?s:void 0}}var AL={grid:function(n,t,e,r,o){var i=e.axis,s={},l=o.model.coordinateSystem.getRect();return n=n||[0,0],"x"===i.dim?(s.pixel=t[0]-n[0],s.pixelLength=l.width,s.pixelStart=l.x,s.signal=i.inverse?1:-1):(s.pixel=t[1]-n[1],s.pixelLength=l.height,s.pixelStart=l.y,s.signal=i.inverse?-1:1),s},polar:function(n,t,e,r,o){var i=e.axis,s={},l=o.model.coordinateSystem,c=l.getRadiusAxis().getExtent(),d=l.getAngleAxis().getExtent();return n=n?l.pointToCoord(n):[0,0],t=l.pointToCoord(t),"radiusAxis"===e.mainType?(s.pixel=t[0]-n[0],s.pixelLength=c[1]-c[0],s.pixelStart=c[0],s.signal=i.inverse?1:-1):(s.pixel=t[1]-n[1],s.pixelLength=d[1]-d[0],s.pixelStart=d[0],s.signal=i.inverse?-1:1),s},singleAxis:function(n,t,e,r,o){var i=e.axis,s=o.model.coordinateSystem.getRect(),l={};return n=n||[0,0],"horizontal"===i.orient?(l.pixel=t[0]-n[0],l.pixelLength=s.width,l.pixelStart=s.x,l.signal=i.inverse?1:-1):(l.pixel=t[1]-n[1],l.pixelLength=s.height,l.pixelStart=s.y,l.signal=i.inverse?-1:1),l}};function aB(n){QR(n),n.registerComponentModel(Lz),n.registerComponentView(Vz),function Fz(n){n.registerProcessor(n.PRIORITY.PROCESSOR.FILTER,function(t,e){var r=TL(e),o=r.coordSysRecordMap||(r.coordSysRecordMap=Or());o.each(function(i){i.dataZoomInfoMap=null}),t.eachComponent({mainType:"dataZoom",subType:"inside"},function(i){Ce(tN(i).infoList,function(s){var d,p,m,b,l=s.model.uid,c=o.get(l)||o.set(l,(d=e,m={model:p=s.model,containsPoint:dr(zz,p),dispatchAction:dr(Bz,d),dataZoomInfoMap:null,controller:null},b=m.controller=new v_(d.getZr()),Ce(["pan","zoom","scrollMove"],function(_){b.on(_,function(S){var k=[];m.dataZoomInfoMap.each(function(D){if(S.isAvailableBehavior(D.model.option)){var O=(D.getRange||{})[_],N=O&&O(D.dzReferCoordSysInfo,m.model.mainType,m.controller,S);!D.model.get("disabled",!0)&&N&&k.push({dataZoomId:D.model.id,start:N[0],end:N[1]})}}),k.length&&m.dispatchAction(k)})}),m));(c.dataZoomInfoMap||(c.dataZoomInfoMap=Or())).set(i.uid,{dzReferCoordSysInfo:s,model:i,getRange:null})})}),o.each(function(i){var s,b,_,S,k,l=i.controller,c=i.dataZoomInfoMap;if(c){var d=c.keys()[0];null!=d&&(s=c.get(d))}if(s){var p=(_="type_",S={type_true:2,type_move:1,type_false:0,type_undefined:-1},k=!0,c.each(function(D){var O=D.model,N=!O.get("disabled",!0)&&(!O.get("zoomLock",!0)||"move");S[_+N]>S[_+b]&&(b=N),k=k&&O.get("preventDefaultMouseMove",!0)}),{controlType:b,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!k}});l.enable(p.controlType,p.opt),l.setPointerChecker(i.containsPoint),E0(i,"dispatchAction",s.model.get("throttle",!0),"fixRate")}else oB(o,i)})})}(n)}var Hz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.type="dataZoom.slider",t.layoutMode="box",t.defaultOption=Oh(JI.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),t}(JI),iO=bi,aO="horizontal",sB="vertical",Wz=["line","bar","candlestick","scatter"],Gz={easing:"cubicOut",duration:100,delay:0},Uz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._displayables={},e}return gt(t,n),t.prototype.init=function(e,r){this.api=r,this._onBrush=De(this._onBrush,this),this._onBrushEnd=De(this._onBrushEnd,this)},t.prototype.render=function(e,r,o,i){if(n.prototype.render.apply(this,arguments),E0(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},t.prototype.dispose=function(){this._clear(),n.prototype.dispose.apply(this,arguments)},t.prototype._clear=function(){Tx(this,"_dispatchZoomAction");var e=this.api.getZr();e.off("mousemove",this._onBrush),e.off("mouseup",this._onBrushEnd)},t.prototype._buildView=function(){var e=this.group;e.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var r=this._displayables.sliderGroup=new xo;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(r),this._positionGroup()},t.prototype._resetLocation=function(){var e=this.dataZoomModel,r=this.api,o=e.get("brushSelect")?7:0,i=this._findCoordRect(),s={width:r.getWidth(),height:r.getHeight()},l=this._orient===aO?{right:s.width-i.x-i.width,top:s.height-30-7-o,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},c=tm(e.option);Ce(["right","top","width","height"],function(p){"ph"===c[p]&&(c[p]=l[p])});var d=tl(c,s);this._location={x:d.x,y:d.y},this._size=[d.width,d.height],this._orient===sB&&this._size.reverse()},t.prototype._positionGroup=function(){var e=this.group,r=this._location,o=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),s=i&&i.get("inverse"),l=this._displayables.sliderGroup,c=(this._dataShadowInfo||{}).otherAxisInverse;l.attr(o!==aO||s?o===aO&&s?{scaleY:c?1:-1,scaleX:-1}:o!==sB||s?{scaleY:c?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:c?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:c?1:-1,scaleX:1});var d=e.getBoundingRect([l]);e.x=r.x-d.x,e.y=r.y-d.y,e.markRedraw()},t.prototype._getViewExtent=function(){return[0,this._size[0]]},t.prototype._renderBackground=function(){var e=this.dataZoomModel,r=this._size,o=this._displayables.sliderGroup,i=e.get("brushSelect");o.add(new iO({silent:!0,shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:e.get("backgroundColor")},z2:-40}));var s=new iO({shape:{x:0,y:0,width:r[0],height:r[1]},style:{fill:"transparent"},z2:0,onclick:De(this._onClickPanel,this)}),l=this.api.getZr();i?(s.on("mousedown",this._onBrushStart,this),s.cursor="crosshair",l.on("mousemove",this._onBrush),l.on("mouseup",this._onBrushEnd)):(l.off("mousemove",this._onBrush),l.off("mouseup",this._onBrushEnd)),o.add(s)},t.prototype._renderDataShadow=function(){var ge,ve,_e,Ee,e=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],e){var r=this._size,o=this._shadowSize||[],i=e.series,s=i.getRawData(),l=i.getShadowDim&&i.getShadowDim(),c=l&&s.getDimensionInfo(l)?i.getShadowDim():e.otherDim;if(null!=c){var d=this._shadowPolygonPts,p=this._shadowPolylinePts;if(s!==this._shadowData||c!==this._shadowDim||r[0]!==o[0]||r[1]!==o[1]){var m=s.getDataExtent(c),b=.3*(m[1]-m[0]);m=[m[0]-b,m[1]+b];var _,S=[0,r[1]],D=[[r[0],0],[0,0]],O=[],N=r[0]/(s.count()-1),F=0,V=Math.round(s.count()/r[0]);s.each([c],function(he,ge){if(V>0&&ge%V)F+=N;else{var ve=null==he||isNaN(he)||""===he,_e=ve?0:fa(he,m,S,!0);ve&&!_&&ge?(D.push([D[D.length-1][0],0]),O.push([O[O.length-1][0],0])):!ve&&_&&(D.push([F,0]),O.push([F,0])),D.push([F,_e]),O.push([F,_e]),F+=N,_=ve}}),d=this._shadowPolygonPts=D,p=this._shadowPolylinePts=O}this._shadowData=s,this._shadowDim=c,this._shadowSize=[r[0],r[1]];for(var q=this.dataZoomModel,Z=0;Z<3;Z++){var Q=(ge=void 0,ve=void 0,void 0,void 0,ge=q.getModel(1===Z?"selectedDataBackground":"dataBackground"),ve=new xo,_e=new eu({shape:{points:d},segmentIgnoreThreshold:1,style:ge.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),Ee=new Qu({shape:{points:p},segmentIgnoreThreshold:1,style:ge.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19}),ve.add(_e),ve.add(Ee),ve);this._displayables.sliderGroup.add(Q),this._displayables.dataShadowSegs.push(Q)}}}},t.prototype._prepareDataShadowInfo=function(){var e=this.dataZoomModel,r=e.get("showDataShadow");if(!1!==r){var o,i=this.ecModel;return e.eachTargetAxis(function(s,l){Ce(e.getAxisProxy(s,l).getTargetSeriesModels(),function(c){if(!(o||!0!==r&&Ir(Wz,c.get("type"))<0)){var d,p=i.getComponent(TM(s),l).axis,m={x:"y",y:"x",radius:"angle",angle:"radius"}[s],b=c.coordinateSystem;null!=m&&b.getOtherAxis&&(d=b.getOtherAxis(p).inverse),m=c.getData().mapDimension(m),o={thisAxis:p,series:c,thisDim:s,otherDim:m,otherAxisInverse:d}}},this)},this),o}},t.prototype._renderHandle=function(){var e=this.group,r=this._displayables,o=r.handles=[null,null],i=r.handleLabels=[null,null],s=this._displayables.sliderGroup,l=this._size,c=this.dataZoomModel,d=this.api,p=c.get("borderRadius")||0,m=c.get("brushSelect"),b=r.filler=new iO({silent:m,style:{fill:c.get("fillerColor")},textConfig:{position:"inside"}});s.add(b),s.add(new iO({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:l[0],height:l[1],r:p},style:{stroke:c.get("dataBackgroundColor")||c.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),Ce([0,1],function(F){var V=c.get("handleIcon");!hw[V]&&V.indexOf("path://")<0&&V.indexOf("image://")<0&&(V="path://"+V);var q=Dl(V,-1,0,2,2,null,!0);q.attr({cursor:uB(this._orient),draggable:!0,drift:De(this._onDragMove,this,F),ondragend:De(this._onDragEnd,this),onmouseover:De(this._showDataInfo,this,!0),onmouseout:De(this._showDataInfo,this,!1),z2:5});var Z=q.getBoundingRect(),Q=c.get("handleSize");this._handleHeight=qn(Q,this._size[1]),this._handleWidth=Z.width/Z.height*this._handleHeight,q.setStyle(c.getModel("handleStyle").getItemStyle()),q.style.strokeNoScale=!0,q.rectHover=!0,q.ensureState("emphasis").style=c.getModel(["emphasis","handleStyle"]).getItemStyle(),gd(q);var re=c.get("handleColor");null!=re&&(q.style.fill=re),s.add(o[F]=q);var he=c.getModel("textStyle");e.add(i[F]=new Oi({silent:!0,invisible:!0,style:Vi(he,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:he.getTextColor(),font:he.getFont()}),z2:10}))},this);var _=b;if(m){var S=qn(c.get("moveHandleSize"),l[1]),k=r.moveHandle=new bi({style:c.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:l[1]-.5,height:S}}),D=.8*S,O=r.moveHandleIcon=Dl(c.get("moveHandleIcon"),-D/2,-D/2,D,D,"#fff",!0);O.silent=!0,O.y=l[1]+S/2-.5,k.ensureState("emphasis").style=c.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var N=Math.min(l[1]/2,Math.max(S,10));(_=r.moveZone=new bi({invisible:!0,shape:{y:l[1]-N,height:S+N}})).on("mouseover",function(){d.enterEmphasis(k)}).on("mouseout",function(){d.leaveEmphasis(k)}),s.add(k),s.add(O),s.add(_)}_.attr({draggable:!0,cursor:uB(this._orient),drift:De(this._onDragMove,this,"all"),ondragstart:De(this._showDataInfo,this,!0),ondragend:De(this._onDragEnd,this),onmouseover:De(this._showDataInfo,this,!0),onmouseout:De(this._showDataInfo,this,!1)})},t.prototype._resetInterval=function(){var e=this._range=this.dataZoomModel.getPercentRange(),r=this._getViewExtent();this._handleEnds=[fa(e[0],[0,100],r,!0),fa(e[1],[0,100],r,!0)]},t.prototype._updateInterval=function(e,r){var o=this.dataZoomModel,i=this._handleEnds,s=this._getViewExtent(),l=o.findRepresentativeAxisProxy().getMinMaxSpan(),c=[0,100];iu(r,i,s,o.get("zoomLock")?"all":e,null!=l.minSpan?fa(l.minSpan,c,s,!0):null,null!=l.maxSpan?fa(l.maxSpan,c,s,!0):null);var d=this._range,p=this._range=Ua([fa(i[0],s,c,!0),fa(i[1],s,c,!0)]);return!d||d[0]!==p[0]||d[1]!==p[1]},t.prototype._updateView=function(e){var r=this._displayables,o=this._handleEnds,i=Ua(o.slice()),s=this._size;Ce([0,1],function(_){var k=this._handleHeight;r.handles[_].attr({scaleX:k/2,scaleY:k/2,x:o[_]+(_?-1:1),y:s[1]/2-k/2})},this),r.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:s[1]});var l={x:i[0],width:i[1]-i[0]};r.moveHandle&&(r.moveHandle.setShape(l),r.moveZone.setShape(l),r.moveZone.getBoundingRect(),r.moveHandleIcon&&r.moveHandleIcon.attr("x",l.x+l.width/2));for(var c=r.dataShadowSegs,d=[0,i[0],i[1],s[0]],p=0;p<c.length;p++){var m=c[p],b=m.getClipPath();b||(b=new bi,m.setClipPath(b)),b.setShape({x:d[p],y:0,width:d[p+1]-d[p],height:s[1]})}this._updateDataInfo(e)},t.prototype._updateDataInfo=function(e){var r=this.dataZoomModel,o=this._displayables,i=o.handleLabels,s=this._orient,l=["",""];if(r.get("showDetail")){var c=r.findRepresentativeAxisProxy();if(c){var d=c.getAxisModel().axis,p=this._range,m=e?c.calculateDataWindow({start:p[0],end:p[1]}).valueWindow:c.getDataValueWindow();l=[this._formatLabel(m[0],d),this._formatLabel(m[1],d)]}}var b=Ua(this._handleEnds.slice());function _(S){var k=jo(o.handles[S].parent,this.group),D=sp(0===S?"right":"left",k),O=this._handleWidth/2+5,N=hl([b[S]+(0===S?-O:O),this._size[1]/2],k);i[S].setStyle({x:N[0],y:N[1],verticalAlign:s===aO?"middle":D,align:s===aO?D:"center",text:l[S]})}_.call(this,0),_.call(this,1)},t.prototype._formatLabel=function(e,r){var o=this.dataZoomModel,i=o.get("labelFormatter"),s=o.get("labelPrecision");null!=s&&"auto"!==s||(s=r.getPixelPrecision());var l=null==e||isNaN(e)?"":"category"===r.type||"time"===r.type?r.scale.getLabel({value:Math.round(e)}):e.toFixed(Math.min(s,20));return yr(i)?i(e,l):ir(i)?i.replace("{value}",l):l},t.prototype._showDataInfo=function(e){var r=this._displayables,o=r.handleLabels;o[0].attr("invisible",!(e=this._dragging||e)),o[1].attr("invisible",!e),r.moveHandle&&this.api[e?"enterEmphasis":"leaveEmphasis"](r.moveHandle,1)},t.prototype._onDragMove=function(e,r,o,i){this._dragging=!0,Tu(i.event);var s=hl([r,o],this._displayables.sliderGroup.getLocalTransform(),!0),l=this._updateInterval(e,s[0]),c=this.dataZoomModel.get("realtime");this._updateView(!c),l&&c&&this._dispatchZoomAction(!0)},t.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},t.prototype._onClickPanel=function(e){var r=this._size,o=this._displayables.sliderGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(o[0]<0||o[0]>r[0]||o[1]<0||o[1]>r[1])){var i=this._handleEnds,l=this._updateInterval("all",o[0]-(i[0]+i[1])/2);this._updateView(),l&&this._dispatchZoomAction(!1)}},t.prototype._onBrushStart=function(e){this._brushStart=new lo(e.offsetX,e.offsetY),this._brushing=!0,this._brushStartTime=+new Date},t.prototype._onBrushEnd=function(e){if(this._brushing){var r=this._displayables.brushRect;if(this._brushing=!1,r){r.attr("ignore",!0);var o=r.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(o.width)<5)){var i=this._getViewExtent(),s=[0,100];this._range=Ua([fa(o.x,i,s,!0),fa(o.x+o.width,i,s,!0)]),this._handleEnds=[o.x,o.x+o.width],this._updateView(),this._dispatchZoomAction(!1)}}}},t.prototype._onBrush=function(e){this._brushing&&(Tu(e.event),this._updateBrushRect(e.offsetX,e.offsetY))},t.prototype._updateBrushRect=function(e,r){var o=this._displayables,s=o.brushRect;s||(s=o.brushRect=new iO({silent:!0,style:this.dataZoomModel.getModel("brushStyle").getItemStyle()}),o.sliderGroup.add(s)),s.attr("ignore",!1);var l=this._brushStart,c=this._displayables.sliderGroup,d=c.transformCoordToLocal(e,r),p=c.transformCoordToLocal(l.x,l.y),m=this._size;d[0]=Math.max(Math.min(m[0],d[0]),0),s.setShape({x:p[0],y:0,width:d[0]-p[0],height:m[1]})},t.prototype._dispatchZoomAction=function(e){var r=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:e?Gz:null,start:r[0],end:r[1]})},t.prototype._findCoordRect=function(){var e,r=tN(this.dataZoomModel).infoList;if(!e&&r.length){var o=r[0].model.coordinateSystem;e=o.getRect&&o.getRect()}if(!e){var i=this.api.getWidth(),s=this.api.getHeight();e={x:.2*i,y:.2*s,width:.6*i,height:.6*s}}return e},t.type="dataZoom.slider",t}(JR);function uB(n){return"vertical"===n?"ns-resize":"ew-resize"}function lB(n){n.registerComponentModel(Hz),n.registerComponentView(Uz),QR(n)}var cB=function(n,t,e){var r=an((jz[n]||{})[t]);return e&&Ue(r)?r[r.length-1]:r},jz={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},fB=Kf.mapVisual,Yz=Kf.eachVisual,qz=Ue,dB=Ce,Xz=Ua,Zz=fa,MP=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.stateList=["inRange","outOfRange"],e.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],e.layoutMode={type:"box",ignoreSize:!0},e.dataBound=[-1/0,1/0],e.targetVisuals={},e.controllerVisuals={},e}return gt(t,n),t.prototype.init=function(e,r,o){this.mergeDefaultAndTheme(e,o)},t.prototype.optionUpdated=function(e,r){!r&&ON(this.option,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},t.prototype.resetVisual=function(e){var r=this.stateList;e=De(e,this),this.controllerVisuals=cL(this.option.controller,r,e),this.targetVisuals=cL(this.option.target,r,e)},t.prototype.getItemSymbol=function(){return null},t.prototype.getTargetSeriesIndices=function(){var e=this.option.seriesIndex,r=[];return null==e||"all"===e?this.ecModel.eachSeries(function(o,i){r.push(i)}):r=ci(e),r},t.prototype.eachTargetSeries=function(e,r){Ce(this.getTargetSeriesIndices(),function(o){var i=this.ecModel.getSeriesByIndex(o);i&&e.call(r,i)},this)},t.prototype.isTargetSeries=function(e){var r=!1;return this.eachTargetSeries(function(o){o===e&&(r=!0)}),r},t.prototype.formatValueText=function(e,r,o){var i,s=this.option,l=s.precision,c=this.dataBound,d=s.formatter;o=o||["<",">"],Ue(e)&&(e=e.slice(),i=!0);var p=r?e:i?[m(e[0]),m(e[1])]:m(e);return ir(d)?d.replace("{value}",i?p[0]:p).replace("{value2}",i?p[1]:p):yr(d)?i?d(e[0],e[1]):d(e):i?e[0]===c[0]?o[0]+" "+p[1]:e[1]===c[1]?o[1]+" "+p[0]:p[0]+" - "+p[1]:p;function m(b){return b===c[0]?"min":b===c[1]?"max":(+b).toFixed(Math.min(l,20))}},t.prototype.resetExtent=function(){var e=this.option,r=Xz([e.min,e.max]);this._dataExtent=r},t.prototype.getDataDimensionIndex=function(e){var r=this.option.dimension;if(null!=r)return e.getDimensionIndex(r);for(var o=e.dimensions,i=o.length-1;i>=0;i--){var l=e.getDimensionInfo(o[i]);if(!l.isCalculationCoord)return l.storeDimIndex}},t.prototype.getExtent=function(){return this._dataExtent.slice()},t.prototype.completeVisualOption=function(){var e=this.ecModel,r=this.option,o={inRange:r.inRange,outOfRange:r.outOfRange},i=r.target||(r.target={}),s=r.controller||(r.controller={});ln(i,o),ln(s,o);var l=this.isCategory();function c(d){qz(r.color)&&!d.inRange&&(d.inRange={color:r.color.slice().reverse()}),d.inRange=d.inRange||{color:e.get("gradientColor")}}c.call(this,i),c.call(this,s),function(d,p,m){var b=d[p],_=d[m];b&&!_&&(_=d[m]={},dB(b,function(S,k){if(Kf.isValidType(k)){var D=cB(k,"inactive",l);null!=D&&(_[k]=D,"color"!==k||_.hasOwnProperty("opacity")||_.hasOwnProperty("colorAlpha")||(_.opacity=[0,0]))}}))}.call(this,i,"inRange","outOfRange"),function(d){var p=(d.inRange||{}).symbol||(d.outOfRange||{}).symbol,m=(d.inRange||{}).symbolSize||(d.outOfRange||{}).symbolSize,b=this.get("inactiveColor"),_=this.getItemSymbol()||"roundRect";dB(this.stateList,function(S){var k=this.itemSize,D=d[S];D||(D=d[S]={color:l?b:[b]}),null==D.symbol&&(D.symbol=p&&an(p)||(l?_:[_])),null==D.symbolSize&&(D.symbolSize=m&&an(m)||(l?k[0]:[k[0],k[0]])),D.symbol=fB(D.symbol,function(F){return"none"===F?_:F});var O=D.symbolSize;if(null!=O){var N=-1/0;Yz(O,function(F){F>N&&(N=F)}),D.symbolSize=fB(O,function(F){return Zz(F,[0,N],[0,k[0]],!0)})}},this)}.call(this,s)},t.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},t.prototype.isCategory=function(){return!!this.option.categories},t.prototype.setSelected=function(e){},t.prototype.getSelected=function(){return null},t.prototype.getValueState=function(e){return null},t.prototype.getVisualMeta=function(e){return null},t.type="visualMap",t.dependencies=["series"],t.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},t}(W),hB=[20,140],Kz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.optionUpdated=function(e,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual(function(o){o.mappingMethod="linear",o.dataExtent=this.getExtent()}),this._resetRange()},t.prototype.resetItemSize=function(){n.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=hB[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=hB[1])},t.prototype._resetRange=function(){var e=this.getExtent(),r=this.option.range;!r||r.auto?(e.auto=1,this.option.range=e):Ue(r)&&(r[0]>r[1]&&r.reverse(),r[0]=Math.max(r[0],e[0]),r[1]=Math.min(r[1],e[1]))},t.prototype.completeVisualOption=function(){n.prototype.completeVisualOption.apply(this,arguments),Ce(this.stateList,function(e){var r=this.option.controller[e].symbolSize;r&&r[0]!==r[1]&&(r[0]=r[1]/3)},this)},t.prototype.setSelected=function(e){this.option.range=e.slice(),this._resetRange()},t.prototype.getSelected=function(){var e=this.getExtent(),r=Ua((this.get("range")||[]).slice());return r[0]>e[1]&&(r[0]=e[1]),r[1]>e[1]&&(r[1]=e[1]),r[0]<e[0]&&(r[0]=e[0]),r[1]<e[0]&&(r[1]=e[0]),r},t.prototype.getValueState=function(e){var r=this.option.range,o=this.getExtent();return(r[0]<=o[0]||r[0]<=e)&&(r[1]>=o[1]||e<=r[1])?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var r=[];return this.eachTargetSeries(function(o){var i=[],s=o.getData();s.each(this.getDataDimensionIndex(s),function(l,c){e[0]<=l&&l<=e[1]&&i.push(c)},this),r.push({seriesId:o.id,dataIndex:i})},this),r},t.prototype.getVisualMeta=function(e){var r=pB(0,0,this.getExtent()),o=pB(0,0,this.option.range.slice()),i=[];function s(_,S){i.push({value:_,color:e(_,S)})}for(var l=0,c=0,d=o.length,p=r.length;c<p&&(!o.length||r[c]<=o[0]);c++)r[c]<o[l]&&s(r[c],"outOfRange");for(var m=1;l<d;l++,m=0)m&&i.length&&s(o[l],"outOfRange"),s(o[l],"inRange");for(m=1;c<p;c++)(!o.length||o[o.length-1]<r[c])&&(m&&(i.length&&s(i[i.length-1].value,"outOfRange"),m=0),s(r[c],"outOfRange"));var b=i.length;return{stops:i,outerColors:[b?i[0].color:"transparent",b?i[b-1].color:"transparent"]}},t.type="visualMap.continuous",t.defaultOption=Oh(MP.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),t}(MP);function pB(n,t,e){if(e[0]===e[1])return e.slice();for(var r=(e[1]-e[0])/200,o=e[0],i=[],s=0;s<=200&&o<e[1];s++)i.push(o),o+=r;return i.push(e[1]),i}var gB=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e.autoPositionValues={left:1,right:1,top:1,bottom:1},e}return gt(t,n),t.prototype.init=function(e,r){this.ecModel=e,this.api=r},t.prototype.render=function(e,r,o,i){this.visualMapModel=e,!1!==e.get("show")?this.doRender(e,r,o,i):this.group.removeAll()},t.prototype.renderBackground=function(e){var r=this.visualMapModel,o=$g(r.get("padding")||0),i=e.getBoundingRect();e.add(new bi({z2:-1,silent:!0,shape:{x:i.x-o[3],y:i.y-o[0],width:i.width+o[3]+o[1],height:i.height+o[0]+o[2]},style:{fill:r.get("backgroundColor"),stroke:r.get("borderColor"),lineWidth:r.get("borderWidth")}}))},t.prototype.getControllerVisual=function(e,r,o){var i=(o=o||{}).forceState,s=this.visualMapModel,l={};if("color"===r){var c=s.get("contentColor");l.color=c}function d(b){return l[b]}function p(b,_){l[b]=_}var m=s.controllerVisuals[i||s.getValueState(e)];return Ce(Kf.prepareVisualTypes(m),function(b){var _=m[b];o.convertOpacityToAlpha&&"opacity"===b&&(b="colorAlpha",_=m.__alphaForOpacity),Kf.dependsOn(b,r)&&_&&_.applyVisual(e,d,p)}),l[r]},t.prototype.positionGroup=function(e){var o=this.api;hv(e,this.visualMapModel.getBoxLayoutParams(),{width:o.getWidth(),height:o.getHeight()})},t.prototype.doRender=function(e,r,o,i){},t.type="visualMap",t}(ks),mB=[["left","right","width"],["top","bottom","height"]];function vB(n,t,e){var r=n.option,o=r.align;if(null!=o&&"auto"!==o)return o;for(var i={width:t.getWidth(),height:t.getHeight()},s="horizontal"===r.orient?1:0,l=mB[s],c=[0,null,10],d={},p=0;p<3;p++)d[mB[1-s][p]]=c[p],d[l[p]]=2===p?e[0]:r[l[p]];var m=[["x","width",3],["y","height",0]][s],b=tl(d,i,r.padding);return l[(b.margin[m[2]]||0)+b[m[0]]+.5*b[m[1]]<.5*i[m[1]]?0:1]}function kP(n,t){return Ce(n||[],function(e){null!=e.dataIndex&&(e.dataIndexInside=e.dataIndex,e.dataIndex=null),e.highlightKey="visualMap"+(t?t.componentIndex:"")}),n}var T_=fa,$z=Ce,yB=Math.min,IL=Math.max,Jz=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._shapes={},e._dataInterval=[],e._handleEnds=[],e._hoverLinkDataIndices=[],e}return gt(t,n),t.prototype.doRender=function(e,r,o,i){this._api=o,i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},t.prototype._buildView=function(){this.group.removeAll();var e=this.visualMapModel,r=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(r);var o=e.get("text");this._renderEndsText(r,o,0),this._renderEndsText(r,o,1),this._updateView(!0),this.renderBackground(r),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(r)},t.prototype._renderEndsText=function(e,r,o){if(r){var i=r[1-o];i=null!=i?i+"":"";var s=this.visualMapModel,l=s.get("textGap"),c=s.itemSize,d=this._shapes.mainGroup,p=this._applyTransform([c[0]/2,0===o?-l:c[1]+l],d),m=this._applyTransform(0===o?"bottom":"top",d),b=this._orient;this.group.add(new Oi({style:Vi(this.visualMapModel.textStyleModel,{x:p[0],y:p[1],verticalAlign:"horizontal"===b?"middle":m,align:"horizontal"===b?m:"center",text:i})}))}},t.prototype._renderBar=function(e){var r=this.visualMapModel,o=this._shapes,i=r.itemSize,s=this._orient,l=this._useHandle,c=vB(r,this.api,i),d=o.mainGroup=this._createBarGroup(c),p=new xo;d.add(p),p.add(o.outOfRange=bB()),p.add(o.inRange=bB(null,l?_B(this._orient):null,De(this._dragHandle,this,"all",!1),De(this._dragHandle,this,"all",!0))),p.setClipPath(new bi({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var m=r.textStyleModel.getTextRect("\u56fd"),b=IL(m.width,m.height);l&&(o.handleThumbs=[],o.handleLabels=[],o.handleLabelPoints=[],this._createHandle(r,d,0,i,b,s),this._createHandle(r,d,1,i,b,s)),this._createIndicator(r,d,i,b,s),e.add(d)},t.prototype._createHandle=function(e,r,o,i,s,l){var c=De(this._dragHandle,this,o,!1),d=De(this._dragHandle,this,o,!0),p=va(e.get("handleSize"),i[0]),m=Dl(e.get("handleIcon"),-p/2,-p/2,p,p,null,!0),b=_B(this._orient);m.attr({cursor:b,draggable:!0,drift:c,ondragend:d,onmousemove:function(O){Tu(O.event)}}),m.x=i[0]/2,m.useStyle(e.getModel("handleStyle").getItemStyle()),m.setStyle({strokeNoScale:!0,strokeFirst:!0}),m.style.lineWidth*=2,m.ensureState("emphasis").style=e.getModel(["emphasis","handleStyle"]).getItemStyle(),sc(m,!0),r.add(m);var S=new Oi({cursor:b,draggable:!0,drift:c,onmousemove:function(O){Tu(O.event)},ondragend:d,style:Vi(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});S.ensureState("blur").style={opacity:.1},S.stateTransition={duration:200},this.group.add(S);var k=[p,0],D=this._shapes;D.handleThumbs[o]=m,D.handleLabelPoints[o]=k,D.handleLabels[o]=S},t.prototype._createIndicator=function(e,r,o,i,s){var l=va(e.get("indicatorSize"),o[0]),c=Dl(e.get("indicatorIcon"),-l/2,-l/2,l,l,null,!0);c.attr({cursor:"move",invisible:!0,silent:!0,x:o[0]/2});var d=e.getModel("indicatorStyle").getItemStyle();if(c instanceof fl){var p=c.style;c.useStyle(Lt({image:p.image,x:p.x,y:p.y,width:p.width,height:p.height},d))}else c.useStyle(d);r.add(c);var b=new Oi({silent:!0,invisible:!0,style:Vi(this.visualMapModel.textStyleModel,{x:0,y:0,text:""})});this.group.add(b);var _=[("horizontal"===s?i/2:6)+o[0]/2,0],S=this._shapes;S.indicator=c,S.indicatorLabel=b,S.indicatorLabelPoint=_,this._firstShowIndicator=!0},t.prototype._dragHandle=function(e,r,o,i){if(this._useHandle){if(this._dragging=!r,!r){var s=this._applyTransform([o,i],this._shapes.mainGroup,!0);this._updateInterval(e,s[1]),this._hideIndicator(),this._updateView()}r===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),r?!this._hovering&&this._clearHoverLinkToSeries():xB(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},t.prototype._resetInterval=function(){var e=this.visualMapModel,r=this._dataInterval=e.getSelected(),o=e.getExtent(),i=[0,e.itemSize[1]];this._handleEnds=[T_(r[0],o,i,!0),T_(r[1],o,i,!0)]},t.prototype._updateInterval=function(e,r){var o=this.visualMapModel,i=this._handleEnds,s=[0,o.itemSize[1]];iu(r=r||0,i,s,e,0);var l=o.getExtent();this._dataInterval=[T_(i[0],s,l,!0),T_(i[1],s,l,!0)]},t.prototype._updateView=function(e){var r=this.visualMapModel,o=r.getExtent(),i=this._shapes,s=[0,r.itemSize[1]],l=e?s:this._handleEnds,c=this._createBarVisual(this._dataInterval,o,l,"inRange"),d=this._createBarVisual(o,o,s,"outOfRange");i.inRange.setStyle({fill:c.barColor}).setShape("points",c.barPoints),i.outOfRange.setStyle({fill:d.barColor}).setShape("points",d.barPoints),this._updateHandle(l,c)},t.prototype._createBarVisual=function(e,r,o,i){var s={forceState:i,convertOpacityToAlpha:!0},l=this._makeColorGradient(e,s),c=[this.getControllerVisual(e[0],"symbolSize",s),this.getControllerVisual(e[1],"symbolSize",s)],d=this._createBarPoints(o,c);return{barColor:new Kp(0,0,0,1,l),barPoints:d,handlesColor:[l[0].color,l[l.length-1].color]}},t.prototype._makeColorGradient=function(e,r){var o=[],i=(e[1]-e[0])/100;o.push({color:this.getControllerVisual(e[0],"color",r),offset:0});for(var s=1;s<100;s++){var l=e[0]+i*s;if(l>e[1])break;o.push({color:this.getControllerVisual(l,"color",r),offset:s/100})}return o.push({color:this.getControllerVisual(e[1],"color",r),offset:1}),o},t.prototype._createBarPoints=function(e,r){var o=this.visualMapModel.itemSize;return[[o[0]-r[0],e[0]],[o[0],e[0]],[o[0],e[1]],[o[0]-r[1],e[1]]]},t.prototype._createBarGroup=function(e){var r=this._orient,o=this.visualMapModel.get("inverse");return new xo("horizontal"!==r||o?"horizontal"===r&&o?{scaleX:"bottom"===e?-1:1,rotation:-Math.PI/2}:"vertical"!==r||o?{scaleX:"left"===e?1:-1}:{scaleX:"left"===e?1:-1,scaleY:-1}:{scaleX:"bottom"===e?1:-1,rotation:Math.PI/2})},t.prototype._updateHandle=function(e,r){if(this._useHandle){var o=this._shapes,i=this.visualMapModel,s=o.handleThumbs,l=o.handleLabels,c=i.itemSize,d=i.getExtent();$z([0,1],function(p){var m=s[p];m.setStyle("fill",r.handlesColor[p]),m.y=e[p];var b=T_(e[p],[0,c[1]],d,!0),_=this.getControllerVisual(b,"symbolSize");m.scaleX=m.scaleY=_/c[0],m.x=c[0]-_/2;var S=hl(o.handleLabelPoints[p],jo(m,this.group));l[p].setStyle({x:S[0],y:S[1],text:i.formatValueText(this._dataInterval[p]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",o.mainGroup):"center"})},this)}},t.prototype._showIndicator=function(e,r,o,i){var s=this.visualMapModel,l=s.getExtent(),c=s.itemSize,d=[0,c[1]],p=this._shapes,m=p.indicator;if(m){m.attr("invisible",!1);var b=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0}),_=this.getControllerVisual(e,"symbolSize"),S=T_(e,l,d,!0),k=c[0]-_/2,D={x:m.x,y:m.y};m.y=S,m.x=k;var O=hl(p.indicatorLabelPoint,jo(m,this.group)),N=p.indicatorLabel;N.attr("invisible",!1);var F=this._applyTransform("left",p.mainGroup),V="horizontal"===this._orient;N.setStyle({text:(o||"")+s.formatValueText(r),verticalAlign:V?F:"middle",align:V?"center":F});var q={x:k,y:S,style:{fill:b}},Z={style:{x:O[0],y:O[1]}};if(s.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var Q={duration:100,easing:"cubicInOut",additive:!0};m.x=D.x,m.y=D.y,m.animateTo(q,Q),N.animateTo(Z,Q)}else m.attr(q),N.attr(Z);this._firstShowIndicator=!1;var re=this._shapes.handleLabels;if(re)for(var he=0;he<re.length;he++)this._api.enterBlur(re[he])}},t.prototype._enableHoverLinkToSeries=function(){var e=this;this._shapes.mainGroup.on("mousemove",function(r){if(e._hovering=!0,!e._dragging){var o=e.visualMapModel.itemSize,i=e._applyTransform([r.offsetX,r.offsetY],e._shapes.mainGroup,!0,!0);i[1]=yB(IL(0,i[1]),o[1]),e._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=o[0])}}).on("mouseout",function(){e._hovering=!1,!e._dragging&&e._clearHoverLinkToSeries()})},t.prototype._enableHoverLinkFromSeries=function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},t.prototype._doHoverLinkToSeries=function(e,r){var D,O,N,F,o=this.visualMapModel;if(o.option.hoverLink){var s=[0,o.itemSize[1]],l=o.getExtent();e=yB(IL(s[0],e),s[1]);var c=(D=l,O=s,N=6,(F=o.get("hoverLinkDataSize"))&&(N=T_(F,D,O,!0)/2),N),d=[e-c,e+c],p=T_(e,s,l,!0),m=[T_(d[0],s,l,!0),T_(d[1],s,l,!0)];d[0]<s[0]&&(m[0]=-1/0),d[1]>s[1]&&(m[1]=1/0),r&&(m[0]===-1/0?this._showIndicator(p,m[1],"< ",c):m[1]===1/0?this._showIndicator(p,m[0],"> ",c):this._showIndicator(p,p,"\u2248 ",c));var b=this._hoverLinkDataIndices,_=[];(r||xB(o))&&(_=this._hoverLinkDataIndices=o.findTargetDataIndices(m));var S=function(k,D){var O={},N={};return F(k||[],O),F(D||[],N,O),[V(O),V(N)];function F(q,Z,Q){for(var re=0,he=q.length;re<he;re++){var ge=is(q[re].seriesId,null);if(null==ge)return;for(var ve=ci(q[re].dataIndex),_e=Q&&Q[ge],Ee=0,ze=ve.length;Ee<ze;Ee++){var Ge=ve[Ee];_e&&_e[Ge]?_e[Ge]=null:(Z[ge]||(Z[ge]={}))[Ge]=1}}}function V(q,Z){var Q=[];for(var re in q)if(q.hasOwnProperty(re)&&null!=q[re])if(Z)Q.push(+re);else{var he=V(q[re],!0);he.length&&Q.push({seriesId:re,dataIndex:he})}return Q}}(b,_);this._dispatchHighDown("downplay",kP(S[0],o)),this._dispatchHighDown("highlight",kP(S[1],o))}},t.prototype._hoverLinkFromSeriesMouseOver=function(e){var r;if(Ay(e.target,function(c){var d=So(c);if(null!=d.dataIndex)return r=d,!0},!0),r){var o=this.ecModel.getSeriesByIndex(r.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(o)){var s=o.getData(r.dataType),l=s.getStore().get(i.getDataDimensionIndex(s),r.dataIndex);isNaN(l)||this._showIndicator(l,l)}}},t.prototype._hideIndicator=function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0);var r=this._shapes.handleLabels;if(r)for(var o=0;o<r.length;o++)this._api.leaveBlur(r[o])},t.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",kP(e,this.visualMapModel)),e.length=0},t.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},t.prototype._applyTransform=function(e,r,o,i){var s=jo(r,i?null:this.group);return Ue(e)?hl(e,s,o):sp(e,s,o)},t.prototype._dispatchHighDown=function(e,r){r&&r.length&&this.api.dispatchAction({type:e,batch:r})},t.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.prototype.remove=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},t.type="visualMap.continuous",t}(gB);function bB(n,t,e,r){return new eu({shape:{points:n},draggable:!!e,cursor:t,drift:e,onmousemove:function(o){Tu(o.event)},ondragend:r})}function xB(n){var t=n.get("hoverLinkOnHandle");return!!(null==t?n.get("realtime"):t)}function _B(n){return"vertical"===n?"ns-resize":"ew-resize"}var Qz={type:"selectDataRange",event:"dataRangeSelected",update:"update"},eF=function(n,t){t.eachComponent({mainType:"visualMap",query:n},function(e){e.setSelected(n.selected)})},tF=[{createOnAllSeries:!0,reset:function(n,t){var e=[];return t.eachComponent("visualMap",function(r){var o,i,s,l,c,d=n.pipelineContext;!r.isTargetSeries(n)||d&&d.large||e.push((o=r.stateList,i=r.targetVisuals,s=De(r.getValueState,r),l=r.getDataDimensionIndex(n.getData()),c={},Ce(o,function(p){var m=Kf.prepareVisualTypes(i[p]);c[p]=m}),{progress:function(p,m){var b,_;function S(he){return fw(m,_,he)}function k(he,ge){tk(m,_,he,ge)}null!=l&&(b=m.getDimensionIndex(l));for(var D=m.getStore();null!=(_=p.next());){var O=m.getRawDataItem(_);if(!O||!1!==O.visualMap)for(var N=null!=l?D.get(b,_):_,F=s(N),V=i[F],q=c[F],Z=0,Q=q.length;Z<Q;Z++){var re=q[Z];V[re]&&V[re].applyVisual(N,S,k)}}}}))}),e}},{createOnAllSeries:!0,reset:function(n,t){var e=n.getData(),r=[];t.eachComponent("visualMap",function(o){if(o.isTargetSeries(n)){var i=o.getVisualMeta(De(nF,null,n,o))||{stops:[],outerColors:[]},s=o.getDataDimensionIndex(e);s>=0&&(i.dimension=s,r.push(i))}}),n.getData().setVisual("visualMeta",r)}}];function nF(n,t,e,r){for(var o=t.targetVisuals[r],i=Kf.prepareVisualTypes(o),s={color:Dy(n.getData(),"color")},l=0,c=i.length;l<c;l++){var d=i[l],p=o["opacity"===d?"__alphaForOpacity":d];p&&p.applyVisual(e,m,b)}return s.color;function m(_){return s[_]}function b(_,S){s[_]=S}}var wB=Ce;function rF(n){var t=n&&n.visualMap;Ue(t)||(t=t?[t]:[]),wB(t,function(e){if(e){N2(e,"splitList")&&!N2(e,"pieces")&&(e.pieces=e.splitList,delete e.splitList);var r=e.pieces;r&&Ue(r)&&wB(r,function(o){wr(o)&&(N2(o,"start")&&!N2(o,"min")&&(o.min=o.start),N2(o,"end")&&!N2(o,"max")&&(o.max=o.end))})}})}function N2(n,t){return n&&n.hasOwnProperty&&n.hasOwnProperty(t)}var SB=!1;function CB(n){SB||(SB=!0,n.registerSubTypeDefaulter("visualMap",function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"}),n.registerAction(Qz,eF),Ce(tF,function(t){n.registerVisual(n.PRIORITY.VISUAL.COMPONENT,t)}),n.registerPreprocessor(rF))}function MB(n){n.registerComponentModel(Kz),n.registerComponentView(Jz),CB(n)}var oF=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e._pieceList=[],e}return gt(t,n),t.prototype.optionUpdated=function(e,r){n.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var o=this._mode=this._determineMode();this._pieceList=[],iF[this._mode].call(this,this._pieceList),this._resetSelected(e,r);var i=this.option.categories;this.resetVisual(function(s,l){"categories"===o?(s.mappingMethod="category",s.categories=an(i)):(s.dataExtent=this.getExtent(),s.mappingMethod="piecewise",s.pieceList=mt(this._pieceList,function(c){return c=an(c),"inRange"!==l&&(c.visual=null),c}))})},t.prototype.completeVisualOption=function(){var e=this.option,r={},o=Kf.listVisualTypes(),i=this.isCategory();function s(l,c,d){return l&&l[c]&&l[c].hasOwnProperty(d)}Ce(e.pieces,function(l){Ce(o,function(c){l.hasOwnProperty(c)&&(r[c]=1)})}),Ce(r,function(l,c){var d=!1;Ce(this.stateList,function(p){d=d||s(e,p,c)||s(e.target,p,c)},this),!d&&Ce(this.stateList,function(p){(e[p]||(e[p]={}))[c]=cB(c,"inRange"===p?"active":"inactive",i)})},this),n.prototype.completeVisualOption.apply(this,arguments)},t.prototype._resetSelected=function(e,r){var o=this.option,i=this._pieceList,s=(r?o:e).selected||{};if(o.selected=s,Ce(i,function(c,d){var p=this.getSelectedMapKey(c);s.hasOwnProperty(p)||(s[p]=!0)},this),"single"===o.selectedMode){var l=!1;Ce(i,function(c,d){var p=this.getSelectedMapKey(c);s[p]&&(l?s[p]=!1:l=!0)},this)}},t.prototype.getItemSymbol=function(){return this.get("itemSymbol")},t.prototype.getSelectedMapKey=function(e){return"categories"===this._mode?e.value+"":e.index+""},t.prototype.getPieceList=function(){return this._pieceList},t.prototype._determineMode=function(){var e=this.option;return e.pieces&&e.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},t.prototype.setSelected=function(e){this.option.selected=an(e)},t.prototype.getValueState=function(e){var r=Kf.findPieceIndex(e,this._pieceList);return null!=r&&this.option.selected[this.getSelectedMapKey(this._pieceList[r])]?"inRange":"outOfRange"},t.prototype.findTargetDataIndices=function(e){var r=[],o=this._pieceList;return this.eachTargetSeries(function(i){var s=[],l=i.getData();l.each(this.getDataDimensionIndex(l),function(c,d){Kf.findPieceIndex(c,o)===e&&s.push(d)},this),r.push({seriesId:i.id,dataIndex:s})},this),r},t.prototype.getRepresentValue=function(e){var r;if(this.isCategory())r=e.value;else if(null!=e.value)r=e.value;else{var o=e.interval||[];r=o[0]===-1/0&&o[1]===1/0?0:(o[0]+o[1])/2}return r},t.prototype.getVisualMeta=function(e){if(!this.isCategory()){var r=[],o=["",""],i=this,s=this._pieceList.slice();if(s.length){var l=s[0].interval[0];l!==-1/0&&s.unshift({interval:[-1/0,l]}),(l=s[s.length-1].interval[1])!==1/0&&s.push({interval:[l,1/0]})}else s.push({interval:[-1/0,1/0]});var c=-1/0;return Ce(s,function(p){var m=p.interval;m&&(m[0]>c&&d([c,m[0]],"outOfRange"),d(m.slice()),c=m[1])},this),{stops:r,outerColors:o}}function d(p,m){var b=i.getRepresentValue({interval:p});m||(m=i.getValueState(b));var _=e(b,m);p[0]===-1/0?o[0]=_:p[1]===1/0?o[1]=_:r.push({value:p[0],color:_},{value:p[1],color:_})}},t.type="visualMap.piecewise",t.defaultOption=Oh(MP.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),t}(MP),iF={splitNumber:function(n){var t=this.option,e=Math.min(t.precision,20),r=this.getExtent(),o=t.splitNumber;o=Math.max(parseInt(o,10),1),t.splitNumber=o;for(var i=(r[1]-r[0])/o;+i.toFixed(e)!==i&&e<5;)e++;t.precision=e,i=+i.toFixed(e),t.minOpen&&n.push({interval:[-1/0,r[0]],close:[0,0]});for(var s=0,l=r[0];s<o;l+=i,s++)n.push({interval:[l,s===o-1?r[1]:l+i],close:[1,1]});t.maxOpen&&n.push({interval:[r[1],1/0],close:[0,0]}),Hc(n),Ce(n,function(d,p){d.index=p,d.text=this.formatValueText(d.interval)},this)},categories:function(n){var t=this.option;Ce(t.categories,function(e){n.push({text:this.formatValueText(e,!0),value:e})},this),kB(t,n)},pieces:function(n){var t=this.option;Ce(t.pieces,function(e,r){wr(e)||(e={value:e});var o={text:"",index:r};if(null!=e.label&&(o.text=e.label),e.hasOwnProperty("value")){var i=o.value=e.value;o.interval=[i,i],o.close=[1,1]}else{for(var s=o.interval=[],l=o.close=[0,0],c=[1,0,1],d=[-1/0,1/0],p=[],m=0;m<2;m++){for(var b=[["gte","gt","min"],["lte","lt","max"]][m],_=0;_<3&&null==s[m];_++)s[m]=e[b[_]],l[m]=c[_],p[m]=2===_;null==s[m]&&(s[m]=d[m])}p[0]&&s[1]===1/0&&(l[0]=0),p[1]&&s[0]===-1/0&&(l[1]=0),s[0]===s[1]&&l[0]&&l[1]&&(o.value=s[0])}o.visual=Kf.retrieveVisuals(e),n.push(o)},this),kB(t,n),Hc(n),Ce(n,function(e){var r=e.close;e.text=e.text||this.formatValueText(null!=e.value?e.value:e.interval,!1,[["<","\u2264"][r[1]],[">","\u2265"][r[0]]])},this)}};function kB(n,t){var e=n.inverse;("vertical"===n.orient?!e:e)&&t.reverse()}var aF=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type=t.type,e}return gt(t,n),t.prototype.doRender=function(){var e=this.group;e.removeAll();var r=this.visualMapModel,o=r.get("textGap"),i=r.textStyleModel,s=i.getFont(),l=i.getTextColor(),c=this._getItemAlign(),d=r.itemSize,p=this._getViewData(),m=p.endsText,b=Hn(r.get("showLabel",!0),!m);m&&this._renderEndsText(e,m[0],d,b,c),Ce(p.viewPieceList,function(_){var S=_.piece,k=new xo;k.onclick=De(this._onItemClick,this,S),this._enableHoverLink(k,_.indexInModelPieceList);var D=r.getRepresentValue(S);if(this._createItemSymbol(k,D,[0,0,d[0],d[1]]),b){var O=this.visualMapModel.getValueState(D);k.add(new Oi({style:{x:"right"===c?-o:d[0]+o,y:d[1]/2,text:S.text,verticalAlign:"middle",align:c,font:s,fill:l,opacity:"outOfRange"===O?.5:1}}))}e.add(k)},this),m&&this._renderEndsText(e,m[1],d,b,c),Yl(r.get("orient"),e,r.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},t.prototype._enableHoverLink=function(e,r){var o=this;e.on("mouseover",function(){return i("highlight")}).on("mouseout",function(){return i("downplay")});var i=function(s){var l=o.visualMapModel;l.option.hoverLink&&o.api.dispatchAction({type:s,batch:kP(l.findTargetDataIndices(r),l)})}},t.prototype._getItemAlign=function(){var e=this.visualMapModel,r=e.option;if("vertical"===r.orient)return vB(e,this.api,e.itemSize);var o=r.align;return o&&"auto"!==o||(o="left"),o},t.prototype._renderEndsText=function(e,r,o,i,s){if(r){var l=new xo;l.add(new Oi({style:Vi(this.visualMapModel.textStyleModel,{x:i?"right"===s?o[0]:0:o[0]/2,y:o[1]/2,verticalAlign:"middle",align:i?s:"center",text:r})})),e.add(l)}},t.prototype._getViewData=function(){var e=this.visualMapModel,r=mt(e.getPieceList(),function(l,c){return{piece:l,indexInModelPieceList:c}}),o=e.get("text"),i=e.get("orient"),s=e.get("inverse");return("horizontal"===i?s:!s)?r.reverse():o&&(o=o.slice().reverse()),{viewPieceList:r,endsText:o}},t.prototype._createItemSymbol=function(e,r,o){e.add(Dl(this.getControllerVisual(r,"symbol"),o[0],o[1],o[2],o[3],this.getControllerVisual(r,"color")))},t.prototype._onItemClick=function(e){var r=this.visualMapModel,o=r.option,i=o.selectedMode;if(i){var s=an(o.selected),l=r.getSelectedMapKey(e);"single"===i||!0===i?(s[l]=!0,Ce(s,function(c,d){s[d]=d===l})):s[l]=!s[l],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:s})}},t.type="visualMap.piecewise",t}(gB);function TB(n){n.registerComponentModel(oF),n.registerComponentView(aF),CB(n)}var sF={label:{enabled:!0},decal:{show:!1}},DB=hi(),uF={};function lF(n,t){var e=n.getModel("aria");if(e.get("enabled")){var r=an(sF);ln(r.label,n.getLocaleModel().get("aria"),!1),ln(e.option,r,!1),function(){if(e.getModel("decal").get("show")){var i=Or();n.eachSeries(function(s){if(!s.isColorBySeries()){var l=i.get(s.type);l||i.set(s.type,l={}),DB(s).scope=l}}),n.eachRawSeries(function(s){if(!n.isSeriesFiltered(s))if(yr(s.enableAriaDecal))s.enableAriaDecal();else{var l=s.getData();if(s.isColorBySeries()){var c=si(s.ecModel,s.name,uF,n.getSeriesCount()),d=l.getVisual("decal");l.setVisual("decal",S(d,c))}else{var p=s.getRawData(),m={},b=DB(s).scope;l.each(function(k){var D=l.getRawIndex(k);m[D]=k});var _=p.count();p.each(function(k){var D=m[k],O=p.getName(k)||k+"",N=si(s.ecModel,O,b,_),F=l.getItemVisual(D,"decal");l.setItemVisual(D,"decal",S(F,N))})}}function S(k,D){var O=k?Lt(Lt({},D),k):D;return O.dirty=!0,O}})}}(),function(){var N,i=n.getLocaleModel().get("aria"),s=e.getModel("label");if(s.option=Yn(s.option,i),s.get("enabled")){var l=t.getZr().dom;if(s.get("description"))return void l.setAttribute("aria-label",s.get("description"));var c,d=n.getSeriesCount(),p=s.get(["data","maxCount"])||10,m=s.get(["series","maxCount"])||10,b=Math.min(d,m);if(!(d<1)){var _=((N=n.get("title"))&&N.length&&(N=N[0]),N&&N.text);c=_?o(s.get(["general","withTitle"]),{title:_}):s.get(["general","withoutTitle"]);var S=[];c+=o(s.get(d>1?["series","multiple","prefix"]:["series","single","prefix"]),{seriesCount:d}),n.eachSeries(function(N,F){if(F<b){var V=void 0,q=N.get("name")?"withName":"withoutName";V=o(V=s.get(d>1?["series","multiple",q]:["series","single",q]),{seriesId:N.seriesIndex,seriesName:N.get("name"),seriesType:(ze=N.subType,n.getLocaleModel().get(["series","typeNames"])[ze]||"\u81ea\u5b9a\u4e49\u56fe")});var Z=N.getData();Z.count()>p?V+=o(s.get(["data","partialData"]),{displayCnt:p}):V+=s.get(["data","allData"]);for(var Q=s.get(["data","separator","middle"]),re=s.get(["data","separator","end"]),he=[],ge=0;ge<Z.count();ge++)if(ge<p){var ve=Z.getName(ge),_e=Z.getValues(ge),Ee=s.get(["data",ve?"withName":"withoutName"]);he.push(o(Ee,{name:ve,value:_e.join(Q)}))}V+=he.join(Q)+re,S.push(V)}var ze});var k=s.getModel(["series","multiple","separator"]),D=k.get("middle"),O=k.get("end");c+=S.join(D)+O,l.setAttribute("aria-label",c)}}}()}function o(i,s){if(!ir(i))return i;var l=i;return Ce(s,function(c,d){l=l.replace(new RegExp("\\{\\s*"+d+"\\s*\\}","g"),c)}),l}}function cF(n){if(n&&n.aria){var t=n.aria;null!=t.show&&(t.enabled=t.show),t.label=t.label||{},Ce(["description","general","series","data"],function(e){null!=t[e]&&(t.label[e]=t[e])})}}var AB={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},fF=function(){function n(t){null==(this._condVal=ir(t)?new RegExp(t):On(t)?t:null)&&Ri("")}return n.prototype.evaluate=function(t){var e=typeof t;return ir(e)?this._condVal.test(t):!!gr(e)&&this._condVal.test(t+"")},n}(),dF=function(){function n(){}return n.prototype.evaluate=function(){return this.value},n}(),hF=function(){function n(){}return n.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},n}(),pF=function(){function n(){}return n.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},n}(),gF=function(){function n(){}return n.prototype.evaluate=function(){return!this.child.evaluate()},n}(),mF=function(){function n(){}return n.prototype.evaluate=function(){for(var t=!!this.valueParser,e=(0,this.getValue)(this.valueGetterParam),r=t?this.valueParser(e):null,o=0;o<this.subCondList.length;o++)if(!this.subCondList[o].evaluate(t?r:e))return!1;return!0},n}();function OL(n,t){if(!0===n||!1===n){var e=new dF;return e.value=n,e}return OB(n)||Ri(""),n.and?IB("and",n,t):n.or?IB("or",n,t):n.not?function(o,i){var s=o.not;OB(s)||Ri("");var c=new gF;return c.child=OL(s,i),c.child||Ri(""),c}(n,t):function(o,i){for(var l=i.prepareGetValue(o),c=[],d=rr(o),p=o.parser,m=p?VM(p):null,b=0;b<d.length;b++){var _=d[b];if("parser"!==_&&!i.valueGetterAttrMap.get(_)){var S=br(AB,_)?AB[_]:_,k=o[_],D=m?m(k):k,O=U2(S,D)||"reg"===S&&new fF(D);O||Ri(""),c.push(O)}}c.length||Ri("");var N=new mF;return N.valueGetterParam=l,N.valueParser=m,N.getValue=i.getValue,N.subCondList=c,N}(n,t)}function IB(n,t,e){var r=t[n];Ue(r)||Ri(""),r.length||Ri("");var i="and"===n?new hF:new pF;return i.children=mt(r,function(s){return OL(s,e)}),i.children.length||Ri(""),i}function OB(n){return wr(n)&&!nn(n)}var vF=function(){function n(t,e){this._cond=OL(t,e)}return n.prototype.evaluate=function(){return this._cond.evaluate()},n}(),yF={type:"echarts:filter",transform:function(n){for(var t,e,r,o=n.upstream,i=(e=n.config,r={valueGetterAttrMap:Or({dimension:!0}),prepareGetValue:function(d){var m=d.dimension;br(d,"dimension")||Ri("");var b=o.getDimensionInfo(m);return b||Ri(""),{dimIdx:b.index}},getValue:function(d){return o.retrieveValueFromItem(t,d.dimIdx)}},new vF(e,r)),s=[],l=0,c=o.count();l<c;l++)t=o.getRawDataItem(l),i.evaluate()&&s.push(t);return{data:s}}},bF={type:"echarts:sort",transform:function(n){var t=n.upstream,r="",o=ci(n.config);o.length||Ri(r);var i=[];Ce(o,function(p){var m=p.dimension,b=p.order,_=p.parser,S=p.incomparable;null==m&&Ri(r),"asc"!==b&&"desc"!==b&&Ri(r),S&&"min"!==S&&"max"!==S&&Ri(""),"asc"!==b&&"desc"!==b&&Ri("");var O=t.getDimensionInfo(m);O||Ri(r);var N=_?VM(_):null;_&&!N&&Ri(r),i.push({dimIdx:O.index,parser:N,comparator:new GS(b,S)})});var s=t.sourceFormat;s!==He&&s!==Ye&&Ri(r);for(var l=[],c=0,d=t.count();c<d;c++)l.push(t.getRawDataItem(c));return l.sort(function(p,m){for(var b=0;b<i.length;b++){var _=i[b],S=t.retrieveValueFromItem(p,_.dimIdx),k=t.retrieveValueFromItem(m,_.dimIdx);_.parser&&(S=_.parser(S),k=_.parser(k));var D=_.comparator.evaluate(S,k);if(0!==D)return D}return 0}),{data:l}}},xF=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="dataset",e}return gt(t,n),t.prototype.init=function(e,r,o){n.prototype.init.call(this,e,r,o),this._sourceManager=new tw(this),_x(this)},t.prototype.mergeOption=function(e,r){n.prototype.mergeOption.call(this,e,r),_x(this)},t.prototype.optionUpdated=function(){this._sourceManager.dirty()},t.prototype.getSourceManager=function(){return this._sourceManager},t.type="dataset",t.defaultOption={seriesLayoutBy:Mt},t}(W),_F=function(n){function t(){var e=null!==n&&n.apply(this,arguments)||this;return e.type="dataset",e}return gt(t,n),t.type="dataset",t}(ks),D_=Os.CMD;function B2(n,t){return Math.abs(n-t)<1e-5}function EL(n){var t,e,r,o,i,_e,Ee,ze,Ge,Xe,$e,nt,yt,_t,Et,hn,Zn,Rt,ar,Kn,xr,nr,s=n.data,l=n.len(),c=[],d=0,p=0,m=0,b=0;function _(_e,Ee){t&&t.length>2&&c.push(t),t=[_e,Ee]}function S(_e,Ee,ze,Ge){B2(_e,ze)&&B2(Ee,Ge)||t.push(_e,Ee,ze,Ge,ze,Ge)}for(var D=0;D<l;){var O=s[D++],N=1===D;switch(N&&(m=d=s[D],b=p=s[D+1],O!==D_.L&&O!==D_.C&&O!==D_.Q||(t=[m,b])),O){case D_.M:d=m=s[D++],p=b=s[D++],_(m,b);break;case D_.L:S(d,p,e=s[D++],r=s[D++]),d=e,p=r;break;case D_.C:t.push(s[D++],s[D++],s[D++],s[D++],d=s[D++],p=s[D++]);break;case D_.Q:e=s[D++],r=s[D++],o=s[D++],i=s[D++],t.push(d+2/3*(e-d),p+2/3*(r-p),o+2/3*(e-o),i+2/3*(r-i),o,i),d=o,p=i;break;case D_.A:var F=s[D++],V=s[D++],q=s[D++],Z=s[D++],Q=s[D++],re=s[D++]+Q;D+=1;var he=!s[D++];e=Math.cos(Q)*q+F,r=Math.sin(Q)*Z+V,N?_(m=e,b=r):S(d,p,e,r),d=Math.cos(re)*q+F,p=Math.sin(re)*Z+V;for(var ge=(he?-1:1)*Math.PI/2,ve=Q;he?ve>re:ve<re;ve+=ge)_e=ve,Ee=he?Math.max(ve+ge,re):Math.min(ve+ge,re),ze=F,Ge=V,Xe=q,$e=Z,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,nt=Math.abs(Ee-_e),yt=4*Math.tan(nt/4)/3,_t=Ee<_e?-1:1,Et=Math.cos(_e),hn=Math.sin(_e),Zn=Math.cos(Ee),Rt=Math.sin(Ee),t.push(Et*Xe+ze-(xr=Xe*yt*_t)*hn,hn*$e+Ge+(nr=$e*yt*_t)*Et,(ar=Zn*Xe+ze)+xr*Rt,(Kn=Rt*$e+Ge)-nr*Zn,ar,Kn);break;case D_.R:m=d=s[D++],b=p=s[D++],e=m+s[D++],r=b+s[D++],_(e,b),S(e,b,e,r),S(e,r,m,r),S(m,r,m,b),S(m,b,e,b);break;case D_.Z:t&&S(d,p,m,b),d=m,p=b}}return t&&t.length>2&&c.push(t),c}function PL(n,t,e,r,o,i,s,l,c,d){if(B2(n,e)&&B2(t,r)&&B2(o,s)&&B2(i,l))c.push(s,l);else{var p=2/d,m=p*p,b=s-n,_=l-t,S=Math.sqrt(b*b+_*_);b/=S,_/=S;var k=e-n,D=r-t,O=o-s,N=i-l,F=k*k+D*D,V=O*O+N*N;if(F<m&&V<m)c.push(s,l);else{var q=b*k+_*D,Z=-b*O-_*N;if(F-q*q<m&&q>=0&&V-Z*Z<m&&Z>=0)c.push(s,l);else{var Q=[],re=[];kf(n,e,o,s,.5,Q),kf(t,r,i,l,.5,re),PL(Q[0],re[0],Q[1],re[1],Q[2],re[2],Q[3],re[3],c,d),PL(Q[4],re[4],Q[5],re[5],Q[6],re[6],Q[7],re[7],c,d)}}}}function EB(n,t,e){var i=Math.abs(n[t]/n[1-t]),s=Math.ceil(Math.sqrt(i*e)),l=Math.floor(e/s);0===l&&(l=1,s=e);for(var c=[],d=0;d<s;d++)c.push(l);var p=e-s*l;if(p>0)for(d=0;d<p;d++)c[d%s]+=1;return c}function PB(n,t,e){for(var r=n.r0,o=n.r,i=n.startAngle,l=Math.abs(n.endAngle-i),c=l*o,d=o-r,p=c>Math.abs(d),m=EB([c,d],p?0:1,t),b=(p?l:d)/m.length,_=0;_<m.length;_++)for(var S=(p?d:l)/m[_],k=0;k<m[_];k++){var D={};p?(D.startAngle=i+b*_,D.endAngle=i+b*(_+1),D.r0=r+S*k,D.r=r+S*(k+1)):(D.startAngle=i+S*k,D.endAngle=i+S*(k+1),D.r0=r+b*_,D.r=r+b*(_+1)),D.clockwise=n.clockwise,D.cx=n.cx,D.cy=n.cy,e.push(D)}}function RB(n,t,e,r){return n*r-e*t}function wF(n,t,e,r,o,i,s,l){var c=e-n,d=r-t,p=s-o,m=l-i,b=RB(p,m,c,d);if(Math.abs(b)<1e-6)return null;var _=RB(n-o,t-i,p,m)/b;return _<0||_>1?null:new lo(_*c+n,_*d+t)}function SF(n,t,e){var r=new lo;lo.sub(r,e,t),r.normalize();var o=new lo;return lo.sub(o,n,t),o.dot(r)}function z2(n,t){var e=n[n.length-1];e&&e[0]===t[0]&&e[1]===t[1]||n.push(t)}function LB(n){var t=n.points,e=[],r=[];Ya(t,e,r);var o=new Io(e[0],e[1],r[0]-e[0],r[1]-e[1]),i=o.width,s=o.height,l=o.x,c=o.y,d=new lo,p=new lo;return i>s?(d.x=p.x=l+i/2,d.y=c,p.y=c+s):(d.y=p.y=c+s/2,d.x=l,p.x=l+i),function(m,b,_){for(var S=m.length,k=[],D=0;D<S;D++){var O=m[D],N=m[(D+1)%S],F=wF(O[0],O[1],N[0],N[1],b.x,b.y,_.x,_.y);F&&k.push({projPt:SF(F,b,_),pt:F,idx:D})}if(k.length<2)return[{points:m},{points:m}];k.sort(function(ve,_e){return ve.projPt-_e.projPt});var V=k[0],q=k[k.length-1];if(q.idx<V.idx){var Z=V;V=q,q=Z}var Q=[V.pt.x,V.pt.y],re=[q.pt.x,q.pt.y],he=[Q],ge=[re];for(D=V.idx+1;D<=q.idx;D++)z2(he,m[D].slice());for(z2(he,re),z2(he,Q),D=q.idx+1;D<=V.idx+S;D++)z2(ge,m[D%S].slice());return z2(ge,Q),z2(ge,re),[{points:he},{points:ge}]}(t,d,p)}function TP(n,t,e,r){if(1===e)r.push(t);else{var o=Math.floor(e/2),i=n(t);TP(n,i[0],o,r),TP(n,i[1],e-o,r)}return r}function CF(n,t){t.setStyle(n.style),t.z=n.z,t.z2=n.z2,t.zlevel=n.zlevel}function kF(n,t){var e=n.length,r=t.length;if(e===r)return[n,t];for(var o=[],i=[],s=e<r?n:t,l=Math.min(e,r),c=Math.abs(r-e)/6,p=Math.ceil(c/((l-2)/6))+1,m=[s[0],s[1]],b=c,_=2;_<l;){var S=s[_-2],k=s[_-1],D=s[_++],O=s[_++],N=s[_++],F=s[_++],V=s[_++],q=s[_++];if(b<=0)m.push(D,O,N,F,V,q);else{for(var Z=Math.min(b,p-1)+1,Q=1;Q<=Z;Q++){var re=Q/Z;kf(S,D,N,V,re,o),kf(k,O,F,q,re,i),m.push(o[1],i[1],o[2],i[2],S=o[3],k=i[3]),D=o[5],O=i[5],N=o[6],F=i[6]}b-=Z-1}}return s===n?[m,t]:[n,m]}function NB(n,t){for(var e=n.length,r=n[e-2],o=n[e-1],i=[],s=0;s<t.length;)i[s++]=r,i[s++]=o;return i}function BB(n){for(var t=0,e=0,r=0,o=n.length,i=0,s=o-2;i<o;s=i,i+=2){var l=n[s],c=n[s+1],d=n[i],p=n[i+1],m=l*p-d*c;t+=m,e+=(l+d)*m,r+=(c+p)*m}return 0===t?[n[0]||0,n[1]||0]:[e/t/3,r/t/3,t]}function TF(n,t,e,r){for(var o=(n.length-2)/6,i=1/0,s=0,l=n.length,c=l-2,d=0;d<o;d++){for(var p=6*d,m=0,b=0;b<l;b+=2){var _=0===b?p:(p+b-2)%c+2,D=t[b]-r[0]-(n[_]-e[0]),O=t[b+1]-r[1]-(n[_+1]-e[1]);m+=D*D+O*O}m<i&&(i=m,s=d)}return s}function DF(n){for(var t=[],e=n.length,r=0;r<e;r+=2)t[r]=n[e-r-2],t[r+1]=n[e-r-1];return t}function DP(n){return n.__isCombineMorphing}var zB="__mOriginal_";function AP(n,t,e){var r=zB+t,o=n[r]||n[t];n[r]||(n[r]=n[t]);var i=e.replace,s=e.after,l=e.before;n[t]=function(){var c,d=arguments;return l&&l.apply(this,d),c=i?i.apply(this,d):o.apply(this,d),s&&s.apply(this,d),c}}function sO(n,t){var e=zB+t;n[e]&&(n[t]=n[e],n[e]=null)}function FB(n,t){for(var e=0;e<n.length;e++)for(var r=n[e],o=0;o<r.length;){var i=r[o],s=r[o+1];r[o++]=t[0]*i+t[2]*s+t[4],r[o++]=t[1]*i+t[3]*s+t[5]}}function VB(n,t){var e=n.getUpdatedPathProxy(),r=t.getUpdatedPathProxy(),o=function(m,b){for(var _,S,k,D=[],O=[],N=0;N<Math.max(m.length,b.length);N++){var F=m[N],V=b[N],q=void 0,Z=void 0;F?V?(S=q=(_=kF(F,V))[0],k=Z=_[1]):(Z=NB(k||F,F),q=F):(q=NB(S||V,V),Z=V),D.push(q),O.push(Z)}return[D,O]}(EL(e),EL(r)),i=o[0],s=o[1],l=n.getComputedTransform(),c=t.getComputedTransform();l&&FB(i,l),c&&FB(s,c),AP(t,"updateTransform",{replace:function(){this.transform=null}}),t.transform=null;var d=function(m,b,_,S){for(var k,D=[],O=0;O<m.length;O++){var N=m[O],F=b[O],V=BB(N),q=BB(F);null==k&&(k=V[2]<0!=q[2]<0);var Z=[],Q=[],re=0,he=1/0,ge=[],ve=N.length;k&&(N=DF(N));for(var _e=6*TF(N,F,V,q),Ee=ve-2,ze=0;ze<Ee;ze+=2){var Ge=(_e+ze)%Ee+2;Z[ze+2]=N[Ge]-V[0],Z[ze+3]=N[Ge+1]-V[1]}Z[0]=N[_e]-V[0],Z[1]=N[_e+1]-V[1];for(var Xe=S/10,$e=-S/2;$e<=S/2;$e+=Xe){var nt=Math.sin($e),yt=Math.cos($e),_t=0;for(ze=0;ze<N.length;ze+=2){var Et=Z[ze],hn=Z[ze+1],Zn=F[ze]-q[0],Rt=F[ze+1]-q[1],Mn=Zn*yt-Rt*nt,lr=Zn*nt+Rt*yt;ge[ze]=Mn,ge[ze+1]=lr;var ar=Mn-Et,Kn=lr-hn;_t+=ar*ar+Kn*Kn}if(_t<he){he=_t,re=$e;for(var xr=0;xr<ge.length;xr++)Q[xr]=ge[xr]}}D.push({from:Z,to:Q,fromCp:V,toCp:q,rotation:-re})}return D}(i,s,0,Math.PI),p=[];AP(t,"buildPath",{replace:function(m){for(var b=t.__morphT,_=1-b,S=[],k=0;k<d.length;k++){var D=d[k],O=D.from,N=D.to,F=D.rotation*b,V=D.fromCp,q=D.toCp,Z=Math.sin(F),Q=Math.cos(F);fn(S,V,q,b);for(var re=0;re<O.length;re+=2){var ve=O[re]*_+(Ge=N[re])*b,_e=O[re+1]*_+(Xe=N[re+1])*b;p[re]=ve*Q-_e*Z+S[0],p[re+1]=ve*Z+_e*Q+S[1]}var Ee=p[0],ze=p[1];for(m.moveTo(Ee,ze),re=2;re<O.length;){var Ge=p[re++],Xe=p[re++],$e=p[re++],nt=p[re++],yt=p[re++],_t=p[re++];Ee===Ge&&ze===Xe&&$e===yt&&nt===_t?m.lineTo(yt,_t):m.bezierCurveTo(Ge,Xe,$e,nt,yt,_t),Ee=yt,ze=_t}}}})}function RL(n,t,e){if(!n||!t)return t;var r=e.done,o=e.during;return VB(n,t),t.__morphT=0,t.animateTo({__morphT:1},Yn({during:function(i){t.dirtyShape(),o&&o(i)},done:function(){sO(t,"buildPath"),sO(t,"updateTransform"),t.__morphT=-1,t.createPathProxy(),t.dirtyShape(),r&&r()}},e)),t}function AF(n,t,e,r,o,i){n=o===e?0:Math.round(32767*(n-e)/(o-e)),t=i===r?0:Math.round(32767*(t-r)/(i-r));for(var s,l=0,c=32768;c>0;c/=2){var d=0,p=0;(n&c)>0&&(d=1),(t&c)>0&&(p=1),l+=c*c*(3*d^p),0===p&&(1===d&&(n=c-1-n,t=c-1-t),s=n,n=t,t=s)}return l}function IP(n){var t=1/0,e=1/0,r=-1/0,o=-1/0,i=mt(n,function(s){var l=s.getBoundingRect(),c=s.getComputedTransform(),d=l.x+l.width/2+(c?c[4]:0),p=l.y+l.height/2+(c?c[5]:0);return t=Math.min(d,t),e=Math.min(p,e),r=Math.max(d,r),o=Math.max(p,o),[d,p]});return mt(i,function(s,l){return{cp:s,z:AF(s[0],s[1],t,e,r,o),path:n[l]}}).sort(function(s,l){return s.z-l.z}).map(function(s){return s.path})}function HB(n){return function MF(n,t){var e,r=[],o=n.shape;switch(n.type){case"rect":(function(O,N,F){for(var V=O.width,q=O.height,Z=V>q,Q=EB([V,q],Z?0:1,N),re=Z?"width":"height",he=Z?"height":"width",ge=Z?"x":"y",ve=Z?"y":"x",_e=O[re]/Q.length,Ee=0;Ee<Q.length;Ee++)for(var ze=O[he]/Q[Ee],Ge=0;Ge<Q[Ee];Ge++){var Xe={};Xe[ge]=Ee*_e,Xe[ve]=Ge*ze,Xe[re]=_e,Xe[he]=ze,Xe.x+=O.x,Xe.y+=O.y,F.push(Xe)}})(o,t,r),e=bi;break;case"sector":PB(o,t,r),e=Cc;break;case"circle":PB({r0:0,r:o.r,startAngle:0,endAngle:2*Math.PI,cx:o.cx,cy:o.cy},t,r),e=Cc;break;default:var i=n.getComputedTransform(),s=i?Math.sqrt(Math.max(i[0]*i[0]+i[1]*i[1],i[2]*i[2]+i[3]*i[3])):1,l=mt(function(O,N){var F=EL(O),V=[];N=N||1;for(var q=0;q<F.length;q++){var Z=F[q],Q=[],re=Z[0],he=Z[1];Q.push(re,he);for(var ge=2;ge<Z.length;){var ve=Z[ge++],_e=Z[ge++],Ee=Z[ge++],ze=Z[ge++],Ge=Z[ge++],Xe=Z[ge++];PL(re,he,ve,_e,Ee,ze,Ge,Xe,Q,N),re=Ge,he=Xe}V.push(Q)}return V}(n.getUpdatedPathProxy(),s),function(O){return function(N){for(var F=[],V=0;V<N.length;)F.push([N[V++],N[V++]]);return F}(O)}),c=l.length;if(0===c)TP(LB,{points:l[0]},t,r);else if(c===t)for(var d=0;d<c;d++)r.push({points:l[d]});else{var p=0,m=mt(l,function(O){var N=[],F=[];Ya(O,N,F);var V=(F[1]-N[1])*(F[0]-N[0]);return p+=V,{poly:O,area:V}});m.sort(function(O,N){return N.area-O.area});var b=t;for(d=0;d<c;d++){var _=m[d];if(b<=0)break;var S=d===c-1?b:Math.ceil(_.area/p*t);S<0||(TP(LB,{points:_.poly},S,r),b-=S)}}e=eu}if(!e)return function(O,N){for(var F=[],V=0;V<N;V++)F.push(d0(O));return F}(n,t);var k=[];for(d=0;d<r.length;d++){var D=new e;D.setShape(r[d]),CF(n,D),k.push(D)}return k}(n.path,n.count)}function WB(n){return Ue(n[0])}function GB(n,t){for(var e=[],r=n.length,o=0;o<r;o++)e.push({one:n[o],many:[]});for(o=0;o<t.length;o++){var i=t[o].length,s=void 0;for(s=0;s<i;s++)e[s%r].many.push(t[o][s])}var l=0;for(o=r-1;o>=0;o--)if(!e[o].many.length){var c=e[l].many;if(c.length<=1){if(!l)return e;l=0}i=c.length;var d=Math.ceil(i/2);e[o].many=c.slice(d,i),e[l].many=c.slice(0,d),l++}return e}var IF={clone:function(n){for(var t=[],e=1-Math.pow(1-n.path.style.opacity,1/n.count),r=0;r<n.count;r++){var o=d0(n.path);o.setStyle("opacity",e),t.push(o)}return t},split:null};function LL(n,t,e,r,o,i){if(n.length&&t.length){var s=Kc("update",r,o);if(s&&s.duration>0){var l,c,d=r.getModel("universalTransition").get("delay"),p=Object.assign({setToFinal:!0},s);WB(n)&&(l=n,c=t),WB(t)&&(l=t,c=n);for(var m=l?l===n:n.length>t.length,b=l?GB(c,l):GB(m?t:n,[m?n:t]),_=0,S=0;S<b.length;S++)_+=b[S].many.length;var k=0;for(S=0;S<b.length;S++)D(b[S],m,k,_),k+=b[S].many.length}}function D(O,N,F,V,q){var Z=O.many,Q=O.one;if(1!==Z.length||q)for(var re=Yn({dividePath:IF[e],individualDelay:d&&function($e,nt,yt,_t){return d($e+F,V)}},p),he=N?function($e,nt,yt){var _t=[];!function ji(pa){for(var za=0;za<pa.length;za++){var Bu=pa[za];DP(Bu)?ji(Bu.childrenRef()):Bu instanceof Go&&_t.push(Bu)}}($e);var Et=_t.length;if(!Et)return{fromIndividuals:[],toIndividuals:[],count:0};var hn=(yt.dividePath||HB)({path:nt,count:Et});if(hn.length!==Et)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};_t=IP(_t),hn=IP(hn);for(var Zn=yt.done,Rt=yt.during,Mn=yt.individualDelay,lr=new To,ar=0;ar<Et;ar++){var Kn=_t[ar],xr=hn[ar];xr.parent=nt,xr.copyTransform(lr),Mn||VB(Kn,xr)}function nr(ji){for(var pa=0;pa<hn.length;pa++)hn[pa].addSelfToZr(ji)}function Cr(){nt.__isCombineMorphing=!1,nt.__morphT=-1,nt.childrenRef=null,sO(nt,"addSelfToZr"),sO(nt,"removeSelfFromZr")}nt.__isCombineMorphing=!0,nt.childrenRef=function(){return hn},AP(nt,"addSelfToZr",{after:function(ji){nr(ji)}}),AP(nt,"removeSelfFromZr",{after:function(ji){for(var pa=0;pa<hn.length;pa++)hn[pa].removeSelfFromZr(ji)}});var zr=hn.length;if(Mn){var qo=zr,li=function(){0==--qo&&(Cr(),Zn&&Zn())};for(ar=0;ar<zr;ar++){var ss=Mn?Yn({delay:(yt.delay||0)+Mn(ar,zr,_t[ar],hn[ar]),done:li},yt):yt;RL(_t[ar],hn[ar],ss)}}else nt.__morphT=0,nt.animateTo({__morphT:1},Yn({during:function(ji){for(var pa=0;pa<zr;pa++){var za=hn[pa];za.__morphT=nt.__morphT,za.dirtyShape()}Rt&&Rt(ji)},done:function(){Cr();for(var ji=0;ji<$e.length;ji++)sO($e[ji],"updateTransform");Zn&&Zn()}},yt));return nt.__zr&&nr(nt.__zr),{fromIndividuals:_t,toIndividuals:hn,count:zr}}(Z,Q,re):function($e,nt,yt){var _t=nt.length,Et=[],hn=yt.dividePath||HB;if(DP($e)){!function xr(nr){for(var Cr=0;Cr<nr.length;Cr++){var zr=nr[Cr];DP(zr)?xr(zr.childrenRef()):zr instanceof Go&&Et.push(zr)}}($e.childrenRef());var Zn=Et.length;if(Zn<_t)for(var Rt=0,Mn=Zn;Mn<_t;Mn++)Et.push(d0(Et[Rt++%Zn]));Et.length=_t}else{Et=hn({path:$e,count:_t});var lr=$e.getComputedTransform();for(Mn=0;Mn<Et.length;Mn++)Et[Mn].setLocalTransform(lr);if(Et.length!==_t)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}Et=IP(Et),nt=IP(nt);var ar=yt.individualDelay;for(Mn=0;Mn<_t;Mn++){var Kn=ar?Yn({delay:(yt.delay||0)+ar(Mn,_t,Et[Mn],nt[Mn])},yt):yt;RL(Et[Mn],nt[Mn],Kn)}return{fromIndividuals:Et,toIndividuals:nt,count:nt.length}}(Q,Z,re),ge=he.fromIndividuals,ve=he.toIndividuals,_e=ge.length,Ee=0;Ee<_e;Ee++)ze=d?Yn({delay:d(Ee,_e)},p):p,i(ge[Ee],ve[Ee],N?Z[Ee]:O.one,N?O.one:Z[Ee],ze);else{var ze,Ge=N?Z[0]:Q,Xe=N?Q:Z[0];DP(Ge)?D({many:[Ge],one:Xe},!0,F,V,!0):(RL(Ge,Xe,ze=d?Yn({delay:d(F,V)},p):p),i(Ge,Xe,Ge,Xe,ze))}}}function CT(n){if(!n)return[];if(Ue(n)){for(var t=[],e=0;e<n.length;e++)t.push(CT(n[e]));return t}var r=[];return n.traverse(function(o){o instanceof Go&&!o.disableMorphing&&!o.invisible&&!o.ignore&&r.push(o)}),r}var OF=hi();function UB(n){var t=[];return Ce(n,function(e){var r=e.data;if(!(r.count()>1e4))for(var o=r.getIndices(),i=function(l){for(var c=l.dimensions,d=0;d<c.length;d++){var p=l.getDimensionInfo(c[d]);if(p&&0===p.otherDims.itemGroupId)return c[d]}}(r),s=0;s<o.length;s++)t.push({dataGroupId:e.dataGroupId,data:r,dim:e.dim||i,divide:e.divide,dataIndex:s})}),t}function NL(n,t,e){n.traverse(function(r){r instanceof Go&&as(r,{style:{opacity:0}},t,{dataIndex:e,isFrom:!0})})}function BL(n){if(n.parent){var t=n.getComputedTransform();n.setLocalTransform(t),n.parent.remove(n)}}function F2(n){n.stopAnimation(),n.isGroup&&n.traverse(function(t){t.stopAnimation()})}function jB(n,t,e){var r=UB(n),o=UB(t);function i(O,N,F,V,q){(F||O)&&N.animateFrom({style:F&&F!==O?Lt(Lt({},F.style),O.style):O.style},q)}function s(O){for(var N=0;N<O.length;N++)if(O[N].dim)return O[N].dim}var l=s(r),c=s(o),d=!1;function p(O,N){return function(F){var V=F.data,q=F.dataIndex;if(N)return V.getId(q);var Z=F.dataGroupId,Q=O?l||c:c||l,re=Q&&V.getDimensionInfo(Q),he=re&&re.ordinalMeta;if(re){var ge=V.get(re.name,q);return he&&he.categories[ge]||ge+""}var ve=V.getRawDataItem(q);return ve&&ve.groupId?ve.groupId+"":Z||V.getId(q)}}var m=function(O,N){var F=O.length;if(F!==N.length)return!1;for(var V=0;V<F;V++){var q=O[V],Z=N[V];if(q.data.getId(q.dataIndex)!==Z.data.getId(Z.dataIndex))return!1}return!0}(r,o),b={};if(!m)for(var _=0;_<o.length;_++){var S=o[_],k=S.data.getItemGraphicEl(S.dataIndex);k&&(b[k.id]=!0)}function D(O,N){var F=r[N],V=o[O],q=V.data.hostModel,Z=F.data.getItemGraphicEl(F.dataIndex),Q=V.data.getItemGraphicEl(V.dataIndex);Z!==Q?Z&&b[Z.id]||Q&&(F2(Q),Z?(F2(Z),BL(Z),d=!0,LL(CT(Z),CT(Q),V.divide,q,O,i)):NL(Q,q,O)):Q&&function EF(n,t,e){var r=Kc("update",e,t);r&&n.traverse(function(o){if(o instanceof Ml){var i=ix(o).oldStyle;i&&o.animateFrom({style:i},r)}})}(Q,V.dataIndex,q)}new lg(r,o,p(!0,m),p(!1,m),null,"multiple").update(D).updateManyToOne(function(O,N){var F=o[O],V=F.data,q=V.hostModel,Z=V.getItemGraphicEl(F.dataIndex),Q=yo(mt(N,function(re){return r[re].data.getItemGraphicEl(r[re].dataIndex)}),function(re){return re&&re!==Z&&!b[re.id]});Z&&(F2(Z),Q.length?(Ce(Q,function(re){F2(re),BL(re)}),d=!0,LL(CT(Q),CT(Z),F.divide,q,O,i)):NL(Z,q,F.dataIndex))}).updateOneToMany(function(O,N){var F=r[N],V=F.data.getItemGraphicEl(F.dataIndex);if(!V||!b[V.id]){var q=yo(mt(O,function(Q){return o[Q].data.getItemGraphicEl(o[Q].dataIndex)}),function(Q){return Q&&Q!==V}),Z=o[O[0]].data.hostModel;q.length&&(Ce(q,function(Q){return F2(Q)}),V?(F2(V),BL(V),d=!0,LL(CT(V),CT(q),F.divide,Z,O[0],i)):Ce(q,function(Q){return NL(Q,Z,O[0])}))}}).updateManyToMany(function(O,N){new lg(N,O,function(F){return r[F].data.getId(r[F].dataIndex)},function(F){return o[F].data.getId(o[F].dataIndex)}).update(function(F,V){D(O[F],N[V])}).execute()}).execute(),d&&Ce(t,function(O){var N=O.data.hostModel,F=N&&e.getViewOfSeriesModel(N),V=Kc("update",N,0);F&&N.isAnimationEnabled()&&V&&V.duration>0&&F.group.traverse(function(q){q instanceof Go&&!q.animators.length&&q.animateFrom({style:{opacity:0}},V)})})}function YB(n){return n.getModel("universalTransition").get("seriesKey")||n.id}function qB(n){return Ue(n)?n.sort().join(","):n}function AM(n){if(n.hostModel)return n.hostModel.getModel("universalTransition").get("divideShape")}function XB(n,t){for(var e=0;e<n.length;e++)if(null!=t.seriesIndex&&t.seriesIndex===n[e].seriesIndex||null!=t.seriesId&&t.seriesId===n[e].id)return e}xi([function(n){n.registerPainter("canvas",rS)}]),xi([function(n){n.registerPainter("svg",$C)}]),xi([function(n){n.registerChartView(Yk),n.registerSeriesModel(K2),n.registerLayout(Uy("line",!0)),n.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),r=t.getModel("lineStyle").getLineStyle();r&&!r.stroke&&(r.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",r)}}),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,ym("line"))},function(n){n.registerChartView(O1),n.registerSeriesModel(J2),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,dr(eD,"bar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Z0("bar")),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,ym("bar")),n.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},function(t,e){e.eachComponent({mainType:t.componentType||"series",query:t},function(o){t.sortInfo&&o.axis.setCategorySortInfo(t.sortInfo)})})},function(n){n.registerChartView(Kk),n.registerSeriesModel(x),dw("pie",n.registerAction),n.registerLayout(dr(uM,"pie")),n.registerProcessor(wu("pie")),n.registerProcessor({seriesType:"pie",reset:function(e,r){var o=e.getData();o.filterSelf(function(i){var s=o.mapDimension("value"),l=o.get(s,i);return!(gr(l)&&!isNaN(l)&&l<0)})}})},function(n){xi(Gi),n.registerSeriesModel(C),n.registerChartView(j),n.registerLayout(Uy("scatter"))},function(n){xi(Jk),n.registerChartView(Oc),n.registerSeriesModel(zv),n.registerLayout(ou),n.registerProcessor(wu("radar")),n.registerPreprocessor(ml)},function(n){xi(MO),n.registerChartView(BP),n.registerSeriesModel(zP),n.registerLayout(FP),n.registerProcessor(n.PRIORITY.PROCESSOR.STATISTIC,lA),dw("map",n.registerAction)},function(n){n.registerChartView(qP),n.registerSeriesModel(sT),n.registerLayout(xA),n.registerVisual(_A),function(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,r){r.eachComponent({mainType:"series",subType:"tree",query:e},function(o){var i=e.dataIndex,s=o.getData().tree.getNodeByDataIndex(i);s.isExpand=!s.isExpand})}),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},function(e,r,o){r.eachComponent({mainType:"series",subType:"tree",query:e},function(i){var s=hA(i.coordinateSystem,e,void 0,o);i.setCenter&&i.setCenter(s.center),i.setZoom&&i.setZoom(s.zoom)})})}(n)},function(n){n.registerSeriesModel(XP),n.registerChartView(MA),n.registerVisual(jO),n.registerLayout(LA),function(t){for(var e=0;e<uT.length;e++)t.registerAction({type:uT[e],update:"updateView"},Fo);t.registerAction({type:"treemapRootToNode",update:"updateView"},function(r,o){o.eachComponent({mainType:"series",subType:"treemap",query:r},function(i,s){var l=oT(r,["treemapZoomToNode","treemapRootToNode"],i);if(l){var c=i.getViewRoot();c&&(r.direction=iT(c,l.node)?"rollUp":"drillDown"),i.resetViewRoot(l.node)}})})}(n)},function(n){n.registerChartView(eE),n.registerSeriesModel(QP),n.registerProcessor(BA),n.registerVisual(KP),n.registerVisual($P),n.registerLayout(KO),n.registerLayout(n.PRIORITY.VISUAL.POST_CHART_LAYOUT,bM),n.registerLayout(JO),n.registerCoordinateSystem("graphView",{dimensions:vp.dimensions,create:GA}),n.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},Fo),n.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},Fo),n.registerAction(eI,function(t,e,r){e.eachComponent({mainType:"series",query:t},function(o){var i=hA(o.coordinateSystem,t,void 0,r);o.setCenter&&o.setCenter(i.center),o.setZoom&&o.setZoom(i.zoom)})})},function(n){n.registerChartView(tR),n.registerSeriesModel(rE)},function(n){n.registerChartView(_S),n.registerSeriesModel(oE),n.registerLayout(c2),n.registerProcessor(wu("funnel"))},function(n){xi(EE),n.registerChartView(oR),n.registerSeriesModel(sE),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,nI)},function(n){n.registerChartView(SR),n.registerSeriesModel(CR),n.registerLayout(MR),n.registerVisual(RE),n.registerAction({type:"dragNode",event:"dragnode",update:"update"},function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},function(r){r.setNodePosition(t.dataIndex,[t.localX,t.localY])})})},function(n){n.registerSeriesModel(_2),n.registerChartView(LE),n.registerLayout(Xy),n.registerTransform(SI)},function(n){n.registerChartView(AR),n.registerSeriesModel(UE),n.registerPreprocessor(jE),n.registerVisual(PR),n.registerLayout(yp)},function(n){n.registerChartView(MS),n.registerSeriesModel(C2),n.registerLayout(Uy("effectScatter"))},function(n){n.registerChartView(YE),n.registerSeriesModel(NR),n.registerLayout(II),n.registerVisual(BR)},function(n){n.registerChartView(FR),n.registerSeriesModel(VR)},function(n){n.registerChartView(ZE),n.registerSeriesModel(UI),n.registerLayout(n.PRIORITY.VISUAL.LAYOUT,dr(eD,"pictorialBar")),n.registerLayout(n.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Z0("pictorialBar"))},function(n){n.registerChartView(JE),n.registerSeriesModel(QE),n.registerLayout(WR),n.registerProcessor(wu("themeRiver"))},function(n){n.registerChartView(rP),n.registerSeriesModel(GR),n.registerLayout(dr(u,"sunburst")),n.registerProcessor(dr(wu,"sunburst")),n.registerVisual(v),function(t){t.registerAction({type:jI,update:"updateView"},function(e,r){r.eachComponent({mainType:"series",subType:"sunburst",query:e},function(o,i){var s=oT(e,[jI],o);if(s){var l=o.getViewRoot();l&&(e.direction=iT(l,s.node)?"rollUp":"drillDown"),o.resetViewRoot(s.node)}})}),t.registerAction({type:nP,update:"none"},function(e,r,o){e=Lt({},e),r.eachComponent({mainType:"series",subType:"sunburst",query:e},function(i){var s=oT(e,[nP],i);s&&(e.dataIndex=s.node.dataIndex)}),o.dispatchAction(Lt(e,{type:"highlight"}))}),t.registerAction({type:"sunburstUnhighlight",update:"updateView"},function(e,r,o){e=Lt({},e),o.dispatchAction(Lt(e,{type:"downplay"}))})}(n)},function(n){n.registerChartView(au),n.registerSeriesModel(H)}]),xi(function(n){xi(Gi),xi(ed)}),xi(function(n){xi(ed),Uo.registerAxisPointerClass("PolarAxisPointer",UR),n.registerCoordinateSystem("polar",n5),n.registerComponentModel(kM),n.registerComponentView(h5),xe(n,"angle",$B,f5),xe(n,"radius",JB,d5),n.registerComponentView(o5),n.registerComponentView(u5),n.registerLayout(dr(c5,"bar"))}),xi(MO),xi(function(n){xi(ed),Uo.registerAxisPointerClass("SingleAxisPointer",w5),n.registerComponentView(C5),n.registerComponentView(m5),n.registerComponentModel(fP),xe(n,"single",fP,fP.defaultOption),n.registerCoordinateSystem("single",x5)}),xi(EE),xi(function(n){n.registerComponentModel(M5),n.registerComponentView(k5),n.registerCoordinateSystem("calendar",T5)}),xi(function(n){n.registerComponentModel(A5),n.registerComponentView(I5),n.registerPreprocessor(function(t){var e=t.graphic;Ue(e)?t.graphic=e[0]&&e[0].elements?[t.graphic[0]]:[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])})}),xi(function(n){n.registerComponentModel(z5),n.registerComponentView(F5),R2("saveAsImage",V5),R2("magicType",W5),R2("dataView",U5),R2("dataZoom",K5),R2("restore",Y5),xi(B5)}),xi(function(n){xi(ed),n.registerComponentModel(J5),n.registerComponentView(iz),n.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},Fo),n.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},Fo)}),xi(ed),xi(function(n){n.registerComponentView(fz),n.registerComponentModel(dz),n.registerPreprocessor(sz),n.registerVisual(n.PRIORITY.VISUAL.BRUSH,uz),n.registerAction({type:"brush",event:"brush",update:"updateVisual"},function(t,e){e.eachComponent({mainType:"brush",query:t},function(r){r.setAreas(t.areas)})}),n.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},Fo),n.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},Fo),R2("brush",pz)}),xi(function(n){n.registerComponentModel(gz),n.registerComponentView(mz)}),xi(function(n){n.registerComponentModel(VN),n.registerComponentView(bz),n.registerSubTypeDefaulter("timeline",function(){return"slider"}),function(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,r,o){var i=r.getComponent("timeline");return i&&null!=e.currentIndex&&(i.setCurrentIndex(e.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),o.dispatchAction({type:"timelinePlayChange",playState:!1,from:e.from}))),r.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),Yn({currentIndex:i.option.currentIndex},e)}),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,r){var o=r.getComponent("timeline");o&&null!=e.playState&&o.setPlayState(e.playState)})}(n),n.registerPreprocessor(xz)}),xi(function(n){n.registerComponentModel(_z),n.registerComponentView(wz),n.registerPreprocessor(function(t){pL(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})})}),xi(function(n){n.registerComponentModel(Sz),n.registerComponentView(kz),n.registerPreprocessor(function(t){pL(t.series,"markLine")&&(t.markLine=t.markLine||{})})}),xi(function(n){n.registerComponentModel(Tz),n.registerComponentView(Iz),n.registerPreprocessor(function(t){pL(t.series,"markArea")&&(t.markArea=t.markArea||{})})}),xi(function(n){xi(tB),xi(Rz)}),xi(function(n){xi(aB),xi(lB)}),xi(aB),xi(lB),xi(function(n){xi(MB),xi(TB)}),xi(MB),xi(TB),xi(function(n){n.registerPreprocessor(cF),n.registerVisual(n.PRIORITY.VISUAL.ARIA,lF)}),xi(function(n){n.registerTransform(yF),n.registerTransform(bF)}),xi(function(n){n.registerComponentModel(xF),n.registerComponentView(_F)}),xi(function(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,e,r){Ce(ci(r.seriesTransition),function(o){Ce(ci(o.to),function(i){for(var s=r.updatedSeries,l=0;l<s.length;l++)(null!=i.seriesIndex&&i.seriesIndex===s[l].seriesIndex||null!=i.seriesId&&i.seriesId===s[l].id)&&(s[l][I0]=!0)})})}),n.registerUpdateLifecycle("series:transition",function(t,e,r){var _,S,k,D,O,o=OF(e);if(o.oldSeries&&r.updatedSeries&&r.optionChanged){var i=r.seriesTransition;if(i)Ce(ci(i),function(_){var S,k,D,O,N,F;k=o,D=r,O=e,N=[],F=[],Ce(ci((S=_).from),function(V){var q=XB(k.oldSeries,V);q>=0&&N.push({dataGroupId:k.oldDataGroupIds[q],data:k.oldData[q],divide:AM(k.oldData[q]),dim:V.dimension})}),Ce(ci(S.to),function(V){var q=XB(D.updatedSeries,V);if(q>=0){var Z=D.updatedSeries[q].getData();F.push({dataGroupId:k.oldDataGroupIds[q],data:Z,divide:AM(Z),dim:V.dimension})}}),N.length>0&&F.length>0&&jB(N,F,O)});else{var s=(_=o,S=r,k=Or(),D=Or(),O=Or(),Ce(_.oldSeries,function(N,F){var V=_.oldDataGroupIds[F],q=_.oldData[F],Z=YB(N),Q=qB(Z);D.set(Q,{dataGroupId:V,data:q}),Ue(Z)&&Ce(Z,function(re){O.set(re,{key:Q,dataGroupId:V,data:q})})}),Ce(S.updatedSeries,function(N){if(N.isUniversalTransitionEnabled()&&N.isAnimationEnabled()){var F=N.get("dataGroupId"),V=N.getData(),q=YB(N),Z=qB(q),Q=D.get(Z);if(Q)k.set(Z,{oldSeries:[{dataGroupId:Q.dataGroupId,divide:AM(Q.data),data:Q.data}],newSeries:[{dataGroupId:F,divide:AM(V),data:V}]});else if(Ue(q)){var re=[];Ce(q,function(ve){var _e=D.get(ve);_e.data&&re.push({dataGroupId:_e.dataGroupId,divide:AM(_e.data),data:_e.data})}),re.length&&k.set(Z,{oldSeries:re,newSeries:[{dataGroupId:F,data:V,divide:AM(V)}]})}else{var he=O.get(q);if(he){var ge=k.get(he.key);ge||(ge={oldSeries:[{dataGroupId:he.dataGroupId,data:he.data,divide:AM(he.data)}],newSeries:[]},k.set(he.key,ge)),ge.newSeries.push({dataGroupId:F,data:V,divide:AM(V)})}}}}),k);Ce(s.keys(),function(_){var S=s.get(_);jB(S.oldSeries,S.newSeries,e)})}Ce(r.updatedSeries,function(_){_[I0]&&(_[I0]=!1)})}for(var l=t.getSeries(),c=o.oldSeries=[],d=o.oldDataGroupIds=[],p=o.oldData=[],m=0;m<l.length;m++){var b=l[m].getData();b.count()<1e4&&(c.push(l[m]),d.push(l[m].get("dataGroupId")),p.push(b))}})}),xi(function(n){n.registerUpdateLifecycle("series:beforeupdate",function(t,e,r){var o=Zw(e).labelManager;o||(o=Zw(e).labelManager=new lD),o.clearLabels()}),n.registerUpdateLifecycle("series:layoutlabels",function(t,e,r){var o=Zw(e).labelManager;r.updatedSeries.forEach(function(i){o.addLabelsOfSeries(e.getViewOfSeriesModel(i))}),o.updateLayoutConfig(e),o.layout(e),o.processLabelsOverall()})}),mr.Axis=th,mr.ChartView=$a,mr.ComponentModel=W,mr.ComponentView=ks,mr.List=Jc,mr.Model=aa,mr.PRIORITY=fC,mr.SeriesModel=Ka,mr.color=qh,mr.connect=function(n){if(Ue(n)){var t=n;n=null,Ce(t,function(e){null!=e.group&&(n=e.group)}),n=n||"g_"+uk++,Ce(t,function(e){e.group=n})}return xw[n]=!0,n},mr.dataTool={},mr.dependencies={zrender:"5.4.3"},mr.disConnect=bC,mr.disconnect=XT,mr.dispose=function(n){ir(n)?n=G0[n]:n instanceof vC||(n=ww(n)),n instanceof vC&&!n.isDisposed()&&n.dispose()},mr.env=zn,mr.extendChartView=function(n){var t=$a.extend(n);return $a.registerClass(t),t},mr.extendComponentModel=function(n){var t=W.extend(n);return W.registerClass(t),t},mr.extendComponentView=function(n){var t=ks.extend(n);return ks.registerClass(t),t},mr.extendSeriesModel=function(n){var t=Ka.extend(n);return Ka.registerClass(t),t},mr.format=wk,mr.getCoordinateSystemDimensions=function(n){var t=Ms.get(n);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},mr.getInstanceByDom=ww,mr.getInstanceById=function(n){return G0[n]},mr.getMap=function(n){var t=lC("getMap");return t&&t(n)},mr.graphic=Ww,mr.helper=Fw,mr.init=function(n,t,e){var r=!(e&&e.ssr);if(r){var o=ww(n);if(o)return o}var i=new vC(n,t,e);return i.id="ec_"+Wx++,G0[i.id]=i,r&&e0(n,_w,i.id),gC(i),$c.trigger("afterinit",i),i},mr.innerDrawElementOnCanvas=gw,mr.matrix=wp,mr.number=gi,mr.parseGeoJSON=hp,mr.parseGeoJson=hp,mr.registerAction=Ac,mr.registerCoordinateSystem=By,mr.registerLayout=Ux,mr.registerLoading=Lu,mr.registerLocale=Jr,mr.registerMap=Mw,mr.registerPostInit=xC,mr.registerPostUpdate=lk,mr.registerPreprocessor=Gx,mr.registerProcessor=c1,mr.registerTheme=Sw,mr.registerTransform=_C,mr.registerUpdateLifecycle=U0,mr.registerVisual=sm,mr.setCanvasCreator=function(n){Bn({createCanvas:n})},mr.setPlatformAPI=Bn,mr.throttle=aw,mr.time=y1,mr.use=xi,mr.util=Sk,mr.vector=so,mr.version="5.4.2",mr.zrUtil=lh,mr.zrender=bb,Object.defineProperty(mr,"__esModule",{value:!0})}),function(mr,oi){"object"==typeof exports&&"undefined"!=typeof module?oi(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],oi):oi((mr=mr||self).bmap={},mr.echarts)}(this,function(mr,oi){"use strict";function gt(cr,ct){this._bmap=cr,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=ct,this._projection=new BMap.MercatorProjection}function us(cr,ct){return ct=ct||[0,0],oi.util.map([0,1],function(_n){var jr=ct[_n],Pr=cr[_n]/2,Bn=[],mi=[];return Bn[_n]=jr-Pr,mi[_n]=jr+Pr,Bn[1-_n]=mi[1-_n]=ct[1-_n],Math.abs(this.dataToPoint(Bn)[_n]-this.dataToPoint(mi)[_n])},this)}var zn;function Gt(cr){for(var ct in cr)if(cr.hasOwnProperty(ct))return;return 1}gt.prototype.dimensions=["lng","lat"],gt.prototype.setZoom=function(cr){this._zoom=cr},gt.prototype.setCenter=function(cr){this._center=this._projection.lngLatToPoint(new BMap.Point(cr[0],cr[1]))},gt.prototype.setMapOffset=function(cr){this._mapOffset=cr},gt.prototype.getBMap=function(){return this._bmap},gt.prototype.dataToPoint=function(ct){var _n=new BMap.Point(ct[0],ct[1]);return[(ct=this._bmap.pointToOverlayPixel(_n)).x-(_n=this._mapOffset)[0],ct.y-_n[1]]},gt.prototype.pointToData=function(cr){var ct=this._mapOffset;return[(cr=this._bmap.overlayPixelToPoint({x:cr[0]+ct[0],y:cr[1]+ct[1]})).lng,cr.lat]},gt.prototype.getViewRect=function(){var cr=this._api;return new oi.graphic.BoundingRect(0,0,cr.getWidth(),cr.getHeight())},gt.prototype.getRoamTransform=function(){return oi.matrix.create()},gt.prototype.prepareCustoms=function(){var cr=this.getViewRect();return{coordSys:{type:"bmap",x:cr.x,y:cr.y,width:cr.width,height:cr.height},api:{coord:oi.util.bind(this.dataToPoint,this),size:oi.util.bind(us,this)}}},gt.dimensions=gt.prototype.dimensions,gt.create=function(cr,ct){var _n,jr=ct.getDom();cr.eachComponent("bmap",function(Pr){var Bn,mi=ct.getZr().painter,Kr=mi.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");function _l(wo){this._root=wo}if(zn=zn||((_l.prototype=new BMap.Overlay).initialize=function(wo){return wo.getPanes().labelPane.appendChild(this._root),this._root},_l.prototype.draw=function(){},_l),_n)throw new Error("Only one bmap component can exist");Pr.__bmap||((Ci=jr.querySelector(".ec-extension-bmap"))&&(Kr.style.left="0px",Kr.style.top="0px",jr.removeChild(Ci)),(Ci=document.createElement("div")).className="ec-extension-bmap",Ci.style.cssText="position:absolute;width:100%;height:100%",jr.appendChild(Ci),(Mi=Pr.get("mapOptions"))&&delete(Mi=oi.util.clone(Mi)).mapType,Bn=Pr.__bmap=new BMap.Map(Ci,Mi),Ci=new zn(Kr),Bn.addOverlay(Ci),mi.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}),Bn=Pr.__bmap;var Ci,Mi=Pr.get("center");Kr=Pr.get("zoom"),Mi&&Kr&&(Ci=Bn.getCenter(),mi=Bn.getZoom(),Pr.centerOrZoomChanged([Ci.lng,Ci.lat],mi)&&(mi=new BMap.Point(Mi[0],Mi[1]),Bn.centerAndZoom(mi,Kr))),(_n=new gt(Bn,ct)).setMapOffset(Pr.__mapOffset||[0,0]),_n.setZoom(Kr),_n.setCenter(Mi),Pr.coordinateSystem=_n}),cr.eachSeries(function(Pr){"bmap"===Pr.get("coordinateSystem")&&(Pr.coordinateSystem=_n)})},oi.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(cr,ct){this.option.center=cr,this.option.zoom=ct},centerOrZoomChanged:function(cr,ct){var _n,jr=this.option;return _n=cr,cr=jr.center,!(_n&&cr&&_n[0]===cr[0]&&_n[1]===cr[1]&&ct===jr.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),oi.extendComponentView({type:"bmap",render:function(cr,ct,_n){var jr=!0,Pr=cr.getBMap(),Bn=_n.getZr().painter.getViewportRoot(),mi=cr.coordinateSystem,Mi=function(wo,Va){var Yo,qr,ts,uo;jr||(uo=Bn.parentNode.parentNode.parentNode,uo=(Yo=[-parseInt(uo.style.left,10)||0,-parseInt(uo.style.top,10)||0])[1]+"px",(qr=Bn.style).left!==(ts=Yo[0]+"px")&&(qr.left=ts),qr.top!==uo&&(qr.top=uo),mi.setMapOffset(Yo),cr.__mapOffset=Yo,_n.dispatchAction({type:"bmapRoam",animation:{duration:0}}))};function _l(){jr||_n.dispatchAction({type:"bmapRoam",animation:{duration:0}})}Pr.removeEventListener("moving",this._oldMoveHandler),Pr.removeEventListener("moveend",this._oldMoveHandler),Pr.removeEventListener("zoomend",this._oldZoomEndHandler),Pr.addEventListener("moving",Mi),Pr.addEventListener("moveend",Mi),Pr.addEventListener("zoomend",_l),this._oldMoveHandler=Mi,this._oldZoomEndHandler=_l,(Kr=cr.get("roam"))&&"scale"!==Kr?Pr.enableDragging():Pr.disableDragging(),Kr&&"move"!==Kr?(Pr.enableScrollWheelZoom(),Pr.enableDoubleClickZoom(),Pr.enablePinchToZoom()):(Pr.disableScrollWheelZoom(),Pr.disableDoubleClickZoom(),Pr.disablePinchToZoom());var Ci=cr.__mapStyle,Kr=(Mi=cr.get("mapStyle")||{},JSON.stringify(Mi));JSON.stringify(Ci)!==Kr&&(Gt(Mi)||Pr.setMapStyle(oi.util.clone(Mi)),cr.__mapStyle=JSON.parse(Kr)),Ci=cr.__mapStyle2,Mi=cr.get("mapStyleV2")||{},Kr=JSON.stringify(Mi),JSON.stringify(Ci)!==Kr&&(Gt(Mi)||Pr.setMapStyleV2(oi.util.clone(Mi)),cr.__mapStyle2=JSON.parse(Kr)),jr=!1}}),oi.registerCoordinateSystem("bmap",gt),oi.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(cr,ct){ct.eachComponent("bmap",function(_n){var jr=_n.getBMap(),Pr=jr.getCenter();_n.setCenterAndZoom([Pr.lng,Pr.lat],jr.getZoom())})}),mr.version="1.0.0",Object.defineProperty(mr,"__esModule",{value:!0})}),function(mr,oi){"object"==typeof exports&&"undefined"!=typeof module?module.exports=oi(function(){try{return require("moment")}catch{}}()):"function"==typeof define&&define.amd?define(["require"],function(gt){return oi(function(){try{return gt("moment")}catch{}}())}):(mr=mr||self).Chart=oi(mr.moment)}(this,function(mr){"use strict";mr=mr&&mr.hasOwnProperty("default")?mr.default:mr;var T,oi={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},gt=(function(y){var T={};for(var E in oi)oi.hasOwnProperty(E)&&(T[oi[E]]=E);var B=y.exports={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};for(var U in B)if(B.hasOwnProperty(U)){if(!("channels"in B[U]))throw new Error("missing channels property: "+U);if(!("labels"in B[U]))throw new Error("missing channel labels property: "+U);if(B[U].labels.length!==B[U].channels)throw new Error("channel and label counts mismatch: "+U);var ne=B[U].channels,ee=B[U].labels;delete B[U].channels,delete B[U].labels,Object.defineProperty(B[U],"channels",{value:ne}),Object.defineProperty(B[U],"labels",{value:ee})}B.rgb.hsl=function(ae){var fe,Me,ke=ae[0]/255,Fe=ae[1]/255,Ze=ae[2]/255,ot=Math.min(ke,Fe,Ze),rt=Math.max(ke,Fe,Ze),Ct=rt-ot;return rt===ot?fe=0:ke===rt?fe=(Fe-Ze)/Ct:Fe===rt?fe=2+(Ze-ke)/Ct:Ze===rt&&(fe=4+(ke-Fe)/Ct),(fe=Math.min(60*fe,360))<0&&(fe+=360),Me=(ot+rt)/2,[fe,100*(rt===ot?0:Me<=.5?Ct/(rt+ot):Ct/(2-rt-ot)),100*Me]},B.rgb.hsv=function(ae){var fe,Me,ke,Fe,Ze,ot=ae[0]/255,rt=ae[1]/255,Ct=ae[2]/255,Vt=Math.max(ot,rt,Ct),Wn=Vt-Math.min(ot,rt,Ct),An=function(Un){return(Vt-Un)/6/Wn+.5};return 0===Wn?Fe=Ze=0:(Ze=Wn/Vt,fe=An(ot),Me=An(rt),ke=An(Ct),ot===Vt?Fe=ke-Me:rt===Vt?Fe=1/3+fe-ke:Ct===Vt&&(Fe=2/3+Me-fe),Fe<0?Fe+=1:Fe>1&&(Fe-=1)),[360*Fe,100*Ze,100*Vt]},B.rgb.hwb=function(ae){var fe=ae[0],Me=ae[1],ke=ae[2];return[B.rgb.hsl(ae)[0],1/255*Math.min(fe,Math.min(Me,ke))*100,100*(ke=1-1/255*Math.max(fe,Math.max(Me,ke)))]},B.rgb.cmyk=function(ae){var fe,Me=ae[0]/255,ke=ae[1]/255,Fe=ae[2]/255;return[100*((1-Me-(fe=Math.min(1-Me,1-ke,1-Fe)))/(1-fe)||0),100*((1-ke-fe)/(1-fe)||0),100*((1-Fe-fe)/(1-fe)||0),100*fe]},B.rgb.keyword=function(ae){var fe=T[ae];if(fe)return fe;var Me,ke,Fe,Ze=1/0;for(var ot in oi)if(oi.hasOwnProperty(ot)){var Ct=(ke=ae,Fe=oi[ot],Math.pow(ke[0]-Fe[0],2)+Math.pow(ke[1]-Fe[1],2)+Math.pow(ke[2]-Fe[2],2));Ct<Ze&&(Ze=Ct,Me=ot)}return Me},B.keyword.rgb=function(ae){return oi[ae]},B.rgb.xyz=function(ae){var fe=ae[0]/255,Me=ae[1]/255,ke=ae[2]/255;return[100*(.4124*(fe=fe>.04045?Math.pow((fe+.055)/1.055,2.4):fe/12.92)+.3576*(Me=Me>.04045?Math.pow((Me+.055)/1.055,2.4):Me/12.92)+.1805*(ke=ke>.04045?Math.pow((ke+.055)/1.055,2.4):ke/12.92)),100*(.2126*fe+.7152*Me+.0722*ke),100*(.0193*fe+.1192*Me+.9505*ke)]},B.rgb.lab=function(ae){var fe=B.rgb.xyz(ae),Me=fe[0],ke=fe[1],Fe=fe[2];return ke/=100,Fe/=108.883,Me=(Me/=95.047)>.008856?Math.pow(Me,1/3):7.787*Me+16/116,[116*(ke=ke>.008856?Math.pow(ke,1/3):7.787*ke+16/116)-16,500*(Me-ke),200*(ke-(Fe=Fe>.008856?Math.pow(Fe,1/3):7.787*Fe+16/116))]},B.hsl.rgb=function(ae){var fe,Me,ke,Fe,Ze,ot=ae[0]/360,rt=ae[1]/100,Ct=ae[2]/100;if(0===rt)return[Ze=255*Ct,Ze,Ze];fe=2*Ct-(Me=Ct<.5?Ct*(1+rt):Ct+rt-Ct*rt),Fe=[0,0,0];for(var Vt=0;Vt<3;Vt++)(ke=ot+1/3*-(Vt-1))<0&&ke++,ke>1&&ke--,Fe[Vt]=255*(Ze=6*ke<1?fe+6*(Me-fe)*ke:2*ke<1?Me:3*ke<2?fe+(Me-fe)*(2/3-ke)*6:fe);return Fe},B.hsl.hsv=function(ae){var fe=ae[0],Me=ae[1]/100,ke=ae[2]/100,Fe=Me,Ze=Math.max(ke,.01);return Me*=(ke*=2)<=1?ke:2-ke,Fe*=Ze<=1?Ze:2-Ze,[fe,100*(0===ke?2*Fe/(Ze+Fe):2*Me/(ke+Me)),(ke+Me)/2*100]},B.hsv.rgb=function(ae){var fe=ae[0]/60,Me=ae[1]/100,ke=ae[2]/100,Fe=Math.floor(fe)%6,Ze=fe-Math.floor(fe),ot=255*ke*(1-Me),rt=255*ke*(1-Me*Ze),Ct=255*ke*(1-Me*(1-Ze));switch(ke*=255,Fe){case 0:return[ke,Ct,ot];case 1:return[rt,ke,ot];case 2:return[ot,ke,Ct];case 3:return[ot,rt,ke];case 4:return[Ct,ot,ke];case 5:return[ke,ot,rt]}},B.hsv.hsl=function(ae){var fe,Me,ke,Fe=ae[0],Ze=ae[1]/100,ot=ae[2]/100,rt=Math.max(ot,.01);return ke=(2-Ze)*ot,Me=Ze*rt,[Fe,100*(Me=(Me/=(fe=(2-Ze)*rt)<=1?fe:2-fe)||0),100*(ke/=2)]},B.hwb.rgb=function(ae){var fe,Me,ke,Fe,Ze,ot,rt,Ct=ae[0]/360,Vt=ae[1]/100,Wn=ae[2]/100,An=Vt+Wn;switch(An>1&&(Vt/=An,Wn/=An),ke=6*Ct-(fe=Math.floor(6*Ct)),0!=(1&fe)&&(ke=1-ke),Fe=Vt+ke*((Me=1-Wn)-Vt),fe){default:case 6:case 0:Ze=Me,ot=Fe,rt=Vt;break;case 1:Ze=Fe,ot=Me,rt=Vt;break;case 2:Ze=Vt,ot=Me,rt=Fe;break;case 3:Ze=Vt,ot=Fe,rt=Me;break;case 4:Ze=Fe,ot=Vt,rt=Me;break;case 5:Ze=Me,ot=Vt,rt=Fe}return[255*Ze,255*ot,255*rt]},B.cmyk.rgb=function(ae){var Me=ae[1]/100,ke=ae[2]/100,Fe=ae[3]/100;return[255*(1-Math.min(1,ae[0]/100*(1-Fe)+Fe)),255*(1-Math.min(1,Me*(1-Fe)+Fe)),255*(1-Math.min(1,ke*(1-Fe)+Fe))]},B.xyz.rgb=function(ae){var fe,Me,ke,Fe=ae[0]/100,Ze=ae[1]/100,ot=ae[2]/100;return Me=-.9689*Fe+1.8758*Ze+.0415*ot,ke=.0557*Fe+-.204*Ze+1.057*ot,fe=(fe=3.2406*Fe+-1.5372*Ze+-.4986*ot)>.0031308?1.055*Math.pow(fe,1/2.4)-.055:12.92*fe,Me=Me>.0031308?1.055*Math.pow(Me,1/2.4)-.055:12.92*Me,ke=ke>.0031308?1.055*Math.pow(ke,1/2.4)-.055:12.92*ke,[255*(fe=Math.min(Math.max(0,fe),1)),255*(Me=Math.min(Math.max(0,Me),1)),255*(ke=Math.min(Math.max(0,ke),1))]},B.xyz.lab=function(ae){var fe=ae[0],Me=ae[1],ke=ae[2];return Me/=100,ke/=108.883,fe=(fe/=95.047)>.008856?Math.pow(fe,1/3):7.787*fe+16/116,[116*(Me=Me>.008856?Math.pow(Me,1/3):7.787*Me+16/116)-16,500*(fe-Me),200*(Me-(ke=ke>.008856?Math.pow(ke,1/3):7.787*ke+16/116))]},B.lab.xyz=function(ae){var fe,Me,ke;fe=ae[1]/500+(Me=(ae[0]+16)/116),ke=Me-ae[2]/200;var Ze=Math.pow(Me,3),ot=Math.pow(fe,3),rt=Math.pow(ke,3);return Me=Ze>.008856?Ze:(Me-16/116)/7.787,fe=ot>.008856?ot:(fe-16/116)/7.787,ke=rt>.008856?rt:(ke-16/116)/7.787,[fe*=95.047,Me*=100,ke*=108.883]},B.lab.lch=function(ae){var fe,Me=ae[0],ke=ae[1],Fe=ae[2];return(fe=360*Math.atan2(Fe,ke)/2/Math.PI)<0&&(fe+=360),[Me,Math.sqrt(ke*ke+Fe*Fe),fe]},B.lch.lab=function(ae){var fe,ke=ae[1];return fe=ae[2]/360*2*Math.PI,[ae[0],ke*Math.cos(fe),ke*Math.sin(fe)]},B.rgb.ansi16=function(ae){var fe=ae[0],Me=ae[1],ke=ae[2],Fe=1 in arguments?arguments[1]:B.rgb.hsv(ae)[2];if(0===(Fe=Math.round(Fe/50)))return 30;var Ze=30+(Math.round(ke/255)<<2|Math.round(Me/255)<<1|Math.round(fe/255));return 2===Fe&&(Ze+=60),Ze},B.hsv.ansi16=function(ae){return B.rgb.ansi16(B.hsv.rgb(ae),ae[2])},B.rgb.ansi256=function(ae){var fe=ae[0],Me=ae[1],ke=ae[2];return fe===Me&&Me===ke?fe<8?16:fe>248?231:Math.round((fe-8)/247*24)+232:16+36*Math.round(fe/255*5)+6*Math.round(Me/255*5)+Math.round(ke/255*5)},B.ansi16.rgb=function(ae){var fe=ae%10;if(0===fe||7===fe)return ae>50&&(fe+=3.5),[fe=fe/10.5*255,fe,fe];var Me=.5*(1+~~(ae>50));return[(1&fe)*Me*255,(fe>>1&1)*Me*255,(fe>>2&1)*Me*255]},B.ansi256.rgb=function(ae){if(ae>=232){var fe=10*(ae-232)+8;return[fe,fe,fe]}var Me;return ae-=16,[Math.floor(ae/36)/5*255,Math.floor((Me=ae%36)/6)/5*255,Me%6/5*255]},B.rgb.hex=function(ae){var fe=(((255&Math.round(ae[0]))<<16)+((255&Math.round(ae[1]))<<8)+(255&Math.round(ae[2]))).toString(16).toUpperCase();return"000000".substring(fe.length)+fe},B.hex.rgb=function(ae){var fe=ae.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!fe)return[0,0,0];var Me=fe[0];3===fe[0].length&&(Me=Me.split("").map(function(Fe){return Fe+Fe}).join(""));var ke=parseInt(Me,16);return[ke>>16&255,ke>>8&255,255&ke]},B.rgb.hcg=function(ae){var fe,Me=ae[0]/255,ke=ae[1]/255,Fe=ae[2]/255,Ze=Math.max(Math.max(Me,ke),Fe),ot=Math.min(Math.min(Me,ke),Fe),rt=Ze-ot;return fe=rt<=0?0:Ze===Me?(ke-Fe)/rt%6:Ze===ke?2+(Fe-Me)/rt:4+(Me-ke)/rt+4,fe/=6,[360*(fe%=1),100*rt,100*(rt<1?ot/(1-rt):0)]},B.hsl.hcg=function(ae){var ke,fe=ae[1]/100,Me=ae[2]/100,Fe=0;return(ke=Me<.5?2*fe*Me:2*fe*(1-Me))<1&&(Fe=(Me-.5*ke)/(1-ke)),[ae[0],100*ke,100*Fe]},B.hsv.hcg=function(ae){var Me=ae[2]/100,ke=ae[1]/100*Me,Fe=0;return ke<1&&(Fe=(Me-ke)/(1-ke)),[ae[0],100*ke,100*Fe]},B.hcg.rgb=function(ae){var Me=ae[1]/100,ke=ae[2]/100;if(0===Me)return[255*ke,255*ke,255*ke];var Fe,Ze=[0,0,0],ot=ae[0]/360%1*6,rt=ot%1,Ct=1-rt;switch(Math.floor(ot)){case 0:Ze[0]=1,Ze[1]=rt,Ze[2]=0;break;case 1:Ze[0]=Ct,Ze[1]=1,Ze[2]=0;break;case 2:Ze[0]=0,Ze[1]=1,Ze[2]=rt;break;case 3:Ze[0]=0,Ze[1]=Ct,Ze[2]=1;break;case 4:Ze[0]=rt,Ze[1]=0,Ze[2]=1;break;default:Ze[0]=1,Ze[1]=0,Ze[2]=Ct}return[255*(Me*Ze[0]+(Fe=(1-Me)*ke)),255*(Me*Ze[1]+Fe),255*(Me*Ze[2]+Fe)]},B.hcg.hsv=function(ae){var fe=ae[1]/100,Me=fe+ae[2]/100*(1-fe),ke=0;return Me>0&&(ke=fe/Me),[ae[0],100*ke,100*Me]},B.hcg.hsl=function(ae){var fe=ae[1]/100,Me=ae[2]/100*(1-fe)+.5*fe,ke=0;return Me>0&&Me<.5?ke=fe/(2*Me):Me>=.5&&Me<1&&(ke=fe/(2*(1-Me))),[ae[0],100*ke,100*Me]},B.hcg.hwb=function(ae){var fe=ae[1]/100,Me=fe+ae[2]/100*(1-fe);return[ae[0],100*(Me-fe),100*(1-Me)]},B.hwb.hcg=function(ae){var Me=1-ae[2]/100,ke=Me-ae[1]/100,Fe=0;return ke<1&&(Fe=(Me-ke)/(1-ke)),[ae[0],100*ke,100*Fe]},B.apple.rgb=function(ae){return[ae[0]/65535*255,ae[1]/65535*255,ae[2]/65535*255]},B.rgb.apple=function(ae){return[ae[0]/255*65535,ae[1]/255*65535,ae[2]/255*65535]},B.gray.rgb=function(ae){return[ae[0]/100*255,ae[0]/100*255,ae[0]/100*255]},B.gray.hsl=B.gray.hsv=function(ae){return[0,0,ae[0]]},B.gray.hwb=function(ae){return[0,100,ae[0]]},B.gray.cmyk=function(ae){return[0,0,0,ae[0]]},B.gray.lab=function(ae){return[ae[0],0,0]},B.gray.hex=function(ae){var fe=255&Math.round(ae[0]/100*255),Me=((fe<<16)+(fe<<8)+fe).toString(16).toUpperCase();return"000000".substring(Me.length)+Me},B.rgb.gray=function(ae){return[(ae[0]+ae[1]+ae[2])/3/255*100]}}(T={exports:{}}),T.exports);function zn(y,T){return function(E){return T(y(E))}}function Gt(y,T){for(var E=[T[y].parent,y],B=gt[T[y].parent][y],U=T[y].parent;T[U].parent;)E.unshift(T[U].parent),B=zn(gt[T[U].parent][U],B),U=T[U].parent;return B.conversion=E,B}var cr={};Object.keys(gt).forEach(function(y){cr[y]={},Object.defineProperty(cr[y],"channels",{value:gt[y].channels}),Object.defineProperty(cr[y],"labels",{value:gt[y].labels});var T=function(E){for(var B=function us(y){var T=function(){for(var Me={},ke=Object.keys(gt),Fe=ke.length,Ze=0;Ze<Fe;Ze++)Me[ke[Ze]]={distance:-1,parent:null};return Me}(),E=[y];for(T[y].distance=0;E.length;)for(var B=E.pop(),U=Object.keys(gt[B]),ne=U.length,ee=0;ee<ne;ee++){var ae=U[ee],fe=T[ae];-1===fe.distance&&(fe.distance=T[B].distance+1,fe.parent=B,E.unshift(ae))}return T}(E),U={},ne=Object.keys(B),ee=ne.length,ae=0;ae<ee;ae++){var fe=ne[ae];null!==B[fe].parent&&(U[fe]=Gt(fe,B))}return U}(y);Object.keys(T).forEach(function(E){var U,ne,B=T[E];cr[y][E]=(ne=function(ee){if(null==ee)return ee;arguments.length>1&&(ee=Array.prototype.slice.call(arguments));var ae=U(ee);if("object"==typeof ae)for(var fe=ae.length,Me=0;Me<fe;Me++)ae[Me]=Math.round(ae[Me]);return ae},"conversion"in(U=B)&&(ne.conversion=U.conversion),ne),cr[y][E].raw=function(U){var ne=function(ee){return null==ee?ee:(arguments.length>1&&(ee=Array.prototype.slice.call(arguments)),U(ee))};return"conversion"in U&&(ne.conversion=U.conversion),ne}(B)})});var ct=cr,_n={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},jr={getRgba:Pr,getHsla:Bn,getRgb:function(y){var T=Pr(y);return T&&T.slice(0,3)},getHsl:function(y){var T=Bn(y);return T&&T.slice(0,3)},getHwb:mi,getAlpha:function(y){var T=Pr(y);if(T||(T=Bn(y))||(T=mi(y)))return T[3]},hexString:function(y,T){return T=void 0!==T&&3===y.length?T:y[3],"#"+wo(y[0])+wo(y[1])+wo(y[2])+(T>=0&&T<1?wo(Math.round(255*T)):"")},rgbString:function(y,T){return T<1||y[3]&&y[3]<1?_l(y,T):"rgb("+y[0]+", "+y[1]+", "+y[2]+")"},rgbaString:_l,percentString:function(y,T){return T<1||y[3]&&y[3]<1?Ci(y,T):"rgb("+Math.round(y[0]/255*100)+"%, "+Math.round(y[1]/255*100)+"%, "+Math.round(y[2]/255*100)+"%)"},percentaString:Ci,hslString:function(y,T){return T<1||y[3]&&y[3]<1?Mi(y,T):"hsl("+y[0]+", "+y[1]+"%, "+y[2]+"%)"},hslaString:Mi,hwbString:function(y,T){return void 0===T&&(T=void 0!==y[3]?y[3]:1),"hwb("+y[0]+", "+y[1]+"%, "+y[2]+"%"+(void 0!==T&&1!==T?", "+T:"")+")"},keyword:function(y){return Va[y.slice(0,3)]}};function Pr(y){if(y){var T=[0,0,0],E=1,B=y.match(/^#([a-fA-F0-9]{3,4})$/i),U="";if(B){U=(B=B[1])[3];for(var ne=0;ne<T.length;ne++)T[ne]=parseInt(B[ne]+B[ne],16);U&&(E=Math.round(parseInt(U+U,16)/255*100)/100)}else if(B=y.match(/^#([a-fA-F0-9]{6}([a-fA-F0-9]{2})?)$/i)){for(U=B[2],B=B[1],ne=0;ne<T.length;ne++)T[ne]=parseInt(B.slice(2*ne,2*ne+2),16);U&&(E=Math.round(parseInt(U,16)/255*100)/100)}else if(B=y.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(ne=0;ne<T.length;ne++)T[ne]=parseInt(B[ne+1]);E=parseFloat(B[4])}else if(B=y.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(ne=0;ne<T.length;ne++)T[ne]=Math.round(2.55*parseFloat(B[ne+1]));E=parseFloat(B[4])}else if(B=y.match(/(\w+)/)){if("transparent"==B[1])return[0,0,0,0];if(!(T=_n[B[1]]))return}for(ne=0;ne<T.length;ne++)T[ne]=Kr(T[ne],0,255);return E=E||0==E?Kr(E,0,1):1,T[3]=E,T}}function Bn(y){if(y){var T=y.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(T){var E=parseFloat(T[4]);return[Kr(parseInt(T[1]),0,360),Kr(parseFloat(T[2]),0,100),Kr(parseFloat(T[3]),0,100),Kr(isNaN(E)?1:E,0,1)]}}}function mi(y){if(y){var T=y.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(T){var E=parseFloat(T[4]);return[Kr(parseInt(T[1]),0,360),Kr(parseFloat(T[2]),0,100),Kr(parseFloat(T[3]),0,100),Kr(isNaN(E)?1:E,0,1)]}}}function _l(y,T){return void 0===T&&(T=void 0!==y[3]?y[3]:1),"rgba("+y[0]+", "+y[1]+", "+y[2]+", "+T+")"}function Ci(y,T){return"rgba("+Math.round(y[0]/255*100)+"%, "+Math.round(y[1]/255*100)+"%, "+Math.round(y[2]/255*100)+"%, "+(T||y[3]||1)+")"}function Mi(y,T){return void 0===T&&(T=void 0!==y[3]?y[3]:1),"hsla("+y[0]+", "+y[1]+"%, "+y[2]+"%, "+T+")"}function Kr(y,T,E){return Math.min(Math.max(T,y),E)}function wo(y){var T=y.toString(16).toUpperCase();return T.length<2?"0"+T:T}var Va={};for(var Yo in _n)Va[_n[Yo]]=Yo;var qr=function(y){return y instanceof qr?y:this instanceof qr?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof y?(T=jr.getRgba(y))?this.setValues("rgb",T):(T=jr.getHsla(y))?this.setValues("hsl",T):(T=jr.getHwb(y))&&this.setValues("hwb",T):"object"==typeof y&&(void 0!==(T=y).r||void 0!==T.red?this.setValues("rgb",T):void 0!==T.l||void 0!==T.lightness?this.setValues("hsl",T):void 0!==T.v||void 0!==T.value?this.setValues("hsv",T):void 0!==T.w||void 0!==T.whiteness?this.setValues("hwb",T):void 0===T.c&&void 0===T.cyan||this.setValues("cmyk",T)))):new qr(y);var T};qr.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var y=this.values;return 1!==y.alpha?y.hwb.concat([y.alpha]):y.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var y=this.values;return y.rgb.concat([y.alpha])},hslaArray:function(){var y=this.values;return y.hsl.concat([y.alpha])},alpha:function(y){return void 0===y?this.values.alpha:(this.setValues("alpha",y),this)},red:function(y){return this.setChannel("rgb",0,y)},green:function(y){return this.setChannel("rgb",1,y)},blue:function(y){return this.setChannel("rgb",2,y)},hue:function(y){return y&&(y=(y%=360)<0?360+y:y),this.setChannel("hsl",0,y)},saturation:function(y){return this.setChannel("hsl",1,y)},lightness:function(y){return this.setChannel("hsl",2,y)},saturationv:function(y){return this.setChannel("hsv",1,y)},whiteness:function(y){return this.setChannel("hwb",1,y)},blackness:function(y){return this.setChannel("hwb",2,y)},value:function(y){return this.setChannel("hsv",2,y)},cyan:function(y){return this.setChannel("cmyk",0,y)},magenta:function(y){return this.setChannel("cmyk",1,y)},yellow:function(y){return this.setChannel("cmyk",2,y)},black:function(y){return this.setChannel("cmyk",3,y)},hexString:function(){return jr.hexString(this.values.rgb)},rgbString:function(){return jr.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return jr.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return jr.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return jr.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return jr.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return jr.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return jr.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var y=this.values.rgb;return y[0]<<16|y[1]<<8|y[2]},luminosity:function(){for(var y=this.values.rgb,T=[],E=0;E<y.length;E++){var B=y[E]/255;T[E]=B<=.03928?B/12.92:Math.pow((B+.055)/1.055,2.4)}return.2126*T[0]+.7152*T[1]+.0722*T[2]},contrast:function(y){var T=this.luminosity(),E=y.luminosity();return T>E?(T+.05)/(E+.05):(E+.05)/(T+.05)},level:function(y){var T=this.contrast(y);return T>=7.1?"AAA":T>=4.5?"AA":""},dark:function(){var y=this.values.rgb;return(299*y[0]+587*y[1]+114*y[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var y=[],T=0;T<3;T++)y[T]=255-this.values.rgb[T];return this.setValues("rgb",y),this},lighten:function(y){var T=this.values.hsl;return T[2]+=T[2]*y,this.setValues("hsl",T),this},darken:function(y){var T=this.values.hsl;return T[2]-=T[2]*y,this.setValues("hsl",T),this},saturate:function(y){var T=this.values.hsl;return T[1]+=T[1]*y,this.setValues("hsl",T),this},desaturate:function(y){var T=this.values.hsl;return T[1]-=T[1]*y,this.setValues("hsl",T),this},whiten:function(y){var T=this.values.hwb;return T[1]+=T[1]*y,this.setValues("hwb",T),this},blacken:function(y){var T=this.values.hwb;return T[2]+=T[2]*y,this.setValues("hwb",T),this},greyscale:function(){var y=this.values.rgb,T=.3*y[0]+.59*y[1]+.11*y[2];return this.setValues("rgb",[T,T,T]),this},clearer:function(y){var T=this.values.alpha;return this.setValues("alpha",T-T*y),this},opaquer:function(y){var T=this.values.alpha;return this.setValues("alpha",T+T*y),this},rotate:function(y){var T=this.values.hsl,E=(T[0]+y)%360;return T[0]=E<0?360+E:E,this.setValues("hsl",T),this},mix:function(y,T){var E=y,B=void 0===T?.5:T,U=2*B-1,ne=this.alpha()-E.alpha(),ee=((U*ne==-1?U:(U+ne)/(1+U*ne))+1)/2,ae=1-ee;return this.rgb(ee*this.red()+ae*E.red(),ee*this.green()+ae*E.green(),ee*this.blue()+ae*E.blue()).alpha(this.alpha()*B+E.alpha()*(1-B))},toJSON:function(){return this.rgb()},clone:function(){var y,T,E=new qr,B=this.values,U=E.values;for(var ne in B)B.hasOwnProperty(ne)&&("[object Array]"===(T={}.toString.call(y=B[ne]))?U[ne]=y.slice(0):"[object Number]"===T?U[ne]=y:console.error("unexpected color value:",y));return E}},qr.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},qr.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},qr.prototype.getValues=function(y){for(var T=this.values,E={},B=0;B<y.length;B++)E[y.charAt(B)]=T[y][B];return 1!==T.alpha&&(E.a=T.alpha),E},qr.prototype.setValues=function(y,T){var E,B,U=this.values,ne=this.spaces,ee=this.maxes,ae=1;if(this.valid=!0,"alpha"===y)ae=T;else if(T.length)U[y]=T.slice(0,y.length),ae=T[y.length];else if(void 0!==T[y.charAt(0)]){for(E=0;E<y.length;E++)U[y][E]=T[y.charAt(E)];ae=T.a}else if(void 0!==T[ne[y][0]]){var fe=ne[y];for(E=0;E<y.length;E++)U[y][E]=T[fe[E]];ae=T.alpha}if(U.alpha=Math.max(0,Math.min(1,void 0===ae?U.alpha:ae)),"alpha"===y)return!1;for(E=0;E<y.length;E++)B=Math.max(0,Math.min(ee[y][E],U[y][E])),U[y][E]=Math.round(B);for(var Me in ne)Me!==y&&(U[Me]=ct[y][Me](U[y]));return!0},qr.prototype.setSpace=function(y,T){var E=T[0];return void 0===E?this.getValues(y):("number"==typeof E&&(E=Array.prototype.slice.call(T)),this.setValues(y,E),this)},qr.prototype.setChannel=function(y,T,E){var B=this.values[y];return void 0===E?B[T]:(E===B[T]||(B[T]=E,this.setValues(y,B)),this)},"undefined"!=typeof window&&(window.Color=qr);var ts=qr;function uo(y){return-1===["__proto__","prototype","constructor"].indexOf(y)}var Ur,ho={noop:function(){},uid:(Ur=0,function(){return Ur++}),isNullOrUndef:function(y){return null==y},isArray:function(y){if(Array.isArray&&Array.isArray(y))return!0;var T=Object.prototype.toString.call(y);return"[object"===T.substr(0,7)&&"Array]"===T.substr(-6)},isObject:function(y){return null!==y&&"[object Object]"===Object.prototype.toString.call(y)},isFinite:function(y){return("number"==typeof y||y instanceof Number)&&isFinite(y)},valueOrDefault:function(y,T){return void 0===y?T:y},valueAtIndexOrDefault:function(y,T,E){return ho.valueOrDefault(ho.isArray(y)?y[T]:y,E)},callback:function(y,T,E){if(y&&"function"==typeof y.call)return y.apply(E,T)},each:function(y,T,E,B){var U,ne,ee;if(ho.isArray(y))if(ne=y.length,B)for(U=ne-1;U>=0;U--)T.call(E,y[U],U);else for(U=0;U<ne;U++)T.call(E,y[U],U);else if(ho.isObject(y))for(ne=(ee=Object.keys(y)).length,U=0;U<ne;U++)T.call(E,y[ee[U]],ee[U])},arrayEquals:function(y,T){var E,B,U,ne;if(!y||!T||y.length!==T.length)return!1;for(E=0,B=y.length;E<B;++E)if(ne=T[E],(U=y[E])instanceof Array&&ne instanceof Array){if(!ho.arrayEquals(U,ne))return!1}else if(U!==ne)return!1;return!0},clone:function(y){if(ho.isArray(y))return y.map(ho.clone);if(ho.isObject(y)){for(var T=Object.create(y),E=Object.keys(y),B=E.length,U=0;U<B;++U)T[E[U]]=ho.clone(y[E[U]]);return T}return y},_merger:function(y,T,E,B){if(uo(y)){var U=T[y],ne=E[y];ho.isObject(U)&&ho.isObject(ne)?ho.merge(U,ne,B):T[y]=ho.clone(ne)}},_mergerIf:function(y,T,E){if(uo(y)){var B=T[y],U=E[y];ho.isObject(B)&&ho.isObject(U)?ho.mergeIf(B,U):T.hasOwnProperty(y)||(T[y]=ho.clone(U))}},merge:function(y,T,E){var B,U,ne,ee,ae,fe=ho.isArray(T)?T:[T],Me=fe.length;if(!ho.isObject(y))return y;for(B=(E=E||{}).merger||ho._merger,U=0;U<Me;++U)if(ho.isObject(T=fe[U]))for(ae=0,ee=(ne=Object.keys(T)).length;ae<ee;++ae)B(ne[ae],y,T,E);return y},mergeIf:function(y,T){return ho.merge(y,T,{merger:ho._mergerIf})},extend:Object.assign||function(y){return ho.merge(y,[].slice.call(arguments,1),{merger:function(T,E,B){E[T]=B[T]}})},inherits:function(y){var T=this,E=y&&y.hasOwnProperty("constructor")?y.constructor:function(){return T.apply(this,arguments)},B=function(){this.constructor=E};return B.prototype=T.prototype,E.prototype=new B,E.extend=ho.inherits,y&&ho.extend(E.prototype,y),E.__super__=T.prototype,E},_deprecated:function(y,T,E,B){void 0!==T&&console.warn(y+': "'+E+'" is deprecated. Please use "'+B+'" instead')}},qe=ho;ho.callCallback=ho.callback,ho.indexOf=function(y,T,E){return Array.prototype.indexOf.call(y,T,E)},ho.getValueOrDefault=ho.valueOrDefault,ho.getValueAtIndexOrDefault=ho.valueAtIndexOrDefault;var an={linear:function(y){return y},easeInQuad:function(y){return y*y},easeOutQuad:function(y){return-y*(y-2)},easeInOutQuad:function(y){return(y/=.5)<1?.5*y*y:-.5*(--y*(y-2)-1)},easeInCubic:function(y){return y*y*y},easeOutCubic:function(y){return(y-=1)*y*y+1},easeInOutCubic:function(y){return(y/=.5)<1?.5*y*y*y:.5*((y-=2)*y*y+2)},easeInQuart:function(y){return y*y*y*y},easeOutQuart:function(y){return-((y-=1)*y*y*y-1)},easeInOutQuart:function(y){return(y/=.5)<1?.5*y*y*y*y:-.5*((y-=2)*y*y*y-2)},easeInQuint:function(y){return y*y*y*y*y},easeOutQuint:function(y){return(y-=1)*y*y*y*y+1},easeInOutQuint:function(y){return(y/=.5)<1?.5*y*y*y*y*y:.5*((y-=2)*y*y*y*y+2)},easeInSine:function(y){return 1-Math.cos(y*(Math.PI/2))},easeOutSine:function(y){return Math.sin(y*(Math.PI/2))},easeInOutSine:function(y){return-.5*(Math.cos(Math.PI*y)-1)},easeInExpo:function(y){return 0===y?0:Math.pow(2,10*(y-1))},easeOutExpo:function(y){return 1===y?1:1-Math.pow(2,-10*y)},easeInOutExpo:function(y){return 0===y?0:1===y?1:(y/=.5)<1?.5*Math.pow(2,10*(y-1)):.5*(2-Math.pow(2,-10*--y))},easeInCirc:function(y){return y>=1?y:-(Math.sqrt(1-y*y)-1)},easeOutCirc:function(y){return Math.sqrt(1-(y-=1)*y)},easeInOutCirc:function(y){return(y/=.5)<1?-.5*(Math.sqrt(1-y*y)-1):.5*(Math.sqrt(1-(y-=2)*y)+1)},easeInElastic:function(y){var T=1.70158,E=0,B=1;return 0===y?0:1===y?1:(E||(E=.3),B<1?(B=1,T=E/4):T=E/(2*Math.PI)*Math.asin(1/B),-B*Math.pow(2,10*(y-=1))*Math.sin((y-T)*(2*Math.PI)/E))},easeOutElastic:function(y){var T=1.70158,E=0,B=1;return 0===y?0:1===y?1:(E||(E=.3),B<1?(B=1,T=E/4):T=E/(2*Math.PI)*Math.asin(1/B),B*Math.pow(2,-10*y)*Math.sin((y-T)*(2*Math.PI)/E)+1)},easeInOutElastic:function(y){var T=1.70158,E=0,B=1;return 0===y?0:2==(y/=.5)?1:(E||(E=.45),B<1?(B=1,T=E/4):T=E/(2*Math.PI)*Math.asin(1/B),y<1?B*Math.pow(2,10*(y-=1))*Math.sin((y-T)*(2*Math.PI)/E)*-.5:B*Math.pow(2,-10*(y-=1))*Math.sin((y-T)*(2*Math.PI)/E)*.5+1)},easeInBack:function(y){var T=1.70158;return y*y*((T+1)*y-T)},easeOutBack:function(y){var T=1.70158;return(y-=1)*y*((T+1)*y+T)+1},easeInOutBack:function(y){var T=1.70158;return(y/=.5)<1?y*y*((1+(T*=1.525))*y-T)*.5:.5*((y-=2)*y*((1+(T*=1.525))*y+T)+2)},easeInBounce:function(y){return 1-an.easeOutBounce(1-y)},easeOutBounce:function(y){return y<1/2.75?7.5625*y*y:y<2/2.75?7.5625*(y-=1.5/2.75)*y+.75:y<2.5/2.75?7.5625*(y-=2.25/2.75)*y+.9375:7.5625*(y-=2.625/2.75)*y+.984375},easeInOutBounce:function(y){return y<.5?.5*an.easeInBounce(2*y):.5*an.easeOutBounce(2*y-1)+.5}},ln={effects:an};qe.easingEffects=an;var la=Math.PI,Lt=la/180,Yn=2*la,Jo=la/2,Ir=la/4,Cu=2*la/3,na={clear:function(y){y.ctx.clearRect(0,0,y.width,y.height)},roundedRect:function(y,T,E,B,U,ne){if(ne){var ee=Math.min(ne,U/2,B/2),ae=T+ee,fe=E+ee,Me=T+B-ee,ke=E+U-ee;y.moveTo(T,fe),ae<Me&&fe<ke?(y.arc(ae,fe,ee,-la,-Jo),y.arc(Me,fe,ee,-Jo,0),y.arc(Me,ke,ee,0,Jo),y.arc(ae,ke,ee,Jo,la)):ae<Me?(y.moveTo(ae,E),y.arc(Me,fe,ee,-Jo,Jo),y.arc(ae,fe,ee,Jo,la+Jo)):fe<ke?(y.arc(ae,fe,ee,-la,0),y.arc(ae,ke,ee,0,la)):y.arc(ae,fe,ee,-la,la),y.closePath(),y.moveTo(T,E)}else y.rect(T,E,B,U)},drawPoint:function(y,T,E,B,U,ne){var ee,ae,fe,Me,ke,Fe=(ne||0)*Lt;if(T&&"object"==typeof T&&("[object HTMLImageElement]"===(ee=T.toString())||"[object HTMLCanvasElement]"===ee))return y.save(),y.translate(B,U),y.rotate(Fe),y.drawImage(T,-T.width/2,-T.height/2,T.width,T.height),void y.restore();if(!(isNaN(E)||E<=0)){switch(y.beginPath(),T){default:y.arc(B,U,E,0,Yn),y.closePath();break;case"triangle":y.moveTo(B+Math.sin(Fe)*E,U-Math.cos(Fe)*E),Fe+=Cu,y.lineTo(B+Math.sin(Fe)*E,U-Math.cos(Fe)*E),Fe+=Cu,y.lineTo(B+Math.sin(Fe)*E,U-Math.cos(Fe)*E),y.closePath();break;case"rectRounded":Me=E-(ke=.516*E),ae=Math.cos(Fe+Ir)*Me,fe=Math.sin(Fe+Ir)*Me,y.arc(B-ae,U-fe,ke,Fe-la,Fe-Jo),y.arc(B+fe,U-ae,ke,Fe-Jo,Fe),y.arc(B+ae,U+fe,ke,Fe,Fe+Jo),y.arc(B-fe,U+ae,ke,Fe+Jo,Fe+la),y.closePath();break;case"rect":if(!ne){Me=Math.SQRT1_2*E,y.rect(B-Me,U-Me,2*Me,2*Me);break}Fe+=Ir;case"rectRot":ae=Math.cos(Fe)*E,fe=Math.sin(Fe)*E,y.moveTo(B-ae,U-fe),y.lineTo(B+fe,U-ae),y.lineTo(B+ae,U+fe),y.lineTo(B-fe,U+ae),y.closePath();break;case"crossRot":Fe+=Ir;case"cross":ae=Math.cos(Fe)*E,fe=Math.sin(Fe)*E,y.moveTo(B-ae,U-fe),y.lineTo(B+ae,U+fe),y.moveTo(B+fe,U-ae),y.lineTo(B-fe,U+ae);break;case"star":ae=Math.cos(Fe)*E,fe=Math.sin(Fe)*E,y.moveTo(B-ae,U-fe),y.lineTo(B+ae,U+fe),y.moveTo(B+fe,U-ae),y.lineTo(B-fe,U+ae),Fe+=Ir,ae=Math.cos(Fe)*E,fe=Math.sin(Fe)*E,y.moveTo(B-ae,U-fe),y.lineTo(B+ae,U+fe),y.moveTo(B+fe,U-ae),y.lineTo(B-fe,U+ae);break;case"line":ae=Math.cos(Fe)*E,fe=Math.sin(Fe)*E,y.moveTo(B-ae,U-fe),y.lineTo(B+ae,U+fe);break;case"dash":y.moveTo(B,U),y.lineTo(B+Math.cos(Fe)*E,U+Math.sin(Fe)*E)}y.fill(),y.stroke()}},_isPointInArea:function(y,T){return y.x>T.left-1e-6&&y.x<T.right+1e-6&&y.y>T.top-1e-6&&y.y<T.bottom+1e-6},clipArea:function(y,T){y.save(),y.beginPath(),y.rect(T.left,T.top,T.right-T.left,T.bottom-T.top),y.clip()},unclipArea:function(y){y.restore()},lineTo:function(y,T,E,B){var U=E.steppedLine;if(U){if("middle"===U){var ne=(T.x+E.x)/2;y.lineTo(ne,B?E.y:T.y),y.lineTo(ne,B?T.y:E.y)}else"after"===U&&!B||"after"!==U&&B?y.lineTo(T.x,E.y):y.lineTo(E.x,T.y);y.lineTo(E.x,E.y)}else E.tension?y.bezierCurveTo(B?T.controlPointPreviousX:T.controlPointNextX,B?T.controlPointPreviousY:T.controlPointNextY,B?E.controlPointNextX:E.controlPointPreviousX,B?E.controlPointNextY:E.controlPointPreviousY,E.x,E.y):y.lineTo(E.x,E.y)}},nn=na;qe.clear=na.clear,qe.drawRoundedRectangle=function(y){y.beginPath(),na.roundedRect.apply(na,arguments)};var Ce={_set:function(y,T){return qe.merge(this[y]||(this[y]={}),T)}};Ce._set("global",{defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",defaultLineHeight:1.2,showLines:!0});var mt=Ce,Pn=qe.valueOrDefault,yo={toLineHeight:function(y,T){var E=(""+y).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!E||"normal"===E[1])return 1.2*T;switch(y=+E[2],E[3]){case"px":return y;case"%":y/=100}return T*y},toPadding:function(y){var T,E,B,U;return qe.isObject(y)?(T=+y.top||0,E=+y.right||0,B=+y.bottom||0,U=+y.left||0):T=E=B=U=+y||0,{top:T,right:E,bottom:B,left:U,height:T+B,width:U+E}},_parseFont:function(y){var U,T=mt.global,E=Pn(y.fontSize,T.defaultFontSize),B={family:Pn(y.fontFamily,T.defaultFontFamily),lineHeight:qe.options.toLineHeight(Pn(y.lineHeight,T.defaultLineHeight),E),size:E,style:Pn(y.fontStyle,T.defaultFontStyle),weight:null,string:""};return B.string=!(U=B)||qe.isNullOrUndef(U.size)||qe.isNullOrUndef(U.family)?null:(U.style?U.style+" ":"")+(U.weight?U.weight+" ":"")+U.size+"px "+U.family,B},resolve:function(y,T,E,B){var U,ne,ee,ae=!0;for(U=0,ne=y.length;U<ne;++U)if(void 0!==(ee=y[U])&&(void 0!==T&&"function"==typeof ee&&(ee=ee(T),ae=!1),void 0!==E&&qe.isArray(ee)&&(ee=ee[E],ae=!1),void 0!==ee))return B&&!ae&&(B.cacheable=!1),ee}},Yi={_factorize:function(y){var T,E=[],B=Math.sqrt(y);for(T=1;T<B;T++)y%T==0&&(E.push(T),E.push(y/T));return B===(0|B)&&E.push(B),E.sort(function(U,ne){return U-ne}).pop(),E},log10:Math.log10||function(y){var T=Math.log(y)*Math.LOG10E,E=Math.round(T);return y===Math.pow(10,E)?E:T}},rr=Yi;qe.log10=Yi.log10;var De=qe,Ue=nn,yr=yo,ir=rr;De.easing=ln,De.canvas=Ue,De.options=yr,De.math=ir,De.rtl={getRtlAdapter:function(y,T,E){return y?(B=T,U=E,{x:function(ne){return B+B+U-ne},setWidth:function(ne){U=ne},textAlign:function(ne){return"center"===ne?ne:"right"===ne?"left":"right"},xPlus:function(ne,ee){return ne-ee},leftForLtr:function(ne,ee){return ne-ee}}):{x:function(B){return B},setWidth:function(B){},textAlign:function(B){return B},xPlus:function(B,U){return B+U},leftForLtr:function(B,U){return B}};var B,U},overrideTextDirection:function(y,T){var E,B;"ltr"!==T&&"rtl"!==T||(B=[(E=y.canvas.style).getPropertyValue("direction"),E.getPropertyPriority("direction")],E.setProperty("direction",T,"important"),y.prevTextDirection=B)},restoreTextDirection:function(y){var T=y.prevTextDirection;void 0!==T&&(delete y.prevTextDirection,y.canvas.style.setProperty("direction",T[0],T[1]))}};var gr=function(y){De.extend(this,y),this.initialize.apply(this,arguments)};De.extend(gr.prototype,{_type:void 0,initialize:function(){this.hidden=!1},pivot:function(){var y=this;return y._view||(y._view=De.extend({},y._model)),y._start={},y},transition:function(y){var T=this,E=T._model,B=T._start,U=T._view;return E&&1!==y?(U||(U=T._view={}),B||(B=T._start={}),function(ne,ee,ae,fe){var Me,ke,Fe,Ze,ot,rt,Ct,Vt,Wn,An=Object.keys(ae);for(Me=0,ke=An.length;Me<ke;++Me)if(rt=ae[Fe=An[Me]],ee.hasOwnProperty(Fe)||(ee[Fe]=rt),(Ze=ee[Fe])!==rt&&"_"!==Fe[0]){if(ne.hasOwnProperty(Fe)||(ne[Fe]=Ze),(Ct=typeof rt)==typeof(ot=ne[Fe]))if("string"===Ct){if((Vt=ts(ot)).valid&&(Wn=ts(rt)).valid){ee[Fe]=Wn.mix(Vt,fe).rgbString();continue}}else if(De.isFinite(ot)&&De.isFinite(rt)){ee[Fe]=ot+(rt-ot)*fe;continue}ee[Fe]=rt}}(B,U,E,y),T):(T._view=De.extend({},E),T._start=null,T)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return De.isNumber(this._model.x)&&De.isNumber(this._model.y)}}),gr.extend=De.inherits;var wr=gr,Mu=wr.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),ca=Mu;Object.defineProperty(Mu.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(Mu.prototype,"chartInstance",{get:function(){return this.chart},set:function(y){this.chart=y}}),mt._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:De.noop,onComplete:De.noop}});var ku={animations:[],request:null,addAnimation:function(y,T,E,B){var U,ne,ee=this.animations;for(T.chart=y,T.startTime=Date.now(),T.duration=E,B||(y.animating=!0),U=0,ne=ee.length;U<ne;++U)if(ee[U].chart===y)return void(ee[U]=T);ee.push(T),1===ee.length&&this.requestAnimationFrame()},cancelAnimation:function(y){var T=De.findIndex(this.animations,function(E){return E.chart===y});-1!==T&&(this.animations.splice(T,1),y.animating=!1)},requestAnimationFrame:function(){var y=this;null===y.request&&(y.request=De.requestAnimFrame.call(window,function(){y.request=null,y.startDigest()}))},startDigest:function(){this.advance(),this.animations.length>0&&this.requestAnimationFrame()},advance:function(){for(var y,T,E,B,U=this.animations,ne=0;ne<U.length;)T=(y=U[ne]).chart,E=y.numSteps,B=Math.floor((Date.now()-y.startTime)/y.duration*E)+1,y.currentStep=Math.min(B,E),De.callback(y.render,[T,y],T),De.callback(y.onAnimationProgress,[y],T),y.currentStep>=E?(De.callback(y.onAnimationComplete,[y],T),T.animating=!1,U.splice(ne,1)):++ne}},sn=De.options.resolve,Ht=["push","pop","shift","splice","unshift"];function On(y,T){var E=y._chartjs;if(E){var B=E.listeners,U=B.indexOf(T);-1!==U&&B.splice(U,1),B.length>0||(Ht.forEach(function(ne){delete y[ne]}),delete y._chartjs)}}var wn=function(y,T){this.initialize(y,T)};De.extend(wn.prototype,{datasetElementType:null,dataElementType:null,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth"],_dataElementOptions:["backgroundColor","borderColor","borderWidth","pointStyle"],initialize:function(y,T){var E=this;E.chart=y,E.index=T,E.linkScales(),E.addElements(),E._type=E.getMeta().type},updateIndex:function(y){this.index=y},linkScales:function(){var y=this.getMeta(),T=this.chart,E=T.scales,B=this.getDataset(),U=T.options.scales;null!==y.xAxisID&&y.xAxisID in E&&!B.xAxisID||(y.xAxisID=B.xAxisID||U.xAxes[0].id),null!==y.yAxisID&&y.yAxisID in E&&!B.yAxisID||(y.yAxisID=B.yAxisID||U.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(y){return this.chart.scales[y]},_getValueScaleId:function(){return this.getMeta().yAxisID},_getIndexScaleId:function(){return this.getMeta().xAxisID},_getValueScale:function(){return this.getScaleForId(this._getValueScaleId())},_getIndexScale:function(){return this.getScaleForId(this._getIndexScaleId())},reset:function(){this._update(!0)},destroy:function(){this._data&&On(this._data,this)},createMetaDataset:function(){var y=this.datasetElementType;return y&&new y({_chart:this.chart,_datasetIndex:this.index})},createMetaData:function(y){var T=this.dataElementType;return T&&new T({_chart:this.chart,_datasetIndex:this.index,_index:y})},addElements:function(){var y,T,E=this.getMeta(),B=this.getDataset().data||[],U=E.data;for(y=0,T=B.length;y<T;++y)U[y]=U[y]||this.createMetaData(y);E.dataset=E.dataset||this.createMetaDataset()},addElementAndReset:function(y){var T=this.createMetaData(y);this.getMeta().data.splice(y,0,T),this.updateElement(T,y,!0)},buildOrUpdateElements:function(){var y,T,E=this,B=E.getDataset(),U=B.data||(B.data=[]);E._data!==U&&(E._data&&On(E._data,E),U&&Object.isExtensible(U)&&(T=E,(y=U)._chartjs?y._chartjs.listeners.push(T):(Object.defineProperty(y,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[T]}}),Ht.forEach(function(ne){var ee="onData"+ne.charAt(0).toUpperCase()+ne.slice(1),ae=y[ne];Object.defineProperty(y,ne,{configurable:!0,enumerable:!1,value:function(){var fe=Array.prototype.slice.call(arguments),Me=ae.apply(this,fe);return De.each(y._chartjs.listeners,function(ke){"function"==typeof ke[ee]&&ke[ee].apply(ke,fe)}),Me}})}))),E._data=U),E.resyncElements()},_configure:function(){this._config=De.merge(Object.create(null),[this.chart.options.datasets[this._type],this.getDataset()],{merger:function(y,T,E){"_meta"!==y&&"data"!==y&&De._merger(y,T,E)}})},_update:function(y){this._configure(),this._cachedDataOpts=null,this.update(y)},update:De.noop,transition:function(y){for(var T=this.getMeta(),E=T.data||[],B=E.length,U=0;U<B;++U)E[U].transition(y);T.dataset&&T.dataset.transition(y)},draw:function(){var y=this.getMeta(),T=y.data||[],E=T.length,B=0;for(y.dataset&&y.dataset.draw();B<E;++B)T[B].draw()},getStyle:function(y){var T,E=this.getMeta(),B=E.dataset;return this._configure(),!1!==(T=B&&void 0===y?this._resolveDatasetElementOptions(B||{}):this._resolveDataElementOptions(E.data[y=y||0]||{},y)).fill&&null!==T.fill||(T.backgroundColor=T.borderColor),T},_resolveDatasetElementOptions:function(y,T){var E,B,U,ne,ee=this,ae=ee.chart,fe=ee._config,Me=y.custom||{},ke=ae.options.elements[ee.datasetElementType.prototype._type]||{},Fe=ee._datasetElementOptions,Ze={},ot={chart:ae,dataset:ee.getDataset(),datasetIndex:ee.index,hover:T};for(E=0,B=Fe.length;E<B;++E)U=Fe[E],ne=T?"hover"+U.charAt(0).toUpperCase()+U.slice(1):U,Ze[U]=sn([Me[ne],fe[ne],ke[ne]],ot);return Ze},_resolveDataElementOptions:function(y,T){var E=this,B=y&&y.custom,U=E._cachedDataOpts;if(U&&!B)return U;var ne,ee,ae,fe,Me=E.chart,ke=E._config,Fe=Me.options.elements[E.dataElementType.prototype._type]||{},Ze=E._dataElementOptions,ot={},rt={chart:Me,dataIndex:T,dataset:E.getDataset(),datasetIndex:E.index},Ct={cacheable:!B};if(B=B||{},De.isArray(Ze))for(ee=0,ae=Ze.length;ee<ae;++ee)ot[fe=Ze[ee]]=sn([B[fe],ke[fe],Fe[fe]],rt,T,Ct);else for(ee=0,ae=(ne=Object.keys(Ze)).length;ee<ae;++ee)ot[fe=ne[ee]]=sn([B[fe],ke[Ze[fe]],ke[fe],Fe[fe]],rt,T,Ct);return Ct.cacheable&&(E._cachedDataOpts=Object.freeze(ot)),ot},removeHoverStyle:function(y){De.merge(y._model,y.$previousStyle||{}),delete y.$previousStyle},setHoverStyle:function(y){var T=this.chart.data.datasets[y._datasetIndex],E=y._index,B=y.custom||{},U=y._model,ne=De.getHoverColor;y.$previousStyle={backgroundColor:U.backgroundColor,borderColor:U.borderColor,borderWidth:U.borderWidth},U.backgroundColor=sn([B.hoverBackgroundColor,T.hoverBackgroundColor,ne(U.backgroundColor)],void 0,E),U.borderColor=sn([B.hoverBorderColor,T.hoverBorderColor,ne(U.borderColor)],void 0,E),U.borderWidth=sn([B.hoverBorderWidth,T.hoverBorderWidth,U.borderWidth],void 0,E)},_removeDatasetHoverStyle:function(){var y=this.getMeta().dataset;y&&this.removeHoverStyle(y)},_setDatasetHoverStyle:function(){var y,T,E,B,U,ne,ee=this.getMeta().dataset,ae={};if(ee){for(ne=ee._model,U=this._resolveDatasetElementOptions(ee,!0),y=0,T=(B=Object.keys(U)).length;y<T;++y)ae[E=B[y]]=ne[E],ne[E]=U[E];ee.$previousStyle=ae}},resyncElements:function(){var y=this.getMeta(),T=this.getDataset().data,E=y.data.length,B=T.length;B<E?y.data.splice(B,E-B):B>E&&this.insertElements(E,B-E)},insertElements:function(y,T){for(var E=0;E<T;++E)this.addElementAndReset(y+E)},onDataPush:function(){var y=arguments.length;this.insertElements(this.getDataset().data.length-y,y)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(y,T){this.getMeta().data.splice(y,T),this.insertElements(y,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),wn.extend=De.inherits;var Hn=wn,un=2*Math.PI;function rn(y,T){var E=T.startAngle,B=T.endAngle,U=T.pixelMargin,ne=U/T.outerRadius,ee=T.x,ae=T.y;y.beginPath(),y.arc(ee,ae,T.outerRadius,E-ne,B+ne),T.innerRadius>U?y.arc(ee,ae,T.innerRadius-U,B+(ne=U/T.innerRadius),E-ne,!0):y.arc(ee,ae,U,B+Math.PI/2,E-Math.PI/2),y.closePath(),y.clip()}mt._set("global",{elements:{arc:{backgroundColor:mt.global.defaultColor,borderColor:"#fff",borderWidth:2,borderAlign:"center"}}});var Sr=wr.extend({_type:"arc",inLabelRange:function(y){var T=this._view;return!!T&&Math.pow(y-T.x,2)<Math.pow(T.radius+T.hoverRadius,2)},inRange:function(y,T){var E=this._view;if(E){for(var B=De.getAngleFromPoint(E,{x:y,y:T}),U=B.angle,ne=B.distance,ee=E.startAngle,ae=E.endAngle;ae<ee;)ae+=un;for(;U>ae;)U-=un;for(;U<ee;)U+=un;return U>=ee&&U<=ae&&ne>=E.innerRadius&&ne<=E.outerRadius}return!1},getCenterPoint:function(){var y=this._view,T=(y.startAngle+y.endAngle)/2,E=(y.innerRadius+y.outerRadius)/2;return{x:y.x+Math.cos(T)*E,y:y.y+Math.sin(T)*E}},getArea:function(){var y=this._view;return Math.PI*((y.endAngle-y.startAngle)/(2*Math.PI))*(Math.pow(y.outerRadius,2)-Math.pow(y.innerRadius,2))},tooltipPosition:function(){var y=this._view,T=y.startAngle+(y.endAngle-y.startAngle)/2,E=(y.outerRadius-y.innerRadius)/2+y.innerRadius;return{x:y.x+Math.cos(T)*E,y:y.y+Math.sin(T)*E}},draw:function(){var y,T=this._chart.ctx,E=this._view,B="inner"===E.borderAlign?.33:0,U={x:E.x,y:E.y,innerRadius:E.innerRadius,outerRadius:Math.max(E.outerRadius-B,0),pixelMargin:B,startAngle:E.startAngle,endAngle:E.endAngle,fullCircles:Math.floor(E.circumference/un)};if(T.save(),T.fillStyle=E.backgroundColor,T.strokeStyle=E.borderColor,U.fullCircles){for(U.endAngle=U.startAngle+un,T.beginPath(),T.arc(U.x,U.y,U.outerRadius,U.startAngle,U.endAngle),T.arc(U.x,U.y,U.innerRadius,U.endAngle,U.startAngle,!0),T.closePath(),y=0;y<U.fullCircles;++y)T.fill();U.endAngle=U.startAngle+E.circumference%un}T.beginPath(),T.arc(U.x,U.y,U.outerRadius,U.startAngle,U.endAngle),T.arc(U.x,U.y,U.innerRadius,U.endAngle,U.startAngle,!0),T.closePath(),T.fill(),E.borderWidth&&function zo(y,T,E){var B="inner"===T.borderAlign;B?(y.lineWidth=2*T.borderWidth,y.lineJoin="round"):(y.lineWidth=T.borderWidth,y.lineJoin="bevel"),E.fullCircles&&function(U,ne,ee,ae){var fe,Me=ee.endAngle;for(ae&&(ee.endAngle=ee.startAngle+un,rn(U,ee),ee.endAngle=Me,ee.endAngle===ee.startAngle&&ee.fullCircles&&(ee.endAngle+=un,ee.fullCircles--)),U.beginPath(),U.arc(ee.x,ee.y,ee.innerRadius,ee.startAngle+un,ee.startAngle,!0),fe=0;fe<ee.fullCircles;++fe)U.stroke();for(U.beginPath(),U.arc(ee.x,ee.y,ne.outerRadius,ee.startAngle,ee.startAngle+un),fe=0;fe<ee.fullCircles;++fe)U.stroke()}(y,T,E,B),B&&rn(y,E),y.beginPath(),y.arc(E.x,E.y,T.outerRadius,E.startAngle,E.endAngle),y.arc(E.x,E.y,E.innerRadius,E.endAngle,E.startAngle,!0),y.closePath(),y.stroke()}(T,E,U),T.restore()}}),Ao=De.valueOrDefault,ki=mt.global.defaultColor;mt._set("global",{elements:{line:{tension:.4,backgroundColor:ki,borderWidth:3,borderColor:ki,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}});var ns=wr.extend({_type:"line",draw:function(){var y,T,E,B=this,U=B._view,ne=B._chart.ctx,ee=U.spanGaps,ae=B._children.slice(),fe=mt.global,Me=fe.elements.line,ke=-1,Fe=B._loop;if(ae.length){if(B._loop){for(y=0;y<ae.length;++y)if(T=De.previousItem(ae,y),!ae[y]._view.skip&&T._view.skip){ae=ae.slice(y).concat(ae.slice(0,y)),Fe=ee;break}Fe&&ae.push(ae[0])}for(ne.save(),ne.lineCap=U.borderCapStyle||Me.borderCapStyle,ne.setLineDash&&ne.setLineDash(U.borderDash||Me.borderDash),ne.lineDashOffset=Ao(U.borderDashOffset,Me.borderDashOffset),ne.lineJoin=U.borderJoinStyle||Me.borderJoinStyle,ne.lineWidth=Ao(U.borderWidth,Me.borderWidth),ne.strokeStyle=U.borderColor||fe.defaultColor,ne.beginPath(),(E=ae[0]._view).skip||(ne.moveTo(E.x,E.y),ke=0),y=1;y<ae.length;++y)E=ae[y]._view,T=-1===ke?De.previousItem(ae,y):ae[ke],E.skip||(ke!==y-1&&!ee||-1===ke?ne.moveTo(E.x,E.y):De.canvas.lineTo(ne,T._view,E),ke=y);Fe&&ne.closePath(),ne.stroke(),ne.restore()}}}),ni=De.valueOrDefault,Fu=mt.global.defaultColor;function rs(y){var T=this._view;return!!T&&Math.abs(y-T.x)<T.radius+T.hitRadius}mt._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:Fu,borderColor:Fu,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}});var Ys=wr.extend({_type:"point",inRange:function(y,T){var E=this._view;return!!E&&Math.pow(y-E.x,2)+Math.pow(T-E.y,2)<Math.pow(E.hitRadius+E.radius,2)},inLabelRange:rs,inXRange:rs,inYRange:function(y){var T=this._view;return!!T&&Math.abs(y-T.y)<T.radius+T.hitRadius},getCenterPoint:function(){var y=this._view;return{x:y.x,y:y.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var y=this._view;return{x:y.x,y:y.y,padding:y.radius+y.borderWidth}},draw:function(y){var T=this._view,E=this._chart.ctx,B=T.pointStyle,U=T.rotation,ne=T.radius,ee=T.x,ae=T.y,fe=mt.global,Me=fe.defaultColor;T.skip||(void 0===y||De.canvas._isPointInArea(T,y))&&(E.strokeStyle=T.borderColor||Me,E.lineWidth=ni(T.borderWidth,fe.elements.point.borderWidth),E.fillStyle=T.backgroundColor||Me,De.canvas.drawPoint(E,B,ne,ee,ae,U))}}),Ts=mt.global.defaultColor;function Or(y){return y&&void 0!==y.width}function $(y){var T,E,B,U,ne;return Or(y)?(T=y.x-(ne=y.width/2),E=y.x+ne,B=Math.min(y.y,y.base),U=Math.max(y.y,y.base)):(ne=y.height/2,T=Math.min(y.x,y.base),E=Math.max(y.x,y.base),B=y.y-ne,U=y.y+ne),{left:T,top:B,right:E,bottom:U}}function El(y,T,E){return y===T?E:y===E?T:y}function br(y,T,E){var B=null===T,U=null===E,ne=!(!y||B&&U)&&$(y);return ne&&(B||T>=ne.left&&T<=ne.right)&&(U||E>=ne.top&&E<=ne.bottom)}mt._set("global",{elements:{rectangle:{backgroundColor:Ts,borderColor:Ts,borderSkipped:"bottom",borderWidth:0}}});var Fo=wr.extend({_type:"rectangle",draw:function(){var ne,ee,ae,fe,Me,y=this._chart.ctx,T=this._view,E=(ee=$(ne=T),Me=function su(y,T,E){var B,U,ne,ee,Me,ke,Fe,ae=y.borderWidth,fe=(Fe={},(ke=(Me=y).borderSkipped)&&(Me.horizontal?Me.base>Me.x&&(ke=El(ke,"left","right")):Me.base<Me.y&&(ke=El(ke,"bottom","top")),Fe[ke]=!0),Fe);return De.isObject(ae)?(B=+ae.top||0,U=+ae.right||0,ne=+ae.bottom||0,ee=+ae.left||0):B=U=ne=ee=+ae||0,{t:fe.top||B<0?0:B>E?E:B,r:fe.right||U<0?0:U>T?T:U,b:fe.bottom||ne<0?0:ne>E?E:ne,l:fe.left||ee<0?0:ee>T?T:ee}}(ne,(ae=ee.right-ee.left)/2,(fe=ee.bottom-ee.top)/2),{outer:{x:ee.left,y:ee.top,w:ae,h:fe},inner:{x:ee.left+Me.l,y:ee.top+Me.t,w:ae-Me.l-Me.r,h:fe-Me.t-Me.b}}),B=E.outer,U=E.inner;y.fillStyle=T.backgroundColor,y.fillRect(B.x,B.y,B.w,B.h),B.w===U.w&&B.h===U.h||(y.save(),y.beginPath(),y.rect(B.x,B.y,B.w,B.h),y.clip(),y.fillStyle=T.borderColor,y.rect(U.x,U.y,U.w,U.h),y.fill("evenodd"),y.restore())},height:function(){var y=this._view;return y.base-y.y},inRange:function(y,T){return br(this._view,y,T)},inLabelRange:function(y,T){var E=this._view;return Or(E)?br(E,y,null):br(E,null,T)},inXRange:function(y){return br(this._view,y,null)},inYRange:function(y){return br(this._view,null,y)},getCenterPoint:function(){var y,T,E=this._view;return Or(E)?(y=E.x,T=(E.y+E.base)/2):(y=(E.x+E.base)/2,T=E.y),{x:y,y:T}},getArea:function(){var y=this._view;return Or(y)?y.width*Math.abs(y.y-y.base):y.height*Math.abs(y.x-y.base)},tooltipPosition:function(){var y=this._view;return{x:y.x,y:y.y}}}),Tr={},ra=ns,po=Ys,Vu=Fo;Tr.Arc=Sr,Tr.Line=ra,Tr.Point=po,Tr.Rectangle=Vu;var hr=De._deprecated,Ot=De.valueOrDefault;mt._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),mt._set("global",{datasets:{bar:{categoryPercentage:.8,barPercentage:.9}}});var Ke=Hn.extend({dataElementType:Tr.Rectangle,_dataElementOptions:["backgroundColor","borderColor","borderSkipped","borderWidth","barPercentage","barThickness","categoryPercentage","maxBarThickness","minBarLength"],initialize:function(){var y,T,E=this;Hn.prototype.initialize.apply(E,arguments),(y=E.getMeta()).stack=E.getDataset().stack,y.bar=!0,T=E._getIndexScale().options,hr("bar chart",T.barPercentage,"scales.[x/y]Axes.barPercentage","dataset.barPercentage"),hr("bar chart",T.barThickness,"scales.[x/y]Axes.barThickness","dataset.barThickness"),hr("bar chart",T.categoryPercentage,"scales.[x/y]Axes.categoryPercentage","dataset.categoryPercentage"),hr("bar chart",E._getValueScale().options.minBarLength,"scales.[x/y]Axes.minBarLength","dataset.minBarLength"),hr("bar chart",T.maxBarThickness,"scales.[x/y]Axes.maxBarThickness","dataset.maxBarThickness")},update:function(y){var T,E,B=this.getMeta().data;for(this._ruler=this.getRuler(),T=0,E=B.length;T<E;++T)this.updateElement(B[T],T,y)},updateElement:function(y,T,E){var B=this,U=B.getMeta(),ne=B.getDataset(),ee=B._resolveDataElementOptions(y,T);y._xScale=B.getScaleForId(U.xAxisID),y._yScale=B.getScaleForId(U.yAxisID),y._datasetIndex=B.index,y._index=T,y._model={backgroundColor:ee.backgroundColor,borderColor:ee.borderColor,borderSkipped:ee.borderSkipped,borderWidth:ee.borderWidth,datasetLabel:ne.label,label:B.chart.data.labels[T]},De.isArray(ne.data[T])&&(y._model.borderSkipped=null),B._updateElementGeometry(y,T,E,ee),y.pivot()},_updateElementGeometry:function(y,T,E,B){var U=this,ne=y._model,ee=U._getValueScale(),ae=ee.getBasePixel(),fe=ee.isHorizontal(),Me=U._ruler||U.getRuler(),ke=U.calculateBarValuePixels(U.index,T,B),Fe=U.calculateBarIndexPixels(U.index,T,Me,B);ne.horizontal=fe,ne.base=E?ae:ke.base,ne.x=fe?E?ae:ke.head:Fe.center,ne.y=fe?Fe.center:E?ae:ke.head,ne.height=fe?Fe.size:void 0,ne.width=fe?void 0:Fe.size},_getStacks:function(y){var T,E,B=this._getIndexScale(),U=B._getMatchingVisibleMetas(this._type),ne=B.options.stacked,ee=U.length,ae=[];for(T=0;T<ee&&(E=U[T],(!1===ne||-1===ae.indexOf(E.stack)||void 0===ne&&void 0===E.stack)&&ae.push(E.stack),E.index!==y);++T);return ae},getStackCount:function(){return this._getStacks().length},getStackIndex:function(y,T){var E=this._getStacks(y),B=void 0!==T?E.indexOf(T):-1;return-1===B?E.length-1:B},getRuler:function(){var y,T,E=this._getIndexScale(),B=[];for(y=0,T=this.getMeta().data.length;y<T;++y)B.push(E.getPixelForValue(null,y,this.index));return{pixels:B,start:E._startPixel,end:E._endPixel,stackCount:this.getStackCount(),scale:E}},calculateBarValuePixels:function(y,T,E){var B,U,ne,ee,ae,fe,Me,ke=this.chart,Fe=this._getValueScale(),Ze=Fe.isHorizontal(),ot=ke.data.datasets,rt=Fe._getMatchingVisibleMetas(this._type),Ct=Fe._parseValue(ot[y].data[T]),Vt=E.minBarLength,Wn=Fe.options.stacked,An=this.getMeta().stack,Un=void 0===Ct.start?0:Ct.max>=0&&Ct.min>=0?Ct.min:Ct.max,$n=void 0===Ct.start?Ct.end:Ct.max>=0&&Ct.min>=0?Ct.max-Ct.min:Ct.min-Ct.max,fr=rt.length;if(Wn||void 0===Wn&&void 0!==An)for(B=0;B<fr&&(U=rt[B]).index!==y;++B)U.stack===An&&(ne=void 0===(Me=Fe._parseValue(ot[U.index].data[T])).start?Me.end:Me.min>=0&&Me.max>=0?Me.max:Me.min,(Ct.min<0&&ne<0||Ct.max>=0&&ne>0)&&(Un+=ne));return ee=Fe.getPixelForValue(Un),fe=(ae=Fe.getPixelForValue(Un+$n))-ee,void 0!==Vt&&Math.abs(fe)<Vt&&(fe=Vt,ae=$n>=0&&!Ze||$n<0&&Ze?ee-Vt:ee+Vt),{size:fe,base:ee,head:ae,center:ae+fe/2}},calculateBarIndexPixels:function(y,T,E,B){var fe,Me,ke,Fe,Ze,ot,rt,Ct,Vt,U="flex"===B.barThickness?(ot=(Ze=(Me=E).pixels)[fe=T],Ct=fe<Ze.length-1?Ze[fe+1]:null,Vt=(ke=B).categoryPercentage,null===(rt=fe>0?Ze[fe-1]:null)&&(rt=ot-(null===Ct?Me.end-Me.start:Ct-ot)),null===Ct&&(Ct=ot+ot-rt),Fe=ot-(ot-Math.min(rt,Ct))/2*Vt,{chunk:Math.abs(Ct-rt)/2*Vt/Me.stackCount,ratio:ke.barPercentage,start:Fe}):function Dn(y,T,E){var B,U,ne=E.barThickness,ee=T.stackCount,ae=T.pixels[y],fe=De.isNullOrUndef(ne)?function(Me,ke){var Fe,Ze,ot,rt,Ct=Me._length;for(ot=1,rt=ke.length;ot<rt;++ot)Ct=Math.min(Ct,Math.abs(ke[ot]-ke[ot-1]));for(ot=0,rt=Me.getTicks().length;ot<rt;++ot)Ze=Me.getPixelForTick(ot),Ct=ot>0?Math.min(Ct,Math.abs(Ze-Fe)):Ct,Fe=Ze;return Ct}(T.scale,T.pixels):-1;return De.isNullOrUndef(ne)?(B=fe*E.categoryPercentage,U=E.barPercentage):(B=ne*ee,U=1),{chunk:B/ee,ratio:U,start:ae-B/2}}(T,E,B),ne=this.getStackIndex(y,this.getMeta().stack),ee=U.start+U.chunk*ne+U.chunk/2,ae=Math.min(Ot(B.maxBarThickness,1/0),U.chunk*U.ratio);return{base:ee-ae/2,head:ee+ae/2,center:ee,size:ae}},draw:function(){var y=this.chart,T=this._getValueScale(),E=this.getMeta().data,B=this.getDataset(),U=E.length,ne=0;for(De.canvas.clipArea(y.ctx,y.chartArea);ne<U;++ne){var ee=T._parseValue(B.data[ne]);isNaN(ee.min)||isNaN(ee.max)||E[ne].draw()}De.canvas.unclipArea(y.ctx)},_resolveDataElementOptions:function(){var y=this,T=De.extend({},Hn.prototype._resolveDataElementOptions.apply(y,arguments)),E=y._getIndexScale().options,B=y._getValueScale().options;return T.barPercentage=Ot(E.barPercentage,T.barPercentage),T.barThickness=Ot(E.barThickness,T.barThickness),T.categoryPercentage=Ot(E.categoryPercentage,T.categoryPercentage),T.maxBarThickness=Ot(E.maxBarThickness,T.maxBarThickness),T.minBarLength=Ot(B.minBarLength,T.minBarLength),T}}),bt=De.valueOrDefault,it=De.options.resolve;mt._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(y,T){return(T.datasets[y.datasetIndex].label||"")+": ("+y.xLabel+", "+y.yLabel+", "+T.datasets[y.datasetIndex].data[y.index].r+")"}}}});var qt=Hn.extend({dataElementType:Tr.Point,_dataElementOptions:["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle","rotation"],update:function(y){var T=this,E=T.getMeta().data;De.each(E,function(B,U){T.updateElement(B,U,y)})},updateElement:function(y,T,E){var B=this,U=B.getMeta(),ne=y.custom||{},ee=B.getScaleForId(U.xAxisID),ae=B.getScaleForId(U.yAxisID),fe=B._resolveDataElementOptions(y,T),Me=B.getDataset().data[T],ke=B.index,Fe=E?ee.getPixelForDecimal(.5):ee.getPixelForValue("object"==typeof Me?Me:NaN,T,ke),Ze=E?ae.getBasePixel():ae.getPixelForValue(Me,T,ke);y._xScale=ee,y._yScale=ae,y._options=fe,y._datasetIndex=ke,y._index=T,y._model={backgroundColor:fe.backgroundColor,borderColor:fe.borderColor,borderWidth:fe.borderWidth,hitRadius:fe.hitRadius,pointStyle:fe.pointStyle,rotation:fe.rotation,radius:E?0:fe.radius,skip:ne.skip||isNaN(Fe)||isNaN(Ze),x:Fe,y:Ze},y.pivot()},setHoverStyle:function(y){var T=y._model,E=y._options,B=De.getHoverColor;y.$previousStyle={backgroundColor:T.backgroundColor,borderColor:T.borderColor,borderWidth:T.borderWidth,radius:T.radius},T.backgroundColor=bt(E.hoverBackgroundColor,B(E.backgroundColor)),T.borderColor=bt(E.hoverBorderColor,B(E.borderColor)),T.borderWidth=bt(E.hoverBorderWidth,E.borderWidth),T.radius=E.radius+E.hoverRadius},_resolveDataElementOptions:function(y,T){var E=this,B=E.chart,U=E.getDataset(),ne=y.custom||{},ee=U.data[T]||{},ae=Hn.prototype._resolveDataElementOptions.apply(E,arguments),fe={chart:B,dataIndex:T,dataset:U,datasetIndex:E.index};return E._cachedDataOpts===ae&&(ae=De.extend({},ae)),ae.radius=it([ne.radius,ee.r,E._config.radius,B.options.elements.point.radius],fe,T),ae}}),Bt=De.valueOrDefault,Zt=Math.PI,er=2*Zt,Rn=Zt/2;mt._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(y){var T,E,B,U=document.createElement("ul"),ne=y.data,ee=ne.datasets,ae=ne.labels;if(U.setAttribute("class",y.id+"-legend"),ee.length)for(T=0,E=ee[0].data.length;T<E;++T)(B=U.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=ee[0].backgroundColor[T],ae[T]&&B.appendChild(document.createTextNode(ae[T]));return U.outerHTML},legend:{labels:{generateLabels:function(y){var T=y.data;return T.labels.length&&T.datasets.length?T.labels.map(function(E,B){var U=y.getDatasetMeta(0),ne=U.controller.getStyle(B);return{text:E,fillStyle:ne.backgroundColor,strokeStyle:ne.borderColor,lineWidth:ne.borderWidth,hidden:isNaN(T.datasets[0].data[B])||U.data[B].hidden,index:B}}):[]}},onClick:function(y,T){var E,B,U,ne=T.index,ee=this.chart;for(E=0,B=(ee.data.datasets||[]).length;E<B;++E)(U=ee.getDatasetMeta(E)).data[ne]&&(U.data[ne].hidden=!U.data[ne].hidden);ee.update()}},cutoutPercentage:50,rotation:-Rn,circumference:er,tooltips:{callbacks:{title:function(){return""},label:function(y,T){var E=T.labels[y.index],B=": "+T.datasets[y.datasetIndex].data[y.index];return De.isArray(E)?(E=E.slice())[0]+=B:E+=B,E}}}});var Fn=Hn.extend({dataElementType:Tr.Arc,linkScales:De.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],getRingIndex:function(y){for(var T=0,E=0;E<y;++E)this.chart.isDatasetVisible(E)&&++T;return T},update:function(y){var B,U,ne=this,ee=ne.chart,ae=ee.chartArea,fe=ee.options,Me=1,ke=1,Fe=0,Ze=0,ot=ne.getMeta(),rt=ot.data,Ct=fe.cutoutPercentage/100||0,Vt=fe.circumference,Wn=ne._getRingWeight(ne.index);if(Vt<er){var An=fe.rotation%er,Un=(An+=An>=Zt?-er:An<-Zt?er:0)+Vt,$n=Math.cos(An),fr=Math.sin(An),Hr=Math.cos(Un),Co=Math.sin(Un),Mo=An<=0&&Un>=0||Un>=er,Zr=An<=Rn&&Un>=Rn||Un>=er+Rn,Qo=An<=-Rn&&Un>=-Rn||Un>=Zt+Rn,Ki=An===-Zt||Un>=Zt?-1:Math.min($n,$n*Ct,Hr,Hr*Ct),Ii=Qo?-1:Math.min(fr,fr*Ct,Co,Co*Ct),To=Mo?1:Math.max($n,$n*Ct,Hr,Hr*Ct),Rr=Zr?1:Math.max(fr,fr*Ct,Co,Co*Ct);Me=(To-Ki)/2,ke=(Rr-Ii)/2,Fe=-(To+Ki)/2,Ze=-(Rr+Ii)/2}for(B=0,U=rt.length;B<U;++B)rt[B]._options=ne._resolveDataElementOptions(rt[B],B);for(ee.borderWidth=ne.getMaxBorderWidth(),ee.outerRadius=Math.max(Math.min((ae.right-ae.left-ee.borderWidth)/Me,(ae.bottom-ae.top-ee.borderWidth)/ke)/2,0),ee.innerRadius=Math.max(ee.outerRadius*Ct,0),ee.radiusLength=(ee.outerRadius-ee.innerRadius)/(ne._getVisibleDatasetWeightTotal()||1),ee.offsetX=Fe*ee.outerRadius,ee.offsetY=Ze*ee.outerRadius,ot.total=ne.calculateTotal(),ne.outerRadius=ee.outerRadius-ee.radiusLength*ne._getRingWeightOffset(ne.index),ne.innerRadius=Math.max(ne.outerRadius-ee.radiusLength*Wn,0),B=0,U=rt.length;B<U;++B)ne.updateElement(rt[B],B,y)},updateElement:function(y,T,E){var B=this,U=B.chart,ne=U.chartArea,ee=U.options,ae=ee.animation,fe=(ne.left+ne.right)/2,Me=(ne.top+ne.bottom)/2,ke=ee.rotation,Fe=ee.rotation,Ze=B.getDataset(),ot=E&&ae.animateRotate||y.hidden?0:B.calculateCircumference(Ze.data[T])*(ee.circumference/er),Vt=y._options||{};De.extend(y,{_datasetIndex:B.index,_index:T,_model:{backgroundColor:Vt.backgroundColor,borderColor:Vt.borderColor,borderWidth:Vt.borderWidth,borderAlign:Vt.borderAlign,x:fe+U.offsetX,y:Me+U.offsetY,startAngle:ke,endAngle:Fe,circumference:ot,outerRadius:E&&ae.animateScale?0:B.outerRadius,innerRadius:E&&ae.animateScale?0:B.innerRadius,label:De.valueAtIndexOrDefault(Ze.label,T,U.data.labels[T])}});var Wn=y._model;E&&ae.animateRotate||(Wn.startAngle=0===T?ee.rotation:B.getMeta().data[T-1]._model.endAngle,Wn.endAngle=Wn.startAngle+Wn.circumference),y.pivot()},calculateTotal:function(){var y,T=this.getDataset(),E=this.getMeta(),B=0;return De.each(E.data,function(U,ne){y=T.data[ne],isNaN(y)||U.hidden||(B+=Math.abs(y))}),B},calculateCircumference:function(y){var T=this.getMeta().total;return T>0&&!isNaN(y)?er*(Math.abs(y)/T):0},getMaxBorderWidth:function(y){var T,E,B,U,ne,ee,ae,fe,Me=0,ke=this.chart;if(!y)for(T=0,E=ke.data.datasets.length;T<E;++T)if(ke.isDatasetVisible(T)){y=(B=ke.getDatasetMeta(T)).data,T!==this.index&&(ne=B.controller);break}if(!y)return 0;for(T=0,E=y.length;T<E;++T)U=y[T],ne?(ne._configure(),ee=ne._resolveDataElementOptions(U,T)):ee=U._options,"inner"!==ee.borderAlign&&(Me=(fe=ee.hoverBorderWidth)>(Me=(ae=ee.borderWidth)>Me?ae:Me)?fe:Me);return Me},setHoverStyle:function(y){var T=y._model,E=y._options,B=De.getHoverColor;y.$previousStyle={backgroundColor:T.backgroundColor,borderColor:T.borderColor,borderWidth:T.borderWidth},T.backgroundColor=Bt(E.hoverBackgroundColor,B(E.backgroundColor)),T.borderColor=Bt(E.hoverBorderColor,B(E.borderColor)),T.borderWidth=Bt(E.hoverBorderWidth,E.borderWidth)},_getRingWeightOffset:function(y){for(var T=0,E=0;E<y;++E)this.chart.isDatasetVisible(E)&&(T+=this._getRingWeight(E));return T},_getRingWeight:function(y){return Math.max(Bt(this.chart.data.datasets[y].weight,1),0)},_getVisibleDatasetWeightTotal:function(){return this._getRingWeightOffset(this.chart.data.datasets.length)}});mt._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{type:"category",position:"left",offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{mode:"index",axis:"y"}}),mt._set("global",{datasets:{horizontalBar:{categoryPercentage:.8,barPercentage:.9}}});var ur=Ke.extend({_getValueScaleId:function(){return this.getMeta().xAxisID},_getIndexScaleId:function(){return this.getMeta().yAxisID}}),Ln=De.valueOrDefault,fn=De.options.resolve,gn=De.canvas._isPointInArea;function Dt(y,T){var E=y&&y.options.ticks||{},B=E.reverse,U=void 0===E.min?T:0,ne=void 0===E.max?T:0;return{start:B?ne:U,end:B?U:ne}}function ro(y,T,E){var B=E/2,U=Dt(y,B),ne=Dt(T,B);return{top:ne.end,right:U.end,bottom:ne.start,left:U.start}}function so(y){var T,E,B,U;return De.isObject(y)?(T=y.top,E=y.right,B=y.bottom,U=y.left):T=E=B=U=y,{top:T,right:E,bottom:B,left:U}}mt._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}});var eo=Hn.extend({datasetElementType:Tr.Line,dataElementType:Tr.Point,_datasetElementOptions:["backgroundColor","borderCapStyle","borderColor","borderDash","borderDashOffset","borderJoinStyle","borderWidth","cubicInterpolationMode","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},update:function(y){var T,E,B=this,U=B.getMeta(),ne=U.dataset,ee=U.data||[],fe=B._config,Me=B._showLine=Ln(fe.showLine,B.chart.options.showLines);for(B._xScale=B.getScaleForId(U.xAxisID),B._yScale=B.getScaleForId(U.yAxisID),Me&&(void 0!==fe.tension&&void 0===fe.lineTension&&(fe.lineTension=fe.tension),ne._scale=B._yScale,ne._datasetIndex=B.index,ne._children=ee,ne._model=B._resolveDatasetElementOptions(ne),ne.pivot()),T=0,E=ee.length;T<E;++T)B.updateElement(ee[T],T,y);for(Me&&0!==ne._model.tension&&B.updateBezierControlPoints(),T=0,E=ee.length;T<E;++T)ee[T].pivot()},updateElement:function(y,T,E){var B,U,ne=this,ee=ne.getMeta(),ae=y.custom||{},fe=ne.getDataset(),Me=ne.index,ke=fe.data[T],Fe=ne._xScale,Ze=ne._yScale,ot=ee.dataset._model,rt=ne._resolveDataElementOptions(y,T);B=Fe.getPixelForValue("object"==typeof ke?ke:NaN,T,Me),U=E?Ze.getBasePixel():ne.calculatePointY(ke,T,Me),y._xScale=Fe,y._yScale=Ze,y._options=rt,y._datasetIndex=Me,y._index=T,y._model={x:B,y:U,skip:ae.skip||isNaN(B)||isNaN(U),radius:rt.radius,pointStyle:rt.pointStyle,rotation:rt.rotation,backgroundColor:rt.backgroundColor,borderColor:rt.borderColor,borderWidth:rt.borderWidth,tension:Ln(ae.tension,ot?ot.tension:0),steppedLine:!!ot&&ot.steppedLine,hitRadius:rt.hitRadius}},_resolveDatasetElementOptions:function(y){var T=this,E=T._config,B=y.custom||{},U=T.chart.options,ne=U.elements.line,ee=Hn.prototype._resolveDatasetElementOptions.apply(T,arguments);return ee.spanGaps=Ln(E.spanGaps,U.spanGaps),ee.tension=Ln(E.lineTension,ne.tension),ee.steppedLine=fn([B.steppedLine,E.steppedLine,ne.stepped]),ee.clip=so(Ln(E.clip,ro(T._xScale,T._yScale,ee.borderWidth))),ee},calculatePointY:function(y,T,E){var B,ne,ee,ae,fe,Me,ke=this.chart,Fe=this._yScale,Ze=0,ot=0;if(Fe.options.stacked){for(ae=+Fe.getRightValue(y),Me=(fe=ke._getSortedVisibleDatasetMetas()).length,B=0;B<Me&&(ne=fe[B]).index!==E;++B)"line"===ne.type&&ne.yAxisID===Fe.id&&((ee=+Fe.getRightValue(ke.data.datasets[ne.index].data[T]))<0?ot+=ee||0:Ze+=ee||0);return Fe.getPixelForValue(ae<0?ot+ae:Ze+ae)}return Fe.getPixelForValue(y)},updateBezierControlPoints:function(){var y,T,E,B,U=this.chart,ne=this.getMeta(),ee=ne.dataset._model,ae=U.chartArea,fe=ne.data||[];function Me(ke,Fe,Ze){return Math.max(Math.min(ke,Ze),Fe)}if(ee.spanGaps&&(fe=fe.filter(function(ke){return!ke._model.skip})),"monotone"===ee.cubicInterpolationMode)De.splineCurveMonotone(fe);else for(y=0,T=fe.length;y<T;++y)E=fe[y]._model,B=De.splineCurve(De.previousItem(fe,y)._model,E,De.nextItem(fe,y)._model,ee.tension),E.controlPointPreviousX=B.previous.x,E.controlPointPreviousY=B.previous.y,E.controlPointNextX=B.next.x,E.controlPointNextY=B.next.y;if(U.options.elements.line.capBezierPoints)for(y=0,T=fe.length;y<T;++y)gn(E=fe[y]._model,ae)&&(y>0&&gn(fe[y-1]._model,ae)&&(E.controlPointPreviousX=Me(E.controlPointPreviousX,ae.left,ae.right),E.controlPointPreviousY=Me(E.controlPointPreviousY,ae.top,ae.bottom)),y<fe.length-1&&gn(fe[y+1]._model,ae)&&(E.controlPointNextX=Me(E.controlPointNextX,ae.left,ae.right),E.controlPointNextY=Me(E.controlPointNextY,ae.top,ae.bottom)))},draw:function(){var y,T=this.chart,E=this.getMeta(),B=E.data||[],U=T.chartArea,ne=T.canvas,ee=0,ae=B.length;for(this._showLine&&(De.canvas.clipArea(T.ctx,{left:!1===(y=E.dataset._model.clip).left?0:U.left-y.left,right:!1===y.right?ne.width:U.right+y.right,top:!1===y.top?0:U.top-y.top,bottom:!1===y.bottom?ne.height:U.bottom+y.bottom}),E.dataset.draw(),De.canvas.unclipArea(T.ctx));ee<ae;++ee)B[ee].draw(U)},setHoverStyle:function(y){var T=y._model,E=y._options,B=De.getHoverColor;y.$previousStyle={backgroundColor:T.backgroundColor,borderColor:T.borderColor,borderWidth:T.borderWidth,radius:T.radius},T.backgroundColor=Ln(E.hoverBackgroundColor,B(E.backgroundColor)),T.borderColor=Ln(E.hoverBorderColor,B(E.borderColor)),T.borderWidth=Ln(E.hoverBorderWidth,E.borderWidth),T.radius=Ln(E.hoverRadius,E.radius)}}),Xr=De.options.resolve;mt._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(y){var T,E,B,U=document.createElement("ul"),ne=y.data,ee=ne.datasets,ae=ne.labels;if(U.setAttribute("class",y.id+"-legend"),ee.length)for(T=0,E=ee[0].data.length;T<E;++T)(B=U.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=ee[0].backgroundColor[T],ae[T]&&B.appendChild(document.createTextNode(ae[T]));return U.outerHTML},legend:{labels:{generateLabels:function(y){var T=y.data;return T.labels.length&&T.datasets.length?T.labels.map(function(E,B){var U=y.getDatasetMeta(0),ne=U.controller.getStyle(B);return{text:E,fillStyle:ne.backgroundColor,strokeStyle:ne.borderColor,lineWidth:ne.borderWidth,hidden:isNaN(T.datasets[0].data[B])||U.data[B].hidden,index:B}}):[]}},onClick:function(y,T){var E,B,U,ne=T.index,ee=this.chart;for(E=0,B=(ee.data.datasets||[]).length;E<B;++E)(U=ee.getDatasetMeta(E)).data[ne].hidden=!U.data[ne].hidden;ee.update()}},tooltips:{callbacks:{title:function(){return""},label:function(y,T){return T.labels[y.index]+": "+y.yLabel}}}});var bo=Hn.extend({dataElementType:Tr.Arc,linkScales:De.noop,_dataElementOptions:["backgroundColor","borderColor","borderWidth","borderAlign","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth"],_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(y){var T,E,B,U=this,ne=U.getDataset(),ee=U.getMeta(),ae=U.chart.options.startAngle||0,fe=U._starts=[],Me=U._angles=[],ke=ee.data;for(U._updateRadius(),ee.count=U.countVisibleElements(),T=0,E=ne.data.length;T<E;T++)fe[T]=ae,B=U._computeAngle(T),Me[T]=B,ae+=B;for(T=0,E=ke.length;T<E;++T)ke[T]._options=U._resolveDataElementOptions(ke[T],T),U.updateElement(ke[T],T,y)},_updateRadius:function(){var y=this,T=y.chart,E=T.chartArea,B=T.options,U=Math.min(E.right-E.left,E.bottom-E.top);T.outerRadius=Math.max(U/2,0),T.innerRadius=Math.max(B.cutoutPercentage?T.outerRadius/100*B.cutoutPercentage:1,0),T.radiusLength=(T.outerRadius-T.innerRadius)/T.getVisibleDatasetCount(),y.outerRadius=T.outerRadius-T.radiusLength*y.index,y.innerRadius=y.outerRadius-T.radiusLength},updateElement:function(y,T,E){var B=this,U=B.chart,ne=B.getDataset(),ee=U.options,ae=ee.animation,fe=U.scale,Me=U.data.labels,ke=fe.xCenter,Fe=fe.yCenter,Ze=ee.startAngle,ot=y.hidden?0:fe.getDistanceFromCenterForValue(ne.data[T]),rt=B._starts[T],Ct=rt+(y.hidden?0:B._angles[T]),Vt=ae.animateScale?0:fe.getDistanceFromCenterForValue(ne.data[T]),Wn=y._options||{};De.extend(y,{_datasetIndex:B.index,_index:T,_scale:fe,_model:{backgroundColor:Wn.backgroundColor,borderColor:Wn.borderColor,borderWidth:Wn.borderWidth,borderAlign:Wn.borderAlign,x:ke,y:Fe,innerRadius:0,outerRadius:E?Vt:ot,startAngle:E&&ae.animateRotate?Ze:rt,endAngle:E&&ae.animateRotate?Ze:Ct,label:De.valueAtIndexOrDefault(Me,T,Me[T])}}),y.pivot()},countVisibleElements:function(){var y=this.getDataset(),T=this.getMeta(),E=0;return De.each(T.data,function(B,U){isNaN(y.data[U])||B.hidden||E++}),E},setHoverStyle:function(y){var T=y._model,E=y._options,B=De.getHoverColor,U=De.valueOrDefault;y.$previousStyle={backgroundColor:T.backgroundColor,borderColor:T.borderColor,borderWidth:T.borderWidth},T.backgroundColor=U(E.hoverBackgroundColor,B(E.backgroundColor)),T.borderColor=U(E.hoverBorderColor,B(E.borderColor)),T.borderWidth=U(E.hoverBorderWidth,E.borderWidth)},_computeAngle:function(y){var T=this,E=this.getMeta().count,B=T.getDataset(),U=T.getMeta();return isNaN(B.data[y])||U.data[y].hidden?0:Xr([T.chart.options.elements.arc.angle,2*Math.PI/E],{chart:T.chart,dataIndex:y,dataset:B,datasetIndex:T.index},y)}});mt._set("pie",De.clone(mt.doughnut)),mt._set("pie",{cutoutPercentage:0});var Ti=Fn,$r=De.valueOrDefault;mt._set("radar",{spanGaps:!1,scale:{type:"radialLinear"},elements:{line:{fill:"start",tension:0}}});var uu=Hn.extend({datasetElementType:Tr.Line,dataElementType:Tr.Point,linkScales:De.noop,_datasetElementOptions:["backgroundColor","borderWidth","borderColor","borderCapStyle","borderDash","borderDashOffset","borderJoinStyle","fill"],_dataElementOptions:{backgroundColor:"pointBackgroundColor",borderColor:"pointBorderColor",borderWidth:"pointBorderWidth",hitRadius:"pointHitRadius",hoverBackgroundColor:"pointHoverBackgroundColor",hoverBorderColor:"pointHoverBorderColor",hoverBorderWidth:"pointHoverBorderWidth",hoverRadius:"pointHoverRadius",pointStyle:"pointStyle",radius:"pointRadius",rotation:"pointRotation"},_getIndexScaleId:function(){return this.chart.scale.id},_getValueScaleId:function(){return this.chart.scale.id},update:function(y){var T,E,B=this,U=B.getMeta(),ne=U.dataset,ee=U.data||[],ae=B.chart.scale,fe=B._config;for(void 0!==fe.tension&&void 0===fe.lineTension&&(fe.lineTension=fe.tension),ne._scale=ae,ne._datasetIndex=B.index,ne._children=ee,ne._loop=!0,ne._model=B._resolveDatasetElementOptions(ne),ne.pivot(),T=0,E=ee.length;T<E;++T)B.updateElement(ee[T],T,y);for(B.updateBezierControlPoints(),T=0,E=ee.length;T<E;++T)ee[T].pivot()},updateElement:function(y,T,E){var B=this,U=y.custom||{},ne=B.getDataset(),ee=B.chart.scale,ae=ee.getPointPositionForValue(T,ne.data[T]),fe=B._resolveDataElementOptions(y,T),Me=B.getMeta().dataset._model,ke=E?ee.xCenter:ae.x,Fe=E?ee.yCenter:ae.y;y._scale=ee,y._options=fe,y._datasetIndex=B.index,y._index=T,y._model={x:ke,y:Fe,skip:U.skip||isNaN(ke)||isNaN(Fe),radius:fe.radius,pointStyle:fe.pointStyle,rotation:fe.rotation,backgroundColor:fe.backgroundColor,borderColor:fe.borderColor,borderWidth:fe.borderWidth,tension:$r(U.tension,Me?Me.tension:0),hitRadius:fe.hitRadius}},_resolveDatasetElementOptions:function(){var y=this,T=y._config,E=y.chart.options,B=Hn.prototype._resolveDatasetElementOptions.apply(y,arguments);return B.spanGaps=$r(T.spanGaps,E.spanGaps),B.tension=$r(T.lineTension,E.elements.line.tension),B},updateBezierControlPoints:function(){var y,T,E,B,U=this.getMeta(),ne=this.chart.chartArea,ee=U.data||[];function ae(fe,Me,ke){return Math.max(Math.min(fe,ke),Me)}for(U.dataset._model.spanGaps&&(ee=ee.filter(function(fe){return!fe._model.skip})),y=0,T=ee.length;y<T;++y)E=ee[y]._model,B=De.splineCurve(De.previousItem(ee,y,!0)._model,E,De.nextItem(ee,y,!0)._model,E.tension),E.controlPointPreviousX=ae(B.previous.x,ne.left,ne.right),E.controlPointPreviousY=ae(B.previous.y,ne.top,ne.bottom),E.controlPointNextX=ae(B.next.x,ne.left,ne.right),E.controlPointNextY=ae(B.next.y,ne.top,ne.bottom)},setHoverStyle:function(y){var T=y._model,E=y._options,B=De.getHoverColor;y.$previousStyle={backgroundColor:T.backgroundColor,borderColor:T.borderColor,borderWidth:T.borderWidth,radius:T.radius},T.backgroundColor=$r(E.hoverBackgroundColor,B(E.backgroundColor)),T.borderColor=$r(E.hoverBorderColor,B(E.borderColor)),T.borderWidth=$r(E.hoverBorderWidth,E.borderWidth),T.radius=$r(E.hoverRadius,E.radius)}});mt._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},tooltips:{callbacks:{title:function(){return""},label:function(y){return"("+y.xLabel+", "+y.yLabel+")"}}}}),mt._set("global",{datasets:{scatter:{showLine:!1}}});var Dr={bar:Ke,bubble:qt,doughnut:Fn,horizontalBar:ur,line:eo,polarArea:bo,pie:Ti,radar:uu,scatter:eo};function go(y,T){return y.native?{x:y.x,y:y.y}:De.getRelativePosition(y,T)}function oa(y,T){var E,B,U,ne,ee,ae,fe=y._getSortedVisibleDatasetMetas();for(B=0,ne=fe.length;B<ne;++B)for(U=0,ee=(E=fe[B].data).length;U<ee;++U)(ae=E[U])._view.skip||T(ae)}function Ns(y,T){var E=[];return oa(y,function(B){B.inRange(T.x,T.y)&&E.push(B)}),E}function qs(y,T,E,B){var U=Number.POSITIVE_INFINITY,ne=[];return oa(y,function(ee){if(!E||ee.inRange(T.x,T.y)){var ae=ee.getCenterPoint(),fe=B(T,ae);fe<U?(ne=[ee],U=fe):fe===U&&ne.push(ee)}}),ne}function Gr(y){var T=-1!==y.indexOf("x"),E=-1!==y.indexOf("y");return function(B,U){var ne=T?Math.abs(B.x-U.x):0,ee=E?Math.abs(B.y-U.y):0;return Math.sqrt(Math.pow(ne,2)+Math.pow(ee,2))}}function Ha(y,T,E){var B=go(T,y);E.axis=E.axis||"x";var U=Gr(E.axis),ne=E.intersect?Ns(y,B):qs(y,B,!1,U),ee=[];return ne.length?(y._getSortedVisibleDatasetMetas().forEach(function(ae){var fe=ae.data[ne[0]._index];fe&&!fe._view.skip&&ee.push(fe)}),ee):[]}var Wa={modes:{single:function(y,T){var E=go(T,y),B=[];return oa(y,function(U){if(U.inRange(E.x,E.y))return B.push(U),B}),B.slice(0,1)},label:Ha,index:Ha,dataset:function(y,T,E){var B=go(T,y);E.axis=E.axis||"xy";var U=Gr(E.axis),ne=E.intersect?Ns(y,B):qs(y,B,!1,U);return ne.length>0&&(ne=y.getDatasetMeta(ne[0]._datasetIndex).data),ne},"x-axis":function(y,T){return Ha(y,T,{intersect:!1})},point:function(y,T){return Ns(y,go(T,y))},nearest:function(y,T,E){var B=go(T,y);E.axis=E.axis||"xy";var U=Gr(E.axis);return qs(y,B,E.intersect,U)},x:function(y,T,E){var B=go(T,y),U=[],ne=!1;return oa(y,function(ee){ee.inXRange(B.x)&&U.push(ee),ee.inRange(B.x,B.y)&&(ne=!0)}),E.intersect&&!ne&&(U=[]),U},y:function(y,T,E){var B=go(T,y),U=[],ne=!1;return oa(y,function(ee){ee.inYRange(B.y)&&U.push(ee),ee.inRange(B.x,B.y)&&(ne=!0)}),E.intersect&&!ne&&(U=[]),U}}},Ds=De.extend;function Bs(y,T){return De.where(y,function(E){return E.pos===T})}function ls(y,T){return y.sort(function(E,B){var U=T?B:E,ne=T?E:B;return U.weight===ne.weight?U.index-ne.index:U.weight-ne.weight})}function Mm(y,T,E,B){return Math.max(y[E],T[E])+Math.max(y[B],T[B])}function xp(y,T,E){var B,U,ne=E.box,ee=y.maxPadding;if(E.size&&(y[E.pos]-=E.size),E.size=E.horizontal?ne.height:ne.width,y[E.pos]+=E.size,ne.getPadding){var ae=ne.getPadding();ee.top=Math.max(ee.top,ae.top),ee.left=Math.max(ee.left,ae.left),ee.bottom=Math.max(ee.bottom,ae.bottom),ee.right=Math.max(ee.right,ae.right)}if(B=T.outerWidth-Mm(ee,y,"left","right"),U=T.outerHeight-Mm(ee,y,"top","bottom"),B!==y.w||U!==y.h){y.w=B,y.h=U;var fe=E.horizontal?[B,y.w]:[U,y.h];return!(fe[0]===fe[1]||isNaN(fe[0])&&isNaN(fe[1]))}}function to(y,T){var E=T.maxPadding;return function B(U){var ne={left:0,top:0,right:0,bottom:0};return U.forEach(function(ee){ne[ee]=Math.max(T[ee],E[ee])}),ne}(y?["left","right"]:["top","bottom"])}function wa(y,T,E){var B,U,ne,ee,ae,fe,Me=[];for(B=0,U=y.length;B<U;++B)(ee=(ne=y[B]).box).update(ne.width||T.w,ne.height||T.h,to(ne.horizontal,T)),xp(T,E,ne)&&(fe=!0,Me.length&&(ae=!0)),ee.fullWidth||Me.push(ne);return ae&&wa(Me,T,E)||fe}function Tu(y,T,E){var B,U,ne,ee,ae=E.padding,fe=T.x,Me=T.y;for(B=0,U=y.length;B<U;++B)ee=(ne=y[B]).box,ne.horizontal?(ee.left=ee.fullWidth?ae.left:T.left,ee.right=ee.fullWidth?E.outerWidth-ae.right:T.left+T.w,ee.top=Me,ee.bottom=Me+ee.height,ee.width=ee.right-ee.left,Me=ee.bottom):(ee.left=fe,ee.right=fe+ee.width,ee.top=T.top,ee.bottom=T.top+T.h,ee.height=ee.bottom-ee.top,fe=ee.right);T.x=fe,T.y=Me}mt._set("global",{layout:{padding:{top:0,right:0,bottom:0,left:0}}});var As,Di={defaults:{},addBox:function(y,T){y.boxes||(y.boxes=[]),T.fullWidth=T.fullWidth||!1,T.position=T.position||"top",T.weight=T.weight||0,T._layers=T._layers||function(){return[{z:0,draw:function(){T.draw.apply(T,arguments)}}]},y.boxes.push(T)},removeBox:function(y,T){var E=y.boxes?y.boxes.indexOf(T):-1;-1!==E&&y.boxes.splice(E,1)},configure:function(y,T,E){for(var B,U=["fullWidth","position","weight"],ne=U.length,ee=0;ee<ne;++ee)E.hasOwnProperty(B=U[ee])&&(T[B]=E[B])},update:function(y,T,E){if(y){var U=De.options.toPadding((y.options.layout||{}).padding),ne=T-U.width,ee=E-U.height,ae=(rt=ls(Bs(ot=function(An){var Un,$n,fr,Hr=[];for(Un=0,$n=(An||[]).length;Un<$n;++Un)Hr.push({index:Un,box:fr=An[Un],pos:fr.position,horizontal:fr.isHorizontal(),weight:fr.weight});return Hr}(y.boxes),"left"),!0),Ct=ls(Bs(ot,"right")),Vt=ls(Bs(ot,"top"),!0),Wn=ls(Bs(ot,"bottom")),{leftAndTop:rt.concat(Vt),rightAndBottom:Ct.concat(Wn),chartArea:Bs(ot,"chartArea"),vertical:rt.concat(Ct),horizontal:Vt.concat(Wn)}),fe=ae.vertical,Me=ae.horizontal,ke=Object.freeze({outerWidth:T,outerHeight:E,padding:U,availableWidth:ne,vBoxMaxWidth:ne/2/fe.length,hBoxMaxHeight:ee/2}),Fe=Ds({maxPadding:Ds({},U),w:ne,h:ee,x:U.left,y:U.top},U);(function(Ze,ot){var rt,Ct,Vt;for(rt=0,Ct=Ze.length;rt<Ct;++rt)(Vt=Ze[rt]).width=Vt.horizontal?Vt.box.fullWidth&&ot.availableWidth:ot.vBoxMaxWidth,Vt.height=Vt.horizontal&&ot.hBoxMaxHeight})(fe.concat(Me),ke),wa(fe,Fe,ke),wa(Me,Fe,ke)&&wa(fe,Fe,ke),function(Ze){var ot=Ze.maxPadding;function rt(Ct){var Vt=Math.max(ot[Ct]-Ze[Ct],0);return Ze[Ct]+=Vt,Vt}Ze.y+=rt("top"),Ze.x+=rt("left"),rt("right"),rt("bottom")}(Fe),Tu(ae.leftAndTop,Fe,ke),Fe.x+=Fe.w,Fe.y+=Fe.h,Tu(ae.rightAndBottom,Fe,ke),y.chartArea={left:Fe.left,top:Fe.top,right:Fe.left+Fe.w,bottom:Fe.top+Fe.h},De.each(ae.chartArea,function(Ze){var ot=Ze.box;Ds(ot,y.chartArea),ot.update(Fe.w,Fe.h)})}var ot,rt,Ct,Vt,Wn}},Pc=(As=Object.freeze({__proto__:null,default:"@keyframes chartjs-render-animation{from{opacity:.99}to{opacity:1}}.chartjs-render-monitor{animation:chartjs-render-animation 1ms}.chartjs-size-monitor,.chartjs-size-monitor-expand,.chartjs-size-monitor-shrink{position:absolute;direction:ltr;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1}.chartjs-size-monitor-expand>div{position:absolute;width:1000000px;height:1000000px;left:0;top:0}.chartjs-size-monitor-shrink>div{position:absolute;width:200%;height:200%;left:0;top:0}"}))&&As.default||As,Lo="$chartjs",_p="chartjs-size-monitor",bg="chartjs-render-monitor",Fr=["animationstart","webkitAnimationStart"],Rc={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"};function Pl(y,T){var E=De.getStyle(y,T),B=E&&E.match(/^(\d+)(\.\d+)?px$/);return B?Number(B[1]):void 0}var Qt=!!function(){var y=!1;try{var T=Object.defineProperty({},"passive",{get:function(){y=!0}});window.addEventListener("e",null,T)}catch{}return y}()&&{passive:!0};function It(y,T,E){y.addEventListener(T,E,Qt)}function Ga(y,T,E){y.removeEventListener(T,E,Qt)}function wp(y,T,E,B,U){return{type:y,chart:T,native:U||null,x:void 0!==E?E:null,y:void 0!==B?B:null}}function lo(y){var T=document.createElement("div");return T.className=y||"",T}var cs={disableCSSInjection:!1,_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,_ensureLoaded:function(y){if(!this.disableCSSInjection){var T=y.getRootNode?y.getRootNode():document;!function(E,B){var U=E[Lo]||(E[Lo]={});if(!U.containsStyles){U.containsStyles=!0,B="/* Chart.js */\n"+B;var ne=document.createElement("style");ne.setAttribute("type","text/css"),ne.appendChild(document.createTextNode(B)),E.appendChild(ne)}}(T.host?T:document.head,Pc)}},acquireContext:function(y,T){"string"==typeof y?y=document.getElementById(y):y.length&&(y=y[0]),y&&y.canvas&&(y=y.canvas);var E=y&&y.getContext&&y.getContext("2d");return E&&E.canvas===y?(this._ensureLoaded(y),function(B,U){var ne=B.style,ee=B.getAttribute("height"),ae=B.getAttribute("width");if(B[Lo]={initial:{height:ee,width:ae,style:{display:ne.display,height:ne.height,width:ne.width}}},ne.display=ne.display||"block",null===ae||""===ae){var fe=Pl(B,"width");void 0!==fe&&(B.width=fe)}if(null===ee||""===ee)if(""===B.style.height)B.height=B.width/(U.options.aspectRatio||2);else{var Me=Pl(B,"height");void 0!==fe&&(B.height=Me)}}(y,T),E):null},releaseContext:function(y){var T=y.canvas;if(T[Lo]){var E=T[Lo].initial;["height","width"].forEach(function(B){var U=E[B];De.isNullOrUndef(U)?T.removeAttribute(B):T.setAttribute(B,U)}),De.each(E.style||{},function(B,U){T.style[U]=B}),T.width=T.width,delete T[Lo]}},addEventListener:function(y,T,E){var B=y.canvas;if("resize"!==T){var U=E[Lo]||(E[Lo]={});It(B,T,(U.proxies||(U.proxies={}))[y.id+"_"+T]=function(ne){var ee,ae,fe,Me;E((fe=Rc[(ee=ne).type]||ee.type,Me=De.getRelativePosition(ee,ae=y),wp(fe,ae,Me.x,Me.y,ee)))})}else!function lu(y,T,E){var B,U,ne,ee,Me,Fe,Ze,ae=y[Lo]||(y[Lo]={}),fe=ae.resizer=function(Me){var ke=lo(_p),Fe=lo(_p+"-expand"),Ze=lo(_p+"-shrink");Fe.appendChild(lo()),Ze.appendChild(lo()),ke.appendChild(Fe),ke.appendChild(Ze),ke._reset=function(){Fe.scrollLeft=1e6,Fe.scrollTop=1e6,Ze.scrollLeft=1e6,Ze.scrollTop=1e6};var ot=function(){ke._reset(),Me()};return It(Fe,"scroll",ot.bind(Fe,"expand")),It(Ze,"scroll",ot.bind(Ze,"shrink")),ke}((B=function(){if(ae.resizer){var Me=E.options.maintainAspectRatio&&y.parentNode,ke=Me?Me.clientWidth:0;T(wp("resize",E)),Me&&Me.clientWidth<ke&&E.canvas&&T(wp("resize",E))}},ne=!1,ee=[],function(){ee=Array.prototype.slice.call(arguments),U=U||this,ne||(ne=!0,De.requestAnimFrame.call(window,function(){ne=!1,B.apply(U,ee)}))}));Fe=(Me=y)[Lo]||(Me[Lo]={}),Ze=Fe.renderProxy=function(ot){"chartjs-render-animation"===ot.animationName&&function(){if(ae.resizer){var Me=y.parentNode;Me&&Me!==fe.parentNode&&Me.insertBefore(fe,Me.firstChild),fe._reset()}}()},De.each(Fr,function(ot){It(Me,ot,Ze)}),Fe.reflow=!!Me.offsetParent,Me.classList.add(bg)}(B,E,y)},removeEventListener:function(y,T,E){var B=y.canvas;if("resize"!==T){var U=((E[Lo]||{}).proxies||{})[y.id+"_"+T];U&&Ga(B,T,U)}else!function Dd(y){var B,U,ne,T=y[Lo]||{},E=T.resizer;delete T.resizer,(ne=(U=(B=y)[Lo]||{}).renderProxy)&&(De.each(Fr,function(ee){Ga(B,ee,ne)}),delete U.renderProxy),B.classList.remove(bg),E&&E.parentNode&&E.parentNode.removeChild(E)}(B)}};De.addEvent=It,De.removeEvent=Ga;var Xs=De.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},cs._enabled?cs:{acquireContext:function(y){return y&&y.canvas&&(y=y.canvas),y&&y.getContext("2d")||null}});mt._set("global",{plugins:{}});var $o={_plugins:[],_cacheId:0,register:function(y){var T=this._plugins;[].concat(y).forEach(function(E){-1===T.indexOf(E)&&T.push(E)}),this._cacheId++},unregister:function(y){var T=this._plugins;[].concat(y).forEach(function(E){var B=T.indexOf(E);-1!==B&&T.splice(B,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(y,T,E){var B,U,ne,ee,ae,fe=this.descriptors(y),Me=fe.length;for(B=0;B<Me;++B)if("function"==typeof(ae=(ne=(U=fe[B]).plugin)[T])&&((ee=[y].concat(E||[])).push(U.options),!1===ae.apply(ne,ee)))return!1;return!0},descriptors:function(y){var T=y.$plugins||(y.$plugins={});if(T.id===this._cacheId)return T.descriptors;var E=[],B=[],U=y&&y.config||{},ne=U.options&&U.options.plugins||{};return this._plugins.concat(U.plugins||[]).forEach(function(ee){if(-1===E.indexOf(ee)){var ae=ee.id,fe=ne[ae];!1!==fe&&(!0===fe&&(fe=De.clone(mt.global.plugins[ae])),E.push(ee),B.push({plugin:ee,options:fe||{}}))}}),T.descriptors=B,T.id=this._cacheId,B},_invalidate:function(y){delete y.$plugins}},nd={constructors:{},defaults:{},registerScaleType:function(y,T,E){this.constructors[y]=T,this.defaults[y]=De.clone(E)},getScaleConstructor:function(y){return this.constructors.hasOwnProperty(y)?this.constructors[y]:void 0},getScaleDefaults:function(y){return this.defaults.hasOwnProperty(y)?De.merge(Object.create(null),[mt.scale,this.defaults[y]]):{}},updateScaleDefaults:function(y,T){this.defaults.hasOwnProperty(y)&&(this.defaults[y]=De.extend(this.defaults[y],T))},addScalesToLayout:function(y){De.each(y.scales,function(T){T.fullWidth=T.options.fullWidth,T.position=T.options.position,T.weight=T.options.weight,Di.addBox(y,T)})}},Ql=De.valueOrDefault,Io=De.rtl.getRtlAdapter;mt._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:De.noop,title:function(y,T){var E="",B=T.labels,U=B?B.length:0;if(y.length>0){var ne=y[0];ne.label?E=ne.label:ne.xLabel?E=ne.xLabel:U>0&&ne.index<U&&(E=B[ne.index])}return E},afterTitle:De.noop,beforeBody:De.noop,beforeLabel:De.noop,label:function(y,T){var E=T.datasets[y.datasetIndex].label||"";return E&&(E+=": "),De.isNullOrUndef(y.value)?E+=y.yLabel:E+=y.value,E},labelColor:function(y,T){var E=T.getDatasetMeta(y.datasetIndex).data[y.index]._view;return{borderColor:E.borderColor,backgroundColor:E.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:De.noop,afterBody:De.noop,beforeFooter:De.noop,footer:De.noop,afterFooter:De.noop}}});var xg={average:function(y){if(!y.length)return!1;var T,E,B=0,U=0,ne=0;for(T=0,E=y.length;T<E;++T){var ee=y[T];if(ee&&ee.hasValue()){var ae=ee.tooltipPosition();B+=ae.x,U+=ae.y,++ne}}return{x:B/ne,y:U/ne}},nearest:function(y,T){var E,B,U,ne=T.x,ee=T.y,ae=Number.POSITIVE_INFINITY;for(E=0,B=y.length;E<B;++E){var fe=y[E];if(fe&&fe.hasValue()){var Me=fe.getCenterPoint(),ke=De.distanceBetweenPoints(T,Me);ke<ae&&(ae=ke,U=fe)}}if(U){var Fe=U.tooltipPosition();ne=Fe.x,ee=Fe.y}return{x:ne,y:ee}}};function rl(y,T){return T&&(De.isArray(T)?Array.prototype.push.apply(y,T):y.push(T)),y}function mc(y){return("string"==typeof y||y instanceof String)&&y.indexOf("\n")>-1?y.split("\n"):y}function Uh(y){var T=mt.global;return{xPadding:y.xPadding,yPadding:y.yPadding,xAlign:y.xAlign,yAlign:y.yAlign,rtl:y.rtl,textDirection:y.textDirection,bodyFontColor:y.bodyFontColor,_bodyFontFamily:Ql(y.bodyFontFamily,T.defaultFontFamily),_bodyFontStyle:Ql(y.bodyFontStyle,T.defaultFontStyle),_bodyAlign:y.bodyAlign,bodyFontSize:Ql(y.bodyFontSize,T.defaultFontSize),bodySpacing:y.bodySpacing,titleFontColor:y.titleFontColor,_titleFontFamily:Ql(y.titleFontFamily,T.defaultFontFamily),_titleFontStyle:Ql(y.titleFontStyle,T.defaultFontStyle),titleFontSize:Ql(y.titleFontSize,T.defaultFontSize),_titleAlign:y.titleAlign,titleSpacing:y.titleSpacing,titleMarginBottom:y.titleMarginBottom,footerFontColor:y.footerFontColor,_footerFontFamily:Ql(y.footerFontFamily,T.defaultFontFamily),_footerFontStyle:Ql(y.footerFontStyle,T.defaultFontStyle),footerFontSize:Ql(y.footerFontSize,T.defaultFontSize),_footerAlign:y.footerAlign,footerSpacing:y.footerSpacing,footerMarginTop:y.footerMarginTop,caretSize:y.caretSize,cornerRadius:y.cornerRadius,backgroundColor:y.backgroundColor,opacity:0,legendColorBackground:y.multiKeyBackground,displayColors:y.displayColors,borderColor:y.borderColor,borderWidth:y.borderWidth}}function zs(y,T){return"center"===T?y.x+y.width/2:"right"===T?y.x+y.width-y.xPadding:y.x+y.xPadding}function Rl(y){return rl([],mc(y))}var Du=wr.extend({initialize:function(){this._model=Uh(this._options),this._lastActive=[]},getTitle:function(){var y=this,T=y._options,E=T.callbacks,B=E.beforeTitle.apply(y,arguments),U=E.title.apply(y,arguments),ne=E.afterTitle.apply(y,arguments),ee=[];return ee=rl(ee,mc(B)),ee=rl(ee,mc(U)),rl(ee,mc(ne))},getBeforeBody:function(){return Rl(this._options.callbacks.beforeBody.apply(this,arguments))},getBody:function(y,T){var E=this,B=E._options.callbacks,U=[];return De.each(y,function(ne){var ee={before:[],lines:[],after:[]};rl(ee.before,mc(B.beforeLabel.call(E,ne,T))),rl(ee.lines,B.label.call(E,ne,T)),rl(ee.after,mc(B.afterLabel.call(E,ne,T))),U.push(ee)}),U},getAfterBody:function(){return Rl(this._options.callbacks.afterBody.apply(this,arguments))},getFooter:function(){var y=this,T=y._options.callbacks,E=T.beforeFooter.apply(y,arguments),B=T.footer.apply(y,arguments),U=T.afterFooter.apply(y,arguments),ne=[];return ne=rl(ne,mc(E)),ne=rl(ne,mc(B)),rl(ne,mc(U))},update:function(y){var T,E,B,U,ne,ee,ae,fe,Me,ke,Mo,Zr,Qo,Ki,Ii,To,vr,Fi,xa,ua,Fl,Fe=this,Ze=Fe._options,ot=Fe._model,rt=Fe._model=Uh(Ze),Ct=Fe._active,Vt=Fe._data,Wn={xAlign:ot.xAlign,yAlign:ot.yAlign},An={x:ot.x,y:ot.y},Un={width:ot.width,height:ot.height},$n={x:ot.caretX,y:ot.caretY};if(Ct.length){rt.opacity=1;var fr=[],Hr=[];$n=xg[Ze.position].call(Fe,Ct,Fe._eventPosition);var Co=[];for(T=0,E=Ct.length;T<E;++T)Co.push((U=void 0,ne=void 0,fe=void 0,Me=void 0,ke=void 0,U=(B=Ct[T])._xScale,ne=B._yScale||B._scale,ee=B._index,Me=(fe=B._chart.getDatasetMeta(ae=B._datasetIndex).controller)._getIndexScale(),ke=fe._getValueScale(),{xLabel:U?U.getLabelForIndex(ee,ae):"",yLabel:ne?ne.getLabelForIndex(ee,ae):"",label:Me?""+Me.getLabelForIndex(ee,ae):"",value:ke?""+ke.getLabelForIndex(ee,ae):"",index:ee,datasetIndex:ae,x:B._model.x,y:B._model.y}));Ze.filter&&(Co=Co.filter(function(Mo){return Ze.filter(Mo,Vt)})),Ze.itemSort&&(Co=Co.sort(function(Mo,Zr){return Ze.itemSort(Mo,Zr,Vt)})),De.each(Co,function(Mo){fr.push(Ze.callbacks.labelColor.call(Fe,Mo,Fe._chart)),Hr.push(Ze.callbacks.labelTextColor.call(Fe,Mo,Fe._chart))}),rt.title=Fe.getTitle(Co,Vt),rt.beforeBody=Fe.getBeforeBody(Co,Vt),rt.body=Fe.getBody(Co,Vt),rt.afterBody=Fe.getAfterBody(Co,Vt),rt.footer=Fe.getFooter(Co,Vt),rt.x=$n.x,rt.y=$n.y,rt.caretPadding=Ze.caretPadding,rt.labelColors=fr,rt.labelTextColors=Hr,rt.dataPoints=Co,Un=function(Mo,Zr){var Qo=Mo._chart.ctx,Ki=2*Zr.yPadding,Ii=0,To=Zr.body,Rr=To.reduce(function(Vl,va){return Vl+va.before.length+va.lines.length+va.after.length},0),vr=Zr.title.length,ma=Zr.footer.length,Fi=Zr.titleFontSize,xa=Zr.bodyFontSize,ua=Zr.footerFontSize;Ki+=vr*Fi,Ki+=vr?(vr-1)*Zr.titleSpacing:0,Ki+=vr?Zr.titleMarginBottom:0,Ki+=(Rr+=Zr.beforeBody.length+Zr.afterBody.length)*xa,Ki+=Rr?(Rr-1)*Zr.bodySpacing:0,Ki+=ma?Zr.footerMarginTop:0,Ki+=ma*ua,Ki+=ma?(ma-1)*Zr.footerSpacing:0;var Fl=0,on=function(Vl){Ii=Math.max(Ii,Qo.measureText(Vl).width+Fl)};return Qo.font=De.fontString(Fi,Zr._titleFontStyle,Zr._titleFontFamily),De.each(Zr.title,on),Qo.font=De.fontString(xa,Zr._bodyFontStyle,Zr._bodyFontFamily),De.each(Zr.beforeBody.concat(Zr.afterBody),on),Fl=Zr.displayColors?xa+2:0,De.each(To,function(Vl){De.each(Vl.before,on),De.each(Vl.lines,on),De.each(Vl.after,on)}),Fl=0,Qo.font=De.fontString(ua,Zr._footerFontStyle,Zr._footerFontFamily),De.each(Zr.footer,on),{width:Ii+=2*Zr.xPadding,height:Ki}}(this,rt),Mo=rt,Zr=Un,Qo=Wn=function(Mo,Zr){var Qo,Ki,Ii,To,Rr,vr=Mo._model,ma=Mo._chart,Fi=Mo._chart.chartArea,xa="center",ua="center";vr.y<Zr.height?ua="top":vr.y>ma.height-Zr.height&&(ua="bottom");var Fl=(Fi.left+Fi.right)/2,on=(Fi.top+Fi.bottom)/2;"center"===ua?(Qo=function(va){return va<=Fl},Ki=function(va){return va>Fl}):(Qo=function(va){return va<=Zr.width/2},Ki=function(va){return va>=ma.width-Zr.width/2}),Ii=function(va){return va+Zr.width+vr.caretSize+vr.caretPadding>ma.width},To=function(va){return va-Zr.width-vr.caretSize-vr.caretPadding<0},Rr=function(va){return va<=on?"top":"bottom"},Qo(vr.x)?(xa="left",Ii(vr.x)&&(xa="center",ua=Rr(vr.y))):Ki(vr.x)&&(xa="right",To(vr.x)&&(xa="center",ua=Rr(vr.y)));var Vl=Mo._options;return{xAlign:Vl.xAlign?Vl.xAlign:xa,yAlign:Vl.yAlign?Vl.yAlign:ua}}(this,Un),Ki=Fe._chart,Ii=Mo.x,To=Mo.y,ua=Mo.caretSize+(vr=Mo.caretPadding),Fl=Mo.cornerRadius+vr,"right"===(Fi=Qo.xAlign)?Ii-=Zr.width:"center"===Fi&&((Ii-=Zr.width/2)+Zr.width>Ki.width&&(Ii=Ki.width-Zr.width),Ii<0&&(Ii=0)),"top"===(xa=Qo.yAlign)?To+=ua:To-="bottom"===xa?Zr.height+ua:Zr.height/2,"center"===xa?"left"===Fi?Ii+=ua:"right"===Fi&&(Ii-=ua):"left"===Fi?Ii-=Fl:"right"===Fi&&(Ii+=Fl),An={x:Ii,y:To}}else rt.opacity=0;return rt.xAlign=Wn.xAlign,rt.yAlign=Wn.yAlign,rt.x=An.x,rt.y=An.y,rt.width=Un.width,rt.height=Un.height,rt.caretX=$n.x,rt.caretY=$n.y,Fe._model=rt,y&&Ze.custom&&Ze.custom.call(Fe,rt),Fe},drawCaret:function(y,T){var E=this._chart.ctx,U=this.getCaretPosition(y,T,this._view);E.lineTo(U.x1,U.y1),E.lineTo(U.x2,U.y2),E.lineTo(U.x3,U.y3)},getCaretPosition:function(y,T,E){var B,U,ne,ee,ae,fe,Me=E.caretSize,ke=E.cornerRadius,Fe=E.xAlign,Ze=E.yAlign,ot=y.x,rt=y.y,Ct=T.width,Vt=T.height;if("center"===Ze)ae=rt+Vt/2,"left"===Fe?(U=(B=ot)-Me,ne=B,ee=ae+Me,fe=ae-Me):(U=(B=ot+Ct)+Me,ne=B,ee=ae-Me,fe=ae+Me);else if("left"===Fe?(B=(U=ot+ke+Me)-Me,ne=U+Me):"right"===Fe?(B=(U=ot+Ct-ke-Me)-Me,ne=U+Me):(B=(U=E.caretX)-Me,ne=U+Me),"top"===Ze)ae=(ee=rt)-Me,fe=ee;else{ae=(ee=rt+Vt)+Me,fe=ee;var Wn=ne;ne=B,B=Wn}return{x1:B,x2:U,x3:ne,y1:ee,y2:ae,y3:fe}},drawTitle:function(y,T,E){var B,U,ne,ee=T.title,ae=ee.length;if(ae){var fe=Io(T.rtl,T.x,T.width);for(y.x=zs(T,T._titleAlign),E.textAlign=fe.textAlign(T._titleAlign),E.textBaseline="middle",B=T.titleFontSize,U=T.titleSpacing,E.fillStyle=T.titleFontColor,E.font=De.fontString(B,T._titleFontStyle,T._titleFontFamily),ne=0;ne<ae;++ne)E.fillText(ee[ne],fe.x(y.x),y.y+B/2),y.y+=B+U,ne+1===ae&&(y.y+=T.titleMarginBottom-U)}},drawBody:function(y,T,E){var B,U,ne,ee,ae,fe,Me,ke,Fe=T.bodyFontSize,Ze=T.bodySpacing,ot=T._bodyAlign,rt=T.body,Ct=T.displayColors,Vt=0,Wn=Ct?zs(T,"left"):0,An=Io(T.rtl,T.x,T.width),Un=function(Hr){E.fillText(Hr,An.x(y.x+Vt),y.y+Fe/2),y.y+=Fe+Ze},$n=An.textAlign(ot);for(E.textAlign=ot,E.textBaseline="middle",E.font=De.fontString(Fe,T._bodyFontStyle,T._bodyFontFamily),y.x=zs(T,$n),E.fillStyle=T.bodyFontColor,De.each(T.beforeBody,Un),Vt=Ct&&"right"!==$n?"center"===ot?Fe/2+1:Fe+2:0,ae=0,Me=rt.length;ae<Me;++ae){for(B=rt[ae],ne=T.labelColors[ae],E.fillStyle=U=T.labelTextColors[ae],De.each(B.before,Un),fe=0,ke=(ee=B.lines).length;fe<ke;++fe){if(Ct){var fr=An.x(Wn);E.fillStyle=T.legendColorBackground,E.fillRect(An.leftForLtr(fr,Fe),y.y,Fe,Fe),E.lineWidth=1,E.strokeStyle=ne.borderColor,E.strokeRect(An.leftForLtr(fr,Fe),y.y,Fe,Fe),E.fillStyle=ne.backgroundColor,E.fillRect(An.leftForLtr(An.xPlus(fr,1),Fe-2),y.y+1,Fe-2,Fe-2),E.fillStyle=U}Un(ee[fe])}De.each(B.after,Un)}Vt=0,De.each(T.afterBody,Un),y.y-=Ze},drawFooter:function(y,T,E){var B,U,ne=T.footer,ee=ne.length;if(ee){var ae=Io(T.rtl,T.x,T.width);for(y.x=zs(T,T._footerAlign),y.y+=T.footerMarginTop,E.textAlign=ae.textAlign(T._footerAlign),E.textBaseline="middle",B=T.footerFontSize,E.fillStyle=T.footerFontColor,E.font=De.fontString(B,T._footerFontStyle,T._footerFontFamily),U=0;U<ee;++U)E.fillText(ne[U],ae.x(y.x),y.y+B/2),y.y+=B+T.footerSpacing}},drawBackground:function(y,T,E,B){E.fillStyle=T.backgroundColor,E.strokeStyle=T.borderColor,E.lineWidth=T.borderWidth;var U=T.xAlign,ne=T.yAlign,ee=y.x,ae=y.y,fe=B.width,Me=B.height,ke=T.cornerRadius;E.beginPath(),E.moveTo(ee+ke,ae),"top"===ne&&this.drawCaret(y,B),E.lineTo(ee+fe-ke,ae),E.quadraticCurveTo(ee+fe,ae,ee+fe,ae+ke),"center"===ne&&"right"===U&&this.drawCaret(y,B),E.lineTo(ee+fe,ae+Me-ke),E.quadraticCurveTo(ee+fe,ae+Me,ee+fe-ke,ae+Me),"bottom"===ne&&this.drawCaret(y,B),E.lineTo(ee+ke,ae+Me),E.quadraticCurveTo(ee,ae+Me,ee,ae+Me-ke),"center"===ne&&"left"===U&&this.drawCaret(y,B),E.lineTo(ee,ae+ke),E.quadraticCurveTo(ee,ae,ee+ke,ae),E.closePath(),E.fill(),T.borderWidth>0&&E.stroke()},draw:function(){var y=this._chart.ctx,T=this._view;if(0!==T.opacity){var E={width:T.width,height:T.height},B={x:T.x,y:T.y},U=Math.abs(T.opacity<.001)?0:T.opacity;this._options.enabled&&(T.title.length||T.beforeBody.length||T.body.length||T.afterBody.length||T.footer.length)&&(y.save(),y.globalAlpha=U,this.drawBackground(B,T,y,E),B.y+=T.yPadding,De.rtl.overrideTextDirection(y,T.textDirection),this.drawTitle(B,T,y),this.drawBody(B,T,y),this.drawFooter(B,T,y),De.rtl.restoreTextDirection(y,T.textDirection),y.restore())}},handleEvent:function(y){var T,E=this,B=E._options;return E._lastActive=E._lastActive||[],"mouseout"===y.type?E._active=[]:(E._active=E._chart.getElementsAtEventForMode(y,B.mode,B),B.reverse&&E._active.reverse()),(T=!De.arrayEquals(E._active,E._lastActive))&&(E._lastActive=E._active,(B.enabled||B.custom)&&(E._eventPosition={x:y.x,y:y.y},E.update(!0),E.pivot())),T}}),Ll=Du;Ll.positioners=xg;var Lc=De.valueOrDefault;function Sp(){return De.merge(Object.create(null),[].slice.call(arguments),{merger:function(y,T,E,B){if("xAxes"===y||"yAxes"===y){var U,ne,ee,ae=E[y].length;for(T[y]||(T[y]=[]),U=0;U<ae;++U)ne=Lc((ee=E[y][U]).type,"xAxes"===y?"category":"linear"),U>=T[y].length&&T[y].push({}),De.merge(T[y][U],!T[y][U].type||ee.type&&ee.type!==T[y][U].type?[nd.getScaleDefaults(ne),ee]:ee)}else De._merger(y,T,E,B)}})}function Cp(){return De.merge(Object.create(null),[].slice.call(arguments),{merger:function(y,T,E,B){var U=T[y]||Object.create(null),ne=E[y];"scales"===y?T[y]=Sp(U,ne):"scale"===y?T[y]=De.merge(U,[nd.getScaleDefaults(ne.type),ne]):De._merger(y,T,E,B)}})}function Ad(y){var T=y.options;De.each(y.scales,function(E){Di.removeBox(y,E)}),T=Cp(mt.global,mt[y.config.type],T),y.options=y.config.options=T,y.ensureScalesHaveIDs(),y.buildOrUpdateScales(),y.tooltip._options=T.tooltips,y.tooltip.initialize()}function Id(y,T,E){var B,U=function(ne){return ne.id===B};do{B=T+E++}while(De.findIndex(y,U)>=0);return B}function _g(y){return"top"===y||"bottom"===y}function jh(y,T){return function(E,B){return E[y]===B[y]?E[T]-B[T]:E[y]-B[y]}}mt._set("global",{elements:{},events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,maintainAspectRatio:!0,responsive:!0,responsiveAnimationDuration:0});var vc=function(y,T){return this.construct(y,T),this};De.extend(vc.prototype,{construct:function(y,T){var ae,fe,E=this;(fe=(ae=(ae=T)||Object.create(null)).data=ae.data||{}).datasets=fe.datasets||[],fe.labels=fe.labels||[],ae.options=Cp(mt.global,mt[ae.type],ae.options||{});var B=Xs.acquireContext(y,T=ae),U=B&&B.canvas,ne=U&&U.height,ee=U&&U.width;E.id=De.uid(),E.ctx=B,E.canvas=U,E.config=T,E.width=ee,E.height=ne,E.aspectRatio=ne?ee/ne:null,E.options=T.options,E._bufferedRender=!1,E._layers=[],E.chart=E,E.controller=E,vc.instances[E.id]=E,Object.defineProperty(E,"data",{get:function(){return E.config.data},set:function(ae){E.config.data=ae}}),B&&U?(E.initialize(),E.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var y=this;return $o.notify(y,"beforeInit"),De.retinaScale(y,y.options.devicePixelRatio),y.bindEvents(),y.options.responsive&&y.resize(!0),y.initToolTip(),$o.notify(y,"afterInit"),y},clear:function(){return De.canvas.clear(this),this},stop:function(){return ku.cancelAnimation(this),this},resize:function(y){var T=this,E=T.options,B=T.canvas,U=E.maintainAspectRatio&&T.aspectRatio||null,ne=Math.max(0,Math.floor(De.getMaximumWidth(B))),ee=Math.max(0,Math.floor(U?ne/U:De.getMaximumHeight(B)));if((T.width!==ne||T.height!==ee)&&(B.width=T.width=ne,B.height=T.height=ee,B.style.width=ne+"px",B.style.height=ee+"px",De.retinaScale(T,E.devicePixelRatio),!y)){var ae={width:ne,height:ee};$o.notify(T,"resize",[ae]),E.onResize&&E.onResize(T,ae),T.stop(),T.update({duration:E.responsiveAnimationDuration})}},ensureScalesHaveIDs:function(){var y=this.options,T=y.scales||{},E=y.scale;De.each(T.xAxes,function(B,U){B.id||(B.id=Id(T.xAxes,"x-axis-",U))}),De.each(T.yAxes,function(B,U){B.id||(B.id=Id(T.yAxes,"y-axis-",U))}),E&&(E.id=E.id||"scale")},buildOrUpdateScales:function(){var y=this,T=y.options,E=y.scales||{},B=[],U=Object.keys(E).reduce(function(ne,ee){return ne[ee]=!1,ne},{});T.scales&&(B=B.concat((T.scales.xAxes||[]).map(function(ne){return{options:ne,dtype:"category",dposition:"bottom"}}),(T.scales.yAxes||[]).map(function(ne){return{options:ne,dtype:"linear",dposition:"left"}}))),T.scale&&B.push({options:T.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),De.each(B,function(ne){var ee=ne.options,ae=ee.id,fe=Lc(ee.type,ne.dtype);_g(ee.position)!==_g(ne.dposition)&&(ee.position=ne.dposition),U[ae]=!0;var Me=null;if(ae in E&&E[ae].type===fe)(Me=E[ae]).options=ee,Me.ctx=y.ctx,Me.chart=y;else{var ke=nd.getScaleConstructor(fe);if(!ke)return;Me=new ke({id:ae,type:fe,options:ee,ctx:y.ctx,chart:y}),E[Me.id]=Me}Me.mergeTicksOptions(),ne.isDefault&&(y.scale=Me)}),De.each(U,function(ne,ee){ne||delete E[ee]}),y.scales=E,nd.addScalesToLayout(this)},buildOrUpdateControllers:function(){var y,T,E=this,B=[],U=E.data.datasets;for(y=0,T=U.length;y<T;y++){var ne=U[y],ee=E.getDatasetMeta(y),ae=ne.type||E.config.type;if(ee.type&&ee.type!==ae&&(E.destroyDatasetMeta(y),ee=E.getDatasetMeta(y)),ee.type=ae,ee.order=ne.order||0,ee.index=y,ee.controller)ee.controller.updateIndex(y),ee.controller.linkScales();else{var fe=Dr[ee.type];if(void 0===fe)throw new Error('"'+ee.type+'" is not a chart type.');ee.controller=new fe(E,y),B.push(ee.controller)}}return B},resetElements:function(){var y=this;De.each(y.data.datasets,function(T,E){y.getDatasetMeta(E).controller.reset()},y)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(y){var T,E,B=this;if(y&&"object"==typeof y||(y={duration:y,lazy:arguments[1]}),Ad(B),$o._invalidate(B),!1!==$o.notify(B,"beforeUpdate")){B.tooltip._data=B.data;var U=B.buildOrUpdateControllers();for(T=0,E=B.data.datasets.length;T<E;T++)B.getDatasetMeta(T).controller.buildOrUpdateElements();B.updateLayout(),B.options.animation&&B.options.animation.duration&&De.each(U,function(ne){ne.reset()}),B.updateDatasets(),B.tooltip.initialize(),B.lastActive=[],$o.notify(B,"afterUpdate"),B._layers.sort(jh("z","_idx")),B._bufferedRender?B._bufferedRequest={duration:y.duration,easing:y.easing,lazy:y.lazy}:B.render(y)}},updateLayout:function(){var y=this;!1!==$o.notify(y,"beforeLayout")&&(Di.update(this,this.width,this.height),y._layers=[],De.each(y.boxes,function(T){T._configure&&T._configure(),y._layers.push.apply(y._layers,T._layers())},y),y._layers.forEach(function(T,E){T._idx=E}),$o.notify(y,"afterScaleUpdate"),$o.notify(y,"afterLayout"))},updateDatasets:function(){if(!1!==$o.notify(this,"beforeDatasetsUpdate")){for(var y=0,T=this.data.datasets.length;y<T;++y)this.updateDataset(y);$o.notify(this,"afterDatasetsUpdate")}},updateDataset:function(y){var T=this.getDatasetMeta(y),E={meta:T,index:y};!1!==$o.notify(this,"beforeDatasetUpdate",[E])&&(T.controller._update(),$o.notify(this,"afterDatasetUpdate",[E]))},render:function(y){var T=this;y&&"object"==typeof y||(y={duration:y,lazy:arguments[1]});var E=T.options.animation,B=Lc(y.duration,E&&E.duration),U=y.lazy;if(!1!==$o.notify(T,"beforeRender")){var ne=function(ae){$o.notify(T,"afterRender"),De.callback(E&&E.onComplete,[ae],T)};if(E&&B){var ee=new ca({numSteps:B/16.66,easing:y.easing||E.easing,render:function(ae,fe){var ke=fe.currentStep,Fe=ke/fe.numSteps;ae.draw((0,De.easing.effects[fe.easing])(Fe),Fe,ke)},onAnimationProgress:E.onProgress,onAnimationComplete:ne});ku.addAnimation(T,ee,B,U)}else T.draw(),ne(new ca({numSteps:0,chart:T}));return T}},draw:function(y){var T,E,B=this;if(B.clear(),De.isNullOrUndef(y)&&(y=1),B.transition(y),!(B.width<=0||B.height<=0)&&!1!==$o.notify(B,"beforeDraw",[y])){for(E=B._layers,T=0;T<E.length&&E[T].z<=0;++T)E[T].draw(B.chartArea);for(B.drawDatasets(y);T<E.length;++T)E[T].draw(B.chartArea);B._drawTooltip(y),$o.notify(B,"afterDraw",[y])}},transition:function(y){for(var T=0,E=(this.data.datasets||[]).length;T<E;++T)this.isDatasetVisible(T)&&this.getDatasetMeta(T).controller.transition(y);this.tooltip.transition(y)},_getSortedDatasetMetas:function(y){var T,E,B=[];for(T=0,E=(this.data.datasets||[]).length;T<E;++T)y&&!this.isDatasetVisible(T)||B.push(this.getDatasetMeta(T));return B.sort(jh("order","index")),B},_getSortedVisibleDatasetMetas:function(){return this._getSortedDatasetMetas(!0)},drawDatasets:function(y){var T,E;if(!1!==$o.notify(this,"beforeDatasetsDraw",[y])){for(E=(T=this._getSortedVisibleDatasetMetas()).length-1;E>=0;--E)this.drawDataset(T[E],y);$o.notify(this,"afterDatasetsDraw",[y])}},drawDataset:function(y,T){var E={meta:y,index:y.index,easingValue:T};!1!==$o.notify(this,"beforeDatasetDraw",[E])&&(y.controller.draw(T),$o.notify(this,"afterDatasetDraw",[E]))},_drawTooltip:function(y){var T=this.tooltip,E={tooltip:T,easingValue:y};!1!==$o.notify(this,"beforeTooltipDraw",[E])&&(T.draw(),$o.notify(this,"afterTooltipDraw",[E]))},getElementAtEvent:function(y){return Wa.modes.single(this,y)},getElementsAtEvent:function(y){return Wa.modes.label(this,y,{intersect:!0})},getElementsAtXAxis:function(y){return Wa.modes["x-axis"](this,y,{intersect:!0})},getElementsAtEventForMode:function(y,T,E){var B=Wa.modes[T];return"function"==typeof B?B(this,y,E):[]},getDatasetAtEvent:function(y){return Wa.modes.dataset(this,y,{intersect:!0})},getDatasetMeta:function(y){var T=this.data.datasets[y];T._meta||(T._meta={});var E=T._meta[this.id];return E||(E=T._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:T.order||0,index:y}),E},getVisibleDatasetCount:function(){for(var y=0,T=0,E=this.data.datasets.length;T<E;++T)this.isDatasetVisible(T)&&y++;return y},isDatasetVisible:function(y){var T=this.getDatasetMeta(y);return"boolean"==typeof T.hidden?!T.hidden:!this.data.datasets[y].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(y){var T=this.id,E=this.data.datasets[y],B=E._meta&&E._meta[T];B&&(B.controller.destroy(),delete E._meta[T])},destroy:function(){var y,T,E=this,B=E.canvas;for(E.stop(),y=0,T=E.data.datasets.length;y<T;++y)E.destroyDatasetMeta(y);B&&(E.unbindEvents(),De.canvas.clear(E),Xs.releaseContext(E.ctx),E.canvas=null,E.ctx=null),$o.notify(E,"destroy"),delete vc.instances[E.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var y=this;y.tooltip=new Ll({_chart:y,_chartInstance:y,_data:y.data,_options:y.options.tooltips},y)},bindEvents:function(){var y=this,T=y._listeners={},E=function(){y.eventHandler.apply(y,arguments)};De.each(y.options.events,function(B){Xs.addEventListener(y,B,E),T[B]=E}),y.options.responsive&&(E=function(){y.resize()},Xs.addEventListener(y,"resize",E),T.resize=E)},unbindEvents:function(){var y=this,T=y._listeners;T&&(delete y._listeners,De.each(T,function(E,B){Xs.removeEventListener(y,B,E)}))},updateHoverStyle:function(y,T,E){var B,U,ne,ee=E?"set":"remove";for(U=0,ne=y.length;U<ne;++U)(B=y[U])&&this.getDatasetMeta(B._datasetIndex).controller[ee+"HoverStyle"](B);"dataset"===T&&this.getDatasetMeta(y[0]._datasetIndex).controller["_"+ee+"DatasetHoverStyle"]()},eventHandler:function(y){var T=this,E=T.tooltip;if(!1!==$o.notify(T,"beforeEvent",[y])){T._bufferedRender=!0,T._bufferedRequest=null;var B=T.handleEvent(y);E&&(B=E._start?E.handleEvent(y):B|E.handleEvent(y)),$o.notify(T,"afterEvent",[y]);var U=T._bufferedRequest;return U?T.render(U):B&&!T.animating&&(T.stop(),T.render({duration:T.options.hover.animationDuration,lazy:!0})),T._bufferedRender=!1,T._bufferedRequest=null,T}},handleEvent:function(y){var T,E=this,B=E.options||{},U=B.hover;return E.lastActive=E.lastActive||[],E.active="mouseout"===y.type?[]:E.getElementsAtEventForMode(y,U.mode,U),De.callback(B.onHover||B.hover.onHover,[y.native,E.active],E),"mouseup"!==y.type&&"click"!==y.type||B.onClick&&B.onClick.call(E,y.native,E.active),E.lastActive.length&&E.updateHoverStyle(E.lastActive,U.mode,!1),E.active.length&&U.mode&&E.updateHoverStyle(E.active,U.mode,!0),T=!De.arrayEquals(E.active,E.lastActive),E.lastActive=E.active,T}}),vc.instances={};var Ai=vc;function sa(){throw new Error("This method is not implemented: either no adapter can be found or an incomplete integration was provided.")}function ch(y){this.options=y||{}}vc.Controller=vc,vc.types={},De.configMerge=Cp,De.scaleMerge=Sp,De.extend(ch.prototype,{formats:sa,parse:sa,format:sa,add:sa,diff:sa,startOf:sa,endOf:sa,_create:function(y){return y}}),ch.override=function(y){De.extend(ch.prototype,y)};var Nl={_date:ch},Cf={formatters:{values:function(y){return De.isArray(y)?y:""+y},linear:function(y,T,E){var B=E.length>3?E[2]-E[1]:E[1]-E[0];Math.abs(B)>1&&y!==Math.floor(y)&&(B=y-Math.floor(y));var U=De.log10(Math.abs(B)),ne="";if(0!==y)if(Math.max(Math.abs(E[0]),Math.abs(E[E.length-1]))<1e-4){var ee=De.log10(Math.abs(y)),ae=Math.floor(ee)-Math.floor(U);ae=Math.max(Math.min(ae,20),0),ne=y.toExponential(ae)}else{var fe=-1*Math.floor(U);fe=Math.max(Math.min(fe,20),0),ne=y.toFixed(fe)}else ne="0";return ne},logarithmic:function(y,T,E){var B=y/Math.pow(10,Math.floor(De.log10(y)));return 0===y?"0":1===B||2===B||5===B||0===T||T===E.length-1?y.toExponential():""}}},Mf=De.isArray,ol=De.isNullOrUndef,nf=De.valueOrDefault,fu=De.valueAtIndexOrDefault;function yc(y,T,E){var B,U=y.getTicks().length,ne=Math.min(T,U-1),ee=y.getPixelForTick(ne),ae=y._startPixel,fe=y._endPixel;if(!(E&&(B=1===U?Math.max(ee-ae,fe-ee):0===T?(y.getPixelForTick(1)-ee)/2:(ee-y.getPixelForTick(ne-1))/2,(ee+=ne<T?B:-B)<ae-1e-6||ee>fe+1e-6)))return ee}function fs(y){return y.drawTicks?y.tickMarkLength:0}function zi(y){var T,E;return y.display?(T=De.options._parseFont(y),E=De.options.toPadding(y.padding),T.lineHeight+E.height):0}function Bl(y,T){return De.extend(De.options._parseFont({fontFamily:nf(T.fontFamily,y.fontFamily),fontSize:nf(T.fontSize,y.fontSize),fontStyle:nf(T.fontStyle,y.fontStyle),lineHeight:nf(T.lineHeight,y.lineHeight)}),{color:De.options.resolve([T.fontColor,y.fontColor,mt.global.defaultFontColor])})}function ec(y){var T=Bl(y,y.minor);return{minor:T,major:y.major.enabled?Bl(y,y.major):T}}function Zs(y){var T,E,B,U=[];for(E=0,B=y.length;E<B;++E)void 0!==(T=y[E])._index&&U.push(T);return U}function Da(y,T,E,B){var U,ne,ee,ae,fe=nf(E,0),Me=Math.min(nf(B,y.length),y.length),ke=0;for(T=Math.ceil(T),B&&(T=(U=B-E)/Math.floor(U/T)),ae=fe;ae<0;)ke++,ae=Math.round(fe+ke*T);for(ne=Math.max(fe,0);ne<Me;ne++)ee=y[ne],ne===ae?(ee._index=ne,ke++,ae=Math.round(fe+ke*T)):delete ee.label}mt._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:Cf.formatters.values,minor:{},major:{}}});var rd=wr.extend({zeroLineIndex:0,getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},_getLabels:function(){var y=this.chart.data;return this.options.labels||(this.isHorizontal()?y.xLabels:y.yLabels)||y.labels||[]},mergeTicksOptions:function(){},beforeUpdate:function(){De.callback(this.options.beforeUpdate,[this])},update:function(y,T,E){var B,U,ne,ee,ae,fe=this,Me=fe.options.ticks,ke=Me.sampleSize;if(fe.beforeUpdate(),fe.maxWidth=y,fe.maxHeight=T,fe.margins=De.extend({left:0,right:0,top:0,bottom:0},E),fe._ticks=null,fe.ticks=null,fe._labelSizes=null,fe._maxLabelLines=0,fe.longestLabelWidth=0,fe.longestTextCache=fe.longestTextCache||{},fe._gridLineItems=null,fe._labelItems=null,fe.beforeSetDimensions(),fe.setDimensions(),fe.afterSetDimensions(),fe.beforeDataLimits(),fe.determineDataLimits(),fe.afterDataLimits(),fe.beforeBuildTicks(),ee=fe.buildTicks()||[],(!(ee=fe.afterBuildTicks(ee)||ee)||!ee.length)&&fe.ticks)for(ee=[],B=0,U=fe.ticks.length;B<U;++B)ee.push({value:fe.ticks[B],major:!1});return fe._ticks=ee,ne=fe._convertTicksToLabels((ae=ke<ee.length)?function(Fe,Ze){for(var ot=[],rt=Fe.length/Ze,Ct=0,Vt=Fe.length;Ct<Vt;Ct+=rt)ot.push(Fe[Math.floor(Ct)]);return ot}(ee,ke):ee),fe._configure(),fe.beforeCalculateTickRotation(),fe.calculateTickRotation(),fe.afterCalculateTickRotation(),fe.beforeFit(),fe.fit(),fe.afterFit(),fe._ticksToDraw=Me.display&&(Me.autoSkip||"auto"===Me.source)?fe._autoSkip(ee):ee,ae&&(ne=fe._convertTicksToLabels(fe._ticksToDraw)),fe.ticks=ne,fe.afterUpdate(),fe.minSize},_configure:function(){var y,T,E=this,B=E.options.ticks.reverse;E.isHorizontal()?(y=E.left,T=E.right):(y=E.top,T=E.bottom,B=!B),E._startPixel=y,E._endPixel=T,E._reversePixels=B,E._length=T-y},afterUpdate:function(){De.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){De.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var y=this;y.isHorizontal()?(y.width=y.maxWidth,y.left=0,y.right=y.width):(y.height=y.maxHeight,y.top=0,y.bottom=y.height),y.paddingLeft=0,y.paddingTop=0,y.paddingRight=0,y.paddingBottom=0},afterSetDimensions:function(){De.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){De.callback(this.options.beforeDataLimits,[this])},determineDataLimits:De.noop,afterDataLimits:function(){De.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){De.callback(this.options.beforeBuildTicks,[this])},buildTicks:De.noop,afterBuildTicks:function(y){var T=this;return Mf(y)&&y.length?De.callback(T.options.afterBuildTicks,[T,y]):(T.ticks=De.callback(T.options.afterBuildTicks,[T,T.ticks])||T.ticks,y)},beforeTickToLabelConversion:function(){De.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var y=this.options.ticks;this.ticks=this.ticks.map(y.userCallback||y.callback,this)},afterTickToLabelConversion:function(){De.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){De.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var y,T,E,B,U,ne,ee,ae=this,fe=ae.options,Me=fe.ticks,ke=ae.getTicks().length,Fe=Me.minRotation||0,Ze=Me.maxRotation,ot=Fe;!ae._isVisible()||!Me.display||Fe>=Ze||ke<=1||!ae.isHorizontal()?ae.labelRotation=Fe:(T=(y=ae._getLabelSizes()).widest.width,E=y.highest.height-y.highest.offset,B=Math.min(ae.maxWidth,ae.chart.width-T),T+6>(U=fe.offset?ae.maxWidth/ke:B/(ke-1))&&(U=B/(ke-(fe.offset?.5:1)),ne=ae.maxHeight-fs(fe.gridLines)-Me.padding-zi(fe.scaleLabel),ee=Math.sqrt(T*T+E*E),ot=De.toDegrees(Math.min(Math.asin(Math.min((y.highest.height+6)/U,1)),Math.asin(Math.min(ne/ee,1))-Math.asin(E/ee))),ot=Math.max(Fe,Math.min(Ze,ot))),ae.labelRotation=ot)},afterCalculateTickRotation:function(){De.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){De.callback(this.options.beforeFit,[this])},fit:function(){var y=this,T=y.minSize={width:0,height:0},E=y.chart,B=y.options,U=B.ticks,ne=B.scaleLabel,ee=B.gridLines,ae=y._isVisible(),fe="bottom"===B.position,Me=y.isHorizontal();if(Me?T.width=y.maxWidth:ae&&(T.width=fs(ee)+zi(ne)),Me?ae&&(T.height=fs(ee)+zi(ne)):T.height=y.maxHeight,U.display&&ae){var ke=ec(U),Fe=y._getLabelSizes(),Ze=Fe.first,ot=Fe.last,rt=Fe.widest,Ct=Fe.highest,Vt=.4*ke.minor.lineHeight,Wn=U.padding;if(Me){var An=0!==y.labelRotation,Un=De.toRadians(y.labelRotation),$n=Math.cos(Un),fr=Math.sin(Un);T.height=Math.min(y.maxHeight,T.height+(fr*rt.width+$n*(Ct.height-(An?Ct.offset:0))+(An?0:Vt))+Wn);var Co,Mo,Zr=y.getPixelForTick(0)-y.left,Qo=y.right-y.getPixelForTick(y.getTicks().length-1);An?(Co=fe?$n*Ze.width+fr*Ze.offset:fr*(Ze.height-Ze.offset),Mo=fe?fr*(ot.height-ot.offset):$n*ot.width+fr*ot.offset):(Co=Ze.width/2,Mo=ot.width/2),y.paddingLeft=Math.max((Co-Zr)*y.width/(y.width-Zr),0)+3,y.paddingRight=Math.max((Mo-Qo)*y.width/(y.width-Qo),0)+3}else T.width=Math.min(y.maxWidth,T.width+(U.mirror?0:rt.width+Wn+Vt)),y.paddingTop=Ze.height/2,y.paddingBottom=ot.height/2}y.handleMargins(),Me?(y.width=y._length=E.width-y.margins.left-y.margins.right,y.height=T.height):(y.width=T.width,y.height=y._length=E.height-y.margins.top-y.margins.bottom)},handleMargins:function(){var y=this;y.margins&&(y.margins.left=Math.max(y.paddingLeft,y.margins.left),y.margins.top=Math.max(y.paddingTop,y.margins.top),y.margins.right=Math.max(y.paddingRight,y.margins.right),y.margins.bottom=Math.max(y.paddingBottom,y.margins.bottom))},afterFit:function(){De.callback(this.options.afterFit,[this])},isHorizontal:function(){var y=this.options.position;return"top"===y||"bottom"===y},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(y){if(ol(y))return NaN;if(("number"==typeof y||y instanceof Number)&&!isFinite(y))return NaN;if(y)if(this.isHorizontal()){if(void 0!==y.x)return this.getRightValue(y.x)}else if(void 0!==y.y)return this.getRightValue(y.y);return y},_convertTicksToLabels:function(y){var T,E,B,U=this;for(U.ticks=y.map(function(ne){return ne.value}),U.beforeTickToLabelConversion(),T=U.convertTicksToLabels(y)||U.ticks,U.afterTickToLabelConversion(),E=0,B=y.length;E<B;++E)y[E].label=T[E];return T},_getLabelSizes:function(){var y=this,T=y._labelSizes;return T||(y._labelSizes=T=function Ta(y,T,E,B){var U,ne,ee,ae,fe,Me,ke,Fe,Ze,ot,rt,Ct,Vt,Zr,Wn=E.length,An=[],Un=[],$n=[],fr=0,Hr=0;for(U=0;U<Wn;++U){if(ae=E[U].label,y.font=Me=(fe=E[U].major?T.major:T.minor).string,ke=B[Me]=B[Me]||{data:{},gc:[]},Fe=fe.lineHeight,Ze=ot=0,ol(ae)||Mf(ae)){if(Mf(ae))for(ne=0,ee=ae.length;ne<ee;++ne)ol(rt=ae[ne])||Mf(rt)||(Ze=De.measureText(y,ke.data,ke.gc,Ze,rt),ot+=Fe)}else Ze=De.measureText(y,ke.data,ke.gc,Ze,ae),ot=Fe;An.push(Ze),Un.push(ot),$n.push(Fe/2),fr=Math.max(Ze,fr),Hr=Math.max(ot,Hr)}function Co(Mo){return{width:An[Mo]||0,height:Un[Mo]||0,offset:$n[Mo]||0}}return Zr=Wn,De.each(B,function(Qo){var Ki,Ii=Qo.gc,To=Ii.length/2;if(To>Zr){for(Ki=0;Ki<To;++Ki)delete Qo.data[Ii[Ki]];Ii.splice(0,To)}}),Ct=An.indexOf(fr),Vt=Un.indexOf(Hr),{first:Co(0),last:Co(Wn-1),widest:Co(Ct),highest:Co(Vt)}}(y.ctx,ec(y.options.ticks),y.getTicks(),y.longestTextCache),y.longestLabelWidth=T.widest.width),T},_parseValue:function(y){var T,E,B,U;return Mf(y)?(T=+this.getRightValue(y[0]),E=+this.getRightValue(y[1]),B=Math.min(T,E),U=Math.max(T,E)):(T=void 0,E=y=+this.getRightValue(y),B=y,U=y),{min:B,max:U,start:T,end:E}},_getScaleLabel:function(y){var T=this._parseValue(y);return void 0!==T.start?"["+T.start+", "+T.end+"]":+this.getRightValue(y)},getLabelForIndex:De.noop,getPixelForValue:De.noop,getValueForPixel:De.noop,getPixelForTick:function(y){var T=this.options.offset,E=this._ticks.length,B=1/Math.max(E-(T?0:1),1);return y<0||y>E-1?null:this.getPixelForDecimal(y*B+(T?B/2:0))},getPixelForDecimal:function(y){return this._reversePixels&&(y=1-y),this._startPixel+y*this._length},getDecimalForPixel:function(y){var T=(y-this._startPixel)/this._length;return this._reversePixels?1-T:T},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var y=this.min,T=this.max;return this.beginAtZero?0:y<0&&T<0?T:y>0&&T>0?y:0},_autoSkip:function(y){var T,E,B,U,ne=this.options.ticks,ae=ne.maxTicksLimit||this._length/this._tickSize()+1,fe=ne.major.enabled?function(Ze){var ot,rt,Ct=[];for(ot=0,rt=Ze.length;ot<rt;ot++)Ze[ot].major&&Ct.push(ot);return Ct}(y):[],Me=fe.length,ke=fe[0],Fe=fe[Me-1];if(Me>ae)return function(Ze,ot,rt){var Ct,Vt,Wn=0,An=ot[0];for(rt=Math.ceil(rt),Ct=0;Ct<Ze.length;Ct++)Vt=Ze[Ct],Ct===An?(Vt._index=Ct,An=ot[++Wn*rt]):delete Vt.label}(y,fe,Me/ae),Zs(y);if(B=function(Ze,ot,rt,Ct){var Vt,Wn,An,Un,$n=function(Hr){var Co,Mo,Zr=Hr.length;if(Zr<2)return!1;for(Mo=Hr[0],Co=1;Co<Zr;++Co)if(Hr[Co]-Hr[Co-1]!==Mo)return!1;return Mo}(Ze),fr=(ot.length-1)/Ct;if(!$n)return Math.max(fr,1);for(An=0,Un=(Vt=De.math._factorize($n)).length-1;An<Un;An++)if((Wn=Vt[An])>fr)return Wn;return Math.max(fr,1)}(fe,y,0,ae),Me>0){for(T=0,E=Me-1;T<E;T++)Da(y,B,fe[T],fe[T+1]);return Da(y,B,De.isNullOrUndef(U=Me>1?(Fe-ke)/(Me-1):null)?0:ke-U,ke),Da(y,B,Fe,De.isNullOrUndef(U)?y.length:Fe+U),Zs(y)}return Da(y,B),Zs(y)},_tickSize:function(){var y=this.options.ticks,T=De.toRadians(this.labelRotation),E=Math.abs(Math.cos(T)),B=Math.abs(Math.sin(T)),U=this._getLabelSizes(),ne=y.autoSkipPadding||0,ee=U?U.widest.width+ne:0,ae=U?U.highest.height+ne:0;return this.isHorizontal()?ae*E>ee*B?ee/E:ae/B:ae*B<ee*E?ae/E:ee/B},_isVisible:function(){var y,T,E,B=this.chart,U=this.options.display;if("auto"!==U)return!!U;for(y=0,T=B.data.datasets.length;y<T;++y)if(B.isDatasetVisible(y)&&((E=B.getDatasetMeta(y)).xAxisID===this.id||E.yAxisID===this.id))return!0;return!1},_computeGridLineItems:function(y){var T,E,B,U,ne,ee,ae,fe,Me,ke,Fe,Ze,ot,rt,Ct,Vt,Wn,An=this,Un=An.chart,$n=An.options,fr=$n.gridLines,Hr=$n.position,Co=fr.offsetGridLines,Mo=An.isHorizontal(),Zr=An._ticksToDraw,Qo=Zr.length+(Co?1:0),Ki=fs(fr),Ii=[],To=fr.drawBorder?fu(fr.lineWidth,0,0):0,Rr=To/2,vr=De._alignPixel,ma=function(Fi){return vr(Un,Fi,To)};for("top"===Hr?(T=ma(An.bottom),ae=An.bottom-Ki,Me=T-Rr,Fe=ma(y.top)+Rr,ot=y.bottom):"bottom"===Hr?(T=ma(An.top),Fe=y.top,ot=ma(y.bottom)-Rr,ae=T+Rr,Me=An.top+Ki):"left"===Hr?(T=ma(An.right),ee=An.right-Ki,fe=T-Rr,ke=ma(y.left)+Rr,Ze=y.right):(T=ma(An.left),ke=y.left,Ze=ma(y.right)-Rr,ee=T+Rr,fe=An.left+Ki),E=0;E<Qo;++E)ol((B=Zr[E]||{}).label)&&E<Zr.length||(E===An.zeroLineIndex&&$n.offset===Co?(rt=fr.zeroLineWidth,Ct=fr.zeroLineColor,Vt=fr.zeroLineBorderDash||[],Wn=fr.zeroLineBorderDashOffset||0):(rt=fu(fr.lineWidth,E,1),Ct=fu(fr.color,E,"rgba(0,0,0,0.1)"),Vt=fr.borderDash||[],Wn=fr.borderDashOffset||0),void 0!==(U=yc(An,B._index||E,Co))&&(ne=vr(Un,U,rt),Mo?ee=fe=ke=Ze=ne:ae=Me=Fe=ot=ne,Ii.push({tx1:ee,ty1:ae,tx2:fe,ty2:Me,x1:ke,y1:Fe,x2:Ze,y2:ot,width:rt,color:Ct,borderDash:Vt,borderDashOffset:Wn})));return Ii.ticksLength=Qo,Ii.borderValue=T,Ii},_computeLabelItems:function(){var y,T,E,B,U,ne,ee,ae,fe,Me,ke,Fe,Ze=this,ot=Ze.options,rt=ot.ticks,Ct=ot.position,Vt=rt.mirror,Wn=Ze.isHorizontal(),An=Ze._ticksToDraw,Un=ec(rt),$n=rt.padding,fr=fs(ot.gridLines),Hr=-De.toRadians(Ze.labelRotation),Co=[];for("top"===Ct?(ne=Ze.bottom-fr-$n,ee=Hr?"left":"center"):"bottom"===Ct?(ne=Ze.top+fr+$n,ee=Hr?"right":"center"):"left"===Ct?(U=Ze.right-(Vt?0:fr)-$n,ee=Vt?"left":"right"):(U=Ze.left+(Vt?0:fr)+$n,ee=Vt?"right":"left"),y=0,T=An.length;y<T;++y)B=(E=An[y]).label,ol(B)||(ae=Ze.getPixelForTick(E._index||y)+rt.labelOffset,Me=(fe=E.major?Un.major:Un.minor).lineHeight,ke=Mf(B)?B.length:1,Wn?(U=ae,Fe="top"===Ct?((Hr?1:.5)-ke)*Me:(Hr?0:.5)*Me):(ne=ae,Fe=(1-ke)*Me/2),Co.push({x:U,y:ne,rotation:Hr,label:B,font:fe,textOffset:Fe,textAlign:ee}));return Co},_drawGrid:function(y){var T=this,E=T.options.gridLines;if(E.display){var B,U,ne,ee,ae,fe=T.ctx,Me=T.chart,ke=De._alignPixel,Fe=E.drawBorder?fu(E.lineWidth,0,0):0,Ze=T._gridLineItems||(T._gridLineItems=T._computeGridLineItems(y));for(ne=0,ee=Ze.length;ne<ee;++ne)B=(ae=Ze[ne]).width,U=ae.color,B&&U&&(fe.save(),fe.lineWidth=B,fe.strokeStyle=U,fe.setLineDash&&(fe.setLineDash(ae.borderDash),fe.lineDashOffset=ae.borderDashOffset),fe.beginPath(),E.drawTicks&&(fe.moveTo(ae.tx1,ae.ty1),fe.lineTo(ae.tx2,ae.ty2)),E.drawOnChartArea&&(fe.moveTo(ae.x1,ae.y1),fe.lineTo(ae.x2,ae.y2)),fe.stroke(),fe.restore());if(Fe){var ot,rt,Ct,Vt,Wn=Fe,An=fu(E.lineWidth,Ze.ticksLength-1,1),Un=Ze.borderValue;T.isHorizontal()?(ot=ke(Me,T.left,Wn)-Wn/2,rt=ke(Me,T.right,An)+An/2,Ct=Vt=Un):(Ct=ke(Me,T.top,Wn)-Wn/2,Vt=ke(Me,T.bottom,An)+An/2,ot=rt=Un),fe.lineWidth=Fe,fe.strokeStyle=fu(E.color,0),fe.beginPath(),fe.moveTo(ot,Ct),fe.lineTo(rt,Vt),fe.stroke()}}},_drawLabels:function(){var y=this;if(y.options.ticks.display){var T,E,B,U,ne,ee,ae,fe,Me=y.ctx,ke=y._labelItems||(y._labelItems=y._computeLabelItems());for(T=0,B=ke.length;T<B;++T){if(ee=(ne=ke[T]).font,Me.save(),Me.translate(ne.x,ne.y),Me.rotate(ne.rotation),Me.font=ee.string,Me.fillStyle=ee.color,Me.textBaseline="middle",Me.textAlign=ne.textAlign,fe=ne.textOffset,Mf(ae=ne.label))for(E=0,U=ae.length;E<U;++E)Me.fillText(""+ae[E],0,fe),fe+=ee.lineHeight;else Me.fillText(ae,0,fe);Me.restore()}}},_drawTitle:function(){var y=this,T=y.ctx,E=y.options,B=E.scaleLabel;if(B.display){var U,ne,ee=nf(B.fontColor,mt.global.defaultFontColor),ae=De.options._parseFont(B),fe=De.options.toPadding(B.padding),Me=ae.lineHeight/2,ke=E.position,Fe=0;if(y.isHorizontal())U=y.left+y.width/2,ne="bottom"===ke?y.bottom-Me-fe.bottom:y.top+Me+fe.top;else{var Ze="left"===ke;U=Ze?y.left+Me+fe.top:y.right-Me-fe.top,ne=y.top+y.height/2,Fe=Ze?-.5*Math.PI:.5*Math.PI}T.save(),T.translate(U,ne),T.rotate(Fe),T.textAlign="center",T.textBaseline="middle",T.fillStyle=ee,T.font=ae.string,T.fillText(B.labelString,0,0),T.restore()}},draw:function(y){this._isVisible()&&(this._drawGrid(y),this._drawTitle(),this._drawLabels())},_layers:function(){var y=this,T=y.options,E=T.ticks&&T.ticks.z||0,B=T.gridLines&&T.gridLines.z||0;return y._isVisible()&&E!==B&&y.draw===y._draw?[{z:B,draw:function(){y._drawGrid.apply(y,arguments),y._drawTitle.apply(y,arguments)}},{z:E,draw:function(){y._drawLabels.apply(y,arguments)}}]:[{z:E,draw:function(){y.draw.apply(y,arguments)}}]},_getMatchingVisibleMetas:function(y){var T=this,E=T.isHorizontal();return T.chart._getSortedVisibleDatasetMetas().filter(function(B){return(!y||B.type===y)&&(E?B.xAxisID===T.id:B.yAxisID===T.id)})}});rd.prototype._draw=rd.prototype.draw;var zl=rd,Nc=De.isNullOrUndef,kf=zl.extend({determineDataLimits:function(){var y,T=this,E=T._getLabels(),B=T.options.ticks,U=B.min,ne=B.max,ee=0,ae=E.length-1;void 0!==U&&(y=E.indexOf(U))>=0&&(ee=y),void 0!==ne&&(y=E.indexOf(ne))>=0&&(ae=y),T.minIndex=ee,T.maxIndex=ae,T.min=E[ee],T.max=E[ae]},buildTicks:function(){var y=this._getLabels(),T=this.minIndex,E=this.maxIndex;this.ticks=0===T&&E===y.length-1?y:y.slice(T,E+1)},getLabelForIndex:function(y,T){var E=this.chart;return E.getDatasetMeta(T).controller._getValueScaleId()===this.id?this.getRightValue(E.data.datasets[T].data[y]):this._getLabels()[y]},_configure:function(){var y=this,T=y.options.offset,E=y.ticks;zl.prototype._configure.call(y),y.isHorizontal()||(y._reversePixels=!y._reversePixels),E&&(y._startValue=y.minIndex-(T?.5:0),y._valueRange=Math.max(E.length-(T?0:1),1))},getPixelForValue:function(y,T,E){var B,U,ne,ee=this;return Nc(T)||Nc(E)||(y=ee.chart.data.datasets[E].data[T]),Nc(y)||(B=ee.isHorizontal()?y.x:y.y),(void 0!==B||void 0!==y&&isNaN(T))&&(U=ee._getLabels(),y=De.valueOrDefault(B,y),T=-1!==(ne=U.indexOf(y))?ne:T,isNaN(T)&&(T=y)),ee.getPixelForDecimal((T-ee._startValue)/ee._valueRange)},getPixelForTick:function(y){var T=this.ticks;return y<0||y>T.length-1?null:this.getPixelForValue(T[y],y+this.minIndex)},getValueForPixel:function(y){var T=Math.round(this._startValue+this.getDecimalForPixel(y)*this._valueRange);return Math.min(Math.max(T,0),this.ticks.length-1)},getBasePixel:function(){return this.bottom}});kf._defaults={position:"bottom"};var Sa=De.isNullOrUndef,wl=zl.extend({getRightValue:function(y){return"string"==typeof y?+y:zl.prototype.getRightValue.call(this,y)},handleTickRangeOptions:function(){var y=this,T=y.options.ticks;if(T.beginAtZero){var E=De.sign(y.min),B=De.sign(y.max);E<0&&B<0?y.max=0:E>0&&B>0&&(y.min=0)}var U=void 0!==T.min||void 0!==T.suggestedMin,ne=void 0!==T.max||void 0!==T.suggestedMax;void 0!==T.min?y.min=T.min:void 0!==T.suggestedMin&&(y.min=null===y.min?T.suggestedMin:Math.min(y.min,T.suggestedMin)),void 0!==T.max?y.max=T.max:void 0!==T.suggestedMax&&(y.max=null===y.max?T.suggestedMax:Math.max(y.max,T.suggestedMax)),U!==ne&&y.min>=y.max&&(U?y.max=y.min+1:y.min=y.max-1),y.min===y.max&&(y.max++,T.beginAtZero||y.min--)},getTickLimit:function(){var y,T=this.options.ticks,E=T.stepSize,B=T.maxTicksLimit;return E?y=Math.ceil(this.max/E)-Math.floor(this.min/E)+1:(y=this._computeTickLimit(),B=B||11),B&&(y=Math.min(B,y)),y},_computeTickLimit:function(){return Number.POSITIVE_INFINITY},handleDirectionalChanges:De.noop,buildTicks:function(){var y=this,T=y.options.ticks,E=y.getTickLimit(),B={maxTicks:E=Math.max(2,E),min:T.min,max:T.max,precision:T.precision,stepSize:De.valueOrDefault(T.fixedStepSize,T.stepSize)},U=y.ticks=function(ne,ee){var ae,fe,Me,ke,Fe=[],Ze=ne.stepSize,ot=Ze||1,rt=ne.maxTicks-1,Ct=ne.min,Vt=ne.max,Wn=ne.precision,An=ee.min,Un=ee.max,$n=De.niceNum((Un-An)/rt/ot)*ot;if($n<1e-14&&Sa(Ct)&&Sa(Vt))return[An,Un];(ke=Math.ceil(Un/$n)-Math.floor(An/$n))>rt&&($n=De.niceNum(ke*$n/rt/ot)*ot),Ze||Sa(Wn)?ae=Math.pow(10,De._decimalPlaces($n)):(ae=Math.pow(10,Wn),$n=Math.ceil($n*ae)/ae),fe=Math.floor(An/$n)*$n,Me=Math.ceil(Un/$n)*$n,Ze&&(!Sa(Ct)&&De.almostWhole(Ct/$n,$n/1e3)&&(fe=Ct),!Sa(Vt)&&De.almostWhole(Vt/$n,$n/1e3)&&(Me=Vt)),ke=De.almostEquals(ke=(Me-fe)/$n,Math.round(ke),$n/1e3)?Math.round(ke):Math.ceil(ke),fe=Math.round(fe*ae)/ae,Me=Math.round(Me*ae)/ae,Fe.push(Sa(Ct)?fe:Ct);for(var fr=1;fr<ke;++fr)Fe.push(Math.round((fe+fr*$n)*ae)/ae);return Fe.push(Sa(Vt)?Me:Vt),Fe}(B,y);y.handleDirectionalChanges(),y.max=De.max(U),y.min=De.min(U),T.reverse?(U.reverse(),y.start=y.max,y.end=y.min):(y.start=y.min,y.end=y.max)},convertTicksToLabels:function(){var y=this;y.ticksAsNumbers=y.ticks.slice(),y.zeroLineIndex=y.ticks.indexOf(0),zl.prototype.convertTicksToLabels.call(y)},_configure:function(){var y,T=this,E=T.getTicks(),B=T.min,U=T.max;zl.prototype._configure.call(T),T.options.offset&&E.length&&(B-=y=(U-B)/Math.max(E.length-1,1)/2,U+=y),T._startValue=B,T._endValue=U,T._valueRange=U-B}}),Qa={position:"left",ticks:{callback:Cf.formatters.linear}};function rf(y,T,E,B){var U,ne,Fe,ot,rt,ee=y.options,ae=(void 0===(Fe=T)[rt=[(ot=E).type,void 0===ee.stacked&&void 0===ot.stack?ot.index:"",ot.stack].join(".")]&&(Fe[rt]={pos:[],neg:[]}),Fe[rt]),fe=ae.pos,Me=ae.neg,ke=B.length;for(U=0;U<ke;++U)ne=y._parseValue(B[U]),isNaN(ne.min)||isNaN(ne.max)||E.data[U].hidden||(fe[U]=fe[U]||0,Me[U]=Me[U]||0,ee.relativePoints?fe[U]=100:ne.min<0||ne.max<0?Me[U]+=ne.min:fe[U]+=ne.max)}function yb(y,T,E){var B,U,ne=E.length;for(B=0;B<ne;++B)U=y._parseValue(E[B]),isNaN(U.min)||isNaN(U.max)||T.data[B].hidden||(y.min=Math.min(y.min,U.min),y.max=Math.max(y.max,U.max))}var Wu=wl.extend({determineDataLimits:function(){var y,T,E,B,U=this,ne=U.options,ee=U.chart.data.datasets,ae=U._getMatchingVisibleMetas(),fe=ne.stacked,Me={},ke=ae.length;if(U.min=Number.POSITIVE_INFINITY,U.max=Number.NEGATIVE_INFINITY,void 0===fe)for(y=0;!fe&&y<ke;++y)fe=void 0!==(T=ae[y]).stack;for(y=0;y<ke;++y)E=ee[(T=ae[y]).index].data,fe?rf(U,Me,T,E):yb(U,T,E);De.each(Me,function(Fe){B=Fe.pos.concat(Fe.neg),U.min=Math.min(U.min,De.min(B)),U.max=Math.max(U.max,De.max(B))}),U.min=De.isFinite(U.min)&&!isNaN(U.min)?U.min:0,U.max=De.isFinite(U.max)&&!isNaN(U.max)?U.max:1,U.handleTickRangeOptions()},_computeTickLimit:function(){var y;return this.isHorizontal()?Math.ceil(this.width/40):(y=De.options._parseFont(this.options.ticks),Math.ceil(this.height/y.lineHeight))},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(y,T){return this._getScaleLabel(this.chart.data.datasets[T].data[y])},getPixelForValue:function(y){return this.getPixelForDecimal((+this.getRightValue(y)-this._startValue)/this._valueRange)},getValueForPixel:function(y){return this._startValue+this.getDecimalForPixel(y)*this._valueRange},getPixelForTick:function(y){var T=this.ticksAsNumbers;return y<0||y>T.length-1?null:this.getPixelForValue(T[y])}});Wu._defaults=Qa;var Sl=De.valueOrDefault,Aa=De.math.log10,Fs={position:"left",ticks:{callback:Cf.formatters.logarithmic}};function Is(y,T){return De.isFinite(y)&&y>=0?y:T}var Vo=zl.extend({determineDataLimits:function(){var y,T,E,B,U,ne,ee=this,ae=ee.options,fe=ee.chart,Me=fe.data.datasets,ke=ee.isHorizontal();function Fe(Vt){return ke?Vt.xAxisID===ee.id:Vt.yAxisID===ee.id}ee.min=Number.POSITIVE_INFINITY,ee.max=Number.NEGATIVE_INFINITY,ee.minNotZero=Number.POSITIVE_INFINITY;var Ze=ae.stacked;if(void 0===Ze)for(y=0;y<Me.length;y++)if(T=fe.getDatasetMeta(y),fe.isDatasetVisible(y)&&Fe(T)&&void 0!==T.stack){Ze=!0;break}if(ae.stacked||Ze){var ot={};for(y=0;y<Me.length;y++){var rt=[(T=fe.getDatasetMeta(y)).type,void 0===ae.stacked&&void 0===T.stack?y:"",T.stack].join(".");if(fe.isDatasetVisible(y)&&Fe(T))for(void 0===ot[rt]&&(ot[rt]=[]),U=0,ne=(B=Me[y].data).length;U<ne;U++){var Ct=ot[rt];E=ee._parseValue(B[U]),isNaN(E.min)||isNaN(E.max)||T.data[U].hidden||E.min<0||E.max<0||(Ct[U]=Ct[U]||0,Ct[U]+=E.max)}}De.each(ot,function(Vt){if(Vt.length>0){var Wn=De.min(Vt),An=De.max(Vt);ee.min=Math.min(ee.min,Wn),ee.max=Math.max(ee.max,An)}})}else for(y=0;y<Me.length;y++)if(T=fe.getDatasetMeta(y),fe.isDatasetVisible(y)&&Fe(T))for(U=0,ne=(B=Me[y].data).length;U<ne;U++)E=ee._parseValue(B[U]),isNaN(E.min)||isNaN(E.max)||T.data[U].hidden||E.min<0||E.max<0||(ee.min=Math.min(E.min,ee.min),ee.max=Math.max(E.max,ee.max),0!==E.min&&(ee.minNotZero=Math.min(E.min,ee.minNotZero)));ee.min=De.isFinite(ee.min)?ee.min:null,ee.max=De.isFinite(ee.max)?ee.max:null,ee.minNotZero=De.isFinite(ee.minNotZero)?ee.minNotZero:null,this.handleTickRangeOptions()},handleTickRangeOptions:function(){var y=this,T=y.options.ticks;y.min=Is(T.min,y.min),y.max=Is(T.max,y.max),y.min===y.max&&(0!==y.min&&null!==y.min?(y.min=Math.pow(10,Math.floor(Aa(y.min))-1),y.max=Math.pow(10,Math.floor(Aa(y.max))+1)):(y.min=1,y.max=10)),null===y.min&&(y.min=Math.pow(10,Math.floor(Aa(y.max))-1)),null===y.max&&(y.max=0!==y.min?Math.pow(10,Math.floor(Aa(y.min))+1):10),null===y.minNotZero&&(y.minNotZero=y.min>0?y.min:y.max<1?Math.pow(10,Math.floor(Aa(y.max))):1)},buildTicks:function(){var y=this,T=y.options.ticks,E=!y.isHorizontal(),B={min:Is(T.min),max:Is(T.max)},U=y.ticks=function(ne,ee){var ae,fe,Me=[],ke=Sl(ne.min,Math.pow(10,Math.floor(Aa(ee.min)))),Fe=Math.floor(Aa(ee.max)),Ze=Math.ceil(ee.max/Math.pow(10,Fe));0===ke?(ae=Math.floor(Aa(ee.minNotZero)),fe=Math.floor(ee.minNotZero/Math.pow(10,ae)),Me.push(ke),ke=fe*Math.pow(10,ae)):(ae=Math.floor(Aa(ke)),fe=Math.floor(ke/Math.pow(10,ae)));var ot=ae<0?Math.pow(10,Math.abs(ae)):1;do{Me.push(ke),10==++fe&&(fe=1,ot=++ae>=0?1:ot),ke=Math.round(fe*Math.pow(10,ae)*ot)/ot}while(ae<Fe||ae===Fe&&fe<Ze);var rt=Sl(ne.max,ke);return Me.push(rt),Me}(B,y);y.max=De.max(U),y.min=De.min(U),T.reverse?(E=!E,y.start=y.max,y.end=y.min):(y.start=y.min,y.end=y.max),E&&U.reverse()},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),zl.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(y,T){return this._getScaleLabel(this.chart.data.datasets[T].data[y])},getPixelForTick:function(y){var T=this.tickValues;return y<0||y>T.length-1?null:this.getPixelForValue(T[y])},_getFirstTickValue:function(y){var T=Math.floor(Aa(y));return Math.floor(y/Math.pow(10,T))*Math.pow(10,T)},_configure:function(){var y=this,T=y.min,E=0;zl.prototype._configure.call(y),0===T&&(T=y._getFirstTickValue(y.minNotZero),E=Sl(y.options.ticks.fontSize,mt.global.defaultFontSize)/y._length),y._startValue=Aa(T),y._valueOffset=E,y._valueRange=(Aa(y.max)-Aa(T))/(1-E)},getPixelForValue:function(y){var T=this,E=0;return(y=+T.getRightValue(y))>T.min&&y>0&&(E=(Aa(y)-T._startValue)/T._valueRange+T._valueOffset),T.getPixelForDecimal(E)},getValueForPixel:function(y){var T=this,E=T.getDecimalForPixel(y);return 0===E&&0===T.min?0:Math.pow(10,T._startValue+(E-T._valueOffset)*T._valueRange)}});Vo._defaults=Fs;var Uu=De.valueOrDefault,Ia=De.valueAtIndexOrDefault,co=De.options.resolve,Bc={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0,0,0,0.1)",lineWidth:1,borderDash:[],borderDashOffset:0},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:Cf.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(y){return y}}};function Ar(y){var T=y.ticks;return T.display&&y.display?Uu(T.fontSize,mt.global.defaultFontSize)+2*T.backdropPaddingY:0}function ju(y,T,E,B,U){return y===B||y===U?{start:T-E/2,end:T+E/2}:y<B||y>U?{start:T-E,end:T}:{start:T,end:T+E}}function il(y){return 0===y||180===y?"center":y<180?"left":"right"}function Yh(y,T,E,B){var U,ne,ee=E.y+B/2;if(De.isArray(T))for(U=0,ne=T.length;U<ne;++U)y.fillText(T[U],E.x,ee),ee+=B;else y.fillText(T,E.x,ee)}function os(y,T,E){90===y||270===y?E.y-=T.h/2:(y>270||y<90)&&(E.y-=T.h)}function Oo(y){return De.isNumber(y)?y:0}var Yu=wl.extend({setDimensions:function(){var y=this;y.width=y.maxWidth,y.height=y.maxHeight,y.paddingTop=Ar(y.options)/2,y.xCenter=Math.floor(y.width/2),y.yCenter=Math.floor((y.height-y.paddingTop)/2),y.drawingArea=Math.min(y.height-y.paddingTop,y.width)/2},determineDataLimits:function(){var y=this,T=y.chart,E=Number.POSITIVE_INFINITY,B=Number.NEGATIVE_INFINITY;De.each(T.data.datasets,function(U,ne){if(T.isDatasetVisible(ne)){var ee=T.getDatasetMeta(ne);De.each(U.data,function(ae,fe){var Me=+y.getRightValue(ae);isNaN(Me)||ee.data[fe].hidden||(E=Math.min(Me,E),B=Math.max(Me,B))})}}),y.min=E===Number.POSITIVE_INFINITY?0:E,y.max=B===Number.NEGATIVE_INFINITY?0:B,y.handleTickRangeOptions()},_computeTickLimit:function(){return Math.ceil(this.drawingArea/Ar(this.options))},convertTicksToLabels:function(){var y=this;wl.prototype.convertTicksToLabels.call(y),y.pointLabels=y.chart.data.labels.map(function(){var T=De.callback(y.options.pointLabels.callback,arguments,y);return T||0===T?T:""})},getLabelForIndex:function(y,T){return+this.getRightValue(this.chart.data.datasets[T].data[y])},fit:function(){var y=this.options;y.display&&y.pointLabels.display?function(T){var E,B,U,ne=De.options._parseFont(T.options.pointLabels),ee={l:0,r:T.width,t:0,b:T.height-T.paddingTop},ae={};T.ctx.font=ne.string,T._pointLabelSizes=[];var fe,Me,ke,Fe=T.chart.data.labels.length;for(E=0;E<Fe;E++){U=T.getPointPosition(E,T.drawingArea+5),fe=T.ctx,Me=ne.lineHeight,B=De.isArray(ke=T.pointLabels[E])?{w:De.longestText(fe,fe.font,ke),h:ke.length*Me}:{w:fe.measureText(ke).width,h:Me},T._pointLabelSizes[E]=B;var Ze=T.getIndexAngle(E),ot=De.toDegrees(Ze)%360,rt=ju(ot,U.x,B.w,0,180),Ct=ju(ot,U.y,B.h,90,270);rt.start<ee.l&&(ee.l=rt.start,ae.l=Ze),rt.end>ee.r&&(ee.r=rt.end,ae.r=Ze),Ct.start<ee.t&&(ee.t=Ct.start,ae.t=Ze),Ct.end>ee.b&&(ee.b=Ct.end,ae.b=Ze)}T.setReductions(T.drawingArea,ee,ae)}(this):this.setCenterPoint(0,0,0,0)},setReductions:function(y,T,E){var B=this,U=T.l/Math.sin(E.l),ne=Math.max(T.r-B.width,0)/Math.sin(E.r),ee=-T.t/Math.cos(E.t),ae=-Math.max(T.b-(B.height-B.paddingTop),0)/Math.cos(E.b);U=Oo(U),ne=Oo(ne),ee=Oo(ee),ae=Oo(ae),B.drawingArea=Math.min(Math.floor(y-(U+ne)/2),Math.floor(y-(ee+ae)/2)),B.setCenterPoint(U,ne,ee,ae)},setCenterPoint:function(y,T,E,B){var U=this,ae=E+U.drawingArea,fe=U.height-U.paddingTop-B-U.drawingArea;U.xCenter=Math.floor((y+U.drawingArea+(U.width-T-U.drawingArea))/2+U.left),U.yCenter=Math.floor((ae+fe)/2+U.top+U.paddingTop)},getIndexAngle:function(y){var T=this.chart,E=(y*(360/T.data.labels.length)+((T.options||{}).startAngle||0))%360;return(E<0?E+360:E)*Math.PI*2/360},getDistanceFromCenterForValue:function(y){var T=this;if(De.isNullOrUndef(y))return NaN;var E=T.drawingArea/(T.max-T.min);return T.options.ticks.reverse?(T.max-y)*E:(y-T.min)*E},getPointPosition:function(y,T){var E=this.getIndexAngle(y)-Math.PI/2;return{x:Math.cos(E)*T+this.xCenter,y:Math.sin(E)*T+this.yCenter}},getPointPositionForValue:function(y,T){return this.getPointPosition(y,this.getDistanceFromCenterForValue(T))},getBasePosition:function(y){var T=this.min,E=this.max;return this.getPointPositionForValue(y||0,this.beginAtZero?0:T<0&&E<0?E:T>0&&E>0?T:0)},_drawGrid:function(){var y,T,E,B=this,U=B.ctx,ne=B.options,ee=ne.gridLines,ae=ne.angleLines,fe=Uu(ae.lineWidth,ee.lineWidth),Me=Uu(ae.color,ee.color);if(ne.pointLabels.display&&function(ke){var Fe=ke.ctx,Ze=ke.options,ot=Ze.pointLabels,rt=Ar(Ze),Ct=ke.getDistanceFromCenterForValue(Ze.ticks.reverse?ke.min:ke.max),Vt=De.options._parseFont(ot);Fe.save(),Fe.font=Vt.string,Fe.textBaseline="middle";for(var Wn=ke.chart.data.labels.length-1;Wn>=0;Wn--){var Un=ke.getPointPosition(Wn,Ct+(0===Wn?rt/2:0)+5),$n=Ia(ot.fontColor,Wn,mt.global.defaultFontColor);Fe.fillStyle=$n;var fr=ke.getIndexAngle(Wn),Hr=De.toDegrees(fr);Fe.textAlign=il(Hr),os(Hr,ke._pointLabelSizes[Wn],Un),Yh(Fe,ke.pointLabels[Wn],Un,Vt.lineHeight)}Fe.restore()}(B),ee.display&&De.each(B.ticks,function(ke,Fe){0!==Fe&&(T=B.getDistanceFromCenterForValue(B.ticksAsNumbers[Fe]),function(Ze,ot,rt,Ct){var Vt,Wn=Ze.ctx,An=ot.circular,Un=Ze.chart.data.labels.length,$n=Ia(ot.color,Ct-1),fr=Ia(ot.lineWidth,Ct-1);if((An||Un)&&$n&&fr){if(Wn.save(),Wn.strokeStyle=$n,Wn.lineWidth=fr,Wn.setLineDash&&(Wn.setLineDash(ot.borderDash||[]),Wn.lineDashOffset=ot.borderDashOffset||0),Wn.beginPath(),An)Wn.arc(Ze.xCenter,Ze.yCenter,rt,0,2*Math.PI);else{Vt=Ze.getPointPosition(0,rt),Wn.moveTo(Vt.x,Vt.y);for(var Hr=1;Hr<Un;Hr++)Vt=Ze.getPointPosition(Hr,rt),Wn.lineTo(Vt.x,Vt.y)}Wn.closePath(),Wn.stroke(),Wn.restore()}}(B,ee,T,Fe))}),ae.display&&fe&&Me){for(U.save(),U.lineWidth=fe,U.strokeStyle=Me,U.setLineDash&&(U.setLineDash(co([ae.borderDash,ee.borderDash,[]])),U.lineDashOffset=co([ae.borderDashOffset,ee.borderDashOffset,0])),y=B.chart.data.labels.length-1;y>=0;y--)T=B.getDistanceFromCenterForValue(ne.ticks.reverse?B.min:B.max),E=B.getPointPosition(y,T),U.beginPath(),U.moveTo(B.xCenter,B.yCenter),U.lineTo(E.x,E.y),U.stroke();U.restore()}},_drawLabels:function(){var y=this,T=y.ctx,E=y.options.ticks;if(E.display){var B,U,ne=y.getIndexAngle(0),ee=De.options._parseFont(E),ae=Uu(E.fontColor,mt.global.defaultFontColor);T.save(),T.font=ee.string,T.translate(y.xCenter,y.yCenter),T.rotate(ne),T.textAlign="center",T.textBaseline="middle",De.each(y.ticks,function(fe,Me){(0!==Me||E.reverse)&&(B=y.getDistanceFromCenterForValue(y.ticksAsNumbers[Me]),E.showLabelBackdrop&&(U=T.measureText(fe).width,T.fillStyle=E.backdropColor,T.fillRect(-U/2-E.backdropPaddingX,-B-ee.size/2-E.backdropPaddingY,U+2*E.backdropPaddingX,ee.size+2*E.backdropPaddingY)),T.fillStyle=ae,T.fillText(fe,0,-B))}),T.restore()}},_drawTitle:De.noop});Yu._defaults=Bc;var vs=De._deprecated,Cl=De.options.resolve,Tm=De.valueOrDefault,Dm=Number.MIN_SAFE_INTEGER||-9007199254740991,qu=Number.MAX_SAFE_INTEGER||9007199254740991,zc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},du=Object.keys(zc);function od(y,T){return y-T}function hu(y){return De.valueOrDefault(y.time.min,y.ticks.min)}function Od(y){return De.valueOrDefault(y.time.max,y.ticks.max)}function qh(y,T,E,B){var U=function(ke,Fe,Ze){for(var ot,rt,Ct,Vt=0,Wn=ke.length-1;Vt>=0&&Vt<=Wn;){if(rt=ke[(ot=Vt+Wn>>1)-1]||null,Ct=ke[ot],!rt)return{lo:null,hi:Ct};if(Ct[Fe]<Ze)Vt=ot+1;else{if(!(rt[Fe]>Ze))return{lo:rt,hi:Ct};Wn=ot-1}}return{lo:Ct,hi:null}}(y,T,E),ne=U.lo?U.hi?U.lo:y[y.length-2]:y[0],ee=U.lo?U.hi?U.hi:y[y.length-1]:y[1],ae=ee[T]-ne[T];return ne[B]+(ee[B]-ne[B])*(ae?(E-ne[T])/ae:0)}function ga(y,T){var E=y._adapter,B=y.options.time,U=B.parser,ne=U||B.format,ee=T;return"function"==typeof U&&(ee=U(ee)),De.isFinite(ee)||(ee="string"==typeof ne?E.parse(ee,ne):E.parse(ee)),null!==ee?+ee:(U||"function"!=typeof ne||(ee=ne(T),De.isFinite(ee)||(ee=E.parse(ee))),ee)}function Vs(y,T){if(De.isNullOrUndef(T))return null;var E=y.options.time,B=ga(y,y.getRightValue(T));return null===B||E.round&&(B=+y._adapter.startOf(B,E.round)),B}function pu(y,T,E,B){var U,ne,ee,ae=du.length;for(U=du.indexOf(y);U<ae-1;++U)if(ee=(ne=zc[du[U]]).steps?ne.steps:qu,ne.common&&Math.ceil((E-T)/(ee*ne.size))<=B)return du[U];return du[ae-1]}function es(y,T,E){var B,U,ne=[],ee={},ae=T.length;for(B=0;B<ae;++B)ee[U=T[B]]=B,ne.push({value:U,major:!1});return 0!==ae&&E?function(fe,Me,ke,Fe){var Ze,ot,rt=fe._adapter,Ct=+rt.startOf(Me[0].value,Fe),Vt=Me[Me.length-1].value;for(Ze=Ct;Ze<=Vt;Ze=+rt.add(Ze,1,Fe))(ot=ke[Ze])>=0&&(Me[ot].major=!0);return Me}(y,ne,ee,E):ne}var kp=zl.extend({initialize:function(){this.mergeTicksOptions(),zl.prototype.initialize.call(this)},update:function(){var y=this,T=y.options,E=T.time||(T.time={}),B=y._adapter=new Nl._date(T.adapters.date);return vs("time scale",E.format,"time.format","time.parser"),vs("time scale",E.min,"time.min","ticks.min"),vs("time scale",E.max,"time.max","ticks.max"),De.mergeIf(E.displayFormats,B.formats()),zl.prototype.update.apply(y,arguments)},getRightValue:function(y){return y&&void 0!==y.t&&(y=y.t),zl.prototype.getRightValue.call(this,y)},determineDataLimits:function(){var y,T,E,B,U,ne,ee,ae=this,fe=ae.chart,Me=ae._adapter,ke=ae.options,Fe=ke.time.unit||"day",Ze=qu,ot=Dm,rt=[],Ct=[],Vt=[],Wn=ae._getLabels();for(y=0,E=Wn.length;y<E;++y)Vt.push(Vs(ae,Wn[y]));for(y=0,E=(fe.data.datasets||[]).length;y<E;++y)if(fe.isDatasetVisible(y))if(De.isObject((U=fe.data.datasets[y].data)[0]))for(Ct[y]=[],T=0,B=U.length;T<B;++T)ne=Vs(ae,U[T]),rt.push(ne),Ct[y][T]=ne;else Ct[y]=Vt.slice(0),ee||(rt=rt.concat(Vt),ee=!0);else Ct[y]=[];Vt.length&&(Ze=Math.min(Ze,Vt[0]),ot=Math.max(ot,Vt[Vt.length-1])),rt.length&&(rt=E>1?function(An){var Un,$n,fr,Hr={},Co=[];for(Un=0,$n=An.length;Un<$n;++Un)Hr[fr=An[Un]]||(Hr[fr]=!0,Co.push(fr));return Co}(rt).sort(od):rt.sort(od),Ze=Math.min(Ze,rt[0]),ot=Math.max(ot,rt[rt.length-1])),Ze=Vs(ae,hu(ke))||Ze,ot=Vs(ae,Od(ke))||ot,Ze=Ze===qu?+Me.startOf(Date.now(),Fe):Ze,ot=ot===Dm?+Me.endOf(Date.now(),Fe)+1:ot,ae.min=Math.min(Ze,ot),ae.max=Math.max(Ze+1,ot),ae._table=[],ae._timestamps={data:rt,datasets:Ct,labels:Vt}},buildTicks:function(){var y,T,E,rt,Ct,Un,$n,fr,Hr,B=this,U=B.min,ne=B.max,ee=B.options,ae=ee.ticks,fe=ee.time,Me=B._timestamps,ke=[],Fe=B.getLabelCapacity(U),Ze=ae.source,ot=ee.distribution;for(Me="data"===Ze||"auto"===Ze&&"series"===ot?Me.data:"labels"===Ze?Me.labels:function(rt,Ct,Vt,Wn){var An,Un=rt._adapter,$n=rt.options,fr=$n.time,Hr=fr.unit||pu(fr.minUnit,Ct,Vt,Wn),Co=Cl([fr.stepSize,fr.unitStepSize,1]),Mo="week"===Hr&&fr.isoWeekday,Zr=Ct,Qo=[];if(Mo&&(Zr=+Un.startOf(Zr,"isoWeek",Mo)),Zr=+Un.startOf(Zr,Mo?"day":Hr),Un.diff(Vt,Ct,Hr)>1e5*Co)throw Ct+" and "+Vt+" are too far apart with stepSize of "+Co+" "+Hr;for(An=Zr;An<Vt;An=+Un.add(An,Co,Hr))Qo.push(An);return An!==Vt&&"ticks"!==$n.bounds||Qo.push(An),Qo}(B,U,ne,Fe),"ticks"===ee.bounds&&Me.length&&(U=Me[0],ne=Me[Me.length-1]),U=Vs(B,hu(ee))||U,ne=Vs(B,Od(ee))||ne,y=0,T=Me.length;y<T;++y)(E=Me[y])>=U&&E<=ne&&ke.push(E);return B.min=U,B.max=ne,B._unit=fe.unit||(ae.autoSkip?pu(fe.minUnit,B.min,B.max,Fe):function(rt,Ct,Vt,Wn,An){var Un,$n;for(Un=du.length-1;Un>=du.indexOf(Vt);Un--)if(zc[$n=du[Un]].common&&rt._adapter.diff(An,Wn,$n)>=Ct-1)return $n;return du[Vt?du.indexOf(Vt):0]}(B,ke.length,fe.minUnit,B.min,B.max)),B._majorUnit=ae.major.enabled&&"year"!==B._unit?function(rt){for(var Ct=du.indexOf(rt)+1,Vt=du.length;Ct<Vt;++Ct)if(zc[du[Ct]].common)return du[Ct]}(B._unit):void 0,B._table=function(rt,Ct,Vt,Wn){if("linear"===Wn||!rt.length)return[{time:Ct,pos:0},{time:Vt,pos:1}];var An,Un,$n,fr,Hr,Co=[],Mo=[Ct];for(An=0,Un=rt.length;An<Un;++An)(fr=rt[An])>Ct&&fr<Vt&&Mo.push(fr);for(Mo.push(Vt),An=0,Un=Mo.length;An<Un;++An)Hr=Mo[An+1],fr=Mo[An],void 0!==($n=Mo[An-1])&&void 0!==Hr&&Math.round((Hr+$n)/2)===fr||Co.push({time:fr,pos:An/(Un-1)});return Co}(B._timestamps.data,U,ne,ot),B._offsets=(rt=B._table,Ct=ke,fr=0,Hr=0,ee.offset&&Ct.length&&(Un=qh(rt,"time",Ct[0],"pos"),fr=1===Ct.length?1-Un:(qh(rt,"time",Ct[1],"pos")-Un)/2,$n=qh(rt,"time",Ct[Ct.length-1],"pos"),Hr=1===Ct.length?$n:($n-qh(rt,"time",Ct[Ct.length-2],"pos"))/2),{start:fr,end:Hr,factor:1/(fr+1+Hr)}),ae.reverse&&ke.reverse(),es(B,ke,B._majorUnit)},getLabelForIndex:function(y,T){var E=this,B=E._adapter,U=E.chart.data,ne=E.options.time,ee=U.labels&&y<U.labels.length?U.labels[y]:"",ae=U.datasets[T].data[y];return De.isObject(ae)&&(ee=E.getRightValue(ae)),ne.tooltipFormat?B.format(ga(E,ee),ne.tooltipFormat):"string"==typeof ee?ee:B.format(ga(E,ee),ne.displayFormats.datetime)},tickFormatFunction:function(y,T,E,B){var ne=this.options,ee=ne.time.displayFormats,fe=this._majorUnit,Me=ee[fe],ke=E[T],Fe=ne.ticks,Ze=fe&&Me&&ke&&ke.major,ot=this._adapter.format(y,B||(Ze?Me:ee[this._unit])),rt=Ze?Fe.major:Fe.minor,Ct=Cl([rt.callback,rt.userCallback,Fe.callback,Fe.userCallback]);return Ct?Ct(ot,T,E):ot},convertTicksToLabels:function(y){var T,E,B=[];for(T=0,E=y.length;T<E;++T)B.push(this.tickFormatFunction(y[T].value,T,y));return B},getPixelForOffset:function(y){var T=this._offsets,E=qh(this._table,"time",y,"pos");return this.getPixelForDecimal((T.start+E)*T.factor)},getPixelForValue:function(y,T,E){var B=null;if(void 0!==T&&void 0!==E&&(B=this._timestamps.datasets[E][T]),null===B&&(B=Vs(this,y)),null!==B)return this.getPixelForOffset(B)},getPixelForTick:function(y){var T=this.getTicks();return y>=0&&y<T.length?this.getPixelForOffset(T[y].value):null},getValueForPixel:function(y){var T=this._offsets,E=this.getDecimalForPixel(y)/T.factor-T.end,B=qh(this._table,"pos",E,"time");return this._adapter._create(B)},_getLabelSize:function(y){var T=this.options.ticks,E=this.ctx.measureText(y).width,B=De.toRadians(this.isHorizontal()?T.maxRotation:T.minRotation),U=Math.cos(B),ne=Math.sin(B),ee=Tm(T.fontSize,mt.global.defaultFontSize);return{w:E*U+ee*ne,h:E*ne+ee*U}},getLabelWidth:function(y){return this._getLabelSize(y).w},getLabelCapacity:function(y){var T=this,E=T.options.time,B=E.displayFormats,U=B[E.unit]||B.millisecond,ne=T.tickFormatFunction(y,0,es(T,[y],T._majorUnit),U),ee=T._getLabelSize(ne),ae=Math.floor(T.isHorizontal()?T.width/ee.w:T.height/ee.h);return T.options.offset&&ae--,ae>0?ae:1}});kp._defaults={position:"bottom",distribution:"linear",bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}};var tc={category:kf,linear:Wu,logarithmic:Vo,radialLinear:Yu,time:kp},Yr={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};Nl._date.override("function"==typeof mr?{_id:"moment",formats:function(){return Yr},parse:function(y,T){return"string"==typeof y&&"string"==typeof T?y=mr(y,T):y instanceof mr||(y=mr(y)),y.isValid()?y.valueOf():null},format:function(y,T){return mr(y).format(T)},add:function(y,T,E){return mr(y).add(T,E).valueOf()},diff:function(y,T,E){return mr(y).diff(mr(T),E)},startOf:function(y,T,E){return y=mr(y),"isoWeek"===T?y.isoWeekday(E).valueOf():y.startOf(T).valueOf()},endOf:function(y,T){return mr(y).endOf(T).valueOf()},_create:function(y){return mr(y)}}:{}),mt._set("global",{plugins:{filler:{propagate:!0}}});var fh={dataset:function(y){var T=y.fill,E=y.chart,B=E.getDatasetMeta(T),U=B&&E.isDatasetVisible(T)&&B.dataset._children||[],ne=U.length||0;return ne?function(ee,ae){return ae<ne&&U[ae]._view||null}:null},boundary:function(y){var T=y.boundary,E=T?T.x:null,B=T?T.y:null;return De.isArray(T)?function(U,ne){return T[ne]}:function(U){return{x:null===E?U.x:E,y:null===B?U.y:B}}}};function Xu(y,T,E){var B,U=y._model||{},ne=U.fill;if(void 0===ne&&(ne=!!U.backgroundColor),!1===ne||null===ne)return!1;if(!0===ne)return"origin";if(B=parseFloat(ne,10),isFinite(B)&&Math.floor(B)===B)return"-"!==ne[0]&&"+"!==ne[0]||(B=T+B),!(B===T||B<0||B>=E)&&B;switch(ne){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return ne;default:return!1}}function Tf(y){return(y.el._scale||{}).getPointPositionForValue?function(T){var E,B,U,ne,ee,ae=T.el._scale,fe=ae.options,Me=ae.chart.data.labels.length,ke=T.fill,Fe=[];if(!Me)return null;for(B=fe.ticks.reverse?ae.min:ae.max,U=ae.getPointPositionForValue(0,E=fe.ticks.reverse?ae.max:ae.min),ne=0;ne<Me;++ne)ee="start"===ke||"end"===ke?ae.getPointPositionForValue(ne,"start"===ke?E:B):ae.getBasePosition(ne),fe.gridLines.circular&&(ee.cx=U.x,ee.cy=U.y,ee.angle=ae.getIndexAngle(ne)-Math.PI/2),Fe.push(ee);return Fe}(y):function(T){var E,B=T.el._model||{},U=T.el._scale||{},ne=T.fill,ee=null;if(isFinite(ne))return null;if("start"===ne?ee=void 0===B.scaleBottom?U.bottom:B.scaleBottom:"end"===ne?ee=void 0===B.scaleTop?U.top:B.scaleTop:void 0!==B.scaleZero?ee=B.scaleZero:U.getBasePixel&&(ee=U.getBasePixel()),null!=ee){if(void 0!==ee.x&&void 0!==ee.y)return ee;if(De.isFinite(ee))return{x:(E=U.isHorizontal())?ee:null,y:E?null:ee}}return null}(y)}function Df(y,T,E){var B,U=y[T].fill,ne=[T];if(!E)return U;for(;!1!==U&&-1===ne.indexOf(U);){if(!isFinite(U))return U;if(!(B=y[U]))return!1;if(B.visible)return U;ne.push(U),U=B.fill}return!1}function al(y){var T=y.fill,E="dataset";return!1===T?null:(isFinite(T)||(E="boundary"),fh[E](y))}function vi(y){return y&&!y.skip}function id(y,T,E,B,U){var ne,ee,ae,fe;if(B&&U){for(y.moveTo(T[0].x,T[0].y),ne=1;ne<B;++ne)De.canvas.lineTo(y,T[ne-1],T[ne]);if(void 0===E[0].angle)for(y.lineTo(E[U-1].x,E[U-1].y),ne=U-1;ne>0;--ne)De.canvas.lineTo(y,E[ne],E[ne-1],!0);else for(ee=E[0].cx,ae=E[0].cy,fe=Math.sqrt(Math.pow(E[0].x-ee,2)+Math.pow(E[0].y-ae,2)),ne=U-1;ne>0;--ne)y.arc(ee,ae,fe,E[ne].angle,E[ne-1].angle,!0)}}function $y(y,T,E,B,U,ne){var ee,ae,fe,Me,ke,Fe,Ze,ot,rt=T.length,Ct=B.spanGaps,Vt=[],Wn=[],An=0,Un=0;for(y.beginPath(),ee=0,ae=rt;ee<ae;++ee)ke=E(Me=T[fe=ee%rt]._view,fe,B),Fe=vi(Me),Ze=vi(ke),ne&&void 0===ot&&Fe&&(ae=rt+(ot=ee+1)),Fe&&Ze?(An=Vt.push(Me),Un=Wn.push(ke)):An&&Un&&(Ct?(Fe&&Vt.push(Me),Ze&&Wn.push(ke)):(id(y,Vt,Wn,An,Un),An=Un=0,Vt=[],Wn=[]));id(y,Vt,Wn,An,Un),y.closePath(),y.fillStyle=U,y.fill()}var Qi={id:"filler",afterDatasetsUpdate:function(y,T){var E,B,U,ne,ee=(y.data.datasets||[]).length,ae=T.propagate,fe=[];for(B=0;B<ee;++B)ne=null,(U=(E=y.getDatasetMeta(B)).dataset)&&U._model&&U instanceof Tr.Line&&(ne={visible:y.isDatasetVisible(B),fill:Xu(U,B,ee),chart:y,el:U}),E.$filler=ne,fe.push(ne);for(B=0;B<ee;++B)(ne=fe[B])&&(ne.fill=Df(fe,B,ae),ne.boundary=Tf(ne),ne.mapper=al(ne))},beforeDatasetsDraw:function(y){var T,E,B,U,ne,ee,ae,fe=y._getSortedVisibleDatasetMetas(),Me=y.ctx;for(E=fe.length-1;E>=0;--E)(T=fe[E].$filler)&&T.visible&&(U=(B=T.el)._view,ne=B._children||[],ae=U.backgroundColor||mt.global.defaultColor,(ee=T.mapper)&&ae&&ne.length&&(De.canvas.clipArea(Me,y.chartArea),$y(Me,ne,ee,U,ae,B._loop),De.canvas.unclipArea(Me)))}},bc=De.rtl.getRtlAdapter,of=De.noop,Pi=De.valueOrDefault;function St(y,T){return y.usePointStyle&&y.boxWidth>T?T:y.boxWidth}mt._set("global",{legend:{display:!0,position:"top",align:"center",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(y,T){var E=T.datasetIndex,B=this.chart,U=B.getDatasetMeta(E);U.hidden=null===U.hidden?!B.data.datasets[E].hidden:null,B.update()},onHover:null,onLeave:null,labels:{boxWidth:40,padding:10,generateLabels:function(y){var T=y.data.datasets,E=y.options.legend||{},B=E.labels&&E.labels.usePointStyle;return y._getSortedDatasetMetas().map(function(U){var ne=U.controller.getStyle(B?0:void 0);return{text:T[U.index].label,fillStyle:ne.backgroundColor,hidden:!y.isDatasetVisible(U.index),lineCap:ne.borderCapStyle,lineDash:ne.borderDash,lineDashOffset:ne.borderDashOffset,lineJoin:ne.borderJoinStyle,lineWidth:ne.borderWidth,strokeStyle:ne.borderColor,pointStyle:ne.pointStyle,rotation:ne.rotation,datasetIndex:U.index}},this)}}},legendCallback:function(y){var T,E,B,U=document.createElement("ul"),ne=y.data.datasets;for(U.setAttribute("class",y.id+"-legend"),T=0,E=ne.length;T<E;T++)(B=U.appendChild(document.createElement("li"))).appendChild(document.createElement("span")).style.backgroundColor=ne[T].backgroundColor,ne[T].label&&B.appendChild(document.createTextNode(ne[T].label));return U.outerHTML}});var Fc=wr.extend({initialize:function(y){De.extend(this,y),this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1},beforeUpdate:of,update:function(y,T,E){var B=this;return B.beforeUpdate(),B.maxWidth=y,B.maxHeight=T,B.margins=E,B.beforeSetDimensions(),B.setDimensions(),B.afterSetDimensions(),B.beforeBuildLabels(),B.buildLabels(),B.afterBuildLabels(),B.beforeFit(),B.fit(),B.afterFit(),B.afterUpdate(),B.minSize},afterUpdate:of,beforeSetDimensions:of,setDimensions:function(){var y=this;y.isHorizontal()?(y.width=y.maxWidth,y.left=0,y.right=y.width):(y.height=y.maxHeight,y.top=0,y.bottom=y.height),y.paddingLeft=0,y.paddingTop=0,y.paddingRight=0,y.paddingBottom=0,y.minSize={width:0,height:0}},afterSetDimensions:of,beforeBuildLabels:of,buildLabels:function(){var y=this,T=y.options.labels||{},E=De.callback(T.generateLabels,[y.chart],y)||[];T.filter&&(E=E.filter(function(B){return T.filter(B,y.chart.data)})),y.options.reverse&&E.reverse(),y.legendItems=E},afterBuildLabels:of,beforeFit:of,fit:function(){var y=this,T=y.options,E=T.labels,B=T.display,U=y.ctx,ne=De.options._parseFont(E),ee=ne.size,ae=y.legendHitBoxes=[],fe=y.minSize,Me=y.isHorizontal();if(Me?(fe.width=y.maxWidth,fe.height=B?10:0):(fe.width=B?10:0,fe.height=y.maxHeight),B){if(U.font=ne.string,Me){var ke=y.lineWidths=[0],Fe=0;U.textAlign="left",U.textBaseline="middle",De.each(y.legendItems,function(An,Un){var $n=St(E,ee)+ee/2+U.measureText(An.text).width;(0===Un||ke[ke.length-1]+$n+2*E.padding>fe.width)&&(Fe+=ee+E.padding,ke[ke.length-(Un>0?0:1)]=0),ae[Un]={left:0,top:0,width:$n,height:ee},ke[ke.length-1]+=$n+E.padding}),fe.height+=Fe}else{var Ze=E.padding,ot=y.columnWidths=[],rt=y.columnHeights=[],Ct=E.padding,Vt=0,Wn=0;De.each(y.legendItems,function(An,Un){var $n=St(E,ee)+ee/2+U.measureText(An.text).width;Un>0&&Wn+ee+2*Ze>fe.height&&(Ct+=Vt+E.padding,ot.push(Vt),rt.push(Wn),Vt=0,Wn=0),Vt=Math.max(Vt,$n),Wn+=ee+Ze,ae[Un]={left:0,top:0,width:$n,height:ee}}),Ct+=Vt,ot.push(Vt),rt.push(Wn),fe.width+=Ct}y.width=fe.width,y.height=fe.height}else y.width=fe.width=y.height=fe.height=0},afterFit:of,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var y=this,T=y.options,E=T.labels,B=mt.global,U=B.defaultColor,ne=B.elements.line,ee=y.height,ae=y.columnHeights,fe=y.width,Me=y.lineWidths;if(T.display){var ke,Fe=bc(T.rtl,y.left,y.minSize.width),Ze=y.ctx,ot=Pi(E.fontColor,B.defaultFontColor),rt=De.options._parseFont(E),Ct=rt.size;Ze.textAlign=Fe.textAlign("left"),Ze.textBaseline="middle",Ze.lineWidth=.5,Ze.strokeStyle=ot,Ze.fillStyle=ot,Ze.font=rt.string;var Vt=St(E,Ct),Wn=y.legendHitBoxes,An=function(fr,Hr){switch(T.align){case"start":return E.padding;case"end":return fr-Hr;default:return(fr-Hr+E.padding)/2}},Un=y.isHorizontal();ke=Un?{x:y.left+An(fe,Me[0]),y:y.top+E.padding,line:0}:{x:y.left+E.padding,y:y.top+An(ee,ae[0]),line:0},De.rtl.overrideTextDirection(y.ctx,T.textDirection);var $n=Ct+E.padding;De.each(y.legendItems,function(fr,Hr){var Co=Ze.measureText(fr.text).width,Mo=Vt+Ct/2+Co,Zr=ke.x,Qo=ke.y;Fe.setWidth(y.minSize.width),Un?Hr>0&&Zr+Mo+E.padding>y.left+y.minSize.width&&(Qo=ke.y+=$n,ke.line++,Zr=ke.x=y.left+An(fe,Me[ke.line])):Hr>0&&Qo+$n>y.top+y.minSize.height&&(Zr=ke.x=Zr+y.columnWidths[ke.line]+E.padding,ke.line++,Qo=ke.y=y.top+An(ee,ae[ke.line]));var To,Rr,vr,ma,Fi,xa,Ki=Fe.x(Zr);(function(Ii,To,Rr){if(!(isNaN(Vt)||Vt<=0)){Ze.save();var vr=Pi(Rr.lineWidth,ne.borderWidth);if(Ze.fillStyle=Pi(Rr.fillStyle,U),Ze.lineCap=Pi(Rr.lineCap,ne.borderCapStyle),Ze.lineDashOffset=Pi(Rr.lineDashOffset,ne.borderDashOffset),Ze.lineJoin=Pi(Rr.lineJoin,ne.borderJoinStyle),Ze.lineWidth=vr,Ze.strokeStyle=Pi(Rr.strokeStyle,U),Ze.setLineDash&&Ze.setLineDash(Pi(Rr.lineDash,ne.borderDash)),E&&E.usePointStyle){var ma=Vt*Math.SQRT2/2,Fi=Fe.xPlus(Ii,Vt/2);De.canvas.drawPoint(Ze,Rr.pointStyle,ma,Fi,To+Ct/2,Rr.rotation)}else Ze.fillRect(Fe.leftForLtr(Ii,Vt),To,Vt,Ct),0!==vr&&Ze.strokeRect(Fe.leftForLtr(Ii,Vt),To,Vt,Ct);Ze.restore()}})(Ki,Qo,fr),Wn[Hr].left=Fe.leftForLtr(Ki,Wn[Hr].width),Wn[Hr].top=Qo,To=Qo,Rr=fr,vr=Co,Fi=Fe.xPlus(Ki,Vt+(ma=Ct/2)),Ze.fillText(Rr.text,Fi,xa=To+ma),Rr.hidden&&(Ze.beginPath(),Ze.lineWidth=2,Ze.moveTo(Fi,xa),Ze.lineTo(Fe.xPlus(Fi,vr),xa),Ze.stroke()),Un?ke.x+=Mo+E.padding:ke.y+=$n}),De.rtl.restoreTextDirection(y.ctx,T.textDirection)}},_getLegendItemAt:function(y,T){var E,B,U,ne=this;if(y>=ne.left&&y<=ne.right&&T>=ne.top&&T<=ne.bottom)for(U=ne.legendHitBoxes,E=0;E<U.length;++E)if(y>=(B=U[E]).left&&y<=B.left+B.width&&T>=B.top&&T<=B.top+B.height)return ne.legendItems[E];return null},handleEvent:function(y){var T,E=this,B=E.options,U="mouseup"===y.type?"click":y.type;if("mousemove"===U){if(!B.onHover&&!B.onLeave)return}else if("click"!==U||!B.onClick)return;T=E._getLegendItemAt(y.x,y.y),"click"===U?T&&B.onClick&&B.onClick.call(E,y.native,T):(B.onLeave&&T!==E._hoveredItem&&(E._hoveredItem&&B.onLeave.call(E,y.native,E._hoveredItem),E._hoveredItem=T),B.onHover&&T&&B.onHover.call(E,y.native,T))}});function Ks(y,T){var E=new Fc({ctx:y.ctx,options:T,chart:y});Di.configure(y,E,T),Di.addBox(y,E),y.legend=E}var nc={id:"legend",_element:Fc,beforeInit:function(y){var T=y.options.legend;T&&Ks(y,T)},beforeUpdate:function(y){var T=y.options.legend,E=y.legend;T?(De.mergeIf(T,mt.global.legend),E?(Di.configure(y,E,T),E.options=T):Ks(y,T)):E&&(Di.removeBox(y,E),delete y.legend)},afterEvent:function(y,T){var E=y.legend;E&&E.handleEvent(T)}},ys=De.noop;mt._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,padding:10,position:"top",text:"",weight:2e3}});var ds=wr.extend({initialize:function(y){De.extend(this,y),this.legendHitBoxes=[]},beforeUpdate:ys,update:function(y,T,E){var B=this;return B.beforeUpdate(),B.maxWidth=y,B.maxHeight=T,B.margins=E,B.beforeSetDimensions(),B.setDimensions(),B.afterSetDimensions(),B.beforeBuildLabels(),B.buildLabels(),B.afterBuildLabels(),B.beforeFit(),B.fit(),B.afterFit(),B.afterUpdate(),B.minSize},afterUpdate:ys,beforeSetDimensions:ys,setDimensions:function(){var y=this;y.isHorizontal()?(y.width=y.maxWidth,y.left=0,y.right=y.width):(y.height=y.maxHeight,y.top=0,y.bottom=y.height),y.paddingLeft=0,y.paddingTop=0,y.paddingRight=0,y.paddingBottom=0,y.minSize={width:0,height:0}},afterSetDimensions:ys,beforeBuildLabels:ys,buildLabels:ys,afterBuildLabels:ys,beforeFit:ys,fit:function(){var y,T=this,E=T.options,B=T.minSize={},U=T.isHorizontal();E.display?(y=(De.isArray(E.text)?E.text.length:1)*De.options._parseFont(E).lineHeight+2*E.padding,T.width=B.width=U?T.maxWidth:y,T.height=B.height=U?y:T.maxHeight):T.width=B.width=T.height=B.height=0},afterFit:ys,isHorizontal:function(){var y=this.options.position;return"top"===y||"bottom"===y},draw:function(){var y=this,T=y.ctx,E=y.options;if(E.display){var B,U,ne,ee=De.options._parseFont(E),ae=ee.lineHeight,fe=ae/2+E.padding,Me=0,ke=y.top,Fe=y.left,Ze=y.bottom,ot=y.right;T.fillStyle=De.valueOrDefault(E.fontColor,mt.global.defaultFontColor),T.font=ee.string,y.isHorizontal()?(U=Fe+(ot-Fe)/2,ne=ke+fe,B=ot-Fe):(U="left"===E.position?Fe+fe:ot-fe,ne=ke+(Ze-ke)/2,B=Ze-ke,Me=Math.PI*("left"===E.position?-.5:.5)),T.save(),T.translate(U,ne),T.rotate(Me),T.textAlign="center",T.textBaseline="middle";var rt=E.text;if(De.isArray(rt))for(var Ct=0,Vt=0;Vt<rt.length;++Vt)T.fillText(rt[Vt],0,Ct,B),Ct+=ae;else T.fillText(rt,0,0,B);T.restore()}}});function Zi(y,T){var E=new ds({ctx:y.ctx,options:T,chart:y});Di.configure(y,E,T),Di.addBox(y,E),y.titleBlock=E}var sl={},Tp=Qi,Nr=nc,bs={id:"title",_element:ds,beforeInit:function(y){var T=y.options.title;T&&Zi(y,T)},beforeUpdate:function(y){var T=y.options.title,E=y.titleBlock;T?(De.mergeIf(T,mt.global.title),E?(Di.configure(y,E,T),E.options=T):Zi(y,T)):E&&(Di.removeBox(y,E),delete y.titleBlock)}};for(var Dp in sl.filler=Tp,sl.legend=Nr,sl.title=bs,Ai.helpers=De,function(){function y(B,U,ne){var ee;return"string"==typeof B?(ee=parseInt(B,10),-1!==B.indexOf("%")&&(ee=ee/100*U.parentNode[ne])):ee=B,ee}function T(B){return null!=B&&"none"!==B}function E(B,U,ne){var ee=document.defaultView,ae=De._getParentNode(B),fe=ee.getComputedStyle(B)[U],Me=ee.getComputedStyle(ae)[U],ke=T(fe),Fe=T(Me),Ze=Number.POSITIVE_INFINITY;return ke||Fe?Math.min(ke?y(fe,B,ne):Ze,Fe?y(Me,ae,ne):Ze):"none"}De.where=function(B,U){if(De.isArray(B)&&Array.prototype.filter)return B.filter(U);var ne=[];return De.each(B,function(ee){U(ee)&&ne.push(ee)}),ne},De.findIndex=Array.prototype.findIndex?function(B,U,ne){return B.findIndex(U,ne)}:function(B,U,ne){ne=void 0===ne?B:ne;for(var ee=0,ae=B.length;ee<ae;++ee)if(U.call(ne,B[ee],ee,B))return ee;return-1},De.findNextWhere=function(B,U,ne){De.isNullOrUndef(ne)&&(ne=-1);for(var ee=ne+1;ee<B.length;ee++){var ae=B[ee];if(U(ae))return ae}},De.findPreviousWhere=function(B,U,ne){De.isNullOrUndef(ne)&&(ne=B.length);for(var ee=ne-1;ee>=0;ee--){var ae=B[ee];if(U(ae))return ae}},De.isNumber=function(B){return!isNaN(parseFloat(B))&&isFinite(B)},De.almostEquals=function(B,U,ne){return Math.abs(B-U)<ne},De.almostWhole=function(B,U){var ne=Math.round(B);return ne-U<=B&&ne+U>=B},De.max=function(B){return B.reduce(function(U,ne){return isNaN(ne)?U:Math.max(U,ne)},Number.NEGATIVE_INFINITY)},De.min=function(B){return B.reduce(function(U,ne){return isNaN(ne)?U:Math.min(U,ne)},Number.POSITIVE_INFINITY)},De.sign=Math.sign?function(B){return Math.sign(B)}:function(B){return 0==(B=+B)||isNaN(B)?B:B>0?1:-1},De.toRadians=function(B){return B*(Math.PI/180)},De.toDegrees=function(B){return B*(180/Math.PI)},De._decimalPlaces=function(B){if(De.isFinite(B)){for(var U=1,ne=0;Math.round(B*U)/U!==B;)U*=10,ne++;return ne}},De.getAngleFromPoint=function(B,U){var ne=U.x-B.x,ee=U.y-B.y,ae=Math.sqrt(ne*ne+ee*ee),fe=Math.atan2(ee,ne);return fe<-.5*Math.PI&&(fe+=2*Math.PI),{angle:fe,distance:ae}},De.distanceBetweenPoints=function(B,U){return Math.sqrt(Math.pow(U.x-B.x,2)+Math.pow(U.y-B.y,2))},De.aliasPixel=function(B){return B%2==0?0:.5},De._alignPixel=function(B,U,ne){var ee=B.currentDevicePixelRatio,ae=ne/2;return Math.round((U-ae)*ee)/ee+ae},De.splineCurve=function(B,U,ne,ee){var ae=B.skip?U:B,fe=U,Me=ne.skip?U:ne,ke=Math.sqrt(Math.pow(fe.x-ae.x,2)+Math.pow(fe.y-ae.y,2)),Fe=Math.sqrt(Math.pow(Me.x-fe.x,2)+Math.pow(Me.y-fe.y,2)),Ze=ke/(ke+Fe),ot=Fe/(ke+Fe),rt=ee*(Ze=isNaN(Ze)?0:Ze),Ct=ee*(ot=isNaN(ot)?0:ot);return{previous:{x:fe.x-rt*(Me.x-ae.x),y:fe.y-rt*(Me.y-ae.y)},next:{x:fe.x+Ct*(Me.x-ae.x),y:fe.y+Ct*(Me.y-ae.y)}}},De.EPSILON=Number.EPSILON||1e-14,De.splineCurveMonotone=function(B){var U,ne,ee,ae,fe,Me,ke,Fe,Ze,ot=(B||[]).map(function(Vt){return{model:Vt._model,deltaK:0,mK:0}}),rt=ot.length;for(U=0;U<rt;++U)if(!(ee=ot[U]).model.skip){if(ne=U>0?ot[U-1]:null,(ae=U<rt-1?ot[U+1]:null)&&!ae.model.skip){var Ct=ae.model.x-ee.model.x;ee.deltaK=0!==Ct?(ae.model.y-ee.model.y)/Ct:0}ee.mK=!ne||ne.model.skip?ee.deltaK:!ae||ae.model.skip?ne.deltaK:this.sign(ne.deltaK)!==this.sign(ee.deltaK)?0:(ne.deltaK+ee.deltaK)/2}for(U=0;U<rt-1;++U)ae=ot[U+1],(ee=ot[U]).model.skip||ae.model.skip||(De.almostEquals(ee.deltaK,0,this.EPSILON)?ee.mK=ae.mK=0:(fe=ee.mK/ee.deltaK,Me=ae.mK/ee.deltaK,(Fe=Math.pow(fe,2)+Math.pow(Me,2))<=9||(ke=3/Math.sqrt(Fe),ee.mK=fe*ke*ee.deltaK,ae.mK=Me*ke*ee.deltaK)));for(U=0;U<rt;++U)(ee=ot[U]).model.skip||(ae=U<rt-1?ot[U+1]:null,(ne=U>0?ot[U-1]:null)&&!ne.model.skip&&(ee.model.controlPointPreviousX=ee.model.x-(Ze=(ee.model.x-ne.model.x)/3),ee.model.controlPointPreviousY=ee.model.y-Ze*ee.mK),ae&&!ae.model.skip&&(ee.model.controlPointNextX=ee.model.x+(Ze=(ae.model.x-ee.model.x)/3),ee.model.controlPointNextY=ee.model.y+Ze*ee.mK))},De.nextItem=function(B,U,ne){return ne?U>=B.length-1?B[0]:B[U+1]:U>=B.length-1?B[B.length-1]:B[U+1]},De.previousItem=function(B,U,ne){return ne?U<=0?B[B.length-1]:B[U-1]:U<=0?B[0]:B[U-1]},De.niceNum=function(B,U){var ne=Math.floor(De.log10(B)),ee=B/Math.pow(10,ne);return(U?ee<1.5?1:ee<3?2:ee<7?5:10:ee<=1?1:ee<=2?2:ee<=5?5:10)*Math.pow(10,ne)},De.requestAnimFrame="undefined"==typeof window?function(B){B()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(B){return window.setTimeout(B,1e3/60)},De.getRelativePosition=function(B,U){var ne,ee,ae=B.originalEvent||B,fe=B.target||B.srcElement,Me=fe.getBoundingClientRect(),ke=ae.touches;ke&&ke.length>0?(ne=ke[0].clientX,ee=ke[0].clientY):(ne=ae.clientX,ee=ae.clientY);var Fe=parseFloat(De.getStyle(fe,"padding-left")),Ze=parseFloat(De.getStyle(fe,"padding-top")),ot=parseFloat(De.getStyle(fe,"padding-right")),rt=parseFloat(De.getStyle(fe,"padding-bottom")),Vt=Me.bottom-Me.top-Ze-rt;return{x:ne=Math.round((ne-Me.left-Fe)/(Me.right-Me.left-Fe-ot)*fe.width/U.currentDevicePixelRatio),y:ee=Math.round((ee-Me.top-Ze)/Vt*fe.height/U.currentDevicePixelRatio)}},De.getConstraintWidth=function(B){return E(B,"max-width","clientWidth")},De.getConstraintHeight=function(B){return E(B,"max-height","clientHeight")},De._calculatePadding=function(B,U,ne){return(U=De.getStyle(B,U)).indexOf("%")>-1?ne*parseInt(U,10)/100:parseInt(U,10)},De._getParentNode=function(B){var U=B.parentNode;return U&&"[object ShadowRoot]"===U.toString()&&(U=U.host),U},De.getMaximumWidth=function(B){var U=De._getParentNode(B);if(!U)return B.clientWidth;var ne=U.clientWidth,ee=ne-De._calculatePadding(U,"padding-left",ne)-De._calculatePadding(U,"padding-right",ne),ae=De.getConstraintWidth(B);return isNaN(ae)?ee:Math.min(ee,ae)},De.getMaximumHeight=function(B){var U=De._getParentNode(B);if(!U)return B.clientHeight;var ne=U.clientHeight,ee=ne-De._calculatePadding(U,"padding-top",ne)-De._calculatePadding(U,"padding-bottom",ne),ae=De.getConstraintHeight(B);return isNaN(ae)?ee:Math.min(ee,ae)},De.getStyle=function(B,U){return B.currentStyle?B.currentStyle[U]:document.defaultView.getComputedStyle(B,null).getPropertyValue(U)},De.retinaScale=function(B,U){var ne=B.currentDevicePixelRatio=U||"undefined"!=typeof window&&window.devicePixelRatio||1;if(1!==ne){var ee=B.canvas,ae=B.height,fe=B.width;ee.height=ae*ne,ee.width=fe*ne,B.ctx.scale(ne,ne),ee.style.height||ee.style.width||(ee.style.height=ae+"px",ee.style.width=fe+"px")}},De.fontString=function(B,U,ne){return U+" "+B+"px "+ne},De.longestText=function(B,U,ne,ee){var ae=(ee=ee||{}).data=ee.data||{},fe=ee.garbageCollect=ee.garbageCollect||[];ee.font!==U&&(ae=ee.data={},fe=ee.garbageCollect=[],ee.font=U),B.font=U;var Me,ke,Fe,Ze,ot,rt=0,Ct=ne.length;for(Me=0;Me<Ct;Me++)if(null!=(Ze=ne[Me])&&!0!==De.isArray(Ze))rt=De.measureText(B,ae,fe,rt,Ze);else if(De.isArray(Ze))for(ke=0,Fe=Ze.length;ke<Fe;ke++)null==(ot=Ze[ke])||De.isArray(ot)||(rt=De.measureText(B,ae,fe,rt,ot));var Vt=fe.length/2;if(Vt>ne.length){for(Me=0;Me<Vt;Me++)delete ae[fe[Me]];fe.splice(0,Vt)}return rt},De.measureText=function(B,U,ne,ee,ae){var fe=U[ae];return fe||(fe=U[ae]=B.measureText(ae).width,ne.push(ae)),fe>ee&&(ee=fe),ee},De.numberOfLabelLines=function(B){var U=1;return De.each(B,function(ne){De.isArray(ne)&&ne.length>U&&(U=ne.length)}),U},De.color=ts?function(B){return B instanceof CanvasGradient&&(B=mt.global.defaultColor),ts(B)}:function(B){return console.error("Color.js not found!"),B},De.getHoverColor=function(B){return B instanceof CanvasPattern||B instanceof CanvasGradient?B:De.color(B).saturate(.5).darken(.1).rgbString()}}(),Ai._adapters=Nl,Ai.Animation=ca,Ai.animationService=ku,Ai.controllers=Dr,Ai.DatasetController=Hn,Ai.defaults=mt,Ai.Element=wr,Ai.elements=Tr,Ai.Interaction=Wa,Ai.layouts=Di,Ai.platform=Xs,Ai.plugins=$o,Ai.Scale=zl,Ai.scaleService=nd,Ai.Ticks=Cf,Ai.Tooltip=Ll,Ai.helpers.each(tc,function(y,T){Ai.scaleService.registerScaleType(T,y,y._defaults)}),sl)sl.hasOwnProperty(Dp)&&Ai.plugins.register(sl[Dp]);Ai.platform.initialize();var ad=Ai;return"undefined"!=typeof window&&(window.Chart=Ai),Ai.Chart=Ai,Ai.Legend=sl.legend._element,Ai.Title=sl.title._element,Ai.pluginService=Ai.plugins,Ai.PluginBase=Ai.Element.extend({}),Ai.canvasHelpers=Ai.helpers.canvas,Ai.layoutService=Ai.layouts,Ai.LinearScaleBase=wl,Ai.helpers.each(["Bar","Bubble","Doughnut","Line","PolarArea","Radar","Scatter"],function(y){Ai[y]=function(T,E){return new Ai(T,Ai.helpers.merge(E||{},{type:y.charAt(0).toLowerCase()+y.slice(1)}))}}),ad});