(function(){var pt,hn,gr,Ze,je,j,ye,F,U,se,$,Z,oe,ne,Q,ie,xe,Ae,Ne,Ee,nt,Wt,qe,$e,Ie,de,Fe,le,Ge,Qe,ht,Jt,Rt,pn,en,Ot,Gn,ln,Tn,to,wo,Tr,Gr,Or,xt,rr,ai,Mr,Wo=[].slice,Yi={}.hasOwnProperty,Pi=function(Gt,jt){function yn(){this.constructor=Gt}for(var On in jt)Yi.call(jt,On)&&(Gt[On]=jt[On]);return yn.prototype=jt.prototype,Gt.prototype=new yn,Gt.__super__=jt.prototype,Gt},Ba=[].indexOf||function(Gt){for(var jt=0,yn=this.length;yn>jt;jt++)if(jt in this&&this[jt]===Gt)return jt;return-1};for(nt={catchupTime:100,initialRate:.03,minTime:250,ghostTime:100,maxProgressPerFrame:20,easeFactor:1.25,startOnPageLoad:!0,restartOnPushState:!0,restartOnRequestAfter:500,target:"body",elements:{checkInterval:100,selectors:["body"]},eventLag:{minSamples:10,sampleCount:3,lagThreshold:3},ajax:{trackMethods:["GET"],trackWebSockets:!0,ignoreURLs:[]}},Ge=function(){var Gt;return null!=(Gt="undefined"!=typeof performance&&null!==performance&&"function"==typeof performance.now?performance.now():void 0)?Gt:+new Date},ht=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,Ee=window.cancelAnimationFrame||window.mozCancelAnimationFrame,null==ht&&(ht=function(Gt){return setTimeout(Gt,50)},Ee=function(Gt){return clearTimeout(Gt)}),Rt=function(Gt){var jt,yn;return jt=Ge(),(yn=function(){var On;return(On=Ge()-jt)>=33?(jt=Ge(),Gt(On,function(){return ht(yn)})):setTimeout(yn,33-On)})()},Jt=function(){var Gt,jt,yn;return yn=arguments[0],jt=arguments[1],Gt=3<=arguments.length?Wo.call(arguments,2):[],"function"==typeof yn[jt]?yn[jt].apply(yn,Gt):yn[jt]},Wt=function(){var Gt,jt,yn,On,cr,tr,sn;for(jt=arguments[0],tr=0,sn=(On=2<=arguments.length?Wo.call(arguments,1):[]).length;sn>tr;tr++)if(yn=On[tr])for(Gt in yn)Yi.call(yn,Gt)&&(cr=yn[Gt],null!=jt[Gt]&&"object"==typeof jt[Gt]&&null!=cr&&"object"==typeof cr?Wt(jt[Gt],cr):jt[Gt]=cr);return jt},xe=function(Gt){var jt,yn,cr,tr;for(yn=jt=0,cr=0,tr=Gt.length;tr>cr;cr++)yn+=Math.abs(Gt[cr]),jt++;return yn/jt},$e=function(Gt,jt){var yn,cr;if(null==Gt&&(Gt="options"),null==jt&&(jt=!0),cr=document.querySelector("[data-pace-"+Gt+"]")){if(yn=cr.getAttribute("data-pace-"+Gt),!jt)return yn;try{return JSON.parse(yn)}catch(tr){return"undefined"!=typeof console&&null!==console?console.error("Error parsing inline pace options",tr):void 0}}},ye=function(){function Gt(){}return Gt.prototype.on=function(jt,yn,On,cr){var tr;return null==cr&&(cr=!1),null==this.bindings&&(this.bindings={}),null==(tr=this.bindings)[jt]&&(tr[jt]=[]),this.bindings[jt].push({handler:yn,ctx:On,once:cr})},Gt.prototype.once=function(jt,yn,On){return this.on(jt,yn,On,!0)},Gt.prototype.off=function(jt,yn){var On,cr,tr;if(null!=(null!=(cr=this.bindings)?cr[jt]:void 0)){if(null==yn)return delete this.bindings[jt];for(On=0,tr=[];On<this.bindings[jt].length;)tr.push(this.bindings[jt][On].handler===yn?this.bindings[jt].splice(On,1):On++);return tr}},Gt.prototype.trigger=function(){var jt,yn,On,tr,sn,qr,fr,Eo;if(On=arguments[0],jt=2<=arguments.length?Wo.call(arguments,1):[],null!=(qr=this.bindings)?qr[On]:void 0){for(tr=0,Eo=[];tr<this.bindings[On].length;)sn=(fr=this.bindings[On][tr]).once,fr.handler.apply(null!=(yn=fr.ctx)?yn:this,jt),Eo.push(sn?this.bindings[On].splice(tr,1):tr++);return Eo}},Gt}(),se=window.Pace||{},window.Pace=se,Wt(se,ye.prototype),Qe=se.options=Wt({},nt,window.paceOptions,$e()),Gr=0,xt=(ai=["ajax","document","eventLag","elements"]).length;xt>Gr;Gr++)!0===Qe[Gn=ai[Gr]]&&(Qe[Gn]=nt[Gn]);U=function(Gt){function jt(){return jt.__super__.constructor.apply(this,arguments)}return Pi(jt,Gt),jt}(Error),hn=function(){function Gt(){this.progress=0}return Gt.prototype.getElement=function(){var jt;if(null==this.el){if(!(jt=document.querySelector(Qe.target)))throw new U;this.el=document.createElement("div"),this.el.className="pace pace-active",document.body.className=document.body.className.replace(/pace-done/g,""),document.body.className+=" pace-running",this.el.innerHTML='<div class="pace-progress">\n  <div class="pace-progress-inner"></div>\n</div>\n<div class="pace-activity"></div>',null!=jt.firstChild?jt.insertBefore(this.el,jt.firstChild):jt.appendChild(this.el)}return this.el},Gt.prototype.finish=function(){var jt;return(jt=this.getElement()).className=jt.className.replace("pace-active",""),jt.className+=" pace-inactive",document.body.className=document.body.className.replace("pace-running",""),document.body.className+=" pace-done"},Gt.prototype.update=function(jt){return this.progress=jt,this.render()},Gt.prototype.destroy=function(){try{this.getElement().parentNode.removeChild(this.getElement())}catch(jt){U=jt}return this.el=void 0},Gt.prototype.render=function(){var jt,On,cr,tr,sn,qr;if(null==document.querySelector(Qe.target))return!1;for(jt=this.getElement(),cr="translate3d("+this.progress+"%, 0, 0)",tr=0,sn=(qr=["webkitTransform","msTransform","transform"]).length;sn>tr;tr++)jt.children[0].style[qr[tr]]=cr;return(!this.lastRenderedProgress||this.lastRenderedProgress|0!==this.progress|0)&&(jt.children[0].setAttribute("data-progress-text",(0|this.progress)+"%"),this.progress>=100?On="99":(On=this.progress<10?"0":"",On+=0|this.progress),jt.children[0].setAttribute("data-progress",""+On)),this.lastRenderedProgress=this.progress},Gt.prototype.done=function(){return this.progress>=100},Gt}(),F=function(){function Gt(){this.bindings={}}return Gt.prototype.trigger=function(jt,yn){var cr,tr,sn,qr;if(null!=this.bindings[jt]){for(qr=[],cr=0,tr=(sn=this.bindings[jt]).length;tr>cr;cr++)qr.push(sn[cr].call(this,yn));return qr}},Gt.prototype.on=function(jt,yn){var On;return null==(On=this.bindings)[jt]&&(On[jt]=[]),this.bindings[jt].push(yn)},Gt}(),Tr=window.XMLHttpRequest,wo=window.XDomainRequest,to=window.WebSocket,qe=function(Gt,jt){var On,cr;for(On in cr=[],jt.prototype)try{cr.push(null==Gt[On]&&"function"!=typeof jt[On]?"function"==typeof Object.defineProperty?Object.defineProperty(Gt,On,{get:function(){return jt.prototype[On]},configurable:!0,enumerable:!0}):Gt[On]=jt.prototype[On]:void 0)}catch(tr){}return cr},Fe=[],se.ignore=function(){var Gt,jt,yn;return jt=arguments[0],Gt=2<=arguments.length?Wo.call(arguments,1):[],Fe.unshift("ignore"),yn=jt.apply(null,Gt),Fe.shift(),yn},se.track=function(){var Gt,jt,yn;return jt=arguments[0],Gt=2<=arguments.length?Wo.call(arguments,1):[],Fe.unshift("track"),yn=jt.apply(null,Gt),Fe.shift(),yn},Ot=function(Gt){var jt;return null==Gt&&(Gt="GET"),"track"===Fe[0]?"force":!(Fe.length||!Qe.ajax||!("socket"===Gt&&Qe.ajax.trackWebSockets||(jt=Gt.toUpperCase(),Ba.call(Qe.ajax.trackMethods,jt)>=0)))},$=function(Gt){function jt(){var yn,On=this;jt.__super__.constructor.apply(this,arguments),yn=function(cr){var tr;return tr=cr.open,cr.open=function(sn,qr,fr){return Ot(sn)&&On.trigger("request",{type:sn,url:qr,request:cr}),tr.apply(cr,arguments)}},window.XMLHttpRequest=function(cr){var tr;return tr=new Tr(cr),yn(tr),tr};try{qe(window.XMLHttpRequest,Tr)}catch{}if(null!=wo){window.XDomainRequest=function(){var cr;return cr=new wo,yn(cr),cr};try{qe(window.XDomainRequest,wo)}catch{}}if(null!=to&&Qe.ajax.trackWebSockets){window.WebSocket=function(cr,tr){var sn;return sn=null!=tr?new to(cr,tr):new to(cr),Ot("socket")&&On.trigger("request",{type:"socket",url:cr,protocols:tr,request:sn}),sn};try{qe(window.WebSocket,to)}catch{}}}return Pi(jt,Gt),jt}(F),Or=null,en=function(Gt){var jt,yn,On,cr;for(yn=0,On=(cr=Qe.ajax.ignoreURLs).length;On>yn;yn++)if("string"==typeof(jt=cr[yn])){if(-1!==Gt.indexOf(jt))return!0}else if(jt.test(Gt))return!0;return!1},(Ie=function(){return null==Or&&(Or=new $),Or})().on("request",function(Gt){var jt,yn,On,cr;return cr=Gt.type,On=Gt.request,en(Gt.url)||se.running||!1===Qe.restartOnRequestAfter&&"force"!==Ot(cr)?void 0:(yn=arguments,"boolean"==typeof(jt=Qe.restartOnRequestAfter||0)&&(jt=0),setTimeout(function(){var qr,fr,Eo,li,di;if("socket"===cr?On.readyState<2:0<(Eo=On.readyState)&&4>Eo){for(se.restart(),di=[],qr=0,fr=(li=se.sources).length;fr>qr;qr++){if((Gn=li[qr])instanceof pt){Gn.watch.apply(Gn,yn);break}di.push(void 0)}return di}},jt))}),pt=function(){function Gt(){var jt=this;this.elements=[],Ie().on("request",function(){return jt.watch.apply(jt,arguments)})}return Gt.prototype.watch=function(jt){var yn,On,cr;return cr=jt.type,yn=jt.request,en(jt.url)?void 0:(On="socket"===cr?new ne(yn):new Q(yn),this.elements.push(On))},Gt}(),Q=function Gt(jt){var cr,tr,sn,qr,fr=this;if(this.progress=0,null!=window.ProgressEvent)for(jt.addEventListener("progress",function(Eo){return fr.progress=Eo.lengthComputable?100*Eo.loaded/Eo.total:fr.progress+(100-fr.progress)/2},!1),cr=0,tr=(qr=["load","abort","timeout","error"]).length;tr>cr;cr++)jt.addEventListener(qr[cr],function(){return fr.progress=100},!1);else sn=jt.onreadystatechange,jt.onreadystatechange=function(){var Eo;return 0===(Eo=jt.readyState)||4===Eo?fr.progress=100:3===jt.readyState&&(fr.progress=50),"function"==typeof sn?sn.apply(null,arguments):void 0}},ne=function Gt(jt){var On,cr,tr,sn=this;for(this.progress=0,On=0,cr=(tr=["error","open"]).length;cr>On;On++)jt.addEventListener(tr[On],function(){return sn.progress=100},!1)},Ze=function Gt(jt){var On,cr,tr;for(null==jt&&(jt={}),this.elements=[],null==jt.selectors&&(jt.selectors=[]),On=0,cr=(tr=jt.selectors).length;cr>On;On++)this.elements.push(new je(tr[On]))},je=function(){function Gt(jt){this.selector=jt,this.progress=0,this.check()}return Gt.prototype.check=function(){var jt=this;return document.querySelector(this.selector)?this.done():setTimeout(function(){return jt.check()},Qe.elements.checkInterval)},Gt.prototype.done=function(){return this.progress=100},Gt}(),gr=function(){function Gt(){var jt,yn,On=this;this.progress=null!=(yn=this.states[document.readyState])?yn:100,jt=document.onreadystatechange,document.onreadystatechange=function(){return null!=On.states[document.readyState]&&(On.progress=On.states[document.readyState]),"function"==typeof jt?jt.apply(null,arguments):void 0}}return Gt.prototype.states={loading:0,interactive:50,complete:100},Gt}(),j=function Gt(){var jt,yn,On,cr,tr,sn=this;this.progress=0,jt=0,tr=[],cr=0,On=Ge(),yn=setInterval(function(){var qr;return qr=Ge()-On-50,On=Ge(),tr.push(qr),tr.length>Qe.eventLag.sampleCount&&tr.shift(),jt=xe(tr),++cr>=Qe.eventLag.minSamples&&jt<Qe.eventLag.lagThreshold?(sn.progress=100,clearInterval(yn)):sn.progress=3/(jt+3)*100},50)},oe=function(){function Gt(jt){this.source=jt,this.last=this.sinceLastUpdate=0,this.rate=Qe.initialRate,this.catchup=0,this.progress=this.lastProgress=0,null!=this.source&&(this.progress=Jt(this.source,"progress"))}return Gt.prototype.tick=function(jt,yn){var On;return null==yn&&(yn=Jt(this.source,"progress")),yn>=100&&(this.done=!0),yn===this.last?this.sinceLastUpdate+=jt:(this.sinceLastUpdate&&(this.rate=(yn-this.last)/this.sinceLastUpdate),this.catchup=(yn-this.progress)/Qe.catchupTime,this.sinceLastUpdate=0,this.last=yn),yn>this.progress&&(this.progress+=this.catchup*jt),On=1-Math.pow(this.progress/100,Qe.easeFactor),this.progress+=On*this.rate*jt,this.progress=Math.min(this.lastProgress+Qe.maxProgressPerFrame,this.progress),this.progress=Math.max(0,this.progress),this.progress=Math.min(100,this.progress),this.lastProgress=this.progress,this.progress},Gt}(),ln=null,pn=null,Ae=null,Tn=null,ie=null,Ne=null,se.running=!1,de=function(){return Qe.restartOnPushState?se.restart():void 0},null!=window.history.pushState&&(rr=window.history.pushState,window.history.pushState=function(){return de(),rr.apply(window.history,arguments)}),null!=window.history.replaceState&&(Mr=window.history.replaceState,window.history.replaceState=function(){return de(),Mr.apply(window.history,arguments)}),Z={ajax:pt,elements:Ze,document:gr,eventLag:j},(le=function(){var Gt,jt,yn,On,cr,tr,sn,qr;for(se.sources=ln=[],jt=0,On=(tr=["ajax","elements","document","eventLag"]).length;On>jt;jt++)!1!==Qe[Gt=tr[jt]]&&ln.push(new Z[Gt](Qe[Gt]));for(yn=0,cr=(qr=null!=(sn=Qe.extraSources)?sn:[]).length;cr>yn;yn++)ln.push(new(Gn=qr[yn])(Qe));return se.bar=Ae=new hn,pn=[],Tn=new oe})(),se.stop=function(){return se.trigger("stop"),se.running=!1,Ae.destroy(),Ne=!0,null!=ie&&("function"==typeof Ee&&Ee(ie),ie=null),le()},se.restart=function(){return se.trigger("restart"),se.stop(),se.start()},se.go=function(){var Gt;return se.running=!0,Ae.render(),Gt=Ge(),Ne=!1,ie=Rt(function(jt,yn){var cr,tr,qr,fr,Eo,di,vo,tu,qi,za,ma,ps,X;for(cr=tu=0,tr=!0,fr=qi=0,ma=ln.length;ma>qi;fr=++qi)for(Gn=ln[fr],vo=null!=pn[fr]?pn[fr]:pn[fr]=[],Eo=za=0,ps=(qr=null!=(X=Gn.elements)?X:[Gn]).length;ps>za;Eo=++za)tr&=(di=null!=vo[Eo]?vo[Eo]:vo[Eo]=new oe(qr[Eo])).done,di.done||(cr++,tu+=di.tick(jt));return Ae.update(Tn.tick(jt,tu/cr)),Ae.done()||tr||Ne?(Ae.update(100),se.trigger("done"),setTimeout(function(){return Ae.finish(),se.running=!1,se.trigger("hide")},Math.max(Qe.ghostTime,Math.max(Qe.minTime-(Ge()-Gt),0)))):yn()})},se.start=function(Gt){Wt(Qe,Gt),se.running=!0;try{Ae.render()}catch(jt){U=jt}return document.querySelector(".pace")?(se.trigger("start"),se.go()):setTimeout(se.start,50)},"function"==typeof define&&define.amd?define(["pace"],function(){return se}):"object"==typeof exports?module.exports=se:Qe.startOnPageLoad&&se.start()}).call(this),function(){"use strict";function pt(i){if(null===i)return"null";if(void 0===i)return"undefined";var c=typeof i;return"object"==c&&(Array.prototype.isPrototypeOf(i)||i.constructor&&"Array"===i.constructor.name)?"array":"object"==c&&(String.prototype.isPrototypeOf(i)||i.constructor&&"String"===i.constructor.name)?"string":c}function hn(i){return Q(function(c,h){if(c.length!==h.length)return!1;for(var y=c.length,w=0;w<y;w++)if(!i.eq(c[w],h[w]))return!1;return!0})}function gr(i){return Q(function(c,h){var w,D,O=Object.keys(c),P=Object.keys(h);if(w=hn(ie),D=function(q){return Array.prototype.slice.call(q).sort(void 0)},!Q(function(q,re){return w.eq(D(q),D(re))}).eq(O,P))return!1;for(var B=O.length,L=0;L<B;L++){var K=O[L];if(!i.eq(c[K],h[K]))return!1}return!0})}function Ze(i){return function(c){return y=typeof(h=c),(null===h?"null":"object"==y&&(Array.prototype.isPrototypeOf(h)||h.constructor&&"Array"===h.constructor.name)?"array":"object"==y&&(String.prototype.isPrototypeOf(h)||h.constructor&&"String"===h.constructor.name)?"string":y)===i;var h,y}}function je(i){return function(c){return typeof c===i}}function j(i){return function(c){return i===c}}function ye(i){return null==i}function F(i){return!ye(i)}function U(){}function se(i,c){return function(){for(var h=[],y=0;y<arguments.length;y++)h[y]=arguments[y];return i(c.apply(null,h))}}function $(i,c){return function(h){return i(c(h))}}function Z(i){return function(){return i}}function oe(i){return i}function ne(i,c){return i===c}var Q=function(i){return{eq:i}},ie=Q(function(i,c){return i===c}),xe=Q(function(i,c){if(i===c)return!0;var h=pt(i);return h===pt(c)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(h)?i===c:"array"===h?hn(xe).eq(i,c):"object"===h&&gr(xe).eq(i,c))}),Ae=Ze("string"),Ne=Ze("object"),Ee=Ze("array"),nt=j(null),Wt=je("boolean"),qe=j(void 0),$e=je("function"),Ie=je("number");function de(i){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];return function(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];var D=c.concat(y);return i.apply(null,D)}}function Fe(i){return function(c){return!i(c)}}function le(i){return i()}function Ge(i){i()}function Qe(){return Rt}var ht=Z(!1),Jt=Z(!0),Rt={fold:function(i,c){return i()},isSome:ht,isNone:Jt,getOr:oe,getOrThunk:pn,getOrDie:function(i){throw new Error(i||"error: getOrDie called on none.")},getOrNull:Z(null),getOrUndefined:Z(void 0),or:oe,orThunk:pn,map:Qe,each:U,bind:Qe,exists:ht,forall:Jt,filter:function(){return Rt},toArray:function(){return[]},toString:Z("none()")};function pn(i){return i()}function en(i,c){return $a.call(i,c)}function Ot(i,c){return-1<en(i,c)}function Gn(i,c){for(var h=0,y=i.length;h<y;h++)if(c(i[h],h))return!0;return!1}function ln(i,c){for(var h=i.length,y=new Array(h),w=0;w<h;w++)y[w]=c(i[w],w);return y}function Tn(i,c){for(var h=0,y=i.length;h<y;h++)c(i[h],h)}function to(i,c){for(var h=i.length-1;0<=h;h--)c(i[h],h)}function wo(i,c){for(var h=[],y=[],w=0,D=i.length;w<D;w++){var O=i[w];(c(O,w)?h:y).push(O)}return{pass:h,fail:y}}function Tr(i,c){for(var h=[],y=0,w=i.length;y<w;y++){var D=i[y];c(D,y)&&h.push(D)}return h}function Gr(i,c,h){return to(i,function(y,w){h=c(h,y,w)}),h}function Or(i,c,h){return Tn(i,function(y,w){h=c(h,y,w)}),h}function xt(i,c,h){for(var y=0,w=i.length;y<w;y++){var D=i[y];if(c(D,y))return X.some(D);if(h(D,y))break}return X.none()}function rr(i,c){return xt(i,c,ht)}function ai(i,c){for(var h=0,y=i.length;h<y;h++)if(c(i[h],h))return X.some(h);return X.none()}function Qi(i,c){return function(h){for(var y=[],w=0,D=h.length;w<D;++w){if(!Ee(h[w]))throw new Error("Arr.flatten item "+w+" was not an array, input: "+h);nu.apply(y,h[w])}return y}(ln(i,c))}function Mr(i,c){for(var h=0,y=i.length;h<y;++h)if(!0!==c(i[h],h))return!1;return!0}function Wo(i){var c=os.call(i,0);return c.reverse(),c}function Yi(i,c){return Tr(i,function(h){return!Ot(c,h)})}function Pi(i,c){var h=os.call(i,0);return h.sort(c),h}function Ba(i,c){return 0<=c&&c<i.length?X.some(i[c]):X.none()}function Gt(i){return Ba(i,0)}function jt(i){return Ba(i,i.length-1)}function yn(i,c){for(var h=0;h<i.length;h++){var y=c(i[h],h);if(y.isSome())return y}return X.none()}function On(i,c){for(var h=ur(i),y=0,w=h.length;y<w;y++){var D=h[y];c(i[D],D)}}function cr(i,c){return pi(i,function(h,y){return{k:y,v:c(h,y)}})}function tr(i){return function(c,h){i[h]=c}}function sn(i,c,h,y){return On(i,function(w,D){(c(w,D)?h:y)(w,D)}),1}function qr(i,c){var h={};return sn(i,c,tr(h),U),h}function fr(i,c){return Do(i,c)?X.from(i[c]):X.none()}function Eo(i,c){return Do(i,c)&&null!=i[c]}function li(i,c,h){var y,w;if(!i)return!1;if(h=h||i,void 0!==i.length){for(y=0,w=i.length;y<w;y++)if(!1===c.call(h,i[y],y,i))return!1}else for(y in i)if(Do(i,y)&&!1===c.call(h,i[y],y,i))return!1;return!0}function di(i,c){var h=[];return li(i,function(y,w){h.push(c(y,w,i))}),h}function vo(i,c){var h=[];return li(i,function(y,w){c&&!c(y,w,i)||h.push(y)}),h}function tu(i,c){if(i)for(var h=0,y=i.length;h<y;h++)if(i[h]===c)return h;return-1}function qi(i,c,h,y){for(var w=qe(h)?i[0]:h,D=0;D<i.length;D++)w=c.call(y,w,i[D],D);return w}function za(i,c,h){for(var y=0,w=i.length;y<w;y++)if(c.call(h,i[y],y,i))return y;return-1}function ma(i){return i[i.length-1]}var ps=function(i){function c(){return w}function h(D){return D(i)}var y=Z(i),w={fold:function(D,O){return O(i)},isSome:Jt,isNone:ht,getOr:y,getOrThunk:y,getOrDie:y,getOrNull:y,getOrUndefined:y,or:c,orThunk:c,map:function(D){return ps(D(i))},each:function(D){D(i)},bind:h,exists:h,forall:h,filter:function(D){return D(i)?w:Rt},toArray:function(){return[i]},toString:function(){return"some("+i+")"}};return w},X={some:ps,none:Qe,from:function(i){return null==i?Rt:ps(i)}},os=Array.prototype.slice,$a=Array.prototype.indexOf,nu=Array.prototype.push,ki=$e(Array.from)?Array.from:function(i){return os.call(i)},ur=Object.keys,Yu=Object.hasOwnProperty,pi=function(i,c){var h={};return On(i,function(y,w){var D=c(y,w);h[D.k]=D.v}),h},Do=function(i,c){return Yu.call(i,c)},dc=Array.isArray,ir=function(){return(ir=Object.assign||function(i){for(var c,h=1,y=arguments.length;h<y;h++)for(var w in c=arguments[h])Object.prototype.hasOwnProperty.call(c,w)&&(i[w]=c[w]);return i}).apply(this,arguments)};function Vt(i,c,h){if(h||2===arguments.length)for(var y,w=0,D=c.length;w<D;w++)!y&&w in c||((y=y||Array.prototype.slice.call(c,0,w))[w]=c[w]);return i.concat(y||Array.prototype.slice.call(c))}function wn(i){var c,h=!1;return function(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];return h||(h=!0,c=i.apply(null,y)),c}}function rt(i,c){var h=String(c).toLowerCase();return rr(i,function(y){return y.search(h)})}function Dt(i,c){return-1!==i.indexOf(c)}function ct(i){return function(c){return c.replace(i,"")}}function tn(i){return 0<i.length}function qt(i){return!tn(i)}function un(i){return function(c){return Dt(c,i)}}function ar(i){return window.matchMedia(i).matches}function qn(i){return null==i?"":(""+i).replace(Tm,"")}function Yn(i,c){return c?!("array"!==c||!dc(i))||typeof i===c:void 0!==i}function or(i,c){for(var h=[],y=function(D){return h.push(D),c(D)},w=c(i);(w=w.bind(y)).isSome(););return h}function $n(i,c){var h=i.dom;if(1!==h.nodeType)return!1;var y=h;if(void 0!==y.matches)return y.matches(c);if(void 0!==y.msMatchesSelector)return y.msMatchesSelector(c);if(void 0!==y.webkitMatchesSelector)return y.webkitMatchesSelector(c);if(void 0!==y.mozMatchesSelector)return y.mozMatchesSelector(c);throw new Error("Browser lacks native selectors")}function Sn(i){return 1!==i.nodeType&&9!==i.nodeType&&11!==i.nodeType||0===i.childElementCount}function Fn(i,c){return i.dom===c.dom}function Bt(i,c){return aa().browser.isIE()?(w=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(i.dom.compareDocumentPosition(c.dom)&w)):(D=i.dom)!==(O=c.dom)&&D.contains(O);var w,D,O}function Hr(){return mo(0,0)}function Wr(i){function c(w){return function(){return h===w}}var h=i.current;return{current:h,version:i.version,isEdge:c("Edge"),isChrome:c("Chrome"),isIE:c("IE"),isOpera:c("Opera"),isFirefox:c(qs),isSafari:c("Safari")}}function Br(i){function c(w){return function(){return h===w}}var h=i.current;return{current:h,version:i.version,isWindows:c(vi),isiOS:c("iOS"),isAndroid:c(Fa),isOSX:c("OSX"),isLinux:c("Linux"),isSolaris:c(is),isFreeBSD:c(pa),isChromeOS:c(Xc)}}function Er(i){if(null==i)throw new Error("Node cannot be null or undefined");return{dom:i}}var mo=function(i,c){return{major:i,minor:c}},jo={nu:mo,detect:function(i,c){var h,y,w=String(c).toLowerCase();return 0===i.length?Hr():(y=function(O,P){for(var B=0;B<O.length;B++){var L=O[B];if(L.test(P))return L}}(i,h=w))?mo(D(1),D(2)):{major:0,minor:0};function D(O){return Number(h.replace(y,"$"+O))}},unknown:Hr},Xr=function(i,c){return""===(h=c)||i.length>=h.length&&i.substr(0,0+h.length)===h;var h},As=ct(/^\s+|\s+$/g),yr=ct(/^\s+/g),ao=ct(/\s+$/g),Ti=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,js={browsers:Z([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(i){return Dt(i,"edge/")&&Dt(i,"chrome")&&Dt(i,"safari")&&Dt(i,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Ti],search:function(i){return Dt(i,"chrome")&&!Dt(i,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(i){return Dt(i,"msie")||Dt(i,"trident")}},{name:"Opera",versionRegexes:[Ti,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:un("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:un("firefox")},{name:"Safari",versionRegexes:[Ti,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(i){return(Dt(i,"safari")||Dt(i,"mobile/"))&&Dt(i,"applewebkit")}}]),oses:Z([{name:"Windows",search:un("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(i){return Dt(i,"iphone")||Dt(i,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:un("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:un("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:un("linux"),versionRegexes:[]},{name:"Solaris",search:un("sunos"),versionRegexes:[]},{name:"FreeBSD",search:un("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:un("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},qs="Firefox",Ir=function(){return Wr({current:void 0,version:jo.unknown()})},fc=Wr,vi=(Z("Edge"),Z("Chrome"),Z("IE"),Z("Opera"),Z(qs),Z("Safari"),"Windows"),Fa="Android",is="Solaris",pa="FreeBSD",Xc="ChromeOS",Yc=function(){return Br({current:void 0,version:jo.unknown()})},Qr=Br,aa=(Z(vi),Z("iOS"),Z(Fa),Z("Linux"),Z("OSX"),Z(is),Z(pa),Z(Xc),wn(function(){return i=navigator.userAgent,c=X.from(navigator.userAgentData),h=ar,be=js.browsers(),Ce=js.oses(),{browser:Se=c.bind(function(ze){return ot=be,yn(ze.brands,function(yt){var Ve=yt.brand.toLowerCase();return rr(ot,function(Je){var it;return Ve===(null===(it=Je.brand)||void 0===it?void 0:it.toLowerCase())}).map(function(Je){return{current:Je.name,version:jo.nu(parseInt(yt.version,10),0)}})});var ot}).orThunk(function(){return rt(be,ze=i).map(function(ot){var yt=jo.detect(ot.versionRegexes,ze);return{current:ot.name,version:yt}});var ze}).fold(Ir,fc),os:Oe=rt(Ce,y=i).map(function(ze){var ot=jo.detect(ze.versionRegexes,y);return{current:ze.name,version:ot}}).fold(Yc,Qr),deviceType:(D=Se,O=i,P=h,B=(w=Oe).isiOS()&&!0===/ipad/i.test(O),L=w.isiOS()&&!B,q=(K=w.isiOS()||w.isAndroid())||P("(pointer:coarse)"),re=B||!L&&K&&P("(min-device-width:768px)"),fe=L||K&&!re,ve=D.isSafari()&&w.isiOS()&&!1===/safari/i.test(O),{isiPad:Z(B),isiPhone:Z(L),isTablet:Z(re),isPhone:Z(fe),isTouch:Z(q),isAndroid:w.isAndroid,isiOS:w.isiOS,isWebView:Z(ve),isDesktop:Z(!fe&&!re&&!ve)})};var i,c,h,y,w,D,O,P,B,L,K,q,re,fe,ve,be,Ce,Se,Oe})),Zc=navigator.userAgent,Is=aa(),Ni=Is.browser,yu=Is.os,Co=Is.deviceType,Vl=/WebKit/.test(Zc)&&!Ni.isEdge(),km="FormData"in window&&"FileReader"in window&&"URL"in window&&!!URL.createObjectURL,Os=-1!==Zc.indexOf("Windows Phone"),zr={opera:Ni.isOpera(),webkit:Vl,ie:!(!Ni.isIE()&&!Ni.isEdge())&&Ni.version.major,gecko:Ni.isFirefox(),mac:yu.isOSX()||yu.isiOS(),iOS:Co.isiPad()||Co.isiPhone(),android:yu.isAndroid(),contentEditable:!0,transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",caretAfter:!0,range:window.getSelection&&"Range"in window,documentMode:Ni.isIE()?document.documentMode||7:10,fileApi:km,ceFalse:!0,cacheSuffix:null,container:null,experimentalShadowDom:!1,canHaveCSP:!Ni.isIE(),desktop:Co.isDesktop(),windowsPhone:Os,browser:{current:Ni.current,version:Ni.version,isChrome:Ni.isChrome,isEdge:Ni.isEdge,isFirefox:Ni.isFirefox,isIE:Ni.isIE,isOpera:Ni.isOpera,isSafari:Ni.isSafari},os:{current:yu.current,version:yu.version,isAndroid:yu.isAndroid,isChromeOS:yu.isChromeOS,isFreeBSD:yu.isFreeBSD,isiOS:yu.isiOS,isLinux:yu.isLinux,isOSX:yu.isOSX,isSolaris:yu.isSolaris,isWindows:yu.isWindows},deviceType:{isDesktop:Co.isDesktop,isiPad:Co.isiPad,isiPhone:Co.isiPhone,isPhone:Co.isPhone,isTablet:Co.isTablet,isTouch:Co.isTouch,isWebView:Co.isWebView}},Tm=/^\s*|\s*$/g,df=function(i,c,h,y){y=y||this,i&&li(i=h?i[h]:i,function(w,D){return!1!==c.call(y,w,D,h)&&void df(w,c,h,y)})},fn={trim:qn,isArray:dc,is:Yn,toArray:function(i){if(dc(i))return i;for(var c=[],h=0,y=i.length;h<y;h++)c[h]=i[h];return c},makeMap:function(i,c,h){var y;for(c=c||",",h=h||{},y=(i="string"==typeof(i=i||[])?i.split(c):i).length;y--;)h[i[y]]={};return h},each:li,map:di,grep:vo,inArray:tu,hasOwn:Do,extend:function(i){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];for(var y=0;y<c.length;y++){var w,D,O=c[y];for(w in O)!Do(O,w)||void 0!==(D=O[w])&&(i[w]=D)}return i},create:function(i,c,h){var y,w,D,O=this,P=0,B=(i=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(i))[3].match(/(^|\.)(\w+)$/i)[2],L=O.createNS(i[3].replace(/\.\w+$/,""),h);if(!L[B]){if("static"===i[2])return L[B]=c,void(this.onCreate&&this.onCreate(i[2],i[3],L[B]));c[B]||(c[B]=function(){},P=1),L[B]=c[B],O.extend(L[B].prototype,c),i[5]&&(y=O.resolve(i[5]).prototype,w=i[5].match(/\.(\w+)$/i)[1],D=L[B],L[B]=P?function(){return y[w].apply(this,arguments)}:function(){return this.parent=y[w],D.apply(this,arguments)},L[B].prototype[B]=L[B],O.each(y,function(K,q){L[B].prototype[q]=y[q]}),O.each(c,function(K,q){y[q]?L[B].prototype[q]=function(){return this.parent=y[q],K.apply(this,arguments)}:q!==B&&(L[B].prototype[q]=K)})),O.each(c.static,function(K,q){L[B][q]=K})}},walk:df,createNS:function(i,c){var h,y;for(c=c||window,i=i.split("."),h=0;h<i.length;h++)c[y=i[h]]||(c[y]={}),c=c[y];return c},resolve:function(i,c){var h,y;for(c=c||window,h=0,y=(i=i.split(".")).length;h<y&&(c=c[i[h]]);h++);return c},explode:function(i,c){return!i||Yn(i,"array")?i:di(i.split(c||","),qn)},_addCacheSuffix:function(i){var c=zr.cacheSuffix;return c&&(i+=(-1===i.indexOf("?")?"?":"&")+c),i}},zt={fromHtml:function(i,c){var h=(c||document).createElement("div");if(h.innerHTML=i,!h.hasChildNodes()||1<h.childNodes.length)throw console.error("HTML does not have a single root node",i),new Error("HTML must have a single root node");return Er(h.childNodes[0])},fromTag:function(i,c){return Er((c||document).createElement(i))},fromText:function(i,c){return Er((c||document).createTextNode(i))},fromDom:Er,fromPoint:function(i,c,h){return X.from(i.dom.elementFromPoint(c,h)).map(Er)}};function va(i){return i.dom.nodeName.toLowerCase()}function Fp(i){return i.dom.nodeType}function xd(i){return function(c){return Fp(c)===i}}function ru(i){return zt.fromDom(i.dom.ownerDocument)}function Zu(i){return Cd(i)?i:ru(i)}function as(i){return zt.fromDom(Zu(i).dom.defaultView)}function Ru(i){return X.from(i.dom.parentNode).map(zt.fromDom)}function Ku(i){return X.from(i.dom.previousSibling).map(zt.fromDom)}function Es(i){return X.from(i.dom.nextSibling).map(zt.fromDom)}function Lf(i){return Wo(or(i,Ku))}function hc(i){return or(i,Es)}function Mm(i,c){return X.from(i.dom.childNodes[c]).map(zt.fromDom)}function c0(i){return Mm(i,0)}function Kc(i){return Mm(i,i.dom.childNodes.length-1)}function _d(i){return i.dom.childNodes.length}function Hl(i){return ii(i)&&F(i.dom.host)}function vs(i){return Hl(i)?i:function(){var c=Zu(i).dom.head;if(null==c)throw new Error("Head is not available yet");return zt.fromDom(c)}()}function Wl(i){return zt.fromDom(i.dom.host)}function Ps(i,c){Ru(i).each(function(h){h.dom.insertBefore(c.dom,i.dom)})}function Ja(i,c){Es(i).fold(function(){Ru(i).each(function(h){ss(h,c)})},function(h){Ps(h,c)})}function gc(i,c){c0(i).fold(function(){ss(i,c)},function(h){i.dom.insertBefore(c.dom,h.dom)})}function wd(i,c){Tn(c,function(h){ss(i,h)})}function d0(i){i.dom.textContent="",Tn(mr(i),function(c){us(c)})}function Ch(i){var c,h=mr(i);0<h.length&&(c=i,Tn(h,function(y){Ps(c,y)})),us(i)}function ff(i,c){return void 0!==i?i:void 0!==c?c:0}function Gl(i){var c=void 0!==i?i.dom:document;return Bf(c.body.scrollLeft||c.documentElement.scrollLeft,c.body.scrollTop||c.documentElement.scrollTop)}function f0(i,c,h){var y=(void 0!==h?h.dom:document).defaultView;y&&y.scrollTo(i,c)}function Vp(i,c){aa().browser.isSafari()&&$e(i.dom.scrollIntoViewIfNeeded)?i.dom.scrollIntoViewIfNeeded(!1):i.dom.scrollIntoView(c)}function Dm(i,c,h,y){return{x:i,y:c,width:h,height:y,right:i+h,bottom:c+y}}function Nx(i){var c=void 0===i?window:i,y=Gl(zt.fromDom(c.document)),w=void 0===c?window:c;return(aa().browser.isFirefox()?X.none():X.from(w.visualViewport)).fold(function(){var D=c.document.documentElement;return Dm(y.left,y.top,D.clientWidth,D.clientHeight)},function(D){return Dm(Math.max(D.pageLeft,y.left),Math.max(D.pageTop,y.top),D.width,D.height)})}function ea(i){return function(c){return!!c&&c.nodeType===i}}function Am(i){return i&&!Object.getPrototypeOf(i)}function mc(i){var c=i.map(function(h){return h.toLowerCase()});return function(h){if(h&&h.nodeName){var y=h.nodeName.toLowerCase();return Ot(c,y)}return!1}}function h0(i,c){var h=c.toLowerCase().split(" ");return function(y){if(Kr(y))for(var w=0;w<h.length;w++){var D=y.ownerDocument.defaultView.getComputedStyle(y,null);if((D?D.getPropertyValue(i):null)===h[w])return!0}return!1}}function Rx(i){return function(c){return Kr(c)&&c.hasAttribute(i)}}function kh(i){return Kr(i)&&i.hasAttribute("data-mce-bogus")}function yg(i){return Kr(i)&&"TABLE"===i.tagName}function ml(i){return function(c){return!(!Kr(c)||c.contentEditable!==i&&c.getAttribute("data-mce-contenteditable")!==i)}}function Ul(i,c,h){return void 0===h&&(h=ne),i.exists(function(y){return h(y,c)})}function wa(i,c,h){return i.isSome()&&c.isSome()?X.some(h(i.getOrDie(),c.getOrDie())):X.none()}function pl(i){return void 0!==i.style&&$e(i.style.getPropertyValue)}function sa(i,c,h){if(!(Ae(h)||Wt(h)||Ie(h)))throw console.error("Invalid call to Attribute.set. Key ",c,":: Value ",h,":: Element ",i),new Error("Attribute value was not simple");i.setAttribute(c,h+"")}function pc(i,c,h){sa(i.dom,c,h)}function Im(i,c){var h=i.dom;On(c,function(y,w){sa(h,w,y)})}function ys(i,c){var h=i.dom.getAttribute(c);return null===h?void 0:h}function $u(i,c){return X.from(ys(i,c))}function Th(i,c){i.dom.removeAttribute(c)}function bu(i,c){var h=i.dom,y=window.getComputedStyle(h).getPropertyValue(c);return""!==y||yo(i)?y:Lx(h,c)}function Sd(i,c){var y=Lx(i.dom,c);return X.from(y).filter(function(w){return 0<w.length})}function Mi(i){var c={},h=i.dom;if(pl(h))for(var y=0;y<h.style.length;y++){var w=h.style.item(y);c[w]=h.style[w]}return c}function $c(i){return rr(i,vl)}function Ju(i,c){return i.children&&Ot(i.children,c)}"undefined"!=typeof window||Function("return this;")();var vl=xd(1),ta=xd(3),Cd=xd(9),ii=xd(11),mr=function(i){return ln(i.dom.childNodes,zt.fromDom)},Xs=$e(Element.prototype.attachShadow)&&$e(Node.prototype.getRootNode),Lu=Z(Xs),xu=Xs?function(i){return zt.fromDom(i.dom.getRootNode())}:Zu,ss=function(i,c){i.dom.appendChild(c.dom)},us=function(i){var c=i.dom;null!==c.parentNode&&c.parentNode.removeChild(c)},yo=function(i){var c=ta(i)?i.dom.parentNode:i.dom;if(null==c||null===c.ownerDocument)return!1;var h=c.ownerDocument,y=zt.fromDom(c),w=xu(y);return(Hl(w)?X.some(w):X.none()).fold(function(){return h.body.contains(c)},$(yo,Wl))},Hp=function(i,c){return{left:i,top:c,translate:function(h,y){return Hp(i+h,c+y)}}},Bf=Hp,Va=function(i){var c,h=i.dom,y=h.ownerDocument.body;return y===h?Bf(y.offsetLeft,y.offsetTop):yo(i)?(c=h.getBoundingClientRect(),Bf(c.left,c.top)):Bf(0,0)},Kr=ea(1),bg=mc(["textarea","input"]),br=ea(3),_u=ea(8),zf=ea(9),Mh=ea(11),Hi=mc(["br"]),bo=mc(["img"]),vc=ml("true"),uo=ml("false"),ls=mc(["td","th"]),yl=mc(["video","audio","object","embed"]),Lx=function(i,c){return pl(i)?i.style.getPropertyValue(c):""},Ky=aa().browser,Qu={},jl={exports:Qu};function Wp(i){setTimeout(function(){throw i},0)}function xg(i){return el(function(){return new Gp(i)})}function hf(i){if(!Ee(i))throw new Error("cases must be an array");if(0===i.length)throw new Error("there must be at least one case");var c=[],h={};return Tn(i,function(y,w){var D=ur(y);if(1!==D.length)throw new Error("one and only one name per case");var O=D[0],P=y[O];if(void 0!==h[O])throw new Error("duplicate key detected:"+O);if("cata"===O)throw new Error("cannot have a case named cata (sorry)");if(!Ee(P))throw new Error("case arguments must be an array");c.push(O),h[O]=function(){for(var B=[],L=0;L<arguments.length;L++)B[L]=arguments[L];var K=B.length;if(K!==P.length)throw new Error("Wrong number of arguments to case "+O+". Expected "+P.length+" ("+P+"), got "+K);return{fold:function(){for(var q=[],re=0;re<arguments.length;re++)q[re]=arguments[re];if(q.length!==i.length)throw new Error("Wrong number of arguments to fold. Expected "+i.length+", got "+q.length);return q[w].apply(null,B)},match:function(q){var re=ur(q);if(c.length!==re.length)throw new Error("Wrong number of arguments to match. Expected: "+c.join(",")+"\nActual: "+re.join(","));if(!Mr(c,function(fe){return Ot(re,fe)}))throw new Error("Not all branches were specified when using match. Specified: "+re.join(", ")+"\nRequired: "+c.join(", "));return q[O].apply(null,B)},log:function(q){console.log(q,{constructors:c,constructor:O,params:B})}}}}),h}!function(){var i=this,c=function(){var h,y,w,D={exports:{}};function O(){}function P(be){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof be)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],fe(be,this)}function B(be,Ce){for(;3===be._state;)be=be._value;0!==be._state?(be._handled=!0,P._immediateFn(function(){var Se,Oe=1===be._state?Ce.onFulfilled:Ce.onRejected;if(null!==Oe){try{Se=Oe(be._value)}catch(ze){return void K(Ce.promise,ze)}L(Ce.promise,Se)}else(1===be._state?L:K)(Ce.promise,be._value)})):be._deferreds.push(Ce)}function L(be,Ce){try{if(Ce===be)throw new TypeError("A promise cannot be resolved with itself.");if(Ce&&("object"==typeof Ce||"function"==typeof Ce)){var Se=Ce.then;if(Ce instanceof P)return be._state=3,be._value=Ce,void q(be);if("function"==typeof Se)return void fe((Oe=Se,ze=Ce,function(){Oe.apply(ze,arguments)}),be)}be._state=1,be._value=Ce,q(be)}catch(ot){K(be,ot)}var Oe,ze}function K(be,Ce){be._state=2,be._value=Ce,q(be)}function q(be){2===be._state&&0===be._deferreds.length&&P._immediateFn(function(){be._handled||P._unhandledRejectionFn(be._value)});for(var Ce=0,Se=be._deferreds.length;Ce<Se;Ce++)B(be,be._deferreds[Ce]);be._deferreds=null}function re(be,Ce,Se){this.onFulfilled="function"==typeof be?be:null,this.onRejected="function"==typeof Ce?Ce:null,this.promise=Se}function fe(be,Ce){var Se=!1;try{be(function(Oe){Se||(Se=!0,L(Ce,Oe))},function(Oe){Se||(Se=!0,K(Ce,Oe))})}catch(Oe){if(Se)return;Se=!0,K(Ce,Oe)}}h=D,y="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},w=setTimeout,P.prototype.catch=function(be){return this.then(null,be)},P.prototype.then=function(be,Ce){var Se=new this.constructor(O);return B(this,new re(be,Ce,Se)),Se},P.all=function(be){var Ce=Array.prototype.slice.call(be);return new P(function(Se,Oe){if(0===Ce.length)return Se([]);for(var ze=Ce.length,ot=0;ot<Ce.length;ot++)!function yt(Ve,Je){try{if(Je&&("object"==typeof Je||"function"==typeof Je)){var it=Je.then;if("function"==typeof it)return it.call(Je,function(Nt){yt(Ve,Nt)},Oe),0}Ce[Ve]=Je,0==--ze&&Se(Ce)}catch(Nt){Oe(Nt)}}(ot,Ce[ot])})},P.resolve=function(be){return be&&"object"==typeof be&&be.constructor===P?be:new P(function(Ce){Ce(be)})},P.reject=function(be){return new P(function(Ce,Se){Se(be)})},P.race=function(be){return new P(function(Ce,Se){for(var Oe=0,ze=be.length;Oe<ze;Oe++)be[Oe].then(Ce,Se)})},P._immediateFn="function"==typeof setImmediate?function(be){setImmediate(be)}:function(be){w(be,0)},P._unhandledRejectionFn=function(be){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",be)},P._setImmediateFn=function(be){P._immediateFn=be},P._setUnhandledRejectionFn=function(be){P._unhandledRejectionFn=be},h.exports?h.exports=P:y.Promise||(y.Promise=P);var ve=D.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||ve}};"object"==typeof Qu&&void 0!==jl?jl.exports=c():(i="undefined"!=typeof globalThis?globalThis:i||self).EphoxContactWrapper=c()}();var Gp=jl.exports.boltExport,Bx=function(i){function c(O){w()?D(O):y.push(O)}var h=X.none(),y=[],w=function(){return h.isSome()},D=function(O){h.each(function(P){setTimeout(function(){O(P)},0)})};return i(function(O){w()||(h=X.some(O),Tn(y,D),y=[])}),{get:c,map:function(O){return Bx(function(P){c(function(B){P(O(B))})})},isReady:w}},Zi={nu:Bx,pure:function(i){return Bx(function(c){c(i)})}},el=function(i){function c(h){i().then(h,Wp)}return{map:function(h){return el(function(){return i().then(h)})},bind:function(h){return el(function(){return i().then(function(y){return h(y).toPromise()})})},anonBind:function(h){return el(function(){return i().then(function(){return h.toPromise()})})},toLazy:function(){return Zi.nu(c)},toCached:function(){var h=null;return el(function(){return h=null===h?i():h})},toPromise:i,get:c}},bs=function(i){return{isValue:Jt,isError:ht,getOr:Z(i),getOrThunk:Z(i),getOrDie:Z(i),or:function(c){return bs(i)},orThunk:function(c){return bs(i)},fold:function(c,h){return h(i)},map:function(c){return bs(c(i))},mapError:function(c){return bs(i)},each:function(c){c(i)},bind:function(c){return c(i)},exists:function(c){return c(i)},forall:function(c){return c(i)},toOptional:function(){return X.some(i)}}},Ys=function(i){return{isValue:ht,isError:Jt,getOr:oe,getOrThunk:function(c){return c()},getOrDie:function(){return c=String(i),function(){throw new Error(c)}();var c},or:oe,orThunk:function(c){return c()},fold:function(c,h){return c(i)},map:function(c){return Ys(i)},mapError:function(c){return Ys(c(i))},each:U,bind:function(c){return Ys(i)},exists:ht,forall:Jt,toOptional:X.none}},g0={value:bs,error:Ys,fromOption:function(i,c){return i.fold(function(){return Ys(c)},bs)}};function bn(i){return i.fold(oe,oe)}function Bu(i,c,h,y,w){return i(h,y)?X.some(h):$e(w)&&w(h)?X.none():c(h,y,w)}function Cr(i,c,h){for(var y=i.dom,w=$e(h)?h:ht;y.parentNode;){var D=zt.fromDom(y=y.parentNode);if(c(D))return X.some(D);if(w(D))break}return X.none()}function bl(i,c,h){return Bu(function(y,w){return w(y)},Cr,i,c,h)}function xs(i,c,h){return Cr(i,function(y){return $n(y,c)},h)}function xl(i,c){return h=c,Sn(y=void 0===i?document:i.dom)?X.none():X.from(y.querySelector(h)).map(zt.fromDom);var h,y}function Jc(i,c,h){return Bu($n,xs,i,c,h)}function zu(i,c){return"number"!=typeof c&&(c=0),setTimeout(i,c)}function Xo(i,c){return"number"!=typeof c&&(c=1),setInterval(i,c)}function Ff(i,c){function h(){for(var w=[],D=0;D<arguments.length;D++)w[D]=arguments[D];clearTimeout(y),y=zu(function(){i.apply(this,w)},c)}var y;return h.stop=function(){clearTimeout(y)},h}function zx(i,c){function h(K,q,re){var fe,ve=fn._addCacheSuffix(K),be=fr(O,ve).getOrThunk(function(){return{id:"mce-u"+D++,passed:[],failed:[],count:0}});function Ce(Je,it){for(var Nt=Je.length;Nt--;)Je[Nt]();be.status=it,be.passed=[],be.failed=[],fe&&(fe.onload=null,fe.onerror=null,fe=null)}function Se(){return Ce(be.passed,2),0}function Oe(){return Ce(be.failed,3)}(O[ve]=be).count++;var ze,ot,yt,Ve=function(){var Je=Ve;!function(){for(var it=i.styleSheets,Nt=it.length;Nt--;){var Ht=it[Nt].ownerNode;if(Ht&&Ht.id===fe.id)return Se(),1}}()&&(Date.now()-ot<L?It.setTimeout(Je):Oe())};q&&be.passed.push(q),re&&be.failed.push(re),1!==be.status&&(2!==be.status?3!==be.status?(be.status=1,Im(ze=zt.fromTag("link",B.dom),{rel:"stylesheet",type:"text/css",id:be.id}),ot=Date.now(),c.contentCssCors&&pc(ze,"crossOrigin","anonymous"),c.referrerPolicy&&pc(ze,"referrerpolicy",c.referrerPolicy),(fe=ze.dom).onload=Ve,fe.onerror=Oe,yt=ze,ss(vs(P),yt),pc(ze,"href",ve)):Oe():Se())}function y(K){return xg(function(q){h(K,se(q,Z(g0.value(K))),se(q,Z(g0.error(K))))})}function w(K){var q=fn._addCacheSuffix(K);fr(O,q).each(function(re){var fe;0==--re.count&&(delete O[q],fe=re.id,xl(vs(P),"#"+fe).each(us))})}void 0===c&&(c={});var D=0,O={},P=zt.fromDom(i),B=Zu(P),L=c.maxLoadTime||5e3;return{load:h,loadAll:function(K,q,re){var fe,ve=ln(K,y);fe=ve,xg(function(be){var Ce=[],Se=0;0===fe.length?be([]):Tn(fe,function(Oe,ze){var ot;Oe.get((ot=ze,function(yt){Ce[ot]=yt,++Se>=fe.length&&be(Ce)}))})}).get(function(be){var Ce=wo(be,function(Se){return Se.isValue()});0<Ce.fail.length?re(Ce.fail.map(bn)):q(Ce.pass.map(bn))})},unload:w,unloadAll:function(K){Tn(K,function(q){w(q)})},_setReferrerPolicy:function(K){c.referrerPolicy=K}}}hf([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var bi,Dh,Ri=window.Promise||Gp,It={requestAnimationFrame:function(i,c){bi?bi.then(i):bi=new Ri(function(h){!function(y,w){for(var D=window.requestAnimationFrame,O=["ms","moz","webkit"],P=0;P<O.length&&!D;P++)D=window[O[P]+"RequestAnimationFrame"];(D=D||function(B){window.setTimeout(B,0)})(y,w)}(h,c=c||document.body)}).then(i)},setTimeout:zu,setInterval:Xo,setEditorTimeout:function(i,c,h){return zu(function(){i.removed||c()},h)},setEditorInterval:function(i,c,h){var y=Xo(function(){i.removed?clearInterval(y):c()},h);return y},debounce:Ff,throttle:Ff,clearInterval:function(i){return clearInterval(i)},clearTimeout:function(i){return clearTimeout(i)}},yc=(Dh=new WeakMap,{forElement:function(i,c){var h=xu(i).dom;return X.from(Dh.get(h)).getOrThunk(function(){var y=zx(h,c);return Dh.set(h,y),y})}}),cs=(kd.prototype.current=function(){return this.node},kd.prototype.next=function(i){return this.node=this.findSibling(this.node,"firstChild","nextSibling",i),this.node},kd.prototype.prev=function(i){return this.node=this.findSibling(this.node,"lastChild","previousSibling",i),this.node},kd.prototype.prev2=function(i){return this.node=this.findPreviousNode(this.node,"lastChild","previousSibling",i),this.node},kd.prototype.findSibling=function(i,c,h,y){var w,D;if(i){if(!y&&i[c])return i[c];if(i!==this.rootNode){if(w=i[h])return w;for(D=i.parentNode;D&&D!==this.rootNode;D=D.parentNode)if(w=D[h])return w}}},kd.prototype.findPreviousNode=function(i,c,h,y){var w,D,O;if(i&&(w=i[h],!this.rootNode||w!==this.rootNode)){if(w){if(!y)for(O=w[c];O;O=O[c])if(!O[c])return O;return w}return(D=i.parentNode)&&D!==this.rootNode?D:void 0}},kd);function kd(i,c){this.node=i,this.rootNode=c,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}function ql(i){var c;return function(h){return c=c||function(y,w){for(var D={},O=0,P=y.length;O<P;O++){var B=y[O];D[String(B)]=w(B,O)}return D}(i,Jt),Do(c,va(h))}}function Ha(i){return vl(i)&&!_l(i)}function Di(i){return vl(i)&&"br"===va(i)}function Ah(i){return Hf(i)&&(i=i.parentNode),Qy(i)&&i.hasAttribute("data-mce-caret")}function gf(i){return Hf(i)&&Nm(i.data)}function wr(i){return Ah(i)||gf(i)}function Ns(i){return i.firstChild!==i.lastChild||!Hi(i.firstChild)}function jp(i){var c=i.container();return!!br(c)&&(c.data.charAt(i.offset())===Rs||i.isAtStart()&&gf(c.previousSibling))}function Td(i){var c=i.container();return!!br(c)&&(c.data.charAt(i.offset()-1)===Rs||i.isAtEnd()&&gf(c.nextSibling))}function mf(i){return i&&i.hasAttribute("data-mce-caret")?(kh(h=(c=i.getElementsByTagName("br"))[c.length-1])&&h.parentNode.removeChild(h),i.removeAttribute("data-mce-caret"),i.removeAttribute("data-mce-bogus"),i.removeAttribute("style"),i.removeAttribute("_moz_abspos"),i):null;var c,h}function Fx(i){return Ah(i.startContainer)}function Ih(i){return!_g(i)&&(Lm(i)?!Id(i.parentNode):Sr(i)||Yp(i)||Wf(i)||pf(i))}function m0(i,c){return Ih(i)&&function(h,y){for(h=h.parentNode;h&&h!==y;h=h.parentNode){if(pf(h))return!1;if(Dd(h))return!0}return!0}(i,c)}function _s(i){return Wx.test(i)}function qp(i,c){return Ih(i)&&(O=c,!1===(br(D=i)&&_s(D.data)&&(h=D,y=zt.fromDom(O),!1===xs(zt.fromDom(h),"pre,code",de(Fn,y)).isSome())))||Kr(w=i)&&"A"===w.nodeName&&!w.hasAttribute("href")&&(w.hasAttribute("name")||w.hasAttribute("id"))||Ls(i);var h,y,w,D,O}function xo(i,c){return function(h,y){var w=0;if(qp(h,h))return!1;var D=h.firstChild;if(!D)return!0;var O=new cs(D,h);do{if(y){if(ed(D)){D=O.next(!0);continue}if(Nh(D)){D=O.next();continue}}if(Hi(D))w++,D=O.next();else{if(qp(D,h))return!1;D=O.next()}}while(D);return w<=1}(i.dom,c=void 0===c||c)}function Vx(i,c){return F(i)&&(qp(i,c)||Ha(zt.fromDom(i)))}function Hx(i){return"span"===i.nodeName.toLowerCase()&&"bookmark"===i.getAttribute("data-mce-type")}function $y(i,c){var h,y,w,D={};if(i){for(i=i.split(","),c=c||10,h=0;h<i.length;h+=2)y=String.fromCharCode(parseInt(i[h],c)),ou[y]||(D[y]=w="&"+i[h+1]+";",D[w]=y);return D}}function Pr(i,c){return i.replace(c?v0:Bm,function(h){return ou[h]||h})}function Xp(i,c){return i.replace(c?v0:Bm,function(h){return 1<h.length?"&#"+(1024*(h.charCodeAt(0)-55296)+(h.charCodeAt(1)-56320)+65536)+";":ou[h]||"&#"+h.charCodeAt(0)+";"})}function Oa(i,c,h){return h=h||_c,i.replace(c?v0:Bm,function(y){return ou[y]||h[y]||y})}function xi(i,c){return(i=fn.trim(i))?i.split(c||" "):[]}function ua(i,c){var h=yf(i," ",yf(i.toUpperCase()," "));return Od(h,c)}function Om(i){return ua("td th li dt dd figcaption caption details summary",i.getTextBlockElements())}function Em(i,c){var h;return i&&(h={},Sa(i="string"==typeof i?{"*":i}:i,function(y,w){h[w]=h[w.toUpperCase()]=("map"===c?yf:Zl)(y,/[, ]/)})),h}function Vf(i){function c(gn,Xn,Vr){var Zr=i[gn];return Zr?Zr=yf(Zr,/[, ]/,yf(Zr.toUpperCase(),/[, ]/)):(Zr=Fu[gn])||(Zr=ua(Xn,Vr),Fu[gn]=Zr),Zr}var h,y,w,D,O,P,B,L,K={},q={},re=[],fe={},ve={},be=(h=(i=i||{}).schema,L={},Fu[h]||(y="id accesskey class dir lang style tabindex title role",w="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",D="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==h&&(y+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",w+=" article aside details dialog figure main header footer hgroup section nav",D+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==h&&(y+=" xml:lang",D=[D,B="acronym applet basefont big font strike tt"].join(" "),Sa(xi(B),function(gn){Ce(gn,"",D)}),w=[w,P="center dir isindex noframes"].join(" "),O=[w,D].join(" "),Sa(xi(P),function(gn){Ce(gn,"",O)})),O=O||[w,D].join(" "),Ce("html","manifest","head body"),Ce("head","","base command link meta noscript script style title"),Ce("title hr noscript br"),Ce("base","href target"),Ce("link","href rel media hreflang type sizes hreflang"),Ce("meta","name http-equiv content charset"),Ce("style","media type scoped"),Ce("script","src async defer type charset"),Ce("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",O),Ce("address dt dd div caption","",O),Ce("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",D),Ce("blockquote","cite",O),Ce("ol","reversed start type","li"),Ce("ul","","li"),Ce("li","value",O),Ce("dl","","dt dd"),Ce("a","href target rel media hreflang type",D),Ce("q","cite",D),Ce("ins del","cite datetime",O),Ce("img","src sizes srcset alt usemap ismap width height"),Ce("iframe","src name width height",O),Ce("embed","src type width height"),Ce("object","data type typemustmatch name usemap form width height",[O,"param"].join(" ")),Ce("param","name value"),Ce("map","name",[O,"area"].join(" ")),Ce("area","alt coords shape href target rel media hreflang type"),Ce("table","border","caption colgroup thead tfoot tbody tr"+("html4"===h?" col":"")),Ce("colgroup","span","col"),Ce("col","span"),Ce("tbody thead tfoot","","tr"),Ce("tr","","td th"),Ce("td","colspan rowspan headers",O),Ce("th","colspan rowspan headers scope abbr",O),Ce("form","accept-charset action autocomplete enctype method name novalidate target",O),Ce("fieldset","disabled form name",[O,"legend"].join(" ")),Ce("label","form for",D),Ce("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),Ce("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===h?O:D),Ce("select","disabled form multiple name required size","option optgroup"),Ce("optgroup","disabled label","option"),Ce("option","disabled label selected value"),Ce("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),Ce("menu","type label",[O,"li"].join(" ")),Ce("noscript","",O),"html4"!==h&&(Ce("wbr"),Ce("ruby","",[D,"rt rp"].join(" ")),Ce("figcaption","",O),Ce("mark rt rp summary bdi","",D),Ce("canvas","width height",O),Ce("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[O,"track source"].join(" ")),Ce("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[O,"track source"].join(" ")),Ce("picture","","img source"),Ce("source","src srcset type media sizes"),Ce("track","kind src srclang label default"),Ce("datalist","",[D,"option"].join(" ")),Ce("article section nav aside main header footer","",O),Ce("hgroup","","h1 h2 h3 h4 h5 h6"),Ce("figure","",[O,"figcaption"].join(" ")),Ce("time","datetime",D),Ce("dialog","open",O),Ce("command","type label icon disabled checked radiogroup command"),Ce("output","for form name",D),Ce("progress","value max",D),Ce("meter","value min max low high optimum",D),Ce("details","open",[O,"summary"].join(" ")),Ce("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==h&&(Se("script","language xml:space"),Se("style","xml:space"),Se("object","declare classid code codebase codetype archive standby align border hspace vspace"),Se("embed","align name hspace vspace"),Se("param","valuetype type"),Se("a","charset name rev shape coords"),Se("br","clear"),Se("applet","codebase archive code object alt name width height align hspace vspace"),Se("img","name longdesc align border hspace vspace"),Se("iframe","longdesc frameborder marginwidth marginheight scrolling align"),Se("font basefont","size color face"),Se("input","usemap align"),Se("select"),Se("textarea"),Se("h1 h2 h3 h4 h5 h6 div p legend caption","align"),Se("ul","type compact"),Se("li","type"),Se("ol dl menu dir","compact"),Se("pre","width xml:space"),Se("hr","align noshade size width"),Se("isindex","prompt"),Se("table","summary width frame rules cellspacing cellpadding align bgcolor"),Se("col","width align char charoff valign"),Se("colgroup","width align char charoff valign"),Se("thead","align char charoff valign"),Se("tr","align char charoff valign bgcolor"),Se("th","axis align char charoff valign nowrap bgcolor width height"),Se("form","accept"),Se("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),Se("tfoot","align char charoff valign"),Se("tbody","align char charoff valign"),Se("area","nohref"),Se("body","background bgcolor text link vlink alink")),"html4"!==h&&(Se("input button select textarea","autofocus"),Se("input textarea","placeholder"),Se("a","download"),Se("link script img","crossorigin"),Se("img","loading"),Se("iframe","sandbox seamless allowfullscreen loading")),Sa(xi("a form meter progress dfn"),function(gn){L[gn]&&delete L[gn].children[gn]}),delete L.caption.children.table,delete L.script,Fu[h]=L));function Ce(gn,Xn,Vr){function Zr(Ra,Ms){for(var ju={},Us=0,Eu=Ra.length;Us<Eu;Us++)ju[Ra[Us]]=Ms||{};return ju}var zi,ro;Xn=Xn||"","string"==typeof(Vr=Vr||[])&&(Vr=xi(Vr));for(var Lr=xi(gn),$o=Lr.length;$o--;)ro={attributes:Zr(zi=xi([y,Xn].join(" "))),attributesOrder:zi,children:Zr(Vr,vf)},L[Lr[$o]]=ro}function Se(gn,Xn){for(var Vr,Zr,zi,ro=xi(gn),Lr=ro.length,$o=xi(Xn);Lr--;)for(Vr=L[ro[Lr]],Zr=0,zi=$o.length;Zr<zi;Zr++)Vr.attributes[$o[Zr]]={},Vr.attributesOrder.push($o[Zr])}!1===i.verify_html&&(i.valid_elements="*[*]");var Oe=Em(i.valid_styles),ze=Em(i.invalid_styles,"map"),ot=Em(i.valid_classes,"map"),yt=c("whitespace_elements","pre script noscript style textarea video audio iframe object code"),Ve=c("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),Je=c("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),it=c("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),Nt="td th iframe video audio object script code",Ht=c("non_empty_elements",Nt+" pre",Je),on=c("move_caret_before_on_enter_elements",Nt+" table",Je),$t=c("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),bt=c("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",$t),St=c("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp");function At(gn){return new RegExp("^"+gn.replace(/([?+*])/g,".$1")+"$")}function Yt(gn){var Xn,Vr,Zr,zi,ro,Lr,$o,Ra,Ms,ju,Us,Eu,bm,yh,Ip,Pf,Op,s0,lS=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/,tM=/^([!\-])?(\w+[\\:]:\w+|[^=:<]+)?(?:([=:<])(.*))?$/,uk=/[*?+]/;if(gn){var nM=xi(gn,",");for(K["@"]&&(Pf=K["@"].attributes,Op=K["@"].attributesOrder),Xn=0,Vr=nM.length;Xn<Vr;Xn++)if(ro=lS.exec(nM[Xn])){if(Ms=ro[2],Ip=ro[3],Ra=ro[5],Lr={attributes:Eu={},attributesOrder:bm=[]},"#"===(yh=ro[1])&&(Lr.paddEmpty=!0),"-"===yh&&(Lr.removeEmpty=!0),"!"===ro[4]&&(Lr.removeEmptyAttrs=!0),Pf&&(On(Pf,function(rM,lk){Eu[lk]=rM}),bm.push.apply(bm,Op)),Ra)for(Zr=0,zi=(Ra=xi(Ra,"|")).length;Zr<zi;Zr++)(ro=tM.exec(Ra[Zr]))&&($o={},Us=ro[1],ju=ro[2].replace(/[\\:]:/g,":"),yh=ro[3],s0=ro[4],"!"===Us&&(Lr.attributesRequired=Lr.attributesRequired||[],Lr.attributesRequired.push(ju),$o.required=!0),"-"!==Us?(yh&&("="===yh&&(Lr.attributesDefault=Lr.attributesDefault||[],Lr.attributesDefault.push({name:ju,value:s0}),$o.defaultValue=s0),":"===yh&&(Lr.attributesForced=Lr.attributesForced||[],Lr.attributesForced.push({name:ju,value:s0}),$o.forcedValue=s0),"<"===yh&&($o.validValues=yf(s0,"?"))),uk.test(ju)?(Lr.attributePatterns=Lr.attributePatterns||[],$o.pattern=At(ju),Lr.attributePatterns.push($o)):(Eu[ju]||bm.push(ju),Eu[ju]=$o)):(delete Eu[ju],bm.splice(R_(bm,ju),1)));Pf||"@"!==Ms||(Pf=Eu,Op=bm),Ip&&(Lr.outputName=Ms,K[Ip]=Lr),uk.test(Ms)?(Lr.pattern=At(Ms),re.push(Lr)):K[Ms]=Lr}}}function Nn(gn){K={},re=[],Yt(gn),Sa(be,function(Xn,Vr){q[Vr]=Xn.children})}function jn(gn){var Xn=/^(~)?(.+)$/;gn&&(Fu.text_block_elements=Fu.block_elements=null,Sa(xi(gn,","),function(Vr){var Zr,zi=Xn.exec(Vr),ro="~"===zi[1],Lr=ro?"span":"div",$o=zi[2];q[$o]=q[Lr],fe[$o]=Lr,ro||(bt[$o.toUpperCase()]={},bt[$o]={}),K[$o]||(delete(Zr=Od({},Zr=K[Lr])).removeEmptyAttrs,delete Zr.removeEmpty,K[$o]=Zr),Sa(q,function(Ra,Ms){Ra[Lr]&&(q[Ms]=Ra=Od({},q[Ms]),Ra[$o]=Ra[Lr])})}))}function In(gn){var Xn=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;Fu[i.schema]=null,gn&&Sa(xi(gn,","),function(Vr){var Zr,zi,ro=Xn.exec(Vr);ro&&(Zr=(zi=ro[1])?q[ro[2]]:q[ro[2]]={"#comment":{}},Zr=q[ro[2]],Sa(xi(ro[3],"|"),function(Lr){"-"===zi?delete Zr[Lr]:Zr[Lr]={}}))})}function Wn(gn){var Xn,Vr=K[gn];if(Vr)return Vr;for(Xn=re.length;Xn--;)if((Vr=re[Xn]).pattern.test(gn))return Vr}Sa((i.special||"script noscript iframe noframes noembed title style textarea xmp").split(" "),function(gn){ve[gn]=new RegExp("</"+gn+"[^>]*>","gi")}),i.valid_elements?Nn(i.valid_elements):(Sa(be,function(gn,Xn){K[Xn]={attributes:gn.attributes,attributesOrder:gn.attributesOrder},q[Xn]=gn.children}),"html5"!==i.schema&&Sa(xi("strong/b em/i"),function(gn){var Xn=xi(gn,"/");K[Xn[1]].outputName=Xn[0]}),Sa(St,function(gn,Xn){K[Xn]&&(i.padd_empty_block_inline_children&&(K[Xn].paddInEmptyBlock=!0),K[Xn].removeEmpty=!0)}),Sa(xi("ol ul blockquote a table tbody"),function(gn){K[gn]&&(K[gn].removeEmpty=!0)}),Sa(xi("p h1 h2 h3 h4 h5 h6 th td pre div address caption li"),function(gn){K[gn].paddEmpty=!0}),Sa(xi("span"),function(gn){K[gn].removeEmptyAttrs=!0})),jn(i.custom_elements),In(i.valid_children),Yt(i.extended_valid_elements),In("+ol[ul|ol],+ul[ul|ol]"),Sa({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},function(gn,Xn){K[Xn]&&(K[Xn].parentsRequired=xi(gn))}),i.invalid_elements&&Sa(Zl(i.invalid_elements),function(gn){K[gn]&&delete K[gn]}),Wn("span")||Yt("span[!data-mce-type|*]");var Pn=Z(Oe),Un=Z(ze),Hn=Z(ot),lr=Z(it),vn=Z(bt),Zn=Z($t),Bn=Z(St),vr=Z(Je),hr=Z(Ve),To=Z(Ht),st=Z(on),kt=Z(yt),cn=Z(ve),xn=Z(fe);return{children:q,elements:K,getValidStyles:Pn,getValidClasses:Hn,getBlockElements:vn,getInvalidStyles:Un,getShortEndedElements:vr,getTextBlockElements:Zn,getTextInlineElements:Bn,getBoolAttrs:lr,getElementRule:Wn,getSelfClosingElements:hr,getNonEmptyElements:To,getMoveCaretBeforeOnEnterElements:st,getWhiteSpaceElements:kt,getSpecialElements:cn,isValidChild:function(gn,Xn){var Vr=q[gn.toLowerCase()];return!(!Vr||!Vr[Xn.toLowerCase()])},isValid:function(gn,Xn){var Vr,Zr,zi=Wn(gn);if(zi){if(!Xn||zi.attributes[Xn])return!0;if(Vr=zi.attributePatterns)for(Zr=Vr.length;Zr--;)if(Vr[Zr].pattern.test(gn))return!0}return!1},getCustomElements:xn,addValidElements:Yt,setValidElements:Nn,addCustomElements:jn,addValidChildren:In}}function Jy(i,c,h,y){function w(D){return 1<(D=parseInt(D,10).toString(16)).length?D:"0"+D}return"#"+w(c)+w(h)+w(y)}function wu(i,c){var h,y,w=this,D=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,O=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,P=/\s*([^:]+):\s*([^;]+);?/g,B=/\s+$/,L={},K=Eh;i=i||{},c&&(h=c.getValidStyles(),y=c.getInvalidStyles());for(var q=("\\\" \\' \\; \\: ; : "+K).split(" "),re=0;re<q.length;re++)L[q[re]]=K+re,L[K+re]=q[re];return{toHex:function(fe){return fe.replace(D,Jy)},parse:function(fe){function ve(At,Yt,Nn){var jn=$t[At+"-top"+Yt];if(jn){var In=$t[At+"-right"+Yt];if(In){var Wn=$t[At+"-bottom"+Yt];if(Wn){var Pn=$t[At+"-left"+Yt];if(Pn){var Un=[jn,In,Wn,Pn];for(re=Un.length-1;re--&&Un[re]===Un[re+1];);-1<re&&Nn||($t[At+Yt]=-1===re?Un[0]:Un.join(" "),delete $t[At+"-top"+Yt],delete $t[At+"-right"+Yt],delete $t[At+"-bottom"+Yt],delete $t[At+"-left"+Yt])}}}}}function be(At){var Yt,Nn=$t[At];if(Nn){for(Yt=(Nn=Nn.split(" ")).length;Yt--;)if(Nn[Yt]!==Nn[0])return;return $t[At]=Nn[0],1}}function Ce(At){return it=!0,L[At]}function Se(At,Yt){return it&&(At=At.replace(/\uFEFF[0-9]/g,function(Nn){return L[Nn]})),Yt?At:At.replace(/\\([\'\";:])/g,"$1")}function Oe(At){return String.fromCharCode(parseInt(At.slice(1),16))}function ze(At){return At.replace(/\\[0-9a-f]+/gi,Oe)}function ot(At,Yt,Nn,jn,In,Wn){if(In=In||Wn)return"'"+(In=Se(In)).replace(/\'/g,"\\'")+"'";if(Yt=Se(Yt||Nn||jn),!i.allow_script_urls){var Pn=Yt.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(Pn)||!i.allow_svg_data_urls&&/^data:image\/svg/i.test(Pn))return""}return"url('"+(Yt=bt?bt.call(St,Yt,"style"):Yt).replace(/\'/g,"\\'")+"')"}var yt,Ve,Je,it,Nt,Ht,on,$t={},bt=i.url_converter,St=i.url_converter_scope||w;if(fe){for(fe=(fe=fe.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,Ce).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(At){return At.replace(/[;:]/g,Ce)});yt=P.exec(fe);)P.lastIndex=yt.index+yt[0].length,Ve=yt[1].replace(B,"").toLowerCase(),Je=yt[2].replace(B,""),Ve&&Je&&(Ve=ze(Ve),Je=ze(Je),-1===Ve.indexOf(K)&&-1===Ve.indexOf('"')&&(i.allow_script_urls||"behavior"!==Ve&&!/expression\s*\(|\/\*|\*\//.test(Je))&&("font-weight"===Ve&&"700"===Je?Je="bold":"color"!==Ve&&"background-color"!==Ve||(Je=Je.toLowerCase()),Je=(Je=Je.replace(D,Jy)).replace(O,ot),$t[Ve]=it?Se(Je,!0):Je));ve("border","",!0),ve("border","-width"),ve("border","-color"),ve("border","-style"),ve("padding",""),ve("margin",""),Ht="border-style",on="border-color",be(Nt="border-width")&&be(Ht)&&be(on)&&($t.border=$t[Nt]+" "+$t[Ht]+" "+$t[on],delete $t[Nt],delete $t[Ht],delete $t[on]),"medium none"===$t.border&&delete $t.border,"none"===$t["border-image"]&&delete $t["border-image"]}return $t},serialize:function(fe,ve){function be(Se){var Oe,ze=h[Se];if(ze)for(var ot=0,yt=ze.length;ot<yt;ot++)(Oe=fe[Se=ze[ot]])&&(Ce+=(0<Ce.length?" ":"")+Se+": "+Oe+";")}var Ce="";return ve&&h?(be("*"),be(ve)):On(fe,function(Se,Oe){var ze;!Se||y&&((ze=y["*"])&&ze[Oe]||(ze=y[ve])&&ze[Oe])||(Ce+=(0<Ce.length?" ":"")+Oe+": "+Se+";")}),Ce}}}function ds(i){return i instanceof Event||$e(i.initEvent)}function Su(i,c,h,y){var w,D,O=function(P){var B,L=null!=y?y:{};for(B in P)Do(Ed,B)||(L[B]=P[B]);return F(L.composedPath)&&(L.composedPath=function(){return P.composedPath()}),L}(c);return O.type=i,ye(O.target)&&(O.target=null!==(w=O.srcElement)&&void 0!==w?w:h),(ye((D=c).preventDefault)||ds(D))&&(O.preventDefault=function(){O.defaultPrevented=!0,O.isDefaultPrevented=Jt,$e(c.preventDefault)?c.preventDefault():ds(c)&&(c.returnValue=!1)},O.stopPropagation=function(){O.cancelBubble=!0,O.isPropagationStopped=Jt,$e(c.stopPropagation)?c.stopPropagation():ds(c)&&(c.cancelBubble=!0)},O.stopImmediatePropagation=function(){O.isImmediatePropagationStopped=Jt,O.stopPropagation()},O.isDefaultPrevented!==Jt&&O.isDefaultPrevented!==ht&&(O.isDefaultPrevented=!0===O.defaultPrevented?Jt:ht,O.isPropagationStopped=!0===O.cancelBubble?Jt:ht,O.isImmediatePropagationStopped=ht)),O}function bc(i,c,h,y){i.addEventListener?i.addEventListener(c,h,y||!1):i.attachEvent&&i.attachEvent("on"+c,h)}function Qc(i,c,h,y){i.removeEventListener?i.removeEventListener(c,h,y||!1):i.detachEvent&&i.detachEvent("on"+c,h)}function Pm(i,c){var h,y,w,D,O=Su(i.type,i,document,c);return F(D=i)&&DS.test(D.type)&&qe(i.pageX)&&!qe(i.clientX)&&(y=(h=O.target.ownerDocument||document).documentElement,w=h.body,O.pageX=i.clientX+(y&&y.scrollLeft||w&&w.scrollLeft||0)-(y&&y.clientLeft||w&&w.clientLeft||0),O.pageY=i.clientY+(y&&y.scrollTop||w&&w.scrollTop||0)-(y&&y.clientTop||w&&w.clientTop||0)),qe(O.metaKey)&&(O.metaKey=!1),O}var N_=ql(["h1","h2","h3","h4","h5","h6"]),_l=ql(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),p0=ql(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Oh=ql(["ul","ol","dl"]),la=ql(["li","dd","dt"]),Lo=ql(["thead","tbody","tfoot"]),kr=ql(["td","th"]),Md=ql(["pre","script","textarea","style"]),Eh="\ufeff",xc="\xa0",Rs=Eh,Nm=function(i){return i===Eh},mn=function(i){return i.replace(/\uFEFF/g,"")},Qy=Kr,Hf=br,Ph=function(i){return Hf(i)&&i.data[0]===Rs},Rm=function(i){return Hf(i)&&i.data[i.data.length-1]===Rs},Dd=vc,Ad=uo,Yp=Hi,Lm=br,Id=mc(["script","style","textarea"]),Sr=mc(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Wf=mc(["table"]),_g=wr,pf=function(i){return!1===(Kr(c=i)&&"true"===c.getAttribute("unselectable"))&&Ad(i);var c},Wx=/^[ \t\r\n]*$/,Ls=Rx("data-mce-bookmark"),Nh=Rx("data-mce-bogus"),ed=function(i){return Kr(i)&&"all"===i.getAttribute("data-mce-bogus")},Gf=function(i,c,h){var y=h||c;if(Kr(c)&&Hx(c))return c;for(var w,D,O,P,B,L,K,q,re,fe,ve,be=c.childNodes,Ce=be.length-1;0<=Ce;Ce--)Gf(i,be[Ce],y);return!Kr(c)||1===(w=c.childNodes).length&&Hx(w[0])&&c.parentNode.insertBefore(w[0],c),Mh(O=c)||zf(O)||qp(c,y)||Kr(D=c)&&0<D.childNodes.length||(B=y,br(P=c)&&0<P.data.length&&(q=new cs(L=P,K=B).prev(!1),re=new cs(L,K).next(!1),fe=qe(q)||Vx(q,K),ve=qe(re)||Vx(re,K),fe&&ve))||i.remove(c),c},Gx=fn.makeMap,v0=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Bm=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Zp=/[<>&\"\']/g,Qa=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,_i={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},ou={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},Xl={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},_c=$y("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Yl={encodeRaw:Pr,encodeAllRaw:function(i){return(""+i).replace(Zp,function(c){return ou[c]||c})},encodeNumeric:Xp,encodeNamed:Oa,getEncodeFunc:function(i,c){var h=$y(c)||_c,y=Gx(i.replace(/\+/g,","));return y.named&&y.numeric?function(w,D){return w.replace(D?v0:Bm,function(O){return void 0!==ou[O]?ou[O]:void 0!==h[O]?h[O]:1<O.length?"&#"+(1024*(O.charCodeAt(0)-55296)+(O.charCodeAt(1)-56320)+65536)+";":"&#"+O.charCodeAt(0)+";"})}:y.named?c?function(w,D){return Oa(w,D,h)}:Oa:y.numeric?Xp:Pr},decode:function(i){return i.replace(Qa,function(c,h){return h?65535<(h="x"===h.charAt(0).toLowerCase()?parseInt(h.substr(1),16):parseInt(h,10))?(h-=65536,String.fromCharCode(55296+(h>>10),56320+(1023&h))):_i[h]||String.fromCharCode(h):Xl[c]||_c[c]||(y=c,(w=zt.fromTag("div").dom).innerHTML=y,w.textContent||w.innerText||y);var y,w})}},Fu={},vf={},yf=fn.makeMap,Sa=fn.each,Od=fn.extend,Zl=fn.explode,R_=fn.inArray,Ed={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},DS=/^(?:mouse|contextmenu)|click/,Wa=(Zs.prototype.bind=function(i,c,h,y){function w(be){q.executeHandlers(Pm(be||re.event),D)}var D,O,P,B,L,K,q=this,re=window;if(i&&3!==i.nodeType&&8!==i.nodeType){i[q.expando]?D=i[q.expando]:(D=q.count++,i[q.expando]=D,q.events[D]={}),y=y||i;for(var fe=c.split(" "),ve=fe.length;ve--;)L=w,B=K=!1,"DOMContentLoaded"===(P=fe[ve])&&(P="ready"),q.domLoaded&&"ready"===P&&"complete"===i.readyState?h.call(y,Pm({type:P})):(q.hasMouseEnterLeave||(B=q.mouseEnterLeave[P])&&(L=function(be){var Ce=be.currentTarget,Se=be.relatedTarget;if(Se&&Ce.contains)Se=Ce.contains(Se);else for(;Se&&Se!==Ce;)Se=Se.parentNode;Se||((be=Pm(be||re.event)).type="mouseout"===be.type?"mouseleave":"mouseenter",be.target=Ce,q.executeHandlers(be,D))}),q.hasFocusIn||"focusin"!==P&&"focusout"!==P||(K=!0,B="focusin"===P?"focus":"blur",L=function(be){(be=Pm(be||re.event)).type="focus"===be.type?"focusin":"focusout",q.executeHandlers(be,D)}),(O=q.events[D][P])?"ready"===P&&q.domLoaded?h(Pm({type:P})):O.push({func:h,scope:y}):(q.events[D][P]=O=[{func:h,scope:y}],O.fakeName=B,O.capture=K,O.nativeHandler=L,"ready"===P?function(be,Ce,Se){var Oe,ze=be.document,ot={type:"ready"};Se.domLoaded?Ce(ot):(Oe=function(){Qc(be,"DOMContentLoaded",Oe),Qc(be,"load",Oe),Se.domLoaded||(Se.domLoaded=!0,Ce(ot)),be=null},"complete"===ze.readyState||"interactive"===ze.readyState&&ze.body?Oe():bc(be,"DOMContentLoaded",Oe),Se.domLoaded||bc(be,"load",Oe))}(i,L,q):bc(i,B||P,L,K)));return i=O=null,h}},Zs.prototype.unbind=function(i,c,h){var y,w,D;if(!i||3===i.nodeType||8===i.nodeType)return this;var O=i[this.expando];if(O){if(D=this.events[O],c){for(var P,B,L,K,q=c.split(" "),re=q.length;re--;)if(K=D[w=q[re]]){if(h)for(y=K.length;y--;)K[y].func===h&&(P=K.nativeHandler,B=K.fakeName,L=K.capture,(K=K.slice(0,y).concat(K.slice(y+1))).nativeHandler=P,K.fakeName=B,K.capture=L,D[w]=K);h&&0!==K.length||(delete D[w],Qc(i,K.fakeName||w,K.nativeHandler,K.capture))}}else On(D,function(fe,ve){Qc(i,fe.fakeName||ve,fe.nativeHandler,fe.capture)}),D={};for(w in D)if(Do(D,w))return this;delete this.events[O];try{delete i[this.expando]}catch{i[this.expando]=null}}return this},Zs.prototype.fire=function(i,c,h){var y;if(!i||3===i.nodeType||8===i.nodeType)return this;for(var w=Pm({type:c,target:i},h);(y=i[this.expando])&&this.executeHandlers(w,y),(i=i.parentNode||i.ownerDocument||i.defaultView||i.parentWindow)&&!w.isPropagationStopped(););return this},Zs.prototype.clean=function(i){var c,h;if(!i||3===i.nodeType||8===i.nodeType)return this;if(i[this.expando]&&this.unbind(i),(i=i.getElementsByTagName?i:i.document)&&i.getElementsByTagName)for(this.unbind(i),c=(h=i.getElementsByTagName("*")).length;c--;)(i=h[c])[this.expando]&&this.unbind(i);return this},Zs.prototype.destroy=function(){this.events={}},Zs.prototype.cancel=function(i){return i&&(i.preventDefault(),i.stopImmediatePropagation()),!1},Zs.prototype.executeHandlers=function(i,c){var h=this.events[c],y=h&&h[i.type];if(y)for(var w=0,D=y.length;w<D;w++){var O=y[w];if(O&&!1===O.func.call(O.scope,i)&&i.preventDefault(),i.isImmediatePropagationStopped())return}},Zs.Event=new Zs,Zs);function Zs(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasMouseEnterLeave="onmouseenter"in document.documentElement,this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}function Cu(i,c,h){var y="0x"+c-65536;return y!=y||h?c:y<0?String.fromCharCode(65536+y):String.fromCharCode(y>>10|55296,1023&y|56320)}var fs,Ki,Kl,Kp,Uf,Pd,td,Nd,Rh,nd,Ea,Wi,wl,iu,jf,ws,$p,Ss="sizzle"+-new Date,Rd=window.document,na=0,Lh=0,Jp=tb(),qf=tb(),Ca=tb(),Bs=function(i,c){return i===c&&(nd=!0),0},bf="undefined",Ux={}.hasOwnProperty,Sl=[],wg=Sl.pop,zm=Sl.push,Xf=Sl.push,y0=Sl.slice,Bh=Sl.indexOf||function(i){for(var c=0,h=this.length;c<h;c++)if(this[c]===i)return c;return-1},ka="[\\x20\\t\\r\\n\\f]",wc="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",Sc="\\["+ka+"*("+wc+")(?:"+ka+"*([*^$|!~]?=)"+ka+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+wc+"))|)"+ka+"*\\]",Sg=":("+wc+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+Sc+")*)|.*)\\)|)",Ga=new RegExp("^"+ka+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ka+"+$","g"),xf=new RegExp("^"+ka+"*,"+ka+"*"),_f=new RegExp("^"+ka+"*([>+~]|"+ka+")"+ka+"*"),Ld=new RegExp("="+ka+"*([^\\]'\"]*?)"+ka+"*\\]","g"),Bd=new RegExp(Sg),eb=new RegExp("^"+wc+"$"),Cg={ID:new RegExp("^#("+wc+")"),CLASS:new RegExp("^\\.("+wc+")"),TAG:new RegExp("^("+wc+"|[*])"),ATTR:new RegExp("^"+Sc),PSEUDO:new RegExp("^"+Sg),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ka+"*(even|odd|(([+-]|)(\\d*)n|)"+ka+"*(?:([+-]|)"+ka+"*(\\d+)|))"+ka+"*\\)|)","i"),bool:new RegExp("^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$","i"),needsContext:new RegExp("^"+ka+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ka+"*((?:-\\d)?\\d*)"+ka+"*\\)|)(?=[^-]|$)","i")},zd=/^(?:input|select|textarea|button)$/i,Qo=/^h\d$/i,Xi=/^[^{]+\{\s*\[native \w/,Cl=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Fm=/[+~]/,zs=/'|\\/g,kl=new RegExp("\\\\([\\da-f]{1,6}"+ka+"?|("+ka+")|.)","ig");try{Xf.apply(Sl=y0.call(Rd.childNodes),Rd.childNodes)}catch{Xf={apply:Sl.length?function(c,h){zm.apply(c,y0.call(h))}:function(c,h){for(var y=c.length,w=0;c[y++]=h[w++];);c.length=y-1}}}var Li=function(i,c,h,y){var w,D,O,P,B,L,K,q,re,fe;if((c?c.ownerDocument||c:Rd)!==Wi&&Ea(c),h=h||[],!i||"string"!=typeof i)return h;if(1!==(P=(c=c||Wi).nodeType)&&9!==P)return[];if(iu&&!y){if(w=Cl.exec(i))if(O=w[1]){if(9===P){if(!(D=c.getElementById(O))||!D.parentNode)return h;if(D.id===O)return h.push(D),h}else if(c.ownerDocument&&(D=c.ownerDocument.getElementById(O))&&$p(c,D)&&D.id===O)return h.push(D),h}else{if(w[2])return Xf.apply(h,c.getElementsByTagName(i)),h;if((O=w[3])&&fs.getElementsByClassName)return Xf.apply(h,c.getElementsByClassName(O)),h}if(fs.qsa&&(!jf||!jf.test(i))){if(q=K=Ss,re=c,fe=9===P&&i,1===P&&"object"!==c.nodeName.toLowerCase()){for(L=Uf(i),(K=c.getAttribute("id"))?q=K.replace(zs,"\\$&"):c.setAttribute("id",q),q="[id='"+q+"'] ",B=L.length;B--;)L[B]=q+Tl(L[B]);re=Fm.test(i)&&nb(c.parentNode)||c,fe=L.join(",")}if(fe)try{return Xf.apply(h,re.querySelectorAll(fe)),h}catch{}finally{K||c.removeAttribute("id")}}}return td(i.replace(Ga,"$1"),c,h,y)};function tb(){var i=[];return function c(h,y){return i.push(h+" ")>Ki.cacheLength&&delete c[i.shift()],c[h+" "]=y}}function Fd(i){return i[Ss]=!0,i}function zh(i,c){var h=c&&i,y=h&&1===i.nodeType&&1===c.nodeType&&(~c.sourceIndex||1<<31)-(~i.sourceIndex||1<<31);if(y)return y;if(h)for(;h=h.nextSibling;)if(h===c)return-1;return i?1:-1}function wf(i){return Fd(function(c){return c=+c,Fd(function(h,y){for(var w,D=i([],h.length,c),O=D.length;O--;)h[w=D[O]]&&(h[w]=!(y[w]=h[w]))})})}function nb(i){return i&&typeof i.getElementsByTagName!=bf&&i}function Cc(){}function Tl(i){for(var c=0,h=i.length,y="";c<h;c++)y+=i[c].value;return y}function Vm(i,c,h){var y=c.dir,w=h&&"parentNode"===y,D=Lh++;return c.first?function(O,P,B){for(;O=O[y];)if(1===O.nodeType||w)return i(O,P,B)}:function(O,P,B){var L,K,q=[na,D];if(B){for(;O=O[y];)if((1===O.nodeType||w)&&i(O,P,B))return!0}else for(;O=O[y];)if(1===O.nodeType||w){if((L=(K=O[Ss]||(O[Ss]={}))[y])&&L[0]===na&&L[1]===D)return q[2]=L[2];if((K[y]=q)[2]=i(O,P,B))return!0}}}function Qp(i){return 1<i.length?function(c,h,y){for(var w=i.length;w--;)if(!i[w](c,h,y))return!1;return!0}:i[0]}function au(i,c,h,y,w){for(var D,O=[],P=0,B=i.length,L=null!=c;P<B;P++)(D=i[P])&&(h&&!h(D,y,w)||(O.push(D),L&&c.push(P)));return O}function Ml(i){return void 0!==i}function $l(i){return"string"==typeof i}function Jl(i,c){var h,y=(c=c||Ql).createElement("div"),w=c.createDocumentFragment();for(y.innerHTML=i;h=y.firstChild;)w.appendChild(h);return w}function jx(i,c){return i&&c&&-1!==(" "+i.className+" ").indexOf(" "+c+" ")}function Yf(i,c,h){var y,w;return c=jr(c)[0],i.each(function(){h&&y===this.parentNode||(y=this.parentNode,w=c.cloneNode(!1),this.parentNode.insertBefore(w,this)),w.appendChild(this)}),i}function kc(i,c){return new jr.fn.init(i,c)}function ev(i){return null==i?"":(""+i).replace(qx,"")}function Fh(i,c){var h,y,w,D;if(i)if(void 0===(h=i.length)){for(y in i)if(i.hasOwnProperty(y)&&!1===c.call(D=i[y],y,D))break}else for(w=0;w<h&&!1!==c.call(D=i[w],w,D);w++);return i}function so(i,c){var h=[];return Fh(i,function(y,w){c(w,y)&&h.push(w)}),h}fs=Li.support={},Kp=Li.isXML=function(i){var c=i&&(i.ownerDocument||i).documentElement;return!!c&&"HTML"!==c.nodeName},Ea=Li.setDocument=function(i){var c,h=i?i.ownerDocument||i:Rd,y=h.defaultView;return h!==Wi&&9===h.nodeType&&h.documentElement?(wl=(Wi=h).documentElement,iu=!Kp(h),y&&y!==function(w){try{return w.top}catch{}return null}(y)&&(y.addEventListener?y.addEventListener("unload",function(){Ea()},!1):y.attachEvent&&y.attachEvent("onunload",function(){Ea()})),fs.attributes=!0,fs.getElementsByTagName=!0,fs.getElementsByClassName=Xi.test(h.getElementsByClassName),fs.getById=!0,Ki.find.ID=function(w,D){if(typeof D.getElementById!=bf&&iu){var O=D.getElementById(w);return O&&O.parentNode?[O]:[]}},Ki.filter.ID=function(w){var D=w.replace(kl,Cu);return function(O){return O.getAttribute("id")===D}},Ki.find.TAG=fs.getElementsByTagName?function(w,D){if(typeof D.getElementsByTagName!=bf)return D.getElementsByTagName(w)}:function(w,D){var O,P=[],B=0,L=D.getElementsByTagName(w);if("*"!==w)return L;for(;O=L[B++];)1===O.nodeType&&P.push(O);return P},Ki.find.CLASS=fs.getElementsByClassName&&function(w,D){if(iu)return D.getElementsByClassName(w)},ws=[],jf=[],fs.disconnectedMatch=!0,jf=jf.length&&new RegExp(jf.join("|")),ws=ws.length&&new RegExp(ws.join("|")),c=Xi.test(wl.compareDocumentPosition),$p=c||Xi.test(wl.contains)?function(w,D){var O=9===w.nodeType?w.documentElement:w,P=D&&D.parentNode;return w===P||!(!P||1!==P.nodeType||!(O.contains?O.contains(P):w.compareDocumentPosition&&16&w.compareDocumentPosition(P)))}:function(w,D){if(D)for(;D=D.parentNode;)if(D===w)return!0;return!1},Bs=c?function(w,D){return w===D?(nd=!0,0):(O=!w.compareDocumentPosition-!D.compareDocumentPosition)||(1&(O=(w.ownerDocument||w)===(D.ownerDocument||D)?w.compareDocumentPosition(D):1)||!fs.sortDetached&&D.compareDocumentPosition(w)===O?w===h||w.ownerDocument===Rd&&$p(Rd,w)?-1:D===h||D.ownerDocument===Rd&&$p(Rd,D)?1:Rh?Bh.call(Rh,w)-Bh.call(Rh,D):0:4&O?-1:1);var O}:function(w,D){if(w===D)return nd=!0,0;var O,P=0,B=w.parentNode,L=D.parentNode,K=[w],q=[D];if(!B||!L)return w===h?-1:D===h?1:B?-1:L?1:Rh?Bh.call(Rh,w)-Bh.call(Rh,D):0;if(B===L)return zh(w,D);for(O=w;O=O.parentNode;)K.unshift(O);for(O=D;O=O.parentNode;)q.unshift(O);for(;K[P]===q[P];)P++;return P?zh(K[P],q[P]):K[P]===Rd?-1:q[P]===Rd?1:0},h):Wi},Li.matches=function(i,c){return Li(i,null,null,c)},Li.matchesSelector=function(i,c){if((i.ownerDocument||i)!==Wi&&Ea(i),c=c.replace(Ld,"='$1']"),fs.matchesSelector&&iu&&(!ws||!ws.test(c))&&(!jf||!jf.test(c)))try{var h=(void 0).call(i,c);if(h||fs.disconnectedMatch||i.document&&11!==i.document.nodeType)return h}catch{}return 0<Li(c,Wi,null,[i]).length},Li.contains=function(i,c){return(i.ownerDocument||i)!==Wi&&Ea(i),$p(i,c)},Li.attr=function(i,c){(i.ownerDocument||i)!==Wi&&Ea(i);var h=Ki.attrHandle[c.toLowerCase()],y=h&&Ux.call(Ki.attrHandle,c.toLowerCase())?h(i,c,!iu):void 0;return void 0!==y?y:fs.attributes||!iu?i.getAttribute(c):(y=i.getAttributeNode(c))&&y.specified?y.value:null},Li.error=function(i){throw new Error("Syntax error, unrecognized expression: "+i)},Li.uniqueSort=function(i){var c,h=[],y=0,w=0;if(nd=!fs.detectDuplicates,Rh=!fs.sortStable&&i.slice(0),i.sort(Bs),nd){for(;c=i[w++];)c===i[w]&&(y=h.push(w));for(;y--;)i.splice(h[y],1)}return Rh=null,i},Kl=Li.getText=function(i){var c,h="",y=0,w=i.nodeType;if(w){if(1===w||9===w||11===w){if("string"==typeof i.textContent)return i.textContent;for(i=i.firstChild;i;i=i.nextSibling)h+=Kl(i)}else if(3===w||4===w)return i.nodeValue}else for(;c=i[y++];)h+=Kl(c);return h},(Ki=Li.selectors={cacheLength:50,createPseudo:Fd,match:Cg,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(i){return i[1]=i[1].replace(kl,Cu),i[3]=(i[3]||i[4]||i[5]||"").replace(kl,Cu),"~="===i[2]&&(i[3]=" "+i[3]+" "),i.slice(0,4)},CHILD:function(i){return i[1]=i[1].toLowerCase(),"nth"===i[1].slice(0,3)?(i[3]||Li.error(i[0]),i[4]=+(i[4]?i[5]+(i[6]||1):2*("even"===i[3]||"odd"===i[3])),i[5]=+(i[7]+i[8]||"odd"===i[3])):i[3]&&Li.error(i[0]),i},PSEUDO:function(i){var c,h=!i[6]&&i[2];return Cg.CHILD.test(i[0])?null:(i[3]?i[2]=i[4]||i[5]||"":h&&Bd.test(h)&&(c=Uf(h,!0))&&(c=h.indexOf(")",h.length-c)-h.length)&&(i[0]=i[0].slice(0,c),i[2]=h.slice(0,c)),i.slice(0,3))}},filter:{TAG:function(i){var c=i.replace(kl,Cu).toLowerCase();return"*"===i?function(){return!0}:function(h){return h.nodeName&&h.nodeName.toLowerCase()===c}},CLASS:function(i){var c=Jp[i+" "];return c||(c=new RegExp("(^|"+ka+")"+i+"("+ka+"|$)"))&&Jp(i,function(h){return c.test("string"==typeof h.className&&h.className||typeof h.getAttribute!=bf&&h.getAttribute("class")||"")})},ATTR:function(i,c,h){return function(y){var w=Li.attr(y,i);return null==w?"!="===c:!c||(w+="","="===c?w===h:"!="===c?w!==h:"^="===c?h&&0===w.indexOf(h):"*="===c?h&&-1<w.indexOf(h):"$="===c?h&&w.slice(-h.length)===h:"~="===c?-1<(" "+w+" ").indexOf(h):"|="===c&&(w===h||w.slice(0,h.length+1)===h+"-"))}},CHILD:function(i,c,h,y,w){var D="nth"!==i.slice(0,3),O="last"!==i.slice(-4),P="of-type"===c;return 1===y&&0===w?function(B){return!!B.parentNode}:function(B,L,K){var q,re,fe,ve,be,Ce,Se=D!=O?"nextSibling":"previousSibling",Oe=B.parentNode,ze=P&&B.nodeName.toLowerCase(),ot=!K&&!P;if(Oe){if(D){for(;Se;){for(fe=B;fe=fe[Se];)if(P?fe.nodeName.toLowerCase()===ze:1===fe.nodeType)return!1;Ce=Se="only"===i&&!Ce&&"nextSibling"}return!0}if(Ce=[O?Oe.firstChild:Oe.lastChild],O&&ot){for(be=(q=(re=Oe[Ss]||(Oe[Ss]={}))[i]||[])[0]===na&&q[1],ve=q[0]===na&&q[2],fe=be&&Oe.childNodes[be];fe=++be&&fe&&fe[Se]||(ve=be=0)||Ce.pop();)if(1===fe.nodeType&&++ve&&fe===B){re[i]=[na,be,ve];break}}else if(ot&&(q=(B[Ss]||(B[Ss]={}))[i])&&q[0]===na)ve=q[1];else for(;(fe=++be&&fe&&fe[Se]||(ve=be=0)||Ce.pop())&&((P?fe.nodeName.toLowerCase()!==ze:1!==fe.nodeType)||!++ve||(ot&&((fe[Ss]||(fe[Ss]={}))[i]=[na,ve]),fe!==B)););return(ve-=w)===y||ve%y==0&&0<=ve/y}}},PSEUDO:function(i,c){var h,y=Ki.pseudos[i]||Ki.setFilters[i.toLowerCase()]||Li.error("unsupported pseudo: "+i);return y[Ss]?y(c):1<y.length?(h=[i,i,"",c],Ki.setFilters.hasOwnProperty(i.toLowerCase())?Fd(function(w,D){for(var O,P=y(w,c),B=P.length;B--;)w[O=Bh.call(w,P[B])]=!(D[O]=P[B])}):function(w){return y(w,0,h)}):y}},pseudos:{not:Fd(function(i){var c=[],h=[],y=Pd(i.replace(Ga,"$1"));return y[Ss]?Fd(function(w,D,O,P){for(var B,L=y(w,null,P,[]),K=w.length;K--;)(B=L[K])&&(w[K]=!(D[K]=B))}):function(w,D,O){return c[0]=w,y(c,null,O,h),c[0]=null,!h.pop()}}),has:Fd(function(i){return function(c){return 0<Li(i,c).length}}),contains:Fd(function(i){return i=i.replace(kl,Cu),function(c){return-1<(c.textContent||c.innerText||Kl(c)).indexOf(i)}}),lang:Fd(function(i){return eb.test(i||"")||Li.error("unsupported lang: "+i),i=i.replace(kl,Cu).toLowerCase(),function(c){var h;do{if(h=iu?c.lang:c.getAttribute("xml:lang")||c.getAttribute("lang"))return(h=h.toLowerCase())===i||0===h.indexOf(i+"-")}while((c=c.parentNode)&&1===c.nodeType);return!1}}),target:function(i){var c=window.location&&window.location.hash;return c&&c.slice(1)===i.id},root:function(i){return i===wl},focus:function(i){return i===Wi.activeElement&&(!Wi.hasFocus||Wi.hasFocus())&&!!(i.type||i.href||~i.tabIndex)},enabled:function(i){return!1===i.disabled},disabled:function(i){return!0===i.disabled},checked:function(i){var c=i.nodeName.toLowerCase();return"input"===c&&!!i.checked||"option"===c&&!!i.selected},selected:function(i){return!0===i.selected},empty:function(i){for(i=i.firstChild;i;i=i.nextSibling)if(i.nodeType<6)return!1;return!0},parent:function(i){return!Ki.pseudos.empty(i)},header:function(i){return Qo.test(i.nodeName)},input:function(i){return zd.test(i.nodeName)},button:function(i){var c=i.nodeName.toLowerCase();return"input"===c&&"button"===i.type||"button"===c},text:function(i){var c;return"input"===i.nodeName.toLowerCase()&&"text"===i.type&&(null==(c=i.getAttribute("type"))||"text"===c.toLowerCase())},first:wf(function(){return[0]}),last:wf(function(i,c){return[c-1]}),eq:wf(function(i,c,h){return[h<0?h+c:h]}),even:wf(function(i,c){for(var h=0;h<c;h+=2)i.push(h);return i}),odd:wf(function(i,c){for(var h=1;h<c;h+=2)i.push(h);return i}),lt:wf(function(i,c,h){for(var y=h<0?h+c:h;0<=--y;)i.push(y);return i}),gt:wf(function(i,c,h){for(var y=h<0?h+c:h;++y<c;)i.push(y);return i})}}).pseudos.nth=Ki.pseudos.eq,Tn(["radio","checkbox","file","password","image"],function(i){var c;Ki.pseudos[i]=(c=i,function(h){return"input"===h.nodeName.toLowerCase()&&h.type===c})}),Tn(["submit","reset"],function(i){var c;Ki.pseudos[i]=(c=i,function(h){var y=h.nodeName.toLowerCase();return("input"===y||"button"===y)&&h.type===c})}),Cc.prototype=Ki.filters=Ki.pseudos,Ki.setFilters=new Cc,Uf=Li.tokenize=function(i,c){var h,y,w,D,O,P,B,L=qf[i+" "];if(L)return c?0:L.slice(0);for(O=i,P=[],B=Ki.preFilter;O;){for(D in h&&!(y=xf.exec(O))||(y&&(O=O.slice(y[0].length)||O),P.push(w=[])),h=!1,(y=_f.exec(O))&&(h=y.shift(),w.push({value:h,type:y[0].replace(Ga," ")}),O=O.slice(h.length)),Ki.filter)Ki.filter.hasOwnProperty(D)&&(!(y=Cg[D].exec(O))||B[D]&&!(y=B[D](y))||(h=y.shift(),w.push({value:h,type:D,matches:y}),O=O.slice(h.length)));if(!h)break}return c?O.length:O?Li.error(i):qf(i,P).slice(0)},Pd=Li.compile=function(i,c){var h,y,w,D,O,P=[],B=[],L=Ca[i+" "];if(!L){for(h=(c=c||Uf(i)).length;h--;)((L=function q(re){for(var fe,ve,be,Ce=re.length,Se=Ki.relative[re[0].type],Oe=Se||Ki.relative[" "],ze=Se?1:0,ot=Vm(function(Je){return Je===fe},Oe,!0),yt=Vm(function(Je){return-1<Bh.call(fe,Je)},Oe,!0),Ve=[function(Je,it,Nt){var Ht=!Se&&(Nt||it!==Nd)||((fe=it).nodeType?ot:yt)(Je,it,Nt);return fe=null,Ht}];ze<Ce;ze++)if(ve=Ki.relative[re[ze].type])Ve=[Vm(Qp(Ve),ve)];else{if((ve=Ki.filter[re[ze].type].apply(null,re[ze].matches))[Ss]){for(be=++ze;be<Ce&&!Ki.relative[re[be].type];be++);return function Je(it,Nt,Ht,on,$t,bt){return on&&!on[Ss]&&(on=Je(on)),$t&&!$t[Ss]&&($t=Je($t,bt)),Fd(function(St,At,Yt,Nn){var jn,In,Wn,Pn=[],Un=[],Hn=At.length,lr=St||function(Bn,vr,hr){for(var To=0,st=vr.length;To<st;To++)Li(Bn,vr[To],hr);return hr}(Nt||"*",Yt.nodeType?[Yt]:Yt,[]),vn=!it||!St&&Nt?lr:au(lr,Pn,it,Yt,Nn),Zn=Ht?$t||(St?it:Hn||on)?[]:At:vn;if(Ht&&Ht(vn,Zn,Yt,Nn),on)for(jn=au(Zn,Un),on(jn,[],Yt,Nn),In=jn.length;In--;)(Wn=jn[In])&&(Zn[Un[In]]=!(vn[Un[In]]=Wn));if(St){if($t||it){if($t){for(jn=[],In=Zn.length;In--;)(Wn=Zn[In])&&jn.push(vn[In]=Wn);$t(null,Zn=[],jn,Nn)}for(In=Zn.length;In--;)(Wn=Zn[In])&&-1<(jn=$t?Bh.call(St,Wn):Pn[In])&&(St[jn]=!(At[jn]=Wn))}}else Zn=au(Zn===At?Zn.splice(Hn,Zn.length):Zn),$t?$t(null,At,Zn,Nn):Xf.apply(At,Zn)})}(1<ze&&Qp(Ve),1<ze&&Tl(re.slice(0,ze-1).concat({value:" "===re[ze-2].type?"*":""})).replace(Ga,"$1"),ve,ze<be&&q(re.slice(ze,be)),be<Ce&&q(re=re.slice(be)),be<Ce&&Tl(re))}Ve.push(ve)}return Qp(Ve)}(c[h]))[Ss]?P:B).push(L);(L=Ca(i,(y=B,D=0<(w=P).length,O=0<y.length,D?Fd(K):K))).selector=i}function K(q,re,fe,ve,be){var Ce,Se,Oe,ze=0,ot="0",yt=q&&[],Ve=[],Je=Nd,it=q||O&&Ki.find.TAG("*",be),Nt=na+=null==Je?1:Math.random()||.1,Ht=it.length;for(be&&(Nd=re!==Wi&&re);ot!==Ht&&null!=(Ce=it[ot]);ot++){if(O&&Ce){for(Se=0;Oe=y[Se++];)if(Oe(Ce,re,fe)){ve.push(Ce);break}be&&(na=Nt)}D&&((Ce=!Oe&&Ce)&&ze--,q&&yt.push(Ce))}if(ze+=ot,D&&ot!==ze){for(Se=0;Oe=w[Se++];)Oe(yt,Ve,re,fe);if(q){if(0<ze)for(;ot--;)yt[ot]||Ve[ot]||(Ve[ot]=wg.call(ve));Ve=au(Ve)}Xf.apply(ve,Ve),be&&!q&&0<Ve.length&&1<ze+w.length&&Li.uniqueSort(ve)}return be&&(na=Nt,Nd=Je),yt}return L},td=Li.select=function(i,c,h,y){var w,D,O,P,B,L="function"==typeof i&&i,K=!y&&Uf(i=L.selector||i);if(h=h||[],1===K.length){if(2<(D=K[0]=K[0].slice(0)).length&&"ID"===(O=D[0]).type&&fs.getById&&9===c.nodeType&&iu&&Ki.relative[D[1].type]){if(!(c=(Ki.find.ID(O.matches[0].replace(kl,Cu),c)||[])[0]))return h;L&&(c=c.parentNode),i=i.slice(D.shift().value.length)}for(w=Cg.needsContext.test(i)?0:D.length;w--&&!Ki.relative[P=(O=D[w]).type];)if((B=Ki.find[P])&&(y=B(O.matches[0].replace(kl,Cu),Fm.test(D[0].type)&&nb(c.parentNode)||c))){if(D.splice(w,1),!(i=y.length&&Tl(D)))return Xf.apply(h,y),h;break}}return(L||Pd(i,K))(y,c,!iu,h,Fm.test(i)&&nb(c.parentNode)||c),h},fs.sortStable=Ss.split("").sort(Bs).join("")===Ss,fs.detectDuplicates=!!nd,Ea(),fs.sortDetached=!0;var Ql=document,kg=Array.prototype.push,L_=Array.prototype.slice,B_=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,Vh=Wa.Event,tv=fn.makeMap("children,contents,next,prev"),ra=function(i,c,h,y){var w;if($l(c))c=Jl(c,b0(i[0]));else if(c.length&&!c.nodeType){if(c=jr.makeArray(c),y)for(w=c.length-1;0<=w;w--)ra(i,c[w],h,y);else for(w=0;w<c.length;w++)ra(i,c[w],h,y);return i}if(c.nodeType)for(w=i.length;w--;)h.call(i[w],c);return i},ec=fn.makeMap("fillOpacity fontWeight lineHeight opacity orphans widows zIndex zoom"," "),Cs=fn.makeMap("checked compact declare defer disabled ismap multiple nohref noshade nowrap readonly selected"," "),Zf={for:"htmlFor",class:"className",readonly:"readOnly"},Dl={float:"cssFloat"},tl={},rb={},qx=/^\s*|\s*$/g,b0=function(i){return i?9===i.nodeType?i:i.ownerDocument:Ql};function Xx(i,c,h){var y=[],w=i[c];for("string"!=typeof h&&h instanceof jr&&(h=h[0]);w&&9!==w.nodeType&&(void 0===h||!(w===h||"string"==typeof h&&jr(w).is(h)));)1===w.nodeType&&y.push(w),w=w[c];return y}function Yx(i,c,h,y){var w=[];for(y instanceof jr&&(y=y[0]);i;i=i[c])if(!h||i.nodeType===h){if(void 0!==y&&(i===y||"string"==typeof y&&jr(i).is(y)))break;w.push(i)}return w}function Yo(i,c,h){for(i=i[c];i;i=i[c])if(i.nodeType===h)return i;return null}function nv(i,c){var h=c.attr("style"),y=i.serialize(i.parse(h),c[0].nodeName)||null;c.attr("data-mce-style",y)}function ku(i,c){var h,y,w=0;if(i)for(h=i.nodeType,i=i.previousSibling;i;i=i.previousSibling)y=i.nodeType,(!c||3!==y||y!==h&&i.nodeValue.length)&&(w++,h=y);return w}kc.fn=kc.prototype={constructor:kc,selector:"",context:null,length:0,init:function(i,c){var h,y,w=this;if(!i)return w;if(i.nodeType)return w.context=w[0]=i,w.length=1,w;if(c&&c.nodeType)w.context=c;else{if(c)return jr(i).attr(c);w.context=c=document}if($l(i)){if(!(h="<"===(w.selector=i).charAt(0)&&">"===i.charAt(i.length-1)&&3<=i.length?[null,i,null]:B_.exec(i)))return jr(c).find(i);if(h[1])for(y=Jl(i,b0(c)).firstChild;y;)kg.call(w,y),y=y.nextSibling;else{if(!(y=b0(c).getElementById(h[2])))return w;if(y.id!==h[2])return w.find(i);w.length=1,w[0]=y}}else this.add(i,!1);return w},toArray:function(){return fn.toArray(this)},add:function(i,c){var h,y;if($l(i))return this.add(jr(i));if(!1!==c)for(h=jr.unique(this.toArray().concat(jr.makeArray(i))),this.length=h.length,y=0;y<h.length;y++)this[y]=h[y];else kg.apply(this,jr.makeArray(i));return this},attr:function(i,c){var h,y=this;if("object"==typeof i)Fh(i,function(w,D){y.attr(w,D)});else{if(!Ml(c)){if(y[0]&&1===y[0].nodeType){if((h=tl[i])&&h.get)return h.get(y[0],i);if(Cs[i])return y.prop(i)?i:void 0;null===(c=y[0].getAttribute(i,2))&&(c=void 0)}return c}this.each(function(){var w;1===this.nodeType&&((w=tl[i])&&w.set?w.set(this,c):null===c?this.removeAttribute(i,2):this.setAttribute(i,c,2))})}return y},removeAttr:function(i){return this.attr(i,null)},prop:function(i,c){var h=this;if("object"==typeof(i=Zf[i]||i))Fh(i,function(y,w){h.prop(y,w)});else{if(!Ml(c))return h[0]&&h[0].nodeType&&i in h[0]?h[0][i]:c;this.each(function(){1===this.nodeType&&(this[i]=c)})}return h},css:function(i,c){function h(P){return P.replace(/-(\D)/g,function(B,L){return L.toUpperCase()})}function y(P){return P.replace(/[A-Z]/g,function(B){return"-"+B})}var w,D,O=this;if("object"==typeof i)Fh(i,function(P,B){O.css(P,B)});else if(Ml(c))i=h(i),"number"!=typeof c||ec[i]||(c=c.toString()+"px"),O.each(function(){var P=this.style;if((D=rb[i])&&D.set)D.set(this,c);else{try{this.style[Dl[i]||i]=c}catch{}null!==c&&""!==c||(P.removeProperty?P.removeProperty(y(i)):P.removeAttribute(i))}});else{if(w=O[0],(D=rb[i])&&D.get)return D.get(w);if(!w.ownerDocument.defaultView)return w.currentStyle?w.currentStyle[h(i)]:"";try{return w.ownerDocument.defaultView.getComputedStyle(w,null).getPropertyValue(y(i))}catch{return}}return O},remove:function(){for(var i,c=this.length;c--;)Vh.clean(i=this[c]),i.parentNode&&i.parentNode.removeChild(i);return this},empty:function(){for(var i,c=this.length;c--;)for(i=this[c];i.firstChild;)i.removeChild(i.firstChild);return this},html:function(i){var c;if(Ml(i)){c=this.length;try{for(;c--;)this[c].innerHTML=i}catch{jr(this[c]).empty().append(i)}return this}return this[0]?this[0].innerHTML:""},text:function(i){var c;if(Ml(i)){for(c=this.length;c--;)"innerText"in this[c]?this[c].innerText=i:this[0].textContent=i;return this}return this[0]?this[0].innerText||this[0].textContent:""},append:function(){return ra(this,arguments,function(i){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.appendChild(i)})},prepend:function(){return ra(this,arguments,function(i){(1===this.nodeType||this.host&&1===this.host.nodeType)&&this.insertBefore(i,this.firstChild)},!0)},before:function(){return this[0]&&this[0].parentNode?ra(this,arguments,function(i){this.parentNode.insertBefore(i,this)}):this},after:function(){return this[0]&&this[0].parentNode?ra(this,arguments,function(i){this.parentNode.insertBefore(i,this.nextSibling)},!0):this},appendTo:function(i){return jr(i).append(this),this},prependTo:function(i){return jr(i).prepend(this),this},replaceWith:function(i){return this.before(i).remove()},wrap:function(i){return Yf(this,i)},wrapAll:function(i){return Yf(this,i,!0)},wrapInner:function(i){return this.each(function(){jr(this).contents().wrapAll(i)}),this},unwrap:function(){return this.parent().each(function(){jr(this).replaceWith(this.childNodes)})},clone:function(){var i=[];return this.each(function(){i.push(this.cloneNode(!0))}),jr(i)},addClass:function(i){return this.toggleClass(i,!0)},removeClass:function(i){return this.toggleClass(i,!1)},toggleClass:function(i,c){var h=this;return"string"!=typeof i||(-1!==i.indexOf(" ")?Fh(i.split(" "),function(){h.toggleClass(this,c)}):h.each(function(y,w){var D,O=jx(w,i);O!==c&&(D=w.className,O?w.className=ev((" "+D+" ").replace(" "+i+" "," ")):w.className+=D?" "+i:i)})),h},hasClass:function(i){return jx(this[0],i)},each:function(i){return Fh(this,i)},on:function(i,c){return this.each(function(){Vh.bind(this,i,c)})},off:function(i,c){return this.each(function(){Vh.unbind(this,i,c)})},trigger:function(i){return this.each(function(){"object"==typeof i?Vh.fire(this,i.type,i):Vh.fire(this,i)})},show:function(){return this.css("display","")},hide:function(){return this.css("display","none")},slice:function(){return jr(L_.apply(this,arguments))},eq:function(i){return-1===i?this.slice(i):this.slice(i,+i+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},find:function(i){for(var c=[],h=0,y=this.length;h<y;h++)jr.find(i,this[h],c);return jr(c)},filter:function(i){return jr("function"==typeof i?so(this.toArray(),function(c,h){return i(h,c)}):jr.filter(i,this.toArray()))},closest:function(i){var c=[];return i instanceof jr&&(i=i[0]),this.each(function(h,y){for(;y;){if("string"==typeof i&&jr(y).is(i)){c.push(y);break}if(y===i){c.push(y);break}y=y.parentNode}}),jr(c)},offset:function(i){var c,h,y,w,D=0,O=0;return i?this.css(i):((c=this[0])&&(y=(h=c.ownerDocument).documentElement,c.getBoundingClientRect&&(D=(w=c.getBoundingClientRect()).left+(y.scrollLeft||h.body.scrollLeft)-y.clientLeft,O=w.top+(y.scrollTop||h.body.scrollTop)-y.clientTop)),{left:D,top:O})},push:kg,sort:Array.prototype.sort,splice:Array.prototype.splice},fn.extend(kc,{extend:fn.extend,makeArray:function(i){return i&&i===i.window||i.nodeType?[i]:fn.toArray(i)},inArray:function(i,c){var h;if(c.indexOf)return c.indexOf(i);for(h=c.length;h--;)if(c[h]===i)return h;return-1},isArray:fn.isArray,each:Fh,trim:ev,grep:so,find:Li,expr:Li.selectors,unique:Li.uniqueSort,text:Li.getText,contains:Li.contains,filter:function(i,c,h){var y=c.length;for(h&&(i=":not("+i+")");y--;)1!==c[y].nodeType&&c.splice(y,1);return 1===c.length?jr.find.matchesSelector(c[0],i)?[c[0]]:[]:jr.find.matches(i,c)}}),Fh({parent:function(i){var c=i.parentNode;return c&&11!==c.nodeType?c:null},parents:function(i){return Xx(i,"parentNode")},next:function(i){return Yo(i,"nextSibling",1)},prev:function(i){return Yo(i,"previousSibling",1)},children:function(i){return Yx(i.firstChild,"nextSibling",1)},contents:function(i){return fn.toArray(("iframe"===i.nodeName?i.contentDocument||i.contentWindow.document:i).childNodes)}},function(i,c){kc.fn[i]=function(h){var y=[];this.each(function(){var D=c.call(y,this,h,y);D&&(jr.isArray(D)?y.push.apply(y,D):y.push(D))}),1<this.length&&(tv[i]||(y=jr.unique(y)),0===i.indexOf("parents")&&(y=y.reverse()));var w=jr(y);return h?w.filter(h):w}}),Fh({parentsUntil:function(i,c){return Xx(i,"parentNode",c)},nextUntil:function(i,c){return Yx(i,"nextSibling",1,c).slice(1)},prevUntil:function(i,c){return Yx(i,"previousSibling",1,c).slice(1)}},function(i,c){kc.fn[i]=function(h,y){var w=[];this.each(function(){var O=c.call(w,this,h,w);O&&(jr.isArray(O)?w.push.apply(w,O):w.push(O))}),1<this.length&&(w=jr.unique(w),0!==i.indexOf("parents")&&"prevUntil"!==i||(w=w.reverse()));var D=jr(w);return y?D.filter(y):D}}),kc.fn.is=function(i){return!!i&&0<this.filter(i).length},kc.fn.init.prototype=kc.fn,kc.overrideDefaults=function(i){var c,h=function(y,w){return c=c||i(),0===arguments.length&&(y=c.element),new h.fn.init(y,w=w||c.context)};return jr.extend(h,this),h},kc.attrHooks=tl,kc.cssHooks=rb;var jr=kc,nl=fn.each,No=fn.grep,Vu=zr.ie,Hm=/^([a-z0-9],?)+$/i,Vo=function(i,c){function h(st){return st&&i&&Ae(st)?i.getElementById(st):st}function y(st){return vn("string"==typeof st?h(st):st)}function w(st,kt,cn){var xn,gn,Xn=y(st);return void 0===(gn=Xn.length?(xn=To[kt])&&xn.get?xn.get(Xn,kt):Xn.attr(kt):gn)?cn||"":gn}function D(st){var kt=h(st);return kt?kt.attributes:[]}function O(st,kt,cn){""===cn&&(cn=null);var xn,gn=y(st),Xn=gn.attr(kt);gn.length&&((xn=To[kt])&&xn.set?xn.set(gn,cn,kt):gn.attr(kt,cn),Xn!==cn&&c.onSetAttrib&&c.onSetAttrib({attrElm:gn,attrName:kt,attrValue:cn}))}function P(){return c.root_element||i.body}function B(st,kt){return function(cn,xn,gn){var Xn,Vr=0,Zr=0,zi=cn.ownerDocument;if(gn=gn||cn,xn){if(gn===cn&&xn.getBoundingClientRect&&"static"===bu(zt.fromDom(cn),"position")){var ro=xn.getBoundingClientRect();return{x:Vr=ro.left+(zi.documentElement.scrollLeft||cn.scrollLeft)-zi.documentElement.clientLeft,y:Zr=ro.top+(zi.documentElement.scrollTop||cn.scrollTop)-zi.documentElement.clientTop}}for(var Lr=xn;Lr&&Lr!==gn&&Lr.nodeType&&!Ju(Lr,gn);)Vr+=Lr.offsetLeft||0,Zr+=Lr.offsetTop||0,Lr=Lr.offsetParent;for(Lr=xn.parentNode;Lr&&Lr!==gn&&Lr.nodeType&&!Ju(Lr,gn);)Vr-=Lr.scrollLeft||0,Zr-=Lr.scrollTop||0,Lr=Lr.parentNode;Zr+=(Xn=zt.fromDom(xn),Ky.isFirefox()&&"table"===va(Xn)?$c(mr(Xn)).filter(function(Ra){return"caption"===va(Ra)}).bind(function(Ra){return $c(hc(Ra)).map(function(Ms){return Ms.dom.offsetTop<=Ra.dom.offsetTop?-Ra.dom.offsetHeight:0})}).getOr(0):0)}return{x:Vr,y:Zr}}(i.body,h(st),kt)}function L(st,kt,cn){var xn=y(st);return cn?xn.css(kt):("float"===(kt=kt.replace(/-(\D)/g,function(gn,Xn){return Xn.toUpperCase()}))&&(kt=zr.browser.isIE()?"styleFloat":"cssFloat"),xn[0]&&xn[0].style?xn[0].style[kt]:void 0)}function K(st){var kt=L(st=h(st),"width"),cn=L(st,"height");return-1===kt.indexOf("px")&&(kt=0),-1===cn.indexOf("px")&&(cn=0),{w:parseInt(kt,10)||st.offsetWidth||st.clientWidth,h:parseInt(cn,10)||st.offsetHeight||st.clientHeight}}function q(st,kt){if(!st)return!1;if(!Array.isArray(st)){if("*"===kt)return 1===st.nodeType;if(Hm.test(kt)){for(var cn=kt.toLowerCase().split(/,/),xn=st.nodeName.toLowerCase(),gn=cn.length-1;0<=gn;gn--)if(cn[gn]===xn)return!0;return!1}if(st.nodeType&&1!==st.nodeType)return!1}var Xn=Array.isArray(st)?st:[st];return 0<Li(kt,Xn[0].ownerDocument||Xn[0],null,Xn).length}function re(st,kt,cn,xn){var gn,Xn=[],Vr=h(st);for(xn=void 0===xn,cn=cn||("BODY"!==P().nodeName?P().parentNode:null),fn.is(kt,"string")&&(kt="*"===(gn=kt)?function(Zr){return 1===Zr.nodeType}:function(Zr){return q(Zr,gn)});Vr&&!(Vr===cn||ye(Vr.nodeType)||zf(Vr)||Mh(Vr));){if(!kt||"function"==typeof kt&&kt(Vr)){if(!xn)return[Vr];Xn.push(Vr)}Vr=Vr.parentNode}return xn?Xn:null}function fe(st,kt,cn){var xn=kt;if(st)for("string"==typeof kt&&(xn=function(gn){return q(gn,kt)}),st=st[cn];st;st=st[cn])if("function"==typeof xn&&xn(st))return st;return null}function ve(st,kt,cn){var xn,gn="string"==typeof st?h(st):st;return!!gn&&(fn.isArray(gn)&&(gn.length||0===gn.length)?(xn=[],nl(gn,function(Xn,Vr){Xn&&xn.push(kt.call(cn,"string"==typeof Xn?h(Xn):Xn,Vr))}),xn):kt.call(cn||this,gn))}function be(st,kt){y(st).each(function(cn,xn){nl(kt,function(gn,Xn){O(xn,Xn,gn)})})}function Ce(st,kt){var cn=y(st);Vu?cn.each(function(xn,gn){if(!1!==gn.canHaveHTML){for(;gn.firstChild;)gn.removeChild(gn.firstChild);try{gn.innerHTML="<br>"+kt,gn.removeChild(gn.firstChild)}catch{jr("<div></div>").html("<br>"+kt).contents().slice(1).appendTo(gn)}return kt}}):cn.html(kt)}function Se(st,kt,cn,xn,gn){return ve(st,function(Xn){var Vr="string"==typeof kt?i.createElement(kt):kt;return be(Vr,cn),xn&&("string"!=typeof xn&&xn.nodeType?Vr.appendChild(xn):"string"==typeof xn&&Ce(Vr,xn)),gn?Vr:Xn.appendChild(Vr)})}function Oe(st,kt,cn){return Se(i.createElement(st),st,kt,cn,!0)}function ze(st,kt){var cn=y(st);return(kt?cn.each(function(){for(var xn;xn=this.firstChild;)3===xn.nodeType&&0===xn.data.length?this.removeChild(xn):this.parentNode.insertBefore(xn,this)}):cn).remove(),1<cn.length?cn.toArray():cn[0]}function ot(st,kt,cn){y(st).toggleClass(kt,cn).each(function(){""===this.className&&jr(this).attr("class",null)})}function yt(st,kt,cn){return ve(kt,function(xn){return fn.is(xn,"array")&&(st=st.cloneNode(!0)),cn&&nl(No(xn.childNodes),function(gn){st.appendChild(gn)}),xn.parentNode.replaceChild(st,xn)})}function Ve(st){if(Kr(st)){var kt="a"===st.nodeName.toLowerCase()&&!w(st,"href")&&w(st,"id");return w(st,"name")||w(st,"data-mce-bookmark")||kt?1:void 0}}function Je(){return i.createRange()}function it(st){if(st&&Kr(st)){var kt=st.getAttribute("data-mce-contenteditable");return kt&&"inherit"!==kt?kt:"inherit"!==st.contentEditable?st.contentEditable:null}return null}void 0===c&&(c={});var Nt,Ht,on,$t,bt,St,At={},Yt=window,Nn={},jn=0,In=yc.forElement(zt.fromDom(i),{contentCssCors:c.contentCssCors,referrerPolicy:c.referrerPolicy}),Wn=[],Pn=c.schema||Vf({}),Un=wu({url_converter:c.url_converter,url_converter_scope:c.url_converter_scope},c.schema),Hn=c.ownEvents?new Wa:Wa.Event,lr=Pn.getBlockElements(),vn=jr.overrideDefaults(function(){return{context:i,element:hr.getRoot()}}),Zn=Yl.encodeAllRaw,Bn=function(st,kt,cn,xn){if(fn.isArray(st)){for(var gn=st.length,Xn=[];gn--;)Xn[gn]=Bn(st[gn],kt,cn,xn);return Xn}return!c.collect||st!==i&&st!==Yt||Wn.push([st,kt,cn,xn]),Hn.bind(st,kt,cn,xn||hr)},vr=function(st,kt,cn){if(fn.isArray(st)){for(var xn=st.length,gn=[];xn--;)gn[xn]=vr(st[xn],kt,cn);return gn}if(0<Wn.length&&(st===i||st===Yt))for(xn=Wn.length;xn--;){var Xn=Wn[xn];st!==Xn[0]||kt&&kt!==Xn[1]||cn&&cn!==Xn[2]||Hn.unbind(Xn[0],Xn[1],Xn[2])}return Hn.unbind(st,kt,cn)},hr={doc:i,settings:c,win:Yt,files:Nn,stdMode:!0,boxModel:!0,styleSheetLoader:In,boundEvents:Wn,styles:Un,schema:Pn,events:Hn,isBlock:function(st){if("string"==typeof st)return!!lr[st];if(st){var kt=st.nodeType;if(kt)return!(1!==kt||!lr[st.nodeName])}return!1},$:vn,$$:y,root:null,clone:function(st,kt){if(!Vu||1!==st.nodeType||kt)return st.cloneNode(kt);var cn=i.createElement(st.nodeName);return nl(D(st),function(xn){O(cn,xn.nodeName,w(st,xn.nodeName))}),cn},getRoot:P,getViewPort:function(st){var kt=Nx(st);return{x:kt.x,y:kt.y,w:kt.width,h:kt.height}},getRect:function(st){var kt=B(st=h(st)),cn=K(st);return{x:kt.x,y:kt.y,w:cn.w,h:cn.h}},getSize:K,getParent:function(st,kt,cn){var xn=re(st,kt,cn,!1);return xn&&0<xn.length?xn[0]:null},getParents:re,get:h,getNext:function(st,kt){return fe(st,kt,"nextSibling")},getPrev:function(st,kt){return fe(st,kt,"previousSibling")},select:function(st,kt){return Li(st,h(kt)||c.root_element||i,[])},is:q,add:Se,create:Oe,createHTML:function(st,kt,cn){var xn,gn="";for(xn in gn+="<"+st,kt)Eo(kt,xn)&&(gn+=" "+xn+'="'+Zn(kt[xn])+'"');return void 0!==cn?gn+">"+cn+"</"+st+">":gn+" />"},createFragment:function(st){var kt,cn=i.createElement("div"),xn=i.createDocumentFragment();for(xn.appendChild(cn),st&&(cn.innerHTML=st);kt=cn.firstChild;)xn.appendChild(kt);return xn.removeChild(cn),xn},remove:ze,setStyle:function(st,kt,cn){var xn=Ae(kt)?y(st).css(kt,cn):y(st).css(kt);c.update_styles&&nv(Un,xn)},getStyle:L,setStyles:function(st,kt){var cn=y(st).css(kt);c.update_styles&&nv(Un,cn)},removeAllAttribs:function(st){return ve(st,function(kt){for(var cn=kt.attributes,xn=cn.length-1;0<=xn;xn--)kt.removeAttributeNode(cn.item(xn))})},setAttrib:O,setAttribs:be,getAttrib:w,getPos:B,parseStyle:function(st){return Un.parse(st)},serializeStyle:function(st,kt){return Un.serialize(st,kt)},addStyle:function(st){var kt,cn;if(hr!==Vo.DOM&&i===document){if(At[st])return;At[st]=!0}(cn=i.getElementById("mceDefaultStyles"))||((cn=i.createElement("style")).id="mceDefaultStyles",cn.type="text/css",(kt=i.getElementsByTagName("head")[0]).firstChild?kt.insertBefore(cn,kt.firstChild):kt.appendChild(cn)),cn.styleSheet?cn.styleSheet.cssText+=st:cn.appendChild(i.createTextNode(st))},loadCSS:function(st){Tn((st=st||"").split(","),function(kt){Nn[kt]=!0,In.load(kt,U)})},addClass:function(st,kt){y(st).addClass(kt)},removeClass:function(st,kt){ot(st,kt,!1)},hasClass:function(st,kt){return y(st).hasClass(kt)},toggleClass:ot,show:function(st){y(st).show()},hide:function(st){y(st).hide()},isHidden:function(st){return"none"===y(st).css("display")},uniqueId:function(st){return(st||"mce_")+jn++},setHTML:Ce,getOuterHTML:function(st){var kt="string"==typeof st?h(st):st;return Kr(kt)?kt.outerHTML:jr("<div></div>").append(jr(kt).clone()).html()},setOuterHTML:function(st,kt){y(st).each(function(){try{if("outerHTML"in this)return void(this.outerHTML=kt)}catch{}ze(jr(this).html(kt),!0)})},decode:Yl.decode,encode:Zn,insertAfter:function(st,kt){var cn=h(kt);return ve(st,function(xn){var gn=cn.parentNode,Xn=cn.nextSibling;return Xn?gn.insertBefore(xn,Xn):gn.appendChild(xn),xn})},replace:yt,rename:function(st,kt){var cn;return st.nodeName!==kt.toUpperCase()&&(cn=Oe(kt),nl(D(st),function(xn){O(cn,xn.nodeName,w(st,xn.nodeName))}),yt(cn,st,!0)),cn||st},findCommonAncestor:function(st,kt){for(var cn,xn=st;xn;){for(cn=kt;cn&&xn!==cn;)cn=cn.parentNode;if(xn===cn)break;xn=xn.parentNode}return!xn&&st.ownerDocument?st.ownerDocument.documentElement:xn},toHex:function(st){return Un.toHex(fn.trim(st))},run:ve,getAttribs:D,isEmpty:function(st,kt){var cn,xn,gn=0;if(Ve(st))return!1;if(st=st.firstChild){var Xn=new cs(st,st.parentNode),Vr=Pn?Pn.getWhiteSpaceElements():{};kt=kt||(Pn?Pn.getNonEmptyElements():null);do{if(cn=st.nodeType,Kr(st)){var Zr=st.getAttribute("data-mce-bogus");if(Zr){st=Xn.next("all"===Zr);continue}if(xn=st.nodeName.toLowerCase(),kt&&kt[xn]){if("br"!==xn)return!1;gn++,st=Xn.next();continue}if(Ve(st))return!1}if(8===cn||3===cn&&!_s(st.nodeValue)||3===cn&&st.parentNode&&Vr[st.parentNode.nodeName]&&_s(st.nodeValue))return!1;st=Xn.next()}while(st)}return gn<=1},createRng:Je,nodeIndex:ku,split:function(st,kt,cn){var xn,gn,Xn,Vr=Je();if(st&&kt)return Vr.setStart(st.parentNode,ku(st)),Vr.setEnd(kt.parentNode,ku(kt)),xn=Vr.extractContents(),(Vr=Je()).setStart(kt.parentNode,ku(kt)+1),Vr.setEnd(st.parentNode,ku(st)+1),gn=Vr.extractContents(),(Xn=st.parentNode).insertBefore(Gf(hr,xn),st),Xn.insertBefore(cn||kt,st),Xn.insertBefore(Gf(hr,gn),st),ze(st),cn||kt},bind:Bn,unbind:vr,fire:function(st,kt,cn){return Hn.fire(st,kt,cn)},getContentEditable:it,getContentEditableParent:function(st){for(var kt=P(),cn=null;st&&st!==kt&&null===(cn=it(st));st=st.parentNode);return cn},destroy:function(){if(0<Wn.length)for(var st=Wn.length;st--;){var kt=Wn[st];Hn.unbind(kt[0],kt[1],kt[2])}On(Nn,function(cn,xn){In.unload(xn),delete Nn[xn]}),Li.setDocument&&Li.setDocument()},isChildOf:function(st,kt){if(Vu){for(;st;){if(kt===st)return!0;st=st.parentNode}return!1}return st===kt||kt.contains(st)},dumpRng:function(st){return"startContainer: "+st.startContainer.nodeName+", startOffset: "+st.startOffset+", endContainer: "+st.endContainer.nodeName+", endOffset: "+st.endOffset}},To=(Nt=Un,on=Z(hr),bt={set:function(st,kt,cn){Ht.url_converter&&null!==kt&&(kt=Ht.url_converter.call(Ht.url_converter_scope||on(),kt,cn,st[0])),st.attr("data-mce-"+cn,kt).attr(cn,kt)},get:function(st,kt){return st.attr("data-mce-"+kt)||st.attr(kt)}},St={style:{set:function(st,kt){null===kt||"object"!=typeof kt?($t&&st.attr("data-mce-style",kt),null!==kt&&"string"==typeof kt?(st.removeAttr("style"),st.css(Nt.parse(kt))):st.attr("style",kt)):st.css(kt)},get:function(st){var kt=st.attr("data-mce-style")||st.attr("style");return Nt.serialize(Nt.parse(kt),st[0].nodeName)}}},($t=(Ht=c).keep_values)&&(St.href=St.src=bt),St);return hr};Vo.DOM=Vo(document),Vo.nodeIndex=ku;var Zo=Vo.DOM,Hh=fn.each,Ks=fn.grep,tc=(wi.prototype._setReferrerPolicy=function(i){this.settings.referrerPolicy=i},wi.prototype.loadScript=function(i,c,h){function y(){w.remove(D),O&&(O.onerror=O.onload=O=null)}var w=Zo,D=w.uniqueId(),O=document.createElement("script");O.id=D,O.type="text/javascript",O.src=fn._addCacheSuffix(i),this.settings.referrerPolicy&&w.setAttrib(O,"referrerpolicy",this.settings.referrerPolicy),O.onload=function(){y(),c()},O.onerror=function(){y(),$e(h)?h():"undefined"!=typeof console&&console.log&&console.log("Failed to load script: "+i)},(document.getElementsByTagName("head")[0]||document.body).appendChild(O)},wi.prototype.isDone=function(i){return 2===this.states[i]},wi.prototype.markDone=function(i){this.states[i]=2},wi.prototype.add=function(i,c,h,y){var w=this.states[i];this.queue.push(i),void 0===w&&(this.states[i]=0),c&&(this.scriptLoadedCallbacks[i]||(this.scriptLoadedCallbacks[i]=[]),this.scriptLoadedCallbacks[i].push({success:c,failure:y,scope:h||this}))},wi.prototype.load=function(i,c,h,y){return this.add(i,c,h,y)},wi.prototype.remove=function(i){delete this.states[i],delete this.scriptLoadedCallbacks[i]},wi.prototype.loadQueue=function(i,c,h){this.loadScripts(this.queue,i,c,h)},wi.prototype.loadScripts=function(i,c,h,y){function w(B,L){Hh(D.scriptLoadedCallbacks[L],function(K){$e(K[B])&&K[B].call(K.scope)}),D.scriptLoadedCallbacks[L]=void 0}var D=this,O=[];D.queueLoadedCallbacks.push({success:c,failure:y,scope:h||this});var P=function(){var B,L=Ks(i);i.length=0,Hh(L,function(K){2!==D.states[K]?3!==D.states[K]?1!==D.states[K]&&(D.states[K]=1,D.loading++,D.loadScript(K,function(){D.states[K]=2,D.loading--,w("success",K),P()},function(){D.states[K]=3,D.loading--,O.push(K),w("failure",K),P()})):w("failure",K):w("success",K)}),D.loading||(B=D.queueLoadedCallbacks.slice(0),D.queueLoadedCallbacks.length=0,Hh(B,function(K){0===O.length?$e(K.success)&&K.success.call(K.scope):$e(K.failure)&&K.failure.call(K.scope,O)}))};P()},wi.ScriptLoader=new wi,wi);function wi(i){void 0===i&&(i={}),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=0,this.settings=i}function hs(i){var c=i;return{get:function(){return c},set:function(h){c=h}}}function fi(){return fr(Sf,$s.get())}var Sf={},$s=hs("en"),es={getData:function(){return cr(Sf,function(i){return ir({},i)})},setCode:function(i){i&&$s.set(i)},getCode:function(){return $s.get()},add:function(i,c){var h=Sf[i];h||(Sf[i]=h={}),On(c,function(y,w){h[w.toLowerCase()]=y})},translate:function(i){function c(L){return $e(L)?Object.prototype.toString.call(L):P(L)?"":""+L}function h(L){var K=c(L);return fr(O,K.toLowerCase()).map(c).getOr(K)}function y(L){return L.replace(/{context:\w+}$/,"")}var w,D,O=fi().getOr({}),P=function(L){return""===L||null==L};if(P(i))return"";if(Ne(w=i)&&Do(w,"raw"))return c(i.raw);if(Ee(D=i)&&1<D.length){var B=i.slice(1);return y(h(i[0]).replace(/\{([0-9]+)\}/g,function(L,K){return Do(B,K)?c(B[K]):L}))}return y(h(i))},isRtl:function(){return fi().bind(function(i){return fr(i,"_dir")}).exists(function(i){return"rtl"===i})},hasCode:function(i){return Do(Sf,i)}},Js=function(){function i(L,K){Tn(Tr(P,function(q){return q.name===L&&q.state===K}),function(q){return q.callback()})}function c(L){return(O[L]?O[L].dependencies:void 0)||[]}function h(L,K){return"object"==typeof K?K:"string"==typeof L?{prefix:"",resource:K,suffix:""}:{prefix:L.prefix,resource:K,suffix:L.suffix}}function y(L,K,q){void 0===q&&(q="added"),Do(O,L)&&"added"===q||Do(D,L)&&"loaded"===q?K():P.push({name:L,state:q,callback:K})}var w=[],D={},O={},P=[],B=function(L,K,q,re,fe){var ve,be;D[L]||(0!==(ve="string"==typeof K?K:K.prefix+K.resource+K.suffix).indexOf("/")&&-1===ve.indexOf("://")&&(ve=Js.baseURL+"/"+ve),D[L]=ve.substring(0,ve.lastIndexOf("/")),be=function(){var Ce,Se,Oe;i(L,"loaded"),Ce=K,Se=q,Oe=re,Tn(c(L),function(ze){var ot=h(Ce,ze);B(ot.resource,ot,void 0,void 0)}),Se&&Se.call(Oe||tc)},O[L]?be():tc.ScriptLoader.add(ve,be,re,fe))};return{items:w,urls:D,lookup:O,_listeners:P,get:function(L){if(O[L])return O[L].instance},dependencies:c,requireLangPack:function(L,K){!1!==Js.languageLoad&&y(L,function(){var q=es.getCode();!q||K&&-1===(","+(K||"")+",").indexOf(","+q+",")||tc.ScriptLoader.add(D[L]+"/langs/"+q+".js")},"loaded")},add:function(L,K,q){var re=K;return w.push(re),O[L]={instance:re,dependencies:q},i(L,"added"),re},remove:function(L){delete D[L],delete O[L]},createUrl:h,addComponents:function(L,K){var q=D[L];Tn(K,function(re){tc.ScriptLoader.add(q+"/"+re)})},load:B,waitFor:y}};function rl(){var i,c,h=(i=U,c=hs(X.none()),{clear:function(){y(),c.set(X.none())},isSet:function(){return c.get().isSome()},get:function(){return c.get()},set:function(w){y(),c.set(X.some(w))}});function y(){return c.get().each(i)}return ir(ir({},h),{on:function(w){return h.get().each(w)}})}function rv(i,c){var h=null;return{cancel:function(){nt(h)||(clearTimeout(h),h=null)},throttle:function(){for(var y=[],w=0;w<arguments.length;w++)y[w]=arguments[w];nt(h)&&(h=setTimeout(function(){h=null,i.apply(null,y)},c))}}}function x0(i,c){function h(){nt(y)||(clearTimeout(y),y=null)}var y=null;return{cancel:h,throttle:function(){for(var w=[],D=0;D<arguments.length;D++)w[D]=arguments[D];h(),y=setTimeout(function(){y=null,i.apply(null,w)},c)}}}function ov(i,c){var h=ys(i,c);return void 0===h||""===h?[]:h.split(" ")}function Kf(i){return void 0!==i.dom.classList}function Tg(i,c){var h,y,w;Kf(i)?i.dom.classList.add(c):(y=c,w=ov(h=i,"class").concat([y]),pc(h,"class",w.join(" ")))}function Al(i,c){return Kf(i)&&i.dom.classList.contains(c)}function ol(i,c){return Sn(h=void 0===i?document:i.dom)?[]:ln(h.querySelectorAll(c),zt.fromDom);var h}function Wm(i,c){function h(P,B){return(L=P.dom)&&L.hasAttribute&&L.hasAttribute(B)?X.some(ys(P,B)):X.none();var L}var y=i.selection.getRng(),w=zt.fromDom(y.startContainer),D=zt.fromDom(i.getBody()),O=c.fold(function(){return"."+Hu()},function(P){return"["+il()+'="'+P+'"]'});return Jc(Mm(w,y.startOffset).getOr(w),O,function(P){return Fn(P,D)}).bind(function(P){return h(P,""+Fs()).bind(function(B){return h(P,""+il()).map(function(L){var K=su(i,B);return{uid:B,name:L,elements:K}})})})}function Mg(i){var c=(new Date).getTime();return i+"_"+Math.floor(1e9*Math.random())+ ++Il+String(c)}function Dg(i,c){var h,y,w=ru(i).dom,D=zt.fromDom(w.createDocumentFragment());wd(D,(h=c,(y=(w||document).createElement("div")).innerHTML=h,mr(zt.fromDom(y)))),d0(i),ss(i,D)}function rd(i,c){return zt.fromDom(i.dom.cloneNode(c))}function Wh(i){return rd(i,!1)}function Vd(i){return rd(i,!0)}function od(i,c,h){function y(D){for(var O;(O=w[D]())&&!br(O)&&!h(O););return X.from(O).filter(br)}void 0===h&&(h=ht);var w=new cs(i,c);return{current:function(){return X.from(w.current()).filter(br)},next:function(){return y("next")},prev:function(){return y("prev")},prev2:function(){return y("prev2")}}}function ob(i,c){var h=c||function(w){return i.isBlock(w)||Hi(w)||uo(w)},y=function(w,D,O,P){if(br(w)){var B=P(w,D,w.data);if(-1!==B)return X.some({container:w,offset:B})}return O().bind(function(L){return y(L.container,L.offset,O,P)})};return{backwards:function(w,D,O,P){var B=od(w,P,h);return y(w,D,function(){return B.prev().map(function(L){return{container:L,offset:L.length}})},O).getOrNull()},forwards:function(w,D,O,P){var B=od(w,P,h);return y(w,D,function(){return B.next().map(function(L){return{container:L,offset:0}})},O).getOrNull()}}}function Tu(i){return i?{left:gs(i.left),top:gs(i.top),bottom:gs(i.bottom),right:gs(i.right),width:gs(i.width),height:gs(i.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}}function Tc(i,c){return i=Tu(i),c||(i.left=i.left+i.width),i.right=i.left,i.width=0,i}function Hd(i,c,h){return 0<=i&&i<=Math.min(c.height,h.height)/2}function Ag(i,c){var h=Math.min(c.height/2,i.height/2);return i.bottom-h<c.top||!(i.top>c.bottom)&&Hd(c.top-i.bottom,i,c)}function $f(i,c){return i.top>c.bottom||!(i.bottom<c.top)&&Hd(c.bottom-i.top,i,c)}function z_(i,c,h){return c>=i.left&&c<=i.right&&h>=i.top&&h<=i.bottom}function iv(i){var c=i.startContainer,h=i.startOffset;return c.hasChildNodes()&&i.endOffset===h+1?c.childNodes[h]:null}function ts(i,c){if(Kr(i)&&i.hasChildNodes()){var h=i.childNodes;return h[(y=h.length-1,Math.min(Math.max(c,0),y))]}return i;var y}function av(i){return"string"==typeof i&&768<=i.charCodeAt(0)&&Ol.test(i)}function Ig(i){return"createRange"in i?i.createRange():Vo.DOM.createRng()}function sv(i){return i&&/[\r\n\t ]/.test(i)}function _0(i){return i.setStart&&i.setEnd}function w0(i){var c=i.startContainer,h=i.startOffset;if(sv(i.toString())&&Zx(c.parentNode)&&br(c)){var y=c.data;return sv(y[h-1])||sv(y[h+1])?1:void 0}}function Gm(i){return 0===i.left&&0===i.right&&0===i.top&&0===i.bottom}function Jf(i,c){var h=Tc(i,c);return h.width=1,h.right=h.left+1,h}Js.languageLoad=!0,Js.baseURL="",Js.PluginManager=Js(),Js.ThemeManager=Js();var uv=function(i,c){var h=[];return Tn(mr(i),function(y){h=(h=c(y)?h.concat([y]):h).concat(uv(y,c))}),h},Hu=Z("mce-annotation"),il=Z("data-mce-annotation"),Fs=Z("data-mce-annotation-uid"),su=function(i,c){return ol(zt.fromDom(i.getBody()),"["+Fs()+'="'+c+'"]')},Il=0,gs=Math.round,Ol=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),Go=Kr,Og=Ih,Gh=h0("display","block table"),lv=h0("float","left right"),Ln=function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];return function(h){for(var y=0;y<i.length;y++)if(!i[y](h))return!1;return!0}}(Go,Og,Fe(lv)),Zx=Fe(h0("white-space","pre pre-line pre-wrap")),Ta=br,ib=Hi,nc=Vo.nodeIndex,Um=function(i,c){if(!(c<0&&Kr(i)&&i.hasChildNodes()))return ts(i,c)},El=function(i){var c=i.getClientRects(),h=Tu(0<c.length?c[0]:i.getBoundingClientRect());return!_0(i)&&ib(i)&&Gm(h)?function(y){var w=y.ownerDocument,D=Ig(w),O=w.createTextNode(xc),P=y.parentNode;P.insertBefore(O,y),D.setStart(O,0),D.setEnd(O,1);var B=Tu(D.getBoundingClientRect());return P.removeChild(O),B}(i):Gm(h)&&_0(i)?function(y){var D=y.endContainer,O=y.startOffset,P=y.endOffset;if(y.startContainer===D&&br(D)&&0===O&&1===P){var B=y.cloneRange();return B.setEndAfter(D),El(B)}return null}(i):h},dn=function(i,c,h){function y(){return h=h||function(w){function D(re){var fe;0!==re.height&&(0<P.length&&re.left===(fe=P[P.length-1]).left&&re.top===fe.top&&re.bottom===fe.bottom&&re.right===fe.right||P.push(re))}function O(re,fe){var ve=Ig(re.ownerDocument);if(fe<re.data.length){if(av(re.data[fe]))return P;if(av(re.data[fe-1])&&(ve.setStart(re,fe),ve.setEnd(re,fe+1),!w0(ve)))return D(Jf(El(ve),!1)),P}0<fe&&(ve.setStart(re,fe-1),ve.setEnd(re,fe),w0(ve)||D(Jf(El(ve),!1))),fe<re.data.length&&(ve.setStart(re,fe),ve.setEnd(re,fe+1),w0(ve)||D(Jf(El(ve),!0)))}var P=[],B=w.container(),L=w.offset();if(Ta(B))return O(B,L),P;if(Go(B))if(w.isAtEnd()){var K=Um(B,L);Ta(K)&&O(K,K.data.length),Ln(K)&&!ib(K)&&D(Jf(El(K),!1))}else{if(K=Um(B,L),Ta(K)&&O(K,0),Ln(K)&&w.isAtEnd())return D(Jf(El(K),!1)),P;var q=Um(w.container(),w.offset()-1);Ln(q)&&!ib(q)&&(!Gh(q)&&!Gh(K)&&Ln(K)||D(Jf(El(q),!1))),Ln(K)&&D(Jf(El(K),!0))}return P}(dn(i,c))}return{container:Z(i),offset:Z(c),toRange:function(){var w=Ig(i.ownerDocument);return w.setStart(i,c),w.setEnd(i,c),w},getClientRects:y,isVisible:function(){return 0<y().length},isAtStart:function(){return Ta(i),0===c},isAtEnd:function(){return Ta(i)?c>=i.data.length:c>=i.childNodes.length},isEqual:function(w){return w&&i===w.container()&&c===w.offset()},getNode:function(w){return Um(i,w?c-1:c)}}};function jm(i,c){br(c)&&0===c.data.length&&i.remove(c)}function ab(i,c,h){var y,w,D,O,P,B,L;Mh(h)?(D=i,O=c,B=X.from((P=h).firstChild),L=X.from(P.lastChild),O.insertNode(P),B.each(function(K){return jm(D,K.previousSibling)}),L.each(function(K){return jm(D,K.nextSibling)})):(y=i,c.insertNode(w=h),jm(y,w.previousSibling),jm(y,w.nextSibling))}function Po(i){return function(c){return i===c}}function al(i){var c,h,y,w;return(id(i)?"text()":i.nodeName.toLowerCase())+"["+(y=za(h=eh(Qf(c=i)),Po(c),c),w=qi(h=h.slice(0,y+1),function(D,O,P){return id(O)&&id(h[P-1])&&D++,D},0),za(h=vo(h,mc([c.nodeName])),Po(c),c)-w+"]")}function Wd(i,c){var h,y,w,D=[],O=c.container(),P=c.offset();return id(O)?h=function(B,L){for(;(B=B.previousSibling)&&id(B);)L+=B.data.length;return L}(O,P):(P>=(y=O.childNodes).length?(h="after",P=y.length-1):h="before",O=y[P]),D.push(al(O)),w=vo(function(B,L){var K=[];for(L=L.parentNode;L!==B;L=L.parentNode)K.push(L);return K}(i,O),Fe(kh)),(D=D.concat(di(w,al))).reverse().join("/")+","+h}function Ai(i,c){if(!c)return null;var h=c.split(","),y=h[0].split("/"),w=1<h.length?h[1]:"before",D=qi(y,function(O,P){var B,L,K,q,re=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(P);return re?("text()"===re[1]&&(re[1]="#text"),B=O,L=re[1],K=parseInt(re[2],10),q=vo(q=eh(B),function(fe,ve){return!id(fe)||!id(q[ve-1])}),(q=vo(q,mc([L])))[K]):null},i);return D?id(D)?function(O,P){for(var B,L=O,K=0;id(L);){if(B=L.data.length,K<=P&&P<=K+B){O=L,P-=K;break}if(!id(L.nextSibling)){O=L,P=B;break}K+=B,L=L.nextSibling}return id(O)&&P>O.data.length&&(P=O.data.length),dn(O,P)}(D,parseInt(w,10)):(w="after"===w?fv(D)+1:fv(D),dn(D.parentNode,w)):null}function Ua(i,c,h,y,w){var D,O=y[w?"startContainer":"endContainer"],P=y[w?"startOffset":"endOffset"],B=[],L=0,K=i.getRoot();for(br(O)?B.push(h?function(q,re,fe){for(var ve=q(re.data.slice(0,fe)).length,be=re.previousSibling;be&&br(be);be=be.previousSibling)ve+=q(be.data).length;return ve}(c,O,P):P):(P>=(D=O.childNodes).length&&D.length&&(L=1,P=Math.max(0,D.length-1)),B.push(i.nodeIndex(D[P],h)+L));O&&O!==K;O=O.parentNode)B.push(i.nodeIndex(O,h));return B}function Eg(i,c,h){var y=0;return fn.each(i.select(c),function(w){if("all"!==w.getAttribute("data-mce-bogus"))return w!==h&&void y++}),y}function F_(i,c){var h,y=c?"start":"end",w=i[y+"Container"],D=i[y+"Offset"];Kr(w)&&"TR"===w.nodeName&&(w=(h=w.childNodes)[Math.min(c?D:D-1,h.length-1)])&&i["set"+(c?"Start":"End")](w,D=c?0:w.childNodes.length)}function qm(i){return F_(i,!0),F_(i,!1),i}function Xm(i,c){var h;return Kr(i)&&(i=ts(i,c),zg(i))?i:wr(i)?(h=(i=br(i)&&Ah(i)?i.parentNode:i).previousSibling,zg(h)||zg(h=i.nextSibling)?h:void 0):void 0}function Kx(i,c,h){var y=h.getNode(),w=y?y.nodeName:null,D=h.getRng();if(zg(y)||"IMG"===w)return{name:w,index:Eg(h.dom,w,y)};var O,P,B,L,K,q,re,fe=Xm((O=D).startContainer,O.startOffset)||Xm(O.endContainer,O.endOffset);return fe?{name:w=fe.tagName,index:Eg(h.dom,w,fe)}:(q=(B=h).dom,(re={}).start=Ua(q,P=i,L=c,K=D,!0),B.isCollapsed()||(re.end=Ua(q,P,L,K,!1)),Fx(K)&&(re.isFakeCaret=!0),re)}function S0(i,c,h){var y={"data-mce-type":"bookmark",id:c,style:"overflow:hidden;line-height:0px"};return h?i.create("span",y,"&#xFEFF;"):i.create("span",y)}function Mc(i,c){var h=i.dom,y=i.getRng(),w=h.uniqueId(),D=i.isCollapsed(),O=i.getNode(),P=O.nodeName;if("IMG"===P)return{name:P,index:Eg(h,P,O)};var B=qm(y.cloneRange());return D||(B.collapse(!1),ab(h,B,S0(h,w+"_end",c))),(y=qm(y)).collapse(!0),ab(h,y,S0(h,w+"_start",c)),i.moveToBookmark({id:w,keep:!0}),{id:w}}function sb(i,c,h){var y=i.getParam(c,h);return-1===y.indexOf("=")?y:fr(i.getParam(c,"","hash"),i.id).getOr(h)}function ub(i){return i.getParam("content_security_policy","")}function ya(i){if(i.getParam("force_p_newlines",!1))return"p";var c=i.getParam("forced_root_block","p");return!1===c?"":!0===c?"p":c}function $x(i){return i.getParam("forced_root_block_attrs",{})}function C0(i){return i.getParam("automatic_uploads",!0,"boolean")}function lb(i){return i.getParam("icons","","string")}function ei(i){return i.getParam("referrer_policy","","string")}function cv(i){return i.getParam("language","en","string")}function k0(i){return i.getParam("indent_use_margin",!1)}function Jx(i){var c=i.getParam("font_css",[]);return Ee(c)?c:ln(c.split(","),As)}function Ym(i){var c=i.getParam("object_resizing");return!1!==c&&!zr.iOS&&(Ae(c)?c:"table,img,figure.image,div,video,iframe")}function T0(i){return i.getParam("event_root")}function hi(i){return i.getParam("theme")}function nr(i){return!1!==i.getParam("inline_boundaries")}function Vs(i){return i.getParam("plugins","","string")}function Pg(i){var c=i.parentNode;c&&c.removeChild(i)}function M0(i){var c=mn(i);return{count:i.length-c.length,text:c}}function cb(i){for(var c;-1!==(c=i.data.lastIndexOf(Rs));)i.deleteData(c,1)}function Qx(i,c){return ad(i),c}function Ng(i,c){var h,y=c.container(),w=(-1===(h=en(ki(y.childNodes),i))?X.none():X.some(h)).map(function(D){return D<c.offset()?dn(y,c.offset()-1):c}).getOr(c);return ad(i),w}function Rg(i,c){return dn.isTextPosition(c)?(y=c,fb(h=i)&&y.container()===h?(O=M0((w=h).data.substr(0,(D=y).offset())),P=M0(w.data.substr(D.offset())),0<(O.text+P.text).length?(cb(w),dn(w,D.offset()-O.count)):D):Qx(h,y)):(B=i,((L=c).container()===B.parentNode?Ng:Qx)(B,L));var h,y,w,D,O,P,B,L}function e1(i,c,h){var y,w,D,O=Tc(c.getBoundingClientRect(),h),P="BODY"===i.tagName?(y=i.ownerDocument.documentElement,w=i.scrollLeft||y.scrollLeft,i.scrollTop||y.scrollTop):(D=i.getBoundingClientRect(),w=i.scrollLeft-D.left,i.scrollTop-D.top);O.left+=w,O.right+=w,O.top+=P,O.bottom+=P,O.width=1;var B=c.offsetWidth-c.clientWidth;return 0<B&&(h&&(B*=-1),O.left+=B,O.right+=B),O}function V_(){return O0.isIE()||O0.isEdge()||O0.isFirefox()}function Cf(i){return Ic(i)||yg(i)&&V_()}function D0(i,c){for(var h;h=i(c);)if(!$m(h))return h;return null}function Dc(i,c,h,y,w){var D=new cs(i,y),O=Fg(i)||$m(i);if(c<0){if(O&&h(i=D0(D.prev.bind(D),!0)))return i;for(;i=D0(D.prev.bind(D),w);)if(h(i))return i}if(0<c){if(O&&h(i=D0(D.next.bind(D),!0)))return i;for(;i=D0(D.next.bind(D),w);)if(h(i))return i}return null}function Gd(i,c){for(;i&&i!==c;){if(n1(i))return i;i=i.parentNode}return null}function rc(i,c,h){return Gd(i.container(),h)===Gd(c.container(),h)}function Lg(i,c){if(!c)return null;var h=c.container(),y=c.offset();return E0(h)?h.childNodes[y+i]:null}function H_(i,c){var h=c.ownerDocument.createRange();return i?(h.setStartBefore(c),h.setEndBefore(c)):(h.setStartAfter(c),h.setEndAfter(c)),h}function Ac(i,c,h){for(var y,w,D=i?"previousSibling":"nextSibling";h&&h!==c;){var O=h[D];if(hv(O)&&(O=O[D]),Fg(O)||W_(O)){if(w=h,Gd(O,y=c)===Gd(w,y))return O;break}if(ci(O))break;h=h.parentNode}return null}function Zm(i,c,h){var y,w=de(Ac,!0,c),D=de(Ac,!1,c),O=h.startContainer,P=h.startOffset;if(Ah(O)){var B=(O=E0(O)?O:O.parentNode).getAttribute("data-mce-caret");if("before"===B&&Cf(y=O.nextSibling))return Vg(y);if("after"===B&&Cf(y=O.previousSibling))return gv(y)}if(!h.collapsed)return h;if(br(O)){if(hv(O)){if(1===i){if(y=D(O))return Vg(y);if(y=w(O))return gv(y)}if(-1===i){if(y=w(O))return gv(y);if(y=D(O))return Vg(y)}return h}if(Rm(O)&&P>=O.data.length-1)return 1===i&&(y=D(O))?Vg(y):h;if(Ph(O)&&P<=1)return-1===i&&(y=w(O))?gv(y):h;if(P===O.data.length)return(y=D(O))?Vg(y):h;if(0===P)return(y=w(O))?gv(y):h}return h}function Uh(i,c){return X.from(Lg(i?0:-1,c)).filter(Fg)}function Bg(i,c,h){var y=Zm(i,c,h);return-1===i?dn.fromRangeStart(y):dn.fromRangeEnd(y)}function jh(i){return X.from(i.getNode()).map(zt.fromDom)}function Pa(i,c){for(;c=i(c);)if(c.isVisible())return c;return c}function A0(i,c){var h=rc(i,c);return!(h||!Hi(i.getNode()))||h}dn.fromRangeStart=function(i){return dn(i.startContainer,i.startOffset)},dn.fromRangeEnd=function(i){return dn(i.endContainer,i.endOffset)},dn.after=function(i){return dn(i.parentNode,nc(i)+1)},dn.before=function(i){return dn(i.parentNode,nc(i))},dn.isAbove=function(i,c){return wa(Gt(c.getClientRects()),jt(i.getClientRects()),Ag).getOr(!1)},dn.isBelow=function(i,c){return wa(jt(c.getClientRects()),Gt(i.getClientRects()),$f).getOr(!1)},dn.isAtStart=function(i){return!!i&&i.isAtStart()},dn.isAtEnd=function(i){return!!i&&i.isAtEnd()},dn.isTextPosition=function(i){return!!i&&br(i.container())},dn.isElementPosition=function(i){return!1===dn.isTextPosition(i)};var uu,I0,id=br,dv=kh,fv=Vo.nodeIndex,Qf=function(i){var c=i.parentNode;return dv(c)?Qf(c):c},eh=function(i){return i?qi(i.childNodes,function(c,h){return dv(h)&&"BR"!==h.nodeName?c=c.concat(eh(h)):c.push(h),c},[]):[]},zg=uo,Km=de(Kx,oe,!0),t1=Vo.DOM,Qs=Kr,fb=br,ad=function(i){Qs(i)&&wr(i)&&(Ns(i)?i.removeAttribute("data-mce-caret"):Pg(i)),fb(i)&&(cb(i),0===i.data.length&&Pg(i))},O0=aa().browser,Ud=uo,si=yl,hb=ls,Ic=function(i){return Ud(i)||si(i)},Fg=uo,W_=yl,n1=h0("display","block table table-cell table-caption list-item"),hv=wr,$m=Ah,E0=Kr,ci=Ih,Vg=de(H_,!0),gv=de(H_,!1);function gb(i,c){return i.hasChildNodes()&&c<i.childNodes.length?i.childNodes[c]:null}function P0(i,c){if(0<i){if(cu(c.previousSibling)&&!Pc(c.previousSibling))return dn.before(c);if(Pc(c))return dn(c,0)}if(i<0){if(cu(c.nextSibling)&&!Pc(c.nextSibling))return dn.after(c);if(Pc(c))return dn(c,c.data.length)}return i<0&&!rp(c)?dn.after(c):dn.before(c)}function Mu(i){return{next:function(c){return Nl(uu.Forwards,c,i)},prev:function(c){return Nl(uu.Backwards,c,i)}}}function Hg(i){return dn.isTextPosition(i)?0===i.offset():Ih(i.getNode())}function kf(i){if(dn.isTextPosition(i)){var c=i.container();return i.offset()===c.data.length}return Ih(i.getNode(!0))}function qh(i,c){return!dn.isTextPosition(i)&&!dn.isTextPosition(c)&&i.getNode()===c.getNode(!0)}function Tf(i,c,h){return sl(i,c,h).bind(function(y){return rc(h,y,c)&&(w=h,D=y,i?!qh(w,D)&&(dn.isTextPosition(O=w)||!Hi(O.getNode()))&&kf(w)&&Hg(D):!qh(D,w)&&Hg(w)&&kf(D))?sl(i,c,y):X.some(y);var w,D,O})}function Jm(i,c){var h,y,w,D,O,P=i?c.firstChild:c.lastChild;return br(P)?X.some(dn(P,i?0:P.data.length)):P?Ih(P)?X.some(i?dn.before(P):Hi(O=P)?dn.before(O):dn.after(O)):(y=c,w=P,D=(h=i)?dn.before(w):dn.after(w),sl(h,y,D)):X.none()}function sd(i){return Kr(i)&&i.id===ip}function Wg(i,c){for(;c&&c!==i;){if(c.id===ip)return c;c=c.parentNode}return null}function Xh(i){return fn.isArray(i.start)}function Pl(i,c){return Kr(c)&&i.isBlock(c)&&!c.innerHTML&&!zr.ie&&(c.innerHTML='<br data-mce-bogus="1" />'),c}function Du(i,c,h){return!1===c.hasChildNodes()&&Wg(i,c)&&(w=h,D=(y=c).ownerDocument.createTextNode(Rs),y.appendChild(D),w.setStart(D,0),w.setEnd(D,0),1);var y,w,D}function Yh(i,c,h,y){var w,D,O,P,B=h[c?"start":"end"],L=i.getRoot();if(B){for(O=B[0],D=L,w=B.length-1;1<=w;w--){if(P=D.childNodes,Du(L,D,y))return 1;if(B[w]>P.length-1)return Du(L,D,y)||function(K){return Kh(D).fold(ht,function(q){return K.setStart(q.container(),q.offset()),K.setEnd(q.container(),q.offset()),!0})}(y);D=P[B[w]]}3===D.nodeType&&(O=Math.min(B[0],D.nodeValue.length)),1===D.nodeType&&(O=Math.min(B[0],D.childNodes.length)),c?y.setStart(D,O):y.setEnd(D,O)}return 1}function mv(i){return br(i)&&0<i.data.length}function r1(i,c,h){var y,w,D,O,P,B,L=i.get(h.id+"_"+c),K=h.keep;if(L){if(y=L.parentNode,w="start"===c?K?L.hasChildNodes()?(y=L.firstChild,1):mv(L.nextSibling)?(y=L.nextSibling,0):mv(L.previousSibling)?(y=L.previousSibling,L.previousSibling.data.length):(y=L.parentNode,i.nodeIndex(L)+1):i.nodeIndex(L):K?L.hasChildNodes()?(y=L.firstChild,1):mv(L.previousSibling)?(y=L.previousSibling,L.previousSibling.data.length):(y=L.parentNode,i.nodeIndex(L)):i.nodeIndex(L),P=y,B=w,!K){for(O=L.previousSibling,D=L.nextSibling,fn.each(fn.grep(L.childNodes),function(q){br(q)&&(q.nodeValue=q.nodeValue.replace(/\uFEFF/g,""))});L=i.get(h.id+"_"+c);)i.remove(L,!0);O&&D&&O.nodeType===D.nodeType&&br(O)&&!zr.opera&&(w=O.nodeValue.length,O.appendData(D.nodeValue),i.remove(D),P=O,B=w)}return X.some(dn(P,B))}return X.none()}function mb(i,c){(function(h,y){var w,D,O,P,B,L,K,q,re,fe,ve,be,Ce=h.dom;if(y){if(Xh(y))return ve=y,be=(fe=Ce).createRng(),Yh(fe,!0,ve,be)&&Yh(fe,!1,ve,be)?X.some(be):X.none();if(Ae(y.start))return X.some((K=y,q=(L=Ce).createRng(),re=Ai(L.getRoot(),K.start),q.setStart(re.container(),re.offset()),re=Ai(L.getRoot(),K.end),q.setEnd(re.container(),re.offset()),q));if(Do(y,"id"))return wa(B=r1(O=Ce,"start",P=y),r1(O,"end",P).or(B),function(Se,Oe){var ze=O.createRng();return ze.setStart(Pl(O,Se.container()),Se.offset()),ze.setEnd(Pl(O,Oe.container()),Oe.offset()),ze});if(Do(y,"name"))return X.from((w=Ce).select((D=y).name)[D.index]).map(function(Se){var Oe=w.createRng();return Oe.selectNode(Se),Oe});if(Do(y,"rng"))return X.some(y.rng)}return X.none()})(i,c).each(function(h){i.setRng(h)})}function Oc(i){return Kr(i)&&"SPAN"===i.tagName&&"bookmark"===i.getAttribute("data-mce-type")}function Gg(i){return""!==i&&-1!==" \f\n\r\t\v".indexOf(i)}function ns(i){return!Gg(i)&&!nh(i)}function Ug(i){return i.nodeType}function ja(i,c,h){var y,w=h.startOffset,D=h.startContainer;if((D!==h.endContainer||!(y=D.childNodes[w])||!/^(IMG)$/.test(y.nodeName))&&Kr(D)){var O=D.childNodes,P=void 0;w<O.length?P=new cs(D=O[w],i.getParent(D,i.isBlock)):(P=new cs(D=O[O.length-1],i.getParent(D,i.isBlock))).next(!0);for(var B=P.current();B;B=P.next())if(br(B)&&!Ma(B))return h.setStart(B,0),c.setRng(h),0}}function pv(i,c,h){if(i){var y=c?"nextSibling":"previousSibling";for(i=h?i:i[y];i;i=i[y])if(Kr(i)||!Ma(i))return i}}function N0(i,c){return Ug(c)&&(c=c.nodeName),!!i.schema.getTextBlockElements()[c.toLowerCase()]}function Qm(i,c,h){return i.schema.isValidChild(c,h)}function Mf(i,c){return $e(i)?i=i(c):F(c)&&(i=i.replace(/%(\w+)/g,function(h,y){return c[y]||h})),i}function R0(i,c){return i=""+((i=i||"").nodeName||i),c=""+((c=c||"").nodeName||c),i.toLowerCase()===c.toLowerCase()}function vv(i,c,h){return"color"!==h&&"backgroundColor"!==h||(c=i.toHex(c)),"fontWeight"===h&&700===c&&(c="bold"),""+("fontFamily"===h?c.replace(/[\'\"]/g,"").replace(/,\s+/g,","):c)}function lu(i,c,h){return vv(i,i.getStyle(c,h),h)}function L0(i,c){var h;return i.getParent(c,function(y){return(h=i.getStyle(y,"text-decoration"))&&"none"!==h}),h}function th(i,c,h){return i.getParents(c,h,i.getRoot())}function jd(i){return Eo(i,"block")}function Bo(i){return Eo(i,"selector")}function ca(i){return Eo(i,"inline")}function o1(i){return Bo(i)&&!1!==i.expand&&!ca(i)}function qd(i,c){for(var h=c;h;){if(Kr(h)&&i.getContentEditable(h))return"false"===i.getContentEditable(h)?h:c;h=h.parentNode}return c}function yv(i,c,h,y){for(var w=c.data,D=h;i?0<=D:D<w.length;i?D--:D++)if(y(w.charAt(D)))return i?D+1:D;return-1}function i1(i,c,h){return yv(i,c,h,function(y){return nh(y)||Gg(y)})}function a1(i,c,h){return yv(i,c,h,ns)}function Wu(i,c,h,y,w,D){function O(L,K,q){var re=ob(i);return X.from((w?re.backwards:re.forwards)(L,K,function(ve,be){return ap(ve.parentNode)?-1:q(w,P=ve,be)},B))}var P,B=i.getParent(h,i.isBlock)||c;return O(h,y,i1).bind(function(L){return D?O(L.container,L.offset+(w?-1:0),a1):X.some(L)}).orThunk(function(){return P?X.some({container:P,offset:w?0:P.length}):X.none()})}function bv(i,c,h,y,w){br(y)&&qt(y.data)&&y[w]&&(y=y[w]);for(var D=vb(i,y),O=0;O<D.length;O++)for(var P=0;P<c.length;P++){var B=c[P];if((!F(B.collapsed)||B.collapsed===h.collapsed)&&Bo(B)&&i.is(D[O],B.selector))return D[O]}return y}function ms(i,c,h,y){var w,D=h,O=i.dom,P=O.getRoot(),B=c[0];if((D=jd(B)?B.wrapper?null:O.getParent(h,B.block,P):D)||(w=O.getParent(h,"LI,TD,TH"),D=O.getParent(br(h)?h.parentNode:h,function(L){return L!==P&&yb(i,L)},w)),!(D=D&&jd(B)&&B.wrapper&&vb(O,D,"ul,ol").reverse()[0]||D))for(D=h;D[y]&&!O.isBlock(D[y])&&!R0(D=D[y],"br"););return D||h}function qa(i,c,h,y,w){var D,O=h,P=w?"previousSibling":"nextSibling",B=i.getRoot();if(br(h)&&!Gu(h)&&(w?0<y:y<h.data.length))return h;for(;;){if(!c[0].block_expand&&i.isBlock(O))return O;for(var L=O[P];L;L=L[P]){var K=br(L)&&!wv(i,B,L,P);if(!ap(L)&&(!Hi(D=L)||!D.getAttribute("data-mce-bogus")||D.nextSibling)&&!Gu(L,K))return O}if(O===B||O.parentNode===B){h=O;break}O=O.parentNode}return h}function Xa(i){return ap(i.parentNode)||ap(i)}function ud(i,c,h,y){void 0===y&&(y=!1);var w=c.startContainer,D=c.startOffset,O=c.endContainer,P=c.endOffset,B=i.dom,L=h[0];return Kr(w)&&w.hasChildNodes()&&(w=ts(w,D),br(w)&&(D=0)),Kr(O)&&O.hasChildNodes()&&(O=ts(O,c.collapsed?P:P-1),br(O)&&(P=O.nodeValue.length)),w=qd(B,w),O=qd(B,O),Xa(w)&&(w=ap(w)?w:w.parentNode,br(w=c.collapsed?w.previousSibling||w:w.nextSibling||w)&&(D=c.collapsed?w.length:0)),Xa(O)&&(O=ap(O)?O:O.parentNode,br(O=c.collapsed?O.nextSibling||O:O.previousSibling||O)&&(P=c.collapsed?0:O.length)),c.collapsed&&(Wu(B,i.getBody(),w,D,!0,y).each(function(K){w=K.container,D=K.offset}),Wu(B,i.getBody(),O,P,!1,y).each(function(K){O=K.container,P=K.offset})),(ca(L)||L.block_expand)&&(ca(L)&&br(w)&&0!==D||(w=qa(B,h,w,D,!0)),ca(L)&&br(O)&&P!==O.nodeValue.length||(O=qa(B,h,O,P,!1))),o1(L)&&(w=bv(B,h,c,w,"previousSibling"),O=bv(B,h,c,O,"nextSibling")),(jd(L)||Bo(L))&&(w=ms(i,h,w,"previousSibling"),O=ms(i,h,O,"nextSibling"),jd(L)&&(B.isBlock(w)||(w=qa(B,h,w,D,!0)),B.isBlock(O)||(O=qa(B,h,O,P,!1)))),Kr(w)&&(D=B.nodeIndex(w),w=w.parentNode),Kr(O)&&(P=B.nodeIndex(O)+1,O=O.parentNode),{startContainer:w,startOffset:D,endContainer:O,endOffset:P}}function z0(i,c,h){function y(be){var Ce=be[0];br(Ce)&&Ce===B&&P>=Ce.data.length&&be.splice(0,1);var Se=be[be.length-1];return 0===L&&0<be.length&&Se===K&&br(Se)&&be.splice(be.length-1,1),be}function w(be,Ce,Se){for(var Oe=[];be&&be!==Se;be=be[Ce])Oe.push(be);return Oe}function D(be,Ce){return i.getParent(be,function(Se){return Se.parentNode===Ce},Ce)}function O(be,Ce,Se){for(var Oe=Se?"nextSibling":"previousSibling",ze=be;ze&&ze!==Ce;ze=ot){var ot=ze.parentNode,yt=w(ze===be?ze:ze[Oe],Oe);yt.length&&(Se||yt.reverse(),h(y(yt)))}}var P=c.startOffset,B=ts(c.startContainer,P),L=c.endOffset,K=ts(c.endContainer,L-1);if(B===K)return h(y([B]));var q=i.findCommonAncestor(B,K);if(i.isChildOf(B,K))return O(B,q,!0);if(i.isChildOf(K,B))return O(K,q);var re=D(B,q)||B,fe=D(K,q)||K;O(B,re,!0);var ve=w(re===B?re:re.nextSibling,"nextSibling",fe===K?fe.nextSibling:fe);ve.length&&h(y(ve)),O(K,fe)}function F0(i){var c=[];if(i)for(var h=0;h<i.rangeCount;h++)c.push(i.getRangeAt(h));return c}function G_(i,c){var h=ol(c,"td[data-mce-selected],th[data-mce-selected]");return 0<h.length?h:Tr(Qi(i,function(y){var w=iv(y);return w?[zt.fromDom(w)]:[]}),kr)}function xv(i){return G_(F0(i.selection.getSel()),zt.fromDom(i.getBody()))}function ld(i,c){return xs(i,"table",c)}function Zh(i,c){return wa((w=c.startContainer,D=c.startOffset,br(w)?0===D?X.some(zt.fromDom(w)):X.none():X.from(w.childNodes[D]).map(zt.fromDom)),(h=c.endContainer,y=c.endOffset,br(h)?y===h.data.length?X.some(zt.fromDom(h)):X.none():X.from(h.childNodes[y-1]).map(zt.fromDom)),function(O,P){var B=rr(u1(i),de(Fn,O)),L=rr(U0(i),de(Fn,P));return B.isSome()&&L.isSome()}).getOr(!1);var h,y,w,D}function ep(i,c,h,y){var w=h,D=new cs(h,w),O=qr(i.schema.getMoveCaretBeforeOnEnterElements(),function(P,B){return!Ot(["td","th","table"],B.toLowerCase())});do{if(br(h)&&0!==fn.trim(h.nodeValue).length)return y?c.setStart(h,0):c.setEnd(h,h.nodeValue.length),0;if(O[h.nodeName])return y?c.setStartBefore(h):"BR"===h.nodeName?c.setEndBefore(h):c.setEndAfter(h),0}while(h=y?D.next():D.prev());"BODY"===w.nodeName&&(y?c.setStart(w,0):c.setEnd(w,w.childNodes.length))}function V0(i){var c=i.selection.getSel();return c&&0<c.rangeCount}function jg(i,c){var h=xv(i);0<h.length?Tn(h,function(y){var w=y.dom,D=i.dom.createRng();D.setStartBefore(w),D.setEndAfter(w),c(D,!0)}):c(i.selection.getRng(),!1)}function H0(i,c,h){var y=Mc(i,c);h(y),i.moveToBookmark(y)}function Ao(i){return rh.get(i)}function cd(i,c,h,y){var w=c.uid,D=void 0===w?Mg("mce-annotation"):w,O=function(fe,ve){var be={};for(Se in fe)Object.prototype.hasOwnProperty.call(fe,Se)&&ve.indexOf(Se)<0&&(be[Se]=fe[Se]);if(null!=fe&&"function"==typeof Object.getOwnPropertySymbols)for(var Ce=0,Se=Object.getOwnPropertySymbols(fe);Ce<Se.length;Ce++)ve.indexOf(Se[Ce])<0&&Object.prototype.propertyIsEnumerable.call(fe,Se[Ce])&&(be[Se[Ce]]=fe[Se[Ce]]);return be}(c,["uid"]),P=zt.fromTag("span",i);Tg(P,Hu()),pc(P,""+Fs(),D),pc(P,""+il(),h);var B,L=y(D,O),K=L.attributes,q=L.classes,re=void 0===q?[]:q;return Im(P,void 0===K?{}:K),B=P,Tn(re,function(fe){Tg(B,fe)}),P}function pb(i){var c,h,y,w=(c={},{register:function(O,P){c[O]={name:O,settings:P}},lookup:function(O){return fr(c,O).map(function(P){return P.settings})}});y=w,(h=i).on("init",function(){h.serializer.addNodeFilter("span",function(O){Tn(O,function(P){X.from(P.attr(il())).bind(y.lookup).each(function(B){!1===B.persistent&&P.unwrap()})})})});var D=function yi(i){function c(){return{listeners:[],previous:rl()}}function h(O,P){y(O,function(B){return P(B),B})}function y(O,P){var B=w.get(),L=P(fr(B,O).getOrThunk(c));B[O]=L,w.set(B)}var w=hs({}),D=x0(function(){var O=w.get();Tn(Pi(ur(O)),function(P){y(P,function(B){var L=B.previous.get();return Wm(i,X.some(P)).fold(function(){var K;L.isSome()&&(h(K=P,function(q){Tn(q.listeners,function(re){return re(!1,K)})}),B.previous.clear())},function(K){var q,re,fe,ve=K.uid,be=K.name,Ce=K.elements;Ul(L,ve)||(re=ve,fe=Ce,h(q=be,function(Se){Tn(Se.listeners,function(Oe){return Oe(!0,q,{uid:re,nodes:ln(fe,function(ze){return ze.dom})})})}),B.previous.set(ve))}),{previous:B.previous,listeners:B.listeners}})})},30);return i.on("remove",function(){D.cancel()}),i.on("NodeChange",function(){D.throttle()}),{addListener:function(O,P){y(O,function(B){return{previous:B.previous,listeners:B.listeners.concat([P])}})}}}(i);return{register:function(O,P){w.register(O,P)},annotate:function(O,P){w.lookup(O).each(function(B){var L,K,q,re;K=O,q=B,re=P,(L=i).undoManager.transact(function(){var fe,ve,be,Ce,Se=L.selection,Oe=Se.getRng(),ze=0<xv(L).length;Oe.collapsed&&!ze&&(be=ud(fe=L,ve=Oe,[{inline:"span"}]),ve.setStart(be.startContainer,be.startOffset),ve.setEnd(be.endContainer,be.endOffset),fe.selection.setRng(ve)),Se.getRng().collapsed&&!ze?(Dg(Ce=cd(L.getDoc(),re,K,q.decorate),xc),Se.getRng().insertNode(Ce.dom),Se.select(Ce.dom)):H0(Se,!1,function(){jg(L,function(ot){!function tp(i,c,h,y,w){function D(){L.clear()}function O(q){Tn(q,K)}var P=[],B=cd(i.getDoc(),w,h,y),L=rl(),K=function(q){var re,fe,ve,be,Se;switch(ve=i,Se=va(be=q),Ru(be).fold(function(){return"skipping"},function(Oe){return"br"===Se||ta(ot=be)&&Ao(ot)===Rs?"valid":vl(ze=be)&&Al(ze,Hu())?"existing":sd(be.dom)?"caret":Qm(ve,"span",Se)&&Qm(ve,va(Oe),"span")?"valid":"invalid-child";var ze,ot})){case"invalid-child":D(),O(mr(q)),D();break;case"valid":Ps(re=q,fe=L.get().getOrThunk(function(){var Oe=Wh(B);return P.push(Oe),L.set(Oe),Oe})),ss(fe,re)}};z0(i.dom,c,function(q){D(),O(ln(q,zt.fromDom))})}(L,ot,K,q.decorate,re)})})})})},annotationChanged:function(O,P){D.addListener(O,P)},remove:function(O){Wm(i,X.some(O)).each(function(P){Tn(P.elements,Ch)})},getAll:function(O){var P,B,L;return cr((P=O,B=ol(zt.fromDom(i.getBody()),"["+il()+'="'+P+'"]'),L={},Tn(B,function(K){var q=ys(K,Fs()),re=fr(L,q).getOr([]);L[q]=re.concat([K])}),L),function(K){return ln(K,function(q){return q.dom})})}}}function fo(i){return{getBookmark:de(U_,i),moveToBookmark:de(mb,i)}}function s1(i){return Sr(i)||!!pf(c=i)&&!0!==Or(ki(c.getElementsByTagName("*")),function(h,y){return h||Dd(y)},!1);var c}(I0=uu=uu||{})[I0.Backwards=-1]="Backwards",I0[I0.Forwards=1]="Forwards";var Ec,W0,G0=uo,Pc=br,ks=Kr,rp=Hi,cu=Ih,_v=m0,Nl=function(i,c,h){var y,w,D;if(!ks(h)||!c)return null;if(c.isEqual(dn.after(h))&&h.lastChild){if(D=dn.after(h.lastChild),i<0&&cu(h.lastChild)&&ks(h.lastChild))return rp(h.lastChild)?dn.before(h.lastChild):D}else D=c;var O,P,B,L=D.container(),K=D.offset();if(Pc(L)){if(i<0&&0<K)return dn(L,--K);if(0<i&&K<L.length)return dn(L,++K);y=L}else{if(i<0&&0<K&&(q=gb(L,K-1),cu(q)))return!s1(q)&&(w=Dc(q,i,_v,q))?Pc(w)?dn(w,w.data.length):dn.after(w):Pc(q)?dn(q,q.data.length):dn.before(q);if(0<i&&K<L.childNodes.length&&(q=gb(L,K),cu(q)))return rp(q)?(O=h,(B=(P=q).nextSibling)&&cu(B)?Pc(B)?dn(B,0):dn.before(B):Nl(uu.Forwards,dn.after(P),O)):!s1(q)&&(w=Dc(q,i,_v,q))?Pc(w)?dn(w,0):dn.before(w):Pc(q)?dn(q,0):dn.after(q);y=q||D.getNode()}if((0<i&&D.isAtEnd()||i<0&&D.isAtStart())&&(y=Dc(y,i,Jt,h,!0),_v(y,h)))return P0(i,y);var q=Dc(y,i,_v,h),re=ma(Tr(function(fe,ve){for(var be=[];fe&&fe!==ve;)be.push(fe),fe=fe.parentNode;return be}(L,h),G0));return!re||q&&re.contains(q)?q?P0(i,q):null:0<i?dn.after(re):dn.before(re)},sl=function(i,c,h){var y=Mu(c);return X.from(i?y.next(h):y.prev(h))},op=function(i,c,h,y){return Tf(i,c,h).bind(function(w){return y(w)?op(i,c,w,y):X.some(w)})},oc=de(sl,!0),Xd=de(sl,!1),Rl=de(Jm,!0),Kh=de(Jm,!1),ip="_mce_caret",U_=function(i,c,h){return 2===c?Kx(mn,h,i):3===c?(w=(y=i).getRng(),{start:Wd(y.dom.getRoot(),dn.fromRangeStart(w)),end:Wd(y.dom.getRoot(),dn.fromRangeEnd(w))}):c?{rng:i.getRng()}:Mc(i,!1);var y,w},nh=function(i){return"\xa0"===i},Ma=function(i,c){return void 0===c&&(c=!1),!(!F(i)||!br(i))&&_s(c?i.data.replace(/ /g,"\xa0"):i.data)},ap=Oc,vb=th,Gu=Ma,yb=N0,wv=function(i,c,h,y){var w=h.parentNode;return!F(h[y])&&(!(w!==c&&!ye(w)&&!i.isBlock(w))||wv(i,c,w,y))},u1=function(i){return c0(i).fold(Z([i]),function(c){return[i].concat(u1(c))})},U0=function(i){return Kc(i).fold(Z([i]),function(c){return"br"===va(c)?Ku(c).map(function(h){return[i].concat(U0(h))}).getOr([]):[i].concat(U0(c))})},rh=(Ec=ta,{get:function(i){if(!Ec(i))throw new Error("Can only get text value of a text node");return W0(i).getOr("")},getOption:W0=function(i){return Ec(i)?X.from(i.dom.nodeValue):X.none()},set:function(i,c){if(!Ec(i))throw new Error("Can only set raw text value of a text node");i.dom.nodeValue=c}});function qg(i,c){for(;c&&c!==i;){if(vc(c)||uo(c))return c;c=c.parentNode}return null}function po(i,c,h){if(!h.collapsed){if(zr.browser.isIE()&&h.startOffset===h.endOffset-1&&h.startContainer===h.endContainer){var y=h.startContainer.childNodes[h.startOffset];if(Kr(y))return Gn(y.getClientRects(),function(w){return z_(w,i,c)})}return Gn(h.getClientRects(),function(w){return z_(w,i,c)})}}function $h(i,c,h){return i.fire(c,h)}function Xg(i,c,h,y){return i.fire("FormatApply",{format:c,node:h,vars:y})}function Hs(i,c,h,y){return i.fire("FormatRemove",{format:c,node:h,vars:y})}function bb(i,c){function h(vn){return vn&&("IMG"===vn.nodeName||c.dom.is(vn,"figure.image"))}function y(vn){return yl(vn)||bt.hasClass(vn,"mce-preview-object")}function w(vn){var Zn=vn.target;!function(Bn,vr){if("longpress"!==Bn.type&&0!==Bn.type.indexOf("touch"))return h(Bn.target)&&!po(Bn.clientX,Bn.clientY,vr);var hr=Bn.touches[0];return h(Bn.target)&&!po(hr.clientX,hr.clientY,vr)}(vn,c.selection.getRng())||vn.isDefaultPrevented()||c.selection.select(Zn)}function D(vn){return bt.is(vn,"figure.image")?[vn.querySelector("img")]:bt.hasClass(vn,"mce-preview-object")&&F(vn.firstElementChild)?[vn,vn.firstElementChild]:[vn]}function O(vn){var Zn=Ym(c);return!!Zn&&"false"!==vn.getAttribute("data-mce-resize")&&vn!==c.getBody()&&(bt.hasClass(vn,"mce-preview-object")?$n(zt.fromDom(vn.firstElementChild),Zn):$n(zt.fromDom(vn),Zn))}function P(vn,Zn,Bn){F(Bn)&&Tn(D(vn),function(vr){vr.style[Zn]||!c.schema.isValid(vr.nodeName.toLowerCase(),Zn)?bt.setStyle(vr,Zn,Bn):bt.setAttrib(vr,Zn,""+Bn)})}function B(vn,Zn,Bn){P(vn,"width",Zn),P(vn,"height",Bn)}function L(vn){var Zn,Bn,kt=vn.screenX-Oe,cn=vn.screenY-ze;it=(it=kt*Ce[2]+ot)<5?5:it,Nt=(Nt=cn*Ce[3]+yt)<5?5:Nt,((h(fe)||y(fe))&&!1!==c.getParam("resize_img_proportional",!0,"boolean")?!Dr.modifierPressed(vn):Dr.modifierPressed(vn))&&(Nn(kt)>Nn(cn)?(Nt=jn(it*Ve),it=jn(Nt/Ve)):(it=jn(Nt/Ve),Nt=jn(it*Ve))),B(ve,it,Nt),bt.setStyles(be,{left:Zn=0<(Zn=Ce.startPos.x+kt)?Zn:0,top:Bn=0<(Bn=Ce.startPos.y+cn)?Bn:0,display:"block"}),be.innerHTML=it+" &times; "+Nt,Ce[2]<0&&ve.clientWidth<=it&&bt.setStyle(ve,"left",void 0+(ot-it)),Ce[3]<0&&ve.clientHeight<=Nt&&bt.setStyle(ve,"top",void 0+(yt-Nt)),(kt=In.scrollWidth-Ht)+(cn=In.scrollHeight-on)!=0&&bt.setStyles(be,{left:Zn-kt,top:Bn-cn}),Je||(c.fire("ObjectResizeStart",{target:fe,width:ot,height:yt,origin:"corner-"+Ce.name}),Je=!0)}function K(vn){function Zn(vr,hr){if(vr)do{if(vr===hr)return 1}while(vr=vr.parentNode)}var Bn;Je||c.removed||(St(bt.select("img[data-mce-selected],hr[data-mce-selected]"),function(vr){vr.removeAttribute($t)}),Bn="mousedown"===vn.type?vn.target:i.getNode(),Zn(Bn=bt.$(Bn).closest("table,img,figure.image,hr,video,span.mce-preview-object")[0],In)&&(re(),Zn(i.getStart(!0),Bn)&&Zn(i.getEnd(!0),Bn))?Un(Bn):Hn())}function q(vn){return AS(qg(c.getBody(),vn))}function re(){try{c.getDoc().execCommand("enableObjectResizing",!1,"false")}catch{}}var fe,ve,be,Ce,Se,Oe,ze,ot,yt,Ve,Je,it,Nt,Ht,on,$t="data-mce-selected",bt=c.dom,St=fn.each,At=c.getDoc(),Yt=document,Nn=Math.abs,jn=Math.round,In=c.getBody(),Wn={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},Pn=function(){var hr=Je;Je=!1,hr&&(P(fe,"width",it),P(fe,"height",Nt)),bt.unbind(At,"mousemove",L),bt.unbind(At,"mouseup",Pn),Yt!==At&&(bt.unbind(Yt,"mousemove",L),bt.unbind(Yt,"mouseup",Pn)),bt.remove(ve),bt.remove(be),bt.remove(Se),Un(fe),hr&&(c.fire("ObjectResized",{target:fe,width:it,height:Nt,origin:"corner-"+Ce.name}),bt.setAttrib(fe,"style",bt.getAttrib(fe,"style"))),c.nodeChanged()},Un=function(vn){lr();var Zn=bt.getPos(vn,In),Bn=Zn.x,vr=Zn.y,hr=vn.getBoundingClientRect(),To=hr.width||hr.right-hr.left,st=hr.height||hr.bottom-hr.top;fe!==vn&&(Hn(),fe=vn,it=Nt=0);var kt=c.fire("ObjectSelected",{target:vn}),cn=bt.getAttrib(fe,$t,"1");O(vn)&&!kt.isDefaultPrevented()?St(Wn,function(xn,gn){var Xn=bt.get("mceResizeHandle"+gn);Xn&&bt.remove(Xn),Xn=bt.add(In,"div",{id:"mceResizeHandle"+gn,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+gn+"-resize; margin:0; padding:0"}),11===zr.ie&&(Xn.contentEditable=!1),bt.bind(Xn,"mousedown",function(Vr){var Zr,zi,ro;Vr.stopImmediatePropagation(),Vr.preventDefault(),Zr=Vr,ro=D(fe)[0],Oe=Zr.screenX,ze=Zr.screenY,Ve=(yt=ro.clientHeight)/(ot=ro.clientWidth),(Ce=xn).name=gn,Ce.startPos={x:To*xn[0]+Bn,y:st*xn[1]+vr},Ht=In.scrollWidth,on=In.scrollHeight,Se=bt.add(In,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),bt.setStyles(Se,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),ve=y(zi=fe)?bt.create("img",{src:zr.transparentSrc}):zi.cloneNode(!0),bt.addClass(ve,"mce-clonedresizable"),bt.setAttrib(ve,"data-mce-bogus","all"),ve.contentEditable="false",bt.setStyles(ve,{left:Bn,top:vr,margin:0}),B(ve,To,st),ve.removeAttribute($t),In.appendChild(ve),bt.bind(At,"mousemove",L),bt.bind(At,"mouseup",Pn),Yt!==At&&(bt.bind(Yt,"mousemove",L),bt.bind(Yt,"mouseup",Pn)),be=bt.add(In,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},ot+" &times; "+yt)}),xn.elm=Xn,bt.setStyles(Xn,{left:To*xn[0]+Bn-Xn.offsetWidth/2,top:st*xn[1]+vr-Xn.offsetHeight/2})}):Hn(),bt.getAttrib(fe,$t)||fe.setAttribute($t,cn)},Hn=function(){lr(),fe&&fe.removeAttribute($t),On(Wn,function(vn,Zn){var Bn=bt.get("mceResizeHandle"+Zn);Bn&&(bt.unbind(Bn),bt.remove(Bn))})},lr=function(){On(Wn,function(vn){vn.elm&&(bt.unbind(vn.elm),delete vn.elm)})};return c.on("init",function(){var vn;re(),(zr.browser.isIE()||zr.browser.isEdge())&&(c.on("mousedown click",function(Bn){var vr=Bn.target,hr=vr.nodeName;Je||!/^(TABLE|IMG|HR)$/.test(hr)||q(vr)||(2!==Bn.button&&c.selection.select(vr,"TABLE"===hr),"mousedown"===Bn.type&&c.nodeChanged())}),bt.bind(In,"mscontrolselect",vn=function(Bn){function vr(hr){It.setEditorTimeout(c,function(){return c.selection.select(hr)})}if(q(Bn.target)||yl(Bn.target))return Bn.preventDefault(),void vr(Bn.target);/^(TABLE|IMG|HR)$/.test(Bn.target.nodeName)&&(Bn.preventDefault(),"IMG"===Bn.target.tagName&&vr(Bn.target))}),c.on("remove",function(){return bt.unbind(In,"mscontrolselect",vn)}));var Zn=It.throttle(function(Bn){c.composing||K(Bn)});c.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",Zn),c.on("keyup compositionend",function(Bn){fe&&"TABLE"===fe.nodeName&&Zn(Bn)}),c.on("hide blur",Hn),c.on("contextmenu longpress",w,!0)}),c.on("remove",lr),{isResizable:O,showResizeRect:Un,hideResizeRect:Hn,updateResizeRect:K,destroy:function(){fe=ve=Se=null}}}function l1(i){return vc(i)||uo(i)}function xb(i,c,h){var y,w,D,O,P,B=h;if(B.caretPositionFromPoint)(w=B.caretPositionFromPoint(i,c))&&((y=h.createRange()).setStart(w.offsetNode,w.offset),y.collapse(!0));else if(B.caretRangeFromPoint)y=B.caretRangeFromPoint(i,c);else if(B.body.createTextRange){y=B.body.createTextRange();try{y.moveToPoint(i,c),y.collapse(!0)}catch{y=function(K,q,re){var fe,ve=re.elementFromPoint(K,q),be=re.body.createTextRange();if(ve&&"HTML"!==ve.tagName||(ve=re.body),be.moveToElementText(ve),0<(fe=(fe=fn.toArray(be.getClientRects())).sort(function(Ce,Se){return(Ce=Math.abs(Math.max(Ce.top-q,Ce.bottom-q)))-Math.abs(Math.max(Se.top-q,Se.bottom-q))})).length){q=(fe[0].bottom+fe[0].top)/2;try{return be.moveToPoint(K,q),be.collapse(!0),be}catch{}}return null}(i,c,h)}return O=h.body,P=(D=y)&&D.parentElement?D.parentElement():null,uo(function(L,K,q){for(;L&&L!==K;){if(q(L))return L;L=L.parentNode}return null}(P,O,l1))?null:D}return y}function j_(i,c){return i&&c&&i.startContainer===c.startContainer&&i.startOffset===c.startOffset&&i.endContainer===c.endContainer&&i.endOffset===c.endOffset}function c1(i,c,h){return null!==function(y,w,D){for(;y&&y!==w;){if(D(y))return y;y=y.parentNode}return null}(i,c,h)}function q_(i){return i&&"TABLE"===i.nodeName}function sp(i,c,h){for(var y=new cs(c,i.getParent(c.parentNode,i.isBlock)||i.getRoot());c=y[h?"prev":"next"]();)if(Hi(c))return 1}function er(i,c,h,y,w){var D,O,P=i.getRoot(),B=i.schema.getNonEmptyElements(),L=i.getParent(w.parentNode,i.isBlock)||P;if(y&&Hi(w)&&c&&i.isEmpty(L))return X.some(dn(w.parentNode,i.nodeIndex(w)));for(var K,q,re=new cs(w,L);O=re[y?"prev":"next"]();){if("false"===i.getContentEditableParent(O)||(q=P,wr(K=O)&&!1===c1(K,q,sd)))return X.none();if(br(O)&&0<O.nodeValue.length)return!1===c1(O,P,function(fe){return"A"===fe.nodeName})?X.some(dn(O,y?O.nodeValue.length:0)):X.none();if(i.isBlock(O)||B[O.nodeName.toLowerCase()])return X.none();D=O}return h&&D?X.some(dn(D,0)):X.none()}function Yg(i,c,h,y){var w,D=i.getRoot(),O=!1,P=y[(h?"start":"end")+"Container"],B=y[(h?"start":"end")+"Offset"],L=Kr(P)&&B===P.childNodes.length,K=i.schema.getNonEmptyElements(),q=h;if(wr(P))return X.none();if(Kr(P)&&B>P.childNodes.length-1&&(q=!1),zf(P)&&(P=D,B=0),P===D){if(q&&(re=P.childNodes[0<B?B-1:0])&&(wr(re)||K[re.nodeName]||q_(re)))return X.none();if(P.hasChildNodes()){if(B=Math.min(!q&&0<B?B-1:B,P.childNodes.length-1),B=br(P=P.childNodes[B])&&L?P.data.length:0,!c&&P===D.lastChild&&q_(P)||function(ve,be){for(;be&&be!==ve;){if(uo(be))return 1;be=be.parentNode}}(D,P)||wr(P))return X.none();if(P.hasChildNodes()&&!1===q_(P)){var re=P,fe=new cs(P,D);do{if(uo(re)||wr(re)){O=!1;break}if(br(re)&&0<re.nodeValue.length){B=q?0:re.nodeValue.length,P=re,O=!0;break}if(K[re.nodeName.toLowerCase()]&&(!(w=re)||!/^(TD|TH|CAPTION)$/.test(w.nodeName))){B=i.nodeIndex(re),P=re.parentNode,q||B++,O=!0;break}}while(re=q?fe.next():fe.prev())}}}return c&&(br(P)&&0===B&&er(i,L,c,!0,P).each(function(ve){P=ve.container(),B=ve.offset(),O=!0}),Kr(P)&&(!(re=(re=P.childNodes[B])||P.childNodes[B-1])||!Hi(re)||re.previousSibling&&"A"===re.previousSibling.nodeName||sp(i,re,!1)||sp(i,re,!0)||er(i,L,c,!0,re).each(function(ve){P=ve.container(),B=ve.offset(),O=!0}))),q&&!c&&br(P)&&B===P.nodeValue.length&&er(i,L,c,!1,P).each(function(ve){P=ve.container(),B=ve.offset(),O=!0}),O?X.some(dn(P,B)):X.none()}function Nc(i,c){var h=c.collapsed,y=c.cloneRange(),w=dn.fromRangeStart(c);return Yg(i,h,!0,y).each(function(D){h&&dn.isAbove(w,D)||y.setStart(D.container(),D.offset())}),h||Yg(i,h,!1,y).each(function(D){y.setEnd(D.container(),D.offset())}),h&&y.collapse(!0),j_(c,y)?X.none():X.some(y)}function Jh(i,c){return i.splitText(c)}function Zg(i){var c=i.startContainer,h=i.startOffset,y=i.endContainer,w=i.endOffset;return c===y&&br(c)?0<h&&h<c.nodeValue.length&&(c=(y=Jh(c,h)).previousSibling,h<w?(c=y=Jh(y,w-=h).previousSibling,w=y.nodeValue.length,h=0):w=0):(br(c)&&0<h&&h<c.nodeValue.length&&(c=Jh(c,h),h=0),br(y)&&0<w&&w<y.nodeValue.length&&(w=(y=Jh(y,w).previousSibling).nodeValue.length)),{startContainer:c,startOffset:h,endContainer:y,endOffset:w}}function Sv(i){return{walk:function(c,h){return z0(i,c,h)},split:Zg,normalize:function(c){return Nc(i,c).fold(ht,function(h){return c.setStart(h.startContainer,h.startOffset),c.setEnd(h.endContainer,h.endOffset),!0})}}}fo.isBookmarkNode=Oc;var Dr={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function(i){return i.shiftKey||i.ctrlKey||i.altKey||Dr.metaKeyPressed(i)},metaKeyPressed:function(i){return zr.mac?i.metaKey:i.ctrlKey&&!i.altKey}},AS=uo;Sv.compareRanges=j_,Sv.getCaretRangeFromPoint=xb,Sv.getSelectedNode=iv,Sv.getNode=ts;var Kg,$g,Rc=(Kg="height",$g=function(i){var c=i.dom;return yo(i)?c.getBoundingClientRect().height:c.offsetHeight},{set:function(i,c){if(!Ie(c)&&!c.match(/^[0-9]+$/))throw new Error(Kg+".set accepts only positive integer values. Value was "+c);var h=i.dom;pl(h)&&(h.style[Kg]=c+"px")},get:_b,getOuter:_b,aggregate:Cv,max:function(i,c,h){var y=Cv(i,h);return y<c?c-y:0}});function _b(i){var c=$g(i);if(c<=0||null===c){var h=bu(i,Kg);return parseFloat(h)||0}return c}function Cv(i,c){return Or(c,function(h,y){var w=bu(i,y),D=void 0===w?0:parseInt(w,10);return isNaN(D)?h:h+D},0)}function j0(i){return"textarea"===va(i)}function kv(i,c){var h=function(w){var D=w.dom.ownerDocument,O=D.body,P=D.defaultView,B=D.documentElement;if(O===w.dom)return Bf(O.offsetLeft,O.offsetTop);var L=ff(null==P?void 0:P.pageYOffset,B.scrollTop),K=ff(null==P?void 0:P.pageXOffset,B.scrollLeft),q=ff(B.clientTop,O.clientTop),re=ff(B.clientLeft,O.clientLeft);return Va(w).translate(K-re,L-q)}(i),y=Rc.get(i);return{element:i,bottom:h.top+y,height:y,pos:h,cleanup:c}}function up(i,c,h,y){ih(i,function(w,D){return cp(i,c,h,y)},h)}function Tv(i,c,h,y,w){var D={elm:y.element.dom,alignToTop:w};i.fire("ScrollIntoView",D).isDefaultPrevented()||(h(c,Gl(c).top,y,w),i.fire("AfterScrollIntoView",D))}function Mv(i,c,h,y){var w=zt.fromDom(i.getDoc());Tv(i,w,h,kv(zt.fromDom(c),U),y)}function wb(i,c,h,y){var D=i.pos;f0(D.left,h?D.top:D.top-c+i.height,y)}function Dv(i,c,h,y,w){var D=h+c,O=y.pos.top,P=y.bottom,B=h<=P-O;O<c?wb(y,h,!1!==w,i):D<O?wb(y,h,B?!1!==w:!0===w,i):D<P&&!B&&wb(y,h,!0===w,i)}function X_(i,c,h,y){Dv(i,c,i.dom.defaultView.innerHeight,h,y)}function du(i,c,h,y){Dv(i,c,i.dom.defaultView.innerHeight,h,y);var w,D,O,P,B,L,K,q=(w=h.element,P=Gl(zt.fromDom(document)),O=(D=Qg).owner(w),B=Y_(D,O),L=Va(w),K=Gr(B,function(fe,ve){var be=Va(ve);return{left:fe.left+be.left,top:fe.top+be.top}},{left:0,top:0}),Bf(K.left+L.left+P.left,K.top+L.top+P.top)),re=Nx(window);q.top<re.y?Vp(h.element,!1!==y):q.top>re.bottom&&Vp(h.element,!0===y)}function Lc(i,c,h){return up(i,X_,c,h)}function dd(i,c,h){return Mv(i,c,X_,h)}function Jg(i,c,h){return up(i,du,c,h)}function d1(i,c,h){return Mv(i,c,du,h)}function oh(i,c,h){(i.inline?Lc:Jg)(i,c,h)}function q0(i){var c=xu(i).dom;return i.dom===c.activeElement}function Av(i){return void 0===i&&(i=zt.fromDom(document)),X.from(i.dom.activeElement).map(zt.fromDom)}function f1(i,c){var h=ta(c)?Ao(c).length:mr(c).length+1;return h<i?h:i<0?0:i}function fu(i){return z.range(i.start,f1(i.soffset,i.start),i.finish,f1(i.foffset,i.finish))}function h1(i,c){return!Am(c.dom)&&(Bt(i,c)||Fn(i,c))}function Sb(i){return function(c){return h1(i,c.start)&&h1(i,c.finish)}}function Io(i){return!0===i.inline||Y.isIE()}function Qh(i){return z.range(zt.fromDom(i.startContainer),i.startOffset,zt.fromDom(i.endContainer),i.endOffset)}function Cb(i){var c=document.createRange();try{return c.setStart(i.start.dom,i.soffset),c.setEnd(i.finish.dom,i.foffset),X.some(c)}catch{return X.none()}}function fd(i){var c,h,y=Io(i)?((h=as(c=zt.fromDom(i.getBody())).dom.getSelection())&&0!==h.rangeCount?X.from(h.getRangeAt(0)):X.none()).map(Qh).filter(Sb(c)):X.none();i.bookmark=y.isSome()?y:i.bookmark}function X0(i){return(i.bookmark||X.none()).bind(function(c){return h=zt.fromDom(i.getBody()),X.from(c).filter(Sb(h)).map(fu);var h}).bind(Cb)}function xr(i,c){var h=i.getParam("custom_ui_selector","","string");return null!==ce.getParent(c,function(y){return ae.isEditorUIElement(y)||!!h&&i.dom.is(y,h)})}function g1(i,c){var h=c.editor;(function Y0(i){var c=rv(function(){fd(i)},0);i.on("init",function(){function h(){w.throttle()}var y,w,D,O,P,B;i.inline&&(y=i,w=c,Vo.DOM.bind(document,"mouseup",h),y.on("remove",function(){Vo.DOM.unbind(document,"mouseup",h)})),D=i,O=c,aa().browser.isIE()?(B=D).on("focusout",function(){fd(B)}):(P=O,D.on("mouseup touchend",function(L){P.throttle()})),D.on("keyup NodeChange",function(L){"nodechange"===L.type&&L.selectionChange||fd(D)})}),i.on("remove",function(){c.cancel()})})(h),h.on("focusin",function(){var y=i.focusedEditor;y!==h&&(y&&y.fire("blur",{focusedEditor:h}),i.setActive(h),(i.focusedEditor=h).fire("focus",{blurredEditor:y}),h.focus(!0))}),h.on("focusout",function(){It.setEditorTimeout(h,function(){var y=i.focusedEditor;xr(h,function(w){try{return Av(xu(zt.fromDom(w.getElement()))).fold(function(){return document.body},function(D){return D.dom})}catch{return document.body}}(h))||y!==h||(h.fire("blur",{focusedEditor:null}),i.focusedEditor=null)})}),oa||(oa=function(y){var w=i.activeEditor;w&&function(D){if(Lu()&&F(D.target)){var O=zt.fromDom(D.target);if(vl(O)&&F(O.dom.shadowRoot)&&D.composed&&D.composedPath){var P=D.composedPath();if(P)return Gt(P)}}return X.from(D.target)}(y).each(function(D){D.ownerDocument===document&&(D===document.body||xr(w,D)||i.focusedEditor!==w||(w.fire("blur",{focusedEditor:null}),i.focusedEditor=null))})},ce.bind(document,"focusin",oa))}function ko(i,c){i.focusedEditor===c.editor&&(i.focusedEditor=null),i.activeEditor||(ce.unbind(document,"focusin",oa),oa=null)}function hd(i,c){var h,y;h=zt.fromDom(i.getBody()),((y=c).collapsed?X.from(ts(y.startContainer,y.startOffset)).map(zt.fromDom):X.none()).bind(function(w){return Lo(w)?X.some(w):!1===Bt(h,w)?X.some(h):X.none()}).bind(function(w){return Rl(w.dom)}).fold(function(){i.selection.normalize()},function(w){return i.selection.setRng(w.toRange())})}function Df(i){if(i.setActive)try{i.setActive()}catch{i.focus()}else i.focus()}function hu(i){return i.inline?(y=i.getBody())&&(q0(c=zt.fromDom(y))||Av(xu(h=c)).filter(function(w){return h.dom.contains(w.dom)}).isSome()):i.iframeElement&&q0(zt.fromDom(i.iframeElement));var c,h,y}function Iv(i,c,h,y,w){var O=h?c.startOffset:c.endOffset;return X.from(h?c.startContainer:c.endContainer).map(zt.fromDom).map(function(P){return y&&c.collapsed?P:Mm(P,w(P,O)).getOr(P)}).bind(function(P){return vl(P)?X.some(P):Ru(P).filter(vl)}).map(function(P){return P.dom}).getOr(i)}function ul(i,c,h){return Iv(i,c,!0,h,function(y,w){return Math.min(_d(y),w)})}function Ov(i,c,h){return Iv(i,c,!1,h,function(y,w){return 0<w?w-1:w})}function Ev(i,c){for(var h=i;i&&br(i)&&0===i.length;)i=c?i.nextSibling:i.previousSibling;return i||h}function eg(i,c){return ln(c,function(h){var y=i.fire("GetSelectionRange",{range:h});return y.range!==h?y.range:h})}function tg(i,c,h){var y=h?"lastChild":"firstChild",w=h?"prev":"next";if(i[y])return i[y];if(i!==c){var D=i[w];if(D)return D;for(var O=i.parent;O&&O!==c;O=O.parent)if(D=O[w])return D}}function lp(i){var c="a"===i.name&&!i.attr("href")&&i.attr("id");return i.attr("name")||i.attr("id")&&!i.firstChild||i.attr("data-mce-bookmark")||c}var oa,Y_=function(i,c){return i.view(c).fold(Z([]),function(h){var y=i.owner(h),w=Y_(i,y);return[h].concat(w)})},Qg=Object.freeze({__proto__:null,view:function(i){var c;return(i.dom===document?X.none():X.from(null===(c=i.dom.defaultView)||void 0===c?void 0:c.frameElement)).map(zt.fromDom)},owner:Zu}),cp=function(i,c,h,y){zt.fromDom(i.getBody());var B,L,D=zt.fromDom(i.getDoc()),K=(B=function(q,re){var fe=mr(q);if(0===fe.length||j0(q))return{element:q,offset:re};if(re<fe.length&&!j0(fe[re]))return{element:fe[re],offset:0};var ve=fe[fe.length-1];return j0(ve)?{element:q,offset:re}:"img"===va(ve)?{element:ve,offset:1}:ta(ve)?{element:ve,offset:Ao(ve).length}:{element:ve,offset:mr(ve).length}}(zt.fromDom(h.startContainer),h.startOffset),L=zt.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>'),Ps(B.element,L),kv(L,function(){return us(L)}));Tv(i,D,c,K,y),K.cleanup()},ih=function(i,c,h){var y=h.startContainer,w=h.startOffset,D=h.endContainer,O=h.endOffset;c(zt.fromDom(y),zt.fromDom(D));var P=i.dom.createRng();P.setStart(y,w),P.setEnd(D,O),i.selection.setRng(h)},S=(hf([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(i){return i.fold(oe,oe,oe)}),A=hf([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),z={domRange:A.domRange,relative:A.relative,exact:A.exact,exactFromRange:function(i){return A.exact(i.start,i.soffset,i.finish,i.foffset)},getWin:function(i){return as(i.match({domRange:function(c){return zt.fromDom(c.startContainer)},relative:function(c,h){return S(c)},exact:function(c,h,y,w){return c}}))},range:function(i,c,h,y){return{start:i,soffset:c,finish:h,foffset:y}}},Y=aa().browser,ae={isEditorUIElement:function(i){var c=i.className.toString();return-1!==c.indexOf("tox-")||-1!==c.indexOf("mce-")}},ce=Vo.DOM,ke=function(i){return i.editorManager.setActive(i)},Pe={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ye=(tt.create=function(i,c){var h=new tt(i,Pe[i]||1);return c&&On(c,function(y,w){h.attr(w,y)}),h},tt.prototype.replace=function(i){return i.parent&&i.remove(),this.insert(i,this),this.remove(),this},tt.prototype.attr=function(i,c){var h,y=this;if("string"!=typeof i)return null!=i&&On(i,function(D,O){y.attr(O,D)}),y;if(h=y.attributes){if(void 0===c)return h.map[i];if(null===c){if(i in h.map){delete h.map[i];for(var w=h.length;w--;)if(h[w].name===i)return h.splice(w,1),y}return y}if(i in h.map){for(w=h.length;w--;)if(h[w].name===i){h[w].value=c;break}}else h.push({name:i,value:c});return h.map[i]=c,y}},tt.prototype.clone=function(){var i,c=new tt(this.name,this.type);if(i=this.attributes){var h=[];h.map={};for(var y=0,w=i.length;y<w;y++){var D=i[y];"id"!==D.name&&(h[h.length]={name:D.name,value:D.value},h.map[D.name]=D.value)}c.attributes=h}return c.value=this.value,c.shortEnded=this.shortEnded,c},tt.prototype.wrap=function(i){return this.parent.insert(i,this),i.append(this),this},tt.prototype.unwrap=function(){for(var i=this.firstChild;i;){var c=i.next;this.insert(i,this,!0),i=c}this.remove()},tt.prototype.remove=function(){var i=this.parent,c=this.next,h=this.prev;return i&&(i.firstChild===this?(i.firstChild=c)&&(c.prev=null):h.next=c,i.lastChild===this?(i.lastChild=h)&&(h.next=null):c.prev=h,this.parent=this.next=this.prev=null),this},tt.prototype.append=function(i){i.parent&&i.remove();var c=this.lastChild;return c?((c.next=i).prev=c,this.lastChild=i):this.lastChild=this.firstChild=i,i.parent=this,i},tt.prototype.insert=function(i,c,h){i.parent&&i.remove();var y=c.parent||this;return h?(c===y.firstChild?y.firstChild=i:c.prev.next=i,i.prev=c.prev,(i.next=c).prev=i):(c===y.lastChild?y.lastChild=i:c.next.prev=i,i.next=c.next,(i.prev=c).next=i),i.parent=y,i},tt.prototype.getAll=function(i){for(var c=[],h=this.firstChild;h;h=tg(h,this))h.name===i&&c.push(h);return c},tt.prototype.children=function(){for(var i=[],c=this.firstChild;c;c=c.next)i.push(c);return i},tt.prototype.empty=function(){if(this.firstChild){for(var i=[],c=this.firstChild;c;c=tg(c,this))i.push(c);for(var h=i.length;h--;)(c=i[h]).parent=c.firstChild=c.lastChild=c.next=c.prev=null}return this.firstChild=this.lastChild=null,this},tt.prototype.isEmpty=function(i,c,h){void 0===c&&(c={});var y=this.firstChild;if(lp(this))return!1;if(y)do{if(1===y.type){if(y.attr("data-mce-bogus"))continue;if(i[y.name]||lp(y))return!1}if(8===y.type||3===y.type&&!function(w){if(_s(w.value)){var D=w.parent;return!D||"span"===D.name&&!D.attr("style")||!/^[ ]+$/.test(w.value)}}(y)||3===y.type&&y.parent&&c[y.parent.name]&&_s(y.value)||h&&h(y))return!1}while(y=tg(y,this));return!0},tt.prototype.walk=function(i){return tg(this,null,i)},tt);function tt(i,c){this.name=i,1===(this.type=c)&&(this.attributes=[],this.attributes.map={})}function ft(i,c){return i.replace(c.re,function(h){return fr(c.uris,h).getOr(h)})}var mt=fn.each,dt=fn.trim,Et="source protocol authority userInfo user password host port relative path directory file query anchor".split(" "),wt={ftp:21,http:80,https:443,mailto:25},Ut=["img","video"],Qt=(_t.parseDataUri=function(i){var c,h=decodeURIComponent(i).split(","),y=/data:([^;]+)/.exec(h[0]);return{type:c=y?y[1]:c,data:h[1]}},_t.isDomSafe=function(i,c,h){if((h=void 0===h?{}:h).allow_script_urls)return!0;var y,w,D,O,P=Yl.decode(i).replace(/[\s\u0000-\u001F]+/g,"");try{P=decodeURIComponent(P)}catch{P=unescape(P)}return!(/((java|vb)script|mhtml):/i.test(P)||(w=P,D=c,!(y=h).allow_html_data_urls&&(/^data:image\//i.test(w)?(F(O=y.allow_svg_data_urls)?!O:!F(D)||!Ot(Ut,D))&&/^data:image\/svg\+xml/i.test(w):/^data:/i.test(w))))},_t.getDocumentBaseUrl=function(i){var c=0!==i.protocol.indexOf("http")&&"file:"!==i.protocol?i.href:i.protocol+"//"+i.host+i.pathname;return/^[^:]+:\/\/\/?[^\/]+\//.test(c)&&(c=c.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(c)||(c+="/")),c},_t.prototype.setPath=function(i){var c=/^(.*?)\/?(\w+)?$/.exec(i);this.path=c[0],this.directory=c[1],this.file=c[2],this.source="",this.getURI()},_t.prototype.toRelative=function(i){var c;if("./"===i)return i;var h=new _t(i,{base_uri:this});if("mce_host"!==h.host&&this.host!==h.host&&h.host||this.port!==h.port||this.protocol!==h.protocol&&""!==h.protocol)return h.getURI();var y=this.getURI(),w=h.getURI();return y===w||"/"===y.charAt(y.length-1)&&y.substr(0,y.length-1)===w?y:(c=this.toRelPath(this.path,h.path),h.query&&(c+="?"+h.query),h.anchor&&(c+="#"+h.anchor),c)},_t.prototype.toAbsolute=function(i,c){var h=new _t(i,{base_uri:this});return h.getURI(c&&this.isSameOrigin(h))},_t.prototype.isSameOrigin=function(i){if(this.host==i.host&&this.protocol==i.protocol){if(this.port==i.port)return!0;var c=wt[this.protocol];if(c&&(this.port||c)==(i.port||c))return!0}return!1},_t.prototype.toRelPath=function(i,c){var h,y,w=0,D="",O=i.substring(0,i.lastIndexOf("/")).split("/"),P=c.split("/");if(O.length>=P.length)for(h=0,y=O.length;h<y;h++)if(h>=P.length||O[h]!==P[h]){w=h+1;break}if(O.length<P.length)for(h=0,y=P.length;h<y;h++)if(h>=O.length||O[h]!==P[h]){w=h+1;break}if(1===w)return c;for(h=0,y=O.length-(w-1);h<y;h++)D+="../";for(h=w-1,y=P.length;h<y;h++)D+=h!==w-1?"/"+P[h]:P[h];return D},_t.prototype.toAbsPath=function(i,c){var h,y,w=0,D=[],O=/\/$/.test(c)?"/":"",P=i.split("/"),B=c.split("/");for(mt(P,function(L){L&&D.push(L)}),P=D,h=B.length-1,D=[];0<=h;h--)0!==B[h].length&&"."!==B[h]&&(".."!==B[h]?0<w?w--:D.push(B[h]):w++);return 0!==(y=(h=P.length-w)<=0?Wo(D).join("/"):P.slice(0,h).join("/")+"/"+Wo(D).join("/")).indexOf("/")&&(y="/"+y),O&&y.lastIndexOf("/")!==y.length-1&&(y+=O),y},_t.prototype.getURI=function(i){var c;return void 0===i&&(i=!1),this.source&&!i||(c="",i||(c+=this.protocol?this.protocol+"://":"//",this.userInfo&&(c+=this.userInfo+"@"),this.host&&(c+=this.host),this.port&&(c+=":"+this.port)),this.path&&(c+=this.path),this.query&&(c+="?"+this.query),this.anchor&&(c+="#"+this.anchor),this.source=c),this.source},_t);function _t(i,c){i=dt(i),this.settings=c||{};var h,y,w,D,O=this.settings.base_uri,P=this;/^([\w\-]+):([^\/]{2})/i.test(i)||/^\s*#/.test(i)?P.source=i:(h=0===i.indexOf("//"),0!==i.indexOf("/")||h||(i=(O&&O.protocol||"http")+"://mce_host"+i),/^[\w\-]*:?\/\//.test(i)||(y=this.settings.base_uri?this.settings.base_uri.path:new _t(document.location.href).directory,i=this.settings.base_uri&&""==this.settings.base_uri.protocol?"//mce_host"+P.toAbsPath(y,i):(w=/([^#?]*)([#?]?.*)/.exec(i),(O&&O.protocol||"http")+"://mce_host"+P.toAbsPath(y,w[1])+w[2])),i=i.replace(/@@/g,"(mce_at)"),D=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(i),mt(Et,function(B,L){var K=(K=D[L])&&K.replace(/\(mce_at\)/g,"@@");P[B]=K}),O&&(P.protocol||(P.protocol=O.protocol),P.userInfo||(P.userInfo=O.userInfo),P.port||"mce_host"!==P.host||(P.port=O.port),P.host&&"mce_host"!==P.host||(P.host=O.host),P.source=""),h&&(P.protocol=""))}function Ft(i,c,h){for(var y=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,w=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,D=i.getShortEndedElements(),O=1,P=h;0!==O;)for(y.lastIndex=P;;){var B=y.exec(c);if(null===B)return P;if("!"===B[1]){P=Xr(B[2],"--")?rn(c,!1,B.index+3):rn(c,!0,B.index+1);break}w.lastIndex=y.lastIndex;var L=w.exec(c);if(!nt(L)&&L.index===y.lastIndex){"/"===B[1]?--O:Do(D,B[2])||(O+=1),P=y.lastIndex+L[0].length;break}}return P}function Mn(i,c){void 0===c&&(c=Vf()),i=i||{};var h=Dn(),y=h.createElement("form");!1!==i.fix_self_closing&&(i.fix_self_closing=!0);var D=i.comment||U,O=i.cdata||U,P=i.text||U,B=i.start||U,L=i.end||U,K=i.pi||U,q=i.doctype||U;return{parse:function(re,fe){void 0===fe&&(fe="html"),function w(re,fe){void 0===fe&&(fe="html");for(var ve,be,Ce,Se,Oe,ze,ot,yt,Ve,Je,it,Nt,Ht,on,$t,bt,St,At,Yt,Nn=re.html,jn=0,In=[],Wn=0,Pn=Yl.decode,Un=fn.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Hn="html"===fe?0:1,lr=function(ro){for(var Lr,$o=In.length;$o--&&In[$o].name!==ro;);if(0<=$o){for(Lr=In.length-1;$o<=Lr;Lr--)(ro=In[Lr]).valid&&L(ro.name);In.length=$o}},vn=function(ro,Lr){return P(ft(ro,re),Lr)},Zn=function(ro){""!==ro&&(">"===ro.charAt(0)&&(ro=" "+ro),i.allow_conditional_comments||"[if"!==ro.substr(0,3).toLowerCase()||(ro=" "+ro),D(ft(ro,re)))},Bn=function(ro,Lr){var $o=ro||"",Ra=!Xr($o,"--"),Ms=rn(Nn,Ra,Lr);return ro=Nn.substr(Lr,Ms-Lr),Zn(Ra?$o+ro:ro),Ms+1},vr=new RegExp("<(?:(?:!--([\\w\\W]*?)--!?>)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:![Dd][Oo][Cc][Tt][Yy][Pp][Ee]([\\w\\W]*?)>)|(?:!(--)?)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([A-Za-z][A-Za-z0-9\\-_\\:\\.]*)>)|(?:([A-Za-z][A-Za-z0-9\\-_:.]*)(\\s(?:[^'\">]+(?:\"[^\"]*\"|'[^']*'))*[^\"'>]*(?:\"[^\">]*|'[^'>]*)?|\\s*|\\/)>))","g"),hr=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,To=c.getShortEndedElements(),st=i.self_closing_elements||c.getSelfClosingElements(),kt=c.getBoolAttrs(),cn=i.validate,xn=i.remove_internals,gn=i.fix_self_closing,Xn=c.getSpecialElements(),Vr=Nn+">";ve=vr.exec(Vr);){var Zr=ve[0];if(jn<ve.index&&vn(Pn(Nn.substr(jn,ve.index-jn))),be=ve[7])lr(be=":"===(be=be.toLowerCase()).charAt(0)?be.substr(1):be);else if(be=ve[8]){if(ve.index+Zr.length>Nn.length){vn(Pn(Nn.substr(ve.index))),jn=ve.index+Zr.length;continue}Ve=(be=":"===(be=be.toLowerCase()).charAt(0)?be.substr(1):be)in To,gn&&st[be]&&0<In.length&&In[In.length-1].name===be&&lr(be);var zi=function(ro,Lr){var $o=ro.exec(Lr);if($o){var Ra=$o[1],Ms=$o[2];return"string"==typeof Ra&&"data-mce-bogus"===Ra.toLowerCase()?Ms:null}return null}(hr,ve[9]);if(null!==zi){if("all"===zi){jn=Ft(c,Nn,vr.lastIndex),vr.lastIndex=jn;continue}it=!1}if(!cn||(Je=c.getElementRule(be))){if(it=!0,cn&&(on=Je.attributes,$t=Je.attributePatterns),(Ht=ve[9])?((yt=-1!==Ht.indexOf("data-mce-type"))&&xn&&(it=!1),(Se=[]).map={},Ht.replace(hr,function(ro,Lr,$o,Ra,Ms){return function(ju,Us,Eu,bm,yh){var Ip;if(Eu=ft((Us=Us.toLowerCase())in kt?Us:Pn(Eu||bm||yh||""),re),cn&&!yt&&0==(0===(Ip=Us).indexOf("data-")||0===Ip.indexOf("aria-"))){var Pf=on[Us];if(!Pf&&$t){for(var Op=$t.length;Op--&&!(Pf=$t[Op]).pattern.test(Us););-1===Op&&(Pf=null)}if(!Pf||Pf.validValues&&!(Eu in Pf.validValues))return}("name"===Us||"id"===Us)&&ju in Tt&&(Eu in h||Eu in y)||Un[Us]&&!Qt.isDomSafe(Eu,ju,i)||yt&&(Us in Un||0===Us.indexOf("on"))||(Se.map[Us]=Eu,Se.push({name:Us,value:Eu}))}(be,Lr,$o,Ra,Ms),""})):(Se=[]).map={},cn&&!yt){if(bt=Je.attributesRequired,St=Je.attributesDefault,Je.removeEmptyAttrs&&!Se.length&&(it=!1),At=Je.attributesForced)for(Oe=At.length;Oe--;)ot=(Nt=At[Oe]).name,"{$uid}"===(Yt=Nt.value)&&(Yt="mce_"+Wn++),Se.map[ot]=Yt,Se.push({name:ot,value:Yt});if(St)for(Oe=St.length;Oe--;)(ot=(Nt=St[Oe]).name)in Se.map||("{$uid}"===(Yt=Nt.value)&&(Yt="mce_"+Wn++),Se.map[ot]=Yt,Se.push({name:ot,value:Yt}));if(bt){for(Oe=bt.length;Oe--&&!(bt[Oe]in Se.map););-1===Oe&&(it=!1)}if(Nt=Se.map["data-mce-bogus"]){if("all"===Nt){jn=Ft(c,Nn,vr.lastIndex),vr.lastIndex=jn;continue}it=!1}}it&&B(be,Se,Ve)}else it=!1;if(Ce=Xn[be]){Ce.lastIndex=jn=ve.index+Zr.length,jn=(ve=Ce.exec(Nn))?(it&&(ze=Nn.substr(jn,ve.index-jn)),ve.index+ve[0].length):(ze=Nn.substr(jn),Nn.length),it&&(0<ze.length&&vn(ze,!0),L(be)),vr.lastIndex=jn;continue}Ve||(Ht&&Ht.indexOf("/")===Ht.length-1?it&&L(be):In.push({name:be,valid:it}))}else if(be=ve[1])Zn(be);else if(be=ve[2]){if(!(1==Hn||i.preserve_cdata||0<In.length&&c.isValidChild(In[In.length-1].name,"#cdata"))){jn=Bn("",ve.index+2),vr.lastIndex=jn;continue}O(be)}else if(be=ve[3])q(be);else{if((be=ve[4])||"<!"===Zr){jn=Bn(be,ve.index+Zr.length),vr.lastIndex=jn;continue}if(be=ve[5]){if(1!=Hn){jn=Bn("?",ve.index+2),vr.lastIndex=jn;continue}K(be,ve[6])}}jn=ve.index+Zr.length}for(jn<Nn.length&&vn(Pn(Nn.substr(jn))),Oe=In.length-1;0<=Oe;Oe--)(be=In[Oe]).valid&&L(be.name)}(function(ve){for(var be,Ce=/data:[^;<"'\s]+;base64,([a-z0-9\+\/=\s]+)/gi,Se=[],Oe={},ze=Mg("img"),ot=0,yt=0;be=Ce.exec(ve);){var Ve=be[0],Je=ze+"_"+yt++;Oe[Je]=Ve,ot<be.index&&Se.push(ve.substr(ot,be.index-ot)),Se.push(Je),ot=be.index+Ve.length}var it=new RegExp(ze+"_[0-9]+","g");return 0===ot?{prefix:ze,uris:Oe,html:ve,re:it}:(ot<ve.length&&Se.push(ve.substr(ot)),{prefix:ze,uris:Oe,html:Se.join(""),re:it})}(re),fe)}}}var Tt=fn.makeMap("button,fieldset,form,iframe,img,image,input,object,output,select,textarea"),Dn=wn(function(){return document.implementation.createHTMLDocument("parser")}),rn=function(i,c,h){void 0===h&&(h=0);var y=i.toLowerCase();if(-1!==y.indexOf("[if ",h)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(y.substr(h))){var w=y.indexOf("[endif]",h);return y.indexOf(">",w)}if(c){var D=y.indexOf(">",h);return-1!==D?D:y.length}var O=/--!?>/g;O.lastIndex=h;var B=O.exec(i);return B?B.index+B[0].length:y.length};function pr(i,c){for(var h,y,w,D,O=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,P=i.schema,B=(h=i.getTempAttrs(),y=c,w=new RegExp(["\\s?("+h.join("|")+')="[^"]+"'].join("|"),"gi"),y.replace(w,"")),L=P.getShortEndedElements();D=O.exec(B);){var K=O.lastIndex,q=D[0].length,re=L[D[1]]?K:Mn.findEndTag(P,B,K);B=B.substring(0,K-q)+B.substring(re),O.lastIndex=K-q}return mn(B)}function En(i){return{compare:function(c,h){return c.nodeName===h.nodeName&&!(!w(y(c),y(h))||!w(i.parseStyle(i.getAttrib(c,"style")),i.parseStyle(i.getAttrib(h,"style")))||Oc(c)||Oc(h));function y(D){var O={};return oo(i.getAttribs(D),function(P){var B=P.nodeName.toLowerCase();0!==B.indexOf("_")&&"style"!==B&&0!==B.indexOf("data-")&&(O[B]=i.getAttrib(D,B))}),O}function w(D,O){var P,B;for(B in D)if(Do(D,B)){if(void 0===(P=O[B])||D[B]!==P)return;delete O[B]}for(B in O)if(Do(O,B))return;return 1}}}}function _r(i){var c=[],h=(i=i||{}).indent,y=So(i.indent_before||""),w=So(i.indent_after||""),D=Yl.getEncodeFunc(i.entity_encoding||"raw",i.entities),O="html"===i.element_format;return{start:function(P,B,L){var K,q,re,fe;if(h&&y[P]&&0<c.length&&0<(fe=c[c.length-1]).length&&"\n"!==fe&&c.push("\n"),c.push("<",P),B)for(K=0,q=B.length;K<q;K++)c.push(" ",(re=B[K]).name,'="',D(re.value,!0),'"');c[c.length]=!L||O?">":" />",L&&h&&w[P]&&0<c.length&&0<(fe=c[c.length-1]).length&&"\n"!==fe&&c.push("\n")},end:function(P){var B;c.push("</",P,">"),h&&w[P]&&0<c.length&&0<(B=c[c.length-1]).length&&"\n"!==B&&c.push("\n")},text:function(P,B){0<P.length&&(c[c.length]=B?P:D(P))},cdata:function(P){c.push("<![CDATA[",P,"]]>")},comment:function(P){c.push("\x3c!--",P,"--\x3e")},pi:function(P,B){B?c.push("<?",P," ",D(B),"?>"):c.push("<?",P,"?>"),h&&c.push("\n")},doctype:function(P){c.push("<!DOCTYPE",P,">",h?"\n":"")},reset:function(){c.length=0},getContent:function(){return c.join("").replace(/\n$/,"")}}}function Fr(i,c){void 0===c&&(c=Vf());var h=_r(i);return(i=i||{}).validate=!("validate"in i)||i.validate,{serialize:function(y){var w=i.validate,D={3:function(P){h.text(P.value,P.raw)},8:function(P){h.comment(P.value)},7:function(P){h.pi(P.name,P.value)},10:function(P){h.doctype(P.value)},4:function(P){h.cdata(P.value)},11:function(P){if(P=P.firstChild)for(;O(P),P=P.next;);}};h.reset();var O=function(P){var B=D[P.type];if(B)B(P);else{var L=P.name,K=P.shortEnded,q=P.attributes;if(w&&q&&1<q.length){var re=[];re.map={};var fe=c.getElementRule(P.name);if(fe){for(var ve=0,be=fe.attributesOrder.length;ve<be;ve++)(Ce=fe.attributesOrder[ve])in q.map&&(re.map[Ce]=Se=q.map[Ce],re.push({name:Ce,value:Se}));var Ce,Se;for(ve=0,be=q.length;ve<be;ve++)(Ce=q[ve].name)in re.map||(re.map[Ce]=Se=q.map[Ce],re.push({name:Ce,value:Se}));q=re}}if(h.start(P.name,q,K),!K){if(P=P.firstChild)for(;O(P),P=P.next;);h.end(L)}}};return 1!==y.type||i.inner?D[11](y):O(y),h.getContent()}}}Mn.findEndTag=Ft;var Nr=pr,oo=fn.each,So=fn.makeMap,Yr=new Set;function Oo(i,c){return ur(i.parseStyle(i.getAttrib(c,"style")))}function ti(i,c,h){return X.from(h.container()).filter(br).exists(function(y){var w=i?0:-1;return c(y.data.charAt(h.offset()+w))})}function $i(i){var c=i.container();return br(c)&&(0===c.data.length||Nm(c.data)&&fo.isBookmarkNode(c.parentNode))}function Kn(i,c){return function(h){return X.from(Lg(i?0:-1,h)).filter(c).isSome()}}function Si(i){return bo(i)&&"block"===bu(zt.fromDom(i),"display")}function zo(i){return uo(i)&&!(Kr(c=i)&&"all"===c.getAttribute("data-mce-bogus"));var c}function qo(i){d0(i),ss(i,zt.fromHtml('<br data-mce-bogus="1">'))}function Da(i){Kc(i).each(function(c){Ku(c).each(function(h){_l(i)&&Di(c)&&_l(h)&&us(c)})})}function da(i,c){return w=ht,Bt(y=c,h=i)?function(D,O){for(var P=$e(O)?O:ht,B=D.dom,L=[];null!=B.parentNode;){var K=B.parentNode,q=zt.fromDom(K);if(L.push(q),!0===P(q))break;B=K}return L}(h,function(D){return w(D)||Fn(D,y)}).slice(0,-1):[];var h,y,w}function Ii(i,c){return[i].concat(da(i,c))}function io(i,c,h){return op(i,c,h,$i)}function Bc(i,c){return rr(Ii(zt.fromDom(c.container()),i),_l)}function fa(i,c,h){return io(i,c.dom,h).forall(function(y){return Bc(c,h).fold(function(){return!1===rc(y,h,c.dom)},function(w){return!1===rc(y,h,c.dom)&&Bt(w,zt.fromDom(y.container()))})})}function Gi(i,c,h){return Bc(c,h).fold(function(){return io(i,c.dom,h).forall(function(y){return!1===rc(y,h,c.dom)})},function(y){return io(i,y.dom,h).isNone()})}function Z0(i){return jh(i).exists(Di)}function Zd(i,c,h){var y=Gt(Tr(Ii(zt.fromDom(h.container()),c),_l)).getOr(c);return sl(i,y.dom,h).filter(Z0)}function eu(i,c){return jh(c).exists(Di)||Zd(!0,i,c).isSome()}function Ts(i,c){return X.from(c.getNode(!0)).map(zt.fromDom).exists(Di)||Zd(!1,i,c).isSome()}function dp(i){return dn.isTextPosition(i)&&!i.isAtStart()&&!i.isAtEnd()}function gu(i,c){return Gt(Tr(Ii(zt.fromDom(c.container()),i),_l)).getOr(i)}function em(i,c){return dp(c)?Eb(c):Eb(c)||Xd(gu(i,c).dom,c).exists(Eb)}function Af(i,c){return dp(c)?ey(c):ey(c)||oc(gu(i,c).dom,c).exists(ey)}function K0(i){return jh(i).bind(function(c){return bl(c,vl)}).exists(function(c){return Ot(["pre","pre-wrap"],bu(c,"white-space"))})}function m1(i,c){return!K0(c)&&(fp(i,c)||uh(i,c)||Ts(i,c)||em(i,c))}function kb(i,c){return!K0(c)&&(Ui(i,c)||Kd(i,c)||eu(i,c)||Af(i,c))}function Z_(i,c){return m1(i,c)||kb(i,(y=(h=c).container(),w=h.offset(),br(y)&&w<y.data.length?dn(y,w+1):h));var h,y,w}function Tb(i,c){return nh(i.charAt(c))}function IS(i){var c=i.container();return br(c)&&Dt(c.data,xc)}function ui(i){var c=zt.fromDom(i.getBody());i.selection.isCollapsed()&&function K_(i,c){return X.some(c).filter(IS).bind(function(h){var y,w,D,O,P,B,L,K,q,re=h.container(),fe=i,ve=(P=re).data,be=dn(P,0);return(!Tb(ve,0)||Z_(fe,be)?(K=(B=re).data,(q=ln(L=K.split(""),function(Ce,Se){return nh(Ce)&&0<Se&&Se<L.length-1&&ns(L[Se-1])&&ns(L[Se+1])?" ":Ce}).join(""))!==K&&(B.data=q,1)):(P.data=" "+ve.slice(1),1))||(y=i,D=(w=re).data,O=dn(w,D.length-1),Tb(D,D.length-1)&&!Z_(y,O)&&(w.data=D.slice(0,-1)+" ",1))?X.some(h):X.none()})}(c,dn.fromRangeStart(i.selection.getRng())).each(function(h){i.selection.setRng(h.toRange())})}function OS(i,c,h){var y,w,D,O,P,B,L,K;0!==h&&(w=Cr(y=zt.fromDom(i),_l).getOr(y),D=i.data.slice(c,c+h),O=c+h>=i.data.length&&kb(w,dn(i,i.data.length)),P=0===c&&m1(w,dn(i,0)),i.replaceData(c,h,(L=P,K=O,Or(B=D,function(q,re){return Gg(re)||nh(re)?q.previousCharIsSpace||""===q.str&&L||q.str.length===B.length-1&&K?{previousCharIsSpace:!1,str:q.str+xc}:{previousCharIsSpace:!0,str:q.str+" "}:{previousCharIsSpace:!1,str:q.str+re}},{previousCharIsSpace:!1,str:""}).str)))}function p1(i,c){var h=i.data.slice(c);OS(i,c,h.length-yr(h).length)}function ES(i,c){var h=i.data.slice(0,c),y=h.length-ao(h).length;OS(i,c-y,y)}function Mb(i,c,h,y){void 0===y&&(y=!0);var w=ao(i.data).length,D=y?i:c,O=y?c:i;return y?D.appendData(O.data):D.insertData(0,O.data),us(zt.fromDom(O)),h&&p1(D,w),D}function Sk(i,c){return y=i,w=(h=c).container(),D=h.offset(),!1===dn.isTextPosition(h)&&w===y.parentNode&&D>dn.before(y).offset()?dn(c.container(),c.offset()-1):c;var h,y,w,D}function Ck(i){return Ih(i.previousSibling)?X.some(br(c=i.previousSibling)?dn(c,c.data.length):dn.after(c)):i.previousSibling?Kh(i.previousSibling):X.none();var c}function ah(i){return Ih(i.nextSibling)?X.some(br(c=i.nextSibling)?dn(c,0):dn.before(c)):i.nextSibling?Rl(i.nextSibling):X.none();var c}function Uu(i,c){return Ck(c).orThunk(function(){return ah(c)}).orThunk(function(){return h=i,w=dn.before((y=c).previousSibling||y.parentNode),Xd(h,w).fold(function(){return oc(h,dn.after(y))},X.some);var h,y,w})}function ho(i,c){return ah(c).orThunk(function(){return Ck(c)}).orThunk(function(){return oc(h=i,dn.after(y=c)).fold(function(){return Xd(h,dn.before(y))},X.some);var h,y})}function PS(i,c,h){h.fold(function(){i.focus()},function(y){i.selection.setRng(y.toRange(),c)})}function BM(i,c){return c&&Do(i.schema.getBlockElements(),va(c))}function zM(i){if(xo(i)){var c=zt.fromHtml('<br data-mce-bogus="1">');return d0(i),ss(i,c),X.some(dn.before(c.dom))}return X.none()}function tm(i,c,h,y){void 0===y&&(y=!0);var w,D,O,P,B,L,K,q,re,fe,ve,Se,Oe=(c?ho:Uu)(i.getBody(),Se=h.dom).map(de(Sk,Se)),ze=Cr(h,de(BM,i),(w=i.getBody(),function(yt){return yt.dom===w})),ot=(P=Oe,D=O=h,B=Do(i.schema.getTextInlineElements(),va(D)),fe=Ku(O).filter(ta),ve=Es(O).filter(ta),us(O),K=ve,q=P,re=function(yt,Ve,Je){var it=yt.dom,Nt=Ve.dom,Ht=it.data.length;return Mb(it,Nt,B),Je.container()===Nt?dn(it,Ht):Je},((L=fe).isSome()&&K.isSome()&&q.isSome()?X.some(re(L.getOrDie(),K.getOrDie(),q.getOrDie())):X.none()).orThunk(function(){return B&&(fe.each(function(yt){return ES(yt.dom,yt.dom.length)}),ve.each(function(yt){return p1(yt.dom,0)})),P}));i.dom.isEmpty(i.getBody())?(i.setContent(""),i.selection.setCursorLocation()):ze.bind(zM).fold(function(){y&&PS(i,c,ot)},function(yt){y&&PS(i,c,X.some(yt))})}function Db(i){return ol(i,"td,th")}function v1(i,c){return{start:i,end:c}}function Ab(i,c){return Jc(zt.fromDom(i),"td,th",c)}function NS(i){return!Fn(i.start,i.end)}function $_(i,c){return ld(i.start,c).bind(function(h){return ld(i.end,c).bind(function(y){return Fn(h,y)?X.some(h):X.none()})})}function Ib(i){return function(c){return $_(c,i).map(function(h){return{rng:c,table:h,cells:Db(h)}})}}function kk(i,c,h,y){if(h.collapsed||!i.forall(NS))return X.none();if(c.isSameTable){var w=i.bind(Ib(y));return X.some({start:w,end:w})}var D,O,P=Ab(h.startContainer,y),B=Ab(h.endContainer,y),L=P.bind((O=y,function(q){return ld(q,O).bind(function(re){return jt(Db(re)).map(function(fe){return v1(q,fe)})})})).bind(Ib(y)),K=B.bind((D=y,function(q){return ld(q,D).bind(function(re){return Gt(Db(re)).map(function(fe){return v1(fe,q)})})})).bind(Ib(y));return X.some({start:L,end:K})}function Tk(i,c){return ai(i,function(h){return Fn(h,c)})}function RS(i){return wa(Tk(i.cells,i.rng.start),Tk(i.cells,i.rng.end),function(c,h){return i.cells.slice(c,h+1)})}function Ob(i,c){var h=c.startTable,y=c.endTable,w=i.cloneRange();return h.each(function(D){return w.setStartAfter(D.dom)}),y.each(function(D){return w.setEndBefore(D.dom)}),w}function FM(i){return Tn(i,function(c){Th(c,"contenteditable"),qo(c)}),0}function $0(i,c,h,y){var w=h.cloneRange();y?(w.setStart(h.startContainer,h.startOffset),w.setEndAfter(c.dom.lastChild)):(w.setStartBefore(c.dom.firstChild),w.setEnd(h.endContainer,h.endOffset)),Lk(i,w,c,!1)}function Mk(i){var c=xv(i),h=zt.fromDom(i.selection.getNode());ls(h.dom)&&xo(h)?i.selection.setCursorLocation(h.dom,0):i.selection.collapse(!0),1<c.length&&Gn(c,function(y){return Fn(y,h)})&&pc(h,"data-mce-selected","1")}function nm(i,c,h){var y=i.selection.getRng();return FM(h.bind(function(w){var O,P,B=w.rng,L=w.isStartInTable,K=X.from(i.dom.getParent(L?B.endContainer:B.startContainer,i.dom.isBlock)).map(zt.fromDom);B.deleteContents(),O=i,P=L,K.filter(xo).each(function(re){P?us(re):(qo(re),O.selection.setCursorLocation(re.dom,0))});var q=L?c[0]:c[c.length-1];return $0(i,q,y,L),xo(q)?X.none():X.some(L?c.slice(1):c.slice(0,-1))}).getOr(c)),Mk(i),!0}function y1(i,c,h,y){var w=i.selection.getRng(),D=c[0],O=h[h.length-1];$0(i,D,w,!0),$0(i,O,w,!1);var P=xo(D)?c:c.slice(1),B=xo(O)?h:h.slice(0,-1);return FM(P.concat(B)),y.deleteContents(),Mk(i),!0}function Pv(i,c){return tm(i,!1,c),!0}function Au(i,c){return rr(Ii(c,i),kr)}function b1(i,c){return(i?_1:rm)(c)}function J_(i,c){var h,y,w,D,O,P,B,L,K=zt.fromDom(i.selection.getStart(!0)),q=xv(i);return i.selection.isCollapsed()&&0===q.length?function VM(i,c,h){var y=zt.fromDom(i.getBody());return US(y,h).fold(function(){return D=c,O=y,P=h,B=dn.fromRangeStart((w=i).selection.getRng()),Au(O,P).bind(function(re){return xo(re)?jS(w,re):(fe=O,ve=re,be=B,Tf(D,w.getBody(),be).bind(function(Ce){return Au(fe,zt.fromDom(Ce.getNode())).map(function(Se){return!1===Fn(Se,ve)})}));var fe,ve,be}).getOr(!1)||(K=c,q=dn.fromRangeStart((L=i).selection.getRng()),b1(K,q)||sl(K,L.getBody(),q).exists(function(re){return b1(K,re)}));var w,D,O,P,B,L,K,q},function(w){return q=c,re=y,fe=w,ve=dn.fromRangeStart((K=i).selection.getRng()),(xo(fe)?jS(K,fe):(O=re,B=fe,L=ve,Tf(P=q,(D=K).getBody(),L).bind(function(be){return Oe=P,ze=L,ot=be,Rl((Se=B).dom).bind(function(yt){return Kh(Se.dom).map(function(Ve){return Oe?ze.isEqual(yt)&&ot.isEqual(Ve):ze.isEqual(Ve)&&ot.isEqual(yt)})}).getOr(!0)?jS(D,B):(Ce=B,US(O,zt.fromDom(be.getNode())).map(function(yt){return!1===Fn(yt,Ce)}));var Ce,Se,Oe,ze,ot}).or(X.some(!0)))).getOr(!1);var D,O,P,B,L,K,q,re,fe,ve})}(i,c,K):(y=K,w=q,D=zt.fromDom((h=i).getBody()),O=h.selection.getRng(),0!==w.length?nm(h,w,X.none()):(P=h,L=O,US(B=D,y).fold(function(){return re=P,function ED(i,c){var h,y,w,D,O,P,B,L,K,q,re,fe,ve,be,Ce,Se,Oe=(h=i,function(Ve){return Fn(h,Ve)}),ze=wa(Ab((y=c).startContainer,w=Oe),Ab(y.endContainer,w),v1),ot=(K=Oe,q=yt((L=c).startContainer),re=yt(L.endContainer),fe=q.isSome(),ve=re.isSome(),{startTable:q,endTable:re,isStartInTable:fe,isEndInTable:ve,isSameTable:be=wa(q,re,Fn).getOr(!1),isMultiTable:!be&&fe&&ve});function yt(Ve){return ld(zt.fromDom(Ve),K)}return Ce=c,Se=Oe,ze.exists(function(Ve){return!NS(Je=Ve)&&$_(Je,Se).exists(function(it){var Nt=it.dom.rows;return 1===Nt.length&&1===Nt[0].cells.length})&&Zh(Ve.start,Ce);var Je})?ze.map(function(Ve){return Iu.singleCellTable(c,Ve.start)}):ot.isMultiTable?kk(ze,P=ot,B=c,Oe).bind(function(Ve){var it=Ve.end,Nt=Ve.start.bind(RS).getOr([]),Ht=it.bind(RS).getOr([]);if(0<Nt.length&&0<Ht.length){var on=Ob(B,P);return X.some(Iu.multiTable(Nt,Ht,on))}return X.none()}):kk(ze,D=ot,O=c,Oe).bind(function(Ve){return Ve.start.or(Ve.end)}).bind(function(Ve){var Je=D.isSameTable,it=RS(Ve).getOr([]);if(Je&&Ve.cells.length===it.length)return X.some(Iu.fullTable(Ve.table));if(0<it.length){if(Je)return X.some(Iu.partialTable(it,X.none()));var Nt=Ob(O,D);return X.some(Iu.partialTable(it,X.some(ir(ir({},D),{rng:Nt}))))}return X.none()})}(B,L).map(function(fe){return fe.fold(de(Lk,re),de(Pv,re),de(nm,re),de(y1,re))});var re},function(re){return jS(P,re)}).getOr(!1)))}function Dk(i){return i.collapsed?i:(h=dn.fromRangeStart(c=i),y=dn.fromRangeEnd(c),sl(!1,w=c.commonAncestorContainer,y).map(function(D){return!rc(h,y,w)&&rc(h,D,w)?(O=h.container(),P=h.offset(),B=D.container(),L=D.offset(),(K=document.createRange()).setStart(O,P),K.setEnd(B,L),K):c;var O,P,B,L,K}).getOr(c));var c,h,y,w}function LS(i,c){var h=i.getParent(c,i.isBlock);return h&&"LI"===h.nodeName?h:null}function Ok(i,c){var h=dn.after(i),y=Mu(c).prev(h);return y?y.toRange():null}function WM(i,c,h){var y,w,D,O,P=i.selection,B=i.dom;/^ | $/.test(c)&&(y=B,w=P.getRng(),D=c,D=m1(O=zt.fromDom(y.getRoot()),dn.fromRangeStart(w))?D.replace(/^ /,"&nbsp;"):D.replace(/^&nbsp;/," "),c=D=kb(O,dn.fromRangeEnd(w))?D.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):D.replace(/&nbsp;(<br( \/)?>)?$/," "));var L=i.parser,K=h.merge,q=Fr({validate:i.getParam("validate")},i.schema),re='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>',fe=i.fire("BeforeSetContent",{content:c,format:"html",selection:!0,paste:h.paste});if(fe.isDefaultPrevented())i.fire("SetContent",{content:fe.content,format:"html",selection:!0,paste:h.paste});else{-1===(c=fe.content).indexOf("{$caret}")&&(c+="{$caret}"),c=c.replace(/\{\$caret\}/,re);var ve,be,Ce=(ve=P.getRng()).startContainer||(ve.parentElement?ve.parentElement():null),Se=i.getBody();Ce===Se&&P.isCollapsed()&&B.isBlock(Se.firstChild)&&(be=Se.firstChild)&&!i.schema.getShortEndedElements()[be.nodeName]&&B.isEmpty(Se.firstChild)&&((ve=B.createRng()).setStart(Se.firstChild,0),ve.setEnd(Se.firstChild,0),P.setRng(ve)),P.isCollapsed()||function(Un){var Hn=Un.dom,lr=Dk(Un.selection.getRng());Un.selection.setRng(lr);var vn,Zn=Hn.getParent(lr.startContainer,ew),Bn=lr;null!==(vn=Zn)&&vn===Hn.getParent(Bn.endContainer,ew)&&Zh(zt.fromDom(vn),Bn)?Lk(Un,lr,zt.fromDom(Zn)):Un.getDoc().execCommand("Delete",!1,null)}(i);var Oe,ze,ot,yt,Je,it,Nt,Ht,on,$t,bt,St,At,Yt={context:(Wn=P.getNode()).nodeName.toLowerCase(),data:h.data,insert:!0},Nn=L.parse(c,Yt);if(!0===h.paste&&function Ak(i,c){var h,y,w,D,O,P=c.firstChild,B=c.lastChild;return P&&"meta"===P.name&&(P=P.next),y=B=B&&"mce_marker"===B.attr("id")?B.prev:B,w=(h=i).getNonEmptyElements(),y&&(y.isEmpty(w)||(D=y,h.getBlockElements()[D.name]&&D.firstChild&&D.firstChild===D.lastChild&&("br"===(O=D.firstChild).name||O.value===xc)))&&(B=B.prev),P&&P===B&&("ul"===P.name||"ol"===P.name)}(i.schema,Nn)&&LS(B,Wn))return ve=function HM(i,c,h,y){function w(Yt){var Nn=dn.fromRangeStart(h),jn=Mu(c.getRoot()),In=1===Yt?jn.prev(Nn):jn.next(Nn);return!In||LS(c,In.getNode())!==bt}var D,O,P,B,L,K,q,re,fe,ve,be,Ce,Se,Oe,ze,ot,yt,Ve,Je,it,Nt,Ht,on,$t=(D=c,L=i.serialize(y),P=(O=D.createFragment(L)).firstChild,B=O.lastChild,P&&"META"===P.nodeName&&P.parentNode.removeChild(P),B&&"mce_marker"===B.id&&B.parentNode.removeChild(B),O),bt=LS(c,h.startContainer),St=function Ik(i){return 0<i.length&&(!(y=i[i.length-1]).firstChild||(c=y)&&c.firstChild&&c.firstChild===c.lastChild&&((h=c.firstChild).data===xc||Hi(h)))?i.slice(0,-1):i;var c,h,y}(Tr($t.firstChild.childNodes,function(Yt){return"LI"===Yt.nodeName})),At=c.getRoot();return w(1)?(Je=At,on=(Ve=bt).parentNode,fn.each(St,function(Yt){on.insertBefore(Yt,Ve)}),it=Je,Nt=dn.before(Ve),(Ht=Mu(it).next(Nt))?Ht.toRange():null):w(2)?(K=bt,re=At,c.insertAfter((q=St).reverse(),K),Ok(q[0],re)):(ve=St,be=At,Ce=fe=bt,Oe=(Se=h).cloneRange(),ze=Se.cloneRange(),Oe.setStartBefore(Ce),ze.setEndAfter(Ce),ot=[Oe.cloneContents(),ze.cloneContents()],(yt=fe.parentNode).insertBefore(ot[0],fe),fn.each(ve,function(Yt){yt.insertBefore(Yt,fe)}),yt.insertBefore(ot[1],fe),yt.removeChild(fe),Ok(ve[ve.length-1],be))}(q,B,P.getRng(),Nn),P.setRng(ve),void i.fire("SetContent",fe);if(function(){for(var Un=Nn;Un=Un.walk();)1===Un.type&&Un.attr("data-mce-fragment","1")}(),"mce_marker"===(In=Nn.lastChild).attr("id"))for(var jn=In,In=In.prev;In;In=In.walk(!0))if(3===In.type||!B.isBlock(In.name)){i.schema.isValidChild(In.parent.name,"span")&&In.parent.insert(jn,In,"br"===In.name);break}if(i._selectionOverrides.showBlockCaretContainer(Wn),Yt.invalid){i.selection.setContent(re);var Wn=P.getNode(),Pn=i.getBody();for(9===Wn.nodeType?Wn=In=Pn:In=Wn;In!==Pn;)In=(Wn=In).parentNode;c=Wn===Pn?Pn.innerHTML:B.getOuterHTML(Wn),c=q.serialize(L.parse(c.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return q.serialize(Nn)}))),Wn===Pn?B.setHTML(Pn,c):B.setOuterHTML(Wn,c)}else Oe=i,ze=c=q.serialize(Nn),"all"===(ot=Wn).getAttribute("data-mce-bogus")?ot.parentNode.insertBefore(Oe.dom.createFragment(ze),ot):!(yt=ot.firstChild)||yt===ot.lastChild&&"BR"===yt.nodeName?Oe.dom.setHTML(ot,ze):Oe.selection.setContent(ze);it=K,on=(Je=i).schema.getTextInlineElements(),$t=Je.dom,it&&(Nt=Je.getBody(),Ht=En($t),fn.each($t.select("*[data-mce-fragment]"),function(Un){if(F(on[Un.nodeName.toLowerCase()])&&Mr(Oo($t,Un),function(lr){return!Yr.has(lr)}))for(var Hn=Un.parentNode;F(Hn)&&Hn!==Nt&&!function(lr,vn,Zn){function Bn(To){var st=lr.getStyle(vn,To),kt=lr.getStyle(Zn,To);return tn(st)&&tn(kt)&&st!==kt}var vr=Oo(lr,vn),hr=Oo(lr,Zn);return Gn(vr,function(To){function st(cn){return Gn(cn,function(xn){return xn===To})}if(st(hr)||!st(x1))return Bn(To);var kt=Tr(hr,function(cn){return Gn(x1,function(xn){return Xr(cn,xn)})});return Gn(kt,Bn)})}($t,Un,Hn);Hn=Hn.parentNode)if(Ht.compare(Hn,Un)){$t.remove(Un,!0);break}})),function(Un,Hn){var lr,vn=Un.dom,Zn=Un.selection;if(Hn){Zn.scrollIntoView(Hn);var Bn=qg(Un.getBody(),Hn);if("false"===vn.getContentEditable(Bn))return vn.remove(Hn),Zn.select(Bn);var vr,hr=vn.createRng(),To=Hn.previousSibling;br(To)?(hr.setStart(To,To.nodeValue.length),zr.ie||br(vr=Hn.nextSibling)&&(To.appendData(vr.data),vr.parentNode.removeChild(vr))):(hr.setStartBefore(Hn),hr.setEndBefore(Hn));var st=vn.getParent(Hn,vn.isBlock);vn.remove(Hn),st&&vn.isEmpty(st)&&(Un.$(st).empty(),hr.setStart(st,0),hr.setEnd(st,0),ew(st)||st.getAttribute("data-mce-fragment")||!(lr=function(kt){var cn=dn.fromRangeStart(kt);if(cn=Mu(Un.getBody()).next(cn))return cn.toRange()}(hr))?vn.add(st,vn.create("br",{"data-mce-bogus":"1"})):(hr=lr,vn.remove(st))),Zn.setRng(hr)}}(i,B.get("mce_marker")),bt=i.getBody(),fn.each(bt.getElementsByTagName("*"),function(Un){Un.removeAttribute("data-mce-fragment")}),St=B,At=P.getStart(),X.from(St.getParent(At,"td,th")).map(zt.fromDom).each(Da),i.fire("SetContent",fe),i.addVisual()}}function J0(i){return i instanceof Ye}function ng(i,c,h){var y;i.dom.setHTML(i.getBody(),c),!0!==h&&hu(y=i)&&Rl(y.getBody()).each(function(w){var D=w.getNode(),O=yg(D)?Rl(D).getOr(w):w;y.selection.setRng(O.toRange())})}function BS(i){return $e(i)?i:ht}function Q_(i,c,h){var y=c(i),w=BS(h);return y.orThunk(function(){return w(i)?X.none():function(D){for(var O=i.dom,P=BS(w);O.parentNode;){var B=zt.fromDom(O=O.parentNode),L=D(B);if(L.isSome())return L;if(P(B))break}return X.none()}(c)})}function zS(i,c,h){var y=i.formatter.get(h);if(y)for(var w=0;w<y.length;w++){var D=y[w];if(Bo(D)&&!1===D.inherit&&i.dom.is(c,D.selector))return 1}}function Rr(i,c,h,y,w){var D=i.dom.getRoot();return c!==D&&(c=i.dom.getParent(c,function(O){return!!zS(i,O,h)||O.parentNode===D||!!gp(i,O,h,y,!0)}),!!gp(i,c,h,y,w))}function Q0(i,c,h){return!!w1(c,h.inline)||!!w1(c,h.block)||(h.selector?1===c.nodeType&&i.is(c,h.selector):void 0)}function no(i,c,h,y,w,D){var O=h[y];if($e(h.onmatch))return h.onmatch(c,h,y);if(O)if(qe(O.length)){for(var P in O)if(Do(O,P)){var B="attributes"===y?i.getAttrib(c,P):lu(i,c,P),L=Mf(O[P],D),K=ye(B)||qt(B);if((!K||!ye(L))&&(w&&K&&!h.exact||(!w||h.exact)&&!w1(B,vv(i,L,P))))return}}else for(var q=0;q<O.length;q++)if("attributes"===y?i.getAttrib(c,O[q]):lu(i,c,O[q]))return 1;return 1}function FS(i,c,h,y,w){if(y)return Rr(i,y,c,h,w);if(y=i.selection.getNode(),Rr(i,y,c,h,w))return!0;var D=i.selection.getStart();return!(D===y||!Rr(i,D,c,h,w))}function Pk(i){return 0<function(c){for(var h=[];c;){if(3===c.nodeType&&c.nodeValue!==Nb||1<c.childNodes.length)return[];1===c.nodeType&&h.push(c),c=c.firstChild}return h}(i).length}function eo(i){if(i){var c=new cs(i,i);for(i=c.current();i;i=c.next())if(br(i))return i}return null}function VS(i){var c=zt.fromTag("span");return Im(c,{id:$d,"data-mce-bogus":"1","data-mce-type":"format-caret"}),i&&ss(c,zt.fromText(Nb)),c}function HS(i,c,h){void 0===h&&(h=!0);var y,w,D,O,P,B,L,K,q=i.dom,re=i.selection;Pk(c)?tm(i,!1,zt.fromDom(c),h):(y=re.getRng(),w=q.getParent(c,q.isBlock),D=y.startContainer,O=y.startOffset,P=y.endContainer,B=y.endOffset,(K=eo(c))&&K.nodeValue.charAt(0)===Nb&&K.deleteData(0,1),L=K,q.remove(c,!0),D===L&&0<O&&y.setStart(L,O-1),P===L&&0<B&&y.setEnd(L,B-1),w&&q.isEmpty(w)&&qo(zt.fromDom(w)),re.setRng(y))}function Ho(i,c,h){void 0===h&&(h=!0);var y=i.dom,w=i.selection;if(c)HS(i,c,h);else if(!(c=Wg(i.getBody(),w.getStart())))for(;c=y.get($d);)HS(i,c,!1)}function Nk(i,c){return i.appendChild(c),c}function WS(i,c){var h=Gr(i,function(y,w){return Nk(y,w.cloneNode(!1))},c);return Nk(h,h.ownerDocument.createTextNode(Nb))}function ll(i,c){var h=i.schema.getTextInlineElements();return Do(h,va(c))&&!sd(c.dom)&&!kh(c.dom)}Tn(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],function(i){Yr.add(i)});var GS,x1=["font","text-decoration","text-emphasis"],ey=de(ti,!0,Gg),Eb=de(ti,!1,Gg),PD=Kn(!0,Si),ND=Kn(!1,Si),Pb=Kn(!0,yl),sh=Kn(!1,yl),_1=Kn(!0,yg),rm=Kn(!1,yg),om=Kn(!0,zo),im=Kn(!1,zo),fp=de(Gi,!1),Ui=de(Gi,!0),uh=de(fa,!1),Kd=de(fa,!0),ty=de(Zd,!1),hp=de(Zd,!0),Iu=hf([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),ic=function(i){var c;return(8===Fp(c=i)||"#comment"===va(c)?Ku:Kc)(i).bind(ic).orThunk(function(){return X.some(i)})},Lk=function(i,c,h,y){void 0===y&&(y=!0),c.deleteContents();var w,D=ic(h).getOr(h),O=zt.fromDom(i.dom.getParent(D.dom,i.dom.isBlock));return xo(O)&&(qo(O),y&&i.selection.setCursorLocation(O.dom,0)),Fn(h,O)||Tn((Ul(Ru(O),h)?[]:Ru(w=O).map(mr).map(function(P){return Tr(P,function(B){return!Fn(w,B)})}).getOr([])).concat(mr(h)),function(P){Fn(P,O)||Bt(P,O)||!xo(P)||us(P)}),!0},US=function(i,c){return rr(Ii(c,i),function(h){return vl(h)&&"caption"===va(h)})},jS=function(i,c){return qo(c),i.selection.setCursorLocation(c.dom,0),X.some(!0)},ew=ls,tw=function(i,c){c(i),i.firstChild&&tw(i.firstChild,c),i.next&&tw(i.next,c)},w1=R0,gp=function(i,c,h,y,w){var D=i.formatter.get(h),O=i.dom;if(D&&c)for(var P=0;P<D.length;P++){var B=D[P];if(Q0(i.dom,c,B)&&no(O,c,B,"attributes",w,y)&&no(O,c,B,"styles",w,y)){var L=B.classes;if(L)for(var K=0;K<L.length;K++)if(!i.dom.hasClass(c,Mf(L[K],y)))return;return B}}},Nb=Rs,$d="_mce_caret",S1={},qS=vo,XS=li;function nw(i){return Kr(i)&&!Oc(i)&&!sd(i)&&!kh(i)}function Nv(i,c){for(var h=i;h;h=h[c]){if(br(h)&&tn(h.data))return i;if(Kr(h)&&!Oc(h))return h}return i}function Rb(i,c,h){var y=En(i);if(c&&h&&(c=Nv(c,"previousSibling"),h=Nv(h,"nextSibling"),y.compare(c,h))){for(var w=c.nextSibling;w&&w!==h;){var D=w;w=w.nextSibling,c.appendChild(D)}return i.remove(h),fn.each(fn.grep(h.childNodes),function(O){c.appendChild(O)}),c}return h}function YS(i,c,h,y){var w;y&&!1!==c.merge_siblings&&(w=Rb(i,pv(y),y),Rb(i,w,pv(w,!0)))}function Lb(i,c){return function(h){return!(!h||!lu(i,h,c))}}function C1(i,c,h){return function(y){var w,D;i.setStyle(y,c,h),""===y.getAttribute("style")&&y.removeAttribute("style"),w=i,"SPAN"===(D=y).nodeName&&0===w.getAttribs(D).length&&w.remove(D,!0)}}function rw(i,c,h){return i.isChildOf(c,h)&&c!==h&&!i.isBlock(h)}function k1(i,c,h){var y,w=c[h?"startContainer":"endContainer"],D=c[h?"startOffset":"endOffset"];return Kr(w)&&(!h&&D&&D--,w=w.childNodes[(y=w.childNodes.length-1)<D?y:D]),br(w)&&h&&D>=w.nodeValue.length&&(w=new cs(w,i.getBody()).next()||w),br(w)&&!h&&0===D&&new cs(w,i.getBody()).prev()||w}function ZS(i,c){var h=c?"firstChild":"lastChild";if(/^(TR|TH|TD)$/.test(i.nodeName)&&i[h]){var y=i[h];return"TR"===i.nodeName&&y[h]||y}return i}function ow(i,c,h,y){var w=i.create(h,y);return c.parentNode.insertBefore(w,c),w.appendChild(c),w}function KS(i,c,h,y,w){var D=zt.fromDom(c),O=zt.fromDom(i.create(y,w));return wd(O,(h?hc:Lf)(D)),h?(Ps(D,O),gc(O,D)):(Ja(D,O),ss(O,D)),O.dom}function iw(i,c,h,y){var w=pv(c,h,y);return ye(w)||"BR"===w.nodeName||i.isBlock(w)}function Bk(i,c,h,y,w){var D,O,P=i.dom,B=P,L=y;if(!(ca(O=c)&&Bv(L,O.inline)||jd(O)&&Bv(L,O.block)||Bo(O)&&Kr(L)&&B.is(L,O.selector)||c.links&&"A"===y.nodeName))return O1.keep();var K,q,re,fe,ve,be,Ce,Se,Oe=y;if(ca(c)&&"all"===c.remove&&Ee(c.preserve_attributes)){var ze=Tr(P.getAttribs(Oe),function(Je){return Ot(c.preserve_attributes,Je.name.toLowerCase())});if(P.removeAllAttribs(Oe),Tn(ze,function(Je){return P.setAttrib(Oe,Je.name,Je.value)}),0<ze.length)return O1.rename("span")}if("all"!==c.remove){iC(c.styles,function(Je,it){Je=vv(P,Mf(Je,h),it+""),Ie(it)&&(it=Je,w=null),!c.remove_similar&&w&&!Bv(lu(P,w,it),Je)||P.setStyle(Oe,it,""),D=!0}),D&&""===P.getAttrib(Oe,"style")&&(Oe.removeAttribute("style"),Oe.removeAttribute("data-mce-style")),iC(c.attributes,function(Je,it){var Nt;if(Je=Mf(Je,h),Ie(it)&&(it=Je,w=null),c.remove_similar||!w||Bv(P.getAttrib(w,it),Je))if("class"===it&&(Je=P.getAttrib(Oe,it))&&(Nt="",Tn(Je.split(/\s+/),function(Ht){/mce\-\w+/.test(Ht)&&(Nt+=(Nt?" ":"")+Ht)}),Nt))P.setAttrib(Oe,it,Nt);else{if(Lv.test(it)&&Oe.removeAttribute("data-mce-"+it),"style"===it&&mc(["li"])(Oe)&&"none"===P.getStyle(Oe,"list-style-type"))return Oe.removeAttribute(it),void P.setStyle(Oe,"list-style-type","none");"class"===it&&Oe.removeAttribute("className"),Oe.removeAttribute(it)}}),iC(c.classes,function(Je){Je=Mf(Je,h),w&&!P.hasClass(w,Je)||P.removeClass(Oe,Je)});for(var ot=P.getAttribs(Oe),yt=0;yt<ot.length;yt++){var Ve=ot[yt].nodeName;if(0!==Ve.indexOf("_")&&0!==Ve.indexOf("data-"))return O1.keep()}}return"none"!==c.remove?(re=c,be=(q=Oe).parentNode,Ce=(K=i).dom,Se=ya(K),jd(re)&&(Se?be===Ce.getRoot()&&(re.list_block&&Bv(q,re.list_block)||Tn(ki(q.childNodes),function(Je){Qm(K,Se,Je.nodeName.toLowerCase())?fe?fe.appendChild(Je):(fe=ow(Ce,Je,Se),Ce.setAttribs(fe,K.settings.forced_root_block_attrs)):fe=null})):Ce.isBlock(q)&&!Ce.isBlock(be)&&(iw(Ce,q,!1)||iw(Ce,q.firstChild,!0,!0)||q.insertBefore(Ce.create("br"),q.firstChild),iw(Ce,q,!0)||iw(Ce,q.lastChild,!1,!0)||q.appendChild(Ce.create("br")))),Bo(ve=re)&&ca(ve)&&Ul(fr(ve,"mixed"),!0)&&!Bv(re.inline,q)||Ce.remove(q,!0),O1.removed()):O1.keep()}function am(i,c,h,y,w){return Bk(i,c,h,y,w).fold(ht,function(D){return i.dom.rename(y,D),!0},Jt)}function zk(i,c,h,y,w){function D(Se){var Oe,ze,ot,yt,Ve,Je=(ze=c,ot=h,yt=w,Tn(th((Oe=i).dom,Se.parentNode).reverse(),function(it){var Nt;Ve||"_start"===it.id||"_end"===it.id||(Nt=gp(Oe,it,ze,ot,yt))&&!1!==Nt.split&&(Ve=it)}),Ve);return function(it,Nt,Ht,on,$t,bt,St,At){var Yt,Nn,jn=it.dom;if(Ht){for(var In=Ht.parentNode,Wn=on.parentNode;Wn&&Wn!==In;Wn=Wn.parentNode){for(var Pn=jn.clone(Wn,!1),Un=0;Un<Nt.length&&null!==(Pn=function(Hn,lr,vn){return Bk(Hn,lr,At,vn,vn).fold(Z(vn),function(Zn){return Hn.dom.createFragment().appendChild(vn),Hn.dom.rename(vn,Zn)},Z(null))}(it,Nt[Un],Pn));Un++);Pn&&(Yt&&Pn.appendChild(Yt),Nn=Nn||Pn,Yt=Pn)}St.mixed&&jn.isBlock(Ht)||(on=jn.split(Ht,on)),Yt&&($t.parentNode.insertBefore(Yt,$t),Nn.appendChild($t),ca(St)&&YS(jn,St,0,Yt))}return on}(i,K,Je,Se,Se,0,q,h)}function O(Se){return Gn(K,function(Oe){return am(i,Oe,h,Se,Se)})}function P(Se){var Oe,ze=fe.get(Se?"_start":"_end"),ot=ze[Se?"firstChild":"lastChild"];return Oc(Oe=ot)&&Kr(Oe)&&("_start"===Oe.id||"_end"===Oe.id)&&(ot=ot[Se?"firstChild":"lastChild"]),br(ot)&&0===ot.data.length&&(ot=Se?ze.previousSibling||ze.nextSibling:ze.nextSibling||ze.previousSibling),fe.remove(ze,!0),ot}function B(Se){var Oe=ud(i,Se,K,Se.collapsed);if(q.split){if(Oe=Zg(Oe),(ot=k1(i,Oe,!0))!==(yt=k1(i,Oe))){if(ot=ZS(ot,!0),yt=ZS(yt,!1),rw(fe,ot,yt)){var ze=X.from(ot.firstChild).getOr(ot);return D(KS(fe,ze,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void P(!0)}if(rw(fe,yt,ot))return ze=X.from(yt.lastChild).getOr(yt),D(KS(fe,ze,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void P(!1);var ot=ow(fe,ot,"span",{id:"_start","data-mce-type":"bookmark"}),yt=ow(fe,yt,"span",{id:"_end","data-mce-type":"bookmark"}),Ve=fe.createRng();Ve.setStartAfter(ot),Ve.setEndBefore(yt),z0(fe,Ve,function(Je){Tn(Je,function(it){Oc(it)||Oc(it.parentNode)||D(it)})}),D(ot),D(yt),ot=P(!0),yt=P()}else ot=yt=D(ot);Oe.startContainer=ot.parentNode||ot,Oe.startOffset=fe.nodeIndex(ot),Oe.endContainer=yt.parentNode||yt,Oe.endOffset=fe.nodeIndex(yt)+1}z0(fe,Oe,function(Je){Tn(Je,be)})}var L,K=i.formatter.get(c),q=K[0],re=!0,fe=i.dom,ve=i.selection,be=function(Se){var Oe=!0,ze=!1;Kr(Se)&&fe.getContentEditable(Se)&&(Oe=re,re="true"===fe.getContentEditable(Se),ze=!0);var ot,yt,Ve=ki(Se.childNodes);if(re&&!ze&&(ot=O(Se)||Gn(K,function(it){return Q0(fe,Se,it)}),yt=Se.parentNode,!ot&&F(yt)&&o1(q)&&O(yt)),q.deep&&Ve.length){for(var Je=0;Je<Ve.length;Je++)be(Ve[Je]);ze&&(re=Oe)}Tn(["underline","line-through","overline"],function(it){Kr(Se)&&i.dom.getStyle(Se,"text-decoration")===it&&Se.parentNode&&L0(fe,Se.parentNode)===it&&am(i,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:it}},null,Se)})};if(y)return Ug(y)?((L=fe.createRng()).setStartBefore(y),L.setEndAfter(y),B(L)):B(y),void Hs(i,c,y,h);if("false"!==fe.getContentEditable(ve.getNode()))ve.isCollapsed()&&ca(q)&&!xv(i).length?function GM(i,c,h,y){var w,D,O,P,B,L,K,q,re,fe,ve,be,Ce,Se,Oe,ze=i.dom,ot=i.selection,yt=[],Ve=ot.getRng(),Je=Ve.startContainer,Nt=Je;for(3===Je.nodeType&&(Ve.startOffset!==Je.nodeValue.length&&(w=!0),Nt=Nt.parentNode);Nt;){if(gp(i,Nt,c,h,y)){D=Nt;break}Nt.nextSibling&&(w=!0),yt.push(Nt),Nt=Nt.parentNode}D&&(w?(O=ot.getBookmark(),Ve.collapse(!0),P=Zg(ud(i,Ve,i.formatter.get(c),!0)),i.formatter.remove(c,h,P,y),ot.moveToBookmark(O)):(B=Wg(i.getBody(),D),re=L=VS(!1).dom,(be=(ve=i.dom).getParent(fe=null!==B?B:D,de(N0,i)))&&ve.isEmpty(be)?fe.parentNode.replaceChild(re,fe):(Se=ol(Ce=zt.fromDom(fe),"br"),Oe=Tr(function(){for(var Ht=[],on=Ce.dom;on;)Ht.push(zt.fromDom(on)),on=on.lastChild;return Ht}().slice(-1),Di),Se.length===Oe.length&&Tn(Oe,us),ve.isEmpty(fe)?fe.parentNode.replaceChild(re,fe):ve.insertAfter(re,fe)),K=function Rk(i,c,h,y,w,D){var O,P,B=i.formatter,L=i.dom,K=Tr(ur(B.get()),function(re){return re!==y&&!Dt(re,"removeformat")});if(0<Tr((O=i,P=h,Or(K,function(re,fe){var ve=function B0(i,c){return Gn(i.formatter.get(c),function(h){function y(w){return 1<w.length&&"%"===w.charAt(0)}return Gn(["styles","attributes"],function(w){return fr(h,w).exists(function(D){var O,P;return Gn(Ee(D)?D:(O=oe,P=[],On(D,function(B,L){P.push(O(B,L))}),P),y)})})})}(O,fe);return O.formatter.matchNode(P,fe,{},ve)?re.concat([fe]):re},[])),function(re){return be=y,Ce=["inline","block","selector","attributes","styles","classes"],!Gn((ve=i).formatter.get(re),function(Se){var Oe=fe(Se);return Gn(ve.formatter.get(be),function(ze){var ot,yt=fe(ze),Ve=Oe,Je=yt;return gr(ot=void 0===ot?xe:ot).eq(Ve,Je)})});function fe(Se){return qr(Se,function(Oe,ze){return Gn(Ce,function(ot){return ot===ze})})}var ve,be,Ce}).length){var q=h.cloneNode(!1);return L.add(c,q),B.remove(y,w,q,D),L.remove(q),X.some(q)}return X.none()}(i,L,D,c,h,y),q=WS(yt.concat(K.toArray()),L),HS(i,B,!1),ot.setCursorLocation(q,1),ze.isEmpty(D)&&ze.remove(D)))}(i,c,h,w):(H0(ve,!0,function(){jg(i,B)}),ca(q)&&FS(i,c,h,ve.getStart())&&ja(fe,ve,ve.getRng()),i.nodeChanged()),Hs(i,c,y,h);else{y=ve.getNode();for(var Ce=0;Ce<K.length&&(!K[Ce].ceFalseOverride||!am(i,K[Ce],h,y,y));Ce++);Hs(i,c,y,h)}}function mu(i){return Kr(i)&&!Oc(i)&&!sd(i)&&!kh(i)}function Fk(i){return Do(i,"vars")}function Vk(i,c,h,y,w){return xt(c,function(D){var O=i.formatter.matchNode(D,h,null!=w?w:{},y);return!qe(O)},function(D){return zS(i,D,h)||!y&&F(i.formatter.matchNode(D,h,w,!0))})}function Hk(i,c){var h=null!=c?c:Uk(i);return Tr(th(i.dom,h),function(y){return Kr(y)&&!kh(y)})}function T1(i,c){var h=(c||document).createDocumentFragment();return Tn(i,function(y){h.appendChild(y.dom)}),zt.fromDom(h)}function mp(i,c,h){return{element:i,width:c,rows:h}}function rg(i,c){return{element:i,cells:c}}function jM(i,c){var h=parseInt(ys(i,c),10);return isNaN(h)?1:h}function $S(i){return Or(i,function(c,h){return h.cells.length>c?h.cells.length:c},0)}function Wk(i,c){for(var h=i.rows,y=0;y<h.length;y++)for(var w=h[y].cells,D=0;D<w.length;D++)if(Fn(w[D],c))return X.some({x:D,y});return X.none()}function JS(i,c,h,y,w){for(var D=[],O=i.rows,P=h;P<=w;P++){var B=O[P].cells,L=c<y?B.slice(c,y+1):B.slice(y,c+1);D.push(rg(O[P].element,L))}return D}function eC(){return T1([])}function og(i,c){return 0<=c&&c<i.length&&Gg(i.charAt(c))}function ig(i,c){var h=mn(i.innerText);return c?h.replace(/^[ \f\n\r\t\v]+/,""):h}function Gk(i){return Kr(i)?i.outerHTML:br(i)?Yl.encodeRaw(i.data,!1):_u(i)?"\x3c!--"+i.data+"--\x3e":""}function Bb(i){var c,h=Qi((c=i.getBody(),Tr(ln(ki(c.childNodes),Gk),function(w){return 0<w.length})),function(w){var D=pr(i.serializer,w);return 0<D.length?[D]:[]}),y=h.join("");return-1!==y.indexOf("</iframe>")?{type:"fragmented",fragments:h,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:y,bookmark:null,beforeBookmark:null}}function D1(i,c,h){var y,w,D,O,P,B,L,K,q,re,fe,ve=h?c.beforeBookmark:c.bookmark;function be(Ce,Se,Oe,ze){for(var ot=Ce;ot-Se<ze&&ot<Oe&&O[ot]===P[ot-Se];)++ot;return{start:Ce,end:ot,diag:Se}}"fragmented"===c.type?(y=c.fragments,w=i.getBody(),D=ln(ki(w.childNodes),Gk),function tC(i,c){var h=0;Tn(i,function(y){var w,D,O,P,L,K,q;0===y[0]?h++:1===y[0]?(P=c,L=h,q=function(re){var fe,ve=document.createElement("div"),be=document.createDocumentFragment();for(re&&(ve.innerHTML=re);fe=ve.firstChild;)be.appendChild(fe);return be}(y[1]),P.hasChildNodes()&&L<P.childNodes.length?(K=P.childNodes[L]).parentNode.insertBefore(q,K):P.appendChild(q),h++):2===y[0]&&(D=h,(w=c).hasChildNodes()&&D<w.childNodes.length&&(O=w.childNodes[D]).parentNode.removeChild(O))})}((B=(O=D).length+(P=y).length+2,L=new Array(B),K=new Array(B),q=function(Ce,Se,Oe,ze,ot){var yt=re(Ce,Se,Oe,ze);if(null===yt||yt.start===Se&&yt.diag===Se-ze||yt.end===Ce&&yt.diag===Ce-Oe)for(var Ve=Ce,Je=Oe;Ve<Se||Je<ze;)Ve<Se&&Je<ze&&O[Ve]===P[Je]?(ot.push([0,O[Ve]]),++Ve,++Je):ze-Oe<Se-Ce?(ot.push([2,O[Ve]]),++Ve):(ot.push([1,P[Je]]),++Je);else{q(Ce,yt.start,Oe,yt.start-yt.diag,ot);for(var it=yt.start;it<yt.end;++it)ot.push([0,O[it]]);q(yt.end,Se,yt.end-yt.diag,ze,ot)}},re=function(Ce,Se,Oe,ze){var ot=Se-Ce,yt=ze-Oe;if(0==ot||0==yt)return null;var Ve,Je,it,Nt,Ht,on=ot-yt,$t=yt+ot,bt=($t%2==0?$t:1+$t)/2;for(L[1+bt]=Ce,K[1+bt]=Se+1,Ve=0;Ve<=bt;++Ve){for(Je=-Ve;Je<=Ve;Je+=2){for(L[it=Je+bt]=Je===-Ve||Je!==Ve&&L[it-1]<L[it+1]?L[it+1]:L[it-1]+1,Ht=(Nt=L[it])-Ce+Oe-Je;Nt<Se&&Ht<ze&&O[Nt]===P[Ht];)L[it]=++Nt,++Ht;if(on%2!=0&&on-Ve<=Je&&Je<=on+Ve&&K[it-on]<=L[it])return be(K[it-on],Je+Ce-Oe,Se,ze)}for(Je=on-Ve;Je<=on+Ve;Je+=2){for(K[it=Je+bt-on]=Je===on-Ve||Je!==on+Ve&&K[it+1]<=K[it-1]?K[it+1]-1:K[it-1],Ht=(Nt=K[it]-1)-Ce+Oe-Je;Ce<=Nt&&Oe<=Ht&&O[Nt]===P[Ht];)K[it]=Nt--,Ht--;if(on%2==0&&-Ve<=Je&&Je<=Ve&&K[it]<=L[it+on])return be(K[it],Je+Ce-Oe,Se,ze)}}},q(0,O.length,0,P.length,fe=[]),fe),w)):i.setContent(c.content,{format:"raw",no_selection:!F(ve)||!Xh(ve)||!ve.isFakeCaret}),i.selection.moveToBookmark(ve)}function aw(i){return"fragmented"===i.type?i.fragments.join(""):i.content}function nC(i){var c=zt.fromTag("body",sC());return Dg(c,aw(i)),Tn(ol(c,"*[data-mce-bogus]"),Ch),c.dom.innerHTML}function A1(i,c){return!(!i||!c)&&(y=c,aw(i)===aw(y)||(h=c,nC(i)===nC(h)));var h,y}function zb(i){return 0===i.get()}function ry(i,c,h){zb(h)&&(i.typing=c)}function If(i,c){i.typing&&(ry(i,!1,c),i.add())}function Jd(i){return{undoManager:{beforeChange:function(c,h){var y=i,w=h;zb(c)&&w.set(Km(y.selection))},add:function(c,h,y,w,D,O){return function(P,B,L,K,q,re,fe){var ve=Bb(P);if(re=fn.extend(re=re||{},ve),!1===zb(K)||P.removed)return null;var be=B.data[L.get()];if(P.fire("BeforeAddUndo",{level:re,lastLevel:be,originalEvent:fe}).isDefaultPrevented()||be&&A1(be,re))return null;B.data[L.get()]&&q.get().each(function(ze){B.data[L.get()].beforeBookmark=ze});var Ce=P.getParam("custom_undo_redo_levels",0,"number");if(Ce&&B.data.length>Ce){for(var Se=0;Se<B.data.length-1;Se++)B.data[Se]=B.data[Se+1];B.data.length--,L.set(B.data.length)}re.bookmark=Km(P.selection),L.get()<B.data.length-1&&(B.data.length=L.get()+1),B.data.push(re),L.set(B.data.length-1);var Oe={level:re,lastLevel:be,originalEvent:fe};return 0<L.get()?(P.setDirty(!0),P.fire("AddUndo",Oe),P.fire("change",Oe)):P.fire("AddUndo",Oe),re}(i,c,h,y,w,D,O)},undo:function(c,h,y){return w=i,O=h,P=y,(D=c).typing&&(D.add(),D.typing=!1,ry(D,!1,O)),0<P.get()&&(P.set(P.get()-1),D1(w,B=D.data[P.get()],!0),w.setDirty(!0),w.fire("Undo",{level:B})),B;var w,D,O,P,B},redo:function(c,h){return y=i,D=h,(w=c).get()<D.length-1&&(w.set(w.get()+1),D1(y,O=D[w.get()],!1),y.setDirty(!0),y.fire("Redo",{level:O})),O;var y,w,D,O},clear:function(c,h){var y,w=i,D=h;(y=c).data=[],D.set(0),y.typing=!1,w.fire("ClearUndos")},reset:function(c){var h;(h=c).clear(),h.add()},hasUndo:function(c,h){return y=i,w=c,0<h.get()||w.typing&&w.data[0]&&!A1(Bb(y),w.data[0]);var y,w},hasRedo:function(c,h){return y=c,h.get()<y.data.length-1&&!y.typing;var y},transact:function(c,h,y){return D=y,If(w=c,h),w.beforeChange(),w.ignore(D),w.add();var w,D},ignore:function(c,h){try{c.set(c.get()+1),h()}finally{c.set(c.get()-1)}},extra:function(c,h,y,w){var D,O,P=i,B=h,L=w;(D=c).transact(y)&&(O=D.data[B.get()].bookmark,D1(P,D.data[B.get()-1],!0),D.transact(L)&&(D.data[B.get()-1].beforeBookmark=O))}},formatter:{match:function(c,h,y,w){return FS(i,c,h,y,w)},matchAll:function(c,h){return w=c,D=h,O=[],P={},B=(y=i).selection.getStart(),y.dom.getParent(B,function(L){for(var K=0;K<w.length;K++){var q=w[K];!P[q]&&gp(y,L,q,D)&&(P[q]=!0,O.push(q))}},y.dom.getRoot()),O;var y,w,D,O,P,B},matchNode:function(c,h,y,w){return gp(i,c,h,y,w)},canApply:function(c){return function(h){var y=h.formatter.get(c),w=h.dom;if(y)for(var D=th(w,h.selection.getStart()),O=y.length-1;0<=O;O--){var P=y[O];if(!Bo(P)||F(P.defaultBlock))return!0;for(var B=D.length-1;0<=B;B--)if(w.is(D[B],P.selector))return!0}return!1}(i)},closest:function(c){return w=c,X.from((y=i).selection.getStart(!0)).bind(function(D){return Q_(zt.fromDom(D),function(O){return yn(w,function(P){return gp(y,O.dom,B=P)?X.some(B):X.none();var B})},h)}).getOrNull();function h(D){return Fn(D,zt.fromDom(y.getBody()))}var y,w},apply:function(c,h,y){return aC(i,c,h,y)},remove:function(c,h,y,w){return zk(i,c,h,y,w)},toggle:function(c,h,y){var w,D=c,O=h,P=y,B=(w=i).formatter.get(D);(!FS(w,D,O,P)||"toggle"in B[0]&&!B[0].toggle?aC:zk)(w,D,O,P)},formatChanged:function(c,h,y,w,D){return function UM(i,c,h,y,w,D){var O,P,B,L,K,q,re,fe,ve;return null===c.get()&&(P=i,(O=c).set({}),P.on("NodeChange",function(be){XM(P,be.element,O.get())}),P.on("FormatApply FormatRemove",function(be){var Ce=X.from(be.node).map(function(Se){return Ug(Se)?Se:Se.startContainer}).bind(function(Se){return Kr(Se)?X.some(Se):X.from(Se.parentElement)}).getOrThunk(function(){return Uk(P)});XM(P,Ce,O.get())})),B=i,K=h,q=y,re=w,fe=D,ve=(L=c).get(),Tn(K.split(","),function(be){function Ce(){var ze=Hk(B);return Vk(B,ze,be,re,fe).isSome()}var Se,Oe=fr(ve,be).getOrThunk(function(){var ze={withSimilar:{state:hs(!1),similar:!0,callbacks:[]},withoutSimilar:{state:hs(!1),similar:!1,callbacks:[]},withVars:[]};return ve[be]=ze});qe(fe)?((Se=re?Oe.withSimilar:Oe.withoutSimilar).callbacks.push(q),1===Se.callbacks.length&&Se.state.set(Ce())):Oe.withVars.push({state:hs(Ce()),similar:re,vars:fe,callback:q})}),L.set(ve),{unbind:function(){var be,Ce=h,Se=y,Oe=(be=c).get();Tn(Ce.split(","),function(ze){return fr(Oe,ze).each(function(ot){Oe[ze]={withSimilar:ir(ir({},ot.withSimilar),{callbacks:Tr(ot.withSimilar.callbacks,function(yt){return yt!==Se})}),withoutSimilar:ir(ir({},ot.withoutSimilar),{callbacks:Tr(ot.withoutSimilar.callbacks,function(yt){return yt!==Se})}),withVars:Tr(ot.withVars,function(yt){return yt.callback!==Se})}})}),be.set(Oe)}}}(i,c,h,y,w,D)}},editor:{getContent:function(c,h){return w=c,D=h,X.from((y=i).getBody()).fold(Z("tree"===w.format?new Ye("body",11):""),function(O){return P=y,L=O,K=D,be=ir(ir({},B=w),{format:K,get:!0,getInner:!0}),Se="raw"===(Ce=B.no_events?be:P.fire("BeforeGetContent",be)).format?fn.trim(Nr(P.serializer,L.innerHTML)):"text"===Ce.format?P.dom.isEmpty(L)?"":mn(L.innerText||L.textContent):"tree"===Ce.format?P.serializer.serialize(L,Ce):(re=(q=P).serializer.serialize(L,Ce),fe=ya(q),ve=new RegExp("^(<"+fe+"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/"+fe+">[\r\n]*|<br \\/>[\r\n]*)$"),re.replace(ve,"")),Ce.content=Ot(["text","tree"],Ce.format)||Md(zt.fromDom(L))?Se:fn.trim(Se),(Ce.no_events?Ce:P.fire("GetContent",Ce)).content;var P,B,L,K,q,re,fe,ve,be,Ce,Se});var y,w,D},setContent:function(c,h){return function Ek(i,c,h){var y,w=(y=c,ir(ir({format:"html"},h),{set:!0,content:J0(y)?"":y})),D=h.no_events?w:i.fire("BeforeSetContent",w);return J0(c)||(c=D.content),X.from(i.getBody()).fold(Z(c),function(O){return J0(c)?function(fe,ve,be,Ce){var Se,Oe,ze,ot;Se=fe.parser.getNodeFilters(),Oe=fe.parser.getAttributeFilters(),ze=be,ot=function(Ve,Je){var it,Nt,Ht={},on={},$t=[];for(it in ze.firstChild&&tw(ze.firstChild,function(bt){Tn(Ve,function(St){St.name===bt.name&&(Ht[St.name]?Ht[St.name].nodes.push(bt):Ht[St.name]={filter:St,nodes:[bt]})}),Tn(Je,function(St){"string"==typeof bt.attr(St.name)&&(on[St.name]?on[St.name].nodes.push(bt):on[St.name]={filter:St,nodes:[bt]})})}),Ht)Do(Ht,it)&&$t.push(Ht[it]);for(Nt in on)Do(on,Nt)&&$t.push(on[Nt]);return $t}(Se,Oe),Tn(ot,function(Ve){Tn(Ve.filter.callbacks,function(Je){Je(Ve.nodes,Ve.filter.name,{})})});var yt=Fr({validate:fe.validate},fe.schema).serialize(be);return Ce.content=Md(zt.fromDom(ve))?yt:fn.trim(yt),ng(fe,Ce.content,Ce.no_selection),Ce.no_events||fe.fire("SetContent",Ce),be}(i,O,c,D):(P=i,B=O,K=D,0===(L=c).length||/^\s+$/.test(L)?(q='<br data-mce-bogus="1">',"TABLE"===B.nodeName?L="<tr><td>"+q+"</td></tr>":/^(UL|OL)$/.test(B.nodeName)&&(L="<li>"+q+"</li>"),L=(re=ya(P))&&P.schema.isValidChild(B.nodeName.toLowerCase(),re.toLowerCase())?(L=q,P.dom.createHTML(re,$x(P),L)):L||'<br data-mce-bogus="1">',ng(P,L,K.no_selection),P.fire("SetContent",K)):("raw"!==K.format&&(L=Fr({validate:P.validate},P.schema).serialize(P.parser.parse(L,{isRootContent:!0,insert:!0}))),K.content=Md(zt.fromDom(B))?L:fn.trim(L),ng(P,K.content,K.no_selection),K.no_events||P.fire("SetContent",K)),K.content);var P,B,L,K,q,re})}(i,c,h)},insertContent:function(c,h){return WM(i,c,h)},addVisual:function(c){var h,y=c,w=(h=i).dom,D=F(y)?y:h.getBody();qe(h.hasVisual)&&(h.hasVisual=h.getParam("visual",!0,"boolean")),Tn(w.select("table,a",D),function(O){switch(O.nodeName){case"TABLE":var P=h.getParam("visual_table_class","mce-item-table","string"),B=w.getAttrib(O,"border");B&&"0"!==B||!h.hasVisual?w.removeClass(O,P):w.addClass(O,P);break;case"A":var L,K;w.getAttrib(O,"href")||(L=w.getAttrib(O,"name")||O.id,K=h.getParam("visual_anchor_class","mce-item-anchor","string"),L&&h.hasVisual?w.addClass(O,K):w.removeClass(O,K))}}),h.fire("VisualAid",{element:y,hasVisual:h.hasVisual})}},selection:{getContent:function(c,h){return function(y,w,D){var O,P=(O=w,ir(ir({},D=void 0===D?{}:D),{format:O,get:!0,selection:!0})),B=y.fire("BeforeGetContent",P);if(B.isDefaultPrevented())return y.fire("GetContent",B),B.content;if("text"===B.format)return X.from((Ce=y).selection.getRng()).map(function(Oe){var ze=X.from(Ce.dom.getParent(Oe.commonAncestorContainer,Ce.dom.isBlock)),ot=Ce.getBody(),yt=ze.map(function($t){return $t.nodeName}).getOr("div").toLowerCase(),Ve=zr.browser.isIE()&&"pre"!==yt,Je=Ce.dom.add(ot,yt,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},Oe.cloneContents()),it=ig(Je,Ve),Nt=mn(Je.textContent);if(Ce.dom.remove(Je),og(Nt,0)||og(Nt,Nt.length-1)){var Ht=ig(ze.getOr(ot),Ve),on=Ht.indexOf(it);return-1===on?it:(og(Ht,on-1)?" ":"")+it+(og(Ht,on+it.length)?" ":"")}return it}).getOr("");B.getInner=!0;var L,K,q,re,fe,ve,be,Ce,Se=(K=B,q=(L=y).selection.getRng(),re=L.dom.create("body"),fe=L.selection.getSel(),ve=eg(L,F0(fe)),(be=K.contextual?function ny(i,c){var h,y,w,D,O,P,B,L=G_(c,i);return 0<L.length?function qM(i,c){return xs(c[0],"table",de(Fn,i)).bind(function(h){var y,w,D=c[0],O=c[c.length-1],P=function M1(i){var c=mp(Wh(i),0,[]);return Tn(ol(i,"tr"),function(h,y){Tn(ol(h,"td,th"),function(w,D){!function(O,P,B,L,K){for(var q=jM(K,"rowspan"),re=jM(K,"colspan"),fe=O.rows,ve=B;ve<B+q;ve++){fe[ve]||(fe[ve]=rg(Vd(L),[]));for(var be=P;be<P+re;be++)fe[ve].cells[be]=ve===B&&be===P?K:Wh(K)}}(c,function(O,P,B){for(;((K=O.rows)[B]?K[B].cells:[])[P];)P++;var K;return P}(c,D,y),y,h,w)})}),mp(c.element,$S(c.rows),c.rows)}(h);return w=O,Wk(y=P,D).bind(function(B){return Wk(y,w).map(function(L){return K=y,q=B.x,fe=L.x,be=(re=B.y)<(ve=L.y)?JS(K,q,re,fe,ve):JS(K,q,ve,fe,re),mp(K.element,$S(be),be);var K,q,re,fe,ve,be})}).map(function(B){return T1([(K=ln((L=B).rows,function(fe){var ve=ln(fe.cells,function(Ce){var Se=Vd(Ce);return Th(Se,"colspan"),Th(Se,"rowspan"),Se}),be=Wh(fe.element);return wd(be,ve),be}),q=Wh(L.element),wd(re=zt.fromTag("tbody"),K),ss(q,re),q)]);var L,K,q,re})}).getOrThunk(eC)}(i,L):(h=i,0<(y=c).length&&y[0].collapsed?eC():(w=h,O=zt.fromDom((D=y[0]).cloneContents()),B=Or(P=function QS(i,c){var h,y,w,D=zt.fromDom(c.commonAncestorContainer),O=Ii(D,i),P=Tr(O,function(L){return Ha(L)||N_(L)}),B=(w=c,rr(y=O,function(L){return"li"===va(L)&&Zh(L,w)}).fold(Z([]),function(L){return rr(y,function(K){return"ul"===va(K)||"ol"===va(K)}).map(function(K){var q=zt.fromTag(va(K));return function P_(i,c){var h=i.dom;On(c,function(y,w){!function(D,O,P){if(!Ae(P))throw console.error("Invalid call to CSS.set. Property ",O,":: Value ",P,":: Element ",D),new Error("CSS value must be a string: "+P);pl(D)&&D.style.setProperty(O,P)}(h,w,y)})}(q,qr(Mi(K),function(re,fe){return Xr(fe,"list-style")})),[zt.fromTag("li"),q]}).getOr([])}));return ln(P.concat(B.length?B:la(h=D)?Ru(h).filter(Oh).fold(Z([]),function(L){return[h,L]}):Oh(h)?[h]:[]),Wh)}(w,D),function(K,q){return ss(q,K),q},O),0<P.length?T1([B]):B))}(zt.fromDom(L.getBody()),ve).dom:q.cloneContents())&&re.appendChild(be),L.selection.serializer.serialize(re,K));return"tree"===B.format?Se:(B.content=y.selection.isCollapsed()?"":Se,y.fire("GetContent",B),B.content)}(i,c,h)}},raw:{getModel:function(){return X.none()}}}}function Ll(i){return Do(i.plugins,"rtc")}function ac(i){return i.rtcInstance||Jd(i)}function Ws(i){var c=i.rtcInstance;if(c)return c;throw new Error("Failed to get RTC instance not yet initialized.")}function Rv(i){return 0===i.dom.length?(us(i),X.none()):X.some(i)}function sw(i,c,h,y){i.bind(function(w){return(y?ES:p1)(w.dom,y?w.dom.length:0),c.filter(ta).map(function(D){var O=h,P=y,B=w.dom,L=D.dom,K=(P?B:L).length;P?(Mb(B,L,!1,!P),O.setStart(L,K)):(Mb(L,B,!1,!P),O.setEnd(L,K))})}).orThunk(function(){var w=y;return c.filter(function(D){return fo.isBookmarkNode(D.dom)}).bind(w?Es:Ku).or(c).filter(ta).map(function(D){var O,P=y;Ru(O=D).each(function(B){var L=O.dom;P&&m1(B,dn(L,0))?p1(L,0):!P&&kb(B,dn(L,L.length))&&ES(L,L.length)})})})}function Fb(i,c,h){var y;i&&Do(i,c)&&(0===(y=Tr(i[c],function(w){return w!==h})).length?delete i[c]:i[c]=y)}GS=function(i){var c,h=i.selection.getRng(),y=mc(["pre"]);h.collapsed||(c=i.selection.getSelectedBlocks(),XS(qS(qS(c,y),function(w){return y(w.previousSibling)&&-1!==tu(c,w.previousSibling)}),function(w){var D,O=w.previousSibling;jr(D=w).remove(),jr(O).append("<br><br>").append(D.childNodes)}))},S1.pre||(S1.pre=[]),S1.pre.push(GS);var I1=fn.each,oC=function(i,c,h){I1(i.childNodes,function(y){nw(y)&&(c(y)&&h(y),y.hasChildNodes()&&oC(y,c,h))})},O1=hf([{keep:[]},{rename:["name"]},{removed:[]}]),Lv=/^(src|href|style)$/,iC=fn.each,Bv=R0,zv=fn.each,sg=fn.each,aC=function(i,c,h,y){function w(ze,ot){var yt;$e((ot=void 0===ot?re:ot).onformat)&&ot.onformat(ze,ot,h,y),sg(ot.styles,function(Ve,Je){ve.setStyle(ze,Je,Mf(Ve,h))}),!ot.styles||(yt=ve.getAttrib(ze,"style"))&&ve.setAttrib(ze,"data-mce-style",yt),sg(ot.attributes,function(Ve,Je){ve.setAttrib(ze,Je,Mf(Ve,h))}),sg(ot.classes,function(Ve){Ve=Mf(Ve,h),ve.hasClass(ze,Ve)||ve.addClass(ze,Ve)})}function D(ze,ot){var yt=!1;return sg(ze,function(Ve){return!!Bo(Ve)&&(F(Ve.collapsed)&&Ve.collapsed!==fe||!ve.is(ot,Ve.selector)||sd(ot)?void 0:(w(ot,Ve),!(yt=!0)))}),yt}function O(ze,ot,yt){var Ve=[],Je=!0,it=re.inline||re.block,Nt=function(Ht){if(Ae(Ht)){var on=ve.create(Ht);return w(on),on}return null}(it);z0(ze,ot,function(Ht){var on,$t=function(bt){var St=!1,At=Je,Yt=bt.nodeName.toLowerCase(),Nn=bt.parentNode,jn=Nn.nodeName.toLowerCase();if(Kr(bt)&&ze.getContentEditable(bt)&&(At=Je,Je="true"===ze.getContentEditable(bt),St=!0),Hi(bt)&&!function(Pn,Un,Hn,lr){if(Pn.getParam("format_empty_lines",!1,"boolean")&&ca(Un)){var vn=Om(Pn.schema),Zn=(Bn=zt.fromDom(Hn),hr=function(st){return sd(st.dom)},((To=(vr=Bn).dom).parentNode?function(i,c){return rr(i.dom.childNodes,function(h){return st=zt.fromDom(h),!Fn(vr,st)&&hr(st);var st}).map(zt.fromDom)}(zt.fromDom(To.parentNode)):X.none()).isSome());return Eo(vn,lr)&&xo(zt.fromDom(Hn.parentNode),!1)&&!Zn}var Bn,vr,hr,To}(i,re,bt,jn))return on=null,void(jd(re)&&ze.remove(bt));if(jd(re)&&re.wrapper&&gp(i,bt,c,h))on=null;else{if(Je&&!St&&jd(re)&&!re.wrapper&&N0(i,Yt)&&Qm(i,jn,it)){var In=ze.rename(bt,it);return w(In),Ve.push(In),void(on=null)}if(Bo(re)){var Wn=D(q,bt);if(!Wn&&F(Nn)&&o1(re)&&(Wn=D(q,Nn)),!ca(re)||Wn)return void(on=null)}!Je||St||!Qm(i,it,Yt)||!Qm(i,jn,it)||!yt&&br(bt)&&Nm(bt.data)||sd(bt)||ca(re)&&ze.isBlock(bt)?(on=null,Tn(ki(bt.childNodes),$t),St&&(Je=At),on=null):(on||(on=ze.clone(Nt,!1),bt.parentNode.insertBefore(on,bt),Ve.push(on)),on.appendChild(bt))}};Tn(Ht,$t)}),!0===re.links&&Tn(Ve,function(Ht){var on=function($t){"A"===$t.nodeName&&w($t,re),Tn(ki($t.childNodes),on)};on(Ht)}),Tn(Ve,function(Ht){var on,$t,bt,St,At,Nn,jn,In,Wn,Pn,Un,Hn,lr,vn,Zn,Bn,vr,hr=(on=0,Tn(Ht.childNodes,function(st){var kt;F(kt=st)&&br(kt)&&0===kt.length||Oc(st)||on++}),on);function To(st){var kt;1===st.nodeType&&st.parentNode&&1===st.parentNode.nodeType&&(kt=L0(Hn,st.parentNode),Hn.getStyle(st,"color")&&kt?Hn.setStyle(st,"text-decoration",kt):Hn.getStyle(st,"text-decoration")===kt&&Hn.setStyle(st,"text-decoration",null))}!(1<Ve.length)&&ze.isBlock(Ht)||0!==hr?(ca(re)||jd(re)&&re.wrapper)&&(re.exact||1!==hr||(Ht=rr((Un=Ht).childNodes,mu).filter(function(st){return Q0(ze,st,re)}).map(function(st){var kt=ze.clone(st,!1);return w(kt),ze.replace(kt,Un,!0),ze.remove(st,!0),kt}).getOr(Un)),Zn=i,Bn=h,vr=Ht,zv(q,function(st){var kt,cn;ca(st)&&zv(Zn.dom.select(st.inline,vr),function(gn){nw(gn)&&am(Zn,st,Bn,gn,st.exact?gn:null)}),kt=Zn.dom,(cn=st).clear_child_styles&&I1(kt.select(cn.links?"*:not(a)":"*",vr),function(gn){nw(gn)&&I1(cn.styles,function(Xn,Vr){kt.setStyle(gn,Vr,"")})})}),jn=re,gp(Nn=i,(Pn=Ht).parentNode,In=c,Wn=h)&&am(Nn,jn,Wn,Pn)||jn.merge_with_parents&&Nn.dom.getParent(Pn.parentNode,function(st){if(gp(Nn,st,In,Wn))return am(Nn,jn,Wn,Pn),!0}),(At=re).styles&&At.styles.backgroundColor&&oC(Ht,Lb(ze,"fontSize"),C1(ze,"backgroundColor",Mf(At.styles.backgroundColor,h))),Hn=ze,vn=Ht,(lr=re).styles&&(lr.styles.color||lr.styles.textDecoration)&&(fn.walk(vn,To,"childNodes"),To(vn)),$t=ze,St=Ht,!ca(bt=re)||"sub"!==bt.inline&&"sup"!==bt.inline||(oC(St,Lb($t,"fontSize"),C1($t,"fontSize","")),$t.remove($t.select("sup"===bt.inline?"sub":"sup",St),!0)),YS(ze,re,0,Ht)):ze.remove(Ht,!0)})}var P,B,L,K,q=i.formatter.get(c),re=q[0],fe=!y&&i.selection.isCollapsed(),ve=i.dom,be=i.selection;if("false"!==ve.getContentEditable(be.getNode()))re&&(y?Ug(y)?D(q,y)||((P=ve.createRng()).setStartBefore(y),P.setEndAfter(y),O(ve,ud(i,P,q),!0)):O(ve,y,!0):fe&&ca(re)&&!xv(i).length?function(ze,ot,yt){var Ve,Je=ze.selection,it=Je.getRng(),Nt=it.startOffset,Ht=it.startContainer.nodeValue,on=Wg(ze.getBody(),Je.getStart());on&&(Ve=eo(on));var $t,bt,St,At,Yt=/[^\s\u00a0\u00ad\u200b\ufeff]/;Ht&&0<Nt&&Nt<Ht.length&&Yt.test(Ht.charAt(Nt))&&Yt.test(Ht.charAt(Nt-1))?($t=Je.getBookmark(),it.collapse(!0),bt=Zg(ud(ze,it,ze.formatter.get(ot))),ze.formatter.apply(ot,yt,bt),Je.moveToBookmark($t)):(on&&Ve.nodeValue===Nb||(St=ze.getDoc(),At=VS(!0).dom,Ve=(on=St.importNode(At,!0)).firstChild,it.insertNode(on),Nt=1),ze.formatter.apply(ot,yt,on),Je.setCursorLocation(Ve,Nt))}(i,c,h):(B=be.getNode(),L=q[0],i.settings.forced_root_block||!L.defaultBlock||ve.getParent(B,ve.isBlock)||aC(i,L.defaultBlock),be.setRng(Dk(be.getRng())),H0(be,!0,function(){jg(i,function(ze,ot){var yt=ot?ze:ud(i,ze,q);O(ve,yt,!1)})}),ja(ve,be,be.getRng()),i.nodeChanged()),K=i,XS(S1[c],function(ze){ze(K)})),Xg(i,c,y,h);else{y=be.getNode();for(var Ce=0,Se=q.length;Ce<Se;Ce++){var Oe=q[Ce];if(Oe.ceFalseOverride&&Bo(Oe)&&ve.is(y,Oe.selector)){w(y,Oe);break}}Xg(i,c,y,h)}},Uk=function(i){return i.selection.getStart()},XM=function(i,c,h){var y=Hk(i,c);On(h,function(w,D){function O(P){var B,L=Vk(i,y,D,P.similar,Fk(P)?P.vars:void 0),K=L.isSome();P.state.get()!==K&&(P.state.set(K),B=L.getOr(c),Fk(P)?P.callback(K,{node:B,format:D,parents:y}):Tn(P.callbacks,function(q){return q(K,{node:B,format:D,parents:y})}))}Tn([w.withSimilar,w.withoutSimilar],O),Tn(w.withVars,O)})},sC=wn(function(){return document.implementation.createHTMLDocument("undo")});function E1(i){return i.select}function uw(i){return i&&i.ownerDocument&&Bt(zt.fromDom(i.ownerDocument),zt.fromDom(i))}function jk(i,c,h,y){function w(Ve,Je){return function ag(i,c,h){var y,w=(y=c,ir(ir({format:"html"},h=void 0===h?{}:h),{set:!0,selection:!0,content:y})),D=w;if(!w.no_events){var O=i.fire("BeforeSetContent",w);if(O.isDefaultPrevented())return void i.fire("SetContent",O);D=O}D.content=function(B,L){if("raw"===L.format)return L.content;var K=B.selection.getRng(),q=B.dom.getParent(K.commonAncestorContainer,B.dom.isBlock),re=q?{context:q.nodeName.toLowerCase()}:{},fe=B.parser.parse(L.content,ir(ir({isRootContent:!0,forced_root_block:!1},re),L));return Fr({validate:B.validate},B.schema).serialize(fe)}(i,D);var P=i.selection.getRng();(function(B,L){var K=X.from(L.firstChild).map(zt.fromDom),q=X.from(L.lastChild).map(zt.fromDom);B.deleteContents(),B.insertNode(L);var re=K.bind(Ku).filter(ta).bind(Rv),fe=q.bind(Es).filter(ta).bind(Rv);sw(re,K,B,!0),sw(fe,q,B,!1),B.collapse(!1)})(P,P.createContextualFragment(D.content)),i.selection.setRng(P),oh(i,P),D.no_events||i.fire("SetContent",D)}(y,Ve,Je)}function D(){var Ve=P(),Je=null==Ve?void 0:Ve.anchorNode,it=null==Ve?void 0:Ve.focusNode;if(!Ve||!Je||!it||Am(Je)||Am(it))return!0;var Nt=i.createRng();Nt.setStart(Je,Ve.anchorOffset),Nt.collapse(!0);var Ht=i.createRng();return Ht.setStart(it,Ve.focusOffset),Ht.collapse(!0),Nt.compareBoundaryPoints(Nt.START_TO_START,Ht)<=0}function O(Ve){var Je=be();Je.collapse(!!Ve),Ce(Je)}function P(){return c.getSelection?c.getSelection():c.document.selection}var B,L,K,q,re,fe,ve=function(Ve,Je){return re||(re={},fe={},q.on("NodeChange",function(it){var Nt=it.element,Ht=yt(Nt),on={};fn.each(re,function($t,bt){ot(bt,Ht).each(function(St){fe[bt]||(Tn($t,function(At){At(!0,{node:St,selector:bt,parents:Ht})}),fe[bt]=$t),on[bt]=$t})}),fn.each(fe,function($t,bt){on[bt]||(delete fe[bt],fn.each($t,function(St){St(!1,{node:Nt,selector:bt,parents:Ht})}))})})),re[Ve]||(re[Ve]=[]),re[Ve].push(Je),ot(Ve,yt(q.selection.getStart())).each(function(){fe[Ve]=re[Ve]}),{unbind:function(){Fb(re,Ve,Je),Fb(fe,Ve,Je)}}},be=function(){function Ve($t,bt,St){try{return bt.compareBoundaryPoints($t,St)}catch{return-1}}var Je,it,Nt,Ht=c.document;if(void 0!==y.bookmark&&!1===hu(y)){var on=X0(y);if(on.isSome())return on.map(function($t){return eg(y,[$t])[0]}).getOr(Ht.createRange())}try{(Je=P())&&!Am(Je.anchorNode)&&(it=0<Je.rangeCount?Je.getRangeAt(0):(Je.createRange?Je:Ht).createRange(),it=eg(y,[it])[0])}catch{}return(it=it||(Ht.createRange?Ht.createRange():Ht.body.createTextRange())).setStart&&9===it.startContainer.nodeType&&it.collapsed&&(Nt=i.getRoot(),it.setStart(Nt,0),it.setEnd(Nt,0)),B&&L&&(0===Ve(it.START_TO_START,it,B)&&0===Ve(it.END_TO_END,it,B)?it=L:L=B=null),it},Ce=function(Ve,Je){var it;if((Nt=Ve)&&(E1(Nt)||uw(Nt.startContainer)&&uw(Nt.endContainer))){var Nt,Ht=E1(Ve)?Ve:null;if(Ht){L=null;try{Ht.select()}catch{}}else{var on=P();if(Ve=y.fire("SetSelectionRange",{range:Ve,forward:Je}).range,on){L=Ve;try{on.removeAllRanges(),on.addRange(Ve)}catch{}!1===Je&&on.extend&&(on.collapse(Ve.endContainer,Ve.endOffset),on.extend(Ve.startContainer,Ve.startOffset)),B=0<on.rangeCount?on.getRangeAt(0):null}Ve.collapsed||Ve.startContainer!==Ve.endContainer||!on.setBaseAndExtent||zr.ie||Ve.endOffset-Ve.startOffset<2&&Ve.startContainer.hasChildNodes()&&(it=Ve.startContainer.childNodes[Ve.startOffset])&&"IMG"===it.tagName&&(on.setBaseAndExtent(Ve.startContainer,Ve.startOffset,Ve.endContainer,Ve.endOffset),on.anchorNode===Ve.startContainer&&on.focusNode===Ve.endContainer||on.setBaseAndExtent(it,0,it,1)),y.fire("AfterSetSelectionRange",{range:Ve,forward:Je})}}},Se={bookmarkManager:null,controlSelection:null,dom:K=i,win:c,serializer:h,editor:q=y,collapse:O,setCursorLocation:function(Ve,Je){var it=i.createRng();F(Ve)&&F(Je)?(it.setStart(Ve,Je),it.setEnd(Ve,Je),Ce(it),O(!1)):(ep(i,it,y.getBody(),!0),Ce(it))},getContent:function(Ve){return it=(Je=void 0===(Je=Ve)?{}:Je).format||"html",Nt=Je,Ws(y).selection.getContent(it,Nt);var Je,it,Nt},setContent:w,getBookmark:function(Ve,Je){return Oe.getBookmark(Ve,Je)},moveToBookmark:function(Ve){return Oe.moveToBookmark(Ve)},select:function(Ve,Je){var it=i,Nt=Je;return X.from(Ve).map(function(Ht){var on=it.nodeIndex(Ht),$t=it.createRng();return $t.setStart(Ht.parentNode,on),$t.setEnd(Ht.parentNode,on+1),Nt&&(ep(it,$t,Ht,!0),ep(it,$t,Ht,!1)),$t}).each(Ce),Ve},isCollapsed:function(){var Ve=be(),Je=P();return!(!Ve||Ve.item)&&(Ve.compareEndPoints?0===Ve.compareEndPoints("StartToEnd",Ve):!Je||Ve.collapsed)},isForward:D,setNode:function(Ve){return w(i.getOuterHTML(Ve)),Ve},getNode:function(){return function(Ve,Je){if(!Je)return Ve;var it=Je.startContainer,Nt=Je.endContainer,Ht=Je.startOffset,on=Je.endOffset,$t=Je.commonAncestorContainer;return!Je.collapsed&&(it===Nt&&on-Ht<2&&it.hasChildNodes()&&($t=it.childNodes[Ht]),3===it.nodeType&&3===Nt.nodeType&&(it=it.length===Ht?Ev(it.nextSibling,!0):it.parentNode,Nt=0===on?Ev(Nt.previousSibling,!1):Nt.parentNode,it&&it===Nt))?it:$t&&3===$t.nodeType?$t.parentNode:$t}(y.getBody(),be())},getSel:P,setRng:Ce,getRng:be,getStart:function(Ve){return ul(y.getBody(),be(),Ve)},getEnd:function(Ve){return Ov(y.getBody(),be(),Ve)},getSelectedBlocks:function(Ve,Je){return function(it,Nt,Ht,on){var $t=[],bt=it.getRoot();if(Ht=it.getParent(Ht||ul(bt,Nt,Nt.collapsed),it.isBlock),on=it.getParent(on||Ov(bt,Nt,Nt.collapsed),it.isBlock),Ht&&Ht!==bt&&$t.push(Ht),Ht&&on&&Ht!==on)for(var St,At=new cs(Ht,bt);(St=At.next())&&St!==on;)it.isBlock(St)&&$t.push(St);return on&&Ht!==on&&on!==bt&&$t.push(on),$t}(i,be(),Ve,Je)},normalize:function(){var Ve=be();if(1<F0(P()).length||!V0(y))return Ve;var Je=Nc(i,Ve);return Je.each(function(it){Ce(it,D())}),Je.getOr(Ve)},selectorChanged:function(Ve,Je){return ve(Ve,Je),Se},selectorChangedWithUnbind:ve,getScrollContainer:function(){for(var Ve,Je=i.getRoot();Je&&"BODY"!==Je.nodeName;){if(Je.scrollHeight>Je.clientHeight){Ve=Je;break}Je=Je.parentNode}return Ve},scrollIntoView:function(Ve,Je){F(Ve)?(y.inline?dd:d1)(y,Ve,Je):oh(y,be(),Je)},placeCaretAt:function(Ve,Je){return Ce(xb(Ve,Je,y.getDoc()))},getBoundingClientRect:function(){var Ve=be();return Ve.collapsed?dn.fromRangeStart(Ve).getClientRects()[0]:Ve.getBoundingClientRect()},destroy:function(){c=B=L=null,ze.destroy()}},Oe=fo(Se),ze=bb(Se,y);function ot(Ve,Je){return rr(Je,function(it){return K.is(it,Ve)})}function yt(Ve){return K.getParents(Ve,null,K.getRoot())}return Se.bookmarkManager=Oe,Se.controlSelection=ze,Se}function oy(i){var c,h=decodeURIComponent(i).split(","),y=/data:([^;]+)/.exec(h[0]);return{type:c=y?y[1]:c,data:h[1]}}function Vb(i,c){var h;try{h=atob(c)}catch{return X.none()}for(var y=new Uint8Array(h.length),w=0;w<y.length;w++)y[w]=h.charCodeAt(w);return X.some(new Blob([y],{type:i}))}function Hb(i){return 0===i.indexOf("blob:")?(c=i,new Ri(function(y,w){function D(){w("Cannot convert "+c+" to Blob. Resource might not exist or is inaccessible.")}try{var O=new XMLHttpRequest;O.open("GET",c,!0),O.responseType="blob",O.onload=function(){200===O.status?y(O.response):D()},O.onerror=D,O.send()}catch{D()}})):0===i.indexOf("data:")?(h=i,new Ri(function(y){var w=oy(h);Vb(w.type,w.data).fold(function(){return y(new Blob([]))},y)})):null;var c,h}function uC(i){return(i||"blobid")+sy++}function lw(i,c,h,y){(i.padd_empty_with_br||c.insert)&&h[y.name]?y.empty().append(new Ye("br",1)).shortEnded=!0:y.empty().append(new Ye("#text",3)).value=xc}function pp(i,c,h,y){return y.isEmpty(c,h,function(w){return(D=i.getElementRule(w.name))&&D.paddEmpty;var D})}function lC(i,c){void 0===c&&(c=Vf());var h={},y=[],w={},D={};function O(B){var L=B.name;L in h&&((q=w[L])?q.push(B):w[L]=[B]);for(var K=y.length;K--;){var q,re=y[K].name;re in B.attributes.map&&((q=D[re])?q.push(B):D[re]=[B])}return B}(i=i||{}).validate=!("validate"in i)||i.validate,i.root_name=i.root_name||"body";var P={schema:c,addAttributeFilter:function(B,L){Fc(Ub(B),function(K){for(var q=0;q<y.length;q++)if(y[q].name===K)return void y[q].callbacks.push(L);y.push({name:K,callbacks:[L]})})},getAttributeFilters:function(){return[].concat(y)},addNodeFilter:function(B,L){Fc(Ub(B),function(K){var q=h[K];q||(h[K]=q=[]),q.push(L)})},getNodeFilters:function(){var B,L=[];for(B in h)Do(h,B)&&L.push({name:B,callbacks:h[B]});return L},filterNode:O,parse:function(B,L){var K,q,re,fe,ve,be,Ce,Se,Oe=[];function ze(Wn){for(var Pn=c.getBlockElements(),Un=Wn.prev;Un&&3===Un.type;){var Hn=Un.value.replace(St,"");if(0<Hn.length)return Un.value=Hn,0;var lr=Un.next;if(lr){if(3===lr.type&&lr.value.length){Un=Un.prev;continue}if(!Pn[lr.name]&&"script"!==lr.name&&"style"!==lr.name){Un=Un.prev;continue}}var vn=Un.prev;Un.remove(),Un=vn}}function ot(Wn,Pn){var Un,Hn=new Ye(Wn,Pn);return Wn in h&&((Un=w[Wn])?Un.push(Hn):w[Wn]=[Hn]),Hn}L=L||{},w={},D={};var yt=P1(Ya("script,style,head,html,body,title,meta,param"),c.getBlockElements()),Ve=Om(c),Je=c.getNonEmptyElements(),it=c.children,Nt=i.validate,Ht=("forced_root_block"in L?L:i).forced_root_block,on=!1===Ht?"":!0===Ht?"p":Ht,$t=c.getWhiteSpaceElements(),bt=/^[ \t\r\n]+/,St=/[ \t\r\n]+$/,At=/[ \t\r\n]+/g,Yt=/^[ \t\r\n]+$/,Nn=Do($t,L.context)||Do($t,i.root_name),jn=Mn({validate:Nt,document:i.document,allow_html_data_urls:i.allow_html_data_urls,allow_svg_data_urls:i.allow_svg_data_urls,allow_script_urls:i.allow_script_urls,allow_conditional_comments:i.allow_conditional_comments,preserve_cdata:i.preserve_cdata,self_closing_elements:function(Wn){var Pn,Un={};for(Pn in Wn)"li"!==Pn&&"p"!==Pn&&(Un[Pn]=Wn[Pn]);return Un}(c.getSelfClosingElements()),cdata:function(Wn){Se.append(ot("#cdata",4)).value=Wn},text:function(Wn,Pn){var Un,Hn;Nn||(Wn=Wn.replace(At," "),(Hn=Se.lastChild)&&(Do(yt,Hn.name)||"br"===Hn.name)&&(Wn=Wn.replace(bt,""))),0!==Wn.length&&((Un=ot("#text",3)).raw=!!Pn,Se.append(Un).value=Wn)},comment:function(Wn){Se.append(ot("#comment",8)).value=Wn},pi:function(Wn,Pn){Se.append(ot(Wn,7)).value=Pn,ze(Se)},doctype:function(Wn){Se.append(ot("#doctype",10)).value=Wn,ze(Se)},start:function(Wn,Pn,Un){var Hn=Nt?c.getElementRule(Wn):{};if(Hn){var lr=ot(Hn.outputName||Wn,1);lr.attributes=Pn,lr.shortEnded=Un,Se.append(lr);var vn=it[Se.name];vn&&it[lr.name]&&!vn[lr.name]&&Oe.push(lr);for(var Zn=y.length;Zn--;){var Bn=y[Zn].name;Bn in Pn.map&&((be=D[Bn])?be.push(lr):D[Bn]=[lr])}yt[Wn]&&ze(lr),Un||(Se=lr),!Nn&&$t[Wn]&&(Nn=!0)}},end:function(Wn){var Pn,Un,Hn,lr,vn=Nt?c.getElementRule(Wn):{};if(vn){if(yt[Wn]&&!Nn){if((Pn=Se.firstChild)&&3===Pn.type)if(0<(Un=Pn.value.replace(bt,"")).length)Pn.value=Un,Pn=Pn.next;else for(Hn=Pn.next,Pn.remove(),Pn=Hn;Pn&&3===Pn.type;)Hn=Pn.next,0!==(Un=Pn.value).length&&!Yt.test(Un)||(Pn.remove(),Pn=Hn),Pn=Hn;if((Pn=Se.lastChild)&&3===Pn.type)if(0<(Un=Pn.value.replace(St,"")).length)Pn.value=Un,Pn=Pn.prev;else for(Hn=Pn.prev,Pn.remove(),Pn=Hn;Pn&&3===Pn.type;)Hn=Pn.prev,0!==(Un=Pn.value).length&&!Yt.test(Un)||(Pn.remove(),Pn=Hn),Pn=Hn}Nn&&$t[Wn]&&(Nn=!1);var Zn=pp(c,Je,$t,Se),Bn=Se.parent;vn.paddInEmptyBlock&&Zn&&function(){for(var vr=Se;F(vr);){if(vr.name in Ve)return pp(c,Je,$t,vr);vr=vr.parent}}()?lw(i,L,yt,Se):vn.removeEmpty&&Zn?yt[Se.name]?Se.empty().remove():Se.unwrap():vn.paddEmpty&&(hw(lr=Se,"#text")&&lr.firstChild.value===xc||Zn)&&lw(i,L,yt,Se),Se=Bn}}},c),In=Se=new Ye(L.context||i.root_name,11);if(jn.parse(B,L.format),Nt&&Oe.length&&(L.context?L.invalid=!0:function(Wn){for(var Pn=Ya("tr,td,th,tbody,thead,tfoot,table"),Un=c.getNonEmptyElements(),Hn=c.getWhiteSpaceElements(),lr=c.getTextBlockElements(),vn=c.getSpecialElements(),Zn=function(Zr,zi){if(void 0===zi&&(zi=Zr.parent),vn[Zr.name])Zr.empty().remove();else{for(var ro=0,Lr=Zr.children();ro<Lr.length;ro++){var $o=Lr[ro];c.isValidChild(zi.name,$o.name)||Zn($o,zi)}Zr.unwrap()}},Bn=0;Bn<Wn.length;Bn++){var vr,hr=Wn[Bn],To=void 0,st=void 0;if(hr.parent&&!hr.fixed)if(lr[hr.name]&&"li"===hr.parent.name){for(var kt=hr.next;kt&&lr[kt.name];)kt.name="li",kt.fixed=!0,hr.parent.insert(kt,hr.parent),kt=kt.next;hr.unwrap()}else{var cn=[hr];for(To=hr.parent;To&&!c.isValidChild(To.name,hr.name)&&!Pn[To.name];To=To.parent)cn.push(To);if(To&&1<cn.length)if(c.isValidChild(To.name,hr.name)){cn.reverse();for(var xn=vr=O(cn[0].clone()),gn=0;gn<cn.length-1;gn++){c.isValidChild(xn.name,cn[gn].name)?(st=O(cn[gn].clone()),xn.append(st)):st=xn;for(var Xn=cn[gn].firstChild;Xn&&Xn!==cn[gn+1];){var Vr=Xn.next;st.append(Xn),Xn=Vr}xn=st}pp(c,Un,Hn,vr)?To.insert(hr,cn[0],!0):(To.insert(vr,cn[0],!0),To.insert(hr,vr)),(pp(c,Un,Hn,To=cn[0])||hw(To,"br"))&&To.empty().remove()}else Zn(hr);else hr.parent&&("li"!==hr.name?c.isValidChild(hr.parent.name,"div")&&c.isValidChild("div",hr.name)?hr.wrap(O(new Ye("div",1))):Zn(hr):!(kt=hr.prev)||"ul"!==kt.name&&"ol"!==kt.name?!(kt=hr.next)||"ul"!==kt.name&&"ol"!==kt.name?hr.wrap(O(new Ye("ul",1))):kt.insert(hr,kt.firstChild,!0):kt.append(hr))}}}(Oe)),on&&("body"===In.name||L.isRootContent)&&function(){function Wn(lr){lr&&((Pn=lr.firstChild)&&3===Pn.type&&(Pn.value=Pn.value.replace(bt,"")),(Pn=lr.lastChild)&&3===Pn.type&&(Pn.value=Pn.value.replace(St,"")))}var Pn=In.firstChild,Un=null;if(c.isValidChild(In.name,on.toLowerCase())){for(;Pn;){var Hn=Pn.next;3===Pn.type||1===Pn.type&&"p"!==Pn.name&&!yt[Pn.name]&&!Pn.attr("data-mce-type")?(Un||((Un=ot(on,1)).attr(i.forced_root_block_attrs),In.insert(Un,Pn)),Un.append(Pn)):(Wn(Un),Un=null),Pn=Hn}Wn(Un)}}(),!L.invalid){for(Ce in w)if(Do(w,Ce)){for(be=h[Ce],fe=(K=w[Ce]).length;fe--;)K[fe].parent||K.splice(fe,1);for(q=0,re=be.length;q<re;q++)be[q](K,Ce,L)}for(q=0,re=y.length;q<re;q++)if((be=y[q]).name in D){for(fe=(K=D[be.name]).length;fe--;)K[fe].parent||K.splice(fe,1);for(fe=0,ve=be.callbacks.length;fe<ve;fe++)be.callbacks[fe](K,be.name,L)}}return In}};return function gd(i,c){var y,w,D=i.schema;function O(P){var B,L,K=P.attr("src");(B=P).attr("src")===zr.transparentSrc||F(B.attr("data-mce-placeholder"))||F(P.attr("data-mce-bogus"))||((L=/data:([^;]+);base64,([a-z0-9\+\/=\s]+)/i.exec(K))?X.some({type:L[1],data:decodeURIComponent(L[2])}):X.none()).filter(function(){return function(q,re){if(re.images_dataimg_filter){var fe=new Image;return fe.src=q.attr("src"),On(q.attributes.map,function(ve,be){fe.setAttribute(be,ve)}),re.images_dataimg_filter(fe)}return!0}(P,y)}).bind(function(q){var re=q.type,fe=q.data;return X.from(w.getByData(fe,re)).orThunk(function(){return Vb(re,fe).map(function(ve){var be=w.create(uC(),ve,fe);return w.add(be),be})})}).each(function(q){P.attr("src",q.blobUri())})}c.remove_trailing_brs&&i.addNodeFilter("br",function(P,B,L){var K,q,re,fe,ve,be,Ce,Se,Oe=P.length,ze=fn.extend({},D.getBlockElements()),ot=D.getNonEmptyElements(),yt=D.getWhiteSpaceElements();for(ze.body=1,K=0;K<Oe;K++)if(re=(q=P[K]).parent,ze[q.parent.name]&&q===re.lastChild){for(ve=q.prev;ve;){if("span"!==(be=ve.name)||"bookmark"!==ve.attr("data-mce-type")){"br"===be&&(q=null);break}ve=ve.prev}q&&(q.remove(),pp(D,ot,yt,re)&&(Ce=D.getElementRule(re.name))&&(Ce.removeEmpty?re.remove():Ce.paddEmpty&&lw(c,L,ze,re)))}else{for(fe=q;re&&re.firstChild===fe&&re.lastChild===fe&&!ze[(fe=re).name];)re=re.parent;fe===re&&!0!==c.padd_empty_with_br&&((Se=new Ye("#text",3)).value=xc,q.replace(Se))}}),i.addAttributeFilter("href",function(P){var B,L,K=P.length;if(!c.allow_unsafe_link_target)for(;K--;){var q=P[K];"a"===q.name&&"_blank"===q.attr("target")&&q.attr("rel",(L=void 0,L=(B=q.attr("rel"))?fn.trim(B):"",/\b(noopener)\b/g.test(L)?L:L.split(" ").filter(function(re){return 0<re.length}).concat(["noopener"]).sort().join(" ")))}}),c.allow_html_in_named_anchor||i.addAttributeFilter("id,name",function(P){for(var B,L,K,q,re=P.length;re--;)if("a"===(q=P[re]).name&&q.firstChild&&!q.attr("href"))for(K=q.parent,B=q.lastChild;L=B.prev,K.insert(B,q),B=L;);}),c.fix_list_elements&&i.addNodeFilter("ul,ol",function(P){for(var B,L,K,q=P.length;q--;)"ul"!==(K=(L=P[q]).parent).name&&"ol"!==K.name||(L.prev&&"li"===L.prev.name?L.prev.append(L):((B=new Ye("li",1)).attr("style","list-style-type: none"),L.wrap(B)))}),c.validate&&D.getValidClasses()&&i.addAttributeFilter("class",function(P){for(var B=D.getValidClasses(),L=P.length;L--;){for(var K=P[L],q=K.attr("class").split(" "),re="",fe=0;fe<q.length;fe++){var ve=q[fe],be=!1,Ce=B["*"];Ce&&Ce[ve]&&(be=!0),Ce=B[K.name],(be=!(be||!Ce||!Ce[ve])||be)&&(re&&(re+=" "),re+=ve)}re.length||(re=null),K.attr("class",re)}}),(w=(y=c).blob_cache)&&i.addAttributeFilter("src",function(P){return Tn(P,O)})}(P,i),i.inline_styles&&function Fv(i,c){var h,y,w,D,O=wu();c.convert_fonts_to_spans&&(y=i,w=O,D=fn.explode(c.font_size_legacy_values),y.addNodeFilter("font",function(P){Tn(P,function(B){var L,K=w.parse(B.attr("style")),q=B.attr("color"),re=B.attr("face"),fe=B.attr("size");q&&(K.color=q),re&&(K["font-family"]=re),fe&&(K["font-size"]=D[parseInt(B.attr("size"),10)-1]),B.name="span",B.attr("style",w.serialize(K)),L=B,Tn(["color","face","size"],function(ve){L.attr(ve,null)})})})),h=O,i.addNodeFilter("strike",function(P){Tn(P,function(B){var L=h.parse(B.attr("style"));L["text-decoration"]="line-through",B.name="span",B.attr("style",h.serialize(L))})})}(P,i),P}function cw(i,c,h){-1===fn.inArray(c,h)&&(i.addAttributeFilter(h,function(y,w){for(var D=y.length;D--;)y[D].attr(w,null)}),c.push(h))}function Wb(i,c){var h=function YM(i,c){var h=["data-mce-selected"],y=c&&c.dom?c.dom:Vo.DOM,w=c&&c.schema?c.schema:Vf(i);i.entity_encoding=i.entity_encoding||"named",i.remove_trailing_brs=!("remove_trailing_brs"in i)||i.remove_trailing_brs;var D,O=lC(i,w),P=i,B=y;return(D=O).addAttributeFilter("data-mce-tabindex",function(L,K){for(var q=L.length;q--;){var re=L[q];re.attr("tabindex",re.attr("data-mce-tabindex")),re.attr(K,null)}}),D.addAttributeFilter("src,href,style",function(L,K){for(var q="data-mce-"+K,re=P.url_converter,fe=P.url_converter_scope,ve=L.length;ve--;){var be=L[ve],Ce=be.attr(q);void 0!==Ce?(be.attr(K,0<Ce.length?Ce:null),be.attr(q,null)):(Ce=be.attr(K),"style"===K?Ce=B.serializeStyle(B.parseStyle(Ce),be.name):re&&(Ce=re.call(fe,Ce,K,be.name)),be.attr(K,0<Ce.length?Ce:null))}}),D.addAttributeFilter("class",function(L){for(var K=L.length;K--;){var q,re=L[K];re.attr("class")&&(q=re.attr("class").replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),re.attr("class",0<q.length?q:null))}}),D.addAttributeFilter("data-mce-type",function(L,K,q){for(var re=L.length;re--;){var fe=L[re];"bookmark"!==fe.attr("data-mce-type")||q.cleanup||(X.from(fe.firstChild).exists(function(ve){return!Nm(ve.value)})?fe.unwrap():fe.remove())}}),D.addNodeFilter("noscript",function(L){for(var K=L.length;K--;){var q=L[K].firstChild;q&&(q.value=Yl.decode(q.value))}}),D.addNodeFilter("script,style",function(L,K){for(var q=function(Ce){return Ce.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},re=L.length;re--;){var fe,ve=L[re],be=ve.firstChild?ve.firstChild.value:"";"script"===K?((fe=ve.attr("type"))&&ve.attr("type","mce-no/type"===fe?null:fe.replace(/^mce\-/,"")),"xhtml"===P.element_format&&0<be.length&&(ve.firstChild.value="// <![CDATA[\n"+q(be)+"\n// ]]>")):"xhtml"===P.element_format&&0<be.length&&(ve.firstChild.value="\x3c!--\n"+q(be)+"\n--\x3e")}}),D.addNodeFilter("#comment",function(L){for(var K=L.length;K--;){var q=L[K];P.preserve_cdata&&0===q.value.indexOf("[CDATA[")?(q.name="#cdata",q.type=4,q.value=B.decode(q.value.replace(/^\[CDATA\[|\]\]$/g,""))):0===q.value.indexOf("mce:protected ")&&(q.name="#text",q.type=3,q.raw=!0,q.value=unescape(q.value).substr(14))}}),D.addNodeFilter("xml:namespace,input",function(L,K){for(var q=L.length;q--;){var re=L[q];7===re.type?re.remove():1===re.type&&("input"!==K||re.attr("type")||re.attr("type","text"))}}),D.addAttributeFilter("data-mce-type",function(L){Tn(L,function(K){"format-caret"===K.attr("data-mce-type")&&(K.isEmpty(D.schema.getNonEmptyElements())?K.remove():K.unwrap())})}),D.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-type,data-mce-resize,data-mce-placeholder",function(L,K){for(var q=L.length;q--;)L[q].attr(K,null)}),{schema:w,addNodeFilter:O.addNodeFilter,addAttributeFilter:O.addAttributeFilter,serialize:function(L,K){var q,re,fe,ve,be,Ce,Se,Oe,ze,ot,yt,Ve,Je,it,Nt,Ht,on,$t,bt,St,At,Yt,Nn,jn,In,Wn,Pn,Un,Hn,lr=ir({format:"html"},K=void 0===K?{}:K),vn=(Ve=L,Nn=Je=lr,q=(yt=c)&&yt.hasEventListeners("PreProcess")&&!Nn.no_events?(Nt=Je,St=(it=yt).dom,At=Ve.cloneNode(!0),(Yt=document.implementation).createHTMLDocument&&(on=Yt.createHTMLDocument(""),fn.each("BODY"===At.nodeName?At.childNodes:[At],function(vr){on.body.appendChild(on.importNode(vr,!0))}),At="BODY"!==At.nodeName?on.body.firstChild:on.body,Ht=St.doc,St.doc=on),$t=it,bt=ir(ir({},Nt),{node:At}),$t.fire("PreProcess",bt),Ht&&(St.doc=Ht),At):Ve,fe=mn((re=lr).getInner?q.innerHTML:y.getOuterHTML(q)),re.selection||Md(zt.fromDom(q))?fe:fn.trim(fe)),Zn=(ve=O,be=vn,Se=(Ce=lr).selection?ir({forced_root_block:!1},Ce):Ce,!Bn(ot=(Oe=ve.parse(be,Se)).lastChild)||Bn(ze=ot.prev)&&(ot.remove(),ze.remove()),Oe);function Bn(vr){return vr&&"br"===vr.name}return"tree"===lr.format?Zn:(jn=c,In=lr,Wn=Zn,Hn=Fr(i,w).serialize(Wn),In.no_events||!jn?Hn:(Pn=jn,Un=ir(ir({},In),{content:Hn}),Pn.fire("PostProcess",Un).content))},addRules:w.addValidElements,setRules:w.setValidElements,addTempAttr:de(cw,O,h),getTempAttrs:Z(h),getNodeFilters:O.getNodeFilters,getAttributeFilters:O.getAttributeFilters}}(i,c);return{schema:h.schema,addNodeFilter:h.addNodeFilter,addAttributeFilter:h.addAttributeFilter,serialize:h.serialize,addRules:h.addRules,setRules:h.setRules,addTempAttr:h.addTempAttr,getTempAttrs:h.getTempAttrs,getNodeFilters:h.getNodeFilters,getAttributeFilters:h.getAttributeFilters}}function iy(i,c,h){return y=h=void 0===h?{}:h,ac(i).editor.setContent(c,y);var y}function zc(i){return X.from(i).each(function(c){return c.destroy()})}function Gb(i){var c=Ee(i)?i.join(" "):i;return Tr(ln(Ae(c)?c.split(" "):[],As),function(h){return 0<h.length})}function Vv(i,c){return Do(i.sections(),c)}function Xk(i,c){return fr(i,"toolbar_mode").orThunk(function(){return fr(i,"toolbar_drawer").map(function(h){return!1===h?"wrap":h})}).getOr(c)}function Hv(i,c,h){return X.from(c.settings[h]).filter(i)}function cC(i,c){return c.dom[i]}function dC(i,c){return parseInt(bu(c,i),10)}function vp(i,c,h){var y,w,D,O,P,B,L=zt.fromDom(i.getBody()),K=i.inline?L:zt.fromDom(Zu(L).dom.documentElement),q=(y=i.inline,D=c,O=h,P=(w=K).dom.getBoundingClientRect(),{x:D-(y?P.left+w.dom.clientLeft+jb(w):0),y:O-(y?P.top+w.dom.clientTop+R1(w):0)}),re=q.x,fe=q.y,ve=KM(B=K),be=$M(B);return 0<=re&&0<=fe&&re<=ve&&fe<=be}function fw(i){function c(){var L=i.theme;return L&&L.getNotificationManagerImpl?L.getNotificationManagerImpl():{open:K,close:K,reposition:K,getArgs:K};function K(){throw new Error("Theme did not provide a NotificationManager implementation.")}}function h(){return X.from(P[0])}function y(){0<P.length&&c().reposition(P)}function w(L){ai(P,function(K){return K===L}).each(function(K){P.splice(K,1)})}function D(L,K){if(void 0===K&&(K=!0),!i.removed&&(re=(q=i).inline?q.getBody():q.getContentAreaContainer(),X.from(re).map(zt.fromDom).map(yo).getOr(!1)))return K&&i.fire("BeforeOpenNotification",{notification:L}),rr(P,function(fe){return!((ve=c().getArgs(fe)).type!==L.type||ve.text!==L.text||ve.progressBar||ve.timeout||L.progressBar||L.timeout);var ve}).getOrThunk(function(){i.editorManager.setActive(i);var fe=c().open(L,function(){w(fe),y(),h().fold(function(){return i.focus()},function(ve){return zt.fromDom(ve.getEl()).dom.focus()})});return P.push(fe),y(),i.fire("OpenNotification",{notification:ir({},fe)}),fe});var q,re}var O,P=[],B=Z(P);return(O=i).on("SkinLoaded",function(){var L=O.getParam("service_message");L&&D({text:L,type:"warning",timeout:0},!1),y()}),O.on("show ResizeEditor ResizeWindow NodeChange",function(){It.requestAnimationFrame(y)}),O.on("remove",function(){Tn(P.slice(),function(L){c().close(L)})}),{open:D,close:function(){h().each(function(L){c().close(L),w(L),y()})},getNotifications:B}}var Yk,Wv,sy=0,hw=function(i,c){return i&&i.firstChild&&i.firstChild===i.lastChild&&i.firstChild.name===c},Ya=fn.makeMap,Fc=fn.each,Ub=fn.explode,P1=fn.extend,yp=Vo.DOM,Gv=(Yk=function(i,c){return Ne(i)&&Ne(c)?Gv(i,c):c},function(){for(var i=[],c=0;c<arguments.length;c++)i[c]=arguments[c];if(0===i.length)throw new Error("Can't merge zero objects");for(var h={},y=0;y<i.length;y++){var w,D=i[y];for(w in D)Do(D,w)&&(h[w]=Yk(h[w],D[w]))}return h}),fC="autoresize_on_init,content_editable_state,convert_fonts_to_spans,inline_styles,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),Zk="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),ZM="imagetools,toc".split(","),Kk=aa().deviceType,$k=Kk.isTouch(),hC=Kk.isPhone(),Jk=Kk.isTablet(),N1=["lists","autolink","autosave"],Qk={table_grid:!1,object_resizing:!1,resize:!1},gw=(Wv={},{add:function(i,c){Wv[i]=c},get:function(i){return Wv[i]||{icons:{}}},has:function(i){return Do(Wv,i)}}),KM=de(cC,"clientWidth"),$M=de(cC,"clientHeight"),R1=de(dC,"margin-top"),jb=de(dC,"margin-left"),cl=Js.PluginManager,sm=Js.ThemeManager;function gC(i){function c(){var O=i.theme;return O&&O.getWindowManagerImpl?O.getWindowManagerImpl():{open:P,openUrl:P,alert:P,confirm:P,close:P,getParams:P,setParams:P};function P(){throw new Error("Theme did not provide a WindowManager implementation.")}}function h(O,P){return function(){for(var B=[],L=0;L<arguments.length;L++)B[L]=arguments[L];return P?P.apply(O,B):void 0}}function y(O){i.fire("CloseWindow",{dialog:O}),0===(D=Tr(D,function(P){return P!==O})).length&&i.focus()}function w(O){i.editorManager.setActive(i),fd(i);var P,B=O();return D.push(P=B),i.fire("OpenWindow",{dialog:P}),B}var D=[];return i.on("remove",function(){Tn(D,function(O){c().close(O)})}),{open:function(O,P){return w(function(){return c().open(O,P,y)})},openUrl:function(O){return w(function(){return c().openUrl(O,y)})},alert:function(O,P,B){var L=c();L.alert(O,h(B||L,P))},confirm:function(O,P,B){var L=c();L.confirm(O,h(B||L,P))},close:function(){X.from(D[D.length-1]).each(function(O){c().close(O),y(O)})}}}function qb(i,c){i.notificationManager.open({type:"error",text:c})}function L1(i,c){i._skinLoaded?qb(i,c):i.on("SkinLoaded",function(){qb(i,c)})}function Xb(i,c,h){$h(i,c,{message:h}),console.error(h)}function B1(i,c,h){return h?"Failed to load "+i+": "+h+" from url "+c:"Failed to load "+i+" url: "+c}function z1(i,c,h){Xb(i,"PluginLoadError",B1("plugin",c,h))}function mw(){function i(y,w){return{status:y,resultUri:w}}function c(y){return y in h}var h={};return{hasBlobUri:c,getResultUri:function(y){var w=h[y];return w?w.resultUri:null},isPending:function(y){return!!c(y)&&1===h[y].status},isUploaded:function(y){return!!c(y)&&2===h[y].status},markPending:function(y){h[y]=i(1,null)},markUploaded:function(y,w){h[y]=i(2,w)},removeFailed:function(y){delete h[y]},destroy:function(){h={}}}}function mC(i){return i+ni+++"s"+(new Date).getTime().toString(36)+c()+c()+c();function c(){return Math.round(4294967295*Math.random()).toString(36)}}function pw(i){return function(){return i.notificationManager.open({text:i.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}}function uy(i,c){return function Yb(i,c){function h(P,B,L,K){var q=new XMLHttpRequest;q.open("POST",c.url),q.withCredentials=c.credentials,q.upload.onprogress=function(fe){K(fe.loaded/fe.total*100)},q.onerror=function(){L("Image upload failed due to a XHR Transport error. Code: "+q.status)},q.onload=function(){var fe,ve,be;q.status<200||300<=q.status?L("HTTP Error: "+q.status):(fe=JSON.parse(q.responseText))&&"string"==typeof fe.location?B((be=fe.location,(ve=c.basePath)?ve.replace(/\/$/,"")+"/"+be.replace(/^\//,""):be)):L("Invalid JSON: "+q.responseText)};var re=new FormData;re.append("file",P.blob(),P.filename()),q.send(re)}function y(P,B){return{url:B,blobInfo:P,status:!0}}function w(P,B,L){return{url:"",blobInfo:P,status:!1,error:{message:B,options:L}}}function D(P,B){fn.each(O[P],function(L){L(B)}),delete O[P]}var O={};return!1===$e(c.handler)&&(c.handler=h),{upload:function(P,B){return c.url||c.handler!==h?(K=B,L=fn.grep(P,function(q){return!i.isUploaded(q.blobUri())}),Ri.all(fn.map(L,function(q){return i.isPending(q.blobUri())?(be=q.blobUri(),new Ri(function(Ce){O[be]=O[be]||[],O[be].push(Ce)})):(fe=c.handler,ve=K,i.markPending((re=q).blobUri()),new Ri(function(Ce){var Se;try{var Oe=function(){Se&&Se.close()};fe(re,function(ze){Oe(),i.markUploaded(re.blobUri(),ze),D(re.blobUri(),y(re,ze)),Ce(y(re,ze))},function(ze,ot){var yt=ot||{};Oe(),i.removeFailed(re.blobUri()),D(re.blobUri(),w(re,ze,yt)),Ce(w(re,ze,yt))},function(ze){ze<0||100<ze||X.from(Se).orThunk(function(){return X.from(ve).map(le)}).each(function(ot){(Se=ot).progressBar.value(ze)})})}catch(ze){Ce(w(re,ze.message,{}))}}));var re,fe,ve,be}))):new Ri(function(q){q([])});var L,K}}}(c,{url:i.getParam("images_upload_url","","string"),basePath:i.getParam("images_upload_base_path","","string"),credentials:i.getParam("images_upload_credentials",!1,"boolean"),handler:i.getParam("images_upload_handler",null,"function")})}function Zb(i,c){function h(B){var L,K=Ko.create((w="string"==typeof B?{name:B,classes:[],attrs:{}}:B).name),q=K;return(L=w).classes.length&&Ko.addClass(q,L.classes.join(" ")),Ko.setAttribs(q,L.attrs),K}var y,w,D,O=c&&c.schema||Vf({}),P=function(B,L,K){var q,re,fe,ve,be,Ce,Se,Oe=0<L.length&&L[0],ze=Oe&&Oe.name,ot=(ve=ze,be="string"!=typeof(fe=B)?fe.nodeName.toLowerCase():fe,!(!(Se=(Ce=O.getElementRule(be))&&Ce.parentsRequired)||!Se.length)&&(ve&&-1!==fn.inArray(Se,ve)?ve:Se[0]));if(ot)ze===ot?(re=L[0],L=L.slice(1)):re=ot;else if(Oe)re=L[0],L=L.slice(1);else if(!K)return B;return re&&(q=h(re)).appendChild(B),K&&(q||(q=Ko.create("div")).appendChild(B),fn.each(K,function(yt){var Ve=h(yt);q.insertBefore(Ve,B)})),P(q,L,re&&re.siblings)};return i&&i.length?(y=h(w=i[0]),(D=Ko.create("div")).appendChild(P(y,i.slice(1),w.siblings)),D):""}function vC(i){var c,h={classes:[],attrs:{}};return"*"!==(i=h.selector=fn.trim(i))&&(c=i.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,function(y,w,D,O,P){switch(w){case"#":h.attrs.id=D;break;case".":h.classes.push(D);break;case":":-1!==fn.inArray("checked disabled enabled read-only required".split(" "),D)&&(h.attrs[D]=D)}var B;return"["!==O||(B=P.match(/([\w\-]+)(?:\=\"([^\"]+))?/))&&(h.attrs[B[1]]=B[2]),""})),h.name=c||"div",h}function eT(i,c){var h,y,w="",D=(y=i.getParam("preview_styles","font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"),Ae(y)?y:"");if(""===D)return"";function O(fe){return fe.replace(/%(\w+)/g,"")}if("string"==typeof c){if(!(c=i.formatter.get(c)))return;c=c[0]}if("preview"in c){var P=fr(c,"preview");if(Ul(P,!1))return"";D=P.getOr(D)}var B,L=c.block||c.inline||"span",K=(B=c.selector)&&"string"==typeof B?(B=(B=B.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),fn.map(B.split(/(?:>|\s+(?![^\[\]]+\]))/),function(fe){var ve=fn.map(fe.split(/(?:~\+|~|\+)/),vC),be=ve.pop();return ve.length&&(be.siblings=ve),be}).reverse()):[],q=K.length?(K[0].name||(K[0].name=L),L=c.selector,Zb(K,i)):Zb([L],i),re=Ko.select(L,q)[0]||q.firstChild;return Mw(c.styles,function(fe,ve){var be=O(fe);be&&Ko.setStyle(re,ve,be)}),Mw(c.attributes,function(fe,ve){var be=O(fe);be&&Ko.setAttrib(re,ve,be)}),Mw(c.classes,function(fe){var ve=O(fe);Ko.hasClass(re,ve)||Ko.addClass(re,ve)}),i.fire("PreviewFormats"),Ko.setStyles(q,{position:"absolute",left:-65535}),i.getBody().appendChild(q),h=Ko.getStyle(i.getBody(),"fontSize",!0),h=/px$/.test(h)?parseInt(h,10):0,Mw(D.split(" "),function(fe){var ve=Ko.getStyle(re,fe,!0);if(!("background-color"===fe&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(ve)&&(ve=Ko.getStyle(i.getBody(),fe,!0),"#ffffff"===Ko.toHex(ve).toLowerCase())||"color"===fe&&"#000000"===Ko.toHex(ve).toLowerCase())){if("font-size"===fe&&/em|%$/.test(ve)){if(0===h)return;ve=parseFloat(ve)/(/%$/.test(ve)?100:1)*h+"px"}"border"===fe&&ve&&(w+="padding:0 2px;"),w+=fe+":"+ve+";"}}),i.fire("AfterPreviewFormats"),Ko.remove(q),w}function ly(i){var c,h,y,w,D,O,P=(w={},(D=function(L,K){L&&(Ae(L)?(Tn(K=Ee(K)?K:[K],function(q){qe(q.deep)&&(q.deep=!Bo(q)),qe(q.split)&&(q.split=!Bo(q)||ca(q)),qe(q.remove)&&Bo(q)&&!ca(q)&&(q.remove="none"),Bo(q)&&ca(q)&&(q.mixed=!0,q.block_expand=!0),Ae(q.classes)&&(q.classes=q.classes.split(/\s+/))}),w[L]=K):On(L,function(q,re){D(re,q)}))})((h=(c=i).dom,y={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"left"},inherit:!1,preview:!1,defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size",defaultBlock:"div"},{selector:"img,table,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li",styles:{textAlign:"justify"},inherit:!1,defaultBlock:"div",preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all",preserve_attributes:["class","style"]},{inline:"s",remove:"all",preserve_attributes:["class","style"]}],forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",defaultBlock:"p",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(L,K,q){return Kr(L)&&L.hasAttribute("href")},onformat:function(L,K,q){fn.each(q,function(re,fe){h.setAttrib(L,fe,re)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function(L){var K;return null!==(K=null==L?void 0:L.customValue)&&void 0!==K?K:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]},fn.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),function(L){y[L]={block:L,remove:"all"}}),y)),D(c.getParam("formats")),{get:function(L){return F(L)?w[L]:w},has:function(L){return Do(w,L)},register:D,unregister:function(L){return L&&w[L]&&delete w[L],w}}),B=hs(null);return function(L){L.addShortcut("meta+b","","Bold"),L.addShortcut("meta+i","","Italic"),L.addShortcut("meta+u","","Underline");for(var K=1;K<=6;K++)L.addShortcut("access+"+K,"",["FormatBlock",!1,"h"+K]);L.addShortcut("access+7","",["FormatBlock",!1,"p"]),L.addShortcut("access+8","",["FormatBlock",!1,"div"]),L.addShortcut("access+9","",["FormatBlock",!1,"address"])}(i),(O=i).on("mouseup keydown",function(L){var K=O,q=L.keyCode,re=K.selection,fe=K.getBody();Ho(K,null,!1),8!==q&&46!==q||!re.isCollapsed()||re.getStart().innerHTML!==Nb||Ho(K,Wg(fe,re.getStart())),37!==q&&39!==q||Ho(K,Wg(fe,re.getStart()))}),{get:P.get,has:P.has,register:P.register,unregister:P.unregister,apply:function(L,K,q){var re=L,fe=K,ve=q;Ws(i).formatter.apply(re,fe,ve)},remove:function(L,K,q,re){var fe=L,ve=K,be=q,Ce=re;Ws(i).formatter.remove(fe,ve,be,Ce)},toggle:function(L,K,q){var re=L,fe=K,ve=q;Ws(i).formatter.toggle(re,fe,ve)},match:function(L,K,q,re){return fe=L,ve=K,be=q,Ce=re,Ws(i).formatter.match(fe,ve,be,Ce);var fe,ve,be,Ce},closest:function(L){return K=L,Ws(i).formatter.closest(K);var K},matchAll:function(L,K){return q=L,re=K,Ws(i).formatter.matchAll(q,re);var q,re},matchNode:function(L,K,q,re){return fe=L,ve=K,be=q,Ce=re,Ws(i).formatter.matchNode(fe,ve,be,Ce);var fe,ve,be,Ce},canApply:function(L){return K=L,Ws(i).formatter.canApply(K);var K},formatChanged:function(L,K,q,re){return fe=B,ve=L,be=K,Ce=q,Se=re,Ws(i).formatter.formatChanged(fe,ve,be,Ce,Se);var fe,ve,be,Ce,Se},getCssText:de(eT,i)}}function vw(i){switch(i.toLowerCase()){case"undo":case"redo":case"mcerepaint":case"mcefocus":return 1;default:return}}function V1(i){var c,h,y,w,D,O=rl(),P=hs(0),B=hs(0),L={data:[],typing:!1,beforeChange:function(){var q=P,re=O;Ws(i).undoManager.beforeChange(q,re)},add:function(q,re){return fe=L,ve=B,be=P,Ce=O,Se=q,Oe=re,Ws(i).undoManager.add(fe,ve,be,Ce,Se,Oe);var fe,ve,be,Ce,Se,Oe},undo:function(){return q=L,re=P,fe=B,Ws(i).undoManager.undo(q,re,fe);var q,re,fe},redo:function(){return q=B,re=L.data,Ws(i).undoManager.redo(q,re);var q,re},clear:function(){var q=L,re=B;Ws(i).undoManager.clear(q,re)},reset:function(){var q=L;Ws(i).undoManager.reset(q)},hasUndo:function(){return q=L,re=B,Ws(i).undoManager.hasUndo(q,re);var q,re},hasRedo:function(){return q=L,re=B,Ws(i).undoManager.hasRedo(q,re);var q,re},transact:function(q){return re=L,fe=P,ve=q,Ws(i).undoManager.transact(re,fe,ve);var re,fe,ve},ignore:function(q){var re=P,fe=q;Ws(i).undoManager.ignore(re,fe)},extra:function(q,re){var fe=L,ve=B,be=q,Ce=re;Ws(i).undoManager.extra(fe,ve,be,Ce)}};return Ll(i)||(y=L,w=P,D=hs(!1),(h=i).on("init",function(){y.add()}),h.on("BeforeExecCommand",function(q){vw(q.command)||(If(y,w),y.beforeChange())}),h.on("ExecCommand",function(q){vw(q.command)||K(q)}),h.on("ObjectResizeStart cut",function(){y.beforeChange()}),h.on("SaveContent ObjectResized blur",K),h.on("dragend",K),h.on("keyup",function(q){var re=q.keyCode;q.isDefaultPrevented()||((33<=re&&re<=36||37<=re&&re<=40||45===re||q.ctrlKey)&&(K(),h.nodeChanged()),46!==re&&8!==re||h.nodeChanged(),D.get()&&y.typing&&!1===A1(Bb(h),y.data[0])&&(!1===h.isDirty()&&(h.setDirty(!0),h.fire("change",{level:y.data[0],lastLevel:null})),h.fire("TypingUndo"),D.set(!1),h.nodeChanged()))}),h.on("keydown",function(q){var fe=q.keyCode;q.isDefaultPrevented()||(33<=fe&&fe<=36||37<=fe&&fe<=40||45===fe?y.typing&&K(q):!(fe<16||20<fe)||224===fe||91===fe||y.typing||q.ctrlKey&&!q.altKey||q.metaKey||(y.beforeChange(),ry(y,!0,w),y.add({},q),D.set(!0)))}),h.on("mousedown",function(q){y.typing&&K(q)}),h.on("input",function(q){q.inputType&&("insertReplacementText"===q.inputType||"insertText"===q.inputType&&null===q.data||"insertFromPaste"===q.inputType||"insertFromDrop"===q.inputType)&&K(q)}),h.on("AddUndo Undo Redo ClearUndos",function(q){q.isDefaultPrevented()||h.nodeChanged()})),(c=i).addShortcut("meta+z","","Undo"),c.addShortcut("meta+y,meta+shift+z","","Redo"),L;function K(q){ry(y,!1,w),y.add({},q)}}function tT(i){return"keydown"===i.type||"keyup"===i.type}function yC(i){var c=i.keyCode;return c===Dr.BACKSPACE||c===Dr.DELETE}function Uv(i,c){return $n(zt.fromDom(c),i.getParam("inline_boundaries_selector","a[href],code,.mce-annotation","string"))}function jv(i,c,h){var y,w,D=(y=i,w=c,Tr(Vo.DOM.getParents(h.container(),"*",w),y));return X.from(D[D.length-1])}function Vc(i,c){if(!c)return c;var h=c.container(),y=c.offset();return i?gf(h)?br(h.nextSibling)?dn(h.nextSibling,0):dn.after(h):jp(c)?dn(h,y+1):c:gf(h)?br(h.previousSibling)?dn(h.previousSibling,h.previousSibling.data.length):dn.before(h):Td(c)?dn(h,y-1):c}function yw(i){return p0(i)||la(i)}function cy(i,c){return Bt(i,c)?bl(c,yw,(h=i,function(y){return Fn(h,zt.fromDom(y.dom.parentNode))})):X.none();var h}function bC(i){var c,h,y;i.dom.isEmpty(i.getBody())&&(i.setContent(""),y=(h=(c=i).getBody()).firstChild&&c.dom.isBlock(h.firstChild)?h.firstChild:h,c.selection.setCursorLocation(y,0))}function nT(i,c){return{from:i,to:c}}function lh(i,c){return cy(zt.fromDom(i),zt.fromDom(c.container())).map(function(h){return{block:h,position:c}})}function xC(i){var c,h=ai(c=mr(i),_l).fold(Z(c),function(y){return c.slice(0,y)});return Tn(h,us),h}function ug(i,c){return rr(Ii(c,i).reverse(),function(h){return xo(h)}).each(us)}function Kb(i,c,h,y){if(xo(h))return qo(h),Rl(h.dom);0===Tr(Lf(y),function(D){return!xo(D)}).length&&xo(c)&&Ps(y,zt.fromTag("br"));var w=Xd(h.dom,dn.before(y.dom));return Tn(xC(c),function(D){Ps(y,D)}),ug(i,c),w}function bw(i,c,h){if(xo(h))return us(h),xo(c)&&qo(c),Rl(c.dom);var y=Kh(h.dom);return Tn(xC(c),function(w){ss(h,w)}),ug(i,c),y}function rT(i,c){Jm(i,c.dom).map(function(h){return h.getNode()}).map(zt.fromDom).filter(Di).each(us)}function oT(i,c,h){return rT(!0,c),rT(!1,h),(Bt(w=h,y=c)?(D=Ii(y,w),X.from(D[D.length-1])):X.none()).fold(de(bw,i,c,h),de(Kb,i,c,h));var y,w,D}function xw(i,c,h,y){return c?oT(i,y,h):oT(i,h,y)}function H1(i,c){var h,y,w,D,O,P,B,L=zt.fromDom(i.getBody()),K=(h=L.dom,y=c,((w=i.selection.getRng()).collapsed?(O=y,P=lh(D=h,dn.fromRangeStart(w)),B=P.bind(function(q){return sl(O,D,q.position).bind(function(re){return lh(D,re).map(function(fe){return ve=D,be=O,Hi((Ce=fe).position.getNode())&&!1===xo(Ce.block)?Jm(!1,Ce.block.dom).bind(function(Se){return Se.isEqual(Ce.position)?sl(be,ve,Se).bind(function(Oe){return lh(ve,Oe)}):X.some(Ce)}).getOr(Ce):Ce;var ve,be,Ce})})}),wa(P,B,nT).filter(function(q){return!1===Fn(q.from.block,q.to.block)&&Ru((fe=q).from.block).bind(function(ve){return Ru(fe.to.block).filter(function(be){return Fn(ve,be)})}).isSome()&&!1===uo((re=q).from.block.dom)&&!1===uo(re.to.block.dom);var re,fe})):X.none()).bind(function(q){return xw(L,c,q.from.block,q.to.block)}));return K.each(function(q){i.selection.setRng(q.toRange())}),K.isSome()}function _w(i,c){var h=zt.fromDom(c),y=de(Fn,i);return Cr(h,kr,y).isSome()}function um(i,c){return!i.selection.isCollapsed()&&function dy(i){var c,h,y,w,D,O,P,B,L,K,q=zt.fromDom(i.getBody()),re=i.selection.getRng();return L=Xd((D=q).dom,dn.fromRangeStart(O=re)).isNone(),K=oc(D.dom,dn.fromRangeEnd(O)).isNone(),!_w(P=D,(B=O).startContainer)&&!_w(P,B.endContainer)&&L&&K?((w=i).setContent(""),w.selection.setCursorLocation(),!0):(c=q,y=(h=i.selection).getRng(),wa(cy(c,zt.fromDom(y.startContainer)),cy(c,zt.fromDom(y.endContainer)),function(fe,ve){return!1===Fn(fe,ve)&&(y.deleteContents(),xw(c,!0,fe,ve).each(function(be){h.setRng(be.toRange())}),!0)}).getOr(!1))}(i)}function Qd(i,c,h,y,w){return X.from(c._selectionOverrides.showCaret(i,h,y,w))}function fy(i,c){var h,y;return i.fire("BeforeObjectSelected",{target:c}).isDefaultPrevented()?X.none():X.some(((y=(h=c).ownerDocument.createRange()).selectNode(h),y))}function ww(i,c,h){var y=Zm(1,i.getBody(),c),w=dn.fromRangeStart(y),D=w.getNode();if(Ic(D))return Qd(1,i,D,!w.isAtEnd(),!1);var O=w.getNode(!0);if(Ic(O))return Qd(1,i,O,!1,!1);var P=i.dom.getParent(w.getNode(),function(B){return bp(B)||Qb(B)});return Ic(P)?Qd(1,i,P,!1,h):X.none()}function _C(i,c,h){return c.collapsed?ww(i,c,h).getOr(c):c}function Sw(i){return om(i)||Pb(i)}function wC(i){return im(i)||sh(i)}function Za(i,c,h,y,w,D){var O,P;return Qd(y,i,D.getNode(!w),w,!0).each(function(B){var L;c.collapsed?(L=c.cloneRange(),w?L.setEnd(B.startContainer,B.startOffset):L.setStart(B.endContainer,B.endOffset),L.deleteContents()):c.deleteContents(),i.selection.setRng(B)}),O=i.dom,br(P=h)&&0===P.data.length&&O.remove(P),!0}function Cw(i,c){var h=i.selection.getRng();if(!br(h.commonAncestorContainer))return!1;var y=c?uu.Forwards:uu.Backwards,w=Mu(i.getBody()),D=de(Pa,c?w.next:w.prev),O=c?Sw:wC,P=Bg(y,i.getBody(),h),B=Vc(c,D(P));if(!B||!A0(P,B))return!1;if(O(B))return Za(i,h,P.getNode(),y,c,B);var L=D(B);return!!(L&&O(L)&&A0(B,L))&&Za(i,h,P.getNode(),y,c,L)}function SC(i,c,h){return sl(c,i,h).bind(function(y){return q=y.getNode(),kr(zt.fromDom(q))||la(zt.fromDom(q))||(P=i,K=y,Uh(!(B=c),L=h).fold(function(){return Uh(B,K).fold(ht,re)},re))?X.none():c&&uo(y.getNode())||!1===c&&uo(y.getNode(!0))?(w=i,D=h,O=y.getNode(!1===c),cy(zt.fromDom(w),zt.fromDom(D.getNode())).map(function(fe){return xo(fe)?sc.remove(fe.dom):sc.moveToElement(O)}).orThunk(function(){return X.some(sc.moveToElement(O))})):c&&im(h)||!1===c&&om(h)?X.some(sc.moveToPosition(y)):X.none();var w,D,O,P,B,L,K,q;function re(fe){return Ha(zt.fromDom(fe))&&!rc(L,K,P)}})}function hy(i,c){return X.from(qg(i.getBody(),c))}function iT(i,c){var h=i.selection.getNode();return hy(i,h).filter(uo).fold(function(){return q=i.getBody(),fe=Zm((re=c)?1:-1,q,i.selection.getRng()),ve=dn.fromRangeStart(fe),be=zt.fromDom(q),(!1===re&&im(ve)?X.some(sc.remove(ve.getNode(!0))):re&&om(ve)?X.some(sc.remove(ve.getNode())):!1===re&&om(ve)&&Ts(be,ve)?ty(be,ve).map(function(Ce){return sc.remove(Ce.getNode())}):re&&im(ve)&&eu(be,ve)?hp(be,ve).map(function(Ce){return sc.remove(Ce.getNode())}):(y=q,w=re,L=(D=ve).getNode(!1===(B=w)),K=B?"after":"before",Kr(L)&&L.getAttribute("data-mce-caret")===K?(P=D.getNode(!1===(O=w)),(O&&uo(P.nextSibling)?X.some(sc.moveToElement(P.nextSibling)):!1===O&&uo(P.previousSibling)?X.some(sc.moveToElement(P.previousSibling)):X.none()).fold(function(){return SC(y,w,D)},X.some)):SC(y,w,D).bind(function(Ce){return Se=y,Oe=D,Ce.fold(function(ze){return X.some(sc.remove(ze))},function(ze){return X.some(sc.moveToElement(ze))},function(ze){return rc(Oe,ze,Se)?X.none():X.some(sc.moveToPosition(ze))});var Se,Oe}))).exists(function(Ce){return Ce.fold(function(Ve){return ot._selectionOverrides.hideFakeCaret(),tm(ot,yt,zt.fromDom(Ve)),!0},(ze=yt=c,function(Ve){var Je=ze?dn.before(Ve):dn.after(Ve);return Oe.selection.setRng(Je.toRange()),!0}),(Se=Oe=ot=i,function(Ve){return Se.selection.setRng(Ve.toRange()),!0}));var Se,Oe,ze,ot,yt});var y,w,D,O,P,B,L,K,q,re,fe,ve,be},Jt)}function QM(i,c){var h=i.selection.getNode();return!(!uo(h)||ls(h))&&hy(i,h.parentNode).filter(uo).fold(function(){return Tn(ol(zt.fromDom(i.getBody()),".mce-offscreen-selection"),us),tm(i,c,zt.fromDom(i.selection.getNode())),bC(i),!0},Jt)}function CC(i){var c,h=i.dom,y=i.selection,w=qg(i.getBody(),y.getNode());return vc(w)&&h.isBlock(w)&&h.isEmpty(w)&&(c=h.create("br",{"data-mce-bogus":"1"}),h.setHTML(w,""),w.appendChild(c),y.setRng(dn.before(c).toRange())),!0}function W1(i,c){return(i.selection.isCollapsed()?iT:QM)(i,c)}function G1(i,c){return!!i.selection.isCollapsed()&&(y=c,w=dn.fromRangeStart((h=i).selection.getRng()),sl(y,h.getBody(),w).filter(function(D){return(y?PD:ND)(D)}).bind(function(D){return X.from(Lg(y?0:-1,D))}).exists(function(D){return h.selection.select(D),!0}));var h,y,w}function gy(i){return xp(i)&&i.data[0]===Rs}function e2(i){return xp(i)&&i.data[i.data.length-1]===Rs}function t2(i){return i.ownerDocument.createTextNode(Rs)}function kC(i,c){return(i?function(h){if(xp(h.previousSibling))return e2(h.previousSibling)||h.previousSibling.appendData(Rs),h.previousSibling;if(xp(h))return gy(h)||h.insertData(0,Rs),h;var y=t2(h);return h.parentNode.insertBefore(y,h),y}:function(h){if(xp(h.nextSibling))return gy(h.nextSibling)||h.nextSibling.insertData(0,Rs),h.nextSibling;if(xp(h))return e2(h)||h.appendData(Rs),h;var y=t2(h);return h.nextSibling?h.parentNode.insertBefore(y,h.nextSibling):h.parentNode.appendChild(y),y})(c)}function n2(i,c){return br(i.container())?kC(c,i.container()):kC(c,i.getNode())}function r2(i,c){var h=c.get();return h&&i.container()===h&&gf(h)}function U1(i,c){return c.fold(function(h){ad(i.get());var y=Iw(h);return i.set(y),X.some(dn(y,y.length-1))},function(h){return Rl(h).map(function(y){if(r2(y,i))return dn(i.get(),1);ad(i.get());var w=n2(y,!0);return i.set(w),dn(w,1)})},function(h){return Kh(h).map(function(y){if(r2(y,i))return dn(i.get(),i.get().length-1);ad(i.get());var w=n2(y,!1);return i.set(w),dn(w,w.length-1)})},function(h){ad(i.get());var y=my(h);return i.set(y),X.some(dn(y,1))})}function TC(i,c){for(var h=0;h<i.length;h++){var y=i[h].apply(null,c);if(y.isSome())return y}return X.none()}function qv(i,c){return Gd(c,i)||i}function MC(i,c,h){var y=ef(h),w=qv(c,y.container());return jv(i,w,y).fold(function(){return oc(w,y).bind(de(jv,i,w)).map(function(D){return uc.before(D)})},X.none)}function DC(i,c){return null===Wg(i,c)}function aT(i,c,h){return jv(i,c,h).filter(de(DC,c))}function AC(i,c,h){var y=q1(h);return aT(i,c,y).bind(function(w){return Xd(w,y).isNone()?X.some(uc.start(w)):X.none()})}function sT(i,c,h){var y=ef(h);return aT(i,c,y).bind(function(w){return oc(w,y).isNone()?X.some(uc.end(w)):X.none()})}function uT(i,c,h){var y=q1(h),w=qv(c,y.container());return jv(i,w,y).fold(function(){return Xd(w,y).bind(de(jv,i,w)).map(function(D){return uc.after(D)})},X.none)}function kw(i){return c=OC(i),!1===("rtl"===Vo.DOM.getStyle(c,"direction",!0)||cT.test(c.textContent));var c}function ch(i,c,h){return TC([MC,AC,sT,uT],[i,c,h]).filter(kw)}function $b(i){return i.fold(Z("before"),Z("start"),Z("end"),Z("after"))}function lg(i){return i.fold(uc.before,uc.before,uc.after,uc.after)}function Tw(i){return i.fold(uc.start,uc.start,uc.end,uc.end)}function IC(i,c,h,y,w,D){return wa(jv(c,h,y),jv(c,h,w),function(O,P){return O!==P&&(L=P,K=Gd(O,B=h),q=Gd(L,B),K&&K===q)?uc.after(i?O:P):D;var B,L,K,q}).getOr(D)}function o2(i,c){return i.fold(Jt,function(h){return w=c,!($b(y=h)===$b(w)&&OC(y)===OC(w));var y,w})}function Jb(i,c){return i?c.fold(se(X.some,uc.start),X.none,se(X.some,uc.after),X.none):c.fold(X.none,se(X.some,uc.before),X.none,se(X.some,uc.end))}function lm(i,c,h,y){var w=Vc(i,y),D=ch(c,h,w);return ch(c,h,w).bind(de(Jb,i)).orThunk(function(){return P=c,B=h,L=D,K=Vc(O=i,y),sl(O,B,K).map(de(Vc,O)).fold(function(){return L.map(lg)},function(q){return ch(P,B,q).map(de(IC,O,P,B,K,q)).filter(de(o2,L))}).filter(kw);var O,P,B,L,K})}function j1(i){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];var y=window.console;y&&(y.error||y.log).apply(y,Vt([i],c,!1))}var ba,Xv,lT=function(i,c){var h=i.editorManager.baseURL+"/skins/content",y="content"+i.editorManager.suffix+".css",w=!0===i.inline;return ln(c,function(D){return/^[a-z0-9\-]+$/i.test(D)&&!w?h+"/"+D+"/"+y:i.documentBaseURI.toAbsolute(D)})},ni=0,Mw=fn.each,Ko=Vo.DOM,Dw=[9,27,Dr.HOME,Dr.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,Dr.DOWN,Dr.UP,Dr.LEFT,Dr.RIGHT].concat(zr.browser.isFirefox()?[224]:[]),Aw="data-mce-placeholder",cT=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,ef=de(Vc,!0),q1=de(Vc,!1),Qb=vc,bp=uo,sc=hf([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),xp=br,Iw=de(kC,!0),my=de(kC,!1),uc=hf([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),OC=function(i){return i.fold(oe,oe,oe,oe)};function X1(i,c,h){var y=i?1:-1;return c.setRng(dn(h.container(),h.offset()+y).toRange()),c.getSel().modify("move",i?"forward":"backward","word"),!0}function Y1(i,c){return i===uu.Backwards?Wo(c):c}function py(i,c,h,y){for(var w,D,O,P,B=Mu(h),L=y,K=[];L;){var q=(O=B,P=L,c===uu.Forwards?O.next(P):O.prev(P));if(!q)break;if(Hi(q.getNode(!1)))return c===uu.Forwards?{positions:Y1(c,K).concat([q]),breakType:ba.Br,breakAt:X.some(q)}:{positions:Y1(c,K),breakType:ba.Br,breakAt:X.some(q)};if(q.isVisible()){if(i(L,q)){var re=(w=L,Hi((D=q).getNode(c===uu.Forwards))?ba.Br:!1===rc(w,D)?ba.Block:ba.Wrap);return{positions:Y1(c,K),breakType:re,breakAt:X.some(q)}}K.push(q),L=q}else L=q}return{positions:Y1(c,K),breakType:ba.Eol,breakAt:X.none()}}function EC(i,c,h,y){return c(h,y).breakAt.map(function(w){var D=c(h,w).positions;return i===uu.Backwards?D.concat(w):[w].concat(D)}).getOr([])}function Z1(i,c){return Or(i,function(h,y){return h.fold(function(){return X.some(y)},function(w){return wa(Gt(w.getClientRects()),Gt(y.getClientRects()),function(D,O){var P=Math.abs(c-D.left);return Math.abs(c-O.left)<=P?y:w}).or(h)})},X.none())}function dT(i,c){return Gt(c.getClientRects()).bind(function(h){return Z1(i,h.left)})}function i2(i){function c(y){return ln(y,function(w){var D=Tu(w);return D.node=i,D})}if(Kr(i))return c(i.getClientRects());if(br(i)){var h=i.ownerDocument.createRange();return h.setStart(i,0),h.setEnd(i,i.data.length),c(h.getClientRects())}}function PC(i){return Qi(i,i2)}de(lm,!1),de(lm,!0),(Xv=ba={})[Xv.Br=0]="Br",Xv[Xv.Block=1]="Block",Xv[Xv.Wrap=2]="Wrap",Xv[Xv.Eol=3]="Eol";var _p,tf,Yv=de(py,dn.isAbove,-1),Of=de(py,dn.isBelow,1),Ow=de(EC,-1,Yv),Ew=de(EC,1,Of);function cm(i,c,h,y,w,D){function O(q){var re=PC([q]);-1===i&&(re=re.reverse());for(var fe=0;fe<re.length;fe++){var ve=re[fe];if(!h(ve,L)){if(0<B.length&&c(ve,ma(B))&&P++,ve.line=P,w(ve))return!0;B.push(ve)}}}var P=0,B=[],L=ma(D.getClientRects());if(!L)return B;var K=D.getNode();return O(K),function(q,re,fe,ve){for(;ve=Dc(ve,q,m0,re);)if(fe(ve))return}(i,y,O,K),B}function wp(i){return function(c){return c.line>i}}function dh(i){return function(c){return c.line===i}}function Pw(i,c){return Math.abs(i.left-c)}function Nw(i,c){return Math.abs(i.right-c)}function NC(i,c){return i>=c.left&&i<=c.right}function Sp(i,c){return i>=c.top&&i<=c.bottom}function Rw(i,c,h){return void 0===h&&(h=Jt),qi(i,function(y,w){if(NC(c,w))return h(w)?w:y;if(NC(c,y))return h(y)?y:w;var D=Math.min(Pw(y,c),Nw(y,c)),O=Math.min(Pw(w,c),Nw(w,c));return O===D&&Eo(w,"node")&&u_(w.node)||O<D?w:y})}function Na(i,c,h,y,w){var D=Gw(y,i,m0,c,!w);do{if(!D||h(D))return}while(D=Gw(D,i,m0,c))}function dm(i,c){i.selection.setRng(c),oh(i,i.selection.getRng())}function fh(i,c,h){return X.some(_C(i,c,h))}function RC(i,c,h,y,w,D){var O=c===uu.Forwards,P=Mu(i.getBody()),B=de(Pa,O?P.next:P.prev),L=O?y:w;if(!h.collapsed){var K=iv(h);if(D(K))return Qd(c,i,K,c===uu.Backwards,!1)}var q=Bg(c,i.getBody(),h);if(L(q))return fy(i,q.getNode(!O));var re=Vc(O,B(q)),fe=Fx(h);if(!re)return fe?X.some(h):X.none();if(L(re))return Qd(c,i,re.getNode(!O),O,!1);var ve=B(re);return ve&&L(ve)&&A0(re,ve)?Qd(c,i,ve.getNode(!O),O,!1):fe?fh(i,re.toRange(),!1):X.none()}function ex(i,c,h,y,w,D){var O=Bg(c,i.getBody(),h),P=ma(O.getClientRects()),B=c===_p.Down;if(!P)return X.none();var L,K=Tr((B?Ty:t0)(i.getBody(),wp(1),O),dh(1)),q=P.left,re=Rw(K,q);if(re&&D(re.node)){var fe=Math.abs(q-re.left),ve=Math.abs(q-re.right);return Qd(c,i,re.node,fe<ve,!1)}if(L=y(O)?O.getNode():w(O)?O.getNode(!0):iv(h)){var be=function(Se,Oe,ze,ot){function yt(Yt){return ma(Yt.getClientRects())}var Ve,Je,it,Nt=Mu(Oe),Ht=[],on=0,$t=1===Se?(Ve=Nt.next,Je=$f,it=Ag,dn.after(ot)):(Ve=Nt.prev,Je=Ag,it=$f,dn.before(ot)),bt=yt($t);do{if($t.isVisible()){var St=yt($t);if(!it(St,bt)){0<Ht.length&&Je(St,ma(Ht))&&on++;var At=Tu(St);if(At.position=$t,At.line=on,ze(At))return Ht;Ht.push(At)}}}while($t=Ve($t));return Ht}(c,i.getBody(),wp(1),L),Ce=Rw(Tr(be,dh(1)),q);if(Ce||(Ce=ma(Tr(be,dh(0)))))return fh(i,Ce.position.toRange(),!1)}return 0===K.length?My(i,B).filter(B?w:y).map(function(Se){return _C(i,Se.toRange(),!1)}):X.none()}function hT(i,c,h){return My(i,c).filter(h).exists(function(y){return i.selection.setRng(y.toRange()),!0})}function K1(i,c){var h=i.dom.createRng();h.setStart(c.container(),c.offset()),h.setEnd(c.container(),c.offset()),i.selection.setRng(h)}function gT(i,c){i?c.setAttribute("data-mce-selected","inline-boundary"):c.removeAttribute("data-mce-selected")}function $1(i,c,h){return U1(c,h).map(function(y){return K1(i,y),h})}function Zv(i,c,h){return!!nr(i)&&(w=c,D=h,O=(y=i).getBody(),P=dn.fromRangeStart(y.selection.getRng()),lm(D,de(Uv,y),O,P).bind(function(B){return $1(y,w,B)}).isSome());var y,w,D,O,P}function LC(i,c,h){return!!nr(c)&&(y=i,D=(w=c).selection.getRng(),O=y?dn.fromRangeEnd(D):dn.fromRangeStart(D),!!$e(w.selection.getSel().modify)&&(y&&jp(O)?X1(!0,w.selection,O):!(y||!Td(O))&&X1(!1,w.selection,O)));var y,w,D,O}function cg(i,c,h){if(nr(i)){var y=My(i,c).getOrThunk(function(){var w=i.selection.getRng();return c?dn.fromRangeEnd(w):dn.fromRangeStart(w)});return ch(de(Uv,i),i.getBody(),y).exists(function(w){var D=lg(w);return U1(h,D).exists(function(O){return K1(i,O),!0})})}return!1}function Kv(i,c){return function(h){return U1(c,h).exists(function(y){return K1(i,y),!0})}}function J1(i,c,h,y){var w=i.getBody(),D=de(Uv,i);i.undoManager.ignore(function(){var O,P,B;i.selection.setRng((O=h,P=y,(B=document.createRange()).setStart(O.container(),O.offset()),B.setEnd(P.container(),P.offset()),B)),i.execCommand("Delete"),ch(D,w,dn.fromRangeStart(i.selection.getRng())).map(Tw).map(Kv(i,c))}),i.nodeChanged()}function hh(i,c,h){if(i.selection.isCollapsed()&&nr(i)){var y=dn.fromRangeStart(i.selection.getRng());return D=c,O=h,P=y,B=(w=i).getBody(),L=Gd(P.container(),B)||B,K=de(Uv,w),(q=ch(K,L,P)).bind(function(re){return O?re.fold(Z(X.some(Tw(re))),X.none,Z(X.some(lg(re))),X.none):re.fold(X.none,Z(X.some(lg(re))),X.none,Z(X.some(Tw(re))))}).map(Kv(w,D)).getOrThunk(function(){var re=Tf(O,L,P),fe=re.bind(function(ve){return ch(K,L,ve)});return wa(q,fe,function(){return jv(K,L,P).exists(function(ve){return!!wa(Rl(be=ve),Kh(be),function(Ce,Se){var Oe=Vc(!0,Ce),ze=Vc(!1,Se);return oc(be,Oe).forall(function(ot){return ot.isEqual(ze)})}).getOr(!0)&&(tm(w,O,zt.fromDom(ve)),!0);var be})}).orThunk(function(){return fe.bind(function(ve){return re.map(function(be){return O?J1(w,D,P,be):J1(w,D,be,P),!0})})}).getOr(!1)})}var w,D,O,P,B,L,K,q;return!1}function Bi(i){return 1===_d(i)}function $v(i,c){return!!i.selection.isCollapsed()&&function yy(i,c){var h,y=zt.fromDom(i.getBody()),w=zt.fromDom(i.selection.getStart()),D=Tr(ai(h=Ii(w,y),_l).fold(Z(h),function(O){return h.slice(0,O)}),Bi);return jt(D).exists(function(O){var P,B,L,K,q,re,fe,ve,be,Ce=dn.fromRangeStart(i.selection.getRng()),Se=c,Oe=Ce,ze=O.dom;return!(!wa(Rl(ze),Kh(ze),function(ot,yt){var Ve=Vc(!0,ot),Je=Vc(!1,yt),it=Vc(!1,Oe);return Se?oc(ze,it).exists(function(Nt){return Nt.isEqual(Je)&&Oe.isEqual(Ve)}):Xd(ze,it).exists(function(Nt){return Nt.isEqual(Ve)&&Oe.isEqual(Je)})}).getOr(!0)||sd((P=O).dom)&&Pk(P.dom)||(B=c,K=O,0===(be=ln(Tr(D,de(ll,L=i)),function(ot){return ot.dom})).length?tm(L,B,K):(re=K.dom,ve=WS(be,(fe=VS(!1)).dom),Ps(zt.fromDom(re),fe),us(zt.fromDom(re)),q=dn(ve,0),L.selection.setRng(q.toRange())),0))})}(i,c)}function tx(i,c,h){return i._selectionOverrides.hideFakeCaret(),tm(i,c,zt.fromDom(h)),!0}function nx(i,c){return i.selection.isCollapsed()?(P=(O=c)?Pb:sh,L=Bg(O?uu.Forwards:uu.Backwards,(D=i).getBody(),D.selection.getRng()),P(L)?tx(D,O,L.getNode(!O)):X.from(Vc(O,L)).filter(function(K){return P(K)&&A0(L,K)}).exists(function(K){return tx(D,O,K.getNode(!O))})):(y=c,w=(h=i).selection.getNode(),!!yl(w)&&tx(h,y,w));var h,y,w,D,O,P,L}function by(i){var c=parseInt(i,10);return isNaN(c)?0:c}function Q1(i,c){return(i||"table"===va(c)?"margin":"padding")+("rtl"===bu(c,"direction")?"-right":"-left")}function Jv(i){var c,h=Uw(i);return!i.mode.isReadOnly()&&(1<h.length||(c=i,Mr(h,function(y){var w=Sd(y,Q1(k0(c),y)).map(by).getOr(0);return"false"!==c.dom.getContentEditable(y.dom)&&0<w})))}function Qv(i){return Oh(i)||la(i)}function Lw(i,c){var h=i.dom,y=i.selection,w=i.formatter,D=i.getParam("indentation","40px","string"),O=/[a-z%]+$/i.exec(D)[0],P=parseInt(D,10),B=k0(i),L=ya(i);i.queryCommandState("InsertUnorderedList")||i.queryCommandState("InsertOrderedList")||""!==L||h.getParent(y.getNode(),h.isBlock)||w.apply("div"),Tn(Uw(i),function(K){var q,re=h,fe=c,ve=P,be=O,Ce=K.dom,Se=Q1(B,zt.fromDom(Ce));"outdent"===fe?(q=Math.max(0,by(Ce.style[Se])-ve),re.setStyle(Ce,Se,q?q+be:"")):(q=by(Ce.style[Se])+ve+be,re.setStyle(Ce,Se,q))})}function BC(i,c){if(i.selection.isCollapsed()&&Jv(i)){var h=i.dom,y=i.selection.getRng(),w=dn.fromRangeStart(y),D=h.getParent(y.startContainer,h.isBlock);if(null!==D&&fp(zt.fromDom(D),w))return Lw(i,"outdent"),!0}return!1}function mT(i,c){i.getDoc().execCommand(c,!1,null)}function xy(i){return void 0===i.touches||1!==i.touches.length?X.none():X.some(i.touches[0])}function zC(i,c){return Do(i,c.nodeName)}function a2(i){var c,h,y,w=i.dom,D=i.selection,O=i.schema,P=O.getBlockElements(),B=D.getStart(),L=i.getBody(),K=ya(i);if(B&&Kr(B)&&K){var q=L.nodeName.toLowerCase();if(O.isValidChild(q,K.toLowerCase())&&(re=P,fe=L,!Gn(da(zt.fromDom(B),zt.fromDom(fe)),function(Je){return zC(re,Je.dom)}))){var re,fe,be,Ce,Se=D.getRng(),Oe=Se.startContainer,ze=Se.startOffset,ot=Se.endContainer,yt=Se.endOffset,Ve=hu(i);for(B=L.firstChild;B;)be=P,br(Ce=B)||Kr(Ce)&&!zC(be,Ce)&&!Oc(Ce)?function(it,Nt){if(br(Nt)&&(0===Nt.nodeValue.length||/^\s+$/.test(Nt.nodeValue)&&(!Nt.nextSibling||zC(it,Nt.nextSibling))))return 1}(P,B)?(B=(h=B).nextSibling,w.remove(h)):(c||(c=w.create(K,$x(i)),B.parentNode.insertBefore(c,B),y=!0),B=(h=B).nextSibling,c.appendChild(h)):(c=null,B=B.nextSibling);y&&Ve&&(Se.setStart(Oe,ze),Se.setEnd(ot,yt),D.setRng(Se),i.nodeChanged())}}}function pT(i,c){c.hasAttribute("data-mce-caret")&&(mf(c),i.selection.setRng(i.selection.getRng()),i.selection.scrollIntoView(c))}function s2(i,c){var h=xl(zt.fromDom(i.getBody()),"*[data-mce-caret]").map(function(y){return y.dom}).getOrNull();if(h)return"compositionstart"===c.type?(c.preventDefault(),c.stopPropagation(),void pT(i,h)):void(Ns(h)&&(pT(i,h),i.undoManager.add()))}function fm(i,c,h){var y,w,D,O=Mu(i.getBody()),P=de(Pa,1===c?O.next:O.prev);!h.collapsed||""===ya(i)||(y=i.dom.getParent(h.startContainer,"PRE"))&&(P(dn.fromRangeStart(h))||(D=i.dom.create(ya(i)),(!zr.ie||11<=zr.ie)&&(D.innerHTML='<br data-mce-bogus="1">'),w=D,1===c?i.$(y).after(w):i.$(y).before(w),i.selection.select(w,!0),i.selection.collapse()))}function hm(i,c){return y=c?uu.Forwards:uu.Backwards,w=(h=i).selection.getRng(),RC(h,y,w,om,im,XC).orThunk(function(){return fm(h,y,w),X.none()}).exists(function(D){return dm(i,D),!0});var h,y,w}function gh(i,c){return y=c?1:-1,w=(h=i).selection.getRng(),ex(h,y,w,function(D){return om(D)||_1(D)},function(D){return im(D)||rm(D)},XC).orThunk(function(){return fm(h,y,w),X.none()}).exists(function(D){return dm(i,D),!0});var h,y,w}function e_(i,c){return hT(i,c,c?im:om)}function vT(i){return Ot(["figcaption"],va(i))}function rx(i){var c=document.createRange();return c.setStartBefore(i.dom),c.setEndBefore(i.dom),c}function t_(i,c,h){(h?ss:gc)(i,c)}function mh(i,c){return!!i.selection.isCollapsed()&&function yT(i,c){var h=zt.fromDom(i.getBody()),y=dn.fromRangeStart(i.selection.getRng()),w=ya(i),D=$x(i),O=y,P=de(Fn,h);return bl(zt.fromDom(O.container()),_l,P).filter(vT).exists(function(){if(ot=h,yt=y,c?Of(ot.dom,yt).breakAt.isNone():Yv(ot.dom,yt).breakAt.isNone()){var B=(L=h,q=D,re=c,""===(K=w)?(Oe=re,t_(L,ze=zt.fromTag("br"),Oe),rx(ze)):(fe=L,ve=re,be=q,Ce=zt.fromTag(K),Se=zt.fromTag("br"),Im(Ce,be),ss(Ce,Se),t_(fe,Ce,ve),rx(Se)));return i.selection.setRng(B),!0}var L,K,q,re,fe,ve,be,Ce,Se,Oe,ze,ot,yt;return!1})}(i,c)}function Ro(i){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];return function(){return i.apply(null,c)}}function ox(i,c){return rr((h=c,Qi(ln(i,function(y){return ir({shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0,action:U},y)}),function(y){return h.keyCode===y.keyCode&&h.shiftKey===y.shiftKey&&h.altKey===y.altKey&&h.ctrlKey===y.ctrlKey&&h.metaKey===y.metaKey?[y]:[]})),function(y){return y.action()});var h}function Bw(i,c){var h=c?uu.Forwards:uu.Backwards,y=i.selection.getRng();return RC(i,h,y,Pb,sh,yl).exists(function(w){return dm(i,w),!0})}function bT(i,c){var h=c?1:-1,y=i.selection.getRng();return ex(i,h,y,Pb,sh,yl).exists(function(w){return dm(i,w),!0})}function xT(i,c){return hT(i,c,c?sh:Pb)}function _T(i,c,h,y,w){var D,O=ol(zt.fromDom(h),"td,th,caption").map(function(K){return K.dom}),P=Tr((D=i,Qi(O,function(K){var q,re={left:(q=Tu(K.getBoundingClientRect())).left- -1,top:q.top- -1,right:q.right+-2,bottom:q.bottom+-2,width:q.width+-1,height:q.height+-1};return[{x:re.left,y:D(re),cell:K},{x:re.right,y:D(re),cell:K}]})),function(K){return c(K,w)}),B=y,L=w;return Or(P,function(K,q){return K.fold(function(){return X.some(q)},function(re){var fe=Math.sqrt(Math.abs(re.x-B)+Math.abs(re.y-L)),ve=Math.sqrt(Math.abs(q.x-B)+Math.abs(q.y-L));return X.some(ve<fe?q:re)})},X.none()).map(function(K){return K.cell})}function wT(i,c,h){var y,w,D=i(c,h);return D.breakType===ba.Wrap&&0===D.positions.length||!Hi(h.getNode())&&D.breakType===ba.Br&&1===D.positions.length?(y=i,w=c,!D.breakAt.exists(function(O){return y(w,O).breakAt.isSome()})):D.breakAt.isNone()}function ST(i,c,h,y){var w,D,O,P=i.selection.getRng(),B=c?1:-1;return!(!V_()||(w=c,D=h,O=dn.fromRangeStart(P),!Jm(!w,D).exists(function(L){return L.isEqual(O)}))||(Qd(B,i,h,!c,!1).each(function(L){dm(i,L)}),0))}function n_(i,c,h){var w,D=(w=h.getNode(!!c),Kr(w)&&"TABLE"===w.nodeName?X.some(w):X.none()),O=!1===c;D.fold(function(){return dm(i,h.toRange())},function(P){return Jm(O,i.getBody()).filter(function(B){return B.isEqual(h)}).fold(function(){return dm(i,h.toRange())},function(B){var L,K,q=c,re=P,fe=h;(K=ya(L=i))?L.undoManager.transact(function(){var ve=zt.fromTag(K);Im(ve,$x(L)),ss(ve,zt.fromTag("br")),(q?Ja:Ps)(zt.fromDom(re),ve);var be=L.dom.createRng();be.setStart(ve.dom,0),be.setEnd(ve.dom,0),dm(L,be)}):dm(L,fe.toRange())})})}function _y(i,c,h,y){var w,D,O,P,B,L,K,q,re,fe,ve=i.selection.getRng(),be=dn.fromRangeStart(ve),Ce=i.getBody();if(c||!AT(y,be))return!(!c||!IT(y,be)||(w=Ce,re=D=h,n_(i,c,Se=jt((fe=O=be).getClientRects()).bind(function(Oe){return YC(re,Oe.left,Oe.top)}).bind(function(Oe){return dT(Rl(ze=Oe).map(function(ot){return[ot].concat(Of(ze,ot).positions)}).getOr([]),fe);var ze}).orThunk(function(){return Gt(O.getClientRects()).bind(function(Oe){return Z1(Ew(w,dn.after(D)),Oe.left)})}).getOr(dn.after(D))),0));var Se=(P=Ce,K=B=h,Gt((q=L=be).getClientRects()).bind(function(Oe){return DT(K,Oe.left,Oe.top)}).bind(function(Oe){return dT(Kh(ze=Oe).map(function(ot){return Yv(ze,ot).positions.concat(ot)}).getOr([]),q);var ze}).orThunk(function(){return Gt(L.getClientRects()).bind(function(Oe){return Z1(Ow(P,dn.before(B)),Oe.left)})}).getOr(dn.before(B)));return n_(i,c,Se),!0}function ix(i,c,h){return X.from(i.dom.getParent(i.selection.getNode(),"td,th")).bind(function(y){return X.from(i.dom.getParent(y,"table")).map(function(w){return h(i,c,w,y)})}).getOr(!1)}function pd(i,c){return ix(i,c,ST)}function nf(i,c){return ix(i,c,_y)}function gm(i,c){var h,y,w=c,D=i.dom,O=i.schema.getMoveCaretBeforeOnEnterElements();if(c){!/^(LI|DT|DD)$/.test(c.nodeName)||(y=function(L){for(;L;){if(1===L.nodeType||3===L.nodeType&&L.data&&/[\r\n\s]/.test(L.data))return L;L=L.nextSibling}}(c.firstChild))&&/^(UL|OL|DL)$/.test(y.nodeName)&&c.insertBefore(D.doc.createTextNode(xc),c.firstChild);var P=D.createRng();if(c.normalize(),c.hasChildNodes()){for(var B=new cs(c,c);h=B.current();){if(br(h)){P.setStart(h,0),P.setEnd(h,0);break}if(O[h.nodeName.toLowerCase()]){P.setStartBefore(h),P.setEndBefore(h);break}w=h,h=B.next()}h||(P.setStart(w,0),P.setEnd(w,0))}else Hi(c)?c.nextSibling&&D.isBlock(c.nextSibling)?(P.setStartBefore(c),P.setEndBefore(c)):(P.setStartAfter(c),P.setEndAfter(c)):(P.setStart(c,0),P.setEnd(c,0));i.selection.setRng(P),oh(i,P)}}function zw(i){return X.from(i.dom.getParent(i.selection.getStart(!0),i.dom.isBlock))}function Fw(i,c){return i&&i.parentNode&&i.parentNode.nodeName===c}function ax(i){return i&&/^(OL|UL|LI)$/.test(i.nodeName)}function Cp(i){var c=i.parentNode;return/^(LI|DT|DD)$/.test(c.nodeName)?c:i}function wy(i,c,h){for(var y=i[h?"firstChild":"lastChild"];y&&!Kr(y);)y=y[h?"nextSibling":"previousSibling"];return y===c}function Sy(i){i.innerHTML='<br data-mce-bogus="1">'}function FC(i,c){return i.nodeName===c||i.previousSibling&&i.previousSibling.nodeName===c}function u2(i,c){return c&&i.isBlock(c)&&!/^(TD|TH|CAPTION|FORM)$/.test(c.nodeName)&&!/^(fixed|absolute)/i.test(c.style.position)&&"true"!==i.getContentEditable(c)}function CT(i,c,h){return!1===br(c)?h:i?1===h&&c.data.charAt(h-1)===Rs?0:h:h===c.data.length-1&&c.data.charAt(h)===Rs?c.data.length:h}function Vw(i,c){for(var h,y=i.getRoot(),w=c;w!==y&&"false"!==i.getContentEditable(w);)"true"===i.getContentEditable(w)&&(h=w),w=w.parentNode;return w!==y?h:y}function sx(i,c){var h=ya(i);h&&h.toLowerCase()===c.tagName.toLowerCase()&&function(y,w,D){var O=y.dom;X.from(D.style).map(O.parseStyle).each(function(L){var K=Mi(zt.fromDom(w)),q=ir(ir({},K),L);O.setStyles(w,q)}),wa(X.from(D.class).map(function(L){return L.split(/\s+/)}),X.from(w.className).map(function(L){return Tr(L.split(/\s+/),function(K){return""!==K})}),function(L,K){var q=Tr(K,function(fe){return!Ot(L,fe)}),re=Vt(Vt([],L,!0),q,!0);O.setAttrib(w,"class",re.join(" "))});var P=["style","class"],B=qr(D,function(L,K){return!Ot(P,K)});O.setAttribs(w,B)}(i,c,$x(i))}function VC(i,c,h){var y=i.dom.createRng();h?(y.setStartBefore(c),y.setEndBefore(c)):(y.setStartAfter(c),y.setEndAfter(c)),i.selection.setRng(y),oh(i,y)}function HC(i,c){var h=zt.fromTag("br");Ps(zt.fromDom(c),h),i.undoManager.add()}function kT(i,c){dx(i.getBody(),c)||Ja(zt.fromDom(c),zt.fromTag("br"));var h=zt.fromTag("br");Ja(zt.fromDom(c),h),VC(i,h.dom,!1),i.undoManager.add()}function o_(i){return i&&"A"===i.nodeName&&"href"in i}function Cy(i){return i.fold(ht,o_,o_,ht)}function l2(i,c){c.fold(U,de(HC,i),de(kT,i),U)}function Hw(i,c){var h,y,w,D=(y=de(Uv,h=i),w=dn.fromRangeStart(h.selection.getRng()),ch(y,h.getBody(),w).filter(Cy));D.isSome()?D.each(de(l2,i)):function(O,P){var B,L,q=O.dom,re=O.selection.getRng();Nc(q,re).each(function(ot){re.setStart(ot.startContainer,ot.startOffset),re.setEnd(ot.endContainer,ot.endOffset)});var fe,ve=re.startOffset,be=re.startContainer;1===be.nodeType&&be.hasChildNodes()&&(fe=ve>be.childNodes.length-1,be=be.childNodes[Math.min(ve,be.childNodes.length-1)]||be,ve=fe&&3===be.nodeType?be.nodeValue.length:0);var Ce=q.getParent(be,q.isBlock),Se=Ce?q.getParent(Ce.parentNode,q.isBlock):null;"LI"!==(Se?Se.nodeName.toUpperCase():"")||!(!P||!P.ctrlKey)||(Ce=Se),be&&3===be.nodeType&&ve>=be.nodeValue.length&&!function(ot){for(var yt,Ve=new cs(be,Ce),Je=ot.getNonEmptyElements();yt=Ve.next();)if(Je[yt.nodeName.toLowerCase()]||0<yt.length)return 1}(O.schema)&&(B=q.create("br"),re.insertNode(B),re.setStartAfter(B),re.setEndAfter(B),L=!0),B=q.create("br"),ab(q,re,B),VC(O,B,L),O.undoManager.add()}(i,c)}function i_(i,c){return zw(i).filter(function(h){return 0<c.length&&$n(zt.fromDom(h),c)}).isSome()}function a_(i,c){return i_(i,i.getParam("no_newline_selector",""))}function mm(i){return function(c,h){return""===ya(c)===i}}function pm(i){return function(c,h){return zw(c).filter(function(y){return la(zt.fromDom(y))}).isSome()===i}}function ky(i,c){return function(h,y){return zw(h).fold(Z(""),function(w){return w.nodeName.toUpperCase()})===i.toUpperCase()===c}}function e0(i){return ky("pre",i)}function s_(i){return function(c,h){return c.getParam("br_in_pre",!0)===i}}function Ww(i,c){return i_(i,i.getParam("br_newline_selector",".mce-toc h2,figcaption,caption"))}function vm(i,c){return c}function ux(i){var c=ya(i),h=function(y,w){for(var D,O=y.getRoot(),P=w;P!==O&&"false"!==y.getContentEditable(P);)"true"===y.getContentEditable(P)&&(D=P),P=P.parentNode;return P!==O?D:O}(i.dom,i.selection.getStart());return h&&i.schema.isValidChild(h.nodeName,c||"P")}function vd(i,c){return function(h,y){return Or(i,function(w,D){return w&&D(h,y)},!0)?X.some(c):X.none()}}function WC(i,c){var h,y;h=i,y=c,TC([vd([a_],Hc.none()),vd([ky("summary",!0)],Hc.br()),vd([e0(!0),s_(!1),vm],Hc.br()),vd([e0(!0),s_(!1)],Hc.block()),vd([e0(!0),s_(!0),vm],Hc.block()),vd([e0(!0),s_(!0)],Hc.br()),vd([pm(!0),vm],Hc.br()),vd([pm(!0)],Hc.block()),vd([mm(!0),vm,ux],Hc.block()),vd([mm(!0)],Hc.br()),vd([Ww],Hc.br()),vd([mm(!1),vm],Hc.br()),vd([ux],Hc.block())],[h,!(!y||!y.shiftKey)]).getOr(Hc.none()).fold(function(){Hw(i,c)},function(){!function r_(i,c){function h(Hn){var lr,vn=fe,Zn=K.getTextInlineElements(),Bn=Hn||"TABLE"===ze||"HR"===ze?L.create(Hn||Je):Se.cloneNode(!1),vr=Bn;if(!1===i.getParam("keep_styles",!0))L.setAttrib(Bn,"style",null),L.setAttrib(Bn,"class",null);else for(;Zn[vn.nodeName]&&(sd(vn)||Oc(vn)||(lr=vn.cloneNode(!1),L.setAttrib(lr,"id",""),Bn.hasChildNodes()?lr.appendChild(Bn.firstChild):vr=lr,Bn.appendChild(lr))),(vn=vn.parentNode)&&vn!==Un;);return sx(i,Bn),Sy(vr),Bn}function y(Hn){var lr,vn,Zn=CT(Hn,fe,ve);if(!br(fe)||!(Hn?0<Zn:Zn<fe.nodeValue.length)){if(fe.parentNode===Se&&B&&!Hn||Hn&&Kr(fe)&&fe===Se.firstChild)return 1;if(FC(fe,"TABLE")||FC(fe,"HR"))return B&&!Hn||!B&&Hn;var Bn=new cs(fe,Se);for(br(fe)&&(Hn&&0===Zn?Bn.prev():Hn||Zn!==fe.nodeValue.length||Bn.next());lr=Bn.current();){if(Kr(lr)){if(!lr.getAttribute("data-mce-bogus")&&(vn=lr.nodeName.toLowerCase(),q[vn]&&"br"!==vn))return}else if(br(lr)&&!_s(lr.nodeValue))return;Hn?Bn.prev():Bn.next()}return 1}}function w(){O=/^(H[1-6]|PRE|FIGURE)$/.test(ze)&&"HGROUP"!==ot?h(Je):h(),i.getParam("end_container_on_empty_block",!1)&&u2(L,Oe)&&L.isEmpty(Se)?O=L.split(Oe,Se):L.insertAfter(O,Se),gm(i,O)}var D,O,P,B,L=i.dom,K=i.schema,q=K.getNonEmptyElements(),re=i.selection.getRng();Nc(L,re).each(function(Hn){re.setStart(Hn.startContainer,Hn.startOffset),re.setEnd(Hn.endContainer,Hn.endOffset)});var fe=re.startContainer,ve=re.startOffset,Je=ya(i),be=!(!c||!c.shiftKey),Ce=!(!c||!c.ctrlKey);Kr(fe)&&fe.hasChildNodes()&&(B=ve>fe.childNodes.length-1,fe=fe.childNodes[Math.min(ve,fe.childNodes.length-1)]||fe,ve=B&&br(fe)?fe.nodeValue.length:0);var Se,Oe,ze,ot,yt,Ve,it,Nt,Ht,on,$t,bt,St,At,Yt,Nn,jn,In,Wn,Pn,Un=Vw(L,fe);Un&&((Je&&!be||!Je&&be)&&(fe=function(Hn,lr,vn,Zn){var Bn,vr,hr,To,st,kt,cn=Je||"P",xn=Hn.dom,gn=Vw(xn,vn),Xn=xn.getParent(vn,xn.isBlock);if(!Xn||!u2(xn,Xn)){if(st=((Xn=Xn||gn)===Hn.getBody()||(kt=Xn)&&/^(TD|TH|CAPTION)$/.test(kt.nodeName)?Xn:Xn.parentNode).nodeName.toLowerCase(),!Xn.hasChildNodes())return sx(Hn,Bn=xn.create(cn)),Xn.appendChild(Bn),lr.setStart(Bn,0),lr.setEnd(Bn,0),Bn;for(hr=vn;hr.parentNode!==Xn;)hr=hr.parentNode;for(;hr&&!xn.isBlock(hr);)hr=(vr=hr).previousSibling;if(vr&&Hn.schema.isValidChild(st,cn.toLowerCase())){for(sx(Hn,Bn=xn.create(cn)),vr.parentNode.insertBefore(Bn,vr),hr=vr;hr&&!xn.isBlock(hr);)To=hr.nextSibling,Bn.appendChild(hr),hr=To;lr.setStart(vn,Zn),lr.setEnd(vn,Zn)}}return vn}(i,re,fe,ve)),Oe=(Se=L.getParent(fe,L.isBlock))?L.getParent(Se.parentNode,L.isBlock):null,ze=Se?Se.nodeName.toUpperCase():"","LI"!==(ot=Oe?Oe.nodeName.toUpperCase():"")||Ce||(Oe=(Se=Oe).parentNode,ze=ot),/^(LI|DT|DD)$/.test(ze)&&L.isEmpty(Se)?(Nt=h,Ht=Oe,on=Se,$t=Je,Wn=(it=i).dom,Pn=it.selection.getRng(),Ht!==it.getBody()&&(St=($t=ax(bt=Ht)&&ax(bt.parentNode)?"LI":$t)?Nt($t):Wn.create("BR"),wy(Ht,on,!0)&&wy(Ht,on,!1)?Fw(Ht,"LI")?(At=Cp(Ht),Wn.insertAfter(St,At),(null===(In=(jn=Ht).parentNode)||void 0===In?void 0:In.firstChild)===jn?Wn.remove(At):Wn.remove(Ht)):Wn.replace(St,Ht):(wy(Ht,on,!0)?Fw(Ht,"LI")?(Wn.insertAfter(St,Cp(Ht)),St.appendChild(Wn.doc.createTextNode(" ")),St.appendChild(Ht)):Ht.parentNode.insertBefore(St,Ht):wy(Ht,on,!1)?Wn.insertAfter(St,Cp(Ht)):(Ht=Cp(Ht),(Yt=Pn.cloneRange()).setStartAfter(on),Yt.setEndAfter(Ht),Nn=Yt.extractContents(),"LI"===$t&&Nn.firstChild&&"LI"===Nn.firstChild.nodeName?(St=Nn.firstChild,Wn.insertAfter(Nn,Ht)):(Wn.insertAfter(Nn,Ht),Wn.insertAfter(St,Ht))),Wn.remove(on)),gm(it,St))):Je&&Se===i.getBody()||(Je=Je||"P",Ah(Se)?(O=mf(Se),L.isEmpty(Se)&&Sy(Se),sx(i,O),gm(i,O)):y()?w():y(!0)?(O=Se.parentNode.insertBefore(h(),Se),gm(i,FC(Se,"HR")?O:Se)):((Ve=(yt=re).cloneRange()).setStart(yt.startContainer,CT(!0,yt.startContainer,yt.startOffset)),Ve.setEnd(yt.endContainer,CT(!1,yt.endContainer,yt.endOffset)),(D=Ve.cloneRange()).setEndAfter(Se),P=D.extractContents(),Tn(uv(zt.fromDom(P),ta),function(Hn){var lr=Hn.dom;lr.nodeValue=mn(lr.nodeValue)}),function(Hn){for(;br(Hn)&&(Hn.nodeValue=Hn.nodeValue.replace(/^[\r\n]+/,"")),Hn=Hn.firstChild;);}(P),O=P.firstChild,L.insertAfter(P,Se),function(Hn,lr){var vn,Zn,Bn=O,vr=[];if(Bn){for(;Bn=Bn.firstChild;){if(Hn.isBlock(Bn))return;Kr(Bn)&&!lr[Bn.nodeName.toLowerCase()]&&vr.push(Bn)}for(vn=vr.length;vn--;)(!(Bn=vr[vn]).hasChildNodes()||Bn.firstChild===Bn.lastChild&&""===Bn.firstChild.nodeValue||(Zn=Bn)&&"A"===Zn.nodeName&&Hn.isEmpty(Zn))&&Hn.remove(Bn)}}(L,q),function(Hn,lr){lr.normalize();var vn=lr.lastChild;vn&&!/^(left|right)$/gi.test(Hn.getStyle(vn,"float",!0))||Hn.add(lr,"br")}(L,Se),L.isEmpty(Se)&&Sy(Se),O.normalize(),L.isEmpty(O)?(L.remove(O),w()):(sx(i,O),gm(i,O))),L.setAttrib(O,"id",""),i.fire("NewBlock",{newBlock:O})))}(i,c)},U)}function GC(i){return i.stopImmediatePropagation()}function lx(i){return i.keyCode===Dr.PAGE_UP||i.keyCode===Dr.PAGE_DOWN}function UC(i,c,h){h&&!i.get()?c.on("NodeChange",GC,!0):!h&&i.get()&&c.off("NodeChange",GC),i.set(h)}function TT(i,c){var h=c.container(),y=c.offset();return br(h)?(h.insertData(y,i),X.some(dn(h,y+i.length))):jh(c).map(function(w){var D=zt.fromText(i);return(c.isAtEnd()?Ja:Ps)(w,D),dn(D.dom,i.length)})}function jC(i){var c,h,y=dn.fromRangeStart(i.selection.getRng()),w=zt.fromDom(i.getBody());if(i.selection.isCollapsed()){var D=de(Uv,i),O=dn.fromRangeStart(i.selection.getRng());return ch(D,i.getBody(),O).bind((h=w,function(P){return P.fold(function(B){return Xd(h.dom,dn.before(B))},function(B){return Rl(B)},function(B){return Kh(B)},function(B){return oc(h.dom,dn.after(B))})})).bind(function MT(i,c){return function(h){return D=i,(!K0(O=h)&&(Xd((y=D).dom,w=O).isNone()||oc(y.dom,w).isNone()||fp(y,w)||Ui(y,w)||Ts(y,w)||eu(y,w)||em(D,O)||Af(D,O))?PT:jw)(c);var y,w,D,O}}(w,y)).exists((c=i,function(P){return c.selection.setRng(P.toRange()),c.nodeChanged(),!0}))}return!1}(tf=_p=_p||{})[tf.Up=-1]="Up",tf[tf.Down=1]="Down";var t0=de(cm,_p.Up,Ag,$f),Ty=de(cm,_p.Down,$f,Ag),u_=uo,Gw=Dc,My=function(i,c){var h=i.selection.getRng(),y=i.getBody();if(c){var w=dn.fromRangeEnd(h),D=Of(y,w);return jt(D.positions)}return w=dn.fromRangeStart(h),Gt((D=Yv(y,w)).positions)},dg=de(LC,!0),qC=de(LC,!1),Uw=function(i){return Tr(ln(i.selection.getSelectedBlocks(),zt.fromDom),function(c){return!Qv(c)&&!Ru(c).exists(Qv)&&bl(c,function(h){return vc(h.dom)||uo(h.dom)}).exists(function(h){return vc(h.dom)})})},XC=uo,DT=de(_T,function(i){return i.bottom},function(i,c){return i.y<c}),YC=de(_T,function(i){return i.top},function(i,c){return i.y>c}),AT=de(wT,Yv),IT=de(wT,Of),dx=function(i,c){return h=dn.after(c),!!Hi(h.getNode())||oc(i,dn.after(c)).map(function(y){return Hi(y.getNode())}).getOr(!1);var h},Hc=hf([{br:[]},{block:[]},{none:[]}]),OT=aa().browser,ET=aa(),PT=de(TT,xc),jw=de(TT," "),NT=(RT.prototype.nodeChanged=function(i){var c,h,y,w=this.editor.selection;this.editor.initialized&&w&&!this.editor.getParam("disable_nodechange")&&!this.editor.mode.isReadOnly()&&(y=this.editor.getBody(),(c=w.getStart(!0)||y).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(c,y)||(c=y),h=[],this.editor.dom.getParent(c,function(D){return D===y||void h.push(D)}),(i=i||{}).element=c,i.parents=h,this.editor.fire("NodeChange",i))},RT.prototype.isSameElementPath=function(i){var c,h=this.editor.$(i).parentsUntil(this.editor.getBody()).add(i);if(h.length===this.lastPath.length){for(c=h.length;0<=c&&h[c]===this.lastPath[c];c--);if(-1===c)return this.lastPath=h,!0}return this.lastPath=h,!1},RT);function RT(i){var c;this.lastPath=[],this.editor=i;var h=this;"onselectionchange"in i.getDoc()||i.on("NodeChange click mouseup keyup focus",function(y){var w=i.selection.getRng(),D={startContainer:w.startContainer,startOffset:w.startOffset,endContainer:w.endContainer,endOffset:w.endOffset};"nodechange"!==y.type&&j_(D,c)||i.fire("SelectionChange"),c=D}),i.on("contextmenu",function(){i.fire("SelectionChange")}),i.on("SelectionChange",function(){var y=i.selection.getStart(!0);!y||!zr.range&&i.selection.isCollapsed()||V0(i)&&!h.isSameElementPath(y)&&i.dom.isChildOf(y,i.getBody())&&i.nodeChanged({selectionChange:!0})}),i.on("mouseup",function(y){!y.isDefaultPrevented()&&V0(i)&&("IMG"===i.selection.getNode().nodeName?It.setEditorTimeout(i,function(){i.nodeChanged()}):i.nodeChanged())})}function fx(i){return Kr(i)&&p0(zt.fromDom(i))}function Dy(i){var c=i.getBoundingClientRect(),h=i.ownerDocument,y=h.documentElement,w=h.defaultView;return{top:c.top+w.pageYOffset-y.clientTop,left:c.left+w.pageXOffset-y.clientLeft}}function kp(i){i&&i.parentNode&&i.parentNode.removeChild(i)}function c_(i,c){return qg(i.getBody(),c)}function BT(i){function c(Ve){return Ve!==Ce&&(n0(Ve)||yl(Ve))&&ve.isChildOf(Ve,Ce)}function h(Ve){return om(Ve)||im(Ve)||Pb(Ve)||sh(Ve)}function y(Ve){Ve&&fe.setRng(Ve)}function w(Ve,Je,it,Nt){return void 0===Nt&&(Nt=!0),i.fire("ShowCaret",{target:Je,direction:Ve,before:it}).isDefaultPrevented()?null:(Nt&&fe.scrollIntoView(Je,-1===Ve),Se.show(it,Je))}function D(Ve){return wr(Ve)||Ph(Ve)||Rm(Ve)}function O(Ve){return D(Ve.startContainer)||D(Ve.endContainer)}function P(Ve,Je){if(!Ve)return null;if(Ve.collapsed){if(!O(Ve)){var it=Je?1:-1,Nt=Bg(it,Ce,Ve),Ht=Nt.getNode(!Je);if(Cf(Ht))return w(it,Ht,!!Je&&!Nt.isAtEnd(),!1);var on=Nt.getNode(Je);if(Cf(on))return w(it,on,!Je&&!Nt.isAtEnd(),!1)}return null}var $t=Ve.startContainer,bt=Ve.startOffset,St=Ve.endOffset;if(3===$t.nodeType&&0===bt&&n0($t.parentNode)&&(bt=ve.nodeIndex($t=$t.parentNode),$t=$t.parentNode),1!==$t.nodeType)return null;if(St===bt+1&&$t===Ve.endContainer){var At=$t.childNodes[bt];if(c(At))return function(Yt){var Nn=Yt.cloneNode(!0),jn=i.fire("ObjectSelected",{target:Yt,targetClone:Nn});if(jn.isDefaultPrevented())return null;var In=function(Pn,Un,Hn){var lr=i.$,vn=xl(zt.fromDom(i.getBody()),"#"+Oe).fold(function(){return lr([])},function(vr){return lr([vr.dom])});0===vn.length&&(vn=lr('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>').attr("id",Oe)).appendTo(i.getBody());var Zn=ve.createRng();Un===Hn&&zr.ie?(vn.empty().append('<p style="font-size: 0" data-mce-bogus="all">\xa0</p>').append(Un),Zn.setStartAfter(vn[0].firstChild.firstChild),Zn.setEndAfter(Un)):(vn.empty().append(xc).append(Un).append(xc),Zn.setStart(vn[0].firstChild,1),Zn.setEnd(vn[0].lastChild,0)),vn.css({top:ve.getPos(Pn,i.getBody()).y}),vn[0].focus();var Bn=fe.getSel();return Bn.removeAllRanges(),Bn.addRange(Zn),Zn}(Yt,jn.targetClone,Nn),Wn=zt.fromDom(Yt);return Tn(ol(zt.fromDom(i.getBody()),"*[data-mce-selected]"),function(Pn){Fn(Wn,Pn)||Th(Pn,ze)}),ve.getAttrib(Yt,ze)||Yt.setAttribute(ze,"1"),L=Yt,yt(),In}(At)}return null}function B(){L&&L.removeAttribute(ze),xl(zt.fromDom(i.getBody()),"#"+Oe).each(us),L=null}var L,K,q,re,fe=i.selection,ve=i.dom,be=ve.isBlock,Ce=i.getBody(),Se=function db(i,c,h,y){function w(){(function(){for(var K=ol(zt.fromDom(c),"*[contentEditable=false],video,audio,embed,object"),q=0;q<K.length;q++){var re,fe=K[q].dom,ve=fe.previousSibling;Rm(ve)&&(1===(re=ve.data).length?ve.parentNode.removeChild(ve):ve.deleteData(re.length-1,1)),Ph(ve=fe.nextSibling)&&(1===(re=ve.data).length?ve.parentNode.removeChild(ve):ve.deleteData(0,1))}})(),O&&(ad(O),O=null),P.on(function(K){jr(K.caret).remove(),P.clear()}),D&&(It.clearInterval(D),D=void 0)}var D,O,P=rl(),B=ya(i),L=0<B.length?B:"p";return{show:function(K,q){var re;if(w(),hb(q))return null;if(!h(q))return O=function(be,Ce){var Se=be.ownerDocument.createTextNode(Rs),Oe=be.parentNode;if(Ce){if(Hf(ze=be.previousSibling)){if(wr(ze))return ze;if(Rm(ze))return ze.splitText(ze.data.length-1)}Oe.insertBefore(Se,be)}else{var ze=be.nextSibling;if(Hf(ze)){if(wr(ze))return ze;if(Ph(ze))return ze.splitText(1),ze}be.nextSibling?Oe.insertBefore(Se,be.nextSibling):Oe.appendChild(Se)}return Se}(q,K),re=q.ownerDocument.createRange(),Ic(O.nextSibling)?(re.setStart(O,0),re.setEnd(O,0)):(re.setStart(O,1),re.setEnd(O,1)),re;O=function(be,Ce,Se){var Oe,ze=Ce.ownerDocument.createElement(be);ze.setAttribute("data-mce-caret",Se?"before":"after"),ze.setAttribute("data-mce-bogus","all"),ze.appendChild(((Oe=document.createElement("br")).setAttribute("data-mce-bogus","1"),Oe));var ot=Ce.parentNode;return Se?ot.insertBefore(ze,Ce):Ce.nextSibling?ot.insertBefore(ze,Ce.nextSibling):ot.appendChild(ze),ze}(L,q,K);var fe=e1(c,q,K);jr(O).css("top",fe.top);var ve=jr('<div class="mce-visual-caret" data-mce-bogus="all"></div>').css(ir({},fe)).appendTo(c)[0];return P.set({caret:ve,element:q,before:K}),K&&jr(ve).addClass("mce-visual-caret-before"),D=It.setInterval(function(){y()?jr("div.mce-visual-caret",c).toggleClass("mce-visual-caret-hidden"):jr("div.mce-visual-caret",c).addClass("mce-visual-caret-hidden")},500),(re=q.ownerDocument.createRange()).setStart(O,0),re.setEnd(O,0),re},hide:w,getCss:function(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function(){P.on(function(K){var q=e1(c,K.element,K.before);jr(K.caret).css(ir({},q))})},destroy:function(){return It.clearInterval(D)}}}(i,Ce,be,function(){return hu(i)}),Oe="sel-"+ve.uniqueId(),ze="data-mce-selected",ot=fe.getRng,yt=function(){Se.hide()};return zr.ceFalse&&!Ll(i)&&(i.on("mouseup",function(Ve){var Je=ot();Je.collapsed&&vp(i,Ve.clientX,Ve.clientY)&&ww(i,Je,!1).each(y)}),i.on("click",function(Ve){var Je=c_(i,Ve.target);Je&&(n0(Je)&&(Ve.preventDefault(),i.focus()),WT(Je)&&ve.isChildOf(Je,fe.getNode())&&B())}),i.on("blur NewBlock",B),i.on("ResizeWindow FullscreenStateChanged",Se.reposition),i.on("tap",function(Ve){var Je=Ve.target,it=c_(i,Je);n0(it)?(Ve.preventDefault(),fy(i,it).each(P)):c(Je)&&fy(i,Je).each(P)},!0),i.on("mousedown",function(Ve){var Je,it,Nt,Ht,on,$t,bt,St=Ve.target;St!==Ce&&"HTML"!==St.nodeName&&!ve.isChildOf(St,Ce)||!1===vp(i,Ve.clientX,Ve.clientY)||((Je=c_(i,St))?n0(Je)?(Ve.preventDefault(),fy(i,Je).each(P)):(B(),WT(Je)&&Ve.shiftKey||po(Ve.clientX,Ve.clientY,fe.getRng())||(yt(),fe.placeCaretAt(Ve.clientX,Ve.clientY))):c(St)?fy(i,St).each(P):!1===Cf(St)&&(B(),yt(),(it=function fT(i,c,h){function y(L){return!yg(L.node)&&!yl(L.node)}var w,D,O,P=PC(Tr(ki(i.getElementsByTagName("*")),Cf));return(O=Rw(Tr(P,de(Sp,h)),c,y))&&(O=Rw(function(L,K,q){function re(ve,be){var Ce=Tr(PC([be]),function(Se){return!ve(Se,K)});return fe=fe.concat(Ce),0===Ce.length}void 0===q&&(q=!0);var fe=[];return fe.push(K),Na(_p.Up,L,de(re,Ag),K.node,q),Na(_p.Down,L,de(re,$f),K.node,q),fe}(i,O,y(O)),c,y))&&Cf(O.node)?{node:(w=O).node,before:Pw(w,D=c)<Nw(w,D)}:null}(Ce,Ve.clientX,Ve.clientY))&&(Ht=it.node,$t=ve.getParent(Nt=St,be),bt=ve.getParent(Ht,be),!ye($t)&&(Nt!==bt&&ve.isChildOf($t,bt)&&!1===n0(c_(i,$t))||!ve.isChildOf(bt,$t)&&(on=bt,ve.getParent($t,be)!==ve.getParent(on,be))&&function(At){var Yt=At.firstChild;if(!ye(Yt)){var Nn=dn.before(Yt);if(Hi(Nn.getNode())&&1===At.childNodes.length)return!h(Nn);var jn=Mu(At).next(Nn);return jn&&!h(jn)}}($t))||(Ve.preventDefault(),y(w(1,it.node,it.before,!1)),i.getBody().focus()))))}),i.on("keypress",function(Ve){Dr.modifierPressed(Ve)||n0(fe.getNode())&&Ve.preventDefault()}),i.on("GetSelectionRange",function(Ve){var Je=Ve.range;L&&(L.parentNode?((Je=Je.cloneRange()).selectNode(L),Ve.range=Je):L=null)}),i.on("SetSelectionRange",function(Ve){var Je,it,Nt,Ht,on,$t,bt;Ve.range=(Je=Ve.range,it=i.schema.getShortEndedElements(),Nt=ve.createRng(),on=Je.startOffset,$t=Je.endContainer,bt=Je.endOffset,Do(it,(Ht=Je.startContainer).nodeName.toLowerCase())?0===on?Nt.setStartBefore(Ht):Nt.setStartAfter(Ht):Nt.setStart(Ht,on),Do(it,$t.nodeName.toLowerCase())?0===bt?Nt.setEndBefore($t):Nt.setEndAfter($t):Nt.setEnd($t,bt),Nt);var St=P(Ve.range,Ve.forward);St&&(Ve.range=St)}),i.on("AfterSetSelectionRange",function(Ve){var Je=Ve.range,it=Je.startContainer.parentNode;O(Je)||"mcepastebin"===it.id||yt(),ve.hasClass(it,"mce-offscreen-selection")||B()}),i.on("copy",function(Ve){var Je,it,Nt=Ve.clipboardData;Ve.isDefaultPrevented()||!Ve.clipboardData||zr.ie||(Je=(it=ve.get(Oe))&&it.getElementsByTagName("*")[0])&&(Ve.preventDefault(),Nt.clearData(),Nt.setData("text/html",Je.outerHTML),Nt.setData("text/plain",Je.outerText||Je.innerText))}),function LT(i){var c,h;function y(O){var P;O.isDefaultPrevented()||(P=O.dataTransfer)&&(Ot(P.types,"Files")||0<P.files.length)&&(O.preventDefault(),"drop"===O.type&&L1(h,"Dropped file type is not supported"))}function w(O){xr(h,O.target)&&y(O)}function D(){var O=Vo.DOM,P=h.dom,B=document,L=h.inline?h.getBody():h.getDoc(),K=["drop","dragover"];Tn(K,function(q){O.bind(B,q,w),P.bind(L,q,y)}),h.on("remove",function(){Tn(K,function(q){O.unbind(B,q,w),P.unbind(L,q,y)})})}(function ZC(i){var y,w,D,O,P,B,L=rl(),K=Vo.DOM,q=document,re=function l_(i,c){var h=It.throttle(function(y,w){c._selectionOverrides.hideFakeCaret(),c.selection.placeCaretAt(y,w)},0);return c.on("remove",h.stop),function(y){return i.on(function(w){var D,O,P,B,L,K,q,re,fe,ve,be,Ce,Se,Oe,ze,ot,yt,Ve,Je,it,Nt=Math.max(Math.abs(y.screenX-w.screenX),Math.abs(y.screenY-w.screenY));if(!w.dragging&&10<Nt){if(c.fire("dragstart",{target:w.element}).isDefaultPrevented())return;w.dragging=!0,c.focus()}w.dragging&&(Ce=w,D={pageX:(ze=y,ot=(Oe=c).inline?Dy(Oe.getBody()):{left:0,top:0},it=(Je=Oe).getBody(),yt=Je.inline?{left:it.scrollLeft,top:it.scrollTop}:{left:0,top:0},(Se={pageX:(Ve=function(Ht,on){if(on.target.ownerDocument===Ht.getDoc())return{left:on.pageX,top:on.pageY};var $t,bt,St,Nn=Dy(Ht.getContentAreaContainer()),jn=(bt=($t=Ht).getBody(),St=$t.getDoc().documentElement,$t.inline?{left:bt.scrollLeft,top:bt.scrollTop}:{left:bt.scrollLeft||St.scrollLeft,top:bt.scrollTop||St.scrollTop});return{left:on.pageX-Nn.left+jn.left,top:on.pageY-Nn.top+jn.top}}(Oe,ze)).left-ot.left+yt.left,pageY:Ve.top-ot.top+yt.top}).pageX-Ce.relX),pageY:Se.pageY+5},ve=w.ghost,be=c.getBody(),ve.parentNode!==be&&be.appendChild(ve),B=w.width,L=w.height,K=w.maxX,q=w.maxY,fe=re=0,(O=w.ghost).style.left=(P=D).pageX+"px",O.style.top=P.pageY+"px",q<P.pageY+L&&(fe=P.pageY+L-q),O.style.width=B-(re=K<P.pageX+B?P.pageX+B-K:re)+"px",O.style.height=L-fe+"px",h(y.clientX,y.clientY))})}}(P=L,B=i),fe=(y=D=L,function(){y.on(function(ve){ve.dragging&&w.fire("dragend")}),HT(y)});(w=O=i).on("mousedown",function c(ve){var be,Ce,Se,Oe,ze,ot;0===ve.button&&(be=rr(B.dom.getParents(ve.target),function(){for(var yt=[],Ve=0;Ve<arguments.length;Ve++)yt[Ve]=arguments[Ve];return function(Je){for(var it=0;it<yt.length;it++)if(yt[it](Je))return!0;return!1}}(Xw,m2)).getOr(null),ze=B.getBody(),Xw(ot=be)&&ot!==ze&&(Ce=B.dom.getPos(be),Se=B.getBody(),Oe=B.getDoc().documentElement,P.set({element:be,dragging:!1,screenX:ve.screenX,screenY:ve.screenY,maxX:(B.inline?Se.scrollWidth:Oe.offsetWidth)-2,maxY:(B.inline?Se.scrollHeight:Oe.offsetHeight)-2,relX:ve.pageX-Ce.x,relY:ve.pageY-Ce.y,width:be.offsetWidth,height:be.offsetHeight,ghost:function(yt,Ve,Je){var it=B.dom,Nt=yt.cloneNode(!0);it.setStyles(Nt,{width:Ve,height:Je}),it.setAttrib(Nt,"data-mce-selected",null);var Ht=it.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return it.setStyles(Ht,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:Ve,height:Je}),it.setStyles(Nt,{margin:0,boxSizing:"border-box"}),Ht.appendChild(Nt),Ht}(be,be.offsetWidth,be.offsetHeight)})))}),i.on("mousemove",re),i.on("mouseup",function h(ve){D.on(function(be){var Ce,Se,Oe,ze,ot,yt;be.dragging&&((ze=3===(yt=(Oe=O).selection.getSel().getRangeAt(0).startContainer).nodeType?yt.parentNode:yt)===(ot=be.element)||Oe.dom.isChildOf(ze,ot)||Xw(ze)||((Se=be.element.cloneNode(!0)).removeAttribute("data-mce-selected"),Ce=Se,O.fire("drop",{clientX:ve.clientX,clientY:ve.clientY}).isDefaultPrevented()||O.undoManager.transact(function(){kp(be.element),O.insertContent(O.dom.getOuterHTML(Ce)),O._selectionOverrides.hideFakeCaret()})),O.fire("dragend"))}),HT(D)}),K.bind(q,"mousemove",re),K.bind(q,"mouseup",fe),i.on("remove",function(){K.unbind(q,"mousemove",re),K.unbind(q,"mouseup",fe)}),i.on("keydown",function(ve){ve.keyCode===Dr.ESC&&fe()})})(i),(c=i).on("drop",function(O){var P=void 0!==O.clientX?c.getDoc().elementFromPoint(O.clientX,O.clientY):null;!Xw(P)&&"false"!==c.dom.getContentEditableParent(P)||O.preventDefault()}),i.getParam("block_unsupported_drop",!0,"boolean")&&(h=i).on("init",function(){It.setEditorTimeout(h,D,0)})}(i),q=rv(function(){var Ve,Je;K.removed||!K.getBody().contains(document.activeElement)||(Ve=K.selection.getRng()).collapsed&&(Je=_C(K,Ve,!1),K.selection.setRng(Je))},0),(K=i).on("focus",function(){q.throttle()}),K.on("blur",function(){q.cancel()}),(re=i).on("init",function(){re.on("focusin",function(Ve){var Je,it,Nt=Ve.target;yl(Nt)&&(Je=qg(re.getBody(),Nt),it=uo(Je)?Je:Nt,re.selection.getNode()!==it&&fy(re,it).each(function(Ht){return re.selection.setRng(Ht)}))})})),{showCaret:w,showBlockCaretContainer:function(Ve){Ve.hasAttribute("data-mce-caret")&&(mf(Ve),y(ot()),fe.scrollIntoView(Ve))},hideFakeCaret:yt,destroy:function(){Se.destroy(),L=null}}}function KC(i){return qr(i,function(c){return!1===qe(c)})}function d2(i){var c=i.settings;return KC({block_elements:c.block_elements,boolean_attributes:c.boolean_attributes,custom_elements:c.custom_elements,extended_valid_elements:c.extended_valid_elements,invalid_elements:c.invalid_elements,invalid_styles:c.invalid_styles,move_caret_before_on_enter_elements:c.move_caret_before_on_enter_elements,non_empty_elements:c.non_empty_elements,schema:c.schema,self_closing_elements:c.self_closing_elements,short_ended_elements:c.short_ended_elements,special:c.special,text_block_elements:c.text_block_elements,text_inline_elements:c.text_inline_elements,valid_children:c.valid_children,valid_classes:c.valid_classes,valid_elements:c.valid_elements,valid_styles:c.valid_styles,verify_html:c.verify_html,whitespace_elements:c.whitespace_elements,padd_empty_block_inline_children:c.format_empty_lines})}function rf(i){var c=i.settings,h=i.editorUpload.blobCache;return KC({allow_conditional_comments:c.allow_conditional_comments,allow_html_data_urls:c.allow_html_data_urls,allow_svg_data_urls:c.allow_svg_data_urls,allow_html_in_named_anchor:c.allow_html_in_named_anchor,allow_script_urls:c.allow_script_urls,allow_unsafe_link_target:c.allow_unsafe_link_target,convert_fonts_to_spans:c.convert_fonts_to_spans,fix_list_elements:c.fix_list_elements,font_size_legacy_values:c.font_size_legacy_values,forced_root_block:c.forced_root_block,forced_root_block_attrs:c.forced_root_block_attrs,padd_empty_with_br:c.padd_empty_with_br,preserve_cdata:c.preserve_cdata,remove_trailing_brs:c.remove_trailing_brs,inline_styles:c.inline_styles,root_name:i.inline?i.getElement().nodeName.toLowerCase():void 0,validate:!0,blob_cache:h,document:i.getDoc(),images_dataimg_filter:c.images_dataimg_filter})}function $C(i){return(i.inline?i.ui:i.dom).styleSheetLoader}function Tp(i){function c(){w.unloadAll(O),i.inline||i.ui.styleSheetLoader.unloadAll(D)}function h(){i.removed?c():i.on("remove",c)}var y,w=$C(i),D=Jx(i),O=i.contentCSS;0<i.contentStyles.length&&(y="",fn.each(i.contentStyles,function(Se){y+=Se+"\r\n"}),i.dom.addStyle(y));var P,B,L,K,q,re,fe,ve,be,Ce=Ri.all((P=i,B=O,L=D,K=[new Ri(function(Se,Oe){return $C(P).loadAll(B,Se,Oe)})],P.inline?K:K.concat([new Ri(function(Se,Oe){return P.ui.styleSheetLoader.loadAll(L,Se,Oe)})]))).then(h).catch(h);return i.settings.content_style&&(re=(q=i).settings.content_style,fe=zt.fromDom(q.getBody()),ve=vs(xu(fe)),pc(be=zt.fromTag("style"),"type","text/css"),ss(be,zt.fromText(re)),ss(ve,be),q.on("remove",function(){us(be)})),Ce}function ph(i){var c;!0!==i.removed&&(Ll(c=i)||c.load({initial:!0,format:"html"}),c.startContent=c.getContent({format:"raw"}),function Ay(i){var c,h,y;i.bindPendingEventDelegates(),i.initialized=!0,i.fire("Init"),i.focus(!0),y=(h=i).dom.getRoot(),h.inline||V0(h)&&h.selection.getStart(!0)!==y||Rl(y).each(function(w){var D,O,P,B,L=w.getNode(),K=yg(L)?Rl(L).getOr(w):w;zr.browser.isIE()?(D=h,O=K.toRange(),P=zt.fromDom(D.getBody()),B=(Io(D)?X.from(O):X.none()).map(Qh).filter(Sb(P)),D.bookmark=B.isSome()?B:D.bookmark):h.selection.setRng(K.toRange())}),i.nodeChanged({initial:!0}),i.execCallback("init_instance_callback",i),(c=i).settings.auto_focus&&It.setEditorTimeout(c,function(){var w=!0===c.settings.auto_focus?c:c.editorManager.get(c.settings.auto_focus);w.destroyed||w.focus()},100)}(i))}function zT(i,c){var h=i.settings,y=i.getElement(),w=i.getDoc();h.inline||(i.getElement().style.visibility=i.orgVisibility),c||i.inline||(w.open(),w.write(i.iframeHTML),w.close()),i.inline&&(Yw.addClass(y,"mce-content-body"),i.contentDocument=w=document,i.contentWindow=window,i.bodyElement=y,i.contentAreaContainer=y);var D,O,P,B,L,K,q,re,fe,ve,be,Ce,Se=i.getBody();Se.disabled=!0,i.readonly=!!h.readonly,i.readonly||(i.inline&&"static"===Yw.getStyle(Se,"position",!0)&&(Se.style.position="relative"),Se.contentEditable=i.getParam("content_editable_state",!0)),Se.disabled=!1,i.editorUpload=function pC(i){function c(Oe){return function(ze){return i.selection?Oe(ze):[]}}function h(Oe,ze,ot){for(var yt=0;-1!==(yt=Oe.indexOf(ze,yt))&&(Oe=Oe.substring(0,yt)+ot+Oe.substr(yt+ze.length),yt+=ot.length-ze.length+1),-1!==yt;);return Oe}function y(Oe,ze,ot){return Oe=h(Oe,'src="'+ze+'"','src="'+ot+'"'+(ot===zr.transparentSrc?' data-mce-placeholder="1"':"")),h(Oe,'data-mce-src="'+ze+'"','data-mce-src="'+ot+'"')}function w(Oe,ze){Tn(i.undoManager.data,function(ot){"fragmented"===ot.type?ot.fragments=ln(ot.fragments,function(yt){return y(yt,Oe,ze)}):ot.content=y(ot.content,Oe,ze)})}function D(Oe){return L=L||uy(i,ve),Se().then(c(function(ze){var ot=ln(ze,function(yt){return yt.blobInfo});return L.upload(ot,pw(i)).then(c(function(yt){var Ve=[],Je=ln(yt,function(it,Nt){var on,$t,bt,St=ze[Nt].blobInfo,At=ze[Nt].image;return it.status&&i.getParam("images_replace_blob_uris",!0,"boolean")?(fe.removeByUri(At.src),Ll(i)||(on=At,bt=i.convertURL($t=it.url,"src"),w(on.src,$t),i.$(on).attr({src:i.getParam("images_reuse_filename",!1,"boolean")?$t+(-1===$t.indexOf("?")?"?":"&")+(new Date).getTime():$t,"data-mce-src":bt}))):it.error&&(it.error.options.remove&&(w(At.getAttribute("src"),zr.transparentSrc),Ve.push(At)),L1(i,es.translate(["Failed to upload image: {0}",it.error.message]))),{element:At,status:it.status,uploadUri:it.url,blobInfo:St}});return 0<Je.length&&Ce.fireIfChanged(),0<Ve.length&&(Ll(i)?console.error("Removing images on failed uploads is currently unsupported for RTC"):i.undoManager.transact(function(){Tn(Ve,function(it){i.dom.remove(it),fe.removeByUri(it.src)})})),Oe&&Oe(Je),Je}))}))}function O(Oe){if(C0(i))return D(Oe)}function P(Oe){return!1!==Mr(be,function(ze){return ze(Oe)})&&(0!==Oe.getAttribute("src").indexOf("data:")||i.getParam("images_dataimg_filter",Jt,"function")(Oe))}function B(Oe){return Oe.replace(/src="(blob:[^"]+)"/g,function(ze,ot){var yt=ve.getResultUri(ot);if(yt)return'src="'+yt+'"';var Ve=(Ve=fe.getByUri(ot))||Or(i.editorManager.get(),function(Je,it){return Je||it.editorUpload&&it.editorUpload.blobCache.getByUri(ot)},null);return Ve?'src="data:'+Ve.blob().type+";base64,"+Ve.base64()+'"':ze})}var L,K,q,re,fe=function JM(){function i(w){return rr(y,w).getOrUndefined()}function c(w){if(!w.blob||!w.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var D=w.id||mC("blobid"),O=w.name||D,P=w.blob;return{id:Z(D),name:Z(O),filename:Z(w.filename||O+"."+({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[P.type.toLowerCase()]||"dat")),blob:Z(P),base64:Z(w.base64),blobUri:Z(w.blobUri||URL.createObjectURL(P)),uri:Z(w.uri)}}function h(w){return i(function(D){return D.id()===w})}var y=[];return{create:function(w,D,O,P,B){if(Ae(w))return c({id:w,name:P,filename:B,blob:D,base64:O});if(Ne(w))return c(w);throw new Error("Unknown input type")},add:function(w){h(w.id())||y.push(w)},get:h,getByUri:function(w){return i(function(D){return D.blobUri()===w})},getByData:function(w,D){return i(function(O){return O.base64()===w&&O.blob().type===D})},findFirst:i,removeByUri:function(w){y=Tr(y,function(D){return D.blobUri()!==w||void URL.revokeObjectURL(D.blobUri())})},destroy:function(){Tn(y,function(w){URL.revokeObjectURL(w.blobUri())}),y=[]}}}(),ve=mw(),be=[],Ce=(re=hs(null),(q=i).on("change AddUndo",function(Oe){re.set(ir({},Oe.level))}),{fireIfChanged:function(){var Oe=q.undoManager.data;jt(Oe).filter(function(ze){return!A1(re.get(),ze)}).each(function(ze){q.setDirty(!0),q.fire("change",{level:ze,lastLevel:Ba(Oe,Oe.length-2).getOrNull()})})}}),Se=function(){return(K=K||function qk(i,c){var h={};return{findAll:function(y,w){w=w||Jt;var D=ln(Tr(y?ki(y.getElementsByTagName("img")):[],function(O){var P=O.src;return zr.fileApi&&!O.hasAttribute("data-mce-bogus")&&!O.hasAttribute("data-mce-placeholder")&&P&&P!==zr.transparentSrc&&(0===P.indexOf("blob:")?!i.isUploaded(P)&&w(O):0===P.indexOf("data:")&&w(O))}),function(O){if(void 0!==h[O.src])return new Ri(function(B){h[O.src].then(function(L){return"string"==typeof L?L:void B({image:O,blobInfo:L.blobInfo})})});var P=new Ri(function(B,L){var K,q,re,fe,ve,be,Se,Oe;K=c,re=B,fe=L,0!==(q=O).src.indexOf("blob:")?(be=(ve=oy(q.src)).data,(Oe=K.getByData(Se=be,ve.type))?re({image:q,blobInfo:Oe}):Hb(q.src).then(function(ze){Oe=K.create(uC(),ze,Se),K.add(Oe),re({image:q,blobInfo:Oe})},function(ze){fe(ze)})):(Oe=K.getByUri(q.src))?re({image:q,blobInfo:Oe}):Hb(q.src).then(function(ze){var ot=ze;new Ri(function(yt){var Ve=new FileReader;Ve.onloadend=function(){yt(Ve.result)},Ve.readAsDataURL(ot)}).then(function(yt){Se=oy(yt).data,Oe=K.create(uC(),ze,Se),K.add(Oe),re({image:q,blobInfo:Oe})})},function(ze){fe(ze)})}).then(function(B){return delete h[B.image.src],B}).catch(function(B){return delete h[O.src],B});return h[O.src]=P});return Ri.all(D)}}}(ve,fe)).findAll(i.getBody(),P).then(c(function(Oe){return Oe=Tr(Oe,function(ze){return"string"!=typeof ze||void L1(i,ze)}),Ll(i)||Tn(Oe,function(ze){w(ze.image.src,ze.blobInfo.blobUri()),ze.image.src=ze.blobInfo.blobUri(),ze.image.removeAttribute("data-mce-src")}),Oe}))};return i.on("SetContent",function(){(C0(i)?O:Se)()}),i.on("RawSaveContent",function(Oe){Oe.content=B(Oe.content)}),i.on("GetContent",function(Oe){Oe.source_view||"raw"===Oe.format||"tree"===Oe.format||(Oe.content=B(Oe.content))}),i.on("PostRender",function(){i.parser.addNodeFilter("img",function(Oe){Tn(Oe,function(ze){var ot,yt=ze.attr("src");fe.getByUri(yt)||(ot=ve.getResultUri(yt))&&ze.attr("src",ot)})})}),{blobCache:fe,addFilter:function(Oe){be.push(Oe)},uploadImages:D,uploadImagesAuto:O,scanForImages:Se,destroy:function(){fe.destroy(),ve.destroy(),K=L=null}}}(i),i.schema=Vf(d2(i)),i.dom=Vo(w,{keep_values:!0,url_converter:i.convertURL,url_converter_scope:i,hex_colors:h.force_hex_style_colors,update_styles:!0,root_element:i.inline?i.getBody():null,collect:function(){return i.inline},schema:i.schema,contentCssCors:i.getParam("content_css_cors",!1,"boolean"),referrerPolicy:ei(i),onSetAttrib:function(bt){i.fire("SetAttrib",bt)}}),i.parser=((O=lC(rf(D=i),D.schema)).addAttributeFilter("src,href,style,tabindex",function(bt,St){for(var At,Yt,Nn=bt.length,jn=D.dom,In="data-mce-"+St;Nn--;)(Yt=(At=bt[Nn]).attr(St))&&!At.attr(In)&&0!==Yt.indexOf("data:")&&0!==Yt.indexOf("blob:")&&("style"===St?((Yt=jn.serializeStyle(jn.parseStyle(Yt),At.name)).length||(Yt=null),At.attr(In,Yt),At.attr(St,Yt)):"tabindex"===St?(At.attr(In,Yt),At.attr(St,null)):At.attr(In,D.convertURL(Yt,St,At.name)))}),O.addNodeFilter("script",function(bt){for(var St=bt.length;St--;){var At=bt[St],Yt=At.attr("type")||"no/type";0!==Yt.indexOf("mce-")&&At.attr("type","mce-"+Yt)}}),D.settings.preserve_cdata&&O.addNodeFilter("#cdata",function(bt){for(var St=bt.length;St--;){var At=bt[St];At.type=8,At.name="#comment",At.value="[CDATA["+D.dom.encode(At.value)+"]]"}}),O.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(bt){for(var St=bt.length,At=D.schema.getNonEmptyElements();St--;){var Yt=bt[St];Yt.isEmpty(At)&&0===Yt.getAll("br").length&&(Yt.append(new Ye("br",1)).shortEnded=!0)}}),O),i.serializer=Wb((B=(P=i).settings,ir(ir(ir({},rf(P)),d2(P)),KC({url_converter:B.url_converter,url_converter_scope:B.url_converter_scope,element_format:B.element_format,entities:B.entities,entity_encoding:B.entity_encoding,indent:B.indent,indent_after:B.indent_after,indent_before:B.indent_before}))),i),i.selection=jk(i.dom,i.getWin(),i.serializer,i),i.annotator=pb(i),i.formatter=ly(i),i.undoManager=V1(i),i._nodeChangeDispatcher=new NT(i),i._selectionOverrides=BT(i),fe=i,ve=rl(),be=hs(!1),Ce=x0(function(bt){fe.fire("longpress",ir(ir({},bt),{type:"longpress"})),be.set(!0)},400),fe.on("touchstart",function(bt){xy(bt).each(function(St){Ce.cancel();var At={x:St.clientX,y:St.clientY,target:bt.target};Ce.throttle(bt),be.set(!1),ve.set(At)})},!0),fe.on("touchmove",function(bt){Ce.cancel(),xy(bt).each(function(St){ve.on(function(At){var Yt=St,Nn=At,jn=Math.abs(Yt.clientX-Nn.x),In=Math.abs(Yt.clientY-Nn.y);(5<jn||5<In)&&(ve.clear(),be.set(!1),fe.fire("longpresscancel"))})})},!0),fe.on("touchend touchcancel",function(bt){Ce.cancel(),"touchcancel"!==bt.type&&ve.get().filter(function(St){return St.target.isEqualNode(bt.target)}).each(function(){be.get()?bt.preventDefault():fe.fire("tap",ir(ir({},bt),{type:"tap"}))})},!0),(q=K=i).on("click",function(bt){q.dom.getParent(bt.target,"details")&&bt.preventDefault()}),(re=K).parser.addNodeFilter("details",function(bt){Tn(bt,function(St){St.attr("data-mce-open",St.attr("open")),St.attr("open","open")})}),re.serializer.addNodeFilter("details",function(bt){Tn(bt,function(St){var At=St.attr("data-mce-open");St.attr("open",Ae(At)?At:null),St.attr("data-mce-open",null)})}),Ll(i)||(L=i).on("click",function(bt){var St,At,Yt,Nn,jn;3<=bt.detail&&(Yt=(St=L).selection.getRng(),Nn=dn.fromRangeStart(Yt),jn=dn.fromRangeEnd(Yt),!dn.isElementPosition(Nn)||fx(At=Nn.container())&&Rl(At).each(function(In){return Yt.setStart(In.container(),In.offset())}),!dn.isElementPosition(jn)||fx(At=Nn.container())&&Kh(At).each(function(In){return Yt.setEnd(In.container(),In.offset())}),St.selection.setRng(Dk(Yt)))});var Oe,ze,ot,yt,Ve,Je,it,Nt,Ht,on=Ll(Oe=i)?hs(null):function cx(i){var c,h,y,w,D,O,P,B,L,K,q,re,fe,ve,be=function vy(i){var c=hs(null),h=de(Uv,i);return i.on("NodeChange",function(y){var w,D,O,P,B,K,q,re,fe,ve,be,Ce;!nr(i)||zr.browser.isIE()&&y.initial||(B=h,K=y.parents,Tn(Yi(q=Tr(ln(ol(zt.fromDom(i.dom.getRoot()),'*[data-mce-selected="inline-boundary"]'),function(Se){return Se.dom}),B),re=Tr(K,B)),de(gT,!1)),Tn(Yi(re,q),de(gT,!0)),ve=c,(fe=i).selection.isCollapsed()&&!0!==fe.composing&&ve.get()&&(be=dn.fromRangeStart(fe.selection.getRng()),dn.isTextPosition(be)&&!1===(jp(Ce=be)||Td(Ce))&&(K1(fe,Rg(ve.get(),be)),ve.set(null))),w=h,O=c,P=y.parents,(D=i).selection.isCollapsed()&&Tn(Tr(P,w),function(Se){var Oe=dn.fromRangeStart(D.selection.getRng());ch(w,D.getBody(),Oe).bind(function(ze){return $1(D,O,ze)})}))}),c}(i);return i.on("keyup compositionstart",de(s2,i)),ve=be,(fe=i).on("keydown",function(Ce){var Se,Oe,ze,ot;!1===Ce.isDefaultPrevented()&&(Se=fe,Oe=ve,ze=Ce,ot=aa().os,ox([{keyCode:Dr.RIGHT,action:Ro(hm,Se,!0)},{keyCode:Dr.LEFT,action:Ro(hm,Se,!1)},{keyCode:Dr.UP,action:Ro(gh,Se,!1)},{keyCode:Dr.DOWN,action:Ro(gh,Se,!0)},{keyCode:Dr.RIGHT,action:Ro(pd,Se,!0)},{keyCode:Dr.LEFT,action:Ro(pd,Se,!1)},{keyCode:Dr.UP,action:Ro(nf,Se,!1)},{keyCode:Dr.DOWN,action:Ro(nf,Se,!0)},{keyCode:Dr.RIGHT,action:Ro(Bw,Se,!0)},{keyCode:Dr.LEFT,action:Ro(Bw,Se,!1)},{keyCode:Dr.UP,action:Ro(bT,Se,!1)},{keyCode:Dr.DOWN,action:Ro(bT,Se,!0)},{keyCode:Dr.RIGHT,action:Ro(Zv,Se,Oe,!0)},{keyCode:Dr.LEFT,action:Ro(Zv,Se,Oe,!1)},{keyCode:Dr.RIGHT,ctrlKey:!ot.isOSX(),altKey:ot.isOSX(),action:Ro(dg,Se,Oe)},{keyCode:Dr.LEFT,ctrlKey:!ot.isOSX(),altKey:ot.isOSX(),action:Ro(qC,Se,Oe)},{keyCode:Dr.UP,action:Ro(mh,Se,!1)},{keyCode:Dr.DOWN,action:Ro(mh,Se,!0)}],ze).each(function(yt){ze.preventDefault()}))}),re=be,(q=i).on("keydown",function(Ce){var Se,Oe,ze;!1===Ce.isDefaultPrevented()&&(Oe=re,ze=Ce,ox([{keyCode:Dr.BACKSPACE,action:Ro(BC,Se=q,!1)},{keyCode:Dr.BACKSPACE,action:Ro(W1,Se,!1)},{keyCode:Dr.DELETE,action:Ro(W1,Se,!0)},{keyCode:Dr.BACKSPACE,action:Ro(Cw,Se,!1)},{keyCode:Dr.DELETE,action:Ro(Cw,Se,!0)},{keyCode:Dr.BACKSPACE,action:Ro(hh,Se,Oe,!1)},{keyCode:Dr.DELETE,action:Ro(hh,Se,Oe,!0)},{keyCode:Dr.BACKSPACE,action:Ro(J_,Se,!1)},{keyCode:Dr.DELETE,action:Ro(J_,Se,!0)},{keyCode:Dr.BACKSPACE,action:Ro(G1,Se,!1)},{keyCode:Dr.DELETE,action:Ro(G1,Se,!0)},{keyCode:Dr.BACKSPACE,action:Ro(nx,Se,!1)},{keyCode:Dr.DELETE,action:Ro(nx,Se,!0)},{keyCode:Dr.BACKSPACE,action:Ro(um,Se,!1)},{keyCode:Dr.DELETE,action:Ro(um,Se,!0)},{keyCode:Dr.BACKSPACE,action:Ro(H1,Se,!1)},{keyCode:Dr.DELETE,action:Ro(H1,Se,!0)},{keyCode:Dr.BACKSPACE,action:Ro($v,Se,!1)},{keyCode:Dr.DELETE,action:Ro($v,Se,!0)}],ze).each(function(ot){ze.preventDefault()}))}),q.on("keyup",function(Ce){var Se,Oe;!1===Ce.isDefaultPrevented()&&(Oe=Ce,ox([{keyCode:Dr.BACKSPACE,action:Ro(CC,Se=q)},{keyCode:Dr.DELETE,action:Ro(CC,Se)}],Oe))}),(K=i).on("keydown",function(Ce){var Se,Oe,ze;Ce.keyCode===Dr.ENTER&&(Se=K,(Oe=Ce).isDefaultPrevented()||(Oe.preventDefault(),(ze=Se.undoManager).typing&&(ze.typing=!1,ze.add()),Se.undoManager.transact(function(){!1===Se.selection.isCollapsed()&&Se.execCommand("Delete"),WC(Se,Oe)})))}),(L=i).on("keydown",function(Ce){var Se;!1===Ce.isDefaultPrevented()&&(Se=Ce,ox([{keyCode:Dr.SPACEBAR,action:Ro(jC,L)}],Se).each(function(Oe){Se.preventDefault()}))}),P=O=i,B=rv(function(){P.composing||ui(P)},0),OT.isIE()&&(P.on("keypress",function(Ce){B.throttle()}),P.on("remove",function(Ce){B.cancel()})),O.on("input",function(Ce){!1===Ce.isComposing&&ui(O)}),D=be,(w=i).on("keydown",function(Ce){var Se,Oe,ze;!1===Ce.isDefaultPrevented()&&(Oe=D,ze=Ce,ox([{keyCode:Dr.END,action:Ro(e_,Se=w,!0)},{keyCode:Dr.HOME,action:Ro(e_,Se,!1)},{keyCode:Dr.END,action:Ro(xT,Se,!0)},{keyCode:Dr.HOME,action:Ro(xT,Se,!1)},{keyCode:Dr.END,action:Ro(cg,Se,!0,Oe)},{keyCode:Dr.HOME,action:Ro(cg,Se,!1,Oe)}],ze).each(function(ot){ze.preventDefault()}))}),c=i,h=be,ET.os.isOSX()||(y=hs(!1),c.on("keydown",function(Ce){lx(Ce)&&UC(y,c,!0)}),c.on("keyup",function(Ce){var Se,Oe,ze;!1===Ce.isDefaultPrevented()&&(ze=Ce,ox([{keyCode:Dr.PAGE_UP,action:Ro(cg,Se=c,!1,Oe=h)},{keyCode:Dr.PAGE_DOWN,action:Ro(cg,Se,!0,Oe)}],ze)),lx(Ce)&&y.get()&&(UC(y,c,!1),c.nodeChanged())})),be}(Oe);Ht=on,(Nt=i).addCommand("delete",function(){var bt,St=Ht;BC(bt=Nt)||W1(bt,!1)||Cw(bt,!1)||hh(bt,St,!1)||H1(bt,!1)||J_(bt)||G1(bt,!1)||nx(bt,!1)||um(bt)||$v(bt,!1)||(mT(bt,"Delete"),bC(bt))}),Nt.addCommand("forwardDelete",function(){var bt,St=Ht;W1(bt=Nt,!0)||Cw(bt,!0)||hh(bt,St,!0)||H1(bt,!0)||J_(bt)||G1(bt,!0)||nx(bt,!0)||um(bt)||$v(bt,!0)||mT(bt,"ForwardDelete")}),ya(ze=i)&&ze.on("NodeChange",de(a2,ze)),yt=(ot=i).dom,Ve=ya(ot),Je=ot.getParam("placeholder",t1.getAttrib(ot.getElement(),"placeholder"),"string"),it=function(bt,St){var At,Yt,Nn;!function(jn){if(tT(jn)){var In=jn.keyCode;return!yC(jn)&&(Dr.metaKeyPressed(jn)||jn.altKey||112<=In&&In<=123||Ot(Dw,In))}}(bt)&&(At=ot.getBody(),Yt=!(tT(Nn=bt)&&!(yC(Nn)||"keyup"===Nn.type&&229===Nn.keyCode))&&function(jn,In,Wn){if(xo(zt.fromDom(In),!1)){var Pn=""===Wn,Un=In.firstElementChild;return!Un||!jn.getStyle(In.firstElementChild,"padding-left")&&!jn.getStyle(In.firstElementChild,"padding-right")&&(Pn?!jn.isBlock(Un):Wn===Un.nodeName.toLowerCase())}return!1}(yt,At,Ve),""!==yt.getAttrib(At,Aw)===Yt&&!St||(yt.setAttrib(At,Aw,Yt?Je:null),yt.setAttrib(At,"aria-placeholder",Yt?Je:null),ot.fire("PlaceholderToggle",{state:Yt}),ot.on(Yt?"keydown":"keyup",it),ot.off(Yt?"keyup":"keydown",it)))},Je&&ot.on("init",function(bt){it(bt,!0),ot.on("change SetContent ExecCommand",it),ot.on("paste",function(St){return It.setEditorTimeout(ot,function(){return it(St)})})});var $t=function rC(i){var c=i;return fr(i.plugins,"rtc").bind(function(h){return X.from(h.setup)}).fold(function(){return c.rtcInstance=Jd(i),X.none()},function(h){var y,w;return c.rtcInstance=(y=Z(null),w=Z(""),{undoManager:{beforeChange:U,add:y,undo:y,redo:y,clear:U,reset:U,hasUndo:ht,hasRedo:ht,transact:y,ignore:U,extra:U},formatter:{match:ht,matchAll:Z([]),matchNode:Z(void 0),canApply:ht,closest:w,apply:U,remove:U,toggle:U,formatChanged:Z({unbind:U})},editor:{getContent:w,setContent:w,insertContent:U,addVisual:U},selection:{getContent:w},raw:{getModel:Z(X.none())}}),X.some(function(){return h().then(function(D){return c.rtcInstance=(K=D.selection,q=D.raw,{undoManager:{beforeChange:(P=D.undoManager).beforeChange,add:P.add,undo:P.undo,redo:P.redo,clear:P.clear,reset:P.reset,hasUndo:P.hasUndo,hasRedo:P.hasRedo,transact:function(re,fe,ve){return P.transact(ve)},ignore:function(re,fe){return P.ignore(fe)},extra:function(re,fe,ve,be){return P.extra(ve,be)}},formatter:{match:function(re,fe,ve,be){return B.match(re,O(fe),be)},matchAll:(B=D.formatter).matchAll,matchNode:B.matchNode,canApply:function(re){return B.canApply(re)},closest:function(re){return B.closest(re)},apply:function(re,fe,ve){return B.apply(re,O(fe))},remove:function(re,fe,ve,be){return B.remove(re,O(fe))},toggle:function(re,fe,ve){return B.toggle(re,O(fe))},formatChanged:function(re,fe,ve,be,Ce){return B.formatChanged(fe,ve,be,Ce)}},editor:{getContent:function(re,fe){return L.getContent(re)},setContent:function(re,fe){return L.setContent(re,fe)},insertContent:function(re,fe){return L.insertContent(re)},addVisual:(L=D.editor).addVisual},selection:{getContent:function(re,fe){return K.getContent(fe)}},raw:{getModel:function(){return X.some(q.getRawModel())}}}),D.rtc.isRemote;function O(re){return Ne(re)?re:{}}var P,B,L,K,q})})})}(i);(function(bt){var St=bt.settings,At=bt.getDoc(),Yt=bt.getBody();bt.fire("PreInit"),St.browser_spellcheck||St.gecko_spellcheck||(At.body.spellcheck=!1,Yw.setAttrib(Yt,"spellcheck","false")),bt.quirks=function c2(i){function c(St,At){try{i.getDoc().execCommand(St,!1,At)}catch{}}function h(St){return St.isDefaultPrevented()}function y(){i.shortcuts.add("meta+a",null,"SelectAll")}function w(){i.inline||Oe.bind(i.getDoc(),"mousedown mouseup",function(St){var At;St.target===i.getDoc().documentElement&&(At=ze.getRng(),i.getBody().focus(),"mousedown"===St.type?wr(At.startContainer)||ze.placeCaretAt(St.clientX,St.clientY):ze.setRng(At))})}function D(){Range.prototype.getClientRects||i.on("mousedown",function(St){var At;h(St)||"HTML"!==St.target.nodeName||((At=i.getBody()).blur(),It.setEditorTimeout(i,function(){At.focus()}))})}function O(){i.on("click",function(St){var At=St.target;/^(IMG|HR)$/.test(At.nodeName)&&"false"!==Oe.getContentEditableParent(At)&&(St.preventDefault(),i.selection.select(At),i.nodeChanged()),"A"===At.nodeName&&Oe.hasClass(At,"mce-item-anchor")&&(St.preventDefault(),ze.select(At))})}function P(){i.on("keydown",function(St){if(!h(St)&&St.keyCode===Ce&&ze.isCollapsed()&&0===ze.getRng().startOffset){var At=ze.getNode().previousSibling;if(At&&At.nodeName&&"table"===At.nodeName.toLowerCase())return St.preventDefault(),!1}})}function B(){i.getParam("readonly")||i.on("BeforeExecCommand mousedown",function(){c("StyleWithCSS",!1),c("enableInlineTableEditing",!1),Ym(i)||c("enableObjectResizing",!1)})}function L(){i.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")}function K(){i.inline||i.on("keydown",function(){document.activeElement===document.body&&i.getWin().focus()})}function q(){i.inline||(i.contentStyles.push("body {min-height: 150px}"),i.on("click",function(St){var At;"HTML"===St.target.nodeName&&(11<zr.ie?i.getBody().focus():(At=i.selection.getRng(),i.getBody().focus(),i.selection.setRng(At),i.selection.normalize(),i.nodeChanged()))}))}function re(){zr.mac&&i.on("keydown",function(St){!Dr.metaKeyPressed(St)||St.shiftKey||37!==St.keyCode&&39!==St.keyCode||(St.preventDefault(),i.selection.getSel().modify("move",37===St.keyCode?"backward":"forward","lineboundary"))})}function fe(){i.on("click",function(St){var At=St.target;do{if("A"===At.tagName)return void St.preventDefault()}while(At=At.parentNode)}),i.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")}function ve(){i.on("init",function(){i.dom.bind(i.getBody(),"submit",function(St){St.preventDefault()})})}var be=fn.each,Ce=Dr.BACKSPACE,Se=Dr.DELETE,Oe=i.dom,ze=i.selection,ot=i.parser,yt=zr.gecko,Je=zr.webkit,it="data:text/mce-internal,",Nt=zr.ie?"Text":"URL",Ht=U;return Ll(i)?(Je&&(w(),O(),ve(),y(),zr.iOS&&(K(),q(),fe())),yt&&(D(),B(),L(),re())):(i.on("keydown",function(St){if(!h(St)&&St.keyCode===Dr.BACKSPACE){var At,Yt=(At=ze.getRng()).startContainer,Nn=At.startOffset,jn=Oe.getRoot(),In=Yt;if(At.collapsed&&0===Nn){for(;In&&In.parentNode&&In.parentNode.firstChild===In&&In.parentNode!==jn;)In=In.parentNode;"BLOCKQUOTE"===In.tagName&&(i.formatter.toggle("blockquote",null,In),(At=Oe.createRng()).setStart(Yt,0),At.setEnd(Yt,0),ze.setRng(At))}}}),i.on("keydown",function(St){var At,Yt,Nn,jn,In=St.keyCode;h(St)||In!==Se&&In!==Ce||(At=i.selection.isCollapsed(),Yt=i.getBody(),At&&!Oe.isEmpty(Yt)||!At&&(Nn=bt(i.selection.getRng()),(jn=Oe.createRng()).selectNode(i.getBody()),Nn!==bt(jn))||(St.preventDefault(),i.setContent(""),Yt.firstChild&&Oe.isBlock(Yt.firstChild)?i.selection.setCursorLocation(Yt.firstChild,0):i.selection.setCursorLocation(Yt,0),i.nodeChanged()))}),zr.windowsPhone||i.on("keyup focusin mouseup",function(St){Dr.modifierPressed(St)||ze.normalize()},!0),Je&&(w(),O(),ya(i)&&i.on("init",function(){c("DefaultParagraphSeparator",ya(i))}),ve(),P(),ot.addNodeFilter("br",function(St){for(var At=St.length;At--;)"Apple-interchange-newline"===St[At].attr("class")&&St[At].remove()}),zr.iOS?(K(),q(),fe()):y()),11<=zr.ie&&(q(),P()),zr.ie&&(y(),c("AutoUrlDetect",!1),i.on("dragstart",function(St){var At,Yt,Nn;(At=St).dataTransfer&&(i.selection.isCollapsed()&&"IMG"===At.target.tagName&&ze.select(At.target),0<(Yt=i.selection.getContent()).length&&(Nn=it+escape(i.id)+","+escape(Yt),At.dataTransfer.setData(Nt,Nn)))}),i.on("drop",function(St){var At,Yt,Nn,jn;h(St)||(At=St.dataTransfer&&(jn=St.dataTransfer.getData(Nt))&&0<=jn.indexOf(it)?(jn=jn.substr(it.length).split(","),{id:unescape(jn[0]),html:unescape(jn[1])}):null)&&At.id!==i.id&&(St.preventDefault(),Yt=xb(St.x,St.y,i.getDoc()),ze.setRng(Yt),Nn=At.html,i.queryCommandSupported("mceInsertClipboardContent")?i.execCommand("mceInsertClipboardContent",!1,{content:Nn,internal:!0}):i.execCommand("mceInsertContent",!1,Nn))})),yt&&(i.on("keydown",function(St){if(!h(St)&&St.keyCode===Ce&&i.getBody().getElementsByTagName("hr").length&&ze.isCollapsed()&&0===ze.getRng().startOffset){var At=ze.getNode(),Yt=At.previousSibling;if("HR"===At.nodeName)return Oe.remove(At),void St.preventDefault();Yt&&Yt.nodeName&&"hr"===Yt.nodeName.toLowerCase()&&(Oe.remove(Yt),St.preventDefault())}}),D(),i.on("keypress",function(St){var At;if(!h(St)&&(8===St.keyCode||46===St.keyCode)&&$t())return At=on(),i.getDoc().execCommand("delete",!1,null),At(),St.preventDefault(),!1}),Oe.bind(i.getDoc(),"cut",function(St){var At;!h(St)&&$t()&&(At=on(),It.setEditorTimeout(i,function(){At()}))}),B(),i.on("SetContent ExecCommand",function(St){"setcontent"!==St.type&&"mceInsertLink"!==St.command||be(Oe.select("a"),function(At){var Yt=At.parentNode,Nn=Oe.getRoot();if(Yt.lastChild===At){for(;Yt&&!Oe.isBlock(Yt);){if(Yt.parentNode.lastChild!==Yt||Yt===Nn)return;Yt=Yt.parentNode}Oe.add(Yt,"br",{"data-mce-bogus":1})}})}),L(),re(),P())),{refreshContentEditable:Ht,isHidden:function(){if(!yt||i.removed)return!1;var St=i.selection.getSel();return!St||!St.rangeCount||0===St.rangeCount}};function on(){var St=Oe.getAttribs(ze.getStart().cloneNode(!1));return function(){var At=ze.getStart();At!==i.getBody()&&(Oe.setAttrib(At,"style",null),be(St,function(Yt){At.setAttributeNode(Yt.cloneNode(!0))}))}}function $t(){return!ze.isCollapsed()&&Oe.getParent(ze.getStart(),Oe.isBlock)!==Oe.getParent(ze.getEnd(),Oe.isBlock)}function bt(St){var At=Oe.create("body"),Yt=St.cloneContents();return At.appendChild(Yt),ze.serializer.serialize(At,{format:"html"})}}(bt),bt.fire("PostRender");var Nn=bt.getParam("directionality",es.isRtl()?"rtl":void 0);void 0!==Nn&&(Yt.dir=Nn),St.protect&&bt.on("BeforeSetContent",function(jn){fn.each(St.protect,function(In){jn.content=jn.content.replace(In,function(Wn){return"\x3c!--mce:protected "+escape(Wn)+"--\x3e"})})}),bt.on("SetContent",function(){bt.addVisual(bt.getBody())}),bt.on("compositionstart compositionend",function(jn){bt.composing="compositionstart"===jn.type})})(i),$t.fold(function(){Tp(i).then(function(){return ph(i)})},function(bt){i.setProgressState(!0),Tp(i).then(function(){bt().then(function(St){i.setProgressState(!1),ph(i)},function(St){i.notificationManager.open({type:"error",text:String(St)}),ph(i)})})})}function hx(i){return i.replace(/^\-/,"")}function f2(i){return{editorContainer:i,iframeContainer:i,api:{}}}function h2(i){var c,h,y,w,D,O,P,B;i.fire("ScriptsLoaded"),h=fn.trim(lb(c=i)),y=c.ui.registry.getAll().icons,On(ir(ir({},gw.get("default").icons),gw.get(h).icons),function(Se,Oe){Do(y,Oe)||c.ui.registry.addIcon(Oe,Se)}),O=hi(w=i),Ae(O)?(w.settings.theme=hx(O),D=sm.get(O),w.theme=new D(w,sm.urls[O]),w.theme.init&&w.theme.init(w,sm.urls[O]||w.documentBaseUrl.replace(/\/$/,""),w.$)):w.theme={},B=[],fn.each(Vs(P=i).split(/[ ,]/),function(Se){QC(P,B,hx(Se))});var L=function RD(i){var c,h,y,w,D,O,P,B=i.getElement();return i.orgDisplay=B.style.display,Ae(hi(i))?i.theme.renderUI():$e(hi(i))?(h=(c=i).getElement(),(y=hi(c)(c,h)).editorContainer.nodeType&&(y.editorContainer.id=y.editorContainer.id||c.id+"_parent"),y.iframeContainer&&y.iframeContainer.nodeType&&(y.iframeContainer.id=y.iframeContainer.id||c.id+"_iframecontainer"),y.height=y.iframeHeight||h.offsetHeight,y):(P=(w=i).getElement(),w.inline?f2(null):(D=P,O=GT.create("div"),GT.insertAfter(O,D),f2(O)))}(i),K=i,q=X.from(L.api).getOr({}),re={show:X.from(q.show).getOr(U),hide:X.from(q.hide).getOr(U),disable:X.from(q.disable).getOr(U),isDisabled:X.from(q.isDisabled).getOr(ht),enable:function(){K.mode.isReadOnly()||X.from(q.enable).map(Ge)}};K.ui=ir(ir({},K.ui),re);var fe,ve,be,Ce={editorContainer:L.editorContainer,iframeContainer:L.iframeContainer};return i.editorContainer=Ce.editorContainer||null,function F1(i){var c,h;i.contentCSS=i.contentCSS.concat(lT(i,(h=(c=i).getParam("content_css"),Ae(h)?ln(h.split(","),As):Ee(h)?h:!1===h||c.inline?[]:["default"])),lT(i,Jx(i)))}(i),i.inline?zT(i):(be=function qw(i,c){var h,y,w,D,O=i.translate("Rich Text Area"),P=(h=i.id,y=O,w=i.getParam("iframe_attrs",{}),Im(D=zt.fromTag("iframe"),w),Im(D,{id:h+"_ifr",frameBorder:"0",allowTransparency:"true",title:y}),Tg(D,"tox-edit-area__iframe"),D.dom);P.onload=function(){P.onload=null,i.fire("load")};var B=function(L,K){if(document.domain!==window.location.hostname&&zr.browser.isIE()){var q=mC("mce");L[q]=function(){zT(L)};var re='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinymce.get("'+L.id+'");document.write(ed.iframeHTML);document.close();ed.'+q+"(true);})()";return mx.setAttrib(K,"src",re),!0}return!1}(i,P);return i.contentAreaContainer=c.iframeContainer,i.iframeElement=P,i.iframeHTML=function(L){var K=L.getParam("doctype","<!DOCTYPE html>")+"<html><head>";L.getParam("document_base_url","")!==L.documentBaseUrl&&(K+='<base href="'+L.documentBaseURI.getURI()+'" />'),K+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var q=sb(L,"body_id","tinymce"),re=sb(L,"body_class",""),fe=L.translate(L.getParam("iframe_aria_text","Rich Text Area. Press ALT-0 for help.","string"));return ub(L)&&(K+='<meta http-equiv="Content-Security-Policy" content="'+ub(L)+'" />'),K+'</head><body id="'+q+'" class="mce-content-body '+re+'" data-id="'+L.id+'" aria-label="'+fe+'"><br></body></html>'}(i),mx.add(c.iframeContainer,P),B}(fe=i,ve=Ce),ve.editorContainer&&(mx.get(ve.editorContainer).style.display=fe.orgDisplay,fe.hidden=mx.isHidden(ve.editorContainer)),fe.getElement().style.display="none",mx.setAttrib(fe.id,"aria-hidden","true"),void(be||zT(fe)))}function g2(i){return"-"===i.charAt(0)}function FT(i,c,h){return X.from(c).filter(function(y){return 0<y.length&&!gw.has(y)}).map(function(y){return{url:i.editorManager.baseURL+"/icons/"+y+"/icons"+h+".js",name:X.some(y)}})}function d_(i){return function(c,h){return X.from(h).map(zt.fromDom).filter(vl).bind(function(y){return w=i,D=c,Q_(zt.fromDom(y.dom),function(B){return Sd(L=B,w).orThunk(function(){return"font"===va(L)?fr(p2,w).bind(function(K){return $u(L,K)}):X.none()});var L},function(B){return Fn(zt.fromDom(D),B)}).or(X.from(Vo.DOM.getStyle(y.dom,i,!0)));var w,D}).getOr("")}}function JC(i){return Rl(i.getBody()).map(function(c){var h=c.container();return br(h)?h.parentNode:h})}function VT(i,c){return h=i,y=$(X.some,c),X.from((w=h).selection.getRng()).bind(function(D){var O=w.getBody();return D.startContainer===O&&0===D.startOffset?X.none():X.from(w.selection.getStart(!0))}).orThunk(de(JC,h)).map(zt.fromDom).filter(vl).bind(y);var h,y,w}function gx(i,c){if(/^[0-9.]+$/.test(c)){var h=parseInt(c,10);if(1<=h&&h<=7){var y=fn.explode(i.getParam("font_size_style_values","xx-small,x-small,small,medium,large,x-large,xx-large")),w=fn.explode(i.getParam("font_size_classes",""));return w?w[h-1]||c:y[h-1]||c}return c}return c}var Xw=uo,m2=vc,HT=function(i){i.on(function(c){kp(c.ghost)}),i.clear()},WT=vc,n0=uo,Yw=Vo.DOM,mx=Vo.DOM,GT=Vo.DOM,QC=function(i,c,h){var y,D,O,P=cl.get(h),B=cl.urls[h]||i.documentBaseUrl.replace(/\/$/,"");if(h=fn.trim(h),P&&-1===fn.inArray(c,h)&&(fn.each(cl.dependencies(h),function(K){QC(i,c,K)}),!i.plugins[h]))try{var L=new P(i,B,i.$);(i.plugins[h]=L).init&&(L.init(i,B),c.push(h))}catch(K){D=K,$h(y=i,"PluginLoadError",{message:O=es.translate(["Failed to initialize plugin: {0}",h])}),j1(O,D),L1(y,O)}},vh=Vo.DOM,p2={"font-size":"size","font-family":"face"},v2=d_("font-size"),y2=se(function(i){return i.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")},d_("font-family")),f_=fn.each,r0=fn.map,UT=fn.inArray,jT=(rs.prototype.execCommand=function(i,c,h,y){var w,D,O=!1,P=this;if(!P.editor.removed){if("mcefocus"!==i.toLowerCase()&&(/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint)$/.test(i)||y&&y.skip_focus?X0(D=P.editor).each(function(L){return D.selection.setRng(L)}):P.editor.focus()),(y=P.editor.fire("BeforeExecCommand",{command:i,ui:c,value:h})).isDefaultPrevented())return!1;var B=i.toLowerCase();if(w=P.commands.exec[B])return w(B,c,h),P.editor.fire("ExecCommand",{command:i,ui:c,value:h}),!0;if(f_(this.editor.plugins,function(L){if(L.execCommand&&L.execCommand(i,c,h))return P.editor.fire("ExecCommand",{command:i,ui:c,value:h}),!(O=!0)}),O)return O;if(P.editor.theme&&P.editor.theme.execCommand&&P.editor.theme.execCommand(i,c,h))return P.editor.fire("ExecCommand",{command:i,ui:c,value:h}),!0;try{O=P.editor.getDoc().execCommand(i,c,h)}catch{}return!!O&&(P.editor.fire("ExecCommand",{command:i,ui:c,value:h}),!0)}},rs.prototype.queryCommandState=function(i){var c;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(i=i.toLowerCase(),c=this.commands.state[i])return c(i);try{return this.editor.getDoc().queryCommandState(i)}catch{}return!1}},rs.prototype.queryCommandValue=function(i){var c;if(!this.editor.quirks.isHidden()&&!this.editor.removed){if(i=i.toLowerCase(),c=this.commands.value[i])return c(i);try{return this.editor.getDoc().queryCommandValue(i)}catch{}}},rs.prototype.addCommands=function(i,c){void 0===c&&(c="exec");var h=this;f_(i,function(y,w){f_(w.toLowerCase().split(","),function(D){h.commands[c][D]=y})})},rs.prototype.addCommand=function(i,c,h){var y=this;i=i.toLowerCase(),this.commands.exec[i]=function(w,D,O,P){return c.call(h||y.editor,D,O,P)}},rs.prototype.queryCommandSupported=function(i){if(i=i.toLowerCase(),this.commands.exec[i])return!0;try{return this.editor.getDoc().queryCommandSupported(i)}catch{}return!1},rs.prototype.addQueryStateHandler=function(i,c,h){var y=this;i=i.toLowerCase(),this.commands.state[i]=function(){return c.call(h||y.editor)}},rs.prototype.addQueryValueHandler=function(i,c,h){var y=this;i=i.toLowerCase(),this.commands.value[i]=function(){return c.call(h||y.editor)}},rs.prototype.hasCustomCommand=function(i){return i=i.toLowerCase(),!!this.commands.exec[i]},rs.prototype.execNativeCommand=function(i,c,h){return void 0===c&&(c=!1),void 0===h&&(h=null),this.editor.getDoc().execCommand(i,c,h)},rs.prototype.isFormatMatch=function(i){return this.editor.formatter.match(i)},rs.prototype.toggleFormat=function(i,c){this.editor.formatter.toggle(i,c),this.editor.nodeChanged()},rs.prototype.storeSelection=function(i){this.selectionBookmark=this.editor.selection.getBookmark(i)},rs.prototype.restoreSelection=function(){this.editor.selection.moveToBookmark(this.selectionBookmark)},rs.prototype.setupCommands=function(i){var c=this;function h(y){return function(){var w=i.selection,D=w.isCollapsed()?[i.dom.getParent(w.getNode(),i.dom.isBlock)]:w.getSelectedBlocks(),O=r0(D,function(P){return!!i.formatter.matchNode(P,y)});return-1!==UT(O,!0)}}this.addCommands({"mceResetDesignMode,mceBeginUndoLevel":U,"mceEndUndoLevel,mceAddUndoLevel":function(){i.undoManager.add()},mceFocus:function(y,w,D){var O;(O=i).removed||(D?ke:function(B){var L=B.selection,K=B.getBody(),q=L.getRng();B.quirks.refreshContentEditable(),void 0!==B.bookmark&&!1===hu(B)&&X0(B).each(function(be){B.selection.setRng(be),q=be});var re,fe,ve=(re=B,fe=L.getNode(),re.dom.getParent(fe,function(be){return"true"===re.dom.getContentEditable(be)}));if(B.$.contains(K,ve))return Df(ve),hd(B,q),ke(B);B.inline||(zr.opera||Df(K),B.getWin().focus()),(zr.gecko||B.inline)&&(Df(K),hd(B,q)),ke(B)})(O)},"Cut,Copy,Paste":function(y){var w,D,O=i.getDoc();try{c.execNativeCommand(y)}catch{w=!0}!(w="paste"===y&&!O.queryCommandEnabled(y)||w)&&O.queryCommandSupported(y)||(D=i.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead."),zr.mac&&(D=D.replace(/Ctrl\+/g,"\u2318+")),i.notificationManager.open({text:D,type:"error"}))},unlink:function(){var y;i.selection.isCollapsed()?(y=i.dom.getParent(i.selection.getStart(),"a"))&&i.dom.remove(y,!0):i.formatter.remove("link")},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull,JustifyNone":function(y){var w=y.substring(7);"full"===w&&(w="justify"),f_("left,center,right,justify".split(","),function(D){w!==D&&i.formatter.remove("align"+D)}),"none"!==w&&c.toggleFormat("align"+w)},"InsertUnorderedList,InsertOrderedList":function(y){var w;c.execNativeCommand(y);var D=i.dom.getParent(i.selection.getNode(),"ol,ul");D&&/^(H[1-6]|P|ADDRESS|PRE)$/.test((w=D.parentNode).nodeName)&&(c.storeSelection(),i.dom.split(w,D),c.restoreSelection())},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(y){c.toggleFormat(y)},"ForeColor,HiliteColor":function(y,w,D){c.toggleFormat(y,{value:D})},FontName:function(y,w,D){var O,P;P=gx(O=i,D),O.formatter.toggle("fontname",{value:ln(P.split(/\s*,\s*/),function(B){return-1===B.indexOf(" ")||Xr(B,'"')||Xr(B,"'")?B:"'"+B+"'"}).join(",")}),O.nodeChanged()},FontSize:function(y,w,D){var O;(O=i).formatter.toggle("fontsize",{value:gx(O,D)}),O.nodeChanged()},LineHeight:function(y,w,D){var O;(O=i).formatter.toggle("lineheight",{value:String(D)}),O.nodeChanged()},Lang:function(y,w,D){c.toggleFormat(y,{value:D.code,customValue:D.customCode})},RemoveFormat:function(y){i.formatter.remove(y)},mceBlockQuote:function(){c.toggleFormat("blockquote")},FormatBlock:function(y,w,D){return c.toggleFormat(D||"p")},mceCleanup:function(){var y=i.selection.getBookmark();i.setContent(i.getContent()),i.selection.moveToBookmark(y)},mceRemoveNode:function(y,w,D){var O=D||i.selection.getNode();O!==i.getBody()&&(c.storeSelection(),i.dom.remove(O,!0),c.restoreSelection())},mceSelectNodeDepth:function(y,w,D){var O=0;i.dom.getParent(i.selection.getNode(),function(P){if(1===P.nodeType&&O++===D)return i.selection.select(P),!1},i.getBody())},mceSelectNode:function(y,w,D){i.selection.select(D)},mceInsertContent:function(y,w,D){var O,P,B,L;O=i,B=(P=function(K){if("string"==typeof K)return{content:K,details:{}};var q=fn.extend({paste:K.paste,data:{paste:K.paste}},K);return{content:K.content,details:q}}(D)).content,L=P.details,ac(O).editor.insertContent(B,L)},mceInsertRawHTML:function(y,w,D){i.selection.setContent("tiny_mce_marker");var O=i.getContent();i.setContent(O.replace(/tiny_mce_marker/g,function(){return D}))},mceInsertNewLine:function(y,w,D){WC(i,D)},mceToggleFormat:function(y,w,D){c.toggleFormat(D)},mceSetContent:function(y,w,D){i.setContent(D)},"Indent,Outdent":function(y){Lw(i,y)},mceRepaint:U,InsertHorizontalRule:function(){i.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){i.hasVisual=!i.hasVisual,i.addVisual()},mceReplaceContent:function(y,w,D){i.execCommand("mceInsertContent",!1,D.replace(/\{\$selection\}/g,i.selection.getContent({format:"text"})))},mceInsertLink:function(y,w,D){"string"==typeof D&&(D={href:D});var O=i.dom.getParent(i.selection.getNode(),"a");D.href=D.href.replace(/ /g,"%20"),O&&D.href||i.formatter.remove("link"),D.href&&i.formatter.apply("link",D,O)},selectAll:function(){var y,w=i.dom.getParent(i.selection.getStart(),vc);w&&((y=i.dom.createRng()).selectNodeContents(w),i.selection.setRng(y))},mceNewDocument:function(){i.setContent("")},InsertLineBreak:function(y,w,D){return Hw(i,D),!0}}),c.addCommands({JustifyLeft:h("alignleft"),JustifyCenter:h("aligncenter"),JustifyRight:h("alignright"),JustifyFull:h("alignjustify"),"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(y){return c.isFormatMatch(y)},mceBlockQuote:function(){return c.isFormatMatch("blockquote")},Outdent:function(){return Jv(i)},"InsertUnorderedList,InsertOrderedList":function(y){var w=i.dom.getParent(i.selection.getNode(),"ul,ol");return w&&("insertunorderedlist"===y&&"UL"===w.tagName||"insertorderedlist"===y&&"OL"===w.tagName)}},"state"),c.addCommands({Undo:function(){i.undoManager.undo()},Redo:function(){i.undoManager.redo()}}),c.addQueryValueHandler("FontName",function(){return VT(y=i,function(w){return y2(y.getBody(),w.dom)}).getOr("");var y},this),c.addQueryValueHandler("FontSize",function(){return VT(y=i,function(w){return v2(y.getBody(),w.dom)}).getOr("");var y},this),c.addQueryValueHandler("LineHeight",function(){return VT(y=i,function(w){var D=zt.fromDom(y.getBody());return Q_(w,function(O){return Sd(O,"line-height")},de(Fn,D)).getOrThunk(function(){var O=parseFloat(bu(w,"line-height")),P=parseFloat(bu(w,"font-size"));return String(O/P)})}).getOr("");var y},this)},rs);function rs(i){this.commands={state:{},exec:{},value:{}},this.editor=i,this.setupCommands(i)}function Zw(i,c,h){try{i.getDoc().execCommand(c,!1,String(h))}catch{}}function px(i,c){i.dom.contentEditable=c?"true":"false"}function Ef(i){return i.readonly}function ek(i){i.parser.addAttributeFilter("contenteditable",function(c){Ef(i)&&Tn(c,function(h){h.attr(o0,h.attr("contenteditable")),h.attr("contenteditable","false")})}),i.serializer.addAttributeFilter(o0,function(c){Ef(i)&&Tn(c,function(h){h.attr("contenteditable",h.attr(o0))})}),i.serializer.addTempAttr(o0)}var o0="data-mce-contenteditable",b2=fn.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),h_=(Mp.isNative=function(i){return!!b2[i.toLowerCase()]},Mp.prototype.fire=function(i,c){var h=i.toLowerCase(),y=Su(h,c||{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(y);var w=this.bindings[h];if(w)for(var D=0,O=w.length;D<O;D++){var P=w[D];if(!P.removed){if(P.once&&this.off(h,P.func),y.isImmediatePropagationStopped())return y;if(!1===P.func.call(this.scope,y))return y.preventDefault(),y}}return y},Mp.prototype.on=function(i,c,h,y){if(c=!1===c?ht:c){var w={func:c,removed:!1};y&&fn.extend(w,y);for(var D=i.toLowerCase().split(" "),O=D.length;O--;){var P=D[O],B=this.bindings[P];B||(B=[],this.toggleEvent(P,!0)),B=h?Vt([w],B,!0):Vt(Vt([],B,!0),[w],!1),this.bindings[P]=B}}return this},Mp.prototype.off=function(i,c){var h=this;if(i)for(var y=i.toLowerCase().split(" "),w=y.length;w--;){var D,O=y[w],P=this.bindings[O];if(!O)return On(this.bindings,function(B,L){h.toggleEvent(L,!1),delete h.bindings[L]}),this;P&&(c?(P=(D=wo(P,function(B){return B.func===c})).fail,this.bindings[O]=P,Tn(D.pass,function(B){B.removed=!0})):P.length=0,P.length||(this.toggleEvent(i,!1),delete this.bindings[O]))}else On(this.bindings,function(B,L){h.toggleEvent(L,!1)}),this.bindings={};return this},Mp.prototype.once=function(i,c,h){return this.on(i,c,h,{once:!0})},Mp.prototype.has=function(i){return i=i.toLowerCase(),!(!this.bindings[i]||0===this.bindings[i].length)},Mp);function Mp(i){this.bindings={},this.settings=i||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||ht}function Iy(i){return i._eventDispatcher||(i._eventDispatcher=new h_({scope:i,toggleEvent:function(c,h){h_.isNative(c)&&i.toggleNativeEvent&&i.toggleNativeEvent(c,h)}})),i._eventDispatcher}function Kw(i,c){if("selectionchange"===c)return i.getDoc();if(!i.inline&&/^mouse|touch|click|contextmenu|drop|dragover|dragend/.test(c))return i.getDoc().documentElement;var h=T0(i);return h?(i.eventRoot||(i.eventRoot=Oy.select(h)[0]),i.eventRoot):i.getBody()}function YT(i,c,h){var y,w,D,O;i.hidden||Ef(i)?Ef(i)&&(y=i,"click"!==(w=h).type||Dr.metaKeyPressed(w)||(D=zt.fromDom(w.target),O=y,Jc(D,"a",function(P){return Fn(P,zt.fromDom(O.getBody()))}).bind(function(P){return $u(P,"href")}).each(function(P){var B,L;w.preventDefault(),/^#/.test(P)?(B=y.dom.select(P+',[name="'+(Xr(L=P,"#")?L.substring(1):L)+'"]')).length&&y.selection.scrollIntoView(B[0],!0):window.open(P,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))):i.fire(c,h)}function Dp(i,c){var h,y;i.delegates||(i.delegates={}),i.delegates[c]||i.removed||(y=Kw(i,c),T0(i)?(vx||(vx={},i.editorManager.on("removeEditor",function(){i.editorManager.activeEditor||vx&&(On(vx,function(w,D){i.dom.unbind(Kw(i,D))}),vx=null)})),vx[c]||(vx[c]=h=function(w){for(var D=w.target,O=i.editorManager.get(),P=O.length;P--;){var B=O[P].getBody();B!==D&&!Oy.isChildOf(D,B)||YT(O[P],c,w)}},Oy.bind(y,c,h))):(Oy.bind(y,c,h=function(w){YT(i,c,w)}),i.delegates[c]=h))}function tk(i,c,h,y){var w=h[c.get()],D=h[y];try{D.activate()}catch(O){return void console.error("problem while activating editor mode "+y+":",O)}w.deactivate(),w.editorReadOnly!==D.editorReadOnly&&function XT(i,c){var h,y,w=zt.fromDom(i.getBody());(function qT(i,c,h){var y,w,D,O,P,B;Al(i,c)&&!1===h?(w=c,Kf(y=i)?y.dom.classList.remove(w):(P=w,0<(B=Tr(ov(O=y,"class"),function(L){return L!==P})).length?pc(O,"class",B.join(" ")):Th(O,"class")),0===(Kf(D=y)?D.dom.classList:ov(D,"class")).length&&Th(D,"class")):h&&Tg(i,c)})(w,"mce-content-readonly",c),c?(i.selection.controlSelection.hideResizeRect(),i._selectionOverrides.hideFakeCaret(),X.from(i.selection.getNode()).each(function(D){D.removeAttribute("data-mce-selected")}),px(w,!(i.readonly=!0)),Tn(ol(w,'*[contenteditable="true"]'),function(D){pc(D,o0,"true"),px(D,!1)})):(px(w,!(i.readonly=!1)),Tn(ol(w,"*["+o0+'="true"]'),function(D){Th(D,o0),px(D,!0)}),Zw(i,"StyleWithCSS",!1),Zw(i,"enableInlineTableEditing",!1),Zw(i,"enableObjectResizing",!1),(hu(h=i)||Av(xu(zt.fromDom((y=h).getElement()))).filter(function(D){return!(void 0!==(O=D.dom.classList)&&(O.contains("tox-edit-area")||O.contains("tox-edit-area__iframe")||O.contains("mce-content-body")))&&xr(y,D.dom);var O}).isSome())&&i.focus(),i.selection.setRng(i.selection.getRng()),i.nodeChanged())}(i,D.editorReadOnly),c.set(y),i.fire("SwitchMode",{mode:y})}function BD(i){var c,h={};fg(Jw(i.toLowerCase(),"+"),function(w){w in Qw?h[w]=!0:/^[0-9]{2,}$/.test(w)?h.keyCode=parseInt(w,10):(h.charCode=w.charCodeAt(0),h.keyCode=zD[w]||w.toUpperCase().charCodeAt(0))});var y=[h.keyCode];for(c in Qw)h[c]?y.push(c):h[c]=!1;return h.id=y.join(","),h.access&&(h.alt=!0,zr.mac?h.ctrl=!0:h.shift=!0),h.meta&&(zr.mac?h.meta=!0:(h.ctrl=!0,h.meta=!1)),h}var vx,yx={fire:function(i,c,h){if(this.removed&&"remove"!==i&&"detach"!==i)return c;var y=Iy(this).fire(i,c);if(!1!==h&&this.parent)for(var w=this.parent();w&&!y.isPropagationStopped();)w.fire(i,y,!1),w=w.parent();return y},on:function(i,c,h){return Iy(this).on(i,c,h)},off:function(i,c){return Iy(this).off(i,c)},once:function(i,c){return Iy(this).once(i,c)},hasEventListeners:function(i){return Iy(this).has(i)}},Oy=Vo.DOM,$w=ir(ir({},yx),{bindPendingEventDelegates:function(){var i=this;fn.each(i._pendingNativeEvents,function(c){Dp(i,c)})},toggleNativeEvent:function(i,c){var h=this;"focus"!==i&&"blur"!==i&&(h.removed||(c?h.initialized?Dp(h,i):h._pendingNativeEvents?h._pendingNativeEvents.push(i):h._pendingNativeEvents=[i]:h.initialized&&(h.dom.unbind(Kw(h,i),i,h.delegates[i]),delete h.delegates[i])))},unbindAllNativeEvents:function(){var i=this,c=i.getBody(),h=i.dom;i.delegates&&(On(i.delegates,function(y,w){i.dom.unbind(Kw(i,w),w,y)}),delete i.delegates),!i.inline&&c&&h&&(c.onload=null,h.unbind(i.getWin()),h.unbind(i.getDoc())),h&&(h.unbind(c),h.unbind(i.getContainer()))}}),x2=["design","readonly"],fg=fn.each,Jw=fn.explode,zD={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},Qw=fn.makeMap("alt,ctrl,shift,meta,access"),ZT=(of.prototype.add=function(i,c,h,y){var w=this,D=w.normalizeCommandFunc(h);return fg(Jw(fn.trim(i)),function(O){var P=w.createShortcut(O,c,D,y);w.shortcuts[P.id]=P}),!0},of.prototype.remove=function(i){var c=this.createShortcut(i);return!!this.shortcuts[c.id]&&(delete this.shortcuts[c.id],!0)},of.prototype.normalizeCommandFunc=function(i){var c=this,h=i;return"string"==typeof h?function(){c.editor.execCommand(h,!1,null)}:fn.isArray(h)?function(){c.editor.execCommand(h[0],h[1],h[2])}:h},of.prototype.createShortcut=function(i,c,h,y){var w=fn.map(Jw(i,">"),BD);return w[w.length-1]=fn.extend(w[w.length-1],{func:h,scope:y||this.editor}),fn.extend(w[0],{desc:this.editor.translate(c),subpatterns:w.slice(1)})},of.prototype.hasModifier=function(i){return i.altKey||i.ctrlKey||i.metaKey},of.prototype.isFunctionKey=function(i){return"keydown"===i.type&&112<=i.keyCode&&i.keyCode<=123},of.prototype.matchShortcut=function(i,c){return!!c&&c.ctrl===i.ctrlKey&&c.meta===i.metaKey&&c.alt===i.altKey&&c.shift===i.shiftKey&&!!(i.keyCode===c.keyCode||i.charCode&&i.charCode===c.charCode)&&(i.preventDefault(),!0)},of.prototype.executeShortcutAction=function(i){return i.func?i.func.call(i.scope):null},of);function of(i){this.shortcuts={},this.pendingPatterns=[],this.editor=i;var c=this;i.on("keyup keypress keydown",function(h){!c.hasModifier(h)&&!c.isFunctionKey(h)||h.isDefaultPrevented()||(fg(c.shortcuts,function(y){if(c.matchShortcut(h,y))return c.pendingPatterns=y.subpatterns.slice(0),"keydown"===h.type&&c.executeShortcutAction(y),!0}),c.matchShortcut(h,c.pendingPatterns[0])&&(1===c.pendingPatterns.length&&"keydown"===h.type&&c.executeShortcutAction(c.pendingPatterns[0]),c.pendingPatterns.shift()))})}var Ey=Vo.DOM,eS=fn.extend,_2=fn.each,tS=fn.resolve,hg=zr.ie,nk=(ri.prototype.render=function(){!function(i){var c=i.id;es.setCode(cv(i));var h,y,w,D,O=function(){vh.unbind(window,"ready",O),i.render()};Wa.Event.domLoaded?i.getElement()&&zr.contentEditable&&(h=zt.fromDom(i.getElement()),y=Or(h.dom.attributes,function(P,B){return P[B.name]=B.value,P},{}),i.on("remove",function(){to(h.dom.attributes,function(P){return Th(h,P.name),0}),Im(h,y)}),i.ui.styleSheetLoader=yc.forElement(h,{contentCssCors:(w=i).getParam("content_css_cors"),referrerPolicy:ei(w)}),i.getParam("inline")?i.inline=!0:(i.orgVisibility=i.getElement().style.visibility,i.getElement().style.visibility="hidden"),(D=i.getElement().form||vh.getParent(c,"form"))&&(i.formElement=D,i.getParam("hidden_input")&&!bg(i.getElement())&&(vh.insertAfter(vh.create("input",{type:"hidden",name:c}),c),i.hasHiddenInput=!0),i.formEventDelegate=function(P){i.fire(P.type,P)},vh.bind(D,"submit reset",i.formEventDelegate),i.on("reset",function(){i.resetContent()}),!i.getParam("submit_patch")||D.submit.nodeType||D.submit.length||D._mceOldSubmit||(D._mceOldSubmit=D.submit,D.submit=function(){return i.editorManager.triggerSave(),i.setDirty(!1),D._mceOldSubmit(D)})),i.windowManager=gC(i),i.notificationManager=fw(i),"xml"===i.getParam("encoding")&&i.on("GetContent",function(P){P.save&&(P.content=vh.encode(P.content))}),i.getParam("add_form_submit_trigger")&&i.on("submit",function(){i.initialized&&i.save()}),i.getParam("add_unload_trigger")&&(i._beforeUnload=function(){!i.initialized||i.destroyed||i.isHidden()||i.save({format:"raw",no_events:!0,set_dirty:!1})},i.editorManager.on("BeforeUnload",i._beforeUnload)),i.editorManager.add(i),function LD(i,c){var h,y,w=tc.ScriptLoader,D=w,O=c,P=function(){var L,K,q,re,fe,ve,be,Ce,Se;fe=w,Ce=cv(ve=i),Se=ve.getParam("language_url","","string"),!1===es.hasCode(Ce)&&"en"!==Ce&&fe.add(be=""!==Se?Se:ve.editorManager.baseURL+"/langs/"+Ce+".js",U,void 0,function(){Xb(ve,"LanguageLoadError",B1("language",be,Ce))}),q=w,Tn(function(Oe){for(var ze=[],ot=function(Ve){ze.push(Ve)},yt=0;yt<Oe.length;yt++)Oe[yt].each(ot);return ze}([FT(re=i,"default",c),X.from(re.getParam("icons_url","","string")).filter(function(Oe){return 0<Oe.length}).map(function(Oe){return{url:Oe,name:X.none()}}).orThunk(function(){return FT(re,lb(re),"")})]),function(Oe){q.add(Oe.url,U,void 0,function(){Xb(re,"IconsLoadError",B1("icons",Oe.url,Oe.name.getOrUndefined()))})}),K=c,fn.each((L=i).getParam("external_plugins"),function(Oe,ze){cl.load(ze,Oe,U,void 0,function(){z1(L,Oe,ze)}),L.settings.plugins+=" "+ze}),fn.each(Vs(L).split(/[ ,]/),function(Oe){var ze,ot;(Oe=fn.trim(Oe))&&!cl.urls[Oe]&&(g2(Oe)?(Oe=Oe.substr(1,Oe.length),ze=cl.dependencies(Oe),fn.each(ze,function(yt){var Ve=cl.createUrl({prefix:"plugins/",resource:yt,suffix:"/plugin"+K+".js"},yt);cl.load(Ve.resource,Ve,U,void 0,function(){z1(L,Ve.prefix+Ve.resource+Ve.suffix,Ve.resource)})})):cl.load(Oe,ot={prefix:"plugins/",resource:Oe,suffix:"/plugin"+K+".js"},U,void 0,function(){z1(L,ot.prefix+ot.resource+ot.suffix,Oe)}))}),w.loadQueue(function(){i.removed||h2(i)},i,function(){i.removed||h2(i)})},B=hi(h=i);Ae(B)?(g2(B)||Do(sm.urls,B)||((y=h.getParam("theme_url"))?sm.load(B,h.documentBaseURI.toAbsolute(y)):sm.load(B,"themes/"+B+"/theme"+O+".js")),D.loadQueue(function(){sm.waitFor(B,P)})):P()}(i,i.suffix)):vh.bind(window,"ready",O)}(this)},ri.prototype.focus=function(i){this.execCommand("mceFocus",!1,i)},ri.prototype.hasFocus=function(){return hu(this)},ri.prototype.execCallback=function(i){for(var c=[],h=1;h<arguments.length;h++)c[h-1]=arguments[h];var y,w=this.settings[i];if(w)return this.callbackLookup&&(y=this.callbackLookup[i])&&(w=y.func,y=y.scope),"string"==typeof w&&(y=(y=w.replace(/\.\w+$/,""))?tS(y):0,w=tS(w),this.callbackLookup=this.callbackLookup||{},this.callbackLookup[i]={func:w,scope:y}),w.apply(y||this,c)},ri.prototype.translate=function(i){return es.translate(i)},ri.prototype.getParam=function(i,c,h){return D=c,K=(w=i)in(y=this).settings?y.settings[w]:D,"hash"===(O=h)?(L={},"string"==typeof(B=K)?Tn(0<B.indexOf("=")?B.split(/[;,](?![^=;,]*(?:[;,]|$))/):B.split(","),function(q){var re=q.split("=");L[fn.trim(re[0])]=fn.trim(1<re.length?re[1]:re[0])}):L=B,L):"string"===O?Hv(Ae,y,w).getOr(D):"number"===O?Hv(Ie,y,w).getOr(D):"boolean"===O?Hv(Wt,y,w).getOr(D):"object"===O?Hv(Ne,y,w).getOr(D):"array"===O?Hv(Ee,y,w).getOr(D):"string[]"===O?Hv((P=Ae,function(q){return Ee(q)&&Mr(q,P)}),y,w).getOr(D):"function"===O?Hv($e,y,w).getOr(D):K;var y,w,D,O,P,B,L,K},ri.prototype.hasPlugin=function(i,c){return!(!Ot(Vs(this).split(/[ ,]/),i)||c&&void 0===cl.get(i))},ri.prototype.nodeChanged=function(i){this._nodeChangeDispatcher.nodeChanged(i)},ri.prototype.addCommand=function(i,c,h){this.editorCommands.addCommand(i,c,h)},ri.prototype.addQueryStateHandler=function(i,c,h){this.editorCommands.addQueryStateHandler(i,c,h)},ri.prototype.addQueryValueHandler=function(i,c,h){this.editorCommands.addQueryValueHandler(i,c,h)},ri.prototype.addShortcut=function(i,c,h,y){this.shortcuts.add(i,c,h,y)},ri.prototype.execCommand=function(i,c,h,y){return this.editorCommands.execCommand(i,c,h,y)},ri.prototype.queryCommandState=function(i){return this.editorCommands.queryCommandState(i)},ri.prototype.queryCommandValue=function(i){return this.editorCommands.queryCommandValue(i)},ri.prototype.queryCommandSupported=function(i){return this.editorCommands.queryCommandSupported(i)},ri.prototype.show=function(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(Ey.show(this.getContainer()),Ey.hide(this.id)),this.load(),this.fire("show"))},ri.prototype.hide=function(){var i=this,c=i.getDoc();i.hidden||(hg&&c&&!i.inline&&c.execCommand("SelectAll"),i.save(),i.inline?(i.getBody().contentEditable="false",i===i.editorManager.focusedEditor&&(i.editorManager.focusedEditor=null)):(Ey.hide(i.getContainer()),Ey.setStyle(i.id,"display",i.orgDisplay)),i.hidden=!0,i.fire("hide"))},ri.prototype.isHidden=function(){return!!this.hidden},ri.prototype.setProgressState=function(i,c){this.fire("ProgressState",{state:i,time:c})},ri.prototype.load=function(i){var c=this.getElement();if(this.removed)return"";if(c){(i=i||{}).load=!0;var h=bg(c)?c.value:c.innerHTML,y=this.setContent(h,i);return i.element=c,i.no_events||this.fire("LoadContent",i),i.element=c=null,y}},ri.prototype.save=function(i){var c,h,y=this,w=y.getElement();if(w&&y.initialized&&!y.removed)return(i=i||{}).save=!0,i.element=w,i.content=y.getContent(i),i.no_events||y.fire("SaveContent",i),"raw"===i.format&&y.fire("RawSaveContent",i),c=i.content,bg(w)?w.value=c:(!i.is_removing&&y.inline||(w.innerHTML=c),(h=Ey.getParent(y.id,"form"))&&_2(h.elements,function(D){if(D.name===y.id)return D.value=c,!1})),i.element=w=null,!1!==i.set_dirty&&y.setDirty(!1),c},ri.prototype.setContent=function(i,c){return iy(this,i,c)},ri.prototype.getContent=function(i){return y=(h=void 0===(h=i)?{}:h).format||"html",w=h,ac(this).editor.getContent(w,y);var h,y,w},ri.prototype.insertContent=function(i,c){c&&(i=eS({content:i},c)),this.execCommand("mceInsertContent",!1,i)},ri.prototype.resetContent=function(i){void 0===i?iy(this,this.startContent,{format:"raw"}):iy(this,i),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()},ri.prototype.isDirty=function(){return!this.isNotDirty},ri.prototype.setDirty=function(i){var c=!this.isNotDirty;this.isNotDirty=!i,i&&i!==c&&this.fire("dirty")},ri.prototype.getContainer=function(){return this.container||(this.container=Ey.get(this.editorContainer||this.id+"_parent")),this.container},ri.prototype.getContentAreaContainer=function(){return this.contentAreaContainer},ri.prototype.getElement=function(){return this.targetElm||(this.targetElm=Ey.get(this.id)),this.targetElm},ri.prototype.getWin=function(){var i;return this.contentWindow||(i=this.iframeElement)&&(this.contentWindow=i.contentWindow),this.contentWindow},ri.prototype.getDoc=function(){var i;return this.contentDocument||(i=this.getWin())&&(this.contentDocument=i.document),this.contentDocument},ri.prototype.getBody=function(){var i=this.getDoc();return this.bodyElement||(i?i.body:null)},ri.prototype.convertURL=function(i,c,h){var y=this.settings;return y.urlconverter_callback?this.execCallback("urlconverter_callback",i,h,!0,c):!y.convert_urls||h&&"LINK"===h.nodeName||0===i.indexOf("file:")||0===i.length?i:y.relative_urls?this.documentBaseURI.toRelative(i):this.documentBaseURI.toAbsolute(i,y.remove_script_host)},ri.prototype.addVisual=function(i){var c;c=i,Ws(this).editor.addVisual(c)},ri.prototype.remove=function(){var i,c,h,y,w;(i=this).removed||(c=i._selectionOverrides,h=i.editorUpload,y=i.getBody(),w=i.getElement(),y&&i.save({is_removing:!0}),i.removed=!0,i.unbindAllNativeEvents(),i.hasHiddenInput&&w&&yp.remove(w.nextSibling),i.fire("remove"),i.editorManager.remove(i),!i.inline&&y&&yp.setStyle(i.id,"display",i.orgDisplay),i.fire("detach"),yp.remove(i.getContainer()),zc(c),zc(h),i.destroy())},ri.prototype.destroy=function(i){var c,h,y,w,D,O,P;h=i,O=(c=this).selection,P=c.dom,c.destroyed||(h||c.removed?(h||(c.editorManager.off("beforeunload",c._beforeUnload),c.theme&&c.theme.destroy&&c.theme.destroy(),zc(O),zc(P)),(w=(y=c).formElement)&&(w._mceOldSubmit&&(w.submit=w._mceOldSubmit,w._mceOldSubmit=null),yp.unbind(w,"submit reset",y.formEventDelegate)),(D=c).contentAreaContainer=D.formElement=D.container=D.editorContainer=null,D.bodyElement=D.contentDocument=D.contentWindow=null,D.iframeElement=D.targetElm=null,D.selection&&(D.selection=D.selection.win=D.selection.dom=D.selection.dom.doc=null),c.destroyed=!0):c.remove())},ri.prototype.uploadImages=function(i){return this.editorUpload.uploadImages(i)},ri.prototype._scanForImages=function(){return this.editorUpload.scanForImages()},ri.prototype.addButton=function(){throw new Error("editor.addButton has been removed in tinymce 5x, use editor.ui.registry.addButton or editor.ui.registry.addToggleButton or editor.ui.registry.addSplitButton instead")},ri.prototype.addSidebar=function(){throw new Error("editor.addSidebar has been removed in tinymce 5x, use editor.ui.registry.addSidebar instead")},ri.prototype.addMenuItem=function(){throw new Error("editor.addMenuItem has been removed in tinymce 5x, use editor.ui.registry.addMenuItem instead")},ri.prototype.addContextToolbar=function(){throw new Error("editor.addContextToolbar has been removed in tinymce 5x, use editor.ui.registry.addContextToolbar instead")},ri);function ri(i,c,h){var y,w,D,O,P,B,L,K,fe,ve,be,Ce,Oe,ze,ot,yt=this;function Ve(bt,St){return function(At,Yt){return bt[At.toLowerCase()]=ir(ir({},Yt),{type:St})}}this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.editorManager=h,this.documentBaseUrl=h.documentBaseURL,eS(this,$w),this.settings=(fe=h.defaultSettings,be=this.documentBaseUrl,Ce=$k,Oe={id:i,theme:"silver",toolbar_mode:Xk(ve=c,"floating"),plugins:"",document_base_url:be,add_form_submit_trigger:!0,submit_patch:!0,add_unload_trigger:!0,convert_urls:!0,relative_urls:!0,remove_script_host:!0,object_resizing:!0,doctype:"<!DOCTYPE html>",visual:!0,font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",forced_root_block:"p",hidden_input:!0,inline_styles:!0,convert_fonts_to_spans:!0,indent:!0,indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist",entity_encoding:"named",url_converter:this.convertURL,url_converter_scope:this},ze=ir(ir({},Oe),Ce?Qk:{}),!1!==(ot=function md(i,c,h,y,w){var D,O,P,B,L,K,q,re,fe=i?{mobile:(D=c,O={resize:!1,toolbar_mode:Xk(w.mobile||{},"scrolling"),toolbar_sticky:!1},ir(ir(ir({},Qk),O),D?{menubar:!1}:{}))}:{},ve=(L=["mobile"],sn(Gv(fe,w),function(Ce,Se){return Ot(L,Se)},tr(K={}),tr(q={})),{sections:Z((re={t:K,f:q}).t),settings:Z(re.f)}),be=fn.extend(h,y,ve.settings(),i&&Vv(ve,"mobile")?function(Ce){void 0===Ce&&(Ce={});var Se=fr(ve.sections(),"mobile").getOr({});return fn.extend({},Ce,Se)}():{},{validate:!0,external_plugins:(P=y,B=ve.settings().external_plugins||{},P&&P.external_plugins?fn.extend({},P.external_plugins,B):B)});return function dw(i,c,h,y){var w,D,O,P,B,L,K,q,re=Gb(h.forced_plugins),fe=Gb(y.plugins),ve=Vv(w=c,"mobile")?w.sections().mobile:{},Ce=(P=c,B=fe,L=ve.plugins?Gb(ve.plugins):fe,D=(O=i)&&(q=(K=P).sections(),Vv(K,"mobile")&&"mobile"===q.mobile.theme)?Tr(L,de(Ot,N1)):O&&Vv(P,"mobile")?L:B,[].concat(Gb(re)).concat(Gb(D)));if(zr.browser.isIE()&&Ot(Ce,"rtc"))throw new Error("RTC plugin is not supported on IE 11.");return fn.extend(y,{plugins:Ce.join(" ")})}(i,ve,y,be)}(hC||Jk,hC,ze,fe,ve)).deprecation_warnings&&function ay(i,c){var h,y,w,D,O,P,B,L=(h=i,y=Tr(fC,function(be){return Do(h,be)}),!1!==(w=h.forced_root_block)&&""!==w||y.push("forced_root_block (false only)"),Pi(y)),K=(B=fn.makeMap(c.plugins," "),Pi(Vt(Vt([],Tr(Zk,ve),!0),Qi(ZM,function(be){return ve(be)?[be+" (moving to premium)"]:[]}),!0))),q=0<K.length,re=0<L.length,fe="mobile"===c.theme;function ve(be){return Do(B,be)}(q||re||fe)&&(D=fe?"\n\nThemes:\n- mobile":"",O=q?"\n\nPlugins:\n- "+K.join("\n- "):"",P=re?"\n\nSettings:\n- "+L.join("\n- "):"",console.warn("The following deprecated features are currently enabled, these will be removed in TinyMCE 6.0. See https://www.tiny.cloud/docs/release-notes/6.0-upcoming-changes/ for more information."+D+O+P))}(ve,ot),ot),this.settings.suffix&&(h.suffix=this.settings.suffix),this.suffix=h.suffix,this.settings.base_url&&h._setBaseUrl(this.settings.base_url),this.baseUri=h.baseURI,this.settings.referrer_policy&&(tc.ScriptLoader._setReferrerPolicy(this.settings.referrer_policy),Vo.DOM.styleSheetLoader._setReferrerPolicy(this.settings.referrer_policy)),Js.languageLoad=this.settings.language_load,Js.baseURL=h.baseURL,this.id=i,this.setDirty(!1),this.documentBaseURI=new Qt(this.settings.document_base_url,{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=!!this.settings.inline,this.shortcuts=new ZT(this),this.editorCommands=new jT(this),this.settings.cache_suffix&&(zr.cacheSuffix=this.settings.cache_suffix.replace(/^[\?\&]+/,"")),this.ui={registry:{addAutocompleter:(P={},(y={addButton:Ve(w={},"button"),addGroupToolbarButton:Ve(w,"grouptoolbarbutton"),addToggleButton:Ve(w,"togglebutton"),addMenuButton:Ve(w,"menubutton"),addSplitButton:Ve(w,"splitbutton"),addMenuItem:Ve(D={},"menuitem"),addNestedMenuItem:Ve(D,"nestedmenuitem"),addToggleMenuItem:Ve(D,"togglemenuitem"),addAutocompleter:Ve(O={},"autocompleter"),addContextMenu:Ve(B={},"contextmenu"),addContextToolbar:Ve(L={},"contexttoolbar"),addContextForm:Ve(L,"contextform"),addSidebar:Ve(K={},"sidebar"),addIcon:function(bt,St){return P[bt.toLowerCase()]=St},getAll:function(){return{buttons:w,menuItems:D,icons:P,popups:O,contextMenus:B,contextToolbars:L,sidebars:K}}}).addAutocompleter),addButton:y.addButton,addContextForm:y.addContextForm,addContextMenu:y.addContextMenu,addContextToolbar:y.addContextToolbar,addIcon:y.addIcon,addMenuButton:y.addMenuButton,addMenuItem:y.addMenuItem,addNestedMenuItem:y.addNestedMenuItem,addSidebar:y.addSidebar,addSplitButton:y.addSplitButton,addToggleButton:y.addToggleButton,addGroupToolbarButton:y.addGroupToolbarButton,addToggleMenuItem:y.addToggleMenuItem,getAll:y.getAll},styleSheetLoader:void 0,show:U,hide:U,enable:U,disable:U,isDisabled:ht};var Je,it,Nt,Ht,on,$t=(Ht=hs("design"),on=hs({design:{activate:U,deactivate:U,editorReadOnly:!1},readonly:{activate:U,deactivate:U,editorReadOnly:!0}}),(it=Je=this).serializer?ek(it):it.on("PreInit",function(){ek(it)}),(Nt=Je).on("ShowCaret",function(bt){Ef(Nt)&&bt.preventDefault()}),Nt.on("ObjectSelected",function(bt){Ef(Nt)&&bt.preventDefault()}),{isReadOnly:function(){return Ef(Je)},set:function(bt){return function(St,At,Yt,Nn){if(Nn!==Yt.get()){if(!Do(At,Nn))throw new Error("Editor mode '"+Nn+"' is invalid");St.initialized?tk(St,Yt,At,Nn):St.on("init",function(){return tk(St,Yt,At,Nn)})}}(Je,on.get(),Ht,bt)},get:function(){return Ht.get()},register:function(bt,St){on.set(function(At,Yt,Nn){var jn;if(Ot(x2,Yt))throw new Error("Cannot override default mode "+Yt);return ir(ir({},At),((jn={})[Yt]=ir(ir({},Nn),{deactivate:function(){try{Nn.deactivate()}catch(In){console.error("problem while deactivating editor mode "+Yt+":",In)}}}),jn))}(on.get(),bt,St))}});this.mode=$t,this.setMode=$t.set,h.fire("SetupEditor",{editor:this}),this.execCallback("setup",this),this.$=jr.overrideDefaults(function(){return{context:yt.inline?yt.getBody():yt.getDoc(),element:yt.getBody()}})}function rk(i){var c=i.type;Gc(Ny.get(),function(h){switch(c){case"scroll":h.fire("ScrollWindow",i);break;case"resize":h.fire("ResizeWindow",i)}})}function w2(i){i!==C2&&(i?jr(window).on("resize scroll",rk):jr(window).off("resize scroll",rk),C2=i)}function KT(i){var c=ha;delete Ou[i.id];for(var h=0;h<Ou.length;h++)if(Ou[h]===i){Ou.splice(h,1);break}return ha=Tr(ha,function(y){return i!==y}),Ny.activeEditor===i&&(Ny.activeEditor=0<ha.length?ha[0]:null),Ny.focusedEditor===i&&(Ny.focusedEditor=null),c.length!==ha.length}var nS,Wc=Vo.DOM,S2=fn.explode,Gc=fn.each,rS=fn.extend,Py=0,C2=!1,Ou=[],ha=[],FD="CSS1Compat"!==document.compatMode,Ny=ir(ir({},yx),{baseURI:null,baseURL:null,defaultSettings:{},documentBaseURL:null,suffix:null,$:jr,majorVersion:"5",minorVersion:"10.7",releaseDate:"2022-12-06",editors:Ou,i18n:es,activeEditor:null,focusedEditor:null,settings:{},setup:function(){var i,c="",h=Qt.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(h)&&(h=h.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(h)||(h+="/"));var y=window.tinymce||window.tinyMCEPreInit;if(y)i=y.base||y.baseURL,c=y.suffix;else{for(var w,D=document.getElementsByTagName("script"),O=0;O<D.length;O++)if(""!==(w=D[O].src||"")){var P=w.substring(w.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(w)){-1!==P.indexOf(".min")&&(c=".min"),i=w.substring(0,w.lastIndexOf("/"));break}}!i&&document.currentScript&&(-1!==(w=document.currentScript.src).indexOf(".min")&&(c=".min"),i=w.substring(0,w.lastIndexOf("/")))}this.baseURL=new Qt(h).toAbsolute(i),this.documentBaseURL=h,this.baseURI=new Qt(this.baseURL),this.suffix=c,this.on("AddEditor",de(g1,this)),this.on("RemoveEditor",de(ko,this))},overrideDefaults:function(i){var c=i.base_url;c&&this._setBaseUrl(c),i.suffix&&(this.suffix=i.suffix);var y=(this.defaultSettings=i).plugin_base_urls;void 0!==y&&On(y,function(w,D){Js.PluginManager.urls[D]=w})},init:function(i){function c(B){var L=B.id;return L||(L=fr(B,"name").filter(function(K){return!Wc.get(K)}).getOrThunk(Wc.uniqueId),B.setAttribute("id",L)),L}function h(B,L){return L.constructor===RegExp?L.test(B.className):Wc.hasClass(B,L)}var y,w=this,D=fn.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),O=function(B){y=B},P=function(){function B(fe,ve,be){var Ce=new nk(fe,ve,w);re.push(Ce),Ce.on("init",function(){++q===L.length&&O(re)}),Ce.targetElm=Ce.targetElm||be,Ce.render()}var L,K,q=0,re=[];Wc.unbind(window,"ready",P),(K=i.onpageload)&&K.apply(w,[]),L=jr.unique(function(fe){var ve=[];if(zr.browser.isIE()&&zr.browser.version.major<11)return j1("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tinymce.com/docs/get-started/system-requirements/"),[];if(FD)return j1("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[];if(fe.types)return Gc(fe.types,function(Ce){ve=ve.concat(Wc.select(Ce.selector))}),ve;if(fe.selector)return Wc.select(fe.selector);if(fe.target)return[fe.target];switch(fe.mode){case"exact":var be=fe.elements||"";0<be.length&&Gc(S2(be),function(Ce){var Se=Wc.get(Ce);Se?ve.push(Se):Gc(document.forms,function(Oe){Gc(Oe.elements,function(ze){ze.name===Ce&&(Ce="mce_editor_"+Py++,Wc.setAttrib(ze,"id",Ce),ve.push(ze))})})});break;case"textareas":case"specific_textareas":Gc(Wc.select("textarea"),function(Ce){fe.editor_deselector&&h(Ce,fe.editor_deselector)||fe.editor_selector&&!h(Ce,fe.editor_selector)||ve.push(Ce)})}return ve}(i)),i.types?Gc(i.types,function(fe){fn.each(L,function(ve){return!Wc.is(ve,fe.selector)||(B(c(ve),rS({},i,fe),ve),!1)})}):(fn.each(L,function(fe){var ve;(ve=w.get(fe.id))&&ve.initialized&&!(ve.getContainer()||ve.getBody()).parentNode&&(KT(ve),ve.unbindAllNativeEvents(),ve.destroy(!0),ve.removed=!0)}),0===(L=fn.grep(L,function(fe){return!w.get(fe.id)})).length?O([]):Gc(L,function(fe){i.inline&&fe.tagName.toLowerCase()in D?j1("Could not initialize inline editor on invalid inline target element",fe):B(c(fe),i,fe)}))};return w.settings=i,Wc.bind(window,"ready",P),new Ri(function(B){y?B(y):O=function(L){B(L)}})},get:function(i){return 0===arguments.length?ha.slice(0):Ae(i)?rr(ha,function(c){return c.id===i}).getOr(null):Ie(i)&&ha[i]||null},add:function(i){var c=this;return Ou[i.id]===i||(null===c.get(i.id)&&("length"!==i.id&&(Ou[i.id]=i),Ou.push(i),ha.push(i)),w2(!0),c.activeEditor=i,c.fire("AddEditor",{editor:i}),nS||(nS=function(h){var y=c.fire("BeforeUnload");if(y.returnValue)return h.preventDefault(),h.returnValue=y.returnValue,y.returnValue},window.addEventListener("beforeunload",nS))),i},createEditor:function(i,c){return this.add(new nk(i,c,this))},remove:function(i){var c,h,y=this;if(i){if(!Ae(i))return nt(y.get((h=i).id))?null:(KT(h)&&y.fire("RemoveEditor",{editor:h}),0===ha.length&&window.removeEventListener("beforeunload",nS),h.remove(),w2(0<ha.length),h);Gc(Wc.select(i),function(w){(h=y.get(w.id))&&y.remove(h)})}else for(c=ha.length-1;0<=c;c--)y.remove(ha[c])},execCommand:function(i,c,h){var y=this.get(h);switch(i){case"mceAddEditor":return this.get(h)||new nk(h,this.settings,this).render(),!0;case"mceRemoveEditor":return y&&y.remove(),!0;case"mceToggleEditor":return y?y.isHidden()?y.show():y.hide():this.execCommand("mceAddEditor",!1,h),!0}return!!this.activeEditor&&this.activeEditor.execCommand(i,c,h)},triggerSave:function(){Gc(ha,function(i){i.save()})},addI18n:function(i,c){es.add(i,c)},translate:function(i){return es.translate(i)},setActive:function(i){var c=this.activeEditor;this.activeEditor!==i&&(c&&c.fire("deactivate",{relatedTarget:i}),i.fire("activate",{relatedTarget:c})),this.activeEditor=i},_setBaseUrl:function(i){this.baseURL=new Qt(this.documentBaseURL).toAbsolute(i.replace(/\/+$/,"")),this.baseURI=new Qt(this.baseURL)}});function $T(i,c,h){var y=c.x,w=c.y,D=i.w,O=i.h,P=c.w,B=c.h,L=(h||"").split("");return"b"===L[0]&&(w+=B),"r"===L[1]&&(y+=P),"c"===L[0]&&(w+=oS(B/2)),"c"===L[1]&&(y+=oS(P/2)),"b"===L[3]&&(w-=O),"r"===L[4]&&(y-=D),"c"===L[3]&&(w-=oS(O/2)),"c"===L[4]&&(y-=oS(D/2)),Ry(y,w,D,O)}function lc(){}function Ry(i,c,h,y){return{x:i,y:c,w:h,h:y}}Ny.setup();var i0,ym,k2,bx,JT=Math.min,Ly=Math.max,oS=Math.round,QT={inflate:function(i,c,h){return Ry(i.x-c,i.y-h,i.w+2*c,i.h+2*h)},relativePosition:$T,findBestRelativePosition:function(i,c,h,y){for(var w,D=0;D<y.length;D++)if((w=$T(i,c,y[D])).x>=h.x&&w.x+w.w<=h.w+h.x&&w.y>=h.y&&w.y+w.h<=h.h+h.y)return y[D];return null},intersect:function(i,c){var h=Ly(i.x,c.x),y=Ly(i.y,c.y),w=JT(i.x+i.w,c.x+c.w),D=JT(i.y+i.h,c.y+c.h);return w-h<0||D-y<0?null:Ry(h,y,w-h,D-y)},clamp:function(i,c,h){var y=i.x,w=i.y,D=i.x+i.w,O=i.y+i.h,P=c.x+c.w,B=c.y+c.h,L=Ly(0,c.x-y),K=Ly(0,c.y-w),q=Ly(0,D-P),re=Ly(0,O-B);return y+=L,w+=K,h&&(D+=L,O+=K,y-=q,w-=re),Ry(y,w,(D-=q)-y,(O-=re)-w)},create:Ry,fromClientRect:function(i){return Ry(i.left,i.top,i.width,i.height)}},T2=(i0={},ym={},{load:function(i,c){var h='Script at URL "'+c+'" failed to load',y='Script at URL "'+c+"\" did not call `tinymce.Resource.add('"+i+"', data)` within 1 second";if(void 0!==i0[i])return i0[i];var w=new Ri(function(D,O){var P=function(B,L,K){function q(Ce){return function(){for(var Se=[],Oe=0;Oe<arguments.length;Oe++)Se[Oe]=arguments[Oe];re||(re=!0,null!==fe&&(clearTimeout(fe),fe=null),Ce.apply(null,Se))}}void 0===K&&(K=1e3);var re=!1,fe=null,ve=q(B),be=q(L);return{start:function(){for(var Ce=[],Se=0;Se<arguments.length;Se++)Ce[Se]=arguments[Se];re||null!==fe||(fe=setTimeout(function(){return be.apply(null,Ce)},K))},resolve:ve,reject:be}}(D,O);ym[i]=P.resolve,tc.ScriptLoader.loadScript(c,function(){return P.start(y)},function(){return P.reject(h)})});return i0[i]=w},add:function(i,c){void 0!==ym[i]&&(ym[i](c),delete ym[i]),i0[i]=Ri.resolve(c)}}),xx=fn.each,M2=fn.extend;lc.extend=k2=function(i){function c(){var D,O,P;if(!bx&&(this.init&&this.init.apply(this,arguments),O=this.Mixins))for(D=O.length;D--;)(P=O[D]).init&&P.init.apply(this,arguments)}function h(){return this}var y=this.prototype;bx=!0;var w=new this;return bx=!1,i.Mixins&&(xx(i.Mixins,function(D){for(var O in D)"init"!==O&&(i[O]=D[O])}),y.Mixins&&(i.Mixins=y.Mixins.concat(i.Mixins))),i.Methods&&xx(i.Methods.split(","),function(D){i[D]=h}),i.Properties&&xx(i.Properties.split(","),function(D){var O="_"+D;i[D]=function(P){return void 0!==P?(this[O]=P,this):this[O]}}),i.Statics&&xx(i.Statics,function(D,O){c[O]=D}),i.Defaults&&y.Defaults&&(i.Defaults=M2({},y.Defaults,i.Defaults)),On(i,function(D,O){var P,B;w[O]="function"==typeof D&&y[O]?(P=O,B=D,function(){var L=this._super;this._super=y[P];var K=B.apply(this,arguments);return this._super=L,K}):D}),c.prototype=w,(c.constructor=c).extend=k2,c};var g_,By,m_,iS=Math.min,ok=Math.max,a0=Math.round,ik={serialize:function(i){var c=JSON.stringify(i);return Ae(c)?c.replace(/[\u0080-\uFFFF]/g,function(h){var y=h.charCodeAt(0).toString(16);return"\\u"+"0000".substring(y.length)+y}):c},parse:function(i){try{return JSON.parse(i)}catch{}}},ak={callbacks:{},count:0,send:function(i){var c=this,h=Vo.DOM,y=(void 0!==i.count?i:c).count,w="tinymce_jsonp_"+y;c.callbacks[y]=function(D){h.remove(w),delete c.callbacks[y],i.callback(D)},h.add(h.doc.body,"script",{id:w,src:i.url,type:"text/javascript"}),c.count++}},aS=ir(ir({},yx),{send:function(i){var c,h=0,y=function(){!i.async||4===c.readyState||1e4<h++?(i.success&&h<1e4&&200===c.status?i.success.call(i.success_scope,""+c.responseText,c,i):i.error&&i.error.call(i.error_scope,1e4<h?"TIMED_OUT":"GENERAL",c,i),c=null):It.setTimeout(y,10)};if(i.scope=i.scope||this,i.success_scope=i.success_scope||i.scope,i.error_scope=i.error_scope||i.scope,i.async=!1!==i.async,i.data=i.data||"",aS.fire("beforeInitialize",{settings:i}),(c=new XMLHttpRequest).overrideMimeType&&c.overrideMimeType(i.content_type),c.open(i.type||(i.data?"POST":"GET"),i.url,i.async),i.crossDomain&&(c.withCredentials=!0),i.content_type&&c.setRequestHeader("Content-Type",i.content_type),i.requestheaders&&fn.each(i.requestheaders,function(w){c.setRequestHeader(w.key,w.value)}),c.setRequestHeader("X-Requested-With","XMLHttpRequest"),(c=aS.fire("beforeSend",{xhr:c,settings:i}).xhr).send(i.data),!i.async)return y();It.setTimeout(y,10)}}),Gs=fn.extend,zy=(sk.sendRPC=function(i){return(new sk).send(i)},sk.prototype.send=function(i){var c=i.error,h=i.success,y=Gs(this.settings,i);y.success=function(w,D){(w=void 0===(w=ik.parse(w))?{error:"JSON Parse error."}:w).error?c.call(y.error_scope||y.scope,w.error,D):h.call(y.success_scope||y.scope,w.result)},y.error=function(w,D){c&&c.call(y.error_scope||y.scope,w,D)},y.data=ik.serialize({id:i.id||"c"+this.count++,method:i.method,params:i.params}),y.content_type="application/json",aS.send(y)},sk);function sk(i){this.settings=Gs({},i),this.count=0}try{var sS,uS="__storage_test__";(sS=window.localStorage).setItem(uS,uS),sS.removeItem(uS)}catch{g_={},By=[],m_={getItem:function(c){return g_[c]||null},setItem:function(c,h){By.push(c),g_[c]=String(h)},key:function(c){return By[c]},removeItem:function(c){By=By.filter(function(h){return h===c}),delete g_[c]},clear:function(){By=[],g_={}},length:0},Object.defineProperty(m_,"length",{get:function(){return By.length},configurable:!1,enumerable:!1}),sS=m_}var _x=fn.extend(Ny,{geom:{Rect:QT},util:{Promise:Ri,Delay:It,Tools:fn,VK:Dr,URI:Qt,Class:lc,EventDispatcher:h_,Observable:yx,I18n:es,XHR:aS,JSON:ik,JSONRequest:zy,JSONP:ak,LocalStorage:sS,Color:function(i){function c(O){var P;return"object"==typeof O?"r"in O?(y=O.r,w=O.g,D=O.b):"v"in O&&function(B,L,K){if(B=(parseInt(B,10)||0)%360,L=parseInt(L,10)/100,K=parseInt(K,10)/100,L=ok(0,iS(L,1)),K=ok(0,iS(K,1)),0!==L){var q=B/60,re=K*L,fe=re*(1-Math.abs(q%2-1)),ve=K-re;switch(Math.floor(q)){case 0:y=re,w=fe,D=0;break;case 1:y=fe,w=re,D=0;break;case 2:y=0,w=re,D=fe;break;case 3:y=0,w=fe,D=re;break;case 4:y=fe,w=0,D=re;break;case 5:y=re,w=0,D=fe;break;default:y=w=D=0}y=a0(255*(y+ve)),w=a0(255*(w+ve)),D=a0(255*(D+ve))}else y=w=D=a0(255*K)}(O.h,O.s,O.v):(P=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)[^\)]*\)/gi.exec(O))?(y=parseInt(P[1],10),w=parseInt(P[2],10),D=parseInt(P[3],10)):(P=/#([0-F]{2})([0-F]{2})([0-F]{2})/gi.exec(O))?(y=parseInt(P[1],16),w=parseInt(P[2],16),D=parseInt(P[3],16)):(P=/#([0-F])([0-F])([0-F])/gi.exec(O))&&(y=parseInt(P[1]+P[1],16),w=parseInt(P[2]+P[2],16),D=parseInt(P[3]+P[3],16)),y=y<0?0:255<y?255:y,w=w<0?0:255<w?255:w,D=D<0?0:255<D?255:D,h}var h={},y=0,w=0,D=0;return i&&c(i),h.toRgb=function(){return{r:y,g:w,b:D}},h.toHsv=function(){return O=y,P=w,B=D,K=0,(q=iS(O/=255,iS(P/=255,B/=255)))===(re=ok(O,ok(P,B)))?{h:0,s:0,v:100*(K=q)}:(L=(re-q)/re,{h:a0(60*((O===q?3:B===q?1:5)-(O===q?P-B:B===q?O-P:B-O)/((K=re)-q))),s:a0(100*L),v:a0(100*K)});var O,P,B,L,K,q,re},h.toHex=function(){function O(P){return 1<(P=parseInt(P,10).toString(16)).length?P:"0"+P}return"#"+O(y)+O(w)+O(D)},h.parse=c,h},ImageUploader:function(i){var c=mw(),h=uy(i,c);return{upload:function(y,w){return h.upload(y,(w=void 0===w||w)?pw(i):void 0)}}}},dom:{EventUtils:Wa,Sizzle:Li,DomQuery:jr,TreeWalker:cs,TextSeeker:ob,DOMUtils:Vo,ScriptLoader:tc,RangeUtils:Sv,Serializer:Wb,StyleSheetLoader:zx,ControlSelection:bb,BookmarkManager:fo,Selection:jk,Event:Wa.Event},html:{Styles:wu,Entities:Yl,Node:Ye,Schema:Vf,SaxParser:Mn,DomParser:lC,Writer:_r,Serializer:Fr},Env:zr,AddOnManager:Js,Annotator:pb,Formatter:ly,UndoManager:V1,EditorCommands:jT,WindowManager:gC,NotificationManager:fw,EditorObservable:$w,Shortcuts:ZT,Editor:nk,FocusManager:ae,EditorManager:Ny,DOM:Vo.DOM,ScriptLoader:tc.ScriptLoader,PluginManager:cl,ThemeManager:sm,IconManager:gw,Resource:T2,trim:fn.trim,isArray:fn.isArray,is:fn.is,toArray:fn.toArray,makeMap:fn.makeMap,each:fn.each,map:fn.map,grep:fn.grep,inArray:fn.inArray,extend:fn.extend,create:fn.create,walk:fn.walk,createNS:fn.createNS,resolve:fn.resolve,explode:fn.explode,_addCacheSuffix:fn._addCacheSuffix,isOpera:zr.opera,isWebKit:zr.webkit,isIE:zr.ie,isGecko:zr.gecko,isMac:zr.mac}),Ap=_x;window.tinymce=Ap,window.tinyMCE=Ap,function(i){if("object"==typeof module)try{module.exports=i}catch{}}(_x)}(),function(){"use strict";function pt(s){return function(d){return _=typeof(p=d),(null===p?"null":"object"==_&&(Array.prototype.isPrototypeOf(p)||p.constructor&&"Array"===p.constructor.name)?"array":"object"==_&&(String.prototype.isPrototypeOf(p)||p.constructor&&"String"===p.constructor.name)?"string":_)===s;var p,_}}function hn(s){return function(d){return typeof d===s}}function gr(s){return function(d){return s===d}}function Ze(s){return null==s}function je(s,d){if(oe(s)){for(var p=0,_=s.length;p<_;++p)if(!d(s[p]))return;return 1}}function j(){}function ye(s,d){return function(){for(var p=[],_=0;_<arguments.length;_++)p[_]=arguments[_];return s(d.apply(null,p))}}function F(s){return function(){return s}}function U(s){return s}function se(s,d){return s===d}var $=pt("string"),Z=pt("object"),oe=pt("array"),ne=gr(null),Q=hn("boolean"),ie=gr(void 0),xe=function(s){return!Ze(s)},Ae=hn("function"),Ne=hn("number");function Ee(s){for(var d=[],p=1;p<arguments.length;p++)d[p-1]=arguments[p];return function(){for(var _=[],T=0;T<arguments.length;T++)_[T]=arguments[T];var I=d.concat(_);return s.apply(null,I)}}function nt(s){return function(d){return!s(d)}}function Wt(s){return function(){throw new Error(s)}}var qe=F(!1),$e=F(!0),Ie=tinymce.util.Tools.resolve("tinymce.ThemeManager"),de=function(){return(de=Object.assign||function(s){for(var d,p=1,_=arguments.length;p<_;p++)for(var T in d=arguments[p])Object.prototype.hasOwnProperty.call(d,T)&&(s[T]=d[T]);return s}).apply(this,arguments)};function Fe(s,d){var p={};for(T in s)Object.prototype.hasOwnProperty.call(s,T)&&d.indexOf(T)<0&&(p[T]=s[T]);if(null!=s&&"function"==typeof Object.getOwnPropertySymbols)for(var _=0,T=Object.getOwnPropertySymbols(s);_<T.length;_++)d.indexOf(T[_])<0&&Object.prototype.propertyIsEnumerable.call(s,T[_])&&(p[T[_]]=s[T[_]]);return p}function le(s,d,p){if(p||2===arguments.length)for(var _,T=0,I=d.length;T<I;T++)!_&&T in d||((_=_||Array.prototype.slice.call(d,0,T))[T]=d[T]);return s.concat(_||Array.prototype.slice.call(d))}function Ge(){return Qe}var Qe={fold:function(s,d){return s()},isSome:qe,isNone:$e,getOr:U,getOrThunk:ht,getOrDie:function(s){throw new Error(s||"error: getOrDie called on none.")},getOrNull:F(null),getOrUndefined:F(void 0),or:U,orThunk:ht,map:Ge,each:j,bind:Ge,exists:qe,forall:$e,filter:function(){return Qe},toArray:function(){return[]},toString:F("none()")};function ht(s){return s()}function Jt(s,d){return $a.call(s,d)}function Rt(s,d){for(var p=0,_=s.length;p<_;p++)if(d(s[p],p))return!0;return!1}function pn(s,d){for(var p=[],_=0;_<s;_++)p.push(d(_));return p}function en(s,d){for(var p=[],_=0;_<s.length;_+=d){var T=os.call(s,_,_+d);p.push(T)}return p}function Ot(s,d){for(var p=s.length,_=new Array(p),T=0;T<p;T++)_[T]=d(s[T],T);return _}function Gn(s,d){for(var p=[],_=[],T=0,I=s.length;T<I;T++){var R=s[T];(d(R,T)?p:_).push(R)}return{pass:p,fail:_}}function ln(s,d){for(var p=[],_=0,T=s.length;_<T;_++){var I=s[_];d(I,_)&&p.push(I)}return p}function Tn(s,d,p){return function(_){for(var I=_.length-1;0<=I;I--)p=d(p,_[I],I)}(s),p}function to(s,d,p){return ur(s,function(_,T){p=d(p,_,T)}),p}function wo(s,d){return function(p,_,T){for(var I=0,R=p.length;I<R;I++){var H=p[I];if(_(H,I))return X.some(H);if(T(H,I))break}return X.none()}(s,d,qe)}function Tr(s,d){for(var p=0,_=s.length;p<_;p++)if(d(s[p],p))return X.some(p);return X.none()}function Gr(s){for(var d=[],p=0,_=s.length;p<_;++p){if(!oe(s[p]))throw new Error("Arr.flatten item "+p+" was not an array, input: "+s);nu.apply(d,s[p])}return d}function Or(s,d){return Gr(Ot(s,d))}function xt(s,d){for(var p=0,_=s.length;p<_;++p)if(!0!==d(s[p],p))return!1;return!0}function rr(s){var d=os.call(s,0);return d.reverse(),d}function ai(s,d){return ln(s,function(p){return!ki(d,p)})}function Qi(s,d){for(var p={},_=0,T=s.length;_<T;_++){var I=s[_];p[String(I)]=d(I,_)}return p}function Mr(s){return[s]}function Wo(s,d){var p=os.call(s,0);return p.sort(d),p}function Yi(s,d){return 0<=d&&d<s.length?X.some(s[d]):X.none()}function Pi(s){return Yi(s,0)}function Ba(s){return Yi(s,s.length-1)}function Gt(s,d){for(var p=0;p<s.length;p++){var _=d(s[p],p);if(_.isSome())return _}return X.none()}function jt(s,d){for(var p=pi(s),_=0,T=p.length;_<T;_++){var I=p[_];d(s[I],I)}}function yn(s,d){return dc(s,function(p,_){return{k:_,v:d(p,_)}})}function On(s,d){var p=[];return jt(s,function(_,T){p.push(d(_,T))}),p}function cr(s,d){for(var p=pi(s),_=0,T=p.length;_<T;_++){var I=p[_],R=s[I];if(d(R,I,s))return X.some(R)}return X.none()}function tr(s){return On(s,U)}function sn(s,d){return ir(s,d)?X.from(s[d]):X.none()}function qr(s,d){return ir(s,d)&&null!=s[d]}function fr(s,d,p){return void 0===p&&(p=se),s.exists(function(_){return p(_,d)})}function Eo(s){for(var d=[],p=function(T){d.push(T)},_=0;_<s.length;_++)s[_].each(p);return d}function li(s,d){return s?X.some(d):X.none()}function di(s,d,p){return""===d||s.length>=d.length&&s.substr(p,p+d.length)===d}function vo(s,d){return-1!==s.indexOf(d)}function tu(s){return 0<s.length}function qi(s){return void 0!==s.style&&Ae(s.style.getPropertyValue)}function za(s){if(null==s)throw new Error("Node cannot be null or undefined");return{dom:s}}var ma,ps=function(s){function d(){return T}function p(I){return I(s)}var _=F(s),T={fold:function(I,R){return R(s)},isSome:$e,isNone:qe,getOr:_,getOrThunk:_,getOrDie:_,getOrNull:_,getOrUndefined:_,or:d,orThunk:d,map:function(I){return ps(I(s))},each:function(I){I(s)},bind:p,exists:p,forall:p,filter:function(I){return I(s)?T:Qe},toArray:function(){return[s]},toString:function(){return"some("+s+")"}};return T},X={some:ps,none:Ge,from:function(s){return null==s?Qe:ps(s)}},os=Array.prototype.slice,$a=Array.prototype.indexOf,nu=Array.prototype.push,ki=function(s,d){return-1<Jt(s,d)},ur=function(s,d){for(var p=0,_=s.length;p<_;p++)d(s[p],p)},Yu=Ae(Array.from)?Array.from:function(s){return os.call(s)},pi=Object.keys,Do=Object.hasOwnProperty,dc=function(s,d){var p={};return jt(s,function(_,T){var I=d(_,T);p[I.k]=I.v}),p},ir=function(s,d){return Do.call(s,d)},Vt=function(s,d,p){return s.isSome()&&d.isSome()?X.some(p(s.getOrDie(),d.getOrDie())):X.none()},wn=function(s,d){return di(s,d,0)},rt=function(s,d){return di(s,d,s.length-d.length)},Dt=(ma=/^\s+|\s+$/g,function(s){return s.replace(ma,"")}),ct={fromHtml:function(s,d){var p=(d||document).createElement("div");if(p.innerHTML=s,!p.hasChildNodes()||1<p.childNodes.length)throw console.error("HTML does not have a single root node",s),new Error("HTML must have a single root node");return za(p.childNodes[0])},fromTag:function(s,d){return za((d||document).createElement(s))},fromText:function(s,d){return za((d||document).createTextNode(s))},fromDom:za,fromPoint:function(s,d,p){return X.from(s.dom.elementFromPoint(d,p)).map(za)}};function tn(s){return s.dom.nodeName.toLowerCase()}function qt(s){return function(d){return d.dom.nodeType===s}}function un(s){var d,p=!1;return function(){for(var _=[],T=0;T<arguments.length;T++)_[T]=arguments[T];return p||(p=!0,d=s.apply(null,_)),d}}function ar(s,d){var p=String(d).toLowerCase();return wo(s,function(_){return _.search(p)})}function qn(s){return function(d){return vo(d,s)}}function Yn(s){return window.matchMedia(s).matches}function or(s,d){var p=s.dom;if(1!==p.nodeType)return!1;var _=p;if(void 0!==_.matches)return _.matches(d);if(void 0!==_.msMatchesSelector)return _.msMatchesSelector(d);if(void 0!==_.webkitMatchesSelector)return _.webkitMatchesSelector(d);if(void 0!==_.mozMatchesSelector)return _.mozMatchesSelector(d);throw new Error("Browser lacks native selectors")}function $n(s){return 1!==s.nodeType&&9!==s.nodeType&&11!==s.nodeType||0===s.childElementCount}function Sn(s,d){return s.dom===d.dom}function Fn(s,d){return ml().browser.isIE()?(T=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(s.dom.compareDocumentPosition(d.dom)&T)):(I=s.dom)!==(R=d.dom)&&I.contains(R);var T,I,R}function Bt(s){return ct.fromDom(s.dom.ownerDocument)}function Hr(s){return wd(s)?s:Bt(s)}function Wr(s){return ct.fromDom(Hr(s).dom.documentElement)}function Br(s){return ct.fromDom(Hr(s).dom.defaultView)}function Er(s){return X.from(s.dom.parentNode).map(ct.fromDom)}function mo(s){return X.from(s.dom.offsetParent).map(ct.fromDom)}function jo(s){return Ot(s.dom.childNodes,ct.fromDom)}function Xr(s,d){return X.from(s.dom.childNodes[d]).map(ct.fromDom)}function As(s,d){return{element:s,offset:d}}function yr(s,d){var p=jo(s);return 0<p.length&&d<p.length?As(p[d],0):As(s,d)}function ao(s){return d0(s)&&xe(s.dom.host)}function Ti(s){return ao(s)?s:ct.fromDom(Hr(s).dom.body)}function js(s){return ct.fromDom(s.dom.host)}function qs(s,d,p){if(!($(p)||Q(p)||Ne(p)))throw console.error("Invalid call to Attribute.set. Key ",d,":: Value ",p,":: Element ",s),new Error("Attribute value was not simple");s.setAttribute(d,p+"")}function Ir(s,d,p){qs(s.dom,d,p)}function fc(s,d){var p=s.dom;jt(d,function(_,T){qs(p,T,_)})}function vi(s,d){var p=s.dom.getAttribute(d);return null===p?void 0:p}function Fa(s,d){return X.from(vi(s,d))}function is(s,d){var p=s.dom;return!(!p||!p.hasAttribute)&&p.hasAttribute(d)}function pa(s,d){s.dom.removeAttribute(d)}function Xc(s,d,p){if(!$(p))throw console.error("Invalid call to CSS.set. Property ",d,":: Value ",p,":: Element ",s),new Error("CSS value must be a string: "+p);qi(s)&&s.style.setProperty(d,p)}function Yc(s,d){qi(s)&&s.style.removeProperty(d)}function Qr(s,d,p){Xc(s.dom,d,p)}function aa(s,d){var p=s.dom;jt(d,function(_,T){Xc(p,T,_)})}function Zc(s,d){var p=s.dom;jt(d,function(_,T){_.fold(function(){Yc(p,T)},function(I){Xc(p,T,I)})})}function Is(s,d){var p=s.dom,_=window.getComputedStyle(p).getPropertyValue(d);return""!==_||ys(s)?_:P_(p,d)}function Ni(s,d){var _=P_(s.dom,d);return X.from(_).filter(function(T){return 0<T.length})}function yu(s,d,p){var _=ct.fromTag(s);return Qr(_,d,p),Ni(_,d).isSome()}function Co(s,d){Yc(s.dom,d),fr(Fa(s,"style").map(Dt),"")&&pa(s,"style")}function Vl(s){return s.dom.offsetWidth}function km(s,d){function p(T){var I=d(T);if(I<=0||null===I){var R=Is(T,s);return parseFloat(R)||0}return I}function _(T,I){return to(I,function(R,H){var W=Is(T,H),ee=void 0===W?0:parseInt(W,10);return isNaN(ee)?R:R+ee},0)}return{set:function(T,I){if(!Ne(I)&&!I.match(/^[0-9]+$/))throw new Error(s+".set accepts only positive integer values. Value was "+I);var R=T.dom;qi(R)&&(R.style[s]=I+"px")},get:p,getOuter:p,aggregate:_,max:function(T,I,R){var H=_(T,R);return H<I?I-H:0}}}function Os(s){return bu.get(s)}function zr(s){return bu.getOuter(s)}function Tm(s,d){return void 0!==s?s:void 0!==d?d:0}function df(s){var d=s.dom.ownerDocument,p=d.body,_=d.defaultView,T=d.documentElement;if(p===s.dom)return Mi(p.offsetLeft,p.offsetTop);var I=Tm(null==_?void 0:_.pageYOffset,T.scrollTop),R=Tm(null==_?void 0:_.pageXOffset,T.scrollLeft),H=Tm(T.clientTop,p.clientTop),W=Tm(T.clientLeft,p.clientLeft);return $c(s).translate(R-W,I-H)}function fn(s){return Ju.get(s)}function zt(s){return Ju.getOuter(s)}function va(s){function d(){return s.stopPropagation()}function p(){return s.preventDefault()}var _=ye(p,d);return{target:ct.fromDom(function(T){if(pl()&&xe(T.target)){var I=ct.fromDom(T.target);if(Ja(I)&&Im(I)&&T.composed&&T.composedPath){var R=T.composedPath();if(R)return Pi(R)}}return X.from(T.target)}(s).getOr(s.target)),x:s.clientX,y:s.clientY,stop:d,prevent:p,kill:_,raw:s}}function Fp(s,d,p,_,T){var I,R,H=(I=p,R=_,function(W){I(W)&&R(va(W))});return s.dom.addEventListener(d,H,T),{unbind:Ee(vl,s,d,H,T)}}function xd(s,d){Er(s).each(function(p){p.dom.insertBefore(d.dom,s.dom)})}function ru(s,d){X.from(s.dom.nextSibling).map(ct.fromDom).fold(function(){Er(s).each(function(p){ta(p,d)})},function(p){xd(p,d)})}function Zu(s,d){Xr(s,0).fold(function(){ta(s,d)},function(p){s.dom.insertBefore(d.dom,p.dom)})}function as(s,d){ur(d,function(p){ta(s,p)})}function Ru(s){s.dom.textContent="",ur(jo(s),function(d){Cd(d)})}function Ku(s){var d,p=jo(s);0<p.length&&(d=s,ur(p,function(_){xd(d,_)})),Cd(s)}function Es(s){var d=void 0!==s?s.dom:document;return Mi(d.body.scrollLeft||d.documentElement.scrollLeft,d.body.scrollTop||d.documentElement.scrollTop)}function Lf(s,d,p){var _=(void 0!==p?p.dom:document).defaultView;_&&_.scrollTo(s,d)}function hc(s,d,p,_){return{x:s,y:d,width:p,height:_,right:s+p,bottom:d+_}}function Mm(s){var d=void 0===s?window:s,_=Es(ct.fromDom(d.document)),T=void 0===d?window:d;return(ml().browser.isFirefox()?X.none():X.from(T.visualViewport)).fold(function(){var I=d.document.documentElement;return hc(_.left,_.top,I.clientWidth,I.clientHeight)},function(I){return hc(Math.max(I.pageLeft,_.left),Math.max(I.pageTop,_.top),I.width,I.height)})}function c0(s){var d,p=Es(ct.fromDom(document)),_=(d=mr).owner(s),T=ii(d,_);return X.some(T).fold(Ee(df,s),function(I){var R=$c(s),H=Tn(I,function(W,ee){var ue=$c(ee);return{left:W.left+ue.left,top:W.top+ue.top}},{left:0,top:0});return Mi(H.left+R.left+p.left,H.top+R.top+p.top)})}function Kc(s){var d=c0(s),p=zt(s),_=zr(s);return Xs(d.left,d.top,p,_)}function _d(){return Ch(0,0)}function Hl(s){function d(T){return function(){return p===T}}var p=s.current;return{current:p,version:s.version,isEdge:d("Edge"),isChrome:d("Chrome"),isIE:d("IE"),isOpera:d("Opera"),isFirefox:d(Vp),isSafari:d("Safari")}}function vs(s){function d(T){return function(){return p===T}}var p=s.current;return{current:p,version:s.version,isWindows:d(ea),isiOS:d("iOS"),isAndroid:d(Am),isOSX:d("OSX"),isLinux:d("Linux"),isSolaris:d(mc),isFreeBSD:d(h0),isChromeOS:d(Rx)}}"undefined"!=typeof window||Function("return this;")();var Wl,Ps,Ja=qt(1),gc=qt(3),wd=qt(9),d0=qt(11),Ch=function(s,d){return{major:s,minor:d}},ff={nu:Ch,detect:function(s,d){var p,_,T=String(d).toLowerCase();return 0===s.length?_d():(_=function(R,H){for(var W=0;W<R.length;W++){var ee=R[W];if(ee.test(H))return ee}}(s,p=T))?Ch(I(1),I(2)):{major:0,minor:0};function I(R){return Number(p.replace(_,"$"+R))}},unknown:_d},Gl=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,f0={browsers:F([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(s){return vo(s,"edge/")&&vo(s,"chrome")&&vo(s,"safari")&&vo(s,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Gl],search:function(s){return vo(s,"chrome")&&!vo(s,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(s){return vo(s,"msie")||vo(s,"trident")}},{name:"Opera",versionRegexes:[Gl,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:qn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:qn("firefox")},{name:"Safari",versionRegexes:[Gl,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(s){return(vo(s,"safari")||vo(s,"mobile/"))&&vo(s,"applewebkit")}}]),oses:F([{name:"Windows",search:qn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(s){return vo(s,"iphone")||vo(s,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:qn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:qn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:qn("linux"),versionRegexes:[]},{name:"Solaris",search:qn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:qn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:qn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},Vp="Firefox",Dm=function(){return Hl({current:void 0,version:ff.unknown()})},Nx=Hl,ea=(F("Edge"),F("Chrome"),F("IE"),F("Opera"),F(Vp),F("Safari"),"Windows"),Am="Android",mc="Solaris",h0="FreeBSD",Rx="ChromeOS",kh=function(){return vs({current:void 0,version:ff.unknown()})},yg=vs,ml=(F(ea),F("iOS"),F(Am),F("Linux"),F("OSX"),F(mc),F(h0),F(Rx),un(function(){return s=navigator.userAgent,d=X.from(navigator.userAgentData),p=Yn,Re=f0.browsers(),Be=f0.oses(),{browser:He=d.bind(function(De){return Ue=Re,Gt(De.brands,function(at){var gt=at.brand.toLowerCase();return wo(Ue,function(Xt){var Lt;return gt===(null===(Lt=Xt.brand)||void 0===Lt?void 0:Lt.toLowerCase())}).map(function(Xt){return{current:Xt.name,version:ff.nu(parseInt(at.version,10),0)}})});var Ue}).orThunk(function(){return ar(Re,De=s).map(function(Ue){var at=ff.detect(Ue.versionRegexes,De);return{current:Ue.name,version:at}});var De}).fold(Dm,Nx),os:Xe=ar(Be,_=s).map(function(De){var Ue=ff.detect(De.versionRegexes,_);return{current:De.name,version:Ue}}).fold(kh,yg),deviceType:(I=He,R=s,H=p,W=(T=Xe).isiOS()&&!0===/ipad/i.test(R),ee=T.isiOS()&&!W,he=(ue=T.isiOS()||T.isAndroid())||H("(pointer:coarse)"),we=W||!ee&&ue&&H("(min-device-width:768px)"),Te=ee||ue&&!we,Le=I.isSafari()&&T.isiOS()&&!1===/safari/i.test(R),{isiPad:F(W),isiPhone:F(ee),isTablet:F(we),isPhone:F(Te),isTouch:F(he),isAndroid:T.isAndroid,isiOS:T.isiOS,isWebView:F(Le),isDesktop:F(!Te&&!we&&!Le)})};var s,d,p,_,T,I,R,H,W,ee,ue,he,we,Te,Le,Re,Be,He,Xe})),Ul=Er,wa=Ae(Element.prototype.attachShadow)&&Ae(Node.prototype.getRootNode),pl=F(wa),sa=wa?function(s){return ct.fromDom(s.dom.getRootNode())}:Hr,pc=function(s){var d=sa(s);return ao(d)?X.some(d):X.none()},Im=function(s){return xe(s.dom.shadowRoot)},ys=function(s){var d=gc(s)?s.dom.parentNode:s.dom;if(null==d||null===d.ownerDocument)return!1;var p,_,T=d.ownerDocument;return pc(ct.fromDom(d)).fold(function(){return T.body.contains(d)},(p=ys,_=js,function(I){return p(_(I))}))},$u=function(){return Th(ct.fromDom(document))},Th=function(s){var d=s.dom.body;if(null==d)throw new Error("Body is not available yet");return ct.fromDom(d)},P_=function(s,d){return qi(s)?s.style.getPropertyValue(d):""},bu=km("height",function(s){var d=s.dom;return ys(s)?d.getBoundingClientRect().height:d.offsetHeight}),Sd=function(s,d){return{left:s,top:d,translate:function(p,_){return Sd(s+p,d+_)}}},Mi=Sd,$c=function(s){var d,p=s.dom,_=p.ownerDocument.body;return _===p?Mi(_.offsetLeft,_.offsetTop):ys(s)?(d=p.getBoundingClientRect(),Mi(d.left,d.top)):Mi(0,0)},Ju=km("width",function(s){return s.dom.offsetWidth}),vl=function(s,d,p,_){s.dom.removeEventListener(d,p,_)},ta=function(s,d){s.dom.appendChild(d.dom)},Cd=function(s){var d=s.dom;null!==d.parentNode&&d.parentNode.removeChild(d)},ii=function(s,d){return s.view(d).fold(F([]),function(p){var _=s.owner(p),T=ii(s,_);return[p].concat(T)})},mr=Object.freeze({__proto__:null,view:function(s){var d;return(s.dom===document?X.none():X.from(null===(d=s.dom.defaultView)||void 0===d?void 0:d.frameElement)).map(ct.fromDom)},owner:Bt}),Xs=function(s,d,p,_){return{x:s,y:d,width:p,height:_,right:s+p,bottom:d+_}},Lu=function(s){var d=df(s),p=zt(s),_=zr(s);return Xs(d.left,d.top,p,_)},xu=function(){return Mm(window)},ss=function(s){return{isValue:$e,isError:qe,getOr:F(s),getOrThunk:F(s),getOrDie:F(s),or:function(d){return ss(s)},orThunk:function(d){return ss(s)},fold:function(d,p){return p(s)},map:function(d){return ss(d(s))},mapError:function(d){return ss(s)},each:function(d){d(s)},bind:function(d){return d(s)},exists:function(d){return d(s)},forall:function(d){return d(s)},toOptional:function(){return X.some(s)}}},us=function(s){return{isValue:qe,isError:$e,getOr:U,getOrThunk:function(d){return d()},getOrDie:function(){return Wt(String(s))()},or:U,orThunk:function(d){return d()},fold:function(d,p){return d(s)},map:function(d){return us(s)},mapError:function(d){return us(d(s))},each:j,bind:function(d){return us(s)},exists:qe,forall:$e,toOptional:X.none}},yo={value:ss,error:us,fromOption:function(s,d){return s.fold(function(){return us(d)},ss)}};function Hp(s,d,p){return s.stype===Wl.Error?d(s.serror):p(s.svalue)}function Bf(s){return{stype:Wl.Value,svalue:s}}function Va(s){return{stype:Wl.Error,serror:s}}function Kr(s,d,p,_){return{tag:"field",key:s,newKey:d,presence:p,prop:_}}function bg(s,d,p){switch(s.tag){case"field":return d(s.key,s.newKey,s.presence,s.prop);case"custom":return p(s.newKey,s.instantiator)}}function br(s){return function(){for(var d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];if(0===d.length)throw new Error("Can't merge zero objects");for(var _={},T=0;T<d.length;T++){var I,R=d[T];for(I in R)ir(R,I)&&(_[I]=s(_[I],R[I]))}return _}}function zf(s){return{tag:"defaultedThunk",process:s}}function Mh(s){return zf(F(s))}function bo(s){return{tag:"mergeWithThunk",process:s}}function vc(s){return Z(s)&&100<pi(s).length?" removed due to size":JSON.stringify(s,null,2)}function uo(s,d){return mf([{path:s,getErrorInfo:d}])}function ls(s){return{extract:function(d,p){return Ih(s(p),function(_){return uo(d,F(_))})},toString:F("val")}}function yl(s,d,p,_){return _(sn(s,d).getOrThunk(function(){return p(s)}))}function Lx(s,d,p,_,T){function I(Te){return T.extract(d.concat([_]),Te)}function R(Te){return Te.fold(function(){return Td(X.none())},function(Le){var Re=T.extract(d.concat([_]),Le);return m0(Re,X.some)})}var H,W,ee,ue,he,we;switch(s.tag){case"required":return ee=d,we=I,sn(ue=p,he=_).fold(function(){return Te=he,Le=ue,uo(ee,function(){return'Could not find valid *required* value for "'+Te+'" in '+vc(Le)});var Te,Le},we);case"defaultedThunk":return yl(p,_,s.process,I);case"option":return R(sn(p,_));case"defaultedOptionThunk":return W=s.process,R(sn(H=p,_).map(function(Te){return!0===Te?W(H):Te}));case"mergeWithThunk":return yl(p,_,F({}),function(Te){return I(xo(s.process(p),Te))})}}function Ky(s){return{extract:function(d,p){return s().extract(d,p)},toString:function(){return s().toString()}}}function Qu(s){var d=Pr(s),p=Tn(s,function(_,T){return bg(T,function(I){var R;return xo(_,((R={})[I]=!0,R))},F(_))},{});return{extract:function(_,T){var I,R,H,W,ee,ue,he=ln(Q(T)?[]:pi((H=xe,W=R={},ee=function(we,Te){W[Te]=we},ue=j,jt(T,function(we,Te){(H(we,Te)?ee:ue)(we,Te)}),R)),function(we){return!qr(p,we)});return 0===he.length?d.extract(_,T):(I=he,uo(_,function(){return"There are unsupported fields: ["+I.join(", ")+"] specified"}))},toString:d.toString}}function jl(s){return{extract:function(d,p){var _=Ot(p,function(T,I){return s.extract(d.concat(["["+I+"]"]),T)});return Hx(_)},toString:function(){return"array("+s.toString()+")"}}}function Wp(s){return{extract:function(d,p){for(var _=[],T=0,I=s;T<I.length;T++){var R=I[T].extract(d,p);if(R.stype===Wl.Value)return R;_.push(R)}return Hx(_)},toString:function(){return"oneOf("+Ot(s,function(d){return d.toString()}).join(", ")+")"}}}function xg(s,d){return ls(function(p){var _=typeof p;return s(p)?Td(p):mf("Expected type: "+d+" but got: "+_)})}function hf(s,d){return{extract:function(p,_){return sn(_,s).fold(function(){return T=s,uo(p,function(){return'Choice schema did not contain choice key: "'+T+'"'});var T},function(T){return I=p,R=_,sn(H=d,W=T).fold(function(){return ee=H,ue=W,uo(I,function(){return'The chosen schema: "'+ue+'" did not exist in branches: '+vc(ee)});var ee,ue},function(ee){return ee.extract(I.concat(["branch: "+W]),R)});var I,R,H,W})},toString:function(){return"chooseOn("+s+"). Possible values: "+pi(d)}}}function Gp(s){return ls(function(d){return s(d).fold(mf,Td)})}function Bx(s,d){return p=function(T){return s(T).fold(Va,Bf)},_=d,{extract:function(T,I){var R=pi(I),H=jl(ls(p)).extract(T,R);return Fx(H,function(W){var ee=Ot(W,function(ue){return Kr(ue,ue,{tag:"required",process:{}},_)});return Pr(ee).extract(T,I)})},toString:function(){return"setOf("+_.toString()+")"}};var p,_}function Zi(s,d,p){return jp((T=d.extract([s],_=p),_s(T,function(I){return{input:_,errors:I}})));var _,T}function el(s){return s.fold(function(d){throw new Error(wu(d))},U)}function bs(s,d,p){return el(Zi(s,d,p))}function Ys(s,d){return hf(s,yn(d,Pr))}function g0(s){return Gp(function(d){return ki(s,d)?yo.value(d):yo.error('Unsupported value: "'+d+'", choose one of "'+s.join(", ")+'".')})}function bn(s){return ds(s,s,{tag:"required",process:{}},Oa())}function Bu(s,d){return ds(s,s,{tag:"required",process:{}},d)}function Cr(s){return Bu(s,ua)}function bl(s,d){return ds(s,s,{tag:"required",process:{}},g0(d))}function xs(s){return Bu(s,Em)}function xl(s,d){return ds(s,s,{tag:"required",process:{}},Pr(d))}function Jc(s,d){return ds(s,s,{tag:"required",process:{}},Xp(d))}function zu(s,d){return ds(s,s,{tag:"required",process:{}},jl(d))}function Xo(s){return ds(s,s,{tag:"option",process:{}},Oa())}function Ff(s,d){return ds(s,s,{tag:"option",process:{}},d)}function zx(s){return Ff(s,xi)}function bi(s){return Ff(s,ua)}function Dh(s){return Ff(s,Em)}function Up(s,d){return Ff(s,jl(d))}function Ri(s,d){return Ff(s,Pr(d))}function It(s,d){return ds(s,s,Mh(d),Oa())}function yc(s,d,p){return ds(s,s,Mh(d),p)}function cs(s,d){return yc(s,d,xi)}function kd(s,d){return yc(s,d,ua)}function ql(s,d,p){return yc(s,d,g0(p))}function Ha(s,d){return yc(s,d,Om)}function Di(s,d){return yc(s,d,Em)}function Ah(s,d,p){return yc(s,d,jl(p))}function gf(s,d,p){return yc(s,d,Pr(p))}function wr(s){var d=s;return{get:function(){return d},set:function(p){d=p}}}function Ns(s){if(!oe(s))throw new Error("cases must be an array");if(0===s.length)throw new Error("there must be at least one case");var d=[],p={};return ur(s,function(_,T){var I=pi(_);if(1!==I.length)throw new Error("one and only one name per case");var R=I[0],H=_[R];if(void 0!==p[R])throw new Error("duplicate key detected:"+R);if("cata"===R)throw new Error("cannot have a case named cata (sorry)");if(!oe(H))throw new Error("case arguments must be an array");d.push(R),p[R]=function(){for(var W=[],ee=0;ee<arguments.length;ee++)W[ee]=arguments[ee];var ue=W.length;if(ue!==H.length)throw new Error("Wrong number of arguments to case "+R+". Expected "+H.length+" ("+H+"), got "+ue);return{fold:function(){for(var he=[],we=0;we<arguments.length;we++)he[we]=arguments[we];if(he.length!==s.length)throw new Error("Wrong number of arguments to fold. Expected "+s.length+", got "+he.length);return he[T].apply(null,W)},match:function(he){var we=pi(he);if(d.length!==we.length)throw new Error("Wrong number of arguments to match. Expected: "+d.join(",")+"\nActual: "+we.join(","));if(!xt(d,function(Te){return ki(we,Te)}))throw new Error("Not all branches were specified when using match. Specified: "+we.join(", ")+"\nRequired: "+d.join(", "));return he[R].apply(null,W)},log:function(he){console.log(he,{constructors:d,constructor:R,params:W})}}}}),p}(Ps=Wl={})[Ps.Error=0]="Error",Ps[Ps.Value=1]="Value";var jp=function(s){return Hp(s,yo.error,yo.value)},Td=Bf,mf=Va,Fx=function(s,d){return s.stype===Wl.Value?d(s.svalue):s},Ih=function(s,d){return s.stype===Wl.Error?d(s.serror):s},m0=function(s,d){return s.stype===Wl.Value?{stype:Wl.Value,svalue:d(s.svalue)}:s},_s=function(s,d){return s.stype===Wl.Error?{stype:Wl.Error,serror:d(s.serror)}:s},qp=Hp,xo=br(function(s,d){return Z(s)&&Z(d)?xo(s,d):d}),Vx=br(function(s,d){return d}),Hx=function(s){var d,p,_=(d=[],p=[],ur(s,function(T){Hp(T,function(I){return p.push(I)},function(I){return d.push(I)})}),{values:d,errors:p});return 0<_.errors.length?ye(mf,Gr)(_.errors):Td(_.values)},$y=ls(Td),Pr=function(s){return{extract:function(d,p){for(var _={},T=[],I=0,R=s;I<R.length;I++)bg(R[I],function(H,W,ee,ue){var he=Lx(ee,d,p,H,ue);qp(he,function(we){T.push.apply(T,we)},function(we){_[W]=we})},function(H,W){_[H]=W(p)});return 0<T.length?mf(T):Td(_)},toString:function(){return"obj{\n"+Ot(s,function(d){return bg(d,function(p,_,T,I){return p+" -> "+I.toString()},function(p,_){return"state("+p+")"})}).join("\n")+"}"}}},Xp=ye(jl,Pr),Oa=F($y),xi=xg(Ne,"number"),ua=xg($,"string"),Om=xg(Q,"boolean"),Em=xg(Ae,"function"),Vf=function(s){if(Object(s)!==s)return!0;switch({}.toString.call(s).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(s).every(function(d){return Vf(s[d])});default:return!1}},Jy=ls(function(s){return Vf(s)?Td(s):mf("Expected value to be acceptable for sending via postMessage")}),wu=function(s){return"Errors: \n"+Ot(10<(d=s.errors).length?d.slice(0,10).concat([{path:[],getErrorInfo:F("... (only showing first ten failures)")}]):d,function(p){return"Failed path: ("+p.path.join(" > ")+")\n"+p.getErrorInfo()}).join("\n")+"\n\nInput object: "+vc(s.input);var d},ds=Kr,Su=function(s,d){return{tag:"custom",newKey:s,instantiator:d}};function bc(s,d){return(p={})[s]=d,p;var p}function Qc(s){return d={},ur(s,function(p){d[p.key]=p.value}),d;var d}function Pm(s){return Ae(s)?s:qe}function N_(s,d,p){for(var _=s.dom,T=Pm(p);_.parentNode;){var I=ct.fromDom(_=_.parentNode),R=d(I);if(R.isSome())return R;if(T(I))break}return X.none()}function _l(s,d,p){var _=d(s),T=Pm(p);return _.orThunk(function(){return T(s)?X.none():N_(s,d,T)})}function p0(s,d){return Sn(s.element,d.event.target)}function Oh(s){if(!qr(s,"can")&&!qr(s,"abort")&&!qr(s,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(s,null,2)+" does not have can, abort, or run!");return de(de({},DS),s)}function la(s){return F("alloy."+s)}function Lo(s,d){zd(s,s.element,d,{})}function kr(s,d,p){zd(s,s.element,d,p)}function Md(s){Lo(s,Ca())}function Eh(s,d,p){zd(s,d,p,{})}function xc(s,d,p,_){s.getSystem().triggerEvent(p,d,_.event)}function Rs(s,d){return{key:s,value:Oh({abort:d})}}function Nm(s){return{key:s,value:Oh({run:function(d,p){p.event.prevent()}})}}function mn(s,d){return{key:s,value:Oh({run:d})}}function Qy(s,d,p){return{key:s,value:Oh({run:function(_,T){d.apply(void 0,[_,T].concat(p))}})}}function Hf(s){return function(d){return{key:s,value:Oh({run:function(p,_){p0(p,_)&&d(p,_)}})}}}function Ph(s,d,p){var _,T=d.partUids[p];return mn(_=s,function(I,R){I.getSystem().getByUid(T).each(function(H){xc(H,H.element,_,R)})})}function Rm(s,d){return mn(s,function(p,_){var T=_.event,I=p.getSystem().getByDom(T.target).getOrThunk(function(){return _l(T.target,function(R){return p.getSystem().getByDom(R).toOptional()},qe).getOr(p)});d(p,I,_)})}function Dd(s){return mn(s,function(d,p){p.cut()})}function Ad(s,d){return Hf(s)(d)}function Yp(s){return s.dom.innerHTML}function Lm(s,d){var p,_,T=Bt(s).dom,I=ct.fromDom(T.createDocumentFragment());as(I,(p=d,(_=(T||document).createElement("div")).innerHTML=p,jo(ct.fromDom(_)))),Ru(s),ta(s,I)}function Id(s){if(ao(s))return"#shadow-root";var d=ct.fromDom(s.dom.cloneNode(!1)),p=ct.fromTag("div"),_=ct.fromDom(d.dom.cloneNode(!0));return ta(p,_),Yp(p)}function Sr(s){var d=(new Date).getTime();return s+"_"+Math.floor(1e9*Math.random())+ ++tb+String(d)}function Wf(s){var d=Ja(s)?s.dom[nb]:null;return X.from(d)}function _g(s){function d(T){return"The component must be in a context to execute: "+T+(s?"\n"+Id(s().element)+" is not in context.":"")}function p(T){return function(){throw new Error(d(T))}}function _(T){return function(){console.warn(d(T))}}return{debugInfo:F("fake"),triggerEvent:_("triggerEvent"),triggerFocus:_("triggerFocus"),triggerEscape:_("triggerEscape"),broadcast:_("broadcast"),broadcastOn:_("broadcastOn"),broadcastEvent:_("broadcastEvent"),build:p("build"),addToWorld:p("addToWorld"),removeFromWorld:p("removeFromWorld"),addToGui:p("addToGui"),removeFromGui:p("removeFromGui"),getByUid:p("getByUid"),getByDom:p("getByDom"),isConnected:qe}}function pf(s,d){var p=s.toString(),_=p.indexOf(")")+1,T=p.indexOf("("),I=p.substring(T+1,_-1).split(/,\s*/);return s.toFunctionAnnotation=function(){return{name:d,parameters:au(I)}},s}function Wx(s){return bc(Ml,s)}function Ls(s){return d=function(R){for(var H=[],W=1;W<arguments.length;W++)H[W-1]=arguments[W];return s.apply(void 0,le([R.getApis(),R],H,!1))},_=(p=s.toString()).indexOf(")")+1,T=p.indexOf("("),I=p.substring(T+1,_-1).split(/,\s*/),d.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:au(I.slice(1))}},d;var d,p,_,T,I}function Nh(s,d){var p={};return jt(s,function(_,T){jt(_,function(I,R){var H=sn(p,R).getOr([]);p[R]=H.concat([d(T,I)])})}),p}function ed(s){return{classes:ie(s.classes)?[]:s.classes,attributes:ie(s.attributes)?{}:s.attributes,styles:ie(s.styles)?{}:s.styles}}function Gf(s){return s.cHandler}function Gx(s,d){return{name:s,handler:d}}function Bm(s,d){var p=vi(s,d);return void 0===p||""===p?[]:p.split(" ")}function Zp(s){return void 0!==s.dom.classList}function Qa(s,d){var p,_,T;Zp(s)?s.dom.classList.add(d):(_=d,T=Bm(p=s,"class").concat([_]),Ir(p,"class",T.join(" ")))}function _i(s,d){var p,_,T,I;Zp(s)?s.dom.classList.remove(d):(T=d,0<(I=ln(Bm(_=s,"class"),function(R){return R!==T})).length?Ir(_,"class",I.join(" ")):pa(_,"class")),0===(Zp(p=s)?p.dom.classList:Bm(p,"class")).length&&pa(p,"class")}function ou(s,d){return Zp(s)&&s.dom.classList.contains(d)}function Xl(s,d){ur(d,function(p){Qa(s,p)})}function _c(s,d){ur(d,function(p){_i(s,p)})}function Yl(s){return s.dom.value}function Fu(s,d){if(void 0===d)throw new Error("Value.set was undefined");s.dom.value=d}function Zl(s){var d=ct.fromText(s);return ev({element:d})}Ns([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var R_,Ed,DS={can:$e,abort:qe,run:j},Wa=F,Zs=Wa("touchstart"),Cu=Wa("touchmove"),fs=Wa("touchend"),Ki=Wa("touchcancel"),Kl=Wa("mousedown"),Kp=Wa("mousemove"),Uf=Wa("mouseout"),Pd=Wa("mouseup"),td=Wa("mouseover"),Nd=Wa("focusin"),Rh=Wa("focusout"),nd=Wa("keydown"),Ea=Wa("keyup"),Wi=Wa("input"),wl=Wa("change"),iu=Wa("click"),jf=Wa("transitioncancel"),ws=Wa("transitionend"),$p=Wa("transitionstart"),Ss=Wa("selectstart"),Rd={tap:la("tap")},na=la("focus"),Lh=la("blur.post"),Jp=la("paste.post"),qf=la("receive"),Ca=la("execute"),Bs=la("focus.item"),bf=Rd.tap,Ux=la("longpress"),Sl=la("sandbox.close"),wg=la("typeahead.cancel"),zm=la("system.init"),Xf=la("system.touchmove"),y0=la("system.touchend"),Bh=la("system.scroll"),ka=la("system.resize"),wc=la("system.attached"),Sc=la("system.detached"),Sg=la("system.dismissRequested"),Ga=la("system.repositionRequested"),xf=la("focusmanager.shifted"),_f=la("slotcontainer.visibility"),Ld=la("change.tab"),Bd=la("dismiss.tab"),eb=la("highlight"),Cg=la("dehighlight"),zd=function(s,d,p,_){var T=de({target:d},_);s.getSystem().triggerEvent(p,d,T)},Qo=Qc,Xi=Hf(wc()),Cl=Hf(Sc()),Fm=Hf(zm()),zs=(R_=Ca(),function(s){return mn(R_,s)}),kl=Qo([{key:na(),value:Oh({can:function(s,d){var p,_=d.event,T=_.originator,I=_.target;return!(Sn(p=T,s.element)&&!Sn(p,I)&&(console.warn(na()+" did not get interpreted by the desired target. \nOriginator: "+Id(T)+"\nTarget: "+Id(I)+"\nCheck the "+na()+" event handlers"),1))}})}]),Li=Object.freeze({__proto__:null,events:kl}),tb=0,Fd=F("alloy-id-"),zh=F("data-alloy-id"),wf=Fd(),nb=zh(),Cc=function(s,d){Object.defineProperty(s.dom,nb,{value:d,writable:!0})},Tl=Sr,Vm=U,Qp=_g(),au=function(s){return Ot(s,function(d){return rt(d,"/*")?d.substring(0,d.length-2):d})},Ml=Sr("alloy-premade"),$l={init:function(){return Jl({readState:F("No State required")})}},Jl=function(s){return s},jx=function(s,d){var p,_,T,I,R,H,W=On(s,function(ee,ue){return(1===ee.length?yo.value(ee[0].handler):function v0(s,d,p){var _=d[p];return _?function(T,I,R){try{var H=Wo(I,function(W,ee){var ue=W.name,he=ee.name,we=R.indexOf(ue),Te=R.indexOf(he);if(-1===we)throw new Error("The ordering for "+T+" does not have an entry for "+ue+".\nOrder specified: "+JSON.stringify(R,null,2));if(-1===Te)throw new Error("The ordering for "+T+" does not have an entry for "+he+".\nOrder specified: "+JSON.stringify(R,null,2));return we<Te?-1:Te<we?1:0});return yo.value(H)}catch(W){return yo.error([W])}}("Event: "+p,s,_).map(function(T){var I,R,H,W,ee=Ot(T,function(ue){return ue.handler});return{can:function(){for(var ue=[],he=0;he<arguments.length;he++)ue[he]=arguments[he];return to(R,function(we,Te){return we&&Te.can.apply(void 0,ue)},!0)},abort:(H=R=I=ee,W=function(ue){return ue.abort},function(){for(var ue=[],he=0;he<arguments.length;he++)ue[he]=arguments[he];return to(H,function(we,Te){return we||W(Te).apply(void 0,ue)},!1)}),run:function(){for(var ue=[],he=0;he<arguments.length;he++)ue[he]=arguments[he];ur(I,function(we){we.run.apply(void 0,ue)})}}}):yo.error(["The event ("+p+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(Ot(s,function(T){return T.name}),null,2)])}(ee,d,ue)).map(function(he){var we,Te,Le=(Te=Ae(we=he)?{can:$e,abort:qe,run:we}:we,function(Be,He){for(var Xe=[],De=2;De<arguments.length;De++)Xe[De-2]=arguments[De];var Ue=[Be,He].concat(Xe);Te.abort.apply(void 0,Ue)?He.stop():Te.can.apply(void 0,Ue)&&Te.run.apply(void 0,Ue)}),Re=1<ee.length?ln(d[ue],function(Be){return Rt(ee,function(He){return He.name===Be})}).join(" > "):ee[0].name;return bc(ue,{handler:Le,purpose:Re})})});return p={},_=[],T=[],ur(W,function(ee){ee.fold(function(ue){_.push(ue)},function(ue){T.push(ue)})}),0<(H={errors:_,values:T}).errors.length?yo.error(Gr(H.errors)):(R=p,0===(I=H.values).length?yo.value(R):yo.value(xo(R,Vx.apply(void 0,I))))},Yf="alloy.base.behaviour",kc=Pr([ds("dom","dom",{tag:"required",process:{}},Pr([bn("tag"),It("styles",{}),It("classes",[]),It("attributes",{}),Xo("value"),Xo("innerHtml")])),bn("components"),bn("uid"),It("events",{}),It("apis",{}),ds("eventOrder","eventOrder",((Ed={})[Ca()]=["disabling",Yf,"toggling","typeaheadevents"],Ed[na()]=[Yf,"focusing","keying"],Ed[zm()]=[Yf,"disabling","toggling","representing"],Ed[Wi()]=[Yf,"representing","streaming","invalidating"],Ed[Sc()]=[Yf,"representing","item-events","tooltipping"],Ed[Kl()]=["focusing",Yf,"item-type-events"],Ed[Zs()]=["focusing",Yf,"item-type-events"],Ed[td()]=["item-type-events","tooltipping"],Ed[qf()]=["receiving","reflecting","tooltipping"],bo(F(Ed))),Oa()),Xo("domModification")]),ev=function(s){var d=bs("external.component",Qu([bn("element"),Xo("uid")]),s),p=wr(_g()),_=d.uid.getOrThunk(function(){return Tl("external")});Cc(d.element,_);var T={uid:_,getSystem:p.get,config:X.none,hasConfigured:qe,connect:function(I){p.set(I)},disconnect:function(){p.set(_g(function(){return T}))},getApis:function(){return{}},element:d.element,spec:s,readState:F("No state"),syncComponents:j,components:F([]),events:{}};return Wx(T)},Fh=Tl,so=function(s){return sn(s,Ml).getOrThunk(function(){return function Od(s){var d,p,_,T,I,R,H,W,ee,ue,He,Xe,he=Vm(s),we=he.events,Te=Fe(he,["events"]),Le=Ot(sn(Te,"components").getOr([]),so),Re=de(de({},Te),{events:de(de({},Li),we),components:Le});return yo.value((p=wr(Qp),_=el(Zi("custom.definition",kc,d=Re)),T=function vf(s){var d,p,_,T,I=(d=sn(s,"behaviours").getOr({}),Or(pi(d),function(R){var H=d[R];return xe(H)?[H.me]:[]}));return p=s,T=Ot(_=I,function(R){return Ri(R.name(),[bn("config"),It("state",$l)])}),{list:_,data:yn(Zi("component.behaviours",Pr(T),p.behaviours).fold(function(R){throw new Error(wu(R)+"\nComplete spec:\n"+JSON.stringify(p,null,2))},U),function(R){return F(R.map(function(H){return{config:H.config,state:H.state.init(H.config)}}))})}}(d),He=function yf(s,d,p){var _,T,I=de(de({},(_=s).dom),{uid:_.uid,domChildren:Ot(_.components,function(W){return W.element})}),R=s.domModification.fold(function(){return ed({})},ed),H=0<d.length?function(W,ee,ue,he){var we=de({},ee);function Te(Re){return Tn(Re,function(Be,He){return de(de({},He.modification),Be)},{})}ur(ue,function(Re){we[Re.name()]=Re.exhibit(W,he)});var Le=Nh(we,function(Re,Be){return{name:Re,modification:Be}});return ed({classes:Tn(Le.classes,function(Re,Be){return Be.modification.concat(Re)},[]),attributes:Te(Le.attributes),styles:Te(Le.styles)})}(p,{"alloy.base.modification":R},d,I):R;return de(de({},T=I),{attributes:de(de({},T.attributes),H.attributes),styles:de(de({},T.styles),H.styles),classes:T.classes.concat(H.classes)})}(_,I=T.list,R=T.data),fc(Xe=ct.fromTag(He.tag),He.attributes),Xl(Xe,He.classes),aa(Xe,He.styles),He.innerHtml.each(function(Ue){return Lm(Xe,Ue)}),as(Xe,He.domChildren),He.value.each(function(Ue){Fu(Xe,Ue)}),Cc(Xe,He.uid),H=Xe,W=function Sa(s,d,p){var _,T,I,R,H,ee=s.eventOrder;return T=p,I=d,_=Nh(de(de({},{"alloy.base.behaviour":s.events}),(R=T,H={},ur(I,function(ue){H[ue.name()]=ue.handlers(R)}),H)),Gx),jx(_,ee).getOrDie()}(_,I,R),ee=wr(_.components),ue={uid:d.uid,getSystem:p.get,config:function(He){var Xe=R;return(Ae(Xe[He.name()])?Xe[He.name()]:function(){throw new Error("Could not find "+He.name()+" in "+JSON.stringify(d,null,2))})()},hasConfigured:function(He){return Ae(R[He.name()])},spec:d,readState:function(He){return R[He]().map(function(Xe){return Xe.state.readState()}).getOr("not enabled")},getApis:function(){return _.apis},connect:function(He){p.set(He)},disconnect:function(){p.set(_g(Be))},element:H,syncComponents:function(){var He=Or(jo(H),function(Xe){return p.get().getByDom(Xe).fold(function(){return[]},Mr)});ee.set(He)},components:ee.get,events:W}));function Be(){return ue}}(ir(s,"uid")?s:de({uid:Fh("")},s)).getOrDie()})},Ql=Wx;function kg(s,d,p,_,T){return s(p,_)?X.some(p):Ae(T)&&T(p)?X.none():d(p,_,T)}function L_(s,d,p){for(var _=s.dom,T=Ae(p)?p:qe;_.parentNode;){var I=ct.fromDom(_=_.parentNode);if(d(I))return X.some(I);if(T(I))break}return X.none()}function B_(s,d,p){return kg(function(_,T){return T(_)},L_,s,d,p)}function Vh(s,d,p){return B_(s,d,p).isSome()}function tv(s,d,p){return L_(s,function(_){return or(_,d)},p)}function ra(s,d){return p=d,$n(_=void 0===s?document:s.dom)?X.none():X.from(_.querySelector(p)).map(ct.fromDom);var p,_}function ec(s,d,p){return kg(or,tv,s,d,p)}function Cs(){var s=Sr("aria-owns");return{id:s,link:function(d){Ir(d,"aria-owns",s)},unlink:function(d){pa(d,"aria-owns")}}}var Zf,Dl,tl=function(s,d){return Vh(d,function(_){return Sn(_,s.element)},qe)||(p=s,B_(d,function(_){if(!Ja(_))return!1;var T=vi(_,"id");return void 0!==T&&-1<T.indexOf("aria-owns")}).bind(function(_){var T=vi(_,"id");return ra(sa(_),'[aria-owns="'+T+'"]')}).exists(function(_){return tl(p,_)}));var p};function qx(s,d,p){var _,T,I,R;switch(sn(b0.get(),s).orThunk(function(){return Gt(pi(b0.get()),function(ee){return-1<s.indexOf(ee)?X.some(b0.get()[ee]):X.none()})}).getOr(Zf.NORMAL)){case Zf.NORMAL:return p(Yx());case Zf.LOGGING:var H=(_=s,T=d,I=[],R=(new Date).getTime(),{logEventCut:function(ee,ue,he){I.push({outcome:"cut",target:ue,purpose:he})},logEventStopped:function(ee,ue,he){I.push({outcome:"stopped",target:ue,purpose:he})},logNoParent:function(ee,ue,he){I.push({outcome:"no-parent",target:ue,purpose:he})},logEventNoHandlers:function(ee,ue){I.push({outcome:"no-handlers-left",target:ue})},logEventResponse:function(ee,ue,he){I.push({outcome:"response",purpose:he,target:ue})},write:function(){var ee=(new Date).getTime();ki(["mousemove","mouseover","mouseout",zm()],_)||console.log(_,{event:_,time:ee-R,target:T.dom,sequence:Ot(I,function(ue){return ki(["cut","stopped","response"],ue.outcome)?"{"+ue.purpose+"} "+ue.outcome+" at ("+Id(ue.target)+")":ue.outcome})})}}),W=p(H);return H.write(),W;case Zf.STOP:return!0}}(Dl=Zf=Zf||{})[Dl.STOP=0]="STOP",Dl[Dl.NORMAL=1]="NORMAL",Dl[Dl.LOGGING=2]="LOGGING";var b0=wr({}),Xx=["alloy/data/Fields","alloy/debugging/Debugging"],Yx=F({logEventCut:j,logEventStopped:j,logNoParent:j,logEventNoHandlers:j,logEventResponse:j,write:j}),Yo=F([bn("menu"),bn("selectedMenu")]),nv=F([bn("item"),bn("selectedItem")]);function ku(){return xl("markers",[bn("backgroundMenu")].concat(Yo()).concat(nv()))}function jr(s){return xl("markers",Ot(s,bn))}function nl(s,d,p){return void 0!==(_=new Error).stack&&wo(_.stack.split("\n"),function(T){return 0<T.indexOf("alloy")&&!Rt(Xx,function(I){return-1<T.indexOf(I)})}).getOr("unknown"),ds(d,d,p,Gp(function(T){return yo.value(function(){for(var I=[],R=0;R<arguments.length;R++)I[R]=arguments[R];return T.apply(void 0,I)})}));var _}function No(s){return nl(0,s,Mh(j))}function Vu(s){return nl(0,s,Mh(X.none))}function Hm(s){return nl(0,s,{tag:"required",process:{}})}function Vo(s){return nl(0,s,{tag:"required",process:{}})}function Zo(s,d){return Su(s,F(d))}function Hh(s){return Su(s,U)}function Ks(s,d,p,_,T,I,R,H){return{x:s,y:d,bubble:p,direction:_,placement:T,restriction:I,label:R+"-"+T,alwaysFit:H=void 0!==H&&H}}function tc(s,d,p,_){var T=s+d;return _<T?p:T<p?_:T}function wi(s,d){return Qi(["left","right","top","bottom"],function(p){return sn(d,p).map(function(_){return function(T){switch(_){case 1:return T.x;case 0:return T.x+T.width;case 2:return T.y;case 3:return T.y+T.height}}(s)})})}function hs(s,d){return s.x+s.width/2-d.width/2}function fi(s,d){return s.x+s.width-d.width}function Sf(s,d){return s.y-d.height}function $s(s){return s.y+s.height}function es(s,d){return s.y+s.height/2-d.height/2}function Js(s,d,p){return Ks(s.x+s.width,es(s,d),p.east(),Jf(),"east",wi(s,{left:0}),il)}function rl(s,d,p){return Ks(s.x-d.width,es(s,d),p.west(),uv(),"west",wi(s,{right:1}),il)}function rv(){return[Fs,su,Il,gs,Go,Ol,Js,rl]}function x0(){return[su,Fs,gs,Il,Go,Ol,Js,rl]}function ov(){return[Il,gs,Fs,su,Ol,Go]}function Kf(){return[gs,Il,su,Fs,Ol,Go]}function Tg(){return[Fs,su,Il,gs,Go,Ol]}function Al(){return[su,Fs,gs,Il,Go,Ol]}function ol(s,d,p){return Fm(function(_,T){p(_,s,d)})}function Wm(s){return{key:s,value:void 0}}function yi(s){var d,p,_,T,I,R,H,W,ee=bs("Creating behaviour: "+s.name,Zx,s);return p=ee.name,_=ee.active,T=ee.apis,I=ee.extra,R=ee.state,H=Qu(d=ee.fields),W=Ri(p,[Ff("config",Qu(d))]),lv(H,W,p,_,T,I,R)}function Mg(s){var d,p=bs("Creating behaviour: "+s.name,Ta,s),_=Ys(p.branchKey,p.branches),T=p.name,I=p.active,R=p.apis,H=p.extra,W=p.state,ee=Ri(T,[Ff("config",d=_)]);return lv(d,ee,T,I,R,H,W)}function Dg(){return ct.fromDom(document)}function rd(s){return s.dom.focus()}function Wh(s){var d=sa(s).dom;return s.dom===d.activeElement}function Vd(s){return void 0===s&&(s=Dg()),X.from(s.dom.activeElement).map(ct.fromDom)}function od(s){return Vd(sa(s)).filter(function(d){return s.dom.contains(d.dom)})}function ob(s,d){var p=sa(d),_=Vd(p).bind(function(I){function R(ee){return Sn(I,ee)}var H,W;return R(d)?X.some(d):(H=R,(W=function(ee){for(var ue=0;ue<ee.childNodes.length;ue++){var he=ct.fromDom(ee.childNodes[ue]);if(H(he))return X.some(he);var we=W(ee.childNodes[ue]);if(we.isSome())return we}return X.none()})(d.dom))}),T=s(d);return _.each(function(I){Vd(p).filter(function(R){return Sn(R,I)}).fold(function(){rd(I)},j)}),T}function Tu(s,d,p,_,T){function I(R){return R+"px"}return{position:s,left:d.map(I),top:p.map(I),right:_.map(I),bottom:T.map(I)}}function Tc(s,d){var p;Zc(s,de(de({},p=d),{position:X.some(p.position)}))}function Hd(s,d,p,_,T,I){var R=d.rect,H=R.x-p,W=R.y-_,ee=T-(H+R.width),ue=I-(W+R.height),he=X.some(H),we=X.some(W),Te=X.some(ee),Le=X.some(ue),Re=X.none();return d.direction.fold(function(){return Tu(s,he,we,Re,Re)},function(){return Tu(s,Re,we,Te,Re)},function(){return Tu(s,he,Re,Re,Le)},function(){return Tu(s,Re,Re,Te,Le)},function(){return Tu(s,he,we,Re,Re)},function(){return Tu(s,he,Re,Re,Le)},function(){return Tu(s,he,we,Re,Re)},function(){return Tu(s,Re,we,Te,Re)})}function Ag(s,d){return s.fold(function(){var p=d.rect;return Tu("absolute",X.some(p.x),X.some(p.y),X.none(),X.none())},function(p,_,T,I){return Hd("absolute",d,p,_,T,I)},function(p,_,T,I){return Hd("fixed",d,p,_,T,I)})}function $f(s,d){var p=Ee(c0,d),_=s.fold(p,p,function(){var R=Es();return c0(d).translate(-R.left,-R.top)}),T=zt(d),I=zr(d);return Xs(_.left,_.top,T,I)}F(Pr(nv().concat(Yo())));var z_=F(Pr(nv())),iv=F(xl("initSize",[bn("numColumns"),bn("numRows")])),ts=Ns([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),av=ts.southeast,Ig=ts.southwest,sv=ts.northeast,_0=ts.northwest,w0=ts.south,Gm=ts.north,Jf=ts.east,uv=ts.west,Hu=function(s,d,p){return Math.min(Math.max(s,d),p)},il="layout",Fs=function(s,d,p){return Ks(s.x,$s(s),p.southeast(),av(),"southeast",wi(s,{left:1,top:3}),il)},su=function(s,d,p){return Ks(fi(s,d),$s(s),p.southwest(),Ig(),"southwest",wi(s,{right:0,top:3}),il)},Il=function(s,d,p){return Ks(s.x,Sf(s,d),p.northeast(),sv(),"northeast",wi(s,{left:1,bottom:2}),il)},gs=function(s,d,p){return Ks(fi(s,d),Sf(s,d),p.northwest(),_0(),"northwest",wi(s,{right:0,bottom:2}),il)},Ol=function(s,d,p){return Ks(hs(s,d),Sf(s,d),p.north(),Gm(),"north",wi(s,{bottom:2}),il)},Go=function(s,d,p){return Ks(hs(s,d),$s(s),p.south(),w0(),"south",wi(s,{top:3}),il)},Og=Object.freeze({__proto__:null,events:function(s){return Qo([mn(qf(),function(d,p){var _,T=s.channels,I=pi(T),R=p,H=(_=R).universal?I:ln(I,function(W){return ki(_.channels,W)});ur(H,function(W){var ee=T[W],ue=ee.schema,he=bs("channel["+W+"] data\nReceiver: "+Id(d.element),ue,R.data);ee.onReceive(d,he)})})])}}),Gh=[Bu("channels",Bx(yo.value,Qu([Hm("onReceive"),It("schema",Oa())])))],lv=function(s,d,p,_,T,I,R){function H(he){return qr(he,p)?he[p]():X.none()}var W=yn(T,function(he,we){return Te=p,Be=function(gt){for(var Xt=[],Lt=1;Lt<arguments.length;Lt++)Xt[Lt-1]=arguments[Lt];var nn=[gt].concat(Xt);return gt.config({name:F(Te)}).fold(function(){throw new Error("We could not find any behaviour configuration for: "+Te+". Using API: "+Re)},function(_n){var an=Array.prototype.slice.call(nn,1);return Le.apply(void 0,[gt,_n.config,_n.state].concat(an))})},He=Re=we,De=(Xe=(Le=he).toString()).indexOf(")")+1,Ue=Xe.indexOf("("),at=Xe.substring(Ue+1,De-1).split(/,\s*/),Be.toFunctionAnnotation=function(){return{name:He,parameters:au(at.slice(0,1).concat(at.slice(3)))}},Be;var Te,Le,Re,Be,He,Xe,De,Ue,at}),ee=yn(I,pf),ue=de(de(de({},ee),W),{revoke:Ee(Wm,p),config:function(he){var we=bs(p+"-config",s,he);return{key:p,value:{config:we,me:ue,configAsRaw:un(function(){return bs(p+"-config",s,he)}),initialConfig:he,state:R}}},schema:F(d),exhibit:function(he,we){return Vt(H(he),sn(_,"exhibit"),function(Te,Le){return Le(we,Te.config,Te.state)}).getOrThunk(function(){return ed({})})},name:F(p),handlers:function(he){return H(he).map(function(we){return sn(_,"events").getOr(function(){return{}})(we.config,we.state)}).getOr({})}});return ue},Ln=Qc,Zx=Qu([bn("fields"),bn("name"),It("active",{}),It("apis",{}),It("state",$l),It("extra",{})]),Ta=Qu([bn("branchKey"),bn("branches"),bn("name"),It("active",{}),It("apis",{}),It("state",$l),It("extra",{})]),ib=F(void 0),nc=yi({fields:Gh,name:"receiving",active:Og}),Um=Object.freeze({__proto__:null,exhibit:function(s,d){return ed({classes:[],styles:d.useFixed()?{}:{position:"relative"}})}}),El=Ns([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),dn=function(s,d,p){var _=Mi(d,p);return s.fold(F(_),F(_),function(){var T=Es();return _.translate(-T.left,-T.top)})};function jm(s){return Fa(s,ei)}function Po(s){function d(){return p.get().each(s)}var p=wr(X.none());return{clear:function(){d(),p.set(X.none())},isSet:function(){return p.get().isSome()},get:function(){return p.get()},set:function(_){d(),p.set(X.some(_))}}}function al(){return Po(function(s){return s.destroy()})}function Wd(){return Po(function(s){return s.unbind()})}function Ai(){var s=Po(j);return de(de({},s),{on:function(d){return s.get().each(d)}})}function Ua(s,d,p){return Fp(s,d,k0,p,!1)}function Eg(s,d,p){return Fp(s,d,k0,p,!0)}function Kx(s,d){var p=s,_=Math.floor(d);Qr(p,"max-height",bu.max(p,_,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"])+"px")}function S0(s,d,p){return void 0===s[d]?p:s[d]}function Mc(s,d,p,_){function T(W){return sn(p,W).getOr([])}function I(W,ee,ue){var he=ai(Pg,ue);return{offset:Mi(W,ee),classesOn:Or(ue,T),classesOff:Or(he,T)}}var R=s*(_=void 0===_?1:_),H=d*_;return{southeast:function(){return I(-s,d,["top","alignLeft"])},southwest:function(){return I(s,d,["top","alignRight"])},south:function(){return I(-s/2,d,["top","alignCentre"])},northeast:function(){return I(-s,-d,["bottom","alignLeft"])},northwest:function(){return I(s,-d,["bottom","alignRight"])},north:function(){return I(-s/2,-d,["bottom","alignCentre"])},east:function(){return I(s,-d/2,["valignCentre","left"])},west:function(){return I(-s,-d/2,["valignCentre","right"])},insetNortheast:function(){return I(R,H,["top","alignLeft","inset"])},insetNorthwest:function(){return I(-R,H,["top","alignRight","inset"])},insetNorth:function(){return I(-R/2,H,["top","alignCentre","inset"])},insetSoutheast:function(){return I(R,-H,["bottom","alignLeft","inset"])},insetSouthwest:function(){return I(-R,-H,["bottom","alignRight","inset"])},insetSouth:function(){return I(-R/2,-H,["bottom","alignCentre","inset"])},insetEast:function(){return I(-R,-H/2,["valignCentre","right","inset"])},insetWest:function(){return I(R,-H/2,["valignCentre","left","inset"])}}}function sb(){return Mc(0,0,{})}function ub(s,d){return function(p){return"rtl"===cb(p)?d:s}}var ya,C0=El.relative,lb=El.fixed,ei="data-alloy-placement",cv=Ns([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),k0=$e,Jx=va,Ym=["top","bottom","right","left"],T0="data-alloy-transition-timer",hi=F(function(s,d){Kx(s,d),aa(s,{"overflow-x":"hidden","overflow-y":"auto"})}),nr=F(function(s,d){Kx(s,d)}),Pg=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],M0=U,cb=function(s){return"rtl"===Is(s,"direction")?"rtl":"ltr"};function Qx(s){return Vh(s,function(d){return Ja(d)&&vi(d,"data-alloy-vertical-dir")===ya.BottomToTop})}function Ng(){return Ri("layouts",[bn("onLtr"),bn("onRtl"),Xo("onBottomLtr"),Xo("onBottomRtl")])}function Rg(s,d,p,_,T,I,R){var H=R.map(Qx).getOr(!1),W=d.layouts.map(function(ue){return ue.onLtr(s)}),ee=d.layouts.map(function(ue){return ue.onRtl(s)});return ub(H?d.layouts.bind(function(ue){return ue.onBottomLtr.map(function(he){return he(s)})}).or(W).getOr(T):W.getOr(p),H?d.layouts.bind(function(ue){return ue.onBottomRtl.map(function(he){return he(s)})}).or(ee).getOr(I):ee.getOr(_))(s)}function e1(s){return s.fold(U,function(d,p,_){return d.translate(-p,-_)})}function db(s){return s.fold(U,U)}function V_(s){return to(s,function(d,p){return d.translate(p.left,p.top)},Mi(0,0))}function Cf(s){return V_(Ot(s,db))}function D0(s,d,p){var _,T,I=Es(Bt(s.element)),R=(_=s,T=Br(p.root).dom,X.from(T.frameElement).map(ct.fromDom).filter(function(H){return Sn(Bt(H),Bt(_.element))}).map(df).getOr(I));return uu(R,I.left,I.top)}function Dc(s,d,p,_){var T=A0(Mi(s,d));return X.some({point:T,width:p,height:_})}function Gd(s,d,p,_,T){return s.map(function(I){var R=[d,I.point],H=_.fold(function(){return Cf(R)},function(){return Cf(R)},function(){return V_(Ot(R,e1))}),W={x:H.left,y:H.top,width:I.width,height:I.height},ee=(p.showAbove?ov:Tg)(),ue=(p.showAbove?Kf:Al)(),he=Rg(T,p,ee,ue,ee,ue,X.none());return M0({anchorBox:W,bubble:p.bubble.getOr(sb()),overrides:p.overrides,layouts:he,placer:X.none()})})}function rc(s,d,p){var _,T=s.document.createRange(),I=T;return d.fold(function(R){I.setStartBefore(R.dom)},function(R,H){I.setStart(R.dom,H)},function(R){I.setStartAfter(R.dom)}),_=T,p.fold(function(R){_.setEndBefore(R.dom)},function(R,H){_.setEnd(R.dom,H)},function(R){_.setEndAfter(R.dom)}),T}function Lg(s,d,p,_,T){var I=s.document.createRange();return I.setStart(d.dom,p),I.setEnd(_.dom,T),I}function H_(s){return{left:s.left,top:s.top,right:s.right,bottom:s.bottom,width:s.width,height:s.height}}function Ac(s,d,p){return d(ct.fromDom(p.startContainer),p.startOffset,ct.fromDom(p.endContainer),p.endOffset)}function Zm(s,d){return p=s,I=d.match({domRange:function(R){return{ltr:F(R),rtl:X.none}},relative:function(R,H){return{ltr:un(function(){return rc(p,R,H)}),rtl:un(function(){return X.some(rc(p,H,R))})}},exact:function(R,H,W,ee){return{ltr:un(function(){return Lg(p,R,H,W,ee)}),rtl:un(function(){return X.some(Lg(p,W,ee,R,H))})}}}),((T=(_=I).ltr()).collapsed?_.rtl().filter(function(R){return!1===R.collapsed}).map(function(R){return zg.rtl(ct.fromDom(R.endContainer),R.endOffset,ct.fromDom(R.startContainer),R.startOffset)}).getOrThunk(function(){return Ac(0,zg.ltr,T)}):Ac(0,zg.ltr,T)).match({ltr:function(R,H,W,ee){var ue=s.document.createRange();return ue.setStart(R.dom,H),ue.setEnd(W.dom,ee),ue},rtl:function(R,H,W,ee){var ue=s.document.createRange();return ue.setStart(W.dom,ee),ue.setEnd(R.dom,H),ue}});var p,_,T,I}(ya=ya||{}).TopToBottom="toptobottom",ya.BottomToTop="bottomtotop";var Uh="data-alloy-vertical-dir",Bg=[bn("hotspot"),Xo("bubble"),It("overrides",{}),Ng(),Zo("placement",function(s,d,p){var _=$f(p,d.hotspot.element),T=Rg(s.element,d,Tg(),Al(),ov(),Kf(),X.some(d.hotspot.element));return X.some(M0({anchorBox:_,bubble:d.bubble.getOr(sb()),overrides:d.overrides,layouts:T,placer:X.none()}))})],jh=[bn("x"),bn("y"),It("height",0),It("width",0),It("bubble",sb()),It("overrides",{}),Ng(),Zo("placement",function(s,d,p){var _=dn(p,d.x,d.y),T=Xs(_.left,_.top,d.width,d.height),I=Rg(s.element,d,rv(),x0(),rv(),x0(),X.none());return X.some(M0({anchorBox:T,bubble:d.bubble,overrides:d.overrides,layouts:I,placer:X.none()}))})],Pa=Ns([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),A0=Pa.screen,uu=Pa.absolute,I0=[bn("node"),bn("root"),Xo("bubble"),Ng(),It("overrides",{}),It("showAbove",!1),Zo("placement",function(s,d,p){var _=D0(s,0,d);return d.node.filter(ys).bind(function(T){var I=T.dom.getBoundingClientRect(),R=Dc(I.left,I.top,I.width,I.height),H=d.node.getOr(s.element);return Gd(R,_,d,p,H)})})],id=function(s,d,p,_){return{start:s,soffset:d,finish:p,foffset:_}},fv=(Ns([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),function(s){return s.fold(U,U,U)}),Qf=Ns([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),eh={domRange:Qf.domRange,relative:Qf.relative,exact:Qf.exact,exactFromRange:function(s){return Qf.exact(s.start,s.soffset,s.finish,s.foffset)},getWin:function(s){return Br(s.match({domRange:function(d){return ct.fromDom(d.startContainer)},relative:function(d,p){return fv(d)},exact:function(d,p,_,T){return d}}))},range:id},zg=Ns([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function Km(s){return Xd.getOption(s)}function t1(s){return Km(s).filter(function(d){return 0!==d.trim().length||-1<d.indexOf("\xa0")}).isSome()||ki(Rl,tn(s))}function Qs(s,d){return $n(p=void 0===s?document:s.dom)?[]:Ot(p.querySelectorAll(d),ct.fromDom);var p}function fb(s){if(0<s.rangeCount){var d=s.getRangeAt(0),p=s.getRangeAt(s.rangeCount-1);return X.some(id(ct.fromDom(d.startContainer),d.startOffset,ct.fromDom(p.endContainer),p.endOffset))}return X.none()}function ad(s){if(null===s.anchorNode||null===s.focusNode)return fb(s);var d,p,_,T,I,R,H,W,ee,ue,he,we=ct.fromDom(s.anchorNode),Te=ct.fromDom(s.focusNode);return R=p=s.anchorOffset,H=_=Te,W=T=s.focusOffset,(ee=Bt(I=d=we).dom.createRange()).setStart(I.dom,R),ee.setEnd(H.dom,W),ue=ee,he=Sn(d,_)&&p===T,ue.collapsed&&!he?X.some(id(we,s.anchorOffset,Te,s.focusOffset)):fb(s)}function O0(s,d){var p,_,T=(p=Zm(s,d)).getClientRects();return 0<(_=0<T.length?T[0]:p.getBoundingClientRect()).width||0<_.height?X.some(_).map(H_):X.none()}function Ud(s,d){return{element:s,offset:d}}function si(s,d){return(gc(s)?Ud:function(p,_){var T=jo(p);if(0===T.length)return Ud(p,_);if(_<T.length)return Ud(T[_],0);var I=T[T.length-1];return Ud(I,(gc(I)?Xd.get(I):jo(I)).length)})(s,d)}function hb(s,d){return d.getSelection.getOrThunk(function(){return function(){return X.from(s.getSelection()).filter(function(p){return 0<p.rangeCount}).bind(ad)}})().map(function(p){var _=si(p.start,p.soffset),T=si(p.finish,p.foffset);return eh.range(_.element,_.offset,T.element,T.offset)})}function Ic(s){return s.x+s.width}function Fg(s,d){return s.x-d.width}function W_(s,d){return s.y-d.height+s.height}function n1(s,d,p){return Ks(Ic(s),s.y,p.southeast(),av(),"southeast",wi(s,{left:0,top:2}),ip)}function hv(s,d,p){return Ks(Fg(s,d),s.y,p.southwest(),Ig(),"southwest",wi(s,{right:1,top:2}),ip)}function $m(s,d,p){return Ks(Ic(s),W_(s,d),p.northeast(),sv(),"northeast",wi(s,{left:0,bottom:3}),ip)}function E0(s,d,p){return Ks(Fg(s,d),W_(s,d),p.northwest(),_0(),"northwest",wi(s,{right:1,bottom:3}),ip)}function ci(){return[n1,hv,$m,E0]}function Vg(){return[hv,n1,E0,$m]}function gv(s,d,p,_,T,I,R){var H,W,ee,ue,he,we,Te,Le,Re,Be,He,De;return H={anchorBox:p.anchorBox,origin:d},W=T.element,ee=p.bubble,ue=p.layouts,he=I,we=_,Le=R,Be=S0(Te=p.overrides,"maxHeightFunction",hi()),He=S0(Te,"maxWidthFunction",j),function(s,d,p,_){var T,I,R,W=function Xm(s,d,p,_){Co(d,"max-height"),Co(d,"max-width");var T,I,H,W,ee,ue,he,we,Te={width:zt(T=d),height:zr(T)};return I=d,ee=p,ue=_.bounds,he=(W=Te).width,we=W.height,to(_.preference,function(Re,Be){var He=Ee(Le,Be);return Re.fold(F(Re),He)},cv.nofit({rect:H=s,maxHeight:W.height,maxWidth:W.width,direction:av(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:H.y},-1,-1,!1)).fold(U,U);function Le(Re,Be,He,Xe,De){var Ue=function ab(s,d,p,_){var T,I,R,H,W,ee,ue,he,Te,Le,Re,Be,He,Xe,De,Ue,at,gt,Xt,Lt,nn,_n,an,kn,Vn,sr,Ar,lo,Jo,gi,Fi,Uo,mi,Ci,Ji,oi,xa,dl,yd=s.bubble,uf=yd.offset,_a=(mi=s.restriction,Ci=uf,Ji=jc("left",(Uo=_).x),oi=jc("top",Uo.y),xa=jc("right",Uo.right),dl=jc("bottom",Uo.bottom),Xs(Ji,oi,xa-Ji,dl-oi)),Ds=s.y+uf.top,Ei=Xs(s.x+uf.left,Ds,d,p),Qn=(I=_a.y,R=_a.right,H=_a.bottom,ee=Ei.y,he=Ei.bottom,Te=Ei.height,{originInBounds:(T=_a.x)<=(W=Ei.x)&&W<=R&&I<=ee&&ee<=H,sizeInBounds:(ue=Ei.right)<=R&&T<=ue&&he<=H&&I<=he,visibleW:Math.min(Ei.width,T<=W?R-W:ue-T),visibleH:Math.min(Te,I<=ee?H-ee:he-I)}),co=Qn.visibleW,Vi=Qn.visibleH,ia=Qn.originInBounds&&Qn.sizeInBounds,La=ia?Ei:(Le=_a.x,Re=_a.y,Be=_a.right,He=_a.bottom,Xe=Ei.x,De=Ei.y,Ue=Ei.width,at=Ei.height,gt=Math.max(Le,Be-Ue),Xt=Math.max(Re,He-at),Lt=Hu(Xe,Le,gt),nn=Hu(De,Re,Xt),_n=Math.min(Lt+Ue,Be)-Lt,an=Math.min(nn+at,He)-nn,Xs(Lt,nn,_n,an)),lf=0<La.width&&0<La.height,Nu=(kn=s.direction,Ar=F((Vn=La).bottom-(sr=_).y),lo=F(sr.bottom-Vn.y),Jo=kn.fold(lo,lo,Ar,Ar,lo,Ar,lo,lo),gi=F(Vn.right-sr.x),Fi=F(sr.right-Vn.x),{maxWidth:kn.fold(Fi,gi,Fi,gi,Fi,Fi,Fi,gi),maxHeight:Jo}),qu={rect:La,maxHeight:Nu.maxHeight,maxWidth:Nu.maxWidth,direction:s.direction,placement:s.placement,classes:{on:yd.classesOn,off:yd.classesOff},layout:s.label,testY:Ds};function jc(zl,fl){return mi[zl].map(function(hl){var Xu="top"===zl||"bottom"===zl,Bp=Xu?Ci.top:Ci.left,Fo=("left"===zl||"top"===zl?Math.max:Math.min)(hl,fl)+Bp;return Xu?Hu(Fo,Uo.y,Uo.bottom):Hu(Fo,Uo.x,Uo.right)}).getOr(fl)}return ia||s.alwaysFit?cv.fit(qu):cv.nofit(qu,co,Vi,lf)}(Re(H,W,ee,I,ue),he,we,ue);return Ue.fold(F(Ue),function(at,gt,Xt,Lt){return(De===Lt?Xe<Xt||He<gt:!De&&Lt)?Ue:cv.nofit(Be,He,Xe,De)})}}(s,d,p,_),ee=d,ue=W,he=Ag((T=_).origin,ue);return T.transition.each(function(we){!function qm(s,d,p,_,T,I){var R,H,W,ee,ue,he,we,Te,Le,Re=(R=_,H=T,I.exists(function(He){var Xe=R.mode;return"all"===Xe||He[Xe]!==H[Xe]}));function Be(He){return parseFloat(He).toFixed(3)}Re||(Le=s,xt(_.classes,function(He){return ou(Le,He)}))?(Qr(s,"position",p.position),W=$f(d,s),ee=Ag(d,de(de({},T),{rect:W})),ue=Qi(Ym,function(He){return ee[He]}),Te=p,cr(ue,function(He,Xe){var De,Ue,at,gt=Te[Xe].map(Be),Xt=He.map(Be);return!Vt(De=gt,Ue=Xt,at=void 0===at?se:at).getOr(De.isNone()&&Ue.isNone())}).isSome()&&(Zc(s,ue),Re&&(Xl(he=s,(we=_).classes),Fa(he,T0).each(function(He){clearTimeout(parseInt(He,10)),pa(he,T0)}),function F_(s,d){function p(Le){var Re,Be=null!==(Re=Le.raw.pseudoElement)&&void 0!==Re?Re:"";return Sn(Le.target,s)&&!tu(Be)&&ki(Ym,Le.raw.propertyName)}function _(Le){var Re;(Ze(Le)||p(Le))&&(H.clear(),W.clear(),!Ze(Re=null==Le?void 0:Le.raw.type)&&Re!==ws()||(clearTimeout(I),pa(s,T0),_c(s,d.classes)))}function T(){H.set(Ua(s,ws(),_)),W.set(Ua(s,jf(),_))}var I,R,H=Wd(),W=Wd();"ontransitionstart"in s.dom?R=Ua(s,$p(),function(Le){p(Le)&&(R.unbind(),T())}):T();var ee,ue,he=(ee=s,ue=we("transition-delay"),to(we("transition-duration"),function(Le,Re,Be){var He=Te(ue[Be])+Te(Re);return Math.max(Le,He)},0));function we(Le){var Re=Is(ee,Le);return ln($(Re)?Re.split(/\s*,\s*/):[],tu)}function Te(Le){if($(Le)&&/^[\d.]+/.test(Le)){var Re=parseFloat(Le);return rt(Le,"ms")?Re:1e3*Re}return 0}requestAnimationFrame(function(){I=setTimeout(_,he+17),Ir(s,T0,I)})}(he,we)),Vl(s))):_c(s,_.classes)}(ee,T.origin,he,we,ue,T.lastPlacement)}),Tc(ee,he),Ir(d,ei,W.placement),_c(I=d,(R=W.classes).off),Xl(I,R.on),(0,_.maxHeightFunction)(d,W.maxHeight),(0,_.maxWidthFunction)(d,W.maxWidth),{layout:W.layout,placement:W.placement}}(H.anchorBox,W,ee,{bounds:(Re=De=H.origin,we.fold(function(){return Re.fold(xu,xu,Xs)},function(gt){return Re.fold(gt,gt,function(){var Xt=gt(),Lt=dn(Re,Xt.x,Xt.y);return Xs(Lt.left,Lt.top,Xt.width,Xt.height)})})),origin:De,preference:ue,maxHeightFunction:Be,maxWidthFunction:He,lastPlacement:he,transition:Le})}function gb(s,d){ta(s.element,d.element)}function P0(s,d){var p,_=s.components();ur((p=s).components(),function(I){return Cd(I.element)}),Ru(p.element),p.syncComponents();var T=ai(_,d);ur(T,function(I){yb(I),s.getSystem().removeFromWorld(I)}),ur(d,function(I){I.getSystem().isConnected()?gb(s,I):(s.getSystem().addToWorld(I),gb(s,I),ys(s.element)&&wv(I)),s.syncComponents()})}function Mu(s,d){u1(s,d,ta)}function Hg(s){yb(s),Cd(s.element),s.getSystem().removeFromWorld(s)}function kf(s){var d=Er(s.element).bind(function(p){return s.getSystem().getByDom(p).toOptional()});Hg(s),d.each(function(p){p.syncComponents()})}function qh(s){var d=s.components();ur(d,Hg),Ru(s.element),s.syncComponents()}function Tf(s,d){U0(s,d,ta)}function Jm(s){var d=jo(s.element);ur(d,function(p){s.getByDom(p).each(yb)}),Cd(s.element)}function sd(s,d,p,_){p.get().each(function(I){qh(s)}),Mu(d.getAttachPoint(s),s);var T=s.getSystem().build(_);return Mu(s,T),p.set(T),T}function Wg(s,d,p,_){var T=sd(s,d,p,_);return d.onOpen(s,T),T}function Xh(s,d,p){p.get().each(function(_){qh(s),kf(s),d.onClose(s,_),p.clear()})}function Pl(s,d,p){return p.isOpen()}function Du(s){var d=bs("Dismissal",bb,s),p={};return p[$h()]={schema:Qu([bn("target")]),onReceive:function(_,T){po.isOpen(_)&&(po.isPartOf(_,T.target)||d.isExtraPart(_,T.target)||d.fireEventInstead.fold(function(){return po.close(_)},function(I){return Lo(_,I.event)}))}},p}function Yh(s){var d=bs("Reposition",l1,s),p={};return p[Xg()]={onReceive:function(_){po.isOpen(_)&&d.fireEventInstead.fold(function(){return d.doReposition(_)},function(T){return Lo(_,T.event)})}},p}function mv(s,d,p){d.store.manager.onLoad(s,d,p)}function r1(s,d,p){d.store.manager.onUnload(s,d,p)}function mb(){var s=wr(null);return Jl({set:s.set,get:s.get,isNotSet:function(){return null===s.get()},clear:function(){s.set(null)},readState:function(){return{mode:"memory",value:s.get()}}})}function Oc(){var s=wr({}),d=wr({});return Jl({readState:function(){return{mode:"dataset",dataByValue:s.get(),dataByText:d.get()}},lookup:function(p){return sn(s.get(),p).orThunk(function(){return sn(d.get(),p)})},update:function(p){var _=s.get(),T=d.get(),I={},R={};ur(p,function(H){sn(I[H.value]=H,"meta").each(function(W){sn(W,"text").each(function(ee){R[ee]=H})})}),s.set(de(de({},_),I)),d.set(de(de({},T),R))},clear:function(){s.set({}),d.set({})}})}function Gg(s,d,p,_){var T=d.store;p.update([_]),T.setValue(s,_),d.onSetValue(s,_)}function ns(s,d){return gf(s,{},Ot(d,function(p){return _=p.name(),T="Cannot configure "+p.name()+" for "+s,ds(_,_,{tag:"option",process:{}},ls(function(I){return mf("The field: "+_+" is forbidden. "+T)}));var _,T}).concat([Su("dump",U)]))}function Ug(s){return s.dump}function ja(s,d){return de(de({},Ln(d)),s.dump)}function pv(s){return ir(s,"uiType")}function N0(s){return s.fold(X.some,X.none,X.some,X.some)}function Qm(s){function d(p){return p.name}return s.fold(d,d,d,d)}function Mf(s,d){return function(p){var _=bs("Converting part type",d,p);return s(_)}}function R0(s,d,p,_){return xo(d.defaults(s,p,_),p,{uid:s.partUids[d.name]},d.overrides(s,p,_))}function vv(s,d){var p={};return ur(d,function(_){N0(_).each(function(T){var I=q0(s,T.pname);p[T.name]=function(R){var H=bs("Part: "+T.name+" in "+s,Pr(T.schema),R);return de(de({},I),{config:R,validated:H})}})}),p}function lu(s,d,p){return{uiType:Kg(),owner:s,name:d,config:p,validated:{}}}function L0(s){return Or(s,function(d){return d.fold(X.none,X.some,X.none,X.none).map(function(p){return xl(p.name,p.schema.concat([Hh(d1())]))}).toArray()})}function th(s){return Ot(s,Qm)}function B0(s,d,p){return _=d,T={},I={},ur(p,function(R){R.fold(function(H){T[H.pname]=Dr(!0,function(W,ee,ue){return H.factory.sketch(R0(W,H,ee,ue))})},function(H){var W=_.parts[H.name];I[H.name]=F(H.factory.sketch(R0(_,H,W[d1()]),W))},function(H){T[H.pname]=Dr(!1,function(W,ee,ue){return H.factory.sketch(R0(W,H,ee,ue))})},function(H){T[H.pname]=AS(!0,function(W,ee,ue){return Ot(W[H.name],function(he){return H.factory.sketch(xo(H.defaults(W,he,ue),he,H.overrides(W,he)))})})})}),{internals:F(T),externals:F(I)};var _,T,I}function jd(s,d,p){return _=X.some(s),I=(T=d).components,ee=yn(p,function(he,we){return Le=he,Re=!1,{name:F(Te=we),required:function(){return Le.fold(function(Be,He){return Be},function(Be,He){return Be})},used:function(){return Re},replace:function(){if(Re)throw new Error("Trying to use the same placeholder more than once: "+Te);return Re=!0,Le}};var Te,Le,Re}),R=_,H=T,W=ee,ue=Or(I,function(he){return Sv(R,H,he,W)}),jt(ee,function(he){if(!1===he.used()&&he.required())throw new Error("Placeholder: "+he.name()+" was not found in components list\nNamespace: "+_.getOr("none")+"\nComponents: "+JSON.stringify(T.components,null,2))}),ue;var _,T,I,R,H,W,ee,ue}function Bo(s,d,p){var _=d.partUids[p];return s.getSystem().getByUid(_).toOptional()}function ca(s,d,p){return Bo(s,d,p).getOrDie("Could not find part: "+p)}function o1(s,d,p){var _={},T=d.partUids,I=s.getSystem();return ur(p,function(R){_[R]=F(I.getByUid(T[R]))}),_}function qd(s,d){var p=s.getSystem();return yn(d.partUids,function(_,T){return F(p.getByUid(_))})}function yv(s){return pi(s.partUids)}function i1(s,d,p){var _={},T=d.partUids,I=s.getSystem();return ur(p,function(R){_[R]=F(I.getByUid(T[R]).getOrDie())}),_}function a1(s,d){return Qc(Ot(th(d),function(p){return{key:p,value:s+"-"+p}}))}function Wu(s){return ds("partUids","partUids",bo(function(d){return a1(d.uid,s)}),Oa())}function bv(s,d,p,_,T){var I;return bs(s+" [SpecSchema]",Qu((I=T,(0<_.length?[xl("parts",_)]:[]).concat([bn("uid"),It("dom",{}),It("components",[]),Hh("originalSpec"),It("debug.sketcher",{})]).concat(I)).concat(d)),p)}function ms(s,d,p,_,T){var I=f1(T),R=bv(s,d,I,L0(p),[Wu(p)]),H=B0(0,R,p);return _(R,jd(s,R,H.internals()),I,H.externals())}function qa(s){var d=bs("Sketcher for "+s.name,fu,s),p=yn(d.apis,Ls),_=yn(d.extraApis,pf);return de(de({name:d.name,configFields:d.configFields,sketch:function(T){return(0,d.factory)(bv(d.name,d.configFields,H=f1(T),[],[]),H);var H}},p),_)}function Xa(s){var d=bs("Sketcher for "+s.name,h1,s),p=vv(d.name,d.partFields),_=yn(d.apis,Ls),T=yn(d.extraApis,pf);return de(de({name:d.name,partFields:d.partFields,configFields:d.configFields,sketch:function(I){return ms(d.name,d.configFields,d.partFields,d.factory,I)},parts:p},_),T)}function ud(s){return"input"===tn(s)&&"radio"!==vi(s,"type")||"textarea"===tn(s)}function z0(s,d,p){(d.disabled()?Cb:fd)(s,d)}function F0(s,d){return!0===d.useNative&&ki(Qh,tn(s.element))}function G_(s,d){return F0(s,d)?is(s.element,"disabled"):"true"===vi(s.element,"aria-disabled")}function xv(s,d,p,_){var T=Qs(s.element,"."+d.highlightClass);ur(T,function(I){Rt(_,function(R){return R.element===I})||(_i(I,d.highlightClass),s.getSystem().getByDom(I).each(function(R){d.onDehighlight(s,R),Lo(R,Cg())}))})}function ld(s,d,p,_){xv(s,d,0,[_]),ks(0,d,0,_)||(Qa(_.element,d.highlightClass),d.onHighlight(s,_),Lo(_,eb()))}function Zh(s,d,p,_){var T=Qs(s.element,"."+d.itemClass);return Tr(T,function(I){return ou(I,d.highlightClass)}).bind(function(I){var R=tc(I,_,0,T.length-1);return s.getSystem().getByDom(T[R]).toOptional()})}function ep(s,d,p){var _=rr(s.slice(0,d)),T=rr(s.slice(d+1));return wo(_.concat(T),p)}function V0(s,d,p){return wo(rr(s.slice(0,d)),p)}function jg(s,d,p){var _=s.slice(0,d);return wo(s.slice(d+1).concat(_),p)}function H0(s,d,p){return wo(s.slice(d+1),p)}function Ao(s){return function(d){return ki(s,d.raw.which)}}function cd(s){return function(d){return xt(s,function(p){return p(d)})}}function tp(s){return!0===s.raw.shiftKey}function pb(s){return!0===s.raw.ctrlKey}function fo(s,d){return{matches:s,classification:d}}function s1(s,d,p){d.exists(function(_){return p.exists(function(T){return Sn(T,_)})})||kr(s,xf(),{prevFocus:d,newFocus:p})}function np(){function s(d){return od(d.element)}return{get:s,set:function(d,p){var _=s(d);d.getSystem().triggerFocus(p,d.element),s1(d,_,s(d))}}}function Ec(){function s(d){return ko.getHighlighted(d).map(function(p){return p.element})}return{get:s,set:function(d,p){var _=s(d);d.getSystem().getByDom(p).fold(j,function(I){ko.highlight(d,I)});var T=s(d);s1(d,_,T)}}}function W0(s,d,p,_,T,I){var R=I.map(Lu);return vb(s,d,p,_,T,R)}function G0(s,d,p){var _,I,R=d.getAttachPoint(s);Qr(s.element,"position",Gu.getMode(R)),I=d.cloakVisibilityAttr,Ni((_=s).element,"visibility").fold(function(){pa(_.element,I)},function(H){Ir(_.element,I,H)}),Qr(_.element,"visibility","hidden")}function Pc(s,d,p){var _,T,R=s.element;Rt(["top","left","right","bottom"],function(H){return Ni(R,H).isSome()})||Co(s.element,"position"),T="visibility",Fa((_=s).element,d.cloakVisibilityAttr).fold(function(){return Co(_.element,T)},function(H){return Qr(_.element,T,H)})}function ks(s,d,p,_){return ou(_.element,d.highlightClass)}function rp(s,d,p){return ra(s.element,"."+d.itemClass).bind(function(_){return s.getSystem().getByDom(_).toOptional()})}function cu(s,d,p){var _=Qs(s.element,"."+d.itemClass);return(0<_.length?X.some(_[_.length-1]):X.none()).bind(function(T){return s.getSystem().getByDom(T).toOptional()})}function _v(s,d,p){return Eo(Ot(Qs(s.element,"."+d.itemClass),function(_){return s.getSystem().getByDom(_).toOptional()}))}var Nl,sl,op,oc,Xd=(Nl=gc,{get:function(s){if(!Nl(s))throw new Error("Can only get text value of a text node");return sl(s).getOr("")},getOption:sl=function(s){return Nl(s)?X.from(s.dom.nodeValue):X.none()},set:function(s,d){if(!Nl(s))throw new Error("Can only set raw text value of a text node");s.dom.nodeValue=d}}),Rl=["img","br"],Kh=[Xo("getSelection"),bn("root"),Xo("bubble"),Ng(),It("overrides",{}),It("showAbove",!1),Zo("placement",function(s,d,p){var _=Br(d.root).dom,T=D0(s,0,d);return Gd(hb(_,d).bind(function(I){return(0<(W=Zm(_,eh.exactFromRange(I)).getBoundingClientRect()).width||0<W.height?X.some(W).map(H_):X.none()).orThunk(function(){var ee=ct.fromText("\ufeff");xd(I.start,ee);var ue=O0(_,eh.exact(ee,0,ee,1));return Cd(ee),ue}).bind(function(ee){return Dc(ee.left,ee.top,ee.width,ee.height)});var W}),T,d,p,hb(_,d).bind(function(I){return Ja(I.start)?X.some(I.start):Ul(I.start)}).getOr(s.element))})],ip="link-layout",U_=Ys("type",{selection:Kh,node:I0,hotspot:Bg,submenu:[bn("item"),Ng(),It("overrides",{}),Zo("placement",function(s,d,p){var _=$f(p,d.item.element),T=Rg(s.element,d,ci(),Vg(),ci(),Vg(),X.none());return X.some(M0({anchorBox:_,bubble:sb(),overrides:d.overrides,layouts:T,placer:X.none()}))})],makeshift:jh}),nh=[zu("classes",ua),ql("mode","all",["all","layout","placement"])],Ma=[It("useFixed",qe),Xo("getBounds")],ap=[Bu("anchor",U_),Ri("transition",nh)],vb=function(s,d,p,_,T,I){var R=bs("placement.info",Pr(ap),T),H=R.anchor,W=_.element,ee=p.get(_.uid);ob(function(){Qr(W,"position","fixed");var ue=Ni(W,"visibility");Qr(W,"visibility","hidden");var he,we,Te,Le,Re=d.useFixed()?(Le=document.documentElement,lb(0,0,Le.clientWidth,Le.clientHeight)):(we=df((he=s).element),Te=he.element.dom.getBoundingClientRect(),C0(we.left,we.top,Te.width,Te.height)),Be=H.placement,He=I.map(F).or(d.getBounds);Be(s,H,Re).each(function(Xe){var De=Xe.placer.getOr(gv)(s,Re,Xe,He,_,ee,R.transition);p.set(_.uid,De)}),ue.fold(function(){Co(W,"visibility")},function(Xe){Qr(W,"visibility",Xe)}),Ni(W,"left").isNone()&&Ni(W,"top").isNone()&&Ni(W,"right").isNone()&&Ni(W,"bottom").isNone()&&fr(Ni(W,"position"),"fixed")&&Co(W,"position")},W)},Gu=yi({fields:Ma,name:"positioning",active:Um,apis:Object.freeze({__proto__:null,position:function(s,d,p,_,T){W0(s,d,p,_,T,X.none())},positionWithin:W0,positionWithinBounds:vb,getMode:function(s,d,p){return d.useFixed()?"fixed":"absolute"},reset:function(s,d,p,_){var T=_.element;ur(["position","left","right","top","bottom"],function(I){return Co(T,I)}),pa(T,ei),p.clear(_.uid)}}),state:Object.freeze({__proto__:null,init:function(){var s={};return Jl({readState:function(){return s},clear:function(d){xe(d)?delete s[d]:s={}},set:function(d,p){s[d]=p},get:function(d){return sn(s,d)}})}})}),yb=function(s){Lo(s,Sc());var d=s.components();ur(d,yb)},wv=function(s){var d=s.components();ur(d,wv),Lo(s,wc())},u1=function(s,d,p){s.getSystem().addToWorld(d),p(s.element,d.element),ys(s.element)&&wv(d),s.syncComponents()},U0=function(s,d,p){p(s,d.element);var _=jo(d.element);ur(_,function(T){d.getByDom(T).each(wv)})},rh=Object.freeze({__proto__:null,cloak:G0,decloak:Pc,open:Wg,openWhileCloaked:function(s,d,p,_,T){G0(s,d),Wg(s,d,p,_),T(),Pc(s,d)},close:Xh,isOpen:Pl,isPartOf:function(s,d,p,_){return Pl(0,0,p)&&p.get().exists(function(T){return d.isPartOf(s,T,_)})},getState:function(s,d,p){return p.get()},setContent:function(s,d,p,_){return p.get().map(function(){return sd(s,d,p,_)})}}),qg=Object.freeze({__proto__:null,events:function(s,d){return Qo([mn(Sl(),function(p,_){Xh(p,s,d)})])}}),po=yi({fields:[No("onOpen"),No("onClose"),bn("isPartOf"),bn("getAttachPoint"),It("cloakVisibilityAttr","data-precloak-visibility")],name:"sandboxing",active:qg,apis:rh,state:Object.freeze({__proto__:null,init:function(){var s=Ai(),d=F("not-implemented");return Jl({readState:d,isOpen:s.isSet,clear:s.clear,set:s.set,get:s.get})}})}),$h=F("dismiss.popups"),Xg=F("reposition.popups"),Hs=F("mouse.released"),bb=Qu([It("isExtraPart",qe),Ri("fireEventInstead",[It("event",Sg())])]),l1=Qu([Ri("fireEventInstead",[It("event",Ga())]),xs("doReposition")]),xb=Object.freeze({__proto__:null,onLoad:mv,onUnload:r1,setValue:function(s,d,p,_){d.store.manager.setValue(s,d,p,_)},getValue:function(s,d,p){return d.store.manager.getValue(s,d,p)},getState:function(s,d,p){return p}}),j_=Object.freeze({__proto__:null,events:function(s,d){var p=s.resetOnDom?[Xi(function(_,T){mv(_,s,d)}),Cl(function(_,T){r1(_,s,d)})]:[ol(s,d,mv)];return Qo(p)}}),c1=Object.freeze({__proto__:null,memory:mb,dataset:Oc,manual:function(){return Jl({readState:j})},init:function(s){return s.store.manager.state(s)}}),q_=[Xo("initialValue"),bn("getFallbackEntry"),bn("getDataKey"),bn("setValue"),Zo("manager",{setValue:Gg,getValue:function(s,d,p){var _=d.store,T=_.getDataKey(s);return p.lookup(T).getOrThunk(function(){return _.getFallbackEntry(T)})},onLoad:function(s,d,p){d.store.initialValue.each(function(_){Gg(s,d,p,_)})},onUnload:function(s,d,p){p.clear()},state:Oc})],sp=[bn("getValue"),It("setValue",j),Xo("initialValue"),Zo("manager",{setValue:function(s,d,p,_){d.store.setValue(s,_),d.onSetValue(s,_)},getValue:function(s,d,p){return d.store.getValue(s)},onLoad:function(s,d,p){d.store.initialValue.each(function(_){d.store.setValue(s,_)})},onUnload:j,state:$l.init})],er=yi({fields:[yc("store",{mode:"memory"},Ys("mode",{memory:[Xo("initialValue"),Zo("manager",{setValue:function(s,d,p,_){p.set(_),d.onSetValue(s,_)},getValue:function(s,d,p){return p.get()},onLoad:function(s,d,p){d.store.initialValue.each(function(_){p.isNotSet()&&p.set(_)})},onUnload:function(s,d,p){p.clear()},state:mb})],manual:sp,dataset:q_})),No("onSetValue"),It("resetOnDom",!1)],name:"representing",active:j_,apis:xb,extra:{setValueFrom:function(s,d){var p=er.getValue(d);er.setValue(s,p)}},state:c1}),Yg=ns,Nc=ja,Jh="placeholder",Zg=Ns([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Sv=function(s,d,p,_){return T=s,R=_,(pv(I=p)&&I.uiType===Jh?(W=I,ee=R,(H=T).exists(function(ue){return ue!==W.owner})?Zg.single(!0,F(W)):sn(ee,W.name).fold(function(){throw new Error("Unknown placeholder component: "+W.name+"\nKnown: ["+pi(ee)+"]\nNamespace: "+H.getOr("none")+"\nSpec: "+JSON.stringify(W,null,2))},function(ue){return ue.replace()})):Zg.single(!1,F(I))).fold(function(ue,he){var we=pv(p)?he(d,p.config,p.validated):he(d),Te=Or(sn(we,"components").getOr([]),function(Le){return Sv(s,d,Le,_)});return[de(de({},we),{components:Te})]},function(ue,he){if(pv(p)){var we=he(d,p.config,p.validated);return p.validated.preprocess.getOr(U)(we)}return he(d)});var T,I,R,H,W,ee},Dr=Zg.single,AS=Zg.multiple,Kg=F(Jh),$g=Ns([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),Rc=It("factory",{sketch:U}),_b=It("schema",[]),Cv=bn("name"),j0=ds("pname","pname",zf(function(s){return"<alloy."+Sr(s.name)+">"}),Oa()),kv=Su("schema",function(){return[Xo("preprocess")]}),up=It("defaults",F({})),Tv=It("overrides",F({})),Mv=Pr([Rc,_b,Cv,j0,up,Tv]),wb=Pr([Rc,_b,Cv,up,Tv]),Dv=Pr([Rc,_b,Cv,j0,up,Tv]),X_=Pr([Rc,kv,Cv,bn("unit"),j0,up,Tv]),du=Mf($g.required,Mv),Lc=Mf($g.external,wb),dd=Mf($g.optional,Dv),Jg=Mf($g.group,X_),d1=F("entirety"),oh=Object.freeze({__proto__:null,required:du,external:Lc,optional:dd,group:Jg,asNamedPart:N0,name:Qm,asCommon:function(s){return s.fold(U,U,U,U)},original:d1}),q0=function(s,d){return{uiType:Kg(),owner:s,name:d}},Av=Object.freeze({__proto__:null,generate:vv,generateOne:lu,schemas:L0,names:th,substitutes:B0,components:jd,defaultUids:a1,defaultUidsSchema:Wu,getAllParts:qd,getAllPartNames:yv,getPart:Bo,getPartOrDie:ca,getParts:o1,getPartsOrDie:i1}),f1=function(s){return ir(s,"uid")?s:de(de({},s),{uid:Tl("uid")})},fu=Qu([bn("name"),bn("factory"),bn("configFields"),It("apis",{}),It("extraApis",{})]),h1=Qu([bn("name"),bn("factory"),bn("configFields"),bn("partFields"),It("apis",{}),It("extraApis",{})]),Sb=Object.freeze({__proto__:null,getCurrent:function(s,d,p){return d.find(s)}}),Io=yi({fields:[bn("find")],name:"composing",apis:Sb}),Qh=["input","button","textarea","select"],Cb=function(s,d,p){d.disableClass.each(function(_){Qa(s.element,_)}),(F0(s,d)?function(_){Ir(_.element,"disabled","disabled")}:function(_){Ir(_.element,"aria-disabled","true")})(s),d.onDisabled(s)},fd=function(s,d,p){d.disableClass.each(function(_){_i(s.element,_)}),(F0(s,d)?function(_){pa(_.element,"disabled")}:function(_){Ir(_.element,"aria-disabled","false")})(s),d.onEnabled(s)},X0=Object.freeze({__proto__:null,enable:fd,disable:Cb,isDisabled:G_,onLoad:z0,set:function(s,d,p,_){(_?Cb:fd)(s,d)}}),Y0=Object.freeze({__proto__:null,exhibit:function(s,d){return ed({classes:d.disabled()?d.disableClass.toArray():[]})},events:function(s,d){return Qo([Rs(Ca(),function(p,_){return G_(p,s)}),ol(s,d,z0)])}}),xr=yi({fields:[Di("disabled",qe),It("useNative",!0),Xo("disableClass"),No("onDisabled"),No("onEnabled")],name:"disabling",active:Y0,apis:X0}),g1=Object.freeze({__proto__:null,dehighlightAll:function(s,d,p){return xv(s,d,0,[])},dehighlight:function(s,d,p,_){ks(0,d,0,_)&&(_i(_.element,d.highlightClass),d.onDehighlight(s,_),Lo(_,Cg()))},highlight:ld,highlightFirst:function(s,d,p){rp(s,d).each(function(_){ld(s,d,0,_)})},highlightLast:function(s,d,p){cu(s,d).each(function(_){ld(s,d,0,_)})},highlightAt:function(s,d,p,_){var T,I,R;I=_,R=Qs((T=s).element,"."+d.itemClass),X.from(R[I]).fold(function(){return yo.error(new Error("No element found with index "+I))},T.getSystem().getByDom).fold(function(H){throw H},function(H){ld(s,d,0,H)})},highlightBy:function(s,d,p,_){wo(_v(s,d),_).each(function(T){ld(s,d,0,T)})},isHighlighted:ks,getHighlighted:function(s,d,p){return ra(s.element,"."+d.highlightClass).bind(function(_){return s.getSystem().getByDom(_).toOptional()})},getFirst:rp,getLast:cu,getPrevious:function(s,d,p){return Zh(s,d,0,-1)},getNext:function(s,d,p){return Zh(s,d,0,1)},getCandidates:_v}),ko=yi({fields:[bn("highlightClass"),bn("itemClass"),No("onHighlight"),No("onDehighlight")],name:"highlighting",apis:g1}),hd=[8],Df=[9],hu=[13],Iv=[27],ul=[32],Ov=[37],Ev=[38],eg=[39],tg=[40],lp=nt(tp);function oa(s,d,p,_,T){function I(H,W,ee,ue,he){var we=ee(H,W,ue,he),Te=W.event;return wo(we,function(Le){return Le.matches(Te)}).map(function(Le){return Le.classification}).bind(function(Le){return Le(H,W,ue,he)})}var R={schema:function(){return s.concat([It("focusManager",np()),yc("focusInside","onFocus",Gp(function(H){return ki(["onFocus","onEnterOrSpace","onApi"],H)?yo.value(H):yo.error("Invalid value for focusInside")})),Zo("handler",R),Zo("state",d),Zo("sendFocusIn",T)])},processKey:I,toEvents:function(H,W){var ee=H.focusInside!==op.OnFocusMode?X.none():T(H).map(function(he){return mn(na(),function(we,Te){he(we,H,W),Te.stop()})}),ue=[mn(nd(),function(he,we){I(he,we,p,H,W).fold(function(){var Te=he,Le=we,Re=Ao(ul.concat(hu))(Le.event);H.focusInside===op.OnEnterOrSpaceMode&&Re&&p0(Te,Le)&&T(H).each(function(Be){Be(Te,H,W),Le.stop()})},function(Te){we.stop()})}),mn(Ea(),function(he,we){I(he,we,_,H,W).each(function(Te){we.stop()})})];return Qo(ee.toArray().concat(ue))}};return R}function Y_(s){function d(H,W){return 0<Os(H.visibilitySelector.bind(function(ee){return ec(W,ee)}).getOr(W))}function p(H,W,ee){var ue=W,he=ln(Qs(H.element,ue.selector),function(we){return d(ue,we)});X.from(he[ue.firstTabstop]).each(function(we){W.focusManager.set(H,we)})}function _(H,W,ee,ue){var he,we=Qs(H.element,ee.selector);return(he=ee).focusManager.get(H).bind(function(Te){return ec(Te,he.selector)}).bind(function(Te){return Tr(we,Ee(Sn,Te)).bind(function(Le){return Re=H,Be=ee,ue(we,Le,function(He){return d(Xe=Be,De=He)&&Xe.useTabstopAt(De);var Xe,De}).fold(function(){return Be.cyclic?X.some(!0):X.none()},function(He){return Be.focusManager.set(Re,He),X.some(!0)});var Re,Be})})}var T=[Xo("onEscape"),Xo("onEnter"),It("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),It("firstTabstop",0),It("useTabstopAt",$e),Xo("visibilitySelector")].concat([s]),I=F([fo(cd([tp,Ao(Df)]),function(H,W,ee){return _(H,0,ee,ee.cyclic?ep:V0)}),fo(Ao(Df),function(H,W,ee){return _(H,0,ee,ee.cyclic?jg:H0)}),fo(Ao(Iv),function(H,W,ee){return ee.onEscape.bind(function(ue){return ue(H,W)})}),fo(cd([lp,Ao(hu)]),function(H,W,ee){return ee.onEnter.bind(function(ue){return ue(H,W)})})]),R=F([]);return oa(T,$l.init,I,R,function(){return X.some(p)})}function Qg(s,d,p){return ud(p)&&Ao(ul)(d.event)?X.none():(Eh(s,p,Ca()),X.some(!0))}function cp(s,d){return X.some(!0)}function ih(s,d,p){return p.execute(s,d,s.element)}function Yd(){var s=Ai();return Jl({readState:function(){return s.get().map(function(d){return{numRows:String(d.numRows),numColumns:String(d.numColumns)}}).getOr({numRows:"?",numColumns:"?"})},setGridSize:function(d,p){s.set({numRows:d,numColumns:p})},getNumRows:function(){return s.get().map(function(d){return d.numRows})},getNumColumns:function(){return s.get().map(function(d){return d.numColumns})}})}function S(s){return function(d,p,_,T){var I=s(d.element);return v1(I,d,p,_,T)}}function A(s,d){return S(ub(s,d))}function z(s,d){return S(ub(d,s))}function Y(s){return function(d,p,_,T){return v1(s,d,p,_,T)}}function ae(s){return!((d=s.dom).offsetWidth<=0&&d.offsetHeight<=0);var d}function ce(s,d,p){var _,T=ln(Qs(s,p),ae);return Tr(_=T,function(I){return Sn(I,d)}).map(function(I){return{index:I,candidates:_}})}function ke(s,d){return Tr(s,function(p){return Sn(d,p)})}function Pe(s,d,p,_){return _(Math.floor(d/p),d%p).bind(function(T){var I=T.row*p+T.column;return 0<=I&&I<s.length?X.some(s[I]):X.none()})}function Ye(s,d,p,_,T){return Pe(s,d,_,function(I,R){var W=tc(R,T,0,(I===p-1?s.length-I*_:_)-1);return X.some({row:I,column:W})})}function tt(s,d,p,_,T){return Pe(s,d,_,function(I,R){var H=tc(I,T,0,p-1),ee=Hu(R,0,(H===p-1?s.length-H*_:_)-1);return X.some({row:H,column:ee})})}function ft(s,d,p){ra(s.element,d.selector).each(function(_){d.focusManager.set(s,_)})}function mt(s){return function(d,p,_,T){return ce(d,p,_.selector).bind(function(I){return s(I.candidates,I.index,T.getNumRows().getOr(_.initSize.numRows),T.getNumColumns().getOr(_.initSize.numColumns))})}}function dt(s,d,p){return p.captureTab?X.some(!0):X.none()}function Et(s,d,p,_){var T=function(I,R,H){var W,ee=tc(R,_,0,H.length-1);return ee===I?X.none():"button"===tn(W=H[ee])&&"disabled"===vi(W,"disabled")?T(I,ee,H):X.from(H[ee])};return ce(s,p,d).bind(function(I){var R=I.index;return T(R,R,I.candidates)})}function wt(s,d,p){return(_=p).focusManager.get(s).bind(function(T){return ec(T,_.selector)}).bind(function(T){return p.execute(s,d,T)});var _}function Ut(s,d,p){d.getInitial(s).orThunk(function(){return ra(s.element,d.selector)}).each(function(_){d.focusManager.set(s,_)})}function Qt(s,d,p){return Et(s,p.selector,d,-1)}function _t(s,d,p){return Et(s,p.selector,d,1)}function Ft(s){return function(d,p,_,T){return s(d,p,_,T).bind(function(){return _.executeOnMove?wt(d,p,_):X.some(!0)})}}function Mn(s,d,p){return p.onEscape(s,d)}function Tt(s,d,p){return X.from(s[d]).bind(function(_){return X.from(_[p]).map(function(T){return{rowIndex:d,columnIndex:p,cell:T}})})}function Dn(s,d,p,_){return Tt(s,d,tc(p,_,0,s[d].length-1))}function rn(s,d,p,_){var T=tc(p,_,0,s.length-1);return Tt(s,T,Hu(d,0,s[T].length-1))}function pr(s,d,p,_){return Tt(s,d,Hu(p+_,0,s[d].length-1))}function En(s,d,p,_){var T=Hu(p+_,0,s.length-1);return Tt(s,T,Hu(d,0,s[T].length-1))}function _r(s,d,p){d.previousSelector(s).orThunk(function(){return ra(s.element,d.selectors.cell)}).each(function(_){d.focusManager.set(s,_)})}function Fr(s,d){return function(p,_,T){var I=T.cycles?s:d;return ec(_,T.selectors.row).bind(function(R){return ke(Qs(R,T.selectors.cell),_).bind(function(H){var W=Qs(p,T.selectors.row);return ke(W,R).bind(function(ee){var ue,he=(ue=T,Ot(W,function(we){return Qs(we,ue.selectors.cell)}));return I(he,ee,H).map(function(we){return we.cell})})})})}}function Nr(s,d,p){return p.focusManager.get(s).bind(function(_){return p.execute(s,d,_)})}function oo(s,d,p){ra(s.element,d.selector).each(function(_){d.focusManager.set(s,_)})}function So(s,d,p){return Et(s,p.selector,d,-1)}function Yr(s,d,p){return Et(s,p.selector,d,1)}function Oo(s,d,p,_){var T=s.getSystem().build(_);u1(s,T,p)}function ti(s,d,p,_){wo(Q0(s),function(T){return Sn(_.element,T.element)}).each(kf)}function $i(s,d,p,_,T){var I=Q0(s);return X.from(I[_]).map(function(R){return ti(s,0,0,R),T.each(function(H){Oo(s,0,function(W,ee){var ue,he=ee;Xr(ue=W,_).fold(function(){ta(ue,he)},function(we){xd(we,he)})},H)}),R})}function Kn(s,d){var p,_;return{key:s,value:{config:{},me:(p=s,_=Qo(d),yi({fields:[bn("enabled")],name:p,active:{events:F(_)}})),configAsRaw:F({}),initialConfig:{},state:$l}}}function Si(s,d){d.ignore||(rd(s.element),d.onFocus(s))}function zo(s,d,p){var _=d.aria;_.update(s,_,p.get())}function qo(s,d,p){d.toggleClass.each(function(_){(p.get()?Qa:_i)(s.element,_)})}function Da(s,d,p){Uu(s,d,p,!p.get())}function da(s,d,p){p.set(!0),qo(s,d,p),zo(s,d,p)}function Ii(s,d,p){p.set(!1),qo(s,d,p),zo(s,d,p)}function io(s,d,p){Uu(s,d,p,d.selected)}function Bc(){function s(d,p){p.stop(),Md(d)}return[mn(iu(),s),mn(bf(),s),Dd(Zs()),Dd(Kl())]}function fa(s){return Qo(Gr([s.map(function(d){return zs(function(p,_){d(p),_.stop()})}).toArray(),Bc()]))}function Gi(s){(od(s.element).isNone()||eo.isFocused(s))&&(eo.isFocused(s)||eo.focus(s),kr(s,Nk,{item:s}))}function Z0(s){kr(s,WS,{item:s})}function Zd(s,d){return s.x+s.width/2-d.width/2}function eu(s,d){return s.x+s.width-d.width}function Ts(s,d){return s.y+s.height-d.height}function dp(s,d){return s.y+s.height/2-d.height/2}function gu(s,d,p){return Ks(eu(s,d),Ts(s,d),p.insetSouthwest(),_0(),"southwest",wi(s,{right:0,bottom:3}),uh)}function em(s,d,p){return Ks(s.x,Ts(s,d),p.insetSoutheast(),sv(),"southeast",wi(s,{left:1,bottom:3}),uh)}function Af(s,d,p){return Ks(eu(s,d),s.y,p.insetNorthwest(),Ig(),"northwest",wi(s,{right:0,top:2}),uh)}function K0(s,d,p){return Ks(s.x,s.y,p.insetNortheast(),av(),"northeast",wi(s,{left:1,top:2}),uh)}function m1(s,d,p){return Ks(eu(s,d),dp(s,d),p.insetEast(),uv(),"east",wi(s,{right:0}),uh)}function kb(s,d,p){return Ks(s.x,dp(s,d),p.insetWest(),Jf(),"west",wi(s,{left:1}),uh)}function Z_(s){switch(s){case"north":return Kd;case"northeast":return K0;case"northwest":return Af;case"south":return ty;case"southeast":return em;case"southwest":return gu;case"east":return m1;case"west":return kb}}function Tb(s,d,p,_,T){return jm(_).map(Z_).getOr(Kd)(s,d,p,_,T)}function IS(s){switch(s){case"north":return ty;case"northeast":return em;case"northwest":return gu;case"south":return Kd;case"southeast":return K0;case"southwest":return Af;case"east":return kb;case"west":return m1}}function K_(s,d,p,_,T){return jm(_).map(IS).getOr(Kd)(s,d,p,_,T)}function ui(s){var d=void 0!==s.uid&&qr(s,"uid")?s.uid:Tl("memento");return{get:function(p){return p.getSystem().getByUid(d).getOrDie()},getOpt:function(p){return p.getSystem().getByUid(d).toOptional()},asSpec:function(){return de(de({},s),{uid:d})}}}function OS(s){return function(){return sn(s,US).getOr("!not found!")}}function p1(s,d){var p,_=s.toLowerCase();if(ic.isRtl()){var T=rt(p=_,"-rtl")?p:p+"-rtl";return ir(d,T)?T:_}return _}function ES(s,d){return sn(d,p1(s,d))}function Mb(s,d){var p=d();return ES(s,p).getOrThunk(OS(p))}function Sk(){return Kn("add-focusable",[Xi(function(s){var _;_=function(T){return or(T,"svg")},wo(s.element.dom.childNodes,function(T){return _(ct.fromDom(T))}).map(ct.fromDom).each(function(T){return Ir(T,"focusable","false")})})])}function Ck(s,d,p,_){var T,I,R,H=(R=d,ic.isRtl()&&ir(Lk,R)?["tox-icon--flip"]:[]),W=sn(p,p1(d,p)).or(_).getOrThunk(OS(p));return{dom:{tag:s.tag,attributes:null!==(T=s.attributes)&&void 0!==T?T:{},classes:s.classes.concat(H),innerHtml:W},behaviours:Ln(le(le([],null!==(I=s.behaviours)&&void 0!==I?I:[],!0),[Sk()],!1))}}function ah(s,d,p,_){return void 0===_&&(_=X.none()),Ck(d,s,p(),_)}function Uu(s,d,p,_){(_?da:Ii)(s,d,p)}function ho(s,d,p){Ir(s.element,"aria-expanded",p)}function PS(s){return"prepared"===s.type?X.some(s.menu):X.none()}(oc=op=op||{}).OnFocusMode="onFocus",oc.OnEnterOrSpaceMode="onEnterOrSpace",oc.OnApiMode="onApi";var BM=Y_(Su("cyclic",qe)),zM=Y_(Su("cyclic",$e)),tm=oa([It("execute",Qg),It("useSpace",!1),It("useEnter",!0),It("useControlEnter",!1),It("useDown",!1)],$l.init,function(s,d,p,_){var T=p.useSpace&&!ud(s.element)?ul:[],R=p.useDown?tg:[];return[fo(Ao(T.concat(p.useEnter?hu:[]).concat(R)),ih)].concat(p.useControlEnter?[fo(cd([pb,Ao(hu)]),ih)]:[])},function(s,d,p,_){return p.useSpace&&!ud(s.element)?[fo(Ao(ul),cp)]:[]},function(){return X.none()}),Db=Object.freeze({__proto__:null,flatgrid:Yd,init:function(s){return s.state(s)}}),v1=function(s,d,p,_,T){return _.focusManager.get(d).bind(function(I){return s(d.element,I,_,T)}).map(function(I){return _.focusManager.set(d,I),!0})},Ab=Y,NS=Y,$_=Y,Ib=mt(function(s,d,p,_){return Ye(s,d,p,_,-1)}),kk=mt(function(s,d,p,_){return Ye(s,d,p,_,1)}),Tk=mt(function(s,d,p,_){return tt(s,d,p,_,-1)}),RS=mt(function(s,d,p,_){return tt(s,d,p,_,1)}),Ob=oa([bn("selector"),It("execute",Qg),Vu("onEscape"),It("captureTab",!1),iv()],Yd,F([fo(Ao(Ov),A(Ib,kk)),fo(Ao(eg),z(Ib,kk)),fo(Ao(Ev),Ab(Tk)),fo(Ao(tg),NS(RS)),fo(cd([tp,Ao(Df)]),dt),fo(cd([lp,Ao(Df)]),dt),fo(Ao(Iv),function(s,d,p){return p.onEscape(s,d)}),fo(Ao(ul.concat(hu)),function(s,d,p,_){return(T=p).focusManager.get(s).bind(function(I){return ec(I,T.selector)}).bind(function(I){return p.execute(s,d,I)});var T})]),F([fo(Ao(ul),cp)]),function(){return X.some(ft)}),ED=[bn("selector"),It("getInitial",X.none),It("execute",Qg),Vu("onEscape"),It("executeOnMove",!1),It("allowVertical",!0)],FM=F([fo(Ao(ul),cp)]),$0=oa(ED,$l.init,function(s,d,p,_){var T=Ov.concat(p.allowVertical?Ev:[]),I=eg.concat(p.allowVertical?tg:[]);return[fo(Ao(T),Ft(A(Qt,_t))),fo(Ao(I),Ft(z(Qt,_t))),fo(Ao(hu),wt),fo(Ao(ul),wt),fo(Ao(Iv),Mn)]},FM,function(){return X.some(Ut)}),Mk=[xl("selectors",[bn("row"),bn("cell")]),It("cycles",!0),It("previousSelector",X.none),It("execute",Qg)],nm=Fr(function(s,d,p){return Dn(s,d,p,-1)},function(s,d,p){return pr(s,d,p,-1)}),y1=Fr(function(s,d,p){return Dn(s,d,p,1)},function(s,d,p){return pr(s,d,p,1)}),Pv=Fr(function(s,d,p){return rn(s,p,d,-1)},function(s,d,p){return En(s,p,d,-1)}),Au=Fr(function(s,d,p){return rn(s,p,d,1)},function(s,d,p){return En(s,p,d,1)}),b1=F([fo(Ao(Ov),A(nm,y1)),fo(Ao(eg),z(nm,y1)),fo(Ao(Ev),Ab(Pv)),fo(Ao(tg),NS(Au)),fo(Ao(ul.concat(hu)),function(s,d,p){return od(s.element).bind(function(_){return p.execute(s,d,_)})})]),VM=F([fo(Ao(ul),cp)]),J_=oa(Mk,$l.init,b1,VM,function(){return X.some(_r)}),Dk=[bn("selector"),It("execute",Qg),It("moveOnTab",!1)],Ak=F([fo(Ao(Ev),$_(So)),fo(Ao(tg),$_(Yr)),fo(cd([tp,Ao(Df)]),function(s,d,p,_){return p.moveOnTab?$_(So)(s,d,p,_):X.none()}),fo(cd([lp,Ao(Df)]),function(s,d,p,_){return p.moveOnTab?$_(Yr)(s,d,p,_):X.none()}),fo(Ao(hu),Nr),fo(Ao(ul),Nr)]),Ik=F([fo(Ao(ul),cp)]),LS=oa(Dk,$l.init,Ak,Ik,function(){return X.some(oo)}),Ok=oa([Vu("onSpace"),Vu("onEnter"),Vu("onShiftEnter"),Vu("onLeft"),Vu("onRight"),Vu("onTab"),Vu("onShiftTab"),Vu("onUp"),Vu("onDown"),Vu("onEscape"),It("stopSpaceKeyup",!1),Xo("focusIn")],$l.init,function(s,d,p){return[fo(Ao(ul),p.onSpace),fo(cd([lp,Ao(hu)]),p.onEnter),fo(cd([tp,Ao(hu)]),p.onShiftEnter),fo(cd([tp,Ao(Df)]),p.onShiftTab),fo(cd([lp,Ao(Df)]),p.onTab),fo(Ao(Ev),p.onUp),fo(Ao(tg),p.onDown),fo(Ao(Ov),p.onLeft),fo(Ao(eg),p.onRight),fo(Ao(ul),p.onSpace),fo(Ao(Iv),p.onEscape)]},function(s,d,p){return p.stopSpaceKeyup?[fo(Ao(ul),cp)]:[]},function(s){return s.focusIn}),HM=BM.schema(),WM=zM.schema(),J0=$0.schema(),ng=Ob.schema(),Ek=J_.schema(),BS=tm.schema(),Q_=LS.schema(),zS=Ok.schema(),Rr=Mg({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:HM,cyclic:WM,flow:J0,flatgrid:ng,matrix:Ek,execution:BS,menu:Q_,special:zS}),name:"keying",active:{events:function(s,d){return s.handler.toEvents(s,d)}},apis:{focusIn:function(s,d,p){d.sendFocusIn(d).fold(function(){s.getSystem().triggerFocus(s.element,s.element)},function(_){_(s,d,p)})},setGridSize:function(s,d,p,_,T){qr(p,"setGridSize")?p.setGridSize(_,T):console.error("Layout does not support setGridSize")}},state:Db}),Q0=function(s,d){return s.components()},no=yi({fields:[],name:"replacing",apis:Object.freeze({__proto__:null,append:function(s,d,p,_){Oo(s,0,ta,_)},prepend:function(s,d,p,_){Oo(s,0,Zu,_)},remove:ti,replaceAt:$i,replaceBy:function(s,d,p,_,T){return Tr(Q0(s),_).bind(function(I){return $i(s,0,0,I,T)})},set:function(s,d,p,_){ob(function(){var T=Ot(_,s.getSystem().build);P0(s,T)},s.element)},contents:Q0})}),FS=Object.freeze({__proto__:null,focus:Si,blur:function(s,d){d.ignore||s.element.dom.blur()},isFocused:function(s){return Wh(s.element)}}),Pk=Object.freeze({__proto__:null,exhibit:function(s,d){return ed(d.ignore?{}:{attributes:{tabindex:"-1"}})},events:function(s){return Qo([mn(na(),function(d,p){Si(d,s),p.stop()})].concat(s.stopMousedown?[mn(Kl(),function(d,p){p.event.prevent()})]:[]))}}),eo=yi({fields:[No("onFocus"),It("stopMousedown",!1),It("ignore",!1)],name:"focusing",active:Pk,apis:FS}),VS=Object.freeze({__proto__:null,onLoad:io,toggle:Da,isOn:function(s,d,p){return p.get()},on:da,off:Ii,set:Uu}),HS=Object.freeze({__proto__:null,exhibit:function(){return ed({})},events:function(s,d){var p,_,T,I=(p=s,_=d,T=Da,zs(function(H){T(H,p,_)})),R=ol(s,d,io);return Qo(Gr([s.toggleOnExecute?[I]:[],[R]]))}}),Ho=yi({fields:[It("selected",!1),Xo("toggleClass"),It("toggleOnExecute",!0),yc("aria",{mode:"none"},Ys("mode",{pressed:[It("syncWithExpanded",!1),Zo("update",function(s,d,p){Ir(s.element,"aria-pressed",p),d.syncWithExpanded&&ho(s,0,p)})],checked:[Zo("update",function(s,d,p){Ir(s.element,"aria-checked",p)})],expanded:[Zo("update",ho)],selected:[Zo("update",function(s,d,p){Ir(s.element,"aria-selected",p)})],none:[Zo("update",j)]}))],name:"toggling",active:HS,apis:VS,state:{init:function(){var s=wr(!1);return{get:function(){return s.get()},set:function(d){return s.set(d)},clear:function(){return s.set(!1)},readState:function(){return s.get()}}}}}),Nk="alloy.item-hover",WS="alloy.item-focus",Rk=F(Nk),GM=F(WS),ll=[bn("data"),bn("components"),bn("dom"),It("hasSubmenu",!1),Xo("toggling"),Yg("itemBehaviours",[Ho,eo,Rr,er]),It("ignoreFocus",!1),It("domModification",{}),Zo("builder",function(s){return{dom:s.dom,domModification:de(de({},s.domModification),{attributes:de(de(de({role:s.toggling.isSome()?"menuitemcheckbox":"menuitem"},s.domModification.attributes),{"aria-haspopup":s.hasSubmenu}),s.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Nc(s.itemBehaviours,[s.toggling.fold(Ho.revoke,function(d){return Ho.config(de({aria:{mode:"checked"}},d))}),eo.config({ignore:s.ignoreFocus,stopMousedown:s.ignoreFocus,onFocus:function(d){Z0(d)}}),Rr.config({mode:"execution"}),er.config({store:{mode:"memory",initialValue:s.data}}),Kn("item-type-events",le(le([],Bc(),!0),[mn(td(),Gi),mn(Bs(),eo.focus)],!1))]),components:s.components,eventOrder:s.eventOrder}}),It("eventOrder",{})],GS=[bn("dom"),bn("components"),Zo("builder",function(s){return{dom:s.dom,components:s.components,events:Qo([mn(Bs(),function(d,p){p.stop()})])}})],x1=F("item-widget"),ey=F([du({name:"widget",overrides:function(s){return{behaviours:Ln([er.config({store:{mode:"manual",getValue:function(d){return s.data},setValue:j}})])}}})]),Eb=Ys("type",{widget:[bn("uid"),bn("data"),bn("components"),bn("dom"),It("autofocus",!1),It("ignoreFocus",!1),Yg("widgetBehaviours",[er,eo,Rr]),It("domModification",{}),Wu(ey()),Zo("builder",function(s){function d(I){return Bo(I,s,"widget").map(function(R){return Rr.focusIn(R),R})}function p(I,R){return ud(R.event.target)||s.autofocus&&R.setSource(I.element),X.none()}var _=B0(x1(),s,ey()),T=jd(x1(),s,_.internals());return{dom:s.dom,components:T,domModification:s.domModification,events:Qo([zs(function(I,R){d(I).each(function(H){R.stop()})}),mn(td(),Gi),mn(Bs(),function(I,R){s.autofocus?d(I):eo.focus(I)})]),behaviours:Nc(s.widgetBehaviours,[er.config({store:{mode:"memory",initialValue:s.data}}),eo.config({ignore:s.ignoreFocus,onFocus:function(I){Z0(I)}}),Rr.config({mode:"special",focusIn:s.autofocus?function(I){d(I)}:ib(),onLeft:p,onRight:p,onEscape:function(I,R){return eo.isFocused(I)||s.autofocus?(s.autofocus&&R.setSource(I.element),X.none()):(eo.focus(I),X.some(!0))}})])}})],item:ll,separator:GS}),PD=F([Jg({factory:{sketch:function(s){var d=bs("menu.spec item",Eb,s);return d.builder(d)}},name:"items",unit:"item",defaults:function(s,d){return ir(d,"uid")?d:de(de({},d),{uid:Tl("item")})},overrides:function(s,d){return{type:d.type,ignoreFocus:s.fakeFocus,domModification:{classes:[s.markers.item]}}}})]),ND=F([bn("value"),bn("items"),bn("dom"),bn("components"),It("eventOrder",{}),ns("menuBehaviours",[ko,er,Io,Rr]),yc("movement",{mode:"menu",moveOnTab:!0},Ys("mode",{grid:[iv(),Zo("config",function(s,d){return{mode:"flatgrid",selector:"."+s.markers.item,initSize:{numColumns:d.initSize.numColumns,numRows:d.initSize.numRows},focusManager:s.focusManager}})],matrix:[Zo("config",function(s,d){return{mode:"matrix",selectors:{row:d.rowSelector,cell:"."+s.markers.item},focusManager:s.focusManager}}),bn("rowSelector")],menu:[It("moveOnTab",!0),Zo("config",function(s,d){return{mode:"menu",selector:"."+s.markers.item,moveOnTab:d.moveOnTab,focusManager:s.focusManager}})]})),Bu("markers",z_()),It("fakeFocus",!1),It("focusManager",np()),No("onHighlight")]),Pb=F("alloy.menu-focus"),sh=Xa({name:"Menu",configFields:ND(),partFields:PD(),factory:function(s,d,p,_){return{uid:s.uid,dom:s.dom,markers:s.markers,behaviours:ja(s.menuBehaviours,[ko.config({highlightClass:s.markers.selectedItem,itemClass:s.markers.item,onHighlight:s.onHighlight}),er.config({store:{mode:"memory",initialValue:s.value}}),Io.config({find:X.some}),Rr.config(s.movement.config(s,s.movement))]),events:Qo([mn(GM(),function(T,I){var R=I.event;T.getSystem().getByDom(R.target).each(function(H){ko.highlight(T,H),I.stop(),kr(T,Pb(),{menu:T,item:H})})}),mn(Rk(),function(T,I){ko.highlight(T,I.event.item)})]),components:d,eventOrder:s.eventOrder,domModification:{attributes:{role:"menu"}}}}}),_1=function(s,d,p,_){return sn(p,_).bind(function(T){return sn(s,T).bind(function(I){var R=_1(s,d,p,I);return X.some([I].concat(R))})}).getOr([])},om=PS,im=F("collapse-item"),fp=qa({name:"TieredMenu",configFields:[Vo("onExecute"),Vo("onEscape"),Hm("onOpenMenu"),Hm("onOpenSubmenu"),No("onRepositionMenu"),No("onCollapseMenu"),It("highlightImmediately",!0),xl("data",[bn("primary"),bn("menus"),bn("expansions")]),It("fakeFocus",!1),No("onHighlight"),No("onHover"),ku(),bn("dom"),It("navigateOnHover",!0),It("stayInDom",!1),ns("tmenuBehaviours",[Rr,ko,Io,no]),It("eventOrder",{})],apis:{collapseMenu:function(s,d){s.collapseMenu(d)},highlightPrimary:function(s,d){s.highlightPrimary(d)},repositionMenus:function(s,d){s.repositionMenus(d)}},factory:function(s,d){function _(De){return er.getValue(De).value}function T(De,Ue){ko.highlight(De,Ue),ko.getHighlighted(Ue).orThunk(function(){return ko.getFirst(Ue)}).each(function(at){Eh(De,at.element,Bs())})}function I(De,Ue){return Eo(Ot(Ue,function(at){return De.lookupMenu(at).bind(function(gt){return"prepared"===gt.type?X.some(gt.menu):X.none()})}))}function R(De,Ue,at){var gt=I(Ue,Ue.otherMenus(at));ur(gt,function(Xt){_c(Xt.element,[s.markers.backgroundMenu]),s.stayInDom||no.remove(De,Xt)})}function H(De,Ue){var at;jt((at=De,he.get().getOrThunk(function(){var gt={},Xt=ln(Qs(at.element,"."+s.markers.item),function(Lt){return"true"===vi(Lt,"aria-haspopup")});return ur(Xt,function(Lt){at.getSystem().getByDom(Lt).each(function(nn){var _n=_(nn);gt[_n]=nn})}),he.set(gt),gt})),function(gt,Xt){var Lt=ki(Ue,Xt);Ir(gt.element,"aria-expanded",Lt)})}function W(De,Ue,at){return X.from(at[0]).bind(function(gt){return Ue.lookupMenu(gt).bind(function(Xt){if("notbuilt"===Xt.type)return X.none();var Lt=Xt.menu,nn=I(Ue,at.slice(1));return ur(nn,function(_n){Qa(_n.element,s.markers.backgroundMenu)}),ys(Lt.element)||no.append(De,Ql(Lt)),_c(Lt.element,[s.markers.backgroundMenu]),T(De,Lt),R(De,Ue,at),X.some(Lt)})})}var ee,ue,he=Ai(),we=function(){function s(W){return H(W).bind(PS)}function d(W){return sn(p.get(),W)}var p=wr({}),_=wr({}),T=wr({}),I=Ai(),R=wr({}),H=function(W){return sn(_.get(),W)};return{setMenuBuilt:function(W,ee){var ue;_.set(de(de({},_.get()),((ue={})[W]={type:"prepared",menu:ee},ue)))},setContents:function(W,ee,ue,he){I.set(W),p.set(ue),_.set(ee),R.set(he);var we=function(Te,Le){var Re={};jt(Te,function(De,Ue){ur(De,function(at){Re[at]=Ue})});var Be=Le,He=dc(Le,function(De,Ue){return{k:De,v:Ue}}),Xe=yn(He,function(De,Ue){return[Ue].concat(_1(Re,Be,He,Ue))});return yn(Re,function(De){return sn(Xe,De).getOr([De])})}(he,ue);T.set(we)},expand:function(W){return sn(p.get(),W).map(function(ee){var ue=sn(T.get(),W).getOr([]);return[ee].concat(ue)})},refresh:function(W){return sn(T.get(),W)},collapse:function(W){return sn(T.get(),W).bind(function(ee){return 1<ee.length?X.some(ee.slice(1)):X.none()})},lookupMenu:H,lookupItem:d,otherMenus:function(W){var ee=R.get();return ai(pi(ee),W)},getPrimary:function(){return I.get().bind(s)},getMenus:function(){return _.get()},clear:function(){p.set({}),_.set({}),T.set({}),I.clear()},isClear:function(){return I.get().isNone()},getTriggeringPath:function(W,ee){var ue=ln(d(W).toArray(),function(he){return s(he).isSome()});return sn(T.get(),W).bind(function(he){var we=rr(ue.concat(he));return function(Te){for(var Le=[],Re=0;Re<Te.length;Re++){var Be=Te[Re];if(!Be.isSome())return X.none();Le.push(Be.getOrDie())}return X.some(Le)}(Or(we,function(Te,Le){return Re=Te,Be=ee,He=we.slice(0,Le+1),s(Re).bind(function(Xe){return De=Re,cr(p.get(),function(Ue,at){return Ue===De}).bind(function(Ue){return Be(Ue).map(function(at){return{triggeredMenu:Xe,triggeringItem:at,triggeringPath:He}})});var De}).fold(function(){return fr(I.get(),Te)?[]:[X.none()]},function(Xe){return[X.some(Xe)]});var Re,Be,He}))})}}}();function Te(De,Ue,at){if(void 0===at&&(at=ee.HighlightSubmenu),Ue.hasConfigured(xr)&&xr.isDisabled(Ue))return X.some(Ue);var gt=_(Ue);return we.expand(gt).bind(function(Xt){return H(De,Xt),X.from(Xt[0]).bind(function(Lt){return we.lookupMenu(Lt).bind(function(nn){var _n=function(an,kn,Vn){if("notbuilt"!==Vn.type)return Vn.menu;var sr=an.getSystem().build(Vn.nbMenu());return we.setMenuBuilt(kn,sr),sr}(De,Lt,nn);return ys(_n.element)||no.append(De,Ql(_n)),s.onOpenSubmenu(De,Ue,_n,rr(Xt)),at===ee.HighlightSubmenu?(ko.highlightFirst(_n),W(De,we,Xt)):(ko.dehighlightAll(_n),X.some(Ue))})})})}function Le(De,Ue){var at=_(Ue);return we.collapse(at).bind(function(gt){return H(De,gt),W(De,we,gt).map(function(Xt){return s.onCollapseMenu(De,Ue,Xt),Xt})})}function Re(De){return function(Ue,at){return ec(at.getSource(),"."+s.markers.item).bind(function(gt){return Ue.getSystem().getByDom(gt).toOptional().bind(function(Xt){return De(Ue,Xt).map($e)})})}}function Be(De){return ko.getHighlighted(De).bind(ko.getHighlighted)}(ue=ee={})[ue.HighlightSubmenu=0]="HighlightSubmenu",ue[ue.HighlightParent=1]="HighlightParent";var He=Qo([mn(Pb(),function(De,Ue){we.lookupItem(_(Ue.event.item)).each(function(){ko.highlight(De,Ue.event.menu);var Xt=_(Ue.event.item);we.refresh(Xt).each(function(Lt){return R(De,we,Lt)})})}),zs(function(De,Ue){var at=Ue.event.target;De.getSystem().getByDom(at).each(function(gt){0===_(gt).indexOf("collapse-item")&&Le(De,gt),Te(De,gt,ee.HighlightSubmenu).fold(function(){s.onExecute(De,gt)},j)})}),Xi(function(De,Ue){(function p(De){var Ue,at,gt=(Ue=De,at=s.data.primary,yn(s.data.menus,function(Lt,nn){function _n(){return sh.sketch(de(de({},Lt),{value:nn,markers:s.markers,fakeFocus:s.fakeFocus,onHighlight:s.onHighlight,focusManager:(s.fakeFocus?Ec:np)()}))}return nn===at?{type:"prepared",menu:Ue.getSystem().build(_n())}:{type:"notbuilt",nbMenu:_n}})),Xt=yn(s.data.menus,function(Lt,nn){return Or(Lt.items,function(_n){return"separator"===_n.type?[]:[_n.data.value]})});return we.setContents(s.data.primary,gt,s.data.expansions,Xt),we.getPrimary()})(De).each(function(at){no.append(De,Ql(at)),s.onOpenMenu(De,at),s.highlightImmediately&&T(De,at)})})].concat(s.navigateOnHover?[mn(Rk(),function(De,Ue){var at=Ue.event.item,gt=De,Xt=_(at);we.refresh(Xt).bind(function(Lt){return H(gt,Lt),W(gt,we,Lt)}),Te(De,at,ee.HighlightParent),s.onHover(De,at)})]:[])),Xe={collapseMenu:function(De){Be(De).each(function(Ue){Le(De,Ue)})},highlightPrimary:function(De){we.getPrimary().each(function(Ue){T(De,Ue)})},repositionMenus:function(De){we.getPrimary().bind(function(Ue){return Be(De).bind(function(at){var gt=_(at),Xt=Eo(Ot(tr(we.getMenus()),om));return we.getTriggeringPath(gt,function(Lt){return nn=Lt,Gt(Xt,function(_n){return _n.getSystem().isConnected()?wo(ko.getCandidates(_n),function(an){return _(an)===nn}):X.none()});var nn})}).map(function(at){return{primary:Ue,triggeringPath:at}})}).fold(function(){X.from(De.components()[0]).filter(function(Ue){return"menu"===vi(Ue.element,"role")}).each(function(Ue){s.onRepositionMenu(De,Ue,[])})},function(Ue){s.onRepositionMenu(De,Ue.primary,Ue.triggeringPath)})}};return{uid:s.uid,dom:s.dom,markers:s.markers,behaviours:ja(s.tmenuBehaviours,[Rr.config({mode:"special",onRight:Re(function(De,Ue){return ud(Ue.element)?X.none():Te(De,Ue,ee.HighlightSubmenu)}),onLeft:Re(function(De,Ue){return ud(Ue.element)?X.none():Le(De,Ue)}),onEscape:Re(function(De,Ue){return Le(De,Ue).orThunk(function(){return s.onEscape(De,Ue).map(function(){return De})})}),focusIn:function(De,Ue){we.getPrimary().each(function(at){Eh(De,at.element,Bs())})}}),ko.config({highlightClass:s.markers.selectedMenu,itemClass:s.markers.menu}),Io.config({find:function(De){return ko.getHighlighted(De)}}),no.config({})]),eventOrder:s.eventOrder,apis:Xe,events:He}},extraApis:{tieredData:function(s,d,p){return{primary:s,menus:d,expansions:p}},singleData:function(s,d){return{primary:s,menus:bc(s,d),expansions:{}}},collapseItem:function(s){return{value:Sr(im()),meta:{text:s}}}}}),Ui=qa({name:"InlineView",configFields:[bn("lazySink"),No("onShow"),No("onHide"),Dh("onEscape"),ns("inlineBehaviours",[po,er,nc]),Ri("fireDismissalEventInstead",[It("event",Sg())]),Ri("fireRepositionEventInstead",[It("event",Ga())]),It("getRelated",X.none),It("isExtraPart",qe),It("eventOrder",X.none)],factory:function(s,d){function p(H){po.isOpen(H)&&er.getValue(H).each(function(W){switch(W.mode){case"menu":po.getState(H).each(fp.repositionMenus);break;case"position":var ee=s.lazySink(H).getOrDie();Gu.positionWithinBounds(ee,H,W.config,W.getBounds())}})}function _(H,W,ee,ue){I(H,W,ee,function(){return ue.map(function(he){return Lu(he)})})}function T(H,W,ee,ue){var he,we,Te,Le,Re,Be=(he=s,we=H,Te=W,Le=ue,Re="horizontal"===ee.type?{layouts:{onLtr:Tg,onRtl:Al}}:{},fp.sketch({dom:{tag:"div"},data:ee.data,markers:ee.menu.markers,highlightImmediately:ee.menu.highlightImmediately,onEscape:function(){return po.close(we),he.onEscape.map(function(De){return De(we)}),X.some(!0)},onExecute:function(){return X.some(!0)},onOpenMenu:function(De,Ue){Gu.positionWithinBounds(He().getOrDie(),Ue,Te,Le())},onOpenSubmenu:function(De,Ue,at,gt){var Xt=He().getOrDie();Gu.position(Xt,at,{anchor:de({type:"submenu",item:Ue},Xe(gt))})},onRepositionMenu:function(De,Ue,at){var gt=He().getOrDie();Gu.positionWithinBounds(gt,Ue,Te,Le()),ur(at,function(Xt){var Lt=Xe(Xt.triggeringPath);Gu.position(gt,Xt.triggeredMenu,{anchor:de({type:"submenu",item:Xt.triggeringItem},Lt)})})}}));function He(){return he.lazySink(we)}function Xe(De){return 2===De.length?Re:{}}po.open(H,Be),er.setValue(H,X.some({mode:"menu",menu:Be}))}var I=function(H,W,ee,ue){var he=s.lazySink(H).getOrDie();po.openWhileCloaked(H,W,function(){return Gu.positionWithinBounds(he,H,ee,ue())}),er.setValue(H,X.some({mode:"position",config:ee,getBounds:ue}))},R={setContent:function(H,W){po.setContent(H,W)},showAt:function(H,W,ee){_(H,W,ee,X.none())},showWithin:_,showWithinBounds:I,showMenuAt:function(H,W,ee){T(H,W,ee,X.none)},showMenuWithinBounds:T,hide:function(H){po.isOpen(H)&&(er.setValue(H,X.none()),po.close(H))},getContent:function(H){return po.getState(H)},reposition:p,isOpen:po.isOpen};return{uid:s.uid,dom:s.dom,behaviours:ja(s.inlineBehaviours,[po.config({isPartOf:function(H,W,ee){return tl(W,ee)||(ue=ee,s.getRelated(H).exists(function(he){return tl(he,ue)}));var ue},getAttachPoint:function(H){return s.lazySink(H).getOrDie()},onOpen:function(H){s.onShow(H)},onClose:function(H){s.onHide(H)}}),er.config({store:{mode:"memory",initialValue:X.none()}}),nc.config({channels:de(de({},Du(de({isExtraPart:d.isExtraPart},s.fireDismissalEventInstead.map(function(H){return{fireEventInstead:{event:H.event}}}).getOr({})))),Yh(de(de({},s.fireRepositionEventInstead.map(function(H){return{fireEventInstead:{event:H.event}}}).getOr({})),{doReposition:p})))})]),eventOrder:s.eventOrder,apis:R}},apis:{showAt:function(s,d,p,_){s.showAt(d,p,_)},showWithin:function(s,d,p,_,T){s.showWithin(d,p,_,T)},showWithinBounds:function(s,d,p,_,T){s.showWithinBounds(d,p,_,T)},showMenuAt:function(s,d,p,_){s.showMenuAt(d,p,_)},showMenuWithinBounds:function(s,d,p,_,T){s.showMenuWithinBounds(d,p,_,T)},hide:function(s,d){s.hide(d)},isOpen:function(s,d){return s.isOpen(d)},getContent:function(s,d){return s.getContent(d)},setContent:function(s,d,p){s.setContent(d,p)},reposition:function(s,d){s.reposition(d)}}}),uh="layout-inset",Kd=function(s,d,p){return Ks(Zd(s,d),s.y,p.insetNorth(),w0(),"north",wi(s,{top:2}),uh)},ty=function(s,d,p){return Ks(Zd(s,d),Ts(s,d),p.insetSouth(),Gm(),"south",wi(s,{bottom:3}),uh)},hp=tinymce.util.Tools.resolve("tinymce.util.Delay"),Iu=qa({name:"Button",factory:function(s){function d(T){return sn(s.dom,"attributes").bind(function(I){return sn(I,T)})}var p=fa(s.action),_=s.dom.tag;return{uid:s.uid,dom:s.dom,components:s.components,events:p,behaviours:Nc(s.buttonBehaviours,[eo.config({}),Rr.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function(){if("button"!==_)return{role:d("role").getOr("button")};var T=d("type").getOr("button"),I=d("role").map(function(R){return{role:R}}).getOr({});return de({type:T},I)}()},eventOrder:s.eventOrder}},configFields:[It("uid",void 0),bn("dom"),It("components",[]),Yg("buttonBehaviours",[eo,Rr]),Xo("action"),Xo("role"),It("eventOrder",{})]}),ic=tinymce.util.Tools.resolve("tinymce.util.I18n"),Lk={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},US="temporary-placeholder",jS={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},ew=qa({name:"Notification",factory:function(s){function d(Te){return{dom:{tag:"div",classes:["tox-bar"],attributes:{style:"width: "+Te+"%"}}}}function p(Te){return{dom:{tag:"div",classes:["tox-text"],innerHtml:Te+"%"}}}var _,T,I,R,H=ui({dom:{tag:"p",innerHtml:s.translationProvider(s.text)},behaviours:Ln([no.config({})])}),W=ui({dom:{tag:"div",classes:s.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[d(0)]},p(0)],behaviours:Ln([no.config({})])}),ee={updateProgress:function(Te,Le){Te.getSystem().isConnected()&&W.getOpt(Te).each(function(Re){no.set(Re,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[d(Le)]},p(Le)])})},updateText:function(Te,Le){var Re;Te.getSystem().isConnected()&&(Re=H.get(Te),no.set(Re,[Zl(Le)]))}},ue=Gr([s.icon.toArray(),s.level.toArray(),s.level.bind(function(Te){return X.from(jS[Te])}).toArray()]),he=ui(Iu.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[ah("close",{tag:"div",classes:["tox-icon"],attributes:{"aria-label":s.translationProvider("Close")}},s.iconProvider)],action:function(Te){s.onAction(Te)}})),we=[(_=ue,T={tag:"div",classes:["tox-notification__icon"]},I=s.iconProvider,R=I(),Ck(T,wo(_,function(Te){return ir(R,p1(Te,R))}).getOr(US),R,X.none())),{dom:{tag:"div",classes:["tox-notification__body"]},components:[H.asSpec()],behaviours:Ln([no.config({})])}];return{uid:s.uid,dom:{tag:"div",attributes:{role:"alert"},classes:s.level.map(function(Te){return["tox-notification","tox-notification--in","tox-notification--"+Te]}).getOr(["tox-notification","tox-notification--in"])},behaviours:Ln([eo.config({}),Kn("notification-events",[mn(Nd(),function(Te){he.getOpt(Te).each(eo.focus)})])]),components:we.concat(s.progress?[W.asSpec()]:[]).concat(s.closeButton?[he.asSpec()]:[]),apis:ee}},configFields:[Xo("level"),bn("progress"),bn("icon"),bn("onAction"),bn("text"),bn("iconProvider"),bn("translationProvider"),Ha("closeButton",!0)],apis:{updateProgress:function(s,d,p){s.updateProgress(d,p)},updateText:function(s,d,p){s.updateText(d,p)}}});function tw(s,d){function p(){ne(_)||(clearTimeout(_),_=null)}var _=null;return{cancel:p,throttle:function(){for(var T=[],I=0;I<arguments.length;I++)T[I]=arguments[I];p(),_=setTimeout(function(){_=null,s.apply(null,T)},d)}}}function w1(s,d,p,_,T){var I=C1(s,function(R){return(H=s).isBlock(W=R)||ki(["BR","IMG","HR","INPUT"],W.nodeName)||"false"===H.getContentEditable(W);var H,W});return X.from(I.backwards(d,p,_,T))}function Nb(s){return s.toString().replace(/\u00A0/g," ").replace(/\uFEFF/g,"")}function $d(s){return""!==s&&-1!==" \xa0\f\n\r\t\v".indexOf(s)}function S1(s,d){return s.substring(d.length)}function qS(s,d,p,_){return void 0===_&&(_=0),rw(ct.fromDom(d.startContainer)).fold(function(){return function(T,I,R,H){if(void 0===H&&(H=0),!I.collapsed||3!==I.startContainer.nodeType)return X.none();var W=T.getParent(I.startContainer,T.isBlock)||T.getRoot();return w1(T,I.startContainer,I.startOffset,function(ee,ue,he){return function(we,Te){for(var Le=ue-1;0<=Le;Le--){var Re=we.charAt(Le);if($d(Re))return X.none();if(Re===Te)break}return X.some(Le)}(he,R).getOr(ue)},W).bind(function(ee){var ue=I.cloneRange();if(ue.setStart(ee.container,ee.offset),ue.setEnd(I.endContainer,I.endOffset),ue.collapsed)return X.none();var he=Nb(ue);return 0!==he.lastIndexOf(R)||S1(he,R).length<H?X.none():X.some({text:S1(he,R),range:ue,triggerChar:R})})}(s,d,p,_)},function(T){var I=s.createRng();I.selectNode(T.dom);var R=Nb(I);return X.some({range:I,text:S1(R,p),triggerChar:p})})}function XS(s,d){return{container:s,offset:d}}function nw(s){return Zi("toolbarbutton",zk,s)}function Nv(s){return Zi("ToggleButton",Fk,s)}function Rb(s,d,p,_){void 0===_&&(_={});var T=d(),I=s.selection.getRng().startContainer.nodeValue,R=ln(T.lookupByChar(p.triggerChar),function(W){return p.text.length>=W.minChars&&W.matches.getOrThunk(function(){return ee=s.dom,function(ue){var he=ow(ue.startContainer,ue.startOffset);return!w1(ee,he.container,he.offset,function(we,Te){return 0===Te?-1:Te},ee.getRoot()).filter(function(we){return!$d(we.container.data.charAt(we.offset-1))}).isSome()};var ee})(p.range,I,p.text)});if(0===R.length)return X.none();var H=k1.all(Ot(R,function(W){return W.fetch(p.text,W.maxResults,_).then(function(ee){return{matchText:p.text,items:ee,columns:W.columns,onAction:W.onAction,highlightOn:W.highlightOn}})}));return X.some({lookupData:H,context:p})}var YS,Lb,C1=tinymce.util.Tools.resolve("tinymce.dom.TextSeeker"),rw=function(s){return ec(s,"[data-mce-autocompleter]")},k1=tinymce.util.Tools.resolve("tinymce.util.Promise"),ZS=function(s){if(3===s.nodeType)return XS(s,s.data.length);var d=s.childNodes;return 0<d.length?ZS(d[d.length-1]):XS(s,d.length)},ow=function(s,d){var p=s.childNodes;return 0<p.length&&d<p.length?ow(p[d],0):0<p.length&&1===s.nodeType&&p.length===d?ZS(p[p.length-1]):XS(s,d)},KS=Pr([Cr("type"),bi("text")]),iw=Pr([It("type","autocompleteitem"),It("active",!1),It("disabled",!1),It("meta",{}),Cr("value"),bi("text"),bi("icon")]),Bk=Pr([Cr("type"),Cr("ch"),cs("minChars",1),It("columns",1),cs("maxResults",10),Dh("matches"),xs("fetch"),xs("onAction"),Ah("highlightOn",[],ua)]),am=[Ha("disabled",!1),bi("tooltip"),bi("icon"),bi("text"),Di("onSetup",function(){return j})],zk=Pr([Cr("type"),xs("onAction")].concat(am)),mu=[Ha("active",!1)].concat(am),Fk=Pr(mu.concat([Cr("type"),xs("onAction")])),Vk=[Di("predicate",qe),ql("scope","node",["node","editor"]),ql("position","selection",["node","selection","line"])],Hk=am.concat([It("type","contextformbutton"),It("primary",!1),xs("onAction"),Su("original",U)]),UM=mu.concat([It("type","contextformbutton"),It("primary",!1),xs("onAction"),Su("original",U)]),T1=am.concat([It("type","contextformbutton")]),mp=mu.concat([It("type","contextformtogglebutton")]),rg=Ys("type",{contextformbutton:Hk,contextformtogglebutton:UM}),jM=Pr([It("type","contextform"),Di("initValue",F("")),bi("label"),zu("commands",rg),Ff("launch",Ys("type",{contextformbutton:T1,contextformtogglebutton:mp}))].concat(Vk)),$S=Pr([It("type","contexttoolbar"),Cr("items")].concat(Vk));function Wk(s){return sn(O1,s).getOr(Fb)}function JS(s){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:"color"===s?"tox-swatches":"tox-menu",tieredMenu:"tox-tiered-menu"}}function M1(s){var d=JS(s);return{backgroundMenu:d.backgroundMenu,selectedMenu:d.selectedMenu,menu:d.menu,selectedItem:d.selectedItem,item:Wk(s)}}function QS(s,d,p){return{dom:{tag:"div",classes:Gr([[JS(p).tieredMenu]])},markers:M1(p)}}function eC(s,d){return function(p){return Ot(en(p,d),function(_){return{dom:s,components:_}})}}function qM(s,d){var p=[],_=[];return ur(s,function(T,I){d(T,I)?(0<_.length&&p.push(_),_=[],ir(T.dom,"innerHtml")&&_.push(T)):_.push(T)}),0<_.length&&p.push(_),Ot(p,function(T){return{dom:{tag:"div",classes:["tox-collection__group"]},components:T}})}function ny(s,d){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===s?["tox-collection--list"]:["tox-collection--grid"])},components:[sh.parts.items({preprocess:function(p){return"auto"!==s&&1<s?eC({tag:"div",classes:["tox-collection__group"]},s)(p):qM(p,function(_,T){return"separator"===d[T].type})}})]}}function og(s){return Rt(s,function(d){return"icon"in d&&void 0!==d.icon})}function ig(s){return console.error(wu(s)),console.log(s),X.none()}function Gk(s,d,p,_,T){var I,R=(I=p,{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[sh.parts.items({preprocess:function(H){return qM(H,function(W,ee){return"separator"===I[ee].type})}})]});return{value:s,dom:R.dom,components:R.components,items:p}}function tC(s,d,p,_,T){var I,R;return"color"===T?{value:s,dom:(I={dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[sh.parts.items({preprocess:"auto"!==_?eC({tag:"div",classes:["tox-swatches__row"]},_):U})]}]}).dom,components:I.components,items:p}:"normal"===T&&"auto"===_?{value:s,dom:(I=ny(_,p)).dom,components:I.components,items:p}:"normal"===T&&1===_?{value:s,dom:(I=ny(1,p)).dom,components:I.components,items:p}:"normal"===T?{value:s,dom:(I=ny(_,p)).dom,components:I.components,items:p}:"listpreview"!==T||"auto"===_?{value:s,dom:{tag:"div",classes:Gr([[(R=JS(T)).menu,"tox-menu-"+_+"-column"],d?[R.hasIcons]:[]])},components:XM,items:p}:{value:s,dom:(I={dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[sh.parts.items({preprocess:eC({tag:"div",classes:["tox-collection__group"]},_)})]}).dom,components:I.components,items:p}}function Bb(s,d,p){var _=Qs(s.element,"."+p);if(0<_.length){var T=Tr(_,function(I){var R=I.dom.getBoundingClientRect().top,H=_[0].dom.getBoundingClientRect().top;return Math.abs(R-H)>d}).getOr(_.length);return X.some({numColumns:T,numRows:Math.ceil(_.length/T)})}return X.none()}function D1(s,d,p){s.getSystem().broadcastOn([YM],{})}function aw(s){return s.getParam("height",Math.max(s.getElement().offsetHeight,200))}function nC(s){return s.getParam("width",Vv.DOM.getStyle(s.getElement(),"width"))}function A1(s){return X.from(s.getParam("min_width")).filter(Ne)}function zb(s){return X.from(s.getParam("min_height")).filter(Ne)}function ry(s){return X.from(s.getParam("max_width")).filter(Ne)}function If(s){return X.from(s.getParam("max_height")).filter(Ne)}function Jd(s){return!1!==s.getParam("menubar",!0,"boolean")}function Ll(s){var d=s.getParam("toolbar",!0),p=!0===d,_=$(d),T=oe(d)&&0<d.length;return!dw(s)&&(T||_||p)}function rC(s){var d=ln(pn(9,function(p){return s.getParam("toolbar"+(p+1),!1,"string")}),function(p){return"string"==typeof p});return 0<d.length?X.some(d):X.none()}(Lb=YS={})[Lb.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",Lb[Lb.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX";var ac,Ws,Rv,sw,ag=YS,Fb="tox-menu-nav__js",I1="tox-collection__item",O1={normal:Fb,color:"tox-swatch"},Lv="tox-collection__item--enabled",iC="tox-collection__item-icon",Bv="tox-collection__item-label",zv="tox-collection__item-caret",sg="tox-collection__item--active",aC="tox-collection__item-container",Uk="tox-collection__item-container--row",XM=[sh.parts.items({})],sC=[Cr("type"),Cr("src"),bi("alt"),Ah("classes",[],ua)],E1=Pr(sC),uw=[Cr("type"),Cr("text"),bi("name"),Ah("classes",["tox-collection__item-label"],ua)],jk=Pr(uw),Fv=Ky(function(){return hf("type",{cardimage:E1,cardtext:jk,cardcontainer:oy})}),oy=Pr([Cr("type"),kd("direction","horizontal"),kd("align","left"),kd("valign","middle"),zu("items",Fv)]),Vb=[Ha("disabled",!1),bi("text"),bi("shortcut"),ds("value","value",zf(function(){return Sr("menuitem-value")}),Oa()),It("meta",{})],Hb=Pr([Cr("type"),bi("label"),zu("items",Fv),Di("onSetup",function(){return j}),Di("onAction",j)].concat(Vb)),uC=Pr([Cr("type"),Ha("active",!1),bi("icon")].concat(Vb)),qk=[Cr("type"),Cr("fancytype"),Di("onAction",j)],lw=Ys("fancytype",{inserttable:[It("initData",{})].concat(qk),colorswatch:[gf("initData",{},[Ha("allowCustomColors",!0),Up("colors",Oa())])].concat(qk)}),pp=Pr([Cr("type"),Di("onSetup",function(){return j}),Di("onAction",j),bi("icon")].concat(Vb)),gd=Pr([Cr("type"),xs("getSubmenuItems"),Di("onSetup",function(){return j}),bi("icon")].concat(Vb)),lC=Pr([Cr("type"),bi("icon"),Ha("active",!1),Di("onSetup",function(){return j}),xs("onAction")].concat(Vb)),cw=function(s){return d=Sr("unnamed-events"),Ln([Kn(d,s)]);var d},YM=Sr("tooltip.exclusive"),Wb=Sr("tooltip.show"),iy=Sr("tooltip.hide"),zc=Object.freeze({__proto__:null,hideAllExclusive:D1,setComponents:function(s,d,p,_){p.getTooltip().each(function(T){T.getSystem().isConnected()&&no.set(T,_)})}}),ay=Object.freeze({__proto__:null,events:function(s,d){function p(_){d.getTooltip().each(function(T){kf(T),s.onHide(_,T),d.clearTooltip()}),d.clearTimer()}return Qo(Gr([[mn(Wb,function(_){d.resetTimer(function(){var T,I,R=_;d.isShowing()||(D1(R),T=s.lazySink(R).getOrDie(),I=R.getSystem().build({dom:s.tooltipDom,components:s.tooltipComponents,events:Qo("normal"===s.mode?[mn(td(),function(H){Lo(R,Wb)}),mn(Uf(),function(H){Lo(R,iy)})]:[]),behaviours:Ln([no.config({})])}),d.setTooltip(I),Mu(T,I),s.onShow(R,I),Gu.position(T,I,{anchor:s.anchor(R)}))},s.delay)}),mn(iy,function(_){d.resetTimer(function(){p(_)},s.delay)}),mn(qf(),function(_,T){T.universal||ki(T.channels,YM)&&p(_)}),Cl(function(_){p(_)})],"normal"===s.mode?[mn(Nd(),function(_){Lo(_,Wb)}),mn(Lh(),function(_){Lo(_,iy)}),mn(td(),function(_){Lo(_,Wb)}),mn(Uf(),function(_){Lo(_,iy)})]:[mn(eb(),function(_,T){Lo(_,Wb)}),mn(Cg(),function(_){Lo(_,iy)})]]))}}),Gb=yi({fields:[bn("lazySink"),bn("tooltipDom"),It("exclusive",!0),It("tooltipComponents",[]),It("delay",300),ql("mode","normal",["normal","follow-highlight"]),It("anchor",function(s){return{type:"hotspot",hotspot:s,layouts:{onLtr:F([Go,Ol,Fs,Il,su,gs]),onRtl:F([Go,Ol,Fs,Il,su,gs])}}}),No("onHide"),No("onShow")],name:"tooltipping",active:ay,state:Object.freeze({__proto__:null,init:function(){function s(){d.on(clearTimeout)}var d=Ai(),p=Ai(),_=F("not-implemented");return Jl({getTooltip:p.get,isShowing:p.isSet,setTooltip:p.set,clearTooltip:p.clear,clearTimer:s,resetTimer:function(T,I){s(),d.set(setTimeout(T,I))},readState:_})}}),apis:zc}),Vv=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Xk=tinymce.util.Tools.resolve("tinymce.EditorManager"),dw=function(s){return rC(s).fold(function(){return 0<s.getParam("toolbar",[],"string[]").length},$e)};function md(s){return s.getParam("toolbar_mode","","string")}function Hv(s){return s.getParam("toolbar_location",Rv.auto,"string")}function cC(s){return Hv(s)===Rv.bottom}function dC(s){if(!s.inline)return X.none();var d=s.getParam("fixed_toolbar_container","","string");if(0<d.length)return ra($u(),d);var p=s.getParam("fixed_toolbar_container_target");return xe(p)?X.some(ct.fromDom(p)):X.none()}function vp(s){return s.inline&&dC(s).isSome()}function fw(s){return dC(s).getOrThunk(function(){return Ti(sa(ct.fromDom(s.getElement())))})}function Yk(s){return s.inline&&!Jd(s)&&!Ll(s)&&!dw(s)}function Wv(s){return(s.getParam("toolbar_sticky",!1,"boolean")||s.inline)&&!vp(s)&&!Yk(s)}function sy(s,d){var p=s.outerContainer.element;d&&(s.mothership.broadcastOn([$h()],{target:p}),s.uiMothership.broadcastOn([$h()],{target:p})),s.mothership.broadcastOn([uy],{readonly:d}),s.uiMothership.broadcastOn([uy],{readonly:d})}function hw(s,d){s.on("init",function(){s.mode.isReadOnly()&&sy(d,!0)}),s.on("SwitchMode",function(){return sy(d,s.mode.isReadOnly())}),s.getParam("readonly",!1,"boolean")&&s.setMode("readonly")}function Ya(){var s;return nc.config({channels:((s={})[uy]={schema:pC,onReceive:function(d,p){xr.set(d,p.readonly)}},s)})}function Fc(s,d){var p=s.getApi(d);return function(_){_(p)}}function Ub(s,d){return Xi(function(p){Fc(s,p)(function(_){var T=s.onSetup(_);Ae(T)&&d.set(T)})})}function P1(s,d){return Cl(function(p){return Fc(s,p)(d.get())})}function yp(s,d,p,_){var T,I,R=wr(j);return{type:"item",dom:d.dom,components:ly(d.optComponents),data:s.data,eventOrder:eT,hasSubmenu:s.triggersSubmenu,itemBehaviours:Ln([Kn("item-events",[(T=s,I=p,zs(function(H,W){Fc(T,H)(T.onAction),T.triggersSubmenu||I!==ag.CLOSE_ON_EXECUTE||(Lo(H,Sl()),W.stop())})),Ub(s,R),P1(s,R)]),xr.config({disabled:function(){return s.disabled||_.isDisabled()},disableClass:"tox-collection__item--state-disabled"}),Ya(),no.config({})].concat(s.itemBehaviours))}}function Gv(s){return{value:s.value,meta:de({text:s.text.getOr("")},s.meta)}}function fC(s,d,p){return ah(s,{tag:"div",classes:p=void 0===p?[iC]:p},d)}function Zk(s){return{dom:{tag:"div",classes:[Bv]},components:[Zl(ic.translate(s))]}}function ZM(s,d){return{dom:{tag:"div",classes:d,innerHtml:s}}}function Kk(s,d){return{dom:{tag:"div",classes:[Bv]},components:[{dom:{tag:s.tag,styles:s.styles},components:[Zl(ic.translate(d))]}]}}function $k(s){return{dom:{tag:"div",classes:["tox-collection__item-accessory"],innerHtml:(d=vw.mac?{alt:"&#x2325;",ctrl:"&#x2303;",shift:"&#x21E7;",meta:"&#x2318;",access:"&#x2303;&#x2325;"}:{meta:"Ctrl",access:"Shift+Alt"},p=Ot(s.split("+"),function(_){var T=_.toLowerCase().trim();return ir(d,T)?d[T]:_}),p.join(vw.mac?"":"+"))}};var d,p}function hC(s){return fC("checkmark",s,["tox-collection__item-checkmark"])}function Jk(s){var d=s.map(function(p){return{attributes:{title:ic.translate(p)}}}).getOr({});return de({tag:"div",classes:[Fb,I1]},d)}function N1(s,d,p,_){return void 0===_&&(_=X.none()),"color"===s.presets?(T=d,I=_,W=s.ariaLabel,ee=s.value,{dom:(R=s.iconContent.map(function(Xe){return Ue=I,ES(Xe,at=(0,T.icons)()).or(Ue).getOrThunk(OS(at));var Ue,at}).getOr(""),H={tag:"div",attributes:W.map(function(Xe){return{title:T.translate(Xe)}}).getOr({}),classes:["tox-swatch"]},de(de({},H),"custom"===ee?{tag:"button",classes:le(le([],H.classes,!0),["tox-swatches__picker-btn"],!1),innerHtml:R}:"remove"===ee?{classes:le(le([],H.classes,!0),["tox-swatch--remove"],!1),innerHtml:R}:{attributes:de(de({},H.attributes),{"data-mce-color":ee}),styles:{"background-color":ee}})),optComponents:[]}):(ue=s,he=d,we=_,Te={tag:"div",classes:[iC]},Le=p?ue.iconContent.map(function(Xe){return ah(Xe,Te,he.icons,we)}).orThunk(function(){return X.some({dom:Te})}):X.none(),Re=ue.checkMark,Be=X.from(ue.meta).fold(function(){return Zk},function(Xe){return ir(Xe,"style")?Ee(Kk,Xe.style):Zk}),He=ue.htmlContent.fold(function(){return ue.textContent.map(Be)},function(Xe){return X.some(ZM(Xe,[Bv]))}),{dom:Jk(ue.ariaLabel),optComponents:[Le,He,ue.shortcutContent.map($k),Re,ue.caret]});var T,I,R,H,W,ee,ue,he,we,Te,Le,Re,Be,He}function Qk(s,d){return sn(s,"tooltipWorker").map(function(p){return[Gb.config({lazySink:d.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function(_){return{type:"submenu",item:_,overrides:{maxHeightFunction:nr}}},mode:"follow-highlight",onShow:function(_,T){p(function(I){Gb.setComponents(_,[ev({element:ct.fromDom(I)})])})}})]}).getOr([])}function gw(s,d){var p=ic.translate(s),_=Vv.DOM.encode(p);if(0<d.length){var T=new RegExp(d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"gi");return _.replace(T,function(I){return'<span class="tox-autocompleter-highlight">'+I+"</span>"})}return _}function KM(s){return{value:s}}function $M(s){return yC.test(s)||Uv.test(s)}function R1(s){var d=s.toString(16);return(1===d.length?"0"+d:d).toUpperCase()}function jb(s){return KM(R1(s.red)+R1(s.green)+R1(s.blue))}function cl(s,d,p,_){return{red:s,green:d,blue:p,alpha:_}}function sm(s){var d=parseInt(s,10);return d.toString()===s&&0<=d&&d<=255}function gC(s){var d,p,_,T=(s.hue||0)%360,R=s.value/100,I=Vc(0,jv(I=s.saturation/100,1));if(R=Vc(0,jv(R,1)),0===I)return cl(d=p=_=yw(255*R),p,_,1);var H=T/60,W=R*I,ee=W*(1-Math.abs(H%2-1)),ue=R-W;switch(Math.floor(H)){case 0:d=W,p=ee,_=0;break;case 1:d=ee,p=W,_=0;break;case 2:d=0,p=W,_=ee;break;case 3:d=0,p=ee,_=W;break;case 4:d=ee,p=0,_=W;break;case 5:d=W,p=0,_=ee;break;default:d=p=_=0}return cl(d=yw(255*(d+ue)),p=yw(255*(p+ue)),_=yw(255*(_+ue)),1)}function qb(s){var d,p,_=(d={value:s.value.replace(yC,function(T,I,R,H){return I+I+R+R+H+H})},null===(p=Uv.exec(d.value))?["FFFFFF","FF","FF","FF"]:p);return cl(parseInt(_[1],16),parseInt(_[2],16),parseInt(_[3],16),1)}function L1(s,d,p,_){return cl(parseInt(s,10),parseInt(d,10),parseInt(p,10),parseFloat(_))}function Xb(s){if("transparent"===s)return X.some(cl(0,0,0,0));var d=cy.exec(s);if(null!==d)return X.some(L1(d[1],d[2],d[3],"1"));var p=bC.exec(s);return null!==p?X.some(L1(p[1],p[2],p[3],p[4])):X.none()}function B1(s){return"rgba("+s.red+","+s.green+","+s.blue+","+s.alpha+")"}function z1(s,d){return s.fire("ResizeContent",d)}function F1(s,d,p){return{hue:s,saturation:d,value:p}}function mw(s){var d,_=0,T=s.red/255,I=s.green/255,R=s.blue/255,H=Math.min(T,Math.min(I,R)),W=Math.max(T,Math.max(I,R));return H===W?F1(0,0,100*(_=H)):(d=(W-H)/W,_=W,F1(Math.round(60*((T===H?3:R===H?1:5)-(T===H?I-R:R===H?T-I:R-T)/(W-H))),Math.round(100*d),Math.round(100*_)))}function mC(s){return jb(gC(s))}function JM(s){return($M(p=s)?X.some({value:(wn(d=p,"#")?d.substring(1):d).toUpperCase()}):X.none()).orThunk(function(){return Xb(s).map(jb)}).getOrThunk(function(){var _=document.createElement("canvas");_.height=1,_.width=1;var T=_.getContext("2d");T.clearRect(0,0,_.width,_.height),T.fillStyle="#FFFFFF",T.fillStyle=s,T.fillRect(0,0,1,1);var I=T.getImageData(0,0,1,1).data;return jb(cl(I[0],I[1],I[2],I[3]))});var d,p}function Yb(s){return xr.config({disabled:s,disableClass:"tox-tbtn--disabled"})}(Ws=ac=ac||{}).default="wrap",Ws.floating="floating",Ws.sliding="sliding",Ws.scrolling="scrolling",(sw=Rv=Rv||{}).auto="auto",sw.top="top",sw.bottom="bottom";var pw,uy="silver.readonly",pC=Pr([Bu("readonly",Om)]),Zb=function(s){return xr.config({disabled:s})},vC=function(s){return xr.config({disabled:s,disableClass:"tox-tbtn--disabled",useNative:!1})},eT=((pw={})[Ca()]=["disabling","alloy.base.behaviour","toggling","item-events"],pw),ly=Eo,vw=tinymce.util.Tools.resolve("tinymce.Env"),V1=function(s,d){return Ot(s,function(p){switch(p.type){case"cardcontainer":return R=V1((I=p).items,d),{dom:{tag:"div",classes:[aC,"vertical"===I.direction?"tox-collection__item-container--column":Uk,"left"===I.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right",function(){switch(I.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:R};case"cardimage":return{dom:{tag:"img",classes:p.classes,attributes:{src:p.src,alt:p.alt.getOr("")}}};case"cardtext":var _=p.name.exists(function(ee){return ki(d.cardText.highlightOn,ee)})?X.from(d.cardText.matchText).getOr(""):"";return ZM(gw(p.text,_),p.classes)}var I,R})},tT=vv(x1(),ey()),yC=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,Uv=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,jv=Math.min,Vc=Math.max,yw=Math.round,cy=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,bC=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,nT=cl(255,0,0,1),lh=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),xC="tinymce-custom-colors";function ug(s){return!1!==s.getParam("custom_colors")}function Kb(s){var d=s.getParam("color_map");return void 0!==d?function(p){for(var _=[],T=0;T<p.length;T+=2)_.push({text:p[T+1],value:"#"+JM(p[T]).value,type:"choiceitem"});return _}(d):Cw}function bw(s){SC.add(s)}function rT(s){var d,p=(d=Kb(s).length,Math.max(5,Math.ceil(Math.sqrt(d))));return s.getParam("color_cols",p,"number")}function oT(s){var d="choiceitem",p={type:d,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return s?[p,{type:d,text:"Custom color",icon:"color-picker",value:"custom"}]:[p]}function xw(s,d,p,_){"custom"===p?iT(s)(function(T){T.each(function(I){bw(I),s.execCommand("mceApplyTextcolor",d,I),_(I)})},hy):"remove"===p?(_(""),s.execCommand("mceRemoveTextcolor",d)):(_(p),s.execCommand("mceApplyTextcolor",d,p))}function H1(s,d){return s.concat(Ot(SC.state(),function(p){return{type:Za,text:p,value:p}}).concat(oT(d)))}function _w(s,d){return function(p){p(H1(s,d))}}function dy(s,d,p){s.setIconFill("forecolor"===d?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color",p)}function um(s,d,p,_,T){s.ui.registry.addSplitButton(d,{tooltip:_,presets:"color",icon:"forecolor"===d?"text-color":"highlight-bg-color",select:function(I){var R,H=p;return s.dom.getParents(s.selection.getStart(),function(W){var ee;(ee=W.style["forecolor"===H?"color":"background-color"])&&(R=R||ee)}),X.from(R).bind(function(W){return Xb(W).map(function(ee){var ue=jb(ee).value;return vo(I.toLowerCase(),ue)})}).getOr(!1)},columns:rT(s),fetch:_w(Kb(s),ug(s)),onAction:function(I){xw(s,p,T.get(),j)},onItemAction:function(I,R){xw(s,p,R,function(H){T.set(H),s.fire("TextColorChange",{name:d,color:H})})},onSetup:function(I){function R(H){H.name===d&&dy(I,H.name,H.color)}return dy(I,d,T.get()),s.on("TextColorChange",R),function(){s.off("TextColorChange",R)}}})}function Qd(s,d,p,_){s.ui.registry.addNestedMenuItem(d,{text:_,icon:"forecolor"===d?"text-color":"highlight-bg-color",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"colorswatch",onAction:function(T){xw(s,p,T.value,j)}}]}})}function fy(s,d,p,_,T,I,R,H){return tC(s,og(d),QM(d,p,_,"color"!==T?"normal":"color",I,R,H),_,T)}function ww(s,d){var p=M1(d);return 1===s?{mode:"menu",moveOnTab:!0}:"auto"===s?{mode:"grid",selector:"."+p.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===d?"tox-swatches__row":"tox-collection__group")}}function _C(s,d){return Zl(d+"x"+s)}var Sw,wC,Za="choiceitem",Cw=[{type:Za,text:"Light Green",value:"#BFEDD2"},{type:Za,text:"Light Yellow",value:"#FBEEB8"},{type:Za,text:"Light Red",value:"#F8CAC6"},{type:Za,text:"Light Purple",value:"#ECCAFA"},{type:Za,text:"Light Blue",value:"#C2E0F4"},{type:Za,text:"Green",value:"#2DC26B"},{type:Za,text:"Yellow",value:"#F1C40F"},{type:Za,text:"Red",value:"#E03E2D"},{type:Za,text:"Purple",value:"#B96AD9"},{type:Za,text:"Blue",value:"#3598DB"},{type:Za,text:"Dark Turquoise",value:"#169179"},{type:Za,text:"Orange",value:"#E67E23"},{type:Za,text:"Dark Red",value:"#BA372A"},{type:Za,text:"Dark Purple",value:"#843FA1"},{type:Za,text:"Dark Blue",value:"#236FA1"},{type:Za,text:"Light Gray",value:"#ECF0F1"},{type:Za,text:"Medium Gray",value:"#CED4D9"},{type:Za,text:"Gray",value:"#95A5A6"},{type:Za,text:"Dark Gray",value:"#7E8C8D"},{type:Za,text:"Navy Blue",value:"#34495E"},{type:Za,text:"Black",value:"#000000"},{type:Za,text:"White",value:"#ffffff"}],SC=function(s){function d(R){I.splice(R,1)}void 0===s&&(s=10);var p,_=lh.getItem(xC),T=$(_)?JSON.parse(_):[],I=s-(p=T).length<0?p.slice(0,s):p;return{add:function(R){var H;(-1===(H=Jt(I,R))?X.none():X.some(H)).each(d),I.unshift(R),I.length>s&&I.pop(),lh.setItem(xC,JSON.stringify(I))},state:function(){return I.slice(0)}}}(10),hy="#000000",iT=function(s){return function(d,p){var _=!1;s.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:{colorpicker:p},onAction:function(T,I){"hex-valid"===I.name&&(_=I.value)},onSubmit:function(T){var I=T.getData().colorpicker;_?(d(X.from(I)),T.close()):s.windowManager.alert(s.translate(["Invalid hex color code: {0}",I]))},onClose:j,onCancel:function(){d(X.none())}})}},QM=function(s,d,p,_,T,I,R){return Eo(Ot(s,function(H){return"choiceitem"===H.type?Zi("choicemenuitem",uC,H).fold(ig,function(W){return X.some(function(ee,ue,he,we,Te,Le,Re,Be){void 0===Be&&(Be=!0);var He=N1({presets:he,textContent:ue?ee.text:X.none(),htmlContent:X.none(),ariaLabel:ee.text,iconContent:ee.icon,shortcutContent:ue?ee.shortcut:X.none(),checkMark:ue?X.some(hC(Re.icons)):X.none(),caret:X.none(),value:ee.value},Re,Be);return xo(yp({data:Gv(ee),disabled:ee.disabled,getApi:function(Xe){return{setActive:function(De){Ho.set(Xe,De)},isActive:function(){return Ho.isOn(Xe)},isDisabled:function(){return xr.isDisabled(Xe)},setDisabled:function(De){return xr.set(Xe,De)}}},onAction:function(Xe){return we(ee.value)},onSetup:function(Xe){return Xe.setActive(Te),j},triggersSubmenu:!1,itemBehaviours:[]},He,Le,Re),{toggling:{toggleClass:Lv,toggleOnExecute:!1,selected:ee.active}})}(W,1===p,_,d,I(H.value),T,R,og(s)))}):X.none()}))},CC=Sr("cell-over"),W1=Sr("cell-execute"),G1={inserttable:function(s){var d=Sr("size-label"),p=function(I){for(var R=[],H=0;H<10;H++){for(var W=[],ee=0;ee<10;ee++)W.push(function(ue,he,we){function Te(Be){return kr(Be,W1,{row:ue,col:he})}function Le(Be,He){He.stop(),Te(Be)}var Re;return so({dom:{tag:"div",attributes:((Re={role:"button"})["aria-labelledby"]=we,Re)},behaviours:Ln([Kn("insert-table-picker-cell",[mn(td(),eo.focus),mn(Ca(),Te),mn(iu(),Le),mn(bf(),Le)]),Ho.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),eo.config({onFocus:function(Be){return kr(Be,CC,{row:ue,col:he})}})])})}(H,ee,I));R.push(W)}return R}(d),_=_C(0,0),T=ui({dom:{tag:"span",classes:["tox-insert-table-picker__label"],attributes:{id:d}},components:[_],behaviours:Ln([no.config({})])});return{type:"widget",data:{value:Sr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[tT.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:Or(p,function(I){return Ot(I,Ql)}).concat(T.asSpec()),behaviours:Ln([Kn("insert-table-picker",[Xi(function(I){no.set(T.get(I),[_])}),Rm(CC,function(I,R,H){var W=H.event,ee=W.row,ue=W.col;(function(he,we,Te){for(var Le=0;Le<10;Le++)for(var Re=0;Re<10;Re++)Ho.set(he[Le][Re],Le<=we&&Re<=Te)})(p,ee,ue),no.set(T.get(I),[_C(ee+1,ue+1)])}),Rm(W1,function(I,R,H){var W=H.event;s.onAction({numRows:W.row+1,numColumns:W.col+1}),Lo(I,Sl())})]),Rr.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function(s,d){var p,_,T,I=(_=d,T=(p=s).initData.allowCustomColors&&_.colorinput.hasCustomColors(),p.initData.colors.fold(function(){return H1(_.colorinput.getColors(),T)},function(ee){return ee.concat(oT(T))})),R=d.colorinput.getColorCols(),H=fy(Sr("menu-value"),I,function(ee){s.onAction({value:ee})},R,"color",ag.CLOSE_ON_EXECUTE,qe,d.shared.providers),W=de(de({},H),{markers:M1("color"),movement:ww(R,"color")});return{type:"widget",data:{value:Sr("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[tT.widget(sh.sketch(W))]}}},gy=function(s){var d=s.text.fold(function(){return{}},function(p){return{innerHtml:p}});return{type:"separator",dom:de({tag:"div",classes:[I1,"tox-collection__group-heading"]},d),components:[]}};function U1(s,d,p,_,T){var I=og(d),R=Eo(Ot(d,function(H){function W(ee){return function(ue,he,we,Te,Le){function Re(He){return Le?de(de({},He),{shortcut:X.none(),icon:He.text.isSome()?X.none():He.icon}):He}var Be=we.shared.providers;switch(ue.type){case"menuitem":return Zi("menuitem",pp,ue).fold(ig,function(He){return X.some(function(s,d,p,_){void 0===_&&(_=!0);var T=N1({presets:"normal",iconContent:s.icon,textContent:s.text,htmlContent:X.none(),ariaLabel:s.text,caret:X.none(),checkMark:X.none(),shortcutContent:s.shortcut},p,_);return yp({data:Gv(s),getApi:function(I){return{isDisabled:function(){return xr.isDisabled(I)},setDisabled:function(R){return xr.set(I,R)}}},disabled:s.disabled,onAction:s.onAction,onSetup:s.onSetup,triggersSubmenu:!1,itemBehaviours:[]},T,d,p)}(Re(He),he,Be,Te))});case"nestedmenuitem":return Zi("nestedmenuitem",gd,ue).fold(ig,function(He){return X.some(function(s,d,p,_,T){void 0===_&&(_=!0);var I=(T=void 0!==T&&T)?fC("chevron-down",p.icons,[zv]):fC("chevron-right",p.icons,[zv]),R=N1({presets:"normal",iconContent:s.icon,textContent:s.text,htmlContent:X.none(),ariaLabel:s.text,caret:X.some(I),checkMark:X.none(),shortcutContent:s.shortcut},p,_);return yp({data:Gv(s),getApi:function(H){return{isDisabled:function(){return xr.isDisabled(H)},setDisabled:function(W){return xr.set(H,W)}}},disabled:s.disabled,onAction:j,onSetup:s.onSetup,triggersSubmenu:!0,itemBehaviours:[]},R,d,p)}(Re(He),he,Be,Te,Le))});case"togglemenuitem":return Zi("togglemenuitem",lC,ue).fold(ig,function(He){return X.some(function(s,d,p,_){void 0===_&&(_=!0);var T=N1({iconContent:s.icon,textContent:s.text,htmlContent:X.none(),ariaLabel:s.text,checkMark:X.some(hC(p.icons)),caret:X.none(),shortcutContent:s.shortcut,presets:"normal",meta:s.meta},p,_);return xo(yp({data:Gv(s),disabled:s.disabled,getApi:function(I){return{setActive:function(R){Ho.set(I,R)},isActive:function(){return Ho.isOn(I)},isDisabled:function(){return xr.isDisabled(I)},setDisabled:function(R){return xr.set(I,R)}}},onAction:s.onAction,onSetup:s.onSetup,triggersSubmenu:!1,itemBehaviours:[]},T,d,p),{toggling:{toggleClass:Lv,toggleOnExecute:!1,selected:s.active}})}(Re(He),he,Be,Te))});case"separator":return Zi("separatormenuitem",KS,ue).fold(ig,function(He){return X.some(gy(He))});case"fancymenuitem":return Zi("fancymenuitem",lw,ue).fold(ig,function(He){return function(s,d){return sn(G1,s.fancytype).map(function(p){return p(s,d)})}(Re(He),we)});default:return console.error("Unknown item in general menu",ue),X.none()}}(ee,p,_,T?!ir(ee,"text"):I,T)}return"nestedmenuitem"===H.type&&H.getSubmenuItems().length<=0?W(de(de({},H),{disabled:!0})):W(H)}));return(T?Gk:tC)(s,I,R,1,"normal")}function TC(s){return fp.singleData(s.value,s)}function qv(s,d,p){return ec(s,d,p).isSome()}function MC(s,d){var p=null;return{cancel:function(){null!==p&&(clearTimeout(p),p=null)},schedule:function(){for(var _=[],T=0;T<arguments.length;T++)_[T]=arguments[T];p=setTimeout(function(){s.apply(null,_),p=null},d)}}}function DC(s){var d=s.raw;return void 0===d.touches||1!==d.touches.length?X.none():X.some(d.touches[0])}function aT(){return ml().browser.isFirefox()}function sT(s,d){return wr(sn(s,"target").getOr(d))}function uT(s,d,p,_,T,I){var R,H,W=s(d,_),ee=(R=wr(!1),H=wr(!1),{stop:function(){R.set(!0)},cut:function(){H.set(!0)},isStopped:R.get,isCut:H.get,event:p,setSource:T.set,getSource:T.get});return W.fold(function(){return I.logEventNoHandlers(d,_),Jb.complete()},function(ue){var he=ue.descHandler;return Gf(he)(ee),ee.isStopped()?(I.logEventStopped(d,ue.element,he.purpose),Jb.stopped()):ee.isCut()?(I.logEventCut(d,ue.element,he.purpose),Jb.complete()):Er(ue.element).fold(function(){return I.logNoParent(d,ue.element,he.purpose),Jb.complete()},function(we){return I.logEventResponse(d,ue.element,he.purpose),Jb.resume(we)})})}function ch(s){function d(Be){return Er(s.element).fold($e,function(He){return Sn(Be,He)})}function p(Be,He){return T.find(d,Be,He)}function _(Be){var He=T.filter(qf());ur(He,function(Xe){Gf(Xe.descHandler)(Be)})}var T=function kw(){function s(T){Wf(T.element).each(function(I){delete _[I],p.unregisterId(I)})}var d,p=(d={},{registerId:function(T,I,R){jt(R,function(H,W){var ee,ue=void 0!==d[W]?d[W]:{};ue[I]={cHandler:Ee.apply(void 0,[(ee=H).handler].concat(T)),purpose:ee.purpose},d[W]=ue})},unregisterId:function(T){jt(d,function(I,R){ir(I,T)&&delete I[T]})},filterByType:function(T){return sn(d,T).map(function(I){return On(I,function(R,H){return{id:H,descHandler:R}})}).getOr([])},find:function(T,I,R){return sn(d,I).bind(function(H){return _l(R,function(W){return ee=H,Wf(ue=W).bind(function(he){return sn(ee,he)}).map(function(he){return{element:ue,descHandler:he}});var ee,ue},T)})}}),_={};return{find:function(T,I,R){return p.find(T,I,R)},filter:function(T){return p.filterByType(T)},register:function(T){var I,R=Wf((I=T).element).getOrThunk(function(){return H=I.element,W=Sr(wf+"uid-"),Cc(H,W),W;var H,W});qr(_,R)&&function(H){var W=_[R];if(W!==H)throw new Error('The tagId "'+R+'" is already used by: '+Id(W.element)+"\nCannot use it for: "+Id(H.element)+"\nThe conflicting element is"+(ys(W.element)?" ":" not ")+"already in the DOM");s(H)}(T),p.registerId([T],R,T.events),_[R]=T},unregister:s,getById:function(T){return sn(_,T)}}}(),I=function AC(s,d){var p,_,T,I,R,H,W,ee,ue,he=de({stopBackspace:!0},d),we=(R=he,H=Ai(),W=wr(!1),ee=MC(function(Ue){R.triggerEvent(Ux(),Ue),W.set(!0)},400),ue=Qc([{key:Zs(),value:function(Ue){return DC(Ue).each(function(at){ee.cancel();var gt={x:at.clientX,y:at.clientY,target:Ue.target};ee.schedule(Ue),W.set(!1),H.set(gt)}),X.none()}},{key:Cu(),value:function(Ue){return ee.cancel(),DC(Ue).each(function(at){H.on(function(gt){var Xt=at,Lt=gt,nn=Math.abs(Xt.clientX-Lt.x),_n=Math.abs(Xt.clientY-Lt.y);(5<nn||5<_n)&&H.clear()})}),X.none()}},{key:fs(),value:function(Ue){return ee.cancel(),H.get().filter(function(at){return Sn(at.target,Ue.target)}).map(function(at){return W.get()?(Ue.prevent(),!1):R.triggerEvent(bf(),Ue)})}}]),{fireIfReady:function(Ue,at){return sn(ue,at).bind(function(gt){return gt(Ue)})}}),Te=Ot(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),function(Ue){return Ua(s,Ue,function(at){we.fireIfReady(at,Ue).each(function(gt){gt&&at.kill()}),he.triggerEvent(Ue,at)&&at.kill()})}),Le=Ai(),Re=Ua(s,"paste",function(Ue){we.fireIfReady(Ue,"paste").each(function(at){at&&Ue.kill()}),he.triggerEvent("paste",Ue)&&Ue.kill(),Le.set(setTimeout(function(){he.triggerEvent(Jp(),Ue)},0))}),Be=Ua(s,"keydown",function(Ue){var at;he.triggerEvent("keydown",Ue)?Ue.kill():!he.stopBackspace||(at=Ue).raw.which!==hd[0]||ki(["input","textarea"],tn(at.target))||qv(at.target,'[contenteditable="true"]')||Ue.prevent()}),He=(p=s,_=function(Ue){he.triggerEvent("focusin",Ue)&&Ue.kill()},aT()?Eg(p,"focus",_):Ua(p,"focusin",_)),Xe=Ai(),De=(T=s,I=function(Ue){he.triggerEvent("focusout",Ue)&&Ue.kill(),Xe.set(setTimeout(function(){he.triggerEvent(Lh(),Ue)},0))},aT()?Eg(T,"blur",I):Ua(T,"focusout",I));return{unbind:function(){ur(Te,function(Ue){Ue.unbind()}),Be.unbind(),He.unbind(),De.unbind(),Re.unbind(),Le.on(clearTimeout),Xe.on(clearTimeout)}}}(s.element,{triggerEvent:function(Be,He){return qx(Be,He.target,function(Xe){return j1(p,Be,He,He.target,Xe)})}}),R={debugInfo:F("real"),triggerEvent:function(Be,He,Xe){qx(Be,He,function(De){return j1(p,Be,Xe,He,De)})},triggerFocus:function(Be,He){Wf(Be).fold(function(){rd(Be)},function(Xe){qx(na(),Be,function(De){var Ue,at,gt=p,Xt=na(),Lt=De,nn=sT(Ue={originator:He,kill:j,prevent:j,target:Be},at=Be);return uT(gt,Xt,Ue,at,nn,Lt),!1})})},triggerEscape:function(Be,He){R.triggerEvent("keydown",Be.element,He.event)},getByUid:function(Be){return Le(Be)},getByDom:function(Be){return Re(Be)},build:so,addToGui:function(Be){ee(Be)},removeFromGui:function(Be){ue(Be)},addToWorld:function(Be){H(Be)},removeFromWorld:function(Be){W(Be)},broadcast:function(Be){he(Be)},broadcastOn:function(Be,He){we(Be,He)},broadcastEvent:function(Be,He){Te(Be,He)},isConnected:$e},H=function(Be){Be.connect(R),gc(Be.element)||(T.register(Be),ur(Be.components(),H),R.triggerEvent(zm(),Be.element,{target:Be.element}))},W=function(Be){gc(Be.element)||(ur(Be.components(),W),T.unregister(Be)),Be.disconnect()},ee=function(Be){Mu(s,Be)},ue=function(Be){kf(Be)},he=function(Be){_({universal:!0,data:Be})},we=function(Be,He){_({universal:!1,channels:Be,data:He})},Te=function(Be,He){var Xe,De,Ue=T.filter(Be);return De={stop:function(){Xe.set(!0)},cut:j,isStopped:(Xe=wr(!1)).get,isCut:qe,event:He,setSource:Wt("Cannot set source of a broadcasted event"),getSource:Wt("Cannot get source of a broadcasted event")},ur(Ue,function(at){Gf(at.descHandler)(De)}),De.isStopped()},Le=function(Be){return T.getById(Be).fold(function(){return yo.error(new Error('Could not find component with uid: "'+Be+'" in system.'))},yo.value)},Re=function(Be){var He=Wf(Be).getOr("not found");return Le(He)};return H(s),{root:s,element:s.element,destroy:function(){I.unbind(),Cd(s.element)},add:ee,remove:ue,getByUid:Le,getByDom:Re,addToWorld:H,removeFromWorld:W,broadcast:he,broadcastOn:we,broadcastEvent:Te}}function $b(s,d,p,_){var T=Aw(s,d,p,_);return ni.sketch(T)}function lg(s,d){return ni.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:d.translate(s)}})}function Tw(s){return Ln([eo.config({onFocus:s.selectOnFocus?function(d){var p=d.element,_=Yl(p);p.dom.setSelectionRange(0,_.length)}:j})])}function IC(s){return{tag:s.tag,attributes:de({type:"text"},s.inputAttributes),styles:s.inputStyles,classes:s.inputClasses}}(wC=Sw={})[wC.ContentFocus=0]="ContentFocus",wC[wC.UiFocus=1]="UiFocus";var Jb=Ns([{stopped:[]},{resume:["element"]},{complete:[]}]),lm=function(s,d,p,_,T,I){return uT(s,d,p,_,T,I).fold($e,function(R){return lm(s,d,p,R,T,I)},qe)},j1=function(s,d,p,_,T){var I=sT(p,_);return lm(s,d,p,_,I,T)},ba=qa({name:"Container",factory:function(s){var d=s.dom,p=d.attributes,_=Fe(d,["attributes"]);return{uid:s.uid,dom:de({tag:"div",attributes:de({role:"presentation"},p)},_),components:s.components,behaviours:Ug(s.containerBehaviours),events:s.events,domModification:s.domModification,eventOrder:s.eventOrder}},configFields:[It("components",[]),ns("containerBehaviours",[]),It("events",{}),It("domModification",{}),It("eventOrder",{})]}),Xv=F([It("prefix","form-field"),ns("fieldBehaviours",[Io,er])]),lT=F([dd({schema:[bn("dom")],name:"label"}),dd({factory:{sketch:function(s){return{uid:s.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:s.text}}}},schema:[bn("text")],name:"aria-descriptor"}),du({factory:{sketch:function(s){var d,p,_=(d=["factory"],p={},jt(s,function(T,I){ki(d,I)||(p[I]=T)}),p);return s.factory.sketch(_)}},schema:[bn("factory")],name:"field"})]),ni=Xa({name:"FormField",configFields:Xv(),partFields:lT(),factory:function(s,d,p,_){var T=ja(s.fieldBehaviours,[Io.config({find:function(R){return Bo(R,s,"field")}}),er.config({store:{mode:"manual",getValue:function(R){return Io.getCurrent(R).bind(er.getValue)},setValue:function(R,H){Io.getCurrent(R).each(function(W){er.setValue(W,H)})}}})]),I=Qo([Xi(function(R,H){var W=o1(R,s,["label","field","aria-descriptor"]);W.field().each(function(ee){var ue=Sr(s.prefix);W.label().each(function(he){Ir(he.element,"for",ue),Ir(ee.element,"id",ue)}),W["aria-descriptor"]().each(function(he){var we=Sr(s.prefix);Ir(he.element,"id",we),Ir(ee.element,"aria-describedby",we)})})})]);return{uid:s.uid,dom:s.dom,components:d,behaviours:T,events:I,apis:{getField:function(R){return Bo(R,s,"field")},getLabel:function(R){return Bo(R,s,"label")}}}},apis:{getField:function(s,d){return s.getField(d)},getLabel:function(s,d){return s.getLabel(d)}}}),Mw=Object.freeze({__proto__:null,exhibit:function(s,d){return ed({attributes:Qc([{key:d.tabAttr,value:"true"}])})}}),Ko=yi({fields:[It("tabAttr","data-alloy-tabstop")],name:"tabstopping",active:Mw}),Dw=tinymce.util.Tools.resolve("tinymce.html.Entities"),Aw=function(s,d,p,_){return{dom:cT(p),components:s.toArray().concat([d]),fieldBehaviours:Ln(_)}},cT=function(s){return{tag:"div",classes:["tox-form__group"].concat(s)}},ef=Sr("form-component-change"),q1=Sr("form-close"),Qb=Sr("form-cancel"),bp=Sr("form-action"),sc=Sr("form-submit"),xp=Sr("form-block"),Iw=Sr("form-unblock"),my=Sr("form-tabchange"),uc=Sr("form-resize"),OC=F([Xo("data"),It("inputAttributes",{}),It("inputStyles",{}),It("tag","input"),It("inputClasses",[]),No("onSetValue"),It("styles",{}),It("eventOrder",{}),ns("inputBehaviours",[er,eo]),It("selectOnFocus",!0)]),X1=qa({name:"Input",configFields:OC(),factory:function(s,d){return{uid:s.uid,dom:IC(s),components:[],behaviours:de(de({},Tw(p=s)),ja(p.inputBehaviours,[er.config({store:de(de({mode:"manual"},p.data.map(function(_){return{initialValue:_}}).getOr({})),{getValue:function(_){return Yl(_.element)},setValue:function(_,T){Yl(_.element)!==T&&Fu(_.element,T)}}),onSetValue:p.onSetValue})])),eventOrder:s.eventOrder};var p}}),Y1={},py={exports:Y1};function EC(s){setTimeout(function(){throw s},0)}function Z1(s){var d=tn(s);return ki(Pw,d)}function dT(s,d){_i(d.getRoot(s).getOr(s.element),d.invalidClass),d.notify.each(function(p){Z1(s.element)&&Ir(s.element,"aria-invalid",!1),p.getContainer(s).each(function(_){Lm(_,p.validHtml)}),p.onValid(s)})}function i2(s,d,p,_){Qa(d.getRoot(s).getOr(s.element),d.invalidClass),d.notify.each(function(T){Z1(s.element)&&Ir(s.element,"aria-invalid",!0),T.getContainer(s).each(function(I){Lm(I,_)}),T.onInvalid(s,_)})}function PC(s,d,p){return d.validator.fold(function(){return dh(yo.value(!0))},function(_){return _.validate(s)})}function _p(s,d,p){return d.notify.each(function(_){_.onValidate(s)}),PC(s,d).map(function(_){return s.getSystem().isConnected()?_.fold(function(T){return i2(s,d,0,T),yo.error(T)},function(T){return dT(s,d),yo.value(T)}):yo.error("No longer in system")})}!function(){var s=this,d=function(){var p,_,T,I={exports:{}};function R(){}function H(Re){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof Re)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],Te(Re,this)}function W(Re,Be){for(;3===Re._state;)Re=Re._value;0!==Re._state?(Re._handled=!0,H._immediateFn(function(){var He,Xe=1===Re._state?Be.onFulfilled:Be.onRejected;if(null!==Xe){try{He=Xe(Re._value)}catch(De){return void ue(Be.promise,De)}ee(Be.promise,He)}else(1===Re._state?ee:ue)(Be.promise,Re._value)})):Re._deferreds.push(Be)}function ee(Re,Be){try{if(Be===Re)throw new TypeError("A promise cannot be resolved with itself.");if(Be&&("object"==typeof Be||"function"==typeof Be)){var He=Be.then;if(Be instanceof H)return Re._state=3,Re._value=Be,void he(Re);if("function"==typeof He)return void Te((Xe=He,De=Be,function(){Xe.apply(De,arguments)}),Re)}Re._state=1,Re._value=Be,he(Re)}catch(Ue){ue(Re,Ue)}var Xe,De}function ue(Re,Be){Re._state=2,Re._value=Be,he(Re)}function he(Re){2===Re._state&&0===Re._deferreds.length&&H._immediateFn(function(){Re._handled||H._unhandledRejectionFn(Re._value)});for(var Be=0,He=Re._deferreds.length;Be<He;Be++)W(Re,Re._deferreds[Be]);Re._deferreds=null}function we(Re,Be,He){this.onFulfilled="function"==typeof Re?Re:null,this.onRejected="function"==typeof Be?Be:null,this.promise=He}function Te(Re,Be){var He=!1;try{Re(function(Xe){He||(He=!0,ee(Be,Xe))},function(Xe){He||(He=!0,ue(Be,Xe))})}catch(Xe){if(He)return;He=!0,ue(Be,Xe)}}p=I,_="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},T=setTimeout,H.prototype.catch=function(Re){return this.then(null,Re)},H.prototype.then=function(Re,Be){var He=new this.constructor(R);return W(this,new we(Re,Be,He)),He},H.all=function(Re){var Be=Array.prototype.slice.call(Re);return new H(function(He,Xe){if(0===Be.length)return He([]);for(var De=Be.length,Ue=0;Ue<Be.length;Ue++)!function at(gt,Xt){try{if(Xt&&("object"==typeof Xt||"function"==typeof Xt)){var Lt=Xt.then;if("function"==typeof Lt)return Lt.call(Xt,function(nn){at(gt,nn)},Xe),0}Be[gt]=Xt,0==--De&&He(Be)}catch(nn){Xe(nn)}}(Ue,Be[Ue])})},H.resolve=function(Re){return Re&&"object"==typeof Re&&Re.constructor===H?Re:new H(function(Be){Be(Re)})},H.reject=function(Re){return new H(function(Be,He){He(Re)})},H.race=function(Re){return new H(function(Be,He){for(var Xe=0,De=Re.length;Xe<De;Xe++)Re[Xe].then(Be,He)})},H._immediateFn="function"==typeof setImmediate?function(Re){setImmediate(Re)}:function(Re){T(Re,0)},H._unhandledRejectionFn=function(Re){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",Re)},H._setImmediateFn=function(Re){H._immediateFn=Re},H._setUnhandledRejectionFn=function(Re){H._unhandledRejectionFn=Re},p.exports?p.exports=H:_.Promise||(_.Promise=H);var Le=I.exports;return{boltExport:("undefined"!=typeof window?window:Function("return this;")()).Promise||Le}};"object"==typeof Y1&&void 0!==py?py.exports=d():(s="undefined"!=typeof globalThis?globalThis:s||self).EphoxContactWrapper=d()}();var tf,Yv,Of=py.exports.boltExport,Ow=function(s){function d(R){T()?I(R):_.push(R)}var p=X.none(),_=[],T=function(){return p.isSome()},I=function(R){p.each(function(H){setTimeout(function(){R(H)},0)})};return s(function(R){T()||(p=X.some(R),ur(_,I),_=[])}),{get:d,map:function(R){return Ow(function(H){d(function(W){H(R(W))})})},isReady:T}},Ew={nu:Ow,pure:function(s){return Ow(function(d){d(s)})}},cm=function(s){function d(p){s().then(p,EC)}return{map:function(p){return cm(function(){return s().then(p)})},bind:function(p){return cm(function(){return s().then(function(_){return p(_).toPromise()})})},anonBind:function(p){return cm(function(){return s().then(function(){return p.toPromise()})})},toLazy:function(){return Ew.nu(d)},toCached:function(){var p=null;return cm(function(){return p=null===p?s():p})},toPromise:s,get:d}},wp=function(s){return cm(function(){return new Of(s)})},dh=function(s){return cm(function(){return Of.resolve(s)})},Pw=["input","textarea"],Nw=Object.freeze({__proto__:null,markValid:dT,markInvalid:i2,query:PC,run:_p,isInvalid:function(s,d){return ou(d.getRoot(s).getOr(s.element),d.invalidClass)}}),NC=Object.freeze({__proto__:null,events:function(s,d){return s.validator.map(function(p){return Qo([mn(p.onEvent,function(_){_p(_,s).get(U)})].concat(p.validateOnLoad?[Xi(function(_){_p(_,s).get(j)})]:[]))}).getOr({})}}),Sp=yi({fields:[bn("invalidClass"),It("getRoot",X.none),Ri("notify",[It("aria","alert"),It("getContainer",X.none),It("validHtml",""),No("onValid"),No("onInvalid"),No("onValidate")]),Ri("validator",[bn("validate"),It("onEvent","input"),It("validateOnLoad",!0)])],name:"invalidating",active:NC,apis:Nw,extra:{validation:function(s){return function(d){var p=er.getValue(d);return dh(s(p))}}}}),Rw=Object.freeze({__proto__:null,getCoupled:function(s,d,p,_){return p.getOrCreate(s,d,_)}}),Na=yi({fields:[Bu("others",Bx(yo.value,Oa()))],name:"coupling",apis:Rw,state:Object.freeze({__proto__:null,init:function(){var s={},d=F({});return Jl({readState:d,getOrCreate:function(p,_,T){var I=pi(_.others);if(I)return sn(s,T).getOrThunk(function(){var R=sn(_.others,T).getOrDie("No information found for coupled component: "+T)(p),H=p.getSystem().build(R);return s[T]=H});throw new Error("Cannot find coupled component: "+T+". Known coupled components: "+JSON.stringify(I,null,2))}})}})}),fT=F("sink"),dm=F(dd({name:fT(),overrides:F({dom:{tag:"div"},behaviours:Ln([Gu.config({useFixed:$e})]),events:Qo([Dd(nd()),Dd(Kl()),Dd(iu())])})}));function fh(s,d){var p=s.getHotspot(d).getOr(d),_=s.getAnchorOverrides();return s.layouts.fold(function(){return{type:"hotspot",hotspot:p,overrides:_}},function(T){return{type:"hotspot",hotspot:p,overrides:_,layouts:T}})}function RC(s,d,p,_,T,I,R){var H,W=fh(s,p),ee=p,ue=_,he=T,we=R,Te=d,Le=(0,(H=s).fetch)(ee).map(Te),Re=c2(ee,H);return Le.map(function(Be){return Be.bind(function(He){return X.from(fp.sketch(de(de({},he.menu()),{uid:Tl(""),data:He,highlightImmediately:we===tf.HighlightFirst,onOpenMenu:function(Xe,De){var Ue=Re().getOrDie();Gu.position(Ue,De,{anchor:W}),po.decloak(ue)},onOpenSubmenu:function(Xe,De,Ue){var at=Re().getOrDie();Gu.position(at,Ue,{anchor:{type:"submenu",item:De}}),po.decloak(ue)},onRepositionMenu:function(Xe,De,Ue){var at=Re().getOrDie();Gu.position(at,De,{anchor:W}),ur(Ue,function(gt){Gu.position(at,gt.triggeredMenu,{anchor:{type:"submenu",item:gt.triggeringItem}})})},onEscape:function(){return eo.focus(ee),po.close(ue),X.some(!0)}})))})}).map(function(Be){return Be.fold(function(){po.isOpen(_)&&po.close(_)},function(He){po.cloak(_),po.open(_,He),I(_)}),_})}function ex(s,d,p,_,T,I){var R=Na.getCoupled(p,"sandbox");return(po.isOpen(R)?function(H,W,ee,ue,he,we,Te){return po.close(ue),dh(ue)}:RC)(s,d,p,R,_,T,I)}function hT(s){po.getState(s).each(function(d){fp.repositionMenus(d)})}function K1(s,d,p){var _=Cs(),T=c2(d,s);return{dom:{tag:"div",classes:s.sandboxClasses,attributes:{id:_.id,role:"listbox"}},behaviours:Nc(s.sandboxBehaviours,[er.config({store:{mode:"memory",initialValue:d}}),po.config({onOpen:function(I,R){var H,W,ee,he,we,Te=fh(s,d);_.link(d.element),s.matchWidth&&(H=Te.hotspot,ee=s.useMinWidth,he=Io.getCurrent(W=R).getOr(W),we=fn(H.element),ee?Qr(he.element,"min-width",we+"px"):Ju.set(he.element,we)),s.onOpen(Te,I,R),void 0!==p&&void 0!==p.onOpen&&p.onOpen(I,R)},onClose:function(I,R){_.unlink(d.element),void 0!==p&&void 0!==p.onClose&&p.onClose(I,R)},isPartOf:function(I,R,H){return tl(R,H)||tl(d,H)},getAttachPoint:function(){return T().getOrDie()}}),Io.config({find:function(I){return po.getState(I).bind(function(R){return Io.getCurrent(R)})}}),nc.config({channels:de(de({},Du({isExtraPart:qe})),Yh({doReposition:hT}))})])}}function gT(s){hT(Na.getCoupled(s,"sandbox"))}function $1(){return[It("sandboxClasses",[]),Yg("sandboxBehaviours",[Io,nc,po,er])]}function Zv(s){return dd({name:s+"-edge",overrides:function(d){return d.model.manager.edgeActions[s].fold(function(){return{}},function(p){return{events:Qo([Qy(Zs(),function(_,T,I){return p(_,I)},[d]),Qy(Kl(),function(_,T,I){return p(_,I)},[d]),Qy(Kp(),function(_,T,I){I.mouseIsDown.get()&&p(_,I)},[d])])}})}})}function LC(s){var d=s.event.raw;return-1===d.type.indexOf("touch")?void 0!==d.clientX?X.some(d).map(function(p){return Mi(p.clientX,p.clientY)}):X.none():void 0!==d.touches&&1===d.touches.length?X.some(d.touches[0]).map(function(p){return Mi(p.clientX,p.clientY)}):X.none()}function vy(s){return s.model.minX}function cg(s){return s.model.minY}function Kv(s){return s.model.minX-1}function J1(s){return s.model.minY-1}function hh(s){return s.model.maxX}function Bi(s){return s.model.maxY}function yy(s){return s.model.maxX+1}function $v(s){return s.model.maxY+1}function tx(s,d,p){return d(s)-p(s)}function nx(s){return tx(s,hh,vy)}function by(s){return tx(s,Bi,cg)}function Q1(s){return nx(s)/2}function Jv(s){return by(s)/2}function Qv(s){return s.stepSize}function Lw(s){return s.snapToGrid}function BC(s){return s.snapStart}function mT(s){return s.rounded}function xy(s,d){return void 0!==s[d+"-edge"]}function zC(s){return xy(s,"left")}function a2(s){return xy(s,"right")}function pT(s){return xy(s,"top")}function s2(s){return xy(s,"bottom")}function fm(s){return s.model.value.get()}function hm(s,d){return{x:s,y:d}}function gh(s,d){kr(s,d_(),{value:d})}function e_(s,d,p,_){return s<d?s:p<s?p:s===d?d-1:Math.max(d,s-_)}function vT(s,d,p,_){return p<s?s:s<d?d:s===p?p+1:Math.min(p,s+_)}function rx(s,d,p){return Math.max(d,Math.min(p,s))}function t_(s){var d=s.min,p=s.max,_=s.range,T=s.value,I=s.step,R=s.snap,H=s.snapStart,W=s.rounded,he=s.minBound,we=s.maxBound,Te=s.screenRange,Le=s.hasMinEdge?d-1:d,Re=s.hasMaxEdge?p+1:p;if(T<he)return Le;if(we<T)return Re;var Be,He,Xe,De,Ue,at=rx((Ue=he,(Math.min(we,Math.max(T,Ue))-Ue)/Te*_+d),Le,Re);return R&&d<=at&&at<=p?(Be=at,He=d,Xe=p,De=I,H.fold(function(){var gt=Math.round((Be-He)/De)*De;return rx(He+gt,He-1,Xe+1)},function(gt){var Xt=Math.round((Be-gt)%De/De),Lt=Math.floor((Be-gt)/De),nn=Math.floor((Xe-gt)/De),_n=Math.min(nn,Lt+Xt);return Math.max(gt,gt+_n*De)})):W?Math.round(at):at}function yT(s){var d=s.min,T=s.value;return T<d?s.hasMinEdge?0:s.centerMinEdge:s.max<T?s.hasMaxEdge?s.maxBound:s.centerMaxEdge:(T-d)/s.range*s.maxOffset}function mh(s){return s.element.dom.getBoundingClientRect()}function Ro(s){return mh(s)[JC]}function ox(s){return mh(s).right}function Bw(s){return mh(s).top}function bT(s){return mh(s).bottom}function xT(s){return mh(s).width}function _T(s){return mh(s).height}function wT(s,d){var p=mh(s),_=mh(d);return(p[JC]+p.right)/2-_[JC]}function ST(s,d){var p=mh(s),_=mh(d);return(p.top+p.bottom)/2-_.top}function n_(s,d){kr(s,d_(),{value:d})}function _y(s,d,p){return t_({min:vy(d),max:hh(d),range:nx(d),value:p,step:Qv(d),snap:Lw(d),snapStart:BC(d),rounded:mT(d),hasMinEdge:zC(d),hasMaxEdge:a2(d),minBound:Ro(s),maxBound:ox(s),screenRange:xT(s)})}function ix(s){return function(d,p){return n_(d,{x:T=(0<s?vT:e_)(fm(_=p).x,vy(_),hh(_),Qv(_))}),X.some(T).map($e);var _,T}}function pd(s,d,p,_,T,I){var R,H,W,ee,ue,he,we,Te,Le=(H=I,W=p,ee=_,ue=T,he=xT(R=d),we=ee.bind(function(Re){return X.some(wT(Re,R))}).getOr(0),Te=ue.bind(function(Re){return X.some(wT(Re,R))}).getOr(he),yT({min:vy(H),max:hh(H),range:nx(H),value:W,hasMinEdge:zC(H),hasMaxEdge:a2(H),minBound:Ro(R),minOffset:0,maxBound:ox(R),maxOffset:he,centerMinEdge:we,centerMaxEdge:Te}));return Ro(d)-Ro(s)+Le}function nf(s,d){kr(s,d_(),{value:d})}function gm(s,d,p){return t_({min:cg(d),max:Bi(d),range:by(d),value:p,step:Qv(d),snap:Lw(d),snapStart:BC(d),rounded:mT(d),hasMinEdge:pT(d),hasMaxEdge:s2(d),minBound:Bw(s),maxBound:bT(s),screenRange:_T(s)})}function zw(s){return function(d,p){return nf(d,{y:T=(0<s?vT:e_)(fm(_=p).y,cg(_),Bi(_),Qv(_))}),X.some(T).map($e);var _,T}}function Fw(s,d,p,_,T,I){var R,H,W,ee,ue,he,we,Te,Le=(H=I,W=p,ee=_,ue=T,he=_T(R=d),we=ee.bind(function(Re){return X.some(ST(Re,R))}).getOr(0),Te=ue.bind(function(Re){return X.some(ST(Re,R))}).getOr(he),yT({min:cg(H),max:Bi(H),range:by(H),value:W,hasMinEdge:pT(H),hasMaxEdge:s2(H),minBound:Bw(R),minOffset:0,maxBound:bT(R),maxOffset:he,centerMinEdge:we,centerMaxEdge:Te}));return Bw(d)-Bw(s)+Le}function ax(s,d){kr(s,d_(),{value:d})}function Cp(s,d){return{x:s,y:d}}function wy(s,d){return function(p,_){return I=_,R=0<s?vT:e_,ax(p,Cp(H=(T=d)?fm(I).x:R(fm(I).x,vy(I),hh(I),Qv(I)),T?R(fm(I).y,cg(I),Bi(I),Qv(I)):fm(I).y)),X.some(H).map($e);var T,I,R,H}}function Sy(s){return"<alloy.field."+s+">"}function CT(s){return Kw[s]}function Vw(s,d,p){return er.config(xo({store:{mode:"manual",getValue:d,setValue:p}},s.map(function(_){return{store:{initialValue:_}}}).getOr({})))}function r_(s){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:s},behaviours:Ln([eo.config({ignore:!0}),Ko.config({})])}}function VC(s){return{dom:{tag:"div",classes:["tox-navobj"]},components:[r_([Oy]),s,r_([$w])],behaviours:Ln([Iy(1)])}}function HC(s,d){kr(s,nd(),{raw:{which:9,shiftKey:d}})}function kT(s,d){var p=d.element;ou(p,Oy)?HC(s,!0):ou(p,$w)&&HC(s,!1)}function o_(s){return qv(s,["."+Oy,"."+$w].join(","),qe)}function Cy(s,d){return Jw(document.createElement("canvas"),s,d)}function l2(s){var d=Cy(s.width,s.height);return fg(d).drawImage(s,0,0),d}function Hw(s){return s.naturalWidth||s.width}function i_(s){return s.naturalHeight||s.height}function a_(s,d,p){return d=d||"image/png",Ae(HTMLCanvasElement.prototype.toBlob)?new Of(function(T,I){s.toBlob(function(R){R?T(R):I()},d,p)}):(_=s.toDataURL(d,p),new Of(function(T,I){(function(){var R=_.split(","),H=/data:([^;]+)/.exec(R[0]);if(!H)return X.none();for(var W=H[1],ue=atob(R[1]),he=ue.length,we=Math.ceil(he/1024),Te=new Array(we),Le=0;Le<we;++Le){for(var Re=1024*Le,Be=Math.min(1024+Re,he),He=new Array(Be-Re),Xe=Re,De=0;Xe<Be;++De,++Xe)He[De]=ue[Xe].charCodeAt(0);Te[Le]=new Uint8Array(He)}return X.some(new Blob(Te,{type:W}))})().fold(function(){I("uri is not base64: "+_)},T)}));var _}function mm(s,d,p){function _(T,I){return s.then(function(R){return R.toDataURL(T||"image/png",I)})}return{getType:F(d.type),toBlob:function(){return Of.resolve(d)},toDataURL:F(p),toBase64:function(){return p.split(",")[1]},toAdjustedBlob:function(T,I){return s.then(function(R){return a_(R,T,I)})},toAdjustedDataURL:_,toAdjustedBase64:function(T,I){return _(T,I).then(function(R){return R.split(",")[1]})},toCanvas:function(){return s.then(l2)}}}function pm(s,d){return a_(s,d).then(function(p){return mm(Of.resolve(s),p,s.toDataURL())})}function e0(s,d,p){var _="string"==typeof s?parseFloat(s):s;return p<_?_=p:_<d&&(_=d),_}function Ww(s,d){for(var p=[],_=new Array(25),T=0;T<5;T++){for(var I=0;I<5;I++)p[I]=d[I+5*T];for(I=0;I<5;I++){for(var R=0,H=0;H<5;H++)R+=s[I+5*H]*p[H];_[I+5*T]=R}}return _}function vm(s,d){return s.toCanvas().then(function(p){return ZT(p,s.getType(),d)})}function ux(s){return function(d,p){return vm(d,s([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],p))}}function vd(s,d){void 0===d&&(d=2);var p=Math.pow(10,d),_=Math.round(s*p);return Math.ceil(_/p)}function WC(s){return of(s)}function GC(s){return _2(s)}function lx(s,d){return tS(s,d)}function UC(s,d){return Ey(s,d)}function TT(s,d){return eS(s,d)}function MT(s,d){return _=d,(p=s).toCanvas().then(function(T){return rk(T,p.getType(),_)});var p,_}function jC(s,d){return _=d,(p=s).toCanvas().then(function(T){return ri(T,p.getType(),_)});var p,_}function cx(s,d,p){return ah(s,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:p},d)}function t0(s,d){return cx(s,d,[])}function Ty(s,d){return cx(s,d,[no.config({})])}function u_(s,d,p){return{dom:{tag:"span",innerHtml:p.translate(s),classes:[d+"__select-label"]},behaviours:Ln([no.config({})])}}function Gw(s,d,p){function _(ue,he){var we=er.getValue(ue);return eo.focus(we),kr(we,"keydown",{raw:he.event.raw}),rf.close(we),X.some(!0)}var T=wr(j),I=s.text.map(function(ue){return ui(u_(ue,d,p.providers))}),R=s.icon.map(function(ue){return ui(Ty(ue,p.providers.icons))}),H=s.role.fold(function(){return{}},function(ue){return{role:ue}}),W=s.tooltip.fold(function(){return{}},function(ue){var he=p.providers.translate(ue);return{title:he,"aria-label":he}}),ee=ah("chevron-down",{tag:"div",classes:[d+"__select-chevron"]},p.providers.icons);return ui(rf.sketch(de(de(de({},s.uid?{uid:s.uid}:{}),H),{dom:{tag:"button",classes:[d,d+"--select"].concat(Ot(s.classes,function(ue){return d+"--"+ue})),attributes:de({},W)},components:ly([R.map(function(ue){return ue.asSpec()}),I.map(function(ue){return ue.asSpec()}),X.some(ee)]),matchWidth:!0,useMinWidth:!0,dropdownBehaviours:Ln(le(le([],s.dropdownBehaviours,!0),[Zb(function(){return s.disabled||p.providers.isDisabled()}),Ya(),Ay.config({}),no.config({}),Kn("dropdown-events",[Ub(s,T),P1(s,T)]),Kn("menubutton-update-display-text",[mn(Wc,function(ue,he){I.bind(function(we){return we.getOpt(ue)}).each(function(we){no.set(we,[Zl(p.providers.translate(he.event.text))])})}),mn(S2,function(ue,he){R.bind(function(we){return we.getOpt(ue)}).each(function(we){no.set(we,[Ty(he.event.icon,p.providers.icons)])})})])],!1)),eventOrder:xo(nS,{mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]}),sandboxBehaviours:Ln([Rr.config({mode:"special",onLeft:_,onRight:_})]),lazySink:p.getSink,toggleClass:d+"--active",parts:{menu:QS(0,0,s.presets)},fetch:function(ue){return wp(Ee(s.fetch,ue))}}))).asSpec()}function My(s){return"separator"===s.type}function dg(s,d,p,_){var T=Sr("primary-menu"),I=rS(s,p.shared.providers.menuItems());if(0===I.items.length)return X.none();var R=U1(T,I.items,d,p,_),H=yn(I.menus,function(ee,ue){return U1(ue,ee,d,p,!1)}),W=xo(H,bc(T,R));return X.from(fp.tieredData(T,W,I.expansions))}function qC(s){return{isDisabled:function(){return xr.isDisabled(s)},setDisabled:function(d){return xr.set(s,d)},setActive:function(d){var p=s.element;d?(Qa(p,"tox-tbtn--enabled"),Ir(p,"aria-pressed",!0)):(_i(p,"tox-tbtn--enabled"),pa(p,"aria-pressed"))},isActive:function(){return ou(s.element,"tox-tbtn--enabled")}}}function Uw(s,d,p,_){return Gw({text:s.text,icon:s.icon,tooltip:s.tooltip,role:_,fetch:function(T,I){s.fetch(function(R){I(dg(R,ag.CLOSE_ON_EXECUTE,p,!1))})},onSetup:s.onSetup,getApi:qC,columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ko.config({})]},d,p.shared)}function XC(s,d,p,_,T,I){void 0===p&&(p=[]);var R=d.fold(function(){return{}},function(ee){return{action:ee}}),H=de({buttonBehaviours:Ln([Zb(function(){return s.disabled||I.isDisabled()}),Ya(),Ko.config({}),Kn("button press",[Nm("click"),Nm("mousedown")])].concat(p)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},R),W=xo(H,{dom:_});return xo(W,{components:T})}function DT(s,d,p,_){void 0===_&&(_=[]);var T={tag:"button",classes:["tox-tbtn"],attributes:s.tooltip.map(function(R){return{"aria-label":p.translate(R),title:p.translate(R)}}).getOr({})},I=s.icon.map(function(R){return t0(R,p.icons)});return XC(s,d,_,T,ly([I]),p)}function YC(s,d,p,_){void 0===_&&(_=[]);var T=DT(s,X.some(d),p,_);return Iu.sketch(T)}function AT(s,d,p,_,T){void 0===_&&(_=[]),void 0===T&&(T=[]);var I=p.translate(s.text),R=s.icon?s.icon.map(function(ue){return t0(ue,p.icons)}):X.none(),H=R.isSome()?ly([R]):[],W=R.isSome()?{}:{innerHtml:I},ee=le(le(le(le([],s.primary||s.borderless?["tox-button"]:["tox-button","tox-button--secondary"],!0),R.isSome()?["tox-button--icon"]:[],!0),s.borderless?["tox-button--naked"]:[],!0),T,!0);return XC(s,d,_,de(de({tag:"button",classes:ee},W),{attributes:{title:I}}),H,p)}function IT(s,d,p,_,T){void 0===_&&(_=[]),void 0===T&&(T=[]);var I=AT(s,X.some(d),p,_,T);return Iu.sketch(I)}function dx(s,d){return function(p){"custom"===d?kr(p,bp,{name:s,value:{}}):"submit"===d?Lo(p,sc):"cancel"===d?Lo(p,Qb):console.error("Unknown button type: ",d)}}function Hc(s,d,p){if("menu"===d){var _=s,T=ui(Uw(de(de({},s),{onSetup:function(ee){return ee.setDisabled(s.disabled),j},fetch:(I=_.items,R=function(){return T},H=p,function(ee){ee(Ot(I,function(ue){var he,we,Te=ue.text.fold(function(){return{}},function(Le){return{text:Le}});return de(de({type:ue.type,active:!1},Te),{onAction:function(Le){var Re=!Le.isActive();Le.setActive(Re),we.storage.set(Re),H.shared.getSink().each(function(Be){R().getOpt(Be).each(function(He){rd(He.element),kr(He,bp,{name:we.name,value:we.storage.get()})})})},onSetup:(he=we=ue,function(Le){Le.setActive(he.storage.get())})})}))})}),"tox-tbtn",p,X.none()));return T.asSpec()}var I,R,H;if("custom"===d||"cancel"===d||"submit"===d){var W=dx(s.name,d);return IT(de(de({},s),{borderless:!1}),W,p.shared.providers,[])}console.error("Unknown footer button type: ",d)}function OT(s,d){return du({factory:ni,name:s,overrides:function(p){return{fieldBehaviours:Ln([Kn("coupled-input-behaviour",[mn(Wi(),function(_){Bo(_,p,d).bind(Io.getCurrent).each(function(T){Bo(_,p,"lock").each(function(I){Ho.isOn(I)&&p.onLockedChange(_,T,I)})})})])])}}})}function ET(s){var d=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(s);if(null===d)return yo.error(s);var p=parseFloat(d[1]);return yo.value({value:p,unit:d[2]})}function PT(s,d){function p(T){return ir(_,T)}var _={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1};return s.unit===d?X.some(s.value):p(s.unit)&&p(d)?X.some(_[s.unit]===_[d]?s.value:s.value/_[s.unit]*_[d]):X.none()}function jw(s){return X.none()}function NT(s,d){function p(he){return ah(he,{tag:"span",classes:["tox-icon","tox-lock-icon__"+he]},d.icons)}function _(he){return{dom:{tag:"div",classes:["tox-form__group"]},components:he}}function T(he){return ni.parts.field({factory:X1,inputClasses:["tox-textfield"],inputBehaviours:Ln([xr.config({disabled:function(){return s.disabled||d.isDisabled()}}),Ya(),Ko.config({}),Kn("size-input-events",[mn(Nd(),function(we,Te){kr(we,H,{isField1:he})}),mn(wl(),function(we,Te){kr(we,ef,{name:s.name})})])]),selectOnFocus:!1})}function I(he){return{dom:{tag:"label",classes:["tox-label"],innerHtml:d.translate(he)}}}var R=jw,H=Sr("ratio-event"),W=Ou.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:d.translate(s.label.getOr("Constrain proportions"))}},components:[p("lock"),p("unlock")],buttonBehaviours:Ln([xr.config({disabled:function(){return s.disabled||d.isDisabled()}}),Ya(),Ko.config({})])}),ee=Ou.parts.field1(_([ni.parts.label(I("Width")),T(!0)])),ue=Ou.parts.field2(_([ni.parts.label(I("Height")),T(!1)]));return Ou.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[ee,ue,_([I("&nbsp;"),W])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function(he,we,Te){ET(er.getValue(he)).each(function(Le){R(Le).each(function(Re){var Be,He,Xe,De;er.setValue(we,(De=-1!==(De=(Be=Re).value.toFixed((He=Be.unit)in(Xe={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4})?Xe[He]:1)).indexOf(".")?De.replace(/\.?0*$/,""):De)+Be.unit)})})},coupledFieldBehaviours:Ln([xr.config({disabled:function(){return s.disabled||d.isDisabled()},onDisabled:function(he){Ou.getField1(he).bind(ni.getField).each(xr.disable),Ou.getField2(he).bind(ni.getField).each(xr.disable),Ou.getLock(he).each(xr.disable)},onEnabled:function(he){Ou.getField1(he).bind(ni.getField).each(xr.enable),Ou.getField2(he).bind(ni.getField).each(xr.enable),Ou.getLock(he).each(xr.enable)}}),Ya(),Kn("size-input-events2",[mn(H,function(he,we){var Te,Le,Re,Be=we.event.isField1,He=Be?Ou.getField1(he):Ou.getField2(he),Xe=Be?Ou.getField2(he):Ou.getField1(he),De=He.map(er.getValue).getOr("");Te=Xe.map(er.getValue).getOr(""),Le=ET(De).toOptional(),Re=ET(Te).toOptional(),R=Vt(Le,Re,function(at,gt){return PT(at,gt.unit).map(function(Xt){return gt.value/Xt}).map(function(Xt){return Lt=Xt,nn=gt.unit,function(_n){return PT(_n,nn).map(function(an){return{value:an*Lt,unit:nn}})};var Lt,nn}).getOr(jw)}).getOr(jw)})])])})}function fx(s){if(xe(s.changedTouches))for(var d="screenX screenY pageX pageY clientX clientY".split(" "),p=0;p<d.length;p++)s[d[p]]=s.changedTouches[0][d[p]]}function Dy(s,d){return{uid:s.uid,dom:s.dom,components:d,behaviours:ja(s.formBehaviours,[er.config({store:{mode:"manual",getValue:function(p){return yn(qd(p,s),function(_,T){return _().bind(function(I){var R=Io.getCurrent(I),H=new Error("Cannot find a current component to extract the value from for form part '"+T+"': "+Id(I.element));return R.fold(function(){return yo.error(H)},yo.value)}).map(er.getValue)})},setValue:function(p,_){jt(_,function(T,I){Bo(p,s,I).each(function(R){Io.getCurrent(R).each(function(H){er.setValue(H,T)})})})}}})]),apis:{getField:function(p,_){return Bo(p,s,_).bind(Io.getCurrent)}}}}function kp(){return Io.config({find:X.some})}function l_(s){return d=Yp,p=Lm,Vw(s,function(_){return d(_.element)},function(_,T){return p(_.element,T)});var d,p}(Yv=tf=tf||{})[Yv.HighlightFirst=0]="HighlightFirst",Yv[Yv.HighlightNone=1]="HighlightNone";var ZC,LT,c_,BT,c2=function(s,d){return s.getSystem().getByUid(d.uid+"-"+fT()).map(function(p){return function(){return yo.value(p)}}).getOrThunk(function(){return d.lazySink.fold(function(){return function(){return yo.error(new Error("No internal sink is specified, nor could an external sink be found"))}},function(p){return function(){return p(s)}})})},KC=F([bn("dom"),bn("fetch"),No("onOpen"),Vu("onExecute"),It("getHotspot",X.some),It("getAnchorOverrides",F({})),Ng(),ns("dropdownBehaviours",[Ho,Na,Rr,eo]),bn("toggleClass"),It("eventOrder",{}),Xo("lazySink"),It("matchWidth",!1),It("useMinWidth",!1),Xo("role")].concat($1())),d2=F([Lc({schema:[ku()],name:"menu",defaults:function(s){return{onExecute:s.onExecute}}}),dm()]),rf=Xa({name:"Dropdown",configFields:KC(),partFields:d2(),factory:function(s,d,p,_){function T(W){po.getState(W).each(function(ee){fp.highlightPrimary(ee)})}function I(W,ee){return Md(W),X.some(!0)}var R,H={expand:function(W){Ho.isOn(W)||ex(s,U,W,_,j,tf.HighlightNone).get(j)},open:function(W){Ho.isOn(W)||ex(s,U,W,_,j,tf.HighlightFirst).get(j)},isOpen:Ho.isOn,close:function(W){Ho.isOn(W)&&ex(s,U,W,_,j,tf.HighlightFirst).get(j)},repositionMenus:function(W){Ho.isOn(W)&&gT(W)}};return{uid:s.uid,dom:s.dom,components:d,behaviours:ja(s.dropdownBehaviours,[Ho.config({toggleClass:s.toggleClass,aria:{mode:"expanded"}}),Na.config({others:{sandbox:function(W){return K1(s,W,{onOpen:function(){return Ho.on(W)},onClose:function(){return Ho.off(W)}})}}}),Rr.config({mode:"special",onSpace:I,onEnter:I,onDown:function(W,ee){return rf.isOpen(W)?T(Na.getCoupled(W,"sandbox")):rf.open(W),X.some(!0)},onEscape:function(W,ee){return rf.isOpen(W)?(rf.close(W),X.some(!0)):X.none()}}),eo.config({})]),events:fa(X.some(function(W){ex(s,U,W,_,T,tf.HighlightFirst).get(j)})),eventOrder:de(de({},s.eventOrder),((R={})[Ca()]=["disabling","toggling","alloy.base.behaviour"],R)),apis:H,domModification:{attributes:de(de({"aria-haspopup":"true"},s.role.fold(function(){return{}},function(W){return{role:W}})),"button"===s.dom.tag?{type:sn(s.dom,"attributes").bind(function(W){return sn(W,"type")}).getOr("button")}:{})}}},apis:{open:function(s,d){return s.open(d)},expand:function(s,d){return s.expand(d)},close:function(s,d){return s.close(d)},isOpen:function(s,d){return s.isOpen(d)},repositionMenus:function(s,d){return s.repositionMenus(d)}}}),Ay=yi({fields:[],name:"unselecting",active:Object.freeze({__proto__:null,events:function(){return Qo([Rs(Ss(),$e)])},exhibit:function(){return ed({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}})}),$C=Sr("color-input-change"),Tp=Sr("color-swatch-change"),ph=Sr("color-picker-cancel"),zT=dd({schema:[bn("dom")],name:"label"}),qw=Zv("top-left"),hx=Zv("top"),f2=Zv("top-right"),RD=Zv("right"),h2=Zv("bottom-right"),g2=Zv("bottom"),FT=Zv("bottom-left"),LD=[zT,Zv("left"),RD,hx,g2,qw,f2,FT,h2,du({name:"thumb",defaults:F({dom:{styles:{position:"absolute"}}}),overrides:function(s){return{events:Qo([Ph(Zs(),s,"spectrum"),Ph(Cu(),s,"spectrum"),Ph(fs(),s,"spectrum"),Ph(Kl(),s,"spectrum"),Ph(Kp(),s,"spectrum"),Ph(Pd(),s,"spectrum")])}}}),du({schema:[Su("mouseIsDown",function(){return wr(!1)})],name:"spectrum",overrides:function(s){function d(_,T){return p.getValueFromEvent(T).map(function(I){return p.setValueFrom(_,s,I)})}var p=s.model.manager;return{behaviours:Ln([Rr.config({mode:"special",onLeft:function(_){return p.onLeft(_,s)},onRight:function(_){return p.onRight(_,s)},onUp:function(_){return p.onUp(_,s)},onDown:function(_){return p.onDown(_,s)}}),eo.config({})]),events:Qo([mn(Zs(),d),mn(Cu(),d),mn(Kl(),d),mn(Kp(),function(_,T){s.mouseIsDown.get()&&d(_,T)})])}}})],d_=F("slider.change.value"),JC="left",VT=ix(-1),gx=ix(1),Xw=X.none,m2=X.none,HT={"top-left":X.none(),top:X.none(),"top-right":X.none(),right:X.some(function(s,d){gh(s,{x:yy(d)})}),"bottom-right":X.none(),bottom:X.none(),"bottom-left":X.none(),left:X.some(function(s,d){gh(s,{x:Kv(d)})})},WT=Object.freeze({__proto__:null,setValueFrom:function(s,d,p){var _=_y(s,d,p);return n_(s,{x:_}),_},setToMin:function(s,d){n_(s,{x:vy(d)})},setToMax:function(s,d){n_(s,{x:hh(d)})},findValueOfOffset:_y,getValueFromEvent:function(s){return LC(s).map(function(d){return d.left})},findPositionOfValue:pd,setPositionFromValue:function(s,d,p,_){var T=fm(p),I=pd(s,_.getSpectrum(s),T.x,_.getLeftEdge(s),_.getRightEdge(s),p),R=fn(d.element)/2;Qr(d.element,"left",I-R+"px")},onLeft:VT,onRight:gx,onUp:Xw,onDown:m2,edgeActions:HT}),n0=X.none,Yw=X.none,mx=zw(-1),GT=zw(1),QC={"top-left":X.none(),top:X.some(function(s,d){gh(s,{y:J1(d)})}),"top-right":X.none(),right:X.none(),"bottom-right":X.none(),bottom:X.some(function(s,d){gh(s,{y:$v(d)})}),"bottom-left":X.none(),left:X.none()},vh=Object.freeze({__proto__:null,setValueFrom:function(s,d,p){var _=gm(s,d,p);return nf(s,{y:_}),_},setToMin:function(s,d){nf(s,{y:cg(d)})},setToMax:function(s,d){nf(s,{y:Bi(d)})},findValueOfOffset:gm,getValueFromEvent:function(s){return LC(s).map(function(d){return d.top})},findPositionOfValue:Fw,setPositionFromValue:function(s,d,p,_){var T=fm(p),I=Fw(s,_.getSpectrum(s),T.y,_.getTopEdge(s),_.getBottomEdge(s),p),R=Os(d.element)/2;Qr(d.element,"top",I-R+"px")},onLeft:n0,onRight:Yw,onUp:mx,onDown:GT,edgeActions:QC}),p2=LC,v2=wy(-1,!1),y2=wy(1,!1),f_=wy(-1,!0),r0=wy(1,!0),UT={"top-left":X.some(function(s,d){gh(s,hm(Kv(d),J1(d)))}),top:X.some(function(s,d){gh(s,hm(Q1(d),J1(d)))}),"top-right":X.some(function(s,d){gh(s,hm(yy(d),J1(d)))}),right:X.some(function(s,d){gh(s,hm(yy(d),Jv(d)))}),"bottom-right":X.some(function(s,d){gh(s,hm(yy(d),$v(d)))}),bottom:X.some(function(s,d){gh(s,hm(Q1(d),$v(d)))}),"bottom-left":X.some(function(s,d){gh(s,hm(Kv(d),$v(d)))}),left:X.some(function(s,d){gh(s,hm(Kv(d),Jv(d)))})},jT=Object.freeze({__proto__:null,setValueFrom:function(s,d,p){var _=Cp(_y(s,d,p.left),gm(s,d,p.top));return ax(s,_),_},setToMin:function(s,d){ax(s,Cp(vy(d),cg(d)))},setToMax:function(s,d){ax(s,Cp(hh(d),Bi(d)))},getValueFromEvent:p2,setPositionFromValue:function(s,d,p,_){var T=fm(p),I=pd(s,_.getSpectrum(s),T.x,_.getLeftEdge(s),_.getRightEdge(s),p),R=Fw(s,_.getSpectrum(s),T.y,_.getTopEdge(s),_.getBottomEdge(s),p),H=fn(d.element)/2,W=Os(d.element)/2;Qr(d.element,"left",I-H+"px"),Qr(d.element,"top",R-W+"px")},onLeft:v2,onRight:y2,onUp:f_,onDown:r0,edgeActions:UT}),rs=Xa({name:"Slider",configFields:[It("stepSize",1),It("onChange",j),It("onChoose",j),It("onInit",j),It("onDragStart",j),It("onDragEnd",j),It("snapToGrid",!1),It("rounded",!0),Xo("snapStart"),Bu("model",Ys("mode",{x:[It("minX",0),It("maxX",100),Su("value",function(s){return wr(s.mode.minX)}),bn("getInitialValue"),Zo("manager",WT)],y:[It("minY",0),It("maxY",100),Su("value",function(s){return wr(s.mode.minY)}),bn("getInitialValue"),Zo("manager",vh)],xy:[It("minX",0),It("maxX",100),It("minY",0),It("maxY",100),Su("value",function(s){return wr({x:s.mode.minX,y:s.mode.minY})}),bn("getInitialValue"),Zo("manager",jT)]})),ns("sliderBehaviours",[Rr,er]),Su("mouseIsDown",function(){return wr(!1)})],partFields:LD,factory:function(s,d,p,_){function T(Xe){return ca(Xe,s,"thumb")}function I(Xe){return ca(Xe,s,"spectrum")}function R(Xe){return Bo(Xe,s,"left-edge")}function H(Xe){return Bo(Xe,s,"right-edge")}function W(Xe){return Bo(Xe,s,"top-edge")}function ee(Xe){return Bo(Xe,s,"bottom-edge")}function ue(Xe,De){He.setPositionFromValue(Xe,De,s,{getLeftEdge:R,getRightEdge:H,getTopEdge:W,getBottomEdge:ee,getSpectrum:I})}function he(Xe,De){Be.value.set(De),ue(Xe,T(Xe))}function we(Xe){var De=s.mouseIsDown.get();s.mouseIsDown.set(!1),De&&Bo(Xe,s,"thumb").each(function(Ue){var at=Be.value.get();s.onChoose(Xe,Ue,at)})}function Te(Xe,De){De.stop(),s.mouseIsDown.set(!0),s.onDragStart(Xe,T(Xe))}function Le(Xe,De){De.stop(),s.onDragEnd(Xe,T(Xe)),we(Xe)}var Re,Be=s.model,He=Be.manager;return{uid:s.uid,dom:s.dom,components:d,behaviours:ja(s.sliderBehaviours,[Rr.config({mode:"special",focusIn:function(Xe){return Bo(Xe,s,"spectrum").map(Rr.focusIn).map($e)}}),er.config({store:{mode:"manual",getValue:function(Xe){return Be.value.get()}}}),nc.config({channels:((Re={})[Hs()]={onReceive:we},Re)})]),events:Qo([mn(d_(),function(Xe,De){!function(Ue,at){he(Ue,at);var gt=T(Ue);s.onChange(Ue,gt,at),X.some(!0)}(Xe,De.event.value)}),Xi(function(Xe,De){var Ue=Be.getInitialValue();Be.value.set(Ue);var at=T(Xe);ue(Xe,at);var gt=I(Xe);s.onInit(Xe,at,gt,Be.value.get())}),mn(Zs(),Te),mn(fs(),Le),mn(Kl(),Te),mn(Pd(),Le)]),apis:{resetToMin:function(Xe){He.setToMin(Xe,s)},resetToMax:function(Xe){He.setToMax(Xe,s)},setValue:he,refresh:ue},domModification:{styles:{position:"relative"}}}},apis:{setValue:function(s,d,p){s.setValue(d,p)},resetToMin:function(s,d){s.resetToMin(d)},resetToMax:function(s,d){s.resetToMax(d)},refresh:function(s,d){s.refresh(d)}}}),qT=Sr("rgb-hex-update"),Zw=Sr("slider-update"),px=Sr("palette-update"),XT=[ns("formBehaviours",[er])],Ef={getField:Ls(function(s,d,p){return s.getField(d,p)}),sketch:function(s){var d,p={field:function(I,R){return d.push(I),lu("form",Sy(I),R)},record:F(d=[])},_=s(p),T=Ot(p.record(),function(I){return du({name:I,pname:Sy(I)})});return ms("form",XT,T,Dy,_)}},ek=Sr("valid-input"),o0=Sr("invalid-input"),b2=Sr("validating-input"),h_="colorcustom.rgb.",Mp=function(s){return Io.config({find:s.getOpt})},Iy=function(s){return Io.config({find:function(d){return Xr(d.element,s).bind(function(p){return d.getSystem().getByDom(p).toOptional()})}})},Kw={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","colorcustom.sb.saturation":"Saturation","colorcustom.sb.brightness":"Brightness","colorcustom.sb.picker":"Saturation and Brightness Picker","colorcustom.sb.palette":"Saturation and Brightness Palette","colorcustom.sb.instructions":"Use arrow keys to select saturation and brightness, on x and y axes","colorcustom.hue.hue":"Hue","colorcustom.hue.slider":"Hue Slider","colorcustom.hue.palette":"Hue Palette","colorcustom.hue.instructions":"Use arrow keys to select a hue","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},YT=tinymce.util.Tools.resolve("tinymce.Resource"),Dp=tinymce.util.Tools.resolve("tinymce.util.Tools"),tk=Pr([It("preprocess",U),It("postprocess",U)]),BD=function(s,d){var p=bs("RepresentingConfigs.memento processors",tk,d);return er.config({store:{mode:"manual",getValue:function(_){var T=s.get(_),I=er.getValue(T);return p.postprocess(I)},setValue:function(_,T){var I=p.preprocess(T),R=s.get(_);er.setValue(R,I)}}})},vx=Vw,yx=function(s){return er.config({store:{mode:"memory",initialValue:s}})},Oy=Sr("alloy-fake-before-tabstop"),$w=Sr("alloy-fake-after-tabstop"),x2=!(ml().browser.isIE()||ml().browser.isEdge()),fg=function(s){return s.getContext("2d")},Jw=function(s,d,p){return s.width=d,s.height=p,s},Qw=[0,.01,.02,.04,.05,.06,.07,.08,.1,.11,.12,.14,.15,.16,.17,.18,.2,.21,.22,.24,.25,.27,.28,.3,.32,.34,.36,.38,.4,.42,.44,.46,.48,.5,.53,.56,.59,.62,.65,.68,.71,.74,.77,.8,.83,.86,.89,.92,.95,.98,1,1.06,1.12,1.18,1.24,1.3,1.36,1.42,1.48,1.54,1.6,1.66,1.72,1.78,1.84,1.9,1.96,2,2.12,2.25,2.37,2.5,2.62,2.75,2.87,3,3.2,3.4,3.6,3.8,4,4.3,4.7,4.9,5,5.5,6,6.5,6.8,7,7.3,7.5,7.8,8,8.4,8.7,9,9.4,9.6,9.8,10],ZT=function(s,d,p){var _=fg(s),T=function(I){for(var R,H,W,ee,ue=I.data,he=p[0],we=p[1],Te=p[2],Le=p[3],Re=p[4],Be=p[5],He=p[6],Xe=p[7],De=p[8],Ue=p[9],at=p[10],gt=p[11],Xt=p[12],Lt=p[13],nn=p[14],_n=p[15],an=p[16],kn=p[17],Vn=p[18],sr=p[19],Ar=0;Ar<ue.length;Ar+=4)ue[Ar]=(R=ue[Ar])*he+(H=ue[Ar+1])*we+(W=ue[Ar+2])*Te+(ee=ue[Ar+3])*Le+Re,ue[Ar+1]=R*Be+H*He+W*Xe+ee*De+Ue,ue[Ar+2]=R*at+H*gt+W*Xt+ee*Lt+nn,ue[Ar+3]=R*_n+H*an+W*kn+ee*Vn+sr;return I}(_.getImageData(0,0,s.width,s.height));return _.putImageData(T,0,0),pm(s,d)},of=(ZC=[-1,0,0,0,255,0,-1,0,0,255,0,0,-1,0,255,0,0,0,1,0,0,0,0,0,1],function(s){return vm(s,ZC)}),Ey=ux(function(s,d){return Ww(s,[1,0,0,0,d=e0(255*d,-255,255),0,1,0,0,d,0,0,1,0,d,0,0,0,1,0,0,0,0,0,1])}),eS=ux(function(s,d){var p;return d=e0(d,-1,1),Ww(s,[(p=(d*=100)<0?127+d/100*127:127*(0==(p=d%1)?Qw[d]:Qw[Math.floor(d)]*(1-p)+Qw[Math.floor(d)+1]*p)+127)/127,0,0,0,.5*(127-p),0,p/127,0,0,.5*(127-p),0,0,p/127,0,.5*(127-p),0,0,0,1,0,0,0,0,0,1])}),_2=(LT=[0,-1,0,-1,5,-1,0,-1,0],function(s){return p=LT,(d=s).toCanvas().then(function(_){return T=_,I=d.getType(),R=p,W=function(ee,ue,he){for(var we=function(sr,Ar,lo){return lo<sr?sr=lo:sr<Ar&&(sr=Ar),sr},Te=Math.round(Math.sqrt(he.length)),Le=Math.floor(Te/2),Re=ee.data,Be=ue.data,He=ee.width,Xe=ee.height,De=0;De<Xe;De++)for(var Ue=0;Ue<He;Ue++){for(var at=0,gt=0,Xt=0,Lt=0;Lt<Te;Lt++)for(var nn=0;nn<Te;nn++){var _n=we(Ue+nn-Le,0,He-1),an=4*(we(De+Lt-Le,0,Xe-1)*He+_n),kn=he[Lt*Te+nn];at+=Re[an]*kn,gt+=Re[1+an]*kn,Xt+=Re[2+an]*kn}var Vn=4*(De*He+Ue);Be[Vn]=we(at,0,255),Be[1+Vn]=we(gt,0,255),Be[2+Vn]=we(Xt,0,255)}return ue}((H=fg(T)).getImageData(0,0,T.width,T.height),H.getImageData(0,0,T.width,T.height),R),H.putImageData(W,0,0),pm(T,I);var T,I,R,H,W});var d,p}),tS=(c_=function(s,d){return 255*Math.pow(s/255,1-d)},function(s,d){return s.toCanvas().then(function(p){return function(_,T,I){for(var R=fg(_),H=new Array(256),W=0;W<H.length;W++)H[W]=c_(W,I);var ee=function(ue,he){for(var we=ue.data,Te=0;Te<we.length;Te+=4)we[Te]=he[we[Te]],we[Te+1]=he[we[Te+1]],we[Te+2]=he[we[Te+2]];return ue}(R.getImageData(0,0,_.width,_.height),H);return R.putImageData(ee,0,0),pm(_,T)}(p,s.getType(),d)})}),hg=function(s,d,p){var _=Hw(s),T=i_(s),I=d/_,R=p/T,H=!1;(I<.5||2<I)&&(I=I<.5?.5:2,H=!0),(R<.5||2<R)&&(R=R<.5?.5:2,H=!0);var W=nk(s,I,R);return H?W.then(function(ee){return hg(ee,d,p)}):W},nk=function(s,d,p){return new Of(function(_){var T=Hw(s),I=i_(s),R=Math.floor(T*d),H=Math.floor(I*p),W=Cy(R,H);fg(W).drawImage(s,0,0,T,I,0,0,R,H),_(W)})},ri=function(s,d,p){var _=(p<0?360+p:p)*Math.PI/180,T=s.width,I=s.height,R=Math.sin(_),H=Math.cos(_),W=vd(Math.abs(T*H)+Math.abs(I*R)),ee=vd(Math.abs(T*R)+Math.abs(I*H)),ue=Cy(W,ee),he=fg(ue);return he.translate(W/2,ee/2),he.rotate(_),he.drawImage(s,-T/2,-I/2),pm(ue,d)},rk=function(s,d,p){var _=Cy(s.width,s.height),T=fg(_);return"v"===p?(T.scale(1,-1),T.drawImage(s,0,-_.height)):(T.scale(-1,1),T.drawImage(s,-_.width,0)),pm(_,d)},KT=Sr("toolbar.button.execute"),nS=((BT={})[Ca()]=["disabling","alloy.base.behaviour","toggling","toolbar-button-events"],BT),Wc=Sr("update-menu-text"),S2=Sr("update-menu-icon"),Gc={type:"separator"},rS=function(s,d){var p,_,T;return Tn((p=$(s)?s.split(" "):s,_=d,0<(T=to(p,function(I,R){return $(R)?""===R?I:"|"===R?0<I.length&&!My(I[I.length-1])?I.concat([Gc]):I:ir(_,R.toLowerCase())?I.concat([_[R.toLowerCase()]]):I:I.concat([R])},[])).length&&My(T[T.length-1])&&T.pop(),T),function(I,R){var H,W,ee,ue,he,we,Te=function(Re){if(My(Re))return Re;var Be=sn(Re,"value").getOrThunk(function(){return Sr("generated-menu-item")});return xo({value:Be},Re)}(R),Le=(W=d,ir(H=Te,"getSubmenuItems")?(ue=W,he=(ee=H).getSubmenuItems(),we=rS(he,ue),{item:ee,menus:xo(we.menus,bc(ee.value,we.items)),expansions:xo(we.expansions,bc(ee.value,ee.value))}):{item:H,menus:{},expansions:{}});return{menus:xo(I.menus,Le.menus),items:[Le.item].concat(I.items),expansions:xo(I.expansions,Le.expansions)}},{menus:{},expansions:{},items:[]})},Py=F([It("field1Name","field1"),It("field2Name","field2"),Hm("onLockedChange"),jr(["lockClass"]),It("locked",!1),Yg("coupledFieldBehaviours",[Io,er])]),C2=F([OT("field1","field2"),OT("field2","field1"),du({factory:Iu,schema:[bn("dom")],name:"lock",overrides:function(s){return{buttonBehaviours:Ln([Ho.config({selected:s.locked,toggleClass:s.markers.lockClass,aria:{mode:"pressed"}})])}}})]),Ou=Xa({name:"FormCoupledInputs",configFields:Py(),partFields:C2(),factory:function(s,d,p,_){return{uid:s.uid,dom:s.dom,components:d,behaviours:Nc(s.coupledFieldBehaviours,[Io.config({find:X.some}),er.config({store:{mode:"manual",getValue:function(T){var I=i1(T,s,["field1","field2"]),R={};return R[s.field1Name]=er.getValue(I.field1()),R[s.field2Name]=er.getValue(I.field2()),R},setValue:function(T,I){var R=i1(T,s,["field1","field2"]);qr(I,s.field1Name)&&er.setValue(R.field1(),I[s.field1Name]),qr(I,s.field2Name)&&er.setValue(R.field2(),I[s.field2Name])}}})]),apis:{getField1:function(T){return Bo(T,s,"field1")},getField2:function(T){return Bo(T,s,"field2")},getLock:function(T){return Bo(T,s,"lock")}}}},apis:{getField1:function(s,d){return s.getField1(d)},getField2:function(s,d){return s.getField2(d)},getLock:function(s,d){return s.getLock(d)}}}),ha={undo:F(Sr("undo")),redo:F(Sr("redo")),zoom:F(Sr("zoom")),back:F(Sr("back")),apply:F(Sr("apply")),swap:F(Sr("swap")),transform:F(Sr("transform")),tempTransform:F(Sr("temp-transform")),transformApply:F(Sr("transform-apply"))},FD=F("save-state"),Ny=F("disable"),$T=F("enable"),lc={formActionEvent:bp,saveState:FD,disable:Ny,enable:$T},Ry=tinymce.util.Tools.resolve("tinymce.geom.Rect"),i0=tinymce.util.Tools.resolve("tinymce.util.Observable"),ym=tinymce.util.Tools.resolve("tinymce.util.VK");function bx(s,d,p,_,T){return YC({name:s,icon:X.some(d),disabled:p,tooltip:X.some(s),primary:!1,borderless:!1},_,T)}function JT(s,d){d?xr.enable(s):xr.disable(s)}var Ly=0;function T2(s,d){function p(an){var kn=De.getHistoryStates();Xt.updateButtonUndoStates(an,kn.undoEnabled,kn.redoEnabled),kr(an,lc.formActionEvent,{name:lc.saveState(),value:kn.undoEnabled})}function _(an){return an.toBlob()}function T(an){kr(an,lc.formActionEvent,{name:lc.disable(),value:{}})}function I(an,kn,Vn,sr,Ar){T(an),function ky(s){return d=s,new Of(function(p){var _=new FileReader;_.onloadend=function(){p(_.result)},_.readAsDataURL(d)}).then(function(p){return mm((_=s,new Of(function(T,I){function R(){W.removeEventListener("load",ee),W.removeEventListener("error",ue)}var H=URL.createObjectURL(_),W=new Image,ee=function(){R(),T(W)},ue=function(){R(),I("Unable to load data of type "+_.type+": "+H)};W.addEventListener("load",ee),W.addEventListener("error",ue),W.src=H,W.complete&&setTimeout(ee,0)}).then(function(T){!function(s){URL.revokeObjectURL(s.src)}(T);var I=Cy(Hw(T),i_(T));return fg(I).drawImage(T,0,0),I})),s,p);var _});var d}(kn).then(Vn).then(_).then(sr).then(function(lo){return at(an,lo)}).then(function(){p(an),Ar(),Ue(an)}).catch(function(lo){console.log(lo),an.getSystem().isConnected()&&Ue(an)})}function R(an,kn,Vn){I(an,De.getBlobState().blob,kn,function(sr){return De.updateTempState(sr)},Vn)}function H(an){var kn=De.getBlobState().url;return De.destroyTempState(),p(an),kn}var W,ee,ue,he,we,Te,Le,Re,Be,He,Xe,De=function QT(s){var d,p,_,T,I=wr(s),R=Ai(),H=(p=-1,{data:d=[],add:function(Te){var Le=d.splice(++p);return d.push(Te),{state:Te,removed:Le}},undo:function(){if(_())return d[--p]},redo:function(){if(T())return d[++p]},canUndo:_=function(){return 0<p},canRedo:T=function(){return-1!==p&&p<d.length-1}});function W(Te){I.set(Te)}function ee(Te){URL.revokeObjectURL(Te.url)}function ue(Te){var Le=he(Te);W(Le);var Re=H.add(Le).removed;return Dp.each(Re,ee),Le.url}function he(Te){return{blob:Te,url:URL.createObjectURL(Te)}}function we(){R.on(ee),R.clear()}return H.add(s),{getBlobState:function(){return I.get()},setBlobState:W,addBlobState:ue,getTempState:function(){return R.get().getOrThunk(I.get)},updateTempState:function(Te){var Le=he(Te);return we(),R.set(Le),Le.url},addTempState:function(Te){var Le=he(Te);return R.set(Le),Le.url},applyTempState:function(Te){return R.get().fold(j,function(Le){ue(Le.blob),Te()})},destroyTempState:we,undo:function(){var Te=H.undo();return W(Te),Te.url},redo:function(){var Te=H.redo();return W(Te),Te.url},getHistoryStates:function(){return{undoEnabled:H.canUndo(),redoEnabled:H.canRedo()}}}}(s.currentState),Ue=function(an){Lt.getApplyButton(an).each(function(kn){xr.enable(kn)}),kr(an,lc.formActionEvent,{name:lc.enable(),value:{}})},at=function(an,kn){return T(an),gt.updateSrc(an,kn)},gt=(he=s.currentState.url,Te=ui({dom:{tag:"div",classes:["tox-image-tools__image-bg"],attributes:{role:"presentation"}}}),Le=wr(1),we=al(),Re=de(de({},we),{run:function(an){return we.get().each(an)}}),Be=wr({x:0,y:0,w:1,h:1}),He=wr({x:0,y:0,w:1,h:1}),{memContainer:Xe=ui(ba.sketch({dom:{tag:"div",classes:["tox-image-tools__image"]},components:[Te.asSpec(),{dom:{tag:"img",attributes:{src:he}}},{dom:{tag:"div"},behaviours:Ln([Kn("image-panel-crop-events",[Xi(function(an){Xe.getOpt(an).each(function(kn){var sr=function(s,d,p,_,T){function I(De,Ue){return{x:Ue.x-De.x,y:Ue.y-De.y,w:Ue.w,h:Ue.h}}function R(De,Ue,at,gt){var Xt=Ue.x+at*De.deltaX,Lt=Ue.y+gt*De.deltaY,nn=Math.max(20,Ue.w+at*De.deltaW),_n=Math.max(20,Ue.h+gt*De.deltaH),an=(s=Ry.clamp({x:Xt,y:Lt,w:nn,h:_n},p,"move"===De.name),I(p,s));Xe.fire("updateRect",{rect:an}),Be(an)}function H(De){W(s=De)}function W(De){function Ue(at,gt){ra(Te,"#"+we+"-"+at).each(function(Xt){aa(Xt,{left:gt.x+"px",top:gt.y+"px",width:Math.max(0,gt.w)+"px",height:Math.max(0,gt.h)+"px"})})}ur(Le,function(at){ra(Te,"#"+we+"-"+at.name).each(function(gt){aa(gt,{left:De.w*at.xMul+De.x+"px",top:De.h*at.yMul+De.y+"px"})})}),Ue("top",{x:d.x,y:d.y,w:d.w,h:De.y-d.y}),Ue("right",{x:De.x+De.w,y:De.y,w:d.w-De.x-De.w+d.x,h:De.h}),Ue("bottom",{x:d.x,y:De.y+De.h,w:d.w,h:d.h-De.y-De.h+d.y}),Ue("left",{x:d.x,y:De.y,w:De.x-d.x,h:De.h}),Ue("move",De)}var ee,ue,he=[],we="tox-crid-"+Ly++,Te=ct.fromDom(_),Le=[{name:"move",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:0,deltaH:0,label:"Crop Mask"},{name:"nw",xMul:0,yMul:0,deltaX:1,deltaY:1,deltaW:-1,deltaH:-1,label:"Top Left Crop Handle"},{name:"ne",xMul:1,yMul:0,deltaX:0,deltaY:1,deltaW:1,deltaH:-1,label:"Top Right Crop Handle"},{name:"sw",xMul:0,yMul:1,deltaX:1,deltaY:0,deltaW:-1,deltaH:1,label:"Bottom Left Crop Handle"},{name:"se",xMul:1,yMul:1,deltaX:0,deltaY:0,deltaW:1,deltaH:1,label:"Bottom Right Crop Handle"}],Re=["top","right","bottom","left"],Be=function(De){var Ue;H({x:De.x+(Ue=p).x,y:De.y+Ue.y,w:De.w,h:De.h})};function He(De){Ir(De.target,"aria-grabbed","focus"===De.raw.type?"true":"false")}fc(ue=ct.fromTag("div"),{id:we,class:"tox-croprect-container",role:"grid","aria-dropeffect":"execute"}),ta(Te,ue),ur(Re,function(De){ra(Te,"#"+we).each(function(Ue){var at=ct.fromTag("div");fc(at,{id:we+"-"+De,class:"tox-croprect-block","data-mce-bogus":"all"}),Qr(at,"display","none"),ta(Ue,at)})}),ur(Le,function(De){ra(Te,"#"+we).each(function(Ue){var at=ct.fromTag("div");fc(at,{id:we+"-"+De.name,"aria-label":De.label,"aria-grabbed":"false","data-mce-bogus":"all",role:"gridcell",tabindex:"-1",title:De.label}),Xl(at,["tox-croprect-handle","tox-croprect-handle-"+De.name]),Qr(at,"display","none"),ta(Ue,at)})}),ee=Ot(Le,function(De){var Ue;return function k2(s,d){function p(Xe){var De,Ue,at,gt,Xt,Lt,nn,_n,an=Xe.raw,kn=(gt=(De=Math.max)((Ue=Te.documentElement).scrollWidth,(at=Te.body).scrollWidth),Xt=De(Ue.clientWidth,at.clientWidth),Lt=De(Ue.offsetWidth,at.offsetWidth),nn=De(Ue.scrollHeight,at.scrollHeight),_n=De(Ue.clientHeight,at.clientHeight),{width:gt<Lt?Xt:gt,height:nn<De(Ue.offsetHeight,at.offsetHeight)?_n:nn});fx(an),Xe.prevent(),W=an.button,ee=an.screenX,ue=an.screenY;var Vn=Is(Be,"cursor");aa(H=ct.fromTag("div",Te),{position:"absolute",top:"0",left:"0",width:kn.width+"px",height:kn.height+"px","z-index":"2147483647",opacity:"0.0001",cursor:Vn}),ta(Th(Re),H),we.push(Ua(Re,"mousemove",_),Ua(Re,"touchmove",_),Ua(Re,"mouseup",He),Ua(Re,"touchend",He)),d.start(an)}function _(Xe){var De=Xe.raw;if(fx(De),De.button!==W)return He(Xe);De.deltaX=De.screenX-ee,De.deltaY=De.screenY-ue,Xe.prevent(),d.drag(De)}var T,I,R,H,W,ee,ue,he=[],we=[],Te=null!==(T=d.document)&&void 0!==T?T:document,Le=null!==(I=d.root)&&void 0!==I?I:Te,Re=ct.fromDom(Te),Be=ct.fromDom(Le.getElementById(null!==(R=d.handle)&&void 0!==R?R:s)),He=function(Xe){fx(Xe.raw),ur(we,function(De){return De.unbind()}),we=[],Cd(H),d.stop&&d.stop(Xe.raw)};return he.push(Ua(Be,"mousedown",p),Ua(Be,"touchstart",p)),{destroy:function(){ur(we.concat(he),function(Xe){return Xe.unbind()}),we=[],he=[],xe(H)&&Cd(H)}}}(we,{document:_.ownerDocument,root:sa(Te).dom,handle:we+"-"+De.name,start:function(){Ue=s},drag:function(at){R(De,Ue,at.deltaX,at.deltaY)}})}),W(s),he.push(Ua(Te,"focusin",He),Ua(Te,"focusout",He),Ua(Te,"keydown",function(De){var Ue;function at(gt,Xt,Lt,nn,_n){gt.stopPropagation(),gt.preventDefault(),R(Ue,Lt,nn,_n)}switch(ur(Le,function(gt){if(vi(De.target,"id")===we+"-"+gt.name)return Ue=gt,!1}),De.raw.keyCode){case ym.LEFT:at(De,0,s,-10,0);break;case ym.RIGHT:at(De,0,s,10,0);break;case ym.UP:at(De,0,s,0,-10);break;case ym.DOWN:at(De,0,s,0,10);break;case ym.ENTER:case ym.SPACEBAR:De.prevent(),T()}}));var Xe=de(de({},i0),{toggleVisibility:function(De){var Ue=le(le([],Ot(Le,function(gt){return"#"+we+"-"+gt.name}),!0),Ot(Re,function(gt){return"#"+we+"-"+gt}),!0).join(","),at=Qs(Te,Ue);ur(at,De?function(gt){return Co(gt,"display")}:function(gt){return Qr(gt,"display","none")})},setClampRect:function(De){p=De,W(s)},setRect:H,getInnerRect:function(){return I(p,s)},setInnerRect:Be,setViewPortRect:function(De){d=De,W(s)},destroy:function(){ur(ee,function(De){return De.destroy()}),ee=[],ur(he,function(De){return De.unbind()}),he=[]}});return Xe}({x:10,y:10,w:100,h:100},{x:0,y:0,w:200,h:200},{x:0,y:0,w:200,h:200},kn.element.dom,j);sr.toggleVisibility(!1),sr.on("updateRect",function(Ar){var lo=Ar.rect,Jo=Le.get(),gi={x:Math.round(lo.x/Jo),y:Math.round(lo.y/Jo),w:Math.round(lo.w/Jo),h:Math.round(lo.h/Jo)};Be.set(gi)}),Re.set(sr)})}),Cl(function(){Re.clear()})])])}],containerBehaviours:Ln([no.config({}),Kn("image-panel-events",[Xi(function(an){_n(an,he)})])])})),updateSrc:_n,zoom:function(an,kn){var Vn=Le.get(),sr=0<kn?Math.min(2,Vn+.1):Math.max(.1,Vn-.1);Le.set(sr),Xe.getOpt(an).each(function(Ar){var lo=Ar.components()[1].element;nn(Ar,lo)})},showCrop:function(){Re.run(function(an){an.toggleVisibility(!0)})},hideCrop:function(){Re.run(function(an){an.toggleVisibility(!1)})},getRect:function(){return Be.get()},getMeasurements:function(){var an=He.get();return{width:an.w,height:an.h}}}),Xt=(ee=ui(bx("Undo","undo",!0,function(an){kr(an,ha.undo(),{direction:1})},W=d)),ue=ui(bx("Redo","redo",!0,function(an){kr(an,ha.redo(),{direction:1})},W)),{container:ba.sketch({dom:{tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools__sidebar"]},components:[ee.asSpec(),ue.asSpec(),bx("Zoom in","zoom-in",!1,function(an){kr(an,ha.zoom(),{direction:1})},W),bx("Zoom out","zoom-out",!1,function(an){kr(an,ha.zoom(),{direction:-1})},W)]}),updateButtonUndoStates:function(an,kn,Vn){ee.getOpt(an).each(function(sr){JT(sr,kn)}),ue.getOpt(an).each(function(sr){JT(sr,Vn)})}}),Lt=function RT(s,d){function p(Qn,co,Vi,ia){return ui(IT({name:Qn,text:Qn,disabled:Vi,primary:ia,icon:X.none(),borderless:!1},co,d))}function _(Qn,co,Vi,ia){return ui(YC({name:Qn,icon:X.some(Qn),tooltip:X.some(co),disabled:ia,primary:!1,borderless:!1},Vi,d))}function T(Qn,co){Qn.map(function(Vi){var ia=Vi.get(co);ia.hasConfigured(xr)&&xr.disable(ia)})}function I(Qn,co){Qn.map(function(Vi){var ia=Vi.get(co);ia.hasConfigured(xr)&&xr.enable(ia)})}function R(Qn,co,Vi){kr(Qn,co,Vi)}function H(Qn){return Lo(Qn,lc.disable()),0}function W(Qn){return Lo(Qn,lc.enable()),0}function ee(Qn,co){H(Qn),R(Qn,ha.transform(),{transform:co}),W(Qn)}function ue(Qn){return function(){Ei.getOpt(Qn).each(function(co){no.set(co,[Ds])})}}function he(Qn,co){H(Qn),R(Qn,ha.transformApply(),{transform:co,swap:ue(Qn)}),W(Qn)}function we(){return p("Back",function(Qn){return R(Qn,ha.back(),{swap:ue(Qn)})},!1,!1)}function Te(){return ui({dom:{tag:"div",classes:["tox-spacer"]},behaviours:Ln([xr.config({})])})}function Le(){return p("Apply",function(Qn){return R(Qn,ha.apply(),{swap:ue(Qn)})},!0,!0)}function Re(Qn,co){return function(Vi){return Qn(Vi,co)}}function Be(Qn,co){var Vi,ia=co;H(Vi=Qn),R(Vi,ha.tempTransform(),{transform:ia}),W(Vi)}function He(Qn,co,Vi,ia,La){var lf=rs.parts.label({dom:{tag:"label",classes:["tox-label"],innerHtml:d.translate(Qn)}}),Nu=rs.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),qu=rs.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return ui(rs.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:Vi,maxX:La,getInitialValue:F({x:ia})},components:[lf,Nu,qu],sliderBehaviours:Ln([eo.config({})]),onChoose:co}))}function Xe(Qn,co,Vi,ia,La){var lf,Nu,qu,jc,zl,fl,hl=(lf=Qn,Nu=co,qu=Vi,jc=ia,zl=La,[we(),(fl=Nu,He(lf,function(Xu,Bp,Fo){ee(Xu,Re(fl,Fo.x/100))},qu,jc,zl)),Le()]);return ba.sketch({dom:at,components:hl.map(function(Xu){return Xu.asSpec()}),containerBehaviours:Ln([Kn("image-tools-filter-panel-buttons-events",[mn(lc.disable(),function(Xu,Bp){T(hl,Xu)}),mn(lc.enable(),function(Xu,Bp){I(hl,Xu)})])])})}function De(Qn){return He(Qn,function(co,Vi,ia){var La=Ji.getOpt(co),lf=xa.getOpt(co),Nu=oi.getOpt(co);La.each(function(qu){lf.each(function(jc){Nu.each(function(zl){var fl,hl,Xu,Bp=er.getValue(qu).x/100,Fo=er.getValue(zl).x/100,Rf=er.getValue(jc).x/100,cf=(fl=Bp,hl=Fo,Xu=Rf,function(Zy){return vm(Zy,(I_=hl,O_=Xu,Ww([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1],[e0(fl,0,2),0,0,0,0,0,e0(I_,0,2),0,0,0,0,0,e0(O_,0,2),0,0,0,0,0,1,0,0,0,0,0,1])));var I_,O_});ee(co,cf)})})})},0,100,200)}function Ue(Qn,co,Vi){return function(ia){R(ia,ha.swap(),{transform:co,swap:function(){Ei.getOpt(ia).each(function(La){no.set(La,[Qn]),Vi(La)})}})}}var at={tag:"div",classes:["tox-image-tools__toolbar","tox-image-tools-edit-panel"]},gt=j,Xt=[we(),Te(),p("Apply",function(Qn){he(Qn,function(co){var Nu,qu,jc,zl,fl,hl=s.getRect();return qu=hl.x,jc=hl.y,zl=hl.w,fl=hl.h,(Nu=co).toCanvas().then(function(Xu){return function(s,d,p,_,T,I){var R=Cy(T,I);return fg(R).drawImage(s,-p,-_),pm(R,d)}(Xu,Nu.getType(),qu,jc,zl,fl)})}),s.hideCrop()},!1,!0)],Lt=ba.sketch({dom:at,components:Xt.map(function(Qn){return Qn.asSpec()}),containerBehaviours:Ln([Kn("image-tools-crop-buttons-events",[mn(lc.disable(),function(Qn,co){T(Xt,Qn)}),mn(lc.enable(),function(Qn,co){I(Xt,Qn)})])])}),nn=ui(NT({name:"size",label:X.none(),constrain:!0,disabled:!1},d)),_n=[we(),Te(),nn,Te(),p("Apply",function(Qn){nn.getOpt(Qn).each(function(co){var Vi,ia,La=er.getValue(co),lf=parseInt(La.width,10),Nu=parseInt(La.height,10),qu=(Vi=lf,ia=Nu,function(jc){return fl=Vi,hl=ia,(zl=jc).toCanvas().then(function(Xu){return hg(Xu,fl,hl).then(function(Bp){return pm(Bp,zl.getType())})});var zl,fl,hl});he(Qn,qu)})},!1,!0)],an=ba.sketch({dom:at,components:_n.map(function(Qn){return Qn.asSpec()}),containerBehaviours:Ln([Kn("image-tools-resize-buttons-events",[mn(lc.disable(),function(Qn,co){T(_n,Qn)}),mn(lc.enable(),function(Qn,co){I(_n,Qn)})])])}),kn=Re(MT,"h"),Vn=Re(MT,"v"),sr=Re(jC,-90),Ar=Re(jC,90),lo=[we(),Te(),_("flip-horizontally","Flip horizontally",function(Qn){Be(Qn,kn)},!1),_("flip-vertically","Flip vertically",function(Qn){Be(Qn,Vn)},!1),_("rotate-left","Rotate counterclockwise",function(Qn){Be(Qn,sr)},!1),_("rotate-right","Rotate clockwise",function(Qn){Be(Qn,Ar)},!1),Te(),Le()],Jo=ba.sketch({dom:at,components:lo.map(function(Qn){return Qn.asSpec()}),containerBehaviours:Ln([Kn("image-tools-fliprotate-buttons-events",[mn(lc.disable(),function(Qn,co){T(lo,Qn)}),mn(lc.enable(),function(Qn,co){I(lo,Qn)})])])}),gi=[we(),Te(),Le()],Fi=ba.sketch({dom:at,components:gi.map(function(Qn){return Qn.asSpec()})}),Uo=Xe("Brightness",UC,-100,0,100),mi=Xe("Contrast",TT,-100,0,100),Ci=Xe("Gamma",lx,-100,0,100),Ji=De("R"),oi=De("G"),xa=De("B"),dl=[we(),Ji,oi,xa,Le()],yd=ba.sketch({dom:at,components:dl.map(function(Qn){return Qn.asSpec()})}),uf=X.some(GC),_a=X.some(WC),pg=[_("crop","Crop",Ue(Lt,X.none(),function(Qn){s.showCrop()}),!1),_("resize","Resize",Ue(an,X.none(),function(Qn){nn.getOpt(Qn).each(function(co){var Vi=s.getMeasurements();er.setValue(co,{width:Vi.width,height:Vi.height})})}),!1),_("orientation","Orientation",Ue(Jo,X.none(),gt),!1),_("brightness","Brightness",Ue(Uo,X.none(),gt),!1),_("sharpen","Sharpen",Ue(Fi,uf,gt),!1),_("contrast","Contrast",Ue(mi,X.none(),gt),!1),_("color-levels","Color levels",Ue(yd,X.none(),gt),!1),_("gamma","Gamma",Ue(Ci,X.none(),gt),!1),_("invert","Invert",Ue(Fi,_a,gt),!1)],Ds=ba.sketch({dom:at,components:pg.map(function(Qn){return Qn.asSpec()})}),Ei=ui(ba.sketch({dom:{tag:"div"},components:[Ds],containerBehaviours:Ln([no.config({})])}));return{memContainer:Ei,getApplyButton:function(Qn){return Ei.getOpt(Qn).map(function(co){var Vi=co.components()[0];return Vi.components()[Vi.components().length-1]})}}}(gt,d);function nn(an,kn){Xe.getOpt(an).each(function(Vn){var sr=Le.get(),Ar=fn(Vn.element),lo=Os(Vn.element),Jo=kn.dom.naturalWidth*sr,gi=kn.dom.naturalHeight*sr,Fi=Math.max(0,Ar/2-Jo/2),Uo=Math.max(0,lo/2-gi/2),mi={left:Fi.toString()+"px",top:Uo.toString()+"px",width:Jo.toString()+"px",height:gi.toString()+"px",position:"absolute"};aa(kn,mi),Te.getOpt(Vn).each(function(Ci){aa(Ci.element,mi)}),Re.run(function(Ci){var Ji=Be.get();Ci.setRect({x:Ji.x*sr+Fi,y:Ji.y*sr+Uo,w:Ji.w*sr,h:Ji.h*sr}),Ci.setClampRect({x:Fi,y:Uo,w:Jo,h:gi}),Ci.setViewPortRect({x:0,y:0,w:Ar,h:lo})})})}function _n(an,kn){var Vn,sr=ct.fromTag("img");return Ir(sr,"src",kn),Vn=sr.dom,new k1(function(Ar){var lo=function(){Vn.removeEventListener("load",lo),Ar(Vn)};Vn.complete?Ar(Vn):Vn.addEventListener("load",lo)}).then(function(){an.getSystem().isConnected()&&Xe.getOpt(an).map(function(Ar){var lo=ev({element:sr});no.replaceAt(Ar,1,X.some(lo));var Jo=He.get(),gi={x:0,y:0,w:sr.dom.naturalWidth,h:sr.dom.naturalHeight};He.set(gi);var Fi,Uo=Ry.inflate(gi,-20,-20);Be.set(Uo),Jo.w===gi.w&&Jo.h===gi.h||(Fi=sr,Xe.getOpt(Ar).each(function(mi){var Ci=fn(mi.element),Ji=Os(mi.element),dl=Math.min(Ci/Fi.dom.naturalWidth,Ji/Fi.dom.naturalHeight);Le.set(1<=dl?1:dl)})),nn(Ar,sr)})})}return{dom:{tag:"div",attributes:{role:"presentation"}},components:[Lt.memContainer.asSpec(),gt.memContainer.asSpec(),Xt.container],behaviours:Ln([er.config({store:{mode:"manual",getValue:function(){return De.getBlobState()}}}),Kn("image-tools-events",[mn(ha.undo(),function(an,kn){var Vn=De.undo();at(an,Vn).then(function(sr){Ue(an),p(an)})}),mn(ha.redo(),function(an,kn){var Vn=De.redo();at(an,Vn).then(function(sr){Ue(an),p(an)})}),mn(ha.zoom(),function(an,kn){gt.zoom(an,kn.event.direction)}),mn(ha.back(),function(an,kn){var Vn,sr=H(Vn=an);at(Vn,sr).then(function(Ar){Ue(Vn)}),(0,kn.event.swap)(),gt.hideCrop()}),mn(ha.apply(),function(an,kn){De.applyTempState(function(){H(an),(0,kn.event.swap)()})}),mn(ha.transform(),function(an,kn){return R(an,kn.event.transform,j)}),mn(ha.tempTransform(),function(an,kn){var Vn=kn.event.transform;I(an,De.getTempState().blob,Vn,function(sr){return De.addTempState(sr)},j)}),mn(ha.transformApply(),function(an,kn){var Vn=an,sr=kn.event.transform,Ar=kn.event.swap,lo=De.getBlobState().blob;I(Vn,lo,sr,function(Jo){var gi=De.addBlobState(Jo);return H(Vn),gi},Ar)}),mn(ha.swap(),function(an,kn){Xt.updateButtonUndoStates(an,!1,!1);var sr=kn.event.swap;kn.event.transform.fold(function(){sr()},function(Ar){R(an,Ar,sr)})})]),kp()])}}function xx(s){return!ir(s,"items")}function g_(s,d){var p=s.label.map(function(W){return lg(W,d)}),_=[xr.config({disabled:function(){return s.disabled||d.isDisabled()}}),Ya(),Rr.config({mode:"execution",useEnter:!0!==s.multiline,useControlEnter:!0===s.multiline,execute:function(W){return Lo(W,sc),X.some(!0)}}),Kn("textfield-change",[mn(Wi(),function(W,ee){kr(W,ef,{name:s.name})}),mn(Jp(),function(W,ee){kr(W,ef,{name:s.name})})]),Ko.config({})],T=s.validation.map(function(W){return Sp.config({getRoot:function(ee){return Er(ee.element)},invalidClass:"tox-invalid",validator:{validate:function(ee){var ue=er.getValue(ee),he=W.validator(ue);return dh(!0===he?yo.value(ue):yo.error(he))},validateOnLoad:W.validateOnLoad}})}).toArray(),I=s.placeholder.fold(F({}),function(W){return{placeholder:d.translate(W)}}),R=s.inputMode.fold(F({}),function(W){return{inputmode:W}}),H=de(de({},I),R);return $b(p,ni.parts.field({tag:!0===s.multiline?"textarea":"input",inputAttributes:H,inputClasses:[s.classname],inputBehaviours:Ln(Gr([_,T])),selectOnFocus:!1,factory:X1}),(s.flex?["tox-form__group--stretched"]:[]).concat(s.maximized?["tox-form-group--maximize"]:[]),[xr.config({disabled:function(){return s.disabled||d.isDisabled()},onDisabled:function(W){ni.getField(W).each(xr.disable)},onEnabled:function(W){ni.getField(W).each(xr.enable)}}),Ya()])}function By(s){var d=wr(null);return Jl({readState:function(){return{timer:null!==d.get()?"set":"unset"}},setTimer:function(p){d.set(p)},cancel:function(){var p=d.get();null!==p&&p.cancel()}})}function m_(s,d,p){var _=er.getValue(p);er.setValue(d,_),jD(d)}function iS(s,d){var p=s.element,_=Yl(p),T=p.dom;"number"!==vi(p,"type")&&d(T,_)}function ok(s){return{type:"menuitem",value:s.url,text:s.title,meta:{attach:s.attach},onAction:j}}function a0(s,d){return{type:"menuitem",value:d,text:s,meta:{attach:void 0},onAction:j}}function ik(s,d){return p=s,Ot(ln(d,function(_){return _.type===p}),ok);var p}function ak(s,d){var p=s.toLowerCase();return ln(d,function(_){return vo((void 0!==_.meta&&void 0!==_.meta.text?_.meta:_).text.toLowerCase(),p)||vo(_.value.toLowerCase(),p)})}function Gs(s){return function(d,p,_){return sn(p,"name").fold(function(){return s(p,_)},function(T){return d.field(T,s(p,_))})}}function zy(s,d,p){var _=xo(p,{shared:{interpreter:function(T){return XD(s,T,_)}}});return XD(s,d,_)}function sk(s,d,p){function _(){return ct.fromDom(s.getContentAreaContainer())}function T(){return Re||!p()}var I,R,H,W,ee,ue,he,we,Te,Le,Re=vp(s);return{inlineDialog:(he=_,we=d,Te=T,Le={maxHeightFunction:nr()},function(){return Te()?{type:"node",root:Ti(he()),node:X.from(he()),bubble:Mc(12,12,vI),layouts:{onRtl:function(){return[K0]},onLtr:function(){return[Af]}},overrides:Le}:{type:"hotspot",hotspot:we(),bubble:Mc(-12,12,vI),layouts:{onRtl:function(){return[Fs]},onLtr:function(){return[su]}},overrides:Le}}),banner:(W=_,ee=d,ue=T,function(){return ue()?{type:"node",root:Ti(W()),node:X.from(W()),layouts:{onRtl:function(){return[Kd]},onLtr:function(){return[Kd]}}}:{type:"hotspot",hotspot:ee(),layouts:{onRtl:function(){return[Go]},onLtr:function(){return[Go]}}}}),cursor:(R=s,function(){return{type:"selection",root:H(),getSelection:function(){var Be=R.selection.getRng();return X.some(eh.range(ct.fromDom(Be.startContainer),Be.startOffset,ct.fromDom(Be.endContainer),Be.endOffset))}}}),node:(I=H=function(){return ct.fromDom(s.getBody())},function(Be){return{type:"node",root:I(),node:Be}})}}function sS(s){return X.from(s.getParam("style_formats")).filter(oe).map(function(d){var p,_,T=(p=s,_=ZD(d),p.formatter?I(_.customFormats):p.on("init",function(){I(_.customFormats)}),_.formats);function I(R){ur(R,function(H){p.formatter.has(H.name)||p.formatter.register(H.name,H.format)})}return s.getParam("style_formats_merge",!1,"boolean")?YD.concat(T):T}).getOr(YD)}function uS(s,d,p){var _={type:"formatter",isSelected:d(s.format),getStylePreview:p(s.format)};return xo(s,_)}function eM(s,d,p,_){var T=function(I){return Ot(I,function(R){var H,W,ee,ue,he,we=pi(R);if(qr(R,"items")){var Te=T(R.items);return xo(xo(R,{type:"submenu"}),{getStyleItems:F(Te)})}return qr(R,"format")?uS(R,p,_):1===we.length&&ki(we,"title")?xo(R,{type:"separator"}):(ue={type:"formatter",format:ee="custom-"+(W=$((H=R).name)?H.name:Sr(H.title)),isSelected:p(ee),getStylePreview:_(ee)},he=xo(H,ue),s.formatter.register(W,he),he)})};return T(d)}function _x(s){return function(d){return!(!xe(p=d)||1!==p.nodeType||d.contentEditable!==s&&d.getAttribute("data-mce-contenteditable")!==s);var p}}function Ap(s,d,p,_,T){return{type:s,title:d,url:p,level:_,attach:T}}function i(s){return s.innerText||s.textContent}function c(s){return s&&"A"===s.nodeName&&void 0!==(s.id||s.name)&&aM(s)}function h(s){return s&&/^(H[1-6])$/.test(s.nodeName)}function y(s){return h(s)&&aM(s)}function w(s){var d,p=s.id||Sr("h");return Ap("header",i(s),"#"+p,h(d=s)?parseInt(d.nodeName.substr(1),10):0,function(){s.id=p})}function D(s){var d=s.id||s.name;return Ap("anchor",i(s)||"#"+d,"#"+d,0,j)}function O(s){return 0<KD(s.title).length}function P(s){return $(s)&&/^https?/.test(s)}function B(s){return Z(s)&&cr(s,function(d){return!(oe(p=d)&&p.length<=5&&xt(p,P));var p}).isNone()}function L(){var s,d=lh.getItem(sM);if(null===d)return{};try{s=JSON.parse(d)}catch(p){if(p instanceof SyntaxError)return console.log("Local storage "+sM+" was not valid JSON",p),{};throw p}return B(s)?s:(console.log("Local storage "+sM+" was not valid format",s),{})}function K(s){return sn(L(),s).getOr([])}function q(s,d){var p,_;P(s)&&(_=ln(sn(p=L(),d).getOr([]),function(T){return T!==s}),p[d]=[s].concat(_).slice(0,5),function(T){if(!B(T))throw new Error("Bad format for history:\n"+JSON.stringify(T));lh.setItem(sM,JSON.stringify(T))}(p))}function re(s){return!!s}function fe(s){return yn(Dp.makeMap(s,/[, ]/),re)}function ve(s){return X.from(s.getParam("file_picker_callback")).filter(Ae)}function be(s){return X.from(s).filter($).getOrUndefined()}function Ce(s){return{getHistory:K,addToHistory:q,getLinkInformation:function(){return!1===(d=s).getParam("typeahead_urls")?X.none():X.some({targets:bI(d.getBody()),anchorTop:be(d.getParam("anchor_top","#top")),anchorBottom:be(d.getParam("anchor_bottom","#bottom"))});var d},getValidationHandler:function(){return X.from(void 0===(p=(d=s).getParam("file_picker_validator_handler",void 0,"function"))?d.getParam("filepicker_validator_handler",void 0,"function"):p);var d,p},getUrlPicker:function(d){return p=ee=s,_=ue=d,I=X.some((T=p).getParam("file_picker_types")).filter(re),R=X.some(T.getParam("file_browser_callback_types")).filter(re),H=I.or(R).map(fe),W=ve(T).fold(qe,function(he){return H.fold($e,function(we){return 0<pi(we).length&&we})}),(Q(W)?W?ve(p):X.none():W[_]?ve(p):X.none()).map(function(he){return function(we){return wp(function(Te){var Le=de({filetype:ue,fieldname:we.fieldname},X.from(we.meta).getOr({}));he.call(ee,function(Re,Be){if(!$(Re))throw new Error("Expected value to be string");if(void 0!==Be&&!Z(Be))throw new Error("Expected meta to be a object");Te({value:Re,meta:Be})},we.value,Le)})}});var p,_,T,I,R,H,W,ee,ue}}}function Oe(s){return(fr(Ni(s,"position"),"fixed")?X.none():mo(s)).orThunk(function(){var d=ct.fromTag("span");return Er(s).bind(function(p){ta(p,d);var _=mo(d);return Cd(d),_})})}function ze(s){return Oe(s).map(df).getOrThunk(function(){return Mi(0,0)})}function ot(s,d){var p=s.element;Qa(p,d.transitionClass),_i(p,d.fadeOutClass),Qa(p,d.fadeInClass),d.onShow(s)}function yt(s,d){var p=s.element;Qa(p,d.transitionClass),_i(p,d.fadeInClass),Qa(p,d.fadeOutClass),d.onHide(s)}function Ve(s,d,p){return xt(s,function(_){switch(_){case"bottom":return d.bottom<=p.bottom;case"top":return d.y>=p.y}})}function Je(s,d){return d.getInitialPos().map(function(p){return Xs(p.bounds.x,p.bounds.y,fn(s),Os(s))})}function it(s,d,p){return p.getInitialPos().bind(function(_){switch(p.clearInitialPos(),_.position){case"static":return X.some(lM.static());case"absolute":var T=Oe(s).map(Lu).getOrThunk(function(){return Lu($u())});return X.some(lM.absolute(Tu("absolute",sn(_.style,"left").map(function(I){return d.x-T.x}),sn(_.style,"top").map(function(I){return d.y-T.y}),sn(_.style,"right").map(function(I){return T.right-d.right}),sn(_.style,"bottom").map(function(I){return T.bottom-d.bottom}))));default:return X.none()}})}function Ht(s,d,p){p.setDocked(!1),ur(["left","right","top","bottom","position"],function(_){return Co(s.element,_)}),d.onUndocked(s)}function on(s,d,p,_){var T="fixed"===_.position;p.setDocked(T),Tc(s.element,_),(T?d.onDocked:d.onUndocked)(s)}function $t(s,d,p,_,T){void 0===T&&(T=!1),d.contextual.each(function(I){I.lazyContext(s).each(function(R){var H=R.y<_.bottom&&R.bottom>_.y;H!==p.isVisible()&&(p.setVisible(H),T&&!H?(Xl(s.element,[I.fadeOutClass]),I.onHide(s)):(H?ot:yt)(s,I))})})}function bt(s,d,p){var _,T,I,R,H,W;p.isDocked()&&(T=d,W=(_=s).element,(I=p).setDocked(!1),Je(H=_.element,R=I).bind(function(ee){return it(H,ee,R)}).each(function(ee){ee.fold(function(){return Ht(_,T,I)},function(ue){return on(_,T,I,ue)},j)}),I.setVisible(!0),T.contextual.each(function(ee){_c(W,[ee.fadeInClass,ee.fadeOutClass,ee.transitionClass]),ee.onShow(_)}),QD(_,T,I))}function St(s,d){return ki(Uc.getModes(s),d)}function At(s){var d=s.element;Er(d).each(function(p){var _,T,I="padding-"+Uc.getModes(s)[0];Uc.isDocked(s)?(_=fn(p),Qr(d,"width",_+"px"),Qr(p,I,zr(T=d)+(parseInt(Is(T,"margin-top"),10)||0)+(parseInt(Is(T,"margin-bottom"),10)||0)+"px")):(Co(d,"width"),Co(p,I))})}function Yt(s,d){d?(_i(s,_m.fadeOutClass),Xl(s,[_m.transitionClass,_m.fadeInClass])):(_i(s,_m.fadeInClass),Xl(s,[_m.fadeOutClass,_m.transitionClass]))}function Nn(s,d){var p=ct.fromDom(s.getContainer());d?(Qa(p,cM),_i(p,tA)):(Qa(p,tA),_i(p,cM))}function jn(s,d){function p(W){R().each(function(ee){return W(ee.element)})}function _(W){s.inline||At(W),Nn(s,Uc.isDocked(W)),W.getSystem().broadcastOn([Xg()],{}),R().each(function(ee){return ee.getSystem().broadcastOn([Xg()],{})})}var T,I=Ai(),R=d.getSink,H=s.inline?[]:[nc.config({channels:((T={})[eA()]={onReceive:At},T)})];return le([eo.config({}),Uc.config({contextual:de({lazyContext:function(W){var ee=zr(W.element),ue=s.inline?s.getContentAreaContainer():s.getContainer(),he=Lu(ct.fromDom(ue)),we=he.height-ee,Te=he.y+(St(W,"top")?0:ee);return X.some(Xs(he.x,Te,he.width,we))},onShow:function(){p(function(W){return Yt(W,!0)})},onShown:function(W){p(function(ee){return _c(ee,[_m.transitionClass,_m.fadeInClass])}),I.get().each(function(ee){var ue,he=W.element,we=Bt(ue=ee);Vd(we).filter(function(Te){return!Sn(ue,Te)}).filter(function(Te){return Sn(Te,ct.fromDom(we.dom.body))||Fn(he,Te)}).each(function(){return rd(ue)}),I.clear()})},onHide:function(W){var ue=R;od(W.element).orThunk(function(){return ue().toOptional().bind(function(he){return od(he.element)})}).fold(I.clear,I.set),p(function(he){return Yt(he,!1)})},onHidden:function(){p(function(W){return _c(W,[_m.transitionClass])})}},_m),lazyViewport:function(W){var ee=xu(),ue=s.getParam("toolbar_sticky_offset",0,"number"),he=ee.y+(St(W,"top")?ue:0),we=ee.height-(St(W,"bottom")?ue:0);return Xs(ee.x,he,ee.width,we)},modes:[d.header.getDockingMode()],onDocked:_,onUndocked:_})],H,!0)}function In(s){return Zi("menubutton",qO,s)}function Wn(s,d){return d.getAnimationRoot.fold(function(){return s.element},function(p){return p(s)})}function Pn(s){return s.dimension.property}function Un(s,d){return s.dimension.getDimension(d)}function Hn(s,d){_c(Wn(s,d),[d.shrinkingClass,d.growingClass])}function lr(s,d){_i(s.element,d.openClass),Qa(s.element,d.closedClass),Qr(s.element,Pn(d),"0px"),Vl(s.element)}function vn(s,d){_i(s.element,d.closedClass),Qa(s.element,d.openClass),Co(s.element,Pn(d))}function Zn(s,d,p,_){p.setCollapsed(),Qr(s.element,Pn(d),Un(d,s.element)),Vl(s.element),Hn(s,d),lr(s,d),d.onStartShrink(s),d.onShrunk(s)}function Bn(s,d,p){var _=Un(d,s.element);("0px"===_?Zn:function(T,I,R,H){var W=H.getOrThunk(function(){return Un(I,T.element)});R.setCollapsed(),Qr(T.element,Pn(I),W),Vl(T.element);var ee=Wn(T,I);_i(ee,I.growingClass),Qa(ee,I.shrinkingClass),lr(T,I),I.onStartShrink(T)})(s,d,p,X.some(_))}function vr(s,d,p){var _=Wn(s,d),T=ou(_,d.shrinkingClass),I=Un(d,s.element);vn(s,d);var R=Un(d,s.element);(T?function(){Qr(s.element,Pn(d),I),Vl(s.element)}:function(){lr(s,d)})(),_i(_,d.shrinkingClass),Qa(_,d.growingClass),vn(s,d),Qr(s.element,Pn(d),R),p.setExpanded(),d.onStartGrow(s)}function hr(s,d,p){return!0===ou(Wn(s,d),d.growingClass)}function To(s,d,p){return!0===ou(Wn(s,d),d.shrinkingClass)}function st(s){return"<alloy.field."+s+">"}function kt(s){return{element:function(){return s.element.dom}}}function xn(s){return Io.getCurrent(s).bind(function(d){return Ep.isGrowing(d)||Ep.hasGrown(d)?Io.getCurrent(d).bind(function(p){return wo(Fy.getSlotNames(p),function(_){return Fy.isShowing(p,_)})}):X.none()})}function gn(s){var d=ct.fromHtml(s),p=jo(d),_=to(void 0!==d.dom.attributes?d.dom.attributes:[],function(R,H){var W;return"class"===H.name?R:de(de({},R),((W={})[H.name]=H.value,W))},{}),T=Array.prototype.slice.call(d.dom.classList,0),I=0===p.length?{}:{innerHtml:Yp(d)};return de({tag:tn(d),classes:T,attributes:_},I)}function Xn(s){return Io.getCurrent(s).each(function(d){return rd(d.element)})}function Zr(s,d,p){return{within:s,extra:d,withinWidth:p}}function zi(s,d,p){var _,T=(_=function(H,W){var ee=p(H);return X.some({element:H,start:W,finish:W+ee,width:ee})},to(s,function(H,W){return _(W,H.len).fold(F(H),function(ee){return{len:ee.finish,list:H.list.concat([ee])}})},{len:0,list:[]}).list),I=ln(T,function(H){return H.finish<=d}),R=Tn(I,function(H,W){return H+W.width},0);return{within:I,extra:T.slice(I.length),withinWidth:R}}function ro(s){return Ot(s,function(d){return d.element})}function Lr(s,d){var p=Ot(d,function(_){return Ql(_)});u0.setGroups(s,p)}function $o(s,d,p){var _,T,I,R,H,W,ee,ue,he,we,Te,Le,Re,Be,He,Xe,De,Ue,at,gt,Xt=d.builtGroups.get();0!==Xt.length&&(_=ca(s,d,"primary"),T=Na.getCoupled(s,"overflowGroup"),Qr(_.element,"visibility","hidden"),R=Gt(I=Xt.concat([T]),function(Lt){return od(Lt.element).bind(function(nn){return Lt.getSystem().getByDom(nn).toOptional()})}),p([]),Lr(_,I),H=fn(_.element),ee=H,ue=d.builtGroups.get(),we=T,Ue=(De=(0===(Te=zi(ue,ee,he=function(Lt){return fn(Lt.element)})).extra.length?X.some(Te):X.none()).getOrThunk(function(){return zi(ue,ee-he(we),he)})).within,gt=De.withinWidth,0===(W=1===(at=De.extra).length&&at[0].width<=he(we)?(Xe=gt,Zr(ro(Ue.concat(at)),[],Xe)):1<=at.length?(Re=at,Be=we,He=gt,Zr(ro(Ue).concat([Be]),ro(Re),He)):(Le=gt,Zr(ro(Ue),[],Le))).extra.length?(no.remove(_,T),p([])):(Lr(_,W.within),p(W.extra)),Co(_.element,"visibility"),Vl(_.element),R.each(eo.focus))}function Ra(s,d){var p=Na.getCoupled(s,"toolbarSandbox");po.isOpen(p)?po.close(p):po.open(p,d.toolbar())}function Ms(s,d,p,_){var T=p.getBounds.map(function(R){return R()}),I=p.lazySink(s).getOrDie();Gu.positionWithinBounds(I,d,{anchor:{type:"hotspot",hotspot:s,layouts:_,overrides:{maxWidthFunction:P2()}}},T)}function ju(s,d,p,_,T){u0.setGroups(d,T),Ms(s,d,p,_),Ho.on(s)}function Us(s){return Ot(s,function(d){return Ql(d)})}function Eu(s,d,p){$o(s,p,function(_){p.overflowGroups.set(_),d.getOpt(s).each(function(T){Sx.setGroups(T,Us(_))})})}function bm(s,d){Bo(s,d,"overflow-button").bind(function(){return Bo(s,d,"overflow")}).each(function(p){WD(s,d),Ep.toggleGrow(p)})}function yh(s){var d=s.title.fold(function(){return{}},function(p){return{attributes:{title:p}}});return{dom:de({tag:"div",classes:["tox-toolbar__group"]},d),components:[dM.parts.items({})],items:s.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled])"},tgroupBehaviours:Ln([Ko.config({}),eo.config({})])}}function Ip(s){return dM.sketch(yh(s))}function Pf(s,d){var p=Xi(function(_){var T=Ot(s.initGroups,Ip);u0.setGroups(_,T)});return Ln([vC(s.providers.isDisabled),Ya(),Rr.config({mode:d,onEscape:s.onEscape,selector:".tox-toolbar__group"}),Kn("toolbar-events",[p])])}function Op(s){var d=s.cyclicKeying?"cyclic":"acyclic";return{uid:s.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":yh({title:X.none(),items:[]}),"overflow-button":DT({name:"more",icon:X.some("more-drawer"),disabled:!1,tooltip:X.some("More..."),primary:!1,borderless:!1},X.none(),s.providers)},splitToolbarBehaviours:Pf(s,d)}}function s0(s){var d=s.cyclicKeying?"cyclic":"acyclic";return u0.sketch({uid:s.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(s.type===ac.scrolling?["tox-toolbar--scrolling"]:[])},components:[u0.parts.groups({})],toolbarBehaviours:Pf(s,d)})}function lS(s){return"string"==typeof s?s.split(" "):s}function tM(s,d){var p=de(de({},F2),d.menus),_=0<pi(d.menus).length,T=ln(lS(void 0===d.menubar||!0===d.menubar?"file edit view insert format tools table help":!1===d.menubar?"":d.menubar),function(I){var R=ir(F2,I);return _?R||sn(d.menus,I).exists(function(H){return ir(H,"items")}):R});return ln(Ot(T,function(I){var R=p[I],H={title:R.title,items:lS(R.items)},W=d,ee=s.getParam("removed_menuitems","").split(/[ ,]/);return{text:H.title,getItems:function(){return Or(H.items,function(ue){var he=ue.toLowerCase();return 0===he.trim().length||Rt(ee,function(we){return we===he})?[]:"separator"===he||"|"===he?[{type:"separator"}]:W.menuItems[he]?[W.menuItems[he]]:[]})}}}),function(I){return 0<I.getItems().length&&Rt(I.getItems(),function(R){return"separator"!==R.type})})}function uk(s){function d(){s._skinLoaded=!0,s.fire("SkinLoaded")}return function(){s.initialized?d():s.on("init",d)}}function nM(s,d,p){return new k1(function(_,T){p.load(d,_,T),s.on("remove",function(){return p.unload(d)})})}function rM(s,d){var p,_,T,I,R,W,ee,ue,he=(T=(p=d).getParam("skin"),I=p.getParam("skin_url"),!1!==T&&(_=T||"oxide",I=I?p.documentBaseURI.toAbsolute(I):Xk.baseURL+"/skins/ui/"+_),I);he&&d.contentCSS.push(he+(s?"/content.inline":"/content")+".min.css"),!1===d.getParam("skin")==0&&$(he)?k1.all([nM(d,he+"/skin.min.css",d.ui.styleSheetLoader),(W=d,ee=he,ue=ct.fromDom(W.getElement()),pc(ue).isSome()?nM(W,ee+"/skin.shadowdom.min.css",Vv.DOM.styleSheetLoader):k1.resolve())]).then(uk(d),(R=d,function(){return R.fire("SkinLoadError",{message:"Skin could not be loaded"})})):uk(d)()}function lk(s,d){return function(p){function _(){p.setActive(s.formatter.match(d));var I=s.formatter.formatChanged(d,p.setActive);T.set(I)}var T=Wd();return s.initialized?_():s.once("init",_),function(){s.off("init",_),T.clear()}}}function oM(s,d,p){return function(_){function T(){return p(_)}function I(){p(_),s.on(d,T)}return s.initialized?I():s.once("init",I),function(){s.off("init",I),s.off(d,T)}}}function VD(s){return function(d){return function(){s.undoManager.transact(function(){s.focus(),s.execCommand("mceToggleFormat",!1,d.format)})}}}function xm(s,d){return function(){return s.execCommand(d)}}function ck(s,d,p){var _,T,I,R=p.dataset;return{items:(_=d,T=p,I=function(ue,he,we){var Te="formatter"===ue.type&&T.isInvalid(ue);return 0===he?Te?[]:W(ue,he,!1,we).toArray():W(ue,he,Te,we).toArray()},{validateItems:ee,getFetch:function(ue,he){return function(we,Te){Te(dg(ee(he()),ag.CLOSE_ON_EXECUTE,ue,!1))}}}),getStyleItems:"basic"===R.type?function(){return Ot(R.data,function(ue){return uS(ue,p.isSelectedFor,p.getPreviewFor)})}:R.getData};function W(ue,he,we,Te){var Le=_.shared.providers.translate(ue.title);if("separator"===ue.type)return X.some({type:"separator",text:Le});if("submenu"!==ue.type)return X.some(de({type:"togglemenuitem",text:Le,icon:ue.icon,active:ue.isSelected(Te),disabled:we,onAction:T.onAction(ue)},ue.getStylePreview().fold(function(){return{}},function(Be){return{meta:{style:Be}}})));var Re=Or(ue.getStyleItems(),function(Be){return I(Be,he,Te)});return 0===he&&Re.length<=0?X.none():X.some({type:"nestedmenuitem",text:Le,disabled:Re.length<=0,getSubmenuItems:function(){return Or(ue.getStyleItems(),function(Be){return I(Be,he,Te)})}})}function ee(ue){var he=T.getCurrentValue(),we=T.shouldHide?0:1;return Or(ue,function(Te){return I(Te,we,he)})}}function iM(s,d,p){var _=ck(0,d,p),T=_.items,I=_.getStyleItems,R=oM(s,"NodeChange",function(H){var W=H.getComponent();p.updateText(W)});return Gw({text:p.icon.isSome()?X.none():p.text,icon:p.icon,tooltip:X.from(p.tooltip),role:X.none(),fetch:T.getFetch(d,I),onSetup:R,getApi:function(H){return{getComponent:F(H)}},columns:1,presets:"normal",classes:p.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",d.shared)}function aM(s){return function(d){for(;d=d.parentNode;){var p=d.contentEditable;if(p&&"inherit"!==p)return $D(d)}return!1}(s)&&!yI(s)}function HD(s,d){function p(ue){return yv(s)}function _(ue,he){return function(we,Te){return Bo(we,s,Te).map(function(Le){return ue(Le,Te)}).getOr(he)}}function T(ue,he){return"true"!==vi(ue.element,"aria-hidden")}var I,R=_(T,!1),H=_(function(ue,he){var we;T(ue)&&(Qr(we=ue.element,"display","none"),Ir(we,"aria-hidden","true"),kr(ue,_f(),{name:he,visible:!1}))}),W=(I=H,function(ue,he){ur(he,function(we){return I(ue,we)})}),ee=_(function(ue,he){var we;T(ue)||(Co(we=ue.element,"display"),pa(we,"aria-hidden"),kr(ue,_f(),{name:he,visible:!0}))});return{uid:s.uid,dom:s.dom,components:d,behaviours:Ug(s.slotBehaviours),apis:{getSlotNames:p,getSlot:function(ue,he){return Bo(ue,s,he)},isShowing:R,hideSlot:H,hideAllSlots:function(ue){return W(ue,p())},showSlot:ee}}}function WD(s,d){Bo(s,d,"overflow").each(function(p){$o(s,d,function(_){var T=Ot(_,function(I){return Ql(I)});u0.setGroups(p,T)}),Bo(s,d,"overflow-button").each(function(_){Ep.hasGrown(p)&&Ho.on(_)}),Ep.refresh(p)})}var GD,cS,D2,dI="data-value",fI=function(s,d,p,_){return Ot(p,function(T){return xx(T)?{type:"togglemenuitem",text:T.text,value:T.value,active:T.value===_,onAction:function(){er.setValue(s,T.value),kr(s,ef,{name:d}),eo.focus(s)}}:{type:"nestedmenuitem",text:T.text,getSubmenuItems:function(){return fI(s,d,T.items,_)}}})},hI=function(s,d){return Gt(s,function(p){return xx(p)?li(p.value===d,p):hI(p.items,d)})},A2=qa({name:"HtmlSelect",configFields:[bn("options"),ns("selectBehaviours",[eo,er]),It("selectClasses",[]),It("selectAttributes",{}),Xo("data")],factory:function(s,d){var p=Ot(s.options,function(T){return{dom:{tag:"option",value:T.value,innerHtml:T.text}}}),_=s.data.map(function(T){return bc("initialValue",T)}).getOr({});return{uid:s.uid,dom:{tag:"select",classes:s.selectClasses,attributes:s.selectAttributes},components:p,behaviours:ja(s.selectBehaviours,[eo.config({}),er.config({store:de({mode:"manual",getValue:function(T){return Yl(T.element)},setValue:function(T,I){wo(s.options,function(R){return R.value===I}).isSome()&&Fu(T.element,I)}},_)})])}}}),dS=Object.freeze({__proto__:null,events:function(s,d){var p=s.stream.streams.setup(s,d);return Qo([mn(s.event,p),Cl(function(){return d.cancel()})].concat(s.cancelEvent.map(function(_){return[mn(_,function(){return d.cancel()})]}).getOr([])))}}),gI=Object.freeze({__proto__:null,throttle:By,init:function(s){return s.stream.streams.state(s)}}),UD=yi({fields:[Bu("stream",Ys("mode",{throttle:[bn("delay"),It("stopEvent",!0),Zo("streams",{setup:function(s,d){var p=s.stream,_=tw(s.onStream,p.delay);return d.setTimer(_),function(T,I){_.throttle(T,I),p.stopEvent&&I.stop()}},state:By})]})),It("event","input"),Xo("cancelEvent"),Hm("onStream")],name:"streaming",active:dS,state:gI}),jD=function(s){iS(s,function(d,p){return d.setSelectionRange(p.length,p.length)})},qD=F("alloy.typeahead.itemexecute"),LO=F([Xo("lazySink"),bn("fetch"),It("minChars",5),It("responseTime",1e3),No("onOpen"),It("getHotspot",X.some),It("getAnchorOverrides",F({})),It("layouts",X.none()),It("eventOrder",{}),gf("model",{},[It("getDisplayText",function(s){return void 0!==s.meta&&void 0!==s.meta.text?s.meta.text:s.value}),It("selectsOver",!0),It("populateFromBrowse",!0)]),No("onSetValue"),Vu("onExecute"),No("onItemExecute"),It("inputClasses",[]),It("inputAttributes",{}),It("inputStyles",{}),It("matchWidth",!0),It("useMinWidth",!1),It("dismissOnBlur",!0),jr(["openClass"]),Xo("initialData"),ns("typeaheadBehaviours",[eo,er,UD,Rr,Ho,Na]),Su("previewing",function(){return wr(!0)})].concat(OC()).concat($1())),BO=F([Lc({schema:[ku()],name:"menu",overrides:function(s){return{fakeFocus:!0,onHighlight:function(d,p){s.previewing.get()?d.getSystem().getByUid(s.uid).each(function(_){(function(T,I,R){if(T.selectsOver){var H=er.getValue(I),W=T.getDisplayText(H),ee=er.getValue(R);return 0===T.getDisplayText(ee).indexOf(W)?X.some(function(){var ue;m_(0,I,R),ue=W.length,iS(I,function(he,we){return he.setSelectionRange(ue,we.length)})}):X.none()}return X.none()})(s.model,_,p).fold(function(){return ko.dehighlight(d,p)},function(T){return T()})}):d.getSystem().getByUid(s.uid).each(function(_){s.model.populateFromBrowse&&m_(0,_,p)}),s.previewing.set(!1)},onExecute:function(d,p){return d.getSystem().getByUid(s.uid).toOptional().map(function(_){return kr(_,qD(),{item:p}),!0})},onHover:function(d,p){s.previewing.set(!1),d.getSystem().getByUid(s.uid).each(function(_){s.model.populateFromBrowse&&m_(0,_,p)})}}}})]),zO=Xa({name:"Typeahead",configFields:LO(),partFields:BO(),factory:function(s,d,p,_){function T(W,ee,ue){s.previewing.set(!1);var he=Na.getCoupled(W,"sandbox");po.isOpen(he)?Io.getCurrent(he).each(function(we){ko.getHighlighted(we).fold(function(){ue(we)},function(){xc(he,we.element,"keydown",ee)})}):RC(s,I(W),W,he,_,function(we){Io.getCurrent(we).each(ue)},tf.HighlightFirst).get(j)}function I(W){return function(ee){return ee.map(function(ue){var he=Or(tr(ue.menus),function(we){return ln(we.items,function(Te){return"item"===Te.type})});return er.getState(W).update(Ot(he,function(we){return we.data})),ue})}}var R=Tw(s),H=[eo.config({}),er.config({onSetValue:s.onSetValue,store:de({mode:"dataset",getDataKey:function(W){return Yl(W.element)},getFallbackEntry:function(W){return{value:W,meta:{}}},setValue:function(W,ee){Fu(W.element,s.model.getDisplayText(ee))}},s.initialData.map(function(W){return bc("initialValue",W)}).getOr({}))}),UD.config({stream:{mode:"throttle",delay:s.responseTime,stopEvent:!1},onStream:function(W,ee){var ue,he=Na.getCoupled(W,"sandbox");eo.isFocused(W)&&Yl(W.element).length>=s.minChars&&(ue=Io.getCurrent(he).bind(function(we){return ko.getHighlighted(we).map(er.getValue)}),s.previewing.set(!0),RC(s,I(W),W,he,_,function(we){Io.getCurrent(he).each(function(Te){ue.fold(function(){s.model.selectsOver&&ko.highlightFirst(Te)},function(Le){ko.highlightBy(Te,function(Re){return er.getValue(Re).value===Le.value}),ko.getHighlighted(Te).orThunk(function(){return ko.highlightFirst(Te),X.none()})})})},tf.HighlightFirst).get(j))},cancelEvent:wg()}),Rr.config({mode:"special",onDown:function(W,ee){return T(W,ee,ko.highlightFirst),X.some(!0)},onEscape:function(W){var ee=Na.getCoupled(W,"sandbox");return po.isOpen(ee)?(po.close(ee),X.some(!0)):X.none()},onUp:function(W,ee){return T(W,ee,ko.highlightLast),X.some(!0)},onEnter:function(W){var ee=Na.getCoupled(W,"sandbox"),ue=po.isOpen(ee);if(ue&&!s.previewing.get())return Io.getCurrent(ee).bind(function(we){return ko.getHighlighted(we)}).map(function(we){return kr(W,qD(),{item:we}),!0});var he=er.getValue(W);return Lo(W,wg()),s.onExecute(ee,W,he),ue&&po.close(ee),X.some(!0)}}),Ho.config({toggleClass:s.markers.openClass,aria:{mode:"expanded"}}),Na.config({others:{sandbox:function(W){return K1(s,W,{onOpen:function(){return Ho.on(W)},onClose:function(){return Ho.off(W)}})}}}),Kn("typeaheadevents",[zs(function(W){ex(s,I(W),W,_,j,tf.HighlightFirst).get(j)}),mn(qD(),function(W,ee){var ue=Na.getCoupled(W,"sandbox");m_(0,W,ee.event.item),Lo(W,wg()),s.onItemExecute(W,ue,ee.event.item,er.getValue(W)),po.close(ue),jD(W)})].concat(s.dismissOnBlur?[mn(Lh(),function(W){var ee=Na.getCoupled(W,"sandbox");od(ee.element).isNone()&&po.close(ee)})]:[]))];return{uid:s.uid,dom:IC(xo(s,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:de(de({},R),ja(s.typeaheadBehaviours,H)),eventOrder:s.eventOrder}}}),fS=function(s){return de(de({},s),{toCached:function(){return fS(s.toCached())},bindFuture:function(d){return fS(s.bind(function(p){return p.fold(function(_){return dh(yo.error(_))},function(_){return d(_)})}))},bindResult:function(d){return fS(s.map(function(p){return p.bind(d)}))},mapResult:function(d){return fS(s.map(function(p){return p.map(d)}))},mapError:function(d){return fS(s.map(function(p){return p.mapError(d)}))},foldResult:function(d,p){return s.map(function(_){return _.fold(d,p)})},withTimeout:function(d,p){return fS(wp(function(_){var T=!1,I=setTimeout(function(){T=!0,_(yo.error(p()))},d);s.get(function(R){T||(clearTimeout(I),_(R))})}))}})},FO={type:"separator"},pI=Sr("aria-invalid"),VO={bar:Gs(function(s,d){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:Ot(s.items,d.shared.interpreter)}}),collection:Gs(function(s,d){return I=d.shared.providers,W=(T=s).label.map(function(he){return lg(he,I)}),ee=p(function(he,we,Te,Le){we.stop(),I.isDisabled()||kr(he,bp,{name:T.name,value:Le})}),ue=[mn(td(),p(function(he,we,Te){rd(Te)})),mn(iu(),ee),mn(bf(),ee),mn(Nd(),p(function(he,we,Te){ra(he.element,"."+sg).each(function(Le){_i(Le,sg)}),Qa(Te,sg)})),mn(Rh(),p(function(he){ra(he.element,"."+sg).each(function(we){_i(we,sg)})})),zs(p(function(he,we,Te,Le){kr(he,bp,{name:T.name,value:Le})}))],$b(W,ni.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==T.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:U},behaviours:Ln([xr.config({disabled:I.isDisabled,onDisabled:function(he){_(he,function(we){Qa(we,"tox-collection__item--state-disabled"),Ir(we,"aria-disabled",!0)})},onEnabled:function(he){_(he,function(we){_i(we,"tox-collection__item--state-disabled"),pa(we,"aria-disabled")})}}),Ya(),no.config({}),er.config({store:{mode:"memory",initialValue:[]},onSetValue:function(he,we){var Te=he,Le=Ot(we,function(Be){var He=ic.translate(Be.text),Xe=1===T.columns?'<div class="tox-collection__item-label">'+He+"</div>":"",De='<div class="tox-collection__item-icon">'+Be.icon+"</div>",Ue={_:" "," - ":" ","-":" "},at=He.replace(/\_| \- |\-/g,function(gt){return Ue[gt]});return'<div class="tox-collection__item'+(I.isDisabled()?" tox-collection__item--state-disabled":"")+'" tabindex="-1" data-collection-item-value="'+Dw.encodeAllRaw(Be.value)+'" title="'+at+'" aria-label="'+at+'">'+De+Xe+"</div>"}),Re=Ot("auto"!==T.columns&&1<T.columns?en(Le,T.columns):[Le],function(Be){return'<div class="tox-collection__group">'+Be.join("")+"</div>"});Lm(Te.element,Re.join("")),"auto"===T.columns&&Bb(he,5,"tox-collection__item").each(function(Be){Rr.setGridSize(he,Be.numRows,Be.numColumns)}),Lo(he,uc)}}),Ko.config({}),Rr.config(1===(H=T.columns)?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===H?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:".tox-collection__group",cell:"."+I1}}),Kn("collection-events",ue)]),eventOrder:((R={})[Ca()]=["disabling","alloy.base.behaviour","collection-events"],R)}),["tox-form__group--collection"],[]);function p(he){return function(we,Te){ec(Te.event.target,"[data-collection-item-value]").each(function(Le){he(we,Te,Le,vi(Le,"data-collection-item-value"))})}}function _(he,we){return Ot(Qs(he.element,".tox-collection__item"),we)}var T,I,R,H,W,ee,ue}),alertbanner:Gs(function(s,d){return ba.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--"+(p=s).level]},components:[{dom:{tag:"div",classes:["tox-notification__icon"]},components:[Iu.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:Mb(p.icon,(_=d.shared.providers).icons),attributes:{title:_.translate(p.iconTooltip)}},action:function(T){kr(T,bp,{name:"alert-banner",value:p.url})},buttonBehaviours:Ln([Sk()])})]},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:_.translate(p.text)}}]});var p,_}),input:Gs(function(s,d){return _=d.shared.providers,g_({name:(p=s).name,multiline:!1,label:p.label,inputMode:p.inputMode,placeholder:p.placeholder,flex:!1,disabled:p.disabled,classname:"tox-textfield",validation:X.none(),maximized:p.maximized},_);var p,_}),textarea:Gs(function(s,d){return _=d.shared.providers,g_({name:(p=s).name,multiline:!0,label:p.label,inputMode:X.none(),placeholder:p.placeholder,flex:!0,disabled:p.disabled,classname:"tox-textarea",validation:X.none(),maximized:p.maximized},_);var p,_}),label:Gs(function(s,d){return T={dom:{tag:"label",innerHtml:(_=d.shared).providers.translate((p=s).label),classes:["tox-label"]}},I=Ot(p.items,_.interpreter),{dom:{tag:"div",classes:["tox-form__group"]},components:[T].concat(I),behaviours:Ln([kp(),no.config({}),l_(X.none()),Rr.config({mode:"acyclic"})])};var p,_,T,I}),iframe:(GD=function(s,d){return p=s,_=d.shared.providers,R=x2&&p.sandboxed,H=de(de({},p.label.map(function(ee){return{title:ee}}).getOr({})),R?{sandbox:"allow-scripts allow-same-origin"}:{}),T=R,I=wr(""),W={getValue:function(ee){return I.get()},setValue:function(ee,ue){var he;T?Ir(ee.element,"srcdoc",ue):(Ir(ee.element,"src","javascript:''"),(he=ee.element.dom.contentWindow.document).open(),he.write(ue),he.close()),I.set(ue)}},$b(p.label.map(function(ee){return lg(ee,_)}),ni.parts.field({factory:{sketch:function(ee){return VC({uid:ee.uid,dom:{tag:"iframe",attributes:H},behaviours:Ln([Ko.config({}),eo.config({}),vx(X.none(),W.getValue,W.setValue)])})}}}),["tox-form__group--stretched"],[]);var p,_,T,I,R,H,W},function(s,d,p){var _=xo(d,{source:"dynamic"});return Gs(GD)(s,_,p)}),button:Gs(function(s,d){return _=d.shared.providers,T=dx((p=s).name,"custom"),$b(X.none(),ni.parts.field(de({factory:Iu},AT(p,X.some(T),_,[yx(""),kp()]))),[],[]);var p,_,T}),checkbox:Gs(function(s,d){return T=s,I=d.shared.providers,R=er.config({store:{mode:"manual",getValue:function(ue){return ue.element.dom.checked},setValue:function(ue,he){ue.element.dom.checked=he}}}),H=ni.parts.field({factory:{sketch:U},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:Ln([kp(),xr.config({disabled:function(){return T.disabled||I.isDisabled()}}),Ko.config({}),eo.config({}),R,Rr.config({mode:"special",onEnter:p,onSpace:p,stopSpaceKeyup:!0}),Kn("checkbox-events",[mn(wl(),function(ue,he){kr(ue,ef,{name:T.name})})])])}),W=ni.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"],innerHtml:I.translate(T.label)},behaviours:Ln([Ay.config({})])}),ee=ui({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[_("checked"),_("unchecked")]}),ni.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[H,ee.asSpec(),W],fieldBehaviours:Ln([xr.config({disabled:function(){return T.disabled||I.isDisabled()},disableClass:"tox-checkbox--disabled",onDisabled:function(ue){ni.getField(ue).each(xr.disable)},onEnabled:function(ue){ni.getField(ue).each(xr.enable)}}),Ya()])});function p(ue){return ue.element.dom.click(),X.some(!0)}function _(ue){return ah("checked"===ue?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+ue]},I.icons)}var T,I,R,H,W,ee}),colorinput:Gs(function(s,d){return _=s,I=d.colorinput,W=ni.parts.field({factory:X1,inputClasses:["tox-textfield"],onSetValue:function(he){return Sp.run(he).get(j)},inputBehaviours:Ln([xr.config({disabled:(T=d.shared).providers.isDisabled}),Ya(),Ko.config({}),Sp.config({invalidClass:"tox-textbox-field-invalid",getRoot:function(he){return Er(he.element)},notify:{onValid:function(he){var we=er.getValue(he);kr(he,$C,{color:we})}},validator:{validateOnLoad:!1,validate:function(he){var we=er.getValue(he);if(0===we.length)return dh(yo.value(!0));var Te=ct.fromTag("span");Qr(Te,"background-color",we);var Le=Ni(Te,"background-color").fold(function(){return yo.error("blah")},function(Re){return yo.value(we)});return dh(Le)}}})]),selectOnFocus:!1}),ee=_.label.map(function(he){return lg(he,T.providers)}),ue=ui((R={dom:{tag:"span",attributes:{"aria-label":T.providers.translate("Color swatch")}},layouts:{onRtl:function(){return[su,Fs,Go]},onLtr:function(){return[Fs,su,Go]}},components:[],fetch:_w(I.getColors(),I.hasCustomColors()),columns:I.getColorCols(),presets:"color",onItemAction:function(he,we){ue.getOpt(he).each(function(Te){"custom"===we?I.colorPicker(function(Le){Le.fold(function(){return Lo(Te,ph)},function(Re){p(Te,Re),bw(Re)})},"#ffffff"):p(Te,"remove"===we?"":we)})}},rf.sketch({dom:R.dom,components:R.components,toggleClass:"mce-active",dropdownBehaviours:Ln([Zb((H=T).providers.isDisabled),Ya(),Ay.config({}),Ko.config({})]),layouts:R.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:H.getSink,fetch:function(he){return wp(function(we){return R.fetch(we)}).map(function(we){return X.from(TC(xo(fy(Sr("menu-value"),we,function(Te){R.onItemAction(he,Te)},R.columns,R.presets,ag.CLOSE_ON_EXECUTE,qe,H.providers),{movement:ww(R.columns,R.presets)})))})},parts:{menu:QS(0,0,R.presets)}}))),ni.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ee.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[W,ue.asSpec()]}]),fieldBehaviours:Ln([Kn("form-field-events",[mn($C,function(he,we){ue.getOpt(he).each(function(Te){Qr(Te.element,"background-color",we.event.color)}),kr(he,ef,{name:_.name})}),mn(Tp,function(he,we){ni.getField(he).each(function(Te){er.setValue(Te,we.event.value),Io.getCurrent(he).each(eo.focus)})}),mn(ph,function(he,we){ni.getField(he).each(function(Te){Io.getCurrent(he).each(eo.focus)})})])])});function p(he,we){kr(he,Tp,{value:we})}var _,T,I,R,H,W,ee,ue}),colorpicker:Gs(function(s){var d=ui(function u2(s,d){return qa({name:"ColourPicker",configFields:[bn("dom"),It("onValidHex",j),It("onInvalidHex",j)],factory:function(p){function _(gt,Xt,Lt){De.getOpt(gt).each(function(nn){Be.setHue(nn,Lt)})}function T(gt,Xt){Ue.getOpt(gt).each(function(Lt){Re.updateHex(Lt,Xt)})}function I(gt,Xt,Lt,nn){var _n=Lt,an=qb(Xt);He.paletteRgba.set(an),He.paletteHue.set(_n),ur(nn,function(kn){kn(gt,Xt,Lt)})}var R,H,W,ee,ue,he,we,Te,Le,Re=function FC(s,d,p,_){function T(W,ee,ue,he,we){var Te,Le,Re=s(h_+"range"),Be=[ni.parts.label({dom:{tag:"label",innerHtml:ue,attributes:{"aria-label":he}}}),ni.parts.field({data:we,factory:X1,inputAttributes:de({type:"text"},"hex"===ee?{"aria-live":"polite"}:{}),inputClasses:[d("textfield")],inputBehaviours:Ln([(Te=ee,Le=W,Sp.config({invalidClass:d("invalid"),notify:{onValidate:function(Xe){kr(Xe,b2,{type:Te})},onValid:function(Xe){kr(Xe,ek,{type:Te,value:er.getValue(Xe)})},onInvalid:function(Xe){kr(Xe,o0,{type:Te,value:er.getValue(Xe)})}},validator:{validate:function(Xe){var De=er.getValue(Xe),Ue=Le(De)?yo.value(!0):yo.error(s("aria.input.invalid"));return dh(Ue)},validateOnLoad:!1}})),Ko.config({})]),onSetValue:function(Xe){Sp.isInvalid(Xe)&&Sp.run(Xe).get(j)}})],He="hex"!==ee?[ni.parts["aria-descriptor"]({text:Re})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:Be.concat(He)}}function I(W,ee){er.setValue(W,{red:ee.red,green:ee.green,blue:ee.blue})}function R(W,ee){H.getOpt(W).each(function(ue){Qr(ue.element,"background-color","#"+ee.value)})}var H=ui({dom:{tag:"div",classes:[d("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}});return qa({factory:function(){function W(De){return Le[De].get()}function ee(De,Ue){Le[De].set(Ue)}function ue(De,Ue){var at=Ue.event;"hex"!==at.type?ee(at.type,X.none()):_(De)}function he(De,Ue){var at,gt,Lt,nn=Ue.event;"hex"===nn.type?function(_n,an){p(_n);var kn=KM(an);ee("hex",X.some(an));var Vn=qb(kn);I(_n,Vn),Te(Vn),kr(_n,qT,{hex:kn}),R(_n,kn)}(De,nn.value):(at=De,gt=nn.type,Lt=parseInt(nn.value,10),ee(gt,X.some(Lt)),W("red").bind(function(_n){return W("green").bind(function(an){return W("blue").map(function(kn){return cl(_n,an,kn,1)})})}).each(function(_n){var an,kn,Vn=(an=at,kn=jb(_n),Ef.getField(an,"hex").each(function(sr){eo.isFocused(sr)||er.setValue(an,{hex:kn.value})}),kn);kr(at,qT,{hex:Vn}),R(at,Vn)}))}function we(De){return{label:s(h_+De+".label"),description:s(h_+De+".description")}}function Te(De){var at=De.green,gt=De.blue;ee("red",X.some(De.red)),ee("green",X.some(at)),ee("blue",X.some(gt))}var Le={red:wr(X.some(255)),green:wr(X.some(255)),blue:wr(X.some(255)),hex:wr(X.some("ffffff"))},Re=we("red"),Be=we("green"),He=we("blue"),Xe=we("hex");return xo(Ef.sketch(function(De){return{dom:{tag:"form",classes:[d("rgb-form")],attributes:{"aria-label":s("aria.color.picker")}},components:[De.field("red",ni.sketch(T(sm,"red",Re.label,Re.description,255))),De.field("green",ni.sketch(T(sm,"green",Be.label,Be.description,255))),De.field("blue",ni.sketch(T(sm,"blue",He.label,He.description,255))),De.field("hex",ni.sketch(T($M,"hex",Xe.label,Xe.description,"ffffff"))),H.asSpec()],formBehaviours:Ln([Sp.config({invalidClass:d("form-invalid")}),Kn("rgb-form-events",[mn(ek,he),mn(o0,ue),mn(b2,ue)])])}}),{apis:{updateHex:function(De,Ue){var at;er.setValue(De,{hex:Ue.value}),I(De,at=qb(Ue)),Te(at),R(De,Ue)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function(W,ee,ue){W.updateHex(ee,ue)}},extraApis:{}})}(s,d,p.onValidHex,p.onInvalidHex),Be=(Te=rs.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[(we=d)("sv-palette-spectrum")]}}),Le=rs.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[we("sv-palette-thumb")],innerHtml:"<div class="+we("sv-palette-inner-thumb")+' role="presentation"></div>'}}),qa({factory:function(gt){var Xt=F({x:0,y:0}),Lt=Ln([Io.config({find:X.some}),eo.config({})]);return rs.sketch({dom:{tag:"div",attributes:{role:"presentation"},classes:[we("sv-palette")]},model:{mode:"xy",getInitialValue:Xt},rounded:!1,components:[Te,Le],onChange:function(nn,_n,an){kr(nn,px,{value:an})},onInit:function(nn,_n,an,kn){at(an.element.dom,B1(nT))},sliderBehaviours:Lt})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function(gt,Xt,Lt){var nn=Lt;at(Xt.components()[0].element.dom,B1(gC(F1(nn,100,100))))},setThumb:function(gt,Xt,Lt){var nn=Xt,_n=mw(qb(Lt));rs.setValue(nn,{x:_n.saturation,y:100-_n.value})}},extraApis:{}})),He={paletteRgba:wr(nT),paletteHue:wr(0)},Xe=ui((H=rs.parts.spectrum({dom:{tag:"div",classes:[(R=d)("hue-slider-spectrum")],attributes:{role:"presentation"}}}),W=rs.parts.thumb({dom:{tag:"div",classes:[R("hue-slider-thumb")],attributes:{role:"presentation"}}}),rs.sketch({dom:{tag:"div",classes:[R("hue-slider")],attributes:{role:"presentation"}},rounded:!1,model:{mode:"y",getInitialValue:F({y:0})},components:[H,W],sliderBehaviours:Ln([eo.config({})]),onChange:function(gt,Xt,Lt){kr(gt,Zw,{value:Lt})}}))),De=ui(Be.sketch({})),Ue=ui(Re.sketch({}));function at(gt,Xt){var Lt,nn,_n=gt.width,an=gt.height,kn=gt.getContext("2d");null!==kn&&(kn.fillStyle=Xt,kn.fillRect(0,0,_n,an),(Lt=kn.createLinearGradient(0,0,_n,0)).addColorStop(0,"rgba(255,255,255,1)"),Lt.addColorStop(1,"rgba(255,255,255,0)"),kn.fillStyle=Lt,kn.fillRect(0,0,_n,an),(nn=kn.createLinearGradient(0,0,0,an)).addColorStop(0,"rgba(0,0,0,0)"),nn.addColorStop(1,"rgba(0,0,0,1)"),kn.fillStyle=nn,kn.fillRect(0,0,_n,an))}return{uid:p.uid,dom:p.dom,components:[De.asSpec(),Xe.asSpec(),Ue.asSpec()],behaviours:Ln([Kn("colour-picker-events",[mn(qT,(he=[_,function(gt,Xt,Lt){Xe.getOpt(gt).each(function(nn){rs.setValue(nn,{y:100-Lt/360*100})})},function(gt,Xt){De.getOpt(gt).each(function(Lt){Be.setThumb(Lt,Xt)})}],function(gt,Xt){var Lt=Xt.event.hex;I(gt,Lt,mw(qb(Lt)).hue,he)})),mn(px,(ue=[T],function(gt,Xt){var Lt=Xt.event.value,nn=He.paletteHue.get();I(gt,mC(F1(nn,Lt.x,100-Lt.y)),nn,ue)})),mn(Zw,(ee=[_,T],function(gt,Xt){var Lt=(100-Xt.event.value.y)/100*360,nn=mw(He.paletteRgba.get());I(gt,mC(F1(Lt,nn.saturation,nn.value)),Lt,ee)}))]),Io.config({find:function(gt){return Ue.getOpt(gt)}}),Rr.config({mode:"acyclic"})])}}})}(CT,function(p){return"tox-"+p}).sketch({dom:{tag:"div",classes:["tox-color-picker-container"],attributes:{role:"presentation"}},onValidHex:function(p){kr(p,bp,{name:"hex-valid",value:!0})},onInvalidHex:function(p){kr(p,bp,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[d.asSpec()],behaviours:Ln([er.config({store:{mode:"manual",getValue:function(p){var _=d.get(p);return Io.getCurrent(_).bind(function(T){return er.getValue(T).hex}).map(function(T){return"#"+T}).getOr("")},setValue:function(p,_){var T=/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(_),I=d.get(p);Io.getCurrent(I).fold(function(){console.log("Can not find form")},function(R){er.setValue(R,{hex:X.from(T[1]).getOr("")}),Ef.getField(R,"hex").each(function(H){Lo(H,Wi())})})}}}),kp()])}}),dropzone:Gs(function(s,d){return function sx(s,d){function p(W,ee){ee.stop()}function _(W){return function(ee,ue){ur(W,function(he){he(ee,ue)})}}function T(W,ee){xr.isDisabled(W)||R(W,ee.event.raw.dataTransfer.files)}function I(W,ee){R(W,ee.event.raw.target.files)}function R(W,ee){var ue,he;er.setValue(W,(ue=ee,he=Dp.explode(d.getSetting("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string")),ln(Yu(ue),function(we){return Rt(he,function(Te){return rt(we.name.toLowerCase(),"."+Te.toLowerCase())})}))),kr(W,ef,{name:s.name})}var H=ui({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:Ln([Kn("input-file-events",[Dd(iu()),Dd(bf())])])});return $b(s.label.map(function(W){return lg(W,d)}),ni.parts.field({factory:{sketch:function(W){return{uid:W.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:Ln([yx([]),kp(),xr.config({}),Ho.config({toggleClass:"dragenter",toggleOnExecute:!1}),Kn("dropzone-events",[mn("dragenter",_([p,Ho.toggle])),mn("dragleave",_([p,Ho.toggle])),mn("dragover",p),mn("drop",_([p,T])),mn(wl(),I)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p",innerHtml:d.translate("Drop an image here")}},Iu.sketch({dom:{tag:"button",innerHtml:d.translate("Browse for an image"),styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[H.asSpec()],action:function(ee){H.get(ee).element.dom.click()},buttonBehaviours:Ln([Ko.config({}),Zb(d.isDisabled),Ya()])})]}]}}}}),["tox-form__group--stretched"],[])}(s,d.shared.providers)}),grid:Gs(function(s,d){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--"+s.columns+"col"]},components:Ot(s.items,d.shared.interpreter)}}),listbox:Gs(function(s,d){return T=(_=d).shared.providers,I=Pi((p=s).items).filter(xx),R=p.label.map(function(W){return lg(W,T)}),H={dom:{tag:"div",classes:["tox-listboxfield"]},components:[ni.parts.field({dom:{},factory:{sketch:function(W){return Gw({uid:W.uid,text:I.map(function(ee){return ee.text}),icon:X.none(),tooltip:p.label,role:X.none(),fetch:function(ee,ue){ue(dg(fI(ee,p.name,p.items,er.getValue(ee)),ag.CLOSE_ON_EXECUTE,_,!1))},onSetup:F(j),getApi:F({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Ko.config({}),er.config({store:{mode:"manual",initialValue:I.map(function(ee){return ee.value}).getOr(""),getValue:function(ee){return vi(ee.element,dI)},setValue:function(ee,ue){hI(p.items,ue).each(function(he){Ir(ee.element,dI,he.value),kr(ee,Wc,{text:he.text})})}}})]},"tox-listbox",_.shared)}}})]},ni.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Gr([R.toArray(),[H]]),fieldBehaviours:Ln([xr.config({disabled:F(p.disabled),onDisabled:function(W){ni.getField(W).each(xr.disable)},onEnabled:function(W){ni.getField(W).each(xr.enable)}})])});var p,_,T,I,R,H}),selectbox:Gs(function(s,d){return _=d.shared.providers,T=Ot((p=s).items,function(H){return{text:_.translate(H.text),value:H.value}}),I=p.label.map(function(H){return lg(H,_)}),R={dom:{tag:"div",classes:["tox-selectfield"]},components:Gr([[ni.parts.field({dom:{},selectAttributes:{size:p.size},options:T,factory:A2,selectBehaviours:Ln([xr.config({disabled:function(){return p.disabled||_.isDisabled()}}),Ko.config({}),Kn("selectbox-change",[mn(wl(),function(H,W){kr(H,ef,{name:p.name})})])])})],(1<p.size?X.none():X.some(ah("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},_.icons))).toArray()])},ni.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:Gr([I.toArray(),[R]]),fieldBehaviours:Ln([xr.config({disabled:function(){return p.disabled||_.isDisabled()},onDisabled:function(H){ni.getField(H).each(xr.disable)},onEnabled:function(H){ni.getField(H).each(xr.enable)}}),Ya()])});var p,_,T,I,R}),sizeinput:Gs(function(s,d){return NT(s,d.shared.providers)}),urlinput:Gs(function(s,d){return function aS(s,d,p){function _(He){var Xe=er.getValue(He);p.addToHistory(Xe.value,s.filetype)}var T,I,R,H,W=d.shared.providers,ee=ni.parts.field({factory:zO,dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":pI,type:"url"},minChars:0,responseTime:0,fetch:function(He){var Xe,De,Ue,at,gt=dg((Xe=s.filetype,De=p,Ue=er.getValue(He),at=void 0!==Ue.meta.text?Ue.meta.text:Ue.value,De.getLinkInformation().fold(function(){return[]},function(Xt){var Lt=ak(at,Ot(De.getHistory(Xe),function(nn){return a0(nn,nn)}));return"file"===Xe?to([Lt,ak(at,ik("header",Xt.targets)),ak(at,Gr([X.from(Xt.anchorTop).map(function(nn){return a0("<top>",nn)}).toArray(),ik("anchor",Xt.targets),X.from(Xt.anchorBottom).map(function(nn){return a0("<bottom>",nn)}).toArray()]))],function(nn,_n){return 0===nn.length||0===_n.length?nn.concat(_n):nn.concat(FO,_n)},[]):Lt})),ag.BUBBLE_TO_SANDBOX,d,!1);return dh(gt)},getHotspot:function(He){return Re.getOpt(He)},onSetValue:function(He,Xe){He.hasConfigured(Sp)&&Sp.run(He).get(j)},typeaheadBehaviours:Ln(Gr([p.getValidationHandler().map(function(He){return Sp.config({getRoot:function(Xe){return Er(Xe.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function(Xe,De){he.getOpt(Xe).each(function(Ue){Ir(Ue.element,"title",W.translate(De))})}},validator:{validate:function(Xe){var De=er.getValue(Xe);return function(s){return fS(wp(s))}(function(Ue){He({type:s.filetype,url:De.value},function(at){var gt,Xt;"invalid"===at.status?(gt=yo.error(at.message),Ue(gt)):(Xt=yo.value(at.message),Ue(Xt))})})},validateOnLoad:!1}})}).toArray(),[xr.config({disabled:function(){return s.disabled||W.isDisabled()}}),Ko.config({}),Kn("urlinput-events",Gr(["file"===s.filetype?[mn(Wi(),function(He){kr(He,ef,{name:s.name})})]:[],[mn(wl(),function(He){kr(He,ef,{name:s.name}),_(He)}),mn(Jp(),function(He){kr(He,ef,{name:s.name}),_(He)})]]))]])),eventOrder:((T={})[Wi()]=["streaming","urlinput-events","invalidating"],T),model:{getDisplayText:function(He){return He.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:d.shared.getSink,parts:{menu:QS(0,0,"normal")},onExecute:function(He,Xe,De){kr(Xe,sc,{})},onItemExecute:function(He,Xe,De,Ue){_(He),kr(He,ef,{name:s.name})}}),ue=s.label.map(function(He){return lg(He,W)}),he=ui((I="invalid",R=X.some(pI),ah("warning",{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+I],attributes:de({title:W.translate(H=void 0===H?I:H),"aria-live":"polite"},R.fold(function(){return{}},function(He){return{id:He}}))},W.icons))),we=ui({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[he.asSpec()]}),Te=p.getUrlPicker(s.filetype),Le=Sr("browser.url.event"),Re=ui({dom:{tag:"div",classes:["tox-control-wrap"]},components:[ee,we.asSpec()],behaviours:Ln([xr.config({disabled:function(){return s.disabled||W.isDisabled()}})])}),Be=ui(IT({name:s.name,icon:X.some("browse"),text:s.label.getOr(""),disabled:s.disabled,primary:!1,borderless:!0},function(He){return Lo(He,Le)},W,[],["tox-browse-url"]));return ni.sketch({dom:cT([]),components:ue.toArray().concat([{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:Gr([[Re.asSpec()],Te.map(function(){return Be.asSpec()}).toArray()])}]),fieldBehaviours:Ln([xr.config({disabled:function(){return s.disabled||W.isDisabled()},onDisabled:function(He){ni.getField(He).each(xr.disable),Be.getOpt(He).each(xr.disable)},onEnabled:function(He){ni.getField(He).each(xr.enable),Be.getOpt(He).each(xr.enable)}}),Ya(),Kn("url-input-events",[mn(Le,function(He){Io.getCurrent(He).each(function(Xe){var De=er.getValue(Xe),Ue=de({fieldname:s.name},De);Te.each(function(at){at(Ue).get(function(gt){er.setValue(Xe,gt),kr(He,ef,{name:s.name})})})})})])])})}(s,d,d.urlinput)}),customeditor:Gs(function(s){var d=Ai(),p=ui({dom:{tag:s.tag}}),_=Ai();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:Ln([Kn("custom-editor-events",[Xi(function(T){p.getOpt(T).each(function(I){(ir(s,"init")?s.init(I.element.dom):YT.load(s.scriptId,s.scriptUrl).then(function(R){return R(I.element.dom,s.settings)})).then(function(R){_.on(function(H){R.setValue(H)}),_.clear(),d.set(R)})})})]),er.config({store:{mode:"manual",getValue:function(){return d.get().fold(function(){return _.get().getOr("")},function(T){return T.getValue()})},setValue:function(T,I){d.get().fold(function(){_.set(I)},function(R){return R.setValue(I)})}}}),kp()]),components:[p.asSpec()]}}),htmlpanel:Gs(function(s){return ba.sketch("presentation"===s.presets?{dom:{tag:"div",classes:["tox-form__group"],innerHtml:s.html}}:{dom:{tag:"div",classes:["tox-form__group"],innerHtml:s.html,attributes:{role:"document"}},containerBehaviours:Ln([Ko.config({}),eo.config({})])})}),imagetools:Gs(function(s,d){return T2(s,d.shared.providers)}),table:Gs(function(s,d){return function M2(s,d){function p(_){return{dom:{tag:"td",innerHtml:d.translate(_)}}}return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:Ot(s.header,function(_){return{dom:{tag:"th",innerHtml:d.translate(_)}}})}]},{dom:{tag:"tbody"},components:Ot(s.cells,function(_){return{dom:{tag:"tr"},components:Ot(_,p)}})}],behaviours:Ln([Ko.config({}),eo.config({})])}}(s,d.shared.providers)}),panel:Gs(function(s,d){return{dom:{tag:"div",classes:s.classes},components:Ot(s.items,d.shared.interpreter)}})},HO={field:function(s,d){return d}},XD=function(s,d,p){return sn(VO,d.type).fold(function(){return console.error('Unknown factory type "'+d.type+'", defaulting to container: ',d),d},function(_){return _(s,d,p)})},vI={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},YD=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],ZD=function(s){return to(s,function(d,p){if(ir(p,"items")){var _=ZD(p.items);return{customFormats:d.customFormats.concat(_.customFormats),formats:d.formats.concat([{title:p.title,items:_.formats}])}}if(ir(p,"inline")||ir(p,"block")||ir(p,"selector")){var T="custom-"+($(p.name)?p.name:p.title.toLowerCase());return{customFormats:d.customFormats.concat([{name:T,format:p}]),formats:d.formats.concat([{title:p.title,format:T,icon:p.icon}])}}return de(de({},d),{formats:d.formats.concat(p)})},{customFormats:[],formats:[]})},KD=Dp.trim,$D=_x("true"),yI=_x("false"),bI=function(s){var d=Ot(Qs(ct.fromDom(s),"h1,h2,h3,h4,h5,h6,a:not([href])"),function(p){return p.dom});return ln(Ot(ln(d,y),w).concat(Ot(ln(d,c),D)),O)},sM="tinymce-url-history",af=Av,hS=oh,xI=F([It("shell",!1),bn("makeItem"),It("setupItem",j),Yg("listBehaviours",[no])]),_I=F([dd({name:"items",overrides:function(){return{behaviours:Ln([no.config({})])}}})]),JD=Xa({name:F("CustomList")(),configFields:xI(),partFields:_I(),factory:function(s,d,p,_){var T=s.shell?{behaviours:[no.config({})],components:[]}:{behaviours:[],components:d};return{uid:s.uid,dom:s.dom,components:T.components,behaviours:ja(s.listBehaviours,T.behaviours),apis:{setItems:function(I,R){var H;H=I,(s.shell?X.some(H):Bo(H,s,"items")).fold(function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")},function(W){var ee=no.contents(W),ue=R.length,he=ue-ee.length,we=0<he?pn(he,function(){return s.makeItem()}):[],Te=ee.slice(ue);ur(Te,function(Re){return no.remove(W,Re)}),ur(we,function(Re){return no.append(W,Re)});var Le=no.contents(W);ur(Le,function(Re,Be){s.setupItem(I,Re,R[Be],Be)})})}}}},apis:{setItems:function(s,d,p){s.setItems(d,p)}}}),gS=F([bn("dom"),It("shell",!0),ns("toolbarBehaviours",[no])]),I2=F([dd({name:"groups",overrides:function(){return{behaviours:Ln([no.config({})])}}})]),u0=Xa({name:"Toolbar",configFields:gS(),partFields:I2(),factory:function(s,d,p,_){var T=s.shell?{behaviours:[no.config({})],components:[]}:{behaviours:[],components:d};return{uid:s.uid,dom:s.dom,components:T.components,behaviours:ja(s.toolbarBehaviours,T.behaviours),apis:{setGroups:function(I,R){var H;H=I,(s.shell?X.some(H):Bo(H,s,"groups")).fold(function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")},function(W){no.set(W,R)})}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(s,d,p){s.setGroups(d,p)}}}),uM=F([]),O2=Object.freeze({__proto__:null,setup:j,isDocked:qe,getBehaviours:uM}),lM=Ns([{static:[]},{absolute:["positionCss"]},{fixed:["positionCss"]}]),QD=function(s,d,p){var _,T,I,R;s.getSystem().isConnected()&&(I=p,R=(T=d).lazyViewport(_=s),I.isDocked()&&$t(_,T,I,R),function Nt(s,d,p){var _,T,I,R=s.element;return fr(Ni(R,"position"),"fixed")?(T=d,Je(_=R,I=p).filter(function(H){return Ve(I.getModes(),H,T)}).bind(function(H){return it(_,H,I)})):function(H,W,ee){var ue,he,we=Lu(H);if(Ve(ee.getModes(),we,W))return X.none();ue=H,he=we,ee.setInitialPos({style:function(){var Xe={},De=ue.dom;if(qi(De))for(var Ue=0;Ue<De.style.length;Ue++){var at=De.style.item(Ue);Xe[at]=De.style[at]}return Xe}(),position:Is(ue,"position")||"static",bounds:he});var Te=xu(),Re=W.y-Te.y,Be=Te.bottom-W.bottom,He=we.y<=W.y;return X.some(lM.fixed(Tu("fixed",X.some(we.x-Te.x),He?X.some(Re):X.none(),X.none(),He?X.none():X.some(Be))))}(R,d,p)}(_,R,I).each(function(H){H.fold(function(){return Ht(_,T,I)},function(W){return on(_,T,I,W)},function(W){$t(_,T,I,R,!0),on(_,T,I,W)})}))},wI=Object.freeze({__proto__:null,refresh:QD,reset:bt,isDocked:function(s,d,p){return p.isDocked()},getModes:function(s,d,p){return p.getModes()},setModes:function(s,d,p,_){return p.setModes(_)}}),WO=Object.freeze({__proto__:null,events:function(s,d){return Qo([Ad(ws(),function(p,_){s.contextual.each(function(T){ou(p.element,T.transitionClass)&&(_c(p.element,[T.transitionClass,T.fadeInClass]),(d.isVisible()?T.onShown:T.onHidden)(p)),_.stop()})}),mn(Bh(),function(p,_){QD(p,s,d)}),mn(ka(),function(p,_){bt(p,s,d)})])}}),Uc=yi({fields:[Ri("contextual",[Cr("fadeInClass"),Cr("fadeOutClass"),Cr("transitionClass"),xs("lazyContext"),No("onShow"),No("onShown"),No("onHide"),No("onHidden")]),Di("lazyViewport",xu),Ah("modes",["top","bottom"],ua),No("onDocked"),No("onUndocked")],name:"docking",active:WO,apis:wI,state:Object.freeze({__proto__:null,init:function(s){var d=wr(!1),p=wr(!0),_=Ai(),T=wr(s.modes);return Jl({isDocked:d.get,setDocked:d.set,getInitialPos:_.get,setInitialPos:_.set,clearInitialPos:_.clear,isVisible:p.get,setVisible:p.set,getModes:T.get,setModes:T.set,readState:function(){return"docked:  "+d.get()+", visible: "+p.get()+", modes: "+T.get().join(",")}})}})}),eA=F(Sr("toolbar-height-change")),_m={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},cM="tox-tinymce--toolbar-sticky-on",tA="tox-tinymce--toolbar-sticky-off",GO=Object.freeze({__proto__:null,setup:function(s,d,p){s.inline||(d.header.isPositionedAtTop()||s.on("ResizeEditor",function(){p().each(Uc.reset)}),s.on("ResizeWindow ResizeEditor",function(){p().each(At)}),s.on("SkinLoaded",function(){p().each(function(_){Uc.isDocked(_)?Uc.reset(_):Uc.refresh(_)})}),s.on("FullscreenStateChanged",function(){p().each(Uc.reset)})),s.on("AfterScrollIntoView",function(_){p().each(function(T){Uc.refresh(T);var I,R,H,W,ee,ue,he,we,Te,Le,Re,Be,He,Xe,De,Ue,at=T.element;ae(at)&&(I=_,W=(H=Bt(R=at)).dom.defaultView.innerHeight,ee=Es(H),he=Kc(ue=ct.fromDom(I.elm)),we=Os(ue),Le=(Te=he.y)+we,Re=df(R),Be=Os(R),Xe=(He=Re.top)+Be,De=Math.abs(He-ee.top)<2,Ue=Math.abs(Xe-(ee.top+W))<2,De&&Te<Xe?Lf(ee.left,Te-Be,H):Ue&&He<Le&&Lf(ee.left,Te-W+we+Be,H))})}),s.on("PostRender",function(){Nn(s,!1)})},isDocked:function(s){return s().map(Uc.isDocked).getOr(!1)},getBehaviours:jn}),UO=Pr([Cr("type"),Bu("items",Wp([Xp([Cr("name"),zu("items",ua)]),ua]))].concat(am)),jO=[bi("text"),bi("tooltip"),bi("icon"),xs("fetch"),Di("onSetup",function(){return j})],qO=Pr(le([Cr("type")],jO,!0)),nA=Pr([Cr("type"),bi("tooltip"),bi("icon"),bi("text"),Dh("select"),xs("fetch"),Di("onSetup",function(){return j}),ql("presets","normal",["normal","color","listpreview"]),It("columns",1),xs("onAction"),xs("onItemAction")]),l0=qa({factory:function(s,d){var p={focus:Rr.focusIn,setMenus:function(_,T){var I=Ot(T,function(R){return Uw(In({type:"menubutton",text:R.text,fetch:function(H){H(R.getItems())}}).mapError(function(H){return wu(H)}).getOrDie(),"tox-mbtn",d.backstage,X.some("menuitem"))});no.set(_,I)}};return{uid:s.uid,dom:s.dom,components:[],behaviours:Ln([no.config({}),Kn("menubar-events",[Xi(function(_){s.onSetup(_)}),mn(td(),function(_,T){ra(_.element,".tox-mbtn--active").each(function(I){ec(T.event.target,".tox-mbtn").each(function(R){Sn(I,R)||_.getSystem().getByDom(I).each(function(H){_.getSystem().getByDom(R).each(function(W){rf.expand(W),rf.close(H),eo.focus(W)})})})})}),mn(xf(),function(_,T){T.event.prevFocus.bind(function(I){return _.getSystem().getByDom(I).toOptional()}).each(function(I){T.event.newFocus.bind(function(R){return _.getSystem().getByDom(R).toOptional()}).each(function(R){rf.isOpen(I)&&(rf.expand(R),rf.close(I))})})})]),Rr.config({mode:"flow",selector:".tox-mbtn",onEscape:function(_){return s.onEscape(_),X.some(!0)}}),Ko.config({})]),apis:p,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[bn("dom"),bn("uid"),bn("onEscape"),bn("backstage"),It("onSetup",j)],apis:{focus:function(s,d){s.focus(d)},setMenus:function(s,d,p){s.setMenus(d,p)}}}),SI=Object.freeze({__proto__:null,refresh:function(s,d,p){var _;p.isExpanded()&&(Co(s.element,Pn(d)),_=Un(d,s.element),Qr(s.element,Pn(d),_))},grow:function(s,d,p){p.isExpanded()||vr(s,d,p)},shrink:function(s,d,p){p.isExpanded()&&Bn(s,d,p)},immediateShrink:function(s,d,p){p.isExpanded()&&Zn(s,d,p)},hasGrown:function(s,d,p){return p.isExpanded()},hasShrunk:function(s,d,p){return p.isCollapsed()},isGrowing:hr,isShrinking:To,isTransitioning:function(s,d,p){return hr(s,d)||To(s,d)},toggleGrow:function(s,d,p){(p.isExpanded()?Bn:vr)(s,d,p)},disableTransitions:Hn}),CI=Object.freeze({__proto__:null,exhibit:function(s,d,p){return ed(d.expanded?{classes:[d.openClass],styles:{}}:{classes:[d.closedClass],styles:bc(d.dimension.property,"0px")})},events:function(s,d){return Qo([Ad(ws(),function(p,_){_.event.raw.propertyName===s.dimension.property&&(Hn(p,s),d.isExpanded()&&Co(p.element,s.dimension.property),(d.isExpanded()?s.onGrown:s.onShrunk)(p))})])}}),Ep=yi({fields:[bn("closedClass"),bn("openClass"),bn("shrinkingClass"),bn("growingClass"),Xo("getAnimationRoot"),No("onShrunk"),No("onStartShrink"),No("onGrown"),No("onStartGrow"),It("expanded",!1),Bu("dimension",Ys("property",{width:[Zo("property","width"),Zo("getDimension",function(s){return fn(s)+"px"})],height:[Zo("property","height"),Zo("getDimension",function(s){return Os(s)+"px"})]}))],name:"sliding",active:CI,apis:SI,state:Object.freeze({__proto__:null,init:function(s){var d=wr(s.expanded);return Jl({isExpanded:function(){return!0===d.get()},isCollapsed:function(){return!1===d.get()},setCollapsed:Ee(d.set,!1),setExpanded:Ee(d.set,!0),readState:function(){return"expanded: "+d.get()}})}})}),kI="container",XO=[ns("slotBehaviours",[])],TI=yn({getSlotNames:function(s,d){return s.getSlotNames(d)},getSlot:function(s,d,p){return s.getSlot(d,p)},isShowing:function(s,d,p){return s.isShowing(d,p)},hideSlot:function(s,d,p){return s.hideSlot(d,p)},hideAllSlots:function(s,d){return s.hideAllSlots(d)},showSlot:function(s,d,p){return s.showSlot(d,p)}},Ls),Fy=de(de({},TI),{sketch:function(s){var d,p={slot:function(I,R){return d.push(I),lu(kI,st(I),R)},record:F(d=[])},_=s(p),T=Ot(p.record(),function(I){return du({name:I,pname:st(I)})});return ms(kI,XO,T,HD,_)}}),MI=Pr([bi("icon"),bi("tooltip"),Di("onShow",j),Di("onHide",j),Di("onSetup",function(){return j})]),dk=Sr("FixSizeEvent"),E2=Sr("AutoSizeEvent"),DI=Object.freeze({__proto__:null,block:function(s,d,p,_){Ir(s.element,"aria-busy",!0);var T=d.getRoot(s).getOr(s),I=Ln([Rr.config({mode:"special",onTab:function(){return X.some(!0)},onShiftTab:function(){return X.some(!0)}}),eo.config({})]),R=_(T,I),H=T.getSystem().build(R);no.append(T,Ql(H)),H.hasConfigured(Rr)&&d.focus&&Rr.focusIn(H),p.isBlocked()||d.onBlock(s),p.blockWith(function(){return no.remove(T,H)})},unblock:function(s,d,p){pa(s.element,"aria-busy"),p.isBlocked()&&d.onUnblock(s),p.clear()}}),gg=yi({fields:[Di("getRoot",X.none),Ha("focus",!0),No("onBlock"),No("onUnblock")],name:"blocking",apis:DI,state:Object.freeze({__proto__:null,init:function(){var s=al();return Jl({readState:s.isSet,blockWith:function(d){s.set({destroy:d})},clear:s.clear,isBlocked:s.isSet})}})}),rA=F([ns("splitToolbarBehaviours",[Na]),Su("builtGroups",function(){return wr([])})]),YO=F([jr(["overflowToggledClass"]),Dh("getOverflowBounds"),bn("lazySink"),Su("overflowGroups",function(){return wr([])})].concat(rA())),AI=F([du({factory:u0,schema:gS(),name:"primary"}),Lc({schema:gS(),name:"overflow"}),Lc({name:"overflow-button"}),Lc({name:"overflow-group"})]),P2=F(function(s,d){var p=s,_=Math.floor(d);Qr(p,"max-width",Ju.max(p,_,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"])+"px")}),N2=F([jr(["toggledClass"]),bn("lazySink"),xs("fetch"),Dh("getBounds"),Ri("fireDismissalEventInstead",[It("event",Sg())]),Ng()]),R2=F([Lc({name:"button",overrides:function(s){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:Ln([Ho.config({toggleClass:s.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1})])}}}),Lc({factory:u0,schema:gS(),name:"toolbar",overrides:function(s){return{toolbarBehaviours:Ln([Rr.config({mode:"cyclic",onEscape:function(d){return Bo(d,s,"button").each(eo.focus),X.none()}})])}}})]),Sx=Xa({name:"FloatingToolbarButton",factory:function(s,d,p,_){return de(de({},Iu.sketch(de(de({},_.button()),{action:function(T){Ra(T,_)},buttonBehaviours:Nc({dump:_.button().buttonBehaviours},[Na.config({others:{toolbarSandbox:function(T){return I=T,R=p,H=s,{dom:{tag:"div",attributes:{id:(W=Cs()).id}},behaviours:Ln([Rr.config({mode:"special",onEscape:function(ee){return po.close(ee),X.some(!0)}}),po.config({onOpen:function(ee,ue){H.fetch().get(function(he){ju(I,ue,H,R.layouts,he),W.link(I.element),Rr.focusIn(ue)})},onClose:function(){Ho.off(I),eo.focus(I),W.unlink(I.element)},isPartOf:function(ee,ue,he){return tl(ue,he)||tl(I,he)},getAttachPoint:function(){return H.lazySink(I).getOrDie()}}),nc.config({channels:de(de({},Du(de({isExtraPart:qe},H.fireDismissalEventInstead.map(function(ee){return{fireEventInstead:{event:ee.event}}}).getOr({})))),Yh({doReposition:function(){po.getState(Na.getCoupled(I,"toolbarSandbox")).each(function(ee){Ms(I,ee,H,R.layouts)})}}))})])};var I,R,H,W}}})])}))),{apis:{setGroups:function(T,I){po.getState(Na.getCoupled(T,"toolbarSandbox")).each(function(R){ju(T,R,s,p.layouts,I)})},reposition:function(T){po.getState(Na.getCoupled(T,"toolbarSandbox")).each(function(I){Ms(T,I,s,p.layouts)})},toggle:function(T){Ra(T,_)},getToolbar:function(T){return po.getState(Na.getCoupled(T,"toolbarSandbox"))},isOpen:function(T){return po.isOpen(Na.getCoupled(T,"toolbarSandbox"))}}})},configFields:N2(),partFields:R2(),apis:{setGroups:function(s,d,p){s.setGroups(d,p)},reposition:function(s,d){s.reposition(d)},toggle:function(s,d){s.toggle(d)},getToolbar:function(s,d){return s.getToolbar(d)},isOpen:function(s,d){return s.isOpen(d)}}}),oA=F([bn("items"),jr(["itemSelector"]),ns("tgroupBehaviours",[Rr])]),II=F([Jg({name:"items",unit:"item"})]),dM=Xa({name:"ToolbarGroup",configFields:oA(),partFields:II(),factory:function(s,d,p,_){return{uid:s.uid,dom:s.dom,components:d,behaviours:ja(s.tgroupBehaviours,[Rr.config({mode:"flow",selector:s.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),OI=Xa({name:"SplitFloatingToolbar",configFields:YO(),partFields:AI(),factory:function(s,d,p,_){var T=ui(Sx.sketch({fetch:function(){return wp(function(I){I(Us(s.overflowGroups.get()))})},layouts:{onLtr:function(){return[su,Fs]},onRtl:function(){return[Fs,su]},onBottomLtr:function(){return[gs,Il]},onBottomRtl:function(){return[Il,gs]}},getBounds:p.getOverflowBounds,lazySink:s.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:s.markers.overflowToggledClass},parts:{button:_["overflow-button"](),toolbar:_.overflow()}}));return{uid:s.uid,dom:s.dom,components:d,behaviours:ja(s.splitToolbarBehaviours,[Na.config({others:{overflowGroup:function(){return dM.sketch(de(de({},_["overflow-group"]()),{items:[T.asSpec()]}))}}})]),apis:{setGroups:function(I,R){s.builtGroups.set(Ot(R,I.getSystem().build)),Eu(I,T,s)},refresh:function(I){return Eu(I,T,s)},toggle:function(I){T.getOpt(I).each(function(R){Sx.toggle(R)})},isOpen:function(I){return T.getOpt(I).map(Sx.isOpen).getOr(!1)},reposition:function(I){T.getOpt(I).each(function(R){Sx.reposition(R)})},getOverflow:function(I){return T.getOpt(I).bind(Sx.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(s,d,p){s.setGroups(d,p)},refresh:function(s,d){s.refresh(d)},reposition:function(s,d){s.reposition(d)},toggle:function(s,d){s.toggle(d)},isOpen:function(s,d){return s.isOpen(d)},getOverflow:function(s,d){return s.getOverflow(d)}}}),EI=F([jr(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),No("onOpened"),No("onClosed")].concat(rA())),L2=F([du({factory:u0,schema:gS(),name:"primary"}),du({factory:u0,schema:gS(),name:"overflow",overrides:function(s){return{toolbarBehaviours:Ln([Ep.config({dimension:{property:"height"},closedClass:s.markers.closedClass,openClass:s.markers.openClass,shrinkingClass:s.markers.shrinkingClass,growingClass:s.markers.growingClass,onShrunk:function(d){Bo(d,s,"overflow-button").each(function(p){Ho.off(p),eo.focus(p)}),s.onClosed(d)},onGrown:function(d){Rr.focusIn(d),s.onOpened(d)},onStartGrow:function(d){Bo(d,s,"overflow-button").each(Ho.on)}}),Rr.config({mode:"acyclic",onEscape:function(d){return Bo(d,s,"overflow-button").each(eo.focus),X.some(!0)}})])}}}),Lc({name:"overflow-button",overrides:function(s){return{buttonBehaviours:Ln([Ho.config({toggleClass:s.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),Lc({name:"overflow-group"})]),p_=Xa({name:"SplitSlidingToolbar",configFields:EI(),partFields:L2(),factory:function(s,d,p,_){var T="alloy.toolbar.toggle";return{uid:s.uid,dom:s.dom,components:d,behaviours:ja(s.splitToolbarBehaviours,[Na.config({others:{overflowGroup:function(I){return dM.sketch(de(de({},_["overflow-group"]()),{items:[Iu.sketch(de(de({},_["overflow-button"]()),{action:function(R){Lo(I,T)}}))]}))}}}),Kn("toolbar-toggle-events",[mn(T,function(I){bm(I,s)})])]),apis:{setGroups:function(I,R){var H=Ot(R,I.getSystem().build);s.builtGroups.set(H),WD(I,s)},refresh:function(I){return WD(I,s)},toggle:function(I){return bm(I,s)},isOpen:function(I){return Bo(I,s,"overflow").map(Ep.hasGrown).getOr(!1)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function(s,d,p){s.setGroups(d,p)},refresh:function(s,d){s.refresh(d)},toggle:function(s,d){s.toggle(d)},isOpen:function(s,d){return s.isOpen(d)}}}),ZO=hS.optional({factory:l0,name:"menubar",schema:[bn("backstage")]}),B2=hS.optional({factory:{sketch:function(s){return JD.sketch({uid:s.uid,dom:s.dom,listBehaviours:Ln([Rr.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function(){return s0({type:s.type,uid:Sr("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:s.providers,onEscape:function(){return s.onEscape(),X.some(!0)}})},setupItem:function(d,p,_,T){u0.setGroups(p,_)},shell:!0})}},name:"multiple-toolbar",schema:[bn("dom"),bn("onEscape")]}),iA=hS.optional({factory:{sketch:function(s){return(s.type===ac.sliding?function(d){var p=p_.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),_=p_.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),T=Op(d);return p_.sketch(de(de({},T),{components:[p,_],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function(I){I.getSystem().broadcastOn([eA()],{type:"opened"})},onClosed:function(I){I.getSystem().broadcastOn([eA()],{type:"closed"})}}))}:s.type===ac.floating?function(d){var p=Op(d),_=OI.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return OI.sketch(de(de({},p),{lazySink:d.getSink,getOverflowBounds:function(){var T=d.moreDrawerData.lazyHeader().element,I=Kc(T),R=Wr(T),H=Kc(R),W=Math.max(R.dom.scrollHeight,H.height);return Xs(I.x+4,H.y,I.width-8,W)},parts:de(de({},p.parts),{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:d.attributes}}}),components:[_],markers:{overflowToggledClass:"tox-tbtn--enabled"}}))}:s0)({type:s.type,uid:s.uid,onEscape:function(){return s.onEscape(),X.some(!0)},cyclicKeying:!1,initGroups:[],getSink:s.getSink,providers:s.providers,moreDrawerData:{lazyToolbar:s.lazyToolbar,lazyMoreButton:s.lazyMoreButton,lazyHeader:s.lazyHeader},attributes:s.attributes})}},name:"toolbar",schema:[bn("dom"),bn("onEscape"),bn("getSink")]}),KO=hS.optional({factory:{sketch:function(s){return{uid:s.uid,dom:s.dom,components:s.components,behaviours:Ln((s.sticky?jn:uM)(s.editor,s.sharedBackstage))}}},name:"header",schema:[bn("dom")]}),fM=hS.optional({name:"socket",schema:[bn("dom")]}),v_=hS.optional({factory:{sketch:function(s){return{uid:s.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"complementary"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:Ln([Ko.config({}),eo.config({}),Ep.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function(d){Io.getCurrent(d).each(Fy.hideAllSlots),Lo(d,E2)},onGrown:function(d){Lo(d,E2)},onStartGrow:function(d){kr(d,dk,{width:Ni(d.element,"width").getOr("")})},onStartShrink:function(d){kr(d,dk,{width:fn(d.element)+"px"})}}),no.config({}),Io.config({find:function(d){return Pi(no.contents(d))}})])}],behaviours:Ln([Iy(0),Kn("sidebar-sliding-events",[mn(dk,function(d,p){Qr(d.element,"width",p.event.width)}),mn(E2,function(d,p){Co(d.element,"width")})])])}}},name:"sidebar",schema:[bn("dom")]}),z2=hS.optional({factory:{sketch:function(s){return{uid:s.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:Ln([no.config({}),gg.config({focus:!1}),Io.config({find:function(d){return Pi(d.components())}})]),components:[]}}},name:"throbber",schema:[bn("dom")]}),Ka=Xa({name:"OuterContainer",factory:function(s,d,p){return{uid:s.uid,dom:s.dom,components:d,apis:{getSocket:function(_){return af.getPart(_,s,"socket")},setSidebar:function(_,T){af.getPart(_,s,"sidebar").each(function(I){return function cn(s,d){Io.getCurrent(s).each(function(p){return no.set(p,[(_=d,Fy.sketch(function(T){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:(I=T,H=Ot(pi(R=_),function(W){var ue=el(Zi("sidebar",MI,R[W]));return{name:W,getApi:kt,onSetup:ue.onSetup,onShow:ue.onShow,onHide:ue.onHide}}),Ot(H,function(W){var ee=wr(j);return I.slot(W.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:cw([Ub(W,ee),P1(W,ee),mn(_f(),function(ue,he){var we=he.event;wo(H,function(Te){return Te.name===we.name}).each(function(Te){(we.visible?Te.onShow:Te.onHide)(Te.getApi(ue))})})])})})),slotBehaviours:cw([Xi(function(W){return Fy.hideAllSlots(W)})])};var I,R,H}))]);var _})}(I,T)})},toggleSidebar:function(_,T){af.getPart(_,s,"sidebar").each(function(I){var R=T;Io.getCurrent(I).each(function(H){Io.getCurrent(H).each(function(W){Ep.hasGrown(H)?Fy.isShowing(W,R)?Ep.shrink(H):(Fy.hideAllSlots(W),Fy.showSlot(W,R)):(Fy.hideAllSlots(W),Fy.showSlot(W,R),Ep.grow(H))})})})},whichSidebar:function(_){return af.getPart(_,s,"sidebar").bind(xn).getOrNull()},getHeader:function(_){return af.getPart(_,s,"header")},getToolbar:function(_){return af.getPart(_,s,"toolbar")},setToolbar:function(_,T){af.getPart(_,s,"toolbar").each(function(I){I.getApis().setGroups(I,T)})},setToolbars:function(_,T){af.getPart(_,s,"multiple-toolbar").each(function(I){JD.setItems(I,T)})},refreshToolbar:function(_){af.getPart(_,s,"toolbar").each(function(T){return T.getApis().refresh(T)})},toggleToolbarDrawer:function(_){af.getPart(_,s,"toolbar").each(function(T){var I=T.getApis().toggle;null!=I?X.some(I(T)):X.none()})},isToolbarDrawerToggled:function(_){return af.getPart(_,s,"toolbar").bind(function(T){return X.from(T.getApis().isOpen).map(function(I){return I(T)})}).getOr(!1)},getThrobber:function(_){return af.getPart(_,s,"throbber")},focusToolbar:function(_){af.getPart(_,s,"toolbar").orThunk(function(){return af.getPart(_,s,"multiple-toolbar")}).each(function(T){Rr.focusIn(T)})},setMenubar:function(_,T){af.getPart(_,s,"menubar").each(function(I){l0.setMenus(I,T)})},focusMenubar:function(_){af.getPart(_,s,"menubar").each(function(T){l0.focus(T)})}},behaviours:s.behaviours}},configFields:[bn("dom"),bn("behaviours")],partFields:[KO,ZO,iA,B2,fM,v_,z2],apis:{getSocket:function(s,d){return s.getSocket(d)},setSidebar:function(s,d,p){s.setSidebar(d,p)},toggleSidebar:function(s,d,p){s.toggleSidebar(d,p)},whichSidebar:function(s,d){return s.whichSidebar(d)},getHeader:function(s,d){return s.getHeader(d)},getToolbar:function(s,d){return s.getToolbar(d)},setToolbar:function(s,d,p){var _=Ot(p,Ip);s.setToolbar(d,_)},setToolbars:function(s,d,p){var _=Ot(p,function(T){return Ot(T,Ip)});s.setToolbars(d,_)},refreshToolbar:function(s,d){return s.refreshToolbar(d)},toggleToolbarDrawer:function(s,d){s.toggleToolbarDrawer(d)},isToolbarDrawerToggled:function(s,d){return s.isToolbarDrawerToggled(d)},getThrobber:function(s,d){return s.getThrobber(d)},setMenubar:function(s,d,p){s.setMenubar(d,p)},focusMenubar:function(s,d){s.focusMenubar(d)},focusToolbar:function(s,d){s.focusToolbar(d)}}}),F2={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template codesample inserttable | charmap emoticons hr | pagebreak nonbreaking anchor toc | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | formats blockformats fontformats fontsizes align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"spellchecker spellcheckerlanguage | a11ycheck code wordcount"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},$O=Ee(rM,!1),V2=Ee(rM,!0);function y_(s,d,p,_){var T;return{type:"basic",data:(T=s.getParam(d,p,"string"),Ot(_===cS.SemiColon?T.replace(/;$/,"").split(";"):T.split(" "),function(I){var R=I,H=I,W=I.split("=");return 1<W.length&&(R=W[0],H=W[1]),{title:R,format:H}}))}}function H2(s){var d={type:"basic",data:__};return{tooltip:"Align",text:X.none(),icon:X.some("align-left"),isSelectedFor:function(p){return function(){return s.formatter.match(p)}},getCurrentValue:X.none,getPreviewFor:function(p){return X.none},onAction:function(p){return function(){return wo(__,function(_){return _.format===p.format}).each(function(_){return s.execCommand(_.command)})}},updateText:function(p){var _=wo(__,function(T){return s.formatter.match(T.format)}).fold(F("left"),function(T){return T.title.toLowerCase()});kr(p,S2,{icon:"align-"+_})},dataset:d,shouldHide:!1,isInvalid:function(p){return!s.formatter.canApply(p.format)}}}function aA(s){return Ot(s.split(/\s*,\s*/),function(d){return d.replace(/^['"]+|['"]+$/g,"")})}function PI(s){function d(){function T(W){return W?aA(W)[0]:""}var I=s.queryCommandValue("FontName"),R=_.data,H=I?I.toLowerCase():"";return{matchOpt:wo(R,function(W){var ee=W.format;return ee.toLowerCase()===H||T(ee).toLowerCase()===T(H).toLowerCase()}).orThunk(function(){return li(0===(W=H).indexOf("-apple-system")&&(ee=aA(W.toLowerCase()),xt(JO,function(ue){return-1<ee.indexOf(ue.toLowerCase())})),{title:p,format:H});var W,ee}),font:I}}var p="System Font",_=y_(s,"font_formats","Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats",cS.SemiColon);return{tooltip:"Fonts",text:X.some(p),icon:X.none(),isSelectedFor:function(T){return function(I){return I.exists(function(R){return R.format===T})}},getCurrentValue:function(){return d().matchOpt},getPreviewFor:function(T){return function(){return X.some({tag:"div",styles:-1===T.indexOf("dings")?{"font-family":T}:{}})}},onAction:function(T){return function(){s.undoManager.transact(function(){s.focus(),s.execCommand("FontName",!1,T.format)})}},updateText:function(T){var I=d(),W=I.matchOpt.fold(F(I.font),function(ee){return ee.title});kr(T,Wc,{text:W})},dataset:_,shouldHide:!1,isInvalid:qe}}function sA(s){function d(){var T=X.none(),I=_.data,R=s.queryCommandValue("FontSize");if(R)for(var H=function(ee){var ue,he,we,Te,Le=(he=ee,/[0-9.]+px$/.test(ue=R)?(we=72*parseInt(ue,10)/96,Te=Math.pow(10,he||0),Math.round(we*Te)/Te+"pt"):sn(QO,ue).getOr(ue)),Re=sn(HI,Le).getOr("");T=wo(I,function(Be){return Be.format===R||Be.format===Le||Be.format===Re})},W=3;T.isNone()&&0<=W;W--)H(W);return{matchOpt:T,size:R}}var p=F(X.none),_=y_(s,"fontsize_formats","8pt 10pt 12pt 14pt 18pt 24pt 36pt",cS.Space);return{tooltip:"Font sizes",text:X.some("12pt"),icon:X.none(),isSelectedFor:function(T){return function(I){return I.exists(function(R){return R.format===T})}},getPreviewFor:p,getCurrentValue:function(){return d().matchOpt},onAction:function(T){return function(){s.undoManager.transact(function(){s.focus(),s.execCommand("FontSize",!1,T.format)})}},updateText:function(T){var I=d(),W=I.matchOpt.fold(F(I.size),function(ee){return ee.title});kr(T,Wc,{text:W})},dataset:_,shouldHide:!1,isInvalid:qe}}function uA(s,d){var p=d(),_=Ot(p,function(T){return T.format});return X.from(s.formatter.closest(_)).bind(function(T){return wo(p,function(I){return I.format===T})}).orThunk(function(){return li(s.formatter.match("p"),{title:"Paragraph",format:"p"})})}function W2(s){var d=y_(s,"block_formats","Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre",cS.SemiColon);return{tooltip:"Blocks",text:X.some("Paragraph"),icon:X.none(),isSelectedFor:function(p){return function(){return s.formatter.match(p)}},getCurrentValue:X.none,getPreviewFor:function(p){return function(){var _=s.formatter.get(p);return X.some({tag:0<_.length&&(_[0].inline||_[0].block)||"div",styles:s.dom.parseStyle(s.formatter.getCssText(p))})}},onAction:VD(s),updateText:function(p){var _=uA(s,function(){return d.data}).fold(F("Paragraph"),function(T){return T.title});kr(p,Wc,{text:_})},dataset:d,shouldHide:!1,isInvalid:function(p){return!s.formatter.canApply(p.format)}}}function lA(s,d){return{tooltip:"Formats",text:X.some("Paragraph"),icon:X.none(),isSelectedFor:function(p){return function(){return s.formatter.match(p)}},getCurrentValue:X.none,getPreviewFor:function(p){return function(){var _=s.formatter.get(p);return void 0!==_?X.some({tag:0<_.length&&(_[0].inline||_[0].block)||"div",styles:s.dom.parseStyle(s.formatter.getCssText(p))}):X.none()}},onAction:VD(s),updateText:function(p){var _=function(R){var H=R.items;return void 0!==H&&0<H.length?Or(H,_):[{title:R.title,format:R.format}]},T=Or(sS(s),_),I=uA(s,F(T)).fold(F("Paragraph"),function(R){return R.title});kr(p,Wc,{text:I})},shouldHide:s.getParam("style_formats_autohide",!1,"boolean"),isInvalid:function(p){return!s.formatter.canApply(p.format)},dataset:d}}function NI(s){return{isDisabled:function(){return xr.isDisabled(s)},setDisabled:function(d){return xr.set(s,d)}}}function RI(s){return{setActive:function(d){Ho.set(s,d)},isActive:function(){return Ho.isOn(s)},isDisabled:function(){return xr.isDisabled(s)},setDisabled:function(d){return xr.set(s,d)}}}function cA(s,d){return s.map(function(p){return{"aria-label":d.translate(p),title:d.translate(p)}}).getOr({})}function G2(s,d,p,_,T,I){var R;return{dom:{tag:"button",classes:["tox-tbtn"].concat(d.isSome()?["tox-tbtn--select"]:[]),attributes:cA(p,I)},components:ly([s.map(function(H){return t0(H,I.icons)}),d.map(function(H){return u_(H,"tox-tbtn",I)})]),eventOrder:((R={})[Kl()]=["focusing","alloy.base.behaviour","common-button-display-events"],R),buttonBehaviours:Ln([vC(I.isDisabled),Ya(),Kn("common-button-display-events",[mn(Kl(),function(H,W){W.event.prevent(),Lo(H,K2)})])].concat(_.map(function(H){return bh.config({channel:H,initialData:{icon:s,text:d},renderComponents:function(W,ee){return ly([W.icon.map(function(ue){return t0(ue,I.icons)}),W.text.map(function(ue){return u_(ue,"tox-tbtn",I)})])}})}).toArray()).concat(T.getOr([])))}}function U2(s,d,p){var _,T=wr(j),I=G2(s.icon,s.text,s.tooltip,X.none(),X.none(),p);return Iu.sketch({dom:I.dom,components:I.components,eventOrder:nS,buttonBehaviours:Ln([Kn("toolbar-button-events",[(_={onAction:s.onAction,getApi:d.getApi},zs(function(R,H){Fc(_,R)(function(W){kr(R,KT,{buttonApi:W}),_.onAction(W)})})),Ub(d,T),P1(d,T)]),vC(function(){return s.disabled||p.isDisabled()}),Ya()].concat(d.toolbarButtonBehaviours))})}function mS(s,d){return function(p,_,T){var I=s(p).mapError(function(R){return wu(R)}).getOrDie();return d(I,_,T)}}function LI(s,d,p,_){var T,I=d.outerContainer,R=p.toolbar,H=p.buttons;je(R,$)?(T=R.map(function(W){return J2(s,{toolbar:W,buttons:H,allowToolbarGroups:p.allowToolbarGroups},{backstage:_},X.none())}),Ka.setToolbars(I,T)):Ka.setToolbar(I,J2(s,p,{backstage:_},X.none()))}function hM(s){return/^[0-9\.]+(|px)$/i.test(""+s)?X.some(parseInt(""+s,10)):X.none()}function pS(s){return Ne(s)?s+"px":s}function gM(s,d,p){var _=d.filter(function(I){return s<I}),T=p.filter(function(I){return I<s});return _.or(T).getOr(s)}function dA(s){var d=nC(s),p=A1(s),_=ry(s);return hM(d).map(function(T){return gM(T,p,_)})}function zI(s,d){var p=Lu(s);return{pos:d?p.y:p.bottom,bounds:p}}function j2(s,d){return mn(KT,function(p,_){var T,I=s.get(p),R=(T=I,{hide:function(){return Lo(T,Sl())},getValue:function(){return er.getValue(T)}});d.onAction(R,_.event.buttonApi)})}function b_(s,d,p){return d.bottom-s.y>=(p=void 0===p?.01:p)&&s.bottom-d.y>=p}function q2(s){var d=function(T){var I=T.getBoundingClientRect();if(I.height<=0&&I.width<=0){var R=yr(ct.fromDom(T.startContainer),T.startOffset).element;return(gc(R)?Er(R):X.some(R)).filter(Ja).map(function(H){return H.dom.getBoundingClientRect()}).getOr(I)}return I}(s.selection.getRng());if(s.inline){var p=Es();return Xs(p.left+d.left,p.top+d.top,d.width,d.height)}var _=Kc(ct.fromDom(s.getBody()));return Xs(_.x+d.left,_.y+d.top,d.width,d.height)}function fA(s,d,p,_){void 0===_&&(_=0);var T,I,R,H,W=Mm(window),ee=Lu(ct.fromDom(s.getContentAreaContainer())),ue=Jd(s)||Ll(s)||dw(s),he=(T=ee,I=W,R=_,{x:H=Math.max(T.x+R,I.x),width:Math.min(T.right-R,I.right)-H}),we=he.x,Te=he.width;if(s.inline&&!ue)return Xs(we,W.y,Te,W.height);var Le=function(He,Xe,De,Ue,at,gt){var Xt=ct.fromDom(He.getContainer()),Lt=ra(Xt,".tox-editor-header").getOr(Xt),nn=Lu(Lt),an=Ue&&!(nn.y>=Xe.bottom);if(He.inline&&an)return{y:Math.max(nn.bottom+gt,De.y),bottom:De.bottom};if(He.inline&&!an)return{y:De.y,bottom:Math.min(nn.y-gt,De.bottom)};var kn="line"===at?Lu(Xt):Xe;return an?{y:Math.max(nn.bottom+gt,De.y),bottom:Math.min(kn.bottom-gt,De.bottom)}:{y:Math.max(kn.y+gt,De.y),bottom:Math.min(nn.y-gt,De.bottom)}}(s,ee,W,d.header.isPositionedAtTop(),p,_),Re=Le.y;return Xs(we,Re,Te,Le.bottom-Re)}function x_(s){return"node"===s}function mM(s,d){var p=Gn(ln(d,function(_){return _.predicate(s.dom)}),function(_){return"contexttoolbar"===_.type});return{contextToolbars:p.pass,contextForms:p.fail}}function hA(s,d,p,_){function T(){var Lt=De.get().getOr("node"),nn=x_(Lt)?1:0;return fA(s,Re,Lt,nn)}function I(){return!(s.removed||Be()&&Le.isContextMenuOpen())}function R(){if(I()){var Lt=T(),nn=fr(De.get(),"node")?(_n=s,He.get().filter(ys).map(Kc).getOrThunk(function(){return q2(_n)})):q2(s);return Lt.height<=0||!b_(nn,Lt)}return 1;var _n}function H(){He.clear(),Xe.clear(),De.clear(),Ui.hide(Ue)}function W(){var Lt;Ui.isOpen(Ue)&&(Co(Lt=Ue.element,"display"),R()?Qr(Lt,"display","none"):(Xe.set(0),Ui.reposition(Ue)))}function ee(Lt){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[Lt],behaviours:Ln([Rr.config({mode:"acyclic"}),Kn("pop-dialog-wrap-events",[Xi(function(nn){s.shortcuts.add("ctrl+F9","focus statusbar",function(){return Rr.focusIn(nn)})}),Cl(function(nn){s.shortcuts.remove("ctrl+F9")})])])}}function he(Lt,nn){var _n,an,kn,Vn;Xt.cancel(),I()&&(_n=gt(Lt),kn=function ue(Lt,nn){var _n,an,kn,Vn,sr,Ar,lo,Jo="node"===Lt?Re.anchors.node(nn):Re.anchors.cursor(),gi=(_n=s,an=Lt,kn=Be(),Vn={lastElement:He.get,isReposition:function(){return fr(Xe.get(),0)},getMode:function(){return Gu.getMode(p)}},"line"===an?{bubble:Mc(12,0,eD),layouts:{onLtr:function(){return[Js]},onRtl:function(){return[rl]}},overrides:yA}:{bubble:Mc(0,12,eD,1/12),layouts:(sr=_n,Ar=Vn,lo=an,kn?{onLtr:function(Uo){return[Go,Fs,su,Il,gs,Ol].concat(Fi(Uo))},onRtl:function(Uo){return[Go,su,Fs,gs,Il,Ol].concat(Fi(Uo))}}:{onLtr:function(Uo){return[Ol,Go,Il,Fs,gs,su].concat(Fi(Uo))},onRtl:function(Uo){return[Ol,Go,gs,su,Il,Fs].concat(Fi(Uo))}}),overrides:yA});function Fi(Uo){return x_(lo)?[(mi=Uo,function(Ci,Ji,oi,xa,dl){var yd=function vS(s,d,p,_,T){var I=q2(s),R=_.lastElement().exists(function(ue){return Sn(p,ue)}),H=p,W=s.selection.getRng(),ee=yr(ct.fromDom(W.startContainer),W.startOffset);return W.startContainer===W.endContainer&&W.startOffset===W.endOffset-1&&Sn(ee.element,H)?R?Tb:Kd:R?function(ue,he){var we=Ni(ue,"position");Qr(ue,"position",he);var Te=b_(I,Lu(d))&&!_.isReposition()?K_:Tb;return we.each(function(Le){return Qr(ue,"position",Le)}),Te}(d,_.getMode()):("fixed"===_.getMode()?T.y+Es().top:T.y)+(Os(d)+12)<=I.y?Kd:ty}(sr,xa,mi,Ar,dl),uf=de(de({},Ci),{y:dl.y,height:dl.height});return de(de({},yd(uf,Ji,oi,xa,dl)),{alwaysFit:!0})})]:[];var mi}return xo(Jo,gi)}(an=Lt[0].position,nn),De.set(an),Xe.set(1),Co(Vn=Ue.element,"display"),fr(Vt(nn,He.get(),Sn),!0)||(_i(Vn,vM),Gu.reset(p,Ue)),Ui.showWithinBounds(Ue,ee(_n),{anchor:kn,transition:{classes:[vM],mode:"placement"}},function(){return X.some(T())}),nn.fold(He.clear,He.set),R()&&Qr(Vn,"display","none"))}var we,Te,Le=_.backstage,Re=Le.shared,Be=ml().deviceType.isTouch,He=Ai(),Xe=Ai(),De=Ai(),Ue=so((we={sink:p,onEscape:function(){return s.focus(),X.some(!0)}},Te=wr([]),Ui.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function(Lt){Te.set([]),Ui.getContent(Lt).each(function(nn){Co(nn.element,"visibility")}),_i(Lt.element,nD),Co(Lt.element,"width")},inlineBehaviours:Ln([Kn("context-toolbar-events",[Ad(ws(),function(Lt,nn){"width"===nn.event.raw.propertyName&&(_i(Lt.element,nD),Co(Lt.element,"width"))}),mn(yS,function(Lt,nn){var _n=Lt.element;Co(_n,"width");var an=fn(_n);Ui.setContent(Lt,nn.event.contents),Qa(_n,nD);var kn=fn(_n);Qr(_n,"width",an+"px"),Ui.getContent(Lt).each(function(Vn){nn.event.focus.bind(function(sr){return rd(sr),od(_n)}).orThunk(function(){return Rr.focusIn(Vn),Vd(sa(_n))})}),hp.setTimeout(function(){Qr(Lt.element,"width",kn+"px")},0)}),mn(tD,function(Lt,nn){Ui.getContent(Lt).each(function(_n){Te.set(Te.get().concat([{bar:_n,focus:Vd(sa(Lt.element))}]))}),kr(Lt,yS,{contents:nn.event.forwardContents,focus:X.none()})}),mn(bA,function(Lt,nn){Ba(Te.get()).each(function(_n){Te.set(Te.get().slice(0,Te.get().length-1)),kr(Lt,yS,{contents:Ql(_n.bar),focus:_n.focus})})})]),Rr.config({mode:"special",onEscape:function(Lt){return Ba(Te.get()).fold(function(){return we.onEscape()},function(nn){return Lo(Lt,bA),X.some(!0)})}})]),lazySink:function(){return yo.value(we.sink)}}))),at=un(function(){return function VI(s,d){var p={},_=[],T=[],I={},R={},H=pi(s);return ur(H,function(W){var ee,ue,he,we,Te,Le=s[W];"contextform"===Le.type?(he=W,Te=el(Zi("ContextForm",jM,we=Le)),(p[he]=Te).launch.map(function(Re){I["form:"+he]=de(de({},we.launch),{type:"contextformtogglebutton"===Re.type?"togglebutton":"button",onAction:function(){d(Te)}})}),("editor"===Te.scope?T:_).push(Te),R[he]=Te):"contexttoolbar"===Le.type&&(ee=W,Zi("ContextToolbar",$S,ue=Le).each(function(Re){("editor"===ue.scope?T:_).push(Re),R[ee]=Re}))}),{forms:p,inNodeScope:_,inEditorScope:T,lookupTable:R,formNavigators:I}}(d,function(Lt){var nn=gt([Lt]);kr(Ue,tD,{forwardContents:ee(nn)})})}),gt=function(Lt){var nn=s.ui.registry.getAll().buttons,_n=at(),an=de(de({},nn),_n.formNavigators),kn=md(s)===ac.scrolling?ac.scrolling:ac.default,Vn=Gr(Ot(Lt,function(sr){return"contexttoolbar"===sr.type?J2(s,{buttons:an,toolbar:sr.items,allowToolbarGroups:!1},_,X.some(["form:"])):qI(sr,Re.providers)}));return s0({type:kn,uid:Sr("context-toolbar"),initGroups:Vn,onEscape:X.none,cyclicKeying:!0,providers:Re.providers})},Xt=tw(function(){s.hasFocus()&&!s.removed&&(ou(Ue.element,vM)?Xt.throttle():function FI(s,d){function p(R){return Sn(R,T)}var _,T=ct.fromDom(d.getBody()),I=ct.fromDom(d.selection.getNode());return p(_=I)||Fn(T,_)?function(R,H,W){var ee=mM(R,H);if(0<ee.contextForms.length)return X.some({elem:R,toolbars:[ee.contextForms[0]]});var ue=mM(R,W);if(0<ue.contextForms.length)return X.some({elem:R,toolbars:[ue.contextForms[0]]});if(0<ee.contextToolbars.length||0<ue.contextToolbars.length){var he=function(we){if(we.length<=1)return we;function Te(De){return Rt(we,function(Ue){return Ue.position===De})}function Le(De){return ln(we,function(Ue){return Ue.position===De})}var Re=Te("selection"),Be=Te("node");if(Re||Be){if(Be&&Re){var He=Le("node"),Xe=Ot(Le("selection"),function(De){return de(de({},De),{position:"node"})});return He.concat(Xe)}return Le(Re?"selection":"node")}return Le("line")}(ee.contextToolbars.concat(ue.contextToolbars));return X.some({elem:R,toolbars:he})}return X.none()}(I,s.inNodeScope,s.inEditorScope).orThunk(function(){return W=s,(R=p)(H=I)?X.none():N_(H,function(ee){if(Ja(ee)){var ue=mM(ee,W.inNodeScope),we=ue.contextForms,Te=0<we.length?we:(Re=ue.contextToolbars).length<=1?Re:Le("selection").orThunk(function(){return Le("node")}).orThunk(function(){return Le("line")}).map(function(Be){return Be.position}).fold(function(){return[]},function(Be){return ln(Re,function(He){return He.position===Be})});return 0<Te.length?X.some({elem:ee,toolbars:Te}):X.none()}function Le(Be){return wo(Re,function(He){return He.position===Be})}var Re;return X.none()},R);var R,H,W}):X.none()}(at(),s).fold(H,function(Lt){he(Lt.toolbars,X.some(Lt.elem))}))},17);s.on("init",function(){s.on("remove",H),s.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",W),s.on("click keyup focus SetContent",Xt.throttle),s.on(vA,H),s.on("contexttoolbar-show",function(Lt){sn(at().lookupTable,Lt.toolbarKey).each(function(nn){he([nn],li(Lt.target!==s,Lt.target)),Ui.getContent(Ue).each(Rr.focusIn)})}),s.on("focusout",function(Lt){hp.setEditorTimeout(s,function(){od(p.element).isNone()&&od(Ue.element).isNone()&&H()},0)}),s.on("SwitchMode",function(){s.mode.isReadOnly()&&H()}),s.on("AfterProgressState",function(Lt){Lt.state?H():s.hasFocus()&&Xt.throttle()}),s.on("NodeChange",function(Lt){od(Ue.element).fold(Xt.throttle,j)})})}(D2=cS=cS||{})[D2.SemiColon=0]="SemiColon",D2[D2.Space=1]="Space";var X2,Y2,Z2,__=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],JO=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],HI={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},QO={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},gA=Object.freeze({__proto__:null,events:function(s,d){function p(_,T){s.updateState.each(function(I){var R=I(_,T);d.set(R)}),s.renderComponents.each(function(I){var R=Ot(I(T,d.get()),_.getSystem().build);P0(_,R)})}return Qo([mn(qf(),function(_,T){var R=T;R.universal||ki(R.channels,s.channel)&&p(_,R.data)}),Xi(function(_,T){s.initialData.each(function(I){p(_,I)})})])}}),WI=Object.freeze({__proto__:null,getState:function(s,d,p){return p}}),bh=yi({fields:[bn("channel"),Xo("renderComponents"),Xo("updateState"),Xo("initialData")],name:"reflecting",active:gA,apis:WI,state:Object.freeze({__proto__:null,init:function(){var s=wr(X.none());return{readState:function(){return s.get().getOr("none")},get:s.get,set:s.set,clear:function(){return s.set(X.none())}}}})}),eE=F([bn("toggleClass"),bn("fetch"),Hm("onExecute"),It("getHotspot",X.some),It("getAnchorOverrides",F({})),Ng(),Hm("onItemExecute"),Xo("lazySink"),bn("dom"),No("onOpen"),ns("splitDropdownBehaviours",[Na,Rr,eo]),It("matchWidth",!1),It("useMinWidth",!1),It("eventOrder",{}),Xo("role")].concat($1())),tE=F([du({factory:Iu,schema:[bn("dom")],name:"arrow",defaults:function(){return{buttonBehaviours:Ln([eo.revoke()])}},overrides:function(s){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(d){d.getSystem().getByUid(s.uid).each(Md)},buttonBehaviours:Ln([Ho.config({toggleOnExecute:!1,toggleClass:s.toggleClass})])}}}),du({factory:Iu,schema:[bn("dom")],name:"button",defaults:function(){return{buttonBehaviours:Ln([eo.revoke()])}},overrides:function(s){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function(d){d.getSystem().getByUid(s.uid).each(function(p){s.onExecute(p,d)})}}}}),dd({factory:{sketch:function(s){return{uid:s.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:s.text}}}},schema:[bn("text")],name:"aria-descriptor"}),Lc({schema:[ku()],name:"menu",defaults:function(s){return{onExecute:function(d,p){d.getSystem().getByUid(s.uid).each(function(_){s.onItemExecute(_,d,p)})}}}}),dm()]),pM=Xa({name:"SplitDropdown",configFields:eE(),partFields:tE(),factory:function(s,d,p,_){function T(ue){Io.getCurrent(ue).each(function(he){ko.highlightFirst(he),Rr.focusIn(he)})}function I(ue){ex(s,U,ue,_,T,tf.HighlightFirst).get(j)}function R(ue){return Md(ca(ue,s,"button")),X.some(!0)}var H,W=de(de({},Qo([Xi(function(ue,he){Bo(ue,s,"aria-descriptor").each(function(we){var Te=Sr("aria");Ir(we.element,"id",Te),Ir(ue.element,"aria-describedby",Te)})})])),fa(X.some(I)));return{uid:s.uid,dom:s.dom,components:d,apis:{repositionMenus:function(ue){Ho.isOn(ue)&&gT(ue)}},eventOrder:de(de({},s.eventOrder),((H={})[Ca()]=["disabling","toggling","alloy.base.behaviour"],H)),events:W,behaviours:ja(s.splitDropdownBehaviours,[Na.config({others:{sandbox:function(ue){var he=ca(ue,s,"arrow");return K1(s,ue,{onOpen:function(){Ho.on(he),Ho.on(ue)},onClose:function(){Ho.off(he),Ho.off(ue)}})}}}),Rr.config({mode:"special",onSpace:R,onEnter:R,onDown:function(ue){return I(ue),X.some(!0)}}),eo.config({}),Ho.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:s.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function(s,d){return s.repositionMenus(d)}}}),K2=Sr("focus-button"),mA=function(s,d,p){return U2(s,{toolbarButtonBehaviours:[].concat(0<p.length?[Kn("toolbarButtonWith",p)]:[]),getApi:NI,onSetup:s.onSetup},d)},$2=function(s,d,p){return xo(U2(s,{toolbarButtonBehaviours:[no.config({}),Ho.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(0<p.length?[Kn("toolbarToggleButtonWith",p)]:[]),getApi:RI,onSetup:s.onSetup},d))},GI=[{name:"history",items:["undo","redo"]},{name:"styles",items:["styleselect"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],Vy={button:mS(nw,function(s,d){return mA(s,d.backstage.shared.providers,[])}),togglebutton:mS(Nv,function(s,d){return $2(s,d.backstage.shared.providers,[])}),menubutton:mS(In,function(s,d){return Uw(s,"tox-tbtn",d.backstage,X.none())}),splitbutton:mS(function(s){return Zi("SplitButton",nA,s)},function(s,d){return _=s,T=d.backstage.shared,ee=Sr("channel-update-split-dropdown-display"),ue=wr(j),he={getApi:p,onSetup:_.onSetup},pM.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:de({"aria-pressed":!1},cA(_.tooltip,T.providers))},onExecute:function(we){_.onAction(p(we))},onItemExecute:function(we,Te,Le){},splitDropdownBehaviours:Ln([Yb(T.providers.isDisabled),Ya(),Kn("split-dropdown-events",[mn(K2,eo.focus),Ub(he,ue),P1(he,ue)]),Ay.config({})]),eventOrder:((I={})[wc()]=["alloy.base.behaviour","split-dropdown-events"],I),toggleClass:"tox-tbtn--enabled",lazySink:T.getSink,fetch:(R=p,H=_,W=T.providers,function(we){return wp(function(Te){return H.fetch(Te)}).map(function(Te){return X.from(TC(xo(fy(Sr("menu-value"),Te,function(Le){H.onItemAction(R(we),Le)},H.columns,H.presets,ag.CLOSE_ON_EXECUTE,H.select.getOr(qe),W),{movement:ww(H.columns,H.presets),menuBehaviours:cw("auto"!==H.columns?[]:[Xi(function(Le,Re){Bb(Le,4,Wk(H.presets)).each(function(Be){Rr.setGridSize(Le,Be.numRows,Be.numColumns)})})])})))})}),parts:{menu:QS(0,0,_.presets)},components:[pM.parts.button(G2(_.icon,_.text,X.none(),X.some(ee),X.some([Ho.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),T.providers)),pM.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:Mb("chevron-down",T.providers.icons)},buttonBehaviours:Ln([Yb(T.providers.isDisabled),Ya(),Sk()])}),pM.parts["aria-descriptor"]({text:T.providers.translate("To open the popup, press Shift+Enter")})]});function p(we){return{isDisabled:function(){return xr.isDisabled(we)},setDisabled:function(Te){return xr.set(we,Te)},setIconFill:function(Te,Le){ra(we.element,'svg path[id="'+Te+'"], rect[id="'+Te+'"]').each(function(Re){Ir(Re,"fill",Le)})},setIconStroke:function(Te,Le){ra(we.element,'svg path[id="'+Te+'"], rect[id="'+Te+'"]').each(function(Re){Ir(Re,"stroke",Le)})},setActive:function(Te){Ir(we.element,"aria-pressed",Te),ra(we.element,"span").each(function(Le){we.getSystem().getByDom(Le).each(function(Re){return Ho.set(Re,Te)})})},isActive:function(){return ra(we.element,"span").exists(function(Te){return we.getSystem().getByDom(Te).exists(Ho.isOn)})}}}var _,T,I,R,H,W,ee,ue,he}),grouptoolbarbutton:mS(function(s){return Zi("GroupToolbarButton",UO,s)},function(s,d,p){var _,T,R,H,W,ee=p.ui.registry.getAll().buttons,ue=((_={})[Uh]=d.backstage.shared.header.isPositionedAtTop()?ya.TopToBottom:ya.BottomToTop,_);if(md(p)!==ac.floating)throw new Error("Toolbar groups are only supported when using floating toolbar mode");return R=function(he){return J2(p,{buttons:ee,toolbar:he,allowToolbarGroups:!1},d,X.none())},H=ue,Sx.sketch({lazySink:(W=d.backstage.shared).getSink,fetch:function(){return wp(function(he){he(Ot(R(T.items),Ip))})},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:G2((T=s).icon,T.text,T.tooltip,X.none(),X.none(),W.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:H}}}})}),styleSelectButton:function(s,d){return iM(s,p=d.backstage,lA(s,de({type:"advanced"},p.styleselect)));var p},fontsizeSelectButton:function(s,d){return iM(s,d.backstage,sA(s))},fontSelectButton:function(s,d){return iM(s,d.backstage,PI(s))},formatButton:function(s,d){return iM(s,d.backstage,W2(s))},alignMenuButton:function(s,d){return iM(s,d.backstage,H2(s))}},pA={styleselect:Vy.styleSelectButton,fontsizeselect:Vy.fontsizeSelectButton,fontselect:Vy.fontSelectButton,formatselect:Vy.formatButton,align:Vy.alignMenuButton},J2=function(s,d,p,_){var T,I,R,W=!1===(R=d.toolbar)?[]:void 0===R||!0===R?(T=d.buttons,I=Ot(GI,function(ee){var ue=ln(ee.items,function(he){return ir(T,he)||ir(pA,he)});return{name:ee.name,items:ue}}),ln(I,function(ee){return 0<ee.items.length})):$(R)?Ot(R.split("|"),function(ee){return{items:ee.trim().split(" ")}}):je(R,function(ee){return ir(ee,"name")&&ir(ee,"items")})?R:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[]);return ln(Ot(W,function(ee){var ue=Or(ee.items,function(he){return 0===he.trim().length?[]:(we=s,Re=d.allowToolbarGroups,Be=p,He=_,sn(Te=d.buttons,(Le=he).toLowerCase()).orThunk(function(){return He.bind(function(Xe){return Gt(Xe,function(De){return sn(Te,De+Le.toLowerCase())})})}).fold(function(){return sn(pA,Le.toLowerCase()).map(function(Xe){return Xe(we,Be)}).orThunk(function(){return X.none()})},function(Xe){return"grouptoolbarbutton"!==Xe.type||Re?(Ue=Be,at=we,sn(Vy,(De=Xe).type).fold(function(){return console.error("skipping button defined by",De),X.none()},function(gt){return X.some(gt(De,Ue,at))})):(console.warn("Ignoring the '"+Le+"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested."),X.none());var De,Ue,at}).toArray());var we,Te,Le,Re,Be,He});return{title:X.from(s.translate(ee.name)),items:ue}}),function(ee){return 0<ee.items.length})},Q2=ml(),UI=Q2.os.isiOS()&&Q2.os.version.major<=12,jI=Object.freeze({__proto__:null,render:function(s,d,p,_,T){var I=wr(0),R=d.outerContainer;$O(s);var H=ct.fromDom(T.targetNode),W=Ti(sa(H));U0(H,d.mothership,ru),Tf(W,d.uiMothership),s.on("PostRender",function(){LI(s,d,p,_),I.set(s.getWin().innerWidth),Ka.setMenubar(R,tM(s,p)),Ka.setSidebar(R,p.sidebar),function(He,Xe){function De(){var Vn=nn.get();Vn.left===Xt.innerWidth&&Vn.top===Xt.innerHeight||(nn.set(Mi(Xt.innerWidth,Xt.innerHeight)),z1(He))}function Ue(){var Vn=He.getDoc().documentElement,sr=_n.get();sr.left===Vn.offsetWidth&&sr.top===Vn.offsetHeight||(_n.set(Mi(Vn.offsetWidth,Vn.offsetHeight)),z1(He))}function at(Vn){return He.fire("ScrollContent",Vn)}var gt=He.dom,Xt=He.getWin(),Lt=He.getDoc().documentElement,nn=wr(Mi(Xt.innerWidth,Xt.innerHeight)),_n=wr(Mi(Lt.offsetWidth,Lt.offsetHeight));gt.bind(Xt,"resize",De),gt.bind(Xt,"scroll",at);var an=Eg(ct.fromDom(He.getBody()),"load",Ue),kn=Xe.uiMothership.element;He.on("hide",function(){Qr(kn,"display","none")}),He.on("show",function(){Co(kn,"display")}),He.on("NodeChange",Ue),He.on("remove",function(){an.unbind(),gt.unbind(Xt,"resize",De),gt.unbind(Xt,"scroll",at),Xt=null})}(s,d)});var ue,he,we,Te,Le=Ka.getSocket(R).getOrDie("Could not find expected socket element");UI&&(aa(Le.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"}),he=function(){s.fire("ScrollContent")},we=null,Te=function(){for(var He=[],Xe=0;Xe<arguments.length;Xe++)He[Xe]=arguments[Xe];ne(we)&&(we=setTimeout(function(){we=null,he.apply(null,He)},20))},ue=Ua(Le.element,"scroll",Te),s.on("remove",ue.unbind)),hw(s,d),s.addCommand("ToggleSidebar",function(He,Xe){Ka.toggleSidebar(R,Xe),s.fire("ToggleSidebar")}),s.addQueryValueHandler("ToggleSidebar",function(){return Ka.whichSidebar(R)});var Re=md(s);return Re!==ac.sliding&&Re!==ac.floating||s.on("ResizeWindow ResizeEditor ResizeContent",function(){var He=s.getWin().innerWidth;He!==I.get()&&(Ka.refreshToolbar(d.outerContainer),I.set(He))}),{iframeContainer:Le.element.dom,editorContainer:R.element.dom,api:{enable:function(){sy(d,!1)},disable:function(){sy(d,!0)},isDisabled:function(){return xr.isDisabled(R)}}}}}),nE=Object.freeze({__proto__:null,render:function(s,d,p,_,T){var I=d.mothership,R=d.uiMothership,H=d.outerContainer,W=wr(null),ee=ct.fromDom(T.targetNode),ue=function BI(s,d,p,_,T){function I(){return Ue.get()&&!s.removed}function R(at){return De?at.fold(F(0),function(gt){return 1<gt.components().length?Os(gt.components()[1].element):0}):0}function H(){ue.broadcastOn([Xg()],{})}function W(at){var gt,Xt,Lt,nn,_n;void 0===at&&(at=!1),I()&&(Te||(gt=Re.getOrThunk(function(){var an=hM(Is($u(),"margin-left")).getOr(0);return fn($u())-df(d).left+an}),Qr(T.get().element,"max-width",gt+"px")),De&&Ka.refreshToolbar(he),Te||(Xt=R(Ka.getToolbar(he)),Lt=Lu(d),nn=He()?Math.max(Lt.y-Os(T.get().element)+Xt,0):Lt.bottom,aa(he.element,{position:"absolute",top:Math.round(nn)+"px",left:Math.round(Lt.x)+"px"})),Le&&(_n=T.get(),at?Uc.reset(_n):Uc.refresh(_n)),H())}function ee(at){var gt,Xt;void 0===at&&(at=!0),!Te&&Le&&I()&&(gt=Be.getDockingMode(),(Xt=function(Lt){switch(Hv(s)){case Rv.auto:var nn=R(Ka.getToolbar(he)),_n=Os(Lt.element)-nn,an=Lu(d);if(an.y>_n)return"top";var kn=Wr(d),Vn=Math.max(kn.dom.scrollHeight,Os(kn));return an.bottom<Vn-_n||xu().bottom<an.bottom-_n?"bottom":"top";case Rv.bottom:return"bottom";default:return"top"}}(T.get()))!==gt&&(function(Lt){var nn=T.get();Uc.setModes(nn,[Lt]),Be.setDockingMode(Lt);var _n=He()?ya.TopToBottom:ya.BottomToTop;Ir(nn.element,Uh,_n)}(Xt),at&&W(!0)))}var ue=p.uiMothership,he=p.outerContainer,we=Vv.DOM,Te=vp(s),Le=Wv(s),Re=ry(s).or(dA(s)),Be=_.shared.header,He=Be.isPositionedAtTop,Xe=md(s),De=Xe===ac.sliding||Xe===ac.floating,Ue=wr(!1);return{isVisible:I,isPositionedAtTop:He,show:function(){Ue.set(!0),Qr(he.element,"display","flex"),we.addClass(s.getBody(),"mce-edit-focus"),Co(ue.element,"display"),ee(!1),W()},hide:function(){Ue.set(!1),p.outerContainer&&(Qr(he.element,"display","none"),we.removeClass(s.getBody(),"mce-edit-focus")),Qr(ue.element,"display","none")},update:W,updateMode:ee,repositionPopups:H}}(s,ee,d,_,W),he=s.getParam("toolbar_persist",!1,"boolean");function we(){var Le;W.get()?ue.show():(W.set(Ka.getHeader(H).getOrDie()),Tf(Le=fw(s),I),Tf(Le,R),LI(s,d,p,_),Ka.setMenubar(H,tM(s,p)),ue.show(),function(Re,Be,He,Xe){function De(gt){var Xt=zI(Be,He.isPositionedAtTop()),Lt=Xt.pos,nn=Xt.bounds,_n=Ue.get(),an=_n.pos,kn=_n.bounds,Vn=nn.height!==kn.height||nn.width!==kn.width;Ue.set({pos:Lt,bounds:nn}),Vn&&z1(Re,gt),He.isVisible()&&(an!==Lt?He.update(!0):Vn&&(He.updateMode(),He.repositionPopups()))}var Ue=wr(zI(Be,He.isPositionedAtTop()));Xe||(Re.on("activate",He.show),Re.on("deactivate",He.hide)),Re.on("SkinLoaded ResizeWindow",function(){return He.update(!0)}),Re.on("NodeChange keydown",function(gt){hp.requestAnimationFrame(function(){return De(gt)})}),Re.on("ScrollWindow",function(){return He.updateMode()});var at=Wd();at.set(Eg(ct.fromDom(Re.getBody()),"load",De)),Re.on("remove",function(){at.clear()})}(s,ee,ue,he),s.nodeChanged())}return V2(s),s.on("show",we),s.on("hide",ue.hide),he||(s.on("focus",we),s.on("blur",ue.hide)),s.on("init",function(){(s.hasFocus()||he)&&we()}),hw(s,d),{editorContainer:H.element.dom,api:{show:function(){ue.show()},hide:function(){ue.hide()},enable:function(){sy(d,!1)},disable:function(){sy(d,!0)},isDisabled:function(){return xr.isDisabled(H)}}}}}),vA="contexttoolbar-hide",qI=function(s,d){var p,_,T,I,R=s.label.fold(function(){return{}},function(ee){return{"aria-label":ee}}),H=ui(X1.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:s.initValue(),inputAttributes:R,selectOnFocus:!0,inputBehaviours:Ln([Rr.config({mode:"special",onEnter:function(ee){return W.findPrimary(ee).map(function(ue){return Md(ue),!0})},onLeft:function(ee,ue){return ue.cut(),X.none()},onRight:function(ee,ue){return ue.cut(),X.none()}})])})),W=(p=H,T=d,I=Ot(_=s.commands,function(ee){return ui(("contextformtogglebutton"===ee.type?function(ue,he,we){var Le=Fe(he.original,["primary"]),Re=el(Nv(de(de({},Le),{type:"togglebutton",onAction:j})));return $2(Re,we.backstage.shared.providers,[j2(ue,he)])}:function(ue,he,we){var Le=Fe(he.original,["primary"]),Re=el(nw(de(de({},Le),{type:"button",onAction:j})));return mA(Re,we.backstage.shared.providers,[j2(ue,he)])})(p,ee,{backstage:{shared:{providers:T}}}))}),{asSpecs:function(){return Ot(I,function(ee){return ee.asSpec()})},findPrimary:function(ee){return Gt(_,function(ue,he){return ue.primary?X.from(I[he]).bind(function(we){return we.getOpt(ee)}).filter(nt(xr.isDisabled)):X.none()})}});return[{title:X.none(),items:[H.asSpec()]},{title:X.none(),items:W.asSpecs()}]},eD={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},yA={maxHeightFunction:nr(),maxWidthFunction:P2()},tD=Sr("forward-slide"),bA=Sr("backward-slide"),yS=Sr("change-slide-event"),nD="tox-pop--resizing",vM="tox-pop--transition",xA={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},XI=(Z2=["Infinity",(X2="[0-9]+")+"\\."+yM(X2)+yM(Y2="[eE][+-]?[0-9]+"),"\\."+X2+yM(Y2),X2+yM(Y2)].join("|"),new RegExp("^([+-]?(?:"+Z2+"))(.*)$"));function yM(s){return"(?:"+s+")?"}function YI(s,d){function p(){var _=d.getOptions(s),T=d.getCurrent(s).map(d.hash),I=Ai();return Ot(_,function(R){return{type:"togglemenuitem",text:d.display(R),onSetup:function(H){function W(ue){ue&&(I.on(function(he){return he.setActive(!1)}),I.set(H)),H.setActive(ue)}W(fr(T,d.hash(R)));var ee=d.watcher(s,R,W);return function(){I.clear(),ee()}},onAction:function(){return d.setCurrent(s,R)}}})}s.ui.registry.addMenuButton(d.name,{tooltip:d.text,icon:d.icon,fetch:function(_){return _(p())},onSetup:d.onToolbarSetup}),s.ui.registry.addNestedMenuItem(d.name,{type:"nestedmenuitem",text:d.text,getSubmenuItems:p,onSetup:d.onMenuSetup})}function rD(s,d){return function(){s.execCommand("mceToggleFormat",!1,d)}}function oD(s,d){return oM(s,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",function(p){p.setDisabled(s.mode.isReadOnly()||!s.undoManager[d]())})}function fk(s,d){return{type:"makeshift",x:s,y:d}}function iD(s){return"longpress"===s.type||0===s.type.indexOf("touch")}function aD(s,d,p){switch(p){case"node":return{type:"node",node:X.some(ct.fromDom((_=s).selection.getNode())),root:ct.fromDom(_.getBody())};case"point":return function oE(s,d){return"contextmenu"===d.type||"longpress"===d.type?s.inline?function(H){if(iD(H)){var W=H.touches[0];return fk(W.pageX,W.pageY)}return fk(H.pageX,H.pageY)}(d):(p=s.getContentAreaContainer(),_=function(H){if(iD(H)){var W=H.touches[0];return fk(W.clientX,W.clientY)}return fk(H.clientX,H.clientY)}(d),T=Vv.DOM.getPos(p),fk(_.x+T.x,_.y+T.y)):MA(s);var p,_,T}(s,d);case"selection":return MA(s)}var _}function sD(s,d,p,_,T,I){function R(){var Te,Le,Re,Be,He,Xe,De,Ue,at,gt;Re=p(),Be=_,He=T,De=!(he||ee||ue&&we),at=aD(Te=s,Le=d,Ue=Xe=I),gt=de({bubble:Mc(0,"point"===Ue?12:0,tO),layouts:DA,overrides:{maxWidthFunction:P2(),maxHeightFunction:nr()}},at),dg(Re,ag.CLOSE_ON_EXECUTE,Be,!0).map(function(Lt){Le.preventDefault(),Ui.showMenuWithinBounds(He,{anchor:gt},{menu:{markers:M1("normal"),highlightImmediately:De},data:Lt,type:"horizontal"},function(){return X.some(fA(Te,Be.shared,"node"===Xe?"node":"selection"))}),Te.fire(vA)})}var H,W=ml(),ee=W.os.isiOS(),ue=W.os.isOSX(),he=W.os.isAndroid(),we=W.deviceType.isTouch();(ue||ee)&&"node"!==I?(H=function(){(function(Te){function Le(){hp.setEditorTimeout(Te,function(){Te.selection.setRng(Re)},10),Xe()}var Re=Te.selection.getRng();function Be(De){De.preventDefault(),De.stopImmediatePropagation()}function He(){return Xe()}Te.once("touchend",Le),Te.on("mousedown",Be,!0),Te.once("longpresscancel",He);var Xe=function(){Te.off("touchend",Le),Te.off("longpresscancel",He),Te.off("mousedown",Be)}})(s),R()},function(Te,Le){var Re=Te.selection;if(!(Re.isCollapsed()||Le.touches.length<1)){var Be=Le.touches[0],He=Re.getRng();return O0(Te.getWin(),eh.domRange(He)).exists(function(Xe){return Xe.left<=Be.clientX&&Xe.right>=Be.clientX&&Xe.top<=Be.clientY&&Xe.bottom>=Be.clientY})}}(s,d)?H():(s.once("selectionchange",H),s.once("touchend",function(){return s.off("selectionchange",H)}))):R()}function _A(s){return"string"==typeof s?s.split(/[ ,]/):s}function w_(s){return s.getParam("contextmenu_never_use_native",!1,"boolean")}function wA(s){return $(s)?"|"===s:"separator"===s.type}function bM(s,d){if(0===d.length)return s;var p=Ba(s).filter(function(_){return!wA(_)}).fold(function(){return[]},function(_){return[AA]});return s.concat(p).concat(d).concat([AA])}function $I(s,d){return"longpress"!==d.type&&(2!==d.button||d.target===s.getBody()&&""===d.pointerType)}function Cx(s,d){return $I(s,d)?s.selection.getStart(!0):d.target}function SA(s,d,p){function _(H){return Ui.hide(R)}function T(H){var W;w_(s)&&H.preventDefault(),H.ctrlKey&&!w_(s)||!1===s.getParam("contextmenu")||(W=function(ee,ue){var he=ee.getParam("contextmenu_avoid_overlap","","string"),we=$I(ee,ue)?"selection":"point";if(tu(he)){var Te=Cx(ee,ue);return qv(ct.fromDom(Te),he)?"node":we}return we}(s,H),(I()?sD:function(ee,ue,he,we,Te,Le){var Re=he(),Be=aD(ee,ue,Le);dg(Re,ag.CLOSE_ON_EXECUTE,we,!1).map(function(He){ue.preventDefault(),Ui.showMenuAt(Te,{anchor:Be},{menu:{markers:M1("normal")},data:He})})})(s,H,function(){var ee,ue,he,we=Cx(s,H),Te=s.ui.registry.getAll(),Le=(he=(ue=s).ui.registry.getAll().contextMenus,X.from(ue.getParam("contextmenu")).map(_A).getOrThunk(function(){return ln(_A("link linkchecker image imagetools table spellchecker configurepermanentpen"),function(He){return ir(he,He)})})),Re=Te.contextMenus,Be=we;return 0<(ee=to(Le,function(He,Xe){return sn(Re,Xe.toLowerCase()).map(function(De){var Ue=De.update(Be);if($(Ue))return bM(He,Ue.split(" "));if(0<Ue.length){var at=Ot(Ue,IA);return bM(He,at)}return He}).getOrThunk(function(){return He.concat([Xe])})},[])).length&&wA(ee[ee.length-1])&&ee.pop(),ee},p,R,W))}var I=ml().deviceType.isTouch,R=so(Ui.sketch({dom:{tag:"div"},lazySink:d,onEscape:function(){return s.focus()},onShow:function(){return p.setContextMenuState(!0)},onHide:function(){return p.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:Ln([Kn("dismissContextMenu",[mn(Sg(),function(H,W){po.close(H),s.focus()})])])}));s.on("init",function(){var H="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(I()?"":" ResizeWindow");s.on(H,_),s.on("longpress contextmenu",T)})}function hk(s){return function(d){return d.translate(-s.left,-s.top)}}function xM(s){return function(d){return d.translate(s.left,s.top)}}function Hy(s){return function(d,p){return to(s,function(_,T){return T(_)},Mi(d,p))}}function _M(s,d,p){return s.fold(Hy([xM(p),hk(d)]),Hy([hk(d)]),Hy([]))}function S_(s,d,p){return s.fold(Hy([xM(p)]),Hy([]),Hy([xM(d)]))}function wM(s,d,p){return s.fold(Hy([]),Hy([hk(p)]),Hy([xM(d),hk(p)]))}function SM(s,d,p){var _=s.fold(function(T,I){return{position:X.some("absolute"),left:X.some(T+"px"),top:X.some(I+"px")}},function(T,I){return{position:X.some("absolute"),left:X.some(T-p.left+"px"),top:X.some(I-p.top+"px")}},function(T,I){return{position:X.some("fixed"),left:X.some(T+"px"),top:X.some(I+"px")}});return de({right:X.none(),bottom:X.none()},_)}function uD(s,d,p,_){function T(I,R){return function(H,W){var ee=I(d,p,_);return R(H.getOr(ee.left),W.getOr(ee.top))}}return s.fold(T(wM,kx),T(S_,Tx),T(_M,Wy))}function lD(s,d){var p=vi(s,d);return ie(p)?NaN:parseInt(p,10)}function cD(s,d,p,_){return Gt(s,function(T){var I,R,H=T.sensor,W=T.range.left,ee=T.range.top,ue=S_(d,I=p,R=_),he=S_(H,I,R);return Math.abs(ue.left-he.left)<=W&&Math.abs(ue.top-he.top)<=ee?X.some({output:uD(T.output,d,p,_),extra:T.extra}):X.none()})}function gk(s,d){var p;s.getSystem().addToGui(d),Er((p=d).element).filter(Ja).each(function(_){Ni(_,"z-index").each(function(T){Ir(_,TM,T)}),Qr(_,"z-index",Is(p.element,"z-index"))})}function JI(s){Er(s.element).filter(Ja).each(function(d){Fa(d,TM).fold(function(){return Co(d,"z-index")},function(p){return Qr(d,"z-index",p)}),pa(d,TM)}),s.getSystem().removeFromGui(s)}function mk(s,d,p){return s.getSystem().build(ba.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[d]},events:p}))}function kA(s,d){return{bounds:s.getBounds(),height:zr(d.element),width:zt(d.element)}}function CM(s,d,p,_,T){var I=p.update(_,T),R=p.getStartData().getOrThunk(function(){return kA(d,s)});I.each(function(H){var W,ee,ue,he,we,Le,Re,Be,He,Xe,De,Ue,at,gt,Xt,Lt,nn,_n,an,kn,Vn,sr,Ar,lo,Jo=s,gi=R,Fi=H,Uo=(W=d).getTarget(Jo.element);W.repositionTarget&&(ee=Es(Bt(Jo.element)),ue=ze(Uo),Vn=Ni(kn=Uo,"left"),sr=Ni(kn,"top"),Ar=Ni(kn,"position"),lo=function(mi,Ci,Ji){return("fixed"===Ji?Wy:kx)(parseInt(mi,10),parseInt(Ci,10))},he=(Vn.isSome()&&sr.isSome()&&Ar.isSome()?X.some(lo(Vn.getOrDie(),sr.getOrDie(),Ar.getOrDie())):X.none()).getOrThunk(function(){var mi=df(kn);return Tx(mi.left,mi.top)}),we=Jo,Le=he,Re=ee,Be=ue,He=Fi,Xe=gi,Ue=W.snaps.fold(function(){var mi,Ci,Ji=_M((mi=He.left,Ci=He.top,Le.fold(function(oi,xa){return kx(oi+mi,xa+Ci)},function(oi,xa){return Tx(oi+mi,xa+Ci)},function(oi,xa){return Wy(oi+mi,xa+Ci)})),Re,Be);return Wy(Ji.left,Ji.top)},function(mi){var Ci=function CA(s,d,p,_,T,I){var R,H,W,ee,ue,he,we=(R=p,H=_,ue=lD(ee=s.element,(W=d).leftAttr),he=lD(ee,W.topAttr),(isNaN(ue)||isNaN(he)?X.none():X.some(Mi(ue,he))).fold(function(){return R},function(Xe){return Wy(Xe.left+H.left,Xe.top+H.top)})),Te=(d.mustSnap?sE:nO)(s,d,we,T,I),Le=_M(we,T,I),Re=d,Be=Le,He=s.element;return Ir(He,Re.leftAttr,Be.left+"px"),Ir(He,Re.topAttr,Be.top+"px"),Te.fold(function(){return{coord:Wy(Le.left,Le.top),extra:X.none()}},function(Xe){return{coord:Xe.output,extra:Xe.extra}})}(we,mi,Le,He,Re,Be);return Ci.extra.each(function(Ji){mi.onSensor(we,Ji)}),Ci.coord}),Xt=(De=Xe).bounds,Lt=S_(Ue,at=Re,gt=Be),nn=Hu(Lt.left,Xt.x,Xt.x+Xt.width-De.width),_n=Hu(Lt.top,Xt.y,Xt.y+Xt.height-De.height),an=Tx(nn,_n),Zc(Uo,SM(Ue.fold(function(){var mi=wM(an,at,gt);return kx(mi.left,mi.top)},F(an),function(){var mi=_M(an,at,gt);return Wy(mi.left,mi.top)}),0,ue))),W.onDrag(Jo,Uo,Fi)})}function dD(s,d,p,_){d.each(JI),p.snaps.each(function(I){var R,H;pa(H=s.element,(R=I).leftAttr),pa(H,R.topAttr)});var T=p.getTarget(s.element);_.reset(),p.onDrop(s,T)}function fD(s){return function(d,p){function _(T){p.setStartData(kA(d,T))}return Qo(le([mn(Bh(),function(T){p.getStartData().each(function(){return _(T)})})],s(d,p,_),!0))}}function QI(s,d,p){return[mn(Kl(),function(_,T){var I,R,H,W,ee;0===T.event.raw.button&&(T.stop(),H={drop:I=function(){return dD(_,X.some(W),s,d)},delayDrop:(R=MC(I,200)).schedule,forceDrop:I,move:function(ue){R.cancel(),CM(_,s,d,oO,ue)}},W=mk(_,s.blockerClass,(ee=H,Qo([mn(Kl(),ee.forceDrop),mn(Pd(),ee.drop),mn(Kp(),function(ue,he){ee.move(he.event)}),mn(Uf(),ee.delayDrop)]))),p(_),gk(_,W))})]}function kM(s,d,p){function _(I){dD(I,T.get(),s,d),T.clear()}var T=Ai();return[mn(Zs(),function(I,R){R.stop();var W,ee,ue,he=mk(I,s.blockerClass,(ee=W=function H(){return _(I)},ue=function(we){CM(I,s,d,mD,we)},Qo([mn(Zs(),ee),mn(fs(),W),mn(Ki(),W),mn(Cu(),function(we,Te){ue(Te.event)})])));T.set(he),p(I),gk(I,he)}),mn(Cu(),function(I,R){R.stop(),CM(I,s,d,mD,R.event)}),mn(fs(),function(I,R){R.stop(),_(I)}),mn(Ki(),_)]}function TA(s,d,p,_,T,I){return s.fold(function(){return Gy.snap({sensor:Tx(p-20,_-20),range:Mi(T,I),output:Tx(X.some(p),X.some(_)),extra:{td:d}})},function(R){var H=p-20,W=_-20,ee=R.element.dom.getBoundingClientRect();return Gy.snap({sensor:Tx(H,W),range:Mi(40,40),output:Tx(X.some(p-ee.width/2),X.some(_-ee.height/2)),extra:{td:d}})})}function eO(s,d,p){return{getSnapPoints:s,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function(_,T){var I=T.td,R=d.get(),H=I;R.exists(function(W){return Sn(W,H)})||(d.set(I),p(I))},mustSnap:!0}}function hD(s){return ui(Iu.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:Ln([Gy.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:s}),Ay.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))}var Pp,bS,aE={name:"lineheight",text:"Line height",icon:"line-height",getOptions:function(s){return s.getParam("lineheight_formats","1 1.1 1.2 1.3 1.4 1.5 2","string").split(" ")},hash:function(s){return d=["fixed","relative","empty"],X.from(XI.exec(s)).bind(function(p){var _=Number(p[1]),T=p[2],I=T;return Rt(d,function(R){return Rt(xA[R],function(H){return I===H})})?X.some({value:_,unit:T}):X.none()}).map(function(p){return p.value+p.unit}).getOr(s);var d},display:U,watcher:function(s,d,p){return s.formatter.formatChanged("lineheight",p,!1,{value:d}).unbind},getCurrent:function(s){return X.from(s.queryCommandValue("LineHeight"))},setCurrent:function(s,d){return s.execCommand("LineHeight",!1,d)}},MA=function(s){return{type:"selection",root:ct.fromDom(s.selection.getNode())}},DA={onLtr:function(){return[Go,Fs,su,Il,gs,Ol,Kd,ty,K0,em,Af,gu]},onRtl:function(){return[Go,su,Fs,gs,Il,Ol,Kd,ty,Af,gu,K0,em]}},tO={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},AA={type:"separator"},IA=function(s){function d(_){return{text:_.text,icon:_.icon,disabled:_.disabled,shortcut:_.shortcut}}var p;if($(s))return s;switch(s.type){case"separator":return AA;case"submenu":return de(de({type:"nestedmenuitem"},d(s)),{getSubmenuItems:function(){var _=s.getSubmenuItems();return $(_)?_:Ot(_,IA)}});default:return de(de({type:"menuitem"},d(s)),{onAction:(p=s.onAction,function(){return p()})})}},xS=Ns([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),kx=xS.offset,Tx=xS.absolute,Wy=xS.fixed,sE=function(s,d,p,_,T){var I=d.getSnapPoints(s);return cD(I,p,_,T).orThunk(function(){return to(I,function(R,H){var W,ee,ue,he,we,Te,Le,Re=(W=H.sensor,he=S_(p,ee=_,ue=T),we=S_(W,ee,ue),Te=Math.abs(he.left-we.left),Le=Math.abs(he.top-we.top),Mi(Te,Le));return R.deltas.fold(function(){return{deltas:X.some(Re),snap:X.some(H)}},function(Be){return(Re.left+Re.top)/2<=(Be.left+Be.top)/2?{deltas:X.some(Re),snap:X.some(H)}:R})},{deltas:X.none(),snap:X.none()}).snap.map(function(R){return{output:uD(R.output,p,_,T),extra:R.extra}})})},nO=function(s,d,p,_,T){return cD(d.getSnapPoints(s),p,_,T)},rO=Object.freeze({__proto__:null,snapTo:function(s,d,p,_){var T,I,R,H=d.getTarget(s.element);d.repositionTarget&&(T=Es(Bt(s.element)),I=ze(H),Zc(H,SM(uD((R=_).output,R.output,T,I),0,I)))}}),TM="data-initial-z-index",OA=Ri("snaps",[bn("getSnapPoints"),No("onSensor"),bn("leftAttr"),bn("topAttr"),It("lazyViewport",xu),It("mustSnap",!1)]),gD=[It("useFixed",qe),bn("blockerClass"),It("getTarget",U),It("onDrag",j),It("repositionTarget",!0),It("onDrop",j),Di("getBounds",xu),OA],oO=Object.freeze({__proto__:null,getData:function(s){return X.from(Mi(s.x,s.y))},getDelta:function(s,d){return Mi(d.left-s.left,d.top-s.top)}}),iO=le(le([],gD,!0),[Zo("dragger",{handlers:fD(QI)})],!1),mD=Object.freeze({__proto__:null,getData:function(s){var d,p=s.raw.touches;return 1===p.length?X.some(Mi((d=p[0]).clientX,d.clientY)):X.none()},getDelta:function(s,d){return Mi(d.left-s.left,d.top-s.top)}}),EA=le(le([],gD,!0),[Zo("dragger",{handlers:fD(kM)})],!1),PA=le(le([],gD,!0),[Zo("dragger",{handlers:fD(function(s,d,p){return le(le([],QI(s,d,p),!0),kM(s,d,p),!0)})})],!1),Gy=Mg({branchKey:"mode",branches:Object.freeze({__proto__:null,mouse:iO,touch:EA,mouseOrTouch:PA}),name:"dragging",active:{events:function(s,d){return s.dragger.handlers(s,d)}},extra:{snap:function(s){return{sensor:s.sensor,range:s.range,output:s.output,extra:X.from(s.extra)}}},state:Object.freeze({__proto__:null,init:function(){var s=X.none(),d=X.none(),p=F({});return Jl({readState:p,reset:function(){s=X.none(),d=X.none()},update:function(_,T){return _.getData(T).bind(function(I){return R=_,H=I,W=s.map(function(ee){return R.getDelta(ee,H)}),s=X.some(H),W;var R,H,W})},getStartData:function(){return d},setStartData:function(_){d=X.some(_)}})}}),apis:rO});function C_(s,d,p){var _,T,I,R,H,W,ee=ct.fromDom(s.getContainer());jt((_=s,T=d,I=p,R=Os(ee),H=fn(ee),(W={}).height=gM(R+T.top,zb(_),If(_)),I===Pp.Both&&(W.width=gM(H+T.left,A1(_),ry(_))),W),function(ue,he){return Qr(ee,he,pS(ue)),0}),s.fire("ResizeEditor")}function pk(s,d,p,_){return C_(s,Mi(20*p,20*_),d),X.some(!0)}function NA(s){function d(){return Ji.bind(Ka.getHeader)}function p(){return yo.value(Xe)}function _(){return Ji.bind(function(Fo){return Ka.getThrobber(Fo)}).getOrDie("Could not find throbber element")}var T,I,R,H,W=s.inline,ee=W?nE:jI,ue=Wv(s)?GO:O2,Ji=X.none(),he=ml(),we=he.browser.isIE()?["tox-platform-ie"]:[],Te=he.deviceType.isTouch()?["tox-platform-touch"]:[],Le=cC(s),Re=fw(s),Be=ic.isRtl()?{attributes:{dir:"rtl"}}:{},He={attributes:((T={})[Uh]=Le?ya.BottomToTop:ya.TopToBottom,T)},Xe=so((I=Sn($u(),Re)&&"grid"===Is(Re,"display"),R={dom:de({tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(we).concat(Te)},Be),behaviours:Ln([Gu.config({useFixed:function(){return ue.isDocked(d)}})])},H={dom:{styles:{width:document.body.clientWidth+"px"}},events:Qo([mn(ka(),function(){Qr(co.element,"width",document.body.clientWidth+"px")})])},xo(R,I?H:{}))),De=ui({dom:{tag:"div",classes:["tox-anchorbar"]}}),Ue=function Se(s,d,p){var _,T,I,R,H,W,ee,ue,he,we,Te,Le,Re,Be=wr(!1),He={isPositionedAtTop:function(){return"top"===_.get()},getDockingMode:(_=wr(cC(d)?"bottom":"top")).get,setDockingMode:_.set},Xe={shared:{providers:{icons:function(){return d.ui.registry.getAll().icons},menuItems:function(){return d.ui.registry.getAll().menuItems},translate:ic.translate,isDisabled:function(){return d.mode.isReadOnly()||d.ui.isDisabled()},getSetting:d.getParam.bind(d)},interpreter:function(at){return XD(HO,at,Xe)},anchors:sk(d,p,He.isPositionedAtTop),header:He,getSink:function(){return yo.value(s)}},urlinput:Ce(d),styleselect:(he=wr([]),we=wr([]),Te=wr([]),Le=wr([]),Re=wr(!(ue=function(at){var gt=at.items;return void 0!==gt&&0<gt.length?Or(gt,ue):[at.format]})),(ee=d).on("PreInit",function(at){var gt=sS(ee),Xt=eM(ee,gt,De,Ue);he.set(Xt),we.set(Or(Xt,ue))}),ee.on("addStyleModifications",function(at){var gt=eM(ee,at.items,De,Ue);Te.set(gt),Re.set(at.replace),Le.set(Or(gt,ue))}),{getData:function(){var at=Re.get()?[]:he.get(),gt=Te.get();return at.concat(gt)},getFlattenedKeys:function(){var at=Re.get()?[]:we.get(),gt=Le.get();return at.concat(gt)}}),colorinput:{colorPicker:function(at,gt){iT(W)(at,gt)},hasCustomColors:function(){return ug(H)},getColors:function(){return Kb(R)},getColorCols:(I=R=H=W=d,function(){return rT(I)})},dialog:{isDraggableModal:(T=d,function(){return T.getParam("draggable_modal",!1,"boolean")})},isContextMenuOpen:function(){return Be.get()},setContextMenuState:function(at){return Be.set(at)}};function De(at){return function(){return ee.formatter.match(at)}}function Ue(at){return function(){var gt=ee.formatter.get(at);return void 0!==gt?X.some({tag:0<gt.length&&(gt[0].inline||gt[0].block)||"div",styles:ee.dom.parseStyle(ee.formatter.getCssText(at))}):X.none()}}return Xe}(Xe,s,function(){return Ji.bind(function(Fo){return De.getOpt(Fo)}).getOrDie("Could not find a anchor bar element")}),at=Ka.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:Ue,onEscape:function(){s.focus()}}),gt=md(s),Xt=Ka.parts.toolbar(de({dom:{tag:"div",classes:["tox-toolbar"]},getSink:p,providers:Ue.shared.providers,onEscape:function(){s.focus()},type:gt,lazyToolbar:function(){return Ji.bind(function(Fo){return Ka.getToolbar(Fo)}).getOrDie("Could not find more toolbar element")},lazyHeader:function(){return d().getOrDie("Could not find header element")}},He)),Lt=Ka.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:Ue.shared.providers,onEscape:function(){s.focus()},type:gt}),nn=Ka.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),_n=Ka.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}}),an=Ka.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:Ue}),kn=s.getParam("statusbar",!0,"boolean")&&!W?X.some(function Mx(s,d){var p,_,T,I,R,H,W,ee,ue,he,we,Te,Le,Re,Be,He;return{dom:{tag:"div",classes:["tox-statusbar"]},components:(He=[],s.getParam("elementpath",!0,"boolean")&&He.push((Le=s,Be=d,(Re={}).delimiter||(Re.delimiter="\xbb"),{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:Ln([Rr.config({mode:"flow",selector:"div[role=button]"}),xr.config({disabled:Be.isDisabled}),Ya(),Ko.config({}),no.config({}),Kn("elementPathEvents",[Xi(function(De,Ue){Le.shortcuts.add("alt+F11","focus statusbar elementpath",function(){return Rr.focusIn(De)}),Le.on("NodeChange",function(at){var gt,Xt,Lt=function(nn){for(var _n=[],an=nn.length;0<an--;){var kn=nn[an];if(1===kn.nodeType&&!function(sr){if(1===sr.nodeType&&("BR"===sr.nodeName||sr.getAttribute("data-mce-bogus")||"bookmark"===sr.getAttribute("data-mce-type")))return 1}(kn)){var Vn=Le.fire("ResolveName",{name:kn.nodeName.toLowerCase(),target:kn});if(Vn.isDefaultPrevented()||_n.push({name:Vn.name,element:kn}),Vn.isPropagationStopped())break}}return _n}(at.parents);no.set(De,0<Lt.length?(gt=Ot(Lt||[],function(nn,_n){return Iu.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{role:"button","data-index":_n,"tab-index":-1,"aria-level":_n+1},innerHtml:nn.name},action:function(an){Le.focus(),Le.selection.select(nn.element),Le.nodeChanged()},buttonBehaviours:Ln([Zb(Be.isDisabled),Ya()])})}),Xt={dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0},innerHtml:" "+Re.delimiter+" "}},to(gt.slice(1),function(nn,_n){var an=nn;return an.push(Xt),an.push(_n),an},[gt[0]])):[])})})])]),components:[]})),s.hasPlugin("wordcount")&&He.push((he=s,we=d,Iu.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:Ln([Zb(we.isDisabled),Ya(),Ko.config({}),no.config({}),er.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),Kn("wordcount-events",[zs(function(De){var Ue=er.getValue(De),at="words"===Ue.mode?"characters":"words";er.setValue(De,{mode:at,count:Ue.count}),Xe(De,Ue.count,at)}),Xi(function(De){he.on("wordCountUpdate",function(Ue){var at=er.getValue(De).mode;er.setValue(De,{mode:at,count:Ue.wordCount}),Xe(De,Ue.wordCount,at)})})])]),eventOrder:((Te={})[Ca()]=["disabling","alloy.base.behaviour","wordcount-events"],Te)}))),s.getParam("branding",!0,"boolean")&&He.push({dom:{tag:"span",classes:["tox-statusbar__branding"],innerHtml:'<a href="https://www.tiny.cloud/?utm_campaign=editor_referral&amp;utm_medium=poweredby&amp;utm_source=tinymce&amp;utm_content=v5" rel="noopener" target="_blank" tabindex="-1" aria-label="'+(ue=ic.translate(["Powered by {0}","Tiny"]))+'">'+ue+"</a>"}}),p=0<He.length?[{dom:{tag:"div",classes:["tox-statusbar__text-container"]},components:He}]:[],I=d,H=!(R=T=s).hasPlugin("autoresize"),_=(ee=!1===(W=R.getParam("resize",H))?Pp.None:"both"===W?Pp.Both:Pp.Vertical)===Pp.None?X.none():X.some(ah("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:I.translate("Resize")},behaviours:[Gy.config({mode:"mouse",repositionTarget:!1,onDrag:function(De,Ue,at){return C_(T,at,ee)},blockerClass:"tox-blocker"}),Rr.config({mode:"special",onLeft:function(){return pk(T,ee,-1,0)},onRight:function(){return pk(T,ee,1,0)},onUp:function(){return pk(T,ee,0,-1)},onDown:function(){return pk(T,ee,0,1)}}),Ko.config({}),eo.config({})]},I.icons)),p.concat(_.toArray()))};function Xe(De,Ue,at){return no.set(De,[Zl(we.translate(["{0} "+at,Ue[at]]))])}}(s,Ue.shared.providers)):X.none(),Vn={dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[nn,_n]},sr=dw(s),Ar=Ll(s),lo=Jd(s),Jo=Ka.parts.header({dom:de({tag:"div",classes:["tox-editor-header"]},He),components:Gr([lo?[at]:[],sr?[Lt]:Ar?[Xt]:[],vp(s)?[]:[De.asSpec()]]),sticky:Wv(s),editor:s,sharedBackstage:Ue.shared}),gi=Gr([Le?[]:[Jo],W?[]:[Vn],Le?[Jo]:[]]),Fi=Gr([[{dom:{tag:"div",classes:["tox-editor-container"]},components:gi}],W?[]:kn.toArray(),[an]]),Uo=Yk(s),mi=de(de({role:"application"},ic.isRtl()?{dir:"rtl"}:{}),Uo?{"aria-hidden":"true"}:{}),Ci=so(Ka.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(W?["tox-tinymce-inline"]:[]).concat(Le?["tox-tinymce--toolbar-bottom"]:[]).concat(Te).concat(we),styles:de({visibility:"hidden"},Uo?{opacity:"0",border:"0"}:{}),attributes:mi},components:Fi,behaviours:Ln([Ya(),xr.config({disableClass:"tox-tinymce--disabled"}),Rr.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])}));Ji=X.some(Ci),s.shortcuts.add("alt+F9","focus menubar",function(){Ka.focusMenubar(Ci)}),s.shortcuts.add("alt+F10","focus toolbar",function(){Ka.focusToolbar(Ci)}),s.addCommand("ToggleToolbarDrawer",function(){Ka.toggleToolbarDrawer(Ci)}),s.addQueryStateHandler("ToggleToolbarDrawer",function(){return Ka.isToolbarDrawerToggled(Ci)});var oi,xa,dl,yd,uf,_a,pg,Ds,Ei,Qn=ch(Ci),co=ch(Xe);return oi=s,xa=Qn,dl=co,yd=Dg(),uf=Ua(yd,"touchstart",lf),_a=Ua(yd,"touchmove",function(Fo){return ia(Xf(),Fo)}),pg=Ua(yd,"touchend",function(Fo){return ia(y0(),Fo)}),Ds=Ua(yd,"mousedown",lf),Ei=Ua(yd,"mouseup",function(Fo){0===Fo.raw.button&&La(Hs(),{target:Fo.target})}),oi.on("PostRender",function(){oi.on("click",Nu),oi.on("tap",Nu),oi.on("mouseup",qu),oi.on("mousedown",jc),oi.on("ScrollWindow",zl),oi.on("ResizeWindow",fl),oi.on("ResizeEditor",hl),oi.on("AfterProgressState",Xu),oi.on("DismissPopups",Bp)}),oi.on("remove",function(){oi.off("click",Nu),oi.off("tap",Nu),oi.off("mouseup",qu),oi.off("mousedown",jc),oi.off("ScrollWindow",zl),oi.off("ResizeWindow",fl),oi.off("ResizeEditor",hl),oi.off("AfterProgressState",Xu),oi.off("DismissPopups",Bp),Ds.unbind(),uf.unbind(),_a.unbind(),pg.unbind(),Ei.unbind()}),oi.on("detach",function(){Jm(xa),Jm(dl),xa.destroy(),dl.destroy()}),{mothership:Qn,uiMothership:co,backstage:Ue,renderUI:function(){var Fo,Rf;ue.setup(s,Ue.shared,d),function rE(s,d){var p,_,T,I,R,H,W,ee,ue,he,we,Te,Le,Re,Be,He,Xe,De,Ue,at,gt,Xt,Lt,nn,_n,an=s;ur([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],function(kn){an.ui.registry.addToggleButton(kn.name,{tooltip:kn.text,icon:kn.icon,onAction:xm(an,kn.cmd),onSetup:lk(an,kn.name)})}),an.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onAction:xm(an,"JustifyNone")}),function ZI(s){var d,p;(function(_){Dp.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],function(R,H){_.ui.registry.addToggleButton(R.name,{tooltip:R.text,icon:R.icon,onSetup:lk(_,R.name),onAction:rD(_,R.name)})});for(var T=1;T<=6;T++){var I="h"+T;_.ui.registry.addToggleButton(I,{text:I.toUpperCase(),tooltip:"Heading "+T,onSetup:lk(_,I),onAction:rD(_,I)})}})(s),d=s,Dp.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"}],function(_){d.ui.registry.addButton(_.name,{tooltip:_.text,icon:_.icon,onAction:xm(d,_.action)})}),p=s,Dp.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],function(_){p.ui.registry.addToggleButton(_.name,{tooltip:_.text,icon:_.icon,onAction:xm(p,_.action),onSetup:lk(p,_.name)})})}(nn=s),_n=nn,Dp.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through",shortcut:""},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript",shortcut:""},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript",shortcut:""},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting",shortcut:""},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document",shortcut:""},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"}],function(kn){_n.ui.registry.addMenuItem(kn.name,{text:kn.text,icon:kn.icon,shortcut:kn.shortcut,onAction:xm(_n,kn.action)})}),_n.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onAction:rD(_n,"code")}),Lt=ck(0,we=ue=d,H2(he=ee=s)),he.ui.registry.addNestedMenuItem("align",{text:we.shared.providers.translate("Align"),getSubmenuItems:function(){return Lt.items.validateItems(Lt.getStyleItems())}}),Re=ck(0,Le=ue,PI(Te=ee)),Te.ui.registry.addNestedMenuItem("fontformats",{text:Le.shared.providers.translate("Fonts"),getSubmenuItems:function(){return Re.items.validateItems(Re.getStyleItems())}}),Be=ee,Xe=de({type:"advanced"},(He=ue).styleselect),De=ck(0,He,lA(Be,Xe)),Be.ui.registry.addNestedMenuItem("formats",{text:"Formats",getSubmenuItems:function(){return De.items.validateItems(De.getStyleItems())}}),at=ck(0,ue,W2(Ue=ee)),Ue.ui.registry.addNestedMenuItem("blockformats",{text:"Blocks",getSubmenuItems:function(){return at.items.validateItems(at.getStyleItems())}}),Xt=ck(0,ue,sA(gt=ee)),gt.ui.registry.addNestedMenuItem("fontsizes",{text:"Font sizes",getSubmenuItems:function(){return Xt.items.validateItems(Xt.getStyleItems())}}),(H=R=s).ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:oD(H,"hasUndo"),onAction:xm(H,"undo")}),H.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:oD(H,"hasRedo"),onAction:xm(H,"redo")}),(W=R).ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",disabled:!0,onSetup:oD(W,"hasUndo"),onAction:xm(W,"undo")}),W.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",disabled:!0,onSetup:oD(W,"hasRedo"),onAction:xm(W,"redo")}),function(kn){var Vn;(Vn=kn).addCommand("mceApplyTextcolor",function(lo,Jo){var gi,Fi=lo,Uo=Jo;(gi=Vn).undoManager.transact(function(){gi.focus(),gi.formatter.apply(Fi,{value:Uo}),gi.nodeChanged()})}),Vn.addCommand("mceRemoveTextcolor",function(lo){var Jo,gi=lo;(Jo=Vn).undoManager.transact(function(){Jo.focus(),Jo.formatter.remove(gi,{value:null},null,!0),Jo.nodeChanged()})});var sr=wr(hy),Ar=wr(hy);um(kn,"forecolor","forecolor","Text color",sr),um(kn,"backcolor","hilitecolor","Background color",Ar),Qd(kn,"forecolor","forecolor","Text color"),Qd(kn,"backcolor","hilitecolor","Background color")}(s),function KI(s){var d;s.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:xm(s,"mceToggleVisualAid")}),s.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:oM(d=s,"VisualAid",function(p){p.setActive(d.hasVisual)}),onAction:xm(s,"mceToggleVisualAid")})}(s),(T=s).ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:oM(I=T,"NodeChange",function(kn){kn.setDisabled(!I.queryCommandState("outdent"))}),onAction:xm(T,"outdent")}),T.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onAction:xm(T,"indent")}),YI(p=s,aE),X.from((_=p).getParam("content_langs",void 0,"array")).map(function(kn){return{name:"language",text:"Language",icon:"language",getOptions:F(kn),hash:function(Vn){return ie(Vn.customCode)?Vn.code:Vn.code+"/"+Vn.customCode},display:function(Vn){return Vn.title},watcher:function(Vn,sr,Ar){return Vn.formatter.formatChanged("lang",Ar,!1,{value:sr.code,customValue:sr.customCode}).unbind},getCurrent:function(Vn){return _l(ct.fromDom(Vn.selection.getNode()),function(sr){return X.some(sr).filter(Ja).bind(function(Ar){return Fa(Ar,"lang").map(function(lo){return{code:lo,customCode:Fa(Ar,"data-mce-lang").getOrUndefined(),title:""}})})})},setCurrent:function(Vn,sr){return Vn.execCommand("Lang",!1,sr)},onToolbarSetup:function(Vn){var sr=Wd();return Vn.setActive(_.formatter.match("lang",{},void 0,!0)),sr.set(_.formatter.formatChanged("lang",Vn.setActive,!0)),sr.clear}}}).each(function(kn){return YI(p,kn)})}(s,Ue),SA(s,p,Ue),Rf=(Fo=s).ui.registry.getAll().sidebars,ur(pi(Rf),function(Ex){function Px(){return fr(X.from(Fo.queryCommandValue("ToggleSidebar")),Ex)}var NO=Rf[Ex];Fo.ui.registry.addToggleButton(Ex,{icon:NO.icon,tooltip:NO.tooltip,onAction:function(ID){Fo.execCommand("ToggleSidebar",!1,Ex),ID.setActive(Px())},onSetup:function(ID){function lI(){return ID.setActive(Px())}return Fo.on("ToggleSidebar",lI),function(){Fo.off("ToggleSidebar",lI)}}})}),function Vr(s,d,p){function _(H){var W;!T.get()||"focusin"===(W=H).type&&(W.composed?Pi(W.composedPath()):X.from(W.target)).map(ct.fromDom).filter(Ja).exists(function(ee){return ou(ee,"mce-pastebin")})||(H.preventDefault(),Xn(d()),s.editorManager.setActive(s))}var T=wr(!1),I=Ai();function R(H){var W,ee,ue,he,we,Te,Le,Re,Be,He;H!==T.get()&&(T.set(H),W=s,ee=d(),he=p.providers,Re=ee.element,Be=ue=H,He="data-mce-"+(we="tabindex"),X.from(W.iframeElement).map(ct.fromDom).each(function(Xe){Be?(Fa(Xe,we).each(function(De){return Ir(Xe,He,De)}),Ir(Xe,we,-1)):(pa(Xe,we),Fa(Xe,He).each(function(De){Ir(Xe,we,De),pa(Xe,He)}))}),ue?(gg.block(ee,(Le=he,function(Xe,De){return{dom:{tag:"div",attributes:{"aria-label":Le.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:gn('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}})),Co(Re,"display"),pa(Re,"aria-hidden"),W.hasFocus()&&Xn(ee)):(Te=Io.getCurrent(ee).exists(function(Xe){return Wh(Xe.element)}),gg.unblock(ee),Qr(Re,"display","none"),Ir(Re,"aria-hidden","true"),Te&&W.focus()),s.fire("AfterProgressState",{state:H}))}s.inline||s.on("PreInit",function(){s.dom.bind(s.getWin(),"focusin",_),s.on("BeforeExecCommand",function(H){"mcefocus"===H.command.toLowerCase()&&!0!==H.value&&_(H)})}),s.on("ProgressState",function(H){var W;I.on(hp.clearTimeout),Ne(H.time)?(W=hp.setEditorTimeout(s,function(){return R(H.state)},H.time),I.set(W)):(R(H.state),I.clear())})}(s,_,Ue.shared),yn(s.getParam("toolbar_groups",{},"object"),function(Ex,Px){s.ui.registry.addGroupToolbarButton(Px,Ex)});var cf,Zy=s.ui.registry.getAll(),I_=Zy.buttons,O_=Zy.menuItems,TS=Zy.contextToolbars,RM=Zy.sidebars,LM=rC(s),uI={menuItems:O_,menus:(cf=s.getParam("menu"))?yn(cf,function(Ex){return de(de({},Ex),{items:Ex.items})}):{},menubar:s.getParam("menubar"),toolbar:LM.getOrThunk(function(){return s.getParam("toolbar",!0)}),allowToolbarGroups:gt===ac.floating,buttons:I_,sidebar:RM};hA(s,TS,Xe,{backstage:Ue}),function iE(s,d){function p(Xe){var De=Kc(Xe);return TA(Le.getOpt(d),Xe,De.x,De.y,De.width,De.height)}function _(Xe){var De=Kc(Xe);return TA(Re.getOpt(d),Xe,De.right,De.bottom,De.width,De.height)}function T(Xe,De,Ue,at){var gt=Ue(De);Gy.snapTo(Xe,gt),function(Xt){var Lt=De.dom.getBoundingClientRect();Co(Xt.element,"display");var nn=Br(ct.fromDom(s.getBody())).dom.innerHeight;(Lt[at]<0||Lt[at]>nn)&&Qr(Xt.element,"display","none")}(Xe)}function I(Xe){return T(Be,Xe,p,"top")}function R(Xe){return T(He,Xe,_,"bottom")}var H=wr([]),W=wr([]),ee=wr(!1),ue=Ai(),he=Ai(),we=eO(function(){return Ot(H.get(),p)},ue,function(Xe){he.get().each(function(De){s.fire("TableSelectorChange",{start:Xe,finish:De})})}),Te=eO(function(){return Ot(W.get(),_)},he,function(Xe){ue.get().each(function(De){s.fire("TableSelectorChange",{start:De,finish:Xe})})}),Le=hD(we),Re=hD(Te),Be=so(Le.asSpec()),He=so(Re.asSpec());ml().deviceType.isTouch()&&(s.on("TableSelectionChange",function(Xe){ee.get()||(Mu(d,Be),Mu(d,He),ee.set(!0)),ue.set(Xe.start),he.set(Xe.finish),Xe.otherCells.each(function(De){H.set(De.upOrLeftCells),W.set(De.downOrRightCells),I(Xe.start),R(Xe.finish)})}),s.on("ResizeEditor ResizeWindow ScrollContent",function(){ue.get().each(I),he.get().each(R)}),s.on("TableSelectionClear",function(){ee.get()&&(kf(Be),kf(He),ee.set(!1)),ue.clear(),he.clear()}))}(s,Xe);var E_=s.getElement(),AD=function Vi(){var Fo,Rf,cf,Zy,I_,O_,TS=pS((Zy=aw(cf=Rf=s),I_=zb(cf),O_=If(cf),hM(Zy).map(function(LM){return gM(LM,I_,O_)}).getOr(aw(Rf)))),RM=pS(dA(Fo=s).getOr(nC(Fo)));return s.inline||(yu("div","width",RM)&&Qr(Ci.element,"width",RM),yu("div","height",TS)?Qr(Ci.element,"height",TS):Qr(Ci.element,"height","200px")),TS}();return ee.render(s,{mothership:Qn,uiMothership:co,outerContainer:Ci},uI,Ue,{targetNode:E_,height:AD})},getUi:function(){return{channels:{broadcastAll:co.broadcast,broadcastOn:co.broadcastOn,register:j}}}};function ia(Fo,Rf){ur([xa,dl],function(cf){cf.broadcastEvent(Fo,Rf)})}function La(Fo,Rf){ur([xa,dl],function(cf){cf.broadcastOn([Fo],Rf)})}function lf(Fo){return La($h(),{target:Fo.target})}function Nu(Fo){return La($h(),{target:ct.fromDom(Fo.target)})}function qu(Fo){0===Fo.button&&La(Hs(),{target:ct.fromDom(Fo.target)})}function jc(){ur(oi.editorManager.get(),function(Fo){oi!==Fo&&Fo.fire("DismissPopups",{relatedTarget:oi})})}function zl(Fo){return ia(Bh(),Jx(Fo))}function fl(Fo){La(Xg(),{}),ia(ka(),Jx(Fo))}function hl(){return La(Xg(),{})}function Xu(Fo){Fo.state&&La($h(),{target:ct.fromDom(oi.getContainer())})}function Bp(Fo){La($h(),{target:ct.fromDom(Fo.relatedTarget.getContainer())})}}function _S(s){return ds("items","items",{tag:"required",process:{}},jl(Gp(function(d){return Zi("Checking item of "+s,vk,d).fold(function(p){return yo.error(wu(p))},function(p){return yo.value(p)})})))}function aO(s){return $(s.type)&&$(s.name)}function sO(s){return{internalDialog:el(Zi("dialog",bE,s)),dataValidator:(d=Or(ln(SD(s),aO),function(p){return X.from(QA[p.type]).fold(function(){return[]},function(_){return[Bu(p.name,_)]})}),Pr(d)),initialData:s.initialData};var d}function pD(s){var d=[],p={};return jt(s,function(_,T){_.fold(function(){d.push(T)},function(I){p[T]=I})}),0<d.length?yo.error(d):yo.value(p)}function RA(s,d){Qr(s,"height",d+"px"),ml().browser.isIE()?Co(s,"flex-basis"):Qr(s,"flex-basis",d+"px")}function MM(s,d,p){tv(s,'[role="dialog"]').each(function(_){ra(_,'[role="tablist"]').each(function(T){p.get().map(function(I){return Qr(d,"height","0"),Qr(d,"flex-basis","0"),Math.min(I,(H=d,W=T,ee=Wr(R=_).dom,ue="fixed"===Is(tv(R,".tox-dialog-wrap").getOr(R),"position")?Math.max(ee.clientHeight,window.innerHeight):Math.max(ee.offsetHeight,ee.scrollHeight),he=Os(H),we=H.dom.offsetLeft>=W.dom.offsetLeft+fn(W)?Math.max(Os(W),he):he,Te=parseInt(Is(R,"margin-top"),10)||0,Le=parseInt(Is(R,"margin-bottom"),10)||0,ue-(Os(R)+Te+Le-we)));var R,H,W,ee,ue,he,we,Te,Le}).each(function(I){RA(d,I)})})})}function LA(s){return ra(s,'[role="tabpanel"]')}function uO(s,d){function p(ue){var he=pD(er.getValue(ue)).getOr({}),we=R.get(),Te=xo(we,he);R.set(Te)}function _(ue){var he=R.get();er.setValue(ue,he)}var T,I,R=wr({}),H=wr(null),W=Ot(s.tabs,function(ue){return{value:ue.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"],innerHtml:d.shared.providers.translate(ue.title)},view:function(){return[Ef.sketch(function(he){return{dom:{tag:"div",classes:["tox-form"]},components:Ot(ue.items,function(we){return zy(he,we,d)}),formBehaviours:Ln([Rr.config({mode:"acyclic",useTabstopAt:nt(o_)}),Kn("TabView.form.events",[Xi(_),Cl(p)]),nc.config({channels:Qc([{key:tI,value:{onReceive:p}},{key:nI,value:{onReceive:_}}])})])}})]}}}),ee=(T=W,I=Ai(),{extraEvents:[Xi(function(ue){var he=ue.element;LA(he).each(function(we){var Te;Qr(we,"visibility","hidden"),ue.getSystem().getByDom(we).toOptional().each(function(Le){var Re,Be,He;Pi(Wo((Be=we,He=Le,Ot(Re=T,function(Xe,De){no.set(He,Re[De].view());var Ue=Be.dom.getBoundingClientRect();return no.set(He,[]),Ue.height})),function(Xe,De){return De<Xe?-1:Xe<De?1:0})).fold(I.clear,I.set)}),MM(he,we,I),Co(we,"visibility"),Te=ue,Pi(T).each(function(Le){return SS.showTab(Te,Le.value)}),hp.requestAnimationFrame(function(){MM(he,we,I)})})}),mn(ka(),function(ue){var he=ue.element;LA(he).each(function(we){MM(he,we,I)})}),mn(uc,function(ue,he){var we=ue.element;LA(we).each(function(Te){var Le=Vd(sa(Te));Qr(Te,"visibility","hidden");var Re=Ni(Te,"height").map(function(He){return parseInt(He,10)});Co(Te,"height"),Co(Te,"flex-basis");var Be=Te.dom.getBoundingClientRect().height;Re.forall(function(He){return He<Be})?(I.set(Be),MM(we,Te,I)):Re.each(function(He){RA(Te,He)}),Co(Te,"visibility"),Le.each(rd)})})],selectFirst:!1});return SS.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function(ue,he,we){var Te=er.getValue(he);kr(ue,my,{name:Te,oldName:H.get()}),H.set(Te)},tabs:W,components:[SS.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[D_.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:Ln([Ko.config({})])}),SS.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:ee.selectFirst,tabSectionBehaviours:Ln([Kn("tabpanel",ee.extraEvents),Rr.config({mode:"acyclic"}),Io.config({find:function(ue){return Pi(SS.getViewItems(ue))}}),er.config({store:{mode:"manual",getValue:function(ue){return ue.getSystem().broadcastOn([tI],{}),R.get()},setValue:function(ue,he){R.set(he),ue.getSystem().broadcastOn([nI],{})}}})])})}function BA(s,d,p,_){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:de(de({},d.map(function(T){return{id:T}}).getOr({})),_?{"aria-live":"polite"}:{})},components:[],behaviours:Ln([Iy(0),bh.config({channel:rI,updateState:function(T,I){return X.some({isTabPanel:function(){return"tabpanel"===I.body.type}})},renderComponents:function(T){return"tabpanel"!==T.body.type?[(I=T.body,R=p,{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[(H=ui(Ef.sketch(function(W){return{dom:{tag:"div",classes:["tox-form"].concat(I.classes)},components:Ot(I.items,function(ee){return zy(W,ee,R)})}}))).asSpec()]}],behaviours:Ln([Rr.config({mode:"acyclic",useTabstopAt:nt(o_)}),Mp(H),BD(H,{postprocess:function(W){return pD(W).fold(function(ee){return console.error(ee),{}},U)}})])})]:[uO(T.body,p)];var I,R,H},initialData:s})])}}(bS=Pp=Pp||{})[bS.None=0]="None",bS[bS.Both=1]="Both",bS[bS.Vertical=2]="Vertical";var vD,uE=F([bn("lazySink"),Xo("dragBlockClass"),Di("getBounds",xu),It("useTabstopAt",$e),It("eventOrder",{}),ns("modalBehaviours",[Rr]),Vu("onExecute"),Vo("onEscape")]),zA={sketch:U},lO=F([dd({name:"draghandle",overrides:function(s,d){return{behaviours:Ln([Gy.config({mode:"mouse",getTarget:function(p){return tv(p,'[role="dialog"]').getOr(p)},blockerClass:s.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(d,null,2)).message),getBounds:s.getDragBounds})])}}}),du({schema:[bn("dom")],name:"title"}),du({factory:zA,schema:[bn("dom")],name:"close"}),du({factory:zA,schema:[bn("dom")],name:"body"}),dd({factory:zA,schema:[bn("dom")],name:"footer"}),Lc({factory:{sketch:function(s,d){return de(de({},s),{dom:d.dom,components:d.components})}},schema:[It("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),It("components",[])],name:"blocker"})]),Pu=Xa({name:"ModalDialog",configFields:uE(),partFields:lO(),factory:function(s,d,p,_){var T,I=Ai(),R=Sr("modal-events"),H=de(de({},s.eventOrder),((T={})[wc()]=[R].concat(s.eventOrder["alloy.system.attached"]||[]),T));return{uid:s.uid,dom:s.dom,components:d,apis:{show:function(W){I.set(W);var ee=s.lazySink(W).getOrDie(),ue=_.blocker(),he=ee.getSystem().build(de(de({},ue),{components:ue.components.concat([Ql(W)]),behaviours:Ln([eo.config({}),Kn("dialog-blocker-events",[Ad(Nd(),function(){Rr.focusIn(W)})])])}));Mu(ee,he),Rr.focusIn(W)},hide:function(W){I.clear(),Er(W.element).each(function(ee){W.getSystem().getByDom(ee).each(function(ue){kf(ue)})})},getBody:function(W){return ca(W,s,"body")},getFooter:function(W){return ca(W,s,"footer")},setIdle:function(W){gg.unblock(W)},setBusy:function(W,ee){gg.block(W,ee)}},eventOrder:H,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:ja(s.modalBehaviours,[no.config({}),Rr.config({mode:"cyclic",onEnter:s.onExecute,onEscape:s.onEscape,useTabstopAt:s.useTabstopAt}),gg.config({getRoot:I.get}),Kn(R,[Xi(function(W){var ee,ue,he,we=W.element,Te=ca(W,s,"title").element,Le=Fa(we,"id").fold(function(){var Re=Sr("dialog-label");return Ir(Te,"id",Re),Re},U);Ir(we,"aria-labelledby",Le),ee=W.element,ue=ca(W,s,"body").element,he=X.from(vi(ee,"id")).fold(function(){var Re=Sr("dialog-describe");return Ir(ue,"id",Re),Re},U),Ir(ee,"aria-describedby",he)})])])}},apis:{show:function(s,d){s.show(d)},hide:function(s,d){s.hide(d)},getBody:function(s,d){return s.getBody(d)},getFooter:function(s,d){return s.getFooter(d)},setBusy:function(s,d,p){s.setBusy(d,p)},setIdle:function(s,d){s.setIdle(d)}}}),cO=Pr([Cr("type"),Cr("name")].concat(Vb)),dO=Om,yD=[ds("name","name",zf(function(){return Sr("button-name")}),ua),bi("icon"),ql("align","end",["start","end"]),Ha("primary",!1),Ha("disabled",!1)],FA=le(le([],yD,!0),[Cr("text")],!1),k_=le([bl("type",["submit","cancel","custom"])],FA,!0),fO=Ys("type",{submit:k_,cancel:k_,custom:k_,menu:le([bl("type",["menu"]),bi("text"),bi("tooltip"),bi("icon"),zu("items",cO)],yD,!0)}),lE=[Cr("type"),Cr("text"),bl("level",["info","warn","error","success"]),Cr("icon"),It("url","")],VA=Pr(lE),cE=[Cr("type"),Cr("text"),Ha("disabled",!1),Ha("primary",!1),ds("name","name",zf(function(){return Sr("button-name")}),ua),bi("icon"),Ha("borderless",!1)],hO=Pr(cE),dE=[Cr("type"),Cr("name"),Cr("label"),Ha("disabled",!1)],fE=Pr(dE),HA=Om,WA=[Cr("type"),Cr("name")],Np=WA.concat([bi("label")]),bD=Np.concat([It("columns","auto")]),gO=Pr(bD),mO=Xp([Cr("value"),Cr("text"),Cr("icon")]),pO=Pr(Np),vO=ua,yO=Pr(Np),xD=ua,Dx=WA.concat([kd("tag","textarea"),Cr("scriptId"),Cr("scriptUrl"),yc("settings",void 0,Jy)]),hE=WA.concat([kd("tag","textarea"),xs("init")]),_D=Gp(function(s){return Zi("customeditor.old",Qu(hE),s).orThunk(function(){return Zi("customeditor.new",Qu(Dx),s)})}),DM=ua,gE=Pr(Np),wD=jl($y),bO=[Cr("type"),Cr("html"),ql("presets","presentation",["presentation","document"])],xO=Pr(bO),mE=Np.concat([Ha("sandboxed",!0)]),pE=Pr(mE),_O=ua,GA=Np.concat([Bu("currentState",Pr([bn("blob"),Cr("url")]))]),wO=Pr(GA),SO=Np.concat([bi("inputMode"),bi("placeholder"),Ha("maximized",!1),Ha("disabled",!1)]),CO=Pr(SO),wm=ua,UA=[Cr("text"),Cr("value")],kO=[Cr("text"),zu("items",(vD=un(function(){return T_}),{extract:function(s,d){return vD().extract(s,d)},toString:function(){return vD().toString()}}))],T_=Wp([Pr(UA),Pr(kO)]),Aa=Np.concat([zu("items",T_),Ha("disabled",!1)]),AM=Pr(Aa),vE=ua,TO=Np.concat([Jc("items",[Cr("text"),Cr("value")]),cs("size",1),Ha("disabled",!1)]),MO=Pr(TO),jA=ua,Bl=Np.concat([Ha("constrain",!0),Ha("disabled",!1)]),qA=Pr(Bl),cc=Pr([Cr("width"),Cr("height")]),mg=[Cr("type"),zu("header",ua),zu("cells",jl(ua))],XA=Pr(mg),DO=Np.concat([bi("placeholder"),Ha("maximized",!1),Ha("disabled",!1)]),Uy=Pr(DO),IM=ua,YA=Np.concat([ql("filetype","file",["image","media","file"]),It("disabled",!1)]),AO=Pr(YA),IO=Pr([Cr("value"),It("meta",{})]),vk=Ky(function(){return hf("type",{alertbanner:VA,bar:Pr((p=_S("bar"),[Cr("type"),p])),button:hO,checkbox:fE,colorinput:pO,colorpicker:yO,dropzone:gE,grid:Pr((s=_S("grid"),[Cr("type"),Bu("columns",xi),s])),iframe:pE,input:CO,listbox:AM,selectbox:MO,sizeinput:qA,textarea:Uy,urlinput:AO,customeditor:_D,htmlpanel:xO,imagetools:wO,collection:gO,label:Pr((d=_S("label"),[Cr("type"),Cr("label"),d])),table:XA,panel:M_});var s,d,p}),Sm=[Cr("type"),It("classes",[]),zu("items",vk)],M_=Pr(Sm),ZA=[ds("name","name",zf(function(){return Sr("tab-name")}),ua),Cr("title"),zu("items",vk)],KA=[Cr("type"),Jc("tabs",ZA)],$A=Pr(KA),yE=FA,JA=fO,bE=Pr([Cr("title"),Bu("body",hf("type",{panel:M_,tabpanel:$A})),kd("size","normal"),zu("buttons",JA),It("initialData",{}),Di("onAction",j),Di("onChange",j),Di("onSubmit",j),Di("onClose",j),Di("onCancel",j),It("onTabChange",j)]),xE=Pr(le([bl("type",["cancel","custom"])],yE,!0)),_E=Pr([Cr("title"),Cr("url"),zx("height"),zx("width"),Up("buttons",xE),Di("onAction",j),Di("onCancel",j),Di("onClose",j),Di("onMessage",j)]),SD=function(s){return Z(s)?[s].concat(Or(tr(s),SD)):oe(s)?Or(s,SD):[]},QA={checkbox:HA,colorinput:vO,colorpicker:xD,dropzone:wD,input:wm,iframe:_O,sizeinput:cc,selectbox:jA,listbox:vE,size:cc,textarea:IM,urlinput:IO,customeditor:DM,collection:mO,togglemenuitem:dO},wS={open:function(s,d){var p=sO(d);return s(p.internalDialog,p.initialData,p.dataValidator)},openUrl:function(s,d){return s(el(Zi("dialog",_E,d)))},redial:sO},yk=qa({name:"TabButton",configFields:[It("uid",void 0),bn("value"),ds("dom","dom",bo(function(){return{attributes:{role:"tab",id:Sr("aria"),"aria-selected":"false"}}}),Oa()),Xo("action"),It("domModification",{}),ns("tabButtonBehaviours",[eo,Rr,er]),bn("view")],factory:function(s,d){return{uid:s.uid,dom:s.dom,components:s.components,events:fa(s.action),behaviours:ja(s.tabButtonBehaviours,[eo.config({}),Rr.config({mode:"execution",useSpace:!0,useEnter:!0}),er.config({store:{mode:"memory",initialValue:s.value}})]),domModification:s.domModification}}}),CD=F([bn("tabs"),bn("dom"),It("clickToDismiss",!1),ns("tabbarBehaviours",[ko,Rr]),jr(["tabClass","selectedClass"])]),jy=F([Jg({factory:yk,name:"tabs",unit:"tab",overrides:function(s){return{action:function(d){var p=d.getSystem().getByUid(s.uid).getOrDie(),_=ko.isHighlighted(p,d);(_&&s.clickToDismiss?function(T,I){ko.dehighlight(T,I),kr(T,Bd(),{tabbar:T,button:I})}:_?j:function(T,I){ko.highlight(T,I),kr(T,Ld(),{tabbar:T,button:I})})(p,d)},domModification:{classes:[s.markers.tabClass]}}}})]),D_=Xa({name:"Tabbar",configFields:CD(),partFields:jy(),factory:function(s,d,p,_){return{uid:s.uid,dom:s.dom,components:d,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:ja(s.tabbarBehaviours,[ko.config({highlightClass:s.markers.selectedClass,itemClass:s.markers.tabClass,onHighlight:function(T,I){Ir(I.element,"aria-selected","true")},onDehighlight:function(T,I){Ir(I.element,"aria-selected","false")}}),Rr.config({mode:"flow",getInitial:function(T){return ko.getHighlighted(T).map(function(I){return I.element})},selector:"."+s.markers.tabClass,executeOnMove:!0})])}}}),wE=qa({name:"Tabview",configFields:[ns("tabviewBehaviours",[no])],factory:function(s,d){return{uid:s.uid,dom:s.dom,behaviours:ja(s.tabviewBehaviours,[no.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),bk=F([It("selectFirst",!0),No("onChangeTab"),No("onDismissTab"),It("tabs",[]),ns("tabSectionBehaviours",[])]),eI=F([du({factory:D_,schema:[bn("dom"),xl("markers",[bn("tabClass"),bn("selectedClass")])],name:"tabbar",defaults:function(s){return{tabs:s.tabs}}}),du({factory:wE,name:"tabview"})]),SS=Xa({name:"TabSection",configFields:bk(),partFields:eI(),factory:function(s,d,p,_){function T(I,R){Bo(I,s,"tabbar").each(function(H){R(H).each(Md)})}return{uid:s.uid,dom:s.dom,components:d,behaviours:Ug(s.tabSectionBehaviours),events:Qo(Gr([s.selectFirst?[Xi(function(I,R){T(I,ko.getFirst)})]:[],[mn(Ld(),function(I,R){var H=R.event.button,W=er.getValue(H);Bo(H,s,"tabview").each(function(ee){wo(s.tabs,function(ue){return ue.value===W}).each(function(ue){var he=ue.view();Fa(H.element,"id").each(function(we){Ir(ee.element,"aria-labelledby",we)}),no.set(ee,he),s.onChangeTab(ee,H,he)})})}),mn(Bd(),function(I,R){s.onDismissTab(I,R.event.button)})]])),apis:{getViewItems:function(I){return Bo(I,s,"tabview").map(function(R){return no.contents(R)}).getOr([])},showTab:function(I,R){T(I,function(H){return wo(ko.getCandidates(H),function(W){return er.getValue(W)===R}).filter(function(W){return!ko.isHighlighted(H,W)})})}}}},apis:{getViewItems:function(s,d){return s.getViewItems(d)},showTab:function(s,d,p){s.showTab(d,p)}}}),tI="send-data-to-section",nI="send-data-to-view",qy=Sr("update-dialog"),OO=Sr("update-title"),rI=Sr("update-body"),Rp=Sr("update-footer"),oI=Sr("body-send-message");function A_(s){return(A_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(d){return typeof d}:function(d){return d&&"function"==typeof Symbol&&d.constructor===Symbol&&d!==Symbol.prototype?"symbol":typeof d})(s)}function pu(s,d){return(pu=Object.setPrototypeOf||function(p,_){return p.__proto__=_,p})(s,d)}function iI(s,d,p){return(iI=function(){if("undefined"!=typeof Reflect&&Reflect.construct&&!Reflect.construct.sham){if("function"==typeof Proxy)return 1;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),1}catch{return}}}()?Reflect.construct:function(_,T,I){var R=[null];R.push.apply(R,T);var H=new(Function.bind.apply(_,R));return I&&pu(H,I.prototype),H}).apply(null,arguments)}function xh(s){return function(d){if(Array.isArray(d))return kD(d)}(s)||function(){if("undefined"!=typeof Symbol&&null!=s[Symbol.iterator]||null!=s["@@iterator"])return Array.from(s)}()||function(d){if(d){if("string"==typeof d)return kD(d,void 0);var p=Object.prototype.toString.call(d).slice(8,-1);return"Map"===(p="Object"===p&&d.constructor?d.constructor.name:p)||"Set"===p?Array.from(d):"Arguments"===p||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?kD(d,void 0):void 0}}(s)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kD(s,d){(null==d||d>s.length)&&(d=s.length);for(var p=0,_=new Array(d);p<d;p++)_[p]=s[p];return _}var OM,aI=Object.hasOwnProperty,xk=Object.setPrototypeOf,Ax=Object.isFrozen,SE=Object.getPrototypeOf,TD=Object.getOwnPropertyDescriptor,_h=Object.freeze,Xy=Object.seal,EO=Object.create,MD="undefined"!=typeof Reflect&&Reflect,sI=MD.apply||function(s,d,p){return s.apply(d,p)},vu=(_h=_h||function(s){return s},Xy=Xy||function(s){return s},MD.construct||function(s,d){return iI(s,xh(d))}),CS=wh(Array.prototype.forEach),_k=wh(Array.prototype.pop),Lp=wh(Array.prototype.push),EM=wh(String.prototype.toLowerCase),DD=wh(String.prototype.match),Ix=wh(String.prototype.replace),PM=wh(String.prototype.indexOf),PO=wh(String.prototype.trim),Nf=wh(RegExp.prototype.test),kS=(OM=TypeError,function(){for(var s=arguments.length,d=new Array(s),p=0;p<s;p++)d[p]=arguments[p];return vu(OM,d)});function wh(s){return function(d){for(var p=arguments.length,_=new Array(1<p?p-1:0),T=1;T<p;T++)_[T-1]=arguments[T];return sI(s,d,_)}}function Oi(s,d){xk&&xk(s,null);for(var p=d.length;p--;){var _,T=d[p];"string"!=typeof T||(_=EM(T))!==T&&(Ax(d)||(d[p]=_),T=_),s[T]=!0}return s}function e(s){var d,p=EO(null);for(d in s)sI(aI,s,[d])&&(p[d]=s[d]);return p}function t(s,d){for(;null!==s;){var p=TD(s,d);if(p){if(p.get)return wh(p.get);if("function"==typeof p.value)return wh(p.value)}s=SE(s)}return function(_){return console.warn("fallback value for",_),null}}var n=_h(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),o=_h(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),a=_h(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),u=_h(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),l=_h(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),f=_h(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),m=_h(["#text"]),v=_h(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),x=_h(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),C=_h(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),k=_h(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),M=Xy(/\{\{[\w\W]*|[\w\W]*\}\}/gm),E=Xy(/<%[\w\W]*|[\w\W]*%>/gm),V=Xy(/^data-[\-\w.\u00B7-\uFFFF]/),N=Xy(/^aria-[\-\w]+$/),G=Xy(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),te=Xy(/^(?:\w+script|data):/i),J=Xy(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),me=Xy(/^html$/i);function ge(s,d){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[s,d]}}function pe(s,d){return Pu.parts.close(Iu.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":d.translate("Close")}},action:s,buttonBehaviours:Ln([Ko.config({})])}))}function _e(){return Pu.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})}function Me(s,d){return Pu.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:gn("<p>"+(p=d.translate(s),ji().sanitize(p)+"</p>"))}]}]});var p}function We(s){return Pu.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:s})}function Ke(s,d){return[ba.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:s}),ba.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:d})]}function et(s){var d,p="tox-dialog",_=p+"-wrap",T=_+"__backdrop",I=p+"__disable-scroll";return Pu.sketch({lazySink:s.lazySink,onEscape:function(R){return s.onEscape(R),X.some(!0)},useTabstopAt:function(R){return!o_(R)},dom:{tag:"div",classes:[p].concat(s.extraClasses),styles:de({position:"relative"},s.extraStyles)},components:le([s.header,s.body],s.footer.toArray(),!0),parts:{blocker:{dom:gn('<div class="'+_+'"></div>'),components:[{dom:{tag:"div",classes:Ia?[T,T+"--opaque"]:[T]}}]}},dragBlockClass:_,modalBehaviours:Ln(le([eo.config({}),Kn("dialog-events",s.dialogEvents.concat([Ad(Nd(),function(R,H){Rr.focusIn(R)})])),Kn("scroll-lock",[Xi(function(){Qa($u(),I)}),Cl(function(){_i($u(),I)})])],s.extraBehaviours,!0)),eventOrder:de(((d={})[Ca()]=["dialog-events"],d[wc()]=["scroll-lock","dialog-events","alloy.base.behaviour"],d[Sc()]=["alloy.base.behaviour","dialog-events","scroll-lock"],d),s.eventOrder)})}function ut(s){return Iu.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":s.translate("Close"),title:s.translate("Close")}},components:[ah("close",{tag:"div",classes:["tox-icon"]},s.icons)],action:function(d){Lo(d,Qb)}})}function lt(s,d,p){function _(T){return[Zl(p.translate(T.title))]}return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:de({},d.map(function(T){return{id:T}}).getOr({}))},components:_(s),behaviours:Ln([bh.config({channel:OO,renderComponents:_})])}}function vt(){return{dom:gn('<div class="tox-dialog__draghandle"></div>')}}function Mt(s,d){return p={title:d.shared.providers.translate(s),draggable:d.dialog.isDraggableModal()},_=d.shared.providers,T=Pu.parts.title(lt(p,X.none(),_)),I=Pu.parts.draghandle(vt()),R=Pu.parts.close(ut(_)),H=[T].concat(p.draggable?[I]:[]).concat([R]),ba.sketch({dom:gn('<div class="tox-dialog__header"></div>'),components:H});var p,_,T,I,R,H}function Pt(s,d,p){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":p.translate(s)},styles:{left:"0px",right:"0px",bottom:"0px",top:"0px",position:"absolute"}},behaviours:d,components:[{dom:gn('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}function Ct(s,d,p){return{onClose:function(){return p.closeWindow()},onBlock:function(_){Pu.setBusy(s(),function(T,I){return Pt(_.message,I,d)})},onUnblock:function(){Pu.setIdle(s())}}}function Zt(s,d,p,_){var T;return so(et(de(de({},s),{lazySink:_.shared.getSink,extraBehaviours:le([bh.config({channel:qy,updateState:function(I,R){return X.some(R)},initialData:d}),yx({})],s.extraBehaviours,!0),onEscape:function(I){Lo(I,Qb)},dialogEvents:p,eventOrder:((T={})[qf()]=[bh.name(),nc.name()],T[wc()]=["scroll-lock",bh.name(),"messages","dialog-events","alloy.base.behaviour"],T[Sc()]=["alloy.base.behaviour","dialog-events","messages",bh.name(),"scroll-lock"],T)})))}function An(s){return Ot(s,function(d){return"menu"===d.type?(_=Ot((p=d).items,function(T){var I=wr(!1);return de(de({},T),{storage:I})}),de(de({},p),{items:_})):d;var p,_})}function Rn(s){return to(s,function(d,p){return"menu"!==p.type?d:to(p.items,function(_,T){return _[T.name]=T.storage,_},d)},{})}function Cn(s,d){return[Rm(Nd(),kT),s(q1,function(p,_){d.onClose(),_.onClose()}),s(Qb,function(p,_,T,I){_.onCancel(p),Lo(I,q1)}),mn(Iw,function(p,_){return d.onUnblock()}),mn(xp,function(p,_){return d.onBlock(_.event)})]}function Jn(s,d){function p(T,I){return ba.sketch({dom:{tag:"div",classes:["tox-dialog__footer-"+T]},components:Ot(I,function(R){return R.memento.asSpec()})})}var _=Gn(d.map(function(T){return T.footerButtons}).getOr([]),function(T){return"start"===T.align});return[p("start",_.pass),p("end",_.fail)]}function dr(s,d){return{dom:gn('<div class="tox-dialog__footer"></div>'),components:[],behaviours:Ln([bh.config({channel:Rp,initialData:s,updateState:function(p,_){var T=Ot(_.buttons,function(I){var R=ui(Hc(I,I.type,d));return{name:I.name,align:I.align,memento:R}});return X.some({lookupByName:function(I,R){return H=I,W=R,wo(T,function(ee){return ee.name===W}).bind(function(ee){return ee.memento.getOpt(H)});var H,W},footerButtons:T})},renderComponents:Jn})])}}function $r(s,d){return Pu.parts.footer(dr(s,d))}function zn(s,d){if(s.getRoot().getSystem().isConnected()){var p=Io.getCurrent(s.getFormWrapper()).getOr(s.getFormWrapper());return Ef.getField(p,d).fold(function(){var _=s.getFooter();return bh.getState(_).get().bind(function(T){return T.lookupByName(p,d)})},function(_){return X.some(_)})}return X.none()}function Ur(s,d,p){function _(I){var R=s.getRoot();R.getSystem().isConnected()&&I(R)}var T={getData:function(){var I=s.getRoot(),R=I.getSystem().isConnected()?s.getFormWrapper():I,H=er.getValue(R),W=yn(p,function(ee){return ee.get()});return de(de({},H),W)},setData:function(I){_(function(R){var H,W,ee=T.getData(),ue=de(de({},ee),I),he=(H=ue,W=s.getRoot(),bh.getState(W).get().map(function(Te){return el(Zi("data",Te.dataValidator,H))}).getOr(H)),we=s.getFormWrapper();er.setValue(we,he),jt(p,function(Te,Le){ir(ue,Le)&&Te.set(ue[Le])})})},disable:function(I){zn(s,I).each(xr.disable)},enable:function(I){zn(s,I).each(xr.enable)},focus:function(I){zn(s,I).each(eo.focus)},block:function(I){if(!$(I))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");_(function(R){kr(R,xp,{message:I})})},unblock:function(){_(function(I){Lo(I,Iw)})},showTab:function(I){_(function(R){var H=s.getBody();bh.getState(H).get().exists(function(W){return W.isTabPanel()})&&Io.getCurrent(H).each(function(W){SS.showTab(W,I)})})},redial:function(I){_(function(R){var H=d(I);R.getSystem().broadcastOn([qy],H),R.getSystem().broadcastOn([OO],H.internalDialog),R.getSystem().broadcastOn([rI],H.internalDialog),R.getSystem().broadcastOn([Rp],H.internalDialog),T.setData(H.initialData)})},close:function(){_(function(I){Lo(I,q1)})}};return T}function Jr(s){return Z(s)&&-1!==NM.indexOf(s.mceAction)}function ga(s){function p(we,Te,Le,Re){return wS.open(function(Be,He,Xe){function De(){return uf.on(function(Ei){Ui.reposition(Ei),Uc.refresh(Ei)})}var Ue,at,gt,Xt,Lt,nn,_n,an,kn,Vn,Ar,lo,Jo,gi,Fi,Uo,mi,Ci,Ji,oi,xa,dl,yd=el(Zi("data",Xe,He)),uf=Ai(),_a=H.shared.header.isPositionedAtTop(),pg=(at={dataValidator:Xe,initialData:yd,internalDialog:Be},gt={redial:wS.redial,closeWindow:function(){uf.on(Ui.hide),W.off("ResizeEditor",De),uf.clear(),Le(pg.instanceApi)}},Xt=H,Lt=Re,Jo=Sr("dialog-label"),gi=Sr("dialog-content"),Fi=ui((an={title:at.internalDialog.title,draggable:!0},kn=Jo,Vn=Xt.shared.providers,ba.sketch({dom:gn('<div class="tox-dialog__header"></div>'),components:[lt(an,X.some(kn),Vn),vt(),ut(Vn)],containerBehaviours:Ln([Gy.config({mode:"mouse",blockerClass:"blocker",getTarget:function(Ei){return ec(Ei,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])}))),Uo=ui((Ar=Xt,lo=Lt,BA({body:at.internalDialog.body},X.some(gi),Ar,lo))),Ci=Rn(mi=An(at.internalDialog.buttons)),Ji=ui(Ox({buttons:mi},Xt)),oi=sf(function(){return dl},{onBlock:function(Ei){gg.block(xa,function(Qn,co){return Pt(Ei.message,co,Xt.shared.providers)})},onUnblock:function(){gg.unblock(xa)},onClose:function(){return gt.closeWindow()}},Xt.shared.getSink),xa=so({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"],attributes:((nn={role:"dialog"})["aria-labelledby"]=Jo,nn["aria-describedby"]=gi,nn)},eventOrder:((_n={})[qf()]=[bh.name(),nc.name()],_n[Ca()]=["execute-on-form"],_n[wc()]=["reflecting","execute-on-form"],_n),behaviours:Ln([Rr.config({mode:"cyclic",onEscape:function(Ei){return Lo(Ei,q1),X.some(!0)},useTabstopAt:function(Ei){return!o_(Ei)&&("button"!==tn(Ei)||"disabled"!==vi(Ei,"disabled"))}}),bh.config({channel:qy,updateState:function(Ei,Qn){return X.some(Qn)},initialData:at}),eo.config({}),Kn("execute-on-form",oi.concat([Ad(Nd(),function(Ei,Qn){Rr.focusIn(Ei)})])),gg.config({getRoot:function(){return X.some(xa)}}),no.config({}),yx({})]),components:[Fi.asSpec(),Uo.asSpec(),Ji.asSpec()]}),dl=Ur({getRoot:F(xa),getFooter:function(){return Ji.get(xa)},getBody:function(){return Uo.get(xa)},getFormWrapper:function(){var Ei=Uo.get(xa);return Io.getCurrent(Ei).getOr(Ei)}},gt.redial,Ci),{dialog:xa,instanceApi:dl}),Ds=so(Ui.sketch(de(de({lazySink:H.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:{}},_a?{}:{fireRepositionEventInstead:{}}),{inlineBehaviours:Ln(le([Kn("window-manager-inline-events",[mn(Sg(),function(Ei,Qn){Lo(pg.dialog,Qb)})])],(Ue=W,ee&&_a?[]:[Uc.config({contextual:{lazyContext:function(){return X.some(Lu(ct.fromDom(Ue.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"]})]),!0)),isExtraPart:function(Ei,Qn){return qv(co=Qn,".tox-alert-dialog")||qv(co,".tox-confirm-dialog");var co}})));return uf.set(Ds),Ui.showWithin(Ds,Ql(pg.dialog),{anchor:Te},X.some($u())),ee&&_a||(Uc.refresh(Ds),W.on("ResizeEditor",De)),pg.instanceApi.setData(yd),Rr.focusIn(pg.dialog),pg.instanceApi},we)}var _,T,I,R,H=s.backstage,W=s.editor,ee=Wv(W),ue=(T=(_=s).backstage.shared,{open:function(we,Te){function Le(){Pu.hide(Xe),Te()}var Re=ui(Hc({name:"close-alert",text:"OK",primary:!0,align:"end",disabled:!1,icon:X.none()},"cancel",_.backstage)),Be=_e(),He=pe(Le,T.providers),Xe=so(et({lazySink:function(){return T.getSink()},header:ge(Be,He),body:Me(we,T.providers),footer:X.some(We(Ke([],[Re.asSpec()]))),onEscape:Le,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[mn(Qb,Le)],eventOrder:{}}));Pu.show(Xe);var De=Re.get(Xe);eo.focus(De)}}),he=(R=(I=s).backstage.shared,{open:function(we,Te){function Le(at){Pu.hide(De),Te(at)}var Re=ui(Hc({name:"yes",text:"Yes",primary:!0,align:"end",disabled:!1,icon:X.none()},"submit",I.backstage)),Be=Hc({name:"no",text:"No",primary:!1,align:"end",disabled:!1,icon:X.none()},"cancel",I.backstage),He=_e(),Xe=pe(function(){return Le(!1)},R.providers),De=so(et({lazySink:function(){return R.getSink()},header:ge(He,Xe),body:Me(we,R.providers),footer:X.some(We(Ke([],[Be,Re.asSpec()]))),onEscape:function(){return Le(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[mn(Qb,function(){return Le(!1)}),mn(sc,function(){return Le(!0)})],eventOrder:{}}));Pu.show(De);var Ue=Re.get(De);eo.focus(Ue)}});return{open:function(we,Te,Le){return void 0!==Te&&"toolbar"===Te.inline?p(we,H.shared.anchors.inlineDialog(),Le,Te.ariaAttrs):void 0!==Te&&"cursor"===Te.inline?p(we,H.shared.anchors.cursor(),Le,Te.ariaAttrs):function d(we,Te){return wS.open(function(Le,Re,Be){var He,Xe,De,Ue,at,gt,Xt,Lt,nn,_n,an,kn,Vn,sr,Ar=Re,lo=(Xe={redial:wS.redial,closeWindow:function(){Pu.hide(lo.dialog),Te(lo.instanceApi)}},gt=Mt((He={dataValidator:Be,initialData:Ar,internalDialog:Le}).internalDialog.title,De=H),Ue=De,at=BA({body:He.internalDialog.body},X.none(),Ue,!1),Xt=Pu.parts.body(at),nn=Rn(Lt=An(He.internalDialog.buttons)),_n=$r({buttons:Lt},De),an=sf(function(){return sr},Ct(function(){return Vn},De.shared.providers,Xe),De.shared.getSink),kn=function(){switch(He.internalDialog.size){case"large":return["tox-dialog--width-lg"];case"medium":return["tox-dialog--width-md"];default:return[]}}(),Vn=Zt({header:gt,body:Xt,footer:X.some(_n),extraClasses:kn,extraBehaviours:[],extraStyles:{}},He,an,De),sr=Ur({getRoot:F(Vn),getBody:function(){return Pu.getBody(Vn)},getFooter:function(){return Pu.getFooter(Vn)},getFormWrapper:function(){var Jo=Pu.getBody(Vn);return Io.getCurrent(Jo).getOr(Jo)}},Xe.redial,nn),{dialog:Vn,instanceApi:sr});return Pu.show(lo.dialog),lo.instanceApi.setData(Ar),lo.instanceApi},we)}(we,Le)},openUrl:function(we,Te){return Le=Te,wS.openUrl(function(Re){var Be=function _o(s,d,p,_){var T,I,R,H=Mt(s.title,_),W=(I={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[VC({dom:{tag:"iframe",attributes:{src:s.url}},behaviours:Ln([Ko.config({}),eo.config({})])})]}],behaviours:Ln([Rr.config({mode:"acyclic",useTabstopAt:nt(o_)})])},Pu.parts.body(I)),ee=s.buttons.bind(function(De){return 0===De.length?X.none():X.some($r({buttons:De},_))}),ue=Sh(function(){return He},Ct(function(){return Be},_.shared.providers,d)),he=de(de({},s.height.fold(function(){return{}},function(De){return{height:De+"px","max-height":De+"px"}})),s.width.fold(function(){return{}},function(De){return{width:De+"px","max-width":De+"px"}})),we=s.width.isNone()&&s.height.isNone()?["tox-dialog--width-lg"]:[],Te=new Yy(s.url,{base_uri:new Yy(window.location.href)}),Le=Te.protocol+"://"+Te.host+(Te.port?":"+Te.port:""),Re=Wd(),Be=Zt({header:H,body:W,footer:ee,extraClasses:we,extraBehaviours:[Kn("messages",[Xi(function(){var De=Ua(ct.fromDom(window),"message",function(Ue){var at,gt;Te.isSameOrigin(new Yy(Ue.raw.origin))&&(Jr(at=Ue.raw.data)?function(Xt,Lt,nn){switch(nn.mceAction){case"insertContent":Xt.insertContent(nn.content);break;case"setContent":Xt.setContent(nn.content);break;case"execCommand":var _n=!!Q(nn.ui)&&nn.ui;Xt.execCommand(nn.cmd,_n,nn.value);break;case"close":Lt.close();break;case"block":Lt.block(nn.message);break;case"unblock":Lt.unblock()}}(p,He,at):!Jr(gt=at)&&Z(gt)&&ir(gt,"mceAction")&&s.onMessage(He,at))});Re.set(De)}),Cl(Re.clear)]),nc.config({channels:((T={})[oI]={onReceive:function(De,Ue){ra(De.element,"iframe").each(function(at){at.dom.contentWindow.postMessage(Ue,Le)})}},T)})],extraStyles:he},s,ue,_),He={block:function(De){if(!$(De))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");Xe(function(Ue){kr(Ue,xp,{message:De})})},unblock:function(){Xe(function(De){Lo(De,Iw)})},close:function(){Xe(function(De){Lo(De,q1)})},sendMessage:function(De){Xe(function(Ue){Ue.getSystem().broadcastOn([oI],De)})}};function Xe(De){R.getSystem().isConnected()&&De(R)}return{dialog:R=Be,instanceApi:He}}(Re,{closeWindow:function(){Pu.hide(Be.dialog),Le(Be.instanceApi)}},W,H);return Pu.show(Be.dialog),Be.instanceApi},we);var Le},alert:function(we,Te){ue.open(we,function(){Te()})},close:function(we){we.close()},confirm:function(we,Te){he.open(we,function(Le){Te(Le)})}}}var ji=function s(d){function p(Kt){return s(Kt)}var _=0<arguments.length&&void 0!==d?d:"undefined"==typeof window?null:window;if(p.version="2.3.8",p.removed=[],!_||!_.document||9!==_.document.nodeType)return p.isSupported=!1,p;var T,I=_.document,R=_.document,H=_.DocumentFragment,W=_.HTMLTemplateElement,ee=_.Node,ue=_.Element,he=_.NodeFilter,we=_.NamedNodeMap,Te=void 0===we?_.NamedNodeMap||_.MozNamedAttrMap:we,Le=_.HTMLFormElement,Re=_.DOMParser,Be=_.trustedTypes,He=ue.prototype,Xe=t(He,"cloneNode"),De=t(He,"nextSibling"),Ue=t(He,"childNodes"),at=t(He,"parentNode");"function"!=typeof W||(T=R.createElement("template")).content&&T.content.ownerDocument&&(R=T.content.ownerDocument);var gt=function(Kt,Mo){if("object"!==A_(Kt)||"function"!=typeof Kt.createPolicy)return null;var go=null,bd="data-tt-policy-suffix",Fl="dompurify"+((go=Mo.currentScript&&Mo.currentScript.hasAttribute(bd)?Mo.currentScript.getAttribute(bd):go)?"#"+go:"");try{return Kt.createPolicy(Fl,{createHTML:function(qc){return qc}})}catch{return console.warn("TrustedTypes policy "+Fl+" could not be created."),null}}(Be,I),Xt=gt?gt.createHTML(""):"",Lt=R,nn=Lt.implementation,_n=Lt.createNodeIterator,an=Lt.createDocumentFragment,kn=Lt.getElementsByTagName,Vn=I.importNode,sr={};try{sr=e(R).documentMode?R.documentMode:{}}catch{}var Ar={};function lo(Kt){return Kt instanceof RegExp||Kt instanceof Function}function Jo(Kt){Px&&Px===Kt||(Kt=e(Kt=Kt&&"object"===A_(Kt)?Kt:{}),_a="ALLOWED_TAGS"in Kt?Oi({},Kt.ALLOWED_TAGS):pg,Ds="ALLOWED_ATTR"in Kt?Oi({},Kt.ALLOWED_ATTR):Ei,TS="ADD_URI_SAFE_ATTR"in Kt?Oi(e(RM),Kt.ADD_URI_SAFE_ATTR):RM,I_="ADD_DATA_URI_TAGS"in Kt?Oi(e(O_),Kt.ADD_DATA_URI_TAGS):O_,cf="FORBID_CONTENTS"in Kt?Oi({},Kt.FORBID_CONTENTS):Zy,co="FORBID_TAGS"in Kt?Oi({},Kt.FORBID_TAGS):{},Vi="FORBID_ATTR"in Kt?Oi({},Kt.FORBID_ATTR):{},gi="USE_PROFILES"in Kt&&Kt.USE_PROFILES,ia=!1!==Kt.ALLOW_ARIA_ATTR,La=!1!==Kt.ALLOW_DATA_ATTR,lf=Kt.ALLOW_UNKNOWN_PROTOCOLS||!1,Nu=Kt.SAFE_FOR_TEMPLATES||!1,qu=Kt.WHOLE_DOCUMENT||!1,fl=Kt.RETURN_DOM||!1,hl=Kt.RETURN_DOM_FRAGMENT||!1,Xu=Kt.RETURN_TRUSTED_TYPE||!1,zl=Kt.FORCE_BODY||!1,Bp=!1!==Kt.SANITIZE_DOM,Fo=!1!==Kt.KEEP_CONTENT,Rf=Kt.IN_PLACE||!1,uf=Kt.ALLOWED_URI_REGEXP||uf,AD=Kt.NAMESPACE||E_,Kt.CUSTOM_ELEMENT_HANDLING&&lo(Kt.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Qn.tagNameCheck=Kt.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Kt.CUSTOM_ELEMENT_HANDLING&&lo(Kt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Qn.attributeNameCheck=Kt.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Kt.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof Kt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(Qn.allowCustomizedBuiltInElements=Kt.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Fi=-1===Ex.indexOf(Kt.PARSER_MEDIA_TYPE)?"text/html":Kt.PARSER_MEDIA_TYPE,Uo="application/xhtml+xml"===Fi?function(Mo){return Mo}:EM,Nu&&(La=!1),hl&&(fl=!0),gi&&(_a=Oi({},xh(m)),Ds=[],!0===gi.html&&(Oi(_a,n),Oi(Ds,v)),!0===gi.svg&&(Oi(_a,o),Oi(Ds,x),Oi(Ds,k)),!0===gi.svgFilters&&(Oi(_a,a),Oi(Ds,x),Oi(Ds,k)),!0===gi.mathMl&&(Oi(_a,l),Oi(Ds,C),Oi(Ds,k))),Kt.ADD_TAGS&&Oi(_a=_a===pg?e(_a):_a,Kt.ADD_TAGS),Kt.ADD_ATTR&&Oi(Ds=Ds===Ei?e(Ds):Ds,Kt.ADD_ATTR),Kt.ADD_URI_SAFE_ATTR&&Oi(TS,Kt.ADD_URI_SAFE_ATTR),Kt.FORBID_CONTENTS&&Oi(cf=cf===Zy?e(cf):cf,Kt.FORBID_CONTENTS),Fo&&(_a["#text"]=!0),qu&&Oi(_a,["html","head","body"]),_a.table&&(Oi(_a,["tbody"]),delete co.tbody),_h&&_h(Kt),Px=Kt)}p.isSupported="function"==typeof at&&nn&&void 0!==nn.createHTMLDocument&&9!==sr;var gi,Fi,Uo,mi,Ci=M,Ji=E,oi=V,xa=N,dl=te,yd=J,uf=G,_a=null,pg=Oi({},[].concat(xh(n),xh(o),xh(a),xh(l),xh(m))),Ds=null,Ei=Oi({},[].concat(xh(v),xh(x),xh(C),xh(k))),Qn=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),co=null,Vi=null,ia=!0,La=!0,lf=!1,Nu=!1,qu=!1,jc=!1,zl=!1,fl=!1,hl=!1,Xu=!1,Bp=!0,Fo=!0,Rf=!1,cf=null,Zy=Oi({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),I_=null,O_=Oi({},["audio","video","img","source","image","track"]),TS=null,RM=Oi({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),LM="http://www.w3.org/1998/Math/MathML",uI="http://www.w3.org/2000/svg",E_="http://www.w3.org/1999/xhtml",AD=E_,Ex=["application/xhtml+xml","text/html"],Px=null,NO=R.createElement("form"),ID=Oi({},["mi","mo","mn","ms","mtext"]),lI=Oi({},["foreignobject","desc","title","annotation-xml"]),PE=Oi({},["title","style","font","a","script"]),RO=Oi({},o);Oi(RO,a),Oi(RO,u);var CE=Oi({},l);function wk(Kt){Lp(p.removed,{element:Kt});try{Kt.parentNode.removeChild(Kt)}catch{try{Kt.outerHTML=Xt}catch{Kt.remove()}}}function TE(Kt,Mo){try{Lp(p.removed,{attribute:Mo.getAttributeNode(Kt),from:Mo})}catch{Lp(p.removed,{attribute:null,from:Mo})}if(Mo.removeAttribute(Kt),"is"===Kt&&!Ds[Kt])if(fl||hl)try{wk(Mo)}catch{}else try{Mo.setAttribute(Kt,"")}catch{}}function ME(Kt){var Mo,go,bd;zl?Kt="<remove></remove>"+Kt:bd=(go=DD(Kt,/^[\r\n\t ]+/))&&go[0],"application/xhtml+xml"===Fi&&(Kt='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Kt+"</body></html>");var Fl=gt?gt.createHTML(Kt):Kt;if(AD===E_)try{Mo=(new Re).parseFromString(Fl,Fi)}catch{}if(!Mo||!Mo.documentElement){Mo=nn.createDocument(AD,"template",null);try{Mo.documentElement.innerHTML=mi?"":Fl}catch{}}var qc=Mo.body||Mo.documentElement;return Kt&&bd&&qc.insertBefore(R.createTextNode(bd),qc.childNodes[0]||null),AD===E_?kn.call(Mo,qu?"html":"body")[0]:qu?Mo.documentElement:qc}function DE(Kt){return _n.call(Kt.ownerDocument||Kt,Kt,he.SHOW_ELEMENT|he.SHOW_COMMENT|he.SHOW_TEXT,null,!1)}function cI(Kt){return"object"===A_(ee)?Kt instanceof ee:Kt&&"object"===A_(Kt)&&"number"==typeof Kt.nodeType&&"string"==typeof Kt.nodeName}function MS(Kt,Mo,go){Ar[Kt]&&CS(Ar[Kt],function(bd){bd.call(p,Mo,go,Px)})}function AE(Kt){var Mo;if(MS("beforeSanitizeElements",Kt,null),Kt instanceof Le&&("string"!=typeof Kt.nodeName||"string"!=typeof Kt.textContent||"function"!=typeof Kt.removeChild||!(Kt.attributes instanceof Te)||"function"!=typeof Kt.removeAttribute||"function"!=typeof Kt.setAttribute||"string"!=typeof Kt.namespaceURI||"function"!=typeof Kt.insertBefore)||Nf(/[\u0080-\uFFFF]/,Kt.nodeName))return wk(Kt),1;var go=Uo(Kt.nodeName);if(MS("uponSanitizeElement",Kt,{tagName:go,allowedTags:_a}),Kt.hasChildNodes()&&!cI(Kt.firstElementChild)&&(!cI(Kt.content)||!cI(Kt.content.firstElementChild))&&Nf(/<[/\w]/g,Kt.innerHTML)&&Nf(/<[/\w]/g,Kt.textContent)||"select"===go&&Nf(/<template/i,Kt.innerHTML))return wk(Kt),1;if(_a[go]&&!co[go])return Kt instanceof ue&&!function(vg){var gl=at(vg);gl&&gl.tagName||(gl={namespaceURI:E_,tagName:"template"});var zp=EM(vg.tagName),Cm=EM(gl.tagName);return vg.namespaceURI===uI?gl.namespaceURI===E_?"svg"===zp:gl.namespaceURI===LM?"svg"===zp&&("annotation-xml"===Cm||ID[Cm]):Boolean(RO[zp]):vg.namespaceURI===LM?gl.namespaceURI===E_?"math"===zp:gl.namespaceURI===uI?"math"===zp&&lI[Cm]:Boolean(CE[zp]):vg.namespaceURI===E_&&(gl.namespaceURI!==uI||lI[Cm])&&(gl.namespaceURI!==LM||ID[Cm])&&!CE[zp]&&(PE[zp]||!RO[zp])}(Kt)||("noscript"===go||"noembed"===go)&&Nf(/<\/no(script|embed)/i,Kt.innerHTML)?(wk(Kt),1):(Nu&&3===Kt.nodeType&&(Mo=Ix(Mo=Kt.textContent,Ci," "),Mo=Ix(Mo,Ji," "),Kt.textContent!==Mo&&(Lp(p.removed,{element:Kt.cloneNode()}),Kt.textContent=Mo)),MS("afterSanitizeElements",Kt,null),0);if(co[go]||!EE(go)||!(Qn.tagNameCheck instanceof RegExp&&Nf(Qn.tagNameCheck,go)||Qn.tagNameCheck instanceof Function&&Qn.tagNameCheck(go))){if(Fo&&!cf[go]){var bd=at(Kt)||Kt.parentNode,Fl=Ue(Kt)||Kt.childNodes;if(Fl&&bd)for(var qc=Fl.length-1;0<=qc;--qc)bd.insertBefore(Xe(Fl[qc],!0),De(Kt))}return wk(Kt),1}}function IE(Kt,Mo,go){if(Bp&&("id"===Mo||"name"===Mo)&&(go in R||go in NO))return!1;if((!La||Vi[Mo]||!Nf(oi,Mo))&&(!ia||!Nf(xa,Mo)))if(!Ds[Mo]||Vi[Mo]){if(!(EE(Kt)&&(Qn.tagNameCheck instanceof RegExp&&Nf(Qn.tagNameCheck,Kt)||Qn.tagNameCheck instanceof Function&&Qn.tagNameCheck(Kt))&&(Qn.attributeNameCheck instanceof RegExp&&Nf(Qn.attributeNameCheck,Mo)||Qn.attributeNameCheck instanceof Function&&Qn.attributeNameCheck(Mo))||"is"===Mo&&Qn.allowCustomizedBuiltInElements&&(Qn.tagNameCheck instanceof RegExp&&Nf(Qn.tagNameCheck,go)||Qn.tagNameCheck instanceof Function&&Qn.tagNameCheck(go))))return!1}else if(!TS[Mo]&&!Nf(uf,Ix(go,yd,""))&&("src"!==Mo&&"xlink:href"!==Mo&&"href"!==Mo||"script"===Kt||0!==PM(go,"data:")||!I_[Kt])&&(!lf||Nf(dl,Ix(go,yd,"")))&&go)return!1;return!0}function OE(Kt){MS("beforeSanitizeAttributes",Kt,null);var Mo=Kt.attributes;if(Mo){for(var go={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Ds},bd=Mo.length;bd--;){var Fl,qc=(Fl=Mo[bd]).name,vg=Fl.namespaceURI,gl="value"===qc?Fl.value:PO(Fl.value),zp=Uo(qc);if(go.attrName=zp,go.attrValue=gl,go.keepAttr=!0,go.forceKeepAttr=void 0,MS("uponSanitizeAttribute",Kt,go),gl=go.attrValue,!go.forceKeepAttr&&(TE(qc,Kt),go.keepAttr))if(Nf(/\/>/i,gl))TE(qc,Kt);else if(Nu&&(gl=Ix(gl,Ci," "),gl=Ix(gl,Ji," ")),IE(Uo(Kt.nodeName),zp,gl))try{vg?Kt.setAttributeNS(vg,qc,gl):Kt.setAttribute(qc,gl),_k(p.removed)}catch{}}MS("afterSanitizeAttributes",Kt,null)}}Oi(CE,f);var EE=function(Kt){return 0<Kt.indexOf("-")};return p.sanitize=function(Kt,Mo){var go,bd,Fl,qc,vg;if("string"!=typeof(Kt=(mi=!Kt)?"\x3c!--\x3e":Kt)&&!cI(Kt)){if("function"!=typeof Kt.toString)throw kS("toString is not a function");if("string"!=typeof(Kt=Kt.toString()))throw kS("dirty is not a string, aborting")}if(!p.isSupported){if("object"===A_(_.toStaticHTML)||"function"==typeof _.toStaticHTML){if("string"==typeof Kt)return _.toStaticHTML(Kt);if(cI(Kt))return _.toStaticHTML(Kt.outerHTML)}return Kt}if(jc||Jo(Mo),p.removed=[],Rf="string"!=typeof Kt&&Rf){if(Kt.nodeName){var gl=Uo(Kt.nodeName);if(!_a[gl]||co[gl])throw kS("root node is forbidden and cannot be sanitized in-place")}}else if(Kt instanceof ee)1===(bd=(go=ME("\x3c!----\x3e")).ownerDocument.importNode(Kt,!0)).nodeType&&"BODY"===bd.nodeName||"HTML"===bd.nodeName?go=bd:go.appendChild(bd);else{if(!fl&&!Nu&&!qu&&-1===Kt.indexOf("<"))return gt&&Xu?gt.createHTML(Kt):Kt;if(!(go=ME(Kt)))return fl?null:Xu?Xt:""}go&&zl&&wk(go.firstChild);for(var zp=DE(Rf?Kt:go);Fl=zp.nextNode();)3===Fl.nodeType&&Fl===qc||AE(Fl)||(Fl.content instanceof H&&function NE(kE){var OD,RE=DE(kE);for(MS("beforeSanitizeShadowDOM",kE,null);OD=RE.nextNode();)MS("uponSanitizeShadowNode",OD,null),AE(OD)||(OD.content instanceof H&&NE(OD.content),OE(OD));MS("afterSanitizeShadowDOM",kE,null)}(Fl.content),OE(Fl),qc=Fl);if(qc=null,Rf)return Kt;if(fl){if(hl)for(vg=an.call(go.ownerDocument);go.firstChild;)vg.appendChild(go.firstChild);else vg=go;return Ds.shadowroot?Vn.call(I,vg,!0):vg}var Cm=qu?go.outerHTML:go.innerHTML;return qu&&_a["!doctype"]&&go.ownerDocument&&go.ownerDocument.doctype&&go.ownerDocument.doctype.name&&Nf(me,go.ownerDocument.doctype.name)&&(Cm="<!DOCTYPE "+go.ownerDocument.doctype.name+">\n"+Cm),Nu&&(Cm=Ix(Cm,Ci," "),Cm=Ix(Cm,Ji," ")),gt&&Xu?gt.createHTML(Cm):Cm},p.setConfig=function(Kt){Jo(Kt),jc=!0},p.clearConfig=function(){Px=null,jc=!1},p.isValidAttribute=function(Kt,Mo,go){return Px||Jo({}),IE(Uo(Kt),Uo(Mo),go)},p.addHook=function(Kt,Mo){"function"==typeof Mo&&(Ar[Kt]=Ar[Kt]||[],Lp(Ar[Kt],Mo))},p.removeHook=function(Kt){if(Ar[Kt])return _k(Ar[Kt])},p.removeHooks=function(Kt){Ar[Kt]&&(Ar[Kt]=[])},p.removeAllHooks=function(){Ar={}},p}(),Ia=vw.deviceType.isTouch(),Sh=function(s,d){function p(_,T){return mn(_,function(I,R){var W;W=function(ee,ue){T(s(),ee,R.event,I)},bh.getState(I).get().each(function(ee){W(ee)})})}return le(le([],Cn(p,d),!0),[p(bp,function(_,T,I){T.onAction(_,{name:I.name})})],!1)},sf=function(s,d,p){function _(T,I){return mn(T,function(R,H){var ee;ee=function(ue,he){I(s(),ue,H.event,R)},bh.getState(R).get().each(function(ue){ee(ue.internalDialog)})})}return le(le([],Cn(_,d),!0),[_(sc,function(T,I){return I.onSubmit(T)}),_(ef,function(T,I,R){I.onChange(T,{name:R.name})}),_(bp,function(T,I,R,H){function W(){return Rr.focusIn(H)}function ee(we){return is(we,"disabled")||Fa(we,"aria-disabled").exists(function(Te){return"true"===Te})}var ue=sa(H.element),he=Vd(ue);I.onAction(T,{name:R.name,value:R.value}),Vd(ue).fold(W,function(we){ee(we)||he.exists(function(Te){return Fn(we,Te)&&ee(Te)})?W():p().toOptional().filter(function(Te){return!Fn(Te.element,we)}).each(W)})}),_(my,function(T,I,R){I.onTabChange(T,{newTabName:R.name,oldTabName:R.oldName})}),Cl(function(T){var I=s();er.setValue(T,I.getData())})],!1)},Ox=dr,Yy=tinymce.util.Tools.resolve("tinymce.util.URI"),NM=["insertContent","setContent","execCommand","close","block","unblock"];Ie.add("silver",function(s){var d=NA(s),p=d.uiMothership,_=d.backstage,T=d.renderUI,I=d.getUi;return function o2(s,d){function p(){return R.get().isSome()}function _(){p()&&Ui.hide(W)}var T,I,R=Ai(),H=wr(!1),W=so(Ui.sketch({dom:{tag:"div",classes:["tox-autocompleter"]},components:[],fireDismissalEventInstead:{},inlineBehaviours:Ln([Kn("dismissAutocompleter",[mn(Sg(),function(){return ee()})])]),lazySink:d.getSink})),ee=function(){var Le;p()&&(Le=R.get().map(function(Re){return Re.element}),rw(Le.getOr(ct.fromDom(s.selection.getNode()))).each(Ku),_(),R.clear(),H.set(!1))},ue=un(function(){return Le=On(Be=yn(s.ui.registry.getAll().popups,function(De){return Zi("Autocompleter",Bk,De).fold(function(Ue){throw new Error(wu(Ue))},U)}),function(De){return De.ch}),Re={},ur(Le,function(De){Re[De]={}}),He=pi(Re),Xe=tr(Be),{dataset:Be,triggerChars:He,lookupByChar:function(De){return ln(Xe,function(Ue){return Ue.ch===De})}};var Le,Re,Be,He,Xe}),he=function(Le){var Re=Le;R.get().map(function(Be){return qS(s.dom,s.selection.getRng(),Be.triggerChar).bind(function(He){return Rb(s,ue,He,Re)})}).getOrThunk(function(){return Be=s,Xe=(He=ue)(),De=Be.selection.getRng(),Ue=Be.dom,at=De,Gt(Xe.triggerChars,function(gt){return qS(Ue,at,gt)}).bind(function(gt){return Rb(Be,He,gt)});var Be,He,Xe,De,Ue,at}).fold(ee,function(Be){var He,Xe=Be.context;p()||(He=function gp(s,d){return rw(ct.fromDom(s.selection.getNode())).getOrThunk(function(){var p,_,T=ct.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',s.getDoc());return ta(T,ct.fromDom(d.extractContents())),d.insertNode(T.dom),Er(T).each(function(I){return I.dom.normalize()}),p=t1,(_=function(I){for(var R=jo(I),H=R.length-1;0<=H;H--){var W=R[H];if(p(W))return X.some(W);var ee=_(W);if(ee.isSome())return ee}return X.none()})(T).map(function(I){var R;s.selection.setCursorLocation(I.dom,"img"===tn(R=I)?1:Km(R).fold(function(){return jo(R).length},function(H){return H.length}))}),T})}(s,Xe.range),R.set({triggerChar:Xe.triggerChar,element:He,matchLength:Xe.text.length}),H.set(!1)),Be.lookupData.then(function(De){R.get().map(function(Ue){var at,gt,Xt,Lt,nn=Be.context;Ue.triggerChar===nn.triggerChar&&(gt=nn.triggerChar,Lt=Gt(Xt=De,function(_n){return X.from(_n.columns)}).getOr(1),0<(at=Or(Xt,function(_n){return function r2(s,d,p,_,T,I,R){var H=1===_,W=!H||og(s);return Eo(Ot(s,function(ee){switch(ee.type){case"separator":return Zi("Autocompleter.Separator",KS,ee).fold(ig,function(ue){return X.some(gy(ue))});case"cardmenuitem":return Zi("cardmenuitem",Hb,ee).fold(ig,function(ue){return X.some((he=de(de({},ue),{onAction:function(Be){ue.onAction(Be),p(ue.value,ue.meta)}}),we=T,Te=I,Le={itemBehaviours:Qk(ue.meta,I),cardText:{matchText:d,highlightOn:R}},Re={dom:Jk(he.label),optComponents:[X.some({dom:{tag:"div",classes:[aC,Uk]},components:V1(he.items,Le)})]},yp({data:Gv(de({text:X.none()},he)),disabled:he.disabled,getApi:function(Be){return{isDisabled:function(){return xr.isDisabled(Be)},setDisabled:function(He){xr.set(Be,He),ur(Qs(Be.element,"*"),function(Xe){Be.getSystem().getByDom(Xe).each(function(De){De.hasConfigured(xr)&&xr.set(De,He)})})}}},onAction:he.onAction,onSetup:he.onSetup,triggersSubmenu:!1,itemBehaviours:X.from(Le.itemBehaviours).getOr([])},Re,we,Te.providers)));var he,we,Te,Le,Re});default:return Zi("Autocompleter.Item",iw,ee).fold(ig,function(ue){return X.some(function(he,we,Te,Le,Re,Be,He,Xe){void 0===Xe&&(Xe=!0);var De=N1({presets:"normal",textContent:X.none(),htmlContent:Te?he.text.map(function(Ue){return gw(Ue,we)}):X.none(),ariaLabel:he.text,iconContent:he.icon,shortcutContent:X.none(),checkMark:X.none(),caret:X.none(),value:he.value},He.providers,Xe,he.icon);return yp({data:Gv(he),disabled:he.disabled,getApi:F({}),onAction:function(Ue){return Re(he.value,he.meta)},onSetup:F(j),triggersSubmenu:!1,itemBehaviours:Qk(he.meta,He)},De,Be,He.providers)}(ue,d,H,0,p,T,I,W))})}}))}(_n.items,_n.matchText,function(an,kn){var Vn=s.selection.getRng();qS(s.dom,Vn,gt).fold(function(){return console.error("Lost context. Cursor probably moved")},function(sr){var Ar=sr.range,lo={hide:function(){ee()},reload:function(Jo){_(),he(Jo)}};H.set(!0),_n.onAction(lo,Ar,an,kn),H.set(!1)})},Lt,ag.BUBBLE_TO_SANDBOX,d,_n.highlightOn)})).length?function(_n,an,kn,Vn){_n.matchLength=an.text.length;var sr,Ar,lo,Jo,gi,Fi,Uo=Gt(kn,function(mi){return X.from(mi.columns)}).getOr(1);Ui.showAt(W,sh.sketch((sr=tC("autocompleter-value",!0,Vn,Uo,"normal"),Ar=Uo,Jo=((lo=Sw.ContentFocus)===Sw.ContentFocus?Ec:np)(),gi=ww(Ar,"normal"),Fi=M1("normal"),{dom:sr.dom,components:sr.components,items:sr.items,value:sr.value,markers:{selectedItem:Fi.selectedItem,item:Fi.item},movement:gi,fakeFocus:lo===Sw.ContentFocus,focusManager:Jo,menuBehaviours:cw("auto"!==Ar?[]:[Xi(function(mi,Ci){Bb(mi,4,Fi.item).each(function(Ji){Rr.setGridSize(mi,Ji.numRows,Ji.numColumns)})})])})),{anchor:{type:"node",root:ct.fromDom(s.getBody()),node:X.from(_n.element)}}),Ui.getContent(W).each(ko.highlightFirst)}(Ue,nn,De,at):(10<=nn.text.length-Ue.matchLength?ee:_)())})})})},we={onKeypress:tw(function(Le){27!==Le.which&&he()},50),cancelIfNecessary:ee,isMenuOpen:function(){return Ui.isOpen(W)},isActive:p,isProcessingAction:H.get,getView:function(){return Ui.getContent(W)}};function Te(Le,Re){kr(Le,nd(),{raw:Re})}!1===s.hasPlugin("rtc")&&((I=s).on("keypress compositionend",(T=we).onKeypress.throttle),I.on("remove",T.onKeypress.cancel),I.on("keydown",function(Le){function Re(){return T.getView().bind(ko.getHighlighted)}8===Le.which&&T.onKeypress.throttle(Le),T.isActive()&&(27===Le.which&&T.cancelIfNecessary(),T.isMenuOpen()?13===Le.which?(Re().each(Md),Le.preventDefault()):40===Le.which?(Re().fold(function(){T.getView().each(ko.highlightFirst)},function(Be){Te(Be,Le)}),Le.preventDefault(),Le.stopImmediatePropagation()):37!==Le.which&&38!==Le.which&&39!==Le.which||Re().each(function(Be){Te(Be,Le),Le.preventDefault(),Le.stopImmediatePropagation()}):13!==Le.which&&38!==Le.which&&40!==Le.which||T.cancelIfNecessary())}),I.on("NodeChange",function(Le){T.isActive()&&!T.isProcessingAction()&&rw(ct.fromDom(Le.element)).isNone()&&T.cancelIfNecessary()}))}(s,_.shared),{renderUI:T,getWindowManagerImpl:F(ga({editor:s,backstage:_})),getNotificationManagerImpl:function(){return R=s,H=p,W=_.shared,{open:function(ee,ue){function he(){ue(),Ui.hide(Le)}var we=!ee.closeButton&&ee.timeout&&(0<ee.timeout||ee.timeout<0),Te=so(ew.sketch({text:ee.text,level:ki(["success","error","warning","warn","info"],ee.type)?ee.type:void 0,progress:!0===ee.progressBar,icon:X.from(ee.icon),closeButton:!we,onAction:he,iconProvider:W.providers.icons,translationProvider:W.providers.translate})),Le=so(Ui.sketch(de({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:W.getSink,fireDismissalEventInstead:{}},W.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));function Re(){var Be=Lu(ct.fromDom(R.getContentAreaContainer())),He=xu(),Xe=Hu(He.x,Be.x,Be.right),De=Hu(He.y,Be.y,Be.bottom),Ue=Math.max(Be.right,He.right),at=Math.max(Be.bottom,He.bottom);return X.some(Xs(Xe,De,Ue-Xe,at-De))}return H.add(Le),0<ee.timeout&&hp.setTimeout(function(){he()},ee.timeout),{close:he,moveTo:function(Be,He){Ui.showAt(Le,Ql(Te),{anchor:{type:"makeshift",x:Be,y:He}})},moveRel:function(Be,He){var Xe,De,Ue,at=Ql(Te),gt={maxHeightFunction:nr()};"banner"!==He&&xe(Be)?(Xe=function(){switch(He){case"bc-bc":return ty;case"tc-tc":return Kd;case"tc-bc":return Ol;default:return Go}}(),De={type:"node",root:$u(),node:X.some(ct.fromDom(Be)),overrides:gt,layouts:{onRtl:function(){return[Xe]},onLtr:function(){return[Xe]}}},Ui.showWithinBounds(Le,at,{anchor:De},Re)):(Ue=de(de({},W.anchors.banner()),{overrides:gt}),Ui.showWithinBounds(Le,at,{anchor:Ue},Re))},text:function(Be){ew.updateText(Te,Be)},settings:ee,getEl:function(){return Te.element.dom},progressBar:{value:function(Be){ew.updateProgress(Te,Be)}}}},close:function(ee){ee.close()},reposition:function(ee){0<ee.length&&ur(ee,function(ue,he){0===he?ue.moveRel(null,"banner"):ue.moveRel(ee[he-1].getEl(),"bc-tc")})},getArgs:function(ee){return ee.settings}};var R,H,W},ui:I()}})}(),function(){"use strict";function pt(Vt){return function(wn){return Dt=typeof(rt=wn),(null===rt?"null":"object"==Dt&&(Array.prototype.isPrototypeOf(rt)||rt.constructor&&"Array"===rt.constructor.name)?"array":"object"==Dt&&(String.prototype.isPrototypeOf(rt)||rt.constructor&&"String"===rt.constructor.name)?"string":Dt)===Vt;var rt,Dt}}function hn(Vt){return function(wn){return typeof wn===Vt}}function gr(){}function Ze(Vt){return function(){return Vt}}function je(Vt){return Vt}function j(Vt,wn){return Vt===wn}function ye(){return Ae}var U=tinymce.util.Tools.resolve("tinymce.PluginManager"),se=tinymce.util.Tools.resolve("tinymce.util.VK"),$=pt("string"),Z=pt("array"),ne=hn("boolean"),Q=hn("function"),ie=Ze(!1),xe=Ze(!null),Ae={fold:function(Vt,wn){return Vt()},isSome:ie,isNone:xe,getOr:je,getOrThunk:Ne,getOrDie:function(Vt){throw new Error(Vt||"error: getOrDie called on none.")},getOrNull:Ze(null),getOrUndefined:Ze(void 0),or:je,orThunk:Ne,map:ye,each:gr,bind:ye,exists:ie,forall:xe,filter:function(){return Ae},toArray:function(){return[]},toString:Ze("none()")};function Ne(Vt){return Vt()}function nt(Vt){for(var wn=[],rt=0,Dt=Vt.length;rt<Dt;++rt){if(!Z(Vt[rt]))throw new Error("Arr.flatten item "+rt+" was not an array, input: "+Vt);fr.apply(wn,Vt[rt])}return wn}function Wt(Vt,wn){for(var rt=0;rt<Vt.length;rt++){var Dt=wn(Vt[rt],rt);if(Dt.isSome())return Dt}return sn.none()}function qe(Vt,wn,rt){return void 0===rt&&(rt=j),Vt.exists(function(Dt){return rt(Dt,wn)})}function $e(Vt,wn){return Vt?sn.some(wn):sn.none()}function Ie(Vt){var wn=Vt.getParam("link_assume_external_targets",!1);return ne(wn)&&wn?1:!$(wn)||"http"!==wn&&"https"!==wn?0:wn}function de(Vt){return Vt.getParam("default_link_target")}function Fe(Vt){return Vt.getParam("target_list",!0)}function le(Vt){return Vt.getParam("rel_list",[],"array")}function Ge(Vt){return Vt.getParam("allow_unsafe_link_target",!1,"boolean")}function Qe(Vt){return $(Vt.value)?Vt.value:""}function ht(Vt){return void 0===Vt&&(Vt=Qe),function(wn){return sn.from(wn).map(function(rt){return li(rt,Vt)})}}function Rt(Vt,wn){return qi.call(Vt,wn)}function pn(Vt){return Vt&&"a"===Vt.nodeName.toLowerCase()}function en(Vt){return pn(Vt)&&!!ps(Vt)}function Ot(Vt,wn){if(Vt.collapsed)return[];for(var rt=Vt.cloneContents(),Dt=new za(rt.firstChild,rt),ct=[],tn=rt.firstChild;wn(tn)&&ct.push(tn),tn=Dt.next(););return ct}function Gn(Vt){return/^\w+:/i.test(Vt)}function ln(Vt,wn){function rt(un){return un.filter(function(ar){return-1===Eo.inArray(ct,ar)})}var Dt,ct=["noopener"],tn=Vt?Vt.split(/\s+/):[],qt=wn?0<(Dt=rt(Dt=tn)).length?Dt.concat(ct):ct:rt(tn);return 0<qt.length?Eo.trim(qt.sort().join(" ")):""}function Tn(Vt,wn){return wn=wn||Vt.selection.getNode(),X(wn)?Vt.dom.select("a[href]",wn)[0]:Vt.dom.getParent(wn,"a[href]")}function to(Vt,wn){return(wn?wn.innerText||wn.textContent:Vt.getContent({format:"text"})).replace(/\uFEFF/g,"")}function wo(Vt){return 0<Eo.grep(Vt,en).length}function Tr(Vt){var wn=Vt.schema.getTextInlineElements();return 0===Ot(Vt.selection.getRng(),function(rt){return 1===rt.nodeType&&!pn(rt)&&!Rt(wn,rt.nodeName.toLowerCase())}).length}function Or(Vt,wn,rt){var Dt,ct,tn,qt,ar,qn,Yn,or,$n,Sn=(Dt=Vt,ct=rt.href,vo(vo({},rt),{href:ma.isDomSafe(ct,"a",Dt.settings)?ct:""}));Vt.hasPlugin("rtc",!0)?Vt.execCommand("createlink",!1,(ar=Sn.href,qn=Sn.rel,Yn=Sn.target,or=Sn.text,$n=Sn.title,function Jt(Vt,wn,rt,Dt){(function(ct){for(var tn=tu(ct),qt=0,un=tn.length;qt<un;qt++){var ar=tn[qt];(wn(qn=ct[ar],Yn=ar)?rt:Dt)(qn,Yn)}var qn,Yn})(Vt)}({class:Sn.class.getOrNull(),href:ar,rel:qn.getOrNull(),target:Yn.getOrNull(),text:or.getOrNull(),title:$n.getOrNull()},function(Fn,Bt){return!1===function(Vt){return null===Vt}(Fn)},(tn=qt={},function(Fn,Bt){tn[Bt]=Fn}),gr),qt)):function Gr(Vt,wn,rt){var Dt,ct,tn,qt,un,ar,qn,Yn=Vt.selection.getNode(),or=Tn(Vt,Yn),$n=(ct=Vt,tn=function Ee(Vt,wn,rt){return function(Dt){for(var tn=0,qt=Dt.length;tn<qt;tn++)rt=wn(rt,Dt[tn],tn)}(Vt),rt}(["title","rel","class","target"],function(Sn,Fn){return Dt[Fn].each(function(Bt){Sn[Fn]=0<Bt.length?Bt:null}),Sn},{href:(Dt=rt).href}),qn=vo({},tn),0<le(ct).length||!1!==Ge(ct)||(qt=ln(qn.rel,"_blank"===qn.target),qn.rel=qt||null),sn.from(qn.target).isNone()&&!1===Fe(ct)&&(qn.target=de(ct)),qn.href=(un=qn.href,"http"!==(ar=Ie(ct))&&"https"!==ar||Gn(un)?un:ar+"://"+un),qn);Vt.undoManager.transact(function(){var Sn,Fn,Bt,Hr,Wr,Br,mo;rt.href===wn.href&&wn.attach(),or?(Vt.focus(),Wr=Vt,Br=or,mo=$n,rt.text.each(function(jo){Rt(Br,"innerText")?Br.innerText=jo:Br.textContent=jo}),Wr.dom.setAttribs(Br,mo),Wr.selection.select(Br)):(Sn=Vt,Bt=rt.text,Hr=$n,X(Fn=Yn)?$a(Sn,Fn,Hr):Bt.fold(function(){Sn.execCommand("mceInsertLink",!1,Hr)},function(jo){Sn.insertContent(Sn.dom.createHTML("a",Hr,Sn.dom.encode(jo)))}))})}(Vt,wn,Sn)}function xt(Vt){var wn;Vt.hasPlugin("rtc",!0)?Vt.execCommand("unlink"):(wn=Vt).undoManager.transact(function(){var rt,Dt,ct,tn,qt,un,ar,qn=wn.selection.getNode();X(qn)?os(wn,qn):(Dt=(rt=wn).dom,tn=(ct=rt.selection).getBookmark(),qt=ct.getRng().cloneRange(),un=Dt.getParent(qt.startContainer,"a[href]",rt.getBody()),ar=Dt.getParent(qt.endContainer,"a[href]",rt.getBody()),un&&qt.setStartBefore(un),ar&&qt.setEndAfter(ar),ct.setRng(qt),rt.execCommand("unlink"),ct.moveToBookmark(tn)),wn.focus()})}function rr(Vt){var wn=Vt.href;return 0<wn.indexOf("@")&&-1===wn.indexOf("/")&&-1===wn.indexOf("mailto:")?sn.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function(rt){return vo(vo({},rt),{href:"mailto:"+wn})}}):sn.none()}function ai(Vt,wn,rt){var Dt=Vt.getAttrib(wn,rt);return null!==Dt&&0<Dt.length?sn.some(Dt):sn.none()}function Mr(Vt,wn){return Vt.dom.getParent(wn,"a[href]")}function Wo(Vt){return Mr(Vt,Vt.selection.getStart())}function Yi(Vt,wn){var rt,Dt;wn&&(rt=ps(wn),/^#/.test(rt)?(Dt=Vt.$(rt)).length&&Vt.selection.scrollIntoView(Dt[0],!0):function(ct){var tn=document.createElement("a");tn.target="_blank",tn.href=ct,tn.rel="noreferrer noopener";var qt,un,ar=document.createEvent("MouseEvents");ar.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),qt=tn,un=ar,document.body.appendChild(qt),qt.dispatchEvent(un),document.body.removeChild(qt)}(wn.href))}function Pi(Vt){return function(){!function Qi(Vt){var wn,rt=Tn(wn=Vt);ir(wn,rt).then(function(Dt){var ct,tn,qt,un,qn=qt=Vt,Yn=(ct=un=Dt).anchor.text.map(function(){return{name:"text",type:"input",label:"Text to display"}}).toArray(),or=ct.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],$n=sn.from(de(qn)),Sn=ct.anchor,Fn={url:{value:tn=Sn.url.getOr(""),meta:{original:{value:tn}}},text:Sn.text.getOr(""),title:Sn.title.getOr(""),anchor:tn,link:tn,rel:Sn.rel.getOr(""),target:Sn.target.or($n).getOr(""),linkClass:Sn.linkClass.getOr("")},Bt=ct.catalogs,Hr=ki(Fn,Bt);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:nt([[{name:"url",type:"urlinput",filetype:"file",label:"URL"}],Yn,or,function(Wr){for(var Br=[],Er=function(jo){Br.push(jo)},mo=0;mo<Wr.length;mo++)Wr[mo].each(Er);return Br}([Bt.anchor.map(di.createUi("anchor","Anchors")),Bt.rels.map(di.createUi("rel","Rel")),Bt.targets.map(di.createUi("target","Open link in...")),Bt.link.map(di.createUi("link","Link list")),Bt.classes.map(di.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:Fn,onChange:function(Wr,Br){Hr.onChange(Wr.getData,{name:Br.name}).each(function(mo){Wr.setData(mo)})},onSubmit:function(Wr){var Br=Wr.getData();if(!Br.url.value)return xt(qt),void Wr.close();function Er(Xr){return sn.from(Br[Xr]).filter(function(As){return!qe(un.anchor[Xr],As)})}var mo={href:Br.url.value,text:Er("text"),target:Er("target"),rel:Er("rel"),class:Er("linkClass"),title:Er("title")},jo={href:Br.url.value,attach:void 0!==Br.url.meta&&Br.url.meta.attach?Br.url.meta.attach:gr};pi(qt,mo).then(function(Xr){Or(qt,jo,Xr)}),Wr.close()}}}).then(function(Dt){Vt.windowManager.open(Dt)})}(Vt)}}function Ba(Vt){return function(){Yi(Vt,Wo(Vt))}}function Gt(Vt,wn){return Vt.on("NodeChange",wn),function(){return Vt.off("NodeChange",wn)}}function jt(Vt){return function(wn){function rt(){return wn.setActive(!Vt.mode.isReadOnly()&&null!==Tn(Vt,Vt.selection.getNode()))}return rt(),Gt(Vt,rt)}}function yn(Vt){return function(wn){function rt(){return wn.setDisabled(null===Tn(Vt,Vt.selection.getNode()))}return rt(),Gt(Vt,rt)}}function On(Vt){return function(wn){function rt(ct){return wo(ct)||0<Ot(Vt.selection.getRng(),en).length}var Dt=Vt.dom.getParents(Vt.selection.getStart());return wn.setDisabled(!rt(Dt)),Gt(Vt,function(ct){return wn.setDisabled(!rt(ct.parents))})}}function cr(Vt){var wn=nt(function(rt,Dt){for(var ct=rt.length,tn=new Array(ct),qt=0;qt<ct;qt++)tn[qt]=Dt(rt[qt]);return tn}(Vt.dom.select("a:not([href])"),function(rt){var Dt=rt.name||rt.id;return Dt?[{text:Dt,value:"#"+Dt}]:[]}));return 0<wn.length?sn.some([{text:"None",value:""}].concat(wn)):sn.none()}var tr=function(Vt){function wn(){return ct}function rt(tn){return tn(Vt)}var Dt=Ze(Vt),ct={fold:function(tn,qt){return qt(Vt)},isSome:xe,isNone:ie,getOr:Dt,getOrThunk:Dt,getOrDie:Dt,getOrNull:Dt,getOrUndefined:Dt,or:wn,orThunk:wn,map:function(tn){return tr(tn(Vt))},each:function(tn){tn(Vt)},bind:rt,exists:rt,forall:rt,filter:function(tn){return tn(Vt)?ct:Ae},toArray:function(){return[Vt]},toString:function(){return"some("+Vt+")"}};return ct},sn={some:tr,none:ye,from:function(Vt){return null==Vt?Ae:tr(Vt)}},qr=Array.prototype.indexOf,fr=Array.prototype.push,Eo=tinymce.util.Tools.resolve("tinymce.util.Tools"),li=function(Vt,wn){var rt=[];return Eo.each(Vt,function(Dt){var ct,tn,qt,un=$((ct=Dt).text)?ct.text:$(ct.title)?ct.title:"";void 0!==Dt.menu?(tn=li(Dt.menu,wn),rt.push({text:un,items:tn})):(qt=wn(Dt),rt.push({text:un,value:qt}))}),rt},di={sanitize:function(Vt){return ht(Qe)(Vt)},sanitizeWith:ht,createUi:function(Vt,wn){return function(rt){return{name:Vt,type:"listbox",label:wn,items:rt}}},getValue:Qe},vo=function(){return(vo=Object.assign||function(Vt){for(var wn,rt=1,Dt=arguments.length;rt<Dt;rt++)for(var ct in wn=arguments[rt])Object.prototype.hasOwnProperty.call(wn,ct)&&(Vt[ct]=wn[ct]);return Vt}).apply(this,arguments)},tu=Object.keys,qi=Object.hasOwnProperty,za=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),ma=tinymce.util.Tools.resolve("tinymce.util.URI"),ps=function(Vt){return Vt.getAttribute("data-mce-href")||Vt.getAttribute("href")},X=function(Vt){return Vt&&"FIGURE"===Vt.nodeName&&/\bimage\b/i.test(Vt.className)},os=function(Vt,wn){var rt,Dt=Vt.dom.select("img",wn)[0];!Dt||(rt=Vt.dom.getParents(Dt,"a[href]",wn)[0])&&(rt.parentNode.insertBefore(Dt,rt),Vt.dom.remove(rt))},$a=function(Vt,wn,rt){var Dt,ct=Vt.dom.select("img",wn)[0];ct&&(Dt=Vt.dom.create("a",rt),ct.parentNode.insertBefore(Dt,ct),Dt.appendChild(ct))},nu=function(Vt,wn){return Wt(wn,function(rt){return Rt(Dt=rt,"items")&&null!=Dt.items?nu(Vt,rt.items):$e(rt.value===Vt,rt);var Dt})},ki=function(Vt,wn){var Dt={text:Vt.text,title:Vt.title};return{onChange:function(ct,tn){var un,ar,Yn,or,$n=tn.name;return"url"===$n?(un=ct(),Yn=$e(Dt.text.length<=0,sn.from((ar=un.url).meta.text).getOr(ar.value)),or=$e(Dt.title.length<=0,sn.from(un.url.meta.title).getOr("")),Yn.isSome()||or.isSome()?sn.some(vo(vo({},Yn.map(function(Sn){return{text:Sn}}).getOr({})),or.map(function(Sn){return{title:Sn}}).getOr({}))):sn.none()):-1<qr.call(["anchor","link"],$n)?function rt(ct,tn){var qt,un,Yn,or,$n=("link"===(qt=tn.name)?wn.link:"anchor"===qt?wn.anchor:sn.none()).getOr([]);return or=0<(un=Dt.text).length,void 0!==(Yn=ct[tn.name])?nu(Yn,$n).map(function(Sn){return{url:{value:Sn.value,meta:{text:or?un:Sn.text,attach:gr}},text:or?un:Sn.text}}):sn.none()}(ct(),tn):("text"!==$n&&"title"!==$n||(Dt[$n]=ct()[$n]),sn.none())}}},ur=tinymce.util.Tools.resolve("tinymce.util.Delay"),Yu=tinymce.util.Tools.resolve("tinymce.util.Promise"),pi=function(Vt,wn){return Wt([rr,(rt=Ie(Vt),Dt=Vt.getParam("link_default_protocol","http","string"),function(ct){var tn=ct.href;return 1===rt&&!Gn(tn)||0===rt&&/^\s*www(\.|\d\.)/i.test(tn)?sn.some({message:"The URL you entered seems to be an external link. Do you want to add the required "+Dt+":// prefix?",preprocess:function(qt){return vo(vo({},qt),{href:Dt+"://"+tn})}}):sn.none()})],function(ct){return ct(wn)}).fold(function(){return Yu.resolve(wn)},function(ct){return new Yu(function(tn){var qt=Vt,un=ct.message,qn=qt.selection.getRng();ur.setEditorTimeout(qt,function(){qt.windowManager.confirm(un,function(Yn){qt.selection.setRng(qn),function(Yn){tn(Yn?ct.preprocess(wn):wn)}(Yn)})})})});var rt,Dt},Do=tinymce.util.Tools.resolve("tinymce.util.XHR"),dc=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],ir=function(Vt,wn){return ct=(Dt=Vt).getParam("link_list"),new Yu(function(tn){$(ct)?Do.send({url:ct,success:function(qt){return tn(function(un){try{return sn.some(JSON.parse(un))}catch{return sn.none()}}(qt))},error:function(qt){return tn(sn.none())}}):Q(ct)?ct(function(qt){return tn(sn.some(qt))}):tn(sn.from(ct))}).then(function(tn){return tn.bind(di.sanitizeWith(rt)).map(function(qt){return 0<qt.length?[{text:"None",value:""}].concat(qt):qt})}).then(function(tn){var qt,un,ar,qn,Yn,or,$n,Sn,Fn,Bt,Hr=(un=wn,ar=(qt=Vt).dom,qn=Tr(qt)?sn.some(to(qt.selection,un)):sn.none(),Yn=un?sn.some(ar.getAttrib(un,"href")):sn.none(),or=un?sn.from(ar.getAttrib(un,"target")):sn.none(),$n=ai(ar,un,"rel"),Sn=ai(ar,un,"class"),{url:Yn,text:qn,title:ai(ar,un,"title"),target:or,rel:$n,linkClass:Sn});return{anchor:Hr,catalogs:{targets:(Bt=Fe(Vt),Z(Bt)?di.sanitize(Bt).orThunk(function(){return sn.some(dc)}):!1===Bt?sn.none():sn.some(dc)),rels:function(Wr,Br){var Er=le(Wr);if(0<Er.length){var mo=qe(Br,"_blank");return(!1===Ge(Wr)?di.sanitizeWith(function(jo){return ln(di.getValue(jo),mo)}):di.sanitize)(Er)}return sn.none()}(Vt,Hr.target),classes:0<(Fn=Vt.getParam("link_class_list",[],"array")).length?di.sanitize(Fn):sn.none(),anchor:cr(Vt),link:tn},optNode:sn.from(wn),flags:{titleEnabled:Vt.getParam("link_title",!0,"boolean")}}});function rt(tn){return Dt.convertURL(tn.value||tn.url,"href")}var Dt,ct};U.add("link",function(Vt){var wn,rt,Dt,ct,tn,qt,un;function ar(qn){var Yn=un.selection.getNode();return qn.setDisabled(!Tn(un,Yn)),gr}(wn=Vt).ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Pi(wn),onSetup:jt(wn)}),wn.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ba(wn),onSetup:yn(wn)}),wn.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function(){return xt(wn)},onSetup:On(wn)}),(rt=Vt).ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ba(rt),onSetup:yn(rt)}),rt.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onAction:Pi(rt)}),rt.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function(){return xt(rt)},onSetup:On(rt)}),(Dt=Vt).ui.registry.addContextMenu("link",{update:function(qn){return wo(Dt.dom.getParents(qn,"a"))?"link unlink openlink":"link"}}),(un=Vt).ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:jt(un)},label:"Link",predicate:function(qn){return!!Tn(un,qn)&&un.getParam("link_context_toolbar",!1,"boolean")},initValue:function(){var qn=Tn(un);return qn?ps(qn):""},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function(qn){var Yn=un.selection.getNode();return qn.setActive(!!Tn(un,Yn)),jt(un)(qn)},onAction:function(qn){var Yn=qn.getValue(),or=function($n){var Sn=Tn(un),Fn=Tr(un);if(Sn||!Fn)return sn.none();var Bt=to(un.selection,Sn);return sn.some(0<Bt.length?Bt:$n)}(Yn);Or(un,{href:Yn,attach:gr},{href:Yn,text:or,title:sn.none(),rel:sn.none(),target:sn.none(),class:sn.none()}),un.selection.collapse(!1),qn.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:ar,onAction:function(qn){xt(un),qn.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:ar,onAction:function(qn){Ba(un)(),qn.hide()}}]}),(qt=Vt).on("click",function(qn){var Yn=Mr(qt,qn.target);Yn&&se.metaKeyPressed(qn)&&(qn.preventDefault(),Yi(qt,Yn))}),qt.on("keydown",function(qn){var Yn=Wo(qt);Yn&&13===qn.keyCode&&!0===qn.altKey&&!1===qn.shiftKey&&!1===qn.ctrlKey&&!1===qn.metaKey&&(qn.preventDefault(),Yi(qt,Yn))}),(ct=Vt).addCommand("mceLink",function(){ct.getParam("link_quicklink",!1,"boolean")?ct.fire("contexttoolbar-show",{toolbarKey:"quicklink"}):Pi(ct)()}),(tn=Vt).addShortcut("Meta+K","",function(){tn.execCommand("mceLink")})})}(),function(){"use strict";function pt(rt){var Dt=rt;return{get:function(){return Dt},set:function(ct){Dt=ct}}}function hn(rt){return null!=rt}function gr(){}function Ze(rt){return function(){return rt}}function je(rt){return rt}function j(){return Z}var F=tinymce.util.Tools.resolve("tinymce.PluginManager"),U=function(rt){return ct=typeof(Dt=rt),"array"==(null===Dt?"null":"object"==ct&&(Array.prototype.isPrototypeOf(Dt)||Dt.constructor&&"Array"===Dt.constructor.name)?"array":"object"==ct&&(String.prototype.isPrototypeOf(Dt)||Dt.constructor&&"String"===Dt.constructor.name)?"string":ct);var Dt,ct},se=Ze(!1),$=Ze(!0),Z={fold:function(rt,Dt){return rt()},isSome:se,isNone:$,getOr:je,getOrThunk:oe,getOrDie:function(rt){throw new Error(rt||"error: getOrDie called on none.")},getOrNull:Ze(null),getOrUndefined:Ze(void 0),or:je,orThunk:oe,map:j,each:gr,bind:j,exists:se,forall:$,filter:function(){return Z},toArray:function(){return[]},toString:Ze("none()")};function oe(rt){return rt()}function ne(rt,Dt){for(var ct=0,tn=rt.length;ct<tn;ct++)if(Dt(rt[ct],ct))return!0;return!1}function Q(rt,Dt){for(var ct=rt.length,tn=new Array(ct),qt=0;qt<ct;qt++)tn[qt]=Dt(rt[qt],qt);return tn}function ie(rt,Dt){for(var ct=0,tn=rt.length;ct<tn;ct++)Dt(rt[ct],ct)}function xe(){var rt,Dt,ct=(rt=gr,Dt=pt(Eo.none()),{clear:function(){tn(),Dt.set(Eo.none())},isSet:function(){return Dt.get().isSome()},get:function(){return Dt.get()},set:function(qt){tn(),Dt.set(Eo.some(qt))}});function tn(){return Dt.get().each(rt)}return tu(tu({},ct),{on:function(qt){return ct.get().each(qt)}})}function Ae(rt,Dt,ct){return""===Dt||rt.length>=Dt.length&&rt.substr(ct,ct+Dt.length)===Dt}function Ne(rt,Dt){return rt.fire("PastePlainTextToggle",{state:Dt})}function Ee(rt){return rt.getParam("paste_data_images",!1)}function nt(rt){return rt.getParam("paste_retain_style_properties")}function Wt(rt){return rt.getParam("validate")}function qe(rt){return rt.getParam("paste_data_images",!1,"boolean")}function $e(rt){return X.explode(rt.getParam("images_file_types","jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp","string"))}function Ie(rt){return-1!==rt.indexOf($a)}function Fe(rt,Dt){return X.each(Dt,function(ct){rt=ct.constructor===RegExp?rt.replace(ct,""):rt.replace(ct[0],ct[1])}),rt}function le(rt){return Fe(rt,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function(Dt,ct,tn){return ct||tn?"\xa0":" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])}function Ge(rt){return/<font face="Times New Roman"|class="?Mso|style="[^"]*\bmso-|style='[^']*\bmso-|w:WordDocument/i.test(rt)||/class="OutlineElement/.test(rt)||/id="?docs\-internal\-guid\-/.test(rt)}function ht(rt,Dt){return{content:rt,cancelled:Dt}}function Rt(rt,Dt){return rt.insertContent(Dt,{merge:rt.getParam("paste_merge_formats",!0),paste:!0}),!0}function pn(rt){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(rt)}function en(rt,Dt,ct){return!(!1!==rt.selection.isCollapsed()||!pn(Dt)||(qt=Dt,un=ct,(tn=rt).undoManager.extra(function(){un(tn,qt)},function(){tn.execCommand("mceInsertLink",!1,qt)}),0));var tn,qt,un}function Ot(rt,Dt,ct){return tn=rt,!(!pn(qt=Dt)||!ne($e(tn),function(Yn){return Ae(or=qt.toLowerCase(),$n="."+Yn.toLowerCase(),or.length-$n.length);var or,$n})||(ar=Dt,qn=ct,(un=rt).undoManager.extra(function(){qn(un,ar)},function(){un.insertContent('<img src="'+ar+'">')}),0));var tn,qt,un,ar,qn}function Gn(rt){return"\n"===rt||"\r"===rt}function ln(rt,Dt,ct,tn){var qt,un,ar,qn,Yn=function Jt(rt,Dt,ct){var tn,qt,un,ar,qn,Yn,or,$n,Sn,Fn,Bt,Hr,Wr=Ge(Dt),Br=Wr?(qt=Dt,(tn=rt).getParam("paste_enable_default_filters",!0)?function Qe(rt,Dt){var ct,tn=nt(rt);tn&&(ct=X.makeMap(tn.split(/[, ]/))),Dt=Fe(Dt,[/<br class="?Apple-interchange-newline"?>/gi,/<b[^>]+id="?docs-internal-[^>]*>/gi,/<!--[\s\S]+?-->/gi,/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|img|meta|link|style|\w:\w+)(?=[\s\/>]))[^>]*>/gi,[/<(\/?)s>/gi,"<$1strike>"],[/&nbsp;/gi,"\xa0"],[/<span\s+style\s*=\s*"\s*mso-spacerun\s*:\s*yes\s*;?\s*"\s*>([\s\u00a0]*)<\/span>/gi,function(Yn,or){return 0<or.length?or.replace(/./," ").slice(Math.floor(or.length/2)).split("").join("\xa0"):""}]]);var qt=rt.getParam("paste_word_valid_elements","-strong/b,-em/i,-u,-span,-p,-ol,-ul,-li,-h1,-h2,-h3,-h4,-h5,-h6,-p/div,-a[href|name],sub,sup,strike,br,del,table[width],tr,td[colspan|rowspan|width],th[colspan|rowspan|width],thead,tfoot,tbody"),un=dc({valid_elements:qt,valid_children:"-li[p]"});X.each(un.elements,function(Yn){Yn.attributes.class||(Yn.attributes.class={},Yn.attributesOrder.push("class")),Yn.attributes.style||(Yn.attributes.style={},Yn.attributesOrder.push("style"))});var ar=Yu({},un);ar.addAttributeFilter("style",function(Yn){for(var or,$n=Yn.length;$n--;)(or=Yn[$n]).attr("style",function(Sn,Fn,Bt,Hr){var Wr={},Br=Sn.dom.parseStyle(Hr);return X.each(Br,function(Er,mo){switch(mo){case"mso-list":var jo=/\w+ \w+([0-9]+)/i.exec(Hr);jo&&(Bt._listLevel=parseInt(jo[1],10)),/Ignore/i.test(Er)&&Bt.firstChild&&(Bt._listIgnore=!0,Bt.firstChild._listIgnore=!0);break;case"horiz-align":mo="text-align";break;case"vert-align":mo="vertical-align";break;case"font-color":case"mso-foreground":mo="color";break;case"mso-background":case"mso-highlight":mo="background";break;case"font-weight":case"font-style":return void("normal"!==Er&&(Wr[mo]=Er));case"mso-element":if(/^(comment|comment-list)$/i.test(Er))return void Bt.remove()}0!==mo.indexOf("mso-comment")?0!==mo.indexOf("mso-")&&("all"===nt(Sn)||Fn&&Fn[mo])&&(Wr[mo]=Er):Bt.remove()}),/(bold)/i.test(Wr["font-weight"])&&(delete Wr["font-weight"],Bt.wrap(new Do("b",1))),/(italic)/i.test(Wr["font-style"])&&(delete Wr["font-style"],Bt.wrap(new Do("i",1))),Sn.dom.serializeStyle(Wr,Bt.name)||null}(rt,ct,or,or.attr("style"))),"span"===or.name&&or.parent&&!or.attributes.length&&or.unwrap()}),ar.addAttributeFilter("class",function(Yn){for(var or,$n,Sn=Yn.length;Sn--;)$n=(or=Yn[Sn]).attr("class"),/^(MsoCommentReference|MsoCommentText|msoDel)$/i.test($n)&&or.remove(),or.attr("class",null)}),ar.addNodeFilter("del",function(Yn){for(var or=Yn.length;or--;)Yn[or].remove()}),ar.addNodeFilter("a",function(Yn){for(var or,$n,Sn,Fn=Yn.length;Fn--;)$n=(or=Yn[Fn]).attr("href"),Sn=or.attr("name"),$n&&-1!==$n.indexOf("#_msocom_")?or.remove():!($n=$n&&0===$n.indexOf("file://")?($n=$n.split("#")[1])&&"#"+$n:$n)&&!Sn||Sn&&!/^_?(?:toc|edn|ftn)/i.test(Sn)?or.unwrap():or.attr({href:$n,name:Sn})});var qn=ar.parse(Dt);return rt.getParam("paste_convert_word_fake_lists",!0)&&function(Yn){for(var or,$n,Sn=1,Fn=function(yr){var ao="";if(3===yr.type)return yr.value;if(yr=yr.firstChild)for(;ao+=Fn(yr),yr=yr.next;);return ao},Bt=function(yr,ao){if(3===yr.type&&ao.test(yr.value))return yr.value=yr.value.replace(ao,""),!1;if(yr=yr.firstChild)do{if(!Bt(yr,ao))return!1}while(yr=yr.next);return!0},Hr=function(yr){if(yr._listIgnore)yr.remove();else if(yr=yr.firstChild)for(;Hr(yr),yr=yr.next;);},Wr=function(yr,ao,Ti){var js=yr._listLevel||Sn;(or=js!==Sn?js<Sn?or&&or.parent.parent:($n=or,null):or)&&or.name===ao?or.append(yr):($n=$n||or,or=new Do(ao,1),1<Ti&&or.attr("start",""+Ti),yr.wrap(or)),yr.name="li",Sn<js&&$n&&$n.lastChild.append(or),Sn=js,Hr(yr),Bt(yr,/^\u00a0+/),Bt(yr,/^\s*([\u2022\u00b7\u00a7\u25CF]|\w+\.)/),Bt(yr,/^\u00a0+/)},Br=[],Er=Yn.firstChild;null!=Er;)if(Br.push(Er),null!==(Er=Er.walk()))for(;void 0!==Er&&Er.parent!==Yn;)Er=Er.walk();for(var mo,jo,Xr,As=0;As<Br.length;As++)"p"===(Yn=Br[As]).name&&Yn.firstChild?(mo=Fn(Yn),/^[\s\u00a0]*[\u2022\u00b7\u00a7\u25CF]\s*/.test(mo)?Wr(Yn,"ul"):function(yr){var ao=!1;return yr=mo.replace(/^[\u00a0 ]+/,""),X.each([/^[IVXLMCD]+\.[ \u00a0]/,/^[ivxlmcd]+\.[ \u00a0]/,/^[a-z]{1,2}[\.\)][ \u00a0]/,/^[A-Z]{1,2}[\.\)][ \u00a0]/,/^[0-9]+\.[ \u00a0]/,/^[\u3007\u4e00\u4e8c\u4e09\u56db\u4e94\u516d\u4e03\u516b\u4e5d]+\.[ \u00a0]/,/^[\u58f1\u5f10\u53c2\u56db\u4f0d\u516d\u4e03\u516b\u4e5d\u62fe]+\.[ \u00a0]/],function(Ti){if(Ti.test(yr))return!(ao=!0)}),ao}(mo)?(Xr=1,Wr(Yn,"ol",Xr=(jo=/([0-9]+)\./.exec(mo))?parseInt(jo[1],10):Xr)):Yn._listLevel?Wr(Yn,"ul",1):or=null):($n=or,or=null)}(qn),pi({validate:Wt(rt)},un).serialize(qn)}(tn,qt):qt):Dt;return Bt=(un=rt).fire("PastePreProcess",{content:Br,internal:ar=ct,wordContent:qn=Wr}),Hr=function(Er,mo){var jo=Yu({},Er.schema);jo.addNodeFilter("meta",function(As){X.each(As,function(yr){yr.remove()})});var Xr=jo.parse(mo,{forced_root_block:!1,isRootContent:!0});return pi({validate:Wt(Er)},Er.schema).serialize(Xr)}(un,Bt.content),un.hasEventListeners("PastePostProcess")&&!Bt.isDefaultPrevented()?(or=ar,$n=qn,Sn=(Yn=un).dom.create("div",{style:"display:none"},Hr),ht((Fn=Yn.fire("PastePostProcess",{node:Sn,internal:or,wordContent:$n})).node.innerHTML,Fn.isDefaultPrevented())):ht(Hr,Bt.isDefaultPrevented())}(rt,Dt,ct);!1===Yn.cancelled&&(qt=rt,un=Yn.content,tn||!1===qt.getParam("smart_paste",!0)?Rt(qt,un):(ar=qt,qn=un,X.each([en,Ot,Rt],function(or){return!0!==or(ar,qn,Rt)})))}function Tn(rt,Dt,ct){var tn=ct||Ie(Dt);ln(rt,Dt.replace($a,""),tn,!1)}function to(rt,Dt){var ct,tn,qt,un,ar,qn,or=function de(rt,Dt,ct){return Dt?(tn=!0===Dt?"p":Dt,qt=ct,un=rt.split(/\n\n/),ar=function(or,$n){var Fn=[],Bt="<"+or;if("object"==typeof $n){for(var Hr in $n)ki.call($n,Hr)&&Fn.push(Hr+'="'+ur.encodeAllRaw($n[Hr])+'"');Fn.length&&(Bt+=" "+Fn.join(" "))}return Bt+">"}(tn,qt),qn="</"+tn+">",1===(Yn=X.map(un,function(or){return or.split(/\n/).join("<br />")})).length?Yn[0]:X.map(Yn,function(or){return ar+or+qn}).join("")):rt.replace(/\r?\n/g,"<br>");var tn,qt,un,ar,qn,Yn}((ct=rt.dom.encode(Dt).replace(/\r\n/g,"\n"),un=(tn=rt.getParam("paste_tab_spaces",4,"number"))<=0?"":new Array(tn+1).join(" "),ar=ct.replace(/\t/g,un),qn={pcIsSpace:!(qt=function($n,Sn){return-1!==" \f\t\v".indexOf(Sn)||"\xa0"===Sn?$n.pcIsSpace||""===$n.str||$n.str.length===ar.length-1||(Fn=$n.str.length+1)<ar.length&&0<=Fn&&Gn(ar[Fn])?{pcIsSpace:!1,str:$n.str+"\xa0"}:{pcIsSpace:!0,str:$n.str+" "}:{pcIsSpace:Gn(Sn),str:$n.str+Sn};var Fn}),str:""},ie(ar,function($n,Sn){qn=qt(qn,$n)}),qn.str),rt.getParam("forced_root_block"),rt.getParam("forced_root_block_attrs"));ln(rt,or,!1,!0)}function wo(rt){var Dt,ct={};if(rt&&(!rt.getData||(Dt=rt.getData("Text"))&&0<Dt.length&&-1===Dt.indexOf("data:text/mce-internal,")&&(ct["text/plain"]=Dt),rt.types))for(var tn=0;tn<rt.types.length;tn++){var qt=rt.types[tn];try{ct[qt]=rt.getData(qt)}catch{ct[qt]=""}}return ct}function Tr(rt,Dt){return Dt in rt&&0<rt[Dt].length}function Gr(rt){return Tr(rt,"text/html")||Tr(rt,"text/plain")}function Or(rt,Dt,ct){var tn,qt,un,ar,qn,Yn="paste"===Dt.type?Dt.clipboardData:Dt.dataTransfer;if(qe(rt)&&Yn){var or=(tn=rt,un=(qt=Yn).items?function($n){for(var Sn=[],Fn=0,Bt=$n.length;Fn<Bt;++Fn){if(!U($n[Fn]))throw new Error("Arr.flatten item "+Fn+" was not an array, input: "+$n);di.apply(Sn,$n[Fn])}return Sn}(Q(vo(qt.items),function($n){return"file"===$n.kind?[$n.getAsFile()]:[]})):[],ar=qt.files?vo(qt.files):[],function($n,Sn){for(var Fn=[],Bt=0,Hr=$n.length;Bt<Hr;Bt++){var Wr=$n[Bt];Sn(Wr,Bt)&&Fn.push(Wr)}return Fn}(0<un.length?un:ar,(qn=$e(tn),function($n){return Ae($n.type,"image/",0)&&ne(qn,function(Sn){return Fn=Sn.toLowerCase(),(X.hasOwn(Bt={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"},Fn)?"image/"+Bt[Fn]:"image/"+Fn)===$n.type;var Fn,Bt})})));if(0<or.length)return Dt.preventDefault(),ma.all(Q(or,function($n){return new ma(function(Sn){var Fn=hn($n.getAsFile)?$n.getAsFile():$n,Bt=new window.FileReader;Bt.onload=function(){Sn({blob:Fn,uri:Bt.result})},Bt.readAsDataURL(Fn)})})).then(function($n){ct&&rt.selection.setRng(ct),ie($n,function(Sn){var Fn,Bt,Hr,Wr,Br,Er,mo,jo,As,yr,ao,Ti,js,qs,Ir,fc,vi,Fa,is;Fn=rt,Hr=(Bt=Sn).uri,Ir=(qs=(Wr=/data:([^;]+);base64,([a-z0-9\+\/=]+)/i.exec(Hr))?{type:Wr[1],data:decodeURIComponent(Wr[2])}:{type:null,data:null}).data,fc=qs.type,vi=ir(),Fa=Bt.blob,(is=new Image).src=Bt.uri,Ti=is,!(js=Fn.getParam("images_dataimg_filter"))||js(Ti)?(As=void 0,(Er=(Br=Fn.editorUpload.blobCache).getByData(Ir,fc))?As=Er:(jo=(mo=Fn.getParam("images_reuse_filename")&&hn(Fa.name))?(yr=Fn,hn(ao=Fa.name.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i))?yr.dom.encode(ao[1]):null):vi,As=Br.create(vi,Fa,Ir,jo,mo?Fa.name:void 0),Br.add(As)),Tn(Fn,'<img src="'+As.blobUri()+'">',!1)):Tn(Fn,'<img src="'+Bt.uri+'">',!1)})}),!0}return!1}function xt(rt){return ps.metaKeyPressed(rt)&&86===rt.keyCode||rt.shiftKey&&45===rt.keyCode}function ai(rt){return qi.ie&&rt.inline?document.body:rt.getBody()}function Mr(rt,Dt,ct,tn){!function(qt,un,ar){if(!1===qi.iOS&&"function"==typeof(null==qt?void 0:qt.setData))try{return qt.clearData(),qt.setData("text/html",un),qt.setData("text/plain",ar),qt.setData(nu(),un),1}catch{return}}(rt.clipboardData,Dt.html,Dt.text)?ct(Dt.html,tn):(rt.preventDefault(),tn())}function Wo(rt){return function(Dt,ct){var tn=$a+Dt,qt=rt.dom.create("div",{contenteditable:"false","data-mce-bogus":"all"}),un=rt.dom.create("div",{contenteditable:"true"},tn);rt.dom.setStyles(qt,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),qt.appendChild(un),rt.dom.add(rt.getBody(),qt);var ar=rt.selection.getRng();un.focus();var qn=rt.dom.createRng();qn.selectNodeContents(un),rt.selection.setRng(qn),za.setTimeout(function(){rt.selection.setRng(ar),qt.parentNode.removeChild(qt),ct()},0)}}function Yi(rt){return{html:rt.selection.getContent({contextual:!0}),text:rt.selection.getContent({format:"text"})}}function Pi(rt){return!rt.selection.isCollapsed()||(Dt=rt).dom.getParent(Dt.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",Dt.getBody());var Dt}function Ba(rt,Dt){return wn.getCaretRangeFromPoint(Dt.clientX,Dt.clientY,rt.getDoc())}function Gt(rt,Dt){rt.focus(),rt.selection.setRng(Dt)}function jt(rt,Dt){rt.on("PastePreProcess",function(ct){ct.content=Dt(rt,ct.content,ct.internal,ct.wordContent)})}function yn(rt,Dt){if(!Ge(Dt))return Dt;var ct=[];return X.each(rt.schema.getBlockElements(),function(tn,qt){ct.push(qt)}),Dt=Fe(Dt,[[new RegExp("(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*(<\\/?("+ct.join("|")+")[^>]*>)(?:<br>&nbsp;[\\s\\r\\n]+|<br>)*","g"),"$1"]]),Fe(Dt,[[/<br><br>/g,"<BR><BR>"],[/<br>/g," "],[/<BR><BR>/g,"<br>"]])}function On(rt,Dt,ct,tn){if(tn||ct)return Dt;var qt,un,ar,qn=rt.getParam("paste_webkit_styles");return!1===rt.getParam("paste_remove_styles_if_webkit",!0)||"all"===qn?Dt:(Dt=(qt=qn?qn.split(/[, ]/):qt)?(un=rt.dom,ar=rt.selection.getNode(),Dt.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,function(Yn,or,$n,Sn){var Fn=un.parseStyle(un.decode($n)),Bt={};if("none"===qt)return or+Sn;for(var Hr=0;Hr<qt.length;Hr++){var Wr=Fn[qt[Hr]],Br=un.getStyle(ar,qt[Hr],!0);/color/.test(qt[Hr])&&(Wr=un.toHex(Wr),Br=un.toHex(Br)),Br!==Wr&&(Bt[qt[Hr]]=Wr)}var Er=un.serializeStyle(Bt,"span");return Er?or+' style="'+Er+'"'+Sn:or+Sn})):Dt.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3")).replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,function(Yn,or,$n,Sn){return or+' style="'+$n+'"'+Sn})}function cr(rt,Dt){rt.$("a",Dt).find("font,u").each(function(ct,tn){rt.dom.remove(tn,!0)})}function tr(rt,Dt){return function(ct){function tn(qt){return ct.setActive(qt.state)}return ct.setActive("text"===Dt.pasteFormat.get()),rt.on("PastePlainTextToggle",tn),function(){return rt.off("PastePlainTextToggle",tn)}}}function sn(rt){return rt.dom.get("mcepastebin")}var qr,fr=function(rt){function Dt(){return qt}function ct(un){return un(rt)}var tn=Ze(rt),qt={fold:function(un,ar){return ar(rt)},isSome:$,isNone:se,getOr:tn,getOrThunk:tn,getOrDie:tn,getOrNull:tn,getOrUndefined:tn,or:Dt,orThunk:Dt,map:function(un){return fr(un(rt))},each:function(un){un(rt)},bind:ct,exists:ct,forall:ct,filter:function(un){return un(rt)?qt:Z},toArray:function(){return[rt]},toString:function(){return"some("+rt+")"}};return qt},Eo={some:fr,none:j,from:function(rt){return null==rt?Z:fr(rt)}},li=Array.prototype.slice,di=Array.prototype.push,vo="function"==typeof Array.from?Array.from:function(rt){return li.call(rt)},tu=function(){return(tu=Object.assign||function(rt){for(var Dt,ct=1,tn=arguments.length;ct<tn;ct++)for(var qt in Dt=arguments[ct])Object.prototype.hasOwnProperty.call(Dt,qt)&&(rt[qt]=Dt[qt]);return rt}).apply(this,arguments)},qi=tinymce.util.Tools.resolve("tinymce.Env"),za=tinymce.util.Tools.resolve("tinymce.util.Delay"),ma=tinymce.util.Tools.resolve("tinymce.util.Promise"),ps=tinymce.util.Tools.resolve("tinymce.util.VK"),X=tinymce.util.Tools.resolve("tinymce.util.Tools"),os="x-tinymce/html",$a="\x3c!-- "+os+" --\x3e",nu=Ze(os),ki=Object.hasOwnProperty,ur=tinymce.util.Tools.resolve("tinymce.html.Entities"),Yu=tinymce.util.Tools.resolve("tinymce.html.DomParser"),pi=tinymce.util.Tools.resolve("tinymce.html.Serializer"),Do=tinymce.util.Tools.resolve("tinymce.html.Node"),dc=tinymce.util.Tools.resolve("tinymce.html.Schema"),ir=(qr=0,function(){return"mceclip"+qr++}),Vt=function(rt,Dt){var ct=sn(rt);return ct&&"mcepastebin"===ct.id&&ct.innerHTML===Dt},wn=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils");F.add("paste",function(rt){if(0==(!!rt.hasPlugin("powerpaste",!0)&&(void 0!==window.console&&window.console.log&&window.console.log("PowerPaste is incompatible with Paste plugin! Remove 'paste' from the 'plugins' option."),!0))){var Dt=pt(!1),ct=pt(rt.getParam("paste_as_text",!1)?"text":"html"),tn=(mo=ct,jo=function Qi(rt){var Dt=pt(null),ct="%MCEPASTEBIN%";return{create:function(){return function(tn,qt,un){var ar=tn.dom,qn=tn.getBody();qt.set(tn.selection.getRng());var Yn,or,Sn,Fn=tn.dom.add(ai(tn),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},"%MCEPASTEBIN%");(qi.ie||qi.gecko)&&ar.setStyle(Fn,"left","rtl"===ar.getStyle(qn,"direction",!0)?65535:-65535),ar.bind(Fn,"beforedeactivate focusin focusout",function(Bt){Bt.stopPropagation()}),or=Fn,ai(Sn=Yn=tn)!==Sn.getBody()&&Yn.dom.bind(or,"paste keyup",function(Bt){Vt(Yn,"%MCEPASTEBIN%")||Yn.fire("paste")}),Fn.focus(),tn.selection.select(Fn,!0)}(rt,Dt)},remove:function(){return function(tn,qt){if(sn(tn)){for(var un,ar=qt.get();un=tn.dom.get("mcepastebin");)tn.dom.remove(un),tn.dom.unbind(un);ar&&tn.selection.setRng(ar)}qt.set(null)}(rt,Dt)},getEl:function(){return sn(rt)},getHtml:function(){return function(tn){function qt($n,Sn){$n.appendChild(Sn),tn.dom.remove(Sn,!0)}var un=X.grep(ai(tn).childNodes,function($n){return"mcepastebin"===$n.id}),ar=un.shift();X.each(un,function($n){qt(ar,$n)});for(var qn=tn.dom.select("div[id=mcepastebin]",ar),Yn=qn.length-1;0<=Yn;Yn--){var or=tn.dom.create("div");ar.insertBefore(or,qn[Yn]),qt(or,qn[Yn])}return ar?ar.innerHTML:""}(rt)},getLastRng:Dt.get,isDefault:function(){return Vt(rt,ct)},isDefaultContent:function(tn){return tn===ct}}}(Er=rt),Er.on("PreInit",function(){return function rr(rt,Dt,ct){var tn,qt,un,ar,qn,Yn,or;function $n(Sn,Fn,Bt,Hr,Wr){var Br;Tr(Fn,"text/html")?Br=Fn["text/html"]:(Br=un.getHtml(),Wr=Wr||Ie(Br),un.isDefaultContent(Br)&&(Hr=!0)),Br=le(Br),un.remove();var Er,mo,jo,Xr,As,yr,ao,Ti,js=!1===Wr&&!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(Br),qs=pn(Br);((Hr=!Br.length||js&&!qs||Hr)||qs)&&(Br=Tr(Fn,"text/plain")&&js?Fn["text/plain"]:(Er=Br,mo=dc(),jo=Yu({},mo),Xr="",As=mo.getShortEndedElements(),yr=X.makeMap("script noscript style textarea video audio iframe object"," "),ao=mo.getBlockElements(),Ti=function(Ir){var fc=Ir.name,vi=Ir;if("br"!==fc){if("wbr"!==fc)if(As[fc]&&(Xr+=" "),yr[fc])Xr+=" ";else{if(3===Ir.type&&(Xr+=Ir.value),!Ir.shortEnded&&(Ir=Ir.firstChild))for(;Ti(Ir),Ir=Ir.next;);ao[fc]&&vi.next&&(Xr+="\n","p"===fc&&(Xr+="\n"))}}else Xr+="\n"},Er=Fe(Er,[/<!\[[^\]]+\]>/g]),Ti(jo.parse(Er)),Xr)),un.isDefaultContent(Br)?Bt||Sn.windowManager.alert("Please use Ctrl+V/Cmd+V keyboard shortcuts to paste contents."):Hr?to(Sn,Br):Tn(Sn,Br,Wr)}qt=rt,un=Dt,ar=ct,Yn=xe(),or=xe(),qt.on("keyup",or.clear),qt.on("keydown",function(Sn){function Fn(Bt){xt(Bt)&&!Bt.isDefaultPrevented()&&un.remove()}if(xt(Sn)&&!Sn.isDefaultPrevented()&&(!(qn=Sn.shiftKey&&86===Sn.keyCode)||!qi.webkit||-1===navigator.userAgent.indexOf("Version/"))){if(Sn.stopImmediatePropagation(),Yn.set(Sn),or.set(!0),qi.ie&&qn)return Sn.preventDefault(),void qt.fire("paste",{ieFake:!0});un.remove(),un.create(),qt.once("keyup",Fn),qt.once("paste",function(){qt.off("keyup",Fn)})}}),qt.on("paste",function(Sn){var Fn=Yn.isSet()||or.isSet();Fn&&Yn.clear();var Bt,Hr=wo(Sn.clipboardData||qt.getDoc().dataTransfer),Wr="text"===ar.get()||qn,Br=Tr(Hr,nu());qn=!1,Sn.isDefaultPrevented()||(Bt=Sn.clipboardData,-1!==navigator.userAgent.indexOf("Android")&&Bt&&Bt.items&&0===Bt.items.length)||!Gr(Hr)&&Or(qt,Sn,un.getLastRng()||qt.selection.getRng())?un.remove():(Fn||Sn.preventDefault(),!qi.ie||Fn&&!Sn.ieFake||Tr(Hr,"text/html")||(un.create(),qt.dom.bind(un.getEl(),"paste",function(Er){Er.stopPropagation()}),qt.getDoc().execCommand("Paste",!1,null),Hr["text/html"]=un.getHtml()),Tr(Hr,"text/html")?(Sn.preventDefault(),Br=Br||Ie(Hr["text/html"]),$n(qt,Hr,Fn,Wr,Br)):za.setEditorTimeout(qt,function(){$n(qt,Hr,Fn,Wr,Br)},0))}),rt.parser.addNodeFilter("img",function(Sn,Fn,Bt){var Hr;if(!qe(rt)&&Bt.data&&!0===Bt.data.paste)for(var Wr=Sn.length;Wr--;)(tn=Sn[Wr].attr("src"))&&(0!==tn.indexOf("webkit-fake-url")&&(rt.getParam("allow_html_data_urls",!1,"boolean")||0!==tn.indexOf("data:"))||(Hr=Sn[Wr]).attr("data-mce-object")||tn===qi.transparentSrc||Hr.remove())})}(Er,jo,mo)}),{pasteFormat:mo,pasteHtml:function(yr,ao){return Tn(Er,yr,ao)},pasteText:function(yr){return to(Er,yr)},pasteImageData:function(yr,ao){return Or(Er,yr,ao)},getDataTransferItems:wo,hasHtmlOrText:Gr,hasContentType:Tr}),Hr=rt;return qi.webkit&&jt(Hr,On),qi.ie&&(jt(Hr,yn),Br=cr,(Wr=Hr).on("PastePostProcess",function(yr){Br(Wr,yr.node)})),(Fn=rt).ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:Xr,onSetup:tr(Fn,Bt=tn)}),Fn.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:Xr,onSetup:tr(Fn,Bt)}),Sn=tn,($n=rt).addCommand("mceTogglePlainTextPaste",function(){var yr,ao=$n;"text"===(yr=Sn).pasteFormat.get()?(yr.pasteFormat.set("html"),Ne(ao,!1)):(yr.pasteFormat.set("text"),Ne(ao,!0)),ao.focus()}),$n.addCommand("mceInsertClipboardContent",function(yr,ao){ao.content&&Sn.pasteHtml(ao.content,ao.internal),ao.text&&Sn.pasteText(ao.text)}),function(yr){var ao=yr.plugins.paste,Ti=yr.getParam("paste_preprocess");Ti&&yr.on("PastePreProcess",function(qs){Ti.call(ao,ao,qs)});var js=yr.getParam("paste_postprocess");js&&yr.on("PastePostProcess",function(qs){js.call(ao,ao,qs)})}(rt),(qn=rt).on("cut",(Yn=qn,function(yr){Pi(Yn)&&Mr(yr,Yi(Yn),Wo(Yn),function(){var ao;qi.browser.isChrome()||qi.browser.isFirefox()?(ao=Yn.selection.getRng(),za.setEditorTimeout(Yn,function(){Yn.selection.setRng(ao),Yn.execCommand("Delete")},0)):Yn.execCommand("Delete")})})),qn.on("copy",(or=qn,function(yr){Pi(or)&&Mr(yr,Yi(or),Wo(or),gr)})),un=tn,ar=Dt,(qt=rt).getParam("paste_block_drop",!1)&&qt.on("dragend dragover draggesture dragdrop drop drag",function(yr){yr.preventDefault(),yr.stopPropagation()}),Ee(qt)||qt.on("drop",function(yr){var ao=yr.dataTransfer;ao&&ao.files&&0<ao.files.length&&yr.preventDefault()}),qt.on("drop",function(yr){var ao,Ti,js,qs,Ir=Ba(qt,yr);yr.isDefaultPrevented()||ar.get()||(ao=un.getDataTransferItems(yr.dataTransfer),Ti=un.hasContentType(ao,nu()),(!un.hasHtmlOrText(ao)||(js=ao["text/plain"])&&0===js.indexOf("file://"))&&un.pasteImageData(yr,Ir)||!Ir||!qt.getParam("paste_filter_drop",!0)||(qs=ao["mce-internal"]||ao["text/html"]||ao["text/plain"])&&(yr.preventDefault(),za.setEditorTimeout(qt,function(){qt.undoManager.transact(function(){ao["mce-internal"]&&qt.execCommand("Delete"),Gt(qt,Ir),qs=le(qs),ao["text/html"]?un.pasteHtml(qs,Ti):un.pasteText(qs)})})))}),qt.on("dragstart",function(yr){ar.set(!0)}),qt.on("dragover dragend",function(yr){Ee(qt)&&!1===ar.get()&&(yr.preventDefault(),Gt(qt,Ba(qt,yr))),"dragend"===yr.type&&ar.set(!1)}),{clipboard:tn}}var qt,un,ar,qn,Yn,or,$n,Sn,Fn,Bt,Wr,Br,Er,mo,jo;function Xr(){return Fn.execCommand("mceTogglePlainTextPaste")}})}(),function(){"use strict";function pt(S){return function(A){return Y=typeof(z=A),(null===z?"null":"object"==Y&&(Array.prototype.isPrototypeOf(z)||z.constructor&&"Array"===z.constructor.name)?"array":"object"==Y&&(String.prototype.isPrototypeOf(z)||z.constructor&&"String"===z.constructor.name)?"string":Y)===S;var z,Y}}function hn(S){return function(A){return typeof A===S}}function gr(S){return function(A){return S===A}}function Ze(S){return null!=S}function je(){}function j(S){return function(){return S}}function ye(S){return S}function F(S,A){return S===A}var U=pt("string"),se=pt("object"),$=pt("array"),Z=gr(null),oe=hn("boolean"),ne=gr(void 0),Q=hn("function"),ie=hn("number");function xe(S){for(var A=[],z=1;z<arguments.length;z++)A[z-1]=arguments[z];return function(){for(var Y=[],ae=0;ae<arguments.length;ae++)Y[ae]=arguments[ae];var ce=A.concat(Y);return S.apply(null,ce)}}function Ae(S){return function(A){return!S(A)}}function Ne(){return Wt}var Ee=j(!1),nt=j(!0),Wt={fold:function(S,A){return S()},isSome:Ee,isNone:nt,getOr:ye,getOrThunk:qe,getOrDie:function(S){throw new Error(S||"error: getOrDie called on none.")},getOrNull:j(null),getOrUndefined:j(void 0),or:ye,orThunk:qe,map:Ne,each:je,bind:Ne,exists:Ee,forall:nt,filter:function(){return Wt},toArray:function(){return[]},toString:j("none()")};function qe(S){return S()}function $e(S,A){return-1<ai.call(S,A)}function Ie(S,A){for(var z=0,Y=S.length;z<Y;z++)if(A(S[z],z))return!0;return!1}function de(S,A){for(var z=[],Y=0;Y<S;Y++)z.push(A(Y));return z}function Fe(S,A){for(var z=S.length,Y=new Array(z),ae=0;ae<z;ae++)Y[ae]=A(S[ae],ae);return Y}function le(S,A){for(var z=0,Y=S.length;z<Y;z++)A(S[z],z)}function Ge(S,A){for(var z=[],Y=[],ae=0,ce=S.length;ae<ce;ae++){var ke=S[ae];(A(ke,ae)?z:Y).push(ke)}return{pass:z,fail:Y}}function Qe(S,A){for(var z=[],Y=0,ae=S.length;Y<ae;Y++){var ce=S[Y];A(ce,Y)&&z.push(ce)}return z}function ht(S,A,z){return function(Y){for(var ce=Y.length-1;0<=ce;ce--)z=A(z,Y[ce],ce)}(S),z}function Jt(S,A,z){return le(S,function(Y,ae){z=A(z,Y,ae)}),z}function Rt(S,A){return function(z,Y,ae){for(var ce=0,ke=z.length;ce<ke;ce++){var Pe=z[ce];if(Y(Pe,ce))return xt.some(Pe);if(ae(Pe,ce))break}return xt.none()}(S,A,Ee)}function pn(S,A){for(var z=0,Y=S.length;z<Y;z++)if(A(S[z],z))return xt.some(z);return xt.none()}function en(S){for(var A=[],z=0,Y=S.length;z<Y;++z){if(!$(S[z]))throw new Error("Arr.flatten item "+z+" was not an array, input: "+S);Qi.apply(A,S[z])}return A}function Ot(S,A){return en(Fe(S,A))}function Gn(S,A){for(var z=0,Y=S.length;z<Y;++z)if(!0!==A(S[z],z))return!1;return!0}function ln(S,A){for(var z={},Y=0,ae=S.length;Y<ae;Y++){var ce=S[Y];z[String(ce)]=A(ce,Y)}return z}function Tn(S){return[S]}function to(S,A){return 0<=A&&A<S.length?xt.some(S[A]):xt.none()}function wo(S){return to(S,0)}function Tr(S){return to(S,S.length-1)}function Gr(S,A){for(var z=0;z<S.length;z++){var Y=A(S[z],z);if(Y.isSome())return Y}return xt.none()}var Or=function(S){function A(){return ae}function z(ce){return ce(S)}var Y=j(S),ae={fold:function(ce,ke){return ke(S)},isSome:nt,isNone:Ee,getOr:Y,getOrThunk:Y,getOrDie:Y,getOrNull:Y,getOrUndefined:Y,or:A,orThunk:A,map:function(ce){return Or(ce(S))},each:function(ce){ce(S)},bind:z,exists:z,forall:z,filter:function(ce){return ce(S)?ae:Wt},toArray:function(){return[S]},toString:function(){return"some("+S+")"}};return ae},xt={some:Or,none:Ne,from:function(S){return null==S?Wt:Or(S)}},rr=Array.prototype.slice,ai=Array.prototype.indexOf,Qi=Array.prototype.push,Mr=function(){return(Mr=Object.assign||function(S){for(var A,z=1,Y=arguments.length;z<Y;z++)for(var ae in A=arguments[z])Object.prototype.hasOwnProperty.call(A,ae)&&(S[ae]=A[ae]);return S}).apply(this,arguments)};function Wo(S,A,z){if(z||2===arguments.length)for(var Y,ae=0,ce=A.length;ae<ce;ae++)!Y&&ae in A||((Y=Y||Array.prototype.slice.call(A,0,ae))[ae]=A[ae]);return S.concat(Y||Array.prototype.slice.call(A))}function Yi(S){var A,z=!1;return function(){for(var Y=[],ae=0;ae<arguments.length;ae++)Y[ae]=arguments[ae];return z||(z=!0,A=S.apply(null,Y)),A}}function Pi(S,A){var z=String(A).toLowerCase();return Rt(S,function(Y){return Y.search(z)})}function Ba(S,A,z){return""===A||S.length>=A.length&&S.substr(z,z+A.length)===A}function Gt(S,A){return-1!==S.indexOf(A)}function jt(S,A){return Ba(S,A,S.length-A.length)}function yn(S){return 0<S.length}function On(S){return function(A){return Gt(A,S)}}function cr(S){return window.matchMedia(S).matches}function tr(S,A){var z=S.dom;if(1!==z.nodeType)return!1;var Y=z;if(void 0!==Y.matches)return Y.matches(A);if(void 0!==Y.msMatchesSelector)return Y.msMatchesSelector(A);if(void 0!==Y.webkitMatchesSelector)return Y.webkitMatchesSelector(A);if(void 0!==Y.mozMatchesSelector)return Y.mozMatchesSelector(A);throw new Error("Browser lacks native selectors")}function sn(S){return 1!==S.nodeType&&9!==S.nodeType&&11!==S.nodeType||0===S.childElementCount}function qr(S,A){var z=void 0===A?document:A.dom;return sn(z)?xt.none():xt.from(z.querySelector(S)).map(Bt.fromDom)}function fr(S,A){return S.dom===A.dom}function Eo(S,A){return Fn().browser.isIE()?(ae=Node.DOCUMENT_POSITION_CONTAINED_BY,0!=(S.dom.compareDocumentPosition(A.dom)&ae)):(ce=S.dom)!==(ke=A.dom)&&ce.contains(ke);var ae,ce,ke}function li(S,A){for(var z=Wr(S),Y=0,ae=z.length;Y<ae;Y++){var ce=z[Y];A(S[ce],ce)}}function di(S,A){return Er(S,function(z,Y){return{k:Y,v:A(z,Y)}})}function vo(S,A){var z={},Y=A,ae=z,ce=function(Pe,Ye){ae[Ye]=Pe},ke=je;return li(S,function(Pe,Ye){(Y(Pe,Ye)?ce:ke)(Pe,Ye)}),z}function tu(S,A){var z=[];return li(S,function(Y,ae){z.push(A(Y,ae))}),z}function qi(S){return tu(S,ye)}function za(S){return Wr(S).length}function ma(S,A){return mo(S,A)?xt.from(S[A]):xt.none()}function ps(S,A){return mo(S,A)&&null!=S[A]}function X(S,A,z){return{element:S,rowspan:A,colspan:z}}function os(S,A,z){return{element:S,cells:A,section:z}}function $a(S,A,z){return{element:S,isNew:A,isLocked:z}}function nu(S,A,z,Y){return{element:S,cells:A,section:z,isNew:Y}}function ki(){return dc(0,0)}function ur(S){function A(ae){return function(){return z===ae}}var z=S.current;return{current:z,version:S.version,isEdge:A("Edge"),isChrome:A("Chrome"),isIE:A("IE"),isOpera:A("Opera"),isFirefox:A(ct),isSafari:A("Safari")}}function Yu(S){function A(ae){return function(){return z===ae}}var z=S.current;return{current:z,version:S.version,isWindows:A(un),isiOS:A("iOS"),isAndroid:A(ar),isOSX:A("OSX"),isLinux:A("Linux"),isSolaris:A(qn),isFreeBSD:A(Yn),isChromeOS:A(or)}}function pi(S){if(null==S)throw new Error("Node cannot be null or undefined");return{dom:S}}var Do,dc=function(S,A){return{major:S,minor:A}},ir={nu:dc,detect:function(S,A){var z,Y,ae=String(A).toLowerCase();return 0===S.length?ki():(Y=function(ke,Pe){for(var Ye=0;Ye<ke.length;Ye++){var tt=ke[Ye];if(tt.test(Pe))return tt}}(S,z=ae))?dc(ce(1),ce(2)):{major:0,minor:0};function ce(ke){return Number(z.replace(Y,"$"+ke))}},unknown:ki},Vt=function(S,A){return Ba(S,A,0)},wn=(Do=/^\s+|\s+$/g,function(S){return S.replace(Do,"")}),rt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Dt={browsers:j([{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function(S){return Gt(S,"edge/")&&Gt(S,"chrome")&&Gt(S,"safari")&&Gt(S,"applewebkit")}},{name:"Chrome",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,rt],search:function(S){return Gt(S,"chrome")&&!Gt(S,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function(S){return Gt(S,"msie")||Gt(S,"trident")}},{name:"Opera",versionRegexes:[rt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:On("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:On("firefox")},{name:"Safari",versionRegexes:[rt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function(S){return(Gt(S,"safari")||Gt(S,"mobile/"))&&Gt(S,"applewebkit")}}]),oses:j([{name:"Windows",search:On("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function(S){return Gt(S,"iphone")||Gt(S,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:On("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"OSX",search:On("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:On("linux"),versionRegexes:[]},{name:"Solaris",search:On("sunos"),versionRegexes:[]},{name:"FreeBSD",search:On("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:On("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}])},ct="Firefox",tn=function(){return ur({current:void 0,version:ir.unknown()})},qt=ur,un=(j("Edge"),j("Chrome"),j("IE"),j("Opera"),j(ct),j("Safari"),"Windows"),ar="Android",qn="Solaris",Yn="FreeBSD",or="ChromeOS",$n=function(){return Yu({current:void 0,version:ir.unknown()})},Sn=Yu,Fn=(j(un),j("iOS"),j(ar),j("Linux"),j("OSX"),j(qn),j(Yn),j(or),Yi(function(){return S=navigator.userAgent,A=xt.from(navigator.userAgentData),z=cr,Ut=Dt.browsers(),Qt=Dt.oses(),{browser:_t=A.bind(function(Mn){return Tt=Ut,Gr(Mn.brands,function(Dn){var rn=Dn.brand.toLowerCase();return Rt(Tt,function(pr){var En;return rn===(null===(En=pr.brand)||void 0===En?void 0:En.toLowerCase())}).map(function(pr){return{current:pr.name,version:ir.nu(parseInt(Dn.version,10),0)}})});var Tt}).orThunk(function(){return Pi(Ut,Mn=S).map(function(Tt){var Dn=ir.detect(Tt.versionRegexes,Mn);return{current:Tt.name,version:Dn}});var Mn}).fold(tn,qt),os:Ft=Pi(Qt,Y=S).map(function(Mn){var Tt=ir.detect(Mn.versionRegexes,Y);return{current:Mn.name,version:Tt}}).fold($n,Sn),deviceType:(ce=_t,ke=S,Pe=z,Ye=(ae=Ft).isiOS()&&!0===/ipad/i.test(ke),tt=ae.isiOS()&&!Ye,mt=(ft=ae.isiOS()||ae.isAndroid())||Pe("(pointer:coarse)"),dt=Ye||!tt&&ft&&Pe("(min-device-width:768px)"),Et=tt||ft&&!dt,wt=ce.isSafari()&&ae.isiOS()&&!1===/safari/i.test(ke),{isiPad:j(Ye),isiPhone:j(tt),isTablet:j(dt),isPhone:j(Et),isTouch:j(mt),isAndroid:ae.isAndroid,isiOS:ae.isiOS,isWebView:j(wt),isDesktop:j(!Et&&!dt&&!wt)})};var S,A,z,Y,ae,ce,ke,Pe,Ye,tt,ft,mt,dt,Et,wt,Ut,Qt,_t,Ft})),Bt={fromHtml:function(S,A){var z=(A||document).createElement("div");if(z.innerHTML=S,!z.hasChildNodes()||1<z.childNodes.length)throw console.error("HTML does not have a single root node",S),new Error("HTML must have a single root node");return pi(z.childNodes[0])},fromTag:function(S,A){return pi((A||document).createElement(S))},fromText:function(S,A){return pi((A||document).createTextNode(S))},fromDom:pi,fromPoint:function(S,A,z){return xt.from(S.dom.elementFromPoint(A,z)).map(pi)}},Hr=tr,Wr=Object.keys,Br=Object.hasOwnProperty,Er=function(S,A){var z={};return li(S,function(Y,ae){var ce=A(Y,ae);z[ce.k]=ce.v}),z},mo=function(S,A){return Br.call(S,A)},jo=["tfoot","thead","tbody","colgroup"];function Xr(S){return S.dom.nodeName.toLowerCase()}function As(S){return S.dom.nodeType}function yr(S){return function(A){return As(A)===S}}function ao(S){return 8===As(S)||"#comment"===Xr(S)}function Ti(S){return function(A){return Zc(A)&&Xr(A)===S}}function js(S){return Bt.fromDom(S.dom.ownerDocument)}function qs(S){return Ni(S)?S:js(S)}function Ir(S){return xt.from(S.dom.parentNode).map(Bt.fromDom)}function fc(S,A){for(var z=Q(A)?A:Ee,Y=S.dom,ae=[];null!=Y.parentNode;){var ce=Y.parentNode,ke=Bt.fromDom(ce);if(ae.push(ke),!0===z(ke))break;Y=ce}return ae}function vi(S){return xt.from(S.dom.previousSibling).map(Bt.fromDom)}function Fa(S){return xt.from(S.dom.nextSibling).map(Bt.fromDom)}function is(S){return Fe(S.dom.childNodes,Bt.fromDom)}function pa(S,A){return xt.from(S.dom.childNodes[A]).map(Bt.fromDom)}function Xc(S){return Bt.fromDom(S.dom.host)}function Yc(S,A,z){return Y=function(ae){return tr(ae,A)},Qe(fc(S,z),Y);var Y}function Qr(S,A){return z=function(Y){return tr(Y,A)},Qe(is(S),z);var z}function aa(S,A){return sn(z=void 0===S?document:S.dom)?[]:Fe(z.querySelectorAll(A),Bt.fromDom);var z}"undefined"!=typeof window||Function("return this;")();var Zc=yr(1),Is=yr(3),Ni=yr(9),yu=yr(11),Co=Q(Element.prototype.attachShadow)&&Q(Node.prototype.getRootNode),Vl=j(Co),km=Co?function(S){return Bt.fromDom(S.dom.getRootNode())}:qs,zr=function(S){var A=Is(S)?S.dom.parentNode:S.dom;if(null==A||null===A.ownerDocument)return!1;var z,Y,ae,ce,ke,Pe=A.ownerDocument;return ae=Bt.fromDom(A),ke=km(ae),(yu(ce=ke)&&Ze(ce.dom.host)?xt.some(ke):xt.none()).fold(function(){return Pe.body.contains(A)},(z=zr,Y=Xc,function(Ye){return z(Y(Ye))}))},Tm=function(S){var A=S.dom.body;if(null==A)throw new Error("Body is not available yet");return Bt.fromDom(A)},df=function(S,A){var z=[];return le(is(S),function(Y){z=(z=A(Y)?z.concat([Y]):z).concat(df(Y,A))}),z};function fn(S,A,z,Y,ae){return S(z,Y)?xt.some(z):Q(ae)&&ae(z)?xt.none():A(z,Y,ae)}function zt(S,A,z){for(var Y=S.dom,ae=Q(z)?z:Ee;Y.parentNode;){var ce=Bt.fromDom(Y=Y.parentNode);if(A(ce))return xt.some(ce);if(ae(ce))break}return xt.none()}function va(S,A,z){return zt(S,function(Y){return tr(Y,A)},z)}function Fp(S,A){return z=function(Y){return tr(Y,A)},Rt(S.dom.childNodes,function(Y){return z(Bt.fromDom(Y))}).map(Bt.fromDom);var z}function xd(S,A){return qr(A,S)}function ru(S,A,z){return fn(tr,va,S,A,z)}function Zu(S,A,z){if(!(U(z)||oe(z)||ie(z)))throw console.error("Invalid call to Attribute.set. Key ",A,":: Value ",z,":: Element ",S),new Error("Attribute value was not simple");S.setAttribute(A,z+"")}function as(S,A,z){Zu(S.dom,A,z)}function Ru(S,A){var z=S.dom;li(A,function(Y,ae){Zu(z,ae,Y)})}function Ku(S,A){var z=S.dom.getAttribute(A);return null===z?void 0:z}function Es(S,A){return xt.from(Ku(S,A))}function Lf(S){return Jt(S.dom.attributes,function(A,z){return A[z.name]=z.value,A},{})}function hc(S,A,z){return void 0===z&&(z=F),S.exists(function(Y){return z(Y,A)})}function Mm(S){for(var A=[],z=function(ae){A.push(ae)},Y=0;Y<S.length;Y++)S[Y].each(z);return A}function c0(S,A,z){return S.isSome()&&A.isSome()?xt.some(z(S.getOrDie(),A.getOrDie())):xt.none()}function Kc(S,A){return S?xt.some(A):xt.none()}function _d(S){return void 0!==S.style&&Q(S.style.getPropertyValue)}function Hl(S,A,z){if(!U(z))throw console.error("Invalid call to CSS.set. Property ",A,":: Value ",z,":: Element ",S),new Error("CSS value must be a string: "+z);_d(S)&&S.style.setProperty(A,z)}function vs(S,A,z){Hl(S.dom,A,z)}function Wl(S,A){var z=S.dom;li(A,function(Y,ae){Hl(z,ae,Y)})}function Ps(S,A){var z=S.dom,Y=window.getComputedStyle(z).getPropertyValue(A);return""!==Y||zr(S)?Y:Kr(z,A)}function Ja(S,A){var Y=Kr(S.dom,A);return xt.from(Y).filter(function(ae){return 0<ae.length})}function gc(S,A){var z,Y=A;_d(z=S.dom)&&z.style.removeProperty(Y),hc(Es(S,"style").map(wn),"")&&Va(S,"style")}function wd(S,A,z){return void 0===z&&(z=0),Es(S,A).map(function(Y){return parseInt(Y,10)}).getOr(z)}function d0(S,A){return wd(S,A,1)}function Ch(S){return Ti("col")(S)?1<wd(S,"span",1):1<d0(S,"colspan")}function ff(S){return 1<d0(S,"rowspan")}function Gl(S,A){return parseInt(Ps(S,A),10)}function f0(S,A){return _u(S,A,nt)}function Vp(S,A){return z=["td","th"],(ae=void 0===(ae=A)?Ee:A)(Y=S)?xt.none():$e(z,Xr(Y))?xt.some(Y):va(Y,z.join(","),function(ce){return tr(ce,"table")||ae(ce)});var z,Y,ae}function Dm(S){return f0(S,"th,td")}function Nx(S){return tr(S,"colgroup")?Qr(S,"col"):Ot(zf(S),function(A){return Qr(A,"col")})}function ea(S,A){return ru(S,"table",A)}function Am(S){return f0(S,"tr")}function mc(S,A){return Fe(S,function(z){if("colgroup"!==Xr(z))return os(z,Y=Fe(Dm(z),function(ae){return X(ae,wd(ae,"rowspan",1),wd(ae,"colspan",1))}),A(z));var Y=Fe(Nx(z),function(ae){return X(ae,1,wd(ae,"span",1))});return os(z,Y,"colgroup")})}function h0(S){return Ir(S).map(function(A){var z=Xr(A);return $e(jo,z)?z:"tbody"}).getOr("tbody")}function Rx(S){var A=Am(S);return mc(Wo(Wo([],zf(S),!0),A,!0),h0)}function kh(S,A,z){var Y=S.cells,ae=Y.slice(0,A),ce=Y.slice(A),ke=ae.concat(z).concat(ce);return Mh(S,ke)}function yg(S,A,z){return kh(S,A,[z])}function ml(S,A,z){S.cells[A]=z}function Ul(S,A){return S.cells[A]}function wa(S,A){return Ul(S,A).element}function pl(S){return S.cells.length}function sa(S){var A=Ge(S,function(z){return"colgroup"===z.section});return{rows:A.fail,cols:A.pass}}function pc(S,A,z){var Y=Fe(S.cells,z);return nu(A(S.element),Y,S.section,!0)}function Im(S){return Es(S,Hi).bind(function(A){return xt.from(A.match(/\d+/g))}).map(function(A){return ln(A,nt)})}function ys(S){var A,z=tu(Jt(sa(S).rows,function(Y,ae){return le(ae.cells,function(ce,ke){ce.isLocked&&(Y[ke]=!0)}),Y},{}),function(Y,ae){return parseInt(ae,10)});return(A=rr.call(z,0)).sort(void 0),A}function $u(S){var A={},z=[],Y=wo(S).map(function(dt){return dt.element}).bind(ea).bind(Im).getOr({}),ae=0,ce=0,ke=0,Pe=Ge(S,function(dt){return"colgroup"===dt.section}),Ye=Pe.pass;le(Pe.fail,function(dt){var Et=[];le(dt.cells,function(wt){for(var Ut=0;void 0!==A[ke+","+Ut];)Ut++;for(var Qt=ps(Y,Ut.toString()),_t={element:wt.element,rowspan:wt.rowspan,colspan:wt.colspan,row:ke,column:Ut,isLocked:Qt},Ft=0;Ft<wt.colspan;Ft++)for(var Mn=0;Mn<wt.rowspan;Mn++){var Tt=Ut+Ft;A[ke+Mn+","+Tt]=_t,ce=Math.max(ce,Tt+1)}Et.push(_t)}),ae++,z.push(os(dt.element,Et,dt.section)),ke++});var tt=Tr(Ye).map(function(dt){var Et,wt,Ut=(Et={},wt=0,le(dt.cells,function(Qt){var _t=Qt.colspan;de(_t,function(Ft){var Mn=wt+Ft;Et[Mn]={element:Qt.element,colspan:_t,column:Mn}}),wt+=_t}),Et);return{colgroups:[{element:dt.element,columns:qi(Ut)}],columns:Ut}}).getOrThunk(function(){return{colgroups:[],columns:{}}});return{grid:{rows:ae,columns:ce},access:A,all:z,columns:tt.columns,colgroups:tt.colgroups}}function Th(S,A){return A.column<=S.finishCol&&A.column+A.colspan-1>=S.startCol&&A.row<=S.finishRow&&A.row+A.rowspan-1>=S.startRow}function P_(S,A){return A.column>=S.startCol&&A.column+A.colspan-1<=S.finishCol&&A.row>=S.startRow&&A.row+A.rowspan-1<=S.finishRow}function bu(S,A,z){var Y=bo.findItem(S,A,fr),ae=bo.findItem(S,z,fr);return Y.bind(function(ce){return ae.map(function(ke){return Pe=ce,Ye=ke,{startRow:Math.min(Pe.row,Ye.row),startCol:Math.min(Pe.column,Ye.column),finishRow:Math.max(Pe.row+Pe.rowspan-1,Ye.row+Ye.rowspan-1),finishCol:Math.max(Pe.column+Pe.colspan-1,Ye.column+Ye.colspan-1)};var Pe,Ye})})}function Sd(S,A,z){return bu(S,A,z).map(function(Y){return Fe(bo.filterItems(S,xe(Th,Y)),function(ae){return ae.element})})}function Mi(S,A){return bo.findItem(S,A,function(z,Y){return Eo(Y,z)}).map(function(z){return z.element})}function $c(S,A,z,Y,ae){var ce=vc(S),ke=fr(S,z)?xt.some(A):Mi(ce,A),Pe=fr(S,ae)?xt.some(Y):Mi(ce,Y);return ke.bind(function(Ye){return Pe.bind(function(tt){return Sd(ce,Ye,tt)})})}function Ju(S,A){Ir(S).each(function(z){z.dom.insertBefore(A.dom,S.dom)})}function vl(S,A){Fa(S).fold(function(){Ir(S).each(function(z){uo(z,A)})},function(z){Ju(z,A)})}function ta(S,A){pa(S,0).fold(function(){uo(S,A)},function(z){S.dom.insertBefore(A.dom,z.dom)})}function Cd(S,A){Ju(S,A),uo(A,S)}function ii(S,A){le(A,function(z,Y){vl(0===Y?S:A[Y-1],z)})}function mr(S,A){le(A,function(z){uo(S,z)})}function Xs(S){S.dom.textContent="",le(is(S),function(A){ls(A)})}function Lu(S){var A,z=is(S);0<z.length&&(A=S,le(z,function(Y){Ju(A,Y)})),ls(S)}function xu(S){return yl.get(S)}function ss(S){return yl.getOption(S)}function us(S,A){return yl.set(S,A)}function yo(S,A){return Qe(Ot(S.all,function(z){return z.cells}),A)}var Hp,Bf,Va=function(S,A){S.dom.removeAttribute(A)},Kr=function(S,A){return _d(S)?S.style.getPropertyValue(A):""},bg=j(10),br=j(10),_u=function(S,A,z){return Ot(is(S),function(Y){return tr(Y,A)?z(Y)?[Y]:[]:_u(Y,A,z)})},zf=function(S){return ea(S).fold(j([]),function(A){return Qr(A,"colgroup")})},Mh=function(S,A){return nu(S.element,A,S.section,S.isNew)},Hi="data-snooker-locked-cols",bo={fromTable:function(S){return $u(Rx(S))},generate:$u,getAt:function(S,A,z){return xt.from(S.access[A+","+z])},findItem:function(S,A,z){var Y=yo(S,function(ae){return z(A,ae.element)});return 0<Y.length?xt.some(Y[0]):xt.none()},filterItems:yo,justCells:function(S){return Ot(S.all,function(A){return A.cells})},justColumns:function(S){return qi(S.columns)},hasColumns:function(S){return 0<Wr(S.columns).length},getColumnAt:function(S,A){return xt.from(S.columns[A])}},vc=bo.fromTable,uo=function(S,A){S.dom.appendChild(A.dom)},ls=function(S){var A=S.dom;null!==A.parentNode&&A.parentNode.removeChild(A)},yl=(Hp=Is,{get:function(S){if(!Hp(S))throw new Error("Can only get text value of a text node");return Bf(S).getOr("")},getOption:Bf=function(S){return Hp(S)?xt.from(S.dom.nodeValue):xt.none()},set:function(S,A){if(!Hp(S))throw new Error("Can only set raw text value of a text node");S.dom.nodeValue=A}}),Lx=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"];function Ky(){return{up:j({selector:va,closest:ru,predicate:zt,all:fc}),down:j({selector:aa,predicate:df}),styles:j({get:Ps,getRaw:Ja,set:vs,remove:gc}),attrs:j({get:Ku,set:as,remove:Va,copyTo:function(S,A){Ru(A,Lf(S))}}),insert:j({before:Ju,after:vl,afterAll:ii,append:uo,appendAll:mr,prepend:ta,wrap:Cd}),remove:j({unwrap:Lu,remove:ls}),create:j({nu:Bt.fromTag,clone:function(S){return Bt.fromDom(S.dom.cloneNode(!1))},text:Bt.fromText}),query:j({comparePosition:function(S,A){return S.dom.compareDocumentPosition(A.dom)},prevSibling:vi,nextSibling:Fa}),property:j({children:is,name:Xr,parent:Ir,document:function(S){return qs(S).dom},isText:Is,isComment:ao,isElement:Zc,isSpecial:function(S){return $e(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],Xr(S))},getLanguage:function(S){return Zc(S)?Es(S,"lang"):xt.none()},getText:xu,setText:us,isBoundary:function(S){return!!Zc(S)&&("body"===Xr(S)||$e(Lx,Xr(S)))},isEmptyTag:function(S){return!!Zc(S)&&$e(["br","img","hr","input"],Xr(S))},isNonEditable:function(S){return Zc(S)&&"false"===Ku(S,"contenteditable")}}),eq:fr,is:Hr}}function Qu(S,A){return Ih(_s,function(z,Y){return S(Y)},A)}function jl(S){return va(S,"table")}function Wp(S,A,z){function Y(ae){return function(ce){return void 0!==z&&z(ce)||fr(ce,ae)}}return fr(S,A)?xt.some({boxes:xt.some([S]),start:S,finish:A}):jl(S).bind(function(ae){return jl(A).bind(function(ce){if(fr(ae,ce))return xt.some({boxes:(tt=S,ft=A,Sd(vc(ae),tt,ft)),start:S,finish:A});if(Eo(ae,ce)){var ke=0<(Pe=Yc(A,"td,th",Y(ae))).length?Pe[Pe.length-1]:A;return xt.some({boxes:$c(ae,S,ae,A,ce),start:S,finish:ke})}if(Eo(ce,ae)){var Pe,Ye=0<(Pe=Yc(S,"td,th",Y(ce))).length?Pe[Pe.length-1]:S;return xt.some({boxes:$c(ce,S,ae,A,ce),start:S,finish:Ye})}return m0(_s,S,A,void 0).shared.bind(function(mt){return ru(mt,"table",z).bind(function(dt){var Et=Yc(A,"td,th",Y(dt)),wt=0<Et.length?Et[Et.length-1]:A,Ut=Yc(S,"td,th",Y(dt)),Qt=0<Ut.length?Ut[Ut.length-1]:S;return xt.some({boxes:$c(dt,S,ae,A,ce),start:Qt,finish:wt})})});var tt,ft})})}function xg(S,A){var z=aa(S,A);return 0<z.length?xt.some(z):xt.none()}function hf(S,A,z){return xd(S,A).bind(function(Y){return xd(S,z).bind(function(ae){return Qu(jl,[Y,ae]).map(function(ce){return{first:Y,last:ae,table:ce}})})})}function Zi(S,A,z,Y){return S.fold(A,z,Y)}function el(S,A){return Bt.fromDom(S.dom.cloneNode(A))}function bs(S){return el(S,!1)}function Ys(S){return el(S,!0)}function g0(S,A){var z=Bt.fromTag(A);return Ru(z,Lf(S)),z}function bn(S,A){function z(ae){var ce=A(ae);if(ce<=0||null===ce){var ke=Ps(ae,S);return parseFloat(ke)||0}return ce}function Y(ae,ce){return Jt(ce,function(ke,Pe){var Ye=Ps(ae,Pe),tt=void 0===Ye?0:parseInt(Ye,10);return isNaN(tt)?ke:ke+tt},0)}return{set:function(ae,ce){if(!ie(ce)&&!ce.match(/^[0-9]+$/))throw new Error(S+".set accepts only positive integer values. Value was "+ce);var ke=ae.dom;_d(ke)&&(ke.style[S]=ce+"px")},get:z,getOuter:z,aggregate:Y,max:function(ae,ce,ke){var Pe=Y(ae,ke);return Pe<ce?ce-Pe:0}}}function Bu(){var S=Fn().browser;return S.isIE()||S.isEdge()}function Cr(S,A,z){return Y=Ps(S,A),ae=z,ce=parseFloat(Y),(isNaN(ce)?xt.none():xt.some(ce)).getOr(ae);var Y,ae,ce}function bl(S){return Ps(S,"box-sizing")}function xs(S,A,z,Y){return A-Cr(S,"padding-"+z,0)-Cr(S,"padding-"+Y,0)-Cr(S,"border-"+z+"-width",0)-Cr(S,"border-"+Y+"-width",0)}function xl(S,A){var z=S.dom,Y=z.getBoundingClientRect().width||z.offsetWidth;return"border-box"===A?Y:xs(S,Y,"left","right")}function Jc(S){return Xp.get(S)}function zu(S){return Xp.getOuter(S)}function Xo(S,A){void 0===A&&(A=nt);var z=S.grid,Y=de(z.columns,ye),ae=de(z.rows,ye);return Fe(Y,function(ce){return ua(function(){return Ot(ae,function(ke){return bo.getAt(S,ke,ce).filter(function(Pe){return Pe.column===ce}).toArray()})},function(ke){return 1===ke.colspan&&A(ke.element)},function(){return bo.getAt(S,0,ce)})})}function Ff(S){var A=S.grid,z=de(A.rows,ye),Y=de(A.columns,ye);return Fe(z,function(ae){return ua(function(){return Ot(Y,function(ce){return bo.getAt(S,ae,ce).filter(function(ke){return ke.row===ae}).fold(j([]),function(ke){return[ke]})})},function(ce){return 1===ce.rowspan},function(){return bo.getAt(S,ae,0)})})}function zx(S,A){return function(z){return"rtl"===Om(z)?A:S}}function bi(S){return Em.get(S)}function Dh(S){return Em.getOuter(S)}function Up(S,A){return void 0!==S?S:void 0!==A?A:0}function Ri(S){var A=S.dom.ownerDocument,z=A.body,Y=A.defaultView,ae=A.documentElement;if(z===S.dom)return wu(z.offsetLeft,z.offsetTop);var ce=Up(null==Y?void 0:Y.pageYOffset,ae.scrollTop),ke=Up(null==Y?void 0:Y.pageXOffset,ae.scrollLeft),Pe=Up(ae.clientTop,z.clientTop),Ye=Up(ae.clientLeft,z.clientLeft);return ds(S).translate(ke-Ye,ce-Pe)}function It(S,A){return{row:S,y:A}}function yc(S,A){return{col:S,x:A}}function cs(S){return Ri(S).left+zu(S)}function kd(S){return Ri(S).left}function ql(S,A){return yc(S,kd(A))}function Ha(S,A){return yc(S,cs(A))}function Di(S){return Ri(S).top}function Ah(S,A){return It(S,Di(A))}function gf(S,A){return It(S,Di(A)+Dh(A))}function wr(S,A,z){if(0===z.length)return[];var Y=Fe(z.slice(1),function(ce,ke){return ce.map(function(Pe){return S(ke,Pe)})}),ae=z[z.length-1].map(function(ce){return A(z.length-1,ce)});return Y.concat([ae])}function Ns(S){if(!$(S))throw new Error("cases must be an array");if(0===S.length)throw new Error("there must be at least one case");var A=[],z={};return le(S,function(Y,ae){var ce=Wr(Y);if(1!==ce.length)throw new Error("one and only one name per case");var ke=ce[0],Pe=Y[ke];if(void 0!==z[ke])throw new Error("duplicate key detected:"+ke);if("cata"===ke)throw new Error("cannot have a case named cata (sorry)");if(!$(Pe))throw new Error("case arguments must be an array");A.push(ke),z[ke]=function(){for(var Ye=[],tt=0;tt<arguments.length;tt++)Ye[tt]=arguments[tt];var ft=Ye.length;if(ft!==Pe.length)throw new Error("Wrong number of arguments to case "+ke+". Expected "+Pe.length+" ("+Pe+"), got "+ft);return{fold:function(){for(var mt=[],dt=0;dt<arguments.length;dt++)mt[dt]=arguments[dt];if(mt.length!==S.length)throw new Error("Wrong number of arguments to fold. Expected "+S.length+", got "+mt.length);return mt[ae].apply(null,Ye)},match:function(mt){var dt=Wr(mt);if(A.length!==dt.length)throw new Error("Wrong number of arguments to match. Expected: "+A.join(",")+"\nActual: "+dt.join(","));if(!Gn(A,function(Et){return $e(dt,Et)}))throw new Error("Not all branches were specified when using match. Specified: "+dt.join(", ")+"\nRequired: "+A.join(", "));return mt[ke].apply(null,Ye)},log:function(mt){console.log(mt,{constructors:A,constructor:ke,params:Ye})}}}}),z}var jp,Td,mf,Ih=function(S,A,z){return 0<z.length?(Y=S,ae=A,ce=z[0],ht(z.slice(1),function(ke,Pe){var Ye=ae(Y,Pe);return function(S,A,z){return A.bind(function(Y){return z.filter(xe(S.eq,Y))})}(Y,ke,Ye)},ae(Y,ce))):xt.none();var Y,ae,ce},m0=function(S,A,z,Y){function ae(ft){return pn(ft,Y).fold(function(){return ft},function(mt){return ft.slice(0,mt+1)})}void 0===Y&&(Y=Ee);var ce=[A].concat(S.up().all(A)),ke=[z].concat(S.up().all(z)),Pe=ae(ce),Ye=ae(ke),tt=Rt(Pe,function(ft){return Ie(Ye,xe(S.eq,ft))});return{firstpath:Pe,secondpath:Ye,shared:tt}},_s=Ky(),qp=xg,xo=Ns([{none:[]},{multiple:["elements"]},{single:["element"]}]),Vx=xo.none,Hx=xo.multiple,$y=xo.single,Pr=tinymce.util.Tools.resolve("tinymce.PluginManager"),Xp=bn("width",function(S){return S.dom.offsetWidth}),Oa=function(S){return xl(S,"content-box")},xi=function(S){return Bu()?xl(S,bl(S)):Cr(S,"width",S.dom.offsetWidth)},ua=function(S,A,z){var Y=S();return Rt(Y,A).orThunk(function(){return xt.from(Y[0]).orThunk(z)}).map(function(ae){return ae.element})},Om=function(S){return"rtl"===Ps(S,"direction")?"rtl":"ltr"},Em=bn("height",function(S){var A=S.dom;return zr(S)?A.getBoundingClientRect().height:A.offsetHeight}),Jy=function(S,A){return{left:S,top:A,translate:function(z,Y){return Jy(S+z,A+Y)}}},wu=Jy,ds=function(S){var A,z=S.dom,Y=z.ownerDocument.body;return Y===z?wu(Y.offsetLeft,Y.offsetTop):zr(S)?(A=z.getBoundingClientRect(),wu(A.left,A.top)):wu(0,0)},Su={delta:ye,positions:function(S){return wr(Ah,gf,S)},edge:Di},bc=zx({delta:ye,edge:kd,positions:function(S){return wr(ql,Ha,S)}},{delta:function(S){return-S},edge:cs,positions:function(S){return wr(Ha,ql,S)}}),Qc={delta:function(S,A){return bc(A).delta(S,A)},positions:function(S,A){return bc(A).positions(S,A)},edge:function(S){return bc(S).edge(S)}},Pm={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},N_=(mf=["Infinity",(jp="[0-9]+")+"\\."+_l(jp)+_l(Td="[eE][+-]?[0-9]+"),"\\."+jp+_l(Td),jp+_l(Td)].join("|"),new RegExp("^([+-]?(?:"+mf+"))(.*)$"));function _l(S){return"(?:"+S+")?"}function p0(S,A,z){var Y=xt.from(S.dom.parentElement).map(Bt.fromDom).getOrThunk(function(){return Tm(js(S))});return A(S)/z(Y)*100}function Oh(S,A){vs(S,"width",A+"px")}function la(S,A){vs(S,"width",A+"%")}function Lo(S,A){vs(S,"height",A+"px")}function Md(S,A){return Ja(S,A).orThunk(function(){return Es(S,A).map(function(z){return z+"px"})})}function Eh(S){return Md(S,"width")}function xc(S){return p0(S,Jc,Oa)}function Rs(S){return(cb(S)?Jc:xi)(S)}function Nm(S){return function kr(S){var A,z,Y,ae,ce,ke,Pe,Ye,tt,ft,mt=function(S){return Bu()?(z=bl(A=S),ae=(Y=A.dom).getBoundingClientRect().height||Y.offsetHeight,"border-box"===z?ae:xs(A,ae,"top","bottom")):Cr(S,"height",S.dom.offsetHeight);var A,z,Y,ae}(S)+"px";return mt?(A=mt,z=S,Y=bi,ae=Lo,ft=parseFloat(A),jt(A,"%")&&"table"!==Xr(z)?(ke=ft,Pe=Y,Ye=ae,tt=ea(ce=z).map(function(dt){var Et=Pe(dt);return Math.floor(ke/100*Et)}).getOr(ke),Ye(ce,tt),tt):ft):bi(S)}(A=S)/d0(A,"rowspan");var A}function mn(S,A,z){vs(S,"width",A+z)}function Qy(S){return p0(S,Jc,Oa)+"%"}function Hf(S){return Eh(S).getOrThunk(function(){return Rs(S)+"px"})}function Ph(S){return Md(S,"height").getOrThunk(function(){return Nm(S)+"px"})}function Rm(S,A,z,Y,ae,ce){return S.filter(Y).fold(function(){return ce(function(ke,Pe){if(Pe<0||Pe>=ke.length-1)return xt.none();var Ye=ke[Pe].fold(function(){var ft,mt;return Gr((ft=ke.slice(0,Pe),(mt=rr.call(ft,0)).reverse(),mt),function(dt,Et){return dt.map(function(wt){return{value:wt,delta:Et+1}})})},function(ft){return xt.some({value:ft,delta:0})}),tt=ke[Pe+1].fold(function(){return Gr(ke.slice(Pe+1),function(ft,mt){return ft.map(function(dt){return{value:dt,delta:mt+1}})})},function(ft){return xt.some({value:ft,delta:1})});return Ye.bind(function(ft){return tt.map(function(mt){var dt=mt.delta+ft.delta;return Math.abs(mt.value-ft.value)/dt})})}(z,A))},function(ke){return ae(ke)})}function Dd(S,A,z,Y){var ae=Xo(S),ce=bo.hasColumns(S)?Fe(bo.justColumns(S),function(Ye){return xt.from(Ye.element)}):ae,ke=[xt.some(Qc.edge(A))].concat(Fe(Qc.positions(ae,A),function(Ye){return Ye.map(function(tt){return tt.x})})),Pe=Ae(Ch);return Fe(ce,function(Ye,tt){return Rm(Ye,tt,ke,Pe,function(ft){return dt=ft,wt=(Et=Fn().browser).isChrome()||Et.isFirefox(),!Ng(dt)||wt?z(ft):Rm(null!=(mt=ae[tt])?mt:xt.none(),tt,ke,Pe,function(Ut){return Y(xt.some(Jc(Ut)))},Y);var mt,dt,Et,wt},Y)})}function Ad(S){return S.map(function(A){return A+"px"}).getOr("")}function Yp(S,A,z){return Dd(S,A,Rs,function(Y){return Y.getOrThunk(z.minCellWidth)})}function Lm(S,A,z,Y,ae){var ce=Ff(S),ke=[xt.some(z.edge(A))].concat(Fe(z.positions(ce,A),function(Pe){return Pe.map(function(Ye){return Ye.y})}));return Fe(ce,function(Pe,Ye){return Rm(Pe,Ye,ke,Ae(ff),Y,ae)})}function Id(S,A){return function(){return zr(S)?A(S):parseFloat(Ja(S,"width").getOr("0"))}}function Sr(S){var A=Id(S,function(Y){return parseFloat(Qy(Y))}),z=Id(S,Jc);return{width:A,pixelWidth:z,getWidths:function(Y,ae){return ce=ae,Dd(Y,S,xc,function(ke){return ke.fold(function(){return ce.minCellWidth()},function(Pe){return Pe/ce.pixelWidth()*100})});var ce},getCellDelta:function(Y){return Y/z()*100},singleColumnWidth:function(Y,ae){return[100-Y]},minCellWidth:function(){return bg()/z()*100},setElementWidth:la,adjustTableWidth:function(Y){var ae=A();la(S,ae+Y/100*ae)},isRelative:!0,label:"percent"}}function Wf(S){var A=Id(S,Jc);return{width:A,pixelWidth:A,getWidths:function(z,Y){return Yp(z,S,Y)},getCellDelta:ye,singleColumnWidth:function(z,Y){return[Math.max(bg(),z+Y)-z]},minCellWidth:bg,setElementWidth:Oh,adjustTableWidth:function(z){var Y=A()+z;Oh(S,Y)},isRelative:!1,label:"pixel"}}function pf(S){return"img"===Xr(S)?1:ss(S).fold(function(){return is(S).length},function(A){return A.length})}function Wx(S){return ss(S).filter(function(A){return 0!==A.trim().length||-1<A.indexOf("\xa0")}).isSome()||$e(V_,Xr(S))}function Ls(S){return A=Wx,(z=function(Y){for(var ae=0;ae<Y.childNodes.length;ae++){var ce=Bt.fromDom(Y.childNodes[ae]);if(A(ce))return xt.some(ce);var ke=z(Y.childNodes[ae]);if(ke.isSome())return ke}return xt.none()})(S.dom);var A,z}function Nh(S){return Cf(S,Wx)}function ed(S){return function(){var A=Bt.fromTag("td",S.dom);return uo(A,Bt.fromTag("br",S.dom)),A}}function Gf(S){return function(){return Bt.fromTag("col",S.dom)}}function Gx(S){return function(){return Bt.fromTag("colgroup",S.dom)}}function v0(S){return function(){return Bt.fromTag("tr",S.dom)}}function Bm(S,A,z){var Y,ae,ce=(mr(ae=g0(Y=S,A),is(Ys(Y))),ae);return li(z,function(ke,Pe){null===ke?Va(ce,Pe):as(ce,Pe,ke)}),ce}function Zp(S){return S}function Qa(S,A,z){function Y(ae,ce){var ke=ae.element.dom,Pe=ce.dom;_d(ke)&&_d(Pe)&&(Pe.style.cssText=ke.style.cssText),gc(ce,"height"),1!==ae.colspan&&gc(ce,"width")}return{col:function(ae){var ce=Bt.fromTag(Xr(ae.element),A.dom);return Y(ae,ce),S(ae.element,ce),ce},colgroup:Gx(A),row:v0(A),cell:function(ae){var ce,ke,Pe,Ye,tt,ft=Bt.fromTag(Xr(ae.element),A.dom),mt=z.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),dt=0<mt.length?(ke=ft,Pe=mt,Ls(ce=ae.element).map(function(Et){return ht(Yc(Et,Pe.join(","),function(wt){return fr(wt,ce)}),function(wt,Ut){var Qt=bs(Ut);return Va(Qt,"contenteditable"),uo(wt,Qt),Qt},ke)}).getOr(ke)):ft;return uo(dt,Bt.fromTag("br")),Y(ae,ft),Ye=ae.element,tt=ft,li(D0,function(Et,wt){return Es(Ye,wt).filter(function(Ut){return $e(Et,Ut)}).each(function(Ut){return as(tt,wt,Ut)})}),S(ae.element,ft),ft},replace:Bm,colGap:Gf(A),gap:ed(A)}}function _i(S){return{col:Gf(S),colgroup:Gx(S),row:v0(S),cell:ed(S),replace:Zp,colGap:Gf(S),gap:ed(S)}}function ou(S){return Fe(S,Bt.fromDom)}function Xl(S){return Bt.fromDom(S.getBody())}function _c(S){return S.getBoundingClientRect().width}function Yl(S){return S.getBoundingClientRect().height}function Fu(S){return function(A){return fr(A,Xl(S))}}function vf(S){return/^\d+(\.\d+)?$/.test(S)?S+"px":S}function yf(S){function A(z){return Va(z,"data-mce-style")}Va(S,"data-mce-style"),le(Dm(S),A),le(Nx(S),A),le(Am(S),A)}function Sa(S){return Bt.fromDom(S.selection.getStart())}function Od(S){return Zi(S.get(),j([]),ye,Tn)}function Zl(S,A,z){return{element:z,mergable:(ce=A,ke=Dc,Zi(S.get(),xt.none,function(Pe){return Pe.length<=1?xt.none():function Bx(S,A,z){return hf(S,A,z).bind(function(Y){function ae(Ye){return fr(S,Ye)}var ce="thead,tfoot,tbody,table",ke=va(Y.first,ce,ae),Pe=va(Y.last,ce,ae);return ke.bind(function(Ye){return Pe.bind(function(tt){return fr(Ye,tt)?(dt=Y.first,Et=Y.last,wt=vc(Y.table),bu(ft=wt,dt,Et).bind(function(Ut){return function(Qt,_t){for(var Ft=!0,Mn=xe(P_,_t),Tt=_t.startRow;Tt<=_t.finishRow;Tt++)for(var Dn=_t.startCol;Dn<=_t.finishCol;Dn++)Ft=Ft&&bo.getAt(Qt,Tt,Dn).exists(Mn);return Ft?xt.some(_t):xt.none()}(ft,Ut)})):xt.none();var ft,dt,Et,wt})})})}(ce,ke.firstSelectedSelector,ke.lastSelectedSelector).map(function(Ye){return{bounds:Ye,cells:Pe}})},xt.none)),unmergable:0<(ae=Od(S)).length&&Gn(ae,function(Pe){return Y(Pe,"rowspan")||Y(Pe,"colspan")})?xt.some(ae):xt.none(),selection:Od(S)};function Y(Pe,Ye){return Es(Pe,Ye).exists(function(tt){return 1<parseInt(tt,10)})}var ae,ce,ke}function R_(S){return function(A,z){var Y,ae=Xr(A);return ru("col"===ae||"colgroup"===ae?ea(Y=A).bind(function(ce){return qp(ce,Dc.firstSelectedSelector)}).fold(j(Y),function(ce){return ce[0]}):A,S,z)}}function DS(S,A,z){for(var Y=0,ae=S;ae<A;ae++)Y+=void 0!==z[ae]?z[ae]:0;return Y}function Wa(S,A,z){var Y,ae,ce,ke;le((ae=A,bo.hasColumns(Y=S)?(ke=ae,Fe(bo.justColumns(Y),function(Pe,Ye){return{element:Pe.element,width:ke[Ye],colspan:Pe.colspan}})):(ce=ae,Fe(bo.justCells(Y),function(Pe){var Ye=DS(Pe.column,Pe.column+Pe.colspan,ce);return{element:Pe.element,width:Ye,colspan:Pe.colspan}}))),function(Pe){z.setElementWidth(Pe.element,Pe.width)})}function Zs(S,A,z,Y,ae){var ce,ke,Pe,Ye,tt,ft,mt,dt,Et,wt,Ut=bo.fromTable(S),Qt=ae.getCellDelta(A),_t=ae.getWidths(Ut,ae),Ft=z===Ut.grid.columns-1,Mn=Y.clampTableDelta(_t,z,Qt,ae.minCellWidth(),Ft),Tt=(ke=z,Pe=Mn,Ye=ae,tt=Y,dt=(ce=_t).slice(0),mt=ke,Et=0===(ft=ce).length?Ac.none():1===ft.length?Ac.only(0):0===mt?Ac.left(0,1):mt===ft.length-1?Ac.right(mt-1,mt):0<mt&&mt<ft.length-1?Ac.middle(mt-1,mt,mt+1):Ac.none(),wt=j(Fe(dt,j(0))),Et.fold(wt,function(Dn){return Ye.singleColumnWidth(dt[Dn],Pe)},function(Dn,rn){return tt.calcLeftEdgeDeltas(dt,Dn,rn,Pe,Ye.minCellWidth(),Ye.isRelative)},function(Dn,rn,pr){return tt.calcMiddleDeltas(dt,Dn,rn,pr,Pe,Ye.minCellWidth(),Ye.isRelative)},function(Dn,rn){return tt.calcRightEdgeDeltas(dt,Dn,rn,Pe,Ye.minCellWidth(),Ye.isRelative)}));Wa(Ut,Fe(Tt,function(Dn,rn){return Dn+_t[rn]}),ae),Y.resizeTable(ae.adjustTableWidth,Mn,Ft)}function Cu(S){return Fe(S,j(0))}function fs(S,A,z,Y,ae){return ae(S.slice(0,A)).concat(Y).concat(ae(S.slice(z)))}function Ki(S){return function(A,z,Y,ae){if(S(Y)){var ce=Math.max(ae,A[z]-Math.abs(Y)),ke=Math.abs(ce-A[z]);return 0<=Y?ke:-ke}return Y}}function Kl(){function S(z,Y,ae,ce){var ke=(100+ae)/100,Pe=Math.max(ce,(z[Y]+ae)/ke);return Fe(z,function(Ye,tt){return(tt===Y?Pe:Ye/ke)-Ye})}function A(z,Y,ae,ce,ke,Pe){return Pe?S(z,Y,ce,ke):(ft=ae,mt=Zm(Ye=z,tt=Y,ce,ke),fs(Ye,tt,ft+1,[mt,0],Cu));var Ye,tt,ft,mt}return{resizeTable:function(z,Y){return z(Y)},clampTableDelta:Zm,calcLeftEdgeDeltas:A,calcMiddleDeltas:function(z,Y,ae,ce,ke,Pe,Ye){return A(z,ae,ce,ke,Pe,Ye)},calcRightEdgeDeltas:function(z,Y,ae,ce,ke,Pe){if(Pe)return S(z,ae,ce,ke);var Ye=Zm(z,ae,ce,ke);return Cu(z.slice(0,ae)).concat([Ye])},calcRedestributedWidths:function(z,Y,ae,ce){if(ce){var ke=(Y+ae)/Y,Pe=Fe(z,function(Ye){return Ye/ke});return{delta:100*ke-100,newSizes:Pe}}return{delta:ae,newSizes:z}}}}function Kp(){function S(A,z,Y,ae,ce){var ke=Uh(A,0<=ae?Y:z,ae,ce);return fs(A,z,Y+1,[ke,-ke],Cu)}return{resizeTable:function(A,z,Y){Y&&A(z)},clampTableDelta:function(A,z,Y,ae,ce){if(ce){if(0<=Y)return Y;var ke=Jt(A,function(Pe,Ye){return Pe+Ye-ae},0);return Math.max(-ke,Y)}return Zm(A,z,Y,ae)},calcLeftEdgeDeltas:S,calcMiddleDeltas:function(A,z,Y,ae,ce,ke){return S(A,Y,ae,ce,ke)},calcRightEdgeDeltas:function(A,z,Y,ae,ce,ke){return ke?Cu(A):Fe(A,j(ae/A.length))},calcRedestributedWidths:function(A,z,Y,ae){return{delta:0,newSizes:A}}}}function Uf(S,A,z){var Y=z.substring(0,z.length-S.length),ae=parseFloat(Y);return Y===ae.toString()?A(ae):Bg.invalid(z)}function Pd(S,A,z){var Y,ae,ce,ke,Pe=jh.from(z),Ye=Gn(S,function(tt){return"0px"===tt})?(Y=S.length,ae=Pe.fold(function(){return j("")},function(tt){return j(tt/Y+"px")},function(){return j(100/Y+"%")}),de(Y,ae)):(ce=S,ke=A,Pe.fold(function(){return ce},function(tt){return mt=(ft=tt)/ke,Fe(ce,function(dt){return jh.from(dt).fold(function(){return dt},function(Et){return Et*mt+"px"},function(Et){return Et/100*ft+"px"})});var ft,mt},function(tt){return ft=ke,Fe(ce,function(mt){return jh.from(mt).fold(function(){return mt},function(dt){return dt/ft*100+"%"},function(dt){return dt+"%"})});var ft}));return Pa(Ye)}function td(S,A){return 0===S.length?A:ht(S,function(z,Y){return jh.from(Y).fold(j(0),ye,ye)+z},0)}function Nd(S){return A0(S).fold(j("px"),j("px"),j("%"))}function Rh(S,A,z){var Y=bo.fromTable(S),ae=Y.all,ce=bo.justCells(Y),ke=bo.justColumns(Y);A.each(function(Pe){var Ye,tt,ft,mt,dt=Nd(Pe),Et=Jc(S),wt=Pd(Dd(Y,S,Hf,Ad),Et,Pe);bo.hasColumns(Y)?(ft=wt,mt=dt,le(ke,function(Ut,Qt){var _t=td([ft[Qt]],bg());vs(Ut.element,"width",_t+mt)})):(Ye=wt,tt=dt,le(ce,function(Ut){var Qt=td(Ye.slice(Ut.column,Ut.colspan+Ut.column),bg());vs(Ut.element,"width",Qt+tt)})),vs(S,"width",Pe)}),z.each(function(Pe){var Ye=Nd(Pe),tt=bi(S),ft=Pd(Lm(Y,S,Su,Ph,Ad),tt,Pe),mt=ae,dt=Ye;le(ce,function(Et){var wt=td(ft.slice(Et.row,Et.rowspan+Et.row),br());vs(Et.element,"height",wt+dt)}),le(mt,function(Et,wt){vs(Et.element,"height",ft[wt])}),vs(S,"height",Pe)})}function nd(S){return bo.fromTable(S).grid}function Ea(S){var A=[];return{bind:function(z){if(void 0===z)throw new Error("Event bind error: undefined handler");A.push(z)},unbind:function(z){A=Qe(A,function(Y){return Y!==z})},trigger:function(){for(var z=[],Y=0;Y<arguments.length;Y++)z[Y]=arguments[Y];var ae={};le(S,function(ce,ke){ae[ce]=z[ke]}),le(A,function(ce){ce(ae)})}}}function Wi(S){return{registry:di(S,function(A){return{bind:A.bind,unbind:A.unbind}}),trigger:di(S,function(A){return A.trigger})}}function wl(S){return S.slice(0).sort()}function iu(S,A){var z=Qe(A,function(Y){return!$e(S,Y)});0<z.length&&function(){throw new Error("Unsupported keys for object: "+wl(z).join(", "))}()}function jf(S){return function(A,z,Y){if(0===z.length)throw new Error("You must specify at least one required field.");var ae;return function(ce,ke){if(!$(ke))throw new Error("The "+ce+" fields must be an array. Was: "+ke+".");le(ke,function(Pe){if(!U(Pe))throw new Error("The value "+Pe+" in the "+ce+" fields was not a string.")})}("required",z),Rt(ae=wl(z),function(ce,ke){return ke<ae.length-1&&ce===ae[ke+1]}).each(function(ce){throw new Error("The field: "+ce+" occurs more than once in the combined fields: ["+ae.join(", ")+"].")}),function(ce){var ke=Wr(ce);Gn(z,function(Ye){return $e(ke,Ye)})||function(Ye,tt){throw new Error("All required keys ("+wl(Ye).join(", ")+") were not specified. Specified keys were: "+wl(tt).join(", ")+".")}(z,ke),A(z,ke);var Pe=Qe(z,function(Ye){return!Y.validate(ce[Ye],Ye)});return 0<Pe.length&&function(Ye,tt){throw new Error("All values need to be of type: "+tt+". Keys ("+wl(Ye).join(", ")+") were not.")}(Pe,Y.label),ce}}(iu,S,{validate:Q,label:"function"})}function $p(S){function A(){return S.stopPropagation()}function z(){return S.preventDefault()}var Y,ae,ce=Bt.fromDom(function(Pe){if(Vl()&&Ze(Pe.target)){var Ye=Bt.fromDom(Pe.target);if(Zc(Ye)&&function(S){return Ze(S.dom.shadowRoot)}(Ye)&&Pe.composed&&Pe.composedPath){var tt=Pe.composedPath();if(tt)return wo(tt)}}return xt.from(Pe.target)}(S).getOr(S.target)),ke=(Y=z,ae=A,function(){for(var Pe=[],Ye=0;Ye<arguments.length;Ye++)Pe[Ye]=arguments[Ye];return Y(ae.apply(null,Pe))});return{target:ce,x:S.clientX,y:S.clientY,stop:A,prevent:z,kill:ke,raw:S}}function Ss(S,A,z){return ke=fv,Pe=z,(Y=S).dom.addEventListener(ae=A,Ye=function(tt){ke(tt)&&Pe($p(tt))},!1),{unbind:xe(dv,Y,ae,Ye,!1)};var Y,ae,ke,Pe,Ye}function Rd(S){return void 0!==S.dom.classList}function Lh(S,A){Rd(S)?S.dom.classList.add(A):function na(S,A){return ae=A,as(S,"class",(void 0===(Y=Ku(S,"class"))||""===Y?[]:Y.split(" ")).concat([ae]).join(" ")),1;var Y,ae}(S,A)}function Jp(S,A){return Rd(S)&&S.dom.classList.contains(A)}function qf(S){var A=S.replace(/\./g,"-");return{resolve:function(z){return A+"-"+z}}}function Ca(S){return ru(S,"[contenteditable]")}function Bs(S,A){return void 0===A&&(A=!1),!Fn().browser.isIE()&&zr(S)?S.dom.isContentEditable:Ca(S).fold(j(A),function(z){return"true"===Km(z)})}function bf(S){le(aa(S.parent(),"."+Qs),ls)}function Ux(S,A,z){var Y=S.origin();le(A,function(ae){ae.each(function(ce){var ke=z(Y,ce);Lh(ke,Qs),uo(S.parent(),ke)})})}function wg(S,A){var z;bf(S),S.isResizable(A)&&function Sl(S,A,z,Y,ae){var ce,ke,Pe,Ye,tt,ft=Ri(z),mt=A.isResizable,dt=0<Y.length?Su.positions(Y,z):[],Et=0<dt.length?(ce=mt,Ot(S.all,function(_r,Fr){return ce(_r.element)?[Fr]:[]})):[];ke=A,Pe=Qe(dt,function(_r,Fr){return Ie(Et,function(Nr){return Fr===Nr})}),Ye=ft,tt=zu(z),Ux(ke,Pe,function(_r,Fr){var Nr,oo,So,Yr,Oo,ti=(Nr=Fr.row,oo=Ye.left-_r.left,So=Fr.y-_r.top,Yr=tt,Wl(Oo=Bt.fromTag("div"),{position:"absolute",left:oo+"px",top:So-3.5+"px",height:"7px",width:Yr+"px"}),Ru(Oo,{"data-row":Nr,role:"presentation"}),Oo);return Lh(ti,fb),ti});var Ut,Qt,_t,Ft,Mn,Tt,Dn,rn=0<ae.length?Qc.positions(ae,z):[],pr=0<rn.length?(Qt=mt,_t=[],de((Ut=S).grid.columns,function(_r){bo.getColumnAt(Ut,_r).map(function(Fr){return Fr.element}).forall(Qt)&&_t.push(_r)}),Qe(_t,function(_r){return Gn(bo.filterItems(Ut,function(Fr){return Fr.column===_r}),function(Fr){return Qt(Fr.element)})})):[];Ft=A,Mn=Qe(rn,function(_r,Fr){return Ie(pr,function(Nr){return Fr===Nr})}),Tt=ft,Dn=Dh(z),Ux(Ft,Mn,function(_r,Fr){var Nr,oo,So,Yr,Oo,ti=(Nr=Fr.col,oo=Fr.x-_r.left,So=Tt.top-_r.top,Yr=Dn,Wl(Oo=Bt.fromTag("div"),{position:"absolute",left:oo-3.5+"px",top:So+"px",height:Yr+"px",width:"7px"}),Ru(Oo,{"data-column":Nr,role:"presentation"}),Oo);return Lh(ti,ad),ti})}(z=bo.fromTable(A),S,A,Ff(z),Xo(z))}function zm(S,A){le(aa(S.parent(),"."+Qs),A)}function Xf(S){zm(S,function(A){vs(A,"display","none")})}function y0(S){zm(S,function(A){vs(A,"display","block")})}function ka(S,A){return S.fire("newrow",{node:A})}function wc(S,A){return S.fire("newcell",{node:A})}function Sc(S,A,z){S.fire("TableModified",Mr(Mr({},z),{table:A}))}function Sg(S){return S.getParam("table_sizing_mode","auto")}function Ga(S){return S.getParam("table_responsive_width")}function xf(S){return S.getParam("table_border_widths",Fg,"array")}function _f(S){return S.getParam("table_border_styles",W_,"array")}function Ld(S){return S.getParam("table_default_attributes",n1,"object")}function Bd(S){return S.getParam("table_default_styles",function(A){var z;if($m(A)){var Y=A.dom,ae=null!==(z=Y.getParent(A.selection.getStart(),Y.isBlock))&&void 0!==z?z:A.getBody(),ce=Oa(Bt.fromDom(ae));return Mr(Mr({},Ic),{width:ce+"px"})}return E0(A)?vo(Ic,function(ke,Pe){return"width"!==Pe}):Ic}(S),"object")}function eb(S){return S.getParam("table_cell_advtab",!0,"boolean")}function Cg(S){return S.getParam("table_row_advtab",!0,"boolean")}function zd(S){return S.getParam("table_advtab",!0,"boolean")}function Qo(S){return S.getParam("table_style_by_css",!1,"boolean")}function Xi(S){return S.getParam("table_cell_class_list",[],"array")}function Cl(S){return S.getParam("table_class_list",[],"array")}function Fm(S){return"relative"===Sg(S)||!0===Ga(S)}function zs(S){var A="section",z=S.getParam("table_header_type",A,"string");return $e(["section","cells","sectionCells","auto"],z)?z:A}function kl(S){var A=S.getParam("table_column_resizing",hv,"string");return Rt(["preservetable","resizetable"],function(z){return z===A}).getOr(hv)}function Li(S){return"preservetable"===kl(S)}function tb(S){return"resizetable"===kl(S)}function Fd(S){var A=S.getParam("table_clone_elements");return U(A)?xt.some(A.split(/[ ,]/)):Array.isArray(A)?xt.some(A):xt.none()}function zh(S){return S.getParam("table_background_color_map",[],"array")}function wf(S){return S.getParam("table_border_color_map",[],"array")}function nb(S,A){return(Fm(S)?db:$m(S)?e1:Rg)(A)}function Cc(S){Va(S,"width")}function Tl(S){return"false"!==Ku(S,"data-mce-resize")}function Qp(S,A){return{element:S,offset:A}}function au(S,A){return(S.property().isText(A)?S.property().getText(A):S.property().children(A)).length}function Ml(S,A){1===d0(S,"colspan")&&Eh(S).bind(function(z){return Y=["fixed","relative","empty"],xt.from(N_.exec(z)).bind(function(ae){var ce=Number(ae[1]),ke=ae[2],Pe=ke;return Ie(Y,function(Ye){return Ie(Pm[Ye],function(tt){return Pe===tt})})?xt.some({value:ce,unit:ke}):xt.none()});var Y}).each(function(z){var Y=z.value/2;mn(S,Y,z.unit),mn(A,Y,z.unit)})}function $l(S){return Gn(S,function(A){return qh(A.element)})}function Jl(S){var A="thead"===S.section,z=hc(Tf(S.cells),"th");return A||z?{type:"header",subType:A&&z?"sectionCells":A?"section":"cells"}:"tfoot"===S.section?{type:"footer"}:{type:"body"}}function jx(S,A,z){return $a(z(S.element,A),!0,S.isLocked)}function Yf(S,A){return S.section!==A?nu(S.element,S.cells,A,S.isNew):S}function kc(){return{transformRow:Yf,transformCell:function(S,A,z){var Y,ae,ce=z(S.element,A);return $a("td"!==Xr(ce)?(ae=g0(Y=ce,"td"),Ju(Y,ae),mr(ae,is(Y)),ls(Y),ae):ce,S.isNew,S.isLocked)}}}function ev(){return{transformRow:Yf,transformCell:jx}}function Fh(){return{transformRow:function(S,A){return Yf(S,"thead"===A?"tbody":A)},transformCell:jx}}function so(S,A,z,Y){z===Y?Va(S,A):as(S,A,z)}function Ql(S,A,z){Tr(Qr(S,A)).fold(function(){return ta(S,z)},function(Y){return vl(Y,z)})}function L_(S,A){if(0===S.length)return 0;var z=S[0];return pn(S,function(Y){return!A(z.element,Y.element)}).getOr(S.length)}function Vh(S,A,z){var Y=[];le(S.colgroups,function(ft){for(var mt=[],dt=0;dt<S.grid.columns;dt++){var Et=bo.getColumnAt(S,dt).map(function(wt){return $a(wt.element,z,!1)}).getOrThunk(function(){return $a(A.colGap(),!0,!1)});mt.push(Et)}Y.push(nu(ft.element,mt,"colgroup",z))});for(var ae=0;ae<S.grid.rows;ae++){for(var ce=[],ke=0;ke<S.grid.columns;ke++){var Pe=bo.getAt(S,ae,ke).map(function(ft){return $a(ft.element,z,ft.isLocked)}).getOrThunk(function(){return $a(A.gap(),!0,!1)});ce.push(Pe)}var Ye=S.all[ae],tt=nu(Ye.element,ce,Ye.section,z);Y.push(tt)}return Y}function tv(S){return function B_(S,A){var z=Fe(S,function(Y){return Fe(Y.cells,Ee)});return Fe(S,function(Y,ae){var ce=Ot(Y.cells,function(ke,Pe){if(!1!==z[ae][Pe])return[];var Ye,tt,ft,mt,dt,Et,wt,Ut,Qt=(mt=A,Ut="colgroup"===(wt=(Ye=S)[tt=ae]).section,{colspan:L_(wt.cells.slice(ft=Pe),mt),rowspan:Ut?1:L_((dt=Ye.slice(tt),Et=ft,Fe(dt,function(_t){return Ul(_t,Et)})),mt)});return function(_t,Ft,Mn,Tt){for(var Dn=_t;Dn<_t+Mn;Dn++)for(var rn=Ft;rn<Ft+Tt;rn++)z[Dn][rn]=!0}(ae,Pe,Qt.rowspan,Qt.colspan),[{element:ke.element,rowspan:Qt.rowspan,colspan:Qt.colspan,isNew:ke.isNew}]});return{element:Y.element,cells:ce,section:Y.section,isNew:Y.isNew}})}(S,fr)}function ra(S,A){return Gr(S.all,function(z){return Rt(z.cells,function(Y){return fr(A,Y.element)})})}function ec(S,A,z){var Y=Mm(Fe(A.selection,function(ae){return Vp(ae).bind(function(ce){return ra(S,ce)}).filter(z)}));return Kc(0<Y.length,Y)}function Cs(S,A,z,Y,ae){return function(ce,ke,Pe,Ye,tt){var ft=bo.fromTable(ke),mt=xt.from(null==tt?void 0:tt.section).getOrThunk(T0);return A(ft,Pe).map(function(dt){var Et=Vh(ft,Ye,!1),wt=S(Et,dt,fr,ae(Ye),mt),Ut=ys(wt.grid);return{info:dt,grid:tv(wt.grid),cursor:wt.cursor,lockedColumns:Ut}}).bind(function(dt){var Et=function kg(S,A){function Y(ft,mt){0<ft.length?function z(ft,mt){var dt,Et,wt;mr((Xs(wt=Fp(dt=S,Et=mt).getOrThunk(function(){var Ut=Bt.fromTag(Et,js(dt).dom);return"thead"===Et?Ql(dt,"caption,colgroup",Ut):"colgroup"===Et?Ql(dt,"caption",Ut):uo(dt,Ut),Ut})),wt),("colgroup"===mt?function(Ut){return Ot(Ut,function(Qt){return Fe(Qt.cells,function(_t){return so(_t.element,"span",_t.colspan,1),_t.element})})}:function(Ut){return Fe(Ut,function(Qt){Qt.isNew&&ae.push(Qt.element);var _t=Qt.element;return Xs(_t),le(Qt.cells,function(Ft){Ft.isNew&&ce.push(Ft.element),so(Ft.element,"colspan",Ft.colspan,1),so(Ft.element,"rowspan",Ft.rowspan,1),uo(_t,Ft.element)}),_t})})(ft))}(ft,mt):Fp(S,mt).each(ls)}var ae=[],ce=[],ke=[],Pe=[],Ye=[],tt=[];return le(A,function(ft){switch(ft.section){case"thead":ke.push(ft);break;case"tbody":Pe.push(ft);break;case"tfoot":Ye.push(ft);break;case"colgroup":tt.push(ft)}}),Y(tt,"colgroup"),Y(ke,"thead"),Y(Pe,"tbody"),Y(Ye,"tfoot"),{newRows:ae,newCells:ce}}(ke,dt.grid),wt=xt.from(null==tt?void 0:tt.sizing).getOrThunk(function(){return Rg(ke)}),Ut=xt.from(null==tt?void 0:tt.resize).getOrThunk(Kp);return z(ke,dt.grid,dt.info,{sizing:wt,resize:Ut,section:mt}),Y(ke),wg(ce,ke),Va(ke,Hi),0<dt.lockedColumns.length&&as(ke,Hi,dt.lockedColumns.join(",")),xt.some({cursor:dt.cursor,newRows:Et.newRows,newCells:Et.newCells})})}}function Zf(S,A){return ec(S,A,nt).map(function(z){return{cells:z,generators:A.generators,clipboard:A.clipboard}})}function Dl(S,A){return ec(S,A,nt)}function tl(S,A){return ec(S,A,function(z){return!z.isLocked})}function rb(S,A){return Gn(A,function(z){return ra(S,z).exists(function(Y){return!Y.isLocked})})}function qx(S,A){return A.mergable.filter(function(z){return rb(S,z.cells)})}function b0(S,A){return A.unmergable.filter(function(z){return rb(S,z)})}function Xx(S,A,z,Y){for(var ae=sa(S).rows,ce=!0,ke=0;ke<ae.length;ke++)for(var Pe=0;Pe<pl(ae[0]);Pe++){var Ye=ae[ke],tt=Ul(Ye,Pe),ft=z(tt.element,A);!0===ft&&!1===ce?ml(Ye,Pe,$a(Y(),!0,tt.isLocked)):!0===ft&&(ce=!1)}return S}function Yo(S,A){return{rowDelta:0,colDelta:pl(S[0])-pl(A[0])}}function nv(S,A){return{rowDelta:S.length-A.length,colDelta:0}}function ku(S,A,z,Y){var ae="colgroup"===A.section?z.col:z.cell;return de(S,function(ce){return $a(ae(),!0,Y(ce))})}function jr(S,A,z,Y){var ae=S[S.length-1];return S.concat(de(A,function(){var ke=pc(ae,"colgroup"===ae.section?z.colgroup:z.row,ye),Pe=ku(ke.cells.length,ke,z,function(Ye){return mo(Y,Ye.toString())});return Mh(ke,Pe)}))}function nl(S,A,z,Y){return Fe(S,function(ae){var ce=ku(A,ae,z,Ee);return kh(ae,Y,ce)})}function No(S,A,z){var Y=A.colDelta<0?nl:ye,ae=A.rowDelta<0?jr:ye,ce=ys(S),ke=pl(S[0]),Pe=Ie(ce,function(ft){return ft===ke-1}),Ye=Y(S,Math.abs(A.colDelta),z,Pe?ke-1:ke),tt=ys(Ye);return ae(Ye,Math.abs(A.rowDelta),z,ln(tt,nt))}function Vu(S,A,z){return Qe(z,function(Y){return Y>=S.column&&Y<=pl(A[0])+S.column})}function Vo(S,A,z,Y,ae){var ce=S,ke=ae,Pe=Y.cell;0<ce&&ce<A[0].cells.length&&le(A,function(tt){var mt=tt.cells[ce];ke(mt.element,tt.cells[ce-1].element)&&ml(tt,ce,$a(Pe(),!0,mt.isLocked))});var Ye=No(z,nv(z,A),Y);return Fe(No(A,nv(A,Ye),Y),function(tt,ft){return kh(tt,S,Ye[ft].cells)})}function Zo(S,A,z,Y,ae){!function Yx(S,A,z,Y){var ce,ke=sa(S).rows;0<A&&A<ke.length&&(ce=z,le(Jt(ke[A-1].cells,function(Pe,Ye){return Ie(Pe,function(tt){return ce(tt.element,Ye.element)})?Pe:Pe.concat([Ye])},[]),function(Pe){for(var Ye=xt.none(),tt=A;tt<ke.length;tt++)for(var ft=0;ft<pl(ke[0]);ft++)!function(mt){var dt=ke[tt],Et=Ul(dt,mt);z(Et.element,Pe.element)&&(Ye=Ye.isNone()?xt.some(Y()):Ye).each(function(wt){ml(dt,mt,$a(wt,!0,Et.isLocked))})}(ft)}))}(A,S,ae,Y.cell);var ce,ke,Pe=ys(A),Ye=Yo(A,z),tt=No(A,Mr(Mr({},Ye),{colDelta:Ye.colDelta-Pe.length}),Y),ft=sa(tt),mt=ft.cols,dt=ft.rows,Et=ys(tt),wt=Yo(z,A),Ut=Mr(Mr({},wt),{colDelta:wt.colDelta+Et.length}),Qt=No((ce=Y,ke=Et,Fe(z,function(_t){return Jt(ke,function(Ft,Mn){return yg(Ft,Mn,ku(1,_t,ce,nt)[0])},_t)})),Ut,Y);return mt.concat(dt.slice(0,S)).concat(Qt).concat(dt.slice(S,dt.length))}function Hh(S,A,z,Y,ae){var ke,Pe,Ye,tt=sa(S),ft=tt.rows,mt=tt.cols,dt=ft.slice(0,A),Et=ft.slice(A),wt=(ke=function(Ut,Qt){return 0<A&&A<ft.length&&Y(wa(ft[A-1],Qt),wa(ft[A],Qt))?Ul(ft[A],Qt):$a(ae(Ut.element,Y),!0,Ut.isLocked)},Pe=Y,Ye=ae,pc(ft[z],function(Ut){return Ye(Ut,Pe)},ke));return mt.concat(dt).concat([wt]).concat(Et)}function Ks(S,A,z,Y,ae){return Fe(S,function(ce){var Pe,Ye=0<A&&A<pl(ce)&&Y(wa(ce,A-1),wa(ce,A)),tt=(Pe=ae,"colgroup"!==ce.section&&Ye?Ul(ce,A):$a(Pe(Ul(ce,z).element,Y),!0,!1));return yg(ce,A,tt)})}function tc(S,A,z,Y){return void 0!==wa((ce=S)[ke=A],z)&&0<ke&&Y(wa(ce[ke-1],z),wa(ce[ke],z))||(ae=S[A],0<z&&Y(wa(ae,z-1),wa(ae,z)));var ae,ce,ke}function wi(S,A,z,Y){function ae(ce){return("row"===ce?ff:Ch)(A)?ce+"group":ce}return S?qh(A)?ae(z):null:Y&&qh(A)?ae("row"===z?"col":"row"):null}function hs(S,A,z){return $a(z(S.element,A),!0,S.isLocked)}function fi(S,A,z,Y,ae,ce,ke){return Fe(S,function(Pe,Ye){return mt=Fe((tt=Pe).cells,function(dt,Et){if(Ut=dt,Ie(A,function(Qt){return z(Ut.element,Qt.element)})){var wt=ke(dt,Ye,Et)?ae(dt,z,Y):dt;return ce(wt,Ye,Et).each(function(Qt){var _t=wt.element;li({scope:xt.from(Qt)},function(Ft,Mn){Ft.fold(function(){Va(_t,Mn)},function(Tt){Zu(_t.dom,Mn,Tt)})})}),wt}return dt;var Ut}),nu(tt.element,mt,tt.section,tt.isNew);var tt,mt})}function Sf(S,A,z){return Ot(S,function(Y,ae){return tc(S,ae,A,z)?[]:[Ul(Y,A)]})}function $s(S,A,z,Y,ae){var ce,ke,Pe,Ye,tt=sa(S).rows,ft=Ot(A,function(wt){return Sf(tt,wt,Y)}),mt=Fe(S,function(wt){return $l(wt.cells)}),dt=(ce=ft,Gn(ke=mt,ye)&&$l(ce)?nt:function(wt,Ut,Qt){return!("th"===Xr(wt.element)&&ke[Ut])}),Et=(Pe=z,Ye=mt,function(wt,Ut){return xt.some(wi(Pe,wt.element,"row",Ye[Ut]))});return fi(S,ft,Y,ae,hs,Et,dt)}function es(S,A,z,Y){var ae=sa(S).rows;return fi(S,Fe(A,function(ce){return Ul(ae[ce.row],ce.column)}),z,Y,hs,xt.none,nt)}function Js(S){return Jt(S,function(A,z){return Ie(A,function(Y){return Y.column===z.column})?A:A.concat([z])},[]).sort(function(A,z){return A.column-z.column})}function rl(S){return"tr"===Xr(S)||mv(S)}function rv(S){return{element:S,colspan:wd(S,"colspan",1),rowspan:wd(S,"rowspan",1)}}function x0(S){return Es(S,"scope").map(function(A){return A.substr(0,3)})}function ov(S){return A=S,z=mb.property().name(A),$e(r1,z);var A,z}function Kf(S){return A=S,$e(["ol","ul"],mb.property().name(A));var A}function Al(S){return Bs(S,!0)}function ol(S){0===Dm(S).length&&ls(S)}function Wm(S,A){return{grid:S,cursor:A}}function yi(S,A,z){var Y,ae,ce,ke,Pe;return Wm(S,(Y=A,ae=z,Pe=sa(S).rows,xt.from(null===(ke=null===(ce=Pe[Y])||void 0===ce?void 0:ce.cells[ae])||void 0===ke?void 0:ke.element).filter(Al).orThunk(function(){return Gr(Pe,function(tt){return Gr(tt.cells,function(ft){var mt=ft.element;return Kc(Al(mt),mt)})})})))}function Mg(S){return Jt(S,function(A,z){return Ie(A,function(Y){return Y.row===z.row})?A:A.concat([z])},[]).sort(function(A,z){return A.row-z.row})}function Dg(S,A){return function(z,Y,ae,ce,ke){return yi(function(Pe,Ye,tt,ft,mt,dt,Et){var wt=sa(Pe),Ut=wt.cols,Qt=wt.rows,_t=Qt[Ye[0]],Ft=Ot(Ye,function(oo){return Oo=mt,Ot((So=Qt)[Yr=oo].cells,function(ti,$i){return tc(So,Yr,$i,Oo)?[]:[ti]});var So,Yr,Oo}),Mn=Fe(_t.cells,function(oo,So){return $l(Sf(Qt,So,mt))}),Tt=Wo([],Qt,!0);le(Ye,function(oo){Tt[oo]=Et.transformRow(Qt[oo],tt)});var Dn,rn,pr,En,_r=Ut.concat(Tt),Fr=(Dn=_t,Gn(rn=Mn,ye)&&$l(Dn.cells)?nt:function(oo,So,Yr){return!("th"===Xr(oo.element)&&rn[Yr])}),Nr=(pr=ft,En=Mn,function(oo,So,Yr){return xt.some(wi(pr,oo.element,"col",En[Yr]))});return fi(_r,Ft,mt,dt,Et.transformCell,Nr,Fr)}(z,Fe(Mg(Y),function(Pe){return Pe.row}),S,A,ae,ce.replaceOrInit,ke),Y[0].row,Y[0].column)}}function rd(S,A,z){var Y,ae=(Y=z.section,mc(S,function(){return Y}));return Vh(bo.generate(ae),A,!0)}function Wh(S,A,z,Y){var ae=Y.sizing,ce=bo.generate(A);Wa(ce,ae.getWidths(ce,ae),ae)}function Vd(S,A,z,Y){var ae=z,ce=Y.sizing,ke=Y.resize,Pe=bo.generate(A),Ye=ce.getWidths(Pe,ce),tt=ce.pixelWidth(),ft=ke.calcRedestributedWidths(Ye,tt,ae.pixelDelta,ce.isRelative),dt=ft.delta;Wa(Pe,ft.newSizes,ce),ce.adjustTableWidth(dt)}function od(S,A){return Ie(A,function(z){return 0===z.column&&z.isLocked})}function ob(S,A){return Ie(A,function(z){return z.column+z.colspan>=S.grid.columns&&z.isLocked})}function Tu(S,A){var z=Xo(S);return Jt(Js(A),function(Y,ae){return Y+z[ae.column].map(zu).getOr(0)},0)}function Tc(S){return function(A,z){return Dl(A,z).filter(function(Y){return!(S?od:ob)(A,Y)}).map(function(Y){return{details:Y,pixelDelta:Tu(A,Y)}})}}function Hd(S){return function(A,z){return Zf(A,z).filter(function(Y){return!(S?od:ob)(A,Y.cells)})}}function Ag(S,A){var z=bo.fromTable(S);return Dl(z,A).bind(function(Y){var ae=Y[Y.length-1],ce=Y[0].column,ke=ae.column+ae.colspan,Pe=en(Fe(z.all,function(Ye){return Qe(Ye.cells,function(tt){return tt.column>=ce&&tt.column<ke})}));return Tf(Pe)}).getOr("")}function $f(S,A){return Dl(bo.fromTable(S),A).bind(Tf).getOr("")}function iv(S,A,z,Y){return de(S,function(ae){return function(ce,ke,Pe,Ye){for(var tt=Bt.fromTag("tr"),ft=0;ft<ce;ft++){var mt=Bt.fromTag(Ye<ke||ft<Pe?"th":"td");ft<Pe&&as(mt,"scope","row"),Ye<ke&&as(mt,"scope","col"),uo(mt,Bt.fromTag("br")),uo(tt,mt)}return tt}(A,z,Y,ae)})}function ts(S,A){S.selection.select(A.dom,!0),S.selection.collapse(!0)}function av(S,A,z,Y,ae){var ce=Bd(S),ke={styles:ce,attributes:Ld(S),colGroups:S.getParam("table_use_colgroups",!1,"boolean")};return S.undoManager.ignore(function(){var Pe=function(dt,Et,wt,Ut,Qt,_t){void 0===_t&&(_t=qa);var Ft,Mn,Tt=Bt.fromTag("table"),Dn="cells"!==Qt;Wl(Tt,_t.styles),Ru(Tt,_t.attributes),_t.colGroups&&uo(Tt,(Ft=Et,Mn=Bt.fromTag("colgroup"),de(Ft,function(){return uo(Mn,Bt.fromTag("col"))}),Mn));var rn,pr=Math.min(dt,wt);Dn&&0<wt&&(rn=Bt.fromTag("thead"),uo(Tt,rn),mr(rn,iv(wt,Et,"sectionCells"===Qt?pr:0,Ut)));var En=Bt.fromTag("tbody");return uo(Tt,En),mr(En,iv(Dn?dt-pr:dt,Et,Dn?0:wt,Ut)),Tt}(z,A,ae,Y,zs(S),ke);as(Pe,"data-mce-id","__mce");var Ye,tt,ft,mt=(Ye=Pe,tt=Bt.fromTag("div"),ft=Bt.fromDom(Ye.dom.cloneNode(!0)),uo(tt,ft),tt.dom.innerHTML);S.insertContent(mt),S.addVisual()}),xd(Xl(S),'table[data-mce-id="__mce"]').map(function(Pe){var Ye,tt,ft;return $m(S)?Vg(Pe):E0(S)?gv(Pe):(Fm(S)||U(Ye=ce.width)&&-1!==Ye.indexOf("%"))&&ci(Pe),yf(Pe),Va(Pe,"data-mce-id"),tt=S,le(aa(Pe,"tr"),function(mt){ka(tt,mt.dom),le(aa(mt,"th,td"),function(dt){wc(tt,dt.dom)})}),ft=S,xd(Pe,"td,th").each(xe(ts,ft)),Pe.dom}).getOr(null)}function Ig(S,A,z,Y,ae){function ce(Pe){return ie(Pe)&&0<Pe}return void 0===Y&&(Y={}),ce(A)&&ce(z)?av(S,z,A,Y.headerColumns||0,Y.headerRows||0):(console.error(ae),null)}function sv(S){return function(){return S().fold(function(){return[]},function(A){return Fe(A,function(z){return z.dom})})}}function _0(S){return function(A){var z=0<A.length?xt.some(ou(A)):xt.none();S(z)}}function w0(S,A,z){var Y=wd(S,A,1);1===z||Y<=1?Va(S,A):as(S,A,Math.min(z,Y))}function Gm(S,A,z){return function(Y,ae){for(var ce=0;ce<ae.length;ce++){var ke=S.getStyle(ae[ce],z);if((Y=void 0===Y?ke:Y)!==ke)return""}return Y}(void 0,S.select("td,th",A))}function Jf(S,A,z){z&&S.formatter.apply("align"+z,{},A)}function uv(S,A){Xa.each("left center right".split(" "),function(z){S.formatter.remove("align"+z,{},A)})}function Hu(S){return z0.test(z=S)||F0.test(z)?xt.some({value:(Vt(A=S,"#")?A.substring(1):A).toUpperCase()}):xt.none();var A,z}function il(S){var A=S.toString(16);return(1===A.length?"0"+A:A).toUpperCase()}function Fs(S){return{value:il(S.red)+il(S.green)+il(S.blue)}}function su(S,A,z,Y){return{red:S,green:A,blue:z,alpha:Y}}function Il(S,A,z,Y){return su(parseInt(S,10),parseInt(A,10),parseInt(z,10),parseFloat(Y))}function gs(S){var A=S;return{get:function(){return A},set:function(z){A=z}}}function Ol(S){function A(){return z.get().each(S)}var z=gs(xt.none());return{clear:function(){A(),z.set(xt.none())},isSet:function(){return z.get().isSome()},get:function(){return z.get()},set:function(Y){A(),z.set(xt.some(Y))}}}function Go(){var S=Ol(je);return Mr(Mr({},S),{on:function(A){return S.get().each(A)}})}function Og(S){return ps(S,"menu")}function Gh(S,A){return function(z){var Y;S.execCommand("mceTableApplyCellStyle",!1,((Y={})[A]=z,Y))}}function lv(S,A,z,Y,ae){return function(ce){return ce(Zh(S,A,z,Y,ae))}}function Ln(S,A,z){var Y=Fe(A,function(ae){return{text:ae.title,value:"#"+Hu(ce=ae.value).orThunk(function(){return function(ke){if("transparent"===ke)return xt.some(su(0,0,0,0));var Pe=G_.exec(ke);if(null!==Pe)return xt.some(Il(Pe[1],Pe[2],Pe[3],"1"));var Ye=xv.exec(ke);return null!==Ye?xt.some(Il(Ye[1],Ye[2],Ye[3],Ye[4])):xt.none()}(ce).map(Fs)}).getOrThunk(function(){var ke=document.createElement("canvas");ke.height=1,ke.width=1;var Pe=ke.getContext("2d");Pe.clearRect(0,0,ke.width,ke.height),Pe.fillStyle="#FFFFFF",Pe.fillStyle=ce,Pe.fillRect(0,0,1,1);var Ye=Pe.getImageData(0,0,1,1).data;return Fs(su(Ye[0],Ye[1],Ye[2],Ye[3]))}).value,type:"choiceitem"};var ce});return[{type:"fancymenuitem",fancytype:"colorswatch",initData:{colors:0<Y.length?Y:void 0,allowCustomColors:!1},onAction:function(ae){var ce;S.execCommand("mceTableApplyCellStyle",!1,((ce={})[z]="remove"===ae.value?"":ae.value,ce))}}]}function Zx(S){return function(){var A=S.queryCommandValue("mceTableRowType");S.execCommand("mceTableRowType",!1,{type:"header"===A?"body":"header"})}}function Ta(S){return function(){var A=S.queryCommandValue("mceTableColType");S.execCommand("mceTableColType",!1,{type:"th"===A?"td":"th"})}}function ib(S){return V0.concat((0<(A=ld(Xi(S))).length?xt.some({name:"class",type:"listbox",label:"Class",items:A}):xt.none()).toArray());var A}function nc(S,A){var z=[{name:"borderstyle",type:"listbox",label:"Border style",items:[{text:"Select...",value:""}].concat(ld(_f(S)))},{name:"bordercolor",type:"colorinput",label:"Border color"},{name:"backgroundcolor",type:"colorinput",label:"Background color"}];return{title:"Advanced",name:"advanced",items:"cell"===A?[{name:"borderwidth",type:"input",label:"Border width"}].concat(z):z}}function Um(S){return function(A,z){var Y=A.dom;return{setAttrib:function(ae,ce){S&&!ce||Y.setAttrib(z,ae,ce)},setStyle:function(ae,ce){S&&!ce||Y.setStyle(z,ae,ce)},setFormat:function(ae,ce){S&&!ce||(""===ce?A.formatter.remove(ae,{value:null},z,!0):A.formatter.apply(ae,{value:ce},z))}}}}function El(S){return function(A){return Vt(A,"rgb")?S.toHex(A):A}}function dn(S,A){var z=Bt.fromDom(A);return{borderwidth:Ja(z,"border-width").getOr(""),borderstyle:Ja(z,"border-style").getOr(""),bordercolor:Ja(z,"border-color").map(El(S)).getOr(""),backgroundcolor:Ja(z,"background-color").map(El(S)).getOr("")}}function jm(S){var A=S[0];return le(S.slice(1),function(z){le(Wr(A),function(Y){li(z,function(ae,ce){var ke=A[Y];""!==ke&&Y===ce&&ke!==ae&&(A[Y]="")})})}),A}function ab(S,A,z,Y){return Rt(S,function(ae){return!ne(z.formatter.matchNode(Y,A+ae))}).getOr("")}function Po(S,A){var z=bo.fromTable(S);return Fe(Qe(bo.justCells(z),function(Y){return Ie(A,function(ae){return fr(Y.element,ae)})}),function(Y){return{element:Y.element.dom,column:bo.getColumnAt(z,Y.column).map(function(ae){return ae.element.dom})}})}function al(S,A,z,Y){var ae=Y.getData();Y.close(),S.undoManager.transact(function(){var ce,ke=S,Pe=A,Ye=z,tt=vo(ce=ae,function(ft,mt){return Ye[mt]!==ft});0<za(tt)&&1<=Pe.length&&ea(Pe[0]).each(function(ft){var mt,dt,Et,wt=Po(ft,Pe),Ut=0<za(vo(tt,function(_t,Ft){return"scope"!==Ft&&"celltype"!==Ft})),Qt=mo(tt,"celltype");(Ut||mo(tt,"scope"))&&(mt=ke,dt=ce,Et=1===wt.length,le(wt,function(_t){var Ft,Mn,Tt,Dn,rn,pr,En=_t.element,_r=Et?jg.normal(mt,En):jg.ifTruthy(mt,En),Fr=_t.column.map(function(oo){return Et?jg.normal(mt,oo):jg.ifTruthy(mt,oo)}).getOr(_r),Nr=dt;(Ft=_r).setAttrib("scope",Nr.scope),Ft.setAttrib("class",Nr.class),Ft.setStyle("height",vf(Nr.height)),Fr.setStyle("width",vf(Nr.width)),eb(mt)&&((Mn=_r).setFormat("tablecellbackgroundcolor",(Tt=dt).backgroundcolor),Mn.setFormat("tablecellbordercolor",Tt.bordercolor),Mn.setFormat("tablecellborderstyle",Tt.borderstyle),Mn.setFormat("tablecellborderwidth",vf(Tt.borderwidth))),Et&&(uv(mt,En),Dn=mt,rn=En,Xa.each("top middle bottom".split(" "),function(oo){Dn.formatter.remove("valign"+oo,{},rn)})),dt.halign&&Jf(mt,En,dt.halign),!dt.valign||(pr=dt.valign)&&mt.formatter.apply("valign"+pr,{},En)})),Qt&&ke.execCommand("mceTableCellType",!1,{type:ce.celltype,no_events:!0}),Sc(ke,ft.dom,{structure:Qt,style:Ut})}),S.focus()})}function Wd(S,A){var z,Y,ae,ce,ke,Pe=Lg(A);0!==Pe.length&&(Y=S,z=jm(ea((ae=Pe)[0]).map(function(Ye){return Fe(Po(Ye,ae),function(tt){return mt=Y,dt=tt.element,Et=eb(Y),Ut=mt.dom,Qt=tt.column.getOr(dt),Mr({width:ft(Qt,"width"),height:ft(dt,"height"),scope:Ut.getAttrib(dt,"scope"),celltype:dt.nodeName.toLowerCase(),class:Ut.getAttrib(dt,"class",""),halign:H0(mt,dt),valign:Ao(mt,dt)},Et?dn(Ut,dt):{});function ft(_t,Ft){return Ut.getStyle(_t,Ft)||Ut.getAttrib(_t,Ft)}var mt,dt,Et,Ut,Qt})}).getOrDie()),ce={type:"tabpanel",tabs:[{title:"General",name:"general",items:ib(S)},nc(S,"cell")]},ke={type:"panel",items:[{type:"grid",columns:2,items:ib(S)}]},S.windowManager.open({title:"Cell Properties",size:"normal",body:eb(S)?ce:ke,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:z,onSubmit:xe(al,S,Pe,z)}))}function Ai(S){return cd.concat((0<(A=ld(S.getParam("table_row_class_list",[],"array"))).length?xt.some({name:"class",type:"listbox",label:"Class",items:A}):xt.none()).toArray());var A}function Ua(S,A,z,Y){var ae=Y.getData();Y.close(),S.undoManager.transact(function(){var ce,ke,Pe,Ye,tt,ft,mt,dt=S,Et=A,wt=z,Ut=vo(ce=ae,function(Qt,_t){return wt[_t]!==Qt});0<za(Ut)&&(ke=mo(Ut,"type"),(Pe=!ke||1<za(Ut))&&(Ye=dt,tt=ce,ft=wt,mt=1===Et.length,le(Et,function(Qt){var _t,Ft,Mn,Tt=mt?jg.normal(Ye,Qt):jg.ifTruthy(Ye,Qt),Dn=tt;(_t=Tt).setAttrib("class",Dn.class),_t.setStyle("height",vf(Dn.height)),Cg(Ye)&&((Ft=Tt).setStyle("background-color",(Mn=tt).backgroundcolor),Ft.setStyle("border-color",Mn.bordercolor),Ft.setStyle("border-style",Mn.borderstyle)),tt.align!==ft.align&&(uv(Ye,Qt),Jf(Ye,Qt,tt.align))})),ke&&dt.execCommand("mceTableRowType",!1,{type:ce.type,no_events:!0}),ea(Bt.fromDom(Et[0])).each(function(Qt){return Sc(dt,Qt.dom,{structure:ke,style:Pe})})),S.focus()})}function Eg(S){var A,z,Y,ae,ce,ke,Pe,Ye=(A=Sa(S),z=Dc.selected,ae=(Y=rc(A)).bind(function(tt){return ea(tt)}).map(Am),c0(Y,ae,function(tt,ft){return Qe(ft,function(mt){return Ie(ou(mt.dom.cells),function(dt){return"1"===Ku(dt,z)||fr(dt,tt)})})}).getOr([]));0!==Ye.length&&(ce=jm(Fe(Ye,function(tt){return ft=S,mt=tt.dom,dt=Cg(S),Mr({height:(wt=ft.dom).getStyle(mt,"height")||wt.getAttrib(mt,"height"),class:wt.getAttrib(mt,"class",""),type:ea(Bt.fromDom(Et=mt)).map(function(Ut){var Qt={selection:ou(Et.cells)};return ms(Ut,Qt)}).getOr(""),align:H0(ft,mt)},dt?dn(wt,mt):{});var ft,mt,dt,Et,wt})),ke={type:"tabpanel",tabs:[{title:"General",name:"general",items:Ai(S)},nc(S,"row")]},Pe={type:"panel",items:[{type:"grid",columns:2,items:Ai(S)}]},S.windowManager.open({title:"Row Properties",size:"normal",body:Cg(S)?ke:Pe,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:ce,onSubmit:xe(Ua,S,Fe(Ye,function(tt){return tt.dom}),ce)}))}function F_(S,A,z,Y){var ae=S.dom,ce=Y.getData(),ke=vo(ce,function(Pe,Ye){return z[Ye]!==Pe});Y.close(),""===ce.class&&delete ce.class,S.undoManager.transact(function(){var Pe,Ye,tt,ft,mt;A||(Pe=parseInt(ce.cols,10)||1,Ye=parseInt(ce.rows,10)||1,A=av(S,Pe,Ye,0,0)),0<za(ke)&&(function(dt,Et,wt){var Ut,Qt=dt.dom,_t={},Ft={};if(_t.class=wt.class,Ft.height=vf(wt.height),Qt.getAttrib(Et,"width")&&!Qo(dt)?_t.width=(Ut=wt.width)?Ut.replace(/px$/,""):"":Ft.width=vf(wt.width),Qo(dt)?(Ft["border-width"]=vf(wt.border),Ft["border-spacing"]=vf(wt.cellspacing)):(_t.border=wt.border,_t.cellpadding=wt.cellpadding,_t.cellspacing=wt.cellspacing),Qo(dt)&&Et.children)for(var Mn=0;Mn<Et.children.length;Mn++)tp(Qt,Et.children[Mn],{"border-width":vf(wt.border),padding:vf(wt.cellpadding)}),zd(dt)&&tp(Qt,Et.children[Mn],{"border-color":wt.bordercolor});zd(dt)&&(Ft["background-color"]=wt.backgroundcolor,Ft["border-color"]=wt.bordercolor,Ft["border-style"]=wt.borderstyle),_t.style=Qt.serializeStyle(Mr(Mr({},Bd(dt)),Ft)),Qt.setAttribs(Et,Mr(Mr({},Ld(dt)),_t))}(S,A,ce),((tt=ae.select("caption",A)[0])&&!ce.caption||!tt&&ce.caption)&&S.execCommand("mceTableToggleCaption"),""===ce.align?uv(S,A):Jf(S,A,ce.align)),S.focus(),S.addVisual(),0<za(ke)&&(mt=!(ft=mo(ke,"caption"))||1<za(ke),Sc(S,A,{structure:ft,style:mt}))})}function qm(S,A){var z,Y,ae,ce,ke,Pe,Ye,tt,ft,mt,dt,Et,wt,Ut,Qt,_t,Ft,Mn,Tt,Dn=S.dom,rn=(ae=zd(Y=S),tt=Bd(Y),ft=Ld(Y),mt=ae?(ce=Y.dom,{borderstyle:ma(tt,"border-style").getOr(""),bordercolor:El(ce)(ma(tt,"border-color").getOr("")),backgroundcolor:El(ce)(ma(tt,"background-color").getOr(""))}):{},Mr(Mr(Mr(Mr(Mr(Mr({},{height:"",width:"100%",cellspacing:"",cellpadding:"",caption:!1,class:"",align:"",border:""}),tt),ft),mt),(Ye=tt["border-width"],Qo(Y)&&Ye?{border:Ye}:ma(ft,"border").fold(function(){return{}},function(Yr){return{border:Yr}}))),(ke=ma(tt,"border-spacing").or(ma(ft,"cellspacing")).fold(function(){return{}},function(Yr){return{cellspacing:Yr}}),Pe=ma(tt,"border-padding").or(ma(ft,"cellpadding")).fold(function(){return{}},function(Yr){return{cellpadding:Yr}}),Mr(Mr({},ke),Pe))));!1===A?(z=Dn.getParent(S.selection.getStart(),"table",S.getBody()))?(Et=z,wt=zd(dt=S),Ft=dt.dom,Mn=Qo(dt)?Ft.getStyle(Et,"border-spacing")||Ft.getAttrib(Et,"cellspacing"):Ft.getAttrib(Et,"cellspacing")||Ft.getStyle(Et,"border-spacing"),Tt=Qo(dt)?Gm(Ft,Et,"padding")||Ft.getAttrib(Et,"cellpadding"):Ft.getAttrib(Et,"cellpadding")||Gm(Ft,Et,"padding"),rn=Mr({width:Ft.getStyle(Et,"width")||Ft.getAttrib(Et,"width"),height:Ft.getStyle(Et,"height")||Ft.getAttrib(Et,"height"),cellspacing:Mn,cellpadding:Tt,border:(Ut=Ft,_t=Ja(Bt.fromDom(Qt=Et),"border-width"),Qo(dt)&&_t.isSome()?_t.getOr(""):Ut.getAttrib(Qt,"border")||Gm(dt.dom,Qt,"border-width")||Gm(dt.dom,Qt,"border")),caption:!!Ft.select("caption",Et)[0],class:Ft.getAttrib(Et,"class",""),align:H0(dt,Et)},wt?dn(Ft,Et):{})):zd(S)&&(rn.borderstyle="",rn.bordercolor="",rn.backgroundcolor=""):(rn.cols="1",rn.rows="1",zd(S)&&(rn.borderstyle="",rn.bordercolor="",rn.backgroundcolor=""));var pr=ld(Cl(S));0<pr.length&&rn.class&&(rn.class=rn.class.replace(/\s*mce\-item\-table\s*/g,""));var En,_r,Fr,Nr,oo={type:"grid",columns:2,items:(En=pr,_r=A?[{type:"input",name:"cols",label:"Cols",inputMode:"numeric"},{type:"input",name:"rows",label:"Rows",inputMode:"numeric"}]:[],Fr=S.getParam("table_appearance_options",!0,"boolean")?[{type:"input",name:"cellspacing",label:"Cell spacing",inputMode:"numeric"},{type:"input",name:"cellpadding",label:"Cell padding",inputMode:"numeric"},{type:"input",name:"border",label:"Border width"},{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[],Nr=0<En.length?[{type:"listbox",name:"class",label:"Class",items:En}]:[],_r.concat([{type:"input",name:"width",label:"Width"},{type:"input",name:"height",label:"Height"}]).concat(Fr).concat([{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]}]).concat(Nr))},So=zd(S)?{type:"tabpanel",tabs:[{title:"General",name:"general",items:[oo]},nc(S,"table")]}:{type:"panel",items:[oo]};S.windowManager.open({title:"Table Properties",size:"normal",body:So,onSubmit:xe(F_,S,z,rn),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:rn})}function Xm(S){return Gd(Sa(S),Fu(S))}function S0(S,A){return ea(S,A).bind(function(z){var Y=Dm(z);return pn(Y,function(ae){return fr(S,ae)}).map(function(ae){return{index:ae,all:Y}})})}function Mc(S,A){var z=S.document.createRange();return z.selectNode(A.dom),z}function sb(S,A){var z=S.document.createRange();return _v(z,A),z}function ub(S,A,z){var Y,ae=S.document.createRange(),ce=ae;return A.fold(function(ke){ce.setStartBefore(ke.dom)},function(ke,Pe){ce.setStart(ke.dom,Pe)},function(ke){ce.setStartAfter(ke.dom)}),Y=ae,z.fold(function(ke){Y.setEndBefore(ke.dom)},function(ke,Pe){Y.setEnd(ke.dom,Pe)},function(ke){Y.setEndAfter(ke.dom)}),ae}function ya(S,A,z,Y,ae){var ce=S.document.createRange();return ce.setStart(A.dom,z),ce.setEnd(Y.dom,ae),ce}function $x(S){return{left:S.left,top:S.top,right:S.right,bottom:S.bottom,width:S.width,height:S.height}}function C0(S,A,z){return A(Bt.fromDom(z.startContainer),z.startOffset,Bt.fromDom(z.endContainer),z.endOffset)}function lb(S,A){var z,Y,ae,ce=(z=S,A.match({domRange:function(ke){return{ltr:j(ke),rtl:xt.none}},relative:function(ke,Pe){return{ltr:Yi(function(){return ub(z,ke,Pe)}),rtl:Yi(function(){return xt.some(ub(z,Pe,ke))})}},exact:function(ke,Pe,Ye,tt){return{ltr:Yi(function(){return ya(z,ke,Pe,Ye,tt)}),rtl:Yi(function(){return xt.some(ya(z,Ye,tt,ke,Pe))})}}}));return(ae=(Y=ce).ltr()).collapsed?Y.rtl().filter(function(ke){return!1===ke.collapsed}).map(function(ke){return Nl.rtl(Bt.fromDom(ke.endContainer),ke.endOffset,Bt.fromDom(ke.startContainer),ke.startOffset)}).getOrThunk(function(){return C0(0,Nl.ltr,ae)}):C0(0,Nl.ltr,ae)}function ei(S,A){return lb(S,A).match({ltr:function(z,Y,ae,ce){var ke=S.document.createRange();return ke.setStart(z.dom,Y),ke.setEnd(ae.dom,ce),ke},rtl:function(z,Y,ae,ce){var ke=S.document.createRange();return ke.setStart(ae.dom,ce),ke.setEnd(z.dom,Y),ke}})}function cv(S,A){return{parent:j(xt.from(S.dom.documentElement).map(Bt.fromDom).getOr(S)),view:j(S),origin:j(wu(0,0)),isResizable:A}}function k0(S){return Eh(S).exists(function(A){return Pg.test(A)})}function Jx(S){return Eh(S).exists(function(A){return M0.test(A)})}function Ym(S){return Eh(S).isNone()}function T0(){return{transformRow:ye,transformCell:jx}}function hi(S,A){function z(ae){if(rl(ae))return mv((ke={element:ae}).element)?S.colgroup(ke):S.row(ke);var ce,ke,Pe=(ce=A(ae),Yh(ce.element)?S.col(ce):S.cell(ce));return Y=xt.some({item:ae,replacement:Pe}),Pe}void 0===A&&(A=rv);var Y=xt.none();return{getOrInit:function(ae,ce){return Y.fold(function(){return z(ae)},function(ke){return ce(ae,ke.item)?ke.replacement:z(ae)})}}}function nr(S){return function(A){function z(ae){var ce=A.replace(ae,S,"td"===S?{scope:null}:{});return Y.push({item:ae,sub:ce}),ce}var Y=[];return{replaceOrInit:function(ae,ce){return rl(ae)||Yh(ae)?ae:(ke=ae,Pe=ce,Rt(Y,function(Ye){return Pe(Ye.item,ke)}).fold(function(){return z(ae)},function(Ye){return ce(ae,Ye.item)?Ye.sub:z(ae)}));var ke,Pe}}}}function Vs(S){return{unmerge:function(A){var z=x0(A);return z.each(function(Y){return as(A,"scope",Y)}),function(){var Y=S.cell({element:A,colspan:1,rowspan:1});return gc(Y,"width"),gc(A,"width"),z.each(function(ae){return as(Y,"scope",ae)}),Y}},merge:function(A){return gc(A[0],"width"),function(){var z=Mm(Fe(A,x0));if(0===z.length)return xt.none();var Y=z[0],ae=["row","col"];return Ie(z,function(ce){return ce!==Y&&$e(ae,ce)})?xt.none():xt.from(Y)}().fold(function(){return Va(A[0],"scope")},function(z){return as(A[0],"scope",z+"group")}),j(A[0])}}}var Pg=/(\d+(\.\d+)?)%/,M0=/(\d+(\.\d+)?)px|em/,cb=Ti("col"),Qx=j(Pg),Ng=Ti("col"),Rg=function(S){return Eh(S).fold(function(){return{width:z=Id(A=S,Jc),pixelWidth:z,getWidths:function(ae,ce){return Yp(ae,A,ce)},getCellDelta:Y=j(0),singleColumnWidth:j([0]),minCellWidth:Y,setElementWidth:je,adjustTableWidth:je,isRelative:!0,label:"none"};var A,z,Y},function(A){return z=S,Y=A,(null!==Qx().exec(Y)?Sr:Wf)(z);var z,Y})},e1=Wf,db=Sr,V_=["img","br"],Cf=function(S,A){var z=function(Y){for(var ae=is(Y),ce=ae.length-1;0<=ce;ce--){var ke=ae[ce];if(A(ke))return xt.some(ke);var Pe=z(ke);if(Pe.isSome())return Pe}return xt.none()};return z(S)},D0={scope:["row","col"]},Dc={selected:"data-mce-selected",selectedSelector:"td[data-mce-selected],th[data-mce-selected]",firstSelected:"data-mce-first-selected",firstSelectedSelector:"td[data-mce-first-selected],th[data-mce-first-selected]",lastSelected:"data-mce-last-selected",lastSelectedSelector:"td[data-mce-last-selected],th[data-mce-last-selected]"},Gd=R_("th,td,caption"),rc=R_("th,td"),Lg=Od,H_=Ns([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Ac=Mr({},H_),Zm=Ki(function(S){return S<0}),Uh=Ki(nt),Bg=Ns([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),jh=Mr(Mr({},Bg),{from:function(S){return jt(S,"%")?Uf("%",Bg.percent,S):jt(S,"px")?Uf("px",Bg.pixels,S):Bg.invalid(S)}}),Pa=function(S){if(0===S.length)return S;var A,z,Y=ht(S,function(ce,ke){var Pe=jh.from(ke).fold(function(){return{value:ke,remainder:0}},function(Ye){return tt=Ye,{value:(ft=Math.floor(tt))+"px",remainder:tt-ft};var tt,ft},function(Ye){return{value:Ye+"%",remainder:0}});return{output:[Pe.value].concat(ce.output),remainder:ce.remainder+Pe.remainder}},{output:[],remainder:0}),ae=Y.output;return ae.slice(0,ae.length-1).concat([(A=ae[ae.length-1],z=Math.round(Y.remainder),jh.from(A).fold(j(A),function(ce){return ce+z+"px"},function(ce){return ce+z+"%"}))])},A0=jh.from,uu=jf(["compare","extract","mutate","sink"]),I0=jf(["element","start","stop","destroy"]),id=jf(["forceDrop","drop","move","delayDrop"]),dv=function(S,A,z,Y){S.dom.removeEventListener(A,z,Y)},fv=nt,Qf=$p,eh=qf("ephox-dragster").resolve,zg=uu({compare:function(S,A){return wu(A.left-S.left,A.top-S.top)},extract:function(S){return xt.some(wu(S.x,S.y))},sink:function(S,A){var z,Y,ae,ce=(z=A,Y=Mr({layerClass:eh("blocker")},z),as(ae=Bt.fromTag("div"),"role","presentation"),Wl(ae,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Lh(ae,eh("blocker")),Lh(ae,Y.layerClass),{element:j(ae),destroy:function(){ls(ae)}}),ke=Ss(ce.element(),"mousedown",S.forceDrop),Pe=Ss(ce.element(),"mouseup",S.drop),Ye=Ss(ce.element(),"mousemove",S.move),tt=Ss(ce.element(),"mouseout",S.delayDrop);return I0({element:ce.element,start:function(ft){uo(ft,ce.element())},stop:function(){ls(ce.element())},destroy:function(){ce.destroy(),Pe.unbind(),Ye.unbind(),tt.unbind(),ke.unbind()}})},mutate:function(S,A){S.mutate(A.left,A.top)}}),Km=function(S){return S.dom.contentEditable},t1=qf("ephox-snooker").resolve,Qs=t1("resizer-bar"),fb=t1("resizer-rows"),ad=t1("resizer-cols"),O0=t1("resizer-bar-dragging"),Ud={structure:!1,style:!0},si={structure:!0,style:!1},hb={structure:!0,style:!0},Ic={"border-collapse":"collapse",width:"100%"},Fg=de(5,function(S){var A=S+1+"px";return{title:A,value:A}}),W_=Fe(["Solid","Dotted","Dashed","Double","Groove","Ridge","Inset","Outset","None","Hidden"],function(S){return{title:S,value:S.toLowerCase()}}),n1={border:"1"},hv="preservetable",$m=function(S){return"fixed"===Sg(S)||!1===Ga(S)},E0=function(S){return"responsive"===Sg(S)},ci=function(S){var A=Qy(S);Rh(S,xt.some(A),xt.none()),Cc(S)},Vg=function(S){var A=Jc(S)+"px";Rh(S,xt.some(A),xt.none()),Cc(S)},gv=function(S){gc(S,"width");var A=Nx(S);le(0<A.length?A:Dm(S),function(z){gc(z,"width"),Cc(z)}),Cc(S)},gb="bar-",P0=function(S,A,z){return S.property().isText(A)&&0===S.property().getText(A).trim().length||S.property().isComment(A)?z(A).bind(function(Y){return P0(S,Y,z).orThunk(function(){return xt.some(Y)})}):xt.none()},Mu=function(S,A){var z=P0(S,A,S.query().prevSibling).getOr(A);if(S.property().isText(z))return Qp(z,au(S,z));var Y=S.property().children(z);return 0<Y.length?Mu(S,Y[Y.length-1]):Qp(z,au(S,z))},Hg=Mu,kf=Ky(),qh=Ti("th"),Tf=function(S){var A=Qe(S,function(z){return qh(z.element)});return 0===A.length?xt.some("td"):A.length===S.length?xt.some("th"):xt.none()},Jm=kc,sd=ev,Wg=Fh,Xh=function(S){return{isValue:nt,isError:Ee,getOr:j(S),getOrThunk:j(S),getOrDie:j(S),or:function(A){return Xh(S)},orThunk:function(A){return Xh(S)},fold:function(A,z){return z(S)},map:function(A){return Xh(A(S))},mapError:function(A){return Xh(S)},each:function(A){A(S)},bind:function(A){return A(S)},exists:function(A){return A(S)},forall:function(A){return A(S)},toOptional:function(){return xt.some(S)}}},Pl=function(S){return{isValue:Ee,isError:nt,getOr:ye,getOrThunk:function(A){return A()},getOrDie:function(){return A=String(S),function(){throw new Error(A)}();var A},or:ye,orThunk:function(A){return A()},fold:function(A,z){return A(S)},map:function(A){return Pl(S)},mapError:function(A){return Pl(A(S))},each:je,bind:function(A){return Pl(S)},exists:Ee,forall:nt,toOptional:xt.none}},Du={value:Xh,error:Pl,fromOption:function(S,A){return S.fold(function(){return Pl(A)},Xh)}},Yh=Ti("col"),mv=Ti("colgroup"),r1=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],mb=Ky(),Oc=Dg("thead",!0),Gg=Dg("tbody",!1),ns=Dg("tfoot",!1),Ug=nr("th"),ja=nr("td"),pv=Cs(function(S,A,z,Y){var ae=A[0].row;return yi(ht(Mg(A),function(ce,ke){return{grid:Hh(ce.grid,ae,ke.row+ce.delta,z,Y.getOrInit),delta:ce.delta+1}},{grid:S,delta:0}).grid,ae,A[0].column)},Dl,je,je,hi),N0=Cs(function(S,A,z,Y){var ae=Mg(A),ce=ae[ae.length-1],ke=ce.row+ce.rowspan;return yi(ht(ae,function(Pe,Ye){return Hh(Pe,ke,Ye.row,z,Y.getOrInit)},S),ke,A[0].column)},Dl,je,je,hi),Qm=Cs(function(S,A,z,Y){var ae=A.details,ce=Js(ae),ke=ce[0].column;return yi(ht(ce,function(Pe,Ye){return{grid:Ks(Pe.grid,ke,Ye.column+Pe.delta,z,Y.getOrInit),delta:Pe.delta+1}},{grid:S,delta:0}).grid,ae[0].row,ke)},Tc(!0),Vd,je,hi),Mf=Cs(function(S,A,z,Y){var ae=A.details,ce=ae[ae.length-1],ke=ce.column+ce.colspan;return yi(ht(Js(ae),function(Pe,Ye){return Ks(Pe,ke,Ye.column,z,Y.getOrInit)},S),ae[0].row,ke)},Tc(!1),Vd,je,hi),R0=Cs(function(S,A,z,Y){var ae,ce,ke=Js(A.details),Pe=(ae=S,ce=Fe(ke,function(tt){return tt.column}),Ot(ae,function(tt){var mt=ht(ce,function(dt,Et){return 0<=Et&&Et<dt.length?dt.slice(0,Et).concat(dt.slice(Et+1)):dt},tt.cells);return 0<mt.length?[nu(tt.element,mt,tt.section,tt.isNew)]:[]}));return yi(Pe,ke[0].row,Math.min(ke[0].column,0<Pe.length?Pe[0].cells.length-1:0))},function(S,A){return tl(S,A).map(function(z){return{details:z,pixelDelta:-Tu(S,z)}})},Vd,ol,hi),vv=Cs(function(S,A,z,Y){var ae,ce,ke,Pe,Ye=Mg(A),tt=(ae=Ye[0].row,ce=Ye[Ye.length-1].row,Pe=(ke=sa(S)).rows,ke.cols.concat(Pe.slice(0,ae)).concat(Pe.slice(ce+1)));return yi(tt,Math.min(A[0].row,0<tt.length?tt.length-1:0),A[0].column)},Dl,je,ol,hi),lu=Cs(function(S,A,z,Y){return yi($s(S,Fe(Js(A),function(ae){return ae.column}),!0,z,Y.replaceOrInit),A[0].row,A[0].column)},tl,je,je,Ug),L0=Cs(function(S,A,z,Y){return yi($s(S,Fe(Js(A),function(ae){return ae.column}),!1,z,Y.replaceOrInit),A[0].row,A[0].column)},tl,je,je,ja),th=Cs(Oc,tl,je,je,Ug),B0=Cs(Gg,tl,je,je,ja),jd=Cs(ns,tl,je,je,ja),Bo=Cs(function(S,A,z,Y){return yi(es(S,A,z,Y.replaceOrInit),A[0].row,A[0].column)},tl,je,je,Ug),ca=Cs(function(S,A,z,Y){return yi(es(S,A,z,Y.replaceOrInit),A[0].row,A[0].column)},tl,je,je,ja),o1=Cs(function(S,A,z,Y){var ae=A.cells;return function Tg(S){function A(ce){return"br"===Xr(ce)}var Y,ae=0===(Y=Ot(S,function(ce){var ke=is(ce);return Gn(ke,function(Pe){return A(Pe)||Is(Pe)&&0===xu(Pe).trim().length})?[]:ke.concat(function z(ce){return Nh(ce).bind(function(ke){var Pe=Fa(ke).map(function(Ye){return!!ov(Ye)||(tt=Ye,!!$e(["br","img","hr","input"],mb.property().name(tt))&&"img"!==Xr(Ye));var tt}).getOr(!1);return Ir(ke).map(function(Ye){return!0===Pe||"li"===Xr(tt=Ye)||zt(tt,Kf).isSome()||A(ke)||ov(Ye)&&!fr(ce,Ye)?[]:[Bt.fromTag("br")];var tt})}).getOr([])}(ce))})).length?[Bt.fromTag("br")]:Y;Xs(S[0]),mr(S[0],ae)}(ae),Wm(function(ce,ke,Pe){var Ye=sa(ce).rows;if(0===Ye.length)return ce;for(var tt=ke.startRow;tt<=ke.finishRow;tt++)for(var ft=ke.startCol;ft<=ke.finishCol;ft++){var mt=Ye[tt],dt=Ul(mt,ft).isLocked;ml(mt,ft,$a(Pe(),!1,dt))}return ce}(S,A.bounds,Y.merge(ae)),xt.from(ae[0]))},qx,Wh,je,Vs),qd=Cs(function(S,A,z,Y){return Wm(ht(A,function(ae,ce){return Xx(ae,ce,z,Y.unmerge(ce))},S),xt.from(A[0]))},b0,Wh,je,Vs),yv=Cs(function(S,A,z,Y){var ce,ke=(ce=A.generators,Vh(bo.fromTable(A.clipboard),ce,!0));return function Hm(S,A,z,Y,ae){var ce,ke,Pe,Ye=ys(A),tt=(ce=S,ke=Ye,Pe=pl(A[0]),{row:sa(A).cols.length+ce.row,column:Rt(de(Pe-ce.column,function(dt){return dt+ce.column}),function(dt){return Gn(ke,function(Et){return Et!==dt})}).getOr(Pe-1)}),ft=sa(z).rows,mt=Vu(tt,ft,Ye);return function(dt,Et,wt){if(dt.row>=Et.length||dt.column>pl(Et[0]))return Du.error("invalid start address out of table bounds, row: "+dt.row+", column: "+dt.column);var Ut=Et.slice(dt.row),Qt=Ut[0].cells.slice(dt.column),_t=pl(wt[0]);return Du.value({rowDelta:Ut.length-wt.length,colDelta:Qt.length-_t})}(tt,A,ft).map(function(dt){var Et=Mr(Mr({},dt),{colDelta:dt.colDelta-mt.length}),wt=No(A,Et,Y),Ut=ys(wt),Qt=Vu(tt,ft,Ut);return function(_t,Ft,Mn,Tt,Dn,rn){for(var pr,En,_r,Fr,Nr,oo=_t.row,So=_t.column,Yr=oo+Mn.length,Oo=So+pl(Mn[0])+rn.length,ti=ln(rn,nt),$i=oo;$i<Yr;$i++)for(var Kn,Si,zo,qo=0,Da=So;Da<Oo;Da++)ti[Da]?qo++:(Fr=void 0,Fr=xe(Dn,Ul((pr=Ft)[En=$i],_r=Da).element),Nr=pr[En],1<pr.length&&1<pl(Nr)&&(0<_r&&Fr(wa(Nr,_r-1))||_r<Nr.cells.length-1&&Fr(wa(Nr,_r+1))||0<En&&Fr(wa(pr[En-1],_r))||En<pr.length-1&&Fr(wa(pr[En+1],_r)))&&Xx(Ft,wa(Ft[$i],Da),Dn,Tt.cell),Si=(Kn=Ul(Mn[$i-oo],Da-So-qo)).element,zo=Tt.replace(Si),ml(Ft[$i],Da,$a(zo,!0,Kn.isLocked)));return Ft}(tt,wt,ft,Y,ae,Qt)})}({row:A.row,column:A.column},S,ke,A.generators,z).fold(function(){return Wm(S,xt.some(A.element))},function(Pe){return yi(Pe,A.row,A.column)})},function(S,A){return Vp(A.element).bind(function(z){return ra(S,z).map(function(Y){return Mr(Mr({},Y),{generators:A.generators,clipboard:A.clipboard})})})},Wh,je,hi),i1=Cs(function(S,A,z,Y){var ae=sa(S).rows;return yi(Vo(A.cells[0].column,S,rd(A.clipboard,A.generators,ae[A.cells[0].row]),A.generators,z),A.cells[0].row,A.cells[0].column)},Hd(!0),je,je,hi),a1=Cs(function(S,A,z,Y){var ae=sa(S).rows;return yi(Vo(A.cells[A.cells.length-1].column+A.cells[A.cells.length-1].colspan,S,rd(A.clipboard,A.generators,ae[A.cells[0].row]),A.generators,z),A.cells[0].row,A.cells[0].column)},Hd(!1),je,je,hi),Wu=Cs(function(S,A,z,Y){var ae=sa(S).rows,ce=A.cells[0].row;return yi(Zo(ce,S,rd(A.clipboard,A.generators,ae[ce]),A.generators,z),A.cells[0].row,A.cells[0].column)},Zf,je,je,hi),bv=Cs(function(S,A,z,Y){var ae=sa(S).rows;return yi(Zo(A.cells[A.cells.length-1].row+A.cells[A.cells.length-1].rowspan,S,rd(A.clipboard,A.generators,ae[A.cells[0].row]),A.generators,z),A.cells[0].row,A.cells[0].column)},Zf,je,je,hi),ms=function(S,A){var z=bo.fromTable(S);return Dl(z,A).bind(function(Y){var ae=Y[Y.length-1],ce=Y[0].row,ke=ae.row+ae.rowspan;return function(){var Pe=Fe(z.all.slice(ce,ke),function(mt){return Jl(mt).type}),Ye=$e(Pe,"header"),tt=$e(Pe,"footer");if(Ye||tt){var ft=$e(Pe,"body");return!Ye||ft||tt?Ye||ft||!tt?xt.none():xt.some("footer"):xt.some("header")}return xt.some("body")}()}).getOr("")},qa={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Xa=tinymce.util.Tools.resolve("tinymce.util.Tools"),ud=[{text:"None",value:""},{text:"Top",value:"top"},{text:"Middle",value:"middle"},{text:"Bottom",value:"bottom"}],z0=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,F0=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,G_=/^rgb\((\d+),\s*(\d+),\s*(\d+)\)/,xv=/^rgba\((\d+),\s*(\d+),\s*(\d+),\s*(\d?(?:\.\d+)?)\)/,ld=function(S){return Fe(S,function(A){var z=A.text||A.title;return Og(A)?{text:z,items:ld(A.menu)}:{text:z,value:A.value}})},Zh=function(S,A,z,Y,ae){return Fe(z,function(ce){var ke,Pe,Ye,tt,ft=ce.text||ce.title;return Og(ce)?{type:"nestedmenuitem",text:ft,getSubmenuItems:function(){return Zh(S,A,ce.menu,Y,ae)}}:{text:ft,type:"togglemenuitem",onAction:function(){return ae(ce.value)},onSetup:(ke=S,Pe=A,Ye=Y,tt=ce.value,function(mt){function dt(){function Ut(_t){return ke.formatter.match(Ye,{value:tt},_t.dom,wt)}var Qt=Lg(Pe);wt?(mt.setActive(!Ie(Qt,Ut)),Et.set(ke.formatter.formatChanged(Ye,function(_t){return mt.setActive(!_t)},!0))):(mt.setActive(Gn(Qt,Ut)),Et.set(ke.formatter.formatChanged(Ye,mt.setActive,!1,{value:tt})))}var Et=Ol(function(Ut){return Ut.unbind()}),wt=!yn(tt);return ke.initialized?dt():ke.on("init",dt),Et.clear})}})},ep=function(S){return Ot(S,function(A){return Og(A)?[Mr(Mr({},A),{menu:ep(A.menu)})]:yn(A.value)?[A]:[]})},V0=[{name:"width",type:"input",label:"Width"},{name:"height",type:"input",label:"Height"},{name:"celltype",type:"listbox",label:"Cell type",items:[{text:"Cell",value:"td"},{text:"Header cell",value:"th"}]},{name:"scope",type:"listbox",label:"Scope",items:[{text:"None",value:""},{text:"Row",value:"row"},{text:"Column",value:"col"},{text:"Row group",value:"rowgroup"},{text:"Column group",value:"colgroup"}]},{name:"halign",type:"listbox",label:"Horizontal align",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{name:"valign",type:"listbox",label:"Vertical align",items:ud}],jg={normal:Um(!1),ifTruthy:Um(!0)},H0=xe(ab,["left","center","right"],"align"),Ao=xe(ab,["top","middle","bottom"],"valign"),cd=[{type:"listbox",name:"type",label:"Row type",items:[{text:"Header",value:"header"},{text:"Body",value:"body"},{text:"Footer",value:"footer"}]},{type:"listbox",name:"align",label:"Alignment",items:[{text:"None",value:""},{text:"Left",value:"left"},{text:"Center",value:"center"},{text:"Right",value:"right"}]},{label:"Height",name:"height",type:"input"}],tp=function(S,A,z,Y){if("TD"===A.tagName||"TH"===A.tagName)U(z)?S.setStyle(A,z,Y):S.setStyle(A,z);else if(A.children)for(var ae=0;ae<A.children.length;ae++)tp(S,A.children[ae],z,Y)},pb={remove_similar:!0,inherit:!1},fo=Mr({selector:"td,th"},pb),s1={tablecellbackgroundcolor:Mr({styles:{backgroundColor:"%value"}},fo),tablecellverticalalign:Mr({styles:{"vertical-align":"%value"}},fo),tablecellbordercolor:Mr({styles:{borderColor:"%value"}},fo),tablecellclass:Mr({classes:["%value"]},fo),tableclass:Mr({selector:"table",classes:["%value"]},pb),tablecellborderstyle:Mr({styles:{borderStyle:"%value"}},fo),tablecellborderwidth:Mr({styles:{borderWidth:"%value"}},fo)},np=Ns([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),Ec=Mr(Mr({},np),{none:function(S){return np.none(S=void 0===S?void 0:S)}}),W0=function(S,A,z,Y,ae){void 0===ae&&(ae=nt);var ce=1===Y;if(!ce&&z<=0)return Ec.first(S[0]);if(ce&&z>=S.length-1)return Ec.last(S[S.length-1]);var ke=z+Y,Pe=S[ke];return ae(Pe)?Ec.middle(A,Pe):W0(S,A,ke,Y,ae)},G0=function(S,A,z,Y){return{start:S,soffset:A,finish:z,foffset:Y}},Pc=Ns([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),ks={before:Pc.before,on:Pc.on,after:Pc.after,cata:function(S,A,z,Y){return S.fold(A,z,Y)},getStart:function(S){return S.fold(ye,ye,ye)}},rp=Ns([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),cu={domRange:rp.domRange,relative:rp.relative,exact:rp.exact,exactFromRange:function(S){return rp.exact(S.start,S.soffset,S.finish,S.foffset)},getWin:function(S){var A=S.match({domRange:function(z){return Bt.fromDom(z.startContainer)},relative:function(z,Y){return ks.getStart(z)},exact:function(z,Y,ae,ce){return z}});return Bt.fromDom(qs(A).dom.defaultView)},range:G0},_v=function(S,A){return S.selectNodeContents(A.dom)},Nl=Ns([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]);function sl(S,A,z){return A>=S.left&&A<=S.right&&z>=S.top&&z<=S.bottom}function oc(S,A){return A-S.left<S.right-A}function Xd(S,A,z){var Y=S.dom.createRange();return Y.selectNode(A.dom),Y.collapse(z),Y}function Rl(S,A,z){var Y=S.dom.createRange();Y.selectNode(A.dom);var ae=oc(Y.getBoundingClientRect(),z);return(!0===ae?Ls:Nh)(A).map(function(ce){return Xd(S,ce,ae)})}function Kh(S,A,z){var Y=oc(A.dom.getBoundingClientRect(),z);return xt.some(Xd(S,A,Y))}function ip(S,A){var z=Xr(S);return"input"===z?ks.after(S):$e(["br","img"],z)?0===A?ks.before(S):ks.after(S):ks.on(S,A)}function U_(S,A){var z=S.fold(ks.before,ip,ks.after),Y=A.fold(ks.before,ip,ks.after);return cu.relative(z,Y)}function nh(S,A,z,Y){var ae=ip(S,A),ce=ip(z,Y);return cu.relative(ae,ce)}function Ma(S){return xt.from(S.getSelection())}function ap(S,A){Ma(S).each(function(z){z.removeAllRanges(),z.addRange(A)})}function vb(S,A,z,Y,ae){ap(S,ya(S,A,z,Y,ae))}function Gu(S,A){return lb(S,A).match({ltr:function(z,Y,ae,ce){vb(S,z,Y,ae,ce)},rtl:function(z,Y,ae,ce){Ma(S).each(function(ke){if(ke.setBaseAndExtent)ke.setBaseAndExtent(z.dom,Y,ae.dom,ce);else if(ke.extend)try{Ye=ae,tt=ce,(Pe=ke).collapse(z.dom,Y),Pe.extend(Ye.dom,tt)}catch{vb(S,ae,ce,z,Y)}else vb(S,ae,ce,z,Y);var Pe,Ye,tt})}})}function yb(S,A,z,Y,ae){Gu(S,nh(A,z,Y,ae))}function wv(S,A,z){Gu(S,U_(A,z))}function u1(S){if(0<S.rangeCount){var A=S.getRangeAt(0),z=S.getRangeAt(S.rangeCount-1);return xt.some(G0(Bt.fromDom(A.startContainer),A.startOffset,Bt.fromDom(z.endContainer),z.endOffset))}return xt.none()}function U0(S){if(null===S.anchorNode||null===S.focusNode)return u1(S);var A,z,Y,ae,ce,ke,Pe,Ye,tt,ft,mt,dt=Bt.fromDom(S.anchorNode),Et=Bt.fromDom(S.focusNode);return ke=z=S.anchorOffset,Pe=Y=Et,Ye=ae=S.focusOffset,(tt=js(ce=A=dt).dom.createRange()).setStart(ce.dom,ke),tt.setEnd(Pe.dom,Ye),ft=tt,mt=fr(A,Y)&&z===ae,ft.collapsed&&!mt?xt.some(G0(dt,S.anchorOffset,Et,S.focusOffset)):u1(S)}function rh(S,A,z){ap(S,((z=void 0===z||z)?sb:Mc)(S,A))}function qg(S){return Ma(S).filter(function(A){return 0<A.rangeCount}).bind(U0).map(function(A){return cu.exact(A.start,A.soffset,A.finish,A.foffset)})}function po(S,A,z){return Jg(S,A,(ae=Bs,S0(Y=z,void 0).fold(function(){return Ec.none(Y)},function(ce){return W0(ce.all,Y,ce.index,1,ae)})));var Y,ae}function $h(S,A){var z=ei(S,A);return G0(Bt.fromDom(z.startContainer),z.startOffset,Bt.fromDom(z.endContainer),z.endOffset)}function Xg(S,A){return{item:S,mode:A}}function Hs(S,A,z,Y){return void 0===Y&&(Y=Dv),S.property().parent(A).map(function(ae){return Xg(ae,Y)})}function bb(S){return function(A){return 0===S.property().children(A).length}}function l1(S,A){return Qh(fd,S,bb(fd),A)}function xb(S,A){return Cb(fd,S,bb(fd),A)}function j_(S){return ru(S,"tr")}function c1(S){return"br"===Xr(S)}function sp(S,A){return{left:S.left,top:S.top+A,right:S.right,bottom:S.bottom+A}}function er(S,A){return{left:S.left,top:S.top-A,right:S.right,bottom:S.bottom-A}}function Yg(S,A,z){return{left:S.left+A,top:S.top+z,right:S.right+A,bottom:S.bottom+z}}function Nc(S){return{left:S.left,top:S.top,right:S.right,bottom:S.bottom}}function Jh(S,A){return xt.some(S.getRect(A))}function Zg(S,A,z){return Zc(A)?Jh(S,A).map(Nc):Is(A)?(Y=S,ae=A,(0<=(ce=z)&&ce<pf(ae)?Y.getRangedRect(ae,ce,ae,ce+1):0<ce?Y.getRangedRect(ae,ce-1,ae,ce):xt.none()).map(Nc)):xt.none();var Y,ae,ce}function Sv(S,A){return Zc(A)?Jh(S,A).map(Nc):Is(A)?S.getRangedRect(A,0,A,pf(A)).map(Nc):xt.none()}function Dr(S,A,z){return fn(function(Y,ae){return ae(Y)},zt,A,ov,void 0).fold(Ee,function(Y){return Sv(S,Y).exists(function(ae){return(ce=z).left<(ke=ae).left||Math.abs(ke.right-ce.left)<1||ce.left>ke.right;var ce,ke})})}function AS(S,A,z){var Y,ae=S.move(z,5),ce=Df(A,S,z,ae,100).getOr(ae),ke=ce,Pe=A;return((Y=S).point(ke)>Pe.getInnerHeight()?xt.some(Y.point(ke)-Pe.getInnerHeight()):Y.point(ke)<0?xt.some(-Y.point(ke)):xt.none()).fold(function(){return A.situsFromPoint(ce.left,S.point(ce))},function(Ye){return A.scrollBy(0,Ye),A.situsFromPoint(ce.left,S.point(ce)-Ye)})}function Kg(S,A,z,Y,ae){return ru(Y,"td,th",A).bind(function(ce){return ru(ce,"table",A).bind(function(ke){return ft=ke,zt(ae,function(wt){return Ir(wt).exists(function(Ut){return fr(Ut,ft)})},void 0).isSome()?(Pe=mt=S,Ye=dt=A,tt=Et=z,Pe.getSelection().bind(function(wt){return function q_(S,A,z,Y){var ae,ce,ke,Pe,Ye,tt,ft;return(c1(A)?(ae=S,(ke=Y).traverse(ce=A).orThunk(function(){return g1(ce,ke.gather,ae)}).map(ke.relative)):(Pe=S,Ye=Y,pa(tt=A,ft=z).filter(c1).orThunk(function(){return pa(tt,ft-1).filter(c1)}).bind(function(mt){return Ye.traverse(mt).fold(function(){return g1(mt,Ye.gather,Pe).map(Ye.relative)},function(dt){return Ir(Et=dt).bind(function(wt){var Ut=is(wt);return xr(Ut,Et).map(function(Qt){return{parent:wt,children:Ut,element:Et,index:Qt}})}).map(function(wt){return ks.on(wt.parent,wt.index)});var Et})}))).map(function(mt){return{start:mt,finish:mt}})}(Ye,wt.finish,wt.foffset,tt).fold(function(){return xt.some(Qp(wt.finish,wt.foffset))},function(Ut){var Qt=Pe.fromSitus(Ut),_t=Y0.verify(Pe,wt.finish,wt.foffset,Qt.finish,Qt.foffset,tt.failure,Ye);return Y0.cata(_t,function(Ft){return xt.none()},function(){return xt.none()},function(Ft){return xt.some(Qp(Ft,0))},function(Ft){return xt.some(Qp(Ft,pf(Ft)))})})}).bind(function(wt){return Iv(mt,dt,wt.element,wt.offset,Et,20).map(mt.fromSitus)}).bind(function(wt){return ru(wt.finish,"td,th",A).map(function(Ut){return{start:ce,finish:Ut,range:wt}})})):xt.none();var Pe,Ye,tt,ft,mt,dt,Et})})}function $g(S,A,z,Y,ae,ce){return Fn().browser.isIE()?xt.none():ce(Y,A).orThunk(function(){return Kg(S,A,z,Y,ae).map(function(ke){var Pe=ke.range;return oh(xt.some(Av(Pe.start,Pe.soffset,Pe.finish,Pe.foffset)),!0)})})}function Rc(S,A){return ru(S,"tr",A).bind(function(z){return ru(z,"table",A).bind(function(Y){var ae=aa(Y,"tr");return fr(z,ae[0])?Qh(fd,Y,function(ce){return Nh(ce).isSome()},A).map(function(ce){var ke=pf(ce);return oh(xt.some(Av(ce,ke,ce,ke)),!0)}):xt.none()})})}function _b(S,A){return ru(S,"tr",A).bind(function(z){return ru(z,"table",A).bind(function(Y){var ae=aa(Y,"tr");return fr(z,ae[ae.length-1])?Cb(fd,Y,function(ce){return Ls(ce).isSome()},A).map(function(ce){return oh(xt.some(Av(ce,0,ce,0)),!0)}):xt.none()})})}function Cv(S,A,z,Y,ae,ce,ke){return Kg(S,z,Y,ae,ce).bind(function(Pe){return f1(A,z,Pe.start,Pe.finish,ke)})}function j0(S,A){return ru(S,"td,th",A)}function kv(S){return function(A){return A===S}}function up(S){return 37<=S&&S<=40}function Tv(S){return{elementFromPoint:function(A,z){return Bt.fromPoint(Bt.fromDom(S.document),A,z)},getRect:function(A){return A.dom.getBoundingClientRect()},getRangedRect:function(A,z,Y,ae){var ce,ke,Pe,Ye=cu.exact(A,z,Y,ae);return 0<(ke=0<(Pe=(ce=ei(S,Ye)).getClientRects()).length?Pe[0]:ce.getBoundingClientRect()).width||0<ke.height?xt.some(ke).map($x):xt.none()},getSelection:function(){return qg(S).map(function(A){return $h(S,A)})},fromSitus:function(A){var z=cu.relative(A.start,A.finish);return $h(S,z)},situsFromPoint:function(A,z){return Y=A,ae=z,ce=Bt.fromDom(S.document),Lc(ce,Y,ae).map(function(ke){return G0(Bt.fromDom(ke.startContainer),ke.startOffset,Bt.fromDom(ke.endContainer),ke.endOffset)}).map(function(ke){return q0(ke.start,ke.soffset,ke.finish,ke.foffset)});var Y,ae,ce},clearSelection:function(){Ma(S).each(function(A){return A.removeAllRanges()})},collapseSelection:function(A){void 0===A&&(A=!1),qg(S).each(function(z){return z.fold(function(Y){return Y.collapse(A)},function(Y,ae){var ce=A?Y:ae;wv(S,ce,ce)},function(Y,ae,ce,ke){var Pe=A?Y:ce,Ye=A?ae:ke;yb(S,Pe,Ye,Pe,Ye)})})},setSelection:function(A){yb(S,A.start,A.soffset,A.finish,A.foffset)},setRelativeSelection:function(A,z){wv(S,A,z)},selectNode:function(A){rh(S,A,!1)},selectContents:function(A){rh(S,A)},getInnerHeight:function(){return S.innerHeight},getScrollY:function(){var A=Bt.fromDom(S.document),z=void 0!==A?A.dom:document;return wu(z.body.scrollLeft||z.documentElement.scrollLeft,z.body.scrollTop||z.documentElement.scrollTop).top},scrollBy:function(A,z){var Y,ae=A,ce=z,ke=Bt.fromDom(S.document);(Y=(void 0!==ke?ke.dom:document).defaultView)&&Y.scrollBy(ae,ce)}}}function Mv(S,A){return{rows:S,cols:A}}function wb(S){return!1===Jp(Bt.fromDom(S.target),"ephox-snooker-resizer-bar")}function Dv(S,A,z,Y){return void 0===Y&&(Y=fu),z.sibling(S,A).map(function(ae){return Xg(ae,Y)})}var du=function(S,A,z,Y){return Is(A)?(ce=A,ke=z,Pe=Y,(Ye=(ae=S).dom.createRange()).selectNode(ce.dom),Gr(Ye.getClientRects(),function(wt){return sl(wt,ke,Pe)?xt.some(wt):xt.none()}).map(function(wt){return function op(S,A,z,Y,ae){function ce(Ye){var tt=S.dom.createRange();return tt.setStart(A.dom,Ye),tt.collapse(!0),tt}var ke=xu(A).length,Pe=function(Ye,tt,ft,mt){if(0===mt)return 0;if(Ye===ft)return mt-1;for(var dt=ft,Et=1;Et<mt;Et++){var wt=ce(Et).getBoundingClientRect(),Ut=Math.abs(Ye-wt.left);if(tt<=wt.bottom){if(tt<wt.top||dt<Ut)return Et-1;dt=Ut}}return 0}(z,Y,ae.right,ke);return ce(Pe)}(ae,ce,ke,Pe,wt)})):(ft=A,mt=z,dt=Y,Et=(tt=S).dom.createRange(),Gr(is(ft),function(wt){return Et.selectNode(wt.dom),sl(Et.getBoundingClientRect(),mt,dt)?du(tt,wt,mt,dt):xt.none()}));var ae,ce,ke,Pe,Ye,tt,ft,mt,dt,Et},Lc=document.caretPositionFromPoint?function(S,A,z){var Y,ae;return xt.from(null===(ae=(Y=S.dom).caretPositionFromPoint)||void 0===ae?void 0:ae.call(Y,A,z)).bind(function(ce){if(null===ce.offsetNode)return xt.none();var ke=S.dom.createRange();return ke.setStart(ce.offsetNode,ce.offset),ke.collapse(),xt.some(ke)})}:document.caretRangeFromPoint?function(S,A,z){var Y,ae;return xt.from(null===(ae=(Y=S.dom).caretRangeFromPoint)||void 0===ae?void 0:ae.call(Y,A,z))}:function(S,A,z){return Bt.fromPoint(S,A,z).bind(function(Y){function ae(){return ce=S,Pe=A,(0===is(ke=Y).length?Kh:Rl)(ce,ke,Pe);var ce,ke,Pe}return 0===is(Y).length?ae():function(ce,ke,Pe,Ye){var tt=ce.dom.createRange();tt.selectNode(ke.dom);var ft=tt.getBoundingClientRect();return function(mt,dt,Et,wt){var Ut=mt.dom.createRange();Ut.selectNode(dt.dom);var Qt=Ut.getBoundingClientRect(),_t=Math.max(Qt.left,Math.min(Qt.right,Et)),Ft=Math.max(Qt.top,Math.min(Qt.bottom,wt));return du(mt,dt,_t,Ft)}(ce,ke,Math.max(ft.left,Math.min(ft.right,Pe)),Math.max(ft.top,Math.min(ft.bottom,Ye)))}(S,Y,A,z).orThunk(ae)})},dd=tinymce.util.Tools.resolve("tinymce.util.VK"),Jg=function(S,A,z){return z.fold(xt.none,xt.none,function(Y,ae){return Ls(ae).map(function(ce){return ft=cu.exact(ce,0,ce,0),Ye=cu.getWin(Pe=ft).dom,tt=Pe.match({domRange:function(mt){var dt=Bt.fromDom(mt.startContainer),Et=Bt.fromDom(mt.endContainer);return nh(dt,mt.startOffset,Et,mt.endOffset)},relative:U_,exact:nh}),lb(Ye,tt).match({ltr:ke,rtl:ke});function ke(mt,dt,Et,wt){return ya(Ye,mt,dt,Et,wt)}var Pe,Ye,tt,ft})},function(Y){return S.execCommand("mceTableInsertRowAfter"),po(S,A,Y)})},d1=["table","li","dl"],oh=function(S,A){return{selection:S,kill:A}},q0=function(S,A,z,Y){return{start:ks.on(S,A),finish:ks.on(z,Y)}},Av=q0,f1=function(S,A,z,Y,ae){return fr(z,Y)?xt.none():Wp(z,Y,A).bind(function(ce){var ke=ce.boxes.getOr([]);return 1<ke.length?(ae(S,ke,ce.start,ce.finish),xt.some(oh(xt.some(Av(z,0,z,pf(z))),!0))):xt.none()})},fu=function(S,A,z,Y){void 0===Y&&(Y=fu);var ae=S.property().children(A);return z.first(ae).map(function(ce){return Xg(ce,Y)})},h1=[{current:Hs,next:Dv,fallback:xt.none()},{current:Dv,next:fu,fallback:xt.some(Hs)},{current:fu,next:fu,fallback:xt.some(Dv)}],Sb=function(S,A,z,Y,ae){return Rt(ae=void 0===ae?h1:ae,function(ce){return ce.current===z}).bind(function(ce){return ce.current(S,A,Y,ce.next).orThunk(function(){return ce.fallback.bind(function(ke){return Sb(S,A,ke,Y)})})})},Io=function(S,A,z,Y,ae,ce){return Sb(S,A,Y,ae).bind(function(ke){return ce(ke.item)?xt.none():z(ke.item)?xt.some(ke.item):Io(S,ke.item,z,ke.mode,ae,ce)})},Qh=function(S,A,z,Y){return Io(S,A,z,Dv,{sibling:function(ae,ce){return ae.query().prevSibling(ce)},first:function(ae){return 0<ae.length?xt.some(ae[ae.length-1]):xt.none()}},Y)},Cb=function(S,A,z,Y){return Io(S,A,z,Dv,{sibling:function(ae,ce){return ae.query().nextSibling(ce)},first:function(ae){return 0<ae.length?xt.some(ae[0]):xt.none()}},Y)},fd=Ky(),X0=Ns([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Y0=Mr(Mr({},X0),{verify:function(S,A,z,Y,ae,ce,ke){return ru(Y,"td,th",ke).bind(function(Pe){return ru(A,"td,th",ke).map(function(Ye){return fr(Pe,Ye)?fr(Y,Pe)&&pf(Pe)===ae?ce(Ye):X0.none("in same cell"):Qu(j_,[Pe,Ye]).fold(function(){return ft=Pe,mt=(tt=S).getRect(Ye),(dt=tt.getRect(ft)).right>mt.left&&dt.left<mt.right?X0.success():ce(Ye);var tt,ft,mt,dt},function(tt){return ce(Ye)})})}).getOr(X0.none("default"))},cata:function(S,A,z,Y,ae){return S.fold(A,z,Y,ae)}}),xr=function(S,A){return pn(S,xe(fr,A))},g1=function(S,A,z){return A(S,z).bind(function(Y){return Is(Y)&&0===xu(Y).trim().length?g1(Y,A,z):xt.some(Y)})},ko=Ns([{none:[]},{retry:["caret"]}]),hd={point:function(S){return S.bottom},adjuster:function(S,A,z,Y,ae){var ce=sp(ae,5);return Math.abs(z.bottom-Y.bottom)<1||z.top>ae.bottom?ko.retry(ce):z.top===ae.bottom?ko.retry(sp(ae,1)):Dr(S,A,ae)?ko.retry(Yg(ce,5,0)):ko.none()},move:sp,gather:xb},Df=function(S,A,z,Y,ae){return 0===ae?xt.some(Y):(ke=S,Pe=Y.left,Ye=A.point(Y),ke.elementFromPoint(Pe,Ye).filter(function(tt){return"table"===Xr(tt)}).isSome()?(ce=ae-1,Df(S,A,z,A.move(Y,5),ce)):S.situsFromPoint(Y.left,A.point(Y)).bind(function(tt){return tt.start.fold(xt.none,function(ft){return Sv(S,ft).bind(function(mt){return A.adjuster(S,ft,mt,z,Y).fold(xt.none,function(dt){return Df(S,A,z,dt,ae-1)})}).orThunk(function(){return xt.some(Y)})},xt.none)}));var ce,ke,Pe,Ye},hu={tryUp:xe(AS,{point:function(S){return S.top},adjuster:function(S,A,z,Y,ae){var ce=er(ae,5);return Math.abs(z.top-Y.top)<1||z.bottom<ae.top?ko.retry(ce):z.bottom===ae.top?ko.retry(er(ae,1)):Dr(S,A,ae)?ko.retry(Yg(ce,5,0)):ko.none()},move:er,gather:l1}),tryDown:xe(AS,hd),ieTryUp:function(S,A){return S.situsFromPoint(A.left,A.top-5)},ieTryDown:function(S,A){return S.situsFromPoint(A.left,A.bottom+5)},getJumpSize:j(5)},Iv=function(S,A,z,Y,ae,ce){return 0===ce?xt.none():Ev(S,A,z,Y,ae).bind(function(ke){var Pe=S.fromSitus(ke),Ye=Y0.verify(S,z,Y,Pe.finish,Pe.foffset,ae.failure,A);return Y0.cata(Ye,function(){return xt.none()},function(){return xt.some(ke)},function(tt){return fr(z,tt)&&0===Y?ul(S,z,Y,er,ae):Iv(S,A,tt,0,ae,ce-1)},function(tt){return fr(z,tt)&&Y===pf(tt)?ul(S,z,Y,sp,ae):Iv(S,A,tt,pf(tt),ae,ce-1)})})},ul=function(S,A,z,Y,ae){return Zg(S,A,z).bind(function(ce){return Ov(S,ae,Y(ce,hu.getJumpSize()))})},Ov=function(S,A,z){var Y=Fn().browser;return Y.isChrome()||Y.isSafari()||Y.isFirefox()||Y.isEdge()?A.otherRetry(S,z):Y.isIE()?A.ieRetry(S,z):xt.none()},Ev=function(S,A,z,Y,ae){return Zg(S,z,Y).bind(function(ce){return Ov(S,ae,ce)})},eg={traverse:Fa,gather:xb,relative:ks.before,otherRetry:hu.tryDown,ieRetry:hu.ieTryDown,failure:Y0.failedDown},tg={traverse:vi,gather:l1,relative:ks.before,otherRetry:hu.tryUp,ieRetry:hu.ieTryUp,failure:Y0.failedUp},lp=kv(38),oa=kv(40),Y_={isBackward:kv(37),isForward:kv(39)},Qg={isBackward:kv(39),isForward:kv(37)},cp=tinymce.util.Tools.resolve("tinymce.Env");Pr.add("table",function(S){var A,z,Y,ae,ce,ke,Pe,Ye,tt,ft,mt,dt,Et=(A=function(){return Xl(S)},z=function(){return rc(Sa(S),Fu(S))},Y=Dc.selectedSelector,{get:function(){return qp(A(),Y).fold(function(){return z().fold(Vx,$y)},function(Tt){return Hx(Tt)})}}),wt=function Yd(S,A){function z(_t){return Et.forall(function(Ft){return!Ft[_t]})}function Y(){return Gd(Sa(S),Fu(S)).bind(function(_t){return c0(ea(_t),Gd(Bt.fromDom(S.selection.getEnd()),Fu(S)).bind(ea),function(Ft,Mn){return fr(Ft,Mn)?wt(_t)?xt.some({element:Tt=_t,mergable:xt.none(),unmergable:xt.none(),selection:[Tt]}):xt.some(Zl(A,Ft,_t)):xt.none();var Tt}).bind(ye)})}function ae(_t){return ea(_t.element).map(function(Ft){var Mn=bo.fromTable(Ft),Tt=Jt(Dl(Mn,_t).getOr([]),function(Dn,rn){return rn.isLocked&&(Dn.onAny=!0,0===rn.column?Dn.onFirst=!0:rn.column+rn.colspan>=Mn.grid.columns&&(Dn.onLast=!0)),Dn},{onAny:!1,onFirst:!1,onLast:!1});return{mergeable:qx(Mn,_t).isSome(),unmergeable:b0(Mn,_t).isSome(),locked:Tt}})}function ce(){mt.set(Yi(Y)()),Et=mt.get().bind(ae),le(dt.get(),function(_t){return _t()})}function ke(_t){return _t(),dt.set(dt.get().concat([_t])),function(){dt.set(Qe(dt.get(),function(Ft){return Ft!==_t}))}}function Pe(_t,Ft){return ke(function(){return mt.get().fold(function(){_t.setDisabled(!0)},function(Mn){_t.setDisabled(Ft(Mn))})})}function Ye(_t,Ft,Mn){return ke(function(){return mt.get().fold(function(){_t.setDisabled(!0),_t.setActive(!1)},function(Tt){_t.setDisabled(Ft(Tt)),_t.setActive(Mn(Tt))})})}function tt(_t){return Et.exists(function(Ft){return Ft.locked[_t]})}function ft(_t,Ft){return function(Mn){return Ye(Mn,function(Tt){return wt(Tt.element)},function(){return S.queryCommandValue(_t)===Ft})}}var mt=gs(xt.none()),dt=gs([]),Et=xt.none(),wt=Ti("caption"),Ut=ft("mceTableRowType","header"),Qt=ft("mceTableColType","th");return S.on("NodeChange ExecCommand TableSelectorChange",ce),{onSetupTable:function(_t){return Pe(_t,function(Ft){return!1})},onSetupCellOrRow:function(_t){return Pe(_t,function(Ft){return wt(Ft.element)})},onSetupColumn:function(_t){return function(Ft){return Pe(Ft,function(Mn){return wt(Mn.element)||tt(_t)})}},onSetupPasteable:function(_t){return function(Ft){return Pe(Ft,function(Mn){return wt(Mn.element)||_t().isNone()})}},onSetupPasteableColumn:function(_t,Ft){return function(Mn){return Pe(Mn,function(Tt){return wt(Tt.element)||_t().isNone()||tt(Ft)})}},onSetupMergeable:function(_t){return Pe(_t,function(Ft){return z("mergeable")})},onSetupUnmergeable:function(_t){return Pe(_t,function(Ft){return z("unmergeable")})},resetTargets:ce,onSetupTableWithCaption:function(_t){return Ye(_t,Ee,function(Ft){return ea(Ft.element,Fu(S)).exists(function(Mn){return Fp(Mn,"caption").isSome()})})},onSetupTableRowHeaders:Ut,onSetupTableColumnHeaders:Qt,targets:mt.get}}(S,Et),Ut=function Vm(S){function A(tt){return"TABLE"===tt.nodeName}function z(tt){return nb(S,tt)}function Y(){return(Li(S)?Kp:Kl)()}var ae,ce,ke=xt.none(),Pe=xt.none(),Ye=xt.none();return S.on("init",function(){var tt,ft,mt,dt,Et,wt,Ut,Qt,_t,Ft,Mn,Tt,Dn,rn,pr=(ft=Tl,(tt=S).inline?(wt=Xl(tt),Wl(Qt=Bt.fromTag("div"),{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),uo(Tm(Bt.fromDom(document)),Qt),Ut=ft,{parent:j(Qt),view:j(wt),origin:j(wu(0,0)),isResizable:Ut}):cv(Bt.fromDom(tt.getDoc()),ft));Ye=xt.some(pr),Et=S.getParam("object_resizing",!0),(U(Et)?"table"===Et:Et)&&S.getParam("table_resize_bars",!0,"boolean")&&(mt=Y(),_t=mt,Ft=z,Mn=Su,Tt=Qc,Dn=function Bh(S){function A(_t,Ft){return xt.from(Ku(_t,Ft))}var z,Y,ae,ce,ke,Pe,Ye=(ce=Wi({drag:Ea(["xDelta","yDelta","target"])}),ke=xt.none(),(Pe={mutate:function(_t,Ft){ae.trigger.drag(_t,Ft)},events:(ae=Wi({drag:Ea(["xDelta","yDelta"])})).registry}).events.drag.bind(function(_t){ke.each(function(Ft){ce.trigger.drag(_t.xDelta,_t.yDelta,Ft)})}),{assign:function(_t){ke=xt.some(_t)},get:function(){return ke},mutate:Pe.mutate,events:ce.registry}),tt=(Y=void 0!==(z={}).mode?z.mode:zg,function(_t,Ft,Mn){function Tt(){So.stop(),_r.isOn()&&(_r.off(),En.trigger.stop())}var Dn,rn,pr=!1,En=Wi({start:Ea([]),stop:Ea([])}),_r=function ws(){var S,A,z={onEvent:je,reset:je,events:Wi({move:Ea(["info"])}).registry},Y=(S=xt.none(),{onEvent:function(ce,ke){ke.extract(ce).each(function(Pe){var Ye=ke,tt=Pe,ft=S.map(function(mt){return Ye.compare(mt,tt)});S=xt.some(tt),ft.each(function(mt){A.trigger.move(mt)})})},reset:function(){S=xt.none()},events:(A=Wi({move:Ea(["info"])})).registry}),ae=z;return{on:function(){ae.reset(),ae=Y},off:function(){ae.reset(),ae=z},isOn:function(){return ae===Y},onEvent:function(ce,ke){ae.onEvent(ce,ke)},events:Y.events}}(),Fr=(Dn=Tt,rn=null,{cancel:Nr,throttle:function(){for(var Yr=[],Oo=0;Oo<arguments.length;Oo++)Yr[Oo]=arguments[Oo];Nr(),rn=setTimeout(function(){rn=null,Dn.apply(null,Yr)},200)}});function Nr(){Z(rn)||(clearTimeout(rn),rn=null)}function oo(Yr){return function(){for(var Oo=[],ti=0;ti<arguments.length;ti++)Oo[ti]=arguments[ti];pr&&Yr.apply(null,Oo)}}_r.events.move.bind(function(Yr){Ft.mutate(_t,Yr.info)});var So=Ft.sink(id({forceDrop:Tt,drop:oo(Tt),move:oo(function(Yr){Fr.cancel(),_r.onEvent(Yr,Ft)}),delayDrop:oo(Fr.throttle)}),Mn);return{element:So.element,go:function(Yr){So.start(Yr),_r.on(),En.trigger.start()},on:function(){pr=!0},off:function(){pr=!1},destroy:function(){So.destroy()},events:En.registry}}(Ye,Y,z)),ft=xt.none();function mt(_t,Ft){return Gl(_t,Ft)-wd(_t,"data-initial-"+Ft,0)}function dt(_t,Ft){Qt.trigger.startAdjust(),Ye.assign(_t),as(_t,"data-initial-"+Ft,Gl(_t,Ft)),Lh(_t,O0),vs(_t,"opacity","0.2"),tt.go(S.parent())}function Et(_t){return fr(_t,S.view())}Ye.events.drag.bind(function(_t){A(_t.target,"data-row").each(function(Ft){var Mn=Gl(_t.target,"top");vs(_t.target,"top",Mn+_t.yDelta+"px")}),A(_t.target,"data-column").each(function(Ft){var Mn=Gl(_t.target,"left");vs(_t.target,"left",Mn+_t.xDelta+"px")})}),tt.events.stop.bind(function(){Ye.get().each(function(_t){ft.each(function(Ft){A(_t,"data-row").each(function(Mn){var Tt=mt(_t,"top");Va(_t,"data-initial-top"),Qt.trigger.adjustHeight(Ft,Tt,parseInt(Mn,10))}),A(_t,"data-column").each(function(Mn){var Tt=mt(_t,"left");Va(_t,"data-initial-left"),Qt.trigger.adjustWidth(Ft,Tt,parseInt(Mn,10))}),wg(S,Ft)})})});var wt=Ss(S.parent(),"mousedown",function(_t){Jp(_t.target,fb)&&dt(_t.target,"top"),Jp(_t.target,ad)&&dt(_t.target,"left")}),Ut=Ss(S.view(),"mouseover",function(_t){ru(_t.target,"table",Et).filter(Bs).fold(function(){zr(_t.target)&&bf(S)},function(Ft){ft=xt.some(Ft),wg(S,Ft)})}),Qt=Wi({adjustHeight:Ea(["table","delta","row"]),adjustWidth:Ea(["table","delta","column"]),startAdjust:Ea([])});return{destroy:function(){wt.unbind(),Ut.unbind(),tt.destroy(),bf(S)},refresh:function(_t){wg(S,_t)},on:tt.on,off:tt.off,hideBars:xe(Xf,S),showBars:xe(y0,S),events:Qt.registry}}(pr),rn=Wi({beforeResize:Ea(["table","type"]),afterResize:Ea(["table","type"]),startDrag:Ea([])}),Dn.events.adjustHeight.bind(function(En){var _r=En.table;rn.trigger.beforeResize(_r,"row");var Fr,Nr,oo,So,Yr,Oo,ti,$i,Kn,Si=Mn.delta(En.delta,_r);Nr=Si,oo=En.row,So=Mn,$i=Fe(Lm(ti=bo.fromTable(Fr=_r),Fr,So,Nm,function(zo){return zo.getOrThunk(br)}),function(zo,qo){return oo===qo?Math.max(Nr+zo,br()):zo}),Yr=$i,Kn=Fe(bo.justCells(ti),function(zo){var qo=DS(zo.row,zo.row+zo.rowspan,Yr);return{element:zo.element,height:qo,rowspan:zo.rowspan}}),le((Oo=$i,Fe(ti.all,function(zo,qo){return{element:zo.element,height:Oo[qo]}})),function(zo){Lo(zo.element,zo.height)}),le(Kn,function(zo){Lo(zo.element,zo.height)}),Lo(Fr,ht($i,function(zo,qo){return zo+qo},0)),rn.trigger.afterResize(_r,"row")}),Dn.events.startAdjust.bind(function(En){rn.trigger.startDrag()}),Dn.events.adjustWidth.bind(function(En){var _r=En.table;rn.trigger.beforeResize(_r,"col");var Fr=Tt.delta(En.delta,_r),Nr=Ft(_r);Zs(_r,Fr,En.column,_t,Nr),rn.trigger.afterResize(_r,"col")}),(dt={on:Dn.on,off:Dn.off,hideBars:Dn.hideBars,showBars:Dn.showBars,destroy:Dn.destroy,events:rn.registry}).on(),dt.events.startDrag.bind(function(En){ke=xt.some(S.selection.getRng())}),dt.events.beforeResize.bind(function(En){var _r,Fr=En.table.dom,Nr=S,oo=_c(_r=Fr),So=Yl(Fr);Nr.fire("ObjectResizeStart",{target:_r,width:oo,height:So,origin:gb+En.type})}),dt.events.afterResize.bind(function(En){var _r,Fr,Nr,oo,Yr=En.table,Oo=Yr.dom;yf(Yr),ke.each(function(ti){S.selection.setRng(ti),S.focus()}),_r=S,Nr=_c(Fr=Oo),oo=Yl(Oo),_r.fire("ObjectResized",{target:Fr,width:Nr,height:oo,origin:gb+En.type}),S.undoManager.add()}),Pe=xt.some(dt))}),S.on("ObjectResizeStart",function(tt){var ft,mt,dt,Et,wt=tt.target;A(wt)&&(ft=Bt.fromDom(wt),le(S.dom.select(".mce-clonedresizable"),function(Ut){S.dom.addClass(Ut,"mce-"+kl(S)+"-columns")}),!Jx(ft)&&$m(S)?Vg(ft):!k0(ft)&&Fm(S)&&ci(ft),Ym(ft)&&Vt(tt.origin,gb)&&ci(ft),ae=tt.width,ce=E0(S)?"":(Et=(mt=S).dom.getStyle(dt=wt,"width")||mt.dom.getAttrib(dt,"width"),xt.from(Et).filter(yn).getOr("")))}),S.on("ObjectResized",function(tt){var ft,mt,dt,Et,wt,Ut,Qt,_t,Ft,Mn,Tt=tt.target;A(Tt)&&(ft=Bt.fromDom(Tt),Vt(mt=tt.origin,"corner-")&&(dt=ft,Et=tt.width,Mn=jt(mt,"e"),""===ce&&ci(dt),Et!==ae&&""!==ce?(vs(dt,"width",ce),wt=Y(),Ut=z(dt),Qt=Li(S)||Mn?nd(dt).columns-1:0,Zs(dt,Et-ae,Qt,wt,Ut)):/^(\d+(\.\d+)?)%$/.test(ce)&&vs(dt,"width",Et*parseFloat(ce.replace("%",""))/ae+"%"),/^(\d+(\.\d+)?)px$/.test(ce)&&(Ft=bo.fromTable(_t=dt),bo.hasColumns(Ft)||le(Dm(_t),function(Dn){vs(Dn,"width",Ps(Dn,"width")),Va(Dn,"width")}))),yf(ft),Sc(S,ft.dom,Ud))}),S.on("SwitchMode",function(){Pe.each(function(tt){S.mode.isReadOnly()?tt.hideBars():tt.showBars()})}),{lazyResize:function(){return Pe},lazyWire:function(){return Ye.getOr(cv(Bt.fromDom(S.getBody()),Tl))},destroy:function(){Pe.each(function(tt){tt.destroy()}),Ye.each(function(tt){S.inline&&ls(tt.parent())})}}}(S),Qt=function ih(S,A,z){var Y=function X_(S,A,z){function Y(Pe){Va(Pe,S.selected),Va(Pe,S.firstSelected),Va(Pe,S.lastSelected)}function ae(Pe){as(Pe,S.selected,"1")}function ce(Pe){ke(Pe),z()}function ke(Pe){le(aa(Pe,S.selectedSelector+","+S.firstSelectedSelector+","+S.lastSelectedSelector),Y)}return{clearBeforeUpdate:ke,clear:ce,selectRange:function(Pe,Ye,tt,ft){ce(Pe),le(Ye,ae),as(tt,S.firstSelected,"1"),as(ft,S.lastSelected,"1"),A(Ye,tt,ft)},selectedSelector:S.selectedSelector,firstSelectedSelector:S.firstSelectedSelector,lastSelectedSelector:S.lastSelectedSelector}}(Dc,function(ae,ce,ke){z.targets().each(function(Pe){ea(ce).each(function(Ye){var tt,ft,mt,dt=Fd(S),Et=Qa(je,Bt.fromDom(S.getDoc()),dt),wt=(tt=Pe,ft=Et,Dl(mt=bo.fromTable(Ye),tt).map(function(Ut){var Qt,_t,Ft=Vh(mt,ft,!1);return{upOrLeftCells:Ot(tv(Ft.slice(0,(Qt=Ut)[Qt.length-1].row+1)),function(Mn){return Fe(Mn.cells.slice(0,Qt[Qt.length-1].column+1),function(Tt){return Tt.element})}),downOrRightCells:Ot(tv(Ft.slice((_t=Ut)[0].row+_t[0].rowspan-1,Ft.length)),function(Mn){return Fe(Mn.cells.slice(_t[0].column+_t[0].colspan-1,Mn.cells.length),function(Tt){return Tt.element})})}}));S.fire("TableSelectionChange",{cells:ae,start:ce,finish:ke,otherCells:wt})})})},function(){S.fire("TableSelectionClear")});return S.on("init",function(ae){var ce,ke,Pe,Ye,tt,ft,mt,dt,Et,wt,Ut,Qt,_t,Ft,Mn,Tt,Dn=S.getWin(),rn=Xl(S),pr=Fu(S),En=(ce=Tv(Dn),{clearstate:(Ut=ce,Qt=rn,_t=pr,Ft=Y,Mn=Go(),(ke={clearstate:Tt=Mn.clear,mousedown:function(Kn){Ft.clear(Qt),j0(Kn.target,_t).each(Mn.set)},mouseover:function(Kn){oo(Kn)},mouseup:function(Kn){oo(Kn),Tt()}}).clearstate),mousedown:ke.mousedown,mouseover:ke.mouseover,mouseup:ke.mouseup}),_r=(wt=Tv(Dn),{keydown:function(Kn,Si,zo,qo,Da,da){var Ii=Kn.raw,io=Ii.which,Bc=!0===Ii.shiftKey;return xg(mt,Et.selectedSelector).fold(function(){return up(io)&&!Bc&&Et.clearBeforeUpdate(mt),oa(io)&&Bc?xe(Cv,wt,mt,dt,eg,qo,Si,Et.selectRange):lp(io)&&Bc?xe(Cv,wt,mt,dt,tg,qo,Si,Et.selectRange):oa(io)?xe($g,wt,dt,eg,qo,Si,_b):lp(io)?xe($g,wt,dt,tg,qo,Si,Rc):xt.none},function(fa){function Gi(Z0){return function(){return Gr(Z0,function(Zd){return dp=mt,function Gp(S,A,z,Y,ae){return ce=ae,Rt(S,function(ke){return tr(ke,ce)}).bind(function(ke){return Ye=A,tt=z,ea(Pe=ke).bind(function(ft){var mt=vc(ft),dt=Ye,Et=tt;return bo.findItem(mt,Pe,fr).bind(function(wt){return bo.getAt(mt,(0<dt?wt.row+wt.rowspan-1:wt.row)+dt,(0<Et?wt.column+wt.colspan-1:wt.column)+Et).map(function(_t){return _t.element})})}).bind(function(ft){return dt=Y,va(mt=ft,"table").bind(function(Et){return xd(Et,dt).bind(function(wt){return Wp(wt,mt).bind(function(Ut){return Ut.boxes.map(function(Qt){return{boxes:Qt,start:Ut.start,finish:Ut.finish}})})})});var mt,dt});var Pe,Ye,tt});var ce}(fa,Zd.rows,Zd.cols,(gu=Et).firstSelectedSelector,gu.lastSelectedSelector).map(function(em){return gu.clearBeforeUpdate(dp),gu.selectRange(dp,em.boxes,em.start,em.finish),em.boxes});var dp,gu}).fold(function(){return hf(mt,Et.firstSelectedSelector,Et.lastSelectedSelector).map(function(Zd){var eu=oa(io)||da.isForward(io)?ks.after:ks.before;return wt.setRelativeSelection(ks.on(Zd.first,0),eu(Zd.table)),Et.clear(mt),oh(xt.none(),!0)})},function(Zd){return xt.some(oh(xt.none(),!0))})}}return oa(io)&&Bc?Gi([Mv(1,0)]):lp(io)&&Bc?Gi([Mv(-1,0)]):da.isBackward(io)&&Bc?Gi([Mv(0,-1),Mv(-1,0)]):da.isForward(io)&&Bc?Gi([Mv(0,1),Mv(1,0)]):up(io)&&!Bc?Nr:xt.none})()},keyup:function(Kn,Si,zo,qo,Da){return xg(mt,Et.selectedSelector).fold(function(){var da,Ii,io,Bc,fa,Gi=Kn.raw;return!0===Gi.shiftKey&&up(Gi.which)?(da=mt,Ii=dt,fa=Et.selectRange,fr(io=Si,Bc=qo)&&zo===Da?xt.none():ru(io,"td,th",Ii).bind(function(Zd){return ru(Bc,"td,th",Ii).bind(function(eu){return f1(da,Ii,Zd,eu,fa)})})):xt.none()},xt.none)}}),Fr=(Pe=mt=rn,Ye=dt=pr,tt=Et=Y,ft=Tv(Dn),function(Kn,Si){tt.clearBeforeUpdate(Pe),Wp(Kn,Si,Ye).each(function(zo){var qo=zo.boxes.getOr([]);tt.selectRange(Pe,qo,zo.start,zo.finish),ft.selectContents(Si),ft.collapseSelection()})});function Nr(){return Et.clear(mt),xt.none()}function oo(Kn){Mn.on(function(Si){Ft.clearBeforeUpdate(Qt),j0(Kn.target,_t).each(function(zo){Wp(Si,zo,_t).each(function(qo){var Da,da,Ii,io=qo.boxes.getOr([]);1===io.length?(da="false"===Km(Da=io[0]),Ii=hc(Ca(Kn.target),Da,fr),da&&Ii&&(Ft.selectRange(Qt,io,Da,Da),Ut.selectContents(Da))):1<io.length&&(Ft.selectRange(Qt,io,qo.start,qo.finish),Ut.selectContents(zo))})})})}function So(Kn,Si){!0===Kn.raw.shiftKey&&(Si.kill&&Kn.kill(),Si.selection.each(function(zo){var qo=cu.relative(zo.start,zo.finish),Da=ei(Dn,qo);S.selection.setRng(Da)}))}function Yr(Kn){return 0===Kn.button}S.on("TableSelectorChange",function(Kn){return Fr(Kn.start,Kn.finish)});var Oo,ti,$i=(Oo=gs(Bt.fromDom(rn)),ti=gs(0),{touchEnd:function(Kn){var Si,zo,qo=Bt.fromDom(Kn.target);"td"!==Xr(qo)&&"th"!==Xr(qo)||(Si=Oo.get(),zo=ti.get(),fr(Si,qo)&&Kn.timeStamp-zo<300&&(Kn.preventDefault(),Fr(qo,qo))),Oo.set(qo),ti.set(Kn.timeStamp)}});S.on("dragstart",function(Kn){En.clearstate()}),S.on("mousedown",function(Kn){Yr(Kn)&&wb(Kn)&&En.mousedown(Qf(Kn))}),S.on("mouseover",function(Kn){var Si;(void 0===(Si=Kn).buttons||cp.browser.isEdge()&&0===Si.buttons||0!=(1&Si.buttons))&&wb(Kn)&&En.mouseover(Qf(Kn))}),S.on("mouseup",function(Kn){Yr(Kn)&&wb(Kn)&&En.mouseup(Qf(Kn))}),S.on("touchend",$i.touchEnd),S.on("keyup",function(Kn){var Si,zo,qo,Da=Qf(Kn);Da.raw.shiftKey&&up(Da.raw.which)&&(Si=S.selection.getRng(),zo=Bt.fromDom(Si.startContainer),qo=Bt.fromDom(Si.endContainer),_r.keyup(Da,zo,Si.startOffset,qo,Si.endOffset).each(function(da){So(Da,da)}))}),S.on("keydown",function(Kn){var Si=Qf(Kn);A().each(function(Ii){return Ii.hideBars()});var zo=S.selection.getRng(),qo=Bt.fromDom(zo.startContainer),Da=Bt.fromDom(zo.endContainer),da=zx(Y_,Qg)(Bt.fromDom(S.selection.getStart()));_r.keydown(Si,qo,zo.startOffset,Da,zo.endOffset,da).each(function(Ii){So(Si,Ii)}),A().each(function(Ii){return Ii.showBars()})}),S.on("NodeChange",function(){var Kn=S.selection;Qu(ea,[Bt.fromDom(Kn.getStart()),Bt.fromDom(Kn.getEnd())]).fold(function(){return Y.clear(rn)},je)})}),{clear:Y.clear}}(S,Ut.lazyResize,wt),_t=function z_(S,A,z){function Y(Pe){return"table"===Xr(Xl(Pe))}function ae(Pe,Ye,tt,ft,mt){return function(dt,Et,wt){void 0===wt&&(wt=!1),yf(dt);var Ut=ft(),Qt=Bt.fromDom(S.getDoc()),_t=Qa(tt,Qt,ce),Ft={sizing:nb(S,dt),resize:(tb(S)?Kl:Kp)(),section:function(Mn){switch(zs(S)){case"section":return Jm();case"sectionCells":return sd();case"cells":return Wg();default:return function(Tt,Dn){switch(Gr(bo.fromTable(Tt).all,function(pr){var En=Jl(pr);return"header"===En.type?xt.from(En.subType):xt.none()}).getOr("section")){case"section":return kc();case"sectionCells":return ev();case"cells":return Fh()}}(Mn)}}(dt)};return Ye(dt)?Pe(Ut,dt,Et,_t,Ft).bind(function(Mn){le(Mn.newRows,function(rn){ka(S,rn.dom)}),le(Mn.newCells,function(rn){wc(S,rn.dom)});var Tt,Dn=(Tt=dt,Mn.cursor.fold(function(){return wo(Dm(Tt)).filter(zr).map(function(rn){A.clear(Tt);var pr=S.dom.createRng();return pr.selectNode(rn.dom),S.selection.setRng(pr),as(rn,"data-mce-selected","1"),pr})},function(rn){var pr=Hg(kf,rn),En=S.dom.createRng();return En.setStart(pr.element.dom,pr.offset),En.setEnd(pr.element.dom,pr.offset),S.selection.setRng(En),A.clear(Tt),xt.some(En)}));return zr(dt)&&(yf(dt),wt||Sc(S,dt.dom,mt)),Dn.map(function(rn){return{rng:rn,effect:mt}})}):xt.none()}}var ce=Fd(S),ke=tb(S)?je:Ml;return{deleteRow:ae(vv,function(Pe){return!1===Y(S)||1<nd(Pe).rows},je,z,si),deleteColumn:ae(R0,function(Pe){return!1===Y(S)||1<nd(Pe).columns},je,z,si),insertRowsBefore:ae(pv,nt,je,z,si),insertRowsAfter:ae(N0,nt,je,z,si),insertColumnsBefore:ae(Qm,nt,ke,z,si),insertColumnsAfter:ae(Mf,nt,ke,z,si),mergeCells:ae(o1,nt,je,z,si),unmergeCells:ae(qd,nt,je,z,si),pasteColsBefore:ae(i1,nt,je,z,si),pasteColsAfter:ae(a1,nt,je,z,si),pasteRowsBefore:ae(Wu,nt,je,z,si),pasteRowsAfter:ae(bv,nt,je,z,si),pasteCells:ae(yv,nt,je,z,hb),makeCellsHeader:ae(Bo,nt,je,z,si),unmakeCellsHeader:ae(ca,nt,je,z,si),makeColumnsHeader:ae(lu,nt,je,z,si),unmakeColumnsHeader:ae(L0,nt,je,z,si),makeRowsHeader:ae(th,nt,je,z,si),makeRowsBody:ae(B0,nt,je,z,si),makeRowsFooter:ae(jd,nt,je,z,si),getTableRowType:ms,getTableCellType:$f,getTableColType:Ag}}(S,Qt,Ut.lazyWire),Ft=(ae=Go(),ce=Go(),{getRows:ae.get,setRows:function(Tt){Tt.fold(ae.clear,ae.set),ce.clear()},clearRows:ae.clear,getColumns:ce.get,setColumns:function(Tt){Tt.fold(ce.clear,ce.set),ae.clear()},clearColumns:ce.clear});return function Kx(S,A,z,Y,ae){function ce(wt){return ea(wt,Et)}function ke(wt){return rc(Sa(Ut=S),Fu(Ut)).bind(function(Qt){return ce(Qt).map(function(_t){return wt(_t,Qt)})});var Ut}function Pe(wt){S.focus()}function Ye(wt,Ut){return void 0===Ut&&(Ut=!1),ke(function(Qt,_t){var Ft=Zl(Y,Qt,_t);wt(Qt,Ft,Ut).each(Pe)})}function tt(){return ke(function(wt,Ut){var Qt,_t,Ft,Mn=Zl(Y,wt,Ut),Tt=Qa(je,Bt.fromDom(S.getDoc()),xt.none());return Qt=Mn,_t=Tt,Dl(Ft=bo.fromTable(wt),Qt).bind(function(Dn){var rn=tv(Ot(sa(Vh(Ft,_t,!1)).rows.slice(Dn[0].row,Dn[Dn.length-1].row+Dn[Dn.length-1].rowspan),function(pr){var En=Qe(pr.cells,function(_r){return!_r.isLocked});return 0<En.length?[Mr(Mr({},pr),{cells:En})]:[]}));return Kc(0<rn.length,rn)}).map(function(Dn){return Fe(Dn,function(rn){var pr=bs(rn.element);return le(rn.cells,function(En){var _r=Ys(En.element);so(_r,"colspan",En.colspan,1),so(_r,"rowspan",En.rowspan,1),uo(pr,_r)}),pr})})})}function ft(){return ke(function(wt,Ut){var Qt,_t;return Qt=Zl(Y,wt,Ut),tl(_t=bo.fromTable(wt),Qt).map(function(Mn){var Tt,Dn,rn=Mn[Mn.length-1],pr=Mn[0].column,En=rn.column+rn.colspan,_r=function(Nr,oo,So){if(bo.hasColumns(Nr)){var Yr=Fe(Qe(bo.justColumns(Nr),function(ti){return ti.column>=oo&&ti.column<So}),function(ti){var $i=Ys(ti.element);return w0($i,"span",So-oo),$i}),Oo=Bt.fromTag("colgroup");return mr(Oo,Yr),[Oo]}return[]}(_t,pr,En),Fr=(Tt=pr,Dn=En,Fe(_t.all,function(Nr){var oo=Fe(Qe(Nr.cells,function(Yr){return Yr.column>=Tt&&Yr.column<Dn}),function(Yr){var Oo=Ys(Yr.element);return w0(Oo,"colspan",Dn-Tt),Oo}),So=Bt.fromTag("tr");return mr(So,oo),So}));return Wo(Wo([],_r,!0),Fr,!0)})})}function mt(wt,Ut){return Ut().each(function(Qt){var _t=Fe(Qt,Ys);ke(function(Ft,Mn){var Tt,Dn,rn=_i(Bt.fromDom(S.getDoc())),pr=(Tt=_t,Dn=rn,{selection:Od(Y),clipboard:Tt,generators:Dn});wt(Ft,pr).each(Pe)})})}function dt(wt){return function(Ut,Qt){return ma(Qt,"type").each(function(_t){Ye(wt(_t),Qt.no_events)})}}var Et=Fu(S);li({mceTableSplitCells:function(){return Ye(A.unmergeCells)},mceTableMergeCells:function(){return Ye(A.mergeCells)},mceTableInsertRowBefore:function(){return Ye(A.insertRowsBefore)},mceTableInsertRowAfter:function(){return Ye(A.insertRowsAfter)},mceTableInsertColBefore:function(){return Ye(A.insertColumnsBefore)},mceTableInsertColAfter:function(){return Ye(A.insertColumnsAfter)},mceTableDeleteCol:function(){return Ye(A.deleteColumn)},mceTableDeleteRow:function(){return Ye(A.deleteRow)},mceTableCutCol:function(){return ft().each(function(wt){ae.setColumns(wt),Ye(A.deleteColumn)})},mceTableCutRow:function(){return tt().each(function(wt){ae.setRows(wt),Ye(A.deleteRow)})},mceTableCopyCol:function(){return ft().each(function(wt){return ae.setColumns(wt)})},mceTableCopyRow:function(){return tt().each(function(wt){return ae.setRows(wt)})},mceTablePasteColBefore:function(){return mt(A.pasteColsBefore,ae.getColumns)},mceTablePasteColAfter:function(){return mt(A.pasteColsAfter,ae.getColumns)},mceTablePasteRowBefore:function(){return mt(A.pasteRowsBefore,ae.getRows)},mceTablePasteRowAfter:function(){return mt(A.pasteRowsAfter,ae.getRows)},mceTableDelete:function(){return Xm(S).each(function(wt){ea(wt,Et).filter(Ae(Et)).each(function(Ut){var Qt,_t=Bt.fromText("");vl(Ut,_t),ls(Ut),S.dom.isEmpty(S.getBody())?(S.setContent(""),S.selection.setCursorLocation()):((Qt=S.dom.createRng()).setStart(_t.dom,0),Qt.setEnd(_t.dom,0),S.selection.setRng(Qt),S.nodeChanged())})})},mceTableCellToggleClass:function(wt,Ut){ke(function(Qt){var _t=Lg(Y),Ft=Gn(_t,function(Mn){return S.formatter.match("tablecellclass",{value:Ut},Mn.dom)})?S.formatter.remove:S.formatter.apply;le(_t,function(Mn){return Ft("tablecellclass",{value:Ut},Mn.dom)}),Sc(S,Qt.dom,Ud)})},mceTableToggleClass:function(wt,Ut){ke(function(Qt){S.formatter.toggle("tableclass",{value:Ut},Qt.dom),Sc(S,Qt.dom,Ud)})},mceTableToggleCaption:function(){Xm(S).each(function(wt){ea(wt,Et).each(function(Ut){Fp(Ut,"caption").fold(function(){var Qt,_t,Ft=Bt.fromTag("caption");uo(Ft,Bt.fromText("Caption")),_t=Ft,pa(Qt=Ut,0).fold(function(){uo(Qt,_t)},function(Mn){Ju(Mn,_t)}),S.selection.setCursorLocation(Ft.dom,0)},function(Qt){Ti("caption")(wt)&&qr("td",Ut).each(function(_t){return S.selection.setCursorLocation(_t.dom,0)}),ls(Qt)}),Sc(S,Ut.dom,si)})})},mceTableSizingMode:function(wt,Ut){return Qt=Ut,Xm(S).each(function(_t){E0(S)||$m(S)||Fm(S)||ea(_t,Et).each(function(Ft){"relative"!==Qt||k0(Ft)?"fixed"!==Qt||Jx(Ft)?"responsive"!==Qt||Ym(Ft)||gv(Ft):Vg(Ft):ci(Ft),yf(Ft),Sc(S,Ft.dom,si)})});var Qt},mceTableCellType:dt(function(wt){return"th"===wt?A.makeCellsHeader:A.unmakeCellsHeader}),mceTableColType:dt(function(wt){return"th"===wt?A.makeColumnsHeader:A.unmakeColumnsHeader}),mceTableRowType:dt(function(wt){switch(wt){case"header":return A.makeRowsHeader;case"footer":return A.makeRowsFooter;default:return A.makeRowsBody}})},function(wt,Ut){return S.addCommand(Ut,wt)}),li({mceTableProps:xe(qm,S,!1),mceTableRowProps:xe(Eg,S),mceTableCellProps:xe(Wd,S,Y)},function(wt,Ut){return S.addCommand(Ut,function(){return wt()})}),S.addCommand("mceInsertTable",function(wt,Ut){se(Ut)&&0<Wr(Ut).length?Ig(S,Ut.rows,Ut.columns,Ut.options,"Invalid values for mceInsertTable - rows and columns values are required to insert a table."):qm(S,!0)}),S.addCommand("mceTableApplyCellStyle",function(wt,Ut){function Qt(Mn){return"tablecell"+Mn.toLowerCase().replace("-","")}var _t,Ft;!se(Ut)||0!==(_t=Lg(Y)).length&&(function(Mn){for(var Tt in Mn)if(Br.call(Mn,Tt))return;return 1}(Ft=vo(Ut,function(Mn,Tt){return S.formatter.has(Qt(Tt))&&U(Mn)}))||(li(Ft,function(Mn,Tt){le(_t,function(Dn){jg.normal(S,Dn.dom).setFormat(Qt(Tt),Mn)})}),ce(_t[0]).each(function(Mn){return Sc(S,Mn.dom,Ud)})))})}(S,_t,0,Et,Ft),ft=_t,mt=Et,dt=Fu(tt=S),li({mceTableRowType:function(){return Mn(ft.getTableRowType)},mceTableCellType:function(){return Mn(ft.getTableCellType)},mceTableColType:function(){return Mn(ft.getTableColType)}},function(Tt,Dn){return tt.addQueryValueHandler(Dn,Tt)}),function Ed(S,A,z){S.on("BeforeGetContent",function(Y){!0===Y.selection&&Zi(A.get(),je,function(ae){Y.preventDefault(),ea(ae[0]).map(function(ce){var ke=function _g(S,A){function z(Dn){return tr(Dn.element,A)}var Y,ce,ke,Pe,Ye,tt,ft,mt,dt,Et,wt,Ut=Ys(S),Qt=Rx(Ut),_t=Rg(S),Ft=bo.generate(Qt),Mn=(Y=z,ce=Ft.grid.rows,ke=Ft.grid.columns,Ye=Pe=0,tt=[],ft=[],li(Ft.access,function(Dn){var rn,pr,En,_r;tt.push(Dn),Y(Dn)&&(ft.push(Dn),pr=(rn=Dn.row)+Dn.rowspan-1,_r=(En=Dn.column)+Dn.colspan-1,rn<ce?ce=rn:Pe<pr&&(Pe=pr),En<ke?ke=En:Ye<_r&&(Ye=_r))}),{minRow:ce,minCol:ke,maxRow:Pe,maxCol:Ye,allCells:tt,selectedCells:ft}),Tt="th:not("+A+"),td:not("+A+")";return le(_u(Ut,"th,td",function(Dn){return tr(Dn,Tt)}),ls),function(Dn,rn,pr,En){for(var _r,Fr,Nr,oo=rn.grid.columns,So=rn.grid.rows,Yr=0;Yr<So;Yr++)for(var Oo=!1,ti=0;ti<oo;ti++)Yr<pr.minRow||Yr>pr.maxRow||ti<pr.minCol||ti>pr.maxCol||(bo.getAt(rn,Yr,ti).filter(En).isNone()?(_r=Oo,Fr=Dn[Yr].element,Nr=Bt.fromTag("td"),uo(Nr,Bt.fromTag("br")),(_r?uo:ta)(Fr,Nr)):Oo=!0)}(Qt,Ft,Mn,z),mt=Ut,dt=Mn,Et=Ft,wt=function(Dn,rn,pr,En){if(0===En.minCol&&rn.grid.columns===En.maxCol+1)return 0;var _r=Yp(rn,Dn,pr),Fr=Jt(_r,function(oo,So){return oo+So},0),Nr=Jt(_r.slice(En.minCol,En.maxCol+1),function(oo,So){return oo+So},0)/Fr*pr.pixelWidth()-pr.pixelWidth();return pr.getCellDelta(Nr)}(S,bo.fromTable(S),_t,Mn),li(Et.columns,function(Dn){(Dn.column<dt.minCol||Dn.column>dt.maxCol)&&ls(Dn.element)}),le(Qe(f0(mt,"tr"),function(Dn){return 0===Dn.dom.childElementCount}),ls),dt.minCol!==dt.maxCol&&dt.minRow!==dt.maxRow||le(f0(mt,"th,td"),function(Dn){Va(Dn,"rowspan"),Va(Dn,"colspan")}),Va(mt,Hi),Va(mt,"data-snooker-col-series"),Rg(mt).adjustTableWidth(wt),Ut}(ce,"[data-mce-selected]");return yf(ke),[ke]}).each(function(ce){var ke;Y.content="text"===Y.format?Fe(ce,function(Pe){return Pe.dom.innerText}).join(""):(ke=S,Fe(ce,function(Pe){return ke.selection.serializer.serialize(Pe.dom,{})}).join(""))})},je)}),S.on("BeforeSetContent",function(Y){!0===Y.selection&&!0===Y.paste&&wo(Lg(A)).each(function(ae){ea(ae).each(function(ce){var ke,Pe,Ye,ft=Qe((ke=Y.content,(Pe=document.createElement("div")).innerHTML=ke,is(Bt.fromDom(Pe))),function(dt){return"meta"!==Xr(dt)}),mt=Ti("table");1===ft.length&&mt(ft[0])&&(Y.preventDefault(),Ye=_i(Bt.fromDom(S.getDoc())),z.pasteCells(ce,{element:ae,clipboard:ft[0],generators:Ye}).each(function(){S.focus()}))})})})}(S,Et,_t),function(Tt,Dn,rn,pr){function En($i){return function(){return Tt.execCommand($i)}}function _r($i){Tt.execCommand("mceInsertTable",!1,{rows:$i.numRows,columns:$i.numColumns})}var Fr={text:"Table properties",onSetup:rn.onSetupTable,onAction:En("mceTableProps")},Nr={text:"Delete table",icon:"table-delete-table",onSetup:rn.onSetupTable,onAction:En("mceTableDelete")};Tt.ui.registry.addMenuItem("tableinsertrowbefore",{text:"Insert row before",icon:"table-insert-row-above",onAction:En("mceTableInsertRowBefore"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuItem("tableinsertrowafter",{text:"Insert row after",icon:"table-insert-row-after",onAction:En("mceTableInsertRowAfter"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuItem("tabledeleterow",{text:"Delete row",icon:"table-delete-row",onAction:En("mceTableDeleteRow"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuItem("tablerowprops",{text:"Row properties",icon:"table-row-properties",onAction:En("mceTableRowProps"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuItem("tablecutrow",{text:"Cut row",icon:"cut-row",onAction:En("mceTableCutRow"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuItem("tablecopyrow",{text:"Copy row",icon:"duplicate-row",onAction:En("mceTableCopyRow"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuItem("tablepasterowbefore",{text:"Paste row before",icon:"paste-row-before",onAction:En("mceTablePasteRowBefore"),onSetup:rn.onSetupPasteable(pr.getRows)}),Tt.ui.registry.addMenuItem("tablepasterowafter",{text:"Paste row after",icon:"paste-row-after",onAction:En("mceTablePasteRowAfter"),onSetup:rn.onSetupPasteable(pr.getRows)});var oo={type:"nestedmenuitem",text:"Row",getSubmenuItems:j("tableinsertrowbefore tableinsertrowafter tabledeleterow tablerowprops | tablecutrow tablecopyrow tablepasterowbefore tablepasterowafter")};Tt.ui.registry.addMenuItem("tableinsertcolumnbefore",{text:"Insert column before",icon:"table-insert-column-before",onAction:En("mceTableInsertColBefore"),onSetup:rn.onSetupColumn("onFirst")}),Tt.ui.registry.addMenuItem("tableinsertcolumnafter",{text:"Insert column after",icon:"table-insert-column-after",onAction:En("mceTableInsertColAfter"),onSetup:rn.onSetupColumn("onLast")}),Tt.ui.registry.addMenuItem("tabledeletecolumn",{text:"Delete column",icon:"table-delete-column",onAction:En("mceTableDeleteCol"),onSetup:rn.onSetupColumn("onAny")}),Tt.ui.registry.addMenuItem("tablecutcolumn",{text:"Cut column",icon:"cut-column",onAction:En("mceTableCutCol"),onSetup:rn.onSetupColumn("onAny")}),Tt.ui.registry.addMenuItem("tablecopycolumn",{text:"Copy column",icon:"duplicate-column",onAction:En("mceTableCopyCol"),onSetup:rn.onSetupColumn("onAny")}),Tt.ui.registry.addMenuItem("tablepastecolumnbefore",{text:"Paste column before",icon:"paste-column-before",onAction:En("mceTablePasteColBefore"),onSetup:rn.onSetupPasteableColumn(pr.getColumns,"onFirst")}),Tt.ui.registry.addMenuItem("tablepastecolumnafter",{text:"Paste column after",icon:"paste-column-after",onAction:En("mceTablePasteColAfter"),onSetup:rn.onSetupPasteableColumn(pr.getColumns,"onLast")});var So={type:"nestedmenuitem",text:"Column",getSubmenuItems:j("tableinsertcolumnbefore tableinsertcolumnafter tabledeletecolumn | tablecutcolumn tablecopycolumn tablepastecolumnbefore tablepastecolumnafter")};Tt.ui.registry.addMenuItem("tablecellprops",{text:"Cell properties",icon:"table-cell-properties",onAction:En("mceTableCellProps"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuItem("tablemergecells",{text:"Merge cells",icon:"table-merge-cells",onAction:En("mceTableMergeCells"),onSetup:rn.onSetupMergeable}),Tt.ui.registry.addMenuItem("tablesplitcells",{text:"Split cell",icon:"table-split-cells",onAction:En("mceTableSplitCells"),onSetup:rn.onSetupUnmergeable});var Yr={type:"nestedmenuitem",text:"Cell",getSubmenuItems:j("tablecellprops tablemergecells tablesplitcells")};!1===Tt.getParam("table_grid",!0,"boolean")?Tt.ui.registry.addMenuItem("inserttable",{text:"Table",icon:"table",onAction:En("mceInsertTable")}):Tt.ui.registry.addNestedMenuItem("inserttable",{text:"Table",icon:"table",getSubmenuItems:function(){return[{type:"fancymenuitem",fancytype:"inserttable",onAction:_r}]}}),Tt.ui.registry.addMenuItem("inserttabledialog",{text:"Insert table",icon:"table",onAction:En("mceInsertTable")}),Tt.ui.registry.addMenuItem("tableprops",Fr),Tt.ui.registry.addMenuItem("deletetable",Nr),Tt.ui.registry.addNestedMenuItem("row",oo),Tt.ui.registry.addNestedMenuItem("column",So),Tt.ui.registry.addNestedMenuItem("cell",Yr),Tt.ui.registry.addContextMenu("table",{update:function(){return rn.resetTargets(),rn.targets().fold(j(""),function($i){return"caption"===Xr($i.element)?"tableprops deletetable":"cell row column | advtablesort | tableprops deletetable"})}});var Oo=ep(Cl(Tt));0!==Oo.length&&Tt.ui.registry.addNestedMenuItem("tableclass",{icon:"table-classes",text:"Table styles",getSubmenuItems:function(){return Zh(Tt,Dn,Oo,"tableclass",function($i){return Tt.execCommand("mceTableToggleClass",!1,$i)})},onSetup:rn.onSetupTable});var ti=ep(Xi(Tt));0!==ti.length&&Tt.ui.registry.addNestedMenuItem("tablecellclass",{icon:"table-cell-classes",text:"Cell styles",getSubmenuItems:function(){return Zh(Tt,Dn,ti,"tablecellclass",function($i){return Tt.execCommand("mceTableCellToggleClass",!1,$i)})},onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addNestedMenuItem("tablecellvalign",{icon:"vertical-align",text:"Vertical align",getSubmenuItems:function(){return Zh(Tt,Dn,ud,"tablecellverticalalign",Gh(Tt,"vertical-align"))},onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addNestedMenuItem("tablecellborderwidth",{icon:"border-width",text:"Border width",getSubmenuItems:function(){return Zh(Tt,Dn,xf(Tt),"tablecellborderwidth",Gh(Tt,"border-width"))},onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addNestedMenuItem("tablecellborderstyle",{icon:"border-style",text:"Border style",getSubmenuItems:function(){return Zh(Tt,Dn,_f(Tt),"tablecellborderstyle",Gh(Tt,"border-style"))},onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addToggleMenuItem("tablecaption",{icon:"table-caption",text:"Table caption",onAction:En("mceTableToggleCaption"),onSetup:rn.onSetupTableWithCaption}),Tt.ui.registry.addNestedMenuItem("tablecellbackgroundcolor",{icon:"cell-background-color",text:"Background color",getSubmenuItems:function(){return Ln(Tt,zh(Tt),"background-color")},onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addNestedMenuItem("tablecellbordercolor",{icon:"cell-border-color",text:"Border color",getSubmenuItems:function(){return Ln(Tt,wf(Tt),"border-color")},onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addToggleMenuItem("tablerowheader",{text:"Row header",icon:"table-top-header",onAction:Zx(Tt),onSetup:rn.onSetupTableRowHeaders}),Tt.ui.registry.addToggleMenuItem("tablecolheader",{text:"Column header",icon:"table-left-header",onAction:Ta(Tt),onSetup:rn.onSetupTableColumnHeaders})}(S,Et,wt,Ft),function(Tt,Dn,rn,pr){function En(Nr){return function(){return Tt.execCommand(Nr)}}Tt.ui.registry.addMenuButton("table",{tooltip:"Table",icon:"table",fetch:function(Nr){return Nr("inserttable | cell row column | advtablesort | tableprops deletetable")}}),Tt.ui.registry.addButton("tableprops",{tooltip:"Table properties",onAction:En("mceTableProps"),icon:"table",onSetup:rn.onSetupTable}),Tt.ui.registry.addButton("tabledelete",{tooltip:"Delete table",onAction:En("mceTableDelete"),icon:"table-delete-table",onSetup:rn.onSetupTable}),Tt.ui.registry.addButton("tablecellprops",{tooltip:"Cell properties",onAction:En("mceTableCellProps"),icon:"table-cell-properties",onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addButton("tablemergecells",{tooltip:"Merge cells",onAction:En("mceTableMergeCells"),icon:"table-merge-cells",onSetup:rn.onSetupMergeable}),Tt.ui.registry.addButton("tablesplitcells",{tooltip:"Split cell",onAction:En("mceTableSplitCells"),icon:"table-split-cells",onSetup:rn.onSetupUnmergeable}),Tt.ui.registry.addButton("tableinsertrowbefore",{tooltip:"Insert row before",onAction:En("mceTableInsertRowBefore"),icon:"table-insert-row-above",onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addButton("tableinsertrowafter",{tooltip:"Insert row after",onAction:En("mceTableInsertRowAfter"),icon:"table-insert-row-after",onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addButton("tabledeleterow",{tooltip:"Delete row",onAction:En("mceTableDeleteRow"),icon:"table-delete-row",onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addButton("tablerowprops",{tooltip:"Row properties",onAction:En("mceTableRowProps"),icon:"table-row-properties",onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addButton("tableinsertcolbefore",{tooltip:"Insert column before",onAction:En("mceTableInsertColBefore"),icon:"table-insert-column-before",onSetup:rn.onSetupColumn("onFirst")}),Tt.ui.registry.addButton("tableinsertcolafter",{tooltip:"Insert column after",onAction:En("mceTableInsertColAfter"),icon:"table-insert-column-after",onSetup:rn.onSetupColumn("onLast")}),Tt.ui.registry.addButton("tabledeletecol",{tooltip:"Delete column",onAction:En("mceTableDeleteCol"),icon:"table-delete-column",onSetup:rn.onSetupColumn("onAny")}),Tt.ui.registry.addButton("tablecutrow",{tooltip:"Cut row",icon:"cut-row",onAction:En("mceTableCutRow"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addButton("tablecopyrow",{tooltip:"Copy row",icon:"duplicate-row",onAction:En("mceTableCopyRow"),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addButton("tablepasterowbefore",{tooltip:"Paste row before",icon:"paste-row-before",onAction:En("mceTablePasteRowBefore"),onSetup:rn.onSetupPasteable(pr.getRows)}),Tt.ui.registry.addButton("tablepasterowafter",{tooltip:"Paste row after",icon:"paste-row-after",onAction:En("mceTablePasteRowAfter"),onSetup:rn.onSetupPasteable(pr.getRows)}),Tt.ui.registry.addButton("tablecutcol",{tooltip:"Cut column",icon:"cut-column",onAction:En("mceTableCutCol"),onSetup:rn.onSetupColumn("onAny")}),Tt.ui.registry.addButton("tablecopycol",{tooltip:"Copy column",icon:"duplicate-column",onAction:En("mceTableCopyCol"),onSetup:rn.onSetupColumn("onAny")}),Tt.ui.registry.addButton("tablepastecolbefore",{tooltip:"Paste column before",icon:"paste-column-before",onAction:En("mceTablePasteColBefore"),onSetup:rn.onSetupPasteableColumn(pr.getColumns,"onFirst")}),Tt.ui.registry.addButton("tablepastecolafter",{tooltip:"Paste column after",icon:"paste-column-after",onAction:En("mceTablePasteColAfter"),onSetup:rn.onSetupPasteableColumn(pr.getColumns,"onLast")}),Tt.ui.registry.addButton("tableinsertdialog",{tooltip:"Insert table",onAction:En("mceInsertTable"),icon:"table"});var _r=ep(Cl(Tt));0!==_r.length&&Tt.ui.registry.addMenuButton("tableclass",{icon:"table-classes",tooltip:"Table styles",fetch:lv(Tt,Dn,_r,"tableclass",function(Nr){return Tt.execCommand("mceTableToggleClass",!1,Nr)}),onSetup:rn.onSetupTable});var Fr=ep(Xi(Tt));0!==Fr.length&&Tt.ui.registry.addMenuButton("tablecellclass",{icon:"table-cell-classes",tooltip:"Cell styles",fetch:lv(Tt,Dn,Fr,"tablecellclass",function(Nr){return Tt.execCommand("mceTableCellToggleClass",!1,Nr)}),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuButton("tablecellvalign",{icon:"vertical-align",tooltip:"Vertical align",fetch:lv(Tt,Dn,ud,"tablecellverticalalign",Gh(Tt,"vertical-align")),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuButton("tablecellborderwidth",{icon:"border-width",tooltip:"Border width",fetch:lv(Tt,Dn,xf(Tt),"tablecellborderwidth",Gh(Tt,"border-width")),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuButton("tablecellborderstyle",{icon:"border-style",tooltip:"Border style",fetch:lv(Tt,Dn,_f(Tt),"tablecellborderstyle",Gh(Tt,"border-style")),onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addToggleButton("tablecaption",{tooltip:"Table caption",onAction:En("mceTableToggleCaption"),icon:"table-caption",onSetup:rn.onSetupTableWithCaption}),Tt.ui.registry.addMenuButton("tablecellbackgroundcolor",{icon:"cell-background-color",tooltip:"Background color",fetch:function(Nr){return Nr(Ln(Tt,zh(Tt),"background-color"))},onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addMenuButton("tablecellbordercolor",{icon:"cell-border-color",tooltip:"Border color",fetch:function(Nr){return Nr(Ln(Tt,wf(Tt),"border-color"))},onSetup:rn.onSetupCellOrRow}),Tt.ui.registry.addToggleButton("tablerowheader",{tooltip:"Row header",icon:"table-top-header",onAction:Zx(Tt),onSetup:rn.onSetupTableRowHeaders}),Tt.ui.registry.addToggleButton("tablecolheader",{tooltip:"Column header",icon:"table-left-header",onAction:Ta(Tt),onSetup:rn.onSetupTableColumnHeaders})}(S,Et,wt,Ft),0<(Ye=(Pe=S).getParam("table_toolbar","tableprops tabledelete | tableinsertrowbefore tableinsertrowafter tabledeleterow | tableinsertcolbefore tableinsertcolafter tabledeletecol")).length&&Pe.ui.registry.addContextToolbar("table",{predicate:function(Tt){return Pe.dom.is(Tt,"table")&&Pe.getBody().contains(Tt)},items:Ye,scope:"node",position:"node"}),S.on("PreInit",function(){S.serializer.addTempAttr(Dc.firstSelected),S.serializer.addTempAttr(Dc.lastSelected),S.formatter.register(s1)}),S.getParam("table_tab_navigation",!0,"boolean")&&S.on("keydown",function(Tt){var Dn,rn,pr,En,_r=S,Fr=Qt;(Dn=Tt).keyCode===dd.TAB&&(rn=Xl(_r),pr=function(Nr){var oo=Xr(Nr);return fr(Nr,rn)||$e(d1,oo)},En=_r.selection.getRng(),Vp(Bt.fromDom(Dn.shiftKey?En.startContainer:En.endContainer),pr).each(function(Nr){Dn.preventDefault(),ea(Nr,pr).each(Fr.clear),_r.selection.collapse(Dn.shiftKey),(Dn.shiftKey?function(oo,So,Yr){return Jg(oo,So,(ti=Bs,S0(Oo=Yr,void 0).fold(function(){return Ec.none()},function($i){return W0($i.all,Oo,$i.index,-1,ti)})));var Oo,ti}:po)(_r,pr,Nr).each(function(oo){_r.selection.setRng(oo)})}))}),S.on("remove",function(){Ut.destroy()}),{insertTable:(ke=S,function(Tt,Dn,rn){var pr=Ig(ke,Dn,Tt,rn=void 0===rn?{}:rn,"Invalid values for insertTable - rows and columns values are required to insert a table.");return ke.undoManager.add(),pr}),setClipboardRows:_0(Ft.setRows),getClipboardRows:sv(Ft.getRows),setClipboardCols:_0(Ft.setColumns),getClipboardCols:sv(Ft.getColumns),resizeHandler:Ut,selectionTargets:wt};function Mn(Tt){return rc(Sa(tt)).bind(function(Dn){return ea(Dn,dt).map(function(rn){var pr=Zl(mt,rn,Dn);return Tt(rn,pr)})}).getOr("")}})}(),function(pt,hn){"object"==typeof exports&&"undefined"!=typeof module?hn(exports):"function"==typeof define&&define.amd?define(["exports"],hn):hn(pt.echarts={})}(this,function(pt){"use strict";var e,t,n,o,a,u,Wt,hn=2311,gr=function(){return hn++},Ze="object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?{browser:{},os:{},node:!1,wxa:!0,canvasSupported:!0,svgSupported:!1,touchEventsSupported:!0,domSupported:!1}:"undefined"==typeof document&&"undefined"!=typeof self?{browser:{},os:{},node:!1,worker:!0,canvasSupported:!0,domSupported:!1}:"undefined"==typeof navigator?{browser:{},os:{},node:!0,worker:!1,canvasSupported:!0,svgSupported:!0,domSupported:!1}:(t={},n=(e=navigator.userAgent).match(/Firefox\/([\d.]+)/),o=e.match(/MSIE\s([\d.]+)/)||e.match(/Trident\/.+?rv:(([\d.]+))/),a=e.match(/Edge\/([\d.]+)/),u=/micromessenger/i.test(e),n&&(t.firefox=!0,t.version=n[1]),o&&(t.ie=!0,t.version=o[1]),a&&(t.edge=!0,t.version=a[1]),u&&(t.weChat=!0),{browser:t,os:{},node:!1,canvasSupported:!!document.createElement("canvas").getContext,svgSupported:"undefined"!=typeof SVGRect,touchEventsSupported:"ontouchstart"in window&&!t.ie&&!t.edge,pointerEventsSupported:"onpointerdown"in window&&(t.edge||t.ie&&11<=t.version),domSupported:"undefined"!=typeof document}),je={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1,"[object CanvasPattern]":1,"[object Image]":1,"[object Canvas]":1},j={"[object Int8Array]":1,"[object Uint8Array]":1,"[object Uint8ClampedArray]":1,"[object Int16Array]":1,"[object Uint16Array]":1,"[object Int32Array]":1,"[object Uint32Array]":1,"[object Float32Array]":1,"[object Float64Array]":1},ye=Object.prototype.toString,F=Array.prototype,U=F.forEach,se=F.filter,$=F.slice,Z=F.map,oe=F.reduce,ne={};function Q(e,t){"createCanvas"===e&&(Wt=null),ne[e]=t}function ie(e){if(null==e||"object"!=typeof e)return e;var t=e,n=ye.call(e);if("[object Array]"===n){if(!Pi(e)){t=[];for(var o=0,a=e.length;o<a;o++)t[o]=ie(e[o])}}else if(j[n]){if(!Pi(e)){var u=e.constructor;if(e.constructor.from)t=u.from(e);else for(t=new u(e.length),o=0,a=e.length;o<a;o++)t[o]=ie(e[o])}}else if(!je[n]&&!Pi(e)&&!wo(e))for(var l in t={},e)e.hasOwnProperty(l)&&(t[l]=ie(e[l]));return t}function xe(e,t,n){if(!ln(t)||!ln(e))return n?ie(t):e;for(var o in t)if(t.hasOwnProperty(o)){var a=e[o],u=t[o];!ln(u)||!ln(a)||en(u)||en(a)||wo(u)||wo(a)||Tn(u)||Tn(a)||Pi(u)||Pi(a)?!n&&o in e||(e[o]=ie(t[o])):xe(a,u,n)}return e}function Ae(e,t){for(var n=e[0],o=1,a=e.length;o<a;o++)n=xe(n,e[o],t);return n}function Ne(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}function Ee(e,t,n){for(var o in t)t.hasOwnProperty(o)&&(n?null!=t[o]:null==e[o])&&(e[o]=t[o]);return e}function nt(){return ne.createCanvas()}function qe(){return Wt=Wt||nt().getContext("2d")}function $e(e,t){if(e){if(e.indexOf)return e.indexOf(t);for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n}return-1}function Ie(e,t){var n=e.prototype;function o(){}for(var a in o.prototype=t.prototype,e.prototype=new o,n)n.hasOwnProperty(a)&&(e.prototype[a]=n[a]);(e.prototype.constructor=e).superClass=t}function de(e,t,n){Ee(e="prototype"in e?e.prototype:e,t="prototype"in t?t.prototype:t,n)}function Fe(e){if(e)return"string"!=typeof e&&"number"==typeof e.length}function le(e,t,n){if(e&&t)if(e.forEach&&e.forEach===U)e.forEach(t,n);else if(e.length===+e.length)for(var o=0,a=e.length;o<a;o++)t.call(n,e[o],o,e);else for(var u in e)e.hasOwnProperty(u)&&t.call(n,e[u],u,e)}function Ge(e,t,n){if(e&&t){if(e.map&&e.map===Z)return e.map(t,n);for(var o=[],a=0,u=e.length;a<u;a++)o.push(t.call(n,e[a],a,e));return o}}function Qe(e,t,n,o){if(e&&t){if(e.reduce&&e.reduce===oe)return e.reduce(t,n,o);for(var a=0,u=e.length;a<u;a++)n=t.call(o,n,e[a],a,e);return n}}function ht(e,t,n){if(e&&t){if(e.filter&&e.filter===se)return e.filter(t,n);for(var o=[],a=0,u=e.length;a<u;a++)t.call(n,e[a],a,e)&&o.push(e[a]);return o}}function Jt(e,t,n){if(e&&t)for(var o=0,a=e.length;o<a;o++)if(t.call(n,e[o],o,e))return e[o]}function Rt(e,t){var n=$.call(arguments,2);return function(){return e.apply(t,n.concat($.call(arguments)))}}function pn(e){var t=$.call(arguments,1);return function(){return e.apply(this,t.concat($.call(arguments)))}}function en(e){return"[object Array]"===ye.call(e)}function Ot(e){return"function"==typeof e}function Gn(e){return"[object String]"===ye.call(e)}function ln(e){var t=typeof e;return"function"==t||!!e&&"object"==t}function Tn(e){return!!je[ye.call(e)]}function to(e){return!!j[ye.call(e)]}function wo(e){return"object"==typeof e&&"number"==typeof e.nodeType&&"object"==typeof e.ownerDocument}function Tr(e){return e!=e}function Gr(e){for(var t=0,n=arguments.length;t<n;t++)if(null!=arguments[t])return arguments[t]}function Or(e,t){return null!=e?e:t}function xt(e,t,n){return null!=e?e:null!=t?t:n}function rr(){return Function.call.apply($,arguments)}function ai(e){if("number"==typeof e)return[e,e,e,e];var t=e.length;return 2===t?[e[0],e[1],e[0],e[1]]:3===t?[e[0],e[1],e[2],e[1]]:e}function Qi(e,t){if(!e)throw new Error(t)}function Mr(e){return null==e?null:"function"==typeof e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}ne.createCanvas=function(){return document.createElement("canvas")};var Wo="__ec_primitive__";function Yi(e){e[Wo]=!0}function Pi(e){return e[Wo]}function Ba(e){var t=en(e);this.data={};var n=this;function o(a,u){t?n.set(a,u):n.set(u,a)}e instanceof Ba?e.each(o):e&&le(e,o)}function Gt(e){return new Ba(e)}function jt(e,t){for(var n=new e.constructor(e.length+t.length),o=0;o<e.length;o++)n[o]=e[o];var a=e.length;for(o=0;o<t.length;o++)n[o+a]=t[o];return n}function yn(){}Ba.prototype={constructor:Ba,get:function(e){return this.data.hasOwnProperty(e)?this.data[e]:null},set:function(e,t){return this.data[e]=t},each:function(e,t){for(var n in void 0!==t&&(e=Rt(e,t)),this.data)this.data.hasOwnProperty(n)&&e(this.data[n],n)},removeKey:function(e){delete this.data[e]}};var On=(Object.freeze||Object)({$override:Q,clone:ie,merge:xe,mergeAll:Ae,extend:Ne,defaults:Ee,createCanvas:nt,getContext:qe,indexOf:$e,inherits:Ie,mixin:de,isArrayLike:Fe,each:le,map:Ge,reduce:Qe,filter:ht,find:Jt,bind:Rt,curry:pn,isArray:en,isFunction:Ot,isString:Gn,isObject:ln,isBuiltInObject:Tn,isTypedArray:to,isDom:wo,eqNaN:Tr,retrieve:Gr,retrieve2:Or,retrieve3:xt,slice:rr,normalizeCssArray:ai,assert:Qi,trim:Mr,setAsPrimitive:Yi,isPrimitive:Pi,createHashMap:Gt,concatArray:jt,noop:yn}),cr="undefined"==typeof Float32Array?Array:Float32Array;function tr(e,t){var n=new cr(2);return null==e&&(e=0),null==t&&(t=0),n[0]=e,n[1]=t,n}function sn(e,t){return e[0]=t[0],e[1]=t[1],e}function qr(e){var t=new cr(2);return t[0]=e[0],t[1]=e[1],t}function fr(e,t,n){return e[0]=t,e[1]=n,e}function Eo(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}function li(e,t,n,o){return e[0]=t[0]+n[0]*o,e[1]=t[1]+n[1]*o,e}function di(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}function vo(e){return Math.sqrt(qi(e))}function qi(e){return e[0]*e[0]+e[1]*e[1]}function ma(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}function ps(e,t){var n=vo(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}function X(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}var os=X;function $a(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}var nu=$a;function ki(e,t,n,o){return e[0]=t[0]+o*(n[0]-t[0]),e[1]=t[1]+o*(n[1]-t[1]),e}function ur(e,t,n){var o=t[0],a=t[1];return e[0]=n[0]*o+n[2]*a+n[4],e[1]=n[1]*o+n[3]*a+n[5],e}function Yu(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}function pi(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}var Do=(Object.freeze||Object)({create:tr,copy:sn,clone:qr,set:fr,add:Eo,scaleAndAdd:li,sub:di,len:vo,length:vo,lenSquare:qi,lengthSquare:qi,mul:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e},div:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e},dot:function(e,t){return e[0]*t[0]+e[1]*t[1]},scale:ma,normalize:ps,distance:X,dist:os,distanceSquare:$a,distSquare:nu,negate:function(e,t){return e[0]=-t[0],e[1]=-t[1],e},lerp:ki,applyTransform:ur,min:Yu,max:pi});function dc(){this.on("mousedown",this._dragStart,this),this.on("mousemove",this._drag,this),this.on("mouseup",this._dragEnd,this)}function ir(e,t){return{target:e,topTarget:t&&t.topTarget}}dc.prototype={constructor:dc,_dragStart:function(e){for(var t=e.target;t&&!t.draggable;)t=t.parent;t&&((this._draggingTarget=t).dragging=!0,this._x=e.offsetX,this._y=e.offsetY,this.dispatchToElement(ir(t,e),"dragstart",e.event))},_drag:function(e){var t=this._draggingTarget;if(t){var n=e.offsetX,o=e.offsetY,a=n-this._x,u=o-this._y;this._x=n,this._y=o,t.drift(a,u,e),this.dispatchToElement(ir(t,e),"drag",e.event);var l=this.findHover(n,o,t).target,f=this._dropTarget;t!==(this._dropTarget=l)&&(f&&l!==f&&this.dispatchToElement(ir(f,e),"dragleave",e.event),l&&l!==f&&this.dispatchToElement(ir(l,e),"dragenter",e.event))}},_dragEnd:function(e){var t=this._draggingTarget;t&&(t.dragging=!1),this.dispatchToElement(ir(t,e),"dragend",e.event),this._dropTarget&&this.dispatchToElement(ir(this._dropTarget,e),"drop",e.event),this._draggingTarget=null,this._dropTarget=null}};var Vt=Array.prototype.slice,wn=function(e){this._$handlers={},this._$eventProcessor=e};function rt(e,t,n,o,a,u){var k,M,l=e._$handlers;if("function"==typeof n&&(a=o,o=n,n=null),!o||!t)return e;M=e._$eventProcessor,null!=(k=n)&&M&&M.normalizeQuery&&(k=M.normalizeQuery(k)),n=k,l[t]||(l[t]=[]);for(var f=0;f<l[t].length;f++)if(l[t][f].h===o)return e;var m={h:o,one:u,query:n,ctx:a||e,callAtLast:o.zrEventfulCallAtLast},v=l[t].length-1,x=l[t][v];return x&&x.callAtLast?l[t].splice(v,0,m):l[t].push(m),e}wn.prototype={constructor:wn,one:function(e,t,n,o){return rt(this,e,t,n,o,!0)},on:function(e,t,n,o){return rt(this,e,t,n,o,!1)},isSilent:function(e){var t=this._$handlers;return!t[e]||!t[e].length},off:function(e,t){var n=this._$handlers;if(!e)return this._$handlers={},this;if(t){if(n[e]){for(var o=[],a=0,u=n[e].length;a<u;a++)n[e][a].h!==t&&o.push(n[e][a]);n[e]=o}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this},trigger:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var o=arguments,a=o.length;3<a&&(o=Vt.call(o,1));for(var u=t.length,l=0;l<u;){var f=t[l];if(n&&n.filter&&null!=f.query&&!n.filter(e,f.query))l++;else{switch(a){case 1:f.h.call(f.ctx);break;case 2:f.h.call(f.ctx,o[1]);break;case 3:f.h.call(f.ctx,o[1],o[2]);break;default:f.h.apply(f.ctx,o)}f.one?(t.splice(l,1),u--):l++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this},triggerWithContext:function(e){var t=this._$handlers[e],n=this._$eventProcessor;if(t){var o=arguments,a=o.length;4<a&&(o=Vt.call(o,1,o.length-1));for(var u=o[o.length-1],l=t.length,f=0;f<l;){var m=t[f];if(n&&n.filter&&null!=m.query&&!n.filter(e,m.query))f++;else{switch(a){case 1:m.h.call(u);break;case 2:m.h.call(u,o[1]);break;case 3:m.h.call(u,o[1],o[2]);break;default:m.h.apply(u,o)}m.one?(t.splice(f,1),l--):f++}}}return n&&n.afterTrigger&&n.afterTrigger(e),this}};var Dt=Math.log(2);function ct(e,t,n,o,a,u){var l=o+"-"+a,f=e.length;if(u.hasOwnProperty(l))return u[l];if(1===t){var m=Math.round(Math.log((1<<f)-1&~a)/Dt);return e[n][m]}for(var v=o|1<<n,x=n+1;o&1<<x;)x++;for(var C=0,k=0,M=0;k<f;k++){var E=1<<k;E&a||(C+=(M%2?-1:1)*e[n][k]*ct(e,t-1,x,v,a|E,u),M++)}return u[l]=C}function tn(e,t){var n=[[e[0],e[1],1,0,0,0,-t[0]*e[0],-t[0]*e[1]],[0,0,0,e[0],e[1],1,-t[1]*e[0],-t[1]*e[1]],[e[2],e[3],1,0,0,0,-t[2]*e[2],-t[2]*e[3]],[0,0,0,e[2],e[3],1,-t[3]*e[2],-t[3]*e[3]],[e[4],e[5],1,0,0,0,-t[4]*e[4],-t[4]*e[5]],[0,0,0,e[4],e[5],1,-t[5]*e[4],-t[5]*e[5]],[e[6],e[7],1,0,0,0,-t[6]*e[6],-t[6]*e[7]],[0,0,0,e[6],e[7],1,-t[7]*e[6],-t[7]*e[7]]],o={},a=ct(n,8,0,0,0,o);if(0!==a){for(var u=[],l=0;l<8;l++)for(var f=0;f<8;f++)null==u[f]&&(u[f]=0),u[f]+=((l+f)%2?-1:1)*ct(n,7,0===l?1:0,1<<l,1<<f,o)/a*t[l];return function(m,v,x){var C=v*u[6]+x*u[7]+1;m[0]=(v*u[0]+x*u[1]+u[2])/C,m[1]=(v*u[3]+x*u[4]+u[5])/C}}}var qt="___zrEVENTSAVED",un=[];function ar(e,t,n,o,a){if(t.getBoundingClientRect&&Ze.domSupported&&!qn(t)){var u=t[qt]||(t[qt]={}),l=function(f,m,v){for(var x=v?"invTrans":"trans",C=m[x],k=m.srcCoords,M=!0,E=[],V=[],N=0;N<4;N++){var G=f[N].getBoundingClientRect(),te=2*N,J=G.left,me=G.top;E.push(J,me),M=M&&k&&J===k[te]&&me===k[1+te],V.push(f[N].offsetLeft,f[N].offsetTop)}return M&&C?C:(m.srcCoords=E,m[x]=v?tn(V,E):tn(E,V))}(function(f,m){var v=m.markers;if(v)return v;v=m.markers=[];for(var x=["left","right"],C=["top","bottom"],k=0;k<4;k++){var M=document.createElement("div"),V=k%2,N=(k>>1)%2;M.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",x[V]+":0",C[N]+":0",x[1-V]+":auto",C[1-N]+":auto",""].join("!important;"),f.appendChild(M),v.push(M)}return v}(t,u),u,a);if(l)return l(e,n,o),!0}return!1}function qn(e){return"CANVAS"===e.nodeName.toUpperCase()}var Yn="undefined"!=typeof window&&!!window.addEventListener,or=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,$n=[];function Sn(e,t,n,o){return n=n||{},o||!Ze.canvasSupported?Fn(e,t,n):Ze.browser.firefox&&null!=t.layerX&&t.layerX!==t.offsetX?(n.zrX=t.layerX,n.zrY=t.layerY):null!=t.offsetX?(n.zrX=t.offsetX,n.zrY=t.offsetY):Fn(e,t,n),n}function Fn(e,t,n){if(Ze.domSupported&&e.getBoundingClientRect){var o=t.clientX,a=t.clientY;if(qn(e)){var u=e.getBoundingClientRect();return n.zrX=o-u.left,void(n.zrY=a-u.top)}if(ar($n,e,o,a))return n.zrX=$n[0],void(n.zrY=$n[1])}n.zrX=n.zrY=0}function Bt(e){return e||window.event}function Hr(e,t,n){if(null!=(t=Bt(t)).zrX)return t;var o=t.type;if(o&&0<=o.indexOf("touch")){var a="touchend"!==o?t.targetTouches[0]:t.changedTouches[0];a&&Sn(e,a,t,n)}else Sn(e,t,t,n),t.zrDelta=t.wheelDelta?t.wheelDelta/120:-(t.detail||0)/3;var u=t.button;return null==t.which&&void 0!==u&&or.test(t.type)&&(t.which=1&u?1:2&u?3:4&u?2:0),t}function Wr(e,t,n,o){Yn?e.addEventListener(t,n,o):e.attachEvent("on"+t,n)}var Br=Yn?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0};function Er(e){return 2===e.which||3===e.which}function mo(){this._track=[]}function jo(e){var t=e[1][0]-e[0][0],n=e[1][1]-e[0][1];return Math.sqrt(t*t+n*n)}mo.prototype={constructor:mo,recognize:function(e,t,n){return this._doTrack(e,t,n),this._recognize(e)},clear:function(){return this._track.length=0,this},_doTrack:function(e,t,n){var o=e.touches;if(o){for(var a={points:[],touches:[],target:t,event:e},u=0,l=o.length;u<l;u++){var f=o[u],m=Sn(n,f,{});a.points.push([m.zrX,m.zrY]),a.touches.push(f)}this._track.push(a)}},_recognize:function(e){for(var t in Xr)if(Xr.hasOwnProperty(t)){var n=Xr[t](this._track,e);if(n)return n}}};var Xr={pinch:function(e,t){var f,n=e.length;if(n){var o=(e[n-1]||{}).points,a=(e[n-2]||{}).points||o;if(a&&1<a.length&&o&&1<o.length){var u=jo(o)/jo(a);isFinite(u)||(u=1),t.pinchScale=u;var l=[((f=o)[0][0]+f[1][0])/2,(f[0][1]+f[1][1])/2];return t.pinchX=l[0],t.pinchY=l[1],{type:"pinch",target:e[0].target,event:t}}}}};function yr(){Br(this.event)}function ao(){}function Ti(e,t,n,o){wn.call(this),this.storage=e,this.painter=t,this.painterRoot=o,n=n||new ao,this.proxy=null,this._hovered={},dc.call(this),this.setHandlerProxy(n)}ao.prototype.dispose=function(){};var js=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"];function qs(e,t,n){if(e[e.rectHover?"rectContain":"contain"](t,n)){for(var o,a=e;a;){if(a.clipPath&&!a.clipPath.contain(t,n))return!1;a.silent&&(o=!0),a=a.parent}return!o||"silent"}return!1}function Ir(e,t,n){var o=e.painter;return t<0||t>o.getWidth()||n<0||n>o.getHeight()}Ti.prototype={constructor:Ti,setHandlerProxy:function(e){this.proxy&&this.proxy.dispose(),e&&(le(js,function(t){e.on&&e.on(t,this[t],this)},this),e.handler=this),this.proxy=e},mousemove:function(e){var t=e.zrX,n=e.zrY,o=Ir(this,t,n),a=this._hovered,u=a.target;u&&!u.__zr&&(u=(a=this.findHover(a.x,a.y)).target);var l=this._hovered=o?{x:t,y:n}:this.findHover(t,n),f=l.target,m=this.proxy;m.setCursor&&m.setCursor(f?f.cursor:"default"),u&&f!==u&&this.dispatchToElement(a,"mouseout",e),this.dispatchToElement(l,"mousemove",e),f&&f!==u&&this.dispatchToElement(l,"mouseover",e)},mouseout:function(e){var t=e.zrEventControl,n=e.zrIsToLocalDOM;"only_globalout"!==t&&this.dispatchToElement(this._hovered,"mouseout",e),"no_globalout"!==t&&(n||this.trigger("globalout",{type:"globalout",event:e}))},resize:function(e){this._hovered={}},dispatch:function(e,t){var n=this[e];n&&n.call(this,t)},dispose:function(){this.proxy.dispose(),this.storage=this.proxy=this.painter=null},setCursorStyle:function(e){var t=this.proxy;t.setCursor&&t.setCursor(e)},dispatchToElement:function(e,t,n){var f,m,o=(e=e||{}).target;if(!o||!o.silent){for(var a="on"+t,u={type:t,event:m=n,target:(f=e).target,topTarget:f.topTarget,cancelBubble:!1,offsetX:m.zrX,offsetY:m.zrY,gestureEvent:m.gestureEvent,pinchX:m.pinchX,pinchY:m.pinchY,pinchScale:m.pinchScale,wheelDelta:m.zrDelta,zrByTouch:m.zrByTouch,which:m.which,stop:yr};o&&(o[a]&&(u.cancelBubble=o[a].call(o,u)),o.trigger(t,u),o=o.parent,!u.cancelBubble););u.cancelBubble||(this.trigger(t,u),this.painter&&this.painter.eachOtherLayer(function(l){"function"==typeof l[a]&&l[a].call(l,u),l.trigger&&l.trigger(t,u)}))}},findHover:function(e,t,n){for(var o=this.storage.getDisplayList(),a={x:e,y:t},u=o.length-1;0<=u;u--){var l;if(o[u]!==n&&!o[u].ignore&&(l=qs(o[u],e,t))&&(a.topTarget||(a.topTarget=o[u]),"silent"!==l)){a.target=o[u];break}}return a},processGesture:function(e,t){this._gestureMgr||(this._gestureMgr=new mo);var n=this._gestureMgr;"start"===t&&n.clear();var o=n.recognize(e,this.findHover(e.zrX,e.zrY,null).target,this.proxy.dom);if("end"===t&&n.clear(),o){var a=o.type;e.gestureEvent=a,this.dispatchToElement({target:o.target},a,o.event)}}},le(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],function(e){Ti.prototype[e]=function(t){var n,o,a=t.zrX,u=t.zrY,l=Ir(this,a,u);if("mouseup"===e&&l||(o=(n=this.findHover(a,u)).target),"mousedown"===e)this._downEl=o,this._downPoint=[t.zrX,t.zrY],this._upEl=o;else if("mouseup"===e)this._upEl=o;else if("click"===e){if(this._downEl!==this._upEl||!this._downPoint||4<os(this._downPoint,[t.zrX,t.zrY]))return;this._downPoint=null}this.dispatchToElement(n,e,t)}}),de(Ti,wn),de(Ti,dc);var fc="undefined"==typeof Float32Array?Array:Float32Array;function vi(){var e=new fc(6);return Fa(e),e}function Fa(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}function is(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}function pa(e,t,n){var a=t[1]*n[0]+t[3]*n[1],u=t[0]*n[2]+t[2]*n[3],l=t[1]*n[2]+t[3]*n[3],f=t[0]*n[4]+t[2]*n[5]+t[4],m=t[1]*n[4]+t[3]*n[5]+t[5];return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=a,e[2]=u,e[3]=l,e[4]=f,e[5]=m,e}function Xc(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}function Yc(e,t,n){var o=t[0],a=t[2],u=t[4],l=t[1],f=t[3],m=t[5],v=Math.sin(n),x=Math.cos(n);return e[0]=o*x+l*v,e[1]=-o*v+l*x,e[2]=a*x+f*v,e[3]=-a*v+x*f,e[4]=x*u+v*m,e[5]=x*m-v*u,e}function Qr(e,t,n){var o=n[0],a=n[1];return e[0]=t[0]*o,e[1]=t[1]*a,e[2]=t[2]*o,e[3]=t[3]*a,e[4]=t[4]*o,e[5]=t[5]*a,e}function aa(e,t){var n=t[0],o=t[2],a=t[4],u=t[1],l=t[3],f=t[5],m=n*l-u*o;return m?(e[0]=l*(m=1/m),e[1]=-u*m,e[2]=-o*m,e[3]=n*m,e[4]=(o*f-l*a)*m,e[5]=(u*a-n*f)*m,e):null}function Zc(e){var t=vi();return is(t,e),t}var Is=(Object.freeze||Object)({create:vi,identity:Fa,copy:is,mul:pa,translate:Xc,rotate:Yc,scale:Qr,invert:aa,clone:Zc}),Ni=Fa;function yu(e){return 5e-5<e||e<-5e-5}var Co=function(e){(e=e||{}).position||(this.position=[0,0]),null==e.rotation&&(this.rotation=0),e.scale||(this.scale=[1,1]),this.origin=this.origin||null},Vl=Co.prototype;Vl.transform=null,Vl.needLocalTransform=function(){return yu(this.rotation)||yu(this.position[0])||yu(this.position[1])||yu(this.scale[0]-1)||yu(this.scale[1]-1)};var km=[];Vl.updateTransform=function(){var e=this.parent,t=e&&e.transform,n=this.needLocalTransform(),o=this.transform;if(n||t){o=o||vi(),n?this.getLocalTransform(o):Ni(o),t&&(n?pa(o,e.transform,o):is(o,e.transform)),this.transform=o;var a=this.globalScaleRatio;if(null!=a&&1!==a){this.getGlobalScale(km);var u=km[0]<0?-1:1,l=km[1]<0?-1:1,f=((km[0]-u)*a+u)/km[0]||0,m=((km[1]-l)*a+l)/km[1]||0;o[0]*=f,o[1]*=f,o[2]*=m,o[3]*=m}this.invTransform=this.invTransform||vi(),aa(this.invTransform,o)}else o&&Ni(o)},Vl.getLocalTransform=function(e){return Co.getLocalTransform(this,e)},Vl.setTransform=function(e){var t=this.transform,n=e.dpr||1;t?e.setTransform(n*t[0],n*t[1],n*t[2],n*t[3],n*t[4],n*t[5]):e.setTransform(n,0,0,n,0,0)},Vl.restoreTransform=function(e){var t=e.dpr||1;e.setTransform(t,0,0,t,0,0)};var Os=[],zr=vi();Vl.setLocalTransform=function(e){if(e){var t=e[0]*e[0]+e[1]*e[1],n=e[2]*e[2]+e[3]*e[3],o=this.position,a=this.scale;yu(t-1)&&(t=Math.sqrt(t)),yu(n-1)&&(n=Math.sqrt(n)),e[0]<0&&(t=-t),e[3]<0&&(n=-n),o[0]=e[4],o[1]=e[5],a[0]=t,a[1]=n,this.rotation=Math.atan2(-e[1]/n,e[0]/t)}},Vl.decomposeTransform=function(){if(this.transform){var e=this.parent,t=this.transform;e&&e.transform&&(pa(Os,e.invTransform,t),t=Os);var n=this.origin;n&&(n[0]||n[1])&&(zr[4]=n[0],zr[5]=n[1],pa(Os,t,zr),Os[4]-=n[0],Os[5]-=n[1],t=Os),this.setLocalTransform(t)}},Vl.getGlobalScale=function(e){var t=this.transform;return e=e||[],t?(e[0]=Math.sqrt(t[0]*t[0]+t[1]*t[1]),e[1]=Math.sqrt(t[2]*t[2]+t[3]*t[3]),t[0]<0&&(e[0]=-e[0]),t[3]<0&&(e[1]=-e[1])):(e[0]=1,e[1]=1),e},Vl.transformCoordToLocal=function(e,t){var n=[e,t],o=this.invTransform;return o&&ur(n,n,o),n},Vl.transformCoordToGlobal=function(e,t){var n=[e,t],o=this.transform;return o&&ur(n,n,o),n},Co.getLocalTransform=function(e,t){Ni(t=t||[]);var n=e.origin,o=e.scale||[1,1],a=e.rotation||0,u=e.position||[0,0];return n&&(t[4]-=n[0],t[5]-=n[1]),Qr(t,t,o),a&&Yc(t,t,a),n&&(t[4]+=n[0],t[5]+=n[1]),t[4]+=u[0],t[5]+=u[1],t};var Tm={linear:function(e){return e},quadraticIn:function(e){return e*e},quadraticOut:function(e){return e*(2-e)},quadraticInOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)},cubicIn:function(e){return e*e*e},cubicOut:function(e){return--e*e*e+1},cubicInOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},quarticIn:function(e){return e*e*e*e},quarticOut:function(e){return 1- --e*e*e*e},quarticInOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},quinticIn:function(e){return e*e*e*e*e},quinticOut:function(e){return--e*e*e*e*e+1},quinticInOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},sinusoidalIn:function(e){return 1-Math.cos(e*Math.PI/2)},sinusoidalOut:function(e){return Math.sin(e*Math.PI/2)},sinusoidalInOut:function(e){return.5*(1-Math.cos(Math.PI*e))},exponentialIn:function(e){return 0===e?0:Math.pow(1024,e-1)},exponentialOut:function(e){return 1===e?1:1-Math.pow(2,-10*e)},exponentialInOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))},circularIn:function(e){return 1-Math.sqrt(1-e*e)},circularOut:function(e){return Math.sqrt(1- --e*e)},circularInOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},elasticIn:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))},elasticOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)},elasticInOut:function(e){var t,n=.1;return 0===e?0:1===e?1:(t=!n||n<1?(n=1,.1):.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)},backIn:function(e){return e*e*(2.70158*e-1.70158)},backOut:function(e){return--e*e*(2.70158*e+1.70158)+1},backInOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)},bounceIn:function(e){return 1-Tm.bounceOut(1-e)},bounceOut:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bounceInOut:function(e){return e<.5?.5*Tm.bounceIn(2*e):.5*Tm.bounceOut(2*e-1)+.5}};function df(e){this._target=e.target,this._life=e.life||1e3,this._delay=e.delay||0,this._initialized=!1,this.loop=null!=e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this._pausedTime=0,this._paused=!1}function fn(){this.head=null,this.tail=null,this._len=0}df.prototype={constructor:df,step:function(e,t){if(this._initialized||(this._startTime=e+this._delay,this._initialized=!0),this._paused)this._pausedTime+=t;else{var n=(e-this._startTime-this._pausedTime)/this._life;if(!(n<0)){n=Math.min(n,1);var o=this.easing,a="string"==typeof o?Tm[o]:o,u="function"==typeof a?a(n):n;return this.fire("frame",u),1===n?this.loop?(this.restart(e),"restart"):(this._needsRemove=!0,"destroy"):null}}},restart:function(e){this._startTime=e-(e-this._startTime-this._pausedTime)%this._life+this.gap,this._pausedTime=0,this._needsRemove=!1},fire:function(e,t){this[e="on"+e]&&this[e](this._target,t)},pause:function(){this._paused=!0},resume:function(){this._paused=!1}};var zt=fn.prototype;function va(e){this._list=new fn,this._map={},this._maxSize=e||10,this._lastRemovedEntry=null}zt.insert=function(e){var t=new Fp(e);return this.insertEntry(t),t},zt.insertEntry=function(e){this.head?((this.tail.next=e).prev=this.tail,e.next=null,this.tail=e):this.head=this.tail=e,this._len++},zt.remove=function(e){var t=e.prev,n=e.next;t?t.next=n:this.head=n,n?n.prev=t:this.tail=t,e.next=e.prev=null,this._len--},zt.len=function(){return this._len},zt.clear=function(){this.head=this.tail=null,this._len=0};var Fp=function(e){this.value=e},xd=va.prototype;xd.put=function(e,t){var n=this._list,o=this._map,a=null;if(null==o[e]){var u=n.len(),l=this._lastRemovedEntry;if(u>=this._maxSize&&0<u){var f=n.head;n.remove(f),delete o[f.key],a=f.value,this._lastRemovedEntry=f}l?l.value=t:l=new Fp(t),l.key=e,n.insertEntry(l),o[e]=l}return a},xd.get=function(e){var t=this._map[e],n=this._list;if(null!=t)return t!==n.tail&&(n.remove(t),n.insertEntry(t)),t.value},xd.clear=function(){this._list.clear(),this._map={}};var ru={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Zu(e){return(e=Math.round(e))<0?0:255<e?255:e}function as(e){return e<0?0:1<e?1:e}function Ru(e){return e.length&&"%"===e.charAt(e.length-1)?Zu(parseFloat(e)/100*255):Zu(parseInt(e,10))}function Ku(e){return e.length&&"%"===e.charAt(e.length-1)?as(parseFloat(e)/100):as(parseFloat(e))}function Es(e,t,n){return n<0?n+=1:1<n&&(n-=1),6*n<1?e+(t-e)*n*6:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}function Lf(e,t,n){return e+(t-e)*n}function hc(e,t,n,o,a){return e[0]=t,e[1]=n,e[2]=o,e[3]=a,e}function Mm(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e}var c0=new va(20),Kc=null;function _d(e,t){Kc&&Mm(Kc,t),Kc=c0.put(e,Kc||t.slice())}function Hl(e,t){if(e){t=t||[];var n=c0.get(e);if(n)return Mm(t,n);var o,a=(e+="").replace(/ /g,"").toLowerCase();if(a in ru)return Mm(t,ru[a]),_d(e,t),t;if("#"===a.charAt(0))return 4===a.length?0<=(o=parseInt(a.substr(1),16))&&o<=4095?(hc(t,(3840&o)>>4|(3840&o)>>8,240&o|(240&o)>>4,15&o|(15&o)<<4,1),_d(e,t),t):void hc(t,0,0,0,1):7===a.length?0<=(o=parseInt(a.substr(1),16))&&o<=16777215?(hc(t,(16711680&o)>>16,(65280&o)>>8,255&o,1),_d(e,t),t):void hc(t,0,0,0,1):void 0;var u=a.indexOf("("),l=a.indexOf(")");if(-1!==u&&l+1===a.length){var f=a.substr(0,u),m=a.substr(u+1,l-(u+1)).split(","),v=1;switch(f){case"rgba":if(4!==m.length)return void hc(t,0,0,0,1);v=Ku(m.pop());case"rgb":return 3!==m.length?void hc(t,0,0,0,1):(hc(t,Ru(m[0]),Ru(m[1]),Ru(m[2]),v),_d(e,t),t);case"hsla":return 4!==m.length?void hc(t,0,0,0,1):(m[3]=Ku(m[3]),vs(m,t),_d(e,t),t);case"hsl":return 3!==m.length?void hc(t,0,0,0,1):(vs(m,t),_d(e,t),t);default:return}}hc(t,0,0,0,1)}}function vs(e,t){var n=(parseFloat(e[0])%360+360)%360/360,o=Ku(e[1]),a=Ku(e[2]),u=a<=.5?a*(o+1):a+o-a*o,l=2*a-u;return hc(t=t||[],Zu(255*Es(l,u,n+1/3)),Zu(255*Es(l,u,n)),Zu(255*Es(l,u,n-1/3)),1),4===e.length&&(t[3]=e[3]),t}function Wl(e,t){var n=Hl(e);if(n){for(var o=0;o<3;o++)n[o]=t<0?n[o]*(1-t)|0:(255-n[o])*t+n[o]|0,255<n[o]?n[o]=255:e[o]<0&&(n[o]=0);return Gl(n,4===n.length?"rgba":"rgb")}}function Ps(e){var t=Hl(e);if(t)return((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1)}function Ja(e,t,n){if(t&&t.length&&0<=e&&e<=1){n=n||[];var o=e*(t.length-1),a=Math.floor(o),u=Math.ceil(o),l=t[a],f=t[u],m=o-a;return n[0]=Zu(Lf(l[0],f[0],m)),n[1]=Zu(Lf(l[1],f[1],m)),n[2]=Zu(Lf(l[2],f[2],m)),n[3]=as(Lf(l[3],f[3],m)),n}}function wd(e,t,n){if(t&&t.length&&0<=e&&e<=1){var o=e*(t.length-1),a=Math.floor(o),u=Math.ceil(o),l=Hl(t[a]),f=Hl(t[u]),m=o-a,v=Gl([Zu(Lf(l[0],f[0],m)),Zu(Lf(l[1],f[1],m)),Zu(Lf(l[2],f[2],m)),as(Lf(l[3],f[3],m))],"rgba");return n?{color:v,leftIndex:a,rightIndex:u,value:o}:v}}function Ch(e,t,n,o){if(e=Hl(e))return e=function(a){if(a){var u,l,f=a[0]/255,m=a[1]/255,v=a[2]/255,x=Math.min(f,m,v),C=Math.max(f,m,v),k=C-x,M=(C+x)/2;if(0==k)l=u=0;else{l=M<.5?k/(C+x):k/(2-C-x);var E=((C-f)/6+k/2)/k,V=((C-m)/6+k/2)/k,N=((C-v)/6+k/2)/k;f===C?u=N-V:m===C?u=1/3+E-N:v===C&&(u=2/3+V-E),u<0&&(u+=1),1<u&&(u-=1)}var G=[360*u,l,M];return null!=a[3]&&G.push(a[3]),G}}(e),null!=t&&(e[0]=function(a){return(a=Math.round(a))<0?0:360<a?360:a}(t)),null!=n&&(e[1]=Ku(n)),null!=o&&(e[2]=Ku(o)),Gl(vs(e),"rgba")}function ff(e,t){if((e=Hl(e))&&null!=t)return e[3]=as(t),Gl(e,"rgba")}function Gl(e,t){if(e&&e.length){var n=e[0]+","+e[1]+","+e[2];return"rgba"!==t&&"hsva"!==t&&"hsla"!==t||(n+=","+e[3]),t+"("+n+")"}}var f0=(Object.freeze||Object)({parse:Hl,lift:Wl,toHex:Ps,fastLerp:Ja,fastMapToColor:Ja,lerp:wd,mapToColor:wd,modifyHSL:Ch,modifyAlpha:ff,stringify:Gl}),Vp=Array.prototype.slice;function Dm(e,t){return e[t]}function Nx(e,t,n){e[t]=n}function ea(e,t,n){return(t-e)*n+e}function Am(e,t,n){return.5<n?t:e}function mc(e,t,n,o,a){var u=e.length;if(1===a)for(var l=0;l<u;l++)o[l]=ea(e[l],t[l],n);else{var f=u&&e[0].length;for(l=0;l<u;l++)for(var m=0;m<f;m++)o[l][m]=ea(e[l][m],t[l][m],n)}}function h0(e,t,n){var o=e.length,a=t.length;if(o!==a)if(a<o)e.length=a;else for(var u=o;u<a;u++)e.push(1===n?t[u]:Vp.call(t[u]));var l=e[0]&&e[0].length;for(u=0;u<e.length;u++)if(1===n)isNaN(e[u])&&(e[u]=t[u]);else for(var f=0;f<l;f++)isNaN(e[u][f])&&(e[u][f]=t[u][f])}function Rx(e,t,n){if(e===t)return!0;var o=e.length;if(o!==t.length)return!1;if(1===n){for(var a=0;a<o;a++)if(e[a]!==t[a])return!1}else{var u=e[0].length;for(a=0;a<o;a++)for(var l=0;l<u;l++)if(e[a][l]!==t[a][l])return!1}return!0}function kh(e,t,n,o,a,u,l,f,m){var v=e.length;if(1===m)for(var x=0;x<v;x++)f[x]=yg(e[x],t[x],n[x],o[x],a,u,l);else{var C=e[0].length;for(x=0;x<v;x++)for(var k=0;k<C;k++)f[x][k]=yg(e[x][k],t[x][k],n[x][k],o[x][k],a,u,l)}}function yg(e,t,n,o,a,u,l){var f=.5*(n-e),m=.5*(o-t);return(2*(t-n)+f+m)*l+(-3*(t-n)-2*f-m)*u+f*a+t}function ml(e){if(Fe(e)){var t=e.length;if(Fe(e[0])){for(var n=[],o=0;o<t;o++)n.push(Vp.call(e[o]));return n}return Vp.call(e)}return e}function Ul(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}function wa(e,t,n,o,a,u){var Pt,Ct,l=e._getter,f=e._setter,m="spline"===t,v=o.length;if(v){var x,C=Fe(o[0].value),k=!1,M=!1,E=C?Fe((Ct=(Pt=o)[Pt.length-1].value)&&Ct[0])?2:1:0;o.sort(function(Pt,Ct){return Pt.time-Ct.time}),x=o[v-1].time;for(var V=[],N=[],G=o[0].value,te=!0,J=0;J<v;J++){V.push(o[J].time/x);var me=o[J].value;if(C&&Rx(me,G,E)||!C&&me===G||(te=!1),"string"==typeof(G=me)){var ge=Hl(me);ge?(me=ge,k=!0):M=!0}N.push(me)}if(u||!te){var pe=N[v-1];for(J=0;J<v-1;J++)C?h0(N[J],pe,E):!isNaN(N[J])||isNaN(pe)||M||k||(N[J]=pe);C&&h0(l(e._target,a),pe,E);var _e,Me,We,Ke,et,ut=0,lt=0;if(k)var vt=[0,0,0,0];var Mt=new df({target:e._target,life:x,loop:e._loop,delay:e._delay,onframe:function(Pt,Ct){var Zt;if(Ct<0)Zt=0;else if(Ct<lt){for(Zt=Math.min(ut+1,v-1);0<=Zt&&!(V[Zt]<=Ct);Zt--);Zt=Math.min(Zt,v-2)}else{for(Zt=ut;Zt<v&&!(V[Zt]>Ct);Zt++);Zt=Math.min(Zt-1,v-2)}lt=Ct;var An=V[(ut=Zt)+1]-V[Zt];if(0!=An)if(_e=(Ct-V[Zt])/An,m)if(We=N[Zt],Me=N[0===Zt?Zt:Zt-1],Ke=N[v-2<Zt?v-1:Zt+1],et=N[v-3<Zt?v-1:Zt+2],C)kh(Me,We,Ke,et,_e,_e*_e,_e*_e*_e,l(Pt,a),E);else{if(k)Rn=kh(Me,We,Ke,et,_e,_e*_e,_e*_e*_e,vt,1),Rn=Ul(vt);else{if(M)return Am(We,Ke,_e);Rn=yg(Me,We,Ke,et,_e,_e*_e,_e*_e*_e)}f(Pt,a,Rn)}else if(C)mc(N[Zt],N[Zt+1],_e,l(Pt,a),E);else{var Rn;if(k)mc(N[Zt],N[Zt+1],_e,vt,1),Rn=Ul(vt);else{if(M)return Am(N[Zt],N[Zt+1],_e);Rn=ea(N[Zt],N[Zt+1],_e)}f(Pt,a,Rn)}},ondestroy:n});return t&&"spline"!==t&&(Mt.easing=t),Mt}}}function pl(e,t,n,o){this._tracks={},this._target=e,this._loop=t||!1,this._getter=n||Dm,this._setter=o||Nx,this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[]}pl.prototype={when:function(e,t){var n=this._tracks;for(var o in t)if(t.hasOwnProperty(o)){if(!n[o]){n[o]=[];var a=this._getter(this._target,o);if(null==a)continue;0!==e&&n[o].push({time:0,value:ml(a)})}n[o].push({time:e,value:t[o]})}return this},during:function(e){return this._onframeList.push(e),this},pause:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].pause();this._paused=!0},resume:function(){for(var e=0;e<this._clipList.length;e++)this._clipList[e].resume();this._paused=!1},isPaused:function(){return!!this._paused},_doneCallback:function(){this._tracks={},this._clipList.length=0;for(var e=this._doneList,t=e.length,n=0;n<t;n++)e[n].call(this)},start:function(e,t){function n(){--u||a._doneCallback()}var o,a=this,u=0;for(var l in this._tracks)if(this._tracks.hasOwnProperty(l)){var f=wa(this,e,n,this._tracks[l],l,t);f&&(this._clipList.push(f),u++,this.animation&&this.animation.addClip(f),o=f)}if(o){var m=o.onframe;o.onframe=function(v,x){m(v,x);for(var C=0;C<a._onframeList.length;C++)a._onframeList[C](v,x)}}return u||this._doneCallback(),this},stop:function(e){for(var t=this._clipList,n=this.animation,o=0;o<t.length;o++){var a=t[o];e&&a.onframe(this._target,1),n&&n.removeClip(a)}t.length=0},delay:function(e){return this._delay=e,this},done:function(e){return e&&this._doneList.push(e),this},getClips:function(){return this._clipList}};var sa=1;"undefined"!=typeof window&&(sa=Math.max(window.devicePixelRatio||1,1));var pc=sa;function ys(){this.animators=[]}function Th(e,t,n,o,a,u,l,f){Gn(o)?(u=a,a=o,o=0):Ot(a)?(u=a,a="linear",o=0):Ot(o)?(u=o,o=0):n=Ot(n)?(u=n,500):n||500,e.stopAnimation(),function k(M,E,V,N,G,te,J){var me={},ge=0;for(var pe in N)N.hasOwnProperty(pe)&&(null!=V[pe]?ln(N[pe])&&!Fe(N[pe])?k(M,E?E+"."+pe:pe,V[pe],N[pe],G,te,J):(J?(me[pe]=V[pe],P_(M,E,pe,N[pe])):me[pe]=N[pe],ge++):null==N[pe]||J||P_(M,E,pe,N[pe]));0<ge&&M.animate(E,!1).when(null==G?500:G,me).delay(te||0)}(e,"",e,t,n,o,f);var m=e.animators.slice(),v=m.length;function x(){--v||u&&u()}v||u&&u();for(var C=0;C<m.length;C++)m[C].done(x).start(a,l)}function P_(e,t,n,o){if(t){var a={};a[t]={},a[t][n]=o,e.attr(a)}else e.attr(n,o)}ys.prototype={constructor:ys,animate:function(e,t){var n,o=!1,a=this,u=this.__zr;if(e){var l=e.split("."),f=a;o="shape"===l[0];for(var m=0,v=l.length;m<v;m++)f=f&&f[l[m]];f&&(n=f)}else n=a;if(n){var x=a.animators,C=new pl(n,t);return C.during(function(k){a.dirty(o)}).done(function(){x.splice($e(x,C),1)}),x.push(C),u&&u.animation.addAnimator(C),C}},stopAnimation:function(e){for(var t=this.animators,n=t.length,o=0;o<n;o++)t[o].stop(e);return t.length=0,this},animateTo:function(e,t,n,o,a,u){Th(this,e,t,n,o,a,u)},animateFrom:function(e,t,n,o,a,u){Th(this,e,t,n,o,a,u,!0)}};var bu=function(e){Co.call(this,e),wn.call(this,e),ys.call(this,e),this.id=e.id||gr()};bu.prototype={type:"element",name:"",__zr:null,ignore:!1,clipPath:null,isGroup:!1,drift:function(e,t){switch(this.draggable){case"horizontal":t=0;break;case"vertical":e=0}var n=this.transform;(n=n||(this.transform=[1,0,0,1,0,0]))[4]+=e,n[5]+=t,this.decomposeTransform(),this.dirty(!1)},beforeUpdate:function(){},afterUpdate:function(){},update:function(){this.updateTransform()},traverse:function(e,t){},attrKV:function(e,t){if("position"===e||"scale"===e||"origin"===e){if(t){var n=this[e];(n=n||(this[e]=[]))[0]=t[0],n[1]=t[1]}}else this[e]=t},hide:function(){this.ignore=!0,this.__zr&&this.__zr.refresh()},show:function(){this.ignore=!1,this.__zr&&this.__zr.refresh()},attr:function(e,t){if("string"==typeof e)this.attrKV(e,t);else if(ln(e))for(var n in e)e.hasOwnProperty(n)&&this.attrKV(n,e[n]);return this.dirty(!1),this},setClipPath:function(e){var t=this.__zr;t&&e.addSelfToZr(t),this.clipPath&&this.clipPath!==e&&this.removeClipPath(),(this.clipPath=e).__zr=t,(e.__clipTarget=this).dirty(!1)},removeClipPath:function(){var e=this.clipPath;e&&(e.__zr&&e.removeSelfFromZr(e.__zr),e.__zr=null,e.__clipTarget=null,this.clipPath=null,this.dirty(!1))},addSelfToZr:function(e){this.__zr=e;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.addAnimator(t[n]);this.clipPath&&this.clipPath.addSelfToZr(e)},removeSelfFromZr:function(e){this.__zr=null;var t=this.animators;if(t)for(var n=0;n<t.length;n++)e.animation.removeAnimator(t[n]);this.clipPath&&this.clipPath.removeSelfFromZr(e)}},de(bu,ys),de(bu,Co),de(bu,wn);var Sd,Mi,$c,Ju,vl=ur,ta=Math.min,Cd=Math.max;function ii(e,t,n,o){n<0&&(e+=n,n=-n),o<0&&(t+=o,o=-o),this.x=e,this.y=t,this.width=n,this.height=o}ii.prototype={constructor:ii,union:function(e){var t=ta(e.x,this.x),n=ta(e.y,this.y);this.width=Cd(e.x+e.width,this.x+this.width)-t,this.height=Cd(e.y+e.height,this.y+this.height)-n,this.x=t,this.y=n},applyTransform:(Sd=[],Mi=[],$c=[],Ju=[],function(e){if(e){Sd[0]=$c[0]=this.x,Sd[1]=Ju[1]=this.y,Mi[0]=Ju[0]=this.x+this.width,Mi[1]=$c[1]=this.y+this.height,vl(Sd,Sd,e),vl(Mi,Mi,e),vl($c,$c,e),vl(Ju,Ju,e),this.x=ta(Sd[0],Mi[0],$c[0],Ju[0]),this.y=ta(Sd[1],Mi[1],$c[1],Ju[1]);var t=Cd(Sd[0],Mi[0],$c[0],Ju[0]),n=Cd(Sd[1],Mi[1],$c[1],Ju[1]);this.width=t-this.x,this.height=n-this.y}}),calculateTransform:function(e){var t=e.width/this.width,n=e.height/this.height,o=vi();return Xc(o,o,[-this.x,-this.y]),Qr(o,o,[t,n]),Xc(o,o,[e.x,e.y]),o},intersect:function(e){if(!e)return!1;e instanceof ii||(e=ii.create(e));var t=this;return!(t.x+t.width<e.x||e.x+e.width<t.x||t.y+t.height<e.y||e.y+e.height<t.y)},contain:function(e,t){var n=this;return e>=n.x&&e<=n.x+n.width&&t>=n.y&&t<=n.y+n.height},clone:function(){return new ii(this.x,this.y,this.width,this.height)},copy:function(e){this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height},plain:function(){return{x:this.x,y:this.y,width:this.width,height:this.height}}},ii.create=function(e){return new ii(e.x,e.y,e.width,e.height)};var mr=function(e){for(var t in bu.call(this,e=e||{}),e)e.hasOwnProperty(t)&&(this[t]=e[t]);this._children=[],this.__storage=null,this.__dirty=!0};function xu(e,t,n,o){var a=t+1;if(a===n)return 1;if(o(e[a++],e[t])<0){for(;a<n&&o(e[a],e[a-1])<0;)a++;!function(u,l,f){for(f--;l<f;){var m=u[l];u[l++]=u[f],u[f--]=m}}(e,t,a)}else for(;a<n&&0<=o(e[a],e[a-1]);)a++;return a-t}function ss(e,t,n,o,a){for(o===t&&o++;o<n;o++){for(var u,l=e[o],f=t,m=o;f<m;)a(l,e[u=f+m>>>1])<0?m=u:f=1+u;var v=o-f;switch(v){case 3:e[f+3]=e[f+2];case 2:e[f+2]=e[f+1];case 1:e[f+1]=e[f];break;default:for(;0<v;)e[f+v]=e[f+v-1],v--}e[f]=l}}function us(e,t,n,o,a,u){var l=0,f=0,m=1;if(0<u(e,t[n+a])){for(f=o-a;m<f&&0<u(e,t[n+a+m]);)(m=1+((l=m)<<1))<=0&&(m=f);f<m&&(m=f),l+=a,m+=a}else{for(f=a+1;m<f&&u(e,t[n+a-m])<=0;)(m=1+((l=m)<<1))<=0&&(m=f);f<m&&(m=f);var v=l;l=a-m,m=a-v}for(l++;l<m;){var x=l+(m-l>>>1);0<u(e,t[n+x])?l=x+1:m=x}return m}function yo(e,t,n,o,a,u){var l=0,f=0,m=1;if(u(e,t[n+a])<0){for(f=a+1;m<f&&u(e,t[n+a-m])<0;)(m=1+((l=m)<<1))<=0&&(m=f);f<m&&(m=f);var v=l;l=a-m,m=a-v}else{for(f=o-a;m<f&&0<=u(e,t[n+a+m]);)(m=1+((l=m)<<1))<=0&&(m=f);f<m&&(m=f),l+=a,m+=a}for(l++;l<m;){var x=l+(m-l>>>1);u(e,t[n+x])<0?m=x:l=x+1}return m}function Hp(e,t){var n,o,a=7,u=0,l=[];function f(m){var v=n[m],x=o[m],C=n[m+1],k=o[m+1];o[m]=x+k,m===u-3&&(n[m+1]=n[m+2],o[m+1]=o[m+2]),u--;var M=yo(e[C],e,v,x,0,t);v+=M,0!=(x-=M)&&0!==(k=us(e[v+x-1],e,C,k,k-1,t))&&(x<=k?function(E,V,N,G){var te=0;for(te=0;te<V;te++)l[te]=e[E+te];var J=0,me=N,ge=E;if(e[ge++]=e[me++],0!=--G){if(1===V){for(te=0;te<G;te++)e[ge+te]=e[me+te];return e[ge+G]=l[J]}for(var pe,_e,Me,We=a;;){_e=pe=0,Me=!1;do{if(t(e[me],l[J])<0){if(e[ge++]=e[me++],_e++,(pe=0)==--G){Me=!0;break}}else if(e[ge++]=l[J++],pe++,_e=0,1==--V){Me=!0;break}}while((pe|_e)<We);if(Me)break;do{if(0!==(pe=yo(e[me],l,J,V,0,t))){for(te=0;te<pe;te++)e[ge+te]=l[J+te];if(ge+=pe,J+=pe,(V-=pe)<=1){Me=!0;break}}if(e[ge++]=e[me++],0==--G){Me=!0;break}if(0!==(_e=us(l[J],e,me,G,0,t))){for(te=0;te<_e;te++)e[ge+te]=e[me+te];if(ge+=_e,me+=_e,0==(G-=_e)){Me=!0;break}}if(e[ge++]=l[J++],1==--V){Me=!0;break}We--}while(7<=pe||7<=_e);if(Me)break;We<0&&(We=0),We+=2}if((a=We)<1&&(a=1),1===V){for(te=0;te<G;te++)e[ge+te]=e[me+te];e[ge+G]=l[J]}else{if(0===V)throw new Error;for(te=0;te<V;te++)e[ge+te]=l[J+te]}}else for(te=0;te<V;te++)e[ge+te]=l[J+te]}(v,x,C,k):function(E,V,N,G){var te=0;for(te=0;te<G;te++)l[te]=e[N+te];var J=E+V-1,me=G-1,ge=N+G-1,pe=0,_e=0;if(e[ge--]=e[J--],0!=--V){if(1===G){for(_e=1+(ge-=V),pe=1+(J-=V),te=V-1;0<=te;te--)e[_e+te]=e[pe+te];return e[ge]=l[me]}for(var Me=a;;){var We=0,Ke=0,et=!1;do{if(t(l[me],e[J])<0){if(e[ge--]=e[J--],We++,(Ke=0)==--V){et=!0;break}}else if(e[ge--]=l[me--],Ke++,We=0,1==--G){et=!0;break}}while((We|Ke)<Me);if(et)break;do{if(0!=(We=V-yo(l[me],e,E,V,V-1,t))){for(V-=We,_e=1+(ge-=We),pe=1+(J-=We),te=We-1;0<=te;te--)e[_e+te]=e[pe+te];if(0===V){et=!0;break}}if(e[ge--]=l[me--],1==--G){et=!0;break}if(0!=(Ke=G-us(e[J],l,0,G,G-1,t))){for(G-=Ke,_e=1+(ge-=Ke),pe=1+(me-=Ke),te=0;te<Ke;te++)e[_e+te]=l[pe+te];if(G<=1){et=!0;break}}if(e[ge--]=e[J--],0==--V){et=!0;break}Me--}while(7<=We||7<=Ke);if(et)break;Me<0&&(Me=0),Me+=2}if((a=Me)<1&&(a=1),1===G){for(_e=1+(ge-=V),pe=1+(J-=V),te=V-1;0<=te;te--)e[_e+te]=e[pe+te];e[ge]=l[me]}else{if(0===G)throw new Error;for(pe=ge-(G-1),te=0;te<G;te++)e[pe+te]=l[te]}}else for(pe=ge-(G-1),te=0;te<G;te++)e[pe+te]=l[te]}(v,x,C,k))}n=[],o=[],this.mergeRuns=function(){for(;1<u;){var m=u-2;if(1<=m&&o[m-1]<=o[m]+o[m+1]||2<=m&&o[m-2]<=o[m]+o[m-1])o[m-1]<o[m+1]&&m--;else if(o[m]>o[m+1])break;f(m)}},this.forceMergeRuns=function(){for(;1<u;){var m=u-2;0<m&&o[m-1]<o[m+1]&&m--,f(m)}},this.pushRun=function(m,v){n[u]=m,o[u]=v,u+=1}}function Bf(e,t,n,o){var a=(o=o||e.length)-(n=n||0);if(!(a<2)){var u=0;if(a<32)ss(e,n,o,n+(u=xu(e,n,o,t)),t);else{var l=new Hp(e,t),f=function(v){for(var x=0;32<=v;)x|=1&v,v>>=1;return v+x}(a);do{if((u=xu(e,n,o,t))<f){var m=a;f<m&&(m=f),ss(e,n,n+m,n+u,t),u=m}l.pushRun(n,u),l.mergeRuns(),a-=u,n+=u}while(0!==a);l.forceMergeRuns()}}}function Va(e,t){return e.zlevel===t.zlevel?e.z===t.z?e.z2-t.z2:e.z-t.z:e.zlevel-t.zlevel}function Kr(){this._roots=[],this._displayList=[],this._displayListLen=0}mr.prototype={constructor:mr,isGroup:!0,type:"group",silent:!1,children:function(){return this._children.slice()},childAt:function(e){return this._children[e]},childOfName:function(e){for(var t=this._children,n=0;n<t.length;n++)if(t[n].name===e)return t[n]},childCount:function(){return this._children.length},add:function(e){return e&&e!==this&&e.parent!==this&&(this._children.push(e),this._doAdd(e)),this},addBefore:function(e,t){if(e&&e!==this&&e.parent!==this&&t&&t.parent===this){var n=this._children,o=n.indexOf(t);0<=o&&(n.splice(o,0,e),this._doAdd(e))}return this},_doAdd:function(e){e.parent&&e.parent.remove(e);var t=(e.parent=this).__storage,n=this.__zr;t&&t!==e.__storage&&(t.addToStorage(e),e instanceof mr&&e.addChildrenToStorage(t)),n&&n.refresh()},remove:function(e){var t=this.__zr,n=this.__storage,o=this._children,a=$e(o,e);return a<0||(o.splice(a,1),e.parent=null,n&&(n.delFromStorage(e),e instanceof mr&&e.delChildrenFromStorage(n)),t&&t.refresh()),this},removeAll:function(){var e,t,n=this._children,o=this.__storage;for(t=0;t<n.length;t++)e=n[t],o&&(o.delFromStorage(e),e instanceof mr&&e.delChildrenFromStorage(o)),e.parent=null;return n.length=0,this},eachChild:function(e,t){for(var n=this._children,o=0;o<n.length;o++)e.call(t,n[o],o);return this},traverse:function(e,t){for(var n=0;n<this._children.length;n++){var o=this._children[n];e.call(t,o),"group"===o.type&&o.traverse(e,t)}return this},addChildrenToStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToStorage(n),n instanceof mr&&n.addChildrenToStorage(e)}},delChildrenFromStorage:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromStorage(n),n instanceof mr&&n.delChildrenFromStorage(e)}},dirty:function(){return this.__dirty=!0,this.__zr&&this.__zr.refresh(),this},getBoundingRect:function(e){for(var t=null,n=new ii(0,0,0,0),o=e||this._children,a=[],u=0;u<o.length;u++){var l=o[u];if(!l.ignore&&!l.invisible){var f=l.getBoundingRect(),m=l.getLocalTransform(a);m?(n.copy(f),n.applyTransform(m),(t=t||n.clone()).union(n)):(t=t||f.clone()).union(f)}}return t||n}},Ie(mr,bu),Kr.prototype={constructor:Kr,traverse:function(e,t){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(e,t)},getDisplayList:function(e,t){return t=t||!1,e&&this.updateDisplayList(t),this._displayList},updateDisplayList:function(e){this._displayListLen=0;for(var t=this._roots,n=this._displayList,o=0,a=t.length;o<a;o++)this._updateAndAddDisplayable(t[o],null,e);n.length=this._displayListLen,Ze.canvasSupported&&Bf(n,Va)},_updateAndAddDisplayable:function(e,t,n){if(!e.ignore||n){e.beforeUpdate(),e.__dirty&&e.update(),e.afterUpdate();var o=e.clipPath;if(o){t=t?t.slice():[];for(var a=o,u=e;a;)a.parent=u,a.updateTransform(),t.push(a),a=(u=a).clipPath}if(e.isGroup){for(var l=e._children,f=0;f<l.length;f++){var m=l[f];e.__dirty&&(m.__dirty=!0),this._updateAndAddDisplayable(m,t,n)}e.__dirty=!1}else e.__clipPaths=t,this._displayList[this._displayListLen++]=e}},addRoot:function(e){e.__storage!==this&&(e instanceof mr&&e.addChildrenToStorage(this),this.addToStorage(e),this._roots.push(e))},delRoot:function(e){if(null==e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof mr&&n.delChildrenFromStorage(this)}return this._roots=[],this._displayList=[],void(this._displayListLen=0)}if(e instanceof Array){t=0;for(var o=e.length;t<o;t++)this.delRoot(e[t])}else{var a=$e(this._roots,e);0<=a&&(this.delFromStorage(e),this._roots.splice(a,1),e instanceof mr&&e.delChildrenFromStorage(this))}},addToStorage:function(e){return e&&(e.__storage=this,e.dirty(!1)),this},delFromStorage:function(e){return e&&(e.__storage=null),this},dispose:function(){this._renderList=this._roots=null},displayableSortFunc:Va};var bg={shadowBlur:1,shadowOffsetX:1,shadowOffsetY:1,textShadowBlur:1,textShadowOffsetX:1,textShadowOffsetY:1,textBoxShadowBlur:1,textBoxShadowOffsetX:1,textBoxShadowOffsetY:1},br=function(e,t,n){return bg.hasOwnProperty(t)?n*e.dpr:n},Mh=[["shadowBlur",0],["shadowOffsetX",0],["shadowOffsetY",0],["shadowColor","#000"],["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]],Hi=function(e){this.extendFrom(e,!1)};function bo(e,t,n){var o=null==t.x?0:t.x,a=null==t.x2?1:t.x2,u=null==t.y?0:t.y,l=null==t.y2?0:t.y2;return t.global||(o=o*n.width+n.x,a=a*n.width+n.x,u=u*n.height+n.y,l=l*n.height+n.y),o=isNaN(o)?0:o,a=isNaN(a)?1:a,u=isNaN(u)?0:u,l=isNaN(l)?0:l,e.createLinearGradient(o,u,a,l)}function vc(e,t,n){var o=n.width,a=n.height,u=Math.min(o,a),l=null==t.x?.5:t.x,f=null==t.y?.5:t.y,m=null==t.r?.5:t.r;return t.global||(l=l*o+n.x,f=f*a+n.y,m*=u),e.createRadialGradient(l,f,0,l,f,m)}for(var uo=Hi.prototype={constructor:Hi,fill:"#000",stroke:null,opacity:1,fillOpacity:null,strokeOpacity:null,lineDash:null,lineDashOffset:0,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,lineWidth:1,strokeNoScale:!1,text:null,font:null,textFont:null,fontStyle:null,fontWeight:null,fontSize:null,fontFamily:null,textTag:null,textFill:"#000",textStroke:null,textWidth:null,textHeight:null,textStrokeWidth:0,textLineHeight:null,textPosition:"inside",textRect:null,textOffset:null,textAlign:null,textVerticalAlign:null,textDistance:5,textShadowColor:"transparent",textShadowBlur:0,textShadowOffsetX:0,textShadowOffsetY:0,textBoxShadowColor:"transparent",textBoxShadowBlur:0,textBoxShadowOffsetX:0,textBoxShadowOffsetY:0,transformText:!1,textRotation:0,textOrigin:null,textBackgroundColor:null,textBorderColor:null,textBorderWidth:0,textBorderRadius:0,textPadding:null,rich:null,truncate:null,blend:null,bind:function(e,t,n){var o=this,a=n&&n.style,u=!a||1!==e.__attrCachedBy;e.__attrCachedBy=1;for(var l=0;l<Mh.length;l++){var f=Mh[l],m=f[0];!u&&o[m]===a[m]||(e[m]=br(e,m,o[m]||f[1]))}!u&&o.fill===a.fill||(e.fillStyle=o.fill),!u&&o.stroke===a.stroke||(e.strokeStyle=o.stroke),!u&&o.opacity===a.opacity||(e.globalAlpha=null==o.opacity?1:o.opacity),!u&&o.blend===a.blend||(e.globalCompositeOperation=o.blend||"source-over"),this.hasStroke()&&(e.lineWidth=o.lineWidth/(this.strokeNoScale&&t&&t.getLineScale?t.getLineScale():1))},hasFill:function(){var e=this.fill;return null!=e&&"none"!==e},hasStroke:function(){var e=this.stroke;return null!=e&&"none"!==e&&0<this.lineWidth},extendFrom:function(e,t){if(e)for(var n in e)!e.hasOwnProperty(n)||!0!==t&&(!1===t?this.hasOwnProperty(n):null==e[n])||(this[n]=e[n])},set:function(e,t){"string"==typeof e?this[e]=t:this.extendFrom(e,!0)},clone:function(){var e=new this.constructor;return e.extendFrom(this,!0),e},getGradient:function(e,t,n){for(var o=("radial"===t.type?vc:bo)(e,t,n),a=t.colorStops,u=0;u<a.length;u++)o.addColorStop(a[u].offset,a[u].color);return o}},ls=0;ls<Mh.length;ls++){var yl=Mh[ls];yl[0]in uo||(uo[yl[0]]=yl[1])}function Lx(e,t){this.image=e,this.repeat=t,this.type="pattern"}function Ky(){return!1}function Qu(e,t,n){var o=nt(),a=t.getWidth(),u=t.getHeight(),l=o.style;return l&&(l.position="absolute",l.left=0,l.top=0,l.width=a+"px",l.height=u+"px",o.setAttribute("data-zr-dom-id",e)),o.width=a*n,o.height=u*n,o}function jl(e,t,n){var o;n=n||pc,"string"==typeof e?o=Qu(e,t,n):ln(e)&&(e=(o=e).id),this.id=e;var a=(this.dom=o).style;a&&(o.onselectstart=Ky,a["-webkit-user-select"]="none",a["user-select"]="none",a["-webkit-touch-callout"]="none",a["-webkit-tap-highlight-color"]="rgba(0,0,0,0)",a.padding=0,a.margin=0,a["border-width"]=0),this.domBack=null,this.ctxBack=null,this.painter=t,this.config=null,this.clearColor=0,this.motionBlur=!1,this.lastFrameAlpha=.7,this.dpr=n}Hi.getGradient=uo.getGradient,jl.prototype={constructor:jl,__dirty:!0,__used:!(Lx.prototype.getCanvasPattern=function(e){return e.createPattern(this.image,this.repeat||"repeat")}),__drawIndex:0,__startIndex:0,__endIndex:0,incremental:!1,getElementCount:function(){return this.__endIndex-this.__startIndex},initContext:function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},createBackBuffer:function(){var e=this.dpr;this.domBack=Qu("back-"+this.id,this.painter,e),this.ctxBack=this.domBack.getContext("2d"),1!==e&&this.ctxBack.scale(e,e)},resize:function(e,t){var n=this.dpr,o=this.dom,a=o.style,u=this.domBack;a&&(a.width=e+"px",a.height=t+"px"),o.width=e*n,o.height=t*n,u&&(u.width=e*n,u.height=t*n,1!==n&&this.ctxBack.scale(n,n))},clear:function(e,t){var n,o=this.dom,a=this.ctx,u=o.width,l=o.height,f=(t=t||this.clearColor,this.motionBlur&&!e),m=this.lastFrameAlpha,v=this.dpr;if(f&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(o,0,0,u/v,l/v)),a.clearRect(0,0,u,l),t&&"transparent"!==t&&(t.colorStops?(n=t.__canvasGradient||Hi.getGradient(a,t,{x:0,y:0,width:u,height:l}),t.__canvasGradient=n):t.image&&(n=Lx.prototype.getCanvasPattern.call(t,a)),a.save(),a.fillStyle=n||t,a.fillRect(0,0,u,l),a.restore()),f){var x=this.domBack;a.save(),a.globalAlpha=m,a.drawImage(x,0,0,u,l),a.restore()}}};var Wp="undefined"!=typeof window&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(e){setTimeout(e,16)},xg=new va(50);function hf(e){if("string"!=typeof e)return e;var t=xg.get(e);return t&&t.image}function Gp(e,t,n,o,a){if(e){if("string"!=typeof e)return e;if(t&&t.__zrImageSrc===e||!n)return t;var u=xg.get(e),l={hostEl:n,cb:o,cbPayload:a};return u?Zi(t=u.image)||u.pending.push(l):((t=new Image).onload=t.onerror=Bx,xg.put(e,t.__cachedImgObj={image:t,pending:[l]}),t.src=t.__zrImageSrc=e),t}return t}function Bx(){var e=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var t=0;t<e.pending.length;t++){var n=e.pending[t],o=n.cb;o&&o(this,n.cbPayload),n.hostEl.dirty()}e.pending.length=0}function Zi(e){return e&&e.width&&e.height}var el={},bs=0,g0=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g,bn="12px sans-serif",Bu={};function Cr(e,t){var n=e+":"+(t=t||bn);if(el[n])return el[n];for(var o,a,u=(e+"").split("\n"),l=0,f=0,m=u.length;f<m;f++)l=Math.max((o=u[f],a=t,Bu.measureText(o,a)).width,l);return 5e3<bs&&(bs=0,el={}),bs++,el[n]=l}function bl(e,t,n,o,a,u,l,f){return l?(C=o,te=(N=Up(e,{rich:l,truncate:f,font:t,textAlign:x=n,textPadding:a,textLineHeight:u})).outerHeight,new ii(xs(0,G=N.outerWidth,x),xl(0,te,C),G,te)):function(m,v,x,C,k,M,E){var V=Dh(m,v,k,M,E),N=Cr(m,v);k&&(N+=k[1]+k[3]);var G=V.outerHeight,me=new ii(xs(0,N,x),xl(0,G,C),N,G);return me.lineHeight=V.lineHeight,me}(e,t,n,o,a,u,f);var x,C,N,G,te}function xs(e,t,n){return"right"===n?e-=t:"center"===n&&(e-=t/2),e}function xl(e,t,n){return"middle"===n?e-=t/2:"bottom"===n&&(e-=t),e}function Jc(e,t,n){var a=t.textDistance,u=n.x,l=n.y;a=a||0;var f=n.height,m=n.width,v=f/2,x="left",C="top";switch(t.textPosition){case"left":u-=a,l+=v,x="right",C="middle";break;case"right":u+=a+m,l+=v,C="middle";break;case"top":u+=m/2,l-=a,x="center",C="bottom";break;case"bottom":u+=m/2,l+=f+a,x="center";break;case"inside":u+=m/2,l+=v,x="center",C="middle";break;case"insideLeft":u+=a,l+=v,C="middle";break;case"insideRight":u+=m-a,l+=v,x="right",C="middle";break;case"insideTop":u+=m/2,l+=a,x="center";break;case"insideBottom":u+=m/2,l+=f-a,x="center",C="bottom";break;case"insideTopLeft":u+=a,l+=a;break;case"insideTopRight":u+=m-a,l+=a,x="right";break;case"insideBottomLeft":u+=a,l+=f-a,C="bottom";break;case"insideBottomRight":u+=m-a,l+=f-a,x="right",C="bottom"}return(e=e||{}).x=u,e.y=l,e.textAlign=x,e.textVerticalAlign=C,e}function zu(e,t,n,o,a){if(!t)return"";var u=(e+"").split("\n");a=Xo(t,n,o,a);for(var l=0,f=u.length;l<f;l++)u[l]=Ff(u[l],a);return u.join("\n")}function Xo(e,t,n,o){(o=Ne({},o)).font=t,n=Or(n,"..."),o.maxIterations=Or(o.maxIterations,2);var a=o.minChar=Or(o.minChar,0);o.cnCharWidth=Cr("\u56fd",t);var u=o.ascCharWidth=Cr("a",t);o.placeholder=Or(o.placeholder,"");for(var l=e=Math.max(0,e-1),f=0;f<a&&u<=l;f++)l-=u;var m=Cr(n,t);return l<m&&(n="",m=0),l=e-m,o.ellipsis=n,o.ellipsisWidth=m,o.contentWidth=l,o.containerWidth=e,o}function Ff(e,t){var n=t.containerWidth,o=t.font,a=t.contentWidth;if(!n)return"";var u=Cr(e,o);if(u<=n)return e;for(var l=0;;l++){if(u<=a||l>=t.maxIterations){e+=t.ellipsis;break}var f=0===l?zx(e,a,t.ascCharWidth,t.cnCharWidth):0<u?Math.floor(e.length*a/u):0;u=Cr(e=e.substr(0,f),o)}return""===e&&(e=t.placeholder),e}function zx(e,t,n,o){for(var a=0,u=0,l=e.length;u<l&&a<t;u++){var f=e.charCodeAt(u);a+=0<=f&&f<=127?n:o}return u}function bi(e){return Cr("\u56fd",e)}function Dh(e,t,n,o,a){null!=e&&(e+="");var u=Or(o,bi(t)),l=e?e.split("\n"):[],f=l.length*u,m=f,v=!0;if(n&&(m+=n[0]+n[2]),e&&a){v=!1;var x=a.outerHeight,C=a.outerWidth;if(null!=x&&x<m)e="",l=[];else if(null!=C)for(var k=Xo(C-(n?n[1]+n[3]:0),t,a.ellipsis,{minChar:a.minChar,placeholder:a.placeholder}),M=0,E=l.length;M<E;M++)l[M]=Ff(l[M],k)}return{lines:l,height:f,outerHeight:m,lineHeight:u,canCacheByTextString:v}}function Up(e,t){var n={lines:[],width:0,height:0};if(null!=e&&(e+=""),!e)return n;for(var o,a=g0.lastIndex=0;null!=(o=g0.exec(e));){var u=o.index;a<u&&Ri(n,e.substring(a,u)),Ri(n,o[2],o[1]),a=g0.lastIndex}a<e.length&&Ri(n,e.substring(a,e.length));var l=n.lines,f=0,m=0,v=[],x=t.textPadding,C=t.truncate,k=C&&C.outerWidth,M=C&&C.outerHeight;x&&(null!=k&&(k-=x[1]+x[3]),null!=M&&(M-=x[0]+x[2]));for(var E=0;E<l.length;E++){for(var V=l[E],N=0,G=0,te=0;te<V.tokens.length;te++){var J=(lt=V.tokens[te]).styleName&&t.rich[lt.styleName]||{},me=lt.textPadding=J.textPadding,ge=lt.font=J.font||t.font,pe=lt.textHeight=Or(J.textHeight,bi(ge));if(me&&(pe+=me[0]+me[2]),lt.height=pe,lt.lineHeight=xt(J.textLineHeight,t.textLineHeight,pe),lt.textAlign=J&&J.textAlign||t.textAlign,lt.textVerticalAlign=J&&J.textVerticalAlign||"middle",null!=M&&f+lt.lineHeight>M)return{lines:[],width:0,height:0};lt.textWidth=Cr(lt.text,ge);var _e=J.textWidth,Me=null==_e||"auto"===_e;if("string"==typeof _e&&"%"===_e.charAt(_e.length-1))lt.percentWidth=_e,v.push(lt),_e=0;else{if(Me){_e=lt.textWidth;var We=J.textBackgroundColor,Ke=We&&We.image;Ke&&Zi(Ke=hf(Ke))&&(_e=Math.max(_e,Ke.width*pe/Ke.height))}var et=me?me[1]+me[3]:0;_e+=et;var ut=null!=k?k-G:null;null!=ut&&ut<_e&&(!Me||ut<et?(lt.text="",lt.textWidth=_e=0):(lt.text=zu(lt.text,ut-et,ge,C.ellipsis,{minChar:C.minChar}),lt.textWidth=Cr(lt.text,ge),_e=lt.textWidth+et))}G+=lt.width=_e,J&&(N=Math.max(N,lt.lineHeight))}V.width=G,f+=V.lineHeight=N,m=Math.max(m,G)}for(n.outerWidth=n.width=Or(t.textWidth,m),n.outerHeight=n.height=Or(t.textHeight,f),x&&(n.outerWidth+=x[1]+x[3],n.outerHeight+=x[0]+x[2]),E=0;E<v.length;E++){var lt,vt=(lt=v[E]).percentWidth;lt.width=parseInt(vt,10)/100*m}return n}function Ri(e,t,n){for(var o=""===t,a=t.split("\n"),u=e.lines,l=0;l<a.length;l++){var f=a[l],m={styleName:n,text:f,isLineHolder:!f&&!o};if(l)u.push({tokens:[m]});else{var v=(u[u.length-1]||(u[0]={tokens:[]})).tokens,x=v.length;1===x&&v[0].isLineHolder?v[0]=m:!f&&x&&!o||v.push(m)}}}function It(e){var t=(e.fontSize||e.fontFamily)&&[e.fontStyle,e.fontWeight,(e.fontSize||12)+"px",e.fontFamily||"sans-serif"].join(" ");return t&&Mr(t)||e.textFont||e.font}function yc(e,t){var n,o,a,u,l,f=t.x,m=t.y,v=t.width,x=t.height,C=t.r;v<0&&(f+=v,v=-v),x<0&&(m+=x,x=-x),"number"==typeof C?n=o=a=u=C:C instanceof Array?1===C.length?n=o=a=u=C[0]:2===C.length?(n=a=C[0],o=u=C[1]):3===C.length?(n=C[0],o=u=C[1],a=C[2]):(n=C[0],o=C[1],a=C[2],u=C[3]):n=o=a=u=0,v<n+o&&(n*=v/(l=n+o),o*=v/l),v<a+u&&(a*=v/(l=a+u),u*=v/l),x<o+a&&(o*=x/(l=o+a),a*=x/l),x<n+u&&(n*=x/(l=n+u),u*=x/l),e.moveTo(f+n,m),e.lineTo(f+v-o,m),0!==o&&e.arc(f+v-o,m+o,o,-Math.PI/2,0),e.lineTo(f+v,m+x-a),0!==a&&e.arc(f+v-a,m+x-a,a,0,Math.PI/2),e.lineTo(f+u,m+x),0!==u&&e.arc(f+u,m+x-u,u,Math.PI/2,Math.PI),e.lineTo(f,m+n),0!==n&&e.arc(f+n,m+n,n,Math.PI,1.5*Math.PI)}Bu.measureText=function(e,t){var n=qe();return n.font=t||bn,n.measureText(e)};var cs=bn,kd={left:1,right:1,center:1},ql={top:1,bottom:1,middle:1},Ha=[["textShadowBlur","shadowBlur",0],["textShadowOffsetX","shadowOffsetX",0],["textShadowOffsetY","shadowOffsetY",0],["textShadowColor","shadowColor","transparent"]],Di={},Ah={};function gf(e){return wr(e),le(e.rich,wr),e}function wr(e){if(e){e.font=It(e);var t=e.textAlign;"middle"===t&&(t="center"),e.textAlign=null==t||kd[t]?t:"left";var n=e.textVerticalAlign||e.textBaseline;"center"===n&&(n="middle"),e.textVerticalAlign=null==n||ql[n]?n:"top",e.textPadding&&(e.textPadding=ai(e.textPadding))}}function Ns(e,t,n,o,a,u){o.rich?function(l,f,m,v,x,C){9!==C&&(f.__attrCachedBy=0);var k=l.__textCotentBlock;k&&!l.__dirtyText||(k=l.__textCotentBlock=Up(m,v)),function(M,E,V,N,G){var te=V.width,J=V.outerWidth,me=V.outerHeight,ge=N.textPadding,pe=m0(Ah,M,N,G),_e=pe.baseX,Me=pe.baseY,We=pe.textAlign,Ke=pe.textVerticalAlign;jp(E,N,G,_e,Me);var et=xs(_e,J,We),ut=xl(Me,me,Ke),lt=et,vt=ut;ge&&(lt+=ge[3],vt+=ge[0]);var Mt=lt+te;mf(N)&&Fx(M,E,N,et,ut,J,me);for(var Pt=0;Pt<V.lines.length;Pt++){for(var Ct,Zt=V.lines[Pt],An=Zt.tokens,Rn=An.length,Cn=Zt.lineHeight,Jn=Zt.width,dr=0,$r=lt,zn=Mt,Ur=Rn-1;dr<Rn&&(!(Ct=An[dr]).textAlign||"left"===Ct.textAlign);)Td(M,E,Ct,N,Cn,vt,$r,"left"),Jn-=Ct.width,$r+=Ct.width,dr++;for(;0<=Ur&&"right"===(Ct=An[Ur]).textAlign;)Td(M,E,Ct,N,Cn,vt,zn,"right"),Jn-=Ct.width,zn-=Ct.width,Ur--;for($r+=(te-($r-lt)-(Mt-zn)-Jn)/2;dr<=Ur;)Td(M,E,Ct=An[dr],N,Cn,vt,$r+Ct.width/2,"center"),$r+=Ct.width,dr++;vt+=Cn}}(l,f,k,v,x)}(e,t,n,o,a,u):function(l,f,m,v,x,C){var k,M=mf(v),E=!1,V=2===f.__attrCachedBy;9!==C?(C&&(k=C.style,E=!M&&V&&k),f.__attrCachedBy=M?0:2):V&&(f.__attrCachedBy=0);var N=v.font||cs;E&&N===(k.font||cs)||(f.font=N);var G=l.__computedFont;l.__styleFont!==N&&(l.__styleFont=N,G=l.__computedFont=f.font);var te=v.textPadding,me=l.__textCotentBlock;me&&!l.__dirtyText||(me=l.__textCotentBlock=Dh(m,G,te,v.textLineHeight,v.truncate));var ge=me.outerHeight,pe=me.lines,_e=me.lineHeight,Me=m0(Ah,l,v,x),We=Me.baseX,Ke=Me.baseY,et=Me.textAlign||"left",ut=Me.textVerticalAlign;jp(f,v,x,We,Ke);var lt=xl(Ke,ge,ut),vt=We,Mt=lt;if(M||te){var Pt=Cr(m,G);te&&(Pt+=te[1]+te[3]);var Ct=xs(We,Pt,et);M&&Fx(l,f,v,Ct,lt,Pt,ge),te&&(vt=Hx(We,et,te),Mt+=te[0])}f.textAlign=et,f.textBaseline="middle",f.globalAlpha=v.opacity||1;for(var Zt=0;Zt<Ha.length;Zt++){var An=Ha[Zt],Rn=An[0],Cn=An[1],Jn=v[Rn];E&&Jn===k[Rn]||(f[Cn]=br(f,Cn,Jn||An[2]))}Mt+=_e/2;var dr=v.textStrokeWidth,zn=!E||dr!==(E?k.textStrokeWidth:null),Ur=!E||zn||v.textStroke!==k.textStroke,Jr=qp(v.textStroke,dr),_o=xo(v.textFill);if(Jr&&(zn&&(f.lineWidth=dr),Ur&&(f.strokeStyle=Jr)),_o&&(E&&v.textFill===k.textFill||(f.fillStyle=_o)),1===pe.length)Jr&&f.strokeText(pe[0],vt,Mt),_o&&f.fillText(pe[0],vt,Mt);else for(Zt=0;Zt<pe.length;Zt++)Jr&&f.strokeText(pe[Zt],vt,Mt),_o&&f.fillText(pe[Zt],vt,Mt),Mt+=_e}(e,t,n,o,a,u)}function jp(e,t,n,o,a){if(n&&t.textRotation){var u=t.textOrigin;"center"===u?(o=n.width/2+n.x,a=n.height/2+n.y):u&&(o=u[0]+n.x,a=u[1]+n.y),e.translate(o,a),e.rotate(-t.textRotation),e.translate(-o,-a)}}function Td(e,t,n,o,a,u,l,f){var m=o.rich[n.styleName]||{};m.text=n.text;var v=n.textVerticalAlign,x=u+a/2;"top"===v?x=u+n.height/2:"bottom"===v&&(x=u+a-n.height/2),!n.isLineHolder&&mf(m)&&Fx(e,t,m,"right"===f?l-n.width:"center"===f?l-n.width/2:l,x-n.height/2,n.width,n.height);var C=n.textPadding;C&&(l=Hx(l,f,C),x-=n.height/2-C[2]-n.textHeight/2),_s(t,"shadowBlur",xt(m.textShadowBlur,o.textShadowBlur,0)),_s(t,"shadowColor",m.textShadowColor||o.textShadowColor||"transparent"),_s(t,"shadowOffsetX",xt(m.textShadowOffsetX,o.textShadowOffsetX,0)),_s(t,"shadowOffsetY",xt(m.textShadowOffsetY,o.textShadowOffsetY,0)),_s(t,"textAlign",f),_s(t,"textBaseline","middle"),_s(t,"font",n.font||cs);var k=qp(m.textStroke||o.textStroke,E),M=xo(m.textFill||o.textFill),E=Or(m.textStrokeWidth,o.textStrokeWidth);k&&(_s(t,"lineWidth",E),_s(t,"strokeStyle",k),t.strokeText(n.text,l,x)),M&&(_s(t,"fillStyle",M),t.fillText(n.text,l,x))}function mf(e){return!!(e.textBackgroundColor||e.textBorderWidth&&e.textBorderColor)}function Fx(e,t,n,o,a,u,l){var f=n.textBackgroundColor,m=n.textBorderWidth,v=n.textBorderColor,x=Gn(f);if(_s(t,"shadowBlur",n.textBoxShadowBlur||0),_s(t,"shadowColor",n.textBoxShadowColor||"transparent"),_s(t,"shadowOffsetX",n.textBoxShadowOffsetX||0),_s(t,"shadowOffsetY",n.textBoxShadowOffsetY||0),x||m&&v){t.beginPath();var C=n.textBorderRadius;C?yc(t,{x:o,y:a,width:u,height:l,r:C}):t.rect(o,a,u,l),t.closePath()}if(x)if(_s(t,"fillStyle",f),null!=n.fillOpacity){var k=t.globalAlpha;t.globalAlpha=n.fillOpacity*n.opacity,t.fill(),t.globalAlpha=k}else t.fill();else if(ln(f)){var M=f.image;(M=Gp(M,null,e,Ih,f))&&Zi(M)&&t.drawImage(M,o,a,u,l)}m&&v&&(_s(t,"lineWidth",m),_s(t,"strokeStyle",v),null!=n.strokeOpacity?(k=t.globalAlpha,t.globalAlpha=n.strokeOpacity*n.opacity,t.stroke(),t.globalAlpha=k):t.stroke())}function Ih(e,t){t.image=e}function m0(e,t,n,o){var a=n.x||0,u=n.y||0,l=n.textAlign,f=n.textVerticalAlign;if(o){var m=n.textPosition;if(m instanceof Array)a=o.x+Vx(m[0],o.width),u=o.y+Vx(m[1],o.height);else{var v=t&&t.calculateTextPosition?t.calculateTextPosition(Di,n,o):Jc(Di,n,o);a=v.x,u=v.y,l=l||v.textAlign,f=f||v.textVerticalAlign}var x=n.textOffset;x&&(a+=x[0],u+=x[1])}return(e=e||{}).baseX=a,e.baseY=u,e.textAlign=l,e.textVerticalAlign=f,e}function _s(e,t,n){return e[t]=br(e,t,n),e[t]}function qp(e,t){return null==e||t<=0||"transparent"===e||"none"===e?null:e.image||e.colorStops?"#000":e}function xo(e){return null==e||"none"===e?null:e.image||e.colorStops?"#000":e}function Vx(e,t){return"string"==typeof e?0<=e.lastIndexOf("%")?parseFloat(e)/100*t:parseFloat(e):e}function Hx(e,t,n){return"right"===t?e-n[1]:"center"===t?e+n[3]/2-n[1]/2:e+n[3]}function $y(e,t){return null!=e&&(e||t.textBackgroundColor||t.textBorderWidth&&t.textBorderColor||t.textPadding)}function Pr(){}var Xp=new ii;function Oa(e){for(var t in bu.call(this,e=e||{}),e)e.hasOwnProperty(t)&&"style"!==t&&(this[t]=e[t]);this.style=new Hi(e.style,this),this._rect=null,this.__clipPaths=null}function xi(e){Oa.call(this,e)}Oa.prototype={constructor:Oa,type:"displayable",__dirty:!0,invisible:!(Pr.prototype={constructor:Pr,drawRectText:function(e,t){var n=this.style;t=n.textRect||t,this.__dirty&&gf(n);var o=n.text;if(null!=o&&(o+=""),$y(o,n)){e.save();var a=this.transform;n.transformText?this.setTransform(e):a&&(Xp.copy(t),Xp.applyTransform(a),t=Xp),Ns(this,e,o,n,t,9),e.restore()}}}),z:0,z2:0,zlevel:0,draggable:!1,dragging:!1,silent:!1,culling:!1,cursor:"pointer",rectHover:!1,progressive:!1,incremental:!1,globalScaleRatio:1,beforeBrush:function(e){},afterBrush:function(e){},brush:function(e,t){},getBoundingRect:function(){},contain:function(e,t){return this.rectContain(e,t)},traverse:function(e,t){e.call(t,this)},rectContain:function(e,t){var n=this.transformCoordToLocal(e,t);return this.getBoundingRect().contain(n[0],n[1])},dirty:function(){this.__dirty=this.__dirtyText=!0,this._rect=null,this.__zr&&this.__zr.refresh()},animateStyle:function(e){return this.animate("style",e)},attrKV:function(e,t){"style"!==e?bu.prototype.attrKV.call(this,e,t):this.style.set(t)},setStyle:function(e,t){return this.style.set(e,t),this.dirty(!1),this},useStyle:function(e){return this.style=new Hi(e,this),this.dirty(!1),this},calculateTextPosition:null},Ie(Oa,bu),de(Oa,Pr),xi.prototype={constructor:xi,type:"image",brush:function(e,t){var n=this.style,o=n.image;n.bind(e,this,t);var a=this._image=Gp(o,this._image,this,this.onload);if(a&&Zi(a)){var u=n.x||0,l=n.y||0,f=n.width,m=n.height,v=a.width/a.height;if(null==f&&null!=m?f=m*v:null==m&&null!=f?m=f/v:null==f&&null==m&&(f=a.width,m=a.height),this.setTransform(e),n.sWidth&&n.sHeight){var x=n.sx||0,C=n.sy||0;e.drawImage(a,x,C,n.sWidth,n.sHeight,u,l,f,m)}else if(n.sx&&n.sy){var k=f-(x=n.sx),M=m-(C=n.sy);e.drawImage(a,x,C,k,M,u,l,f,m)}else e.drawImage(a,u,l,f,m);null!=n.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))}},getBoundingRect:function(){var e=this.style;return this._rect||(this._rect=new ii(e.x||0,e.y||0,e.width||0,e.height||0)),this._rect}},Ie(xi,Oa);var ua=314159;function Om(e){return parseInt(e,10)}var Em=new ii(0,0,0,0),Vf=new ii(0,0,0,0);function Jy(e,t,n){this.type="canvas";var o=!e.nodeName||"CANVAS"===e.nodeName.toUpperCase();this._opts=n=Ne({},n||{}),this.dpr=n.devicePixelRatio||pc,this._singleCanvas=o;var a=(this.root=e).style;a&&(a["-webkit-tap-highlight-color"]="transparent",a["-webkit-user-select"]=a["user-select"]=a["-webkit-touch-callout"]="none",e.innerHTML=""),this.storage=t;var C,k,M,u=this._zlevelList=[],l=this._layers={};if(this._layerConfig={},this._needsManuallyCompositing=!1,o){var f=e.width,m=e.height;null!=n.width&&(f=n.width),null!=n.height&&(m=n.height),this.dpr=n.devicePixelRatio||1,e.width=f*this.dpr,e.height=m*this.dpr,this._width=f,this._height=m;var v=new jl(e,this,this.dpr);v.__builtin__=!0,v.initContext(),(l[ua]=v).zlevel=ua,u.push(ua),this._domRoot=e}else{this._width=this._getSize(0),this._height=this._getSize(1);var x=this._domRoot=(C=this._width,k=this._height,(M=document.createElement("div")).style.cssText=["position:relative","width:"+C+"px","height:"+k+"px","padding:0","margin:0","border-width:0"].join(";")+";",M);e.appendChild(x)}this._hoverlayer=null,this._hoverElements=[]}function wu(e){this.stage=(e=e||{}).stage||{},this.onframe=e.onframe||function(){},this._clips=[],this._running=!1,this._paused=!1,wn.call(this)}Jy.prototype={constructor:Jy,getType:function(){return"canvas"},isSingleCanvas:function(){return this._singleCanvas},getViewportRoot:function(){return this._domRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(e){var t=this.storage.getDisplayList(!0),n=this._zlevelList;this._redrawId=Math.random(),this._paintList(t,e,this._redrawId);for(var o=0;o<n.length;o++){var u=this._layers[n[o]];!u.__builtin__&&u.refresh&&u.refresh(0===o?this._backgroundColor:null)}return this.refreshHover(),this},addHover:function(e,t){if(!e.__hoverMir){var n=new e.constructor({style:e.style,shape:e.shape,z:e.z,z2:e.z2,silent:e.silent});return(n.__from=e).__hoverMir=n,t&&n.setStyle(t),this._hoverElements.push(n),n}},removeHover:function(e){var n=this._hoverElements,o=$e(n,e.__hoverMir);0<=o&&n.splice(o,1),e.__hoverMir=null},clearHover:function(e){for(var t=this._hoverElements,n=0;n<t.length;n++){var o=t[n].__from;o&&(o.__hoverMir=null)}t.length=0},refreshHover:function(){var e=this._hoverElements,t=e.length,n=this._hoverlayer;if(n&&n.clear(),t){Bf(e,this.storage.displayableSortFunc);var o={};(n=n||(this._hoverlayer=this.getLayer(1e5))).ctx.save();for(var a=0;a<t;){var u=e[a],l=u.__from;l&&l.__zr?(a++,l.invisible||(u.transform=l.transform,u.invTransform=l.invTransform,u.__clipPaths=l.__clipPaths,this._doPaintEl(u,n,!0,o))):(e.splice(a,1),l.__hoverMir=null,t--)}n.ctx.restore()}},getHoverLayer:function(){return this.getLayer(1e5)},_paintList:function(e,t,n){if(this._redrawId===n){t=t||!1,this._updateLayerStatus(e);var o=this._doPaintList(e,t);if(this._needsManuallyCompositing&&this._compositeManually(),!o){var a=this;Wp(function(){a._paintList(e,t,n)})}}},_compositeManually:function(){var e=this.getLayer(ua).ctx,t=this._domRoot.width,n=this._domRoot.height;e.clearRect(0,0,t,n),this.eachBuiltinLayer(function(o){o.virtual&&e.drawImage(o.dom,0,0,t,n)})},_doPaintList:function(e,t){for(var n=[],o=0;o<this._zlevelList.length;o++)(f=this._layers[this._zlevelList[o]]).__builtin__&&f!==this._hoverlayer&&(f.__dirty||t)&&n.push(f);for(var u=!0,l=0;l<n.length;l++){var f,m=(f=n[l]).ctx,v={};m.save();var x=t?f.__startIndex:f.__drawIndex,C=!t&&f.incremental&&Date.now,k=C&&Date.now(),M=f.zlevel===this._zlevelList[0]?this._backgroundColor:null;if(f.__startIndex===f.__endIndex)f.clear(!1,M);else if(x===f.__startIndex){var E=e[x];E.incremental&&E.notClear&&!t||f.clear(!1,M)}-1===x&&(console.error("For some unknown reason. drawIndex is -1"),x=f.__startIndex);for(var V=x;V<f.__endIndex;V++){var N=e[V];if(this._doPaintEl(N,f,t,v),N.__dirty=N.__dirtyText=!1,C&&15<Date.now()-k)break}f.__drawIndex=V,f.__drawIndex<f.__endIndex&&(u=!1),v.prevElClipPaths&&m.restore(),m.restore()}return Ze.wxa&&le(this._layers,function(G){G&&G.ctx&&G.ctx.draw&&G.ctx.draw()}),u},_doPaintEl:function(e,t,n,o){var m,v,x,a=t.ctx,u=e.transform;if((t.__dirty||n)&&!e.invisible&&0!==e.style.opacity&&(!u||u[0]||u[3])&&(!e.culling||(v=this._width,x=this._height,Em.copy((m=e).getBoundingRect()),m.transform&&Em.applyTransform(m.transform),Vf.width=v,Vf.height=x,Em.intersect(Vf)))){var l=e.__clipPaths,f=o.prevElClipPaths;f&&!function(m,v){if(m===v)return!1;if(!m||!v||m.length!==v.length)return!0;for(var x=0;x<m.length;x++)if(m[x]!==v[x])return!0;return!1}(l,f)||(f&&(a.restore(),o.prevElClipPaths=null,o.prevEl=null),l&&(a.save(),function(m,v){for(var x=0;x<m.length;x++){var C=m[x];C.setTransform(v),v.beginPath(),C.buildPath(v,C.shape),v.clip(),C.restoreTransform(v)}}(l,a),o.prevElClipPaths=l)),e.beforeBrush&&e.beforeBrush(a),e.brush(a,o.prevEl||null),(o.prevEl=e).afterBrush&&e.afterBrush(a)}},getLayer:function(e,t){this._singleCanvas&&!this._needsManuallyCompositing&&(e=ua);var n=this._layers[e];return n||((n=new jl("zr_"+e,this,this.dpr)).zlevel=e,n.__builtin__=!0,this._layerConfig[e]?xe(n,this._layerConfig[e],!0):this._layerConfig[e-.01]&&xe(n,this._layerConfig[e-.01],!0),t&&(n.virtual=t),this.insertLayer(e,n),n.initContext()),n},insertLayer:function(e,t){var v,n=this._layers,o=this._zlevelList,a=o.length,u=null,l=-1,f=this._domRoot;if(n[e]);else if((v=t)&&(v.__builtin__||"function"==typeof v.resize&&"function"==typeof v.refresh)){if(0<a&&e>o[0]){for(l=0;l<a-1&&!(o[l]<e&&o[l+1]>e);l++);u=n[o[l]]}if(o.splice(l+1,0,e),!(n[e]=t).virtual)if(u){var m=u.dom;m.nextSibling?f.insertBefore(t.dom,m.nextSibling):f.appendChild(t.dom)}else f.firstChild?f.insertBefore(t.dom,f.firstChild):f.appendChild(t.dom)}},eachLayer:function(e,t){var n,o,a=this._zlevelList;for(o=0;o<a.length;o++)e.call(t,this._layers[n=a[o]],n)},eachBuiltinLayer:function(e,t){var n,o,a,u=this._zlevelList;for(a=0;a<u.length;a++)(n=this._layers[o=u[a]]).__builtin__&&e.call(t,n,o)},eachOtherLayer:function(e,t){var n,o,a,u=this._zlevelList;for(a=0;a<u.length;a++)(n=this._layers[o=u[a]]).__builtin__||e.call(t,n,o)},getLayers:function(){return this._layers},_updateLayerStatus:function(e){function t(v){a&&(a.__endIndex!==v&&(a.__dirty=!0),a.__endIndex=v)}if(this.eachBuiltinLayer(function(v,x){v.__dirty=v.__used=!1}),this._singleCanvas)for(var n=1;n<e.length;n++)if((l=e[n]).zlevel!==e[n-1].zlevel||l.incremental){this._needsManuallyCompositing=!0;break}var o,a=null,u=0;for(n=0;n<e.length;n++){var l,f,m=(l=e[n]).zlevel;o!==m&&(o=m,u=0),l.incremental?((f=this.getLayer(m+.001,this._needsManuallyCompositing)).incremental=!0,u=1):f=this.getLayer(m+(0<u?.01:0),this._needsManuallyCompositing),f!==a&&(f.__used=!0,f.__startIndex!==n&&(f.__dirty=!0),f.__startIndex=n,f.__drawIndex=f.incremental?-1:n,t(n),a=f),l.__dirty&&(f.__dirty=!0,f.incremental&&f.__drawIndex<0&&(f.__drawIndex=n))}t(n),this.eachBuiltinLayer(function(v,x){!v.__used&&0<v.getElementCount()&&(v.__dirty=!0,v.__startIndex=v.__endIndex=v.__drawIndex=0),v.__dirty&&v.__drawIndex<0&&(v.__drawIndex=v.__startIndex)})},clear:function(){return this.eachBuiltinLayer(this._clearLayer),this},_clearLayer:function(e){e.clear()},setBackgroundColor:function(e){this._backgroundColor=e},configLayer:function(e,t){if(t){var n=this._layerConfig;n[e]?xe(n[e],t,!0):n[e]=t;for(var o=0;o<this._zlevelList.length;o++){var a=this._zlevelList[o];(a===e||a===e+.01)&&xe(this._layers[a],n[e],!0)}}},delLayer:function(e){var t=this._layers,n=this._zlevelList,o=t[e];o&&(o.dom.parentNode.removeChild(o.dom),delete t[e],n.splice($e(n,e),1))},resize:function(e,t){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var o=this._opts;if(null!=e&&(o.width=e),null!=t&&(o.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||t!==this._height){for(var a in n.style.width=e+"px",n.style.height=t+"px",this._layers)this._layers.hasOwnProperty(a)&&this._layers[a].resize(e,t);le(this._progressiveLayers,function(u){u.resize(e,t)}),this.refresh(!0)}this._width=e,this._height=t}else{if(null==e||null==t)return;this._width=e,this._height=t,this.getLayer(ua).resize(e,t)}return this},clearLayer:function(e){var t=this._layers[e];t&&t.clear()},dispose:function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},getRenderedCanvas:function(e){if(this._singleCanvas&&!this._compositeManually)return this._layers[ua].dom;var t=new jl("image",this,(e=e||{}).pixelRatio||this.dpr);if(t.initContext(),t.clear(!1,e.backgroundColor||this._backgroundColor),e.pixelRatio<=this.dpr){this.refresh();var n=t.dom.width,o=t.dom.height,a=t.ctx;this.eachLayer(function(v){v.__builtin__?a.drawImage(v.dom,0,0,n,o):v.renderToCanvas&&(t.ctx.save(),v.renderToCanvas(t.ctx),t.ctx.restore())})}else for(var u={},l=this.storage.getDisplayList(!0),f=0;f<l.length;f++)this._doPaintEl(l[f],t,!0,u);return t.dom},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],o=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],u=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var l=this.root,f=document.defaultView.getComputedStyle(l);return(l[o]||Om(f[n])||Om(l.style[n]))-(Om(f[a])||0)-(Om(f[u])||0)|0},pathToImage:function(e,t){t=t||this.dpr;var n=document.createElement("canvas"),o=n.getContext("2d"),a=e.getBoundingRect(),u=e.style,l=u.shadowBlur*t,f=u.shadowOffsetX*t,m=u.shadowOffsetY*t,v=u.hasStroke()?u.lineWidth:0,x=Math.max(v/2,l-f),C=Math.max(v/2,f+l),k=Math.max(v/2,l-m),M=Math.max(v/2,m+l),E=a.width+x+C,V=a.height+k+M;n.width=E*t,n.height=V*t,o.scale(t,t),o.clearRect(0,0,E,V),o.dpr=t;var N={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[x-a.x,k-a.y],e.rotation=0,e.scale=[1,1],e.updateTransform(),e&&e.brush(o);var G=new xi({style:{x:0,y:0,image:n}});return null!=N.position&&(G.position=e.position=N.position),null!=N.rotation&&(G.rotation=e.rotation=N.rotation),null!=N.scale&&(G.scale=e.scale=N.scale),G}},wu.prototype={constructor:wu,addClip:function(e){this._clips.push(e)},addAnimator:function(e){e.animation=this;for(var t=e.getClips(),n=0;n<t.length;n++)this.addClip(t[n])},removeClip:function(e){var t=$e(this._clips,e);0<=t&&this._clips.splice(t,1)},removeAnimator:function(e){for(var t=e.getClips(),n=0;n<t.length;n++)this.removeClip(t[n]);e.animation=null},_update:function(){for(var e=(new Date).getTime()-this._pausedTime,t=e-this._time,n=this._clips,o=n.length,a=[],u=[],l=0;l<o;l++){var f=n[l],m=f.step(e,t);m&&(a.push(m),u.push(f))}for(l=0;l<o;)n[l]._needsRemove?(n[l]=n[o-1],n.pop(),o--):l++;for(o=a.length,l=0;l<o;l++)u[l].fire(a[l]);this._time=e,this.onframe(t),this.trigger("frame",t),this.stage.update&&this.stage.update()},_startLoop:function(){var e=this;this._running=!0,Wp(function t(){e._running&&(Wp(t),e._paused||e._update())})},start:function(){this._time=(new Date).getTime(),this._pausedTime=0,this._startLoop()},stop:function(){this._running=!1},pause:function(){this._paused||(this._pauseStart=(new Date).getTime(),this._paused=!0)},resume:function(){this._paused&&(this._pausedTime+=(new Date).getTime()-this._pauseStart,this._paused=!1)},clear:function(){this._clips=[]},isFinished:function(){return!this._clips.length},animate:function(e,t){var n=new pl(e,(t=t||{}).loop,t.getter,t.setter);return this.addAnimator(n),n}},de(wu,wn);var ds,Su,bc=Ze.domSupported,Qc=(Su={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:ds=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:Ge(ds,function(e){var t=e.replace("mouse","pointer");return Su.hasOwnProperty(t)?t:e})}),Pm_mouse=["mousemove","mouseup"],Pm_pointer=["pointermove","pointerup"];function N_(e){return"mousewheel"===e&&Ze.browser.firefox?"DOMMouseScroll":e}function _l(e){var t=e.pointerType;return"pen"===t||"touch"===t}function p0(e){e&&(e.zrByTouch=!0)}function Oh(e,t){for(var n=t,o=!1;n&&9!==n.nodeType&&!(o=n.domBelongToZr||n!==t&&n===e.painterRoot);)n=n.parentNode;return o}function la(e,t){this.type=t.type,this.target=this.currentTarget=e.dom,this.pointerType=t.pointerType,this.clientX=t.clientX,this.clientY=t.clientY}var Lo=la.prototype;Lo.stopPropagation=Lo.stopImmediatePropagation=Lo.preventDefault=yn;var kr={mousedown:function(e){e=Hr(this.dom,e),this._mayPointerCapture=[e.zrX,e.zrY],this.trigger("mousedown",e)},mousemove:function(e){e=Hr(this.dom,e);var t=this._mayPointerCapture;!t||e.zrX===t[0]&&e.zrY===t[1]||mn(this,!0),this.trigger("mousemove",e)},mouseup:function(e){e=Hr(this.dom,e),mn(this,!1),this.trigger("mouseup",e)},mouseout:function(e){e=Hr(this.dom,e),this._pointerCapturing&&(e.zrEventControl="no_globalout"),e.zrIsToLocalDOM=Oh(this,e.toElement||e.relatedTarget),this.trigger("mouseout",e)},touchstart:function(e){p0(e=Hr(this.dom,e)),this._lastTouchMoment=new Date,this.handler.processGesture(e,"start"),kr.mousemove.call(this,e),kr.mousedown.call(this,e)},touchmove:function(e){p0(e=Hr(this.dom,e)),this.handler.processGesture(e,"change"),kr.mousemove.call(this,e)},touchend:function(e){p0(e=Hr(this.dom,e)),this.handler.processGesture(e,"end"),kr.mouseup.call(this,e),+new Date-this._lastTouchMoment<300&&kr.click.call(this,e)},pointerdown:function(e){kr.mousedown.call(this,e)},pointermove:function(e){_l(e)||kr.mousemove.call(this,e)},pointerup:function(e){kr.mouseup.call(this,e)},pointerout:function(e){_l(e)||kr.mouseout.call(this,e)}};le(["click","mousewheel","dblclick","contextmenu"],function(e){kr[e]=function(t){t=Hr(this.dom,t),this.trigger(e,t)}});var Md={pointermove:function(e){_l(e)||Md.mousemove.call(this,e)},pointerup:function(e){Md.mouseup.call(this,e)},mousemove:function(e){this.trigger("mousemove",e)},mouseup:function(e){var t=this._pointerCapturing;mn(this,!1),this.trigger("mouseup",e),t&&(e.zrEventControl="only_globalout",this.trigger("mouseout",e))}};function Rs(e,t,n,o){e.mounted[t]=n,e.listenerOpts[t]=o,Wr(e.domTarget,N_(t),n,o)}function Nm(e){var t,n,o,u=e.mounted;for(var l in u)u.hasOwnProperty(l)&&(t=e.domTarget,n=N_(l),o=u[l],Yn?t.removeEventListener(n,o,e.listenerOpts[l]):t.detachEvent("on"+n,o));e.mounted={}}function mn(e,t){if(e._mayPointerCapture=null,bc&&e._pointerCapturing^t){e._pointerCapturing=t;var n=e._globalHandlerScope;t?function xc(e,t){function n(o){Rs(t,o,function(a){a=Bt(a),Oh(e,a.target)||(a=function(u,l){return Hr(u.dom,new la(u,l),!0)}(e,a),t.domHandlers[o].call(e,a))},{capture:!0})}Ze.pointerEventsSupported?le(Pm_pointer,n):Ze.touchEventsSupported||le(Pm_mouse,n)}(e,n):Nm(n)}}function Qy(e,t){this.domTarget=e,this.domHandlers=t,this.mounted={},this.listenerOpts={},this.touchTimer=null,this.touching=!1}function Hf(e,t){wn.call(this),this.dom=e,this.painterRoot=t,this._localHandlerScope=new Qy(e,kr),bc&&(this._globalHandlerScope=new Qy(document,Md)),this._pointerCapturing=!1,this._mayPointerCapture=null,function Eh(e,t){var n=t.domHandlers;Ze.pointerEventsSupported?le(Qc.pointer,function(o){Rs(t,o,function(a){n[o].call(e,a)})}):(Ze.touchEventsSupported&&le(Qc.touch,function(o){Rs(t,o,function(a){n[o].call(e,a),function(u){u.touching=!0,null!=u.touchTimer&&(clearTimeout(u.touchTimer),u.touchTimer=null),u.touchTimer=setTimeout(function(){u.touching=!1,u.touchTimer=null},700)}(t)})}),le(Qc.mouse,function(o){Rs(t,o,function(a){a=Bt(a),t.touching||n[o].call(e,a)})}))}(this,this._localHandlerScope)}var Ph=Hf.prototype;Ph.dispose=function(){Nm(this._localHandlerScope),bc&&Nm(this._globalHandlerScope)},Ph.setCursor=function(e){this.dom.style&&(this.dom.style.cursor=e||"default")},de(Hf,wn);var Rm=!Ze.canvasSupported,Dd={canvas:Jy},Ad={};function Yp(e,t){var n=new Id(gr(),e,t);return Ad[n.id]=n}function Lm(e,t){Dd[e]=t}var Id=function(e,t,n){n=n||{},this.dom=t,this.id=e;var o=this,a=new Kr,u=n.renderer;if(Rm){if(!Dd.vml)throw new Error("You need to require 'zrender/vml/vml' to support IE8");u="vml"}else u&&Dd[u]||(u="canvas");var l=new Dd[u](t,a,n,e);this.storage=a,this.painter=l;var f=Ze.node||Ze.worker?null:new Hf(l.getViewportRoot(),l.root);this.handler=new Ti(a,l,f,l.root),this.animation=new wu({stage:{update:Rt(this.flush,this)}}),this.animation.start();var m=a.delFromStorage,v=a.addToStorage;a.delFromStorage=function(x){m.call(a,x),x&&x.removeSelfFromZr(o)},a.addToStorage=function(x){v.call(a,x),x.addSelfToZr(o)}};Id.prototype={constructor:Id,getId:function(){return this.id},add:function(e){this.storage.addRoot(e),this._needsRefresh=!0},remove:function(e){this.storage.delRoot(e),this._needsRefresh=!0},configLayer:function(e,t){this.painter.configLayer&&this.painter.configLayer(e,t),this._needsRefresh=!0},setBackgroundColor:function(e){this.painter.setBackgroundColor&&this.painter.setBackgroundColor(e),this._needsRefresh=!0},refreshImmediately:function(){this._needsRefresh=this._needsRefreshHover=!1,this.painter.refresh(),this._needsRefresh=this._needsRefreshHover=!1},refresh:function(){this._needsRefresh=!0},flush:function(){var e;this._needsRefresh&&(e=!0,this.refreshImmediately()),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately()),e&&this.trigger("rendered")},addHover:function(e,t){if(this.painter.addHover){var n=this.painter.addHover(e,t);return this.refreshHover(),n}},removeHover:function(e){this.painter.removeHover&&(this.painter.removeHover(e),this.refreshHover())},clearHover:function(){this.painter.clearHover&&(this.painter.clearHover(),this.refreshHover())},refreshHover:function(){this._needsRefreshHover=!0},refreshHoverImmediately:function(){this._needsRefreshHover=!1,this.painter.refreshHover&&this.painter.refreshHover()},resize:function(e){this.painter.resize((e=e||{}).width,e.height),this.handler.resize()},clearAnimation:function(){this.animation.clear()},getWidth:function(){return this.painter.getWidth()},getHeight:function(){return this.painter.getHeight()},pathToImage:function(e,t){return this.painter.pathToImage(e,t)},setCursorStyle:function(e){this.handler.setCursorStyle(e)},findHover:function(e,t){return this.handler.findHover(e,t)},on:function(e,t,n){this.handler.on(e,t,n)},off:function(e,t){this.handler.off(e,t)},trigger:function(e,t){this.handler.trigger(e,t)},clear:function(){this.storage.delRoot(),this.painter.clear()},dispose:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,function(e){delete Ad[e]}(this.id)}};var Sr=(Object.freeze||Object)({version:"4.3.2",init:Yp,dispose:function(e){if(e)e.dispose();else{for(var t in Ad)Ad.hasOwnProperty(t)&&Ad[t].dispose();Ad={}}return this},getInstance:function(e){return Ad[e]},registerPainter:Lm}),Wf=le,_g=ln,pf=en,Wx="series\0";function Ls(e){return e instanceof Array?e:null==e?[]:[e]}function Nh(e,t,n){if(e){e[t]=e[t]||{},e.emphasis=e.emphasis||{},e.emphasis[t]=e.emphasis[t]||{};for(var o=0,a=n.length;o<a;o++){var u=n[o];!e.emphasis[t].hasOwnProperty(u)&&e[t].hasOwnProperty(u)&&(e.emphasis[t][u]=e[t][u])}}}var ed=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function Gf(e){return!_g(e)||pf(e)||e instanceof Date?e:e.value}function Gx(e,t){t=(t||[]).slice();var n=Ge(e||[],function(o,a){return{exist:o}});return Wf(t,function(o,a){if(_g(o)){for(var u=0;u<n.length;u++)if(!n[u].option&&null!=o.id&&n[u].exist.id===o.id+"")return n[u].option=o,void(t[a]=null);for(u=0;u<n.length;u++){var l=n[u].exist;if(!(n[u].option||null!=l.id&&null!=o.id||null==o.name||Zp(o)||Zp(l)||l.name!==o.name+""))return n[u].option=o,void(t[a]=null)}}}),Wf(t,function(o,a){if(_g(o)){for(var u=0;u<n.length;u++)if(!n[u].option&&!Zp(n[u].exist)&&null==o.id){n[u].option=o;break}u>=n.length&&n.push({option:o})}}),n}function v0(e){var t=Gt();Wf(e,function(n,o){var a=n.exist;a&&t.set(a.id,n)}),Wf(e,function(n,o){var a=n.option;Qi(!a||null==a.id||!t.get(a.id)||t.get(a.id)===n,"id duplicates: "+(a&&a.id)),a&&null!=a.id&&t.set(a.id,n),n.keyInfo||(n.keyInfo={})}),Wf(e,function(n,o){var a=n.exist,u=n.option,l=n.keyInfo;if(_g(u)){if(l.name=null!=u.name?u.name+"":a?a.name:Wx+o,a)l.id=a.id;else if(null!=u.id)l.id=u.id+"";else for(var f=0;l.id="\0"+l.name+"\0"+f++,t.get(l.id););t.set(l.id,n)}})}function Bm(e){var t=e.name;return!(!t||!t.indexOf(Wx))}function Zp(e){return _g(e)&&e.id&&0===(e.id+"").indexOf("\0_ec_\0")}function Qa(e,t){return null!=t.dataIndexInside?t.dataIndexInside:null!=t.dataIndex?en(t.dataIndex)?Ge(t.dataIndex,function(n){return e.indexOfRawIndex(n)}):e.indexOfRawIndex(t.dataIndex):null!=t.name?en(t.name)?Ge(t.name,function(n){return e.indexOfName(n)}):e.indexOfName(t.name):void 0}function _i(){var e="__\0ec_inner_"+ou+++"_"+Math.random().toFixed(5);return function(t){return t[e]||(t[e]={})}}var ou=0;function Xl(e,t,n){if(Gn(t)){var o={};o[t+"Index"]=0,t=o}var a=n&&n.defaultMainType;!a||_c(t,a+"Index")||_c(t,a+"Id")||_c(t,a+"Name")||(t[a+"Index"]=0);var u={};return Wf(t,function(l,f){if(l=t[f],"dataIndex"!==f&&"dataIndexInside"!==f){var m=f.match(/^(\w+)(Index|Id|Name)$/)||[],v=m[1],x=(m[2]||"").toLowerCase();if(!(!v||!x||null==l||"index"===x&&"none"===l||n&&n.includeMainTypes&&$e(n.includeMainTypes,v)<0)){var C={mainType:v};"index"===x&&"all"===l||(C[x]=l);var k=e.queryComponents(C);u[v+"Models"]=k,u[v+"Model"]=k[0]}}else u[f]=l}),u}function _c(e,t){return e&&e.hasOwnProperty(t)}function Yl(e,t,n){e.setAttribute?e.setAttribute(t,n):e[t]=n}function Fu(e){return"auto"===e?Ze.domSupported?"html":"richText":e||"html"}function vf(e,t){var n=Gt(),o=[];return le(e,function(a){var u=t(a);(n.get(u)||(o.push(u),n.set(u,[]))).push(a)}),{keys:o,buckets:n}}var Sa="___EC__COMPONENT__CONTAINER___";function Od(e){var t={main:"",sub:""};return e&&(e=e.split("."),t.main=e[0]||"",t.sub=e[1]||""),t}function Zl(e){(e.$constructor=e).extend=function(t){function n(){t.$constructor?t.$constructor.apply(this,arguments):o.apply(this,arguments)}var o=this;return Ne(n.prototype,t),n.extend=this.extend,n.superCall=DS,n.superApply=Wa,Ie(n,this),n.superClass=o,n}}var R_=0;function Ed(e){var t=["__\0is_clz",R_++,Math.random().toFixed(3)].join("_");e.prototype[t]=!0,e.isInstance=function(n){return!(!n||!n[t])}}function DS(e,t){var n=rr(arguments,2);return this.superClass.prototype[t].apply(e,n)}function Wa(e,t,n){return this.superClass.prototype[t].apply(e,n)}function Zs(e,t){t=t||{};var n={};if(e.registerClass=function(a,u){return u&&(Qi(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(l=u),'componentType "'+l+'" illegal'),(u=Od(u)).sub?u.sub!==Sa&&((function(l){var f=n[l.main];return f&&f[Sa]||((f=n[l.main]={})[Sa]=!0),f}(u))[u.sub]=a):n[u.main]=a),a;var l},e.getClass=function(a,u,l){var f=n[a];if(f&&f[Sa]&&(f=u?f[u]:null),l&&!f)throw new Error(u?"Component "+a+"."+(u||"")+" not exists. Load it first.":a+".type should be specified.");return f},e.getClassesByMainType=function(a){a=Od(a);var u=[],l=n[a.main];return l&&l[Sa]?le(l,function(f,m){m!==Sa&&u.push(f)}):u.push(l),u},e.hasClass=function(a){return a=Od(a),!!n[a.main]},e.getAllClassMainTypes=function(){var a=[];return le(n,function(u,l){a.push(l)}),a},e.hasSubTypes=function(a){a=Od(a);var u=n[a.main];return u&&u[Sa]},e.parseClassType=Od,t.registerWhenExtend){var o=e.extend;o&&(e.extend=function(a){var u=o.call(this,a);return e.registerClass(u,a.type)})}return e}function Cu(e){for(var t=0;t<e.length;t++)e[t][1]||(e[t][1]=e[t][0]);return function(n,o,a){for(var u={},l=0;l<e.length;l++){var f=e[l][1];if(!(o&&0<=$e(o,f)||a&&$e(a,f)<0)){var m=n.getShallow(f);null!=m&&(u[e[l][0]]=m)}}return u}}var fs=Cu([["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),Ki={getLineStyle:function(e){var t=fs(this,e);return t.lineDash=this.getLineDash(t.lineWidth),t},getLineDash:function(e){null==e&&(e=1);var t=this.get("type"),n=Math.max(e,2),o=4*e;return"solid"!==t&&null!=t&&("dashed"===t?[o,o]:[n,n])}},Kl=Cu([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Kp={getAreaStyle:function(e,t){return Kl(this,e,t)}},Uf=Math.pow,Pd=Math.sqrt,Rh=Pd(3),nd=1/3,Ea=tr(),Wi=tr(),wl=tr();function iu(e){return-1e-8<e&&e<1e-8}function jf(e){return 1e-8<e||e<-1e-8}function ws(e,t,n,o,a){var u=1-a;return u*u*(u*e+3*a*t)+a*a*(a*o+3*u*n)}function $p(e,t,n,o,a){var u=1-a;return 3*(((t-e)*u+2*(n-t)*a)*u+(o-n)*a*a)}function Ss(e,t,n,o,a){var u=6*n-12*t+6*e,l=9*t+3*o-3*e-9*n,f=3*t-3*e,m=0;if(iu(l))jf(u)&&0<=(x=-f/u)&&x<=1&&(a[m++]=x);else{var v=u*u-4*l*f;if(iu(v))a[0]=-u/(2*l);else if(0<v){var x,C=Pd(v),k=(-u-C)/(2*l);0<=(x=(-u+C)/(2*l))&&x<=1&&(a[m++]=x),0<=k&&k<=1&&(a[m++]=k)}}return m}function Rd(e,t,n,o,a,u){var l=(t-e)*a+e,f=(n-t)*a+t,m=(o-n)*a+n,v=(f-l)*a+l,x=(m-f)*a+f,C=(x-v)*a+v;u[0]=e,u[1]=l,u[2]=v,u[3]=C,u[4]=C,u[5]=x,u[6]=m,u[7]=o}function na(e,t,n,o){var a=1-o;return a*(a*e+2*o*t)+o*o*n}function Lh(e,t,n,o){return 2*((1-o)*(t-e)+o*(n-t))}function Jp(e,t,n){var o=e+n-2*t;return 0==o?.5:(e-t)/o}function qf(e,t,n,o,a){var u=(t-e)*o+e,l=(n-t)*o+t,f=(l-u)*o+u;a[0]=e,a[1]=u,a[2]=f,a[3]=f,a[4]=l,a[5]=n}var Ca=Math.min,Bs=Math.max,bf=Math.sin,Ux=Math.cos,Sl=2*Math.PI,wg=tr(),zm=tr(),Xf=tr();function y0(e,t,n){if(0!==e.length){var o,a=e[0],u=a[0],l=a[0],f=a[1],m=a[1];for(o=1;o<e.length;o++)u=Ca(u,(a=e[o])[0]),l=Bs(l,a[0]),f=Ca(f,a[1]),m=Bs(m,a[1]);t[0]=u,t[1]=f,n[0]=l,n[1]=m}}function Bh(e,t,n,o,a,u){a[0]=Ca(e,n),a[1]=Ca(t,o),u[0]=Bs(e,n),u[1]=Bs(t,o)}var ka=[],wc=[];function Sc(e,t,n,o,a,u,l,f,m,v){var x,C=Ss,k=ws,M=C(e,n,a,l,ka);for(m[0]=1/0,m[1]=1/0,v[0]=-1/0,v[1]=-1/0,x=0;x<M;x++){var E=k(e,n,a,l,ka[x]);m[0]=Ca(E,m[0]),v[0]=Bs(E,v[0])}for(M=C(t,o,u,f,wc),x=0;x<M;x++){var V=k(t,o,u,f,wc[x]);m[1]=Ca(V,m[1]),v[1]=Bs(V,v[1])}m[0]=Ca(e,m[0]),v[0]=Bs(e,v[0]),m[0]=Ca(l,m[0]),v[0]=Bs(l,v[0]),m[1]=Ca(t,m[1]),v[1]=Bs(t,v[1]),m[1]=Ca(f,m[1]),v[1]=Bs(f,v[1])}function Sg(e,t,n,o,a,u,l,f,m){var v=Yu,x=pi,C=Math.abs(a-u);if(C%Sl<1e-4&&1e-4<C)return f[0]=e-n,f[1]=t-o,m[0]=e+n,void(m[1]=t+o);if(wg[0]=Ux(a)*n+e,wg[1]=bf(a)*o+t,zm[0]=Ux(u)*n+e,zm[1]=bf(u)*o+t,v(f,wg,zm),x(m,wg,zm),(a%=Sl)<0&&(a+=Sl),(u%=Sl)<0&&(u+=Sl),u<a&&!l?u+=Sl:a<u&&l&&(a+=Sl),l){var k=u;u=a,a=k}for(var M=0;M<u;M+=Math.PI/2)a<M&&(Xf[0]=Ux(M)*n+e,Xf[1]=bf(M)*o+t,v(f,Xf,f),x(m,Xf,m))}var Ga={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},xf=[],_f=[],Ld=[],Bd=[],eb=Math.min,Cg=Math.max,zd=Math.cos,Qo=Math.sin,Xi=Math.sqrt,Cl=Math.abs,Fm="undefined"!=typeof Float32Array,zs=function(e){this._saveData=!e,this._saveData&&(this.data=[]),this._ctx=null};function kl(e,t,n,o,a,u,l){if(0===a)return!1;var m,f=a;if(t+f<l&&o+f<l||l<t-f&&l<o-f||e+f<u&&n+f<u||u<e-f&&u<n-f)return!1;if(e===n)return Math.abs(u-e)<=f/2;var v=(m=(t-o)/(e-n))*u-l+(e*o-n*t)/(e-n);return v*v/(m*m+1)<=f/2*f/2}function Li(e,t,n,o,a,u,l,f,m,v,x){if(0===m)return!1;var C=m;return!(t+C<x&&o+C<x&&u+C<x&&f+C<x||x<t-C&&x<o-C&&x<u-C&&x<f-C||e+C<v&&n+C<v&&a+C<v&&l+C<v||v<e-C&&v<n-C&&v<a-C&&v<l-C)&&function(k,M,E,V,N,G,te,J,me,ge,pe){var _e,Me,We,Ke,et,ut=.005,lt=1/0;Ea[0]=me,Ea[1]=ge;for(var vt=0;vt<1;vt+=.05)Wi[0]=ws(k,E,N,te,vt),Wi[1]=ws(M,V,G,J,vt),(Ke=nu(Ea,Wi))<lt&&(_e=vt,lt=Ke);lt=1/0;for(var Mt=0;Mt<32&&!(ut<1e-4);Mt++)We=_e+ut,Wi[0]=ws(k,E,N,te,Me=_e-ut),Wi[1]=ws(M,V,G,J,Me),Ke=nu(Wi,Ea),0<=Me&&Ke<lt?(_e=Me,lt=Ke):(wl[0]=ws(k,E,N,te,We),wl[1]=ws(M,V,G,J,We),et=nu(wl,Ea),We<=1&&et<lt?(_e=We,lt=et):ut*=.5);return Pd(lt)}(e,t,n,o,a,u,l,f,v,x)<=C/2}function tb(e,t,n,o,a,u,l,f,m){if(0===l)return!1;var v=l;return!(t+v<m&&o+v<m&&u+v<m||m<t-v&&m<o-v&&m<u-v||e+v<f&&n+v<f&&a+v<f||f<e-v&&f<n-v&&f<a-v)&&function(x,C,k,M,E,V,N,G,te){var J,me=.005,ge=1/0;Ea[0]=N,Ea[1]=G;for(var pe=0;pe<1;pe+=.05)Wi[0]=na(x,k,E,pe),Wi[1]=na(C,M,V,pe),(Ke=nu(Ea,Wi))<ge&&(J=pe,ge=Ke);ge=1/0;for(var _e=0;_e<32&&!(me<1e-4);_e++){var Me=J-me,We=J+me;Wi[0]=na(x,k,E,Me),Wi[1]=na(C,M,V,Me);var Ke=nu(Wi,Ea);if(0<=Me&&Ke<ge)J=Me,ge=Ke;else{wl[0]=na(x,k,E,We),wl[1]=na(C,M,V,We);var et=nu(wl,Ea);We<=1&&et<ge?(J=We,ge=et):me*=.5}}return Pd(ge)}(e,t,n,o,a,u,f,m)<=v/2}zs.prototype={constructor:zs,_xi:0,_yi:0,_x0:0,_y0:0,_ux:0,_uy:0,_len:0,_lineDash:null,_dashOffset:0,_dashIdx:0,_dashSum:0,setScale:function(e,t,n){this._ux=Cl((n=n||0)/pc/e)||0,this._uy=Cl(n/pc/t)||0},getContext:function(){return this._ctx},beginPath:function(e){return(this._ctx=e)&&e.beginPath(),e&&(this.dpr=e.dpr),this._saveData&&(this._len=0),this._lineDash&&(this._lineDash=null,this._dashOffset=0),this},moveTo:function(e,t){return this.addData(Ga.M,e,t),this._ctx&&this._ctx.moveTo(e,t),this._x0=e,this._y0=t,this._xi=e,this._yi=t,this},lineTo:function(e,t){var n=Cl(e-this._xi)>this._ux||Cl(t-this._yi)>this._uy||this._len<5;return this.addData(Ga.L,e,t),this._ctx&&n&&(this._needsDash()?this._dashedLineTo(e,t):this._ctx.lineTo(e,t)),n&&(this._xi=e,this._yi=t),this},bezierCurveTo:function(e,t,n,o,a,u){return this.addData(Ga.C,e,t,n,o,a,u),this._ctx&&(this._needsDash()?this._dashedBezierTo(e,t,n,o,a,u):this._ctx.bezierCurveTo(e,t,n,o,a,u)),this._xi=a,this._yi=u,this},quadraticCurveTo:function(e,t,n,o){return this.addData(Ga.Q,e,t,n,o),this._ctx&&(this._needsDash()?this._dashedQuadraticTo(e,t,n,o):this._ctx.quadraticCurveTo(e,t,n,o)),this._xi=n,this._yi=o,this},arc:function(e,t,n,o,a,u){return this.addData(Ga.A,e,t,n,n,o,a-o,0,u?0:1),this._ctx&&this._ctx.arc(e,t,n,o,a,u),this._xi=zd(a)*n+e,this._yi=Qo(a)*n+t,this},arcTo:function(e,t,n,o,a){return this._ctx&&this._ctx.arcTo(e,t,n,o,a),this},rect:function(e,t,n,o){return this._ctx&&this._ctx.rect(e,t,n,o),this.addData(Ga.R,e,t,n,o),this},closePath:function(){this.addData(Ga.Z);var e=this._ctx,t=this._x0,n=this._y0;return e&&(this._needsDash()&&this._dashedLineTo(t,n),e.closePath()),this._xi=t,this._yi=n,this},fill:function(e){e&&e.fill(),this.toStatic()},stroke:function(e){e&&e.stroke(),this.toStatic()},setLineDash:function(e){if(e instanceof Array){this._lineDash=e;for(var t=this._dashIdx=0,n=0;n<e.length;n++)t+=e[n];this._dashSum=t}return this},setLineDashOffset:function(e){return this._dashOffset=e,this},len:function(){return this._len},setData:function(e){var t=e.length;this.data&&this.data.length===t||!Fm||(this.data=new Float32Array(t));for(var n=0;n<t;n++)this.data[n]=e[n];this._len=t},appendPath:function(e){e instanceof Array||(e=[e]);for(var t=e.length,n=0,o=this._len,a=0;a<t;a++)n+=e[a].len();for(Fm&&this.data instanceof Float32Array&&(this.data=new Float32Array(o+n)),a=0;a<t;a++)for(var u=e[a].data,l=0;l<u.length;l++)this.data[o++]=u[l];this._len=o},addData:function(e){if(this._saveData){var t=this.data;this._len+arguments.length>t.length&&(this._expandData(),t=this.data);for(var n=0;n<arguments.length;n++)t[this._len++]=arguments[n];this._prevCmd=e}},_expandData:function(){if(!(this.data instanceof Array)){for(var e=[],t=0;t<this._len;t++)e[t]=this.data[t];this.data=e}},_needsDash:function(){return this._lineDash},_dashedLineTo:function(e,t){var n,o,a=this._dashSum,u=this._dashOffset,l=this._lineDash,f=this._ctx,m=this._xi,v=this._yi,x=e-m,C=t-v,k=Xi(x*x+C*C),M=m,E=v,V=l.length;for(u<0&&(u=a+u),M-=(u%=a)*(x/=k),E-=u*(C/=k);0<x&&M<=e||x<0&&e<=M||0===x&&(0<C&&E<=t||C<0&&t<=E);)M+=x*(n=l[o=this._dashIdx]),E+=C*n,this._dashIdx=(o+1)%V,0<x&&M<m||x<0&&m<M||0<C&&E<v||C<0&&v<E||f[o%2?"moveTo":"lineTo"](0<=x?eb(M,e):Cg(M,e),0<=C?eb(E,t):Cg(E,t));this._dashOffset=-Xi((x=M-e)*x+(C=E-t)*C)},_dashedBezierTo:function(e,t,n,o,a,u){var l,f,m,v,x,C=this._dashSum,k=this._dashOffset,M=this._lineDash,E=this._ctx,V=this._xi,N=this._yi,G=ws,te=0,J=this._dashIdx,me=M.length,ge=0;for(k<0&&(k=C+k),k%=C,l=0;l<1;l+=.1)f=G(V,e,n,a,l+.1)-G(V,e,n,a,l),m=G(N,t,o,u,l+.1)-G(N,t,o,u,l),te+=Xi(f*f+m*m);for(;J<me&&!(k<(ge+=M[J]));J++);for(l=(ge-k)/te;l<=1;)v=G(V,e,n,a,l),x=G(N,t,o,u,l),J%2?E.moveTo(v,x):E.lineTo(v,x),l+=M[J]/te,J=(J+1)%me;J%2!=0&&E.lineTo(a,u),this._dashOffset=-Xi((f=a-v)*f+(m=u-x)*m)},_dashedQuadraticTo:function(e,t,n,o){var a=n,u=o;n=(n+2*e)/3,o=(o+2*t)/3,this._dashedBezierTo(e=(this._xi+2*e)/3,t=(this._yi+2*t)/3,n,o,a,u)},toStatic:function(){var e=this.data;e instanceof Array&&(e.length=this._len,Fm&&(this.data=new Float32Array(e)))},getBoundingRect:function(){xf[0]=xf[1]=Ld[0]=Ld[1]=Number.MAX_VALUE,_f[0]=_f[1]=Bd[0]=Bd[1]=-Number.MAX_VALUE;for(var e,t,n,o,a,u,l,f,m,v,x,C,k,M,E=this.data,V=0,N=0,G=0,te=0,J=0;J<E.length;){var me=E[J++];switch(1===J&&(G=V=E[J],te=N=E[J+1]),me){case Ga.M:V=G=E[J++],N=te=E[J++],Ld[0]=G,Ld[1]=te,Bd[0]=G,Bd[1]=te;break;case Ga.L:Bh(V,N,E[J],E[J+1],Ld,Bd),V=E[J++],N=E[J++];break;case Ga.C:Sc(V,N,E[J++],E[J++],E[J++],E[J++],E[J],E[J+1],Ld,Bd),V=E[J++],N=E[J++];break;case Ga.Q:t=N,n=E[J++],o=E[J++],u=E[J+1],l=Ld,f=Bd,v=m=void 0,v=na,x=Bs(Ca((m=Jp)(e=V,n,a=E[J]),1),0),C=Bs(Ca(m(t,o,u),1),0),k=v(e,n,a,x),M=v(t,o,u,C),l[0]=Ca(e,a,k),l[1]=Ca(t,u,M),f[0]=Bs(e,a,k),f[1]=Bs(t,u,M),V=E[J++],N=E[J++];break;case Ga.A:var ge=E[J++],pe=E[J++],_e=E[J++],Me=E[J++],We=E[J++],Ke=E[J++]+We;J+=1;var et=1-E[J++];1===J&&(G=zd(We)*_e+ge,te=Qo(We)*Me+pe),Sg(ge,pe,_e,Me,We,Ke,et,Ld,Bd),V=zd(Ke)*_e+ge,N=Qo(Ke)*Me+pe;break;case Ga.R:Bh(G=V=E[J++],te=N=E[J++],G+E[J++],te+E[J++],Ld,Bd);break;case Ga.Z:V=G,N=te}Yu(xf,xf,Ld),pi(_f,_f,Bd)}return 0===J&&(xf[0]=xf[1]=_f[0]=_f[1]=0),new ii(xf[0],xf[1],_f[0]-xf[0],_f[1]-xf[1])},rebuildPath:function(e){for(var t,n,o,a,u,l,f=this.data,m=this._ux,v=this._uy,x=this._len,C=0;C<x;){var k=f[C++];switch(1===C&&(t=o=f[C],n=a=f[C+1]),k){case Ga.M:t=o=f[C++],n=a=f[C++],e.moveTo(o,a);break;case Ga.L:u=f[C++],l=f[C++],(Cl(u-o)>m||Cl(l-a)>v||C===x-1)&&(e.lineTo(u,l),o=u,a=l);break;case Ga.C:e.bezierCurveTo(f[C++],f[C++],f[C++],f[C++],f[C++],f[C++]),o=f[C-2],a=f[C-1];break;case Ga.Q:e.quadraticCurveTo(f[C++],f[C++],f[C++],f[C++]),o=f[C-2],a=f[C-1];break;case Ga.A:var M=f[C++],E=f[C++],V=f[C++],N=f[C++],G=f[C++],te=f[C++],J=f[C++],me=f[C++],ge=N<V?V:N,pe=N<V?1:V/N,_e=N<V?N/V:1,Me=G+te;.001<Math.abs(V-N)?(e.translate(M,E),e.rotate(J),e.scale(pe,_e),e.arc(0,0,ge,G,Me,1-me),e.scale(1/pe,1/_e),e.rotate(-J),e.translate(-M,-E)):e.arc(M,E,ge,G,Me,1-me),1===C&&(t=zd(G)*V+M,n=Qo(G)*N+E),o=zd(Me)*V+M,a=Qo(Me)*N+E;break;case Ga.R:t=o=f[C],n=a=f[C+1],e.rect(f[C++],f[C++],f[C++],f[C++]);break;case Ga.Z:e.closePath(),o=t,a=n}}}},zs.CMD=Ga;var Fd=2*Math.PI;function zh(e){return(e%=Fd)<0&&(e+=Fd),e}var wf=2*Math.PI;function nb(e,t,n,o,a,u,l,f,m){if(0===l)return!1;var v=l;f-=e,m-=t;var x=Math.sqrt(f*f+m*m);if(n<x-v||x+v<n)return!1;if(Math.abs(o-a)%wf<1e-4)return!0;if(u){var C=o;o=zh(a),a=zh(C)}else o=zh(o),a=zh(a);a<o&&(a+=wf);var k=Math.atan2(m,f);return k<0&&(k+=wf),o<=k&&k<=a||o<=k+wf&&k+wf<=a}function Cc(e,t,n,o,a,u){if(t<u&&o<u||u<t&&u<o||o===t)return 0;var l=o<t?1:-1,f=(u-t)/(o-t);1!=f&&0!=f||(l=o<t?.5:-.5);var m=f*(n-e)+e;return m===a?1/0:a<m?l:0}var Tl=zs.CMD,Vm=2*Math.PI,au=[-1,-1,-1],Ml=[-1,-1];function $l(e,t,n,o,a,u,l,f,m,v){if(t<v&&o<v&&u<v&&f<v||v<t&&v<o&&v<u&&v<f)return 0;var x,C=function(J,me,ge,pe,_e,Me){var We=pe+3*(me-ge)-J,Ke=3*(ge-2*me+J),et=3*(me-J),ut=J-_e,lt=Ke*Ke-3*We*et,vt=Ke*et-9*We*ut,Mt=et*et-3*Ke*ut,Pt=0;if(iu(lt)&&iu(vt))iu(Ke)?Me[0]=0:0<=(Jr=-et/Ke)&&Jr<=1&&(Me[Pt++]=Jr);else{var Ct=vt*vt-4*lt*Mt;if(iu(Ct)){var Zt=vt/lt,An=-Zt/2;0<=(Jr=-Ke/We+Zt)&&Jr<=1&&(Me[Pt++]=Jr),0<=An&&An<=1&&(Me[Pt++]=An)}else if(0<Ct){var Rn=Pd(Ct),Cn=lt*Ke+1.5*We*(-vt+Rn),Jn=lt*Ke+1.5*We*(-vt-Rn);0<=(Jr=(-Ke-((Cn=Cn<0?-Uf(-Cn,nd):Uf(Cn,nd))+(Jn=Jn<0?-Uf(-Jn,nd):Uf(Jn,nd))))/(3*We))&&Jr<=1&&(Me[Pt++]=Jr)}else{var dr=(2*lt*Ke-3*We*vt)/(2*Pd(lt*lt*lt)),$r=Math.acos(dr)/3,zn=Pd(lt),Ur=Math.cos($r),Jr=(-Ke-2*zn*Ur)/(3*We),_o=(An=(-Ke+zn*(Ur+Rh*Math.sin($r)))/(3*We),(-Ke+zn*(Ur-Rh*Math.sin($r)))/(3*We));0<=Jr&&Jr<=1&&(Me[Pt++]=Jr),0<=An&&An<=1&&(Me[Pt++]=An),0<=_o&&_o<=1&&(Me[Pt++]=_o)}}return Pt}(t,o,u,f,v,au);if(0===C)return 0;for(var k,M,E=0,V=-1,N=0;N<C;N++){var G=au[N],te=0===G||1===G?.5:1;ws(e,n,a,l,G)<m||(V<0&&(V=Ss(t,o,u,f,Ml),Ml[1]<Ml[0]&&1<V&&(x=Ml[0],Ml[0]=Ml[1],Ml[1]=x),k=ws(t,o,u,f,Ml[0]),1<V&&(M=ws(t,o,u,f,Ml[1]))),E+=2===V?G<Ml[0]?k<t?te:-te:G<Ml[1]?M<k?te:-te:f<M?te:-te:G<Ml[0]?k<t?te:-te:f<k?te:-te)}return E}function Jl(e,t,n,o,a,u,l,f){if(t<f&&o<f&&u<f||f<t&&f<o&&f<u)return 0;var m=function(E,V,N,G,te){var J=E-2*V+N,me=2*(V-E),ge=E-G,pe=0;if(iu(J))jf(me)&&0<=(Me=-ge/me)&&Me<=1&&(te[pe++]=Me);else{var _e=me*me-4*J*ge;if(iu(_e))0<=(Me=-me/(2*J))&&Me<=1&&(te[pe++]=Me);else if(0<_e){var Me,We=Pd(_e),Ke=(-me-We)/(2*J);0<=(Me=(-me+We)/(2*J))&&Me<=1&&(te[pe++]=Me),0<=Ke&&Ke<=1&&(te[pe++]=Ke)}}return pe}(t,o,u,f,au);if(0===m)return 0;var v=Jp(t,o,u);if(0<=v&&v<=1){for(var x=0,C=na(t,o,u,v),k=0;k<m;k++){var M=0===au[k]||1===au[k]?.5:1;na(e,n,a,au[k])<l||(x+=au[k]<v?C<t?M:-M:u<C?M:-M)}return x}return M=0===au[0]||1===au[0]?.5:1,na(e,n,a,au[0])<l?0:u<t?M:-M}function jx(e,t,n,o,a,u,l,f){if(n<(f-=t)||f<-n)return 0;var m=Math.sqrt(n*n-f*f);au[0]=-m,au[1]=m;var v=Math.abs(o-a);if(v<1e-4)return 0;if(v%Vm<1e-4){a=Vm;var x=u?1:-1;return l>=au[o=0]+e&&l<=au[1]+e?x:0}u?(m=o,o=zh(a),a=zh(m)):(o=zh(o),a=zh(a)),a<o&&(a+=Vm);for(var C=0,k=0;k<2;k++){var M=au[k];if(l<M+e){var E=Math.atan2(f,M);x=u?1:-1,E<0&&(E=Vm+E),(o<=E&&E<=a||o<=E+Vm&&E+Vm<=a)&&(E>Math.PI/2&&E<1.5*Math.PI&&(x=-x),C+=x)}}return C}function Yf(e,t,n,o,a){for(var u=0,l=0,f=0,m=0,v=0,x=0;x<e.length;){var C=e[x++];switch(C===Tl.M&&1<x&&(n||(u+=Cc(l,f,m,v,o,a))),1===x&&(m=l=e[x],v=f=e[x+1]),C){case Tl.M:l=m=e[x++],f=v=e[x++];break;case Tl.L:if(n){if(kl(l,f,e[x],e[x+1],t,o,a))return!0}else u+=Cc(l,f,e[x],e[x+1],o,a)||0;l=e[x++],f=e[x++];break;case Tl.C:if(n){if(Li(l,f,e[x++],e[x++],e[x++],e[x++],e[x],e[x+1],t,o,a))return!0}else u+=$l(l,f,e[x++],e[x++],e[x++],e[x++],e[x],e[x+1],o,a)||0;l=e[x++],f=e[x++];break;case Tl.Q:if(n){if(tb(l,f,e[x++],e[x++],e[x],e[x+1],t,o,a))return!0}else u+=Jl(l,f,e[x++],e[x++],e[x],e[x+1],o,a)||0;l=e[x++],f=e[x++];break;case Tl.A:var k=e[x++],M=e[x++],E=e[x++],V=e[x++],N=e[x++],G=e[x++];x+=1;var te=1-e[x++],J=Math.cos(N)*E+k,me=Math.sin(N)*V+M;1<x?u+=Cc(l,f,J,me,o,a):(m=J,v=me);var ge=(o-k)*V/E+k;if(n){if(nb(k,M,V,N,N+G,te,t,ge,a))return!0}else u+=jx(k,M,V,N,N+G,te,ge,a);l=Math.cos(N+G)*E+k,f=Math.sin(N+G)*V+M;break;case Tl.R:if(m=l=e[x++],v=f=e[x++],J=m+e[x++],me=v+e[x++],n){if(kl(m,v,J,v,t,o,a)||kl(J,v,J,me,t,o,a)||kl(J,me,m,me,t,o,a)||kl(m,me,m,v,t,o,a))return!0}else u+=Cc(J,v,J,me,o,a),u+=Cc(m,me,m,v,o,a);break;case Tl.Z:if(n){if(kl(l,f,m,v,t,o,a))return!0}else u+=Cc(l,f,m,v,o,a);l=m,f=v}}return n||Math.abs(f-v)<1e-4||(u+=Cc(l,f,m,v,o,a)||0),0!==u}var kc=Lx.prototype.getCanvasPattern,ev=Math.abs,Fh=new zs(!0);function so(e){Oa.call(this,e),this.path=null}function Ql(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}so.prototype={constructor:so,type:"path",__dirtyPath:!0,strokeContainThreshold:5,segmentIgnoreThreshold:0,subPixelOptimize:!1,brush:function(e,t){var n,o=this.style,a=this.path||Fh,u=o.hasStroke(),l=o.hasFill(),f=o.fill,m=o.stroke,v=l&&!!f.colorStops,x=u&&!!m.colorStops,C=l&&!!f.image,k=u&&!!m.image;o.bind(e,this,t),this.setTransform(e),this.__dirty&&(v&&(n=n||this.getBoundingRect(),this._fillGradient=o.getGradient(e,f,n)),x&&(n=n||this.getBoundingRect(),this._strokeGradient=o.getGradient(e,m,n))),v?e.fillStyle=this._fillGradient:C&&(e.fillStyle=kc.call(f,e)),x?e.strokeStyle=this._strokeGradient:k&&(e.strokeStyle=kc.call(m,e));var M=o.lineDash,E=o.lineDashOffset,V=!!e.setLineDash,N=this.getGlobalScale();if(a.setScale(N[0],N[1],this.segmentIgnoreThreshold),this.__dirtyPath||M&&!V&&u?(a.beginPath(e),M&&!V&&(a.setLineDash(M),a.setLineDashOffset(E)),this.buildPath(a,this.shape,!1),this.path&&(this.__dirtyPath=!1)):(e.beginPath(),this.path.rebuildPath(e)),l)if(null!=o.fillOpacity){var G=e.globalAlpha;e.globalAlpha=o.fillOpacity*o.opacity,a.fill(e),e.globalAlpha=G}else a.fill(e);M&&V&&(e.setLineDash(M),e.lineDashOffset=E),u&&(null!=o.strokeOpacity?(G=e.globalAlpha,e.globalAlpha=o.strokeOpacity*o.opacity,a.stroke(e),e.globalAlpha=G):a.stroke(e)),M&&V&&e.setLineDash([]),null!=o.text&&(this.restoreTransform(e),this.drawRectText(e,this.getBoundingRect()))},buildPath:function(e,t,n){},createPathProxy:function(){this.path=new zs},getBoundingRect:function(){var e=this._rect,t=this.style,n=!e;if(n){var o=this.path;o=o||(this.path=new zs),this.__dirtyPath&&(o.beginPath(),this.buildPath(o,this.shape,!1)),e=o.getBoundingRect()}if(this._rect=e,t.hasStroke()){var a=this._rectWithStroke||(this._rectWithStroke=e.clone());if(this.__dirty||n){a.copy(e);var u=t.lineWidth,l=t.strokeNoScale?this.getLineScale():1;t.hasFill()||(u=Math.max(u,this.strokeContainThreshold||4)),1e-10<l&&(a.width+=u/l,a.height+=u/l,a.x-=u/l/2,a.y-=u/l/2)}return a}return e},contain:function(e,t){var n=this.transformCoordToLocal(e,t),o=this.getBoundingRect(),a=this.style;if(o.contain(e=n[0],t=n[1])){var u=this.path.data;if(a.hasStroke()){var l=a.lineWidth,f=a.strokeNoScale?this.getLineScale():1;if(1e-10<f&&(a.hasFill()||(l=Math.max(l,this.strokeContainThreshold)),Yf(u,l/f,!0,e,t)))return!0}if(a.hasFill())return Yf(u,0,!1,e,t)}return!1},dirty:function(e){null==e&&(e=!0),e&&(this.__dirtyPath=e,this._rect=null),this.__dirty=this.__dirtyText=!0,this.__zr&&this.__zr.refresh(),this.__clipTarget&&this.__clipTarget.dirty()},animateShape:function(e){return this.animate("shape",e)},attrKV:function(e,t){"shape"===e?(this.setShape(t),this.__dirtyPath=!0,this._rect=null):Oa.prototype.attrKV.call(this,e,t)},setShape:function(e,t){var n=this.shape;if(n){if(ln(e))for(var o in e)e.hasOwnProperty(o)&&(n[o]=e[o]);else n[e]=t;this.dirty(!0)}return this},getLineScale:function(){var e=this.transform;return e&&1e-10<ev(e[0]-1)&&1e-10<ev(e[3]-1)?Math.sqrt(ev(e[0]*e[3]-e[2]*e[1])):1}},so.extend=function(e){function t(o){so.call(this,o),e.style&&this.style.extendFrom(e.style,!1);var a=e.shape;if(a){this.shape=this.shape||{};var u=this.shape;for(var l in a)!u.hasOwnProperty(l)&&a.hasOwnProperty(l)&&(u[l]=a[l])}e.init&&e.init.call(this,o)}for(var n in Ie(t,so),e)"style"!==n&&"shape"!==n&&(t.prototype[n]=e[n]);return t},Ie(so,Oa);var kg=zs.CMD,L_=[[],[],[]],B_=Math.sqrt,Vh=Math.atan2,ra=Math.sqrt,ec=Math.sin,Cs=Math.cos,Zf=Math.PI,Dl=function(e,t){return(e[0]*t[0]+e[1]*t[1])/(Ql(e)*Ql(t))},tl=function(e,t){return(e[0]*t[1]<e[1]*t[0]?-1:1)*Math.acos(Dl(e,t))};function rb(e,t,n,o,a,u,l,f,m,v,x){var C=m*(Zf/180),k=Cs(C)*(e-n)/2+ec(C)*(t-o)/2,M=-1*ec(C)*(e-n)/2+Cs(C)*(t-o)/2,E=k*k/(l*l)+M*M/(f*f);1<E&&(l*=ra(E),f*=ra(E));var V=(a===u?-1:1)*ra((l*l*(f*f)-l*l*(M*M)-f*f*(k*k))/(l*l*(M*M)+f*f*(k*k)))||0,N=V*l*M/f,G=V*-f*k/l,te=(e+n)/2+Cs(C)*N-ec(C)*G,J=(t+o)/2+ec(C)*N+Cs(C)*G,me=tl([1,0],[(k-N)/l,(M-G)/f]),ge=[(k-N)/l,(M-G)/f],pe=[(-1*k-N)/l,(-1*M-G)/f],_e=tl(ge,pe);Dl(ge,pe)<=-1&&(_e=Zf),1<=Dl(ge,pe)&&(_e=0),0===u&&0<_e&&(_e-=2*Zf),1===u&&_e<0&&(_e+=2*Zf),x.addData(v,te,J,l,f,me,_e,C,u)}var qx=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,b0=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Xx(e,t){var n=function(o){if(!o)return new zs;for(var a,u=0,l=0,f=u,m=l,v=new zs,x=zs.CMD,C=o.match(qx),k=0;k<C.length;k++){for(var M,E=C[k],V=E.charAt(0),N=E.match(b0)||[],G=N.length,te=0;te<G;te++)N[te]=parseFloat(N[te]);for(var J=0;J<G;){var me,ge,pe,_e,Me,We,Ke,et=u,ut=l;switch(V){case"l":u+=N[J++],l+=N[J++],v.addData(M=x.L,u,l);break;case"L":u=N[J++],l=N[J++],v.addData(M=x.L,u,l);break;case"m":u+=N[J++],l+=N[J++],v.addData(M=x.M,u,l),f=u,m=l,V="l";break;case"M":u=N[J++],l=N[J++],v.addData(M=x.M,u,l),f=u,m=l,V="L";break;case"h":u+=N[J++],v.addData(M=x.L,u,l);break;case"H":u=N[J++],v.addData(M=x.L,u,l);break;case"v":l+=N[J++],v.addData(M=x.L,u,l);break;case"V":l=N[J++],v.addData(M=x.L,u,l);break;case"C":v.addData(M=x.C,N[J++],N[J++],N[J++],N[J++],N[J++],N[J++]),u=N[J-2],l=N[J-1];break;case"c":v.addData(M=x.C,N[J++]+u,N[J++]+l,N[J++]+u,N[J++]+l,N[J++]+u,N[J++]+l),u+=N[J-2],l+=N[J-1];break;case"S":me=u,ge=l;var lt=v.len(),vt=v.data;a===x.C&&(me+=u-vt[lt-4],ge+=l-vt[lt-3]),et=N[J++],ut=N[J++],u=N[J++],l=N[J++],v.addData(M=x.C,me,ge,et,ut,u,l);break;case"s":me=u,ge=l,lt=v.len(),vt=v.data,a===x.C&&(me+=u-vt[lt-4],ge+=l-vt[lt-3]),et=u+N[J++],ut=l+N[J++],u+=N[J++],l+=N[J++],v.addData(M=x.C,me,ge,et,ut,u,l);break;case"Q":et=N[J++],ut=N[J++],u=N[J++],l=N[J++],v.addData(M=x.Q,et,ut,u,l);break;case"q":et=N[J++]+u,ut=N[J++]+l,u+=N[J++],l+=N[J++],v.addData(M=x.Q,et,ut,u,l);break;case"T":me=u,ge=l,lt=v.len(),vt=v.data,a===x.Q&&(me+=u-vt[lt-4],ge+=l-vt[lt-3]),u=N[J++],l=N[J++],v.addData(M=x.Q,me,ge,u,l);break;case"t":me=u,ge=l,lt=v.len(),vt=v.data,a===x.Q&&(me+=u-vt[lt-4],ge+=l-vt[lt-3]),u+=N[J++],l+=N[J++],v.addData(M=x.Q,me,ge,u,l);break;case"A":pe=N[J++],_e=N[J++],Me=N[J++],We=N[J++],Ke=N[J++],rb(et=u,ut=l,u=N[J++],l=N[J++],We,Ke,pe,_e,Me,M=x.A,v);break;case"a":pe=N[J++],_e=N[J++],Me=N[J++],We=N[J++],Ke=N[J++],rb(et=u,ut=l,u+=N[J++],l+=N[J++],We,Ke,pe,_e,Me,M=x.A,v)}}"z"!==V&&"Z"!==V||(v.addData(M=x.Z),u=f,l=m),a=M}return v.toStatic(),v}(e);return(t=t||{}).buildPath=function(o){if(o.setData)o.setData(n.data),(a=o.getContext())&&o.rebuildPath(a);else{var a=o;n.rebuildPath(a)}},t.applyTransform=function(o){(function(e,t){var n,o,a,u,l,f=e.data,m=kg.M,v=kg.C,x=kg.L,C=kg.R,k=kg.A,M=kg.Q;for(u=a=0;a<f.length;){switch(n=f[a++],u=a,o=0,n){case m:case x:o=1;break;case v:o=3;break;case M:o=2;break;case k:var E=t[4],V=t[5],N=B_(t[0]*t[0]+t[1]*t[1]),G=B_(t[2]*t[2]+t[3]*t[3]),te=Vh(-t[1]/G,t[0]/N);f[a]*=N,f[a++]+=E,f[a]*=G,f[a++]+=V,f[a++]*=N,f[a++]*=G,f[a++]+=te,f[a++]+=te,u=a+=2;break;case C:J[0]=f[a++],J[1]=f[a++],ur(J,J,t),f[u++]=J[0],f[u++]=J[1],J[0]+=f[a++],J[1]+=f[a++],ur(J,J,t),f[u++]=J[0],f[u++]=J[1]}for(l=0;l<o;l++){var J;(J=L_[l])[0]=f[a++],J[1]=f[a++],ur(J,J,t),f[u++]=J[0],f[u++]=J[1]}}})(n,o),this.dirty(!0)},t}function Yx(e,t){return new so(Xx(e,t))}var Yo=function(e){Oa.call(this,e)};function nv(e){return Ze.browser.ie&&11<=Ze.browser.version?function(){var t,n=this.__clipPaths,o=this.style;if(n)for(var a=0;a<n.length;a++){var u=n[a],l=u&&u.shape,f=u&&u.type;if(l&&("sector"===f&&l.startAngle===l.endAngle||"rect"===f&&(!l.width||!l.height))){for(var m=0;m<jr.length;m++)jr[m][2]=o[jr[m][0]],o[jr[m][0]]=jr[m][1];t=!0;break}}if(e.apply(this,arguments),t)for(m=0;m<jr.length;m++)o[jr[m][0]]=jr[m][2]}:e}Yo.prototype={constructor:Yo,type:"text",brush:function(e,t){var n=this.style;this.__dirty&&gf(n),n.fill=n.stroke=n.shadowBlur=n.shadowColor=n.shadowOffsetX=n.shadowOffsetY=null;var o=n.text;null!=o&&(o+=""),$y(o,n)?(this.setTransform(e),Ns(this,e,o,n,null,t),this.restoreTransform(e)):e.__attrCachedBy=0},getBoundingRect:function(){var e=this.style;if(this.__dirty&&gf(e),!this._rect){var t=e.text;null!=t?t+="":t="";var n=bl(e.text+"",e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich);if(n.x+=e.x||0,n.y+=e.y||0,qp(e.textStroke,e.textStrokeWidth)){var o=e.textStrokeWidth;n.x-=o/2,n.y-=o/2,n.width+=o,n.height+=o}this._rect=n}return this._rect}},Ie(Yo,Oa);var ku=so.extend({type:"circle",shape:{cx:0,cy:0,r:0},buildPath:function(e,t,n){n&&e.moveTo(t.cx+t.r,t.cy),e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!0)}}),jr=[["shadowBlur",0],["shadowColor","#000"],["shadowOffsetX",0],["shadowOffsetY",0]],nl=so.extend({type:"sector",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},brush:nv(so.prototype.brush),buildPath:function(e,t){var n=t.cx,o=t.cy,a=Math.max(t.r0||0,0),u=Math.max(t.r,0),l=t.startAngle,f=t.endAngle,m=t.clockwise,v=Math.cos(l),x=Math.sin(l);e.moveTo(v*a+n,x*a+o),e.lineTo(v*u+n,x*u+o),e.arc(n,o,u,l,f,!m),e.lineTo(Math.cos(f)*a+n,Math.sin(f)*a+o),0!==a&&e.arc(n,o,a,f,l,m),e.closePath()}}),No=so.extend({type:"ring",shape:{cx:0,cy:0,r:0,r0:0},buildPath:function(e,t){var n=t.cx,o=t.cy,a=2*Math.PI;e.moveTo(n+t.r,o),e.arc(n,o,t.r,0,a,!1),e.moveTo(n+t.r0,o),e.arc(n,o,t.r0,0,a,!0)}});function Vu(e,t,n,o,a,u,l){var f=.5*(n-e),m=.5*(o-t);return(2*(t-n)+f+m)*l+(-3*(t-n)-2*f-m)*u+f*a+t}function Hm(e,t,n){var o=t.points,a=t.smooth;if(o&&2<=o.length){if(a&&"spline"!==a){var u=function(k,M,E,V){var N,G,te,J,me=[],ge=[],pe=[],_e=[];if(V){te=[1/0,1/0],J=[-1/0,-1/0];for(var Me=0,We=k.length;Me<We;Me++)Yu(te,te,k[Me]),pi(J,J,k[Me]);Yu(te,te,V[0]),pi(J,J,V[1])}for(Me=0,We=k.length;Me<We;Me++){var Ke=k[Me];if(E)N=k[Me?Me-1:We-1],G=k[(Me+1)%We];else{if(0===Me||Me===We-1){me.push(qr(k[Me]));continue}N=k[Me-1],G=k[Me+1]}di(ge,G,N),ma(ge,ge,M);var et=X(Ke,N),ut=X(Ke,G),lt=et+ut;0!==lt&&(et/=lt,ut/=lt),ma(pe,ge,-et),ma(_e,ge,ut);var vt=Eo([],Ke,pe),Mt=Eo([],Ke,_e);V&&(pi(vt,vt,te),Yu(vt,vt,J),pi(Mt,Mt,te),Yu(Mt,Mt,J)),me.push(vt),me.push(Mt)}return E&&me.push(me.shift()),me}(o,a,n,t.smoothConstraint);e.moveTo(o[0][0],o[0][1]);for(var l=o.length,f=0;f<(n?l:l-1);f++){var m=u[2*f],v=u[2*f+1],x=o[(f+1)%l];e.bezierCurveTo(m[0],m[1],v[0],v[1],x[0],x[1])}}else{"spline"===a&&(o=function(k,M){for(var E=k.length,V=[],N=0,G=1;G<E;G++)N+=X(k[G-1],k[G]);var te=N/2;for(te=te<E?E:te,G=0;G<te;G++){var J,me,ge,pe=G/(te-1)*(M?E:E-1),_e=Math.floor(pe),Me=pe-_e,We=k[_e%E];ge=M?(J=k[(_e-1+E)%E],me=k[(_e+1)%E],k[(_e+2)%E]):(J=k[0===_e?_e:_e-1],me=k[E-2<_e?E-1:_e+1],k[E-3<_e?E-1:_e+2]);var Ke=Me*Me,et=Me*Ke;V.push([Vu(J[0],We[0],me[0],ge[0],Me,Ke,et),Vu(J[1],We[1],me[1],ge[1],Me,Ke,et)])}return V}(o,n)),e.moveTo(o[0][0],o[0][1]),f=1;for(var C=o.length;f<C;f++)e.lineTo(o[f][0],o[f][1])}n&&e.closePath()}}var Vo=so.extend({type:"polygon",shape:{points:null,smooth:!1,smoothConstraint:null},buildPath:function(e,t){Hm(e,t,!0)}}),Zo=so.extend({type:"polyline",shape:{points:null,smooth:!1,smoothConstraint:null},style:{stroke:"#000",fill:null},buildPath:function(e,t){Hm(e,t,!1)}}),Hh=Math.round;function Ks(e,t,n){if(t){var o=t.x1,a=t.x2,u=t.y1,l=t.y2;e.x1=o,e.x2=a,e.y1=u,e.y2=l;var f=n&&n.lineWidth;f&&(Hh(2*o)===Hh(2*a)&&(e.x1=e.x2=wi(o,f,!0)),Hh(2*u)===Hh(2*l)&&(e.y1=e.y2=wi(u,f,!0)))}}function tc(e,t,n){if(t){var o=t.x,a=t.y,u=t.width,l=t.height;e.x=o,e.y=a,e.width=u,e.height=l;var f=n&&n.lineWidth;f&&(e.x=wi(o,f,!0),e.y=wi(a,f,!0),e.width=Math.max(wi(o+u,f,!1)-e.x,0===u?0:1),e.height=Math.max(wi(a+l,f,!1)-e.y,0===l?0:1))}}function wi(e,t,n){if(!t)return e;var o=Hh(2*e);return(o+Hh(t))%2==0?o/2:(o+(n?1:-1))/2}var hs={},fi=so.extend({type:"rect",shape:{r:0,x:0,y:0,width:0,height:0},buildPath:function(e,t){var n,o,a,u;this.subPixelOptimize?(tc(hs,t,this.style),n=hs.x,o=hs.y,a=hs.width,u=hs.height,hs.r=t.r,t=hs):(n=t.x,o=t.y,a=t.width,u=t.height),t.r?yc(e,t):e.rect(n,o,a,u),e.closePath()}}),Sf={},$s=so.extend({type:"line",shape:{x1:0,y1:0,x2:0,y2:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n,o,a,u;u=this.subPixelOptimize?(Ks(Sf,t,this.style),n=Sf.x1,o=Sf.y1,a=Sf.x2,Sf.y2):(n=t.x1,o=t.y1,a=t.x2,t.y2);var l=t.percent;0!==l&&(e.moveTo(n,o),l<1&&(a=n*(1-l)+a*l,u=o*(1-l)+u*l),e.lineTo(a,u))},pointAt:function(e){var t=this.shape;return[t.x1*(1-e)+t.x2*e,t.y1*(1-e)+t.y2*e]}}),es=[];function Js(e,t,n){return null===e.cpx2||null===e.cpy2?[(n?$p:ws)(e.x1,e.cpx1,e.cpx2,e.x2,t),(n?$p:ws)(e.y1,e.cpy1,e.cpy2,e.y2,t)]:[(n?Lh:na)(e.x1,e.cpx1,e.x2,t),(n?Lh:na)(e.y1,e.cpy1,e.y2,t)]}function rl(e){this.colorStops=e||[]}var rv=so.extend({type:"bezier-curve",shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,percent:1},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.x1,o=t.y1,a=t.x2,u=t.y2,l=t.cpx1,f=t.cpy1,m=t.cpx2,v=t.cpy2,x=t.percent;0!==x&&(e.moveTo(n,o),null==m||null==v?(x<1&&(qf(n,l,a,x,es),l=es[1],a=es[2],qf(o,f,u,x,es),f=es[1],u=es[2]),e.quadraticCurveTo(l,f,a,u)):(x<1&&(Rd(n,l,m,a,x,es),l=es[1],m=es[2],a=es[3],Rd(o,f,v,u,x,es),f=es[1],v=es[2],u=es[3]),e.bezierCurveTo(l,f,m,v,a,u)))},pointAt:function(e){return Js(this.shape,e,!1)},tangentAt:function(e){var t=Js(this.shape,e,!0);return ps(t,t)}}),x0=so.extend({type:"arc",shape:{cx:0,cy:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.cx,o=t.cy,a=Math.max(t.r,0),u=t.startAngle,l=t.endAngle,f=t.clockwise,m=Math.cos(u),v=Math.sin(u);e.moveTo(m*a+n,v*a+o),e.arc(n,o,a,u,l,!f)}}),ov=so.extend({type:"compound",shape:{paths:null},_updatePathDirty:function(){for(var e=this.__dirtyPath,t=this.shape.paths,n=0;n<t.length;n++)e=e||t[n].__dirtyPath;this.__dirtyPath=e,this.__dirty=this.__dirty||e},beforeBrush:function(){this._updatePathDirty();for(var e=this.shape.paths||[],t=this.getGlobalScale(),n=0;n<e.length;n++)e[n].path||e[n].createPathProxy(),e[n].path.setScale(t[0],t[1],e[n].segmentIgnoreThreshold)},buildPath:function(e,t){for(var n=t.paths||[],o=0;o<n.length;o++)n[o].buildPath(e,n[o].shape,!0)},afterBrush:function(){for(var e=this.shape.paths||[],t=0;t<e.length;t++)e[t].__dirtyPath=!1},getBoundingRect:function(){return this._updatePathDirty(),so.prototype.getBoundingRect.call(this)}});function Kf(e,t,n,o,a,u){this.x=null==e?0:e,this.y=null==t?0:t,this.x2=null==n?1:n,this.y2=null==o?0:o,this.type="linear",this.global=u||!1,rl.call(this,a)}function Tg(e,t,n,o,a){this.x=null==e?.5:e,this.y=null==t?.5:t,this.r=null==n?.5:n,this.type="radial",this.global=a||!1,rl.call(this,o)}function Al(e){Oa.call(this,e),this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.notClear=!0}rl.prototype={constructor:rl,addColorStop:function(e,t){this.colorStops.push({offset:e,color:t})}},Kf.prototype={constructor:Kf},Ie(Kf,rl),Tg.prototype={constructor:Tg},Ie(Tg,rl),Al.prototype.incremental=!0,Al.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.dirty(),this.notClear=!1},Al.prototype.addDisplayable=function(e,t){t?this._temporaryDisplayables.push(e):this._displayables.push(e),this.dirty()},Al.prototype.addDisplayables=function(e,t){t=t||!1;for(var n=0;n<e.length;n++)this.addDisplayable(e[n],t)},Al.prototype.eachPendingDisplayable=function(e){for(var t=this._cursor;t<this._displayables.length;t++)e&&e(this._displayables[t]);for(t=0;t<this._temporaryDisplayables.length;t++)e&&e(this._temporaryDisplayables[t])},Al.prototype.update=function(){this.updateTransform();for(var e=this._cursor;e<this._displayables.length;e++)(t=this._displayables[e]).parent=this,t.update(),t.parent=null;for(e=0;e<this._temporaryDisplayables.length;e++){var t;(t=this._temporaryDisplayables[e]).parent=this,t.update(),t.parent=null}},Al.prototype.brush=function(e,t){for(var n=this._cursor;n<this._displayables.length;n++)(o=this._displayables[n]).beforeBrush&&o.beforeBrush(e),o.brush(e,n===this._cursor?null:this._displayables[n-1]),o.afterBrush&&o.afterBrush(e);for(this._cursor=n,n=0;n<this._temporaryDisplayables.length;n++){var o;(o=this._temporaryDisplayables[n]).beforeBrush&&o.beforeBrush(e),o.brush(e,0===n?null:this._temporaryDisplayables[n-1]),o.afterBrush&&o.afterBrush(e)}this._temporaryDisplayables=[],this.notClear=!0};var ol=[];Al.prototype.getBoundingRect=function(){if(!this._rect){for(var e=new ii(1/0,1/0,-1/0,-1/0),t=0;t<this._displayables.length;t++){var n=this._displayables[t],o=n.getBoundingRect().clone();n.needLocalTransform()&&o.applyTransform(n.getLocalTransform(ol)),e.union(o)}this._rect=e}return this._rect},Al.prototype.contain=function(e,t){var n=this.transformCoordToLocal(e,t);if(this.getBoundingRect().contain(n[0],n[1]))for(var o=0;o<this._displayables.length;o++)if(this._displayables[o].contain(e,t))return!0;return!1},Ie(Al,Oa);var Wm=Math.max,yi=Math.min,Mg={},rd={color:"textFill",textBorderColor:"textStroke",textBorderWidth:"textStrokeWidth"},Wh="emphasis",od=1,ob={},Tu={};function Tc(e){return so.extend(e)}function Hd(e,t){Tu[e]=t}function Ag(e){if(Tu.hasOwnProperty(e))return Tu[e]}function $f(e,t,n,o){var a=Yx(e,t);return n&&("center"===o&&(n=iv(n,a.getBoundingRect())),av(a,n)),a}function z_(e,t,n){var o=new xi({style:{image:e,x:t.x,y:t.y,width:t.width,height:t.height},onload:function(a){"center"===n&&o.setStyle(iv(t,{width:a.width,height:a.height}))}});return o}function iv(e,t){var n,o=t.width/t.height,a=e.height*o;return n=a<=e.width?e.height:(a=e.width)/o,{x:e.x+e.width/2-a/2,y:e.y+e.height/2-n/2,width:a,height:n}}var ts=function(e,t){for(var n=[],o=e.length,a=0;a<o;a++){var u=e[a];u.path||u.createPathProxy(),u.__dirtyPath&&u.buildPath(u.path,u.shape,!0),n.push(u.path)}var l=new so(t);return l.createPathProxy(),l.buildPath=function(f){f.appendPath(n);var m=f.getContext();m&&f.rebuildPath(m)},l};function av(e,t){if(e.applyTransform){var n=e.getBoundingRect().calculateTransform(t);e.applyTransform(n)}}var Ig=wi;function sv(e){return null!=e&&"none"!==e}var _0=Gt(),w0=0;function Gm(e){var t=e.__hoverStl;if(t&&!e.__highlighted){var n=e.__zr,o=e.useHoverLayer&&n&&"canvas"===n.painter.type;if(e.__highlighted=o?"layer":"plain",!(e.isGroup||!n&&e.useHoverLayer)){var a=e,u=e.style;o&&(u=(a=n.addHover(e)).style),dn(u),o||function(l){if(l.__hoverStlDirty){l.__hoverStlDirty=!1;var f=l.__hoverStl;if(f){var m=l.__cachedNormalStl={};l.__cachedNormalZ2=l.z2;var v=l.style;for(var x in f)null!=f[x]&&(m[x]=v[x]);m.fill=v.fill,m.stroke=v.stroke}else l.__cachedNormalStl=l.__cachedNormalZ2=null}}(a),u.extendFrom(t),Jf(u,t,"fill"),Jf(u,t,"stroke"),El(u),o||(e.dirty(!1),e.z2+=1)}}}function Jf(e,t,n){!sv(t[n])&&sv(e[n])&&(e[n]=function(o){if("string"!=typeof o)return o;var a=_0.get(o);return a||(a=Wl(o,-.1),w0<1e4&&(_0.set(o,a),w0++)),a}(e[n]))}function uv(e){var t=e.__highlighted;if(t&&(e.__highlighted=!1,!e.isGroup))if("layer"===t)e.__zr&&e.__zr.removeHover(e);else{var n=e.style,o=e.__cachedNormalStl;o&&(dn(n),e.setStyle(o),El(n));var a=e.__cachedNormalZ2;null!=a&&e.z2-a==1&&(e.z2=a)}}function Hu(e,t,n){var o,a="normal",u="normal";e.__highlighted&&(a=Wh,o=!0),t(e,n),e.__highlighted&&(u=Wh,o=!0),e.isGroup&&e.traverse(function(l){l.isGroup||t(l,n)}),o&&e.__highDownOnUpdate&&e.__highDownOnUpdate(a,u)}function il(e,t){t=e.__hoverStl=!1!==t&&(e.hoverStyle||t||{}),e.__hoverStlDirty=!0,e.__highlighted&&(e.__cachedNormalStl=null,uv(e),Gm(e))}function Fs(e){Ol(this,e)||this.__highByOuter||Hu(this,Gm)}function su(e){Ol(this,e)||this.__highByOuter||Hu(this,uv)}function Il(e){this.__highByOuter|=1<<(e||0),Hu(this,Gm)}function gs(e){(this.__highByOuter&=~(1<<(e||0)))||Hu(this,uv)}function Ol(e,t){return e.__highDownSilentOnTouch&&t.zrByTouch}function Go(e,t){Og(e,!0),Hu(e,il,t)}function Og(e,t){var n=!1===t;if(e.__highDownSilentOnTouch=e.highDownSilentOnTouch,e.__highDownOnUpdate=e.highDownOnUpdate,!n||e.__highDownDispatcher){var o=n?"off":"on";e[o]("mouseover",Fs)[o]("mouseout",su),e[o]("emphasis",Il)[o]("normal",gs),e.__highByOuter=e.__highByOuter||0,e.__highDownDispatcher=!n}}function Gh(e){return!(!e||!e.__highDownDispatcher)}function lv(e){var t=ob[e];return null==t&&od<=32&&(t=ob[e]=od++),t}function Ln(e,t,n,o,a,u,l){var f,m=(a=a||Mg).labelFetcher,v=a.labelDataIndex,x=a.labelDimIndex,C=a.labelProp,k=n.getShallow("show"),M=o.getShallow("show");(k||M)&&(m&&(f=m.getFormattedLabel(v,"normal",null,x,C)),null==f&&(f=Ot(a.defaultText)?a.defaultText(v,a):a.defaultText));var E=k?f:null,V=M?Or(m?m.getFormattedLabel(v,"emphasis",null,x,C):null,f):null;null==E&&null==V||(Ta(e,n,u,a),Ta(t,o,l,a,!0)),e.text=E,t.text=V}function Zx(e,t,n){var o=e.style;t&&(dn(o),e.setStyle(t),El(o)),o=e.__hoverStl,n&&o&&(dn(o),Ne(o,n),El(o))}function Ta(e,t,n,o,a){return ib(e,t,o,a),n&&Ne(e,n),e}function ib(e,t,n,o){if((n=n||Mg).isRectText){var a;n.getTextPosition?a=n.getTextPosition(t,o):"outside"===(a=t.getShallow("position")||(o?null:"inside"))&&(a="top"),e.textPosition=a,e.textOffset=t.getShallow("offset");var u=t.getShallow("rotate");null!=u&&(u*=Math.PI/180),e.textRotation=u,e.textDistance=Or(t.getShallow("distance"),o?null:5)}var l,f=t.ecModel,m=f&&f.option.textStyle,v=function(k){for(var M;k&&k!==k.ecModel;){var E=(k.option||Mg).rich;if(E)for(var V in M=M||{},E)E.hasOwnProperty(V)&&(M[V]=1);k=k.parentModel}return M}(t);if(v)for(var x in l={},v)if(v.hasOwnProperty(x)){var C=t.getModel(["rich",x]);nc(l[x]={},C,m,n,o)}return e.rich=l,nc(e,t,m,n,o,!0),n.forceRich&&!n.textStyle&&(n.textStyle={}),e}function nc(e,t,n,o,a,u){n=!a&&n||Mg,e.textFill=Um(t.getShallow("color"),o)||n.color,e.textStroke=Um(t.getShallow("textBorderColor"),o)||n.textBorderColor,e.textStrokeWidth=Or(t.getShallow("textBorderWidth"),n.textBorderWidth),a||(u&&(e.insideRollbackOpt=o,El(e)),null==e.textFill&&(e.textFill=o.autoColor)),e.fontStyle=t.getShallow("fontStyle")||n.fontStyle,e.fontWeight=t.getShallow("fontWeight")||n.fontWeight,e.fontSize=t.getShallow("fontSize")||n.fontSize,e.fontFamily=t.getShallow("fontFamily")||n.fontFamily,e.textAlign=t.getShallow("align"),e.textVerticalAlign=t.getShallow("verticalAlign")||t.getShallow("baseline"),e.textLineHeight=t.getShallow("lineHeight"),e.textWidth=t.getShallow("width"),e.textHeight=t.getShallow("height"),e.textTag=t.getShallow("tag"),u&&o.disableBox||(e.textBackgroundColor=Um(t.getShallow("backgroundColor"),o),e.textPadding=t.getShallow("padding"),e.textBorderColor=Um(t.getShallow("borderColor"),o),e.textBorderWidth=t.getShallow("borderWidth"),e.textBorderRadius=t.getShallow("borderRadius"),e.textBoxShadowColor=t.getShallow("shadowColor"),e.textBoxShadowBlur=t.getShallow("shadowBlur"),e.textBoxShadowOffsetX=t.getShallow("shadowOffsetX"),e.textBoxShadowOffsetY=t.getShallow("shadowOffsetY")),e.textShadowColor=t.getShallow("textShadowColor")||n.textShadowColor,e.textShadowBlur=t.getShallow("textShadowBlur")||n.textShadowBlur,e.textShadowOffsetX=t.getShallow("textShadowOffsetX")||n.textShadowOffsetX,e.textShadowOffsetY=t.getShallow("textShadowOffsetY")||n.textShadowOffsetY}function Um(e,t){return"auto"!==e?e:t&&t.autoColor?t.autoColor:null}function El(e){var t,n=e.textPosition,o=e.insideRollbackOpt;if(o&&null==e.textFill){var a=o.autoColor,l=o.useInsideStyle,f=!1!==l&&(!0===l||o.isRectText&&n&&"string"==typeof n&&0<=n.indexOf("inside")),m=!f&&null!=a;(f||m)&&(t={textFill:e.textFill,textStroke:e.textStroke,textStrokeWidth:e.textStrokeWidth}),f&&(e.textFill="#fff",null==e.textStroke&&(e.textStroke=a,null==e.textStrokeWidth&&(e.textStrokeWidth=2))),m&&(e.textFill=a)}e.insideRollback=t}function dn(e){var t=e.insideRollback;t&&(e.textFill=t.textFill,e.textStroke=t.textStroke,e.textStrokeWidth=t.textStrokeWidth,e.insideRollback=null)}function jm(e,t){var n=t&&t.getModel("textStyle");return Mr([e.fontStyle||n&&n.getShallow("fontStyle")||"",e.fontWeight||n&&n.getShallow("fontWeight")||"",(e.fontSize||n&&n.getShallow("fontSize")||12)+"px",e.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}function ab(e,t,n,o,a,u){if("function"==typeof a&&(u=a,a=null),o&&o.isAnimationEnabled()){var l=e?"Update":"",f=o.getShallow("animationDuration"+l),m=o.getShallow("animationEasing"+l),v=o.getShallow("animationDelay"+l);"function"==typeof v&&(v=v(a,o.getAnimationDelayParams?o.getAnimationDelayParams(t,a):null)),"function"==typeof f&&(f=f(a)),0<f?t.animateTo(n,f,v||0,m,u,!!u):(t.stopAnimation(),t.attr(n),u&&u())}else t.stopAnimation(),t.attr(n),u&&u()}function Po(e,t,n,o,a){ab(!0,e,t,n,o,a)}function al(e,t,n,o,a){ab(!1,e,t,n,o,a)}function Wd(e,t){for(var n=Fa([]);e&&e!==t;)pa(n,e.getLocalTransform(),n),e=e.parent;return n}function Ai(e,t,n){return t&&!Fe(t)&&(t=Co.getLocalTransform(t)),n&&(t=aa([],t)),ur([],e,t)}function Ua(e,t,n){var o=0===t[4]||0===t[5]||0===t[0]?1:Math.abs(2*t[4]/t[0]),a=0===t[4]||0===t[5]||0===t[2]?1:Math.abs(2*t[4]/t[2]),u=["left"===e?-o:"right"===e?o:0,"top"===e?-a:"bottom"===e?a:0];return u=Ai(u,t,n),Math.abs(u[0])>Math.abs(u[1])?0<u[0]?"right":"left":0<u[1]?"bottom":"top"}function Eg(e,t,n,o){if(e&&t){var a,u=(a={},e.traverse(function(f){!f.isGroup&&f.anid&&(a[f.anid]=f)}),a);t.traverse(function(f){if(!f.isGroup&&f.anid){var m=u[f.anid];if(m){var v=l(f);f.attr(l(m)),Po(f,v,n,f.dataIndex)}}})}function l(f){var m={position:qr(f.position),rotation:f.rotation};return f.shape&&(m.shape=Ne({},f.shape)),m}}function F_(e,t){return Ge(e,function(n){var o=n[0];o=Wm(o,t.x),o=yi(o,t.x+t.width);var a=n[1];return a=Wm(a,t.y),[o,a=yi(a,t.y+t.height)]})}function qm(e,t,n){var o=(t=Ne({rectHover:!0},t)).style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},e)return 0===e.indexOf("image://")?(o.image=e.slice(8),Ee(o,n),new xi(t)):$f(e.replace("path://",""),t,n,"center")}function Xm(e,t,n,o,a){for(var u=0,l=a[a.length-1];u<a.length;u++){var f=a[u];if(Kx(e,t,n,o,f[0],f[1],l[0],l[1]))return!0;l=f}}function Kx(e,t,n,o,a,u,l,f){var G,m=n-e,v=o-t,x=l-a,C=f-u,k=S0(x,C,m,v);if((G=k)<=1e-6&&-1e-6<=G)return!1;var M=e-a,E=t-u,V=S0(M,E,m,v)/k;if(V<0||1<V)return!1;var N=S0(M,E,x,C)/k;return!(N<0||1<N)}function S0(e,t,n,o){return e*o-n*t}Hd("circle",ku),Hd("sector",nl),Hd("ring",No),Hd("polygon",Vo),Hd("polyline",Zo),Hd("rect",fi),Hd("line",$s),Hd("bezierCurve",rv),Hd("arc",x0);var Mc=(Object.freeze||Object)({Z2_EMPHASIS_LIFT:1,CACHED_LABEL_STYLE_PROPERTIES:rd,extendShape:Tc,extendPath:function(e,t){return function(n,o){return so.extend(Xx(n,o))}(e,t)},registerShape:Hd,getShapeClass:Ag,makePath:$f,makeImage:z_,mergePath:ts,resizePath:av,subPixelOptimizeLine:function(e){return Ks(e.shape,e.shape,e.style),e},subPixelOptimizeRect:function(e){return tc(e.shape,e.shape,e.style),e},subPixelOptimize:Ig,setElementHoverStyle:il,setHoverStyle:Go,setAsHighDownDispatcher:Og,isHighDownDispatcher:Gh,getHighlightDigit:lv,setLabelStyle:Ln,modifyLabelStyle:Zx,setTextStyle:Ta,setText:function(e,t,n){var o,a={isRectText:!0};!1===n?o=!0:a.autoColor=n,ib(e,t,a,o)},getFont:jm,updateProps:Po,initProps:al,getTransform:Wd,applyTransform:Ai,transformDirection:Ua,groupTransition:Eg,clipPointsByRect:F_,clipRectByRect:function(e,t){var n=Wm(e.x,t.x),o=yi(e.x+e.width,t.x+t.width),a=Wm(e.y,t.y),u=yi(e.y+e.height,t.y+t.height);if(n<=o&&a<=u)return{x:n,y:a,width:o-n,height:u-a}},createIcon:qm,linePolygonIntersect:Xm,lineLineIntersect:Kx,Group:mr,Image:xi,Text:Yo,Circle:ku,Sector:nl,Ring:No,Polygon:Vo,Polyline:Zo,Rect:fi,Line:$s,BezierCurve:rv,Arc:x0,IncrementalDisplayable:Al,CompoundPath:ov,LinearGradient:Kf,RadialGradient:Tg,BoundingRect:ii}),sb=["textStyle","color"],ub={getTextColor:function(e){var t=this.ecModel;return this.getShallow("color")||(!e&&t?t.get(sb):null)},getFont:function(){return jm({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},getTextRect:function(e){return bl(e,this.getFont(),this.getShallow("align"),this.getShallow("verticalAlign")||this.getShallow("baseline"),this.getShallow("padding"),this.getShallow("lineHeight"),this.getShallow("rich"),this.getShallow("truncateText"))}},ya=Cu([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["textPosition"],["textAlign"]]),$x={getItemStyle:function(e,t){var n=ya(this,e,t),o=this.getBorderLineDash();return o&&(n.lineDash=o),n},getBorderLineDash:function(){var e=this.get("borderType");return"solid"===e||null==e?null:"dashed"===e?[5,5]:[1,1]}},C0=de,lb=_i();function ei(e,t,n){this.parentModel=t,this.ecModel=n,this.option=e}function cv(e,t,n){for(var o=0;o<t.length&&(!t[o]||null!=(e=e&&"object"==typeof e?e[t[o]]:null));o++);return null==e&&n&&(e=n.get(t)),e}function k0(e,t){var n=lb(e).getParent;return n?n.call(e,t):e.parentModel}ei.prototype={constructor:ei,init:null,mergeOption:function(e){xe(this.option,e,!0)},get:function(e,t){return null==e?this.option:cv(this.option,this.parsePath(e),!t&&k0(this,e))},getShallow:function(e,t){var n=this.option,o=null==n?n:n[e],a=!t&&k0(this,e);return null==o&&a&&(o=a.getShallow(e)),o},getModel:function(e,t){var n;return new ei(null==e?this.option:cv(this.option,e=this.parsePath(e)),t=t||(n=k0(this,e))&&n.getModel(e),this.ecModel)},isEmpty:function(){return null==this.option},restoreData:function(){},clone:function(){return new this.constructor(ie(this.option))},setReadOnly:function(e){},parsePath:function(e){return"string"==typeof e&&(e=e.split(".")),e},customizeGetParent:function(e){lb(this).getParent=e},isAnimationEnabled:function(){if(!Ze.node){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}}},Zl(ei),Ed(ei),C0(ei,Ki),C0(ei,Kp),C0(ei,ub),C0(ei,$x);var Jx=0;function Ym(e){return[e||"",Jx++,Math.random().toFixed(5)].join("_")}function hi(e,t,n,o){var a=t[1]-t[0],u=n[1]-n[0];if(0==a)return 0==u?n[0]:(n[0]+n[1])/2;if(o)if(0<a){if(e<=t[0])return n[0];if(e>=t[1])return n[1]}else{if(e>=t[0])return n[0];if(e<=t[1])return n[1]}else{if(e===t[0])return n[0];if(e===t[1])return n[1]}return(e-t[0])/a*u+n[0]}function nr(e,t){switch(e){case"center":case"middle":e="50%";break;case"left":case"top":e="0%";break;case"right":case"bottom":e="100%"}return"string"==typeof e?function(n){return n.replace(/^\s+|\s+$/g,"")}(e).match(/%$/)?parseFloat(e)/100*t:parseFloat(e):null==e?NaN:+e}function Vs(e,t,n){return null==t&&(t=10),t=Math.min(Math.max(0,t),20),e=(+e).toFixed(t),n?e:+e}function Pg(e){return e.sort(function(t,n){return t-n}),e}function M0(e){if(e=+e,isNaN(e))return 0;for(var t=1,n=0;Math.round(e*t)/t!==e;)t*=10,n++;return n}function cb(e){var t=e.toString(),n=t.indexOf("e");if(0<n){var o=+t.slice(n+1);return o<0?-o:0}var a=t.indexOf(".");return a<0?0:t.length-1-a}function Qx(e,t){var n=Math.log,o=Math.LN10,a=Math.floor(n(e[1]-e[0])/o),u=Math.round(n(Math.abs(t[1]-t[0]))/o),l=Math.min(Math.max(-a+u,0),20);return isFinite(l)?l:20}function Ng(e,t,n){if(!e[t])return 0;var o=Qe(e,function(E,V){return E+(isNaN(V)?0:V)},0);if(0===o)return 0;for(var a=Math.pow(10,n),u=Ge(e,function(E){return(isNaN(E)?0:E)/o*a*100}),l=100*a,f=Ge(u,function(E){return Math.floor(E)}),m=Qe(f,function(E,V){return E+V},0),v=Ge(u,function(E,V){return E-f[V]});m<l;){for(var x=Number.NEGATIVE_INFINITY,C=null,k=0,M=v.length;k<M;++k)v[k]>x&&(x=v[k],C=k);++f[C],v[C]=0,++m}return f[t]/a}var Rg=9007199254740991;function e1(e){var t=2*Math.PI;return(e%t+t)%t}function db(e){return-1e-4<e&&e<1e-4}var V_=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d\d)(?::(\d\d)(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function Cf(e){if(e instanceof Date)return e;if("string"!=typeof e)return null==e?new Date(NaN):new Date(Math.round(e));var t=V_.exec(e);if(!t)return new Date(NaN);if(t[8]){var n=+t[4]||0;return"Z"!==t[8].toUpperCase()&&(n-=t[8].slice(0,3)),new Date(Date.UTC(+t[1],+(t[2]||1)-1,+t[3]||1,n,+(t[5]||0),+t[6]||0,+t[7]||0))}return new Date(+t[1],+(t[2]||1)-1,+t[3]||1,+t[4]||0,+(t[5]||0),+t[6]||0,+t[7]||0)}function D0(e){return Math.pow(10,Dc(e))}function Dc(e){if(0===e)return 0;var t=Math.floor(Math.log(e)/Math.LN10);return 10<=e/Math.pow(10,t)&&t++,t}function Gd(e,t){var n=Dc(e),o=Math.pow(10,n),a=e/o;return e=(t?a<1.5?1:a<2.5?2:a<4?3:a<7?5:10:a<1?1:a<2?2:a<3?3:a<5?5:10)*o,-20<=n?+e.toFixed(n<0?-n:0):e}function rc(e){e.sort(function(f,m){return function v(x,C,k){return x.interval[k]<C.interval[k]||x.interval[k]===C.interval[k]&&(x.close[k]-C.close[k]==(k?-1:1)||!k&&v(x,C,1))}(f,m,0)?-1:1});for(var t=-1/0,n=1,o=0;o<e.length;){for(var a=e[o].interval,u=e[o].close,l=0;l<2;l++)a[l]<=t&&(a[l]=t,u[l]=l?1:1-n),t=a[l],n=u[l];a[0]===a[1]&&u[0]*u[1]!=1?e.splice(o,1):o++}return e}function Lg(e){return 0<=e-parseFloat(e)}var H_=(Object.freeze||Object)({linearMap:hi,parsePercent:nr,round:Vs,asc:Pg,getPrecision:M0,getPrecisionSafe:cb,getPixelPrecision:Qx,getPercentWithPrecision:Ng,MAX_SAFE_INTEGER:Rg,remRadian:e1,isRadianAroundZero:db,parseDate:Cf,quantity:D0,quantityExponent:Dc,nice:Gd,quantile:function(e,t){var n=(e.length-1)*t+1,o=Math.floor(n),a=+e[o-1],u=n-o;return u?a+u*(e[o]-a):a},reformIntervals:rc,isNumeric:Lg});function Ac(e){return isNaN(e)?"-":(e=(e+"").split("."))[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(1<e.length?"."+e[1]:"")}function Zm(e,t){return e=(e||"").toLowerCase().replace(/-(.)/g,function(n,o){return o.toUpperCase()}),t&&e&&(e=e.charAt(0).toUpperCase()+e.slice(1)),e}var Uh=ai,Bg=/([&<>"'])/g,jh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Pa(e){return null==e?"":(e+"").replace(Bg,function(t,n){return jh[n]})}function A0(e,t){return"{"+e+(null==t?"":t)+"}"}var uu=["a","b","c","d","e","f","g"];function I0(e,t,n){en(t)||(t=[t]);var o=t.length;if(!o)return"";for(var a=t[0].$vars||[],u=0;u<a.length;u++){var l=uu[u];e=e.replace(A0(l),A0(l,0))}for(var f=0;f<o;f++)for(var m=0;m<a.length;m++){var v=t[f][a[m]];e=e.replace(A0(uu[m],f),n?Pa(v):v)}return e}function id(e,t,n){return le(t,function(o,a){e=e.replace("{"+a+"}",n?Pa(o):o)}),e}function dv(e,t){var n=(e=Gn(e)?{color:e,extraCssText:t}:e||{}).color,a=(t=e.extraCssText,e.renderMode||"html"),u=e.markerId||"X";return n?"html"===a?"subItem"===e.type?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+Pa(n)+";"+(t||"")+'"></span>':'<span style="display:inline-block;margin-right:5px;border-radius:10px;width:10px;height:10px;background-color:'+Pa(n)+";"+(t||"")+'"></span>':{renderMode:a,content:"{marker"+u+"|}  ",style:{color:n}}:""}function fv(e,t){return"0000".substr(0,t-(e+="").length)+e}function Qf(e,t,n){"week"!==e&&"month"!==e&&"quarter"!==e&&"half-year"!==e&&"year"!==e||(e="MM-dd\nyyyy");var o=Cf(t),a=n?"UTC":"",u=o["get"+a+"FullYear"](),l=o["get"+a+"Month"]()+1,f=o["get"+a+"Date"](),m=o["get"+a+"Hours"](),v=o["get"+a+"Minutes"](),x=o["get"+a+"Seconds"](),C=o["get"+a+"Milliseconds"]();return e.replace("MM",fv(l,2)).replace("M",l).replace("yyyy",u).replace("yy",u%100).replace("dd",fv(f,2)).replace("d",f).replace("hh",fv(m,2)).replace("h",m).replace("mm",fv(v,2)).replace("m",v).replace("ss",fv(x,2)).replace("s",x).replace("SSS",fv(C,3))}function eh(e){return e&&e.charAt(0).toUpperCase()+e.substr(1)}var zg=zu;function Km(e,t){if("_blank"===t||"blank"===t){var n=window.open();n.opener=null,n.location=e}else window.open(e,t)}var t1=(Object.freeze||Object)({addCommas:Ac,toCamelCase:Zm,normalizeCssArray:Uh,encodeHTML:Pa,formatTpl:I0,formatTplSimple:id,getTooltipMarker:dv,formatTime:Qf,capitalFirst:eh,truncateText:zg,getTextBoundingRect:function(e){return bl(e.text,e.font,e.textAlign,e.textVerticalAlign,e.textPadding,e.textLineHeight,e.rich,e.truncate)},getTextRect:function(e,t,n,o,a,u,l,f){return bl(e,t,n,o,a,f,u,l)},windowOpen:Km}),Qs=le,fb=["left","right","top","bottom","width","height"],ad=[["width","left","right"],["height","top","bottom"]];function O0(e,t,n,o,a){var u=0,l=0;null==o&&(o=1/0),null==a&&(a=1/0);var f=0;t.eachChild(function(m,v){var x,C,k=m.position,M=m.getBoundingRect(),E=t.childAt(v+1),V=E&&E.getBoundingRect();if("horizontal"===e){var N=M.width+(V?-V.x+M.x:0);f=o<(x=u+N)||m.newline?(u=0,x=N,l+=f+n,M.height):Math.max(f,M.height)}else{var G=M.height+(V?-V.y+M.y:0);f=a<(C=l+G)||m.newline?(u+=f+n,l=0,C=G,M.width):Math.max(f,M.width)}m.newline||(k[0]=u,k[1]=l,"horizontal"===e?u=x+n:l=C+n)})}var Ud=O0;function si(e,t,n){n=Uh(n||0);var o=t.width,a=t.height,u=nr(e.left,o),l=nr(e.top,a),f=nr(e.right,o),m=nr(e.bottom,a),v=nr(e.width,o),x=nr(e.height,a),C=n[2]+n[0],k=n[1]+n[3],M=e.aspect;switch(isNaN(v)&&(v=o-f-k-u),isNaN(x)&&(x=a-m-C-l),null!=M&&(isNaN(v)&&isNaN(x)&&(o/a<M?v=.8*o:x=.8*a),isNaN(v)&&(v=M*x),isNaN(x)&&(x=v/M)),isNaN(u)&&(u=o-f-v-k),isNaN(l)&&(l=a-m-x-C),e.left||e.right){case"center":u=o/2-v/2-n[3];break;case"right":u=o-v-k}switch(e.top||e.bottom){case"middle":case"center":l=a/2-x/2-n[0];break;case"bottom":l=a-x-C}u=u||0,l=l||0,isNaN(v)&&(v=o-k-u-(f||0)),isNaN(x)&&(x=a-C-l-(m||0));var E=new ii(u+n[3],l+n[0],v,x);return E.margin=n,E}function hb(e,t,n,o,a){var u=!a||!a.hv||a.hv[0],l=!a||!a.hv||a.hv[1],f=a&&a.boundingMode||"all";if(u||l){var m;if("raw"===f)m="group"===e.type?new ii(0,0,+t.width||0,+t.height||0):e.getBoundingRect();else if(m=e.getBoundingRect(),e.needLocalTransform()){var v=e.getLocalTransform();(m=m.clone()).applyTransform(v)}t=si(Ee({width:m.width,height:m.height},t),n,o);var x=e.position,C=u?t.x-m.x:0,k=l?t.y-m.y:0;e.attr("position","raw"===f?[C,k]:[x[0]+C,x[1]+k])}}function Ic(e,t,n){ln(n)||(n={});var o=n.ignoreSize;en(o)||(o=[o,o]);var a=l(ad[0],0),u=l(ad[1],1);function l(x,C){var k={},M=0,E={},V=0;if(Qs(x,function(te){E[te]=e[te]}),Qs(x,function(te){f(t,te)&&(k[te]=E[te]=t[te]),m(k,te)&&M++,m(E,te)&&V++}),o[C])return m(t,x[1])?E[x[2]]=null:m(t,x[2])&&(E[x[1]]=null),E;if(2!==V&&M){if(2<=M)return k;for(var N=0;N<x.length;N++){var G=x[N];if(!f(k,G)&&f(e,G)){k[G]=e[G];break}}return k}return E}function f(x,C){return x.hasOwnProperty(C)}function m(x,C){return null!=x[C]&&"auto"!==x[C]}function v(x,C,k){Qs(x,function(M){C[M]=k[M]})}v(ad[0],e,a),v(ad[1],e,u)}function Fg(e){return W_({},e)}function W_(e,t){return t&&e&&Qs(fb,function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e}pn(O0,"vertical"),pn(O0,"horizontal");var n1,hv,$m,E0=_i(),ci=ei.extend({type:"component",id:"",name:"",mainType:"",subType:"",componentIndex:0,defaultOption:null,ecModel:null,dependentModels:[],uid:null,layoutMode:null,$constructor:function(e,t,n,o){ei.call(this,e,t,n,o),this.uid=Ym("ec_cpt_model")},init:function(e,t,n,o){this.mergeDefaultAndTheme(e,n)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,o=n?Fg(e):{};xe(e,t.getTheme().get(this.mainType)),xe(e,this.getDefaultOption()),n&&Ic(e,o,n)},mergeOption:function(e,t){xe(this.option,e,!0);var n=this.layoutMode;n&&Ic(this.option,e,n)},optionUpdated:function(e,t){},getDefaultOption:function(){var e=E0(this);if(!e.defaultOption){for(var t=[],n=this.constructor;n;){var o=n.prototype.defaultOption;o&&t.push(o),n=n.superClass}for(var a={},u=t.length-1;0<=u;u--)a=xe(a,t[u],!0);e.defaultOption=a}return e.defaultOption},getReferringComponents:function(e){return this.ecModel.queryComponents({mainType:e,index:this.get(e+"Index",!0),id:this.get(e+"Id",!0)})}});function Vg(e,t){return e[t]||(e[t]={predecessor:[],successor:[]}),e[t]}Zs(ci,{registerWhenExtend:!0}),hv={},(n1=ci).registerSubTypeDefaulter=function(e,t){e=Od(e),hv[e.main]=t},n1.determineSubType=function(e,t){var n=t.type;if(!n){var o=Od(e).main;n1.hasSubTypes(e)&&hv[o]&&(n=hv[o](t))}return n},$m=function(e){var t=[];return le(ci.getClassesByMainType(e),function(n){t=t.concat(n.prototype.dependencies||[])}),t=Ge(t,function(n){return Od(n).main}),"dataset"!==e&&$e(t,"dataset")<=0&&t.unshift("dataset"),t},ci.topologicalTravel=function(e,t,n,o){if(e.length){var a=(E={},V=[],le(M=t,function(N){var J,me,ge,G=Vg(E,N),te=(J=G.originalDeps=$m(N),me=M,ge=[],le(J,function(pe){0<=$e(me,pe)&&ge.push(pe)}),ge);G.entryCount=te.length,0===G.entryCount&&V.push(N),le(te,function(J){$e(G.predecessor,J)<0&&G.predecessor.push(J);var me=Vg(E,J);$e(me.successor,J)<0&&me.successor.push(N)})}),{graph:E,noEntryList:V}),u=a.graph,l=a.noEntryList,f={};for(le(e,function(M){f[M]=!0});l.length;){var m=l.pop(),v=u[m],x=!!f[m];x&&(n.call(o,m,v.originalDeps.slice()),delete f[m]),le(v.successor,x?k:C)}le(f,function(){throw new Error("Circle dependency may exists")})}var M,E,V;function C(M){u[M].entryCount--,0===u[M].entryCount&&l.push(M)}function k(M){f[M]=!0,C(M)}},de(ci,{getBoxLayoutParams:function(){return{left:this.get("left"),top:this.get("top"),right:this.get("right"),bottom:this.get("bottom"),width:this.get("width"),height:this.get("height")}}});var gv="";"undefined"!=typeof navigator&&(gv=navigator.platform||"");var gb={color:["#c23531","#2f4554","#61a0a8","#d48265","#91c7ae","#749f83","#ca8622","#bda29a","#6e7074","#546570","#c4ccd3"],gradientColor:["#f6efa6","#d88273","#bf444c"],textStyle:{fontFamily:gv.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,animation:"auto",animationDuration:1e3,animationDurationUpdate:300,animationEasing:"exponentialOut",animationEasingUpdate:"cubicOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},P0=_i(),Mu={clearColorPalette:function(){P0(this).colorIdx=0,P0(this).colorNameMap={}},getColorFromPalette:function(e,t,n){var o=P0(t=t||this),a=o.colorIdx||0,u=o.colorNameMap=o.colorNameMap||{};if(u.hasOwnProperty(e))return u[e];var l=Ls(this.get("color",!0)),f=this.get("colorLayer",!0),m=null!=n&&f?function(x,C){for(var k=x.length,M=0;M<k;M++)if(x[M].length>C)return x[M];return x[k-1]}(f,n):l;if((m=m||l)&&m.length){var v=m[a];return e&&(u[e]=v),o.colorIdx=(a+1)%m.length,v}}},Hg="original",kf="arrayRows",qh="objectRows",Tf="keyedColumns",Jm="unknown",sd="typedArray";function Pl(e){this.fromDataset=e.fromDataset,this.data=e.data||(e.sourceFormat===Tf?{}:[]),this.sourceFormat=e.sourceFormat||Jm,this.seriesLayoutBy=e.seriesLayoutBy||"column",this.dimensionsDefine=e.dimensionsDefine,this.encodeDefine=e.encodeDefine&&Gt(e.encodeDefine),this.startIndex=e.startIndex||0,this.dimensionsDetectCount=e.dimensionsDetectCount}Pl.seriesDataToSource=function(e){return new Pl({data:e,sourceFormat:to(e)?sd:Hg,fromDataset:!1})},Ed(Pl);var Yh=_i();function mv(e){var t=e.option,n=t.data,o=to(n)?sd:Hg,a=!1,u=t.seriesLayoutBy,l=t.sourceHeader,f=t.dimensions,m=ns(e);if(m){var v=m.option;n=v.source,o=Yh(m).sourceFormat,a=!0,u=u||v.seriesLayoutBy,null==l&&(l=v.sourceHeader),f=f||v.dimensions}var x=function(C,k,M,E,V){if(!C)return{dimensionsDefine:r1(V)};var N,G;if(k===kf)"auto"===E||null==E?mb(function(J){null!=J&&"-"!==J&&(Gn(J)?null==G&&(G=1):G=0)},M,C,10):G=E?1:0,V||1!==G||(V=[],mb(function(J,me){V[me]=null!=J?J:""},M,C)),N=V?V.length:"row"===M?C.length:C[0]?C[0].length:null;else if(k===qh)V=V||function(J){for(var me,ge=0;ge<J.length&&!(me=J[ge++]););if(me){var pe=[];return le(me,function(_e,Me){pe.push(Me)}),pe}}(C);else if(k===Tf)V||(V=[],le(C,function(J,me){V.push(me)}));else if(k===Hg){var te=Gf(C[0]);N=en(te)&&te.length||1}return{startIndex:G,dimensionsDefine:r1(V),dimensionsDetectCount:N}}(n,o,u,l,f);Yh(e).source=new Pl({data:n,fromDataset:a,seriesLayoutBy:u,sourceFormat:o,dimensionsDefine:x.dimensionsDefine,startIndex:x.startIndex,dimensionsDetectCount:x.dimensionsDetectCount,encodeDefine:t.encode})}function r1(e){if(e){var t=Gt();return Ge(e,function(n,o){if(null==(n=Ne({},ln(n)?n:{name:n})).name)return n;n.name+="",null==n.displayName&&(n.displayName=n.name);var a=t.get(n.name);return a?n.name+="-"+a.count++:t.set(n.name,{count:1}),n})}}function mb(e,t,n,o){if(null==o&&(o=1/0),"row"===t)for(var a=0;a<n.length&&a<o;a++)e(n[a]?n[a][0]:null,a);else{var u=n[0]||[];for(a=0;a<u.length&&a<o;a++)e(u[a],a)}}function Oc(e,t,n){var o={},a=ns(t);if(!a||!e)return o;var u,l,f=[],m=[],x=Yh(t.ecModel).datasetMap,C=a.uid+"_"+n.seriesLayoutBy;le(e=e.slice(),function(V,N){ln(V)||(e[N]={name:V}),"ordinal"===V.type&&null==u&&(l=E(e[u=N])),o[V.name]=[]});var k=x.get(C)||x.set(C,{categoryWayDim:l,valueWayDim:0});function M(V,N,G){for(var te=0;te<G;te++)V.push(N+te)}function E(V){var N=V.dimsDef;return N?N.length:1}return le(e,function(V,N){var G=V.name,te=E(V);if(null==u){var J=k.valueWayDim;M(o[G],J,te),M(m,J,te),k.valueWayDim+=te}else u===N?(M(o[G],0,te),M(f,0,te)):(M(o[G],J=k.categoryWayDim,te),M(m,J,te),k.categoryWayDim+=te)}),f.length&&(o.itemName=f),m.length&&(o.seriesName=m),o}function Gg(e,t,n){var o={};if(!ns(e))return o;var a,u=t.sourceFormat,l=t.dimensionsDefine;u!==qh&&u!==Tf||le(l,function(v,x){"name"===(ln(v)?v.name:v)&&(a=x)});var f=function(){for(var v={},x={},C=[],k=0,M=Math.min(5,n);k<M;k++){var E=Ug(t.data,u,t.seriesLayoutBy,l,t.startIndex,k);C.push(E);var V=3===E;if(V&&null==v.v&&k!==a&&(v.v=k),null!=v.n&&v.n!==v.v&&(V||3!==C[v.n])||(v.n=k),N(v)&&3!==C[v.n])return v;V||(2===E&&null==x.v&&k!==a&&(x.v=k),null!=x.n&&x.n!==x.v||(x.n=k))}function N(G){return null!=G.v&&null!=G.n}return N(v)?v:N(x)?x:null}();if(f){o.value=f.v;var m=null!=a?a:f.n;o.itemName=[m],o.seriesName=[m]}return o}function ns(e){var t=e.option;if(!t.data)return e.ecModel.getComponent("dataset",t.datasetIndex||0)}function Ug(e,t,n,o,a,u){var l,f,m;if(to(e))return 3;if(o){var v=o[u];ln(v)?(f=v.name,m=v.type):Gn(v)&&(f=v)}if(null!=m)return"ordinal"===m?1:3;if(t===kf)if("row"===n){for(var x=e[u],C=0;C<(x||[]).length&&C<5;C++)if(null!=(l=V(x[a+C])))return l}else for(C=0;C<e.length&&C<5;C++){var k=e[a+C];if(k&&null!=(l=V(k[u])))return l}else if(t===qh){if(!f)return 3;for(C=0;C<e.length&&C<5;C++)if((M=e[C])&&null!=(l=V(M[f])))return l}else if(t===Tf){if(!f||!(x=e[f])||to(x))return 3;for(C=0;C<x.length&&C<5;C++)if(null!=(l=V(x[C])))return l}else if(t===Hg)for(C=0;C<e.length&&C<5;C++){var M,E=Gf(M=e[C]);if(!en(E))return 3;if(null!=(l=V(E[u])))return l}function V(N){var G=Gn(N);return null!=N&&isFinite(N)&&""!==N?G?2:3:G&&"-"!==N?1:void 0}return 3}var ja="\0_ec_inner",pv=ei.extend({init:function(e,t,n,o){n=n||{},this.option=null,this._theme=new ei(n),this._optionManager=o},setOption:function(e,t){Qi(!(ja in e),"please use chart.getOption()"),this._optionManager.setOption(e,t),this.resetOption(null)},resetOption:function(e){var t=!1,n=this._optionManager;if(!e||"recreate"===e){var o=n.mountOption("recreate"===e);this.option&&"recreate"!==e?(this.restoreData(),this.mergeOption(o)):function(l){var f,v;this.option={},this.option[ja]=1,this._componentsMap=Gt({series:[]}),v=(f=l).color&&!f.colorLayer,le(this._theme.option,function(x,C){"colorLayer"===C&&v||ci.hasClass(C)||("object"==typeof x?f[C]=f[C]?xe(f[C],x,!1):ie(x):null==f[C]&&(f[C]=x))}),xe(l,gb,!1),this.mergeOption(l)}.call(this,o),t=!0}if("timeline"!==e&&"media"!==e||this.restoreData(),!e||"recreate"===e||"timeline"===e){var a=n.getTimelineOption(this);a&&(this.mergeOption(a),t=!0)}if(!e||"recreate"===e||"media"===e){var u=n.getMediaOption(this,this._api);u.length&&le(u,function(l){this.mergeOption(l,t=!0)},this)}return t},mergeOption:function(e){var t=this.option,n=this._componentsMap,o=[];(function(a){Yh(a).datasetMap=Gt()})(this),le(e,function(a,u){null!=a&&(ci.hasClass(u)?u&&o.push(u):t[u]=null==t[u]?ie(a):xe(t[u],a,!0))}),ci.topologicalTravel(o,ci.getAllClassMainTypes(),function(a,u){var l=Ls(e[a]),f=Gx(n.get(a),l);v0(f),le(f,function(v,x){var M,E,C=v.option;ln(C)&&(v.keyInfo.mainType=a,v.keyInfo.subType=(E=v.exist,(M=C).type?M.type:E?E.subType:ci.determineSubType(a,M)))});var m=function(v,x){en(x)||(x=x?[x]:[]);var C={};return le(x,function(k){C[k]=(v.get(k)||[]).slice()}),C}(n,u);t[a]=[],n.set(a,[]),le(f,function(v,x){var C=v.exist,k=v.option;if(Qi(ln(k)||C,"Empty component definition"),k){var M=ci.getClass(a,v.keyInfo.subType,!0);if(C&&C.constructor===M)C.name=v.keyInfo.name,C.mergeOption(k,this),C.optionUpdated(k,!1);else{var E=Ne({dependentModels:m,componentIndex:x},v.keyInfo);Ne(C=new M(k,this,this,E),E),C.init(k,this,this,E),C.optionUpdated(null,!0)}}else C.mergeOption({},this),C.optionUpdated({},!1);n.get(a)[x]=C,t[a][x]=C.option},this),"series"===a&&N0(this,n.get("series"))},this),this._seriesIndicesMap=Gt(this._seriesIndices=this._seriesIndices||[])},getOption:function(){var e=ie(this.option);return le(e,function(t,n){if(ci.hasClass(n)){for(var o=(t=Ls(t)).length-1;0<=o;o--)Zp(t[o])&&t.splice(o,1);e[n]=t}}),delete e[ja],e},getTheme:function(){return this._theme},getComponent:function(e,t){var n=this._componentsMap.get(e);if(n)return n[t||0]},queryComponents:function(e){var t=e.mainType;if(!t)return[];var n,o=e.index,a=e.id,u=e.name,l=this._componentsMap.get(t);if(!l||!l.length)return[];if(null!=o)en(o)||(o=[o]),n=ht(Ge(o,function(v){return l[v]}),function(v){return!!v});else if(null!=a){var f=en(a);n=ht(l,function(v){return f&&0<=$e(a,v.id)||!f&&v.id===a})}else if(null!=u){var m=en(u);n=ht(l,function(v){return m&&0<=$e(u,v.name)||!m&&v.name===u})}else n=l.slice();return Qm(n,e)},findComponents:function(e){var t,n,o,a,u,f=e.mainType,m=(n=f+"Index",o=f+"Id",a=f+"Name",!(t=e.query)||null==t[n]&&null==t[o]&&null==t[a]?null:{mainType:f,index:t[n],id:t[o],name:t[a]});return u=Qm(m?this.queryComponents(m):this._componentsMap.get(f),e),e.filter?ht(u,e.filter):u},eachComponent:function(e,t,n){var o=this._componentsMap;"function"==typeof e?(n=t,t=e,o.each(function(a,u){le(a,function(l,f){t.call(n,u,l,f)})})):Gn(e)?le(o.get(e),t,n):ln(e)&&le(this.findComponents(e),t,n)},getSeriesByName:function(e){return ht(this._componentsMap.get("series"),function(t){return t.name===e})},getSeriesByIndex:function(e){return this._componentsMap.get("series")[e]},getSeriesByType:function(e){return ht(this._componentsMap.get("series"),function(t){return t.subType===e})},getSeries:function(){return this._componentsMap.get("series").slice()},getSeriesCount:function(){return this._componentsMap.get("series").length},eachSeries:function(e,t){le(this._seriesIndices,function(n){var o=this._componentsMap.get("series")[n];e.call(t,o,n)},this)},eachRawSeries:function(e,t){le(this._componentsMap.get("series"),e,t)},eachSeriesByType:function(e,t,n){le(this._seriesIndices,function(o){var a=this._componentsMap.get("series")[o];a.subType===e&&t.call(n,a,o)},this)},eachRawSeriesByType:function(e,t,n){return le(this.getSeriesByType(e),t,n)},isSeriesFiltered:function(e){return null==this._seriesIndicesMap.get(e.componentIndex)},getCurrentSeriesIndices:function(){return(this._seriesIndices||[]).slice()},filterSeries:function(e,t){N0(this,ht(this._componentsMap.get("series"),e,t))},restoreData:function(e){var t=this._componentsMap;N0(this,t.get("series"));var n=[];t.each(function(o,a){n.push(a)}),ci.topologicalTravel(n,ci.getAllClassMainTypes(),function(o,a){le(t.get(o),function(u){"series"===o&&function(l,f){if(f){var m=f.seiresIndex,v=f.seriesId,x=f.seriesName;return null!=m&&l.componentIndex!==m||null!=v&&l.id!==v||null!=x&&l.name!==x}}(u,e)||u.restoreData()})})}});function N0(e,t){e._seriesIndicesMap=Gt(e._seriesIndices=Ge(t,function(n){return n.componentIndex})||[])}function Qm(e,t){return t.hasOwnProperty("subType")?ht(e,function(n){return n.subType===t.subType}):e}de(pv,Mu);var Mf=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isDisposed","on","off","getDataURL","getConnectedDataURL","getModel","getOption","getViewOfComponentModel","getViewOfSeriesModel"];function R0(e){le(Mf,function(t){this[t]=Rt(e[t],e)},this)}var vv={};function lu(){this._coordinateSystems=[]}lu.prototype={constructor:lu,create:function(e,t){var n=[];le(vv,function(o,a){var u=o.create(e,t);n=n.concat(u||[])}),this._coordinateSystems=n},update:function(e,t){le(this._coordinateSystems,function(n){n.update&&n.update(e,t)})},getCoordinateSystems:function(){return this._coordinateSystems.slice()}},lu.register=function(e,t){vv[e]=t},lu.get=function(e){return vv[e]};var L0=le,th=ie,B0=Ge,jd=xe,Bo=/^(min|max)?(.+)$/;function ca(e){this._api=e,this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[]}function o1(e,t,n){var o={width:t,height:n,aspectratio:t/n},a=!0;return le(e,function(u,l){var x,C,k,f=l.match(Bo);if(f&&f[1]&&f[2]){var m=f[1],v=f[2].toLowerCase();x=o[v],C=u,!("min"===(k=m)?C<=x:"max"===k?x<=C:x===C)&&(a=!1)}}),a}ca.prototype={constructor:ca,setOption:function(e,t){e&&le(Ls(e.series),function(a){a&&a.data&&to(a.data)&&Yi(a.data)}),e=th(e);var n=this._optionBackup,o=function(a,u,l){var f,m,v=[],x=[],C=a.timeline;return a.baseOption&&(m=a.baseOption),(C||a.options)&&(m=m||{},v=(a.options||[]).slice()),a.media&&(m=m||{},L0(a.media,function(M){M&&M.option&&(M.query?x.push(M):f=f||M)})),(m=m||a).timeline||(m.timeline=C),L0([m].concat(v).concat(Ge(x,function(M){return M.option})),function(M){L0(u,function(E){E(M,l)})}),{baseOption:m,timelineOptions:v,mediaDefault:f,mediaList:x}}.call(this,e,t,!n);this._newBaseOption=o.baseOption,n?(function(a,u){L0(u=u||{},function(l,f){if(null!=l){var m=a[f];if(ci.hasClass(f)){l=Ls(l);var v=Gx(m=Ls(m),l);a[f]=B0(v,function(x){return x.option&&x.exist?jd(x.exist,x.option,!0):x.exist||x.option})}else a[f]=jd(m,l,!0)}})}(n.baseOption,o.baseOption),o.timelineOptions.length&&(n.timelineOptions=o.timelineOptions),o.mediaList.length&&(n.mediaList=o.mediaList),o.mediaDefault&&(n.mediaDefault=o.mediaDefault)):this._optionBackup=o},mountOption:function(e){var t=this._optionBackup;return this._timelineOptions=B0(t.timelineOptions,th),this._mediaList=B0(t.mediaList,th),this._mediaDefault=th(t.mediaDefault),this._currentMediaIndices=[],th(e?t.baseOption:this._newBaseOption)},getTimelineOption:function(e){var t,n=this._timelineOptions;if(n.length){var o=e.getComponent("timeline");o&&(t=th(n[o.getCurrentIndex()],!0))}return t},getMediaOption:function(e){var x,t=this._api.getWidth(),n=this._api.getHeight(),o=this._mediaList,a=this._mediaDefault,u=[],l=[];if(!o.length&&!a)return l;for(var f=0,m=o.length;f<m;f++)o1(o[f].query,t,n)&&u.push(f);return!u.length&&a&&(u=[-1]),u.length&&(x=this._currentMediaIndices,!(u.join(",")===x.join(",")))&&(l=B0(u,function(v){return th(-1===v?a.option:o[v].option)})),this._currentMediaIndices=u,l}};var qd=le,yv=ln,i1=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function a1(e){var t=e&&e.itemStyle;if(t)for(var n=0,o=i1.length;n<o;n++){var a=i1[n],u=t.normal,l=t.emphasis;u&&u[a]&&(e[a]=e[a]||{},e[a].normal?xe(e[a].normal,u[a]):e[a].normal=u[a],u[a]=null),l&&l[a]&&(e[a]=e[a]||{},e[a].emphasis?xe(e[a].emphasis,l[a]):e[a].emphasis=l[a],l[a]=null)}}function Wu(e,t,n){if(e&&e[t]&&(e[t].normal||e[t].emphasis)){var o=e[t].normal,a=e[t].emphasis;o&&(n?(e[t].normal=e[t].emphasis=null,Ee(e[t],o)):e[t]=o),a&&(e.emphasis=e.emphasis||{},e.emphasis[t]=a)}}function bv(e){Wu(e,"itemStyle"),Wu(e,"lineStyle"),Wu(e,"areaStyle"),Wu(e,"label"),Wu(e,"labelLine"),Wu(e,"upperLabel"),Wu(e,"edgeLabel")}function ms(e,t){var n=yv(e)&&e[t],o=yv(n)&&n.textStyle;if(o)for(var a=0,u=ed.length;a<u;a++)o.hasOwnProperty(t=ed[a])&&(n[t]=o[t])}function qa(e){e&&(bv(e),ms(e,"label"),e.emphasis&&ms(e.emphasis,"label"))}function Xa(e){return en(e)?e:e?[e]:[]}function ud(e){return(en(e)?e[0]:e)||{}}function F0(e){le(G_,function(t){t[0]in e&&!(t[1]in e)&&(e[t[1]]=e[t[0]])})}var G_=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],xv=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],ld=function(e,t){(function z0(e,t){qd(Xa(e.series),function(o){yv(o)&&function(a){if(yv(a)){a1(a),bv(a),ms(a,"label"),ms(a,"upperLabel"),ms(a,"edgeLabel"),a.emphasis&&(ms(a.emphasis,"label"),ms(a.emphasis,"upperLabel"),ms(a.emphasis,"edgeLabel")),(l=a.markPoint)&&(a1(l),qa(l)),(f=a.markLine)&&(a1(f),qa(f));var u=a.markArea;u&&qa(u);var l,f,m=a.data;if("graph"===a.type){m=m||a.nodes;var v=a.links||a.edges;if(v&&!to(v))for(var x=0;x<v.length;x++)qa(v[x]);le(a.categories,function(M){bv(M)})}if(m&&!to(m))for(x=0;x<m.length;x++)qa(m[x]);if((l=a.markPoint)&&l.data){var C=l.data;for(x=0;x<C.length;x++)qa(C[x])}if((f=a.markLine)&&f.data){var k=f.data;for(x=0;x<k.length;x++)en(k[x])?(qa(k[x][0]),qa(k[x][1])):qa(k[x])}"gauge"===a.type?(ms(a,"axisLabel"),ms(a,"title"),ms(a,"detail")):"treemap"===a.type?(Wu(a.breadcrumb,"itemStyle"),le(a.levels,function(M){bv(M)})):"tree"===a.type&&bv(a.leaves)}}(o)});var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];t&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),qd(n,function(o){qd(Xa(e[o]),function(a){a&&(ms(a,"axisLabel"),ms(a.axisPointer,"label"))})}),qd(Xa(e.parallel),function(o){var a=o&&o.parallelAxisDefault;ms(a,"axisLabel"),ms(a&&a.axisPointer,"label")}),qd(Xa(e.calendar),function(o){Wu(o,"itemStyle"),ms(o,"dayLabel"),ms(o,"monthLabel"),ms(o,"yearLabel")}),qd(Xa(e.radar),function(o){ms(o,"name")}),qd(Xa(e.geo),function(o){yv(o)&&(qa(o),qd(Xa(o.regions),function(a){qa(a)}))}),qd(Xa(e.timeline),function(o){qa(o),Wu(o,"label"),Wu(o,"itemStyle"),Wu(o,"controlStyle",!0);var a=o.data;en(a)&&le(a,function(u){ln(u)&&(Wu(u,"label"),Wu(u,"itemStyle"))})}),qd(Xa(e.toolbox),function(o){Wu(o,"iconStyle"),qd(o.feature,function(a){Wu(a,"iconStyle")})}),ms(ud(e.axisPointer),"label"),ms(ud(e.tooltip).axisPointer,"label")})(e,t),e.series=Ls(e.series),le(e.series,function(n){if(ln(n)){var o=n.type;if("line"===o)null!=n.clipOverflow&&(n.clip=n.clipOverflow);else if("pie"===o||"gauge"===o)null!=n.clockWise&&(n.clockwise=n.clockWise);else if("gauge"===o){var a=function(u,l){l=l.split(",");for(var f=u,m=0;m<l.length&&null!=(f=f&&f[l[m]]);m++);return f}(n,"pointer.color");null!=a&&function(u,l,f,m){l=l.split(",");for(var v,x=u,C=0;C<l.length-1;C++)null==x[v=l[C]]&&(x[v]={}),x=x[v];null!=x[l[C]]||(x[l[C]]=f)}(n,"itemStyle.color",a)}F0(n)}}),e.dataRange&&(e.visualMap=e.dataRange),le(xv,function(n){var o=e[n];o&&(en(o)||(o=[o]),le(o,function(a){F0(a)}))})};function Zh(e){le(e,function(t,n){var o=[],a=[NaN,NaN],l=t.data,f=t.isStackedByIndex,m=l.map([t.stackResultDimension,t.stackedOverDimension],function(v,x,C){var k,M,E=l.get(t.stackedDimension,C);if(isNaN(E))return a;f?M=l.getRawIndex(C):k=l.get(t.stackedByDimension,C);for(var V=NaN,N=n-1;0<=N;N--){var G=e[N];if(f||(M=G.data.rawIndexOf(G.stackedByDimension,k)),0<=M){var te=G.data.getByRawIndex(G.stackResultDimension,M);if(0<=E&&0<te||E<=0&&te<0){E+=te,V=te;break}}}return o[0]=E,o[1]=V,o});l.hostModel.setData(m),t.data=m})}function ep(e,t){Pl.isInstance(e)||(e=Pl.seriesDataToSource(e)),this._source=e;var n=this._data=e.data,o=e.sourceFormat;o===sd&&(this._offset=0,this._dimSize=t,this._data=n),Ne(this,jg[o===kf?o+"_"+e.seriesLayoutBy:o])}var V0=ep.prototype;V0.pure=!1;var jg={arrayRows_column:{pure:V0.persistent=!0,count:function(){return Math.max(0,this._data.length-this._source.startIndex)},getItem:function(e){return this._data[e+this._source.startIndex]},appendData:cd},arrayRows_row:{pure:!0,count:function(){var e=this._data[0];return e?Math.max(0,e.length-this._source.startIndex):0},getItem:function(e){e+=this._source.startIndex;for(var t=[],n=this._data,o=0;o<n.length;o++){var a=n[o];t.push(a?a[e]:null)}return t},appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},objectRows:{pure:!0,count:H0,getItem:Ao,appendData:cd},keyedColumns:{pure:!0,count:function(){var t=this._data[this._source.dimensionsDefine[0].name];return t?t.length:0},getItem:function(e){for(var t=[],n=this._source.dimensionsDefine,o=0;o<n.length;o++){var a=this._data[n[o].name];t.push(a?a[e]:null)}return t},appendData:function(e){var t=this._data;le(e,function(n,o){for(var a=t[o]||(t[o]=[]),u=0;u<(n||[]).length;u++)a.push(n[u])})}},original:{count:H0,getItem:Ao,appendData:cd},typedArray:{persistent:!(V0.getSource=function(){return this._source}),pure:!0,count:function(){return this._data?this._data.length/this._dimSize:0},getItem:function(e,t){t=t||[];for(var n=this._dimSize*(e-=this._offset),o=0;o<this._dimSize;o++)t[o]=this._data[n+o];return t},appendData:function(e){this._data=e},clean:function(){this._offset+=this.count(),this._data=null}}};function H0(){return this._data.length}function Ao(e){return this._data[e]}function cd(e){for(var t=0;t<e.length;t++)this._data.push(e[t])}var tp={arrayRows:pb,objectRows:function(e,t,n,o){return null!=n?e[o]:e},keyedColumns:pb,original:function(e,t,n,o){var a=Gf(e);return null!=n&&a instanceof Array?a[n]:a},typedArray:pb};function pb(e,t,n,o){return null!=n?e[n]:e}var fo={arrayRows:s1,objectRows:function(e,t,n,o){return np(e[t],this._dimensionInfos[t])},keyedColumns:s1,original:function(e,t,n,o){var a=e&&(null==e.value?e:e.value);return!this._rawData.pure&&function(u){return _g(u)&&!(u instanceof Array)}(e)&&(this.hasItemOption=!0),np(a instanceof Array?a[o]:a,this._dimensionInfos[t])},typedArray:function(e,t,n,o){return e[o]}};function s1(e,t,n,o){return np(e[o],this._dimensionInfos[t])}function np(e,t){var n=t&&t.type;if("ordinal"!==n)return"time"===n&&"number"!=typeof e&&null!=e&&"-"!==e&&(e=+Cf(e)),null==e||""===e?NaN:+e;var o=t&&t.ordinalMeta;return o?o.parseAndCollect(e):e}function Ec(e,t,n){if(e){var o=e.getRawDataItem(t);if(null!=o){var a,u,l=e.getProvider().getSource().sourceFormat,f=e.getDimensionInfo(n);return f&&(a=f.name,u=f.index),tp[l](o,t,u,a)}}}function W0(e,t,n){if(e){var o=e.getProvider().getSource().sourceFormat;if(o===Hg||o===qh){var a=e.getRawDataItem(t);return o!==Hg||ln(a)||(a=null),a?a[n]:void 0}}}var G0=/\{@(.+?)\}/g,Pc={getDataParams:function(e,t){var n=this.getData(t),o=this.getRawValue(e,t),a=n.getRawIndex(e),u=n.getName(e),l=n.getRawDataItem(e),f=n.getItemVisual(e,"color"),m=n.getItemVisual(e,"borderColor"),v=this.ecModel.getComponent("tooltip"),x=Fu(v&&v.get("renderMode")),C=this.mainType,k="series"===C,M=n.userOutput;return{componentType:C,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:k?this.subType:null,seriesIndex:this.seriesIndex,seriesId:k?this.id:null,seriesName:k?this.name:null,name:u,dataIndex:a,data:l,dataType:t,value:o,color:f,borderColor:m,dimensionNames:M?M.dimensionNames:null,encode:M?M.encode:null,marker:dv({color:f,renderMode:x}),$vars:["seriesName","name","value"]}},getFormattedLabel:function(e,t,n,o,a){t=t||"normal";var u=this.getData(n),l=u.getItemModel(e),f=this.getDataParams(e,n);null!=o&&f.value instanceof Array&&(f.value=f.value[o]);var m=l.get("normal"===t?[a||"label","formatter"]:[t,a||"label","formatter"]);return"function"==typeof m?(f.status=t,f.dimensionIndex=o,m(f)):"string"==typeof m?I0(m,f).replace(G0,function(v,x){var C=x.length;return"["===x.charAt(0)&&"]"===x.charAt(C-1)&&(x=+x.slice(1,C-1)),Ec(u,e,x)}):void 0},getRawValue:function(e,t){return Ec(this.getData(t),e)},formatTooltip:function(){}};function ks(e){return new rp(e)}function rp(e){this._reset=(e=e||{}).reset,this._plan=e.plan,this._count=e.count,this._onDirty=e.onDirty,this._dirty=!0}var cu=rp.prototype;cu.perform=function(e){var t,n=this._upstream,o=e&&e.skip;if(this._dirty&&n){var a=this.context;a.data=a.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!o&&(t=this._plan(this.context));var u,l=x(this._modBy),f=this._modDataCount||0,m=x(e&&e.modBy),v=e&&e.modDataCount||0;function x(G){return 1<=G||(G=1),G}l===m&&f===v||(t="reset"),!this._dirty&&"reset"!==t||(this._dirty=!1,u=function(G,te){var J,me;G._dueIndex=G._outputDueEnd=G._dueEnd=0,G._settedOutputEnd=null,!te&&G._reset&&((J=G._reset(G.context))&&J.progress&&(me=J.forceFirstProgress,J=J.progress),en(J)&&!J.length&&(J=null)),G._progress=J,G._modBy=G._modDataCount=null;var ge=G._downstream;return ge&&ge.dirty(),me}(this,o)),this._modBy=m,this._modDataCount=v;var C=e&&e.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var k=this._dueIndex,M=Math.min(null!=C?this._dueIndex+C:1/0,this._dueEnd);if(!o&&(u||k<M)){var E=this._progress;if(en(E))for(var V=0;V<E.length;V++)U_(this,E[V],k,M,m,v);else U_(this,E,k,M,m,v)}this._dueIndex=M,this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:M}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()};var _v,Nl,sl,op,oc,Xd,Rl=Xd={reset:function(e,t,n,o){Nl=e,_v=t,sl=n,op=o,oc=Math.ceil(op/sl),Xd.next=1<sl&&0<op?ip:Kh}};function Kh(){return Nl<_v?Nl++:null}function ip(){var e=Nl%oc*sl+Math.ceil(Nl/oc),t=_v<=Nl?null:e<op?e:Nl;return Nl++,t}function U_(e,t,n,o,a,u){Rl.reset(n,o,a,u),e._callingProgress=t,e._callingProgress({start:n,end:o,count:o-n,next:Rl.next},e.context)}cu.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},cu.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},cu.pipe=function(e){this._downstream===e&&!this._dirty||((this._downstream=e)._upstream=this,e.dirty())},cu.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},cu.getUpstream=function(){return this._upstream},cu.getDownstream=function(){return this._downstream},cu.setOutputEnd=function(e){this._outputDueEnd=this._settedOutputEnd=e};var nh=_i(),Ma=ci.extend({type:"series.__base__",seriesIndex:0,coordinateSystem:null,defaultOption:null,legendVisualProvider:null,visualColorAccessPath:"itemStyle.color",visualBorderColorAccessPath:"itemStyle.borderColor",layoutMode:null,init:function(e,t,n,o){this.seriesIndex=this.componentIndex,this.dataTask=ks({count:vb,reset:Gu}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(e,n),mv(this);var a=this.getInitialData(e,n);wv(a,this),this.dataTask.context.data=a,nh(this).dataBeforeProcessed=a,ap(this)},mergeDefaultAndTheme:function(e,t){var n=this.layoutMode,o=n?Fg(e):{},a=this.subType;ci.hasClass(a)&&(a+="Series"),xe(e,t.getTheme().get(this.subType)),xe(e,this.getDefaultOption()),Nh(e,"label",["show"]),this.fillDataTextStyle(e.data),n&&Ic(e,o,n)},mergeOption:function(e,t){e=xe(this.option,e,!0),this.fillDataTextStyle(e.data);var n=this.layoutMode;n&&Ic(this.option,e,n),mv(this);var o=this.getInitialData(e,t);wv(o,this),this.dataTask.dirty(),this.dataTask.context.data=o,nh(this).dataBeforeProcessed=o,ap(this)},fillDataTextStyle:function(e){if(e&&!to(e))for(var t=["show"],n=0;n<e.length;n++)e[n]&&e[n].label&&Nh(e[n],"label",t)},getInitialData:function(){},appendData:function(e){this.getRawData().appendData(e.data)},getData:function(e){var t=U0(this);if(t){var n=t.context.data;return null==e?n:n.getLinkedData(e)}return nh(this).data},setData:function(e){var t=U0(this);if(t){var n=t.context;n.data!==e&&t.modifyOutputEnd&&t.setOutputEnd(e.count()),n.outputData=e,t!==this.dataTask&&(n.data=e)}nh(this).data=e},getSource:function(){return function(e){return Yh(e).source}(this)},getRawData:function(){return nh(this).dataBeforeProcessed},getBaseAxis:function(){var e=this.coordinateSystem;return e&&e.getBaseAxis&&e.getBaseAxis()},formatTooltip:function(e,t,n,o){var a=this,u="html"===(o=o||"html")?"<br/>":"\n",l="richText"===o,f={},m=0,x=this.getData(),C=x.mapDimension("defaultedTooltip",!0),k=C.length,M=this.getRawValue(e),E=en(M),V=x.getItemVisual(e,"color");ln(V)&&V.colorStops&&(V=(V.colorStops[0]||{}).color),V=V||"transparent";var N=(1<k||E&&!k?function(pe){var _e=Qe(pe,function(ut,lt,vt){var Mt=x.getDimensionInfo(vt);return ut|(Mt&&!1!==Mt.tooltip&&null!=Mt.displayName)},0),Me=[];function We(ut,lt){var vt=x.getDimensionInfo(lt);if(vt&&!1!==vt.otherDims.tooltip){var Mt=vt.type,Pt="sub"+a.seriesIndex+"at"+m,Ct=dv({color:V,type:"subItem",renderMode:o,markerId:Pt}),An=(_e?("string"==typeof Ct?Ct:Ct.content)+Pa(vt.displayName||"-")+": ":"")+Pa("ordinal"===Mt?ut+"":"time"===Mt?t?"":Qf("yyyy/MM/dd hh:mm:ss",ut):Ac(ut));An&&Me.push(An),l&&(f[Pt]=V,++m)}}C.length?le(C,function(ut){We(Ec(x,e,ut),ut)}):le(pe,We);var Ke=_e?l?"\n":"<br/>":"",et=Ke+Me.join(Ke||", ");return{renderMode:o,content:et,style:f}}(M):function v(pe){return{renderMode:o,content:Pa(Ac(pe)),style:f}}(k?Ec(x,e,C[0]):E?M[0]:M)).content,G=a.seriesIndex+"at"+m,te=dv({color:V,type:"item",renderMode:o,markerId:G});f[G]=V,++m;var J=x.getName(e),me=this.name;Bm(this)||(me=""),me=me?Pa(me)+(t?": ":u):"";var ge="string"==typeof te?te:te.content;return{html:t?ge+me+N:me+ge+(J?Pa(J)+": "+N:N),markers:f}},isAnimationEnabled:function(){if(Ze.node)return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),e},restoreData:function(){this.dataTask.dirty()},getColorFromPalette:function(e,t,n){var o=this.ecModel;return Mu.getColorFromPalette.call(this,e,t,n)||o.getColorFromPalette(e,t,n)},coordDimToDataDim:function(e){return this.getRawData().mapDimension(e,!0)},getProgressive:function(){return this.get("progressive")},getProgressiveThreshold:function(){return this.get("progressiveThreshold")},getAxisTooltipData:null,getTooltipPosition:null,pipeTask:null,preventIncremental:null,pipelineContext:null});function ap(e){var t=e.name;Bm(e)||(e.name=function(n){var o=n.getRawData(),a=o.mapDimension("seriesName",!0),u=[];return le(a,function(l){var f=o.getDimensionInfo(l);f.displayName&&u.push(f.displayName)}),u.join(" ")}(e)||t)}function vb(e){return e.model.getRawData().count()}function Gu(e){var t=e.model;return t.setData(t.getRawData().cloneShallow()),yb}function yb(e,t){t.outputData&&e.end>t.outputData.count()&&t.model.getRawData().cloneShallow(t.outputData)}function wv(e,t){le(e.CHANGABLE_METHODS,function(n){e.wrapMethod(n,pn(u1,t))})}function u1(e){var t=U0(e);t&&t.setOutputEnd(this.count())}function U0(e){var t=(e.ecModel||{}).scheduler,n=t&&t.getPipeline(e.uid);if(n){var o=n.currentTask;if(o){var a=o.agentStubMap;a&&(o=a.get(e.uid))}return o}}de(Ma,Pc),de(Ma,Mu);var rh=function(){this.group=new mr,this.uid=Ym("viewComponent")},qg=rh.prototype={constructor:rh,init:function(e,t){},render:function(e,t,n,o){},dispose:function(){},filterForExposedEvent:null};function po(){var e=_i();return function(t){var n=e(t),o=t.pipelineContext,a=n.large,u=n.progressiveRender,l=n.large=o&&o.large,f=n.progressiveRender=o&&o.progressiveRender;return!!(a^l||u^f)&&"reset"}}qg.updateView=qg.updateLayout=qg.updateVisual=function(e,t,n,o){},Zl(rh),Zs(rh,{registerWhenExtend:!0});var $h=_i(),Xg=po();function Hs(){this.group=new mr,this.uid=Ym("viewChart"),this.renderTask=ks({plan:j_,reset:c1}),this.renderTask.context={view:this}}var bb=Hs.prototype={type:"chart",init:function(e,t){},render:function(e,t,n,o){},highlight:function(e,t,n,o){xb(e.getData(),o,"emphasis")},downplay:function(e,t,n,o){xb(e.getData(),o,"normal")},remove:function(e,t){this.group.removeAll()},dispose:function(){},incrementalPrepareRender:null,incrementalRender:null,updateTransform:null,filterForExposedEvent:null};function l1(e,t,n){if(e&&(e.trigger(t,n),e.isGroup&&!Gh(e)))for(var o=0,a=e.childCount();o<a;o++)l1(e.childAt(o),t,n)}function xb(e,t,n){var o=Qa(e,t),a=t&&null!=t.highlightKey?lv(t.highlightKey):null;null!=o?le(Ls(o),function(u){l1(e.getItemGraphicEl(u),n,a)}):e.eachItemGraphicEl(function(u){l1(u,n,a)})}function j_(e){return Xg(e.model)}function c1(e){var t=e.model,n=e.ecModel,o=e.api,a=e.payload,u=t.pipelineContext.progressiveRender,l=e.view,f=a&&$h(a).updateMethod,m=u?"incrementalPrepareRender":f&&l[f]?f:"render";return"render"!==m&&l[m](t,n,o,a),q_[m]}bb.updateView=bb.updateLayout=bb.updateVisual=function(e,t,n,o){this.render(e,t,n,o)},Zl(Hs),Zs(Hs,{registerWhenExtend:!0}),Hs.markUpdateMethod=function(e,t){$h(e).updateMethod=t};var q_={incrementalPrepareRender:{progress:function(e,t){t.view.incrementalRender(e,t.model,t.ecModel,t.api,t.payload)}},render:{forceFirstProgress:!0,progress:function(e,t){t.view.render(t.model,t.ecModel,t.api,t.payload)}}},sp="\0__throttleOriginMethod",er="\0__throttleRate",Yg="\0__throttleType";function Nc(e,t,n){var o,a,u,l,f,m=0,v=0,x=null;function C(){v=(new Date).getTime(),x=null,e.apply(u,l||[])}function k(){o=(new Date).getTime(),u=this,l=arguments;var M=f||t,E=f||n;f=null,a=o-(E?m:v)-M,clearTimeout(x),E?x=setTimeout(C,M):0<=a?C():x=setTimeout(C,-a),m=o}return t=t||0,k.clear=function(){x&&(clearTimeout(x),x=null)},k.debounceNextCall=function(M){f=M},k}function Jh(e,t,n,o){var a=e[t];if(a){var u=a[sp]||a;if(a[er]!==n||a[Yg]!==o){if(null==n||!o)return e[t]=u;(a=e[t]=Nc(u,n,"debounce"===o))[sp]=u,a[Yg]=o,a[er]=n}return a}}function Zg(e,t){var n=e[t];n&&n[sp]&&(e[t]=n[sp])}var Sv={createOnAllSeries:!0,performRawSeries:!0,reset:function(e,t){var n=e.getData(),o=(e.visualColorAccessPath||"itemStyle.color").split("."),a=e.get(o),u=!Ot(a)||a instanceof rl?null:a;a&&!u||(a=e.getColorFromPalette(e.name,null,t.getSeriesCount())),n.setVisual("color",a);var l=(e.visualBorderColorAccessPath||"itemStyle.borderColor").split("."),f=e.get(l);if(n.setVisual("borderColor",f),!t.isSeriesFiltered(e))return u&&n.each(function(m){n.setItemVisual(m,"color",u(e.getDataParams(m)))}),{dataEach:n.hasItemOption?function(m,v){var x=m.getItemModel(v),C=x.get(o,!0),k=x.get(l,!0);null!=C&&m.setItemVisual(v,"color",C),null!=k&&m.setItemVisual(v,"borderColor",k)}:null}}},Dr={legend:{selector:{all:"\u5168\u9009",inverse:"\u53cd\u9009"}},toolbox:{brush:{title:{rect:"\u77e9\u5f62\u9009\u62e9",polygon:"\u5708\u9009",lineX:"\u6a2a\u5411\u9009\u62e9",lineY:"\u7eb5\u5411\u9009\u62e9",keep:"\u4fdd\u6301\u9009\u62e9",clear:"\u6e05\u9664\u9009\u62e9"}},dataView:{title:"\u6570\u636e\u89c6\u56fe",lang:["\u6570\u636e\u89c6\u56fe","\u5173\u95ed","\u5237\u65b0"]},dataZoom:{title:{zoom:"\u533a\u57df\u7f29\u653e",back:"\u533a\u57df\u7f29\u653e\u8fd8\u539f"}},magicType:{title:{line:"\u5207\u6362\u4e3a\u6298\u7ebf\u56fe",bar:"\u5207\u6362\u4e3a\u67f1\u72b6\u56fe",stack:"\u5207\u6362\u4e3a\u5806\u53e0",tiled:"\u5207\u6362\u4e3a\u5e73\u94fa"}},restore:{title:"\u8fd8\u539f"},saveAsImage:{title:"\u4fdd\u5b58\u4e3a\u56fe\u7247",lang:["\u53f3\u952e\u53e6\u5b58\u4e3a\u56fe\u7247"]}},series:{typeNames:{pie:"\u997c\u56fe",bar:"\u67f1\u72b6\u56fe",line:"\u6298\u7ebf\u56fe",scatter:"\u6563\u70b9\u56fe",effectScatter:"\u6d9f\u6f2a\u6563\u70b9\u56fe",radar:"\u96f7\u8fbe\u56fe",tree:"\u6811\u56fe",treemap:"\u77e9\u5f62\u6811\u56fe",boxplot:"\u7bb1\u578b\u56fe",candlestick:"K\u7ebf\u56fe",k:"K\u7ebf\u56fe",heatmap:"\u70ed\u529b\u56fe",map:"\u5730\u56fe",parallel:"\u5e73\u884c\u5750\u6807\u56fe",lines:"\u7ebf\u56fe",graph:"\u5173\u7cfb\u56fe",sankey:"\u6851\u57fa\u56fe",funnel:"\u6f0f\u6597\u56fe",gauge:"\u4eea\u8868\u76d8\u56fe",pictorialBar:"\u8c61\u5f62\u67f1\u56fe",themeRiver:"\u4e3b\u9898\u6cb3\u6d41\u56fe",sunburst:"\u65ed\u65e5\u56fe"}},aria:{general:{withTitle:"\u8fd9\u662f\u4e00\u4e2a\u5173\u4e8e\u201c{title}\u201d\u7684\u56fe\u8868\u3002",withoutTitle:"\u8fd9\u662f\u4e00\u4e2a\u56fe\u8868\uff0c"},series:{single:{prefix:"",withName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\uff0c\u8868\u793a{seriesName}\u3002",withoutName:"\u56fe\u8868\u7c7b\u578b\u662f{seriesType}\u3002"},multiple:{prefix:"\u5b83\u7531{seriesCount}\u4e2a\u56fe\u8868\u7cfb\u5217\u7ec4\u6210\u3002",withName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a\u8868\u793a{seriesName}\u7684{seriesType}\uff0c",withoutName:"\u7b2c{seriesId}\u4e2a\u7cfb\u5217\u662f\u4e00\u4e2a{seriesType}\uff0c",separator:{middle:"\uff1b",end:"\u3002"}}},data:{allData:"\u5176\u6570\u636e\u662f\u2014\u2014",partialData:"\u5176\u4e2d\uff0c\u524d{displayCnt}\u9879\u662f\u2014\u2014",withName:"{name}\u7684\u6570\u636e\u662f{value}",withoutName:"{value}",separator:{middle:"\uff0c",end:""}}}},Kg=Math.PI;function $g(e,t,n,o){this.ecInstance=e,this.api=t,n=this._dataProcessorHandlers=n.slice(),o=this._visualHandlers=o.slice(),this._allHandlers=n.concat(o),this._stageTaskMap=Gt()}var Rc=$g.prototype;function _b(e,t,n,o,a){var u;function l(f,m){return f.setDirty&&(!f.dirtyMap||f.dirtyMap.get(m.__pipeline.id))}a=a||{},le(t,function(f,m){if(!a.visualType||a.visualType===f.visualType){var v=e._stageTaskMap.get(f.uid),x=v.seriesTaskMap,C=v.overallTask;if(C){var k,M=C.agentStubMap;M.each(function(V){l(a,V)&&(V.dirty(),k=!0)}),k&&C.dirty(),Cv(C,o);var E=e.getPerformArgs(C,a.block);M.each(function(V){V.perform(E)}),u|=C.perform(E)}else x&&x.each(function(V,N){l(a,V)&&V.dirty();var G=e.getPerformArgs(V,a.block);G.skip=!f.performRawSeries&&n.isSeriesFiltered(V.context.model),Cv(V,o),u|=V.perform(G)})}}),e.unfinished|=u}Rc.restoreData=function(e,t){e.restoreData(t),this._stageTaskMap.each(function(n){var o=n.overallTask;o&&o.dirty()})},Rc.getPerformArgs=function(e,t){if(e.__pipeline){var n=this._pipelineMap.get(e.__pipeline.id),o=n.context,a=!t&&n.progressiveEnabled&&(!o||o.progressiveRender)&&e.__idxInPipeline>n.blockIndex?n.step:null,u=o&&o.modDataCount;return{step:a,modBy:null!=u?Math.ceil(u/a):null,modDataCount:u}}},Rc.getPipeline=function(e){return this._pipelineMap.get(e)},Rc.updateStreamModes=function(e,t){var n=this._pipelineMap.get(e.uid),o=e.getData().count(),a=n.progressiveEnabled&&t.incrementalPrepareRender&&o>=n.threshold,u=e.get("large")&&o>=e.get("largeThreshold"),l="mod"===e.get("progressiveChunkMode")?o:null;e.pipelineContext=n.context={progressiveRender:a,modDataCount:l,large:u}},Rc.restorePipelines=function(e){var t=this,n=t._pipelineMap=Gt();e.eachSeries(function(o){var a=o.getProgressive(),u=o.uid;n.set(u,{id:u,head:null,tail:null,threshold:o.getProgressiveThreshold(),progressiveEnabled:a&&!(o.preventIncremental&&o.preventIncremental()),blockIndex:-1,step:Math.round(a||700),count:0}),Lc(t,o,o.dataTask)})},Rc.prepareStageTasks=function(){var e=this._stageTaskMap,t=this.ecInstance.getModel(),n=this.api;le(this._allHandlers,function(o){var a=e.get(o.uid)||e.set(o.uid,[]);o.reset&&function(u,l,f,m,v){var x=f.seriesTaskMap||(f.seriesTaskMap=Gt()),C=l.seriesType,k=l.getTargetSeries;function M(V){var N=V.uid,G=x.get(N)||x.set(N,ks({plan:Mv,reset:wb,count:du}));G.context={model:V,ecModel:m,api:v,useClearVisual:l.isVisual&&!l.isLayout,plan:l.plan,reset:l.reset,scheduler:u},Lc(u,V,G)}l.createOnAllSeries?m.eachRawSeries(M):C?m.eachRawSeriesByType(C,M):k&&k(m,v).each(M);var E=u._pipelineMap;x.each(function(V,N){E.get(N)||(V.dispose(),x.removeKey(N))})}(this,o,a,t,n),o.overallReset&&function(u,l,f,m,v){var x=f.overallTask=f.overallTask||ks({reset:j0});x.context={ecModel:m,api:v,overallReset:l.overallReset,scheduler:u};var C=x.agentStubMap=x.agentStubMap||Gt(),k=l.seriesType,M=l.getTargetSeries,E=!0,V=l.modifyOutputEnd;function N(te){var J=te.uid,me=C.get(J);me||(me=C.set(J,ks({reset:kv,onDirty:Tv})),x.dirty()),me.context={model:te,overallProgress:E,modifyOutputEnd:V},me.agent=x,me.__block=E,Lc(u,te,me)}k?m.eachRawSeriesByType(k,N):M?M(m,v).each(N):(E=!1,le(m.getSeries(),N));var G=u._pipelineMap;C.each(function(te,J){G.get(J)||(te.dispose(),x.dirty(),C.removeKey(J))})}(this,o,a,t,n)},this)},Rc.prepareView=function(e,t,n,o){var a=e.renderTask,u=a.context;u.model=t,u.ecModel=n,u.api=o,a.__block=!e.incrementalPrepareRender,Lc(this,t,a)},Rc.performDataProcessorTasks=function(e,t){_b(this,this._dataProcessorHandlers,e,t,{block:!0})},Rc.performVisualTasks=function(e,t,n){_b(this,this._visualHandlers,e,t,n)},Rc.performSeriesTasks=function(e){var t;e.eachSeries(function(n){t|=n.dataTask.perform()}),this.unfinished|=t},Rc.plan=function(){this._pipelineMap.each(function(e){var t=e.tail;do{if(t.__block){e.blockIndex=t.__idxInPipeline;break}t=t.getUpstream()}while(t)})};var Cv=Rc.updatePayload=function(e,t){"remain"!==t&&(e.context.payload=t)};function j0(e){e.overallReset(e.ecModel,e.api,e.payload)}function kv(e,t){return e.overallProgress&&up}function up(){this.agent.dirty(),this.getDownstream().dirty()}function Tv(){this.agent&&this.agent.dirty()}function Mv(e){return e.plan&&e.plan(e.model,e.ecModel,e.api,e.payload)}function wb(e){e.useClearVisual&&e.data.clearAllVisual();var t=e.resetDefines=Ls(e.reset(e.model,e.ecModel,e.api,e.payload));return 1<t.length?Ge(t,function(n,o){return X_(o)}):Dv}var Dv=X_(0);function X_(e){return function(t,n){var o=n.data,a=n.resetDefines[e];if(a&&a.dataEach)for(var u=t.start;u<t.end;u++)a.dataEach(o,u);else a&&a.progress&&a.progress(t,o)}}function du(e){return e.data.count()}function Lc(e,t,n){var a=e._pipelineMap.get(t.uid);a.head||(a.head=n),a.tail&&a.tail.pipe(n),(a.tail=n).__idxInPipeline=a.count++,n.__pipeline=a}$g.wrapStageHandler=function(e,t){return Ot(e)&&(e={overallReset:e,seriesType:function(n){dd=null;try{n(Jg,d1)}catch{}return dd}(e)}),e.uid=Ym("stageHandler"),t&&(e.visualType=t),e};var dd,Jg={},d1={};function oh(e,t){for(var n in t.prototype)e[n]=yn}function q0(){return{axisLine:{lineStyle:{color:fu}},axisTick:{lineStyle:{color:fu}},axisLabel:{textStyle:{color:fu}},splitLine:{lineStyle:{type:"dashed",color:"#aaa"}},splitArea:{areaStyle:{color:fu}}}}oh(Jg,pv),oh(d1,R0),Jg.eachSeriesByType=Jg.eachRawSeriesByType=function(e){dd=e},Jg.eachComponent=function(e){"series"===e.mainType&&e.subType&&(dd=e.subType)};var Av=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],f1={color:Av,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Av]},fu="#eee",h1=["#dd6b66","#759aa0","#e69d87","#8dc1a9","#ea7e53","#eedd78","#73a373","#73b9bc","#7289ab","#91ca8c","#f49f42"],Sb={color:h1,backgroundColor:"#333",tooltip:{axisPointer:{lineStyle:{color:fu},crossStyle:{color:fu},label:{color:"#000"}}},legend:{textStyle:{color:fu}},textStyle:{color:fu},title:{textStyle:{color:fu}},toolbox:{iconStyle:{normal:{borderColor:fu}}},dataZoom:{textStyle:{color:fu}},visualMap:{textStyle:{color:fu}},timeline:{lineStyle:{color:fu},itemStyle:{normal:{color:h1[1]}},label:{normal:{textStyle:{color:fu}}},controlStyle:{normal:{color:fu,borderColor:fu}}},timeAxis:q0(),logAxis:q0(),valueAxis:q0(),categoryAxis:q0(),line:{symbol:"circle"},graph:{color:h1},gauge:{title:{textStyle:{color:fu}}},candlestick:{itemStyle:{normal:{color:"#FD1050",color0:"#0CF49B",borderColor:"#FD1050",borderColor0:"#0CF49B"}}}};Sb.categoryAxis.splitLine.show=!1,ci.extend({type:"dataset",defaultOption:{seriesLayoutBy:"column",sourceHeader:null,dimensions:null,source:null},optionUpdated:function(){!function(e){var t=e.option.source,n=Jm;if(to(t))n=sd;else if(en(t)){0===t.length&&(n=kf);for(var o=0,a=t.length;o<a;o++){var u=t[o];if(null!=u){if(en(u)){n=kf;break}if(ln(u)){n=qh;break}}}}else if(ln(t)){for(var l in t)if(t.hasOwnProperty(l)&&Fe(t[l])){n=Tf;break}}else if(null!=t)throw new Error("Invalid data");Yh(e).sourceFormat=n}(this)}}),rh.extend({type:"dataset"});var Io=so.extend({type:"ellipse",shape:{cx:0,cy:0,rx:0,ry:0},buildPath:function(e,t){var n=t.cx,o=t.cy,a=t.rx,u=t.ry,l=.5522848*a,f=.5522848*u;e.moveTo(n-a,o),e.bezierCurveTo(n-a,o-f,n-l,o-u,n,o-u),e.bezierCurveTo(n+l,o-u,n+a,o-f,n+a,o),e.bezierCurveTo(n+a,o+f,n+l,o+u,n,o+u),e.bezierCurveTo(n-l,o+u,n-a,o+f,n-a,o),e.closePath()}}),Qh=/[\s,]+/;function Cb(e){for(Gn(e)&&(e=(new DOMParser).parseFromString(e,"text/xml")),9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}function fd(){this._defs={},this._root=null,this._isDefine=!1,this._isText=!1}fd.prototype.parse=function(e,t){t=t||{};var n=Cb(e);if(!n)throw new Error("Illegal svg");var o=new mr;this._root=o;var a=n.getAttribute("viewBox")||"",u=parseFloat(n.getAttribute("width")||t.width),l=parseFloat(n.getAttribute("height")||t.height);isNaN(u)&&(u=null),isNaN(l)&&(l=null),hd(n,o,null,!0);for(var f,m,v=n.firstChild;v;)this._parseNode(v,o),v=v.nextSibling;if(a){var x=Mr(a).split(Qh);4<=x.length&&(f={x:parseFloat(x[0]||0),y:parseFloat(x[1]||0),width:parseFloat(x[2]),height:parseFloat(x[3])})}if(f&&null!=u&&null!=l&&(m=Ov(f,u,l),!t.ignoreViewBox)){var C=o;(o=new mr).add(C),C.scale=m.scale.slice(),C.position=m.position.slice()}return t.ignoreRootClip||null==u||null==l||o.setClipPath(new fi({shape:{x:0,y:0,width:u,height:l}})),{root:o,width:u,height:l,viewBoxRect:f,viewBoxTransform:m}},fd.prototype._parseNode=function(e,t){var n,o,a=e.nodeName.toLowerCase();if("defs"===a?this._isDefine=!0:"text"===a&&(this._isText=!0),this._isDefine){if(o=Y0[a]){var u=o.call(this,e),l=e.getAttribute("id");l&&(this._defs[l]=u)}}else(o=X0[a])&&(n=o.call(this,e,t),t.add(n));for(var f=e.firstChild;f;)1===f.nodeType&&this._parseNode(f,n),3===f.nodeType&&this._isText&&this._parseText(f,n),f=f.nextSibling;"defs"===a?this._isDefine=!1:"text"===a&&(this._isText=!1)},fd.prototype._parseText=function(e,t){if(1===e.nodeType){var n=e.getAttribute("dx")||0,o=e.getAttribute("dy")||0;this._textX+=parseFloat(n),this._textY+=parseFloat(o)}var a=new Yo({style:{text:e.textContent,transformText:!0},position:[this._textX||0,this._textY||0]});xr(t,a),hd(e,a,this._defs);var u=a.style.fontSize;u&&u<9&&(a.style.fontSize=9,a.scale=a.scale||[1,1],a.scale[0]*=u/9,a.scale[1]*=u/9);var l=a.getBoundingRect();return this._textX+=l.width,t.add(a),a};var X0={g:function(e,t){var n=new mr;return xr(t,n),hd(e,n,this._defs),n},rect:function(e,t){var n=new fi;return xr(t,n),hd(e,n,this._defs),n.setShape({x:parseFloat(e.getAttribute("x")||0),y:parseFloat(e.getAttribute("y")||0),width:parseFloat(e.getAttribute("width")||0),height:parseFloat(e.getAttribute("height")||0)}),n},circle:function(e,t){var n=new ku;return xr(t,n),hd(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),r:parseFloat(e.getAttribute("r")||0)}),n},line:function(e,t){var n=new $s;return xr(t,n),hd(e,n,this._defs),n.setShape({x1:parseFloat(e.getAttribute("x1")||0),y1:parseFloat(e.getAttribute("y1")||0),x2:parseFloat(e.getAttribute("x2")||0),y2:parseFloat(e.getAttribute("y2")||0)}),n},ellipse:function(e,t){var n=new Io;return xr(t,n),hd(e,n,this._defs),n.setShape({cx:parseFloat(e.getAttribute("cx")||0),cy:parseFloat(e.getAttribute("cy")||0),rx:parseFloat(e.getAttribute("rx")||0),ry:parseFloat(e.getAttribute("ry")||0)}),n},polygon:function(e,t){var n=e.getAttribute("points");n=n&&g1(n);var o=new Vo({shape:{points:n||[]}});return xr(t,o),hd(e,o,this._defs),o},polyline:function(e,t){var n=new so;xr(t,n),hd(e,n,this._defs);var o=e.getAttribute("points");return o=o&&g1(o),new Zo({shape:{points:o||[]}})},image:function(e,t){var n=new xi;return xr(t,n),hd(e,n,this._defs),n.setStyle({image:e.getAttribute("xlink:href"),x:e.getAttribute("x"),y:e.getAttribute("y"),width:e.getAttribute("width"),height:e.getAttribute("height")}),n},text:function(e,t){var n=e.getAttribute("x")||0,o=e.getAttribute("y")||0,a=e.getAttribute("dx")||0,u=e.getAttribute("dy")||0;this._textX=parseFloat(n)+parseFloat(a),this._textY=parseFloat(o)+parseFloat(u);var l=new mr;return xr(t,l),hd(e,l,this._defs),l},tspan:function(e,t){var n=e.getAttribute("x"),o=e.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=o&&(this._textY=parseFloat(o));var a=e.getAttribute("dx")||0,u=e.getAttribute("dy")||0,l=new mr;return xr(t,l),hd(e,l,this._defs),this._textX+=a,this._textY+=u,l},path:function(e,t){var n=Yx(e.getAttribute("d")||"");return xr(t,n),hd(e,n,this._defs),n}},Y0={lineargradient:function(e){var u=new Kf(parseInt(e.getAttribute("x1")||0,10),parseInt(e.getAttribute("y1")||0,10),parseInt(e.getAttribute("x2")||10,10),parseInt(e.getAttribute("y2")||0,10));return function(l,f){for(var m=l.firstChild;m;){if(1===m.nodeType){var v=m.getAttribute("offset");v=0<v.indexOf("%")?parseInt(v,10)/100:v?parseFloat(v):0;var x=m.getAttribute("stop-color")||"#000000";f.addColorStop(v,x)}m=m.nextSibling}}(e,u),u},radialgradient:function(e){}};function xr(e,t){e&&e.__inheritedStyle&&(t.__inheritedStyle||(t.__inheritedStyle={}),Ee(t.__inheritedStyle,e.__inheritedStyle))}function g1(e){for(var t=Mr(e).split(Qh),n=[],o=0;o<t.length;o+=2){var a=parseFloat(t[o]),u=parseFloat(t[o+1]);n.push([a,u])}return n}var ko={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-align":"textAlign","alignment-baseline":"textBaseline"};function hd(e,t,n,o){var a=t.__inheritedStyle||{},u="text"===t.type;if(1===e.nodeType&&(function(C,k){var M=C.getAttribute("transform");if(M){M=M.replace(/,/g," ");var E=null,V=[];M.replace(Iv,function(J,me,ge){V.push(me,ge)});for(var N=V.length-1;0<N;N-=2){var G=V[N],te=V[N-1];switch(E=E||vi(),te){case"translate":G=Mr(G).split(Qh),Xc(E,E,[parseFloat(G[0]),parseFloat(G[1]||0)]);break;case"scale":G=Mr(G).split(Qh),Qr(E,E,[parseFloat(G[0]),parseFloat(G[1]||G[0])]);break;case"rotate":G=Mr(G).split(Qh),Yc(E,E,parseFloat(G[0]));break;case"skew":G=Mr(G).split(Qh),console.warn("Skew transform is not supported yet");break;case"matrix":G=Mr(G).split(Qh),E[0]=parseFloat(G[0]),E[1]=parseFloat(G[1]),E[2]=parseFloat(G[2]),E[3]=parseFloat(G[3]),E[4]=parseFloat(G[4]),E[5]=parseFloat(G[5])}}k.setLocalTransform(E)}}(e,t),Ne(a,function(C){var k=C.getAttribute("style"),M={};if(!k)return M;var E,V={};for(ul.lastIndex=0;null!=(E=ul.exec(k));)V[E[1]]=E[2];for(var N in ko)ko.hasOwnProperty(N)&&null!=V[N]&&(M[ko[N]]=V[N]);return M}(e)),!o))for(var l in ko)if(ko.hasOwnProperty(l)){var f=e.getAttribute(l);null!=f&&(a[ko[l]]=f)}var m=u?"textFill":"fill",v=u?"textStroke":"stroke";t.style=t.style||new Hi;var x=t.style;null!=a.fill&&x.set(m,hu(a.fill,n)),null!=a.stroke&&x.set(v,hu(a.stroke,n)),le(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],function(C){null!=a[C]&&x.set("lineWidth"===C&&u?"textStrokeWidth":C,parseFloat(a[C]))}),a.textBaseline&&"auto"!==a.textBaseline||(a.textBaseline="alphabetic"),"alphabetic"===a.textBaseline&&(a.textBaseline="bottom"),"start"===a.textAlign&&(a.textAlign="left"),"end"===a.textAlign&&(a.textAlign="right"),le(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign","textBaseline"],function(C){null!=a[C]&&x.set(C,a[C])}),a.lineDash&&(t.style.lineDash=Mr(a.lineDash).split(Qh)),x[v]&&"none"!==x[v]&&(t[v]=!0),t.__inheritedStyle=a}var Df=/url\(\s*#(.*?)\)/;function hu(e,t){var n=t&&e&&e.match(Df);return n?t[Mr(n[1])]:e}var Iv=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.e,]*)\)/g,ul=/([^\s:;]+)\s*:\s*([^:;]+)/g;function Ov(e,t,n){var u=Math.min(t/e.width,n/e.height);return{scale:[u,u],position:[-(e.x+e.width/2)*u+t/2,-(e.y+e.height/2)*u+n/2]}}var Ev=Gt(),eg_retrieveMap=function(e){return Ev.get(e)},tg={geoJSON:function(e){var t=e.source;e.geoJSON=Gn(t)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(t):new Function("return ("+t+");")():t},svg:function(e){e.svgXML=Cb(e.source)}},lp=Qi,oa=le,Y_=Ot,Qg=ln,cp=ci.parseClassType,ih={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:2e3,CHART:3e3,POST_CHART_LAYOUT:3500,COMPONENT:4e3,BRUSH:5e3}},Yd="__flagInMainProcess",S="__optionUpdated",A=/^[a-zA-Z0-9_]+$/;function z(e,t){return function(n,o,a){!t&&this._disposed||(n=n&&n.toLowerCase(),wn.prototype[e].call(this,n,o,a))}}function Y(){wn.call(this)}function ae(e,t,n){n=n||{},"string"==typeof t&&(t=oo[t]),this._dom=e;var o=this._zr=Yp(e,{renderer:n.renderer||"canvas",devicePixelRatio:n.devicePixelRatio,width:n.width,height:n.height});this._throttledZrFlush=Nc(Rt(o.flush,o),17),(t=ie(t))&&ld(t,!0),this._theme=t,this._chartsViews=[],this._chartsMap={},this._componentsViews=[],this._componentsMap={},this._coordSysMgr=new lu;var l,f,a=this._api=(f=(l=this)._coordSysMgr,Ne(new R0(l),{getCoordinateSystems:Rt(f.getCoordinateSystems,f),getComponentByElement:function(m){for(;m;){var v=m.__ecComponentInfo;if(null!=v)return l._model.getComponent(v.mainType,v.index);m=m.parent}}}));function u(l,f){return l.__prio-f.__prio}Bf(Nr,u),Bf(En,u),this._scheduler=new $g(this,a,En,Nr),wn.call(this,this._ecEventProcessor=new Dn),this._messageCenter=new Y,this._initEvents(),this.resize=Rt(this.resize,this),this._pendingActions=[],o.animation.on("frame",this._onframe,this),function(l,f){l.on("rendered",function(){f.trigger("rendered"),!l.animation.isFinished()||f[S]||f._scheduler.unfinished||f._pendingActions.length||f.trigger("finished")})}(o,this),Yi(this)}Y.prototype.on=z("on",!0),Y.prototype.off=z("off",!0),Y.prototype.one=z("one",!0),de(Y,wn);var ce=ae.prototype;function ke(e,t,n){if(!this._disposed){var o,a=this._model,u=this._coordSysMgr.getCoordinateSystems();t=Xl(a,t);for(var l=0;l<u.length;l++){var f=u[l];if(f[e]&&null!=(o=f[e](a,t,n)))return o}}}ce._onframe=function(){if(!this._disposed){var e=this._scheduler;if(this[S]){var t=this[S].silent;this[Yd]=!0,Ye(this),Pe.update.call(this),this[Yd]=!1,this[S]=!1,dt.call(this,t),Et.call(this,t)}else if(e.unfinished){var n=1,o=this._model;e.unfinished=!1;do{var u=+new Date;e.performSeriesTasks(o),e.performDataProcessorTasks(o),ft(this,o),e.performVisualTasks(o),_t(this,this._model,0,"remain"),n-=+new Date-u}while(0<n&&e.unfinished);e.unfinished||this._zr.flush()}}},ce.getDom=function(){return this._dom},ce.getZr=function(){return this._zr},ce.setOption=function(e,t,n){if(!this._disposed){var o;if(Qg(t)&&(n=t.lazyUpdate,o=t.silent,t=t.notMerge),this[Yd]=!0,!this._model||t){var a=new ca(this._api),u=this._theme,l=this._model=new pv;l.scheduler=this._scheduler,l.init(null,null,u,a)}this._model.setOption(e,_r),n?(this[S]={silent:o},this[Yd]=!1):(Ye(this),Pe.update.call(this),this._zr.flush(),this[S]=!1,this[Yd]=!1,dt.call(this,o),Et.call(this,o))}},ce.setTheme=function(){console.error("ECharts#setTheme() is DEPRECATED in ECharts 3.0")},ce.getModel=function(){return this._model},ce.getOption=function(){return this._model&&this._model.getOption()},ce.getWidth=function(){return this._zr.getWidth()},ce.getHeight=function(){return this._zr.getHeight()},ce.getDevicePixelRatio=function(){return this._zr.painter.dpr||window.devicePixelRatio||1},ce.getRenderedCanvas=function(e){if(Ze.canvasSupported)return(e=e||{}).pixelRatio=e.pixelRatio||1,e.backgroundColor=e.backgroundColor||this._model.get("backgroundColor"),this._zr.painter.getRenderedCanvas(e)},ce.getSvgDataURL=function(){if(Ze.svgSupported){var e=this._zr;return le(e.storage.getDisplayList(),function(t){t.stopAnimation(!0)}),e.painter.toDataURL()}},ce.getDataURL=function(e){if(!this._disposed){var t=(e=e||{}).excludeComponents,n=this._model,o=[],a=this;oa(t,function(l){n.eachComponent({mainType:l},function(f){var m=a._componentsMap[f.__viewId];m.group.ignore||(o.push(m),m.group.ignore=!0)})});var u="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.getRenderedCanvas(e).toDataURL("image/"+(e&&e.type||"png"));return oa(o,function(l){l.group.ignore=!1}),u}},ce.getConnectedDataURL=function(e){if(!this._disposed&&Ze.canvasSupported){var t="svg"===e.type,n=this.group,o=Math.min,a=Math.max;if(Oo[n]){var u=1/0,l=1/0,f=-1/0,m=-1/0,v=[],x=e&&e.pixelRatio||1;le(Yr,function(N,G){if(N.group===n){var te=t?N.getZr().painter.getSvgDom().innerHTML:N.getRenderedCanvas(ie(e)),J=N.getDom().getBoundingClientRect();u=o(J.left,u),l=o(J.top,l),f=a(J.right,f),m=a(J.bottom,m),v.push({dom:te,left:J.left,top:J.top})}});var C=(f*=x)-(u*=x),k=(m*=x)-(l*=x),M=nt(),E=Yp(M,{renderer:t?"svg":"canvas"});if(E.resize({width:C,height:k}),t){var V="";return oa(v,function(N){V+='<g transform="translate('+(N.left-u)+","+(N.top-l)+')">'+N.dom+"</g>"}),E.painter.getSvgRoot().innerHTML=V,e.connectedBackgroundColor&&E.painter.setBackgroundColor(e.connectedBackgroundColor),E.refreshImmediately(),E.painter.toDataURL()}return e.connectedBackgroundColor&&E.add(new fi({shape:{x:0,y:0,width:C,height:k},style:{fill:e.connectedBackgroundColor}})),oa(v,function(N){var G=new xi({style:{x:N.left*x-u,y:N.top*x-l,image:N.dom}});E.add(G)}),E.refreshImmediately(),M.toDataURL("image/"+(e&&e.type||"png"))}return this.getDataURL(e)}},ce.convertToPixel=pn(ke,"convertToPixel"),ce.convertFromPixel=pn(ke,"convertFromPixel"),ce.containPixel=function(e,t){var n;if(!this._disposed)return le(e=Xl(this._model,e),function(o,a){0<=a.indexOf("Models")&&le(o,function(u){var l=u.coordinateSystem;if(l&&l.containPoint)n|=!!l.containPoint(t);else if("seriesModels"===a){var f=this._chartsMap[u.__viewId];f&&f.containPoint&&(n|=f.containPoint(t,u))}},this)},this),!!n},ce.getVisual=function(e,t){var n=(e=Xl(this._model,e,{defaultMainType:"series"})).seriesModel.getData(),o=e.hasOwnProperty("dataIndexInside")?e.dataIndexInside:e.hasOwnProperty("dataIndex")?n.indexOfRawIndex(e.dataIndex):null;return null!=o?n.getItemVisual(o,t):n.getVisual(t)},ce.getViewOfComponentModel=function(e){return this._componentsMap[e.__viewId]},ce.getViewOfSeriesModel=function(e){return this._chartsMap[e.__viewId]};var Pe={prepareAndUpdate:function(e){Ye(this),Pe.update.call(this,e)},update:function(e){var t=this._model,n=this._api,o=this._zr,a=this._coordSysMgr,u=this._scheduler;if(t){u.restoreData(t,e),u.performSeriesTasks(t),a.create(t,n),u.performDataProcessorTasks(t,e),ft(this,t),a.update(t,n),Ut(t),u.performVisualTasks(t,e),Qt(this,t,n,e);var l=t.get("backgroundColor")||"transparent";if(Ze.canvasSupported)o.setBackgroundColor(l);else{var f=Hl(l);l=Gl(f,"rgb"),0===f[3]&&(l="transparent")}Ft(t,n)}},updateTransform:function(e){var t=this._model,n=this,o=this._api;if(t){var a=[];t.eachComponent(function(l,f){var m=n.getViewOfComponentModel(f);if(m&&m.__alive)if(m.updateTransform){var v=m.updateTransform(f,t,o,e);v&&v.update&&a.push(m)}else a.push(m)});var u=Gt();t.eachSeries(function(l){var f=n._chartsMap[l.__viewId];if(f.updateTransform){var m=f.updateTransform(l,t,o,e);m&&m.update&&u.set(l.uid,1)}else u.set(l.uid,1)}),Ut(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0,dirtyMap:u}),_t(n,t,0,e,u),Ft(t,this._api)}},updateView:function(e){var t=this._model;t&&(Hs.markUpdateMethod(e,"updateView"),Ut(t),this._scheduler.performVisualTasks(t,e,{setDirty:!0}),Qt(this,this._model,this._api,e),Ft(t,this._api))},updateVisual:function(e){Pe.update.call(this,e)},updateLayout:function(e){Pe.update.call(this,e)}};function Ye(e){var t=e._model,n=e._scheduler;n.restorePipelines(t),n.prepareStageTasks(),wt(e,"component",t,n),wt(e,"chart",t,n),n.plan()}function tt(e,t,n,o,a){var u=e._model;if(o){var l={};l[o+"Id"]=n[o+"Id"],l[o+"Index"]=n[o+"Index"],l[o+"Name"]=n[o+"Name"];var f={mainType:o,query:l};a&&(f.subType=a);var m=n.excludeSeriesId;null!=m&&(m=Gt(Ls(m))),u&&u.eachComponent(f,function(x){m&&null!=m.get(x.id)||v(e["series"===o?"_chartsMap":"_componentsMap"][x.__viewId])},e)}else oa(e._componentsViews.concat(e._chartsViews),v);function v(x){x&&x.__alive&&x[t]&&x[t](x.__model,u,e._api,n)}}function ft(e,t){var n=e._chartsMap,o=e._scheduler;t.eachSeries(function(a){o.updateStreamModes(a,n[a.__viewId])})}function mt(e,t){var n=e.type,o=e.escapeConnect,a=rn[n],u=a.actionInfo,l=(u.update||"update").split(":"),f=l.pop();l=null!=l[0]&&cp(l[0]),this[Yd]=!0;var m=[e],v=!1;e.batch&&(v=!0,m=Ge(e.batch,function(M){return(M=Ee(Ne({},M),e)).batch=null,M}));var x,C=[],k="highlight"===n||"downplay"===n;oa(m,function(M){(x=(x=a.action(M,this._model,this._api))||Ne({},M)).type=u.event||x.type,C.push(x),k?tt(this,f,M,"series"):l&&tt(this,f,M,l.main,l.sub)},this),"none"===f||k||l||(this[S]?(Ye(this),Pe.update.call(this,e),this[S]=!1):Pe[f].call(this,e)),x=v?{type:u.event||n,escapeConnect:o,batch:C}:C[0],this[Yd]=!1,t||this._messageCenter.trigger(x.type,x)}function dt(e){for(var t=this._pendingActions;t.length;){var n=t.shift();mt.call(this,n,e)}}function Et(e){e||this.trigger("updated")}function wt(e,t,n,o){for(var a="component"===t,u=a?e._componentsViews:e._chartsViews,l=a?e._componentsMap:e._chartsMap,f=e._zr,m=e._api,v=0;v<u.length;v++)u[v].__alive=!1;function x(k){var M="_ec_"+k.id+"_"+k.type,E=l[M];if(!E){var V=cp(k.type);(E=new(a?rh.getClass(V.main,V.sub):Hs.getClass(V.sub))).init(n,m),l[M]=E,u.push(E),f.add(E.group)}k.__viewId=E.__id=M,E.__alive=!0,E.__model=k,E.group.__ecComponentInfo={mainType:k.mainType,index:k.componentIndex},a||o.prepareView(E,k,n,m)}for(a?n.eachComponent(function(k,M){"series"!==k&&x(M)}):n.eachSeries(x),v=0;v<u.length;){var C=u[v];C.__alive?v++:(a||C.renderTask.dispose(),f.remove(C.group),C.dispose(n,m),u.splice(v,1),delete l[C.__id],C.__id=C.group.__ecComponentInfo=null)}}function Ut(e){e.clearColorPalette(),e.eachSeries(function(t){t.clearColorPalette()})}function Qt(e,t,n,o){(function(a,u,l,f,m){oa(a._componentsViews,function(v){var x=v.__model;v.render(x,u,l,f),Tt(x,v)})})(e,t,n,o),oa(e._chartsViews,function(a){a.__alive=!1}),_t(e,t,0,o),oa(e._chartsViews,function(a){a.__alive||a.remove(t,n)})}function _t(e,t,n,o,a){var u,f,m,x,l=e._scheduler;t.eachSeries(function(f){var m=e._chartsMap[f.__viewId];m.__alive=!0;var C,k,v=m.renderTask;l.updatePayload(v,o),a&&a.get(f.uid)&&v.dirty(),u|=v.perform(l.getPerformArgs(v)),m.group.silent=!!f.get("silent"),Tt(f,m),C=m,k=f.get("blendMode")||null,C.group.traverse(function(M){M.isGroup||M.style.blend!==k&&M.setStyle("blend",k),M.eachPendingDisplayable&&M.eachPendingDisplayable(function(E){E.setStyle("blend",k)})})}),l.unfinished|=u,m=t,x=0,(f=e)._zr.storage.traverse(function(C){x++}),x>m.get("hoverLayerThreshold")&&!Ze.node&&m.eachSeries(function(C){if(!C.preventUsingHoverLayer){var k=f._chartsMap[C.__viewId];k.__alive&&k.group.traverse(function(M){M.useHoverLayer=!0})}}),function(e,t){var k,n=t.getModel("aria");if(n.get("show"))if(n.get("description"))e.setAttribute("aria-label",n.get("description"));else{var o=0;t.eachSeries(function(k,M){++o},this);var a,u=n.get("data.maxCount")||10,l=n.get("series.maxCount")||10,f=Math.min(o,l);if(!(o<1)){var m=((k=t.getModel("title").option)&&k.length&&(k=k[0]),k&&k.text);a=m?x(C("general.withTitle"),{title:m}):C("general.withoutTitle");var v=[];a+=x(C(1<o?"series.multiple.prefix":"series.single.prefix"),{seriesCount:o}),t.eachSeries(function(k,M){if(M<f){var E,V=k.get("name"),N="series."+(1<o?"multiple":"single")+".";E=x(E=C(V?N+"withName":N+"withoutName"),{seriesId:k.seriesIndex,seriesName:k.get("name"),seriesType:(pe=k.subType,Dr.series.typeNames[pe]||"\u81ea\u5b9a\u4e49\u56fe")});var G=k.getData();(window.data=G).count()>u?E+=x(C("data.partialData"),{displayCnt:u}):E+=C("data.allData");for(var te=[],J=0;J<G.count();J++)if(J<u){var me=G.getName(J),ge=Ec(G,J);te.push(x(C(me?"data.withName":"data.withoutName"),{name:me,value:ge}))}E+=te.join(C("data.separator.middle"))+C("data.separator.end"),v.push(E)}var pe}),a+=v.join(C("series.multiple.separator.middle"))+C("series.multiple.separator.end"),e.setAttribute("aria-label",a)}}function x(k,M){if("string"!=typeof k)return k;var E=k;return le(M,function(V,N){E=E.replace(new RegExp("\\{\\s*"+N+"\\s*\\}","g"),V)}),E}function C(k){var M=n.get(k);if(null!=M)return M;for(var E=k.split("."),V=Dr.aria,N=0;N<E.length;++N)V=V[E[N]];return V}}(e._zr.dom,t)}function Ft(e,t){oa(Fr,function(n){n(e,t)})}ce.resize=function(e){if(!this._disposed){this._zr.resize(e);var t=this._model;if(this._loadingFX&&this._loadingFX.resize(),t){var n=t.resetOption("media"),o=e&&e.silent;this[Yd]=!0,n&&Ye(this),Pe.update.call(this),this[Yd]=!1,dt.call(this,o),Et.call(this,o)}}},ce.showLoading=function(e,t){if(!this._disposed&&(Qg(e)&&(t=e,e=""),e=e||"default",this.hideLoading(),So[e])){var n=So[e](this._api,t),o=this._zr;this._loadingFX=n,o.add(n)}},ce.hideLoading=function(){this._disposed||(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},ce.makeActionFromEvent=function(e){var t=Ne({},e);return t.type=pr[e.type],t},ce.dispatchAction=function(e,t){this._disposed||(Qg(t)||(t={silent:!!t}),rn[e.type]&&this._model&&(this[Yd]?this._pendingActions.push(e):(mt.call(this,e,t.silent),t.flush?this._zr.flush(!0):!1!==t.flush&&Ze.browser.weChat&&this._throttledZrFlush(),dt.call(this,t.silent),Et.call(this,t.silent))))},ce.appendData=function(e){if(!this._disposed){var t=e.seriesIndex;this.getModel().getSeriesByIndex(t).appendData(e),this._scheduler.unfinished=!0}},ce.on=z("on",!1),ce.off=z("off",!1),ce.one=z("one",!1);var Mn=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Tt(e,t){var n=e.get("z"),o=e.get("zlevel");t.group.traverse(function(a){"group"!==a.type&&(null!=n&&(a.z=n),null!=o&&(a.zlevel=o))})}function Dn(){}ce._initEvents=function(){oa(Mn,function(e){function t(n){var o,a=this.getModel(),u=n.target;if("globalout"===e)o={};else if(u&&null!=u.dataIndex){var l=u.dataModel||a.getSeriesByIndex(u.seriesIndex);o=l&&l.getDataParams(u.dataIndex,u.dataType,u)||{}}else u&&u.eventData&&(o=Ne({},u.eventData));if(o){var f=o.componentType,m=o.componentIndex;"markLine"!==f&&"markPoint"!==f&&"markArea"!==f||(f="series",m=o.seriesIndex);var v=f&&null!=m&&a.getComponent(f,m),x=v&&this["series"===v.mainType?"_chartsMap":"_componentsMap"][v.__viewId];o.event=n,o.type=e,this._ecEventProcessor.eventInfo={targetEl:u,packedEvent:o,model:v,view:x},this.trigger(e,o)}}t.zrEventfulCallAtLast=!0,this._zr.on(e,t,this)},this),oa(pr,function(e,t){this._messageCenter.on(t,function(n){this.trigger(t,n)},this)},this)},ce.isDisposed=function(){return this._disposed},ce.clear=function(){this._disposed||this.setOption({series:[]},!0)},ce.dispose=function(){if(!this._disposed){this._disposed=!0,Yl(this.getDom(),Kn,"");var e=this._api,t=this._model;oa(this._componentsViews,function(n){n.dispose(t,e)}),oa(this._chartsViews,function(n){n.dispose(t,e)}),this._zr.dispose(),delete Yr[this.id]}},de(ae,wn),Dn.prototype={constructor:Dn,normalizeQuery:function(e){var t={},n={},o={};if(Gn(e)){var a=cp(e);t.mainType=a.main||null,t.subType=a.sub||null}else{var u=["Index","Name","Id"],l={name:1,dataIndex:1,dataType:1};le(e,function(f,m){for(var v=!1,x=0;x<u.length;x++){var C=u[x],k=m.lastIndexOf(C);if(0<k&&k===m.length-C.length){var M=m.slice(0,k);"data"!==M&&(t.mainType=M,t[C.toLowerCase()]=f,v=!0)}}l.hasOwnProperty(m)&&(n[m]=f,v=!0),v||(o[m]=f)})}return{cptQuery:t,dataQuery:n,otherQuery:o}},filter:function(e,t,n){var o=this.eventInfo;if(!o)return!0;var a=o.targetEl,u=o.packedEvent,l=o.model,f=o.view;if(!l||!f)return!0;var m=t.cptQuery,v=t.dataQuery;return x(m,l,"mainType")&&x(m,l,"subType")&&x(m,l,"index","componentIndex")&&x(m,l,"name")&&x(m,l,"id")&&x(v,u,"name")&&x(v,u,"dataIndex")&&x(v,u,"dataType")&&(!f.filterForExposedEvent||f.filterForExposedEvent(e,t.otherQuery,a,u));function x(C,k,M,E){return null==C[M]||k[E||M]===C[M]}},afterTrigger:function(){this.eventInfo=null}};var rn={},pr={},En=[],_r=[],Fr=[],Nr=[],oo={},So={},Yr={},Oo={},ti=new Date-0,$i=new Date-0,Kn="_echarts_instance_";function Si(e){Oo[e]=!1}var zo=Si;function qo(e){return Yr[function(t,n){return t.getAttribute?t.getAttribute(n):t[n]}(e,Kn)]}function Da(e,t){oo[e]=t}function da(e){_r.push(e)}function Ii(e,t){Z0(En,e,t,1e3)}function io(e,t,n){"function"==typeof t&&(n=t,t="");var o=Qg(e)?e.type:[e,e={event:t}][0];e.event=(e.event||o).toLowerCase(),t=e.event,lp(A.test(o)&&A.test(t)),rn[o]||(rn[o]={action:n,actionInfo:e}),pr[t]=o}function Bc(e,t){lu.register(e,t)}function fa(e,t){Z0(Nr,e,t,1e3,"layout")}function Gi(e,t){Z0(Nr,e,t,3e3,"visual")}function Z0(e,t,n,o,a){(Y_(t)||Qg(t))&&(n=t,t=o);var u=$g.wrapStageHandler(n,a);return u.__prio=t,u.__raw=n,e.push(u),u}function Zd(e,t){So[e]=t}function eu(e){return ci.extend(e)}function Ts(e){return rh.extend(e)}function dp(e){return Ma.extend(e)}function gu(e){return Hs.extend(e)}function em(e){return e}function Af(e,t,n,o,a){this._old=e,this._new=t,this._oldKeyGetter=n||em,this._newKeyGetter=o||em,this.context=a}function K0(e,t,n,o,a){for(var u=0;u<e.length;u++){var l="_ec_"+a[o](e[u],u),f=t[l];null==f?(n.push(l),t[l]=u):(f.length||(t[l]=f=[f]),f.push(u))}}Gi(2e3,Sv),da(ld),Ii(900,function(e){var t=Gt();e.eachSeries(function(n){var o=n.get("stack");if(o){var a=t.get(o)||t.set(o,[]),u=n.getData(),l={stackResultDimension:u.getCalculationInfo("stackResultDimension"),stackedOverDimension:u.getCalculationInfo("stackedOverDimension"),stackedDimension:u.getCalculationInfo("stackedDimension"),stackedByDimension:u.getCalculationInfo("stackedByDimension"),isStackedByIndex:u.getCalculationInfo("isStackedByIndex"),data:u,seriesModel:n};if(!l.stackedDimension||!l.isStackedByIndex&&!l.stackedByDimension)return;a.length&&u.setCalculationInfo("stackedOnSeries",a[a.length-1].seriesModel),a.push(l)}}),t.each(Zh)}),Zd("default",function(e,t){Ee(t=t||{},{text:"loading",textColor:"#000",fontSize:"12px",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#c23531",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new mr,o=new fi({style:{fill:t.maskColor},zlevel:t.zlevel,z:1e4});n.add(o);var a=t.fontSize+" sans-serif",u=new fi({style:{fill:"none",text:t.text,font:a,textPosition:"right",textDistance:10,textFill:t.textColor},zlevel:t.zlevel,z:10001});if(n.add(u),t.showSpinner){var l=new x0({shape:{startAngle:-Kg/2,endAngle:-Kg/2+.1,r:t.spinnerRadius},style:{stroke:t.color,lineCap:"round",lineWidth:t.lineWidth},zlevel:t.zlevel,z:10001});l.animateShape(!0).when(1e3,{endAngle:3*Kg/2}).start("circularInOut"),l.animateShape(!0).when(1e3,{startAngle:3*Kg/2}).delay(300).start("circularInOut"),n.add(l)}return n.resize=function(){var f=Cr(t.text,a),m=t.showSpinner?t.spinnerRadius:0,v=(e.getWidth()-2*m-(t.showSpinner&&f?10:0)-f)/2-(t.showSpinner?0:f/2),x=e.getHeight()/2;t.showSpinner&&l.setShape({cx:v,cy:x}),u.setShape({x:v-m,y:x-m,width:2*m,height:2*m}),o.setShape({x:0,y:0,width:e.getWidth(),height:e.getHeight()})},n.resize(),n}),io({type:"highlight",event:"highlight",update:"highlight"},yn),io({type:"downplay",event:"downplay",update:"downplay"},yn),Da("light",f1),Da("dark",Sb),Af.prototype={constructor:Af,add:function(e){return this._add=e,this},update:function(e){return this._update=e,this},remove:function(e){return this._remove=e,this},execute:function(){var e=this._old,t=this._new,n={},o=[],a=[];for(K0(e,{},o,"_oldKeyGetter",this),K0(t,n,a,"_newKeyGetter",this),u=0;u<e.length;u++)null!=(f=n[l=o[u]])?((v=f.length)?(1===v&&(n[l]=null),f=f.shift()):n[l]=null,this._update&&this._update(f,u)):this._remove&&this._remove(u);for(var u=0;u<a.length;u++){var l=a[u];if(n.hasOwnProperty(l)){var f;if(null==(f=n[l]))continue;if(f.length)for(var m=0,v=f.length;m<v;m++)this._add&&this._add(f[m]);else this._add&&this._add(f)}}}};var m1=Gt(["tooltip","label","itemName","itemId","seriesName"]);function kb(e,t){return e.hasOwnProperty(t)||(e[t]=[]),e[t]}function Z_(e){return"category"===e?"ordinal":"time"===e?"time":"float"}function Tb(e){null!=e&&Ne(this,e),this.otherDims={}}var IS=ln,K_="undefined",ui={float:typeof Float64Array==K_?Array:Float64Array,int:typeof Int32Array==K_?Array:Int32Array,ordinal:Array,number:Array,time:Array},OS=typeof Uint32Array==K_?Array:Uint32Array,p1=typeof Int32Array==K_?Array:Int32Array,ES=typeof Uint16Array==K_?Array:Uint16Array;function Mb(e){return 65535<e._rawCount?OS:ES}var Sk=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_rawData","_chunkSize","_chunkCount","_dimValueGetter","_count","_rawCount","_nameDimIdx","_idDimIdx"],Ck=["_extent","_approximateExtent","_rawExtent"];function ah(e,t){le(Sk.concat(t.__wrappedMethods||[]),function(n){t.hasOwnProperty(n)&&(e[n]=t[n])}),e.__wrappedMethods=t.__wrappedMethods,le(Ck,function(n){e[n]=ie(t[n])}),e._calculationInfo=Ne(t._calculationInfo)}var Uu=function(e,t){e=e||["x","y"];for(var n={},o=[],a={},u=0;u<e.length;u++){var l=e[u];Gn(l)?l=new Tb({name:l}):l instanceof Tb||(l=new Tb(l));var f=l.name;l.type=l.type||"float",l.coordDim||(l.coordDim=f,l.coordDimIndex=0),l.otherDims=l.otherDims||{},o.push(f),(n[f]=l).index=u,l.createInvertedIndices&&(a[f]=[])}this.dimensions=o,this._dimensionInfos=n,this.hostModel=t,this._indices=null,this._count=0,this._rawCount=0,this._storage={},this._nameList=[],this._idList=[],this._optionModels=[],this._visual={},this._layout={},this._itemVisuals=[],this.hasItemVisual={},this._itemLayouts=[],this._graphicEls=[],this._chunkSize=1e5,this._chunkCount=0,this._rawExtent={},this._extent={},this._approximateExtent={},this._dimensionsSummary=function(m){var v={},x=v.encode={},C=Gt(),k=[],M=[],E=v.userOutput={dimensionNames:m.dimensions.slice(),encode:{}};le(m.dimensions,function(J){var _e,me=m.getDimensionInfo(J),ge=me.coordDim;if(ge){var pe=me.coordDimIndex;kb(x,ge)[pe]=J,me.isExtraCoord||(C.set(ge,1),!("ordinal"===(_e=me.type)||"time"===_e)&&(k[0]=J),kb(E.encode,ge)[pe]=me.index),me.defaultTooltip&&M.push(J)}m1.each(function(_e,Me){var We=kb(x,Me),Ke=me.otherDims[Me];null!=Ke&&!1!==Ke&&(We[Ke]=me.name)})});var V=[],N={};C.each(function(J,me){var ge=x[me];N[me]=ge[0],V=V.concat(ge)}),v.dataDimsOnCoord=V,v.encodeFirstDimNotExtra=N;var G=x.label;G&&G.length&&(k=G.slice());var te=x.tooltip;return te&&te.length?M=te.slice():M.length||(M=k.slice()),x.defaultedLabel=k,x.defaultedTooltip=M,v}(this),this._invertedIndicesMap=a,this._calculationInfo={},this.userOutput=this._dimensionsSummary.userOutput},ho=Uu.prototype;function PS(e,t,n,o,a){var u=ui[t.type],l=o-1,f=t.name,m=e[f][l];if(m&&m.length<n){for(var v=new u(Math.min(a-l*n,n)),x=0;x<m.length;x++)v[x]=m[x];e[f][l]=v}for(var C=o*n;C<a;C+=n)e[f].push(new u(Math.min(a-C,n)))}function BM(e){var t=e._invertedIndicesMap;le(t,function(n,o){var a=e._dimensionInfos[o].ordinalMeta;if(a){n=t[o]=new p1(a.categories.length);for(var u=0;u<n.length;u++)n[u]=-1;for(u=0;u<e._count;u++)n[e.get(o,u)]=u}})}function zM(e,t,n){var o;if(null!=t){var a=e._chunkSize,u=Math.floor(n/a),f=e.dimensions[t],m=e._storage[f][u];if(m){o=m[n%a];var v=e._dimensionInfos[f].ordinalMeta;v&&v.categories.length&&(o=v.categories[o])}}return o}function tm(e){return e}function Db(e){return e<this._count&&0<=e?this._indices[e]:-1}function v1(e,t){var n=e._idList[t];return null==n&&(n=zM(e,e._idDimIdx,t)),null==n&&(n="e\0\0"+t),n}function Ab(e){return en(e)||(e=[e]),e}function NS(e,t){var n=e.dimensions,o=new Uu(Ge(n,e.getDimensionInfo,e),e.hostModel);ah(o,e);for(var a=o._storage={},u=e._storage,l=0;l<n.length;l++){var f=n[l];u[f]&&(0<=$e(t,f)?(a[f]=$_(u[f]),o._rawExtent[f]=[1/0,-1/0],o._extent[f]=null):a[f]=u[f])}return o}function $_(e){for(var t,n,o=new Array(e.length),a=0;a<e.length;a++)o[a]=(n=void 0,(n=(t=e[a]).constructor)===Array?t.slice():new n(t));return o}function kk(e){e.seriesIndex=this.seriesIndex,e.dataIndex=this.dataIndex,e.dataType=this.dataType}function Tk(e,t,n){Pl.isInstance(t)||(t=Pl.seriesDataToSource(t)),n=n||{},e=(e||[]).slice();for(var o=(n.dimsDef||[]).slice(),a=Gt(),u=Gt(),l=[],f=function(pe,_e,Me,We){var Ke=Math.max(pe.dimensionsDetectCount||1,_e.length,Me.length,We||0);return le(_e,function(et){var ut=et.dimsDef;ut&&(Ke=Math.max(Ke,ut.length))}),Ke}(t,e,o,n.dimCount),m=0;m<f;m++){var v=o[m]=Ne({},ln(o[m])?o[m]:{name:o[m]}),x=v.name,C=l[m]=new Tb;null!=x&&null==a.get(x)&&(C.name=C.displayName=x,a.set(x,m)),null!=v.type&&(C.type=v.type),null!=v.displayName&&(C.displayName=v.displayName)}var k=n.encodeDef;!k&&n.encodeDefaulter&&(k=n.encodeDefaulter(t,f)),(k=Gt(k)).each(function(pe,_e){if(1===(pe=Ls(pe).slice()).length&&!Gn(pe[0])&&pe[0]<0)k.set(_e,!1);else{var Me=k.set(_e,[]);le(pe,function(We,Ke){Gn(We)&&(We=a.get(We)),null!=We&&We<f&&(Me[Ke]=We,E(l[We],_e,Ke))})}});var M=0;function E(pe,_e,Me){null!=m1.get(_e)?pe.otherDims[_e]=Me:(pe.coordDim=_e,pe.coordDimIndex=Me,u.set(_e,!0))}le(e,function(pe,_e){var Me,We,Ke;if(Gn(pe))Me=pe,pe={};else{Me=pe.name;var et=pe.ordinalMeta;pe.ordinalMeta=null,(pe=ie(pe)).ordinalMeta=et,We=pe.dimsDef,Ke=pe.otherDims,pe.name=pe.coordDim=pe.coordDimIndex=pe.dimsDef=pe.otherDims=null}if(!1!==(ut=k.get(Me))){var ut;if(!(ut=Ls(ut)).length)for(var lt=0;lt<(We&&We.length||1);lt++){for(;M<l.length&&null!=l[M].coordDim;)M++;M<l.length&&ut.push(M++)}le(ut,function(vt,Mt){var Pt=l[vt];if(E(Ee(Pt,pe),Me,Mt),null==Pt.name&&We){var Ct=We[Mt];ln(Ct)||(Ct={name:Ct}),Pt.name=Pt.displayName=Ct.name,Pt.defaultTooltip=Ct.defaultTooltip}Ke&&Ee(Pt.otherDims,Ke)})}});var V=n.generateCoord,N=n.generateCoordCount,G=null!=N;N=V?N||1:0;for(var te,me=V||"value",ge=0;ge<f;ge++)null==(C=l[ge]=l[ge]||new Tb).coordDim&&(C.coordDim=RS(me,u,G),C.coordDimIndex=0,(!V||N<=0)&&(C.isExtraCoord=!0),N--),null==C.name&&(C.name=RS(C.coordDim,a)),null==C.type&&(1===Ug((te=t).data,te.sourceFormat,te.seriesLayoutBy,te.dimensionsDefine,te.startIndex,ge)||C.isExtraCoord&&(null!=C.otherDims.itemName||null!=C.otherDims.seriesName))&&(C.type="ordinal");return l}function RS(e,t,n){if(n||null!=t.get(e)){for(var o=0;null!=t.get(e+o);)o++;e+=o}return t.set(e,!0),e}ho.type="list",ho.hasItemOption=!0,ho.getDimension=function(e){return"number"!=typeof e&&(isNaN(e)||this._dimensionInfos.hasOwnProperty(e))||(e=this.dimensions[e]),e},ho.getDimensionInfo=function(e){return this._dimensionInfos[this.getDimension(e)]},ho.getDimensionsOnCoord=function(){return this._dimensionsSummary.dataDimsOnCoord.slice()},ho.mapDimension=function(e,t){var n=this._dimensionsSummary;if(null==t)return n.encodeFirstDimNotExtra[e];var o=n.encode[e];return!0===t?(o||[]).slice():o&&o[t]},ho.initData=function(e,t,n){(Pl.isInstance(e)||Fe(e))&&(e=new ep(e,this.dimensions.length)),this._rawData=e,this._storage={},this._indices=null,this._nameList=t||[],this._idList=[],this._nameRepeatCount={},n||(this.hasItemOption=!1),this.defaultDimValueGetter=fo[this._rawData.getSource().sourceFormat],this._dimValueGetter=n=n||this.defaultDimValueGetter,this._dimValueGetterArrayRows=fo.arrayRows,this._rawExtent={},this._initDataFromProvider(0,e.count()),e.pure&&(this.hasItemOption=!1)},ho.getProvider=function(){return this._rawData},ho.appendData=function(e){var t=this._rawData,n=this.count();t.appendData(e);var o=t.count();t.persistent||(o+=n),this._initDataFromProvider(n,o)},ho.appendValues=function(e,t){for(var n=this._chunkSize,o=this._storage,a=this.dimensions,u=a.length,l=this._rawExtent,f=this.count(),m=f+Math.max(e.length,t?t.length:0),v=this._chunkCount,x=0;x<u;x++)l[G=a[x]]||(l[G]=[1/0,-1/0]),o[G]||(o[G]=[]),PS(o,this._dimensionInfos[G],n,v,m),this._chunkCount=o[G].length;for(var C=new Array(u),k=f;k<m;k++){for(var M=k-f,E=Math.floor(k/n),V=k%n,N=0;N<u;N++){var G=a[N],te=this._dimValueGetterArrayRows(e[M]||C,G,M,N);o[G][E][V]=te;var J=l[G];te<J[0]&&(J[0]=te),te>J[1]&&(J[1]=te)}t&&(this._nameList[k]=t[M])}this._rawCount=this._count=m,this._extent={},BM(this)},ho._initDataFromProvider=function(e,t){if(!(t<=e)){for(var n,o=this._chunkSize,a=this._rawData,u=this._storage,l=this.dimensions,f=l.length,m=this._dimensionInfos,v=this._nameList,x=this._idList,C=this._rawExtent,k=this._nameRepeatCount={},M=this._chunkCount,E=0;E<f;E++){C[ge=l[E]]||(C[ge]=[1/0,-1/0]);var V=m[ge];0===V.otherDims.itemName&&(n=this._nameDimIdx=E),0===V.otherDims.itemId&&(this._idDimIdx=E),u[ge]||(u[ge]=[]),PS(u,V,o,M,t),this._chunkCount=u[ge].length}for(var N=new Array(f),G=e;G<t;G++){N=a.getItem(G,N);for(var te=Math.floor(G/o),J=G%o,me=0;me<f;me++){var ge,pe=u[ge=l[me]][te],_e=this._dimValueGetter(N,ge,G,me);pe[J]=_e;var Me=C[ge];_e<Me[0]&&(Me[0]=_e),_e>Me[1]&&(Me[1]=_e)}if(!a.pure){var We=v[G];if(N&&null==We)if(null!=N.name)v[G]=We=N.name;else if(null!=n){var Ke=l[n],et=u[Ke][te];if(et){We=et[J];var ut=m[Ke].ordinalMeta;ut&&ut.categories.length&&(We=ut.categories[We])}}var lt=null==N?null:N.id;null==lt&&null!=We&&(k[We]=k[We]||0,0<k[lt=We]&&(lt+="__ec__"+k[We]),k[We]++),null!=lt&&(x[G]=lt)}}!a.persistent&&a.clean&&a.clean(),this._rawCount=this._count=t,this._extent={},BM(this)}},ho.count=function(){return this._count},ho.getIndices=function(){var e=this._indices;if(e){var t=e.constructor,n=this._count;if(t===Array){a=new t(n);for(var o=0;o<n;o++)a[o]=e[o]}else a=new t(e.buffer,0,n)}else{var a=new(t=Mb(this))(this.count());for(o=0;o<a.length;o++)a[o]=o}return a},ho.get=function(e,t){if(!(0<=t&&t<this._count))return NaN;var n=this._storage;if(!n[e])return NaN;t=this.getRawIndex(t);var o=Math.floor(t/this._chunkSize);return n[e][o][t%this._chunkSize]},ho.getByRawIndex=function(e,t){if(!(0<=t&&t<this._rawCount))return NaN;var n=this._storage[e];return n?n[Math.floor(t/this._chunkSize)][t%this._chunkSize]:NaN},ho._getFast=function(e,t){var n=Math.floor(t/this._chunkSize);return this._storage[e][n][t%this._chunkSize]},ho.getValues=function(e,t){var n=[];en(e)||(t=e,e=this.dimensions);for(var o=0,a=e.length;o<a;o++)n.push(this.get(e[o],t));return n},ho.hasValue=function(e){for(var t=this._dimensionsSummary.dataDimsOnCoord,n=0,o=t.length;n<o;n++)if(isNaN(this.get(t[n],e)))return!1;return!0},ho.getDataExtent=function(e){e=this.getDimension(e);var n=[1/0,-1/0];if(!this._storage[e])return n;var o,a=this.count();if(!this._indices)return this._rawExtent[e].slice();if(o=this._extent[e])return o.slice();for(var u=(o=n)[0],l=o[1],f=0;f<a;f++){var m=this._getFast(e,this.getRawIndex(f));m<u&&(u=m),l<m&&(l=m)}return this._extent[e]=[u,l]},ho.getApproximateExtent=function(e){return e=this.getDimension(e),this._approximateExtent[e]||this.getDataExtent(e)},ho.setApproximateExtent=function(e,t){t=this.getDimension(t),this._approximateExtent[t]=e.slice()},ho.getCalculationInfo=function(e){return this._calculationInfo[e]},ho.setCalculationInfo=function(e,t){IS(e)?Ne(this._calculationInfo,e):this._calculationInfo[e]=t},ho.getSum=function(e){var t=0;if(this._storage[e])for(var n=0,o=this.count();n<o;n++){var a=this.get(e,n);isNaN(a)||(t+=a)}return t},ho.getMedian=function(e){var t=[];this.each(e,function(a,u){isNaN(a)||t.push(a)});var n=[].concat(t).sort(function(a,u){return a-u}),o=this.count();return 0===o?0:o%2==1?n[(o-1)/2]:(n[o/2]+n[o/2-1])/2},ho.rawIndexOf=function(e,t){var n=(e&&this._invertedIndicesMap[e])[t];return null==n||isNaN(n)?-1:n},ho.indexOfName=function(e){for(var t=0,n=this.count();t<n;t++)if(this.getName(t)===e)return t;return-1},ho.indexOfRawIndex=function(e){if(e>=this._rawCount||e<0)return-1;if(!this._indices)return e;var t=this._indices,n=t[e];if(null!=n&&n<this._count&&n===e)return e;for(var o=0,a=this._count-1;o<=a;){var u=(o+a)/2|0;if(t[u]<e)o=1+u;else{if(!(t[u]>e))return u;a=u-1}}return-1},ho.indicesOfNearest=function(e,t,n){var o=[];if(!this._storage[e])return o;null==n&&(n=1/0);for(var a=1/0,u=-1,l=0,f=0,m=this.count();f<m;f++){var v=t-this.get(e,f),x=Math.abs(v);x<=n&&((x<a||x===a&&0<=v&&u<0)&&(a=x,u=v,l=0),v===u&&(o[l++]=f))}return o.length=l,o},ho.getRawIndex=tm,ho.getRawDataItem=function(e){if(this._rawData.persistent)return this._rawData.getItem(this.getRawIndex(e));for(var t=[],n=0;n<this.dimensions.length;n++)t.push(this.get(this.dimensions[n],e));return t},ho.getName=function(e){var t=this.getRawIndex(e);return this._nameList[t]||zM(this,this._nameDimIdx,t)||""},ho.getId=function(e){return v1(this,this.getRawIndex(e))},ho.each=function(e,t,n,o){if(this._count){"function"==typeof e&&(o=n,n=t,t=e,e=[]),n=n||o||this;for(var a=(e=Ge(Ab(e),this.getDimension,this)).length,u=0;u<this.count();u++)switch(a){case 0:t.call(n,u);break;case 1:t.call(n,this.get(e[0],u),u);break;case 2:t.call(n,this.get(e[0],u),this.get(e[1],u),u);break;default:for(var l=0,f=[];l<a;l++)f[l]=this.get(e[l],u);f[l]=u,t.apply(n,f)}}},ho.filterSelf=function(e,t,n,o){if(this._count){"function"==typeof e&&(o=n,n=t,t=e,e=[]),n=n||o||this,e=Ge(Ab(e),this.getDimension,this);for(var a=this.count(),u=new(Mb(this))(a),l=[],f=e.length,m=0,v=e[0],x=0;x<a;x++){var C,k=this.getRawIndex(x);if(0===f)C=t.call(n,x);else if(1===f){var M=this._getFast(v,k);C=t.call(n,M,x)}else{for(var E=0;E<f;E++)l[E]=this._getFast(v,k);l[E]=x,C=t.apply(n,l)}C&&(u[m++]=k)}return m<a&&(this._indices=u),this._count=m,this._extent={},this.getRawIndex=this._indices?Db:tm,this}},ho.selectRange=function(e){if(this._count){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);var o=t.length;if(o){var a=this.count(),u=new(Mb(this))(a),l=0,f=t[0],m=e[f][0],v=e[f][1],x=!1;if(!this._indices){var C=0;if(1===o){for(var k=this._storage[t[0]],M=0;M<this._chunkCount;M++)for(var E=k[M],V=Math.min(this._count-M*this._chunkSize,this._chunkSize),N=0;N<V;N++)(m<=(ge=E[N])&&ge<=v||isNaN(ge))&&(u[l++]=C),C++;x=!0}else if(2===o){k=this._storage[f];var G=this._storage[t[1]],te=e[t[1]][0],J=e[t[1]][1];for(M=0;M<this._chunkCount;M++){E=k[M];var me=G[M];for(V=Math.min(this._count-M*this._chunkSize,this._chunkSize),N=0;N<V;N++){var ge=E[N],pe=me[N];(m<=ge&&ge<=v||isNaN(ge))&&(te<=pe&&pe<=J||isNaN(pe))&&(u[l++]=C),C++}}x=!0}}if(!x)if(1===o)for(N=0;N<a;N++){var _e=this.getRawIndex(N);(m<=(ge=this._getFast(f,_e))&&ge<=v||isNaN(ge))&&(u[l++]=_e)}else for(N=0;N<a;N++){var Me=!0;for(_e=this.getRawIndex(N),M=0;M<o;M++){var We=t[M];((ge=this._getFast(n,_e))<e[We][0]||ge>e[We][1])&&(Me=!1)}Me&&(u[l++]=this.getRawIndex(N))}return l<a&&(this._indices=u),this._count=l,this._extent={},this.getRawIndex=this._indices?Db:tm,this}}},ho.mapArray=function(e,t,n,o){"function"==typeof e&&(o=n,n=t,t=e,e=[]);var a=[];return this.each(e,function(){a.push(t&&t.apply(this,arguments))},n=n||o||this),a},ho.map=function(e,t,n,o){n=n||o||this;var a=NS(this,e=Ge(Ab(e),this.getDimension,this));a._indices=this._indices,a.getRawIndex=a._indices?Db:tm;for(var u=a._storage,l=[],f=this._chunkSize,m=e.length,v=this.count(),x=[],C=a._rawExtent,k=0;k<v;k++){for(var M=0;M<m;M++)x[M]=this.get(e[M],k);x[m]=k;var E=t&&t.apply(n,x);if(null!=E){"object"!=typeof E&&(l[0]=E,E=l);for(var V=this.getRawIndex(k),N=Math.floor(V/f),G=V%f,te=0;te<E.length;te++){var J=e[te],me=E[te],ge=C[J],pe=u[J];pe&&(pe[N][G]=me),me<ge[0]&&(ge[0]=me),me>ge[1]&&(ge[1]=me)}}}return a},ho.downSample=function(e,t,n,o){for(var a=NS(this,[e]),u=a._storage,l=[],f=Math.floor(1/t),m=u[e],v=this.count(),x=this._chunkSize,C=a._rawExtent[e],k=new(Mb(this))(v),M=0,E=0;E<v;E+=f){v-E<f&&(l.length=f=v-E);for(var V=0;V<f;V++){var N=this.getRawIndex(E+V),G=Math.floor(N/x);l[V]=m[G][N%x]}var J=n(l),me=this.getRawIndex(Math.min(E+o(l,J)||0,v-1)),ge=me%x;(m[Math.floor(me/x)][ge]=J)<C[0]&&(C[0]=J),J>C[1]&&(C[1]=J),k[M++]=me}return a._count=M,a._indices=k,a.getRawIndex=Db,a},ho.getItemModel=function(e){var t=this.hostModel;return new ei(this.getRawDataItem(e),t,t&&t.ecModel)},ho.diff=function(e){var t=this;return new Af(e?e.getIndices():[],this.getIndices(),function(n){return v1(e,n)},function(n){return v1(t,n)})},ho.getVisual=function(e){var t=this._visual;return t&&t[e]},ho.setVisual=function(e,t){if(IS(e))for(var n in e)e.hasOwnProperty(n)&&this.setVisual(n,e[n]);else this._visual=this._visual||{},this._visual[e]=t},ho.setLayout=function(e,t){if(IS(e))for(var n in e)e.hasOwnProperty(n)&&this.setLayout(n,e[n]);else this._layout[e]=t},ho.getLayout=function(e){return this._layout[e]},ho.getItemLayout=function(e){return this._itemLayouts[e]},ho.setItemLayout=function(e,t,n){this._itemLayouts[e]=n?Ne(this._itemLayouts[e]||{},t):t},ho.clearItemLayouts=function(){this._itemLayouts.length=0},ho.getItemVisual=function(e,t,n){var o=this._itemVisuals[e],a=o&&o[t];return null!=a||n?a:this.getVisual(t)},ho.setItemVisual=function(e,t,n){var o=this._itemVisuals[e]||{},a=this.hasItemVisual;if(this._itemVisuals[e]=o,IS(t))for(var u in t)t.hasOwnProperty(u)&&(o[u]=t[u],a[u]=!0);else o[t]=n,a[t]=!0},ho.clearAllVisual=function(){this._visual={},this._itemVisuals=[],this.hasItemVisual={}},ho.setItemGraphicEl=function(e,t){var n=this.hostModel;t&&(t.dataIndex=e,t.dataType=this.dataType,t.seriesIndex=n&&n.seriesIndex,"group"===t.type&&t.traverse(kk,t)),this._graphicEls[e]=t},ho.getItemGraphicEl=function(e){return this._graphicEls[e]},ho.eachItemGraphicEl=function(e,t){le(this._graphicEls,function(n,o){n&&e&&e.call(t,n,o)})},ho.cloneShallow=function(e){if(!e){var t=Ge(this.dimensions,this.getDimensionInfo,this);e=new Uu(t,this.hostModel)}return e._storage=this._storage,ah(e,this),e._indices=this._indices?new(0,this._indices.constructor)(this._indices):null,e.getRawIndex=e._indices?Db:tm,e},ho.wrapMethod=function(e,t){var n=this[e];"function"==typeof n&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(e),this[e]=function(){var o=n.apply(this,arguments);return t.apply(this,[o].concat(rr(arguments)))})},ho.TRANSFERABLE_METHODS=["cloneShallow","downSample","map"],ho.CHANGABLE_METHODS=["filterSelf","selectRange"];var Ob=function(e,t){return Tk((t=t||{}).coordDimensions||[],e,{dimsDef:t.dimensionsDefine||e.dimensionsDefine,encodeDef:t.encodeDefine||e.encodeDefine,dimCount:t.dimensionsCount,encodeDefaulter:t.encodeDefaulter,generateCoord:t.generateCoord,generateCoordCount:t.generateCoordCount})};function ED(e){this.coordSysName=e,this.coordSysDims=[],this.axisMap=Gt(),this.categoryAxisMap=Gt(),this.firstCategoryDimIndex=null}var FM={cartesian2d:function(e,t,n,o){var a=e.getReferringComponents("xAxis")[0],u=e.getReferringComponents("yAxis")[0];t.coordSysDims=["x","y"],n.set("x",a),n.set("y",u),$0(a)&&(o.set("x",a),t.firstCategoryDimIndex=0),$0(u)&&(o.set("y",u),t.firstCategoryDimIndex=1)},singleAxis:function(e,t,n,o){var a=e.getReferringComponents("singleAxis")[0];t.coordSysDims=["single"],n.set("single",a),$0(a)&&(o.set("single",a),t.firstCategoryDimIndex=0)},polar:function(e,t,n,o){var a=e.getReferringComponents("polar")[0],u=a.findAxisModel("radiusAxis"),l=a.findAxisModel("angleAxis");t.coordSysDims=["radius","angle"],n.set("radius",u),n.set("angle",l),$0(u)&&(o.set("radius",u),t.firstCategoryDimIndex=0),$0(l)&&(o.set("angle",l),null==t.firstCategoryDimIndex&&(t.firstCategoryDimIndex=1))},geo:function(e,t,n,o){t.coordSysDims=["lng","lat"]},parallel:function(e,t,n,o){var a=e.ecModel,u=a.getComponent("parallel",e.get("parallelIndex")),l=t.coordSysDims=u.dimensions.slice();le(u.parallelAxisIndex,function(f,m){var v=a.getComponent("parallelAxis",f),x=l[m];n.set(x,v),$0(v)&&null==t.firstCategoryDimIndex&&(o.set(x,v),t.firstCategoryDimIndex=m)})}};function $0(e){return"category"===e.get("type")}function Mk(e,t,n){var o,a,u,l,f=(n=n||{}).byIndex,m=n.stackedCoordDimension,v=!(!e||!e.get("stack"));if(le(t,function(M,E){Gn(M)&&(t[E]=M={name:M}),v&&!M.isExtraCoord&&(f||o||!M.ordinalMeta||(o=M),a||"ordinal"===M.type||"time"===M.type||m&&m!==M.coordDim||(a=M))}),!a||f||o||(f=!0),a){u="__\0ecstackresult",l="__\0ecstackedover",o&&(o.createInvertedIndices=!0);var x=a.coordDim,C=a.type,k=0;le(t,function(M){M.coordDim===x&&k++}),t.push({name:u,coordDim:x,coordDimIndex:k,type:C,isExtraCoord:!0,isCalculationCoord:!0}),k++,t.push({name:l,coordDim:l,coordDimIndex:k,type:C,isExtraCoord:!0,isCalculationCoord:!0})}return{stackedDimension:a&&a.name,stackedByDimension:o&&o.name,isStackedByIndex:f,stackedOverDimension:l,stackResultDimension:u}}function nm(e,t){return!!t&&t===e.getCalculationInfo("stackedDimension")}function y1(e,t){return nm(e,t)?e.getCalculationInfo("stackResultDimension"):t}function Pv(e,t,n){n=n||{},Pl.isInstance(e)||(e=Pl.seriesDataToSource(e));var o,a=t.get("coordinateSystem"),u=lu.get(a),l=function(M){var E=M.get("coordinateSystem"),V=new ED(E),N=FM[E];if(N)return N(M,V,V.axisMap,V.categoryAxisMap),V}(t);l&&(o=Ge(l.coordSysDims,function(M){var E={name:M},V=l.axisMap.get(M);if(V){var N=V.get("type");E.type=Z_(N)}return E})),o=o||u&&(u.getDimensionsInfo?u.getDimensionsInfo():u.dimensions.slice())||["x","y"];var f,m,v=Ob(e,{coordDimensions:o,generateCoord:n.generateCoord,encodeDefaulter:n.useEncodeDefaulter?pn(Oc,o,t):null});l&&le(v,function(M,E){var N=l.categoryAxisMap.get(M.coordDim);N&&(null==f&&(f=E),M.ordinalMeta=N.getOrdinalMeta()),null!=M.otherDims.itemName&&(m=!0)}),m||null==f||(v[f].otherDims.itemName=0);var x=Mk(t,v),C=new Uu(v,t);C.setCalculationInfo(x);var k=null!=f&&function(M){if(M.sourceFormat===Hg){var E=function(V){for(var N=0;N<V.length&&null==V[N];)N++;return V[N]}(M.data||[]);return null!=E&&!en(Gf(E))}}(e)?function(M,E,V,N){return N===f?V:this.defaultDimValueGetter(M,E,V,N)}:null;return C.hasItemOption=!1,C.initData(e,null,k),C}function Au(e){this._setting=e||{},this._extent=[1/0,-1/0],this._interval=0,this.init&&this.init.apply(this,arguments)}function b1(e){this.categories=e.categories||[],this._needCollect=e.needCollect,this._deduplication=e.deduplication}Au.prototype.parse=function(e){return e},Au.prototype.getSetting=function(e){return this._setting[e]},Au.prototype.contain=function(e){var t=this._extent;return e>=t[0]&&e<=t[1]},Au.prototype.normalize=function(e){var t=this._extent;return t[1]===t[0]?.5:(e-t[0])/(t[1]-t[0])},Au.prototype.scale=function(e){var t=this._extent;return e*(t[1]-t[0])+t[0]},Au.prototype.unionExtent=function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1])},Au.prototype.unionExtentFromData=function(e,t){this.unionExtent(e.getApproximateExtent(t))},Au.prototype.getExtent=function(){return this._extent.slice()},Au.prototype.setExtent=function(e,t){var n=this._extent;isNaN(e)||(n[0]=e),isNaN(t)||(n[1]=t)},Au.prototype.isBlank=function(){return this._isBlank},Au.prototype.setBlank=function(e){this._isBlank=e},Au.prototype.getLabel=null,Zl(Au),Zs(Au,{registerWhenExtend:!0}),b1.createByAxisModel=function(e){var t=e.option,n=t.data,o=n&&Ge(n,Dk);return new b1({categories:o,needCollect:!o,deduplication:!1!==t.dedplication})};var VM=b1.prototype;function J_(e){return e._map||(e._map=Gt(e.categories))}function Dk(e){return ln(e)&&null!=e.value?e.value:e+""}VM.getOrdinal=function(e){return J_(this).get(e)},VM.parseAndCollect=function(e){var t,n=this._needCollect;if("string"!=typeof e&&!n)return e;if(n&&!this._deduplication)return this.categories[t=this.categories.length]=e,t;var o=J_(this);return null==(t=o.get(e))&&(n?(this.categories[t=this.categories.length]=e,o.set(e,t)):t=NaN),t};var Ak=Au.prototype,Ik=Au.extend({type:"ordinal",init:function(e,t){e&&!en(e)||(e=new b1({categories:e})),this._ordinalMeta=e,this._extent=t||[0,e.categories.length-1]},parse:function(e){return"string"==typeof e?this._ordinalMeta.getOrdinal(e):Math.round(e)},contain:function(e){return e=this.parse(e),Ak.contain.call(this,e)&&null!=this._ordinalMeta.categories[e]},normalize:function(e){return Ak.normalize.call(this,this.parse(e))},scale:function(e){return Math.round(Ak.scale.call(this,e))},getTicks:function(){for(var e=[],t=this._extent,n=t[0];n<=t[1];)e.push(n),n++;return e},getLabel:function(e){if(!this.isBlank())return this._ordinalMeta.categories[e]},count:function(){return this._extent[1]-this._extent[0]+1},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},getOrdinalMeta:function(){return this._ordinalMeta},niceTicks:yn,niceExtent:yn});Ik.create=function(){return new Ik};var LS=Vs;function Ok(e){return cb(e)+2}function HM(e,t,n){e[t]=Math.max(Math.min(e[t],n[1]),n[0])}function WM(e,t){isFinite(e[0])||(e[0]=t[0]),isFinite(e[1])||(e[1]=t[1]),HM(e,0,t),HM(e,1,t),e[0]>e[1]&&(e[0]=e[1])}var J0=Vs,ng=Au.extend({type:"interval",_interval:0,_intervalPrecision:2,setExtent:function(e,t){var n=this._extent;isNaN(e)||(n[0]=parseFloat(e)),isNaN(t)||(n[1]=parseFloat(t))},unionExtent:function(e){var t=this._extent;e[0]<t[0]&&(t[0]=e[0]),e[1]>t[1]&&(t[1]=e[1]),ng.prototype.setExtent.call(this,t[0],t[1])},getInterval:function(){return this._interval},setInterval:function(e){this._interval=e,this._niceExtent=this._extent.slice(),this._intervalPrecision=Ok(e)},getTicks:function(e){var t=this._interval,n=this._extent,o=this._niceExtent,a=this._intervalPrecision,u=[];if(!t)return u;n[0]<o[0]&&u.push(e?J0(o[0]-t,a):n[0]);for(var l=o[0];l<=o[1]&&(u.push(l),(l=J0(l+t,a))!==u[u.length-1]);)if(1e4<u.length)return[];var f=u.length?u[u.length-1]:o[1];return n[1]>f&&u.push(e?J0(f+t,a):n[1]),u},getMinorTicks:function(e){for(var t=this.getTicks(!0),n=[],o=this.getExtent(),a=1;a<t.length;a++){for(var l=t[a-1],f=0,m=[],v=(t[a]-l)/e;f<e-1;){var x=Vs(l+(f+1)*v);x>o[0]&&x<o[1]&&m.push(x),f++}n.push(m)}return n},getLabel:function(e,t){if(null==e)return"";var n=t&&t.precision;return null==n?n=cb(e)||0:"auto"===n&&(n=this._intervalPrecision),Ac(e=J0(e,n,!0))},niceTicks:function(e,t,n){e=e||5;var o=this._extent,a=o[1]-o[0];if(isFinite(a)){a<0&&(a=-a,o.reverse());var u=function(l,f,m,v){var x={},k=x.interval=Gd((l[1]-l[0])/f,!0);null!=m&&k<m&&(k=x.interval=m),null!=v&&v<k&&(k=x.interval=v);var M=x.intervalPrecision=Ok(k);return WM(x.niceTickExtent=[LS(Math.ceil(l[0]/k)*k,M),LS(Math.floor(l[1]/k)*k,M)],l),x}(o,e,t,n);this._intervalPrecision=u.intervalPrecision,this._interval=u.interval,this._niceExtent=u.niceTickExtent}},niceExtent:function(e){var t=this._extent;if(t[0]===t[1])if(0!==t[0]){var n=t[0];e.fixMax||(t[1]+=n/2),t[0]-=n/2}else t[1]=1;isFinite(t[1]-t[0])||(t[0]=0,t[1]=1),this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var a=this._interval;e.fixMin||(t[0]=J0(Math.floor(t[0]/a)*a)),e.fixMax||(t[1]=J0(Math.ceil(t[1]/a)*a))}});ng.create=function(){return new ng};var Ek="__ec_stack_",BS="undefined"!=typeof Float32Array?Float32Array:Array;function Q_(e){return e.get("stack")||Ek+e.seriesIndex}function zS(e){return e.dim+e.index}function Rr(e,t){var n=[];return t.eachSeriesByType(e,function(o){VS(o)&&!HS(o)&&n.push(o)}),n}function Q0(e){var t=function(o){var a={};le(o,function(C){var k=C.coordinateSystem.getBaseAxis();if("time"===k.type||"value"===k.type)for(var M=C.getData(),E=k.dim+"_"+k.index,V=M.mapDimension(k.dim),N=0,G=M.count();N<G;++N){var te=M.get(V,N);a[E]?a[E].push(te):a[E]=[te]}});var u=[];for(var l in a)if(a.hasOwnProperty(l)){var f=a[l];if(f){f.sort(function(C,k){return C-k});for(var m=null,v=1;v<f.length;++v){var x=f[v]-f[v-1];0<x&&(m=null===m?x:Math.min(m,x))}u[l]=m}}return u}(e),n=[];return le(e,function(o){var a,u=o.coordinateSystem.getBaseAxis(),l=u.getExtent();if("category"===u.type)a=u.getBandWidth();else if("value"===u.type||"time"===u.type){var m=t[u.dim+"_"+u.index],v=Math.abs(l[1]-l[0]),x=u.scale.getExtent(),C=Math.abs(x[1]-x[0]);a=m?v/C*m:v}else{var k=o.getData();a=Math.abs(l[1]-l[0])/k.count()}var M=nr(o.get("barWidth"),a),E=nr(o.get("barMaxWidth"),a),V=nr(o.get("barMinWidth")||1,a),N=o.get("barGap"),G=o.get("barCategoryGap");n.push({bandWidth:a,barWidth:M,barMaxWidth:E,barMinWidth:V,barGap:N,barCategoryGap:G,axisKey:zS(u),stackId:Q_(o)})}),no(n)}function no(e){var t={};le(e,function(o,a){var u=o.axisKey,l=o.bandWidth,f=t[u]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},m=f.stacks;t[u]=f;var v=o.stackId;m[v]||f.autoWidthCount++,m[v]=m[v]||{width:0,maxWidth:0};var x=o.barWidth;x&&!m[v].width&&(m[v].width=x,x=Math.min(f.remainedWidth,x),f.remainedWidth-=x);var C=o.barMaxWidth;C&&(m[v].maxWidth=C);var k=o.barMinWidth;k&&(m[v].minWidth=k);var M=o.barGap;null!=M&&(f.gap=M);var E=o.barCategoryGap;null!=E&&(f.categoryGap=E)});var n={};return le(t,function(o,a){n[a]={};var u=o.stacks,l=o.bandWidth,f=nr(o.categoryGap,l),m=nr(o.gap,1),v=o.remainedWidth,x=o.autoWidthCount,C=(v-f)/(x+(x-1)*m);C=Math.max(C,0),le(u,function(V){var N=V.maxWidth,G=V.minWidth;if(V.width)te=V.width,N&&(te=Math.min(te,N)),G&&(te=Math.max(te,G)),V.width=te,v-=te+m*te,x--;else{var te=C;N&&N<te&&(te=Math.min(N,v)),G&&te<G&&(te=G),te!==C&&(V.width=te,v-=te+m*te,x--)}}),C=(v-f)/(x+(x-1)*m),C=Math.max(C,0);var k,M=0;le(u,function(V,N){V.width||(V.width=C),M+=(k=V).width*(1+m)}),k&&(M-=k.width*m);var E=-M/2;le(u,function(V,N){n[a][N]=n[a][N]||{bandWidth:l,offset:E,width:V.width},E+=V.width*(1+m)})}),n}function FS(e,t,n){if(e&&t){var o=e[zS(t)];return null!=o&&null!=n&&(o=o[Q_(n)]),o}}function Pk(e,t){var n=Rr(e,t),o=Q0(n),a={};le(n,function(u){var l=u.getData(),f=u.coordinateSystem,m=f.getBaseAxis(),v=Q_(u),x=o[zS(m)][v],C=x.offset,k=x.width,M=f.getOtherAxis(m),E=u.get("barMinHeight")||0;a[v]=a[v]||[],l.setLayout({bandWidth:x.bandWidth,offset:C,size:k});for(var V=l.mapDimension(M.dim),N=l.mapDimension(m.dim),G=nm(l,V),te=M.isHorizontal(),J=Ho(0,M),me=0,ge=l.count();me<ge;me++){var pe,_e,Me,We,Ke,et=l.get(V,me),ut=l.get(N,me),lt=0<=et?"p":"n",vt=J;G&&(a[v][ut]||(a[v][ut]={p:J,n:J}),vt=a[v][ut][lt]),te?(pe=vt,_e=(Ke=f.dataToPoint([et,ut]))[1]+C,Me=Ke[0]-J,We=k,Math.abs(Me)<E&&(Me=(Me<0?-1:1)*E),isNaN(Me)||G&&(a[v][ut][lt]+=Me)):(pe=(Ke=f.dataToPoint([ut,et]))[0]+C,_e=vt,Me=k,We=Ke[1]-J,Math.abs(We)<E&&(We=(We<=0?-1:1)*E),isNaN(We)||G&&(a[v][ut][lt]+=We)),l.setItemLayout(me,{x:pe,y:_e,width:Me,height:We})}},this)}var eo={seriesType:"bar",plan:po(),reset:function(e){if(VS(e)&&HS(e)){var t=e.getData(),n=e.coordinateSystem,o=n.grid.getRect(),a=n.getBaseAxis(),u=n.getOtherAxis(a),l=t.mapDimension(u.dim),f=t.mapDimension(a.dim),m=u.isHorizontal(),v=m?0:1,x=FS(Q0([e]),a,e).width;return.5<x||(x=.5),{progress:function(C,k){for(var M,E=C.count,V=new BS(2*E),N=new BS(2*E),G=new BS(E),te=[],J=[],me=0,ge=0;null!=(M=C.next());)J[v]=k.get(l,M),J[1-v]=k.get(f,M),te=n.dataToPoint(J,null,te),N[me]=m?o.x+o.width:te[0],V[me++]=te[0],N[me]=m?te[1]:o.y+o.height,V[me++]=te[1],G[ge++]=M;k.setLayout({largePoints:V,largeDataIndices:G,largeBackgroundPoints:N,barWidth:x,valueAxisStart:Ho(0,u),backgroundStart:m?o.x:o.y,valueAxisHorizontal:m})}}}}};function VS(e){return e.coordinateSystem&&"cartesian2d"===e.coordinateSystem.type}function HS(e){return e.pipelineContext&&e.pipelineContext.large}function Ho(e,t){return t.toGlobalCoord(t.dataToCoord("log"===t.type?1:0))}var Nk=ng.prototype,WS=Math.ceil,Rk=Math.floor,ll=864e5,GS=ng.extend({type:"time",getLabel:function(e){var t=this._stepLvl,n=new Date(e);return Qf(t[0],n,this.getSetting("useUTC"))},niceExtent:function(e){var t=this._extent;if(t[0]===t[1]&&(t[0]-=ll,t[1]+=ll),t[1]===-1/0&&t[0]===1/0){var n=new Date;t[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),t[0]=t[1]-ll}this.niceTicks(e.splitNumber,e.minInterval,e.maxInterval);var o=this._interval;e.fixMin||(t[0]=Vs(Rk(t[0]/o)*o)),e.fixMax||(t[1]=Vs(WS(t[1]/o)*o))},niceTicks:function(e,t,n){var o=this._extent,a=o[1]-o[0],u=a/(e=e||10);null!=t&&u<t&&(u=t),null!=n&&n<u&&(u=n);var l=x1.length,f=function(k,M,E,V){for(;E<V;){var N=E+V>>>1;k[N][1]<M?E=1+N:V=N}return E}(x1,u,0,l),m=x1[Math.min(f,l-1)],v=m[1];"year"===m[0]&&(v*=Gd(a/v/e,!0));var x=this.getSetting("useUTC")?0:60*new Date(+o[0]||+o[1]).getTimezoneOffset()*1e3,C=[Math.round(WS((o[0]-x)/v)*v+x),Math.round(Rk((o[1]-x)/v)*v+x)];WM(C,o),this._stepLvl=m,this._interval=v,this._niceExtent=C},parse:function(e){return+Cf(e)}});le(["contain","normalize"],function(e){GS.prototype[e]=function(t){return Nk[e].call(this,this.parse(t))}});var x1=[["hh:mm:ss",1e3],["hh:mm:ss",5e3],["hh:mm:ss",1e4],["hh:mm:ss",15e3],["hh:mm:ss",3e4],["hh:mm\nMM-dd",6e4],["hh:mm\nMM-dd",3e5],["hh:mm\nMM-dd",6e5],["hh:mm\nMM-dd",9e5],["hh:mm\nMM-dd",18e5],["hh:mm\nMM-dd",36e5],["hh:mm\nMM-dd",72e5],["hh:mm\nMM-dd",216e5],["hh:mm\nMM-dd",432e5],["MM-dd\nyyyy",ll],["MM-dd\nyyyy",2*ll],["MM-dd\nyyyy",3*ll],["MM-dd\nyyyy",4*ll],["MM-dd\nyyyy",5*ll],["MM-dd\nyyyy",6*ll],["week",7*ll],["MM-dd\nyyyy",864e6],["week",14*ll],["week",21*ll],["month",31*ll],["week",42*ll],["month",62*ll],["week",70*ll],["quarter",95*ll],["month",31*ll*4],["month",13392e6],["half-year",16416e6],["month",31*ll*8],["month",26784e6],["year",380*ll]];GS.create=function(e){return new GS({useUTC:e.ecModel.get("useUTC")})};var ey=Au.prototype,Eb=ng.prototype,PD=cb,ND=Vs,Pb=Math.floor,sh=Math.ceil,_1=Math.pow,rm=Math.log,om=Au.extend({type:"log",base:10,$constructor:function(){Au.apply(this,arguments),this._originalScale=new ng},getTicks:function(e){var t=this._originalScale,n=this._extent,o=t.getExtent();return Ge(Eb.getTicks.call(this,e),function(a){var u=Vs(_1(this.base,a));return u=a===n[0]&&t.__fixMin?im(u,o[0]):u,a===n[1]&&t.__fixMax?im(u,o[1]):u},this)},getMinorTicks:Eb.getMinorTicks,getLabel:Eb.getLabel,scale:function(e){return e=ey.scale.call(this,e),_1(this.base,e)},setExtent:function(e,t){var n=this.base;e=rm(e)/rm(n),t=rm(t)/rm(n),Eb.setExtent.call(this,e,t)},getExtent:function(){var e=this.base,t=ey.getExtent.call(this);t[0]=_1(e,t[0]),t[1]=_1(e,t[1]);var n=this._originalScale,o=n.getExtent();return n.__fixMin&&(t[0]=im(t[0],o[0])),n.__fixMax&&(t[1]=im(t[1],o[1])),t},unionExtent:function(e){this._originalScale.unionExtent(e);var t=this.base;e[0]=rm(e[0])/rm(t),e[1]=rm(e[1])/rm(t),ey.unionExtent.call(this,e)},unionExtentFromData:function(e,t){this.unionExtent(e.getApproximateExtent(t))},niceTicks:function(e){e=e||10;var t=this._extent,n=t[1]-t[0];if(!(n==1/0||n<=0)){var o=D0(n);for(e/n*o<=.5&&(o*=10);!isNaN(o)&&Math.abs(o)<1&&0<Math.abs(o);)o*=10;var a=[Vs(sh(t[0]/o)*o),Vs(Pb(t[1]/o)*o)];this._interval=o,this._niceExtent=a}},niceExtent:function(e){Eb.niceExtent.call(this,e);var t=this._originalScale;t.__fixMin=e.fixMin,t.__fixMax=e.fixMax}});function im(e,t){return ND(e,PD(t))}function fp(e,t){var n,o,a,u=e.type,l=t.getMin(),f=t.getMax(),m=e.getExtent();"ordinal"===u?n=t.getCategories().length:(en(o=t.get("boundaryGap"))||(o=[o||0,o||0]),"boolean"==typeof o[0]&&(o=[0,0]),o[0]=nr(o[0],1),o[1]=nr(o[1],1),a=m[1]-m[0]||Math.abs(m[0])),"dataMin"===l?l=m[0]:"function"==typeof l&&(l=l({min:m[0],max:m[1]})),"dataMax"===f?f=m[1]:"function"==typeof f&&(f=f({min:m[0],max:m[1]}));var v=null!=l,x=null!=f;null==l&&(l="ordinal"===u?n?0:NaN:m[0]-o[0]*a),null==f&&(f="ordinal"===u?n?n-1:NaN:m[1]+o[1]*a),null!=l&&isFinite(l)||(l=NaN),null!=f&&isFinite(f)||(f=NaN),e.setBlank(Tr(l)||Tr(f)||"ordinal"===u&&!e.getOrdinalMeta().categories.length),t.getNeedCrossZero()&&(0<l&&0<f&&!v&&(l=0),l<0&&f<0&&!x&&(f=0));var C=t.ecModel;if(C&&"time"===u){var k,M=Rr("bar",C);if(le(M,function(N){k|=N.getBaseAxis()===t.axis}),k){var E=Q0(M),V=function(N,G,te,J){var me=te.axis.getExtent(),ge=me[1]-me[0],pe=FS(J,te.axis);if(void 0===pe)return{min:N,max:G};var _e=1/0;le(pe,function(ut){_e=Math.min(ut.offset,_e)});var Me=-1/0;le(pe,function(ut){Me=Math.max(ut.offset+ut.width,Me)}),_e=Math.abs(_e),Me=Math.abs(Me);var We=_e+Me,Ke=G-N,et=Ke/(1-(_e+Me)/ge)-Ke;return{min:N-=_e/We*et,max:G+=Me/We*et}}(l,f,t,E);l=V.min,f=V.max}}return{extent:[l,f],fixMin:v,fixMax:x}}function Ui(e,t){var n=fp(e,t),o=n.extent,a=t.get("splitNumber");"log"===e.type&&(e.base=t.get("logBase"));var u=e.type;e.setExtent(o[0],o[1]),e.niceExtent({splitNumber:a,fixMin:n.fixMin,fixMax:n.fixMax,minInterval:"interval"===u||"time"===u?t.get("minInterval"):null,maxInterval:"interval"===u||"time"===u?t.get("maxInterval"):null});var l=t.get("interval");null!=l&&e.setInterval&&e.setInterval(l)}function uh(e,t){if(t=t||e.get("type"))switch(t){case"category":return new Ik(e.getOrdinalMeta?e.getOrdinalMeta():e.getCategories(),[1/0,-1/0]);case"value":return new ng;default:return(Au.getClass(t)||ng).create(e)}}function Kd(e){var t,n=e.getLabelModel().get("formatter"),o="category"===e.type?e.scale.getExtent()[0]:null;return"string"==typeof n?(t=n,n=function(a){return a=e.scale.getLabel(a),t.replace("{value}",null!=a?a:"")}):"function"==typeof n?function(a,u){return null!=o&&(u=a-o),n(ty(e,a),u)}:function(a){return e.scale.getLabel(a)}}function ty(e,t){return"category"===e.type?e.scale.getLabel(t):t}function hp(e){var t=e.get("interval");return null==t?"auto":t}function Iu(e){return"category"===e.type&&0===hp(e.getLabelModel())}le(["contain","normalize"],function(e){om.prototype[e]=function(t){return t=rm(t)/rm(this.base),ey[e].call(this,t)}}),om.create=function(){return new om};var ic={getMin:function(e){var t=this.option,n=e||null==t.rangeStart?t.min:t.rangeStart;return this.axis&&null!=n&&"dataMin"!==n&&"function"!=typeof n&&!Tr(n)&&(n=this.axis.scale.parse(n)),n},getMax:function(e){var t=this.option,n=e||null==t.rangeEnd?t.max:t.rangeEnd;return this.axis&&null!=n&&"dataMax"!==n&&"function"!=typeof n&&!Tr(n)&&(n=this.axis.scale.parse(n)),n},getNeedCrossZero:function(){var e=this.option;return null==e.rangeStart&&null==e.rangeEnd&&!e.scale},getCoordSysModel:yn,setRange:function(e,t){this.option.rangeStart=e,this.option.rangeEnd=t},resetRange:function(){this.option.rangeStart=this.option.rangeEnd=null}},Lk=Tc({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,o=t.cy,a=t.width/2,u=t.height/2;e.moveTo(n,o-u),e.lineTo(n+a,o+u),e.lineTo(n-a,o+u),e.closePath()}}),US=Tc({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(e,t){var n=t.cx,o=t.cy,a=t.width/2,u=t.height/2;e.moveTo(n,o-u),e.lineTo(n+a,o),e.lineTo(n,o+u),e.lineTo(n-a,o),e.closePath()}}),jS=Tc({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.x,o=t.y,a=t.width/5*3,u=Math.max(a,t.height),l=a/2,f=l*l/(u-l),m=o-u+l+f,v=Math.asin(f/l),x=Math.cos(v)*l,C=Math.sin(v),k=Math.cos(v),M=.6*l,E=.7*l;e.moveTo(n-x,m+f),e.arc(n,m,l,Math.PI-v,2*Math.PI+v),e.bezierCurveTo(n+x-C*M,m+f+k*M,n,o-E,n,o),e.bezierCurveTo(n,o-E,n-x+C*M,m+f+k*M,n-x,m+f),e.closePath()}}),ew=Tc({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(e,t){var n=t.height,a=t.x,u=t.y,l=t.width/3*2;e.moveTo(a,u),e.lineTo(a+l,u+n),e.lineTo(a,u+n/4*3),e.lineTo(a-l,u+n),e.lineTo(a,u),e.closePath()}}),tw={line:function(e,t,n,o,a){a.x1=e,a.y1=t+o/2,a.x2=e+n,a.y2=t+o/2},rect:function(e,t,n,o,a){a.x=e,a.y=t,a.width=n,a.height=o},roundRect:function(e,t,n,o,a){a.x=e,a.y=t,a.width=n,a.height=o,a.r=Math.min(n,o)/4},square:function(e,t,n,o,a){var u=Math.min(n,o);a.x=e,a.y=t,a.width=u,a.height=u},circle:function(e,t,n,o,a){a.cx=e+n/2,a.cy=t+o/2,a.r=Math.min(n,o)/2},diamond:function(e,t,n,o,a){a.cx=e+n/2,a.cy=t+o/2,a.width=n,a.height=o},pin:function(e,t,n,o,a){a.x=e+n/2,a.y=t+o/2,a.width=n,a.height=o},arrow:function(e,t,n,o,a){a.x=e+n/2,a.y=t+o/2,a.width=n,a.height=o},triangle:function(e,t,n,o,a){a.cx=e+n/2,a.cy=t+o/2,a.width=n,a.height=o}},w1={};le({line:$s,rect:fi,roundRect:fi,square:fi,circle:ku,diamond:US,pin:jS,arrow:ew,triangle:Lk},function(e,t){w1[t]=new e});var gp=Tc({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(e,t,n){var o=Jc(e,t,n),a=this.shape;return a&&"pin"===a.symbolType&&"inside"===t.textPosition&&(o.y=n.y+.4*n.height),o},buildPath:function(e,t,n){var o=t.symbolType;if("none"!==o){var a=w1[o];a=a||w1[o="rect"],tw[o](t.x,t.y,t.width,t.height,a.shape),a.buildPath(e,a.shape,n)}}});function Nb(e,t){if("image"!==this.type){var n=this.style,o=this.shape;o&&"line"===o.symbolType?n.stroke=e:this.__isEmptyBrush?(n.stroke=e,n.fill=t||"#fff"):(n.fill&&(n.fill=e),n.stroke&&(n.stroke=e)),this.dirty(!1)}}function $d(e,t,n,o,a,u,l){var f,m=0===e.indexOf("empty");return m&&(e=e.substr(5,1).toLowerCase()+e.substr(6)),(f=0===e.indexOf("image://")?z_(e.slice(8),new ii(t,n,o,a),l?"center":"cover"):0===e.indexOf("path://")?$f(e.slice(7),{},new ii(t,n,o,a),l?"center":"cover"):new gp({shape:{symbolType:e,x:t,y:n,width:o,height:a}})).__isEmptyBrush=m,f.setColor=Nb,f.setColor(u),f}var qS=(Object.freeze||Object)({createList:function(e){return Pv(e.getSource(),e)},getLayoutRect:si,dataStack:{isDimensionStacked:nm,enableDataStack:Mk,getStackedDimension:y1},createScale:function(e,t){var n=t;ei.isInstance(t)||de(n=new ei(t),ic);var o=uh(n);return o.setExtent(e[0],e[1]),Ui(o,n),o},mixinAxisModelCommonMethods:function(e){de(e,ic)},completeDimensions:Tk,createDimensions:Ob,createSymbol:$d});function nw(e,t){return Math.abs(e-t)<1e-8}function Nv(e,t,n){var o=0,a=e[0];if(!a)return!1;for(var u=1;u<e.length;u++){var l=e[u];o+=Cc(a[0],a[1],l[0],l[1],t,n),a=l}var f=e[0];return nw(a[0],f[0])&&nw(a[1],f[1])||(o+=Cc(a[0],a[1],f[0],f[1],t,n)),0!==o}function Rb(e,t,n){if(this.name=e,this.geometries=t,n)n=[n[0],n[1]];else{var o=this.getBoundingRect();n=[o.x+o.width/2,o.y+o.height/2]}this.center=n}function YS(e,t,n){for(var o=[],a=t[0],u=t[1],l=0;l<e.length;l+=2){var f=e.charCodeAt(l)-64,m=e.charCodeAt(l+1)-64;f=f>>1^-(1&f),m=m>>1^-(1&m),a=f+=a,u=m+=u,o.push([f/n,m/n])}return o}function Lb(e,t){return function(n){if(n.UTF8Encoding){var o=n.UTF8Scale;null==o&&(o=1024);for(var a=n.features,u=0;u<a.length;u++)for(var l=a[u].geometry,f=l.coordinates,m=l.encodeOffsets,v=0;v<f.length;v++){var x=f[v];if("Polygon"===l.type)f[v]=YS(x,m[v],o);else if("MultiPolygon"===l.type)for(var C=0;C<x.length;C++)x[C]=YS(x[C],m[v][C],o)}n.UTF8Encoding=!1}}(e),Ge(ht(e.features,function(n){return n.geometry&&n.properties&&0<n.geometry.coordinates.length}),function(n){var o=n.properties,a=n.geometry,u=a.coordinates,l=[];"Polygon"===a.type&&l.push({type:"polygon",exterior:u[0],interiors:u.slice(1)}),"MultiPolygon"===a.type&&le(u,function(m){m[0]&&l.push({type:"polygon",exterior:m[0],interiors:m.slice(1)})});var f=new Rb(o[t||"name"],l,o.cp);return f.properties=o,f})}Rb.prototype={constructor:Rb,properties:null,getBoundingRect:function(){var e=this._rect;if(e)return e;for(var t=Number.MAX_VALUE,n=[t,t],o=[-t,-t],a=[],u=[],l=this.geometries,f=0;f<l.length;f++)"polygon"===l[f].type&&(y0(l[f].exterior,a,u),Yu(n,n,a),pi(o,o,u));return 0===f&&(n[0]=n[1]=o[0]=o[1]=0),this._rect=new ii(n[0],n[1],o[0]-n[0],o[1]-n[1])},contain:function(e){var t=this.getBoundingRect(),n=this.geometries;if(!t.contain(e[0],e[1]))return!1;e:for(var o=0,a=n.length;o<a;o++)if("polygon"===n[o].type){var l=n[o].interiors;if(Nv(n[o].exterior,e[0],e[1])){for(var f=0;f<(l?l.length:0);f++)if(Nv(l[f]))continue e;return!0}}return!1},transformTo:function(e,t,n,o){var a=this.getBoundingRect(),u=a.width/a.height;n?o=o||n/u:n=u*o;for(var l=new ii(e,t,n,o),f=a.calculateTransform(l),m=this.geometries,v=0;v<m.length;v++)if("polygon"===m[v].type){for(var x=m[v].exterior,C=m[v].interiors,k=0;k<x.length;k++)ur(x[k],x[k],f);for(var M=0;M<(C?C.length:0);M++)for(k=0;k<C[M].length;k++)ur(C[M][k],C[M][k],f)}(a=this._rect).copy(l),this.center=[a.x+a.width/2,a.y+a.height/2]},cloneShallow:function(e){null==e&&(e=this.name);var t=new Rb(e,this.geometries,this.center);return t._rect=this._rect,t.transformTo=null,t}};var C1=_i();function ZS(e,t){var n,l,f,o=ow(e,"labels"),a=hp(t);return KS(o,a)||iw(o,a,{labels:Ot(a)?am(e,a):Bk(e,n="auto"===a?(l=e,f=C1(l).autoInterval,null!=f?f:C1(l).autoInterval=l.calculateCategoryInterval()):a),labelCategoryInterval:n})}function ow(e,t){return C1(e)[t]||(C1(e)[t]=[])}function KS(e,t){for(var n=0;n<e.length;n++)if(e[n].key===t)return e[n].value}function iw(e,t,n){return e.push({key:t,value:n}),n}function Bk(e,t,n){var o=Kd(e),a=e.scale,u=a.getExtent(),l=e.getLabelModel(),f=[],m=Math.max((t||0)+1,1),v=u[0],x=a.count();0!==v&&1<m&&2<x/m&&(v=Math.round(Math.ceil(v/m)*m));var C=Iu(e),k=l.get("showMinLabel")||C,M=l.get("showMaxLabel")||C;k&&v!==u[0]&&V(u[0]);for(var E=v;E<=u[1];E+=m)V(E);function V(N){f.push(n?N:{formattedLabel:o(N),rawLabel:a.getLabel(N),tickValue:N})}return M&&E-m!==u[1]&&V(u[1]),f}function am(e,t,n){var o=e.scale,a=Kd(e),u=[];return le(o.getTicks(),function(l){var f=o.getLabel(l);t(l,f)&&u.push(n?l:{formattedLabel:a(l),rawLabel:f,tickValue:l})}),u}var zk=[0,1],mu=function(e,t,n){this.dim=e,this.scale=t,this._extent=n||[0,0],this.inverse=!1,this.onBand=!1};function Fk(e,t){var n=(e[1]-e[0])/t/2;e[0]+=n,e[1]-=n}mu.prototype={constructor:mu,contain:function(e){var t=this._extent,n=Math.min(t[0],t[1]),o=Math.max(t[0],t[1]);return n<=e&&e<=o},containData:function(e){return this.scale.contain(e)},getExtent:function(){return this._extent.slice()},getPixelPrecision:function(e){return Qx(e||this.scale.getExtent(),this._extent)},setExtent:function(e,t){var n=this._extent;n[0]=e,n[1]=t},dataToCoord:function(e,t){var n=this._extent,o=this.scale;return e=o.normalize(e),this.onBand&&"ordinal"===o.type&&Fk(n=n.slice(),o.count()),hi(e,zk,n,t)},coordToData:function(e,t){var n=this._extent,o=this.scale;this.onBand&&"ordinal"===o.type&&Fk(n=n.slice(),o.count());var a=hi(e,n,zk,t);return this.scale.scale(a)},pointToData:function(e,t){},getTicksCoords:function(e){var t=(e=e||{}).tickModel||this.getTickModel(),n=Ge(function k1(e,t){return"category"===e.type?function(n,o){var a,u,l=ow(n,"ticks"),f=hp(o),m=KS(l,f);if(m)return m;if(o.get("show")&&!n.scale.isBlank()||(a=[]),Ot(f))a=am(n,f,!0);else if("auto"===f){var v=ZS(n,n.getLabelModel());u=v.labelCategoryInterval,a=Ge(v.labels,function(x){return x.tickValue})}else a=Bk(n,u=f,!0);return iw(l,f,{ticks:a,tickCategoryInterval:u})}(e,t):{ticks:e.scale.getTicks()}}(this,t).ticks,function(o){return{coord:this.dataToCoord(o),tickValue:o}},this);return function(o,a,u,l){var f=a.length;if(o.onBand&&!u&&f){var m,x=o.getExtent();if(1===f)a[0].coord=x[0],m=a[1]={coord:x[0]};else{var k=(a[f-1].coord-a[0].coord)/(a[f-1].tickValue-a[0].tickValue);le(a,function(N){N.coord-=k/2});var M=o.scale.getExtent();a.push(m={coord:a[f-1].coord+k*(1+M[1]-a[f-1].tickValue)})}var E=x[0]>x[1];V(a[0].coord,x[0])&&(l?a[0].coord=x[0]:a.shift()),l&&V(x[0],a[0].coord)&&a.unshift({coord:x[0]}),V(x[1],m.coord)&&(l?m.coord=x[1]:a.pop()),l&&V(m.coord,x[1])&&a.push({coord:x[1]})}function V(N,G){return N=Vs(N),G=Vs(G),E?G<N:N<G}}(this,n,t.get("alignWithLabel"),e.clamp),n},getMinorTicksCoords:function(){if("ordinal"===this.scale.type)return[];var e=this.model.getModel("minorTick").get("splitNumber");return 0<e&&e<100||(e=5),Ge(this.scale.getMinorTicks(e),function(t){return Ge(t,function(n){return{coord:this.dataToCoord(n),tickValue:n}},this)},this)},getViewLabels:function(){return function rw(e){return"category"===e.type?function(t){var n=t.getLabelModel(),o=ZS(t,n);return!n.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:o.labelCategoryInterval}:o}(e):function(t){var n=t.scale.getTicks(),o=Kd(t);return{labels:Ge(n,function(a,u){return{formattedLabel:o(a,u),rawLabel:t.scale.getLabel(a),tickValue:a}})}}(e)}(this).labels},getLabelModel:function(){return this.model.getModel("axisLabel")},getTickModel:function(){return this.model.getModel("axisTick")},getBandWidth:function(){var e=this._extent,t=this.scale.getExtent(),n=t[1]-t[0]+(this.onBand?1:0);0===n&&(n=1);var o=Math.abs(e[1]-e[0]);return Math.abs(o)/n},isHorizontal:null,getRotate:null,calculateCategoryInterval:function(){return function(e){var Me,We,t=(We=(Me=e).getLabelModel(),{axisRotate:Me.getRotate?Me.getRotate():Me.isHorizontal&&!Me.isHorizontal()?90:0,labelRotate:We.get("rotate")||0,font:We.getFont()}),n=Kd(e),o=(t.axisRotate-t.labelRotate)/180*Math.PI,a=e.scale,u=a.getExtent(),l=a.count();if(u[1]-u[0]<1)return 0;var f=1;40<l&&(f=Math.max(1,Math.floor(l/40)));for(var m=u[0],v=e.dataToCoord(m+1)-e.dataToCoord(m),x=Math.abs(v*Math.cos(o)),C=Math.abs(v*Math.sin(o)),k=0,M=0;m<=u[1];m+=f){var V,N=bl(n(m),t.font,"center","top");V=1.3*N.height,k=Math.max(k,1.3*N.width,7),M=Math.max(M,V,7)}var G=k/x,te=M/C;isNaN(G)&&(G=1/0),isNaN(te)&&(te=1/0);var J=Math.max(0,Math.floor(Math.min(G,te))),me=C1(e.model),ge=e.getExtent(),pe=me.lastAutoInterval,_e=me.lastTickCount;return null!=pe&&null!=_e&&Math.abs(pe-J)<=1&&Math.abs(_e-l)<=1&&J<pe&&me.axisExtend0===ge[0]&&me.axisExtend1===ge[1]?J=pe:(me.lastTickCount=l,me.lastAutoInterval=J,me.axisExtend0=ge[0],me.axisExtend1=ge[1]),J}(this)}};var Vk=Lb,Hk={};le(["map","each","filter","indexOf","inherits","reduce","filter","bind","curry","isArray","isString","isObject","isFunction","extend","defaults","clone","merge"],function(e){Hk[e]=On[e]});var UM={};function T1(e,t){var n=e.mapDimension("defaultedLabel",!0),o=n.length;if(1===o)return Ec(e,t,n[0]);if(o){for(var a=[],u=0;u<n.length;u++){var l=Ec(e,t,n[u]);a.push(l)}return a.join(" ")}}function mp(e,t,n){mr.call(this),this.updateData(e,t,n)}le(["extendShape","extendPath","makePath","makeImage","mergePath","resizePath","createIcon","setHoverStyle","setLabelStyle","setTextStyle","setText","getFont","updateProps","initProps","getTransform","clipPointsByRect","clipRectByRect","registerShape","getShapeClass","Group","Image","Text","Circle","Sector","Ring","Polygon","Polyline","Rect","Line","BezierCurve","Arc","IncrementalDisplayable","CompoundPath","LinearGradient","RadialGradient","BoundingRect"],function(e){UM[e]=Mc[e]}),Ma.extend({type:"series.line",dependencies:["grid","polar"],getInitialData:function(e,t){return Pv(this.getSource(),this,{useEncodeDefaulter:!0})},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,clip:!0,label:{position:"top"},lineStyle:{width:2,type:"solid"},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0}});var rg=mp.prototype,jM=mp.getSymbolSize=function(e,t){var n=e.getItemVisual(t,"symbolSize");return n instanceof Array?n.slice():[+n,+n]};function $S(e){return[e[0]/2,e[1]/2]}function Wk(e,t){this.parent.drift(e,t)}rg._createSymbol=function(e,t,n,o,a){this.removeAll();var u=$d(e,-1,-1,2,2,t.getItemVisual(n,"color"),a);u.attr({z2:100,culling:!0,scale:$S(o)}),u.drift=Wk,this._symbolType=e,this.add(u)},rg.stopSymbolAnimation=function(e){this.childAt(0).stopAnimation(e)},rg.getSymbolPath=function(){return this.childAt(0)},rg.getScale=function(){return this.childAt(0).scale},rg.highlight=function(){this.childAt(0).trigger("emphasis")},rg.downplay=function(){this.childAt(0).trigger("normal")},rg.setZ=function(e,t){var n=this.childAt(0);n.zlevel=e,n.z=t},rg.setDraggable=function(e){var t=this.childAt(0);t.draggable=e,t.cursor=e?"move":t.cursor},rg.updateData=function(e,t,n){this.silent=!1;var o=e.getItemVisual(t,"symbol")||"circle",a=e.hostModel,u=jM(e,t),l=o!==this._symbolType;if(l){var f=e.getItemVisual(t,"symbolKeepAspect");this._createSymbol(o,e,t,u,f)}else(m=this.childAt(0)).silent=!1,Po(m,{scale:$S(u)},a,t);if(this._updateCommon(e,t,u,n),l){var m=this.childAt(0),v=n&&n.fadeIn,x={scale:m.scale.slice()};v&&(x.style={opacity:m.style.opacity}),m.scale=[0,0],v&&(m.style.opacity=0),al(m,x,a,t)}this._seriesModel=a};var JS=["itemStyle"],M1=["emphasis","itemStyle"],QS=["label"],eC=["emphasis","label"];function qM(e,t){if(!this.incremental&&!this.useHoverLayer)if("emphasis"===t){var n=this.__symbolOriginalScale,o=n[1]/n[0],a={scale:[Math.max(1.1*n[0],n[0]+3),Math.max(1.1*n[1],n[1]+3*o)]};this.animateTo(a,400,"elasticOut")}else"normal"===t&&this.animateTo({scale:this.__symbolOriginalScale},400,"elasticOut")}function ny(e){this.group=new mr,this._symbolCtor=e||mp}rg._updateCommon=function(e,t,n,o){var a=this.childAt(0),u=e.hostModel,l=e.getItemVisual(t,"color");"image"!==a.type?a.useStyle({strokeNoScale:!0}):a.setStyle({opacity:1,shadowBlur:null,shadowOffsetX:null,shadowOffsetY:null,shadowColor:null});var f=o&&o.itemStyle,m=o&&o.hoverItemStyle,v=o&&o.symbolOffset,x=o&&o.labelModel,C=o&&o.hoverLabelModel,k=o&&o.hoverAnimation,M=o&&o.cursorStyle;if(!o||e.hasItemOption){var E=o&&o.itemModel?o.itemModel:e.getItemModel(t);f=E.getModel(JS).getItemStyle(["color"]),m=E.getModel(M1).getItemStyle(),v=E.getShallow("symbolOffset"),x=E.getModel(QS),C=E.getModel(eC),k=E.getShallow("hoverAnimation"),M=E.getShallow("cursor")}else m=Ne({},m);var V=a.style,N=e.getItemVisual(t,"symbolRotate");a.attr("rotation",(N||0)*Math.PI/180||0),v&&a.attr("position",[nr(v[0],n[0]),nr(v[1],n[1])]),M&&a.attr("cursor",M),a.setColor(l,o&&o.symbolInnerColor),a.setStyle(f);var G=e.getItemVisual(t,"opacity");null!=G&&(V.opacity=G);var te=e.getItemVisual(t,"liftZ"),J=a.__z2Origin;null!=te?null==J&&(a.__z2Origin=a.z2,a.z2+=te):null!=J&&(a.z2=J,a.__z2Origin=null);var me=o&&o.useNameLabel;Ln(V,m,x,C,{labelFetcher:u,labelDataIndex:t,defaultText:function(ge,pe){return me?e.getName(ge):T1(e,ge)},isRectText:!0,autoColor:l}),a.__symbolOriginalScale=$S(n),a.hoverStyle=m,a.highDownOnUpdate=k&&u.isAnimationEnabled()?qM:null,Go(a)},rg.fadeOut=function(e,t){var n=this.childAt(0);this.silent=n.silent=!0,t&&t.keepLabel||(n.style.text=null),Po(n,{style:{opacity:0},scale:[0,0]},this._seriesModel,this.dataIndex,e)},Ie(mp,mr);var og=ny.prototype;function ig(e,t,n,o){return t&&!isNaN(t[0])&&!isNaN(t[1])&&!(o.isIgnore&&o.isIgnore(n))&&!(o.clipShape&&!o.clipShape.contain(t[0],t[1]))&&"none"!==e.getItemVisual(n,"symbol")}function Gk(e){return null==e||ln(e)||(e={isIgnore:e}),e||{}}function tC(e){var t=e.hostModel;return{itemStyle:t.getModel("itemStyle").getItemStyle(["color"]),hoverItemStyle:t.getModel("emphasis.itemStyle").getItemStyle(),symbolRotate:t.get("symbolRotate"),symbolOffset:t.get("symbolOffset"),hoverAnimation:t.get("hoverAnimation"),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label"),cursorStyle:t.get("cursor")}}function Bb(e,t,n){var o,V,N,G,a=e.getBaseAxis(),u=e.getOtherAxis(a),l=(V=n,N=0,G=u.scale.getExtent(),"start"===V?N=G[0]:"end"===V?N=G[1]:0<G[0]?N=G[0]:G[1]<0&&(N=G[1]),N),f=a.dim,m=u.dim,v=t.mapDimension(m),x=t.mapDimension(f),C="x"===m||"radius"===m?1:0,k=Ge(e.dimensions,function(E){return t.mapDimension(E)}),M=t.getCalculationInfo("stackResultDimension");return(o|=nm(t,k[0]))&&(k[0]=M),(o|=nm(t,k[1]))&&(k[1]=M),{dataDimsForPoint:k,valueStart:l,valueAxisDim:m,baseAxisDim:f,stacked:!!o,valueDim:v,baseDim:x,baseDataOffset:C,stackedOverDimension:t.getCalculationInfo("stackedOverDimension")}}function D1(e,t,n,o){var a=NaN;e.stacked&&(a=n.get(n.getCalculationInfo("stackedOverDimension"),o)),isNaN(a)&&(a=e.valueStart);var u=e.baseDataOffset,l=[];return l[u]=n.get(e.baseDim,o),l[1-u]=a,t.dataToPoint(l)}og.updateData=function(e,t){t=Gk(t);var n=this.group,o=e.hostModel,a=this._data,u=this._symbolCtor,l=tC(e);a||n.removeAll(),e.diff(a).add(function(f){var m=e.getItemLayout(f);if(ig(e,m,f,t)){var v=new u(e,f,l);v.attr("position",m),e.setItemGraphicEl(f,v),n.add(v)}}).update(function(f,m){var v=a.getItemGraphicEl(m),x=e.getItemLayout(f);ig(e,x,f,t)?(v?(v.updateData(e,f,l),Po(v,{position:x},o)):(v=new u(e,f)).attr("position",x),n.add(v),e.setItemGraphicEl(f,v)):n.remove(v)}).remove(function(f){var m=a.getItemGraphicEl(f);m&&m.fadeOut(function(){n.remove(m)})}).execute(),this._data=e},og.isPersistent=function(){return!0},og.updateLayout=function(){var e=this._data;e&&e.eachItemGraphicEl(function(t,n){var o=e.getItemLayout(n);t.attr("position",o)})},og.incrementalPrepareUpdate=function(e){this._seriesScope=tC(e),this._data=null,this.group.removeAll()},og.incrementalUpdate=function(e,t,n){function o(f){f.isGroup||(f.incremental=f.useHoverLayer=!0)}n=Gk(n);for(var a=e.start;a<e.end;a++){var u=t.getItemLayout(a);if(ig(t,u,a,n)){var l=new this._symbolCtor(t,a,this._seriesScope);l.traverse(o),l.attr("position",u),this.group.add(l),t.setItemGraphicEl(a,l)}}},og.remove=function(e){var t=this.group,n=this._data;n&&e?n.eachItemGraphicEl(function(o){o.fadeOut(function(){t.remove(o)})}):t.removeAll()};var aw=Yu,nC=pi,A1=li,zb=sn,ry=[],If=[],Jd=[];function Ll(e){return isNaN(e[0])||isNaN(e[1])}function rC(e,t,n,o,a,u,l,f,m,v){return"none"!==v&&v?function(x,C,k,M,E,V,N,G,te,J,me){for(var ge=0,pe=k,_e=0;_e<M;_e++){var Me=C[pe];if(E<=pe||pe<0)break;if(Ll(Me)){if(me){pe+=V;continue}break}if(pe===k)x[0<V?"moveTo":"lineTo"](Me[0],Me[1]);else if(0<te){var We=C[ge],Ke="y"===J?1:0,et=(Me[Ke]-We[Ke])*te;zb(If,We),If[Ke]=We[Ke]+et,zb(Jd,Me),Jd[Ke]=Me[Ke]-et,x.bezierCurveTo(If[0],If[1],Jd[0],Jd[1],Me[0],Me[1])}else x.lineTo(Me[0],Me[1]);ge=pe,pe+=V}return _e}.apply(this,arguments):function(x,C,k,M,E,V,N,G,te,J,me){for(var ge=0,pe=k,_e=0;_e<M;_e++){var Me=C[pe];if(E<=pe||pe<0)break;if(Ll(Me)){if(me){pe+=V;continue}break}if(pe===k)x[0<V?"moveTo":"lineTo"](Me[0],Me[1]),zb(If,Me);else if(0<te){var We=pe+V,Ke=C[We];if(me)for(;Ke&&Ll(C[We]);)Ke=C[We+=V];var et=.5,ut=C[ge];if(!(Ke=C[We])||Ll(Ke))zb(Jd,Me);else{var lt,vt;if(Ll(Ke)&&!me&&(Ke=Me),di(ry,Ke,ut),"x"===J||"y"===J){var Mt="x"===J?0:1;lt=Math.abs(Me[Mt]-ut[Mt]),vt=Math.abs(Me[Mt]-Ke[Mt])}else lt=os(Me,ut),vt=os(Me,Ke);A1(Jd,Me,ry,-te*(1-(et=vt/(vt+lt))))}aw(If,If,G),nC(If,If,N),aw(Jd,Jd,G),nC(Jd,Jd,N),x.bezierCurveTo(If[0],If[1],Jd[0],Jd[1],Me[0],Me[1]),A1(If,Me,ry,te*et)}else x.lineTo(Me[0],Me[1]);ge=pe,pe+=V}return _e}.apply(this,arguments)}function ac(e,t){var n=[1/0,1/0],o=[-1/0,-1/0];if(t)for(var a=0;a<e.length;a++){var u=e[a];u[0]<n[0]&&(n[0]=u[0]),u[1]<n[1]&&(n[1]=u[1]),u[0]>o[0]&&(o[0]=u[0]),u[1]>o[1]&&(o[1]=u[1])}return{min:t?n:o,max:t?o:n}}var Ws=so.extend({type:"ec-polyline",shape:{points:[],smooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},style:{fill:null,stroke:"#000"},brush:nv(so.prototype.brush),buildPath:function(e,t){var n=t.points,o=0,a=n.length,u=ac(n,t.smoothConstraint);if(t.connectNulls){for(;0<a&&Ll(n[a-1]);a--);for(;o<a&&Ll(n[o]);o++);}for(;o<a;)o+=rC(e,n,o,a,a,1,u.min,u.max,t.smooth,t.smoothMonotone,t.connectNulls)+1}}),Rv=so.extend({type:"ec-polygon",shape:{points:[],stackedOnPoints:[],smooth:0,stackedOnSmooth:0,smoothConstraint:!0,smoothMonotone:null,connectNulls:!1},brush:nv(so.prototype.brush),buildPath:function(e,t){var n=t.points,o=t.stackedOnPoints,a=0,u=n.length,l=t.smoothMonotone,f=ac(n,t.smoothConstraint),m=ac(o,t.smoothConstraint);if(t.connectNulls){for(;0<u&&Ll(n[u-1]);u--);for(;a<u&&Ll(n[a]);a++);}for(;a<u;){var v=rC(e,n,a,u,u,1,f.min,f.max,t.smooth,l,t.connectNulls);rC(e,o,a+v-1,v,u,-1,m.min,m.max,t.stackedOnSmooth,l,t.connectNulls),a+=v+1,e.closePath()}}});function sw(e,t,n){var o=e.getArea(),a=e.getBaseAxis().isHorizontal(),u=o.x,l=o.y,f=o.width,m=o.height,v=n.get("lineStyle.width")||2;u-=v/2,l-=v/2,f+=v,m+=v,u=Math.floor(u),f=Math.round(f);var x=new fi({shape:{x:u,y:l,width:f,height:m}});return t&&(x.shape[a?"width":"height"]=0,al(x,{shape:{width:f,height:m}},n)),x}function ag(e,t,n){var o=e.getArea(),a=new nl({shape:{cx:Vs(e.cx,1),cy:Vs(e.cy,1),r0:Vs(o.r0,1),r:Vs(o.r,1),startAngle:o.startAngle,endAngle:o.endAngle,clockwise:o.clockwise}});return t&&(a.shape.endAngle=o.startAngle,al(a,{shape:{endAngle:o.endAngle}},n)),a}function Fb(e,t,n){return e?"polar"===e.type?ag(e,t,n):"cartesian2d"===e.type?sw(e,t,n):null:null}function I1(e,t){if(e.length===t.length){for(var n=0;n<e.length;n++){var o=e[n],a=t[n];if(o[0]!==a[0]||o[1]!==a[1])return}return!0}}function oC(e,t){var n=[],o=[],a=[],u=[];return y0(e,n,o),y0(t,a,u),Math.max(Math.abs(n[0]-a[0]),Math.abs(n[1]-a[1]),Math.abs(o[0]-u[0]),Math.abs(o[1]-u[1]))}function O1(e){return"number"==typeof e?e:e?.5:0}function Lv(e,t,n){for(var o=t.getBaseAxis(),a="x"===o.dim||"radius"===o.dim?0:1,u=[],l=0;l<e.length-1;l++){var f=e[l+1],m=e[l];u.push(m);var v=[];switch(n){case"end":v[a]=f[a],v[1-a]=m[1-a],u.push(v);break;case"middle":var C=[];v[a]=C[a]=(m[a]+f[a])/2,v[1-a]=m[1-a],C[1-a]=f[1-a],u.push(v),u.push(C);break;default:v[a]=m[a],v[1-a]=f[1-a],u.push(v)}}return e[l]&&u.push(e[l]),u}function Bv(e,t,n){if("cartesian2d"!==e.type)return ag(e,t,n);var o=e.getBaseAxis().isHorizontal(),a=sw(e,t,n);if(!n.get("clip",!0)){var u=a.shape,l=Math.max(u.width,u.height);o?(u.y-=l,u.height+=2*l):(u.x-=l,u.width+=2*l)}return a}function zv(e,t,n){return{seriesType:e,performRawSeries:!0,reset:function(o,a,u){var l=o.getData(),f=o.get("symbol"),m=o.get("symbolSize"),v=o.get("symbolKeepAspect"),x=o.get("symbolRotate"),C=Ot(f),k=Ot(m),M=Ot(x),E=C||k||M,V=!C&&f?f:t;if(l.setVisual({legendSymbol:n||V,symbol:V,symbolSize:k?null:m,symbolKeepAspect:v,symbolRotate:x}),!a.isSeriesFiltered(o))return{dataEach:l.hasItemOption||E?function(G,te){if(E){var J=o.getRawValue(te),me=o.getDataParams(te);C&&G.setItemVisual(te,"symbol",f(J,me)),k&&G.setItemVisual(te,"symbolSize",m(J,me)),M&&G.setItemVisual(te,"symbolRotate",x(J,me))}if(G.hasItemOption){var ge=G.getItemModel(te),pe=ge.getShallow("symbol",!0),_e=ge.getShallow("symbolSize",!0),Me=ge.getShallow("symbolRotate",!0),We=ge.getShallow("symbolKeepAspect",!0);null!=pe&&G.setItemVisual(te,"symbol",pe),null!=_e&&G.setItemVisual(te,"symbolSize",_e),null!=Me&&G.setItemVisual(te,"symbolRotate",Me),null!=We&&G.setItemVisual(te,"symbolKeepAspect",We)}}:null}}}}function sg(e){return{seriesType:e,plan:po(),reset:function(t){var n=t.getData(),o=t.coordinateSystem,a=t.pipelineContext.large;if(o){var u=Ge(o.dimensions,function(m){return n.mapDimension(m)}).slice(0,2),l=u.length,f=n.getCalculationInfo("stackResultDimension");return nm(n,u[0])&&(u[0]=f),nm(n,u[1])&&(u[1]=f),l&&{progress:function(m,v){for(var C=a&&new Float32Array((m.end-m.start)*l),k=m.start,M=0,E=[],V=[];k<m.end;k++){var N;if(1===l){var G=v.get(u[0],k);N=!isNaN(G)&&o.dataToPoint(G,null,V)}else{G=E[0]=v.get(u[0],k);var te=E[1]=v.get(u[1],k);N=!isNaN(G)&&!isNaN(te)&&o.dataToPoint(E,null,V)}a?(C[M++]=N?N[0]:NaN,C[M++]=N?N[1]:NaN):v.setItemLayout(k,N&&N.slice()||[NaN,NaN])}a&&v.setLayout("symbolPoints",C)}}}}}}function aC(e,t){return Math.round(e.length/2)}Hs.extend({type:"line",init:function(){var e=new mr,t=new ny;this.group.add(t.group),this._symbolDraw=t,this._lineGroup=e},render:function(e,t,n){var o=e.coordinateSystem,a=this.group,u=e.getData(),l=e.getModel("lineStyle"),f=e.getModel("areaStyle"),m=u.mapArray(u.getItemLayout),v="polar"===o.type,x=this._coordSys,C=this._symbolDraw,k=this._polyline,M=this._polygon,E=this._lineGroup,V=e.get("animation"),N=!f.isEmpty(),G=f.get("origin"),te=function(ut,lt,vt){if(!vt.valueDim)return[];for(var Mt=[],Pt=0,Ct=lt.count();Pt<Ct;Pt++)Mt.push(D1(vt,ut,lt,Pt));return Mt}(o,u,Bb(o,u,G)),J=e.get("showSymbol"),me=J&&!v&&function iC(e,t,n){var o=e.get("showAllSymbol"),a="auto"===o;if(!o||a){var u=n.getAxesByScale("ordinal")[0];if(u&&(!a||!function(m,v){var x=m.getExtent(),C=Math.abs(x[1]-x[0])/m.scale.count();isNaN(C)&&(C=0);for(var k=v.count(),M=Math.max(1,Math.round(k/5)),E=0;E<k;E+=M)if(1.5*mp.getSymbolSize(v,E)[m.isHorizontal()?1:0]>C)return!1;return!0}(u,t))){var l=t.mapDimension(u.dim),f={};return le(u.getViewLabels(),function(m){f[m.tickValue]=1}),function(m){return!f.hasOwnProperty(t.get(l,m))}}}}(e,u,o),ge=this._data;ge&&ge.eachItemGraphicEl(function(ut,lt){ut.__temp&&(a.remove(ut),ge.setItemGraphicEl(lt,null))}),J||C.remove(),a.add(E);var pe,_e=!v&&e.get("step");o&&o.getArea&&e.get("clip",!0)&&(null!=(pe=o.getArea()).width?(pe.x-=.1,pe.y-=.1,pe.width+=.2,pe.height+=.2):pe.r0&&(pe.r0-=.5,pe.r1+=.5)),this._clipShapeForSymbol=pe,k&&x.type===o.type&&_e===this._step?(N&&!M?M=this._newPolygon(m,te,o,V):M&&!N&&(E.remove(M),M=this._polygon=null),E.setClipPath(Bv(o,!1,e)),J&&C.updateData(u,{isIgnore:me,clipShape:pe}),u.eachItemGraphicEl(function(ut){ut.stopAnimation(!0)}),I1(this._stackedOnPoints,te)&&I1(this._points,m)||(V?this._updateAnimation(u,te,o,n,_e,G):(_e&&(m=Lv(m,o,_e),te=Lv(te,o,_e)),k.setShape({points:m}),M&&M.setShape({points:m,stackedOnPoints:te})))):(J&&C.updateData(u,{isIgnore:me,clipShape:pe}),_e&&(m=Lv(m,o,_e),te=Lv(te,o,_e)),k=this._newPolyline(m,o,V),N&&(M=this._newPolygon(m,te,o,V)),E.setClipPath(Bv(o,!0,e)));var Me=function(ut,lt){var vt=ut.getVisual("visualMeta");if(vt&&vt.length&&ut.count()&&"cartesian2d"===lt.type){for(var Mt,Pt,Ct=vt.length-1;0<=Ct;Ct--){var Rn=ut.getDimensionInfo(ut.dimensions[vt[Ct].dimension]);if("x"===(Mt=Rn&&Rn.coordDim)||"y"===Mt){Pt=vt[Ct];break}}if(Pt){var Cn=lt.getAxis(Mt),Jn=Ge(Pt.stops,function(ga){return{coord:Cn.toGlobalCoord(Cn.dataToCoord(ga.value)),color:ga.color}}),dr=Jn.length,$r=Pt.outerColors.slice();dr&&Jn[0].coord>Jn[dr-1].coord&&(Jn.reverse(),$r.reverse());var zn=Jn[0].coord-10,Ur=Jn[dr-1].coord+10,Jr=Ur-zn;if(Jr<.001)return"transparent";le(Jn,function(ga){ga.offset=(ga.coord-zn)/Jr}),Jn.push({offset:dr?Jn[dr-1].offset:.5,color:$r[1]||"transparent"}),Jn.unshift({offset:dr?Jn[0].offset:.5,color:$r[0]||"transparent"});var _o=new Kf(0,0,0,0,Jn,!0);return _o[Mt]=zn,_o[Mt+"2"]=Ur,_o}}}(u,o)||u.getVisual("color");k.useStyle(Ee(l.getLineStyle(),{fill:"none",stroke:Me,lineJoin:"bevel"}));var We=e.get("smooth");if(We=O1(e.get("smooth")),k.setShape({smooth:We,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")}),M){var Ke=u.getCalculationInfo("stackedOnSeries"),et=0;M.useStyle(Ee(f.getAreaStyle(),{fill:Me,opacity:.7,lineJoin:"bevel"})),Ke&&(et=O1(Ke.get("smooth"))),M.setShape({smooth:We,stackedOnSmooth:et,smoothMonotone:e.get("smoothMonotone"),connectNulls:e.get("connectNulls")})}this._data=u,this._coordSys=o,this._stackedOnPoints=te,this._points=m,this._step=_e,this._valueOrigin=G},dispose:function(){},highlight:function(e,t,n,o){var a=e.getData(),u=Qa(a,o);if(!(u instanceof Array)&&null!=u&&0<=u){var l=a.getItemGraphicEl(u);if(!l){var f=a.getItemLayout(u);if(!f||this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(f[0],f[1]))return;(l=new mp(a,u)).position=f,l.setZ(e.get("zlevel"),e.get("z")),l.ignore=isNaN(f[0])||isNaN(f[1]),l.__temp=!0,a.setItemGraphicEl(u,l),l.stopSymbolAnimation(!0),this.group.add(l)}l.highlight()}else Hs.prototype.highlight.call(this,e,t,n,o)},downplay:function(e,t,n,o){var a=e.getData(),u=Qa(a,o);if(null!=u&&0<=u){var l=a.getItemGraphicEl(u);l&&(l.__temp?(a.setItemGraphicEl(u,null),this.group.remove(l)):l.downplay())}else Hs.prototype.downplay.call(this,e,t,n,o)},_newPolyline:function(e){var t=this._polyline;return t&&this._lineGroup.remove(t),t=new Ws({shape:{points:e},silent:!0,z2:10}),this._lineGroup.add(t),this._polyline=t},_newPolygon:function(e,t){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new Rv({shape:{points:e,stackedOnPoints:t},silent:!0}),this._lineGroup.add(n),this._polygon=n},_updateAnimation:function(e,t,n,o,a,u){var l=this._polyline,f=this._polygon,m=e.hostModel,v=function(te,J,me,ge,pe,_e,Me,We){for(var Ke=function(Sh,sf){var Ox=[];return sf.diff(Sh).add(function(Yy){Ox.push({cmd:"+",idx:Yy})}).update(function(Yy,NM){Ox.push({cmd:"=",idx:NM,idx1:Yy})}).remove(function(Yy){Ox.push({cmd:"-",idx:Yy})}).execute(),Ox}(te,J),et=[],ut=[],lt=[],vt=[],Mt=[],Pt=[],Ct=[],Zt=Bb(pe,J,Me),An=Bb(_e,te,We),Rn=0;Rn<Ke.length;Rn++){var Cn=Ke[Rn],Jn=!0;switch(Cn.cmd){case"=":var dr=te.getItemLayout(Cn.idx),$r=J.getItemLayout(Cn.idx1);(isNaN(dr[0])||isNaN(dr[1]))&&(dr=$r.slice()),et.push(dr),ut.push($r),lt.push(me[Cn.idx]),vt.push(ge[Cn.idx1]),Ct.push(J.getRawIndex(Cn.idx1));break;case"+":var zn=Cn.idx;et.push(pe.dataToPoint([J.get(Zt.dataDimsForPoint[0],zn),J.get(Zt.dataDimsForPoint[1],zn)])),ut.push(J.getItemLayout(zn).slice()),lt.push(D1(Zt,pe,J,zn)),vt.push(ge[zn]),Ct.push(J.getRawIndex(zn));break;case"-":var Ur=te.getRawIndex(zn=Cn.idx);Ur!==zn?(et.push(te.getItemLayout(zn)),ut.push(_e.dataToPoint([te.get(An.dataDimsForPoint[0],zn),te.get(An.dataDimsForPoint[1],zn)])),lt.push(me[zn]),vt.push(D1(An,_e,te,zn)),Ct.push(Ur)):Jn=!1}Jn&&(Mt.push(Cn),Pt.push(Pt.length))}Pt.sort(function(Sh,sf){return Ct[Sh]-Ct[sf]});var Jr=[],_o=[],ga=[],ji=[],Ia=[];for(Rn=0;Rn<Pt.length;Rn++)Jr[Rn]=et[zn=Pt[Rn]],_o[Rn]=ut[zn],ga[Rn]=lt[zn],ji[Rn]=vt[zn],Ia[Rn]=Mt[zn];return{current:Jr,next:_o,stackedOnCurrent:ga,stackedOnNext:ji,status:Ia}}(this._data,e,this._stackedOnPoints,t,this._coordSys,n,this._valueOrigin,u),x=v.current,C=v.stackedOnCurrent,k=v.next,M=v.stackedOnNext;if(a&&(x=Lv(v.current,n,a),C=Lv(v.stackedOnCurrent,n,a),k=Lv(v.next,n,a),M=Lv(v.stackedOnNext,n,a)),3e3<oC(x,k)||f&&3e3<oC(C,M))return l.setShape({points:k}),void(f&&f.setShape({points:k,stackedOnPoints:M}));l.shape.__points=v.current,l.shape.points=x,Po(l,{shape:{points:k}},m),f&&(f.setShape({points:x,stackedOnPoints:C}),Po(f,{shape:{points:k,stackedOnPoints:M}},m));for(var E=[],V=v.status,N=0;N<V.length;N++)if("="===V[N].cmd){var G=e.getItemGraphicEl(V[N].idx1);G&&E.push({el:G,ptIdx:N})}l.animators&&l.animators.length&&l.animators[0].during(function(){for(var te=0;te<E.length;te++)E[te].el.attr("position",l.shape.__points[E[te].ptIdx])})},remove:function(e){var t=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl(function(o,a){o.__temp&&(t.remove(o),n.setItemGraphicEl(a,null))}),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._data=null}});var Uk={average:function(e){for(var t=0,n=0,o=0;o<e.length;o++)isNaN(e[o])||(t+=e[o],n++);return 0===n?NaN:t/n},sum:function(e){for(var t=0,n=0;n<e.length;n++)t+=e[n]||0;return t},max:function(e){for(var t=-1/0,n=0;n<e.length;n++)e[n]>t&&(t=e[n]);return isFinite(t)?t:NaN},min:function(e){for(var t=1/0,n=0;n<e.length;n++)e[n]<t&&(t=e[n]);return isFinite(t)?t:NaN},nearest:function(e){return e[0]}};function XM(e){return this._axes[e]}function sC(e){this._axes={},this._dimList=[],this.name=e||""}function E1(e){sC.call(this,e)}function uw(e,t,n,o,a){mu.call(this,e,t,n),this.type=o||"value",this.position=a||"bottom"}sC.prototype={constructor:sC,type:"cartesian",getAxis:function(e){return this._axes[e]},getAxes:function(){return Ge(this._dimList,XM,this)},getAxesByScale:function(e){return e=e.toLowerCase(),ht(this.getAxes(),function(t){return t.scale.type===e})},addAxis:function(e){var t=e.dim;this._axes[t]=e,this._dimList.push(t)},dataToCoord:function(e){return this._dataCoordConvert(e,"dataToCoord")},coordToData:function(e){return this._dataCoordConvert(e,"coordToData")},_dataCoordConvert:function(e,t){for(var n=this._dimList,o=e instanceof Array?[]:{},a=0;a<n.length;a++){var u=n[a];o[u]=this._axes[u][t](e[u])}return o}},E1.prototype={constructor:E1,type:"cartesian2d",dimensions:["x","y"],getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},containPoint:function(e){var t=this.getAxis("x"),n=this.getAxis("y");return t.contain(t.toLocalCoord(e[0]))&&n.contain(n.toLocalCoord(e[1]))},containData:function(e){return this.getAxis("x").containData(e[0])&&this.getAxis("y").containData(e[1])},dataToPoint:function(e,t,n){var o=this.getAxis("x"),a=this.getAxis("y");return(n=n||[])[0]=o.toGlobalCoord(o.dataToCoord(e[0])),n[1]=a.toGlobalCoord(a.dataToCoord(e[1])),n},clampData:function(e,t){var n=this.getAxis("x").scale,o=this.getAxis("y").scale,a=n.getExtent(),u=o.getExtent(),l=n.parse(e[0]),f=o.parse(e[1]);return(t=t||[])[0]=Math.min(Math.max(Math.min(a[0],a[1]),l),Math.max(a[0],a[1])),t[1]=Math.min(Math.max(Math.min(u[0],u[1]),f),Math.max(u[0],u[1])),t},pointToData:function(e,t){var n=this.getAxis("x"),o=this.getAxis("y");return(t=t||[])[0]=n.coordToData(n.toLocalCoord(e[0])),t[1]=o.coordToData(o.toLocalCoord(e[1])),t},getOtherAxis:function(e){return this.getAxis("x"===e.dim?"y":"x")},getArea:function(){var e=this.getAxis("x").getGlobalExtent(),t=this.getAxis("y").getGlobalExtent(),n=Math.min(e[0],e[1]),o=Math.min(t[0],t[1]);return new ii(n,o,Math.max(e[0],e[1])-n,Math.max(t[0],t[1])-o)}},Ie(E1,sC),uw.prototype={constructor:uw,index:0,getAxesOnZeroOf:null,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},getGlobalExtent:function(e){var t=this.getExtent();return t[0]=this.toGlobalCoord(t[0]),t[1]=this.toGlobalCoord(t[1]),e&&t[0]>t[1]&&t.reverse(),t},getOtherAxis:function(){this.grid.getOtherAxis()},pointToData:function(e,t){return this.coordToData(this.toLocalCoord(e["x"===this.dim?0:1]),t)},toLocalCoord:null,toGlobalCoord:null},Ie(uw,mu);var jk={show:!0,zlevel:0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#333",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#ccc"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.3)","rgba(200,200,200,0.3)"]}}},Fv={};function oy(e,t,n,o){le(Vb,function(a){t.extend({type:e+"Axis."+a,mergeDefaultAndTheme:function(u,l){var f=this.layoutMode,m=f?Fg(u):{};xe(u,l.getTheme().get(a+"Axis")),xe(u,this.getDefaultOption()),u.type=n(e,u),f&&Ic(u,m,f)},optionUpdated:function(){"category"===this.option.type&&(this.__ordinalMeta=b1.createByAxisModel(this))},getCategories:function(u){var l=this.option;if("category"===l.type)return u?l.data:this.__ordinalMeta.categories},getOrdinalMeta:function(){return this.__ordinalMeta},defaultOption:Ae([{},Fv[a+"Axis"],o],!0)})}),ci.registerSubTypeDefaulter(e+"Axis",pn(n,e))}Fv.categoryAxis=xe({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},jk),Fv.valueAxis=xe({boundaryGap:[0,0],splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#eee",width:1}}},jk),Fv.timeAxis=Ee({scale:!0,min:"dataMin",max:"dataMax"},Fv.valueAxis),Fv.logAxis=Ee({scale:!0,logBase:10},Fv.valueAxis);var Vb=["value","category","time","log"],Hb=ci.extend({type:"cartesian2dAxis",axis:null,init:function(){Hb.superApply(this,"init",arguments),this.resetRange()},mergeOption:function(){Hb.superApply(this,"mergeOption",arguments),this.resetRange()},restoreData:function(){Hb.superApply(this,"restoreData",arguments),this.resetRange()},getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"grid",index:this.option.gridIndex,id:this.option.gridId})[0]}});function uC(e,t){return t.type||(t.data?"category":"value")}xe(Hb.prototype,ic);var qk={offset:0};function lw(e,t){return e.getCoordSysModel()===t}function pp(e,t,n){this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this._initCartesian(e,t,n),this.model=e}oy("x",Hb,uC,qk),oy("y",Hb,uC,qk),ci.extend({type:"grid",dependencies:["xAxis","yAxis"],layoutMode:"box",coordinateSystem:null,defaultOption:{show:!1,zlevel:0,z:0,left:"10%",top:60,right:"10%",bottom:60,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"}});var gd=pp.prototype;function lC(e,t,n,o){n.getAxesOnZeroOf=function(){return a?[a]:[]};var a,u=e[t],l=n.model,f=l.get("axisLine.onZero"),m=l.get("axisLine.onZeroAxisIndex");if(f){if(null!=m)cw(u[m])&&(a=u[m]);else for(var v in u)if(u.hasOwnProperty(v)&&cw(u[v])&&!o[x(u[v])]){a=u[v];break}a&&(o[x(a)]=!0)}function x(C){return C.dim+"_"+C.index}}function cw(e){return e&&"category"!==e.type&&"time"!==e.type&&function(t){var n=t.scale.getExtent(),o=n[0],a=n[1];return!(0<o&&0<a||o<0&&a<0)}(e)}gd.type="grid",gd.axisPointerEnabled=!0,gd.getRect=function(){return this._rect},gd.update=function(e,t){var n=this._axesMap;this._updateScale(e,this.model),le(n.x,function(a){Ui(a.scale,a.model)}),le(n.y,function(a){Ui(a.scale,a.model)});var o={};le(n.x,function(a){lC(n,"y",a,o)}),le(n.y,function(a){lC(n,"x",a,o)}),this.resize(this.model,t)},gd.resize=function(e,t,n){var o=si(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()});this._rect=o;var a=this._axesList;function u(){le(a,function(l){var x,C,k,M,f=l.isHorizontal(),m=f?[0,o.width]:[0,o.height],v=l.inverse?1:0;l.setExtent(m[v],m[1-v]),C=f?o.x:o.y,k=(x=l).getExtent(),M=k[0]+k[1],x.toGlobalCoord="x"===x.dim?function(E){return E+C}:function(E){return M-E+C},x.toLocalCoord="x"===x.dim?function(E){return E-C}:function(E){return M-E+C}})}u(),!n&&e.get("containLabel")&&(le(a,function(l){if(!l.model.get("axisLabel.inside")){var f=function(x){var k=x.scale;if(x.model.get("axisLabel.show")&&!k.isBlank()){var M,E,V="category"===x.type,N=k.getExtent();E=V?k.count():(M=k.getTicks()).length;var G,te,me,ge,pe,_e,Me,We,Ke=x.getLabelModel(),et=Kd(x),ut=1;40<E&&(ut=Math.ceil(E/40));for(var lt=0;lt<E;lt+=ut){var vt=et(M?M[lt]:N[0]+lt),Pt=(te=Ke.getTextRect(vt),me=(Ke.get("rotate")||0)*Math.PI/180,_e=(ge=te.plain()).height,Me=(pe=ge.width)*Math.abs(Math.cos(me))+Math.abs(_e*Math.sin(me)),We=pe*Math.abs(Math.sin(me))+Math.abs(_e*Math.cos(me)),new ii(ge.x,ge.y,Me,We));G?G.union(Pt):G=Pt}return G}}(l);if(f){var m=l.isHorizontal()?"height":"width",v=l.model.get("axisLabel.margin");o[m]-=f[m]+v,"top"===l.position?o.y+=f.height+v:"left"===l.position&&(o.x+=f.width+v)}}}),u())},gd.getAxis=function(e,t){var n=this._axesMap[e];if(null!=n){if(null==t)for(var o in n)if(n.hasOwnProperty(o))return n[o];return n[t]}},gd.getAxes=function(){return this._axesList.slice()},gd.getCartesian=function(e,t){if(null!=e&&null!=t)return this._coordsMap["x"+e+"y"+t];ln(e)&&(t=e.yAxisIndex,e=e.xAxisIndex);for(var o=0,a=this._coordsList;o<a.length;o++)if(a[o].getAxis("x").index===e||a[o].getAxis("y").index===t)return a[o]},gd.getCartesians=function(){return this._coordsList.slice()},gd.convertToPixel=function(e,t,n){var o=this._findConvertTarget(e,t);return o.cartesian?o.cartesian.dataToPoint(n):o.axis?o.axis.toGlobalCoord(o.axis.dataToCoord(n)):null},gd.convertFromPixel=function(e,t,n){var o=this._findConvertTarget(e,t);return o.cartesian?o.cartesian.pointToData(n):o.axis?o.axis.coordToData(o.axis.toLocalCoord(n)):null},gd._findConvertTarget=function(e,t){var n,o,a=t.seriesModel,u=t.xAxisModel||a&&a.getReferringComponents("xAxis")[0],l=t.yAxisModel||a&&a.getReferringComponents("yAxis")[0],f=t.gridModel;return a?$e(this._coordsList,n=a.coordinateSystem)<0&&(n=null):u&&l?n=this.getCartesian(u.componentIndex,l.componentIndex):u?o=this.getAxis("x",u.componentIndex):l?o=this.getAxis("y",l.componentIndex):f&&f.coordinateSystem===this&&(n=this._coordsList[0]),{cartesian:n,axis:o}},gd.containPoint=function(e){var t=this._coordsList[0];if(t)return t.containPoint(e)},gd._initCartesian=function(e,t,n){var o={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},u={x:0,y:0};if(t.eachComponent("xAxis",l("x"),this),t.eachComponent("yAxis",l("y"),this),!u.x||!u.y)return this._axesMap={},void(this._axesList=[]);function l(f){return function(m,v){if(lw(m,e)){var x=m.get("position");"x"===f?"top"!==x&&"bottom"!==x&&(x=o.bottom?"top":"bottom"):"left"!==x&&"right"!==x&&(x=o.left?"right":"left"),o[x]=!0;var C=new uw(f,uh(m),[0,0],m.get("type"),x);C.onBand="category"===C.type&&m.get("boundaryGap"),C.inverse=m.get("inverse"),(m.axis=C).model=m,C.grid=this,C.index=v,this._axesList.push(C),a[f][v]=C,u[f]++}}}le((this._axesMap=a).x,function(f,m){le(a.y,function(v,x){var C="x"+m+"y"+x,k=new E1(C);k.grid=this,k.model=e,this._coordsMap[C]=k,this._coordsList.push(k),k.addAxis(f),k.addAxis(v)},this)},this)},gd._updateScale=function(e,t){function n(o,a){le(o.mapDimension(a.dim,!0),function(u){a.scale.unionExtentFromData(o,y1(o,u))})}le(this._axesList,function(o){o.scale.setExtent(1/0,-1/0)}),e.eachSeries(function(o){if(iy(o)){var a=Wb(o),u=a[0],l=a[1];if(!lw(u,t)||!lw(l,t))return;var f=this.getCartesian(u.componentIndex,l.componentIndex),m=o.getData(),v=f.getAxis("x"),x=f.getAxis("y");"list"===m.type&&(n(m,v),n(m,x))}},this)},gd.getTooltipAxes=function(e){var t=[],n=[];return le(this.getCartesians(),function(o){var a=null!=e&&"auto"!==e?o.getAxis(e):o.getBaseAxis(),u=o.getOtherAxis(a);$e(t,a)<0&&t.push(a),$e(n,u)<0&&n.push(u)}),{baseAxes:t,otherAxes:n}};var YM=["xAxis","yAxis"];function Wb(e){return Ge(YM,function(t){return e.getReferringComponents(t)[0]})}function iy(e){return"cartesian2d"===e.get("coordinateSystem")}function zc(e,t){this.opt=t,this.axisModel=e,Ee(t,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0}),this.group=new mr;var n=new mr({position:t.position.slice(),rotation:t.rotation});n.updateTransform(),this._transform=n.transform,this._dumbGroup=n}pp.create=function(e,t){var n=[];return e.eachComponent("grid",function(o,a){var u=new pp(o,e,t);u.name="grid_"+a,u.resize(o,t,!0),o.coordinateSystem=u,n.push(u)}),e.eachSeries(function(o){if(iy(o)){var a=Wb(o),u=a[0],l=a[1],f=u.getCoordSysModel().coordinateSystem;o.coordinateSystem=f.getCartesian(u.componentIndex,l.componentIndex)}}),n},pp.dimensions=pp.prototype.dimensions=E1.prototype.dimensions,lu.register("cartesian2d",pp);var ay=Math.PI;zc.prototype={constructor:zc,hasBuilder:function(e){return!!Gb[e]},add:function(e){Gb[e].call(this)},getGroup:function(){return this.group}};var Gb={axisLine:function(){var e=this.opt,t=this.axisModel;if(t.get("axisLine.show")){var n=this.axisModel.axis.getExtent(),o=this._transform,a=[n[0],0],u=[n[1],0];o&&(ur(a,a,o),ur(u,u,o));var l=Ne({lineCap:"round"},t.getModel("axisLine.lineStyle").getLineStyle());this.group.add(new $s({anid:"line",subPixelOptimize:!0,shape:{x1:a[0],y1:a[1],x2:u[0],y2:u[1]},style:l,strokeContainThreshold:e.strokeContainThreshold||5,silent:!0,z2:1}));var f=t.get("axisLine.symbol"),m=t.get("axisLine.symbolSize"),v=t.get("axisLine.symbolOffset")||0;if("number"==typeof v&&(v=[v,v]),null!=f){"string"==typeof f&&(f=[f,f]),"string"!=typeof m&&"number"!=typeof m||(m=[m,m]);var x=m[0],C=m[1];le([{rotate:e.rotation+Math.PI/2,offset:v[0],r:0},{rotate:e.rotation-Math.PI/2,offset:v[1],r:Math.sqrt((a[0]-u[0])*(a[0]-u[0])+(a[1]-u[1])*(a[1]-u[1]))}],function(k,M){if("none"!==f[M]&&null!=f[M]){var E=$d(f[M],-x/2,-C/2,x,C,l.stroke,!0),V=k.r+k.offset,N=[a[0]+V*Math.cos(e.rotation),a[1]-V*Math.sin(e.rotation)];E.attr({rotation:k.rotate,position:N,silent:!0,z2:11}),this.group.add(E)}},this)}}},axisTickLabel:function(){var e=this.axisModel,t=this.opt,n=function(o,a,u){var l=a.axis,f=a.getModel("axisTick");if(f.get("show")&&!l.scale.isBlank()){for(var m=f.getModel("lineStyle"),v=u.tickDirection*f.get("length"),x=dC(l.getTicksCoords(),o._transform,v,Ee(m.getLineStyle(),{stroke:a.get("axisLine.lineStyle.color")}),"ticks"),C=0;C<x.length;C++)o.group.add(x[C]);return x}}(this,e,t);(function(o,a,u){if(!Iu(o.axis)){var l=o.get("axisLabel.showMinLabel"),f=o.get("axisLabel.showMaxLabel"),m=(a=a||[])[0],v=a[1],x=a[a.length-1],C=a[a.length-2],k=(u=u||[])[0],M=u[1],E=u[u.length-1],V=u[u.length-2];!1===l?(md(m),md(k)):Hv(m,v)&&(l?(md(v),md(M)):(md(m),md(k))),!1===f?(md(x),md(E)):Hv(C,x)&&(f?(md(C),md(V)):(md(x),md(E)))}})(e,function(o,a,u){var l=a.axis;if(Gr(u.axisLabelShow,a.get("axisLabel.show"))&&!l.scale.isBlank()){var f=a.getModel("axisLabel"),m=f.get("margin"),v=l.getViewLabels(),x=(Gr(u.labelRotate,f.get("rotate"))||0)*ay/180,C=Xk(u.rotation,x,u.labelDirection),k=a.getCategories&&a.getCategories(!0),M=[],E=dw(a),V=a.get("triggerEvent");return le(v,function(N,G){var te=N.tickValue,J=N.formattedLabel,me=N.rawLabel,ge=f;k&&k[te]&&k[te].textStyle&&(ge=new ei(k[te].textStyle,f,a.ecModel));var pe=ge.getTextColor()||a.get("axisLine.lineStyle.color"),_e=[l.dataToCoord(te),u.labelOffset+u.labelDirection*m],Me=new Yo({anid:"label_"+te,position:_e,rotation:C.rotation,silent:E,z2:10});Ta(Me.style,ge,{text:J,textAlign:ge.getShallow("align",!0)||C.textAlign,textVerticalAlign:ge.getShallow("verticalAlign",!0)||ge.getShallow("baseline",!0)||C.textVerticalAlign,textFill:"function"==typeof pe?pe("category"===l.type?me:"value"===l.type?te+"":te,G):pe}),V&&(Me.eventData=Vv(a),Me.eventData.targetType="axisLabel",Me.eventData.value=me),o._dumbGroup.add(Me),Me.updateTransform(),M.push(Me),o.group.add(Me),Me.decomposeTransform()}),M}}(this,e,t),n),function(o,a,u){var l=a.axis,f=a.getModel("minorTick");if(f.get("show")&&!l.scale.isBlank()){var m=l.getMinorTicksCoords();if(m.length)for(var v=f.getModel("lineStyle"),x=u.tickDirection*f.get("length"),C=Ee(v.getLineStyle(),Ee(a.getModel("axisTick").getLineStyle(),{stroke:a.get("axisLine.lineStyle.color")})),k=0;k<m.length;k++)for(var M=dC(m[k],o._transform,x,C,"minorticks_"+k),E=0;E<M.length;E++)o.group.add(M[E])}}(this,e,t)},axisName:function(){var _e,We,et,ut,lt,vt,e=this.opt,t=this.axisModel,n=Gr(e.axisName,t.get("name"));if(n){var o,a,u=t.get("nameLocation"),l=e.nameDirection,f=t.getModel("nameTextStyle"),m=t.get("nameGap")||0,v=this.axisModel.axis.getExtent(),x=v[0]>v[1]?-1:1,C=["start"===u?v[0]-x*m:"end"===u?v[1]+x*m:(v[0]+v[1])/2,cC(u)?e.labelOffset+l*m:0],k=t.get("nameRotate");null!=k&&(k=k*ay/180),cC(u)?o=Xk(e.rotation,null!=k?k:e.rotation,l):(_e=u,We=v,ut=e1((k||0)-e.rotation),lt=We[0]>We[1],vt="start"===_e&&!lt||"start"!==_e&&lt,o={rotation:ut,textAlign:db(ut-ay/2)?(et=vt?"bottom":"top","center"):db(ut-1.5*ay)?(et=vt?"top":"bottom","center"):(et="middle",ut<1.5*ay&&ay/2<ut?vt?"left":"right":vt?"right":"left"),textVerticalAlign:et},null!=(a=e.axisNameAvailableWidth)&&(a=Math.abs(a/Math.sin(o.rotation)),isFinite(a)||(a=null)));var M=f.getFont(),E=t.get("nameTruncate",!0)||{},V=E.ellipsis,N=Gr(e.nameTruncateMaxWidth,E.maxWidth,a),G=null!=V&&null!=N?zg(n,N,M,V,{minChar:2,placeholder:E.placeholder}):n,te=t.get("tooltip",!0),J=t.mainType,me={componentType:J,name:n,$vars:["name"]};me[J+"Index"]=t.componentIndex;var ge=new Yo({anid:"name",__fullText:n,__truncatedText:G,position:C,rotation:o.rotation,silent:dw(t),z2:1,tooltip:te&&te.show?Ne({content:n,formatter:function(){return n},formatterParams:me},te):null});Ta(ge.style,f,{text:G,textFont:M,textFill:f.getTextColor()||t.get("axisLine.lineStyle.color"),textAlign:f.get("align")||o.textAlign,textVerticalAlign:f.get("verticalAlign")||o.textVerticalAlign}),t.get("triggerEvent")&&(ge.eventData=Vv(t),ge.eventData.targetType="axisName",ge.eventData.name=n),this._dumbGroup.add(ge),ge.updateTransform(),this.group.add(ge),ge.decomposeTransform()}}},Vv=zc.makeAxisEventDataBase=function(e){var t={componentType:e.mainType,componentIndex:e.componentIndex};return t[e.mainType+"Index"]=e.componentIndex,t},Xk=zc.innerTextLayout=function(e,t,n){var o,a=e1(t-e);return{rotation:a,textAlign:db(a)?(o=0<n?"top":"bottom","center"):db(a-ay)?(o=0<n?"bottom":"top","center"):(o="middle",0<a&&a<ay?0<n?"right":"left":0<n?"left":"right"),textVerticalAlign:o}},dw=zc.isLabelSilent=function(e){var t=e.get("tooltip");return e.get("silent")||!(e.get("triggerEvent")||t&&t.show)};function md(e){e&&(e.ignore=!0)}function Hv(e,t){var n=e&&e.getBoundingRect().clone(),o=t&&t.getBoundingRect().clone();if(n&&o){var a=Fa([]);return Yc(a,a,-e.rotation),n.applyTransform(pa([],a,e.getLocalTransform())),o.applyTransform(pa([],a,t.getLocalTransform())),n.intersect(o)}}function cC(e){return"middle"===e||"center"===e}function dC(e,t,n,o,a){for(var u=[],l=[],f=[],m=0;m<e.length;m++){var v=e[m].coord;l[0]=v,f[l[1]=0]=v,f[1]=n,t&&(ur(l,l,t),ur(f,f,t));var x=new $s({anid:a+"_"+e[m].tickValue,subPixelOptimize:!0,shape:{x1:l[0],y1:l[1],x2:f[0],y2:f[1]},style:o,z2:2,silent:!0});u.push(x)}return u}var vp=le,fw=pn;function Wv(e,t){return"all"===e||en(e)&&0<=$e(e,t)||e===t}function sy(e){var t=(e.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return t&&t.axesInfo[Ya(e)]}function hw(e){return!!e.get("handle.show")}function Ya(e){return e.type+"||"+e.id}var Fc=Ts({type:"axis",_axisPointer:null,axisPointerClass:null,render:function(e,t,n,o){this.axisPointerClass&&function(a){var u=sy(a);if(u){var l=u.axisPointerModel,f=u.axis.scale,m=l.option,v=l.get("status"),x=l.get("value");null!=x&&(x=f.parse(x));var C=hw(l);null==v&&(m.status=C?"show":"hide");var k=f.getExtent().slice();k[0]>k[1]&&k.reverse(),(null==x||x>k[1])&&(x=k[1]),x<k[0]&&(x=k[0]),m.value=x,C&&(m.status=u.axis.scale.isBlank()?"hide":"show")}}(e),Fc.superApply(this,"render",arguments),Ub(this,e,0,n,0,!0)},updateAxisPointer:function(e,t,n,o,a){Ub(this,e,0,n,0,!1)},remove:function(e,t){var n=this._axisPointer;n&&n.remove(t),Fc.superApply(this,"remove",arguments)},dispose:function(e,t){P1(this,t),Fc.superApply(this,"dispose",arguments)}});function Ub(e,t,n,o,a,u){var v,l=Fc.getAxisPointerClass(e.axisPointerClass);if(l){var f=(v=sy(t))&&v.axisPointerModel;f?(e._axisPointer||(e._axisPointer=new l)).render(t,f,o,u):P1(e,o)}}function P1(e,t,n){var o=e._axisPointer;o&&o.dispose(t,n),e._axisPointer=null}var yp=[];function Gv(e,t,n){n=n||{};var o=e.coordinateSystem,a=t.axis,u={},l=a.getAxesOnZeroOf()[0],f=a.position,m=l?"onZero":f,v=a.dim,x=o.getRect(),C=[x.x,x.x+x.width,x.y,x.y+x.height],k={left:0,right:1,top:0,bottom:1,onZero:2},M=t.get("offset")||0,E="x"===v?[C[2]-M,C[3]+M]:[C[0]-M,C[1]+M];if(l){var V=l.toGlobalCoord(l.dataToCoord(0));E[k.onZero]=Math.max(Math.min(V,E[1]),E[0])}u.position=["y"===v?E[k[m]]:C[0],"x"===v?E[k[m]]:C[3]],u.rotation=Math.PI/2*("x"===v?0:1),u.labelDirection=u.tickDirection=u.nameDirection={top:-1,bottom:1,left:-1,right:1}[f],u.labelOffset=l?E[k[f]]-E[k.onZero]:0,t.get("axisTick.inside")&&(u.tickDirection=-u.tickDirection),Gr(n.labelInside,t.get("axisLabel.inside"))&&(u.labelDirection=-u.labelDirection);var N=t.get("axisLabel.rotate");return u.labelRotate="top"===m?-N:N,u.z2=1,u}function fC(e,t,n,o){var a=n.axis;if(!a.scale.isBlank()){var u=n.getModel("splitArea"),l=u.getModel("areaStyle"),f=l.get("color"),m=o.coordinateSystem.getRect(),v=a.getTicksCoords({tickModel:u,clamp:!0});if(v.length){var x=f.length,C=e.__splitAreaColors,k=Gt(),M=0;if(C)for(var E=0;E<v.length;E++){var V=C.get(v[E].tickValue);if(null!=V){M=(V+(x-1)*E)%x;break}}var N=a.toGlobalCoord(v[0].coord),G=l.getAreaStyle();for(f=en(f)?f:[f],E=1;E<v.length;E++){var te,J,me,ge,pe=a.toGlobalCoord(v[E].coord);N=a.isHorizontal()?(J=m.y,ge=m.height,(te=N)+(me=pe-te)):(te=m.x,me=m.width,(J=N)+(ge=pe-J));var _e=v[E-1].tickValue;null!=_e&&k.set(_e,M),t.add(new fi({anid:null!=_e?"area_"+_e:null,shape:{x:te,y:J,width:me,height:ge},style:Ee({fill:f[M]},G),silent:!0})),M=(M+1)%x}e.__splitAreaColors=k}}}function Zk(e){e.__splitAreaColors=null}Fc.registerAxisPointerClass=function(e,t){yp[e]=t},Fc.getAxisPointerClass=function(e){return e&&yp[e]};var ZM=["axisLine","axisTickLabel","axisName"],Kk=["splitArea","splitLine","minorSplitLine"],$k=Fc.extend({type:"cartesianAxis",axisPointerClass:"CartesianAxisPointer",render:function(e,t,n,o){this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new mr,this.group.add(this._axisGroup),e.get("show")){var u=e.getCoordSysModel(),l=Gv(u,e),f=new zc(e,l);le(ZM,f.add,f),this._axisGroup.add(f.getGroup()),le(Kk,function(m){e.get(m+".show")&&this["_"+m](e,u)},this),Eg(a,this._axisGroup,e),$k.superCall(this,"render",e,t,n,o)}},remove:function(){Zk(this)},_splitLine:function(e,t){var n=e.axis;if(!n.scale.isBlank()){var o=e.getModel("splitLine"),a=o.getModel("lineStyle"),u=a.get("color");u=en(u)?u:[u];for(var l=t.coordinateSystem.getRect(),f=n.isHorizontal(),m=0,v=n.getTicksCoords({tickModel:o}),x=[],C=[],k=a.getLineStyle(),M=0;M<v.length;M++){var E=n.toGlobalCoord(v[M].coord);f?(x[0]=E,x[1]=l.y,C[0]=E,C[1]=l.y+l.height):(x[0]=l.x,x[1]=E,C[0]=l.x+l.width,C[1]=E);var V=m++%u.length;this._axisGroup.add(new $s({anid:null!=v[M].tickValue?"line_"+v[M].tickValue:null,subPixelOptimize:!0,shape:{x1:x[0],y1:x[1],x2:C[0],y2:C[1]},style:Ee({stroke:u[V]},k),silent:!0}))}}},_minorSplitLine:function(e,t){var n=e.axis,o=e.getModel("minorSplitLine").getModel("lineStyle"),a=t.coordinateSystem.getRect(),u=n.isHorizontal(),l=n.getMinorTicksCoords();if(l.length)for(var f=[],m=[],v=o.getLineStyle(),x=0;x<l.length;x++)for(var C=0;C<l[x].length;C++){var k=n.toGlobalCoord(l[x][C].coord);u?(f[0]=k,f[1]=a.y,m[0]=k,m[1]=a.y+a.height):(f[0]=a.x,f[1]=k,m[0]=a.x+a.width,m[1]=k),this._axisGroup.add(new $s({anid:"minor_line_"+l[x][C].tickValue,subPixelOptimize:!0,shape:{x1:f[0],y1:f[1],x2:m[0],y2:m[1]},style:v,silent:!0}))}},_splitArea:function(e,t){fC(this,this._axisGroup,e,t)}});$k.extend({type:"xAxis"}),$k.extend({type:"yAxis"}),Ts({type:"grid",render:function(e,t){this.group.removeAll(),e.get("show")&&this.group.add(new fi({shape:e.coordinateSystem.getRect(),style:Ee({fill:e.get("backgroundColor")},e.getItemStyle()),silent:!0,z2:-1}))}}),da(function(e){e.xAxis&&e.yAxis&&!e.grid&&(e.grid={})}),Gi(zv("line","circle","line")),fa(sg("line")),Ii(ih.PROCESSOR.STATISTIC,{seriesType:"line",modifyOutputEnd:!0,reset:function(e,t,n){var o=e.getData(),a=e.get("sampling"),u=e.coordinateSystem;if("cartesian2d"===u.type&&a){var l,f=u.getBaseAxis(),m=u.getOtherAxis(f),v=f.getExtent(),x=Math.abs(v[1]-v[0]),C=Math.round(o.count()/x);1<C&&("string"==typeof a?l=Uk[a]:"function"==typeof a&&(l=a),l&&e.setData(o.downSample(o.mapDimension(m.dim),1/C,l,aC)))}}});var hC=Ma.extend({type:"series.__base_bar__",getInitialData:function(e,t){return Pv(this.getSource(),this,{useEncodeDefaulter:!0})},getMarkerPosition:function(e){var t=this.coordinateSystem;if(t){var n=t.dataToPoint(t.clampData(e)),o=this.getData(),a=o.getLayout("offset"),u=o.getLayout("size");return n[t.getBaseAxis().isHorizontal()?0:1]+=a+u/2,n}return[NaN,NaN]},defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod",itemStyle:{},emphasis:{}}});function Jk(e,t,n,o,a,u){Ln(e,t,n.getModel("label"),n.getModel("emphasis.label"),{labelFetcher:a,labelDataIndex:u,defaultText:T1(a.getData(),u),isRectText:!0,autoColor:o}),N1(e),N1(t)}function N1(e,t){"outside"===e.textPosition&&(e.textPosition=t)}hC.extend({type:"series.bar",dependencies:["grid","polar"],brushSelector:"rect",getProgressive:function(){return!!this.get("large")&&this.get("progressive")},getProgressiveThreshold:function(){var e=this.get("progressiveThreshold"),t=this.get("largeThreshold");return e<t&&(e=t),e},defaultOption:{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1}}});var Qk=Cu([["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["stroke","barBorderColor"],["lineWidth","barBorderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),gw={getBarItemStyle:function(e){var t=Qk(this,e);if(this.getBorderLineDash){var n=this.getBorderLineDash();n&&(t.lineDash=n)}return t}},KM=Tc({type:"sausage",shape:{cx:0,cy:0,r0:0,r:0,startAngle:0,endAngle:2*Math.PI,clockwise:!0},buildPath:function(e,t){var n=t.cx,o=t.cy,a=Math.max(t.r0||0,0),u=Math.max(t.r,0),l=.5*(u-a),f=a+l,m=t.startAngle,v=t.endAngle,x=t.clockwise,C=Math.cos(m),k=Math.sin(m),M=Math.cos(v),E=Math.sin(v);(x?v-m<2*Math.PI:m-v<2*Math.PI)&&(e.moveTo(C*a+n,k*a+o),e.arc(C*f+n,k*f+o,l,-Math.PI+m,m,!x)),e.arc(n,o,u,m,v,!x),e.moveTo(M*u+n,E*u+o),e.arc(M*f+n,E*f+o,l,v-2*Math.PI,v-Math.PI,!x),0!==a&&(e.arc(n,o,a,v,m,x),e.moveTo(C*a+n,E*a+o)),e.closePath()}}),$M=["itemStyle","barBorderWidth"],R1=[0,0];Ne(ei.prototype,gw),gu({type:"bar",render:function(e,t,n){this._updateDrawMode(e);var o=e.get("coordinateSystem");return"cartesian2d"!==o&&"polar"!==o||(this._isLargeDraw?this._renderLarge(e,t,n):this._renderNormal(e,t,n)),this.group},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,o){this._incrementalRenderLarge(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e,t,n){var o,a=this.group,u=e.getData(),l=this._data,f=e.coordinateSystem,m=f.getBaseAxis();"cartesian2d"===f.type?o=m.isHorizontal():"polar"===f.type&&(o="angle"===m.dim);var v=e.isAnimationEnabled()?e:null,x=e.get("clip",!0),C=function(ge,pe){var _e=ge.getArea&&ge.getArea();if("cartesian2d"===ge.type){var Me=ge.getBaseAxis();if("category"!==Me.type||!Me.onBand){var We=pe.getLayout("bandWidth");Me.isHorizontal()?(_e.x-=We,_e.width+=2*We):(_e.y-=We,_e.height+=2*We)}}return _e}(f,u);function k(ge){var Me,pe=Xb[f.type](u,ge),_e=new("polar"===(Me=f).type?nl:fi)({shape:JM(o,pe,Me),silent:!0,z2:0});return _e.useStyle(V.getBarItemStyle()),"cartesian2d"===f.type&&_e.setShape("r",N),G[ge]=_e}a.removeClipPath();var M=e.get("roundCap",!0),E=e.get("showBackground",!0),V=e.getModel("backgroundStyle"),N=V.get("barBorderRadius")||0,G=[],te=this._backgroundEls||[];u.diff(l).add(function(ge){var pe=u.getItemModel(ge),_e=Xb[f.type](u,ge,pe);if(E&&k(ge),u.hasValue(ge)){if(x&&sm[f.type](C,_e))return void a.remove(Me);var Me=gC[f.type](ge,_e,o,v,!1,M);u.setItemGraphicEl(ge,Me),a.add(Me),z1(Me,u,ge,pe,_e,e,0,"polar"===f.type)}}).update(function(ge,pe){var _e=u.getItemModel(ge),Me=Xb[f.type](u,ge,_e);if(E){var We;0===te.length?We=k(pe):((We=te[pe]).useStyle(V.getBarItemStyle()),"cartesian2d"===f.type&&We.setShape("r",N),G[ge]=We);var Ke=Xb[f.type](u,ge);Po(We,{shape:JM(o,Ke,f)},v,ge)}var et=l.getItemGraphicEl(pe);if(u.hasValue(ge)){if(x&&sm[f.type](C,Me))return void a.remove(et);et?Po(et,{shape:Me},v,ge):et=gC[f.type](ge,Me,o,v,!0,M),u.setItemGraphicEl(ge,et),a.add(et),z1(et,u,ge,_e,Me,e,0,"polar"===f.type)}else a.remove(et)}).remove(function(ge){var pe=l.getItemGraphicEl(ge);"cartesian2d"===f.type?pe&&qb(ge,v,pe):pe&&L1(ge,v,pe)}).execute();var J=this._backgroundGroup||(this._backgroundGroup=new mr);J.removeAll();for(var me=0;me<G.length;++me)J.add(G[me]);a.add(J),this._backgroundEls=G,this._data=u},_renderLarge:function(e,t,n){this._clear(),mw(e,this.group);var o=e.get("clip",!0)?Fb(e.coordinateSystem,!1,e):null;o?this.group.setClipPath(o):this.group.removeClipPath()},_incrementalRenderLarge:function(e,t){this._removeBackground(),mw(t,this.group,!0)},dispose:yn,remove:function(e){this._clear(e)},_clear:function(e){var t=this.group,n=this._data;e&&e.get("animation")&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl(function(o){"sector"===o.type?L1(o.dataIndex,e,o):qb(o.dataIndex,e,o)})):t.removeAll(),this._data=null},_removeBackground:function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null}});var jb=Math.max,cl=Math.min,sm={cartesian2d:function(e,t){var n=t.width<0?-1:1,o=t.height<0?-1:1;n<0&&(t.x+=t.width,t.width=-t.width),o<0&&(t.y+=t.height,t.height=-t.height);var a=jb(t.x,e.x),u=cl(t.x+t.width,e.x+e.width),l=jb(t.y,e.y),f=cl(t.y+t.height,e.y+e.height);t.x=a,t.y=l,t.width=u-a,t.height=f-l;var m=t.width<0||t.height<0;return n<0&&(t.x+=t.width,t.width=-t.width),o<0&&(t.y+=t.height,t.height=-t.height),m},polar:function(e,t){var n=t.r0<=t.r?1:-1;if(n<0){var o=t.r;t.r=t.r0,t.r0=o}o=cl(t.r,e.r);var a=jb(t.r0,e.r0),u=(t.r=o)-(t.r0=a)<0;return n<0&&(o=t.r,t.r=t.r0,t.r0=o),u}},gC={cartesian2d:function(e,t,n,o,a){var u=new fi({shape:Ne({},t),z2:1});if(u.name="item",o){var l=n?"height":"width",f={};u.shape[l]=0,f[l]=t[l],Mc[a?"updateProps":"initProps"](u,{shape:f},o,e)}return u},polar:function(e,t,n,o,a,u){var f=new(!n&&u?KM:nl)({shape:Ee({clockwise:t.startAngle<t.endAngle},t),z2:1});if(f.name="item",o){var m=n?"r":"endAngle",v={};f.shape[m]=n?0:t.startAngle,v[m]=t[m],Mc[a?"updateProps":"initProps"](f,{shape:v},o,e)}return f}};function qb(e,t,n){n.style.text=null,Po(n,{shape:{width:0}},t,e,function(){n.parent&&n.parent.remove(n)})}function L1(e,t,n){n.style.text=null,Po(n,{shape:{r:n.shape.r0}},t,e,function(){n.parent&&n.parent.remove(n)})}var Xb={cartesian2d:function(e,t,n){var m,v,x,C,o=e.getItemLayout(t),a=n?(m=o,v=n.get($M)||0,x=isNaN(m.width)?Number.MAX_VALUE:Math.abs(m.width),C=isNaN(m.height)?Number.MAX_VALUE:Math.abs(m.height),Math.min(v,x,C)):0,u=0<o.width?1:-1,l=0<o.height?1:-1;return{x:o.x+u*a/2,y:o.y+l*a/2,width:o.width-u*a,height:o.height-l*a}},polar:function(e,t,n){var o=e.getItemLayout(t);return{cx:o.cx,cy:o.cy,r0:o.r0,r:o.r,startAngle:o.startAngle,endAngle:o.endAngle}}};function B1(e){return null!=e.startAngle&&null!=e.endAngle&&e.startAngle===e.endAngle}function z1(e,t,n,o,a,u,l,f){var m=t.getItemVisual(n,"color"),v=t.getItemVisual(n,"opacity"),x=t.getVisual("borderColor"),C=o.getModel("itemStyle"),k=o.getModel("emphasis.itemStyle").getBarItemStyle();f||e.setShape("r",C.get("barBorderRadius")||0),e.useStyle(Ee({stroke:B1(a)?"none":x,fill:B1(a)?"none":m,opacity:v},C.getBarItemStyle()));var M=o.getShallow("cursor");M&&e.attr("cursor",M),f||Jk(e.style,k,o,m,u,n),B1(a)&&(k.fill=k.stroke="none"),Go(e,k)}var F1=so.extend({type:"largeBar",shape:{points:[]},buildPath:function(e,t){for(var n=t.points,o=this.__startPoint,a=this.__baseDimIdx,u=0;u<n.length;u+=2)o[a]=n[u+a],e.moveTo(o[0],o[1]),e.lineTo(n[u],n[u+1])}});function mw(e,t,n){var o=e.getData(),a=[],u=o.getLayout("valueAxisHorizontal")?1:0;a[1-u]=o.getLayout("valueAxisStart");var M,E,V,N,G,l=o.getLayout("largeDataIndices"),f=o.getLayout("barWidth"),m=e.getModel("backgroundStyle");if(e.get("showBackground",!0)){var v=o.getLayout("largeBackgroundPoints"),x=[];x[1-u]=o.getLayout("backgroundStart");var C=new F1({shape:{points:v},incremental:!!n,__startPoint:x,__baseDimIdx:u,__largeDataIndices:l,__barWidth:f,silent:!0,z2:0});M=C,V=o,N=(E=m).get("borderColor")||E.get("color"),G=E.getItemStyle(["color","borderColor"]),M.useStyle(G),M.style.fill=null,M.style.stroke=N,M.style.lineWidth=V.getLayout("barWidth"),t.add(C)}var k=new F1({shape:{points:o.getLayout("largePoints")},incremental:!!n,__startPoint:a,__baseDimIdx:u,__largeDataIndices:l,__barWidth:f});t.add(k),function(M,E,V){var N=V.getVisual("borderColor")||V.getVisual("color"),G=E.getModel("itemStyle").getItemStyle(["color","borderColor"]);M.useStyle(G),M.style.fill=null,M.style.stroke=N,M.style.lineWidth=V.getLayout("barWidth")}(k,e,o),k.seriesIndex=e.seriesIndex,e.get("silent")||(k.on("mousedown",mC),k.on("mousemove",mC))}var mC=Nc(function(e){var t=function(n,o,a){var u=n.__baseDimIdx,l=1-u,f=n.shape.points,m=n.__largeDataIndices,v=Math.abs(n.__barWidth/2),x=n.__startPoint[l];R1[0]=o,R1[1]=a;for(var C=R1[u],k=R1[1-u],M=C-v,E=C+v,V=0,N=f.length/2;V<N;V++){var G=2*V,te=f[G+u],J=f[G+l];if(M<=te&&te<=E&&(x<=J?x<=k&&k<=J:J<=k&&k<=x))return m[V]}return-1}(this,e.offsetX,e.offsetY);this.dataIndex=0<=t?t:null},30,!1);function JM(e,t,n){var o,a="polar"===n.type;return o=a?n.getArea():n.grid.getRect(),a?{cx:o.cx,cy:o.cy,r0:e?o.r0:t.r0,r:e?o.r:t.r,startAngle:e?t.startAngle:0,endAngle:e?t.endAngle:2*Math.PI}:{x:e?t.x:o.x,y:e?o.y:t.y,width:e?t.width:o.width,height:e?o.height:t.height}}function Yb(e,t,n){t=en(t)&&{coordDimensions:t}||Ne({},t);var o=e.getSource(),a=Ob(o,t),u=new Uu(a,e);return u.initData(o,n),u}fa(ih.VISUAL.LAYOUT,pn(Pk,"bar")),fa(ih.VISUAL.PROGRESSIVE_LAYOUT,eo),Gi({seriesType:"bar",reset:function(e){e.getData().setVisual("legendSymbol","roundRect")}});var pw={updateSelectedMap:function(e){this._targetList=en(e)?e.slice():[],this._selectTargetMap=Qe(e||[],function(t,n){return t.set(n.name,n),t},Gt())},select:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);"single"===this.get("selectedMode")&&this._selectTargetMap.each(function(o){o.selected=!1}),n&&(n.selected=!0)},unSelect:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);n&&(n.selected=!1)},toggleSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);if(null!=n)return this[n.selected?"unSelect":"select"](e,t),n.selected},isSelected:function(e,t){var n=null!=t?this._targetList[t]:this._selectTargetMap.get(e);return n&&n.selected}};function uy(e,t){this.getAllNames=function(){var n=t();return n.mapArray(n.getName)},this.containName=function(n){return 0<=t().indexOfName(n)},this.indexOfName=function(n){return e().indexOfName(n)},this.getItemVisual=function(n,o){return e().getItemVisual(n,o)}}var pC=dp({type:"series.pie",init:function(e){pC.superApply(this,"init",arguments),this.legendVisualProvider=new uy(Rt(this.getData,this),Rt(this.getRawData,this)),this.updateSelectedMap(this._createSelectableList()),this._defaultLabelLine(e)},mergeOption:function(e){pC.superCall(this,"mergeOption",e),this.updateSelectedMap(this._createSelectableList())},getInitialData:function(e,t){return Yb(this,{coordDimensions:["value"],encodeDefaulter:pn(Gg,this)})},_createSelectableList:function(){for(var e=this.getRawData(),t=e.mapDimension("value"),n=[],o=0,a=e.count();o<a;o++)n.push({name:e.getName(o),value:e.get(t,o),selected:W0(e,o,"selected")});return n},getDataParams:function(e){var t=this.getData(),n=pC.superCall(this,"getDataParams",e),o=[];return t.each(t.mapDimension("value"),function(a){o.push(a)}),n.percent=Ng(o,e,t.hostModel.get("percentPrecision")),n.$vars.push("percent"),n},_defaultLabelLine:function(e){Nh(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,hoverOffset:10,avoidLabelOverlap:!0,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:!1,show:!0,position:"outer",alignTo:"none",margin:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},animationType:"expansion",animationTypeUpdate:"transition",animationEasing:"cubicOut"}});function Zb(e,t,n,o){var a=t.getData(),l=a.getName(this.dataIndex),f=t.get("selectedOffset");o.dispatchAction({type:"pieToggleSelect",from:e,name:l,seriesId:t.id}),a.each(function(m){vC(a.getItemGraphicEl(m),a.getItemLayout(m),t.isSelected(a.getName(m)),f,n)})}function vC(e,t,n,o,a){var u=(t.startAngle+t.endAngle)/2,l=n?o:0,f=[Math.cos(u)*l,Math.sin(u)*l];a?e.animate().when(200,{position:f}).start("bounceOut"):e.attr("position",f)}function eT(e,t){mr.call(this);var n=new nl({z2:2}),o=new Zo,a=new Yo;this.add(n),this.add(o),this.add(a),this.updateData(e,t,!0)}de(pC,pw);var ly=eT.prototype;function vw(e,t){le(t,function(n){n.update="updateView",io(n,function(o,a){var u={};return a.eachComponent({mainType:"series",subType:e,query:o},function(l){l[n.method]&&l[n.method](o.name,o.dataIndex);var f=l.getData();f.each(function(m){var v=f.getName(m);u[v]=l.isSelected(v)||!1})}),{name:o.name,selected:u,seriesId:o.seriesId}})})}function V1(e){return{getTargetSeries:function(t){var n={},o=Gt();return t.eachSeriesByType(e,function(a){a.__paletteScope=n,o.set(a.uid,a)}),o},reset:function(t,n){var o=t.getRawData(),a={},u=t.getData();u.each(function(l){var f=u.getRawIndex(l);a[f]=l}),o.each(function(l){var f,m=a[l],v=null!=m&&u.getItemVisual(m,"color",!0),x=null!=m&&u.getItemVisual(m,"borderColor",!0);if(v&&x||(f=o.getItemModel(l)),!v){var C=f.get("itemStyle.color")||t.getColorFromPalette(o.getName(l)||l+"",t.__paletteScope,o.count());null!=m&&u.setItemVisual(m,"color",C)}if(!x){var k=f.get("itemStyle.borderColor");null!=m&&u.setItemVisual(m,"borderColor",k)}})}}}ly.updateData=function(e,t,n){var o=this.childAt(0),a=this.childAt(1),u=this.childAt(2),l=e.hostModel,f=e.getItemModel(t),m=e.getItemLayout(t),v=Ne({},m);v.label=null;var x=l.getShallow("animationTypeUpdate");n?(o.setShape(v),"scale"===l.getShallow("animationType")?(o.shape.r=m.r0,al(o,{shape:{r:m.r}},l,t)):(o.shape.endAngle=m.startAngle,Po(o,{shape:{endAngle:m.endAngle}},l,t))):"expansion"===x?o.setShape(v):Po(o,{shape:v},l,t);var C=e.getItemVisual(t,"color");o.useStyle(Ee({lineJoin:"bevel",fill:C},f.getModel("itemStyle").getItemStyle())),o.hoverStyle=f.getModel("emphasis.itemStyle").getItemStyle();var k=f.getShallow("cursor");k&&o.attr("cursor",k),vC(this,e.getItemLayout(t),l.isSelected(e.getName(t)),l.get("selectedOffset"),l.get("animation")),this._updateLabel(e,t,!n&&"transition"===x),this.highDownOnUpdate=l.get("silent")?null:function(E,V){var N=l.isAnimationEnabled()&&f.get("hoverAnimation");"emphasis"===V?(a.ignore=a.hoverIgnore,u.ignore=u.hoverIgnore,N&&(o.stopAnimation(!0),o.animateTo({shape:{r:m.r+l.get("hoverOffset")}},300,"elasticOut"))):(a.ignore=a.normalIgnore,u.ignore=u.normalIgnore,N&&(o.stopAnimation(!0),o.animateTo({shape:{r:m.r}},300,"elasticOut")))},Go(this)},ly._updateLabel=function(e,t,n){var o=this.childAt(1),a=this.childAt(2),u=e.hostModel,l=e.getItemModel(t),f=e.getItemLayout(t).label,m=e.getItemVisual(t,"color");if(!f||isNaN(f.x)||isNaN(f.y))a.ignore=a.normalIgnore=a.hoverIgnore=o.ignore=o.normalIgnore=o.hoverIgnore=!0;else{var v={points:f.linePoints||[[f.x,f.y],[f.x,f.y],[f.x,f.y]]},x={x:f.x,y:f.y};n?(Po(o,{shape:v},u,t),Po(a,{style:x},u,t)):(o.attr({shape:v}),a.attr({style:x})),a.attr({rotation:f.rotation,origin:[f.x,f.y],z2:10});var C=l.getModel("label"),k=l.getModel("emphasis.label"),M=l.getModel("labelLine"),E=l.getModel("emphasis.labelLine");m=e.getItemVisual(t,"color"),Ln(a.style,a.hoverStyle={},C,k,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:f.text,autoColor:m,useInsideStyle:!!f.inside},{textAlign:f.textAlign,textVerticalAlign:f.verticalAlign,opacity:e.getItemVisual(t,"opacity")}),a.ignore=a.normalIgnore=!C.get("show"),a.hoverIgnore=!k.get("show"),o.ignore=o.normalIgnore=!M.get("show"),o.hoverIgnore=!E.get("show"),o.setStyle({stroke:m,opacity:e.getItemVisual(t,"opacity")}),o.setStyle(M.getModel("lineStyle").getLineStyle()),o.hoverStyle=E.getModel("lineStyle").getLineStyle();var V=M.get("smooth");V&&!0===V&&(V=.4),o.setShape({smooth:V})}},Ie(eT,mr),Hs.extend({type:"pie",init:function(){var e=new mr;this._sectorGroup=e},render:function(e,t,n,o){if(!o||o.from!==this.uid){var a=e.getData(),u=this._data,l=this.group,f=t.get("animation"),m=!u,v=e.get("animationType"),x=e.get("animationTypeUpdate"),C=pn(Zb,this.uid,e,f,n),k=e.get("selectedMode");if(a.diff(u).add(function(G){var te=new eT(a,G);m&&"scale"!==v&&te.eachChild(function(J){J.stopAnimation(!0)}),k&&te.on("click",C),a.setItemGraphicEl(G,te),l.add(te)}).update(function(G,te){var J=u.getItemGraphicEl(te);m||"transition"===x||J.eachChild(function(me){me.stopAnimation(!0)}),J.updateData(a,G),J.off("click"),k&&J.on("click",C),l.add(J),a.setItemGraphicEl(G,J)}).remove(function(G){var te=u.getItemGraphicEl(G);l.remove(te)}).execute(),f&&0<a.count()&&(m?"scale"!==v:"transition"!==x)){for(var M=a.getItemLayout(0),E=1;isNaN(M.startAngle)&&E<a.count();++E)M=a.getItemLayout(E);var V=Math.max(n.getWidth(),n.getHeight())/2,N=Rt(l.removeClipPath,l);l.setClipPath(this._createClipPath(M.cx,M.cy,V,M.startAngle,M.clockwise,N,e,m))}else l.removeClipPath();this._data=a}},dispose:function(){},_createClipPath:function(e,t,n,o,a,u,l,f){var m=new nl({shape:{cx:e,cy:t,r0:0,r:n,startAngle:o,endAngle:o,clockwise:a}});return(f?al:Po)(m,{shape:{endAngle:o+(a?1:-1)*Math.PI*2}},l,u),m},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var o=e[0]-n.cx,a=e[1]-n.cy,u=Math.sqrt(o*o+a*a);return u<=n.r&&u>=n.r0}}});var tT=Math.PI/180;function yC(e,t,n,o,a,u,l,f,m,v){function x(me,ge,pe){for(var _e=me;_e<ge&&!(e[_e].y+pe>m+l);_e++)if(e[_e].y+=pe,me<_e&&_e+1<ge&&e[_e+1].y>e[_e].y+e[_e].height)return void C(_e,pe/2);C(ge-1,pe/2)}function C(me,ge){for(var pe=me;0<=pe&&!(e[pe].y-ge<m)&&(e[pe].y-=ge,!(0<pe&&e[pe].y>e[pe-1].y+e[pe-1].height));pe--);}function k(me,ge,pe,_e,Me,We){for(var Ke=ge?Number.MAX_VALUE:0,et=0,ut=me.length;et<ut;et++)if("none"===me[et].labelAlignTo){var lt=Math.abs(me[et].y-_e),vt=me[et].len,Mt=me[et].len2,Pt=lt<Me+vt?Math.sqrt((Me+vt+Mt)*(Me+vt+Mt)-lt*lt):Math.abs(me[et].x-pe);ge&&Ke<=Pt&&(Pt=Ke-10),!ge&&Pt<=Ke&&(Pt=Ke+10),me[et].x=pe+Pt*We,Ke=Pt}}e.sort(function(me,ge){return me.y-ge.y});for(var M,E=0,V=e.length,N=[],G=[],te=0;te<V;te++)"outer"===e[te].position&&"labelLine"===e[te].labelAlignTo&&(e[te].linePoints[1][0]+=e[te].x-v,e[te].x=v),(M=e[te].y-E)<0&&x(te,V,-M),E=e[te].y+e[te].height;for(l-E<0&&C(V-1,E-l),te=0;te<V;te++)e[te].y>=n?G.push(e[te]):N.push(e[te]);k(N,!1,t,n,o,a),k(G,!0,t,n,o,a)}function Uv(e){return"center"===e.position}var Vc=2*Math.PI,yw=Math.PI/180;function cy(e){return{seriesType:e,reset:function(t,n){var o=n.findComponents({mainType:"legend"});if(o&&o.length){var a=t.getData();a.filterSelf(function(u){for(var l=a.getName(u),f=0;f<o.length;f++)if(!o[f].isSelected(l))return!1;return!0})}}}}vw("pie",[{type:"pieToggleSelect",event:"pieselectchanged",method:"toggleSelected"},{type:"pieSelect",event:"pieselected",method:"select"},{type:"pieUnSelect",event:"pieunselected",method:"unSelect"}]),Gi(V1("pie")),fa(pn(function(e,t,n,o){t.eachSeriesByType(e,function(a){var Pt,u=a.getData(),l=u.mapDimension("value"),f=(Pt=n,si(a.getBoxLayoutParams(),{width:Pt.getWidth(),height:Pt.getHeight()})),m=a.get("center"),v=a.get("radius");en(v)||(v=[0,v]),en(m)||(m=[m,m]);var x=nr(f.width,n.getWidth()),C=nr(f.height,n.getHeight()),k=Math.min(x,C),M=nr(m[0],x)+f.x,E=nr(m[1],C)+f.y,V=nr(v[0],k/2),N=nr(v[1],k/2),G=-a.get("startAngle")*yw,te=a.get("minAngle")*yw,J=0;u.each(l,function(Mt){isNaN(Mt)||J++});var me=u.getSum(l),ge=Math.PI/(me||J)*2,pe=a.get("clockwise"),_e=a.get("roseType"),Me=a.get("stillShowZeroSum"),We=u.getDataExtent(l);We[0]=0;var Ke=Vc,et=0,ut=G,lt=pe?1:-1;if(u.each(l,function(Mt,Pt){var Ct;if(isNaN(Mt))u.setItemLayout(Pt,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:pe,cx:M,cy:E,r0:V,r:_e?NaN:N,viewRect:f});else{(Ct="area"!==_e?0===me&&Me?ge:Mt*ge:Vc/J)<te?Ke-=Ct=te:et+=Mt;var Zt=ut+lt*Ct;u.setItemLayout(Pt,{angle:Ct,startAngle:ut,endAngle:Zt,clockwise:pe,cx:M,cy:E,r0:V,r:_e?hi(Mt,We,[V,N]):N,viewRect:f}),ut=Zt}}),Ke<Vc&&J)if(Ke<=.001){var vt=Vc/J;u.each(l,function(Mt,Pt){if(!isNaN(Mt)){var Ct=u.getItemLayout(Pt);Ct.angle=vt,Ct.startAngle=G+lt*Pt*vt,Ct.endAngle=G+lt*(Pt+1)*vt}})}else ge=Ke/et,ut=G,u.each(l,function(Mt,Pt){if(!isNaN(Mt)){var Ct=u.getItemLayout(Pt),Zt=Ct.angle===te?te:Mt*ge;Ct.startAngle=ut,Ct.endAngle=ut+lt*Zt,ut+=lt*Zt}});!function jv(e,t,n,o,a,u){var l,f,m=e.getData(),v=[],x=!1,C=(e.get("minShowLabelAngle")||0)*tT;m.each(function(k){var M=m.getItemLayout(k),E=m.getItemModel(k),V=E.getModel("label"),N=V.get("position")||E.get("emphasis.label.position"),G=V.get("distanceToLabelLine"),te=V.get("alignTo"),J=nr(V.get("margin"),n),me=V.get("bleedMargin"),ge=V.getFont(),pe=E.getModel("labelLine"),_e=pe.get("length");_e=nr(_e,n);var Me=pe.get("length2");if(Me=nr(Me,n),!(M.angle<C)){var We,Ke,et,ut,lt=(M.startAngle+M.endAngle)/2,vt=Math.cos(lt),Mt=Math.sin(lt);l=M.cx,f=M.cy;var Pt,Ct=e.getFormattedLabel(k,"normal")||m.getName(k),Zt=bl(Ct,ge,ut,"top"),An="inside"===N||"inner"===N;if("center"===N)We=M.cx,Ke=M.cy,ut="center";else{var Rn=(An?(M.r+M.r0)/2*vt:M.r*vt)+l,Cn=(An?(M.r+M.r0)/2*Mt:M.r*Mt)+f;if(We=Rn+3*vt,Ke=Cn+3*Mt,!An){var Jn=Rn+vt*(_e+t-M.r),dr=Cn+Mt*(_e+t-M.r),$r=Jn+(vt<0?-1:1)*Me;We="edge"===te?vt<0?a+J:a+n-J:$r+(vt<0?-G:G),et=[[Rn,Cn],[Jn,dr],[$r,Ke=dr]]}ut=An?"center":"edge"===te?0<vt?"right":"left":0<vt?"left":"right"}var zn=V.get("rotate");Pt="number"==typeof zn?zn*(Math.PI/180):zn?vt<0?-lt+Math.PI:-lt:0,x=!!Pt,M.label={x:We,y:Ke,position:N,height:Zt.height,len:_e,len2:Me,linePoints:et,textAlign:ut,verticalAlign:"middle",rotation:Pt,inside:An,labelDistance:G,labelAlignTo:te,labelMargin:J,bleedMargin:me,textRect:Zt,text:Ct,font:ge},An||v.push(M.label)}}),!x&&e.get("avoidLabelOverlap")&&function(k,M,E,V,N,G,te,J){for(var me=[],ge=[],pe=Number.MAX_VALUE,_e=-Number.MAX_VALUE,Me=0;Me<k.length;Me++)Uv(k[Me])||(k[Me].x<M?(pe=Math.min(pe,k[Me].x),me.push(k[Me])):(_e=Math.max(_e,k[Me].x),ge.push(k[Me])));for(yC(ge,M,E,V,1,0,G,0,J,_e),yC(me,M,E,V,-1,0,G,0,J,pe),Me=0;Me<k.length;Me++){var We=k[Me];if(!Uv(We)){var Ke=We.linePoints;if(Ke){var et,ut="edge"===We.labelAlignTo,lt=We.textRect.width;(et=ut?We.x<M?Ke[2][0]-We.labelDistance-te-We.labelMargin:te+N-We.labelMargin-Ke[2][0]-We.labelDistance:We.x<M?We.x-te-We.bleedMargin:te+N-We.x-We.bleedMargin)<We.textRect.width&&(We.text=zu(We.text,et,We.font),"edge"===We.labelAlignTo&&(lt=Cr(We.text,We.font)));var vt=Ke[1][0]-Ke[2][0];ut?Ke[2][0]=We.x<M?te+We.labelMargin+lt+We.labelDistance:te+N-We.labelMargin-lt-We.labelDistance:(Ke[2][0]=We.x<M?We.x+We.labelDistance:We.x-We.labelDistance,Ke[1][0]=Ke[2][0]+vt),Ke[1][1]=Ke[2][1]=We.y}}}}(v,l,f,t,n,o,a,u)}(a,N,f.width,f.height,f.x,f.y)})},"pie")),Ii(cy("pie")),Ma.extend({type:"series.scatter",dependencies:["grid","polar","geo","singleAxis","calendar"],getInitialData:function(e,t){return Pv(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?5e3:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?1e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},clip:!0}});var bC=Tc({shape:{points:null},symbolProxy:null,softClipShape:null,buildPath:function(e,t){var n=t.points,o=t.size,a=this.symbolProxy,u=a.shape;if(!((e.getContext?e.getContext():e)&&o[0]<4))for(var l=0;l<n.length;){var f=n[l++],m=n[l++];isNaN(f)||isNaN(m)||this.softClipShape&&!this.softClipShape.contain(f,m)||(u.x=f-o[0]/2,u.y=m-o[1]/2,u.width=o[0],u.height=o[1],a.buildPath(e,u,!0))}},afterBrush:function(e){var t=this.shape,n=t.points,o=t.size;if(o[0]<4){this.setTransform(e);for(var a=0;a<n.length;){var u=n[a++],l=n[a++];isNaN(u)||isNaN(l)||this.softClipShape&&!this.softClipShape.contain(u,l)||e.fillRect(u-o[0]/2,l-o[1]/2,o[0],o[1])}this.restoreTransform(e)}},findDataIndex:function(e,t){for(var n=this.shape,o=n.points,a=n.size,u=Math.max(a[0],4),l=Math.max(a[1],4),f=o.length/2-1;0<=f;f--){var m=2*f,v=o[m]-u/2,x=o[1+m]-l/2;if(v<=e&&x<=t&&e<=v+u&&t<=x+l)return f}return-1}});function nT(){this.group=new mr}var lh=nT.prototype;function xC(e,t,n){mu.call(this,e,t,n),this.type="value",this.angle=0,this.name=""}function ug(e,t,n){this._model=e,this.dimensions=[],this._indicatorAxes=Ge(e.getIndicatorModels(),function(o,a){var u="indicator_"+a,l=new xC(u,"log"===o.get("axisType")?new om:new ng);return l.name=o.get("name"),(l.model=o).axis=l,this.dimensions.push(u),l},this),this.resize(e,n)}lh.isPersistent=function(){return!this._incremental},lh.updateData=function(e,t){this.group.removeAll();var n=new bC({rectHover:!0,cursor:"default"});n.setShape({points:e.getLayout("symbolPoints")}),this._setCommon(n,e,!1,t),this.group.add(n),this._incremental=null},lh.updateLayout=function(e){if(!this._incremental){var t=e.getLayout("symbolPoints");this.group.eachChild(function(n){null!=n.startIndex&&(t=new Float32Array(t.buffer,4*n.startIndex*2,2*(n.endIndex-n.startIndex))),n.setShape("points",t)})}},lh.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),2e6<e.count()?(this._incremental||(this._incremental=new Al({silent:!0})),this.group.add(this._incremental)):this._incremental=null},lh.incrementalUpdate=function(e,t,n){var o;this._incremental?(o=new bC,this._incremental.addDisplayable(o,!0)):((o=new bC({rectHover:!0,cursor:"default",startIndex:e.start,endIndex:e.end})).incremental=!0,this.group.add(o)),o.setShape({points:t.getLayout("symbolPoints")}),this._setCommon(o,t,!!this._incremental,n)},lh._setCommon=function(e,t,n,o){var a=t.hostModel;o=o||{};var u=t.getVisual("symbolSize");e.setShape("size",u instanceof Array?u:[u,u]),e.softClipShape=o.clipShape||null,e.symbolProxy=$d(t.getVisual("symbol"),0,0,0,0),e.setColor=e.symbolProxy.setColor;var l=e.shape.size[0]<4;e.useStyle(a.getModel("itemStyle").getItemStyle(l?["color","shadowBlur","shadowColor"]:["color"]));var f=t.getVisual("color");f&&e.setColor(f),n||(e.seriesIndex=a.seriesIndex,e.on("mousemove",function(m){e.dataIndex=null;var v=e.findDataIndex(m.offsetX,m.offsetY);0<=v&&(e.dataIndex=v+(e.startIndex||0))}))},lh.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},lh._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()},gu({type:"scatter",render:function(e,t,n){var o=e.getData();this._updateSymbolDraw(o,e).updateData(o,{clipShape:this._getClipShape(e)}),this._finished=!0},incrementalPrepareRender:function(e,t,n){var o=e.getData();this._updateSymbolDraw(o,e).incrementalPrepareUpdate(o),this._finished=!1},incrementalRender:function(e,t,n){this._symbolDraw.incrementalUpdate(e,t.getData(),{clipShape:this._getClipShape(t)}),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var o=e.getData();if(this.group.dirty(),!this._finished||1e4<o.count()||!this._symbolDraw.isPersistent())return{update:!0};var a=sg().reset(e);a.progress&&a.progress({start:0,end:o.count()},o),this._symbolDraw.updateLayout(o)},_getClipShape:function(e){var t=e.coordinateSystem,n=t&&t.getArea&&t.getArea();return e.get("clip",!0)?n:null},_updateSymbolDraw:function(e,t){var n=this._symbolDraw,o=t.pipelineContext.large;return n&&o===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=o?new nT:new ny,this._isLargeDraw=o,this.group.removeAll()),this.group.add(n.group),n},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},dispose:function(){}}),Gi(zv("scatter","circle")),fa(sg("scatter")),Ie(xC,mu),ug.prototype.getIndicatorAxes=function(){return this._indicatorAxes},ug.prototype.dataToPoint=function(e,t){return this.coordToPoint(this._indicatorAxes[t].dataToCoord(e),t)},ug.prototype.coordToPoint=function(e,t){var n=this._indicatorAxes[t].angle;return[this.cx+e*Math.cos(n),this.cy-e*Math.sin(n)]},ug.prototype.pointToData=function(e){var t=e[0]-this.cx,n=e[1]-this.cy,o=Math.sqrt(t*t+n*n);t/=o,n/=o;for(var a,u=Math.atan2(-n,t),l=1/0,f=-1,m=0;m<this._indicatorAxes.length;m++){var v=this._indicatorAxes[m],x=Math.abs(u-v.angle);x<l&&(a=v,f=m,l=x)}return[f,+(a&&a.coordToData(o))]},ug.prototype.resize=function(e,t){var n=e.get("center"),o=t.getWidth(),a=t.getHeight(),u=Math.min(o,a)/2;this.cx=nr(n[0],o),this.cy=nr(n[1],a),this.startAngle=e.get("startAngle")*Math.PI/180;var l=e.get("radius");"string"!=typeof l&&"number"!=typeof l||(l=[0,l]),this.r0=nr(l[0],u),this.r=nr(l[1],u),le(this._indicatorAxes,function(f,m){f.setExtent(this.r0,this.r);var v=this.startAngle+m*Math.PI*2/this._indicatorAxes.length;v=Math.atan2(Math.sin(v),Math.cos(v)),f.angle=v},this)},ug.prototype.update=function(e,t){var n=this._indicatorAxes,o=this._model;le(n,function(l){l.scale.setExtent(1/0,-1/0)}),e.eachSeriesByType("radar",function(l,f){if("radar"===l.get("coordinateSystem")&&e.getComponent("radar",l.get("radarIndex"))===o){var m=l.getData();le(n,function(v){v.scale.unionExtentFromData(m,m.mapDimension(v.dim))})}},this);var a=o.get("splitNumber");function u(l){var f=Math.pow(10,Math.floor(Math.log(l)/Math.LN10)),m=l/f;return 2===m?m=5:m*=2,m*f}le(n,function(l,f){var m=fp(l.scale,l.model).extent;Ui(l.scale,l.model);var v=l.model,x=l.scale,C=v.getMin(),k=v.getMax(),M=x.getInterval();if(null!=C&&null!=k)x.setExtent(+C,+k),x.setInterval((k-C)/a);else if(null!=C)for(;x.setExtent(+C,V=C+M*a),x.setInterval(M),M=u(M),V<m[1]&&isFinite(V)&&isFinite(m[1]););else if(null!=k)for(;x.setExtent(N=k-M*a,+k),x.setInterval(M),M=u(M),N>m[0]&&isFinite(N)&&isFinite(m[0]););else{var E=x.getTicks().length-1;a<E&&(M=u(M));var V,N=Vs((V=Math.ceil(m[1]/M)*M)-M*a);x.setExtent(N,V),x.setInterval(M)}})},ug.dimensions=[],ug.create=function(e,t){var n=[];return e.eachComponent("radar",function(o){var a=new ug(o,e,t);n.push(a),o.coordinateSystem=a}),e.eachSeriesByType("radar",function(o){"radar"===o.get("coordinateSystem")&&(o.coordinateSystem=n[o.get("radarIndex")||0])}),n},lu.register("radar",ug);var Kb=Fv.valueAxis;function bw(e,t){return Ee({show:t},e)}eu({type:"radar",optionUpdated:function(){var e=this.get("boundaryGap"),t=this.get("splitNumber"),n=this.get("scale"),o=this.get("axisLine"),a=this.get("axisTick"),u=this.get("axisType"),l=this.get("axisLabel"),f=this.get("name"),m=this.get("name.show"),v=this.get("name.formatter"),x=this.get("nameGap"),C=this.get("triggerEvent"),k=Ge(this.get("indicator")||[],function(M){null!=M.max&&0<M.max&&!M.min?M.min=0:null!=M.min&&M.min<0&&!M.max&&(M.max=0);var E=f;if(null!=M.color&&(E=Ee({color:M.color},f)),M=xe(ie(M),{boundaryGap:e,splitNumber:t,scale:n,axisLine:o,axisTick:a,axisType:u,axisLabel:l,name:M.text,nameLocation:"end",nameGap:x,nameTextStyle:E,triggerEvent:C},!1),m||(M.name=""),"string"==typeof v){var V=M.name;M.name=v.replace("{value}",null!=V?V:"")}else"function"==typeof v&&(M.name=v(M.name,M));var N=Ne(new ei(M,null,this.ecModel),ic);return N.mainType="radar",N.componentIndex=this.componentIndex,N},this);this.getIndicatorModels=function(){return k}},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"75%",startAngle:90,name:{show:!0},boundaryGap:[0,0],splitNumber:5,nameGap:15,scale:!1,shape:"polygon",axisLine:xe({lineStyle:{color:"#bbb"}},Kb.axisLine),axisLabel:bw(Kb.axisLabel,!1),axisTick:bw(Kb.axisTick,!1),axisType:"interval",splitLine:bw(Kb.splitLine,!0),splitArea:bw(Kb.splitArea,!0),indicator:[]}});var rT=["axisLine","axisTickLabel","axisName"];Ts({type:"radar",render:function(e,t,n){this.group.removeAll(),this._buildAxes(e),this._buildSplitLineAndArea(e)},_buildAxes:function(e){var t=e.coordinateSystem;le(Ge(t.getIndicatorAxes(),function(n){return new zc(n.model,{position:[t.cx,t.cy],rotation:n.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})}),function(n){le(rT,n.add,n),this.group.add(n.getGroup())},this)},_buildSplitLineAndArea:function(e){var t=e.coordinateSystem,n=t.getIndicatorAxes();if(n.length){var o=e.get("shape"),a=e.getModel("splitLine"),u=e.getModel("splitArea"),l=a.getModel("lineStyle"),f=u.getModel("areaStyle"),m=a.get("show"),v=u.get("show"),x=l.get("color"),C=f.get("color");x=en(x)?x:[x],C=en(C)?C:[C];var k=[],M=[];if("circle"===o)for(var E=n[0].getTicksCoords(),V=t.cx,N=t.cy,G=0;G<E.length;G++)m&&k[We(k,x,G)].push(new ku({shape:{cx:V,cy:N,r:E[G].coord}})),v&&G<E.length-1&&M[We(M,C,G)].push(new No({shape:{cx:V,cy:N,r0:E[G].coord,r:E[G+1].coord}}));else{var te,J=Ge(n,function(Ke,et){var ut=Ke.getTicksCoords();return te=null==te?ut.length-1:Math.min(ut.length-1,te),Ge(ut,function(lt){return t.coordToPoint(lt.coord,et)})}),me=[];for(G=0;G<=te;G++){for(var ge=[],pe=0;pe<n.length;pe++)ge.push(J[pe][G]);ge[0]&&ge.push(ge[0].slice()),m&&k[We(k,x,G)].push(new Zo({shape:{points:ge}})),v&&me&&M[We(M,C,G-1)].push(new Vo({shape:{points:ge.concat(me)}})),me=ge.slice().reverse()}}var _e=l.getLineStyle(),Me=f.getAreaStyle();le(M,function(Ke,et){this.group.add(ts(Ke,{style:Ee({stroke:"none",fill:C[et%C.length]},Me),silent:!0}))},this),le(k,function(Ke,et){this.group.add(ts(Ke,{style:Ee({fill:"none",stroke:x[et%x.length]},_e),silent:!0}))},this)}function We(Ke,et,ut){var lt=ut%et.length;return Ke[lt]=Ke[lt]||[],lt}}});var oT=Ma.extend({type:"series.radar",dependencies:["radar"],init:function(e){oT.superApply(this,"init",arguments),this.legendVisualProvider=new uy(Rt(this.getData,this),Rt(this.getRawData,this))},getInitialData:function(e,t){return Yb(this,{generateCoord:"indicator_",generateCoordCount:1/0})},formatTooltip:function(e,t,n,o){var a=this.getData(),u=this.coordinateSystem.getIndicatorAxes(),l=this.getData().getName(e),f="html"===o?"<br/>":"\n";return Pa(""===l?this.name:l)+f+Ge(u,function(m,v){var x=a.get(a.mapDimension(m.dim),e);return Pa(m.name+" : "+x)}).join(f)},getTooltipPosition:function(e){if(null!=e)for(var t=this.getData(),n=this.coordinateSystem,o=t.getValues(Ge(n.dimensions,function(f){return t.mapDimension(f)}),e,!0),a=0,u=o.length;a<u;a++)if(!isNaN(o[a])){var l=n.getIndicatorAxes();return n.coordToPoint(l[a].dataToCoord(o[a]),a)}},defaultOption:{zlevel:0,z:2,coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid"},label:{position:"top"},symbol:"emptyCircle",symbolSize:4}});function xw(e){return!isNaN(e[0])&&!isNaN(e[1])}function H1(e){return[e.cx,e.cy]}gu({type:"radar",render:function(e,t,n){var o=e.coordinateSystem,a=this.group,u=e.getData(),l=this._data;function f(x,C){var G,k=x.getItemVisual(C,"symbol")||"circle",M=x.getItemVisual(C,"color");if("none"!==k){var E=(en(G=x.getItemVisual(C,"symbolSize"))||(G=[+G,+G]),G),V=$d(k,-1,-1,2,2,M),N=x.getItemVisual(C,"symbolRotate")||0;return V.attr({style:{strokeNoScale:!0},z2:100,scale:[E[0]/2,E[1]/2],rotation:N*Math.PI/180||0}),V}}function m(x,C,k,M,E,V){k.removeAll();for(var N=0;N<C.length-1;N++){var G=f(M,E);G&&(x[G.__dimIdx=N]?(G.attr("position",x[N]),Mc[V?"initProps":"updateProps"](G,{position:C[N]},e,E)):G.attr("position",C[N]),k.add(G))}}function v(x){return Ge(x,function(C){return[o.cx,o.cy]})}u.diff(l).add(function(x){var C=u.getItemLayout(x);if(C){var k=new Vo,M=new Zo,E={shape:{points:C}};k.shape.points=v(C),M.shape.points=v(C),al(k,E,e,x),al(M,E,e,x);var V=new mr,N=new mr;V.add(M),V.add(k),V.add(N),m(M.shape.points,C,N,u,x,!0),u.setItemGraphicEl(x,V)}}).update(function(x,C){var k=l.getItemGraphicEl(C),M=k.childAt(0),E=k.childAt(1),V=k.childAt(2),N={shape:{points:u.getItemLayout(x)}};N.shape.points&&(m(M.shape.points,N.shape.points,V,u,x,!1),Po(M,N,e),Po(E,N,e),u.setItemGraphicEl(x,k))}).remove(function(x){a.remove(l.getItemGraphicEl(x))}).execute(),u.eachItemGraphicEl(function(x,C){var k=u.getItemModel(C),M=x.childAt(0),E=x.childAt(1),V=x.childAt(2),N=u.getItemVisual(C,"color");a.add(x),M.useStyle(Ee(k.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:N})),M.hoverStyle=k.getModel("emphasis.lineStyle").getLineStyle();var G=k.getModel("areaStyle"),te=k.getModel("emphasis.areaStyle"),J=G.isEmpty()&&G.parentModel.isEmpty(),me=te.isEmpty()&&te.parentModel.isEmpty();me=me&&J,E.ignore=J,E.useStyle(Ee(G.getAreaStyle(),{fill:N,opacity:.7})),E.hoverStyle=te.getAreaStyle();var ge=k.getModel("itemStyle").getItemStyle(["color"]),pe=k.getModel("emphasis.itemStyle").getItemStyle(),_e=k.getModel("label"),Me=k.getModel("emphasis.label");V.eachChild(function(We){We.setStyle(ge),We.hoverStyle=ie(pe);var Ke=u.get(u.dimensions[We.__dimIdx],C);null!=Ke&&!isNaN(Ke)||(Ke=""),Ln(We.style,We.hoverStyle,_e,Me,{labelFetcher:u.hostModel,labelDataIndex:C,labelDimIndex:We.__dimIdx,defaultText:Ke,autoColor:N,isRectText:!0})}),x.highDownOnUpdate=function(We,Ke){E.attr("ignore","emphasis"===Ke?me:J)},Go(x)}),this._data=u},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),Gi(V1("radar")),Gi(zv("radar","circle")),fa(function(e){e.eachSeriesByType("radar",function(t){var n=t.getData(),o=[],a=t.coordinateSystem;if(a){var u=a.getIndicatorAxes();le(u,function(l,f){n.each(n.mapDimension(u[f].dim),function(m,v){o[v]=o[v]||[];var x=a.dataToPoint(m,f);o[v][f]=xw(x)?x:H1(a)})}),n.each(function(l){var f=Jt(o[l],function(m){return xw(m)})||H1(a);o[l].push(f.slice()),n.setItemLayout(l,o[l])})}})}),Ii(cy("radar")),da(function(e){var t=e.polar;if(t){en(t)||(t=[t]);var n=[];le(t,function(o,a){o.indicator?(o.type&&!o.shape&&(o.shape=o.type),e.radar=e.radar||[],en(e.radar)||(e.radar=[e.radar]),e.radar.push(o)):n.push(o)}),e.polar=n}le(e.series,function(o){o&&"radar"===o.type&&o.polarIndex&&(o.radarIndex=o.polarIndex)})});for(var _w=[126,25],dy=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],um=0;um<dy.length;um++)for(var Qd=0;Qd<dy[um].length;Qd++)dy[um][Qd][0]/=10.5,dy[um][Qd][1]/=-14,dy[um][Qd][0]+=_w[0],dy[um][Qd][1]+=_w[1];var fy={\u5357\u6d77\u8bf8\u5c9b:[32,80],\u5e7f\u4e1c:[0,-10],\u9999\u6e2f:[10,5],\u6fb3\u95e8:[-10,10],\u5929\u6d25:[5,5]},ww={Russia:[100,60],"United States":[-99,38],"United States of America":[-99,38]},_C=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],Sw=_i(),wC={load:function(e,t,n){var o=Sw(t).parsed;if(o)return o;var a,f,u=t.specialAreas||{},l=t.geoJSON;try{a=l?Lb(l,n):[]}catch(f){throw new Error("Invalid geoJson format\n"+f.message)}return"china"===(f=e)&&a.push(new Rb("\u5357\u6d77\u8bf8\u5c9b",Ge(dy,function(v){return{type:"polygon",exterior:v}}),_w)),le(a,function(f){var C,m=f.name;(function(x,C){if("china"===x){var k=fy[C.name];if(k){var M=C.center;M[0]+=k[0]/10.5,M[1]+=-k[1]/14}}})(e,f),function(x,C){if("world"===x){var k=ww[C.name];if(k){var M=C.center;M[0]=k[0],M[1]=k[1]}}}(e,f),C=f,"china"===e&&"\u53f0\u6e7e"===C.name&&C.geometries.push({type:"polygon",exterior:_C[0]});var v=u[m];v&&f.transformTo(v.left,v.top,v.width,v.height)}),Sw(t).parsed={regions:a,boundingRect:function(f){for(var m,v=0;v<f.length;v++){var x=f[v].getBoundingRect();(m=m||x.clone()).union(x)}return m}(a)}}},Za=_i();function Cw(e,t){var n,o,x,a=e.svgXML;try{Qi(null!=(o=(n=a&&(x=a,(new fd).parse(x,{ignoreViewBox:!0,ignoreRootClip:!0}))||{}).root))}catch(x){throw new Error("Invalid svg format\n"+x.message)}var u=n.width,l=n.height,f=n.viewBoxRect;if(t||(t=null==u||null==l?o.getBoundingRect():new ii(0,0,0,0),null!=u&&(t.width=u),null!=l&&(t.height=l)),f){var m=Ov(f,t.width,t.height),v=o;(o=new mr).add(v),v.scale=m.scale,v.position=m.position}return o.setClipPath(new fi({shape:t.plain()})),{root:o,boundingRect:t}}var SC={geoJSON:wC,svg:{load:function(e,t){var n=Za(t).originRoot;if(n)return{root:n,boundingRect:Za(t).boundingRect};var o=Cw(t);return Za(t).originRoot=o.root,Za(t).boundingRect=o.boundingRect,o},makeGraphic:function(e,t,n){var o=Za(t),a=o.rootMap||(o.rootMap=Gt()),u=a.get(n);if(u)return u;var l=o.originRoot;return u=o.originRootHostKey?Cw(t,o.boundingRect).root:(o.originRootHostKey=n,l),a.set(n,u)},removeGraphic:function(e,t,n){var o=Za(t),a=o.rootMap;a&&a.removeKey(n),n===o.originRootHostKey&&(o.originRootHostKey=null)}}},hy={load:function(e,t,n){var o,a=[],u=Gt(),l=Gt();return le(QM(e),function(f){var m=SC[f.type].load(e,f,n);le(m.regions,function(x){var C=x.name;t&&t.hasOwnProperty(C)&&(x=x.cloneShallow(C=t[C])),a.push(x),u.set(C,x),l.set(C,x.center)});var v=m.boundingRect;v&&(o?o.union(v):o=v.clone())}),{regions:a,regionsMap:u,nameCoordMap:l,boundingRect:o||new ii(0,0,0,0)}},makeGraphic:iT("makeGraphic"),removeGraphic:iT("removeGraphic")};function iT(e){return function(t,n){var o=QM(t),a=[];return le(o,function(u){var l=SC[u.type][e];l&&a.push(l(t,u,n))}),a}}function QM(e){return eg_retrieveMap(e)||[]}de(Ma.extend({type:"series.map",dependencies:["geo"],layoutMode:"box",needsDrawMap:!1,seriesGroup:[],getInitialData:function(e){for(var t=Yb(this,{coordDimensions:["value"],encodeDefaulter:pn(Gg,this)}),n=t.mapDimension("value"),o=Gt(),a=[],u=[],l=0,f=t.count();l<f;l++){var m=t.getName(l);o.set(m,!0),a.push({name:m,value:t.get(n,l),selected:W0(t,l,"selected")})}return le(hy.load(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,function(v){var x=v.name;o.get(x)||(a.push({name:x}),u.push(x))}),this.updateSelectedMap(a),t.appendValues([],u),t},getHostGeoModel:function(){var e=this.option.geoIndex;return null!=e?this.dependentModels.geo[e]:null},getMapType:function(){return(this.getHostGeoModel()||this).option.map},getRawValue:function(e){var t=this.getData();return t.get(t.mapDimension("value"),e)},getRegionModel:function(e){var t=this.getData();return t.getItemModel(t.indexOfName(e))},formatTooltip:function(e,t,n,o){for(var a=this.getData(),u=Ac(this.getRawValue(e)),l=a.getName(e),f=this.seriesGroup,m=[],v=0;v<f.length;v++){var x=f[v].originalData.indexOfName(l),C=a.mapDimension("value");isNaN(f[v].originalData.get(C,x))||m.push(Pa(f[v].name))}var k="html"===o?"<br/>":"\n";return m.join(", ")+k+Pa(l+" : "+u)},getTooltipPosition:function(e){if(null!=e){var t=this.getData().getName(e),n=this.coordinateSystem,o=n.getRegion(t);return o&&n.dataToPoint(o.center)}},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},defaultOption:{zlevel:0,z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:.75,showLegendSymbol:!0,dataRangeHoverLink:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},nameProperty:"name"}}),pw);var CC="\0_ec_interaction_mutex";function W1(e,t){return!!G1(e)[t]}function G1(e){return e[CC]||(e[CC]={})}function gy(e){this._zr=e,this._opt={};var t=Rt,n=t(e2,this),o=t(t2,this),a=t(kC,this),u=t(n2,this),l=t(r2,this);wn.call(this),this.setPointerChecker=function(f){this.pointerChecker=f},this.enable=function(f,m){this.disable(),this._opt=Ee(ie(m)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==f&&(f=!0),!0!==f&&"move"!==f&&"pan"!==f||(e.on("mousedown",n),e.on("mousemove",o),e.on("mouseup",a)),!0!==f&&"scale"!==f&&"zoom"!==f||(e.on("mousewheel",u),e.on("pinch",l))},this.disable=function(){e.off("mousedown",n),e.off("mousemove",o),e.off("mouseup",a),e.off("mousewheel",u),e.off("pinch",l)},this.dispose=this.disable,this.isDragging=function(){return this._dragging},this.isPinching=function(){return this._pinching}}function e2(e){if(!(Er(e)||e.target&&e.target.draggable)){var t=e.offsetX,n=e.offsetY;this.pointerChecker&&this.pointerChecker(e,t,n)&&(this._x=t,this._y=n,this._dragging=!0)}}function t2(e){if(this._dragging&&qv("moveOnMouseMove",e,this._opt)&&"pinch"!==e.gestureEvent&&!W1(this._zr,"globalPan")){var t=e.offsetX,n=e.offsetY,o=this._x,a=this._y,u=t-o,l=n-a;this._x=t,this._y=n,this._opt.preventDefaultMouseMove&&Br(e.event),TC(this,"pan","moveOnMouseMove",e,{dx:u,dy:l,oldX:o,oldY:a,newX:t,newY:n})}}function kC(e){Er(e)||(this._dragging=!1)}function n2(e){var t=qv("zoomOnMouseWheel",e,this._opt),n=qv("moveOnMouseWheel",e,this._opt),o=e.wheelDelta,a=Math.abs(o),u=e.offsetX,l=e.offsetY;if(0!==o&&(t||n)){if(t){var f=3<a?1.4:1<a?1.2:1.1;U1(this,"zoom","zoomOnMouseWheel",e,{scale:0<o?f:1/f,originX:u,originY:l})}if(n){var m=Math.abs(o);U1(this,"scrollMove","moveOnMouseWheel",e,{scrollDelta:(0<o?1:-1)*(3<m?.4:1<m?.15:.05),originX:u,originY:l})}}}function r2(e){W1(this._zr,"globalPan")||U1(this,"zoom",null,e,{scale:1<e.pinchScale?1.1:1/1.1,originX:e.pinchX,originY:e.pinchY})}function U1(e,t,n,o,a){e.pointerChecker&&e.pointerChecker(o,a.originX,a.originY)&&(Br(o.event),TC(e,t,n,o,a))}function TC(e,t,n,o,a){a.isAvailableBehavior=Rt(qv,null,n,o),e.trigger(t,a)}function qv(e,t,n){var o=n[e];return!e||o&&(!Gn(o)||t.event[o+"Key"])}function MC(e,t,n){var o=e.target,a=o.position;a[0]+=t,a[1]+=n,o.dirty()}function DC(e,t,n,o){var a=e.target,u=e.zoomLimit,l=a.position,f=a.scale,m=e.zoom=e.zoom||1;if(m*=t,u){var v=u.min||0;m=Math.max(Math.min(u.max||1/0,m),v)}var C=m/e.zoom;e.zoom=m,l[0]-=(n-l[0])*(C-1),l[1]-=(o-l[1])*(C-1),f[0]*=C,f[1]*=C,a.dirty()}io({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},function(){}),de(gy,wn);var aT={axisPointer:1,tooltip:1,brush:1};function AC(e,t,n){var o=t.getComponentByElement(e.topTarget),a=o&&o.coordinateSystem;return o&&o!==n&&!aT[o.mainType]&&a&&a.model!==n}function sT(e){var t=e.getItemStyle(),n=e.get("areaColor");return null!=n&&(t.fill=n),t}function uT(e,t){t.eachChild(function(n){le(n.__regions,function(o){n.trigger(e.isSelected(o.name)?"emphasis":"normal")})})}function kw(e,t){var n=new mr;this.uid=Ym("ec_map_draw"),this._controller=new gy(e.getZr()),this._controllerHost={target:t?n:null},this.group=n,this._updateGroup=t,n.add(this._regionsGroup=new mr),n.add(this._backgroundGroup=new mr)}kw.prototype={constructor:kw,draw:function(e,t,n,o,a){var u="geo"===e.mainType,l=e.getData&&e.getData();u&&t.eachComponent({mainType:"series",subType:"map"},function(pe){l||pe.getHostGeoModel()!==e||(l=pe.getData())});var f=e.coordinateSystem;this._updateBackground(f);var m,v=this._regionsGroup,x=this.group,C=f.getTransformInfo(),k=!v.childAt(0)||a;if(k)x.transform=C.roamTransform,x.decomposeTransform(),x.dirty();else{var M=new Co;M.transform=C.roamTransform,M.decomposeTransform(),m=M.scale,Po(x,{scale:M.scale,position:M.position},e)}var V=C.rawScale,N=C.rawPosition;v.removeAll();var pe,_e,Me,We,Ke,G=["itemStyle"],te=["emphasis","itemStyle"],J=["label"],me=["emphasis","label"],ge=Gt();le(f.regions,function(pe){var _e=ge.get(pe.name)||ge.set(pe.name,new mr),Me=new ov({segmentIgnoreThreshold:1,shape:{paths:[]}});_e.add(Me);var We,Ke=(zn=e.getRegionModel(pe.name)||e).getModel(G),et=zn.getModel(te),ut=sT(Ke),lt=sT(et),vt=zn.getModel(J),Mt=zn.getModel(me);if(l){We=l.indexOfName(pe.name);var Pt=l.getItemVisual(We,"color",!0);Pt&&(ut.fill=Pt)}function Ct(Ur){return[Ur[0]*V[0]+N[0],Ur[1]*V[1]+N[1]]}le(pe.geometries,function(Ur){if("polygon"===Ur.type){for(var Jr=[],_o=0;_o<Ur.exterior.length;++_o)Jr.push(Ct(Ur.exterior[_o]));for(Me.shape.paths.push(new Vo({segmentIgnoreThreshold:1,shape:{points:Jr}})),_o=0;_o<(Ur.interiors?Ur.interiors.length:0);++_o){for(var ga=Ur.interiors[_o],ji=(Jr=[],0);ji<ga.length;++ji)Jr.push(Ct(ga[ji]));Me.shape.paths.push(new Vo({segmentIgnoreThreshold:1,shape:{points:Jr}}))}}}),Me.setStyle(ut),Me.style.strokeNoScale=!0,Me.culling=!0;var Zt=vt.get("show"),An=Mt.get("show"),Rn=l&&isNaN(l.get(l.mapDimension("value"),We)),Cn=l&&l.getItemLayout(We);if(u||Rn&&(Zt||An)||Cn&&Cn.showLabel){var Jn,dr=u?pe.name:We;(!l||0<=We)&&(Jn=e);var $r=new Yo({position:Ct(pe.center.slice()),scale:[1/x.scale[0],1/x.scale[1]],z2:10,silent:!0});Ln($r.style,$r.hoverStyle={},vt,Mt,{labelFetcher:Jn,labelDataIndex:dr,defaultText:pe.name,useInsideStyle:!1},{textAlign:"center",textVerticalAlign:"middle"}),!k&&Po($r,{scale:[1/m[0],1/m[1]]},e),_e.add($r)}if(l)l.setItemGraphicEl(We,_e);else{var zn=e.getRegionModel(pe.name);Me.eventData={componentType:"geo",componentIndex:e.componentIndex,geoIndex:e.componentIndex,name:pe.name,region:zn&&zn.option||{}}}(_e.__regions||(_e.__regions=[])).push(pe),_e.highDownSilentOnTouch=!!e.get("selectedMode"),Go(_e,lt),v.add(_e)}),this._updateController(e,t,n),pe=this,_e=e,We=n,Ke=o,(Me=v).off("click"),Me.off("mousedown"),_e.get("selectedMode")&&(Me.on("mousedown",function(){pe._mouseDownFlag=!0}),Me.on("click",function(et){if(pe._mouseDownFlag){pe._mouseDownFlag=!1;for(var ut=et.target;!ut.__regions;)ut=ut.parent;if(ut){var lt={type:("geo"===_e.mainType?"geo":"map")+"ToggleSelect",batch:Ge(ut.__regions,function(vt){return{name:vt.name,from:Ke.uid}})};lt[_e.mainType+"Id"]=_e.id,We.dispatchAction(lt),uT(_e,Me)}}})),uT(e,v)},remove:function(){this._regionsGroup.removeAll(),this._backgroundGroup.removeAll(),this._controller.dispose(),this._mapName&&hy.removeGraphic(this._mapName,this.uid),this._mapName=null,this._controllerHost={}},_updateBackground:function(e){var t=e.map;this._mapName!==t&&le(hy.makeGraphic(t,this.uid),function(n){this._backgroundGroup.add(n)},this),this._mapName=t},_updateController:function(e,t,n){var o=e.coordinateSystem,a=this._controller,u=this._controllerHost;u.zoomLimit=e.get("scaleLimit"),u.zoom=o.getZoom(),a.enable(e.get("roam")||!1);var l=e.mainType;function f(){var m={type:"geoRoam",componentType:l};return m[l+"Id"]=e.id,m}a.off("pan").on("pan",function(m){this._mouseDownFlag=!1,MC(u,m.dx,m.dy),n.dispatchAction(Ne(f(),{dx:m.dx,dy:m.dy}))},this),a.off("zoom").on("zoom",function(m){if(this._mouseDownFlag=!1,DC(u,m.scale,m.originX,m.originY),n.dispatchAction(Ne(f(),{zoom:m.scale,originX:m.originX,originY:m.originY})),this._updateGroup){var v=this.group.scale;this._regionsGroup.traverse(function(x){"text"===x.type&&x.attr("scale",[1/v[0],1/v[1]])})}},this),a.setPointerChecker(function(m,v,x){return o.getViewRectAfterRoam().contain(v,x)&&!AC(m,n,e)})}};var ch="__seriesMapHighDown",$b="__seriesMapCallKey";function lg(e){var t=this[ch];t&&t.recordVersion===this[$b]&&Tw(t,e)}function Tw(e,t){var n=e.circle,o=e.labelModel,a=e.hoverLabelModel,u=e.emphasisText,l=e.normalText;t?(n.style.extendFrom(Ta({},a,{text:a.get("show")?u:null},{isRectText:!0,useInsideStyle:!1},!0)),n.__mapOriginalZ2=n.z2,n.z2+=1):(Ta(n.style,o,{text:o.get("show")?l:null,textPosition:o.getShallow("position")||"bottom"},{isRectText:!0,useInsideStyle:!1}),n.dirty(!1),null!=n.__mapOriginalZ2&&(n.z2=n.__mapOriginalZ2,n.__mapOriginalZ2=null))}function IC(e,t,n){var o=e.getZoom(),a=e.getCenter(),u=t.zoom,l=e.dataToPoint(a);if(null!=t.dx&&null!=t.dy&&(l[0]-=t.dx,l[1]-=t.dy,a=e.pointToData(l),e.setCenter(a)),null!=u){if(n){var f=n.min||0;u=Math.max(Math.min(o*u,n.max||1/0),f)/o}e.scale[0]*=u,e.scale[1]*=u;var v=e.position,C=(t.originY-v[1])*(u-1);v[0]-=(t.originX-v[0])*(u-1),v[1]-=C,e.updateTransform(),a=e.pointToData(l),e.setCenter(a),e.setZoom(u*o)}return{center:e.getCenter(),zoom:e.getZoom()}}gu({type:"map",render:function(e,t,n,o){if(!o||"mapToggleSelect"!==o.type||o.from!==this.uid){var a=this.group;if(a.removeAll(),!e.getHostGeoModel()){if(o&&"geoRoam"===o.type&&"series"===o.componentType&&o.seriesId===e.id)(u=this._mapDraw)&&a.add(u.group);else if(e.needsDrawMap){var u=this._mapDraw||new kw(n,!0);a.add(u.group),u.draw(e,t,n,this,o),this._mapDraw=u}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;e.get("showLegendSymbol")&&t.getComponent("legend")&&this._renderSymbols(e,t,n)}}},remove:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},dispose:function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},_renderSymbols:function(e,t,n){var o=e.originalData,a=this.group;o.each(o.mapDimension("value"),function(u,l){if(!isNaN(u)){var f=o.getItemLayout(l);if(f&&f.point){var m=f.point,v=f.offset,x=new ku({style:{fill:e.getData().getVisual("color")},shape:{cx:m[0]+9*v,cy:m[1],r:3},silent:!0,z2:8+(v?0:2)});if(!v){var C=e.mainSeries.getData(),k=o.getName(l),M=C.indexOfName(k),E=o.getItemModel(l),V=E.getModel("label"),N=E.getModel("emphasis.label"),G=C.getItemGraphicEl(M),te=Or(e.getFormattedLabel(M,"normal"),k),J=Or(e.getFormattedLabel(M,"emphasis"),te),me=G[ch],ge=Math.random();if(!me){me=G[ch]={};var pe=pn(lg,!0),_e=pn(lg,!1);G.on("mouseover",pe).on("mouseout",_e).on("emphasis",pe).on("normal",_e)}Ne(me,{recordVersion:G[$b]=ge,circle:x,labelModel:V,hoverLabelModel:N,emphasisText:J,normalText:te}),Tw(me,!1)}a.add(x)}}})}}),io({type:"geoRoam",event:"geoRoam",update:"updateTransform"},function(e,t){var n=e.componentType||"series";t.eachComponent({mainType:n,query:e},function(o){var a=o.coordinateSystem;if("geo"===a.type){var u=IC(a,e,o.get("scaleLimit"));o.setCenter&&o.setCenter(u.center),o.setZoom&&o.setZoom(u.zoom),"series"===n&&le(o.seriesGroup,function(l){l.setCenter(u.center),l.setZoom(u.zoom)})}})});var o2=ur;function Jb(){Co.call(this)}function lm(e){this.name=e,Co.call(this),this._roamTransformable=new Jb,this._rawTransformable=new Jb}function j1(e,t,n,o){var a=n.seriesModel,u=a?a.coordinateSystem:null;return u===this?u[e](o):null}function ba(e,t,n,o){lm.call(this,e),this.map=t;var a=hy.load(t,n);this._nameCoordMap=a.nameCoordMap,this._regionsMap=a.regionsMap,this._invertLongitute=null==o||o,this.regions=a.regions,this._rect=a.boundingRect}function Xv(e,t,n,o){var a=n.geoModel,u=n.seriesModel,l=a?a.coordinateSystem:u?u.coordinateSystem||(u.getReferringComponents("geo")[0]||{}).coordinateSystem:null;return l===this?l[e](o):null}function lT(e,t){var n=e.get("boundingCoords");if(null!=n){var o=n[0],a=n[1];isNaN(o[0])||isNaN(o[1])||isNaN(a[0])||isNaN(a[1])||this.setBoundingRect(o[0],o[1],a[0]-o[0],a[1]-o[1])}var u,l=this.getBoundingRect(),f=e.get("layoutCenter"),m=e.get("layoutSize"),v=t.getWidth(),x=t.getHeight(),C=l.width/l.height*this.aspectScale,k=!1;if(f&&m&&(f=[nr(f[0],v),nr(f[1],x)],m=nr(m,Math.min(v,x)),isNaN(f[0])||isNaN(f[1])||isNaN(m)||(k=!0)),k){var M={};1<C?(M.width=m,M.height=m/C):(M.height=m,M.width=m*C),M.y=f[1]-M.height/2,M.x=f[0]-M.width/2}else(u=e.getBoxLayoutParams()).aspect=C,M=si(u,{width:v,height:x});this.setViewRect(M.x,M.y,M.width,M.height),this.setCenter(e.get("center")),this.setZoom(e.get("zoom"))}function ni(e,t){le(t.get("geoCoord"),function(n,o){e.addGeoCoord(o,n)})}de(Jb,Co),lm.prototype={constructor:lm,type:"view",dimensions:["x","y"],setBoundingRect:function(e,t,n,o){return this._rect=new ii(e,t,n,o),this._rect},getBoundingRect:function(){return this._rect},setViewRect:function(e,t,n,o){this.transformTo(e,t,n,o),this._viewRect=new ii(e,t,n,o)},transformTo:function(e,t,n,o){var a=this.getBoundingRect(),u=this._rawTransformable;u.transform=a.calculateTransform(new ii(e,t,n,o)),u.decomposeTransform(),this._updateTransform()},setCenter:function(e){e&&(this._center=e,this._updateCenterAndZoom())},setZoom:function(e){e=e||1;var t=this.zoomLimit;t&&(null!=t.max&&(e=Math.min(t.max,e)),null!=t.min&&(e=Math.max(t.min,e))),this._zoom=e,this._updateCenterAndZoom()},getDefaultCenter:function(){var e=this.getBoundingRect();return[e.x+e.width/2,e.y+e.height/2]},getCenter:function(){return this._center||this.getDefaultCenter()},getZoom:function(){return this._zoom||1},getRoamTransform:function(){return this._roamTransformable.getLocalTransform()},_updateCenterAndZoom:function(){var e=this._rawTransformable.getLocalTransform(),t=this._roamTransformable,n=this.getDefaultCenter(),o=this.getCenter(),a=this.getZoom();o=ur([],o,e),n=ur([],n,e),t.origin=o,t.position=[n[0]-o[0],n[1]-o[1]],t.scale=[a,a],this._updateTransform()},_updateTransform:function(){var t=this._rawTransformable;(t.parent=this._roamTransformable).updateTransform(),t.updateTransform(),is(this.transform||(this.transform=[]),t.transform||vi()),this._rawTransform=t.getLocalTransform(),this.invTransform=this.invTransform||[],aa(this.invTransform,this.transform),this.decomposeTransform()},getTransformInfo:function(){var e=this._roamTransformable.transform,t=this._rawTransformable;return{roamTransform:e?rr(e):vi(),rawScale:rr(t.scale),rawPosition:rr(t.position)}},getViewRect:function(){return this._viewRect},getViewRectAfterRoam:function(){var e=this.getBoundingRect().clone();return e.applyTransform(this.transform),e},dataToPoint:function(e,t,n){var o=t?this._rawTransform:this.transform;return n=n||[],o?o2(n,e,o):sn(n,e)},pointToData:function(e){var t=this.invTransform;return t?o2([],e,t):[e[0],e[1]]},convertToPixel:pn(j1,"dataToPoint"),convertFromPixel:pn(j1,"pointToData"),containPoint:function(e){return this.getViewRectAfterRoam().contain(e[0],e[1])}},de(lm,Co),ba.prototype={constructor:ba,type:"geo",dimensions:["lng","lat"],containCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return!0;return!1},transformTo:function(e,t,n,o){var a=this.getBoundingRect(),u=this._invertLongitute;a=a.clone(),u&&(a.y=-a.y-a.height);var l=this._rawTransformable;if(l.transform=a.calculateTransform(new ii(e,t,n,o)),l.decomposeTransform(),u){var f=l.scale;f[1]=-f[1]}l.updateTransform(),this._updateTransform()},getRegion:function(e){return this._regionsMap.get(e)},getRegionByCoord:function(e){for(var t=this.regions,n=0;n<t.length;n++)if(t[n].contain(e))return t[n]},addGeoCoord:function(e,t){this._nameCoordMap.set(e,t)},getGeoCoord:function(e){return this._nameCoordMap.get(e)},getBoundingRect:function(){return this._rect},dataToPoint:function(e,t,n){if("string"==typeof e&&(e=this.getGeoCoord(e)),e)return lm.prototype.dataToPoint.call(this,e,t,n)},convertToPixel:pn(Xv,"dataToPoint"),convertFromPixel:pn(Xv,"pointToData")},de(ba,lm);var Mw={dimensions:ba.prototype.dimensions,create:function(e,t){var n=[];e.eachComponent("geo",function(a,u){var l=a.get("map"),f=a.get("aspectScale"),m=!0,v=eg_retrieveMap(l);v&&v[0]&&"svg"===v[0].type?(null==f&&(f=1),m=!1):null==f&&(f=.75);var x=new ba(l+u,l,a.get("nameMap"),m);x.aspectScale=f,x.zoomLimit=a.get("scaleLimit"),n.push(x),ni(x,a),(a.coordinateSystem=x).model=a,x.resize=lT,x.resize(a,t)}),e.eachSeries(function(a){if("geo"===a.get("coordinateSystem")){var u=a.get("geoIndex")||0;a.coordinateSystem=n[u]}});var o={};return e.eachSeriesByType("map",function(a){if(!a.getHostGeoModel()){var u=a.getMapType();o[u]=o[u]||[],o[u].push(a)}}),le(o,function(a,u){var l=new ba(u,u,Ae(Ge(a,function(f){return f.get("nameMap")})));l.zoomLimit=Gr.apply(null,Ge(a,function(f){return f.get("scaleLimit")})),n.push(l),l.resize=lT,l.aspectScale=a[0].get("aspectScale"),l.resize(a[0],t),le(a,function(f){ni(f.coordinateSystem=l,f)})}),n},getFilledRegions:function(e,t,n){for(var o=(e||[]).slice(),a=Gt(),u=0;u<o.length;u++)a.set(o[u].name,o[u]);return le(hy.load(t,n).regions,function(l){var f=l.name;a.get(f)||o.push({name:f})}),o}};Bc("geo",Mw),fa(function(e){var t={};e.eachSeriesByType("map",function(n){var o=n.getMapType();if(!n.getHostGeoModel()&&!t[o]){var a={};le(n.seriesGroup,function(l){var f=l.coordinateSystem,m=l.originalData;l.get("showLegendSymbol")&&e.getComponent("legend")&&m.each(m.mapDimension("value"),function(v,x){var C=m.getName(x),k=f.getRegion(C);if(k&&!isNaN(v)){var M=a[C]||0,E=f.dataToPoint(k.center);a[C]=M+1,m.setItemLayout(x,{point:E,offset:M})}})});var u=n.getData();u.each(function(l){var f=u.getName(l),m=u.getItemLayout(l)||{};m.showLabel=!a[f],u.setItemLayout(l,m)}),t[o]=!0}})}),Gi(function(e){e.eachSeriesByType("map",function(t){var n=t.get("color"),o=t.getModel("itemStyle"),a=o.get("areaColor"),u=o.get("color")||n[t.seriesIndex%n.length];t.getData().setVisual({areaColor:a,color:u})})}),Ii(ih.PROCESSOR.STATISTIC,function(e){var t={};e.eachSeriesByType("map",function(n){var o=n.getHostGeoModel(),a=o?"o"+o.id:"i"+n.getMapType();(t[a]=t[a]||[]).push(n)}),le(t,function(n,o){for(var a=function(l,f){var m={};return le(l,function(v){v.each(v.mapDimension("value"),function(x,C){var k="ec-"+v.getName(C);m[k]=m[k]||[],isNaN(x)||m[k].push(x)})}),l[0].map(l[0].mapDimension("value"),function(v,x){for(var k="ec-"+l[0].getName(x),M=0,E=1/0,V=-1/0,N=m[k].length,G=0;G<N;G++)E=Math.min(E,m[k][G]),V=Math.max(V,m[k][G]),M+=m[k][G];return 0===N?NaN:"min"===f?E:"max"===f?V:"average"===f?M/N:M})}(Ge(n,function(l){return l.getData()}),n[0].get("mapValueCalculation")),u=0;u<n.length;u++)n[u].originalData=n[u].getData();for(u=0;u<n.length;u++)(n[u].seriesGroup=n)[u].needsDrawMap=0===u&&!n[u].getHostGeoModel(),n[u].setData(a.cloneShallow()),n[u].mainSeries=n[0]})}),da(function(e){var t=[];le(e.series,function(n){n&&"map"===n.type&&(t.push(n),n.map=n.map||n.mapType,Ee(n,n.mapLocation))})}),vw("map",[{type:"mapToggleSelect",event:"mapselectchanged",method:"toggleSelected"},{type:"mapSelect",event:"mapselected",method:"select"},{type:"mapUnSelect",event:"mapunselected",method:"unSelect"}]);var Ko=le,Dw="\0__link_datas",Aw="\0__link_mainData";function cT(e){var t=e.mainData,n=e.datas;n||(n={main:t},e.datasAttr={main:"data"}),e.datas=e.mainData=null,sc(t,n,e),Ko(n,function(o){Ko(t.TRANSFERABLE_METHODS,function(a){o.wrapMethod(a,pn(ef,e))})}),t.wrapMethod("cloneShallow",pn(Qb,e)),Ko(t.CHANGABLE_METHODS,function(o){t.wrapMethod(o,pn(q1,e))}),Qi(n[t.dataType]===t)}function ef(e,t){if(function(o){return o[Aw]===o}(this)){var n=Ne({},this[Dw]);sc(n[this.dataType]=t,n,e)}else xp(t,this.dataType,this[Aw],e);return t}function q1(e,t){return e.struct&&e.struct.update(this),t}function Qb(e,t){return Ko(t[Dw],function(n,o){n!==t&&xp(n.cloneShallow(),o,t,e)}),t}function bp(e){var t=this[Aw];return null==e||null==t?t:t[Dw][e]}function sc(e,t,n){e[Dw]={},Ko(t,function(o,a){xp(o,a,e,n)})}function xp(e,t,n,o){(n[Dw][t]=e)[Aw]=n,e.dataType=t,o.struct&&(e[o.structAttr]=o.struct,o.struct[o.datasAttr[t]]=e),e.getLinkedData=bp}function Iw(e,t){this.name=e||"",this.depth=0,this.height=0,this.parentNode=null,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.hostTree=t}function my(e){this._nodes=[],this.hostModel=e}function OC(e,t){var n=e.isExpand?e.children:[],o=e.parentNode.children,a=e.hierNode.i?o[e.hierNode.i-1]:null;if(n.length){!function(l){for(var f=l.children,m=f.length,v=0,x=0;0<=--m;){var C=f[m];C.hierNode.prelim+=v,C.hierNode.modifier+=v,v+=C.hierNode.shift+(x+=C.hierNode.change)}}(e);var u=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;a?(e.hierNode.prelim=a.hierNode.prelim+t(e,a),e.hierNode.modifier=e.hierNode.prelim-u):e.hierNode.prelim=u}else a&&(e.hierNode.prelim=a.hierNode.prelim+t(e,a));e.parentNode.hierNode.defaultAncestor=function(l,f,m,v){if(f){for(var x=l,C=l,k=C.parentNode.children[0],M=f,E=x.hierNode.modifier,V=C.hierNode.modifier,N=k.hierNode.modifier,G=M.hierNode.modifier;M=EC(M),C=Z1(C),M&&C;){x=EC(x),k=Z1(k),x.hierNode.ancestor=l;var te=M.hierNode.prelim+G-C.hierNode.prelim-V+v(M,C);0<te&&(dT((J=M).hierNode.ancestor.parentNode===l.parentNode?J.hierNode.ancestor:m,l,te),V+=te,E+=te),G+=M.hierNode.modifier,V+=C.hierNode.modifier,E+=x.hierNode.modifier,N+=k.hierNode.modifier}M&&!EC(x)&&(x.hierNode.thread=M,x.hierNode.modifier+=G-E),C&&!Z1(k)&&(k.hierNode.thread=C,k.hierNode.modifier+=V-N,m=l)}var J;return m}(e,a,e.parentNode.hierNode.defaultAncestor||o[0],t)}function X1(e){e.setLayout({x:e.hierNode.prelim+e.parentNode.hierNode.modifier},!0),e.hierNode.modifier+=e.parentNode.hierNode.modifier}function Y1(e){return arguments.length?e:i2}function py(e,t){var n={};return e-=Math.PI/2,n.x=t*Math.cos(e),n.y=t*Math.sin(e),n}function EC(e){var t=e.children;return t.length&&e.isExpand?t[t.length-1]:e.hierNode.thread}function Z1(e){var t=e.children;return t.length&&e.isExpand?t[0]:e.hierNode.thread}function dT(e,t,n){var o=n/(t.hierNode.i-e.hierNode.i);t.hierNode.change-=o,t.hierNode.shift+=n,t.hierNode.modifier+=n,t.hierNode.prelim+=n,e.hierNode.change+=o}function i2(e,t){return e.parentNode===t.parentNode?1:2}Iw.prototype={constructor:Iw,isRemoved:function(){return this.dataIndex<0},eachNode:function(e,t,n){"function"==typeof e&&(n=t,t=e,e=null),Gn(e=e||{})&&(e={order:e});var o,a=e.order||"preorder",u=this[e.attr||"children"];"preorder"===a&&(o=t.call(n,this));for(var l=0;!o&&l<u.length;l++)u[l].eachNode(e,t,n);"postorder"===a&&t.call(n,this)},updateDepthAndHeight:function(e){var t=0;this.depth=e;for(var n=0;n<this.children.length;n++){var o=this.children[n];o.updateDepthAndHeight(e+1),o.height>t&&(t=o.height)}this.height=t+1},getNodeById:function(e){if(this.getId()===e)return this;for(var t=0,n=this.children,o=n.length;t<o;t++){var a=n[t].getNodeById(e);if(a)return a}},contains:function(e){if(e===this)return!0;for(var t=0,n=this.children,o=n.length;t<o;t++){var a=n[t].contains(e);if(a)return a}},getAncestors:function(e){for(var t=[],n=e?this:this.parentNode;n;)t.push(n),n=n.parentNode;return t.reverse(),t},getValue:function(e){var t=this.hostTree.data;return t.get(t.getDimension(e||"value"),this.dataIndex)},setLayout:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemLayout(this.dataIndex,e,t)},getLayout:function(){return this.hostTree.data.getItemLayout(this.dataIndex)},getModel:function(e){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(e)},setVisual:function(e,t){0<=this.dataIndex&&this.hostTree.data.setItemVisual(this.dataIndex,e,t)},getVisual:function(e,t){return this.hostTree.data.getItemVisual(this.dataIndex,e,t)},getRawIndex:function(){return this.hostTree.data.getRawIndex(this.dataIndex)},getId:function(){return this.hostTree.data.getId(this.dataIndex)},isAncestorOf:function(e){for(var t=e.parentNode;t;){if(t===this)return!0;t=t.parentNode}return!1},isDescendantOf:function(e){return e!==this&&e.isAncestorOf(this)}},my.prototype={constructor:my,type:"tree",eachNode:function(e,t,n){this.root.eachNode(e,t,n)},getNodeByDataIndex:function(e){var t=this.data.getRawIndex(e);return this._nodes[t]},getNodeByName:function(e){return this.root.getNodeByName(e)},update:function(){for(var e=this.data,t=this._nodes,n=0,o=t.length;n<o;n++)t[n].dataIndex=-1;for(n=0,o=e.count();n<o;n++)t[e.getRawIndex(n)].dataIndex=n},clearLayouts:function(){this.data.clearItemLayouts()}},my.createTree=function(e,t,n){var o=new my(t),a=[],u=1;(function m(v,x){var C=v.value;u=Math.max(u,en(C)?C.length:1),a.push(v);var k=new Iw(v.name,o);x?function uc(e,t){e.parentNode!==t&&(t.children.push(e),e.parentNode=t)}(k,x):o.root=k,o._nodes.push(k);var M=v.children;if(M)for(var E=0;E<M.length;E++)m(M[E],k)})(e),o.root.updateDepthAndHeight(0);var l=Ob(a,{coordDimensions:["value"],dimensionsCount:u}),f=new Uu(l,t);return f.initData(a),n&&n(f),cT({mainData:f,struct:o,structAttr:"tree"}),o.update(),o},Ma.extend({type:"series.tree",layoutInfo:null,layoutMode:"box",getInitialData:function(e){var t={name:e.name,children:e.data},n=new ei(e.leaves||{},this,this.ecModel),o=my.createTree(t,this,function(l){l.wrapMethod("getItemModel",function(f,m){var v=o.getNodeByDataIndex(m);return v.children.length&&v.isExpand||(f.parentModel=n),f})}),a=0;o.eachNode("preorder",function(l){l.depth>a&&(a=l.depth)});var u=e.expandAndCollapse&&0<=e.initialTreeDepth?e.initialTreeDepth:a;return o.root.eachNode("preorder",function(l){var f=l.hostTree.data.getRawDataItem(l.dataIndex);l.isExpand=f&&null!=f.collapsed?!f.collapsed:l.depth<=u}),o.data},getOrient:function(){var e=this.get("orient");return"horizontal"===e?e="LR":"vertical"===e&&(e="TB"),e},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},formatTooltip:function(e){for(var t=this.getData().tree,n=t.root.children[0],o=t.getNodeByDataIndex(e),a=o.getValue(),u=o.name;o&&o!==n;)u=o.parentNode.name+"."+u,o=o.parentNode;return Pa(u+(isNaN(a)||null==a?"":" : "+a))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderColor:"#c23531",borderWidth:1.5},label:{show:!0,color:"#555"},leaves:{label:{show:!0}},animationEasing:"linear",animationDuration:700,animationDurationUpdate:1e3}});var PC=Tc({shape:{parentPoint:[],childPoints:[],orient:"",forkPosition:""},style:{stroke:"#000",fill:null},buildPath:function(e,t){var n=t.childPoints,o=n.length,a=t.parentPoint,u=n[0],l=n[o-1];if(1===o)return e.moveTo(a[0],a[1]),void e.lineTo(u[0],u[1]);var f=t.orient,m="TB"===f||"BT"===f?0:1,v=1-m,x=nr(t.forkPosition,1),C=[];C[m]=a[m],C[v]=a[v]+(l[v]-a[v])*x,e.moveTo(a[0],a[1]),e.lineTo(C[0],C[1]),e.moveTo(u[0],u[1]),C[m]=u[m],e.lineTo(C[0],C[1]),C[m]=l[m],e.lineTo(C[0],C[1]),e.lineTo(l[0],l[1]);for(var k=1;k<o-1;k++){var M=n[k];e.moveTo(M[0],M[1]),C[m]=M[m],e.lineTo(C[0],C[1])}}});function _p(e,t){var n=e.getItemLayout(t);return n&&!isNaN(n.x)&&!isNaN(n.y)&&"none"!==e.getItemVisual(t,"symbol")}function tf(e,t,n){return n.itemModel=t,n.itemStyle=t.getModel("itemStyle").getItemStyle(),n.hoverItemStyle=t.getModel("emphasis.itemStyle").getItemStyle(),n.lineStyle=t.getModel("lineStyle").getLineStyle(),n.labelModel=t.getModel("label"),n.hoverLabelModel=t.getModel("emphasis.label"),n.symbolInnerColor=!1===e.isExpand&&0!==e.children.length?n.itemStyle.fill:"#fff",n}function Yv(e,t,n,o,a,u){var l=!n,f=e.tree.getNodeByDataIndex(t),m=f.getModel(),v=(u=tf(f,m,u),e.tree.root),x=f.parentNode===v?f:f.parentNode||f,C=e.getItemGraphicEl(x.dataIndex),k=x.getLayout(),M=C?{x:C.position[0],y:C.position[1],rawX:C.__radialOldRawX,rawY:C.__radialOldRawY}:k,E=f.getLayout();l?(n=new mp(e,t,u)).attr("position",[M.x,M.y]):n.updateData(e,t,u),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=E.rawX,n.__radialRawY=E.rawY,o.add(n),e.setItemGraphicEl(t,n),Po(n,{position:[E.x,E.y]},a);var V=n.getSymbolPath();if("radial"===u.layout){var N,G,te=v.children[0],J=te.getLayout(),me=te.children.length;if(E.x===J.x&&!0===f.isExpand){var ge={};ge.x=(te.children[0].getLayout().x+te.children[me-1].getLayout().x)/2,ge.y=(te.children[0].getLayout().y+te.children[me-1].getLayout().y)/2,(N=Math.atan2(ge.y-J.y,ge.x-J.x))<0&&(N=2*Math.PI+N),(G=ge.x<J.x)&&(N-=Math.PI)}else(N=Math.atan2(E.y-J.y,E.x-J.x))<0&&(N=2*Math.PI+N),0===f.children.length||0!==f.children.length&&!1===f.isExpand?(G=E.x<J.x)&&(N-=Math.PI):(G=E.x>J.x)||(N-=Math.PI);var pe=G?"left":"right",_e=u.labelModel.get("rotate"),Me=_e*(Math.PI/180);V.setStyle({textPosition:u.labelModel.get("position")||pe,textRotation:null==_e?-N:Me,textOrigin:"center",verticalAlign:"middle"})}!function(We,Ke,et,ut,lt,vt,Mt,Pt,Ct){var Zt=Ct.edgeShape,An=ut.__edge;if("curve"===Zt)Ke.parentNode&&Ke.parentNode!==et&&Po(An=An||(ut.__edge=new rv({shape:Ow(Ct,lt,lt),style:Ee({opacity:0,strokeNoScale:!0},Ct.lineStyle)})),{shape:Ow(Ct,vt,Mt),style:Ee({opacity:1},Ct.lineStyle)},We);else if("polyline"===Zt&&"orthogonal"===Ct.layout&&Ke!==et&&Ke.children&&0!==Ke.children.length&&!0===Ke.isExpand){for(var Rn=Ke.children,Cn=[],Jn=0;Jn<Rn.length;Jn++){var dr=Rn[Jn].getLayout();Cn.push([dr.x,dr.y])}Po(An=An||(ut.__edge=new PC({shape:{parentPoint:[Mt.x,Mt.y],childPoints:[[Mt.x,Mt.y]],orient:Ct.orient,forkPosition:Ct.edgeForkPosition},style:Ee({opacity:0,strokeNoScale:!0},Ct.lineStyle)})),{shape:{parentPoint:[Mt.x,Mt.y],childPoints:Cn},style:Ee({opacity:1},Ct.lineStyle)},We)}Pt.add(An)}(a,f,v,n,M,k,E,o,u)}function Of(e,t,n,o,a,u){for(var l,C,f=e.tree.getNodeByDataIndex(t),m=e.tree.root,v=f.getModel(),x=(u=tf(f,v,u),f.parentNode===m?f:f.parentNode||f);null==(l=x.getLayout());)x=x.parentNode===m?x:x.parentNode||x;Po(n,{position:[l.x+1,l.y+1]},a,function(){o.remove(n),e.setItemGraphicEl(t,null)}),n.fadeOut(null,{keepLabel:!0});var k=e.getItemGraphicEl(x.dataIndex).__edge,M=n.__edge||(!1===x.isExpand||1===x.children.length?k:void 0);C=u.edgeShape,M&&("curve"===C?Po(M,{shape:Ow(u,l,l),style:{opacity:0}},a,function(){o.remove(M)}):"polyline"===C&&"orthogonal"===u.layout&&Po(M,{shape:{parentPoint:[l.x,l.y],childPoints:[[l.x,l.y]]},style:{opacity:0}},a,function(){o.remove(M)}))}function Ow(e,t,n){var o,a,u,l,f,m,v,x,C=e.orient;if("radial"!==e.layout)return f=t.x,v=t.y,m=n.x,x=n.y,"LR"!==C&&"RL"!==C||(o=f+(m-f)*e.curvature,a=v,u=m+(f-m)*e.curvature,l=x),"TB"!==C&&"BT"!==C||(o=f,a=v+(x-v)*e.curvature,u=m,l=x+(v-x)*e.curvature),{x1:f,y1:v,x2:m,y2:x,cpx1:o,cpy1:a,cpx2:u,cpy2:l};m=n.rawX,x=n.rawY;var k=py(f=t.rawX,v=t.rawY),M=py(f,v+(x-v)*e.curvature),E=py(m,x+(v-x)*e.curvature),V=py(m,x);return{x1:k.x,y1:k.y,x2:V.x,y2:V.y,cpx1:M.x,cpy1:M.y,cpx2:E.x,cpy2:E.y}}function Ew(e,t){for(var n,o=[e];n=o.pop();)if(t(n),n.isExpand){var a=n.children;if(a.length)for(var u=a.length-1;0<=u;u--)o.push(a[u])}}function cm(e,t,n){if(e&&0<=$e(t,e.type)){var o=n.getData().tree.root,a=e.targetNode;if("string"==typeof a&&(a=o.getNodeById(a)),a&&o.contains(a))return{node:a};var u=e.targetNodeId;if(null!=u&&(a=o.getNodeById(u)))return{node:a}}}function wp(e){for(var t=[];e;)(e=e.parentNode)&&t.push(e);return t.reverse()}function dh(e,t){return 0<=$e(wp(e),t)}function Pw(e,t){for(var n=[];e;){var o=e.dataIndex;n.push({name:e.name,dataIndex:o,value:t.getRawValue(o)}),e=e.parentNode}return n.reverse(),n}function NC(e){this.group=new mr,e.add(this.group)}function Sp(e,t,n,o,a,u){var l=[[a?e:e-5,t],[e+n,t],[e+n,t+o],[a?e:e-5,t+o]];return u||l.splice(2,0,[e+n+5,t+o/2]),a||l.push([e,t+o/2]),l}function Rw(e){var t=$1(e);return t.stroke=t.fill=t.lineWidth=null,t}gu({type:"tree",init:function(e,t){this._mainGroup=new mr,this._controller=new gy(t.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},render:function(e,t,n,o){var a=e.getData(),u=e.layoutInfo,l=this._mainGroup,f=e.get("layout");l.attr("position","radial"===f?[u.x+u.width/2,u.y+u.height/2]:[u.x,u.y]),this._updateViewCoordSys(e,u,f),this._updateController(e,t,n);var m=this._data,v={expandAndCollapse:e.get("expandAndCollapse"),layout:f,edgeShape:e.get("edgeShape"),edgeForkPosition:e.get("edgeForkPosition"),orient:e.getOrient(),curvature:e.get("lineStyle.curveness"),symbolRotate:e.get("symbolRotate"),symbolOffset:e.get("symbolOffset"),hoverAnimation:e.get("hoverAnimation"),useNameLabel:!0,fadeIn:!0};a.diff(m).add(function(x){_p(a,x)&&Yv(a,x,null,l,e,v)}).update(function(x,C){var k=m.getItemGraphicEl(C);_p(a,x)?Yv(a,x,k,l,e,v):k&&Of(m,C,k,l,e,v)}).remove(function(x){var C=m.getItemGraphicEl(x);C&&Of(m,x,C,l,e,v)}).execute(),this._nodeScaleRatio=e.get("nodeScaleRatio"),this._updateNodeAndLinkScale(e),!0===v.expandAndCollapse&&a.eachItemGraphicEl(function(x,C){x.off("click").on("click",function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:e.id,dataIndex:C})})}),this._data=a},_updateViewCoordSys:function(e){var t=e.getData(),n=[];t.each(function(m){var v=t.getItemLayout(m);!v||isNaN(v.x)||isNaN(v.y)||n.push([+v.x,+v.y])});var o=[],a=[];y0(n,o,a);var u=this._min,l=this._max;a[0]-o[0]==0&&(o[0]=u?u[0]:o[0]-1,a[0]=l?l[0]:a[0]+1),a[1]-o[1]==0&&(o[1]=u?u[1]:o[1]-1,a[1]=l?l[1]:a[1]+1);var f=e.coordinateSystem=new lm;f.zoomLimit=e.get("scaleLimit"),f.setBoundingRect(o[0],o[1],a[0]-o[0],a[1]-o[1]),f.setCenter(e.get("center")),f.setZoom(e.get("zoom")),this.group.attr({position:f.position,scale:f.scale}),this._viewCoordSys=f,this._min=o,this._max=a},_updateController:function(e,t,n){var o=this._controller,a=this._controllerHost,u=this.group;o.setPointerChecker(function(l,f,m){var v=u.getBoundingRect();return v.applyTransform(u.transform),v.contain(f,m)&&!AC(l,n,e)}),o.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(l){MC(a,l.dx,l.dy),n.dispatchAction({seriesId:e.id,type:"treeRoam",dx:l.dx,dy:l.dy})},this).on("zoom",function(l){DC(a,l.scale,l.originX,l.originY),n.dispatchAction({seriesId:e.id,type:"treeRoam",zoom:l.scale,originX:l.originX,originY:l.originY}),this._updateNodeAndLinkScale(e)},this)},_updateNodeAndLinkScale:function(e){var t=e.getData(),n=this._getNodeGlobalScale(e),o=[n,n];t.eachItemGraphicEl(function(a,u){a.attr("scale",o)})},_getNodeGlobalScale:function(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=this._nodeScaleRatio,o=t.scale,a=o&&o[0]||1;return((t.getZoom()-1)*n+1)/a},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={}},remove:function(){this._mainGroup.removeAll(),this._data=null}}),io({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var o=e.dataIndex,a=n.getData().tree.getNodeByDataIndex(o);a.isExpand=!a.isExpand})}),io({type:"treeRoam",event:"treeRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",subType:"tree",query:e},function(n){var o=IC(n.coordinateSystem,e);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})}),Gi(zv("tree","circle")),fa(function(e,t){e.eachSeriesByType("tree",function(n){!function(o,a){var _e,u=(_e=a,si(o.getBoxLayoutParams(),{width:_e.getWidth(),height:_e.getHeight()}));o.layoutInfo=u;var l=o.get("layout"),f=0,m=0,v=null;v="radial"===l?(f=2*Math.PI,m=Math.min(u.height,u.width)/2,Y1(function(pe,_e){return(pe.parentNode===_e.parentNode?1:2)/pe.depth})):(f=u.width,m=u.height,Y1());var x=o.getData().tree.root,C=x.children[0];if(C){(function(pe){pe.hierNode={defaultAncestor:null,ancestor:pe,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var _e,Me,We=[pe];_e=We.pop();)if(Me=_e.children,_e.isExpand&&Me.length)for(var Ke=Me.length-1;0<=Ke;Ke--){var et=Me[Ke];et.hierNode={defaultAncestor:null,ancestor:et,prelim:0,modifier:0,change:0,shift:0,i:Ke,thread:null},We.push(et)}})(x),function(pe,_e,Me){for(var We,Ke=[pe],et=[];We=Ke.pop();)if(et.push(We),We.isExpand){var ut=We.children;if(ut.length)for(var lt=0;lt<ut.length;lt++)Ke.push(ut[lt])}for(;We=et.pop();)_e(We,Me)}(C,OC,v),x.hierNode.modifier=-C.hierNode.prelim,Ew(C,X1);var k=C,M=C,E=C;Ew(C,function(pe){var _e=pe.getLayout().x;_e<k.getLayout().x&&(k=pe),_e>M.getLayout().x&&(M=pe),pe.depth>E.depth&&(E=pe)});var V=k===M?1:v(k,M)/2,N=V-k.getLayout().x,G=0,te=0,J=0,me=0;if("radial"===l)G=f/(M.getLayout().x+V+N),te=m/(E.depth-1||1),Ew(C,function(pe){var _e=py(J=(pe.getLayout().x+N)*G,me=(pe.depth-1)*te);pe.setLayout({x:_e.x,y:_e.y,rawX:J,rawY:me},!0)});else{var ge=o.getOrient();"RL"===ge||"LR"===ge?(te=m/(M.getLayout().x+V+N),G=f/(E.depth-1||1),Ew(C,function(pe){me=(pe.getLayout().x+N)*te,pe.setLayout({x:J="LR"===ge?(pe.depth-1)*G:f-(pe.depth-1)*G,y:me},!0)})):"TB"!==ge&&"BT"!==ge||(G=f/(M.getLayout().x+V+N),te=m/(E.depth-1||1),Ew(C,function(pe){J=(pe.getLayout().x+N)*G,pe.setLayout({x:J,y:me="TB"===ge?(pe.depth-1)*te:m-(pe.depth-1)*te},!0)}))}}}(n,t)})}),Ma.extend({type:"series.treemap",layoutMode:"box",dependencies:["grid","polar"],preventUsingHoverLayer:!0,_viewRoot:null,defaultOption:{progressive:0,left:"center",top:"middle",right:null,bottom:null,width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"\u25b6",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",borderColor:"rgba(255,255,255,0.7)",borderWidth:1,shadowColor:"rgba(150,150,150,1)",shadowBlur:3,shadowOffsetX:0,shadowOffsetY:0,textStyle:{color:"#fff"}},emphasis:{textStyle:{}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",ellipsis:!0},upperLabel:{show:!1,position:[0,"50%"],height:20,color:"#fff",ellipsis:!0,verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],color:"#fff",ellipsis:!0,verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},getInitialData:function(e,t){var n={name:e.name,children:e.data};!function f(m){var v=0;le(m.children,function(C){f(C);var k=C.value;en(k)&&(k=k[0]),v+=k});var x=m.value;en(x)&&(x=x[0]),null!=x&&!isNaN(x)||(x=v),x<0&&(x=0),en(m.value)?m.value[0]=x:m.value=x}(n);var o=e.levels||[],a=new ei({itemStyle:this.designatedVisualItemStyle={}},this,t),u=Ge((o=e.levels=function(f,m){var v,x=m.get("color");if(x)return le(f=f||[],function(C){var k=new ei(C),M=k.get("color");(k.get("itemStyle.color")||M&&"none"!==M)&&(v=!0)}),!v&&((f[0]||(f[0]={})).color=x.slice()),f}(o,t))||[],function(f){return new ei(f,a,t)},this),l=my.createTree(n,this,function(f){f.wrapMethod("getItemModel",function(m,v){var x=l.getNodeByDataIndex(v);return m.parentModel=u[x.depth]||a,m})});return l.data},optionUpdated:function(){this.resetViewRoot()},formatTooltip:function(e){var t=this.getData(),n=this.getRawValue(e),o=en(n)?Ac(n[0]):Ac(n);return Pa(t.getName(e)+": "+o)},getDataParams:function(e){var t=Ma.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=Pw(n,this),t},setLayoutInfo:function(e){this.layoutInfo=this.layoutInfo||{},Ne(this.layoutInfo,e)},mapIdToIndex:function(e){var t=this._idIndexMap;t||(t=this._idIndexMap=Gt(),this._idIndexMapCount=0);var n=t.get(e);return null==n&&t.set(e,n=this._idIndexMapCount++),n},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}}),NC.prototype={constructor:NC,render:function(e,t,n,o){var a=e.getModel("breadcrumb"),u=this.group;if(u.removeAll(),a.get("show")&&n){var l=a.getModel("itemStyle"),f=l.getModel("textStyle"),m={pos:{left:a.get("left"),right:a.get("right"),top:a.get("top"),bottom:a.get("bottom")},box:{width:t.getWidth(),height:t.getHeight()},emptyItemWidth:a.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,m,f),this._renderContent(e,m,l,f,o),hb(u,m.pos,m.box)}},_prepare:function(e,t,n){for(var o=e;o;o=o.parentNode){var a=o.getModel().get("name"),u=n.getTextRect(a),l=Math.max(u.width+16,t.emptyItemWidth);t.totalWidth+=l+8,t.renderList.push({node:o,text:a,width:l})}},_renderContent:function(e,t,n,o,a){for(var u,l,f=0,m=t.emptyItemWidth,v=e.get("breadcrumb.height"),x=(ge=void 0,void 0,void 0,Me=void 0,We=void 0,Ke=void 0,et=void 0,_e=(me=t.box).height,Me=nr((J=t.pos).x,pe=me.width),We=nr(J.y,_e),Ke=nr(J.x2,pe),et=nr(J.y2,_e),(isNaN(Me)||isNaN(parseFloat(J.x)))&&(Me=0),(isNaN(Ke)||isNaN(parseFloat(J.x2)))&&(Ke=pe),(isNaN(We)||isNaN(parseFloat(J.y)))&&(We=0),(isNaN(et)||isNaN(parseFloat(J.y2)))&&(et=_e),ge=Uh(ge||0),{width:Math.max(Ke-Me-ge[1]-ge[3],0),height:Math.max(et-We-ge[0]-ge[2],0)}),C=t.totalWidth,k=t.renderList,M=k.length-1;0<=M;M--){var E=k[M],V=E.node,N=E.width,G=E.text;C>x.width&&(C-=N-m,N=m,G=null);var te=new Vo({shape:{points:Sp(f,0,N,v,M===k.length-1,0===M)},style:Ee(n.getItemStyle(),{lineJoin:"bevel",text:G,textFill:o.getTextColor(),textFont:o.getFont()}),z:10,onclick:pn(a,V)});this.group.add(te),te.eventData={componentType:"series",componentSubType:"treemap",componentIndex:(u=e).componentIndex,seriesIndex:u.componentIndex,seriesName:u.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:(l=V)&&l.dataIndex,name:l&&l.name},treePathInfo:l&&Pw(l,u)},f+=N+8}var J,me,ge,pe,_e,Me,We,Ke,et},remove:function(){this.group.removeAll()}};var Na=Rt,fT=mr,dm=fi,fh=le,RC=["label"],ex=["emphasis","label"],hT=["upperLabel"],K1=["emphasis","upperLabel"],$1=Cu([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]);function Zv(e,t,n,o,a,u,l,f,m,v){if(l){var x=l.getLayout(),C=e.getData();if(C.setItemGraphicEl(l.dataIndex,null),x&&x.isInView){var k=x.width,M=x.height,E=x.borderWidth,V=x.invisible,N=l.getRawIndex(),G=f&&f.getRawIndex(),te=l.viewChildren,J=x.upperHeight,me=te&&te.length,ge=l.getModel("itemStyle"),pe=l.getModel("emphasis.itemStyle"),_e=vt("nodeGroup",fT);if(_e){if(m.add(_e),_e.attr("position",[x.x||0,x.y||0]),_e.__tmNodeWidth=k,_e.__tmNodeHeight=M,x.isAboveViewRoot)return _e;var Me=l.getModel(),We=vt("background",dm,v,1);if(We&&function(Mt,Pt,Ct){if(Pt.dataIndex=l.dataIndex,Pt.seriesIndex=e.seriesIndex,Pt.setShape({x:0,y:0,width:k,height:M}),V)et(Pt);else{Pt.invisible=!1;var Zt=l.getVisual("borderColor",!0),An=pe.get("borderColor"),Rn=Rw(ge);Rn.fill=Zt;var Cn=$1(pe);if(Cn.fill=An,Ct){var Jn=k-2*E;ut(Rn,Cn,Zt,Jn,J,{x:E,y:0,width:Jn,height:J})}else Rn.text=Cn.text=null;Pt.setStyle(Rn),il(Pt,Cn)}Mt.add(Pt)}(_e,We,me&&x.upperLabelHeight),me)Gh(_e)&&Og(_e,!1),We&&(Og(We,!0),C.setItemGraphicEl(l.dataIndex,We));else{var Ke=vt("content",dm,v,2);Ke&&function(Mt,Pt){Pt.dataIndex=l.dataIndex,Pt.seriesIndex=e.seriesIndex;var Ct=Math.max(k-2*E,0),Zt=Math.max(M-2*E,0);if(Pt.culling=!0,Pt.setShape({x:E,y:E,width:Ct,height:Zt}),V)et(Pt);else{Pt.invisible=!1;var An=l.getVisual("color",!0),Rn=Rw(ge);Rn.fill=An;var Cn=$1(pe);ut(Rn,Cn,An,Ct,Zt),Pt.setStyle(Rn),il(Pt,Cn)}Mt.add(Pt)}(_e,Ke),We&&Gh(We)&&Og(We,!1),Og(_e,!0),C.setItemGraphicEl(l.dataIndex,_e)}return _e}}}function et(Mt){Mt.invisible||u.push(Mt)}function ut(Mt,Pt,Ct,Zt,An,Rn){var Cn=Me.get("name"),Jn=Me.getModel(Rn?hT:RC),dr=Me.getModel(Rn?K1:ex),$r=Jn.getShallow("show");Ln(Mt,Pt,Jn,dr,{defaultText:$r?Cn:null,autoColor:Ct,isRectText:!0,labelFetcher:e,labelDataIndex:l.dataIndex,labelProp:Rn?"upperLabel":"label"}),lt(Mt,Rn,x),lt(Pt,Rn,x),Rn&&(Mt.textRect=ie(Rn)),Mt.truncate=$r&&Jn.get("ellipsis")?{outerWidth:Zt,outerHeight:An,minChar:2}:null}function lt(Mt,Pt,Ct){var Zt=Mt.text;if(!Pt&&Ct.isLeafRoot&&null!=Zt){var An=e.get("drillDownIcon",!0);Mt.text=An?An+" "+Zt:Zt}}function vt(Mt,Pt,Ct,Zt){var Jn,dr,An=null!=G&&n[Mt][G],Rn=a[Mt];return An?(n[Mt][G]=null,Jn=An,dr=Mt,(Rn[N]={}).old="nodeGroup"===dr?Jn.position.slice():Ne({},Jn.shape)):V||((An=new Pt({z:function(Cn,Jn){var dr=10*Cn+Jn;return(dr-1)/dr}(Ct,Zt)})).__tmDepth=Ct,function(Cn,Jn,dr){var $r=Cn[N]={},zn=l.parentNode;if(zn&&(!o||"drillDown"===o.direction)){var Ur=0,Jr=0,_o=a.background[zn.getRawIndex()];!o&&_o&&_o.old&&(Ur=_o.old.width,Jr=_o.old.height),$r.old="nodeGroup"===dr?[0,Jr]:{x:Ur,y:Jr,width:0,height:0}}$r.fadein="nodeGroup"!==dr}(Rn,0,An.__tmStorageName=Mt)),t[Mt][N]=An}}gu({type:"treemap",init:function(e,t){this._storage={nodeGroup:[],background:[],content:[]},this._state="ready"},render:function(e,t,n,o){if(!($e(t.findComponents({mainType:"series",subType:"treemap",query:o}),e)<0)){this.seriesModel=e,this.api=n,this.ecModel=t;var a=cm(o,["treemapZoomToNode","treemapRootToNode"],e),u=o&&o.type,l=e.layoutInfo,f=!this._oldTree,m=this._storage,v="treemapRootToNode"===u&&a&&m?{rootNodeGroup:m.nodeGroup[a.node.getRawIndex()],direction:o.direction}:null,x=this._giveContainerGroup(l),C=this._doRender(x,e,v);f||u&&"treemapZoomToNode"!==u&&"treemapRootToNode"!==u?C.renderFinally():this._doAnimation(x,C,e,v),this._resetController(n),this._renderBreadcrumb(e,n,a)}},_giveContainerGroup:function(e){var t=this._containerGroup;return t||(t=this._containerGroup=new fT,this._initEvents(t),this.group.add(t)),t.attr("position",[e.x,e.y]),t},_doRender:function(e,t,n){var o=t.getData().tree,a=this._oldTree,u={nodeGroup:[],background:[],content:[]},l={nodeGroup:[],background:[],content:[]},f=this._storage,m=[],v=pn(Zv,t,l,f,n,u,m);!function M(E,V,N,G,te){function J(ge){return ge.getId()}function me(ge,pe){var _e=null!=ge?E[ge]:null,Me=null!=pe?V[pe]:null,We=v(_e,Me,N,te);We&&M(_e&&_e.viewChildren||[],Me&&Me.viewChildren||[],We,G,te+1)}G?fh(V=E,function(ge,pe){ge.isRemoved()||me(pe,pe)}):new Af(V,E,J,J).add(me).update(me).remove(pn(me,null)).execute()}(o.root?[o.root]:[],a&&a.root?[a.root]:[],e,o===a||!a,0);var x,C,k=(C={nodeGroup:[],background:[],content:[]},(x=f)&&fh(x,function(M,E){var V=C[E];fh(M,function(N){N&&(V.push(N),N.__tmWillDelete=1)})}),C);return this._oldTree=o,this._storage=l,{lastsForAnimation:u,willDeleteEls:k,renderFinally:function(){fh(k,function(M){fh(M,function(E){E.parent&&E.parent.remove(E)})}),fh(m,function(M){M.invisible=!0,M.dirty()})}}},_doAnimation:function(e,t,n,o){if(n.get("animation")){var a=n.get("animationDurationUpdate"),u=n.get("animationEasing"),l=(m=[],v={},{add:function(x,C,k,M,E){return Gn(M)&&(E=M,M=0),!v[x.id]&&(v[x.id]=1,m.push({el:x,target:C,time:k,delay:M,easing:E}),!0)},done:function(x){return f=x,this},start:function(){for(var x=m.length,C=0,k=m.length;C<k;C++){var M=m[C];M.el.animateTo(M.target,M.time,M.delay,M.easing,E)}return this;function E(){--x||(m.length=0,v={},f&&f())}}});fh(t.willDeleteEls,function(f,m){fh(f,function(v,x){if(!v.invisible){var C,k=v.parent;if(o&&"drillDown"===o.direction)C=k===o.rootNodeGroup?{shape:{x:0,y:0,width:k.__tmNodeWidth,height:k.__tmNodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var M=0,E=0;k.__tmWillDelete||(M=k.__tmNodeWidth/2,E=k.__tmNodeHeight/2),C="nodeGroup"===m?{position:[M,E],style:{opacity:0}}:{shape:{x:M,y:E,width:0,height:0},style:{opacity:0}}}C&&l.add(v,C,a,u)}})}),fh(this._storage,function(f,m){fh(f,function(v,x){var C=t.lastsForAnimation[m][x],k={};C&&("nodeGroup"===m?C.old&&(k.position=v.position.slice(),v.attr("position",C.old)):(C.old&&(k.shape=Ne({},v.shape),v.setShape(C.old)),C.fadein?(v.setStyle("opacity",0),k.style={opacity:1}):1!==v.style.opacity&&(k.style={opacity:1})),l.add(v,k,a,u))})},this),this._state="animating",l.done(Na(function(){this._state="ready",t.renderFinally()},this)).start()}var f,m,v},_resetController:function(e){var t=this._controller;t||((t=this._controller=new gy(e.getZr())).enable(this.seriesModel.get("roam")),t.on("pan",Na(this._onPan,this)),t.on("zoom",Na(this._onZoom,this)));var n=new ii(0,0,e.getWidth(),e.getHeight());t.setPointerChecker(function(o,a,u){return n.contain(a,u)})},_clearController:function(){var e=this._controller;e&&(e.dispose(),e=null)},_onPan:function(e){if("animating"!==this._state&&(3<Math.abs(e.dx)||3<Math.abs(e.dy))){var t=this.seriesModel.getData().tree.root;if(!t)return;var n=t.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+e.dx,y:n.y+e.dy,width:n.width,height:n.height}})}},_onZoom:function(e){var t=e.originX,n=e.originY;if("animating"!==this._state){var o=this.seriesModel.getData().tree.root;if(!o)return;var a=o.getLayout();if(!a)return;var u=new ii(a.x,a.y,a.width,a.height),l=this.seriesModel.layoutInfo;t-=l.x,n-=l.y;var f=vi();Xc(f,f,[-t,-n]),Qr(f,f,[e.scale,e.scale]),Xc(f,f,[t,n]),u.applyTransform(f),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:u.x,y:u.y,width:u.width,height:u.height}})}},_initEvents:function(e){e.on("click",function(t){if("ready"===this._state){var n=this.seriesModel.get("nodeClick",!0);if(n){var o=this.findTarget(t.offsetX,t.offsetY);if(o){var a=o.node;if(a.getLayout().isLeafRoot)this._rootToNode(o);else if("zoomToNode"===n)this._zoomToNode(o);else if("link"===n){var u=a.hostTree.data.getItemModel(a.dataIndex),l=u.get("link",!0),f=u.get("target",!0)||"blank";l&&Km(l,f)}}}}},this)},_renderBreadcrumb:function(e,t,n){n=n||(n=null!=e.get("leafDepth",!0)?{node:e.getViewRoot()}:this.findTarget(t.getWidth()/2,t.getHeight()/2))||{node:e.getData().tree.root},(this._breadcrumb||(this._breadcrumb=new NC(this.group))).render(e,t,n.node,Na(function(o){"animating"!==this._state&&(dh(e.getViewRoot(),o)?this._rootToNode({node:o}):this._zoomToNode({node:o}))},this))},remove:function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},dispose:function(){this._clearController()},_zoomToNode:function(e){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},_rootToNode:function(e){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e.node})},findTarget:function(e,t){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},function(o){var a=this._storage.background[o.getRawIndex()];if(a){var u=a.transformCoordToLocal(e,t),l=a.shape;if(!(l.x<=u[0]&&u[0]<=l.x+l.width&&l.y<=u[1]&&u[1]<=l.y+l.height))return!1;n={node:o,offsetX:u[0],offsetY:u[1]}}},this),n}});for(var LC=function(){},vy=["treemapZoomToNode","treemapRender","treemapMove"],cg=0;cg<vy.length;cg++)io({type:vy[cg],update:"updateView"},LC);io({type:"treemapRootToNode",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"treemap",query:e},function(n,o){var a=cm(e,["treemapZoomToNode","treemapRootToNode"],n);if(a){var u=n.getViewRoot();u&&(e.direction=dh(u,a.node)?"rollUp":"drillDown"),n.resetViewRoot(a.node)}})});var Kv=le,J1=ln,Bi=function(e){var t=e.mappingMethod,n=e.type,o=this.option=ie(e);this.type=n,this.mappingMethod=t,this._normalizeData=mT[t];var a=yy[n];this.applyVisual=a.applyVisual,this.getColorMapper=a.getColorMapper,this._doMap=a._doMap[t],"piecewise"===t?($v(o),function(u){var l=u.pieceList;u.hasSpecialVisual=!1,le(l,function(f,m){f.originIndex=m,null!=f.visual&&(u.hasSpecialVisual=!0)})}(o)):"category"===t?o.categories?function(u){var l=u.categories,f=u.visual,m=u.categoryMap={};if(Kv(l,function(C,k){m[C]=k}),!en(f)){var v=[];ln(f)?Kv(f,function(C,k){var M=m[k];v[null!=M?M:-1]=C}):v[-1]=f,f=BC(u,v)}for(var x=l.length-1;0<=x;x--)null==f[x]&&(delete m[l[x]],l.pop())}(o):$v(o,!0):(Qi("linear"!==t||o.dataExtent),$v(o))};Bi.prototype={constructor:Bi,mapValueToVisual:function(e){var t=this._normalizeData(e);return this._doMap(t,e)},getNormalizer:function(){return Rt(this._normalizeData,this)}};var yy=Bi.visualHandlers={color:{applyVisual:by("color"),getColorMapper:function(){var e=this.option;return Rt("category"===e.mappingMethod?function(t,n){return n||(t=this._normalizeData(t)),Q1.call(this,t)}:function(t,n,o){var a=!!o;return n||(t=this._normalizeData(t)),o=Ja(t,e.parsedVisual,o),a?o:Gl(o,"rgba")},this)},_doMap:{linear:function(e){return Gl(Ja(e,this.option.parsedVisual),"rgba")},category:Q1,piecewise:function(e,t){var n=Lw.call(this,t);return null==n&&(n=Gl(Ja(e,this.option.parsedVisual),"rgba")),n},fixed:Jv}},colorHue:tx(function(e,t){return Ch(e,t)}),colorSaturation:tx(function(e,t){return Ch(e,null,t)}),colorLightness:tx(function(e,t){return Ch(e,null,null,t)}),colorAlpha:tx(function(e,t){return ff(e,t)}),opacity:{applyVisual:by("opacity"),_doMap:Qv([0,1])},liftZ:{applyVisual:by("liftZ"),_doMap:{linear:Jv,category:Jv,piecewise:Jv,fixed:Jv}},symbol:{applyVisual:function(e,t,n){var o=this.mapValueToVisual(e);if(Gn(o))n("symbol",o);else if(J1(o))for(var a in o)o.hasOwnProperty(a)&&n(a,o[a])},_doMap:{linear:nx,category:Q1,piecewise:function(e,t){var n=Lw.call(this,t);return null==n&&(n=nx.call(this,e)),n},fixed:Jv}},symbolSize:{applyVisual:by("symbolSize"),_doMap:Qv([0,1])}};function $v(e,t){var n=e.visual,o=[];ln(n)?Kv(n,function(a){o.push(a)}):null!=n&&o.push(n),t||1!==o.length||{color:1,symbol:1}.hasOwnProperty(e.type)||(o[1]=o[0]),BC(e,o)}function tx(e){return{applyVisual:function(t,n,o){t=this.mapValueToVisual(t),o("color",e(n("color"),t))},_doMap:Qv([0,1])}}function nx(e){var t=this.option.visual;return t[Math.round(hi(e,[0,1],[0,t.length-1],!0))]||{}}function by(e){return function(t,n,o){o(e,this.mapValueToVisual(t))}}function Q1(e){var t=this.option.visual;return t[this.option.loop&&-1!==e?e%t.length:e]}function Jv(){return this.option.visual[0]}function Qv(e){return{linear:function(t){return hi(t,e,this.option.visual,!0)},category:Q1,piecewise:function(t,n){var o=Lw.call(this,n);return null==o&&(o=hi(t,e,this.option.visual,!0)),o},fixed:Jv}}function Lw(e){var t=this.option,n=t.pieceList;if(t.hasSpecialVisual){var o=n[Bi.findPieceIndex(e,n)];if(o&&o.visual)return o.visual[this.type]}}function BC(e,t){return e.visual=t,"color"===e.type&&(e.parsedVisual=Ge(t,function(n){return Hl(n)})),t}var mT={linear:function(e){return hi(e,this.option.dataExtent,[0,1],!0)},piecewise:function(e){var t=this.option.pieceList,n=Bi.findPieceIndex(e,t,!0);if(null!=n)return hi(n,[0,t.length-1],[0,1],!0)},category:function(e){var t=this.option.categories?this.option.categoryMap[e]:e;return null==t?-1:t},fixed:yn};function xy(e,t,n){return e?t<=n:t<n}Bi.listVisualTypes=function(){var e=[];return le(yy,function(t,n){e.push(n)}),e},Bi.addVisualHandler=function(e,t){yy[e]=t},Bi.isValidType=function(e){return yy.hasOwnProperty(e)},Bi.eachVisual=function(e,t,n){ln(e)?le(e,t,n):t.call(n,e)},Bi.mapVisual=function(e,t,n){var o,a=en(e)?[]:ln(e)?{}:(o=!0,null);return Bi.eachVisual(e,function(u,l){var f=t.call(n,u,l);o?a=f:a[l]=f}),a},Bi.retrieveVisuals=function(e){var t,n={};return e&&Kv(yy,function(o,a){e.hasOwnProperty(a)&&(n[a]=e[a],t=!0)}),t?n:null},Bi.prepareVisualTypes=function(e){if(J1(e)){var t=[];Kv(e,function(n,o){t.push(o)}),e=t}else{if(!en(e))return[];e=e.slice()}return e.sort(function(n,o){return"color"===o&&"color"!==n&&0===n.indexOf("color")?1:-1}),e},Bi.dependsOn=function(e,t){return"color"===t?!(!e||0!==e.indexOf(t)):e===t},Bi.findPieceIndex=function(e,t,n){for(var o,a=1/0,u=0,l=t.length;u<l;u++){var f=t[u].value;if(null!=f){if(f===e||"string"==typeof f&&f===e+"")return u;n&&C(f,u)}}for(u=0,l=t.length;u<l;u++){var m=t[u],v=m.interval,x=m.close;if(v){if(v[0]===-1/0){if(xy(x[1],e,v[1]))return u}else if(v[1]===1/0){if(xy(x[0],v[0],e))return u}else if(xy(x[0],v[0],e)&&xy(x[1],e,v[1]))return u;n&&C(v[0],u),n&&C(v[1],u)}}if(n)return e===1/0?t.length-1:e===-1/0?0:o;function C(k,M){var E=Math.abs(k-e);E<a&&(a=E,o=M)}};var zC=en,pT={seriesType:"treemap",reset:function(e,t,n,o){var a=e.getData().tree.root;a.isRemoved()||function u(l,f,m,v){var x=l.getModel(),C=l.getLayout();if(C&&!C.invisible&&C.isInView){var N,te,k=l.getModel("itemStyle"),M=function s2(e,t,n){var o=Ne({},t),a=n.designatedVisualItemStyle;return le(["color","colorAlpha","colorSaturation"],function(u){a[u]=t[u];var l=e.get(u);(a[u]=null)!=l&&(o[u]=l)}),o}(k,f,v),E=k.get("borderColor"),V=k.get("borderColorSaturation");null!=V&&(E=null!=(te=N=fm(M))?Ch(te,null,null,V):null),l.setVisual("borderColor",E);var J=l.viewChildren;if(J&&J.length){var me=function gh(e,t,n,o,a,u){if(u&&u.length){var l=e_(t,"color")||null!=a.color&&"none"!==a.color&&(e_(t,"colorAlpha")||e_(t,"colorSaturation"));if(l){var f=t.get("visualMin"),m=t.get("visualMax"),v=n.dataExtent.slice();null!=f&&f<v[0]&&(v[0]=f),null!=m&&m>v[1]&&(v[1]=m);var x=t.get("colorMappingBy"),C={type:l.name,dataExtent:v,visual:l.range};"color"!==C.type||"index"!==x&&"id"!==x?C.mappingMethod="linear":(C.mappingMethod="category",C.loop=!0);var k=new Bi(C);return k.__drColorMappingBy=x,k}}}(0,x,C,0,M,J);le(J,function(ge,pe){if(ge.depth>=m.length||ge===m[ge.depth]){var _e=function vT(e,t,n,o,a,u){var l=Ne({},t);if(a){var f=a.type,m="color"===f&&a.__drColorMappingBy,v="index"===m?o:"id"===m?u.mapIdToIndex(n.getId()):n.getValue(e.get("visualDimension"));l[f]=a.mapValueToVisual(v)}return l}(x,M,ge,pe,me,v);u(ge,_e,m,v)}})}else N=fm(M),l.setVisual("color",N)}}(a,{},e.getViewRoot().getAncestors(),e)}};function fm(e){var t=hm(e,"color");if(t){var n=hm(e,"colorAlpha"),o=hm(e,"colorSaturation");return o&&(t=Ch(t,null,null,o)),n&&(t=ff(t,n)),t}}function hm(e,t){var n=e[t];if(null!=n&&"none"!==n)return n}function e_(e,t){var n=e.get(t);return zC(n)&&n.length?{name:t,range:n}:null}var rx=Math.max,t_=Math.min,yT=Gr,mh=le,Ro=["itemStyle","borderWidth"],ox=["itemStyle","gapWidth"],Bw=["upperLabel","show"],bT=["upperLabel","height"],xT={seriesType:"treemap",reset:function(e,t,n,o){var a=n.getWidth(),u=n.getHeight(),l=e.option,f=si(e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),m=l.size||[],v=nr(yT(f.width,m[0]),a),x=nr(yT(f.height,m[1]),u),C=o&&o.type,k=cm(o,["treemapZoomToNode","treemapRootToNode"],e),M="treemapRender"===C||"treemapMove"===C?o.rootRect:null,E=e.getViewRoot(),V=wp(E);if("treemapMove"!==C){var N="treemapZoomToNode"===C?function(ge,pe,_e,Me,We){var Ke,et=(pe||{}).node,ut=[Me,We];if(!et||et===_e)return ut;for(var lt=Me*We,vt=lt*ge.option.zoomToNodeRatio;Ke=et.parentNode;){for(var Mt=0,Pt=Ke.children,Ct=0,Zt=Pt.length;Ct<Zt;Ct++)Mt+=Pt[Ct].getValue();var An=et.getValue();if(0===An)return ut;vt*=Mt/An;var Rn=Ke.getModel(),Cn=Rn.get(Ro);vt+=4*Cn*Cn+(3*Cn+Math.max(Cn,n_(Rn)))*Math.pow(vt,.5),Rg<vt&&(vt=Rg),et=Ke}vt<lt&&(vt=lt);var dr=Math.pow(vt/lt,.5);return[Me*dr,We*dr]}(e,k,E,v,x):M?[M.width,M.height]:[v,x],G=l.sort;G&&"asc"!==G&&"desc"!==G&&(G="desc");var te={squareRatio:l.squareRatio,sort:G,leafDepth:l.leafDepth};E.hostTree.clearLayouts();var J={x:0,y:0,width:N[0],height:N[1],area:N[0]*N[1]};E.setLayout(J),function ge(pe,_e,Me,We){var Ke,et;if(!pe.isRemoved()){var ut=pe.getLayout();Ke=ut.width,et=ut.height;var lt=(An=pe.getModel()).get(Ro),vt=An.get(ox)/2,Mt=n_(An),Pt=Math.max(lt,Mt),Ct=lt-vt,Zt=Pt-vt,An=pe.getModel();pe.setLayout({borderWidth:lt,upperHeight:Pt,upperLabelHeight:Mt},!0);var Rn=(Ke=rx(Ke-2*Ct,0))*(et=rx(et-Ct-Zt,0)),Cn=function _T(e,t,n,o,a,u){var l=e.children||[],f=o.sort;"asc"!==f&&"desc"!==f&&(f=null);var m=null!=o.leafDepth&&o.leafDepth<=u;if(a&&!m)return e.viewChildren=[];!function(M,E){E&&M.sort(function(V,N){var G="asc"===E?V.getValue()-N.getValue():N.getValue()-V.getValue();return 0==G?"asc"===E?V.dataIndex-N.dataIndex:N.dataIndex-V.dataIndex:G})}(l=ht(l,function(M){return!M.isRemoved()}),f);var v=function(M,E,V){for(var N=0,G=0,te=E.length;G<te;G++)N+=E[G].getValue();var J=M.get("visualDimension");if(E&&E.length)if("value"===J&&V)me=[E[E.length-1].getValue(),E[0].getValue()],"asc"===V&&me.reverse();else{var me=[1/0,-1/0];mh(E,function(ge){var pe=ge.getValue(J);pe<me[0]&&(me[0]=pe),pe>me[1]&&(me[1]=pe)})}else me=[NaN,NaN];return{sum:N,dataExtent:me}}(t,l,f);if(0===v.sum)return e.viewChildren=[];if(v.sum=function(M,E,V,N,G){if(!N)return V;for(var te=M.get("visibleMin"),J=G.length,me=J,ge=J-1;0<=ge;ge--){var pe=G["asc"===N?J-ge-1:ge].getValue();pe/V*E<te&&(me=ge,V-=pe)}return G.splice("asc"===N?0:me,J-me),V}(t,n,v.sum,f,l),0===v.sum)return e.viewChildren=[];for(var x=0,C=l.length;x<C;x++){var k=l[x].getValue()/v.sum*n;l[x].setLayout({area:k})}return m&&(l.length&&e.setLayout({isLeafRoot:!0},!0),l.length=0),e.viewChildren=l,e.setLayout({dataExtent:v.dataExtent},!0),l}(pe,An,Rn,_e,Me,We);if(Cn.length){var Jn={x:Ct,y:Zt,width:Ke,height:et},dr=t_(Ke,et),$r=1/0,zn=[];zn.area=0;for(var Ur=0,Jr=Cn.length;Ur<Jr;){var _o=Cn[Ur];zn.push(_o),zn.area+=_o.getLayout().area;var ga=wT(zn,dr,_e.squareRatio);$r=ga<=$r?(Ur++,ga):(zn.area-=zn.pop().getLayout().area,ST(zn,dr,Jn,vt,!1),dr=t_(Jn.width,Jn.height),zn.length=zn.area=0,1/0)}if(zn.length&&ST(zn,dr,Jn,vt,!0),!Me){var ji=An.get("childrenVisibleMin");null!=ji&&Rn<ji&&(Me=!0)}for(Ur=0,Jr=Cn.length;Ur<Jr;Ur++)ge(Cn[Ur],_e,Me,We+1)}}}(E,te,!1,0),J=E.getLayout(),mh(V,function(ge,pe){var _e=(V[pe+1]||E).getValue();ge.setLayout(Ne({dataExtent:[_e,_e],borderWidth:0,upperHeight:0},J))})}var me=e.getData().tree.root;me.setLayout(function(ge,pe,_e){if(pe)return{x:pe.x,y:pe.y};var Me={x:0,y:0};if(!_e)return Me;var We=_e.node,Ke=We.getLayout();if(!Ke)return Me;for(var et=[Ke.width/2,Ke.height/2],ut=We;ut;){var lt=ut.getLayout();et[0]+=lt.x,et[1]+=lt.y,ut=ut.parentNode}return{x:ge.width/2-et[0],y:ge.height/2-et[1]}}(f,M,k),!0),e.setLayoutInfo(f),function ge(pe,_e,Me,We,Ke){var et=pe.getLayout(),ut=Me[Ke],lt=ut&&ut===pe;if(!(ut&&!lt||Ke===Me.length&&pe!==We)){pe.setLayout({isInView:!0,invisible:!lt&&!_e.intersect(et),isAboveViewRoot:lt},!0);var vt=new ii(_e.x-et.x,_e.y-et.y,_e.width,_e.height);mh(pe.viewChildren||[],function(Mt){ge(Mt,vt,Me,We,Ke+1)})}}(me,new ii(-f.x,-f.y,a,u),V,E,0)}};function wT(e,t,n){for(var o,a=0,u=1/0,l=0,f=e.length;l<f;l++)(o=e[l].getLayout().area)&&(o<u&&(u=o),a<o&&(a=o));var m=e.area*e.area,v=t*t*n;return m?rx(v*a/m,m/(v*u)):1/0}function ST(e,t,n,o,a){var u=t===n.width?0:1,l=1-u,f=["x","y"],m=["width","height"],v=n[f[u]],x=t?e.area/t:0;(a||x>n[m[l]])&&(x=n[m[l]]);for(var C=0,k=e.length;C<k;C++){var M=e[C],E={},V=x?M.getLayout().area/x:0,N=E[m[l]]=rx(x-2*o,0),G=n[f[u]]+n[m[u]]-v,te=C===k-1||G<V?G:V,J=E[m[u]]=rx(te-2*o,0);E[f[l]]=n[f[l]]+t_(o,N/2),E[f[u]]=v+t_(o,J/2),v+=te,M.setLayout(E,!0)}n[f[l]]+=x,n[m[l]]-=x}function n_(e){return e.get(Bw)?e.get(bT):0}function _y(e){return"_EC_"+e}function ix(e){this._directed=e||!1,this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={}}Gi(pT),fa(xT);var pd=ix.prototype;function nf(e,t){this.id=null==e?"":e,this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=null==t?-1:t}function gm(e,t,n){this.node1=e,this.node2=t,this.dataIndex=null==n?-1:n}function zw(e,t){return{getValue:function(n){var o=this[e][t];return o.get(o.getDimension(n||"value"),this.dataIndex)},setVisual:function(n,o){0<=this.dataIndex&&this[e][t].setItemVisual(this.dataIndex,n,o)},getVisual:function(n,o){return this[e][t].getItemVisual(this.dataIndex,n,o)},setLayout:function(n,o){0<=this.dataIndex&&this[e][t].setItemLayout(this.dataIndex,n,o)},getLayout:function(){return this[e][t].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[e][t].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[e][t].getRawIndex(this.dataIndex)}}}function Fw(e,t,n,o,a){for(var u=new ix(o),l=0;l<e.length;l++)u.addNode(Gr(e[l].id,e[l].name,l),l);var f=[],m=[],v=0;for(l=0;l<t.length;l++){var x=t[l],C=x.source,k=x.target;u.addEdge(C,k,v)&&(m.push(x),f.push(Gr(x.id,C+" > "+k)),v++)}var M,E=n.get("coordinateSystem");if("cartesian2d"===E||"polar"===E)M=Pv(e,n);else{var V=lu.get(E),N=V&&"view"!==V.type&&V.dimensions||[];$e(N,"value")<0&&N.concat(["value"]);var G=Ob(e,{coordDimensions:N});(M=new Uu(G,n)).initData(e)}var te=new Uu(["value"],n);return te.initData(m,f),a&&a(M,te),cT({mainData:M,struct:u,structAttr:"graph",datas:{node:M,edge:te},datasAttr:{node:"data",edge:"edgeData"}}),u.update(),u}pd.type="graph",pd.isDirected=function(){return this._directed},pd.addNode=function(e,t){var n=this._nodesMap;if(!n[_y(e=null==e?""+t:""+e)]){var o=new nf(e,t);return(o.hostGraph=this).nodes.push(o),n[_y(e)]=o}},pd.getNodeByIndex=function(e){var t=this.data.getRawIndex(e);return this.nodes[t]},pd.getNodeById=function(e){return this._nodesMap[_y(e)]},pd.addEdge=function(e,t,n){var o=this._nodesMap,a=this._edgesMap;if("number"==typeof e&&(e=this.nodes[e]),"number"==typeof t&&(t=this.nodes[t]),nf.isInstance(e)||(e=o[_y(e)]),nf.isInstance(t)||(t=o[_y(t)]),e&&t){var u=e.id+"-"+t.id,l=new gm(e,t,n);return(l.hostGraph=this)._directed&&(e.outEdges.push(l),t.inEdges.push(l)),e.edges.push(l),e!==t&&t.edges.push(l),this.edges.push(l),a[u]=l}},pd.getEdgeByIndex=function(e){var t=this.edgeData.getRawIndex(e);return this.edges[t]},pd.getEdge=function(e,t){nf.isInstance(e)&&(e=e.id),nf.isInstance(t)&&(t=t.id);var n=this._edgesMap;return this._directed?n[e+"-"+t]:n[e+"-"+t]||n[t+"-"+e]},pd.eachNode=function(e,t){for(var n=this.nodes,o=n.length,a=0;a<o;a++)0<=n[a].dataIndex&&e.call(t,n[a],a)},pd.eachEdge=function(e,t){for(var n=this.edges,o=n.length,a=0;a<o;a++)0<=n[a].dataIndex&&0<=n[a].node1.dataIndex&&0<=n[a].node2.dataIndex&&e.call(t,n[a],a)},pd.breadthFirstTraverse=function(e,t,n,o){if(nf.isInstance(t)||(t=this._nodesMap[_y(t)]),t){for(var a="out"===n?"outEdges":"in"===n?"inEdges":"edges",u=0;u<this.nodes.length;u++)this.nodes[u].__visited=!1;if(!e.call(o,t,null))for(var l=[t];l.length;){var f=l.shift(),m=f[a];for(u=0;u<m.length;u++){var v=m[u],x=v.node1===f?v.node2:v.node1;if(!x.__visited){if(e.call(o,x,f))return;l.push(x),x.__visited=!0}}}}},pd.update=function(){for(var e=this.data,t=this.edgeData,n=this.nodes,o=this.edges,a=0,u=n.length;a<u;a++)n[a].dataIndex=-1;for(a=0,u=e.count();a<u;a++)n[e.getRawIndex(a)].dataIndex=a;for(t.filterSelf(function(l){var f=o[t.getRawIndex(l)];return 0<=f.node1.dataIndex&&0<=f.node2.dataIndex}),a=0,u=o.length;a<u;a++)o[a].dataIndex=-1;for(a=0,u=t.count();a<u;a++)o[t.getRawIndex(a)].dataIndex=a},pd.clone=function(){for(var e=new ix(this._directed),t=this.nodes,n=this.edges,o=0;o<t.length;o++)e.addNode(t[o].id,t[o].dataIndex);for(o=0;o<n.length;o++){var a=n[o];e.addEdge(a.node1.id,a.node2.id,a.dataIndex)}return e},nf.prototype={constructor:nf,degree:function(){return this.edges.length},inDegree:function(){return this.inEdges.length},outDegree:function(){return this.outEdges.length},getModel:function(e){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(e)}},gm.prototype.getModel=function(e){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(e)},de(nf,zw("hostGraph","data")),de(gm,zw("hostGraph","edgeData")),ix.Node=nf,ix.Edge=gm,Ed(nf),Ed(gm);var Cp=function(e){return e.get("autoCurveness")||null},wy=function(e,t){var n=Cp(e),o=20,a=[];if("number"==typeof n)o=n;else if(en(n))return void(e.__curvenessList=n);o<t&&(o=t);var u=o%2?o+2:o+3;a=[];for(var l=0;l<u;l++)a.push((l%2?l+1:l)/10*(l%2?-1:1));e.__curvenessList=a},Sy=function(e,t,n){var o=[e.id,e.dataIndex].join("."),a=[t.id,t.dataIndex].join(".");return[n.uid,o,a].join("--\x3e")},FC=function(e){var t=e.split("--\x3e");return[t[0],t[2],t[1]].join("--\x3e")},Vw=function(e,t){var n=t.__edgeMap;return n[e]?n[e].length:0};function sx(e,t,n,o){var a=Cp(t),u=en(a);if(!a)return null;var l=function(e,t){var n=Sy(e.node1,e.node2,t);return t.__edgeMap[n]}(e,t);if(!l)return null;for(var f=-1,m=0;m<l.length;m++)if(l[m]===n){f=m;break}var v=function(e,t){return Vw(Sy(e.node1,e.node2,t),t)+Vw(Sy(e.node2,e.node1,t),t)}(e,t);wy(t,v),e.lineStyle=e.lineStyle||{};var x=Sy(e.node1,e.node2,t),C=t.__curvenessList,k=u||v%2?0:1;if(l.isForward)return C[k+f];var M=FC(x),E=Vw(M,t),V=C[f+E+k];return o?u?a&&0===a[0]?(E+k)%2?V:-V:((E%2?0:1)+k)%2?V:-V:(E+k)%2?V:-V:C[f+E+k]}var r_=dp({type:"series.graph",init:function(e){r_.superApply(this,"init",arguments);var t=this;function n(){return t._categoriesData}this.legendVisualProvider=new uy(n,n),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeOption:function(e){r_.superApply(this,"mergeOption",arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},mergeDefaultAndTheme:function(e){r_.superApply(this,"mergeDefaultAndTheme",arguments),Nh(e,["edgeLabel"],["show"])},getInitialData:function(e,t){var l,n=e.edges||e.links||[],o=e.data||e.nodes||[],a=this;if(o&&n){Cp(l=this)&&(l.__curvenessList=[],l.__edgeMap={},wy(l));var u=Fw(o,n,this,!0,function(l,f){l.wrapMethod("getItemModel",function(M){var E=a._categoriesModels[M.getShallow("category")];return E&&(E.parentModel=M.parentModel,M.parentModel=E),M});var m=a.getModel("edgeLabel"),v=new ei({label:m.option},m.parentModel,t),x=a.getModel("emphasis.edgeLabel"),C=new ei({emphasis:{label:x.option}},x.parentModel,t);function k(M){return(M=this.parsePath(M))&&"label"===M[0]?v:M&&"emphasis"===M[0]&&"label"===M[1]?C:this.parentModel}f.wrapMethod("getItemModel",function(M){return M.customizeGetParent(k),M})});return le(u.edges,function(l){!function(f,m,v,x){if(Cp(v)){var C=Sy(f,m,v),k=v.__edgeMap,M=k[FC(C)];k[C]&&!M?k[C].isForward=!0:M&&k[C]&&(M.isForward=!0,k[C].isForward=!1),k[C]=k[C]||[],k[C].push(x)}}(l.node1,l.node2,this,l.dataIndex)},this),u.data}},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},getCategoriesData:function(){return this._categoriesData},formatTooltip:function(e,t,n){if("edge"!==n)return r_.superApply(this,"formatTooltip",arguments);var o=this.getData(),a=this.getDataParams(e,n),u=o.graph.getEdgeByIndex(e),l=o.getName(u.node1.dataIndex),f=o.getName(u.node2.dataIndex),m=[];return null!=l&&m.push(l),null!=f&&m.push(f),m=Pa(m.join(" > ")),a.value&&(m+=" : "+Pa(a.value)),m},_updateCategoriesData:function(){var e=Ge(this.option.categories||[],function(n){return null!=n.value?n:Ne({value:0},n)}),t=new Uu(["value"],this);t.initData(e),this._categoriesData=t,this._categoriesModels=t.mapArray(function(n){return t.getItemModel(n,!0)})},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e},isAnimationEnabled:function(){return r_.superCall(this,"isAnimationEnabled")&&!("force"===this.get("layout")&&this.get("force.layoutAnimation"))},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",legendHoverLink:!0,hoverAnimation:!0,layout:null,focusNodeAdjacency:!1,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{label:{show:!0}}}}),VC=$s.prototype,HC=rv.prototype;function kT(e){return isNaN(+e.cpx1)||isNaN(+e.cpy1)}var o_=Tc({type:"ec-line",style:{stroke:"#000",fill:null},shape:{x1:0,y1:0,x2:0,y2:0,percent:1,cpx1:null,cpy1:null},buildPath:function(e,t){this[kT(t)?"_buildPathLine":"_buildPathCurve"](e,t)},_buildPathLine:VC.buildPath,_buildPathCurve:HC.buildPath,pointAt:function(e){return this[kT(this.shape)?"_pointAtLine":"_pointAtCurve"](e)},_pointAtLine:VC.pointAt,_pointAtCurve:HC.pointAt,tangentAt:function(e){var t=this.shape,n=kT(t)?[t.x2-t.x1,t.y2-t.y1]:this._tangentAtCurve(e);return ps(n,n)},_tangentAtCurve:HC.tangentAt}),Cy=["fromSymbol","toSymbol"];function l2(e){return"_"+e+"Type"}function Hw(e,t,n){var o=t.getItemVisual(n,e);if(o&&"none"!==o){var a=t.getItemVisual(n,"color"),u=t.getItemVisual(n,e+"Size"),l=t.getItemVisual(n,e+"Rotate");en(u)||(u=[u,u]);var f=$d(o,-u[0]/2,-u[1]/2,u[0],u[1],a);return f.__specifiedRotation=null==l||isNaN(l)?void 0:+l*Math.PI/180||0,f.name=e,f}}function i_(e,t){e.x1=t[0][0],e.y1=t[0][1],e.x2=t[1][0],e.y2=t[1][1],e.percent=1;var n=t[2];n?(e.cpx1=n[0],e.cpy1=n[1]):(e.cpx1=NaN,e.cpy1=NaN)}function a_(e,t,n){mr.call(this),this._createLine(e,t,n)}var mm=a_.prototype;function pm(e){this._ctor=e||a_,this.group=new mr}mm.beforeUpdate=function(){var e=this.childOfName("fromSymbol"),t=this.childOfName("toSymbol"),n=this.childOfName("label");if(e||t||!n.ignore){for(var o=1,a=this.parent;a;)a.scale&&(o/=a.scale[0]),a=a.parent;var u=this.childOfName("line");if(this.__dirty||u.__dirty){var C,l=u.shape.percent,f=u.pointAt(0),m=u.pointAt(l),v=di([],m,f);if(ps(v,v),e){if(e.attr("position",f),null==(C=e.__specifiedRotation)){var x=u.tangentAt(0);e.attr("rotation",Math.PI/2-Math.atan2(x[1],x[0]))}else e.attr("rotation",C);e.attr("scale",[o*l,o*l])}if(t&&(t.attr("position",m),null==(C=t.__specifiedRotation)?(x=u.tangentAt(1),t.attr("rotation",-Math.PI/2-Math.atan2(x[1],x[0]))):t.attr("rotation",C),t.attr("scale",[o*l,o*l])),!n.ignore){var k,M,E,V;n.attr("position",m);var N=n.__labelDistance,G=N[0]*o,te=N[1]*o,J=l/2,me=[(x=u.tangentAt(J))[1],-x[0]],ge=u.pointAt(J);0<me[1]&&(me[0]=-me[0],me[1]=-me[1]);var pe,_e=x[0]<0?-1:1;if("start"!==n.__position&&"end"!==n.__position){var Me=-Math.atan2(x[1],x[0]);m[0]<f[0]&&(Me=Math.PI+Me),n.attr("rotation",Me)}switch(n.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":pe=-te,E="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":pe=te,E="top";break;default:pe=0,E="middle"}switch(n.__position){case"end":k=[v[0]*G+m[0],v[1]*te+m[1]],M=.8<v[0]?"left":v[0]<-.8?"right":"center",E=.8<v[1]?"top":v[1]<-.8?"bottom":"middle";break;case"start":k=[-v[0]*G+f[0],-v[1]*te+f[1]],M=.8<v[0]?"right":v[0]<-.8?"left":"center",E=.8<v[1]?"bottom":v[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":k=[G*_e+f[0],f[1]+pe],M=x[0]<0?"right":"left",V=[-G*_e,-pe];break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":k=[ge[0],ge[1]+pe],M="center",V=[0,-pe];break;case"insideEndTop":case"insideEnd":case"insideEndBottom":k=[-G*_e+m[0],m[1]+pe],M=0<=x[0]?"right":"left",V=[G*_e,-pe]}n.attr({style:{textVerticalAlign:n.__verticalAlign||E,textAlign:n.__textAlign||M},position:k,scale:[o,o],origin:V})}}}},mm._createLine=function(e,t,n){var l,f,o=e.hostModel,a=(l=e.getItemLayout(t),i_((f=new o_({name:"line",subPixelOptimize:!0})).shape,l),f);a.shape.percent=0,al(a,{shape:{percent:1}},o,t),this.add(a);var u=new Yo({name:"label",lineLabelOriginalOpacity:1});this.add(u),le(Cy,function(l){var f=Hw(l,e,t);this.add(f),this[l2(l)]=e.getItemVisual(t,l)},this),this._updateCommonStl(e,t,n)},mm.updateData=function(e,t,n){var o=e.hostModel,a=this.childOfName("line"),u=e.getItemLayout(t),l={shape:{}};i_(l.shape,u),Po(a,l,o,t),le(Cy,function(f){var m=e.getItemVisual(t,f),v=l2(f);if(this[v]!==m){this.remove(this.childOfName(f));var x=Hw(f,e,t);this.add(x)}this[v]=m},this),this._updateCommonStl(e,t,n)},mm._updateCommonStl=function(e,t,n){var o=e.hostModel,a=this.childOfName("line"),u=n&&n.lineStyle,l=n&&n.hoverLineStyle,f=n&&n.labelModel,m=n&&n.hoverLabelModel;if(!n||e.hasItemOption){var v=e.getItemModel(t);u=v.getModel("lineStyle").getLineStyle(),l=v.getModel("emphasis.lineStyle").getLineStyle(),f=v.getModel("label"),m=v.getModel("emphasis.label")}var x=e.getItemVisual(t,"color"),C=xt(e.getItemVisual(t,"opacity"),u.opacity,1);a.useStyle(Ee({strokeNoScale:!0,fill:"none",stroke:x,opacity:C},u)),a.hoverStyle=l,le(Cy,function(pe){var _e=this.childOfName(pe);_e&&(_e.setColor(x),_e.setStyle({opacity:C}))},this);var k,M,E=f.getShallow("show"),V=m.getShallow("show"),N=this.childOfName("label");if((E||V)&&(k=x||"#000",null==(M=o.getFormattedLabel(t,"normal",e.dataType)))){var G=o.getRawValue(t);M=null==G?e.getName(t):isFinite(G)?Vs(G):G}var te=E?M:null,J=V?Or(o.getFormattedLabel(t,"emphasis",e.dataType),M):null,me=N.style;if(null!=te||null!=J){Ta(N.style,f,{text:te},{autoColor:k}),N.__textAlign=me.textAlign,N.__verticalAlign=me.textVerticalAlign,N.__position=f.get("position")||"middle";var ge=f.get("distance");en(ge)||(ge=[ge,ge]),N.__labelDistance=ge}N.hoverStyle=null!=J?{text:J,textFill:m.getTextColor(!0),fontStyle:m.getShallow("fontStyle"),fontWeight:m.getShallow("fontWeight"),fontSize:m.getShallow("fontSize"),fontFamily:m.getShallow("fontFamily")}:{text:null},N.ignore=!E&&!V,Go(this)},mm.highlight=function(){this.trigger("emphasis")},mm.downplay=function(){this.trigger("normal")},mm.updateLayout=function(e,t){this.setLinePoints(e.getItemLayout(t))},mm.setLinePoints=function(e){var t=this.childOfName("line");i_(t.shape,e),t.dirty()},Ie(a_,mr);var ky=pm.prototype;function e0(e){var t=e.hostModel;return{lineStyle:t.getModel("lineStyle").getLineStyle(),hoverLineStyle:t.getModel("emphasis.lineStyle").getLineStyle(),labelModel:t.getModel("label"),hoverLabelModel:t.getModel("emphasis.label")}}function s_(e){return isNaN(e[0])||isNaN(e[1])}function Ww(e){return!s_(e[0])&&!s_(e[1])}function vm(e){var t=e.coordinateSystem;if("view"!==t.type)return 1;var n=e.option.nodeScaleRatio,o=t.scale,a=o&&o[0]||1;return((t.getZoom()-1)*n+1)/a}function ux(e){var t=e.getVisual("symbolSize");return t instanceof Array&&(t=(t[0]+t[1])/2),+t}ky.isPersistent=function(){return!0},ky.updateData=function(e){var t=this,n=t.group,o=t._lineData;t._lineData=e,o||n.removeAll();var a=e0(e);e.diff(o).add(function(u){!function(l,f,m,v){if(Ww(f.getItemLayout(m))){var x=new l._ctor(f,m,v);f.setItemGraphicEl(m,x),l.group.add(x)}}(t,e,u,a)}).update(function(u,l){!function(f,m,v,x,C,k){var M=m.getItemGraphicEl(x);if(!Ww(v.getItemLayout(C)))return f.group.remove(M);M?M.updateData(v,C,k):M=new f._ctor(v,C,k),v.setItemGraphicEl(C,M),f.group.add(M)}(t,o,e,l,u,a)}).remove(function(u){n.remove(o.getItemGraphicEl(u))}).execute()},ky.updateLayout=function(){var e=this._lineData;e&&e.eachItemGraphicEl(function(t,n){t.updateLayout(e,n)},this)},ky.incrementalPrepareUpdate=function(e){this._seriesScope=e0(e),this._lineData=null,this.group.removeAll()},ky.incrementalUpdate=function(e,t){function n(u){var l;u.isGroup||(l=u).animators&&0<l.animators.length||(u.incremental=u.useHoverLayer=!0)}for(var o=e.start;o<e.end;o++)if(Ww(t.getItemLayout(o))){var a=new this._ctor(t,o,this._seriesScope);a.traverse(n),this.group.add(a),t.setItemGraphicEl(o,a)}},ky.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},ky._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var vd=[],WC=[],GC=[],lx=na,UC=nu,TT=Math.abs;function MT(e,t,n){for(var o,a=e[0],u=e[1],l=e[2],f=1/0,m=n*n,v=.1,x=.1;x<=.9;x+=.1)vd[0]=lx(a[0],u[0],l[0],x),vd[1]=lx(a[1],u[1],l[1],x),(M=TT(UC(vd,t)-m))<f&&(f=M,o=x);for(var C=0;C<32;C++){var k=o+v;WC[0]=lx(a[0],u[0],l[0],o),WC[1]=lx(a[1],u[1],l[1],o),GC[0]=lx(a[0],u[0],l[0],k),GC[1]=lx(a[1],u[1],l[1],k);var M=UC(WC,t)-m;if(TT(M)<.01)break;var E=UC(GC,t)-m;v/=2,M<0?0<=E?o+=v:o-=v:0<=E?o-=v:o+=v}return o}function jC(e,t){var n=[],o=qf,a=[[],[],[]],u=[[],[]],l=[];t/=2,e.eachEdge(function(f,m){var v=f.getLayout(),x=f.getVisual("fromSymbol"),C=f.getVisual("toSymbol");v.__original||(v.__original=[qr(v[0]),qr(v[1])],v[2]&&v.__original.push(qr(v[2])));var k=v.__original;if(null!=v[2]){if(sn(a[0],k[0]),sn(a[1],k[2]),sn(a[2],k[1]),x&&"none"!==x){var M=ux(f.node1),E=MT(a,k[0],M*t);o(a[0][0],a[1][0],a[2][0],E,n),a[0][0]=n[3],a[1][0]=n[4],o(a[0][1],a[1][1],a[2][1],E,n),a[0][1]=n[3],a[1][1]=n[4]}C&&"none"!==C&&(M=ux(f.node2),E=MT(a,k[1],M*t),o(a[0][0],a[1][0],a[2][0],E,n),a[1][0]=n[1],a[2][0]=n[2],o(a[0][1],a[1][1],a[2][1],E,n),a[1][1]=n[1],a[2][1]=n[2]),sn(v[0],a[0]),sn(v[1],a[2]),sn(v[2],a[1])}else sn(u[0],k[0]),sn(u[1],k[1]),di(l,u[1],u[0]),ps(l,l),x&&"none"!==x&&(M=ux(f.node1),li(u[0],u[0],l,M*t)),C&&"none"!==C&&(M=ux(f.node2),li(u[1],u[1],l,-M*t)),sn(v[0],u[0]),sn(v[1],u[1])})}var cx="__focusNodeAdjacency",t0="__unfocusNodeAdjacency",Ty=["itemStyle","opacity"],u_=["lineStyle","opacity"];function Gw(e,t){var n=e.getVisual("opacity");return null!=n?n:e.getModel().get(t)}function My(e,t,n){var o=e.getGraphicEl(),a=Gw(e,t);null!=n&&(null==a&&(a=1),a*=n),o.downplay&&o.downplay(),o.traverse(function(u){if(!u.isGroup){var l=u.lineLabelOriginalOpacity;null!=l&&null==n||(l=a),u.setStyle("opacity",l)}})}function dg(e,t){var n=Gw(e,t),o=e.getGraphicEl();o.traverse(function(a){a.isGroup||a.setStyle("opacity",n)}),o.highlight&&o.highlight()}function qC(e){return e instanceof Array||(e=[e,e]),e}function Uw(e){var t=e.coordinateSystem;if(!t||"view"===t.type){var n=e.getGraph();n.eachNode(function(o){var a=o.getModel();o.setLayout([+a.get("x"),+a.get("y")])}),XC(n,e)}}function XC(e,t){e.eachEdge(function(n,o){var a=xt(n.getModel().get("lineStyle.curveness"),-sx(n,t,o,!0),0),u=qr(n.node1.getLayout()),l=qr(n.node2.getLayout()),f=[u,l];+a&&f.push([(u[0]+l[0])/2-(u[1]-l[1])*a,(u[1]+l[1])/2-(l[0]-u[0])*a]),n.setLayout(f)})}gu({type:"graph",init:function(e,t){var n=new ny,o=new pm,a=this.group;this._controller=new gy(t.getZr()),this._controllerHost={target:a},a.add(n.group),a.add(o.group),this._symbolDraw=n,this._lineDraw=o,this._firstRender=!0},render:function(e,t,n){var o=this,a=e.coordinateSystem;this._model=e;var u=this._symbolDraw,l=this._lineDraw,f=this.group;if("view"===a.type){var m={position:a.position,scale:a.scale};this._firstRender?f.attr(m):Po(f,m,e)}jC(e.getGraph(),vm(e));var v=e.getData();u.updateData(v);var x=e.getEdgeData();l.updateData(x),this._updateNodeAndLinkScale(),this._updateController(e,t,n),clearTimeout(this._layoutTimeout);var C=e.forceLayout,k=e.get("force.layoutAnimation");C&&this._startForceLayoutIteration(C,k),v.eachItemGraphicEl(function(N,G){var te=v.getItemModel(G);N.off("drag").off("dragend");var J=te.get("draggable");J&&N.on("drag",function(){C&&(C.warmUp(),this._layouting||this._startForceLayoutIteration(C,k),C.setFixed(G),v.setItemLayout(G,N.position))},this).on("dragend",function(){C&&C.setUnfixed(G)},this),N.setDraggable(J&&C),N[cx]&&N.off("mouseover",N[cx]),N[t0]&&N.off("mouseout",N[t0]),te.get("focusNodeAdjacency")&&(N.on("mouseover",N[cx]=function(){o._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:N.dataIndex})}),N.on("mouseout",N[t0]=function(){o._dispatchUnfocus(n)}))},this),v.graph.eachEdge(function(N){var G=N.getGraphicEl();G[cx]&&G.off("mouseover",G[cx]),G[t0]&&G.off("mouseout",G[t0]),N.getModel().get("focusNodeAdjacency")&&(G.on("mouseover",G[cx]=function(){o._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:N.dataIndex})}),G.on("mouseout",G[t0]=function(){o._dispatchUnfocus(n)}))});var M="circular"===e.get("layout")&&e.get("circular.rotateLabel"),E=v.getLayout("cx"),V=v.getLayout("cy");v.eachItemGraphicEl(function(N,G){var te=v.getItemModel(G).get("label.rotate")||0,J=N.getSymbolPath();if(M){var me=v.getItemLayout(G),ge=Math.atan2(me[1]-V,me[0]-E);ge<0&&(ge=2*Math.PI+ge);var pe=me[0]<E;pe&&(ge-=Math.PI);var _e=pe?"left":"right";Zx(J,{textRotation:-ge,textPosition:_e,textOrigin:"center"},{textPosition:_e})}else Zx(J,{textRotation:te*=Math.PI/180})}),this._firstRender=!1},dispose:function(){this._controller&&this._controller.dispose(),this._controllerHost={},this._clearTimer()},_dispatchUnfocus:function(e,t){var n=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){n._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:n._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,o){var a=e.getData().graph,l=o.edgeDataIndex,f=a.getNodeByIndex(o.dataIndex),m=a.getEdgeByIndex(l);(f||m)&&(a.eachNode(function(v){My(v,Ty,.1)}),a.eachEdge(function(v){My(v,u_,.1)}),f&&(dg(f,Ty),le(f.edges,function(v){v.dataIndex<0||(dg(v,u_),dg(v.node1,Ty),dg(v.node2,Ty))})),m&&(dg(m,u_),dg(m.node1,Ty),dg(m.node2,Ty)))},unfocusNodeAdjacency:function(e,t,n,o){var a=e.getData().graph;a.eachNode(function(u){My(u,Ty)}),a.eachEdge(function(u){My(u,u_)})},_startForceLayoutIteration:function(e,t){var n=this;!function o(){e.step(function(a){n.updateLayout(n._model),(n._layouting=!a)&&(t?n._layoutTimeout=setTimeout(o,16):o())})}()},_updateController:function(e,t,n){var o=this._controller,a=this._controllerHost,u=this.group;o.setPointerChecker(function(l,f,m){var v=u.getBoundingRect();return v.applyTransform(u.transform),v.contain(f,m)&&!AC(l,n,e)}),"view"===e.coordinateSystem.type?(o.enable(e.get("roam")),a.zoomLimit=e.get("scaleLimit"),a.zoom=e.coordinateSystem.getZoom(),o.off("pan").off("zoom").on("pan",function(l){MC(a,l.dx,l.dy),n.dispatchAction({seriesId:e.id,type:"graphRoam",dx:l.dx,dy:l.dy})}).on("zoom",function(l){DC(a,l.scale,l.originX,l.originY),n.dispatchAction({seriesId:e.id,type:"graphRoam",zoom:l.scale,originX:l.originX,originY:l.originY}),this._updateNodeAndLinkScale(),jC(e.getGraph(),vm(e)),this._lineDraw.updateLayout()},this)):o.disable()},_updateNodeAndLinkScale:function(){var e=this._model,t=e.getData(),n=vm(e),o=[n,n];t.eachItemGraphicEl(function(a,u){a.attr("scale",o)})},updateLayout:function(e){jC(e.getGraph(),vm(e)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()}}),io({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},function(){}),io({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},function(){}),io({type:"graphRoam",event:"graphRoam",update:"none"},function(e,t){t.eachComponent({mainType:"series",query:e},function(n){var o=IC(n.coordinateSystem,e);n.setCenter&&n.setCenter(o.center),n.setZoom&&n.setZoom(o.zoom)})});var DT=Math.PI,YC=[];function AT(e,t){var n=e.coordinateSystem;if(!n||"view"===n.type){var o=n.getBoundingRect(),a=e.getData(),u=a.graph,l=o.width/2+o.x,f=o.height/2+o.y,m=Math.min(o.width,o.height)/2,v=a.count();a.setLayout({cx:l,cy:f}),v&&(IT[t](e,n,u,a,m,l,f,v),u.eachEdge(function(x,C){var k,M=xt(x.getModel().get("lineStyle.curveness"),sx(x,e,C),0),E=qr(x.node1.getLayout()),V=qr(x.node2.getLayout());+M&&(k=[l*(M*=3)+(E[0]+V[0])/2*(1-M),f*M+(E[1]+V[1])/2*(1-M)]),x.setLayout([E,V,k])}))}}var IT={value:function(e,t,n,o,a,u,l,f){var m=0,v=o.getSum("value"),x=2*Math.PI/(v||f);n.eachNode(function(C){var k=C.getValue("value"),M=x*(v?k:1)/2;m+=M,C.setLayout([a*Math.cos(m)+u,a*Math.sin(m)+l]),m+=M})},symbolSize:function(e,t,n,o,a,u,l,f){var m=0;YC.length=f;var v=vm(e);n.eachNode(function(k){var M=ux(k);isNaN(M)&&(M=2),M<0&&(M=0),M*=v;var E=Math.asin(M/2/a);isNaN(E)&&(E=DT/2),YC[k.dataIndex]=E,m+=2*E});var x=(2*DT-m)/f/2,C=0;n.eachNode(function(k){var M=x+YC[k.dataIndex];C+=M,k.setLayout([a*Math.cos(C)+u,a*Math.sin(C)+l]),C+=M})}},dx=li;Ii(function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.eachSeriesByType("graph",function(n){var o=n.getCategoriesData(),a=n.getGraph().data,u=o.mapArray(o.getName);a.filterSelf(function(l){var f=a.getItemModel(l).getShallow("category");if(null!=f){"number"==typeof f&&(f=u[f]);for(var m=0;m<t.length;m++)if(!t[m].isSelected(f))return!1}return!0})},this)}),Gi(zv("graph","circle",null)),Gi(function(e){var t={};e.eachSeriesByType("graph",function(n){var o=n.getCategoriesData(),a=n.getData(),u={};o.each(function(l){var f=o.getName(l);u["ec-"+f]=l;var m=o.getItemModel(l),v=m.get("itemStyle.color")||n.getColorFromPalette(f,t);o.setItemVisual(l,"color",v);for(var x=["opacity","symbol","symbolSize","symbolKeepAspect"],C=0;C<x.length;C++){var k=m.getShallow(x[C],!0);null!=k&&o.setItemVisual(l,x[C],k)}}),o.count()&&a.each(function(l){var f=a.getItemModel(l).getShallow("category");if(null!=f){"string"==typeof f&&(f=u["ec-"+f]);for(var m=["color","opacity","symbol","symbolSize","symbolKeepAspect"],v=0;v<m.length;v++)null==a.getItemVisual(l,m[v],!0)&&a.setItemVisual(l,m[v],o.getItemVisual(f,m[v]))}})})}),Gi(function(e){e.eachSeriesByType("graph",function(t){var n=t.getGraph(),o=t.getEdgeData(),a=qC(t.get("edgeSymbol")),u=qC(t.get("edgeSymbolSize")),l="lineStyle.color".split("."),f="lineStyle.opacity".split(".");o.setVisual("fromSymbol",a&&a[0]),o.setVisual("toSymbol",a&&a[1]),o.setVisual("fromSymbolSize",u&&u[0]),o.setVisual("toSymbolSize",u&&u[1]),o.setVisual("color",t.get(l)),o.setVisual("opacity",t.get(f)),o.each(function(m){var v=o.getItemModel(m),x=n.getEdgeByIndex(m),C=qC(v.getShallow("symbol",!0)),k=qC(v.getShallow("symbolSize",!0)),M=v.get(l),E=v.get(f);switch(M){case"source":M=x.node1.getVisual("color");break;case"target":M=x.node2.getVisual("color")}C[0]&&x.setVisual("fromSymbol",C[0]),C[1]&&x.setVisual("toSymbol",C[1]),k[0]&&x.setVisual("fromSymbolSize",k[0]),k[1]&&x.setVisual("toSymbolSize",k[1]),x.setVisual("color",M),x.setVisual("opacity",E)})})}),fa(function(e,t){e.eachSeriesByType("graph",function(n){var o=n.get("layout"),a=n.coordinateSystem;if(a&&"view"!==a.type){var u=n.getData(),l=[];le(a.dimensions,function(k){l=l.concat(u.mapDimension(k,!0))});for(var f=0;f<u.count();f++){for(var m=[],v=!1,x=0;x<l.length;x++){var C=u.get(l[x],f);isNaN(C)||(v=!0),m.push(C)}u.setItemLayout(f,v?a.dataToPoint(m):[NaN,NaN])}XC(u.graph,n)}else o&&"none"!==o||Uw(n)})}),fa(ih.VISUAL.POST_CHART_LAYOUT,function(e){e.eachSeriesByType("graph",function(t){"circular"===t.get("layout")&&AT(t,"symbolSize")})}),fa(function(e){e.eachSeriesByType("graph",function(t){if(!(k=t.coordinateSystem)||"view"===k.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},o=t.getGraph(),a=o.data,u=o.edgeData,l=t.getModel("force"),f=l.get("initLayout");t.preservedPoints?a.each(function(te){var J=a.getId(te);a.setItemLayout(te,n[J]||[NaN,NaN])}):f&&"none"!==f?"circular"===f&&AT(t,"value"):Uw(t);var m=a.getDataExtent("value"),v=u.getDataExtent("value"),x=l.get("repulsion"),C=l.get("edgeLength");en(x)||(x=[x,x]),en(C)||(C=[C,C]),C=[C[1],C[0]];var k,M=a.mapArray("value",function(te,J){var me=a.getItemLayout(J),ge=hi(te,m,x);return isNaN(ge)&&(ge=(x[0]+x[1])/2),{w:ge,rep:ge,fixed:a.getItemModel(J).get("fixed"),p:!me||isNaN(me[0])||isNaN(me[1])?null:me}}),E=u.mapArray("value",function(te,J){var me=o.getEdgeByIndex(J),ge=hi(te,v,C);isNaN(ge)&&(ge=(C[0]+C[1])/2);var pe=me.getModel(),_e=xt(pe.get("lineStyle.curveness"),-sx(me,t,J,!0),0);return{n1:M[me.node1.dataIndex],n2:M[me.node2.dataIndex],d:ge,curveness:_e,ignoreForceLayout:pe.get("ignoreForceLayout")}}),V=(k=t.coordinateSystem).getBoundingRect(),N=function(te,J,me){for(var ge=me.rect,pe=ge.width,_e=ge.height,Me=[ge.x+pe/2,ge.y+_e/2],We=null==me.gravity?.1:me.gravity,Ke=0;Ke<te.length;Ke++){var et=te[Ke];et.p||(et.p=tr(pe*(Math.random()-.5)+Me[0],_e*(Math.random()-.5)+Me[1])),et.pp=qr(et.p),et.edges=null}var ut=null==me.friction?.6:me.friction,lt=ut;return{warmUp:function(){lt=.8*ut},setFixed:function(vt){te[vt].fixed=!0},setUnfixed:function(vt){te[vt].fixed=!1},step:function(vt){for(var Mt=[],Pt=te.length,Ct=0;Ct<J.length;Ct++){var Zt=J[Ct];if(!Zt.ignoreForceLayout){var An=Zt.n1;di(Mt,(dr=Zt.n2).p,An.p);var Rn=vo(Mt)-Zt.d,Cn=dr.w/(An.w+dr.w);isNaN(Cn)&&(Cn=0),ps(Mt,Mt),An.fixed||dx(An.p,An.p,Mt,Cn*Rn*lt),dr.fixed||dx(dr.p,dr.p,Mt,-(1-Cn)*Rn*lt)}}for(Ct=0;Ct<Pt;Ct++)(Ur=te[Ct]).fixed||(di(Mt,Me,Ur.p),dx(Ur.p,Ur.p,Mt,We*lt));for(Ct=0;Ct<Pt;Ct++){An=te[Ct];for(var Jn=Ct+1;Jn<Pt;Jn++){var dr;di(Mt,(dr=te[Jn]).p,An.p),0===(Rn=vo(Mt))&&(fr(Mt,Math.random()-.5,Math.random()-.5),Rn=1);var $r=(An.rep+dr.rep)/Rn/Rn;An.fixed||dx(An.pp,An.pp,Mt,$r),dr.fixed||dx(dr.pp,dr.pp,Mt,-$r)}}var zn=[];for(Ct=0;Ct<Pt;Ct++){var Ur;(Ur=te[Ct]).fixed||(di(zn,Ur.p,Ur.pp),dx(Ur.p,Ur.p,zn,lt),sn(Ur.pp,Ur.p))}lt*=.992,vt&&vt(te,J,lt<.01)}}}(M,E,{rect:V,gravity:l.get("gravity"),friction:l.get("friction")}),G=N.step;N.step=function(te){for(var J=0,me=M.length;J<me;J++)M[J].fixed&&sn(M[J].p,o.getNodeByIndex(J).getLayout());G(function(ge,pe,_e){for(var Me=0,We=ge.length;Me<We;Me++)ge[Me].fixed||o.getNodeByIndex(Me).setLayout(ge[Me].p),n[a.getId(Me)]=ge[Me].p;for(Me=0,We=pe.length;Me<We;Me++){var Ke=pe[Me],et=o.getEdgeByIndex(Me),ut=Ke.n1.p,lt=Ke.n2.p,vt=et.getLayout();(vt=vt?vt.slice():[])[0]=vt[0]||[],vt[1]=vt[1]||[],sn(vt[0],ut),sn(vt[1],lt),+Ke.curveness&&(vt[2]=[(ut[0]+lt[0])/2-(ut[1]-lt[1])*Ke.curveness,(ut[1]+lt[1])/2-(lt[0]-ut[0])*Ke.curveness]),et.setLayout(vt)}te&&te(_e)})},t.forceLayout=N,t.preservedPoints=n,N.step()}else t.forceLayout=null})}),Bc("graphView",{create:function(e,t){var n=[];return e.eachSeriesByType("graph",function(o){var N,G,te,a=o.get("coordinateSystem");if(!a||"view"===a){var u=o.getData(),l=[],f=[];y0(u.mapArray(function(V){var N=u.getItemModel(V);return[+N.get("x"),+N.get("y")]}),l,f),f[0]-l[0]==0&&(f[0]+=1,l[0]-=1),f[1]-l[1]==0&&(f[1]+=1,l[1]-=1);var m=(f[0]-l[0])/(f[1]-l[1]),v=(N=t,G=m,(te=o.getBoxLayoutParams()).aspect=G,si(te,{width:N.getWidth(),height:N.getHeight()}));isNaN(m)&&(l=[v.x,v.y],f=[v.x+v.width,v.y+v.height]);var x=f[0]-l[0],C=f[1]-l[1],k=v.width,M=v.height,E=o.coordinateSystem=new lm;E.zoomLimit=o.get("scaleLimit"),E.setBoundingRect(l[0],l[1],x,C),E.setViewRect(v.x,v.y,k,M),E.setCenter(o.get("center")),E.setZoom(o.get("zoom")),n.push(E)}}),n}}),Ma.extend({type:"series.gauge",getInitialData:function(e,t){return Yb(this,["value"])},defaultOption:{zlevel:0,z:2,center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,lineStyle:{color:[[.2,"#91c7ae"],[.8,"#63869e"],[1,"#c23531"]],width:30}},splitLine:{show:!0,length:30,lineStyle:{color:"#eee",width:2,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:8,lineStyle:{color:"#eee",width:1,type:"solid"}},axisLabel:{show:!0,distance:5,color:"auto"},pointer:{show:!0,length:"80%",width:8},itemStyle:{color:"auto"},title:{show:!0,offsetCenter:[0,"-40%"],color:"#333",fontSize:15},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"auto",fontSize:30}}});var Hc=so.extend({type:"echartsGaugePointer",shape:{angle:0,width:10,r:10,x:0,y:0},buildPath:function(e,t){var n=Math.cos,o=Math.sin,a=t.r,u=t.width,l=t.angle,f=t.x-n(l)*u*(a/3<=u?1:2),m=t.y-o(l)*u*(a/3<=u?1:2);l=t.angle-Math.PI/2,e.moveTo(f,m),e.lineTo(t.x+n(l)*u,t.y+o(l)*u),e.lineTo(t.x+n(t.angle)*a,t.y+o(t.angle)*a),e.lineTo(t.x-n(l)*u,t.y-o(l)*u),e.lineTo(f,m)}});function OT(e,t){return t&&("string"==typeof t?e=t.replace("{value}",null!=e?e:""):"function"==typeof t&&(e=t(e))),e}var ET=2*Math.PI,PT=(Hs.extend({type:"gauge",render:function(e,t,n){this.group.removeAll();var o=e.get("axisLine.lineStyle.color"),a=function(u,l){var f=u.get("center"),m=l.getWidth(),v=l.getHeight(),x=Math.min(m,v);return{cx:nr(f[0],l.getWidth()),cy:nr(f[1],l.getHeight()),r:nr(u.get("radius"),x/2)}}(e,n);this._renderMain(e,t,n,o,a)},dispose:function(){},_renderMain:function(e,t,n,o,a){for(var u=this.group,l=e.getModel("axisLine"),f=l.getModel("lineStyle"),m=e.get("clockwise"),v=-e.get("startAngle")/180*Math.PI,x=((V=-e.get("endAngle")/180*Math.PI)-v)%ET,C=v,k=f.get("width"),M=l.get("show"),E=0;M&&E<o.length;E++){var V,N=Math.min(Math.max(o[E][0],0),1),G=new nl({shape:{startAngle:C,endAngle:V=v+x*N,cx:a.cx,cy:a.cy,clockwise:m,r0:a.r-k,r:a.r},silent:!0});G.setStyle({fill:o[E][1]}),G.setStyle(f.getLineStyle(["color","borderWidth","borderColor"])),u.add(G),C=V}function te(me){if(me<=0)return o[0][1];for(var ge=0;ge<o.length;ge++)if(o[ge][0]>=me&&(0===ge?0:o[ge-1][0])<me)return o[ge][1];return o[ge-1][1]}if(!m){var J=v;v=V,V=J}this._renderTicks(e,t,n,te,a,v,V,m),this._renderPointer(e,t,n,te,a,v,V,m),this._renderTitle(e,t,n,te,a),this._renderDetail(e,t,n,te,a)},_renderTicks:function(e,t,n,o,a,u,l,f){for(var m=this.group,v=a.cx,x=a.cy,C=a.r,k=+e.get("min"),M=+e.get("max"),E=e.getModel("splitLine"),V=e.getModel("axisTick"),N=e.getModel("axisLabel"),G=e.get("splitNumber"),te=V.get("splitNumber"),J=nr(E.get("length"),C),me=nr(V.get("length"),C),ge=u,pe=(l-u)/G,_e=pe/te,Me=E.getModel("lineStyle").getLineStyle(),We=V.getModel("lineStyle").getLineStyle(),Ke=0;Ke<=G;Ke++){var et=Math.cos(ge),ut=Math.sin(ge);if(E.get("show")){var lt=new $s({shape:{x1:et*C+v,y1:ut*C+x,x2:et*(C-J)+v,y2:ut*(C-J)+x},style:Me,silent:!0});"auto"===Me.stroke&&lt.setStyle({stroke:o(Ke/G)}),m.add(lt)}if(N.get("show")){var vt=OT(Vs(Ke/G*(M-k)+k),N.get("formatter")),Mt=N.get("distance"),Pt=o(Ke/G);m.add(new Yo({style:Ta({},N,{text:vt,x:et*(C-J-Mt)+v,y:ut*(C-J-Mt)+x,textVerticalAlign:ut<-.4?"top":.4<ut?"bottom":"middle",textAlign:et<-.4?"left":.4<et?"right":"center"},{autoColor:Pt}),silent:!0}))}if(V.get("show")&&Ke!==G){for(var Ct=0;Ct<=te;Ct++){et=Math.cos(ge),ut=Math.sin(ge);var Zt=new $s({shape:{x1:et*C+v,y1:ut*C+x,x2:et*(C-me)+v,y2:ut*(C-me)+x},silent:!0,style:We});"auto"===We.stroke&&Zt.setStyle({stroke:o((Ke+Ct/te)/G)}),m.add(Zt),ge+=_e}ge-=_e}else ge+=pe}},_renderPointer:function(e,t,n,o,a,u,l,f){var m=this.group,v=this._data;if(e.get("pointer.show")){var x=[+e.get("min"),+e.get("max")],C=[u,l],k=e.getData(),M=k.mapDimension("value");k.diff(v).add(function(E){var V=new Hc({shape:{angle:u}});al(V,{shape:{angle:hi(k.get(M,E),x,C,!0)}},e),m.add(V),k.setItemGraphicEl(E,V)}).update(function(E,V){var N=v.getItemGraphicEl(V);Po(N,{shape:{angle:hi(k.get(M,E),x,C,!0)}},e),m.add(N),k.setItemGraphicEl(E,N)}).remove(function(E){var V=v.getItemGraphicEl(E);m.remove(V)}).execute(),k.eachItemGraphicEl(function(E,V){var N=k.getItemModel(V),G=N.getModel("pointer");E.setShape({x:a.cx,y:a.cy,width:nr(G.get("width"),a.r),r:nr(G.get("length"),a.r)}),E.useStyle(N.getModel("itemStyle").getItemStyle()),"auto"===E.style.fill&&E.setStyle("fill",o(hi(k.get(M,V),x,[0,1],!0))),Go(E,N.getModel("emphasis.itemStyle").getItemStyle())}),this._data=k}else v&&v.eachItemGraphicEl(function(E){m.remove(E)})},_renderTitle:function(e,t,n,o,a){var u=e.getData(),l=u.mapDimension("value"),f=e.getModel("title");if(f.get("show")){var m=f.get("offsetCenter"),v=a.cx+nr(m[0],a.r),x=a.cy+nr(m[1],a.r),C=+e.get("min"),k=+e.get("max"),M=o(hi(e.getData().get(l,0),[C,k],[0,1],!0));this.group.add(new Yo({silent:!0,style:Ta({},f,{x:v,y:x,text:u.getName(0),textAlign:"center",textVerticalAlign:"middle"},{autoColor:M,forceRich:!0})}))}},_renderDetail:function(e,t,n,o,a){var u=e.getModel("detail"),l=+e.get("min"),f=+e.get("max");if(u.get("show")){var m=u.get("offsetCenter"),v=a.cx+nr(m[0],a.r),x=a.cy+nr(m[1],a.r),C=nr(u.get("width"),a.r),k=nr(u.get("height"),a.r),M=e.getData(),E=M.get(M.mapDimension("value"),0),V=o(hi(E,[l,f],[0,1],!0));this.group.add(new Yo({silent:!0,style:Ta({},u,{x:v,y:x,text:OT(E,u.get("formatter")),textWidth:isNaN(C)?null:C,textHeight:isNaN(k)?null:k,textAlign:"center",textVerticalAlign:"middle"},{autoColor:V,forceRich:!0})}))}}}),dp({type:"series.funnel",init:function(e){PT.superApply(this,"init",arguments),this.legendVisualProvider=new uy(Rt(this.getData,this),Rt(this.getRawData,this)),this._defaultLabelLine(e)},getInitialData:function(e,t){return Yb(this,{coordDimensions:["value"],encodeDefaulter:pn(Gg,this)})},_defaultLabelLine:function(e){Nh(e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},getDataParams:function(e){var t=this.getData(),n=PT.superCall(this,"getDataParams",e),o=t.mapDimension("value"),a=t.getSum(o);return n.percent=a?+(t.get(o,e)/a*100).toFixed(2):0,n.$vars.push("percent"),n},defaultOption:{zlevel:0,z:2,legendHoverLink:!0,left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1,type:"solid"}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}}}}));function jw(e,t){mr.call(this);var n=new Vo,o=new Zo,a=new Yo;this.add(n),this.add(o),this.add(a),this.highDownOnUpdate=function(u,l){"emphasis"===l?(o.ignore=o.hoverIgnore,a.ignore=a.hoverIgnore):(o.ignore=o.normalIgnore,a.ignore=a.normalIgnore)},this.updateData(e,t,!0)}var NT=jw.prototype,RT=["itemStyle","opacity"];function fx(e,t,n,o,a){mu.call(this,e,t,n),this.type=o||"value",this.axisIndex=a}function Dy(e,t,n,o,a,u){e=e||0;var l=n[1]-n[0];if(null!=a&&(a=l_(a,[0,l])),null!=u&&(u=Math.max(u,null!=a?a:0)),"all"===o){var f=Math.abs(t[1]-t[0]);a=u=l_(f=l_(f,[0,l]),[a,u]),o=0}t[0]=l_(t[0],n),t[1]=l_(t[1],n);var m=kp(t,o);t[o]+=e;var v=a||0,x=n.slice();m.sign<0?x[0]+=v:x[1]-=v,t[o]=l_(t[o],x);var C=kp(t,o);return null!=a&&(C.sign!==m.sign||C.span<a)&&(t[1-o]=t[o]+m.sign*a),C=kp(t,o),null!=u&&C.span>u&&(t[1-o]=t[o]+C.sign*u),t}function kp(e,t){var n=e[t]-e[1-t];return{span:Math.abs(n),sign:0<n?-1:n<0?1:t?-1:1}}function l_(e,t){return Math.min(null!=t[1]?t[1]:1/0,Math.max(null!=t[0]?t[0]:-1/0,e))}NT.updateData=function(e,t,n){var o=this.childAt(0),a=e.hostModel,u=e.getItemModel(t),l=e.getItemLayout(t),f=e.getItemModel(t).get(RT);f=null==f?1:f,o.useStyle({}),n?(o.setShape({points:l.points}),o.setStyle({opacity:0}),al(o,{style:{opacity:f}},a,t)):Po(o,{style:{opacity:f},shape:{points:l.points}},a,t);var m=u.getModel("itemStyle"),v=e.getItemVisual(t,"color");o.setStyle(Ee({lineJoin:"round",fill:v},m.getItemStyle(["opacity"]))),o.hoverStyle=m.getModel("emphasis").getItemStyle(),this._updateLabel(e,t),Go(this)},NT._updateLabel=function(e,t){var n=this.childAt(1),o=this.childAt(2),a=e.hostModel,u=e.getItemModel(t),l=e.getItemLayout(t).label,f=e.getItemVisual(t,"color");Po(n,{shape:{points:l.linePoints||l.linePoints}},a,t),Po(o,{style:{x:l.x,y:l.y}},a,t),o.attr({rotation:l.rotation,origin:[l.x,l.y],z2:10});var m=u.getModel("label"),v=u.getModel("emphasis.label"),x=u.getModel("labelLine"),C=u.getModel("emphasis.labelLine");f=e.getItemVisual(t,"color"),Ln(o.style,o.hoverStyle={},m,v,{labelFetcher:e.hostModel,labelDataIndex:t,defaultText:e.getName(t),autoColor:f,useInsideStyle:!!l.inside},{textAlign:l.textAlign,textVerticalAlign:l.verticalAlign}),o.ignore=o.normalIgnore=!m.get("show"),o.hoverIgnore=!v.get("show"),n.ignore=n.normalIgnore=!x.get("show"),n.hoverIgnore=!C.get("show"),n.setStyle({stroke:f}),n.setStyle(x.getModel("lineStyle").getLineStyle()),n.hoverStyle=C.getModel("lineStyle").getLineStyle()},Ie(jw,mr),Hs.extend({type:"funnel",render:function(e,t,n){var o=e.getData(),a=this._data,u=this.group;o.diff(a).add(function(l){var f=new jw(o,l);o.setItemGraphicEl(l,f),u.add(f)}).update(function(l,f){var m=a.getItemGraphicEl(f);m.updateData(o,l),u.add(m),o.setItemGraphicEl(l,m)}).remove(function(l){var f=a.getItemGraphicEl(l);u.remove(f)}).execute(),this._data=o},remove:function(){this.group.removeAll(),this._data=null},dispose:function(){}}),Gi(V1("funnel")),fa(function(e,t,n){e.eachSeriesByType("funnel",function(o){var Mt,a=o.getData(),u=a.mapDimension("value"),l=o.get("sort"),f=(Mt=t,si(o.getBoxLayoutParams(),{width:Mt.getWidth(),height:Mt.getHeight()})),m=function(vt,Mt){for(var Pt=vt.mapDimension("value"),Ct=vt.mapArray(Pt,function(Jn){return Jn}),Zt=[],An="ascending"===Mt,Rn=0,Cn=vt.count();Rn<Cn;Rn++)Zt[Rn]=Rn;return"function"==typeof Mt?Zt.sort(Mt):"none"!==Mt&&Zt.sort(function(Jn,dr){return An?Ct[Jn]-Ct[dr]:Ct[dr]-Ct[Jn]}),Zt}(a,l),v=o.get("orient"),x=f.width,C=f.height,k=f.x,M=f.y,E="horizontal"===v?[nr(o.get("minSize"),C),nr(o.get("maxSize"),C)]:[nr(o.get("minSize"),x),nr(o.get("maxSize"),x)],V=a.getDataExtent(u),N=o.get("min"),G=o.get("max");function te(vt,Mt){if("horizontal"===v){var Pt,Ct=hi(a.get(u,vt)||0,[N,G],E,!0);switch(J){case"top":Pt=M;break;case"center":Pt=M+(C-Ct)/2;break;case"bottom":Pt=M+(C-Ct)}return[[Mt,Pt],[Mt,Pt+Ct]]}var Zt,An=hi(a.get(u,vt)||0,[N,G],E,!0);switch(J){case"left":Zt=k;break;case"center":Zt=k+(x-An)/2;break;case"right":Zt=k+x-An}return[[Zt,Mt],[Zt+An,Mt]]}null==N&&(N=Math.min(V[0],0)),null==G&&(G=V[1]);var vt,J=o.get("funnelAlign"),me=o.get("gap"),ge=(("horizontal"===v?x:C)-me*(a.count()-1))/a.count();"ascending"===l&&(ge=-ge,me=-me,"horizontal"===v?k+=x:M+=C,m=m.reverse());for(var pe=0;pe<m.length;pe++){var _e=m[pe],Me=m[pe+1],We=a.getItemModel(_e);if("horizontal"===v){var Ke=We.get("itemStyle.width");null==Ke?Ke=ge:(Ke=nr(Ke,x),"ascending"===l&&(Ke=-Ke));var et=te(_e,k),ut=te(Me,k+Ke);k+=Ke+me,a.setItemLayout(_e,{points:et.concat(ut.slice().reverse())})}else{var lt=We.get("itemStyle.height");null==lt?lt=ge:(lt=nr(lt,C),"ascending"===l&&(lt=-lt)),et=te(_e,"horizontal"===v?k:M),ut=te(Me,"horizontal"===v?k+Ke:M+lt),M+=lt+me,a.setItemLayout(_e,{points:et.concat(ut.slice().reverse())})}}(vt=a).each(function(Mt){var Pt,Ct,Zt,An,Rn=vt.getItemModel(Mt),Cn=Rn.getModel("label").get("position"),Jn=Rn.get("orient"),dr=Rn.getModel("labelLine"),$r=vt.getItemLayout(Mt),zn=$r.points,Ur="inner"===Cn||"inside"===Cn||"center"===Cn||"insideLeft"===Cn||"insideRight"===Cn;if(Ur)Pt="insideLeft"===Cn?(Ct=(zn[0][0]+zn[3][0])/2+5,Zt=(zn[0][1]+zn[3][1])/2,"left"):"insideRight"===Cn?(Ct=(zn[1][0]+zn[2][0])/2-5,Zt=(zn[1][1]+zn[2][1])/2,"right"):(Ct=(zn[0][0]+zn[1][0]+zn[2][0]+zn[3][0])/4,Zt=(zn[0][1]+zn[1][1]+zn[2][1]+zn[3][1])/4,"center"),An=[[Ct,Zt],[Ct,Zt]];else{var Jr,_o,ga,ji,Ia=dr.get("length");Pt="left"===Cn?(_o=(zn[3][1]+zn[0][1])/2,Ct=(ga=(Jr=(zn[3][0]+zn[0][0])/2)-Ia)-5,"right"):"right"===Cn?(_o=(zn[1][1]+zn[2][1])/2,Ct=(ga=(Jr=(zn[1][0]+zn[2][0])/2)+Ia)+5,"left"):"top"===Cn?(Jr=(zn[3][0]+zn[0][0])/2,Zt=(ji=(_o=(zn[3][1]+zn[0][1])/2)-Ia)-5,"center"):"bottom"===Cn?(Jr=(zn[1][0]+zn[2][0])/2,Zt=(ji=(_o=(zn[1][1]+zn[2][1])/2)+Ia)+5,"center"):"rightTop"===Cn?(Jr="horizontal"===Jn?zn[3][0]:zn[1][0],_o="horizontal"===Jn?zn[3][1]:zn[1][1],"horizontal"===Jn?(Zt=(ji=_o-Ia)-5,"center"):(Ct=(ga=Jr+Ia)+5,"top")):"rightBottom"===Cn?(Jr=zn[2][0],_o=zn[2][1],"horizontal"===Jn?(Zt=(ji=_o+Ia)+5,"center"):(Ct=(ga=Jr+Ia)+5,"bottom")):"leftTop"===Cn?(Jr=zn[0][0],_o="horizontal"===Jn?zn[0][1]:zn[1][1],"horizontal"===Jn?(Zt=(ji=_o-Ia)-5,"center"):(Ct=(ga=Jr-Ia)-5,"right")):"leftBottom"===Cn?(Jr="horizontal"===Jn?zn[1][0]:zn[3][0],_o="horizontal"===Jn?zn[1][1]:zn[2][1],"horizontal"===Jn?(Zt=(ji=_o+Ia)+5,"center"):(Ct=(ga=Jr-Ia)-5,"right")):(Jr=(zn[1][0]+zn[2][0])/2,_o=(zn[1][1]+zn[2][1])/2,"horizontal"===Jn?(Zt=(ji=_o+Ia)+5,"center"):(Ct=(ga=Jr+Ia)+5,"left")),"horizontal"===Jn?Ct=ga=Jr:Zt=ji=_o,An=[[Jr,_o],[ga,ji]]}$r.label={linePoints:An,x:Ct,y:Zt,verticalAlign:"middle",textAlign:Pt,inside:Ur}})})}),Ii(cy("funnel")),fx.prototype={constructor:fx,model:null,isHorizontal:function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")}},Ie(fx,mu);var ZC=le,LT=Math.min,c_=Math.max,BT=Math.floor,c2=Math.ceil,KC=Vs,d2=Math.PI;function rf(e,t,n){this._axesMap=Gt(),this._axesLayout={},this.dimensions=e.dimensions,this._model=e,this._init(e,t,n)}function Ay(e,t){return LT(c_(e,t[0]),t[1])}rf.prototype={type:"parallel",constructor:rf,_init:function(e,t,n){var a=e.parallelAxisIndex;ZC(e.dimensions,function(u,l){var f=a[l],m=t.getComponent("parallelAxis",f),v=this._axesMap.set(u,new fx(u,uh(m),[0,0],m.get("type"),f));v.onBand="category"===v.type&&m.get("boundaryGap"),v.inverse=m.get("inverse"),(m.axis=v).model=m,v.coordinateSystem=m.coordinateSystem=this},this)},update:function(e,t){this._updateAxesFromSeries(this._model,e)},containPoint:function(e){var t=this._makeLayoutInfo(),n=t.axisBase,o=t.layoutBase,a=t.pixelDimIndex,u=e[1-a],l=e[a];return n<=u&&u<=n+t.axisLength&&o<=l&&l<=o+t.layoutLength},getModel:function(){return this._model},_updateAxesFromSeries:function(e,t){t.eachSeries(function(n){if(e.contains(n,t)){var o=n.getData();ZC(this.dimensions,function(a){var u=this._axesMap.get(a);u.scale.unionExtentFromData(o,o.mapDimension(a)),Ui(u.scale,u.model)},this)}},this)},resize:function(e,t){this._rect=si(e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()}),this._layoutAxes()},getRect:function(){return this._rect},_makeLayoutInfo:function(){var e,t=this._model,n=this._rect,o=["x","y"],a=["width","height"],u=t.get("layout"),l="horizontal"===u?0:1,f=n[a[l]],m=[0,f],v=this.dimensions.length,x=Ay(t.get("axisExpandWidth"),m),C=Ay(t.get("axisExpandCount")||0,[0,v]),k=t.get("axisExpandable")&&3<v&&C<v&&1<C&&0<x&&0<f,M=t.get("axisExpandWindow");M?(e=Ay(M[1]-M[0],m),M[1]=M[0]+e):(e=Ay(x*(C-1),m),(M=[x*(t.get("axisExpandCenter")||BT(v/2))-e/2])[1]=M[0]+e);var E=(f-e)/(v-C);E<3&&(E=0);var V=[BT(KC(M[0]/x,1))+1,c2(KC(M[1]/x,1))-1];return{layout:u,pixelDimIndex:l,layoutBase:n[o[l]],layoutLength:f,axisBase:n[o[1-l]],axisLength:n[a[1-l]],axisExpandable:k,axisExpandWidth:x,axisCollapseWidth:E,axisExpandWindow:M,axisCount:v,winInnerIndices:V,axisExpandWindow0Pos:E/x*M[0]}},_layoutAxes:function(){var e=this._rect,t=this._axesMap,n=this.dimensions,o=this._makeLayoutInfo(),a=o.layout;t.each(function(u){var l=[0,o.axisLength],f=u.inverse?1:0;u.setExtent(l[f],l[1-f])}),ZC(n,function(u,l){var f=(o.axisExpandable?function(M,E){var V,N,te=E.axisExpandWidth,me=E.axisCollapseWidth,ge=E.winInnerIndices,pe=me,_e=!1;return M<ge[0]?(V=M*me,N=me):M<=ge[1]?(V=E.axisExpandWindow0Pos+M*te-E.axisExpandWindow[0],pe=te,_e=!0):(V=E.layoutLength-(E.axisCount-1-M)*me,N=me),{position:V,axisNameAvailableWidth:pe,axisLabelShow:_e,nameTruncateMaxWidth:N}}:function(M,E){var V=E.layoutLength/(E.axisCount-1);return{position:V*M,axisNameAvailableWidth:V,axisLabelShow:!0}})(l,o),m={horizontal:{x:f.position,y:o.axisLength},vertical:{x:0,y:f.position}},x=[m[a].x+e.x,m[a].y+e.y],C={horizontal:d2/2,vertical:0}[a],k=vi();Yc(k,k,C),Xc(k,k,x),this._axesLayout[u]={position:x,rotation:C,transform:k,axisNameAvailableWidth:f.axisNameAvailableWidth,axisLabelShow:f.axisLabelShow,nameTruncateMaxWidth:f.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}},this)},getAxis:function(e){return this._axesMap.get(e)},dataToPoint:function(e,t){return this.axisCoordToPoint(this._axesMap.get(t).dataToCoord(e),t)},eachActiveState:function(e,t,n,o){null==n&&(n=0),null==o&&(o=e.count());var a=this._axesMap,u=this.dimensions,l=[],f=[];le(u,function(E){l.push(e.mapDimension(E)),f.push(a.get(E).model)});for(var m=this.hasAxisBrushed(),v=n;v<o;v++){var x;if(m){x="active";for(var C=e.getValues(l,v),k=0,M=u.length;k<M;k++)if("inactive"===f[k].getActiveState(C[k])){x="inactive";break}}else x="normal";t(x,v)}},hasAxisBrushed:function(){for(var e=this.dimensions,t=this._axesMap,n=!1,o=0,a=e.length;o<a;o++)"normal"!==t.get(e[o]).model.getActiveState()&&(n=!0);return n},axisCoordToPoint:function(e,t){return Ai([e,0],this._axesLayout[t].transform)},getAxisLayout:function(e){return ie(this._axesLayout[e])},getSlidedAxisExpandWindow:function(e){var t=this._makeLayoutInfo(),n=t.pixelDimIndex,o=t.axisExpandWindow.slice(),a=o[1]-o[0],u=[0,t.axisExpandWidth*(t.axisCount-1)];if(!this.containPoint(e))return{behavior:"none",axisExpandWindow:o};var l,f=e[n]-t.layoutBase-t.axisExpandWindow0Pos,m="slide",v=t.axisCollapseWidth,x=this._model.get("axisExpandSlideTriggerArea"),C=null!=x[0];return v?(C&&v&&f<a*x[0]?(m="jump",l=f-a*x[2]):C&&v&&f>a*(1-x[0])?(m="jump",l=f-a*(1-x[2])):0<=(l=f-a*x[1])&&(l=f-a*(1-x[1]))<=0&&(l=0),(l*=t.axisExpandWidth/v)?Dy(l,o,u,"all"):m="none"):((o=[c_(0,u[1]*f/(a=o[1]-o[0])-a/2)])[1]=LT(u[1],o[0]+a),o[0]=o[1]-a),{axisExpandWindow:o,behavior:m}}},lu.register("parallel",{create:function(e,t){var n=[];return e.eachComponent("parallel",function(o,a){var u=new rf(o,e,t);u.name="parallel_"+a,u.resize(o,t),(o.coordinateSystem=u).model=o,n.push(u)}),e.eachSeries(function(o){if("parallel"===o.get("coordinateSystem")){var a=e.queryComponents({mainType:"parallel",index:o.get("parallelIndex"),id:o.get("parallelId")})[0];o.coordinateSystem=a.coordinateSystem}}),n}});var $C=ci.extend({type:"baseParallelAxis",axis:null,activeIntervals:[],getAreaSelectStyle:function(){return Cu([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},setActiveIntervals:function(e){var t=this.activeIntervals=ie(e);if(t)for(var n=t.length-1;0<=n;n--)Pg(t[n])},getActiveState:function(e){var t=this.activeIntervals;if(!t.length)return"normal";if(null==e||isNaN(e))return"inactive";if(1===t.length){var n=t[0];if(n[0]<=e&&e<=n[1])return"active"}else for(var o=0,a=t.length;o<a;o++)if(t[o][0]<=e&&e<=t[o][1])return"active";return"inactive"}});xe($C.prototype,ic),oy("parallel",$C,function(e,t){return t.type||(t.data?"category":"value")},{type:"value",dim:null,areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10}),ci.extend({type:"parallel",dependencies:["parallelAxis"],coordinateSystem:null,dimensions:null,parallelAxisIndex:null,layoutMode:"box",defaultOption:{zlevel:0,z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},init:function(){ci.prototype.init.apply(this,arguments),this.mergeOption({})},mergeOption:function(e){e&&xe(this.option,e,!0),this._initDimensions()},contains:function(e,t){var n=e.get("parallelIndex");return null!=n&&t.getComponent("parallel",n)===this},setAxisExpand:function(e){le(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],function(t){e.hasOwnProperty(t)&&(this.option[t]=e[t])},this)},_initDimensions:function(){var e=this.dimensions=[],t=this.parallelAxisIndex=[];le(ht(this.dependentModels.parallelAxis,function(n){return(n.get("parallelIndex")||0)===this.componentIndex},this),function(n){e.push("dim"+n.get("dim")),t.push(n.componentIndex)})}}),io({type:"axisAreaSelect",event:"axisAreaSelected"},function(e,t){t.eachComponent({mainType:"parallelAxis",query:e},function(n){n.axis.model.setActiveIntervals(e.intervals)})}),io("parallelAxisExpand",function(e,t){t.eachComponent({mainType:"parallel",query:e},function(n){n.setAxisExpand(e)})});var Tp=pn,ph=le,zT=Ge,qw=Math.min,hx=Math.max,f2=Math.pow,LD={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},d_={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},JC={brushStyle:{lineWidth:2,stroke:"rgba(0,0,0,0.3)",fill:"rgba(0,0,0,0.1)"},transformable:!0,brushMode:"single",removeOnClick:!1},VT=0;function gx(e){wn.call(this),this._zr=e,this.group=new mr,this._track=[],this._covers=[],this._uid="brushController_"+VT++,this._handlers={},ph(b2,function(t,n){this._handlers[n]=Rt(t,this)},this)}function Xw(e,t){var n=Mp[t.brushType].createCover(e,t);return n.__brushOption=t,WT(n,t),e.group.add(n),n}function m2(e,t){var n=Yw(t);return n.endCreating&&(n.endCreating(e,t),WT(t,t.__brushOption)),t}function HT(e,t){var n=t.__brushOption;Yw(t).updateCoverShape(e,t,n.range,n)}function WT(e,t){var n=t.z;null==n&&(n=1e4),e.traverse(function(o){o.z=n,o.z2=n})}function n0(e,t){Yw(t).updateCommon(e,t),HT(e,t)}function Yw(e){return Mp[e.__brushOption.brushType]}function mx(e,t,n){var o,a=e._panels;if(!a)return!0;var u=e._transform;return ph(a,function(l){l.isTargetByCursor(t,n,u)&&(o=l)}),o}function GT(e,t){var n=e._panels;if(!n)return!0;var o=t.__brushOption.panelId;return null==o||n[o]}function QC(e){var t=e._covers,n=t.length;return ph(t,function(o){e.group.remove(o)},e),t.length=0,!!n}function vh(e,t){var n=zT(e._covers,function(o){var a=o.__brushOption,u=ie(a.range);return{brushType:a.brushType,panelId:a.panelId,range:u}});e.trigger("brush",n,{isEnd:!!t.isEnd,removeOnClick:!!t.removeOnClick})}function p2(e){var t=e.length-1;return t<0&&(t=0),[e[0],e[t]]}function v2(e,t,n,o){var a=new mr;return a.add(new fi({name:"main",style:UT(n),silent:!0,draggable:!0,cursor:"move",drift:Tp(e,t,a,"nswe"),ondragend:Tp(vh,t,{isEnd:!0})})),ph(o,function(u){a.add(new fi({name:u,style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:Tp(e,t,a,u),ondragend:Tp(vh,t,{isEnd:!0})}))}),a}function y2(e,t,n,o){var a=o.brushStyle.lineWidth||0,u=hx(a,6),l=n[0][0],f=n[1][0],m=l-a/2,v=f-a/2,x=n[0][1],C=n[1][1],k=x-u+a/2,M=C-u+a/2,E=x-l,V=C-f,N=E+a,G=V+a;r0(e,t,"main",l,f,E,V),o.transformable&&(r0(e,t,"w",m,v,u,G),r0(e,t,"e",k,v,u,G),r0(e,t,"n",m,v,N,u),r0(e,t,"s",m,M,N,u),r0(e,t,"nw",m,v,u,u),r0(e,t,"ne",k,v,u,u),r0(e,t,"sw",m,M,u,u),r0(e,t,"se",k,M,u,u))}function f_(e,t){var n=t.__brushOption,o=n.transformable,a=t.childAt(0);a.useStyle(UT(n)),a.attr({silent:!o,cursor:o?"move":"default"}),ph(["w","e","n","s","se","sw","ne","nw"],function(u){var l=t.childOfName(u),f=function m(v,x){return 1<x.length?("e"!==(M=[m(v,(x=x.split(""))[0]),m(v,x[1])])[0]&&"w"!==M[0]||M.reverse(),M.join("")):{left:"w",right:"e",top:"n",bottom:"s"}[M=Ua({w:"left",e:"right",n:"top",s:"bottom"}[x],Wd(v.group))];var M}(e,u);l&&l.attr({silent:!o,invisible:!o,cursor:o?d_[f]+"-resize":null})})}function r0(e,t,n,o,a,u,l){var m,v,x,f=t.childOfName(n);f&&f.setShape((m=px(e,t,[[o,a],[o+u,a+l]]),{x:v=qw(m[0][0],m[1][0]),y:x=qw(m[0][1],m[1][1]),width:hx(m[0][0],m[1][0])-v,height:hx(m[0][1],m[1][1])-x}))}function UT(e){return Ee({strokeNoScale:!0},e.brushStyle)}function jT(e,t,n,o){var a=[qw(e,n),qw(t,o)],u=[hx(e,n),hx(t,o)];return[[a[0],u[0]],[a[1],u[1]]]}function rs(e,t,n,o,a,u,l,f){var m=o.__brushOption,v=e(m.range),x=Zw(n,u,l);ph(a.split(""),function(C){var k=LD[C];v[k[0]][k[1]]+=x[k[0]]}),m.range=t(jT(v[0][0],v[1][0],v[0][1],v[1][1])),n0(n,o),vh(n,{isEnd:!1})}function qT(e,t,n,o,a){var u=t.__brushOption.range,l=Zw(e,n,o);ph(u,function(f){f[0]+=l[0],f[1]+=l[1]}),n0(e,t),vh(e,{isEnd:!1})}function Zw(e,t,n){var o=e.group,a=o.transformCoordToLocal(t,n),u=o.transformCoordToLocal(0,0);return[a[0]-u[0],a[1]-u[1]]}function px(e,t,n){var o=GT(e,t);return o&&!0!==o?o.clipPath(n,e._transform):ie(n)}function XT(e){var t=e.event;t.preventDefault&&t.preventDefault()}function Ef(e,t,n){return e.childOfName("main").contain(t,n)}function ek(e,t,n,o){var a,u=e._creatingCover,l=e._creatingPanel,f=e._brushOption;if(e._track.push(n.slice()),function(x){var C=x._track;if(!C.length)return!1;var k=C[C.length-1],M=C[0],E=k[0]-M[0],V=k[1]-M[1];return 6<f2(E*E+V*V,.5)}(e)||u){if(l&&!u){"single"===f.brushMode&&QC(e);var m=ie(f);m.brushType=o0(m.brushType,l),m.panelId=!0===l?null:l.panelId,u=e._creatingCover=Xw(e,m),e._covers.push(u)}if(u){var v=Mp[o0(e._brushType,l)];u.__brushOption.range=v.getCreatingRange(px(e,u,e._track)),o&&(m2(e,u),v.updateCommon(e,u)),HT(e,u),a={isEnd:o}}}else o&&"single"===f.brushMode&&f.removeOnClick&&mx(e,t,n)&&QC(e)&&(a={isEnd:o,removeOnClick:!0});return a}function o0(e,t){return"auto"===e?t.defaultBrushType:e}gx.prototype={constructor:gx,enableBrush:function(e){return this._brushType&&function(t){var n=t._zr;(function(o,a,u){var l=G1(o);l[a]===u&&(l[a]=null)})(n,"globalPan",t._uid),function(o,a){ph(a,function(u,l){o.off(l,u)})}(n,t._handlers),t._brushType=t._brushOption=null}(this),e.brushType&&function(t,n){var o=t._zr;t._enableGlobalPan||function(a,u,l){G1(a).globalPan=l}(o,0,t._uid),function(a,u){ph(u,function(l,f){a.on(f,l)})}(o,t._handlers),t._brushType=n.brushType,t._brushOption=xe(ie(JC),n,!0)}(this,e),this},setPanels:function(e){if(e&&e.length){var t=this._panels={};le(e,function(n){t[n.panelId]=ie(n)})}else this._panels=null;return this},mount:function(e){this._enableGlobalPan=(e=e||{}).enableGlobalPan;var t=this.group;return this._zr.add(t),t.attr({position:e.position||[0,0],rotation:e.rotation||0,scale:e.scale||[1,1]}),this._transform=t.getLocalTransform(),this},eachCover:function(e,t){ph(this._covers,e,t)},updateCovers:function(e){e=Ge(e,function(m){return xe(ie(JC),m,!0)});var n=this._covers,o=this._covers=[],a=this,u=this._creatingCover;return new Af(n,e,function(m,v){return l(m.__brushOption,v)},l).add(f).update(f).remove(function(m){n[m]!==u&&a.group.remove(n[m])}).execute(),this;function l(m,v){return(null!=m.id?m.id:"\0-brush-index-"+v)+"-"+m.brushType}function f(m,v){var x=e[m];if(null!=v&&n[v]===u)o[m]=n[v];else{var C=o[m]=null!=v?(n[v].__brushOption=x,n[v]):m2(a,Xw(a,x));n0(a,C)}}},unmount:function(){return this.enableBrush(!1),QC(this),this._zr.remove(this.group),this},dispose:function(){this.unmount(),this.off()}},de(gx,wn);var b2={mousedown:function(e){if(this._dragging)h_(this,e);else if(!e.target||!e.target.draggable){XT(e);var t=this.group.transformCoordToLocal(e.offsetX,e.offsetY);this._creatingCover=null,(this._creatingPanel=mx(this,e,t))&&(this._dragging=!0,this._track=[t.slice()])}},mousemove:function(e){var o=this.group.transformCoordToLocal(e.offsetX,e.offsetY);if(function(u,l,f){if(u._brushType&&(N=u._zr,!((E=l)<0||E>N.getWidth()||undefined>N.getHeight()))){var m=u._zr,v=u._covers,x=mx(u,l,f);if(!u._dragging)for(var C=0;C<v.length;C++){var k=v[C].__brushOption;if(x&&(!0===x||k.panelId===x.panelId)&&Mp[k.brushType].contain(v[C],f[0],f[1]))return}x&&m.setCursorStyle("crosshair")}var E,N}(this,e,o),this._dragging){XT(e);var a=ek(this,e,o,!1);a&&vh(this,a)}},mouseup:function(e){h_(this,e)}};function h_(e,t){if(e._dragging){XT(t);var a=e.group.transformCoordToLocal(t.offsetX,t.offsetY),u=ek(e,t,a,!0);e._dragging=!1,e._track=[],e._creatingCover=null,u&&vh(e,u)}}var Mp={lineX:Iy(0),lineY:Iy(1),rect:{createCover:function(e,t){return v2(Tp(rs,function(n){return n},function(n){return n}),e,t,["w","e","n","s","se","sw","ne","nw"])},getCreatingRange:function(e){var t=p2(e);return jT(t[1][0],t[1][1],t[0][0],t[0][1])},updateCoverShape:function(e,t,n,o){y2(e,t,n,o)},updateCommon:f_,contain:Ef},polygon:{createCover:function(e,t){var n=new mr;return n.add(new Zo({name:"main",style:UT(t),silent:!0})),n},getCreatingRange:function(e){return e},endCreating:function(e,t){t.remove(t.childAt(0)),t.add(new Vo({name:"main",draggable:!0,drift:Tp(qT,e,t),ondragend:Tp(vh,e,{isEnd:!0})}))},updateCoverShape:function(e,t,n,o){t.childAt(0).setShape({points:px(e,t,n)})},updateCommon:f_,contain:Ef}};function Iy(e){return{createCover:function(t,n){return v2(Tp(rs,function(o){var a=[o,[0,100]];return e&&a.reverse(),a},function(o){return o[e]}),t,n,[["w","e"],["n","s"]][e])},getCreatingRange:function(t){var n=p2(t);return[qw(n[0][e],n[1][e]),hx(n[0][e],n[1][e])]},updateCoverShape:function(t,n,o,a){var u,l=GT(t,n);if(!0!==l&&l.getLinearBrushOtherExtent)u=l.getLinearBrushOtherExtent(e,t._transform);else{var f=t._zr;u=[0,[f.getWidth(),f.getHeight()][1-e]]}var m=[o,u];e&&m.reverse(),y2(t,n,m,a)},updateCommon:f_,contain:Ef}}function Kw(e){return e=tk(e),function(t,n){return F_(t,e)}}function YT(e,t){return e=tk(e),function(n){var o=null!=t?t:n,u=o?e.x:e.y;return[u,u+((o?e.width:e.height)||0)]}}function Dp(e,t,n){return e=tk(e),function(o,a,u){return e.contain(a[0],a[1])&&!AC(o,t,n)}}function tk(e){return ii.create(e)}var BD=["axisLine","axisTickLabel","axisName"],vx=Ts({type:"parallelAxis",init:function(e,t){vx.superApply(this,"init",arguments),(this._brushController=new gx(t.getZr())).on("brush",Rt(this._onBrush,this))},render:function(e,t,n,o){if(M=e,!(V=o)||"axisAreaSelect"!==V.type||t.findComponents({mainType:"parallelAxis",query:V})[0]!==M){this.axisModel=e,this.api=n,this.group.removeAll();var a=this._axisGroup;if(this._axisGroup=new mr,this.group.add(this._axisGroup),e.get("show")){var u=function(M,E){return E.getComponent("parallel",M.get("parallelIndex"))}(e,t),l=u.coordinateSystem,f=e.getAreaSelectStyle(),m=f.width,x=Ne({strokeContainThreshold:m},l.getAxisLayout(e.axis.dim)),C=new zc(e,x);le(BD,C.add,C),this._axisGroup.add(C.getGroup()),this._refreshBrushController(x,f,e,u,m,n),Eg(a,this._axisGroup,o&&!1===o.animation?null:e)}}var M,V},_refreshBrushController:function(e,t,n,o,a,u){var x,C,l=n.axis.getExtent(),f=l[1]-l[0],m=Math.min(30,.1*Math.abs(f)),v=ii.create({x:l[0],y:-a/2,width:f,height:a});v.x-=m,v.width+=2*m,this._brushController.mount({enableGlobalPan:!0,rotation:e.rotation,position:e.position}).setPanels([{panelId:"pl",clipPath:Kw(v),isTargetByCursor:Dp(v,u,o),getLinearBrushOtherExtent:YT(v,0)}]).enableBrush({brushType:"lineX",brushStyle:t,removeOnClick:!0}).updateCovers((C=(x=n).axis,Ge(x.activeIntervals,function(k){return{brushType:"lineX",panelId:"pl",range:[C.dataToCoord(k[0],!0),C.dataToCoord(k[1],!0)]}})))},_onBrush:function(e,t){var n=this.axisModel,o=n.axis,a=Ge(e,function(u){return[o.coordToData(u.range[0],!0),o.coordToData(u.range[1],!0)]});!n.option.realtime!==t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:a})},dispose:function(){this._brushController.dispose()}});Ts({type:"parallel",render:function(e,t,n){this._model=e,this._api=n,this._handlers||(this._handlers={},le(yx,function(o,a){n.getZr().on(a,this._handlers[a]=Rt(o,this))},this)),Jh(this,"_throttledDispatchExpand",e.get("axisExpandRate"),"fixRate")},dispose:function(e,t){le(this._handlers,function(n,o){t.getZr().off(o,n)}),this._handlers=null},_throttledDispatchExpand:function(e){this._dispatchExpand(e)},_dispatchExpand:function(e){e&&this._api.dispatchAction(Ne({type:"parallelAxisExpand"},e))}});var yx={mousedown:function(e){Oy(this,"click")&&(this._mouseDownPoint=[e.offsetX,e.offsetY])},mouseup:function(e){var t=this._mouseDownPoint;if(Oy(this,"click")&&t){var n=[e.offsetX,e.offsetY];if(5<Math.pow(t[0]-n[0],2)+Math.pow(t[1]-n[1],2))return;var o=this._model.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]);"none"!==o.behavior&&this._dispatchExpand({axisExpandWindow:o.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(e){if(!this._mouseDownPoint&&Oy(this,"mousemove")){var t=this._model,n=t.coordinateSystem.getSlidedAxisExpandWindow([e.offsetX,e.offsetY]),o=n.behavior;"jump"===o&&this._throttledDispatchExpand.debounceNextCall(t.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===o?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===o&&null})}}};function Oy(e,t){var n=e._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===t}function $w(e,t,n,o){for(var a,u=[],l=0;l<n.length;l++){var f=n[l],m=e.get(e.mapDimension(f),t);a=m,("category"===o.getAxis(f).type?null==a:null==a||isNaN(a))||u.push(o.dataToPoint(m,f))}return u}function x2(e,t,n,o,a){var u=$w(e,n,o,a),l=new Zo({shape:{points:u},silent:!0,z2:10});return t.add(l),e.setItemGraphicEl(n,l),l}function fg(e){var t=e.get("smooth",!0);return!0===t&&(t=.3),{lineStyle:e.getModel("lineStyle").getLineStyle(),smooth:null!=t?t:.3}}function Jw(e,t,n,o){var a=o.lineStyle;t.hasItemOption&&(a=t.getItemModel(n).getModel("lineStyle").getLineStyle()),e.useStyle(a);var u=e.style;u.fill=null,u.stroke=t.getItemVisual(n,"color"),u.opacity=t.getItemVisual(n,"opacity"),o.smooth&&(e.shape.smooth=o.smooth)}da(function(e){(function(t){if(!t.parallel){var n=!1;le(t.series,function(o){o&&"parallel"===o.type&&(n=!0)}),n&&(t.parallel=[{}])}})(e),function(t){le(Ls(t.parallelAxis),function(n){if(ln(n)){var o=n.parallelIndex||0,a=Ls(t.parallel)[o];a&&a.parallelAxisDefault&&xe(n,a.parallelAxisDefault,!1)}})}(e)}),Ma.extend({type:"series.parallel",dependencies:["parallel"],visualColorAccessPath:"lineStyle.color",getInitialData:function(e,t){var n=this.getSource();return function(o,a){if(!o.encodeDefine){var u=a.ecModel.getComponent("parallel",a.get("parallelIndex"));if(u){var l=o.encodeDefine=Gt();le(u.dimensions,function(f){var m=+f.replace("dim","");l.set(f,m)})}}}(n,this),Pv(n,this)},getRawIndicesByActiveState:function(e){var t=this.coordinateSystem,n=this.getData(),o=[];return t.eachActiveState(n,function(a,u){e===a&&o.push(n.getRawIndex(u))}),o},defaultOption:{zlevel:0,z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"}}),Hs.extend({type:"parallel",init:function(){this._dataGroup=new mr,this.group.add(this._dataGroup)},render:function(e,t,n,o){var C,k,E,V,N,G,a=this._dataGroup,u=e.getData(),l=this._data,f=e.coordinateSystem,m=f.dimensions,v=fg(e);if(u.diff(l).add(function(C){Jw(x2(u,a,C,m,f),u,C,v)}).update(function(C,k){var M=l.getItemGraphicEl(k),E=$w(u,C,m,f);u.setItemGraphicEl(C,M),Po(M,{shape:{points:E}},o&&!1===o.animation?null:e,C),Jw(M,u,C,v)}).remove(function(C){var k=l.getItemGraphicEl(C);a.remove(k)}).execute(),!this._initialized){this._initialized=!0;var x=(k=e,E=(C=f).model,V=C.getRect(),N=new fi({shape:{x:V.x,y:V.y,width:V.width,height:V.height}}),G="horizontal"===E.get("layout")?"width":"height",N.setShape(G,0),al(N,{shape:{width:V.width,height:V.height}},k,function(){setTimeout(function(){a.removeClipPath()})}),N);a.setClipPath(x)}this._data=u},incrementalPrepareRender:function(e,t,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},incrementalRender:function(e,t,n){for(var o=t.getData(),a=t.coordinateSystem,u=a.dimensions,l=fg(t),f=e.start;f<e.end;f++){var m=x2(o,this._dataGroup,f,u,a);m.incremental=!0,Jw(m,o,f,l)}},dispose:function(){},remove:function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null}});var zD=["lineStyle","normal","opacity"];Gi({seriesType:"parallel",reset:function(e,t,n){var o=e.getModel("itemStyle"),a=e.getModel("lineStyle"),u=t.get("color"),l=a.get("color")||o.get("color")||u[e.seriesIndex%u.length],f=e.get("inactiveOpacity"),m=e.get("activeOpacity"),v=e.getModel("lineStyle").getLineStyle(),x=e.coordinateSystem,C=e.getData(),k={normal:v.opacity,active:m,inactive:f};return C.setVisual("color",l),{progress:function(M,E){x.eachActiveState(E,function(V,N){var G=k[V];if("normal"===V&&E.hasItemOption){var te=E.getItemModel(N).get(zD,!0);null!=te&&(G=te)}E.setItemVisual(N,"opacity",G)},M.start,M.end)}}}});var Qw=Ma.extend({type:"series.sankey",layoutInfo:null,levelModels:null,getInitialData:function(e,t){for(var n=e.edges||e.links,o=e.data||e.nodes,a=e.levels,u=this.levelModels={},l=0;l<a.length;l++)null!=a[l].depth&&0<=a[l].depth&&(u[a[l].depth]=new ei(a[l],this,t));if(o&&n)return Fw(o,n,this,!0,function(f,m){f.wrapMethod("getItemModel",function(v,x){return v.customizeGetParent(function(C){var k=this.parentModel,M=k.getData().getItemLayout(x).depth;return k.levelModels[M]||this.parentModel}),v}),m.wrapMethod("getItemModel",function(v,x){return v.customizeGetParent(function(C){var k=this.parentModel,M=k.getGraph().getEdgeByIndex(x).node1.getLayout().depth;return k.levelModels[M]||this.parentModel}),v})}).data},setNodePosition:function(e,t){var n=this.option.data[e];n.localX=t[0],n.localY=t[1]},getGraph:function(){return this.getData().graph},getEdgeData:function(){return this.getGraph().edgeData},formatTooltip:function(e,t,n){if("edge"===n){var o=this.getDataParams(e,n),a=o.data,u=a.source+" -- "+a.target;return o.value&&(u+=" : "+o.value),Pa(u)}if("node"!==n)return Qw.superCall(this,"formatTooltip",e,t);var l=this.getGraph().getNodeByIndex(e).getLayout().value,f=this.getDataParams(e,n).data.name;return l&&(u=f+" : "+l),Pa(u)},optionUpdated:function(){var e=this.option;!0===e.focusNodeAdjacency&&(e.focusNodeAdjacency="allEdges")},getDataParams:function(e,t){var n=Qw.superCall(this,"getDataParams",e,t);if(null==n.value&&"node"===t){var o=this.getGraph().getNodeByIndex(e).getLayout().value;n.value=o}return n},defaultOption:{zlevel:0,z:2,coordinateSystem:"view",layout:null,left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,focusNodeAdjacency:!1,layoutIterations:32,label:{show:!0,position:"right",color:"#000",fontSize:12},levels:[],nodeAlign:"justify",itemStyle:{borderWidth:1,borderColor:"#333"},lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},animationEasing:"linear",animationDuration:1e3}}),ZT=["itemStyle","opacity"],of=["emphasis","itemStyle","opacity"],Ey=["lineStyle","opacity"],eS=["emphasis","lineStyle","opacity"];function _2(e,t){return e.getVisual("opacity")||e.getModel().get(t)}function tS(e,t,n){var o=e.getGraphicEl(),a=_2(e,t);null!=n&&(null==a&&(a=1),a*=n),o.downplay&&o.downplay(),o.traverse(function(u){"group"!==u.type&&u.setStyle("opacity",a)})}function hg(e,t){var n=_2(e,t),o=e.getGraphicEl();o.traverse(function(a){"group"!==a.type&&a.setStyle("opacity",n)}),o.highlight&&o.highlight()}var nk=Tc({shape:{x1:0,y1:0,x2:0,y2:0,cpx1:0,cpy1:0,cpx2:0,cpy2:0,extent:0,orient:""},buildPath:function(e,t){var n=t.extent;e.moveTo(t.x1,t.y1),e.bezierCurveTo(t.cpx1,t.cpy1,t.cpx2,t.cpy2,t.x2,t.y2),"vertical"===t.orient?(e.lineTo(t.x2+n,t.y2),e.bezierCurveTo(t.cpx2+n,t.cpy2,t.cpx1+n,t.cpy1,t.x1+n,t.y1)):(e.lineTo(t.x2,t.y2+n),e.bezierCurveTo(t.cpx2,t.cpy2+n,t.cpx1,t.cpy1+n,t.x1,t.y1+n)),e.closePath()},highlight:function(){this.trigger("emphasis")},downplay:function(){this.trigger("normal")}});function ri(e){var t=e.hostGraph.data.getRawDataItem(e.dataIndex);return null!=t.depth&&0<=t.depth}function rk(e,t,n,o,a){var u="vertical"===a?"x":"y";le(e,function(l){var f,m,v;l.sort(function(E,V){return E.getLayout()[u]-V.getLayout()[u]});for(var x=0,C=l.length,k="vertical"===a?"dx":"dy",M=0;M<C;M++)0<(v=x-(m=l[M]).getLayout()[u])&&(f=m.getLayout()[u]+v,m.setLayout("vertical"===a?{x:f}:{y:f},!0)),x=m.getLayout()[u]+m.getLayout()[k]+t;if(0<(v=x-t-("vertical"===a?o:n)))for(f=m.getLayout()[u]-v,m.setLayout("vertical"===a?{x:f}:{y:f},!0),x=f,M=C-2;0<=M;--M)0<(v=(m=l[M]).getLayout()[u]+m.getLayout()[k]+t-x)&&(f=m.getLayout()[u]-v,m.setLayout("vertical"===a?{x:f}:{y:f},!0)),x=m.getLayout()[u]})}function w2(e,t,n){le(e.slice().reverse(),function(o){le(o,function(a){if(a.outEdges.length){var u=Py(a.outEdges,KT,n)/Py(a.outEdges,rS,n);if(isNaN(u)){var l=a.outEdges.length;u=l?Py(a.outEdges,nS,n)/l:0}if("vertical"===n){var f=a.getLayout().x+(u-Gc(a,n))*t;a.setLayout({x:f},!0)}else{var m=a.getLayout().y+(u-Gc(a,n))*t;a.setLayout({y:m},!0)}}})})}function KT(e,t){return Gc(e.node2,t)*e.getValue()}function nS(e,t){return Gc(e.node2,t)}function Wc(e,t){return Gc(e.node1,t)*e.getValue()}function S2(e,t){return Gc(e.node1,t)}function Gc(e,t){return"vertical"===t?e.getLayout().x+e.getLayout().dx/2:e.getLayout().y+e.getLayout().dy/2}function rS(e){return e.getValue()}function Py(e,t,n){for(var o=0,a=e.length,u=-1;++u<a;){var l=+t.call(e,e[u],n);isNaN(l)||(o+=l)}return o}function C2(e,t,n){le(e,function(o){le(o,function(a){if(a.inEdges.length){var u=Py(a.inEdges,Wc,n)/Py(a.inEdges,rS,n);if(isNaN(u)){var l=a.inEdges.length;u=l?Py(a.inEdges,S2,n)/l:0}if("vertical"===n){var f=a.getLayout().x+(u-Gc(a,n))*t;a.setLayout({x:f},!0)}else{var m=a.getLayout().y+(u-Gc(a,n))*t;a.setLayout({y:m},!0)}}})})}gu({type:"sankey",_model:null,_focusAdjacencyDisabled:!1,render:function(e,t,n){var k,M,V,o=this,a=e.getGraph(),u=this.group,l=e.layoutInfo,f=l.width,m=l.height,v=e.getData(),x=e.getData("edge"),C=e.get("orient");this._model=e,u.removeAll(),u.attr("position",[l.x,l.y]),a.eachEdge(function(k){var M=new nk;M.dataIndex=k.dataIndex,M.seriesIndex=e.seriesIndex,M.dataType="edge";var E,V,N,G,te,J,me,ge,pe=k.getModel("lineStyle"),_e=pe.get("curveness"),Me=k.node1.getLayout(),We=k.node1.getModel(),Ke=We.get("localX"),et=We.get("localY"),ut=k.node2.getLayout(),lt=k.node2.getModel(),vt=lt.get("localX"),Mt=lt.get("localY"),Pt=k.getLayout();switch(M.shape.extent=Math.max(1,Pt.dy),ge="vertical"===(M.shape.orient=C)?(te=E=(null!=Ke?Ke*f:Me.x)+Pt.sy,J=(V=(null!=et?et*m:Me.y)+Me.dy)*(1-_e)+(G=null!=Mt?Mt*m:ut.y)*_e,me=N=(null!=vt?vt*f:ut.x)+Pt.ty,V*_e+G*(1-_e)):(te=(E=(null!=Ke?Ke*f:Me.x)+Me.dx)*(1-_e)+(N=null!=vt?vt*f:ut.x)*_e,J=V=(null!=et?et*m:Me.y)+Pt.sy,me=E*_e+N*(1-_e),G=(null!=Mt?Mt*m:ut.y)+Pt.ty),M.setShape({x1:E,y1:V,x2:N,y2:G,cpx1:te,cpy1:J,cpx2:me,cpy2:ge}),M.setStyle(pe.getItemStyle()),M.style.fill){case"source":M.style.fill=k.node1.getVisual("color");break;case"target":M.style.fill=k.node2.getVisual("color")}Go(M,k.getModel("emphasis.lineStyle").getItemStyle()),u.add(M),x.setItemGraphicEl(k.dataIndex,M)}),a.eachNode(function(k){var M=k.getLayout(),E=k.getModel(),V=E.get("localX"),N=E.get("localY"),G=E.getModel("label"),te=E.getModel("emphasis.label"),J=new fi({shape:{x:null!=V?V*f:M.x,y:null!=N?N*m:M.y,width:M.dx,height:M.dy},style:E.getModel("itemStyle").getItemStyle()}),me=k.getModel("emphasis.itemStyle").getItemStyle();Ln(J.style,me,G,te,{labelFetcher:e,labelDataIndex:k.dataIndex,defaultText:k.id,isRectText:!0}),J.setStyle("fill",k.getVisual("color")),Go(J,me),u.add(J),v.setItemGraphicEl(k.dataIndex,J),J.dataType="node"}),v.eachItemGraphicEl(function(k,M){var E=v.getItemModel(M);E.get("draggable")&&(k.drift=function(V,N){o._focusAdjacencyDisabled=!0,this.shape.x+=V,this.shape.y+=N,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:e.id,dataIndex:v.getRawIndex(M),localX:this.shape.x/f,localY:this.shape.y/m})},k.ondragend=function(){o._focusAdjacencyDisabled=!1},k.draggable=!0,k.cursor="move"),k.highlight=function(){this.trigger("emphasis")},k.downplay=function(){this.trigger("normal")},k.focusNodeAdjHandler&&k.off("mouseover",k.focusNodeAdjHandler),k.unfocusNodeAdjHandler&&k.off("mouseout",k.unfocusNodeAdjHandler),E.get("focusNodeAdjacency")&&(k.on("mouseover",k.focusNodeAdjHandler=function(){o._focusAdjacencyDisabled||(o._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,dataIndex:k.dataIndex}))}),k.on("mouseout",k.unfocusNodeAdjHandler=function(){o._focusAdjacencyDisabled||o._dispatchUnfocus(n)}))}),x.eachItemGraphicEl(function(k,M){var E=x.getItemModel(M);k.focusNodeAdjHandler&&k.off("mouseover",k.focusNodeAdjHandler),k.unfocusNodeAdjHandler&&k.off("mouseout",k.unfocusNodeAdjHandler),E.get("focusNodeAdjacency")&&(k.on("mouseover",k.focusNodeAdjHandler=function(){o._focusAdjacencyDisabled||(o._clearTimer(),n.dispatchAction({type:"focusNodeAdjacency",seriesId:e.id,edgeDataIndex:k.dataIndex}))}),k.on("mouseout",k.unfocusNodeAdjHandler=function(){o._focusAdjacencyDisabled||o._dispatchUnfocus(n)}))}),!this._data&&e.get("animation")&&u.setClipPath((k=u.getBoundingRect(),M=e,al(V=new fi({shape:{x:k.x-10,y:k.y-10,width:0,height:k.height+20}}),{shape:{width:k.width+20}},M,function(){u.removeClipPath()}),V)),this._data=e.getData()},dispose:function(){this._clearTimer()},_dispatchUnfocus:function(e){var t=this;this._clearTimer(),this._unfocusDelayTimer=setTimeout(function(){t._unfocusDelayTimer=null,e.dispatchAction({type:"unfocusNodeAdjacency",seriesId:t._model.id})},500)},_clearTimer:function(){this._unfocusDelayTimer&&(clearTimeout(this._unfocusDelayTimer),this._unfocusDelayTimer=null)},focusNodeAdjacency:function(e,t,n,o){var a=e.getData(),u=a.graph,l=o.dataIndex,f=a.getItemModel(l),m=o.edgeDataIndex;if(null!=l||null!=m){var v=u.getNodeByIndex(l),x=u.getEdgeByIndex(m);if(u.eachNode(function(k){tS(k,ZT,.1)}),u.eachEdge(function(k){tS(k,Ey,.1)}),v){hg(v,of);var C=f.get("focusNodeAdjacency");"outEdges"===C?le(v.outEdges,function(k){k.dataIndex<0||(hg(k,eS),hg(k.node2,of))}):"inEdges"===C?le(v.inEdges,function(k){k.dataIndex<0||(hg(k,eS),hg(k.node1,of))}):"allEdges"===C&&le(v.edges,function(k){k.dataIndex<0||(hg(k,eS),k.node1!==v&&hg(k.node1,of),k.node2!==v&&hg(k.node2,of))})}x&&(hg(x,eS),hg(x.node1,of),hg(x.node2,of))}},unfocusNodeAdjacency:function(e,t,n,o){var a=e.getGraph();a.eachNode(function(u){tS(u,ZT)}),a.eachEdge(function(u){tS(u,Ey)})}}),io({type:"dragNode",event:"dragnode",update:"update"},function(e,t){t.eachComponent({mainType:"series",subType:"sankey",query:e},function(n){n.setNodePosition(e.dataIndex,[e.localX,e.localY])})}),fa(function(e,t,n){e.eachSeriesByType("sankey",function(o){var M,a=o.get("nodeWidth"),u=o.get("nodeGap"),l=(M=t,si(o.getBoxLayoutParams(),{width:M.getWidth(),height:M.getHeight()})),f=(o.layoutInfo=l).width,m=l.height,v=o.getGraph(),x=v.nodes,C=v.edges;le(x,function(M){var E=Py(M.outEdges,rS),V=Py(M.inEdges,rS),N=M.getValue()||0,G=Math.max(E,V,N);M.setLayout({value:G},!0)}),function(k,M,E,V,N,G,te,J,me){var ge,_e;(function(ge,pe,_e,Me,We,Ke,et){for(var ut=[],lt=[],vt=[],Mt=[],Pt=0,Ct=0;Ct<pe.length;Ct++)ut[Ct]=1;for(Ct=0;Ct<ge.length;Ct++)lt[Ct]=ge[Ct].inEdges.length,0===lt[Ct]&&vt.push(ge[Ct]);for(var Zt=-1;vt.length;){for(var An=0;An<vt.length;An++){var Rn=vt[An],Cn=Rn.hostGraph.data.getRawDataItem(Rn.dataIndex),Jn=null!=Cn.depth&&0<=Cn.depth;Jn&&Cn.depth>Zt&&(Zt=Cn.depth),Rn.setLayout({depth:Jn?Cn.depth:Pt},!0),Rn.setLayout("vertical"===Ke?{dy:_e}:{dx:_e},!0);for(var dr=0;dr<Rn.outEdges.length;dr++){var $r=Rn.outEdges[dr];ut[pe.indexOf($r)]=0;var Ur=$r.node2;0==--lt[ge.indexOf(Ur)]&&Mt.indexOf(Ur)<0&&Mt.push(Ur)}}++Pt,vt=Mt,Mt=[]}for(Ct=0;Ct<ut.length;Ct++)if(1===ut[Ct])throw new Error("Sankey is a DAG, the original data has cycle!");var ji,Ia,_o=Pt-1<Zt?Zt:Pt-1;et&&"left"!==et&&function(ga,ji,Ia,Sh){if("right"===ji){for(var sf=[],Ox=ga,Yy=0;Ox.length;){for(var NM=0;NM<Ox.length;NM++){var s=Ox[NM];s.setLayout({skNodeHeight:Yy},!0);for(var d=0;d<s.inEdges.length;d++){var p=s.inEdges[d];sf.indexOf(p.node1)<0&&sf.push(p.node1)}}Ox=sf,sf=[],++Yy}le(ga,function(_){ri(_)||_.setLayout({depth:Math.max(0,Sh-_.getLayout().skNodeHeight)},!0)})}else"justify"===ji&&(T=Sh,le(ga,function(I){ri(I)||I.outEdges.length||I.setLayout({depth:T},!0)}));var T}(ge,et,0,_o),ji="vertical"===Ke?(We-_e)/_o:(Me-_e)/_o,Ia=Ke,le(ge,function(Sh){var sf=Sh.getLayout().depth*ji;Sh.setLayout("vertical"===Ia?{y:sf}:{x:sf},!0)})})(k,M,E,N,G,J,me),function(ge,pe,_e,Me,We,Ke,et){var Pt,Ct,Zt,ut=(Pt=[],Ct="vertical"===et?"y":"x",(Zt=vf(ge,function(An){return An.getLayout()[Ct]})).keys.sort(function(An,Rn){return An-Rn}),le(Zt.keys,function(An){Pt.push(Zt.buckets.get(An))}),Pt);(function(vt,Mt,Pt,Ct,Zt,An){var Rn=1/0;le(vt,function(Cn){var Jn=Cn.length,dr=0;le(Cn,function(zn){dr+=zn.getLayout().value});var $r="vertical"===An?(Ct-(Jn-1)*Zt)/dr:(Pt-(Jn-1)*Zt)/dr;$r<Rn&&(Rn=$r)}),le(vt,function(Cn){le(Cn,function(Jn,dr){var $r=Jn.getLayout().value*Rn;"vertical"===An?(Jn.setLayout({x:dr},!0),Jn.setLayout({dx:$r},!0)):(Jn.setLayout({y:dr},!0),Jn.setLayout({dy:$r},!0))})}),le(Mt,function(Cn){var Jn=+Cn.getValue()*Rn;Cn.setLayout({dy:Jn},!0)})})(ut,pe,_e,Me,We,et),rk(ut,We,_e,Me,et);for(var lt=1;0<Ke;Ke--)w2(ut,lt*=.99,et),rk(ut,We,_e,Me,et),C2(ut,lt,et),rk(ut,We,_e,Me,et)}(k,M,G,N,V,te,J),_e="vertical"===J?"x":"y",le(ge=k,function(Me){Me.outEdges.sort(function(We,Ke){return We.node2.getLayout()[_e]-Ke.node2.getLayout()[_e]}),Me.inEdges.sort(function(We,Ke){return We.node1.getLayout()[_e]-Ke.node1.getLayout()[_e]})}),le(ge,function(Me){var We=0,Ke=0;le(Me.outEdges,function(et){et.setLayout({sy:We},!0),We+=et.getLayout().dy}),le(Me.inEdges,function(et){et.setLayout({ty:Ke},!0),Ke+=et.getLayout().dy})})}(x,C,a,u,f,m,0!==ht(x,function(k){return 0===k.getLayout().value}).length?0:o.get("layoutIterations"),o.get("orient"),o.get("nodeAlign"))})}),Gi(function(e,t){e.eachSeriesByType("sankey",function(n){var o=n.getGraph().nodes;if(o.length){var a=1/0,u=-1/0;le(o,function(l){var f=l.getLayout().value;f<a&&(a=f),u<f&&(u=f)}),le(o,function(l){var f=new Bi({type:"color",mappingMethod:"linear",dataExtent:[a,u],visual:n.get("color")}).mapValueToVisual(l.getLayout().value),m=l.getModel().get("itemStyle.color");l.setVisual("color",null!=m?m:f)})}})});var Ou={_baseAxisDim:null,getInitialData:function(e,t){var n,o,a=t.getComponent("xAxis",this.get("xAxisIndex")),u=t.getComponent("yAxis",this.get("yAxisIndex")),l=a.get("type"),f=u.get("type");"category"===l?(e.layout="horizontal",n=a.getOrdinalMeta(),o=!0):"category"===f?(e.layout="vertical",n=u.getOrdinalMeta(),o=!0):e.layout=e.layout||"horizontal";var m=["x","y"],v="horizontal"===e.layout?0:1,x=this._baseAxisDim=m[v],C=m[1-v],k=[a,u],M=k[v].get("type"),E=k[1-v].get("type"),V=e.data;if(V&&o){var N=[];le(V,function(J,me){var ge;J.value&&en(J.value)?(ge=J.value.slice(),J.value.unshift(me)):en(J)?(ge=J.slice(),J.unshift(me)):ge=J,N.push(ge)}),e.data=N}var G=this.defaultValueDimensions,te=[{name:x,type:Z_(M),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:C,type:Z_(E),dimsDef:G.slice()}];return Yb(this,{coordDimensions:te,dimensionsCount:G.length+1,encodeDefaulter:pn(Oc,te,this)})},getBaseAxis:function(){var e=this._baseAxisDim;return this.ecModel.getComponent(e+"Axis",this.get(e+"AxisIndex")).axis}};de(Ma.extend({type:"series.boxplot",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:2,shadowOffsetY:2,shadowColor:"rgba(0,0,0,0.4)"}},animationEasing:"elasticOut",animationDuration:800}}),Ou,!0);var ha=["itemStyle"],FD=["emphasis","itemStyle"],Ny=(Hs.extend({type:"boxplot",render:function(e,t,n){var o=e.getData(),a=this.group,u=this._data;this._data||a.removeAll();var l="horizontal"===e.get("layout")?1:0;o.diff(u).add(function(f){if(o.hasValue(f)){var m=$T(o.getItemLayout(f),o,f,l,!0);o.setItemGraphicEl(f,m),a.add(m)}}).update(function(f,m){var v=u.getItemGraphicEl(m);if(o.hasValue(f)){var x=o.getItemLayout(f);v?lc(x,v,o,f):v=$T(x,o,f,l),a.add(v),o.setItemGraphicEl(f,v)}else a.remove(v)}).remove(function(f){var m=u.getItemGraphicEl(f);m&&a.remove(m)}).execute(),this._data=o},remove:function(e){var t=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl(function(o){o&&t.remove(o)})},dispose:yn}),so.extend({type:"boxplotBoxPath",shape:{},buildPath:function(e,t){var n=t.points,o=0;for(e.moveTo(n[o][0],n[o][1]),o++;o<4;o++)e.lineTo(n[o][0],n[o][1]);for(e.closePath();o<n.length;o++)e.moveTo(n[o][0],n[o][1]),o++,e.lineTo(n[o][0],n[o][1])}}));function $T(e,t,n,o,a){var f,m,v,u=e.ends,l=new Ny({shape:{points:a?(f=u,m=o,v=e,Ge(f,function(x){return(x=x.slice())[m]=v.initBaseline,x})):u}});return lc(e,l,t,n,a),l}function lc(e,t,n,o,a){(0,Mc[a?"initProps":"updateProps"])(t,{shape:{points:e.ends}},n.hostModel,o);var l=n.getItemModel(o),f=l.getModel(ha),m=n.getItemVisual(o,"color"),v=f.getItemStyle(["borderColor"]);v.stroke=m,v.strokeNoScale=!0,t.useStyle(v),t.z2=100,Go(t,l.getModel(FD).getItemStyle())}var Ry=["itemStyle","borderColor"],i0=le;Gi(function(e,t){var n=e.get("color");e.eachRawSeriesByType("boxplot",function(o){var a=n[o.seriesIndex%n.length],u=o.getData();u.setVisual({legendSymbol:"roundRect",color:o.get(Ry)||a}),e.isSeriesFiltered(o)||u.each(function(l){var f=u.getItemModel(l);u.setItemVisual(l,{color:f.get(Ry,!0)})})})}),fa(function(e){var t=function(n){var o=[],a=[];return n.eachSeriesByType("boxplot",function(u){var l=u.getBaseAxis(),f=$e(a,l);f<0&&(a[f=a.length]=l,o[f]={axis:l,seriesModels:[]}),o[f].seriesModels.push(u)}),o}(e);i0(t,function(n){var o=n.seriesModels;o.length&&(function(a){var u,l,f=a.axis,m=a.seriesModels,v=m.length,x=a.boxWidthList=[],C=a.boxOffsetList=[],k=[];if("category"===f.type)l=f.getBandWidth();else{var M=0;i0(m,function(te){M=Math.max(M,te.getData().count())}),u=f.getExtent(),Math.abs(u[1]-u[0])}i0(m,function(te){var J=te.get("boxWidth");en(J)||(J=[J,J]),k.push([nr(J[0],l)||0,nr(J[1],l)||0])});var E=.8*l-2,V=E/v*.3,N=(E-V*(v-1))/v,G=N/2-E/2;i0(m,function(te,J){C.push(G),G+=V+N,x.push(Math.min(Math.max(N,k[J][0]),k[J][1]))})}(n),i0(o,function(a,u){!function(l,f,m){var v=l.coordinateSystem,x=l.getData(),C=m/2,k="horizontal"===l.get("layout")?0:1,M=1-k,E=["x","y"],V=x.mapDimension(E[k]),N=x.mapDimension(E[M],!0);if(!(null==V||N.length<5))for(var G=0;G<x.count();G++){var te=x.get(V,G),J=We(te,N[2],G),me=We(te,N[0],G),ge=We(te,N[1],G),pe=We(te,N[3],G),_e=We(te,N[4],G),Me=[];Ke(Me,ge,0),Ke(Me,pe,1),Me.push(me,ge,_e,pe),et(Me,me),et(Me,_e),et(Me,J),x.setItemLayout(G,{initBaseline:J[M],ends:Me})}function We(ut,lt,vt){var Mt,Pt=x.get(lt,vt),Ct=[];return Ct[k]=ut,Ct[M]=Pt,isNaN(ut)||isNaN(Pt)?Mt=[NaN,NaN]:(Mt=v.dataToPoint(Ct))[k]+=f,Mt}function Ke(ut,lt,vt){var Mt=lt.slice(),Pt=lt.slice();Mt[k]+=C,Pt[k]-=C,vt?ut.push(Mt,Pt):ut.push(Pt,Mt)}function et(ut,lt){var vt=lt.slice(),Mt=lt.slice();vt[k]-=C,Mt[k]+=C,ut.push(vt,Mt)}}(a,n.boxOffsetList[u],n.boxWidthList[u])}))})}),de(Ma.extend({type:"series.candlestick",dependencies:["xAxis","yAxis","grid"],defaultValueDimensions:[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],dimensions:null,defaultOption:{zlevel:0,z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,hoverAnimation:!0,layout:null,clip:!0,itemStyle:{color:"#c23531",color0:"#314656",borderWidth:1,borderColor:"#c23531",borderColor0:"#314656"},emphasis:{itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationUpdate:!1,animationEasing:"linear",animationDuration:300},getShadowDim:function(){return"open"},brushSelector:function(e,t,n){var o=t.getItemLayout(e);return o&&n.rect(o.brushRect)}}),Ou,!0);var ym=["itemStyle"],k2=["emphasis","itemStyle"],bx=["color","color0","borderColor","borderColor0"],JT=(Hs.extend({type:"candlestick",render:function(e,t,n){this.group.removeClipPath(),this._updateDrawMode(e),this._isLargeDraw?this._renderLarge(e):this._renderNormal(e)},incrementalPrepareRender:function(e,t,n){this._clear(),this._updateDrawMode(e)},incrementalRender:function(e,t,n,o){this._isLargeDraw?this._incrementalRenderLarge(e,t):this._incrementalRenderNormal(e,t)},_updateDrawMode:function(e){var t=e.pipelineContext.large;(null==this._isLargeDraw||t^this._isLargeDraw)&&(this._isLargeDraw=t,this._clear())},_renderNormal:function(e){var t=e.getData(),n=this._data,o=this.group,a=t.getLayout("isSimpleBox"),u=e.get("clip",!0),l=e.coordinateSystem,f=l.getArea&&l.getArea();this._data||o.removeAll(),t.diff(n).add(function(m){if(t.hasValue(m)){var v,x=t.getItemLayout(m);if(u&&oS(f,x))return;al(v=Ly(x,0,!0),{shape:{points:x.ends}},e,m),QT(v,t,m,a),o.add(v),t.setItemGraphicEl(m,v)}}).update(function(m,v){var x=n.getItemGraphicEl(v);if(t.hasValue(m)){var C=t.getItemLayout(m);u&&oS(f,C)?o.remove(x):(x?Po(x,{shape:{points:C.ends}},e,m):x=Ly(C),QT(x,t,m,a),o.add(x),t.setItemGraphicEl(m,x))}else o.remove(x)}).remove(function(m){var v=n.getItemGraphicEl(m);v&&o.remove(v)}).execute(),this._data=t},_renderLarge:function(e){this._clear(),xx(e,this.group);var t=e.get("clip",!0)?Fb(e.coordinateSystem,!1,e):null;t?this.group.setClipPath(t):this.group.removeClipPath()},_incrementalRenderNormal:function(e,t){for(var n,o=t.getData(),a=o.getLayout("isSimpleBox");null!=(n=e.next());){var u;QT(u=Ly(o.getItemLayout(n)),o,n,a),u.incremental=!0,this.group.add(u)}},_incrementalRenderLarge:function(e,t){xx(t,this.group,!0)},remove:function(e){this._clear()},_clear:function(){this.group.removeAll(),this._data=null},dispose:yn}),so.extend({type:"normalCandlestickBox",shape:{},buildPath:function(e,t){var n=t.points;this.__simpleBox?(e.moveTo(n[4][0],n[4][1]),e.lineTo(n[6][0],n[6][1])):(e.moveTo(n[0][0],n[0][1]),e.lineTo(n[1][0],n[1][1]),e.lineTo(n[2][0],n[2][1]),e.lineTo(n[3][0],n[3][1]),e.closePath(),e.moveTo(n[4][0],n[4][1]),e.lineTo(n[5][0],n[5][1]),e.moveTo(n[6][0],n[6][1]),e.lineTo(n[7][0],n[7][1]))}}));function Ly(e,t,n){var o=e.ends;return new JT({shape:{points:n?function(a,u){return Ge(a,function(l){return(l=l.slice())[1]=u.initBaseline,l})}(o,e):o},z2:100})}function oS(e,t){for(var n=!0,o=0;o<t.ends.length;o++)if(e.contain(t.ends[o][0],t.ends[o][1])){n=!1;break}return n}function QT(e,t,n,o){var a=t.getItemModel(n),u=a.getModel(ym),l=t.getItemVisual(n,"color"),f=t.getItemVisual(n,"borderColor")||l,m=u.getItemStyle(bx);e.useStyle(m),e.style.strokeNoScale=!0,e.style.fill=l,e.style.stroke=f,e.__simpleBox=o,Go(e,a.getModel(k2).getItemStyle())}var T2=so.extend({type:"largeCandlestickBox",shape:{},buildPath:function(e,t){for(var n=t.points,o=0;o<n.length;)if(this.__sign===n[o++]){var a=n[o++];e.moveTo(a,n[o++]),e.lineTo(a,n[o++])}else o+=3}});function xx(e,t,n){var o=e.getData(),a=o.getLayout("largePoints"),u=new T2({shape:{points:a},__sign:1});t.add(u);var l=new T2({shape:{points:a},__sign:-1});t.add(l),M2(1,u,e,o),M2(-1,l,e,o),n&&(u.incremental=!0,l.incremental=!0)}function M2(e,t,n,o){var a=0<e?"P":"N",u=o.getVisual("borderColor"+a)||o.getVisual("color"+a),l=n.getModel(ym).getItemStyle(bx);t.useStyle(l),t.style.fill=null,t.style.stroke=u}var g_=["itemStyle","borderColor"],By=["itemStyle","borderColor0"],m_=["itemStyle","color"],iS=["itemStyle","color0"],ok={seriesType:"candlestick",plan:po(),performRawSeries:!0,reset:function(e,t){if(e.getData().setVisual({legendSymbol:"roundRect",colorP:n(1,e),colorN:n(-1,e),borderColorP:o(1,e),borderColorN:o(-1,e)}),!t.isSeriesFiltered(e))return!e.pipelineContext.large&&{progress:function(a,u){for(var l;null!=(l=a.next());){var f=u.getItemModel(l),m=u.getItemLayout(l).sign;u.setItemVisual(l,{color:n(m,f),borderColor:o(m,f)})}}};function n(a,u){return u.get(0<a?m_:iS)}function o(a,u){return u.get(0<a?g_:By)}}},a0="undefined"!=typeof Float32Array?Float32Array:Array,ik={seriesType:"candlestick",plan:po(),reset:function(e){var C,k,M,E,V,N,G,te,t=e.coordinateSystem,n=e.getData(),o=(k=n,V="category"===(E=(C=e).getBaseAxis()).type?E.getBandWidth():(M=E.getExtent(),Math.abs(M[1]-M[0])/k.count()),N=nr(Or(C.get("barMaxWidth"),V),V),G=nr(Or(C.get("barMinWidth"),1),V),null!=(te=C.get("barWidth"))?nr(te,V):Math.max(Math.min(V/2,N),G)),a=["x","y"],u=n.mapDimension(a[0]),l=n.mapDimension(a[1],!0),f=l[0],m=l[1],v=l[2],x=l[3];if(n.setLayout({candleWidth:o,isSimpleBox:o<=1.3}),!(null==u||l.length<4))return{progress:e.pipelineContext.large?function(C,k){for(var M,E,V=new a0(4*C.count),N=0,G=[],te=[];null!=(E=C.next());){var J=k.get(u,E),me=k.get(f,E),ge=k.get(m,E),pe=k.get(v,E),_e=k.get(x,E);isNaN(J)||isNaN(pe)||isNaN(_e)?(V[N++]=NaN,N+=3):(V[N++]=ak(k,E,me,ge,m),G[0]=J,G[1]=pe,M=t.dataToPoint(G,null,te),V[N++]=M?M[0]:NaN,V[N++]=M?M[1]:NaN,G[1]=_e,M=t.dataToPoint(G,null,te),V[N++]=M?M[1]:NaN)}k.setLayout("largePoints",V)}:function(C,k){for(var M;null!=(M=C.next());){var E=k.get(u,M),V=k.get(f,M),N=k.get(m,M),G=k.get(v,M),te=k.get(x,M),J=Math.min(V,N),me=Math.max(V,N),ge=Ke(J,E),pe=Ke(me,E),_e=Ke(G,E),Me=Ke(te,E),We=[];et(We,pe,0),et(We,ge,1),We.push(lt(Me),lt(pe),lt(_e),lt(ge)),k.setItemLayout(M,{sign:ak(k,M,V,N,m),initBaseline:N<V?pe[1]:ge[1],ends:We,brushRect:(vt=G,Mt=te,Pt=E,Ct=void 0,Zt=void 0,Ct=Ke(vt,Pt),Zt=Ke(Mt,Pt),Ct[0]-=o/2,Zt[0]-=o/2,{x:Ct[0],y:Ct[1],width:o,height:Zt[1]-Ct[1]})})}var vt,Mt,Pt,Ct,Zt;function Ke(vt,Mt){var Pt=[];return Pt[0]=Mt,Pt[1]=vt,isNaN(Mt)||isNaN(vt)?[NaN,NaN]:t.dataToPoint(Pt)}function et(vt,Mt,Pt){var Ct=Mt.slice(),Zt=Mt.slice();Ct[0]=Ig(Ct[0]+o/2,1,!1),Zt[0]=Ig(Zt[0]-o/2,1,!0),Pt?vt.push(Ct,Zt):vt.push(Zt,Ct)}function lt(vt){return vt[0]=Ig(vt[0],1),vt}}}}};function ak(e,t,n,o,a){return o<n?-1:n<o?1:0<t?e.get(a,t-1)<=o?1:-1:1}function aS(e,t){var n=t.rippleEffectColor||t.color;e.eachChild(function(o){o.attr({z:t.z,zlevel:t.zlevel,style:{stroke:"stroke"===t.brushType?n:null,fill:"fill"===t.brushType?n:null}})})}function Gs(e,t){mr.call(this);var n=new mp(e,t),o=new mr;this.add(n),this.add(o),o.beforeUpdate=function(){this.attr(n.getScale())},this.updateData(e,t)}da(function(e){e&&en(e.series)&&le(e.series,function(t){ln(t)&&"k"===t.type&&(t.type="candlestick")})}),Gi(ok),fa(ik),Ma.extend({type:"series.effectScatter",dependencies:["grid","polar"],getInitialData:function(e,t){return Pv(this.getSource(),this,{useEncodeDefaulter:!0})},brushSelector:"point",defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",rippleEffect:{period:4,scale:2.5,brushType:"fill"},symbolSize:10}});var zy=Gs.prototype;zy.stopEffectAnimation=function(){this.childAt(1).removeAll()},zy.startEffectAnimation=function(e){for(var t=e.symbolType,n=e.color,o=this.childAt(1),a=0;a<3;a++){var u=$d(t,-1,-1,2,2,n);u.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scale:[.5,.5]});var l=-a/3*e.period+e.effectOffset;u.animate("",!0).when(e.period,{scale:[e.rippleScale/2,e.rippleScale/2]}).delay(l).start(),u.animateStyle(!0).when(e.period,{opacity:0}).delay(l).start(),o.add(u)}aS(o,e)},zy.updateEffectAnimation=function(e){for(var t=this._effectCfg,n=this.childAt(1),o=["symbolType","period","rippleScale"],a=0;a<o.length;a++){var u=o[a];if(t[u]!==e[u])return this.stopEffectAnimation(),void this.startEffectAnimation(e)}aS(n,e)},zy.highlight=function(){this.trigger("emphasis")},zy.downplay=function(){this.trigger("normal")},zy.updateData=function(e,t){var n=e.hostModel;this.childAt(0).updateData(e,t);var V,o=this.childAt(1),a=e.getItemModel(t),u=e.getItemVisual(t,"symbol"),l=(en(V=e.getItemVisual(t,"symbolSize"))||(V=[+V,+V]),V),f=e.getItemVisual(t,"color");o.attr("scale",l),o.traverse(function(V){V.attr({fill:f})});var m=a.getShallow("symbolOffset");if(m){var v=o.position;v[0]=nr(m[0],l[0]),v[1]=nr(m[1],l[1])}var x=e.getItemVisual(t,"symbolRotate");o.rotation=(x||0)*Math.PI/180||0;var C={};if(C.showEffectOn=n.get("showEffectOn"),C.rippleScale=a.get("rippleEffect.scale"),C.brushType=a.get("rippleEffect.brushType"),C.period=1e3*a.get("rippleEffect.period"),C.effectOffset=t/e.count(),C.z=a.getShallow("z")||0,C.zlevel=a.getShallow("zlevel")||0,C.symbolType=u,C.color=f,C.rippleEffectColor=a.get("rippleEffect.color"),this.off("mouseover").off("mouseout").off("emphasis").off("normal"),"render"===C.showEffectOn)this._effectCfg?this.updateEffectAnimation(C):this.startEffectAnimation(C),this._effectCfg=C;else{this._effectCfg=null,this.stopEffectAnimation();var k=this.childAt(0),M=function(){k.highlight(),"render"!==C.showEffectOn&&this.startEffectAnimation(C)},E=function(){k.downplay(),"render"!==C.showEffectOn&&this.stopEffectAnimation()};this.on("mouseover",M,this).on("mouseout",E,this).on("emphasis",M,this).on("normal",E,this)}this._effectCfg=C},zy.fadeOut=function(e){this.off("mouseover").off("mouseout").off("emphasis").off("normal"),e&&e()},Ie(Gs,mr),gu({type:"effectScatter",init:function(){this._symbolDraw=new ny(Gs)},render:function(e,t,n){var o=e.getData(),a=this._symbolDraw;a.updateData(o),this.group.add(a.group)},updateTransform:function(e,t,n){var o=e.getData();this.group.dirty();var a=sg().reset(e);a.progress&&a.progress({start:0,end:o.count()},o),this._symbolDraw.updateLayout(o)},_updateGroupTransform:function(e){var t=e.coordinateSystem;t&&t.getRoamTransform&&(this.group.transform=Zc(t.getRoamTransform()),this.group.decomposeTransform())},remove:function(e,t){this._symbolDraw&&this._symbolDraw.remove(t)},dispose:function(){}}),Gi(zv("effectScatter","circle")),fa(sg("effectScatter"));var sk="undefined"==typeof Uint32Array?Array:Uint32Array,sS="undefined"==typeof Float64Array?Array:Float64Array;function uS(e){var t=e.data;t&&t[0]&&t[0][0]&&t[0][0].coord&&(e.data=Ge(t,function(n){var o={coords:[n[0].coord,n[1].coord]};return n[0].name&&(o.fromName=n[0].name),n[1].name&&(o.toName=n[1].name),Ae([o,n[0],n[1]])}))}var eM=Ma.extend({type:"series.lines",dependencies:["grid","polar"],visualColorAccessPath:"lineStyle.color",init:function(e){e.data=e.data||[],uS(e);var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count)),eM.superApply(this,"init",arguments)},mergeOption:function(e){if(uS(e),e.data){var t=this._processFlatCoordsArray(e.data);this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset,t.flatCoords&&(e.data=new Float32Array(t.count))}eM.superApply(this,"mergeOption",arguments)},appendData:function(e){var t=this._processFlatCoordsArray(e.data);t.flatCoords&&(this._flatCoords?(this._flatCoords=jt(this._flatCoords,t.flatCoords),this._flatCoordsOffset=jt(this._flatCoordsOffset,t.flatCoordsOffset)):(this._flatCoords=t.flatCoords,this._flatCoordsOffset=t.flatCoordsOffset),e.data=new Float32Array(t.count)),this.getRawData().appendData(e.data)},_getCoordsFromItemModel:function(e){var t=this.getData().getItemModel(e);return t.option instanceof Array?t.option:t.getShallow("coords")},getLineCoordsCount:function(e){return this._flatCoordsOffset?this._flatCoordsOffset[2*e+1]:this._getCoordsFromItemModel(e).length},getLineCoords:function(e,t){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*e],o=this._flatCoordsOffset[2*e+1],a=0;a<o;a++)t[a]=t[a]||[],t[a][0]=this._flatCoords[n+2*a],t[a][1]=this._flatCoords[n+2*a+1];return o}var u=this._getCoordsFromItemModel(e);for(a=0;a<u.length;a++)t[a]=t[a]||[],t[a][0]=u[a][0],t[a][1]=u[a][1];return u.length},_processFlatCoordsArray:function(e){var t=0;if(this._flatCoords&&(t=this._flatCoords.length),"number"!=typeof e[0])return{flatCoordsOffset:null,flatCoords:null,count:e.length};for(var n=e.length,o=new sk(n),a=new sS(n),u=0,l=0,f=0,m=0;m<n;){f++;var v=e[m++];o[l++]=u+t,o[l++]=v;for(var x=0;x<v;x++){var C=e[m++],k=e[m++];a[u++]=C,a[u++]=k}}return{flatCoordsOffset:new Uint32Array(o.buffer,0,l),flatCoords:a,count:f}},getInitialData:function(e,t){var n=new Uu(["value"],this);return n.hasItemOption=!1,n.initData(e.data,[],function(o,a,u,l){if(o instanceof Array)return NaN;n.hasItemOption=!0;var f=o.value;return null!=f?f instanceof Array?f[l]:f:void 0}),n},formatTooltip:function(e){var t=this.getData().getItemModel(e),n=t.get("name");if(n)return n;var o=t.get("fromName"),a=t.get("toName"),u=[];return null!=o&&u.push(o),null!=a&&u.push(a),Pa(u.join(" > "))},preventIncremental:function(){return!!this.get("effect.show")},getProgressive:function(){var e=this.option.progressive;return null==e?this.option.large?1e4:this.get("progressive"):e},getProgressiveThreshold:function(){var e=this.option.progressiveThreshold;return null==e?this.option.large?2e4:this.get("progressiveThreshold"):e},defaultOption:{coordinateSystem:"geo",zlevel:0,z:2,legendHoverLink:!0,hoverAnimation:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}}});function _x(e,t,n){mr.call(this),this.add(this.createLine(e,t,n)),this._updateEffectSymbol(e,t)}var Ap=_x.prototype;function i(e,t,n){mr.call(this),this._createPolyline(e,t,n)}Ap.createLine=function(e,t,n){return new a_(e,t,n)},Ap._updateEffectSymbol=function(e,t){var n=e.getItemModel(t).getModel("effect"),o=n.get("symbolSize"),a=n.get("symbol");en(o)||(o=[o,o]);var u=n.get("color")||e.getItemVisual(t,"color"),l=this.childAt(1);this._symbolType!==a&&(this.remove(l),(l=$d(a,-.5,-.5,1,1,u)).z2=100,l.culling=!0,this.add(l)),l&&(l.setStyle("shadowColor",u),l.setStyle(n.getItemStyle(["color"])),l.attr("scale",o),l.setColor(u),l.attr("scale",o),this._symbolType=a,this._symbolScale=o,this._updateEffectAnimation(e,n,t))},Ap._updateEffectAnimation=function(e,t,n){var o=this.childAt(1);if(o){var a=this,u=e.getItemLayout(n),l=1e3*t.get("period"),f=t.get("loop"),m=t.get("constantSpeed"),v=Gr(t.get("delay"),function(M){return M/e.count()*l/3}),x="function"==typeof v;if(o.ignore=!0,this.updateAnimationPoints(o,u),0<m&&(l=this.getLineLength(o)/m*1e3),l!==this._period||f!==this._loop){o.stopAnimation();var C=v;x&&(C=v(n)),0<o.__t&&(C=-l*o.__t),o.__t=0;var k=o.animate("",f).when(l,{__t:1}).delay(C).during(function(){a.updateSymbolPosition(o)});f||k.done(function(){a.remove(o)}),k.start()}this._period=l,this._loop=f}},Ap.getLineLength=function(e){return os(e.__p1,e.__cp1)+os(e.__cp1,e.__p2)},Ap.updateAnimationPoints=function(e,t){e.__p1=t[0],e.__p2=t[1],e.__cp1=t[2]||[(t[0][0]+t[1][0])/2,(t[0][1]+t[1][1])/2]},Ap.updateData=function(e,t,n){this.childAt(0).updateData(e,t,n),this._updateEffectSymbol(e,t)},Ap.updateSymbolPosition=function(e){var t=e.__p1,n=e.__p2,o=e.__cp1,a=e.__t,u=e.position,l=[u[0],u[1]],f=na,m=Lh;u[0]=f(t[0],o[0],n[0],a),u[1]=f(t[1],o[1],n[1],a);var v=m(t[0],o[0],n[0],a),x=m(t[1],o[1],n[1],a);if(e.rotation=-Math.atan2(x,v)-Math.PI/2,"line"===this._symbolType||"rect"===this._symbolType||"roundRect"===this._symbolType)if(void 0!==e.__lastT&&e.__lastT<e.__t){var C=1.05*os(l,u);e.attr("scale",[e.scale[0],C]),1===a&&(u[0]=l[0]+(u[0]-l[0])/2,u[1]=l[1]+(u[1]-l[1])/2)}else 1===e.__lastT?(C=2*os(t,u),e.attr("scale",[e.scale[0],C])):e.attr("scale",this._symbolScale);e.__lastT=e.__t,e.ignore=!1},Ap.updateLayout=function(e,t){this.childAt(0).updateLayout(e,t);var n=e.getItemModel(t).getModel("effect");this._updateEffectAnimation(e,n,t)},Ie(_x,mr);var c=i.prototype;function h(e,t,n){_x.call(this,e,t,n),this._lastFrame=0,this._lastFramePercent=0}c._createPolyline=function(e,t,n){var o=e.getItemLayout(t),a=new Zo({shape:{points:o}});this.add(a),this._updateCommonStl(e,t,n)},c.updateData=function(e,t,n){var o=e.hostModel;Po(this.childAt(0),{shape:{points:e.getItemLayout(t)}},o,t),this._updateCommonStl(e,t,n)},c._updateCommonStl=function(e,t,n){var o=this.childAt(0),a=e.getItemModel(t),u=e.getItemVisual(t,"color"),l=n&&n.lineStyle,f=n&&n.hoverLineStyle;n&&!e.hasItemOption||(l=a.getModel("lineStyle").getLineStyle(),f=a.getModel("emphasis.lineStyle").getLineStyle()),o.useStyle(Ee({strokeNoScale:!0,fill:"none",stroke:u},l)),o.hoverStyle=f,Go(this)},c.updateLayout=function(e,t){this.childAt(0).setShape("points",e.getItemLayout(t))},Ie(i,mr);var y=h.prototype;y.createLine=function(e,t,n){return new i(e,t,n)},y.updateAnimationPoints=function(e,t){this._points=t;for(var n=[0],o=0,a=1;a<t.length;a++)o+=os(t[a-1],t[a]),n.push(o);if(0!==o){for(a=0;a<n.length;a++)n[a]/=o;this._offsets=n,this._length=o}},y.getLineLength=function(e){return this._length},y.updateSymbolPosition=function(e){var t=e.__t,n=this._points,o=this._offsets,a=n.length;if(o){var u=this._lastFrame;if(t<this._lastFramePercent){for(l=Math.min(u+1,a-1);0<=l&&!(o[l]<=t);l--);l=Math.min(l,a-2)}else{for(var l=u;l<a&&!(o[l]>t);l++);l=Math.min(l-1,a-2)}ki(e.position,n[l],n[l+1],(t-o[l])/(o[l+1]-o[l])),e.rotation=-Math.atan2(n[l+1][1]-n[l][1],n[l+1][0]-n[l][0])-Math.PI/2,this._lastFrame=l,this._lastFramePercent=t,e.ignore=!1}},Ie(h,_x);var w=Tc({shape:{polyline:!1,curveness:0,segs:[]},buildPath:function(e,t){var n=t.segs,o=t.curveness;if(t.polyline)for(var a=0;a<n.length;){var u=n[a++];if(0<u){e.moveTo(n[a++],n[a++]);for(var l=1;l<u;l++)e.lineTo(n[a++],n[a++])}}else for(a=0;a<n.length;){var f=n[a++],m=n[a++],v=n[a++],x=n[a++];e.moveTo(f,m),0<o?e.quadraticCurveTo((f+v)/2-(m-x)*o,(m+x)/2-(v-f)*o,v,x):e.lineTo(v,x)}},findDataIndex:function(e,t){var n=this.shape,o=n.segs,a=n.curveness;if(n.polyline)for(var u=0,l=0;l<o.length;){var f=o[l++];if(0<f)for(var m=o[l++],v=o[l++],x=1;x<f;x++)if(kl(m,v,C=o[l++],k=o[l++]))return u;u++}else for(u=0,l=0;l<o.length;){m=o[l++],v=o[l++];var C=o[l++],k=o[l++];if(0<a){if(tb(m,v,(m+C)/2-(v-k)*a,(v+k)/2-(C-m)*a,C,k))return u}else if(kl(m,v,C,k))return u;u++}return-1}});function D(){this.group=new mr}var O=D.prototype;O.isPersistent=function(){return!this._incremental},O.updateData=function(e){this.group.removeAll();var t=new w({rectHover:!0,cursor:"default"});t.setShape({segs:e.getLayout("linesPoints")}),this._setCommon(t,e),this.group.add(t),this._incremental=null},O.incrementalPrepareUpdate=function(e){this.group.removeAll(),this._clearIncremental(),5e5<e.count()?(this._incremental||(this._incremental=new Al({silent:!0})),this.group.add(this._incremental)):this._incremental=null},O.incrementalUpdate=function(e,t){var n=new w;n.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(n,t,!!this._incremental),this._incremental?this._incremental.addDisplayable(n,!0):(n.rectHover=!0,n.cursor="default",n.__startIndex=e.start,this.group.add(n))},O.remove=function(){this._clearIncremental(),this._incremental=null,this.group.removeAll()},O._setCommon=function(e,t,n){var o=t.hostModel;e.setShape({polyline:o.get("polyline"),curveness:o.get("lineStyle.curveness")}),e.useStyle(o.getModel("lineStyle").getLineStyle()),e.style.strokeNoScale=!0;var a=t.getVisual("color");a&&e.setStyle("stroke",a),e.setStyle("fill"),n||(e.seriesIndex=o.seriesIndex,e.on("mousemove",function(u){e.dataIndex=null;var l=e.findDataIndex(u.offsetX,u.offsetY);0<l&&(e.dataIndex=l+e.__startIndex)}))},O._clearIncremental=function(){var e=this._incremental;e&&e.clearDisplaybles()};var P={seriesType:"lines",plan:po(),reset:function(e){var t=e.coordinateSystem,n=e.get("polyline"),o=e.pipelineContext.large;return{progress:function(a,u){var l=[];if(o){var f,m=a.end-a.start;if(n){for(var v=0,x=a.start;x<a.end;x++)v+=e.getLineCoordsCount(x);f=new Float32Array(m+2*v)}else f=new Float32Array(4*m);var C=0,k=[];for(x=a.start;x<a.end;x++){var M=e.getLineCoords(x,l);n&&(f[C++]=M);for(var E=0;E<M;E++)k=t.dataToPoint(l[E],!1,k),f[C++]=k[0],f[C++]=k[1]}u.setLayout("linesPoints",f)}else for(x=a.start;x<a.end;x++){var V=u.getItemModel(x),N=(M=e.getLineCoords(x,l),[]);if(n)for(var G=0;G<M;G++)N.push(t.dataToPoint(l[G]));else{N[0]=t.dataToPoint(l[0]),N[1]=t.dataToPoint(l[1]);var te=V.get("lineStyle.curveness");+te&&(N[2]=[(N[0][0]+N[1][0])/2-(N[0][1]-N[1][1])*te,(N[0][1]+N[1][1])/2-(N[1][0]-N[0][0])*te])}u.setItemLayout(x,N)}}}}};function B(e){return e instanceof Array||(e=[e,e]),e}gu({type:"lines",init:function(){},render:function(e,t,n){var o=e.getData(),a=this._updateLineDraw(o,e),u=e.get("zlevel"),l=e.get("effect.trailLength"),f=n.getZr(),m="svg"===f.painter.getType();m||f.painter.getLayer(u).clear(!0),null==this._lastZlevel||m||f.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(e)&&l&&(m||f.configLayer(u,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(l/10+.9,1),0)})),a.updateData(o);var v=e.get("clip",!0)&&Fb(e.coordinateSystem,!1,e);v?this.group.setClipPath(v):this.group.removeClipPath(),this._lastZlevel=u,this._finished=!0},incrementalPrepareRender:function(e,t,n){var o=e.getData();this._updateLineDraw(o,e).incrementalPrepareUpdate(o),this._clearLayer(n),this._finished=!1},incrementalRender:function(e,t,n){this._lineDraw.incrementalUpdate(e,t.getData()),this._finished=e.end===t.getData().count()},updateTransform:function(e,t,n){var o=e.getData(),a=e.pipelineContext;if(!this._finished||a.large||a.progressiveRender)return{update:!0};var u=P.reset(e);u.progress&&u.progress({start:0,end:o.count()},o),this._lineDraw.updateLayout(),this._clearLayer(n)},_updateLineDraw:function(e,t){var n=this._lineDraw,o=this._showEffect(t),a=!!t.get("polyline"),u=t.pipelineContext.large;return n&&o===this._hasEffet&&a===this._isPolyline&&u===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=u?new D:new pm(a?o?h:i:o?_x:a_),this._hasEffet=o,this._isPolyline=a,this._isLargeDraw=u,this.group.removeAll()),this.group.add(n.group),n},_showEffect:function(e){return!!e.get("effect.show")},_clearLayer:function(e){var t=e.getZr();"svg"===t.painter.getType()||null==this._lastZlevel||t.painter.getLayer(this._lastZlevel).clear(!0)},remove:function(e,t){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(t)},dispose:function(){}});var L="lineStyle.opacity".split("."),K={seriesType:"lines",reset:function(e,t,n){var o=B(e.get("symbol")),a=B(e.get("symbolSize")),u=e.getData();return u.setVisual("fromSymbol",o&&o[0]),u.setVisual("toSymbol",o&&o[1]),u.setVisual("fromSymbolSize",a&&a[0]),u.setVisual("toSymbolSize",a&&a[1]),u.setVisual("opacity",e.get(L)),{dataEach:u.hasItemOption?function(l,f){var m=l.getItemModel(f),v=B(m.getShallow("symbol",!0)),x=B(m.getShallow("symbolSize",!0)),C=m.get(L);v[0]&&l.setItemVisual(f,"fromSymbol",v[0]),v[1]&&l.setItemVisual(f,"toSymbol",v[1]),x[0]&&l.setItemVisual(f,"fromSymbolSize",x[0]),x[1]&&l.setItemVisual(f,"toSymbolSize",x[1]),l.setItemVisual(f,"opacity",C)}:null}}};function q(){var e=nt();this.canvas=e,this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={}}fa(P),Gi(K),Ma.extend({type:"series.heatmap",getInitialData:function(e,t){return Pv(this.getSource(),this,{generateCoord:"value"})},preventIncremental:function(){var e=lu.get(this.get("coordinateSystem"));if(e&&e.dimensions)return"lng"===e.dimensions[0]&&"lat"===e.dimensions[1]},defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0}}),q.prototype={update:function(e,t,n,o,a,u){var l=this._getBrush(),f=this._getGradient(e,a,"inRange"),m=this._getGradient(e,a,"outOfRange"),v=this.pointSize+this.blurSize,x=this.canvas,C=x.getContext("2d"),k=e.length;x.width=t,x.height=n;for(var M=0;M<k;++M){var E=e[M],V=E[0],N=E[1],G=o(E[2]);C.globalAlpha=G,C.drawImage(l,V-v,N-v)}if(!x.width||!x.height)return x;for(var te=C.getImageData(0,0,x.width,x.height),J=te.data,me=0,ge=J.length,pe=this.minOpacity,_e=this.maxOpacity-pe;me<ge;){G=J[me+3]/256;var Me=4*Math.floor(255*G);if(0<G){var We=u(G)?f:m;0<G&&(G=G*_e+pe),J[me++]=We[Me],J[me++]=We[1+Me],J[me++]=We[2+Me],J[me++]=We[3+Me]*G*256}else me+=4}return C.putImageData(te,0,0),x},_getBrush:function(){var e=this._brushCanvas||(this._brushCanvas=nt()),t=this.pointSize+this.blurSize,n=2*t;e.width=n,e.height=n;var o=e.getContext("2d");return o.clearRect(0,0,n,n),o.shadowOffsetX=n,o.shadowBlur=this.blurSize,o.shadowColor="#000",o.beginPath(),o.arc(-t,t,this.pointSize,0,2*Math.PI,!0),o.closePath(),o.fill(),e},_getGradient:function(e,t,n){for(var o=this._gradientPixels,a=o[n]||(o[n]=new Uint8ClampedArray(1024)),u=[0,0,0,0],l=0,f=0;f<256;f++)t[n](f/255,!0,u),a[l++]=u[0],a[l++]=u[1],a[l++]=u[2],a[l++]=u[3];return a}},gu({type:"heatmap",render:function(e,t,n){var o;t.eachComponent("visualMap",function(u){u.eachTargetSeries(function(l){l===e&&(o=u)})}),this.group.removeAll(),this._incrementalDisplayable=null;var a=e.coordinateSystem;"cartesian2d"===a.type||"calendar"===a.type?this._renderOnCartesianAndCalendar(e,n,0,e.getData().count()):function(u){var l=u.dimensions;return"lng"===l[0]&&"lat"===l[1]}(a)&&this._renderOnGeo(a,e,o,n)},incrementalPrepareRender:function(e,t,n){this.group.removeAll()},incrementalRender:function(e,t,n,o){t.coordinateSystem&&this._renderOnCartesianAndCalendar(t,o,e.start,e.end,!0)},_renderOnCartesianAndCalendar:function(e,t,n,o,a){var u,l,f=e.coordinateSystem;if("cartesian2d"===f.type){var m=f.getAxis("x"),v=f.getAxis("y");u=m.getBandWidth(),l=v.getBandWidth()}for(var x=this.group,C=e.getData(),k="emphasis.itemStyle",M="emphasis.label",E=e.getModel("itemStyle").getItemStyle(["color"]),V=e.getModel(k).getItemStyle(),N=e.getModel("label"),G=e.getModel(M),te=f.type,J="cartesian2d"===te?[C.mapDimension("x"),C.mapDimension("y"),C.mapDimension("value")]:[C.mapDimension("time"),C.mapDimension("value")],me=n;me<o;me++){var ge;if("cartesian2d"===te){if(isNaN(C.get(J[2],me)))continue;var pe=f.dataToPoint([C.get(J[0],me),C.get(J[1],me)]);ge=new fi({shape:{x:Math.floor(Math.round(pe[0])-u/2),y:Math.floor(Math.round(pe[1])-l/2),width:Math.ceil(u),height:Math.ceil(l)},style:{fill:C.getItemVisual(me,"color"),opacity:C.getItemVisual(me,"opacity")}})}else{if(isNaN(C.get(J[1],me)))continue;ge=new fi({z2:1,shape:f.dataToRect([C.get(J[0],me)]).contentShape,style:{fill:C.getItemVisual(me,"color"),opacity:C.getItemVisual(me,"opacity")}})}var _e=C.getItemModel(me);C.hasItemOption&&(E=_e.getModel("itemStyle").getItemStyle(["color"]),V=_e.getModel(k).getItemStyle(),N=_e.getModel("label"),G=_e.getModel(M));var Me=e.getRawValue(me),We="-";Me&&null!=Me[2]&&(We=Me[2]),Ln(E,V,N,G,{labelFetcher:e,labelDataIndex:me,defaultText:We,isRectText:!0}),ge.setStyle(E),Go(ge,C.hasItemOption?V:Ne({},V)),(ge.incremental=a)&&(ge.useHoverLayer=!0),x.add(ge),C.setItemGraphicEl(me,ge)}},_renderOnGeo:function(e,t,n,o){var a=n.targetVisuals.inRange,u=n.targetVisuals.outOfRange,l=t.getData(),f=this._hmLayer||this._hmLayer||new q;f.blurSize=t.get("blurSize"),f.pointSize=t.get("pointSize"),f.minOpacity=t.get("minOpacity"),f.maxOpacity=t.get("maxOpacity");var m=e.getViewRect().clone(),v=e.getRoamTransform();m.applyTransform(v);var ge,pe,_e,x=Math.max(m.x,0),C=Math.max(m.y,0),k=Math.min(m.width+m.x,o.getWidth()),M=Math.min(m.height+m.y,o.getHeight()),E=k-x,V=M-C,N=[l.mapDimension("lng"),l.mapDimension("lat"),l.mapDimension("value")],G=l.mapArray(N,function(ge,pe,_e){var Me=e.dataToPoint([ge,pe]);return Me[0]-=x,Me[1]-=C,Me.push(_e),Me}),te=n.getExtent(),J="visualMap.continuous"===n.type?(pe=[((pe=n.option.range)[0]-(ge=te)[0])/(_e=ge[1]-ge[0]),(pe[1]-ge[0])/_e],function(Me){return Me>=pe[0]&&Me<=pe[1]}):function(ge,pe,_e){var Me=ge[1]-ge[0],We=(pe=Ge(pe,function(et){return{interval:[(et.interval[0]-ge[0])/Me,(et.interval[1]-ge[0])/Me]}})).length,Ke=0;return function(et){for(var ut=Ke;ut<We;ut++)if((lt=pe[ut].interval)[0]<=et&&et<=lt[1]){Ke=ut;break}if(ut===We)for(ut=Ke-1;0<=ut;ut--){var lt;if((lt=pe[ut].interval)[0]<=et&&et<=lt[1]){Ke=ut;break}}return 0<=ut&&ut<We&&_e[ut]}}(te,n.getPieceList(),n.option.selected);f.update(G,E,V,a.color.getNormalizer(),{inRange:a.color.getColorMapper(),outOfRange:u.color.getColorMapper()},J);var me=new xi({style:{width:E,height:V,x,y:C,image:f.canvas},silent:!0});this.group.add(me)},dispose:function(){}});var re=hC.extend({type:"series.pictorialBar",dependencies:["grid"],defaultOption:{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",progressive:0,hoverAnimation:!1},getInitialData:function(e){return e.stack=null,re.superApply(this,"getInitialData",arguments)}}),fe=["itemStyle","borderWidth"],ve=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],be=new ku;function Ce(e,t,n,o){var E,V,G,J,me,ge,pe,_e,Me,We,Ke,et,a=e.getItemLayout(t),u=n.get("symbolRepeat"),l=n.get("symbolClip"),f=n.get("symbolPosition")||"start",m=(n.get("symbolRotate")||0)*Math.PI/180||0,v=n.get("symbolPatternSize")||2,x=n.isAnimationEnabled(),C={dataIndex:t,layout:a,itemModel:n,symbolType:e.getItemVisual(t,"symbol")||"circle",color:e.getItemVisual(t,"color"),symbolClip:l,symbolRepeat:u,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:v,rotation:m,animationModel:x?n:null,hoverAnimation:x&&n.get("hoverAnimation"),z2:n.getShallow("z",!0)||0};(function(E,V,N,G,te){var J,me=G.valueDim,ge=E.get("symbolBoundingData"),pe=G.coordSys.getOtherAxis(G.coordSys.getBaseAxis()),_e=pe.toGlobalCoord(pe.dataToCoord(0)),Me=1-+(N[me.wh]<=0);if(en(ge)){var We=[Se(pe,ge[0])-_e,Se(pe,ge[1])-_e];We[1]<We[0]&&We.reverse(),J=We[Me]}else J=null!=ge?Se(pe,ge)-_e:V?G.coordSysExtent[me.index][Me]-_e:N[me.wh];te.boundingLength=J,V&&(te.repeatCutLength=N[me.wh]),te.pxSign=0<J?1:J<0?-1:0})(n,u,a,o,C),E=e,V=t,G=u,J=C.boundingLength,me=C.pxSign,ge=v,_e=C,Me=(pe=o).valueDim,We=pe.categoryDim,Ke=Math.abs(a[We.wh]),(et=en(et=E.getItemVisual(V,"symbolSize"))?et.slice():(null==et&&(et="100%"),[et,et]))[We.index]=nr(et[We.index],Ke),et[Me.index]=nr(et[Me.index],G?Ke:Math.abs(J)),_e.symbolSize=et,(_e.symbolScale=[et[0]/ge,et[1]/ge])[Me.index]*=(pe.isHorizontal?-1:1)*me,function(E,V,N,G,te){var J=E.get(fe)||0;J&&(be.attr({scale:V.slice(),rotation:N}),be.updateTransform(),J/=be.getLineScale(),J*=V[G.valueDim.index]),te.valueLineWidth=J}(n,C.symbolScale,m,o,C);var k=C.symbolSize,M=n.get("symbolOffset");return en(M)&&(M=[nr(M[0],k[0]),nr(M[1],k[1])]),function(E,V,N,G,te,J,me,ge,pe,_e,Me,We){var Ke=Me.categoryDim,et=Me.valueDim,ut=We.pxSign,lt=Math.max(V[et.index]+ge,0),vt=lt;if(G){var Mt=Math.abs(pe),Pt=Gr(E.get("symbolMargin"),"15%")+"",Ct=!1;Pt.lastIndexOf("!")===Pt.length-1&&(Ct=!0,Pt=Pt.slice(0,Pt.length-1)),Pt=nr(Pt,V[et.index]);var Zt=Math.max(lt+2*Pt,0),An=Ct?0:2*Pt,Rn=Lg(G),Cn=Rn?G:Nn((Mt+An)/Zt);Zt=lt+2*(Pt=(Mt-Cn*lt)/2/(Ct?Cn:Cn-1)),An=Ct?0:2*Pt,Rn||"fixed"===G||(Cn=_e?Nn((Math.abs(_e)+An)/Zt):0),vt=Cn*Zt-An,We.repeatTimes=Cn,We.symbolMargin=Pt}var Jn=ut*(vt/2),dr=We.pathPosition=[];dr[Ke.index]=N[Ke.wh]/2,dr[et.index]="start"===me?Jn:"end"===me?pe-Jn:pe/2,J&&(dr[0]+=J[0],dr[1]+=J[1]);var $r=We.bundlePosition=[];$r[Ke.index]=N[Ke.xy],$r[et.index]=N[et.xy];var zn=We.barRectShape=Ne({},N);zn[et.wh]=ut*Math.max(Math.abs(N[et.wh]),Math.abs(dr[et.index]+Jn)),zn[Ke.wh]=N[Ke.wh];var Ur=We.clipShape={};Ur[Ke.xy]=-N[Ke.xy],Ur[Ke.wh]=Me.ecSize[Ke.wh],Ur[et.xy]=0,Ur[et.wh]=N[et.wh]}(n,k,a,u,0,M,f,C.valueLineWidth,C.boundingLength,C.repeatCutLength,o,C),C}function Se(e,t){return e.toGlobalCoord(e.dataToCoord(e.scale.parse(t)))}function Oe(e){var t=e.symbolPatternSize,n=$d(e.symbolType,-t/2,-t/2,t,t,e.color);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function ze(e,t,n,o){var a=e.__pictorialBundle,f=n.pathPosition,m=t.valueDim,v=n.repeatTimes||0,x=0,C=n.symbolSize[t.valueDim.index]+n.valueLineWidth+2*n.symbolMargin;for(St(e,function(G){G.__pictorialAnimationIndex=x,G.__pictorialRepeatTimes=v,x<v?At(G,null,E(x),n,o):At(G,null,{scale:[0,0]},n,o,function(){a.remove(G)}),Ht(G,n),x++});x<v;x++){var k=Oe(n);k.__pictorialAnimationIndex=x,k.__pictorialRepeatTimes=v,a.add(k);var M=E(x);At(k,{position:M.position,scale:[0,0]},{scale:M.scale,rotation:M.rotation},n,o),k.on("mouseover",V).on("mouseout",N),Ht(k,n)}function E(G){var te=f.slice(),J=n.pxSign,me=G;return("start"===n.symbolRepeatDirection?0<J:J<0)&&(me=v-1-G),te[m.index]=C*(me-v/2+.5)+f[m.index],{position:te,scale:n.symbolScale.slice(),rotation:n.rotation}}function V(){St(e,function(G){G.trigger("emphasis")})}function N(){St(e,function(G){G.trigger("normal")})}}function ot(e,t,n,o){var a=e.__pictorialBundle,u=e.__pictorialMainPath;u?At(u,null,{position:n.pathPosition.slice(),scale:n.symbolScale.slice(),rotation:n.rotation},n,o):(u=e.__pictorialMainPath=Oe(n),a.add(u),At(u,{position:n.pathPosition.slice(),scale:[0,0],rotation:n.rotation},{scale:n.symbolScale.slice()},n,o),u.on("mouseover",function(){this.trigger("emphasis")}).on("mouseout",function(){this.trigger("normal")})),Ht(u,n)}function yt(e,t,n){var o=Ne({},t.barRectShape),a=e.__pictorialBarRect;a?At(a,null,{shape:o},t,n):(a=e.__pictorialBarRect=new fi({z2:2,shape:o,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}}),e.add(a))}function Ve(e,t,n,o){if(n.symbolClip){var a=e.__pictorialClipPath,u=Ne({},n.clipShape),l=t.valueDim,f=n.animationModel,m=n.dataIndex;if(a)Po(a,{shape:u},f,m);else{u[l.wh]=0,a=new fi({shape:u}),e.__pictorialBundle.setClipPath(a),e.__pictorialClipPath=a;var v={};v[l.wh]=n.clipShape[l.wh],Mc[o?"updateProps":"initProps"](a,{shape:v},f,m)}}}function Je(e,t){var n=e.getItemModel(t);return n.getAnimationDelayParams=it,n.isAnimationEnabled=Nt,n}function it(e){return{index:e.__pictorialAnimationIndex,count:e.__pictorialRepeatTimes}}function Nt(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function Ht(e,t){e.off("emphasis").off("normal");var n=t.symbolScale.slice();t.hoverAnimation&&e.on("emphasis",function(){this.animateTo({scale:[1.1*n[0],1.1*n[1]]},400,"elasticOut")}).on("normal",function(){this.animateTo({scale:n.slice()},400,"elasticOut")})}function on(e,t,n,o){var a=new mr,u=new mr;return a.add(u),(a.__pictorialBundle=u).attr("position",n.bundlePosition.slice()),n.symbolRepeat?ze(a,t,n):ot(a,0,n),yt(a,n,o),Ve(a,t,n,o),a.__pictorialShapeStr=bt(e,n),a.__pictorialSymbolMeta=n,a}function $t(e,t,n,o){var a=o.__pictorialBarRect;a&&(a.style.text=null);var u=[];St(o,function(l){u.push(l)}),o.__pictorialMainPath&&u.push(o.__pictorialMainPath),o.__pictorialClipPath&&(n=null),le(u,function(l){Po(l,{scale:[0,0]},n,t,function(){o.parent&&o.parent.remove(o)})}),e.setItemGraphicEl(t,null)}function bt(e,t){return[e.getItemVisual(t.dataIndex,"symbol")||"none",!!t.symbolRepeat,!!t.symbolClip].join(":")}function St(e,t,n){le(e.__pictorialBundle.children(),function(o){o!==e.__pictorialBarRect&&t.call(n,o)})}function At(e,t,n,o,a,u){t&&e.attr(t),o.symbolClip&&!a?n&&e.attr(n):n&&Mc[a?"updateProps":"initProps"](e,n,o.animationModel,o.dataIndex,u)}function Yt(e,t,n){var o=n.color,a=n.dataIndex,u=n.itemModel,l=u.getModel("itemStyle").getItemStyle(["color"]),f=u.getModel("emphasis.itemStyle").getItemStyle(),m=u.getShallow("cursor");St(e,function(C){C.setColor(o),C.setStyle(Ee({fill:o,opacity:n.opacity},l)),Go(C,f),m&&(C.cursor=m),C.z2=n.z2});var v={},x=e.__pictorialBarRect;Jk(x.style,v,u,o,t.seriesModel,a),Go(x,v)}function Nn(e){var t=Math.round(e);return Math.abs(e-t)<1e-4?t:Math.ceil(e)}function jn(e,t,n,o,a){mu.call(this,e,t,n),this.type=o||"value",this.position=a||"bottom",this.orient=null}function In(e,t,n){this.dimension="single",this.dimensions=["single"],this._axis=null,this._init(e,t,n),this.model=e}function Wn(e,t){t=t||{};var o=e.axis,a={},u=o.position,l=o.orient,f=e.coordinateSystem.getRect(),m=[f.x,f.x+f.width,f.y,f.y+f.height],v={horizontal:{top:m[2],bottom:m[3]},vertical:{left:m[0],right:m[1]}};a.position=["vertical"===l?v.vertical[u]:m[0],"horizontal"===l?v.horizontal[u]:m[3]],a.rotation=Math.PI/2*{horizontal:0,vertical:1}[l],a.labelDirection=a.tickDirection=a.nameDirection={top:-1,bottom:1,right:1,left:-1}[u],e.get("axisTick.inside")&&(a.tickDirection=-a.tickDirection),Gr(t.labelInside,e.get("axisLabel.inside"))&&(a.labelDirection=-a.labelDirection);var x=t.rotate;return null==x&&(x=e.get("axisLabel.rotate")),a.labelRotation="top"===u?-x:x,a.z2=1,a}gu({type:"pictorialBar",render:function(e,t,n){var o=this.group,a=e.getData(),u=this._data,l=e.coordinateSystem,f=!!l.getBaseAxis().isHorizontal(),m=l.grid.getRect(),v={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:e,coordSys:l,coordSysExtent:[[m.x,m.x+m.width],[m.y,m.y+m.height]],isHorizontal:f,valueDim:ve[+f],categoryDim:ve[1-f]};return a.diff(u).add(function(x){if(a.hasValue(x)){var C=Je(a,x),k=Ce(a,x,C,v),M=on(a,v,k);a.setItemGraphicEl(x,M),o.add(M),Yt(M,v,k)}}).update(function(x,C){var N,G,te,J,me,k=u.getItemGraphicEl(C);if(a.hasValue(x)){var M=Je(a,x),E=Ce(a,x,M,v),V=bt(a,E);k&&V!==k.__pictorialShapeStr&&(o.remove(k),a.setItemGraphicEl(x,null),k=null),k?(G=v,J=(te=E).animationModel,me=te.dataIndex,Po((N=k).__pictorialBundle,{position:te.bundlePosition.slice()},J,me),te.symbolRepeat?ze(N,G,te,!0):ot(N,0,te,!0),yt(N,te,!0),Ve(N,G,te,!0)):k=on(a,v,E,!0),a.setItemGraphicEl(x,k),k.__pictorialSymbolMeta=E,o.add(k),Yt(k,v,E)}else o.remove(k)}).remove(function(x){var C=u.getItemGraphicEl(x);C&&$t(u,x,C.__pictorialSymbolMeta.animationModel,C)}).execute(),this._data=a,this.group},dispose:yn,remove:function(e,t){var n=this.group,o=this._data;e.get("animation")?o&&o.eachItemGraphicEl(function(a){$t(o,a.dataIndex,e,a)}):n.removeAll()}}),fa(pn(Pk,"pictorialBar")),Gi(zv("pictorialBar","roundRect")),jn.prototype={constructor:jn,model:null,isHorizontal:function(){var e=this.position;return"top"===e||"bottom"===e},pointToData:function(e,t){return this.coordinateSystem.pointToData(e,t)[0]},toGlobalCoord:null,toLocalCoord:null},Ie(jn,mu),lu.register("single",{create:function(e,t){var n=[];return e.eachComponent("singleAxis",function(o,a){var u=new In(o,e,t);u.name="single_"+a,u.resize(o,t),o.coordinateSystem=u,n.push(u)}),e.eachSeries(function(o){if("singleAxis"===o.get("coordinateSystem")){var a=e.queryComponents({mainType:"singleAxis",index:o.get("singleAxisIndex"),id:o.get("singleAxisId")})[0];o.coordinateSystem=a&&a.coordinateSystem}}),n},dimensions:(In.prototype={type:"singleAxis",axisPointerEnabled:!0,constructor:In,_init:function(e,t,n){var a=new jn(this.dimension,uh(e),[0,0],e.get("type"),e.get("position"));a.onBand="category"===a.type&&e.get("boundaryGap"),a.inverse=e.get("inverse"),a.orient=e.get("orient"),(e.axis=a).model=e,(a.coordinateSystem=this)._axis=a},update:function(e,t){e.eachSeries(function(n){if(n.coordinateSystem===this){var o=n.getData();le(o.mapDimension(this.dimension,!0),function(a){this._axis.scale.unionExtentFromData(o,a)},this),Ui(this._axis.scale,this._axis.model)}},this)},resize:function(e,t){this._rect=si({left:e.get("left"),top:e.get("top"),right:e.get("right"),bottom:e.get("bottom"),width:e.get("width"),height:e.get("height")},{width:t.getWidth(),height:t.getHeight()}),this._adjustAxis()},getRect:function(){return this._rect},_adjustAxis:function(){var e=this._rect,t=this._axis,n=t.isHorizontal(),o=n?[0,e.width]:[0,e.height],a=t.reverse?1:0;t.setExtent(o[a],o[1-a]),this._updateAxisTransform(t,n?e.x:e.y)},_updateAxisTransform:function(e,t){var n=e.getExtent(),o=n[0]+n[1],a=e.isHorizontal();e.toGlobalCoord=a?function(u){return u+t}:function(u){return o-u+t},e.toLocalCoord=a?function(u){return u-t}:function(u){return o-u+t}},getAxis:function(){return this._axis},getBaseAxis:function(){return this._axis},getAxes:function(){return[this._axis]},getTooltipAxes:function(){return{baseAxes:[this.getAxis()]}},containPoint:function(e){var t=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(e[0]))&&e[1]>=t.y&&e[1]<=t.y+t.height:n.contain(n.toLocalCoord(e[1]))&&e[0]>=t.y&&e[0]<=t.y+t.height},pointToData:function(e){var t=this.getAxis();return[t.coordToData(t.toLocalCoord(e["horizontal"===t.orient?0:1]))]},dataToPoint:function(e){var t=this.getAxis(),n=this.getRect(),o=[],a="horizontal"===t.orient?0:1;return e instanceof Array&&(e=e[0]),o[a]=t.toGlobalCoord(t.dataToCoord(+e)),o[1-a]=0==a?n.y+n.height/2:n.x+n.width/2,o}}).dimensions});var Pn=["axisLine","axisTickLabel","axisName"],Un=["splitArea","splitLine"],Hn=Fc.extend({type:"singleAxis",axisPointerClass:"SingleAxisPointer",render:function(e,t,n,o){var a=this.group;a.removeAll();var u=this._axisGroup;this._axisGroup=new mr;var l=Wn(e),f=new zc(e,l);le(Pn,f.add,f),a.add(this._axisGroup),a.add(f.getGroup()),le(Un,function(m){e.get(m+".show")&&this["_"+m](e)},this),Eg(u,this._axisGroup,e),Hn.superCall(this,"render",e,t,n,o)},remove:function(){Zk(this)},_splitLine:function(e){var t=e.axis;if(!t.scale.isBlank()){var n=e.getModel("splitLine"),o=n.getModel("lineStyle"),a=o.get("width"),u=o.get("color");u=u instanceof Array?u:[u];for(var l=e.coordinateSystem.getRect(),f=t.isHorizontal(),m=[],v=0,x=t.getTicksCoords({tickModel:n}),C=[],k=[],M=0;M<x.length;++M){var E=t.toGlobalCoord(x[M].coord);f?(C[0]=E,C[1]=l.y,k[0]=E,k[1]=l.y+l.height):(C[0]=l.x,C[1]=E,k[0]=l.x+l.width,k[1]=E);var V=v++%u.length;m[V]=m[V]||[],m[V].push(new $s({subPixelOptimize:!0,shape:{x1:C[0],y1:C[1],x2:k[0],y2:k[1]},style:{lineWidth:a},silent:!0}))}for(M=0;M<m.length;++M)this.group.add(ts(m[M],{style:{stroke:u[M%u.length],lineDash:o.getLineDash(a),lineWidth:a},silent:!0}))}},_splitArea:function(e){fC(this,this._axisGroup,e,e)}}),lr=ci.extend({type:"singleAxis",layoutMode:"box",axis:null,coordinateSystem:null,getCoordSysModel:function(){return this}});function vn(e,t){var n,o=[],a=e.seriesIndex;if(null==a||!(n=t.getSeriesByIndex(a)))return{point:[]};var u=n.getData(),l=Qa(u,e);if(null==l||l<0||en(l))return{point:[]};var f=u.getItemGraphicEl(l),m=n.coordinateSystem;if(n.getTooltipPosition)o=n.getTooltipPosition(l)||[];else if(m&&m.dataToPoint)o=m.dataToPoint(u.getValues(Ge(m.dimensions,function(x){return u.mapDimension(x)}),l,!0))||[];else if(f){var v=f.getBoundingRect().clone();v.applyTransform(f.transform),o=[v.x+v.width/2,v.y+v.height/2]}return{point:o,el:f}}xe(lr.prototype,ic),oy("single",lr,function(e,t){return t.type||(t.data?"category":"value")},{left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}});var Zn=le,Bn=pn,vr=_i();function hr(e,t,n,o,a){var v,x,C,k,M,E,V,N,u=e.axis;if(!u.scale.isBlank()&&u.containData(t))if(e.involveSeries){var l=(k=(C=(x=e).axis).dim,M=v=t,E=[],V=Number.MAX_VALUE,N=-1,Zn(x.seriesModels,function(G,te){var J,me,ge=G.getData().mapDimension(k,!0);if(G.getAxisTooltipData){var pe=G.getAxisTooltipData(ge,v,C);me=pe.dataIndices,J=pe.nestestValue}else{if(!(me=G.getData().indicesOfNearest(ge[0],v,"category"===C.type?.5:null)).length)return;J=G.getData().get(ge[0],me[0])}if(null!=J&&isFinite(J)){var _e=v-J,Me=Math.abs(_e);Me<=V&&((Me<V||0<=_e&&N<0)&&(V=Me,N=_e,M=J,E.length=0),Zn(me,function(We){E.push({seriesIndex:G.seriesIndex,dataIndexInside:We,dataIndex:G.getData().getRawIndex(We)})}))}}),{payloadBatch:E,snapToValue:M}),f=l.payloadBatch,m=l.snapToValue;f[0]&&null==a.seriesIndex&&Ne(a,f[0]),!o&&e.snap&&u.containData(m)&&null!=m&&(t=m),n.showPointer(e,t,f,a),n.showTooltip(e,l,m)}else n.showPointer(e,t)}function To(e,t,n,o){e[t.key]={value:n,payloadBatch:o}}function st(e,t,n,o){var a=n.payloadBatch,u=t.axis,l=u.model,f=t.axisPointerModel;if(t.triggerTooltip&&a.length){var m=t.coordSys.model,v=Ya(m),x=e.map[v];x||(x=e.map[v]={coordSysId:m.id,coordSysIndex:m.componentIndex,coordSysType:m.type,coordSysMainType:m.mainType,dataByAxis:[]},e.list.push(x)),x.dataByAxis.push({axisDim:u.dim,axisIndex:l.componentIndex,axisType:l.type,axisId:l.id,value:o,valueLabelOpt:{precision:f.get("label.precision"),formatter:f.get("label.formatter")},seriesDataIndices:a.slice()})}}function kt(e){var t=e.axis.model,n={},o=n.axisDim=e.axis.dim;return n.axisIndex=n[o+"AxisIndex"]=t.componentIndex,n.axisName=n[o+"AxisName"]=t.name,n.axisId=n[o+"AxisId"]=t.id,n}function cn(e){return!e||null==e[0]||isNaN(e[0])||null==e[1]||isNaN(e[1])}eu({type:"axisPointer",coordSysAxesInfo:null,defaultOption:{show:"auto",triggerOn:null,zlevel:0,z:50,type:"line",snap:!1,triggerTooltip:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#aaa",width:1,type:"solid"},shadowStyle:{color:"rgba(150,150,150,0.3)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,shadowBlur:3,shadowColor:"#aaa"},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}}});var xn=_i(),gn=le;function Xn(e,t,n){if(!Ze.node){var o=t.getZr();xn(o).records||(xn(o).records={}),function(a,u){function l(f,m){a.on(f,function(v){var C,k,M,x=(C=u,{dispatchAction:M=function(E){var V=k[E.type];V?V.push(E):(E.dispatchAction=M,C.dispatchAction(E))},pendings:k={showTip:[],hideTip:[]}});gn(xn(a).records,function(C){C&&m(C,v,x.dispatchAction)}),function(C,k){var M,E=C.showTip.length,V=C.hideTip.length;E?M=C.showTip[E-1]:V&&(M=C.hideTip[V-1]),M&&(M.dispatchAction=null,k.dispatchAction(M))}(x.pendings,u)})}xn(a).initialized||(xn(a).initialized=!0,l("click",pn(Zr,"click")),l("mousemove",pn(Zr,"mousemove")),l("globalout",Vr))}(o,t),(xn(o).records[e]||(xn(o).records[e]={})).handler=n}}function Vr(e,t,n){e.handler("leave",null,n)}function Zr(e,t,n,o){t.handler(e,n,o)}function zi(e,t){if(!Ze.node){var n=t.getZr();(xn(n).records||{})[e]&&(xn(n).records[e]=null)}}var ro=Ts({type:"axisPointer",render:function(e,t,n){var o=t.getComponent("tooltip"),a=e.get("triggerOn")||o&&o.get("triggerOn")||"mousemove|click";Xn("axisPointer",n,function(u,l,f){"none"!==a&&("leave"===u||0<=a.indexOf(u))&&f({type:"updateAxisPointer",currTrigger:u,x:l&&l.offsetX,y:l&&l.offsetY})})},remove:function(e,t){zi(t.getZr(),"axisPointer"),ro.superApply(this._model,"remove",arguments)},dispose:function(e,t){zi("axisPointer",t),ro.superApply(this._model,"dispose",arguments)}}),Lr=_i(),$o=ie,Ra=Rt;function Ms(){}function ju(e,t,n,o){!function a(u,l){if(ln(u)&&ln(l)){var f=!0;return le(l,function(m,v){f=f&&a(u[v],m)}),!!f}return u===l}(Lr(n).lastProp,o)&&(Lr(n).lastProp=o,t?Po(n,o,e):(n.stopAnimation(),n.attr(o)))}function Us(e,t){e[t.get("label.show")?"show":"hide"]()}function Eu(e){return{position:e.position.slice(),rotation:e.rotation||0}}function bm(e,t,n){var o=t.get("z"),a=t.get("zlevel");e&&e.traverse(function(u){"group"!==u.type&&(null!=o&&(u.z=o),null!=a&&(u.zlevel=a),u.silent=n)})}function yh(e){var t,n=e.get("type"),o=e.getModel(n+"Style");return"line"===n?(t=o.getLineStyle()).fill=null:"shadow"===n&&((t=o.getAreaStyle()).stroke=null),t}function Ip(e,t,n,o,a){var u=Pf(n.get("value"),t.axis,t.ecModel,n.get("seriesDataIndices"),{precision:n.get("label.precision"),formatter:n.get("label.formatter")}),l=n.getModel("label"),f=Uh(l.get("padding")||0),m=l.getFont(),v=bl(u,m),x=a.position,C=v.width+f[1]+f[3],k=v.height+f[0]+f[2],M=a.align;"right"===M&&(x[0]-=C),"center"===M&&(x[0]-=C/2);var N,G,te,J,me,ge,E=a.verticalAlign;"bottom"===E&&(x[1]-=k),"middle"===E&&(x[1]-=k/2),N=x,G=C,te=k,me=(J=o).getWidth(),ge=J.getHeight(),N[0]=Math.min(N[0]+G,me)-G,N[1]=Math.min(N[1]+te,ge)-te,N[0]=Math.max(N[0],0),N[1]=Math.max(N[1],0);var V=l.get("backgroundColor");V&&"auto"!==V||(V=t.get("axisLine.lineStyle.color")),e.label={shape:{x:0,y:0,width:C,height:k,r:l.get("borderRadius")},position:x.slice(),style:{text:u,textFont:m,textFill:l.getTextColor(),textPosition:"inside",textPadding:f,fill:V,stroke:l.get("borderColor")||"transparent",lineWidth:l.get("borderWidth")||0,shadowBlur:l.get("shadowBlur"),shadowColor:l.get("shadowColor"),shadowOffsetX:l.get("shadowOffsetX"),shadowOffsetY:l.get("shadowOffsetY")},z2:10}}function Pf(e,t,n,o,a){e=t.scale.parse(e);var u=t.scale.getLabel(e,{precision:a.precision}),l=a.formatter;if(l){var f={value:ty(t,e),axisDimension:t.dim,axisIndex:t.index,seriesData:[]};le(o,function(m){var v=n.getSeriesByIndex(m.seriesIndex),C=v&&v.getDataParams(m.dataIndexInside);C&&f.seriesData.push(C)}),Gn(l)?u=l.replace("{value}",u):Ot(l)&&(u=l(f))}return u}function Op(e,t,n){var o=vi();return Yc(o,o,n.rotation),Xc(o,o,n.position),Ai([e.dataToCoord(t),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],o)}function s0(e,t,n,o,a,u){var l=zc.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=a.get("label.margin"),Ip(t,o,a,u,{position:Op(o.axis,e,n),align:l.textAlign,verticalAlign:l.textVerticalAlign})}function lS(e,t,n){return{x1:e[n=n||0],y1:e[1-n],x2:t[n],y2:t[1-n]}}function tM(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}function uk(e,t,n,o,a,u){return{cx:e,cy:t,r0:n,r:o,startAngle:a,endAngle:u,clockwise:!0}}Zl((Ms.prototype={_group:null,_lastGraphicKey:null,_handle:null,_dragging:!1,_lastValue:null,_lastStatus:null,_payloadInfo:null,animationThreshold:15,render:function(e,t,n,o){var a=t.get("value"),u=t.get("status");if(this._axisModel=e,this._axisPointerModel=t,this._api=n,o||this._lastValue!==a||this._lastStatus!==u){this._lastValue=a,this._lastStatus=u;var l=this._group,f=this._handle;if(!u||"hide"===u)return l&&l.hide(),void(f&&f.hide());l&&l.show(),f&&f.show();var m={};this.makeElOption(m,a,e,t,n);var v=m.graphicKey;v!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=v;var x=this._moveAnimation=this.determineAnimation(e,t);if(l){var C=pn(ju,t,x);this.updatePointerEl(l,m,C,t),this.updateLabelEl(l,m,C,t)}else l=this._group=new mr,this.createPointerEl(l,m,e,t),this.createLabelEl(l,m,e,t),n.getZr().add(l);bm(l,t,!0),this._renderHandle(a)}},remove:function(e){this.clear(e)},dispose:function(e){this.clear(e)},determineAnimation:function(e,t){var n=t.get("animation"),o=e.axis,a="category"===o.type,u=t.get("snap");if(!u&&!a)return!1;if("auto"!==n&&null!=n)return!0===n;var l=this.animationThreshold;if(a&&o.getBandWidth()>l)return!0;if(u){var f=sy(e).seriesDataCount,m=o.getExtent();return Math.abs(m[0]-m[1])/f>l}return!1},makeElOption:function(e,t,n,o,a){},createPointerEl:function(e,t,n,o){var a=t.pointer;if(a){var u=Lr(e).pointerEl=new Mc[a.type]($o(t.pointer));e.add(u)}},createLabelEl:function(e,t,n,o){if(t.label){var a=Lr(e).labelEl=new fi($o(t.label));e.add(a),Us(a,o)}},updatePointerEl:function(e,t,n){var o=Lr(e).pointerEl;o&&t.pointer&&(o.setStyle(t.pointer.style),n(o,{shape:t.pointer.shape}))},updateLabelEl:function(e,t,n,o){var a=Lr(e).labelEl;a&&(a.setStyle(t.label.style),n(a,{shape:t.label.shape,position:t.label.position}),Us(a,o))},_renderHandle:function(e){if(!this._dragging&&this.updateHandleTransform){var t,n=this._axisPointerModel,o=this._api.getZr(),a=this._handle,u=n.getModel("handle"),l=n.get("status");if(!u.get("show")||!l||"hide"===l)return a&&o.remove(a),void(this._handle=null);this._handle||(t=!0,a=this._handle=qm(u.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(m){Br(m.event)},onmousedown:Ra(this._onHandleDragMove,this,0,0),drift:Ra(this._onHandleDragMove,this),ondragend:Ra(this._onHandleDragEnd,this)}),o.add(a)),bm(a,n,!1),a.setStyle(u.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var f=u.get("size");en(f)||(f=[f,f]),a.attr("scale",[f[0]/2,f[1]/2]),Jh(this,"_doDispatchAxisPointer",u.get("throttle")||0,"fixRate"),this._moveHandleToValue(e,t)}},_moveHandleToValue:function(e,t){ju(this._axisPointerModel,!t&&this._moveAnimation,this._handle,Eu(this.getHandleTransform(e,this._axisModel,this._axisPointerModel)))},_onHandleDragMove:function(e,t){var n=this._handle;if(n){this._dragging=!0;var o=this.updateHandleTransform(Eu(n),[e,t],this._axisModel,this._axisPointerModel);this._payloadInfo=o,n.stopAnimation(),n.attr(Eu(o)),Lr(n).lastProp=null,this._doDispatchAxisPointer()}},_doDispatchAxisPointer:function(){if(this._handle){var e=this._payloadInfo,t=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:e.cursorPoint[0],y:e.cursorPoint[1],tooltipOption:e.tooltipOption,axesInfo:[{axisDim:t.axis.dim,axisIndex:t.componentIndex}]})}},_onHandleDragEnd:function(e){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},getHandleTransform:null,updateHandleTransform:null,clear:function(e){this._lastValue=null,this._lastStatus=null;var t=e.getZr(),n=this._group,o=this._handle;t&&n&&(this._lastGraphicKey=null,n&&t.remove(n),o&&t.remove(o),this._group=null,this._handle=null,this._payloadInfo=null)},doClear:function(){},buildLabel:function(e,t,n){return{x:e[n=n||0],y:e[1-n],width:t[n],height:t[1-n]}}}).constructor=Ms);var nM=Ms.extend({makeElOption:function(e,t,n,o,a){var u=n.axis,l=u.grid,f=o.get("type"),m=rM(l,u).getOtherAxis(u).getGlobalExtent(),v=u.toGlobalCoord(u.dataToCoord(t,!0));if(f&&"none"!==f){var x=yh(o),C=lk[f](u,v,m);C.style=x,e.graphicKey=C.type,e.pointer=C}s0(t,e,Gv(l.model,n),n,o,a)},getHandleTransform:function(e,t,n){var o=Gv(t.axis.grid.model,t,{labelInside:!1});return o.labelMargin=n.get("handle.margin"),{position:Op(t.axis,e,o),rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,o){var a=n.axis,u=a.grid,l=a.getGlobalExtent(!0),f=rM(u,a).getOtherAxis(a).getGlobalExtent(),m="x"===a.dim?0:1,v=e.position;v[m]+=t[m],v[m]=Math.min(l[1],v[m]),v[m]=Math.max(l[0],v[m]);var x=(f[1]+f[0])/2,C=[x,x];return C[m]=v[m],{position:v,rotation:e.rotation,cursorPoint:C,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][m]}}});function rM(e,t){var n={};return n[t.dim+"AxisIndex"]=t.index,e.getCartesian(n)}var lk={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:lS([t,n[0]],[t,n[1]],oM(e))}},shadow:function(e,t,n){var o=Math.max(1,e.getBandWidth());return{type:"Rect",shape:tM([t-o/2,n[0]],[o,n[1]-n[0]],oM(e))}}};function oM(e){return"x"===e.dim?0:1}Fc.registerAxisPointerClass("CartesianAxisPointer",nM),da(function(e){if(e){e.axisPointer&&0!==e.axisPointer.length||(e.axisPointer={});var t=e.axisPointer.link;t&&!en(t)&&(e.axisPointer.link=[t])}}),Ii(ih.PROCESSOR.STATISTIC,function(e,t){e.getComponent("axisPointer").coordSysAxesInfo=function Yk(e,t){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(o,a,u){var l=a.getComponent("tooltip"),f=a.getComponent("axisPointer"),m=f.get("link",!0)||[],v=[];vp(u.getCoordinateSystems(),function(x){if(x.axisPointerEnabled){var C=Ya(x.model),k=o.coordSysAxesInfo[C]={},M=(o.coordSysMap[C]=x).model.getModel("tooltip",l);if(vp(x.getAxes(),fw(G,!1,null)),x.getTooltipAxes&&l&&M.get("show")){var E="axis"===M.get("trigger"),V="cross"===M.get("axisPointer.type"),N=x.getTooltipAxes(M.get("axisPointer.axis"));(E||V)&&vp(N.baseAxes,fw(G,!V||"cross",E)),V&&vp(N.otherAxes,fw(G,"cross",!1))}}function G(te,J,me){var ge=me.model.getModel("axisPointer",f),pe=ge.get("show");if(pe&&("auto"!==pe||te||hw(ge))){null==J&&(J=ge.get("triggerTooltip"));var _e=(ge=te?function(lt,vt,Mt,Pt,Ct,Zt){var An=vt.getModel("axisPointer"),Rn={};vp(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],function($r){Rn[$r]=ie(An.get($r))}),Rn.snap="category"!==lt.type&&!!Zt,"cross"===An.get("type")&&(Rn.type="line");var Cn=Rn.label||(Rn.label={});if(null==Cn.show&&(Cn.show=!1),"cross"===Ct){var Jn=An.get("label.show");if(Cn.show=null==Jn||Jn,!Zt){var dr=Rn.lineStyle=An.get("crossStyle");dr&&Ee(Cn,dr.textStyle)}}return lt.model.getModel("axisPointer",new ei(Rn,Mt,Pt))}(me,M,f,a,te,J):ge).get("snap"),Me=Ya(me.model),We=J||_e||"category"===me.type,Ke=o.axesInfo[Me]={key:Me,axis:me,coordSys:x,axisPointerModel:ge,triggerTooltip:J,involveSeries:We,snap:_e,useHandle:hw(ge),seriesModels:[]};k[Me]=Ke,o.seriesInvolved|=We;var et=function(lt,vt){for(var Mt=vt.model,Pt=vt.dim,Ct=0;Ct<lt.length;Ct++){var Zt=lt[Ct]||{};if(Wv(Zt[Pt+"AxisId"],Mt.id)||Wv(Zt[Pt+"AxisIndex"],Mt.componentIndex)||Wv(Zt[Pt+"AxisName"],Mt.name))return Ct}}(m,me);if(null!=et){var ut=v[et]||(v[et]={axesInfo:{}});ut.axesInfo[Me]=Ke,ut.mapper=m[et].mapper,Ke.linkGroup=ut}}}})}(n,e,t),n.seriesInvolved&&function(o,a){a.eachSeries(function(u){var l=u.coordinateSystem,f=u.get("tooltip.trigger",!0),m=u.get("tooltip.show",!0);l&&"none"!==f&&!1!==f&&"item"!==f&&!1!==m&&!1!==u.get("axisPointer.show",!0)&&vp(o.coordSysAxesInfo[Ya(l.model)],function(v){var x=v.axis;l.getAxis(x.dim)===x&&(v.seriesModels.push(u),null==v.seriesDataCount&&(v.seriesDataCount=0),v.seriesDataCount+=u.getData().count())})},this)}(n,e),n}(e,t)}),io({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},function(e,t,n){var G,te,me,o=e.currTrigger,a=[e.x,e.y],u=e,l=e.dispatchAction||Rt(n.dispatchAction,n),f=t.getComponent("axisPointer").coordSysAxesInfo;if(f){cn(a)&&(a=vn({seriesIndex:u.seriesIndex,dataIndex:u.dataIndex},t).point);var m=cn(a),v=u.axesInfo,x=f.axesInfo,C="leave"===o||cn(a),k={},M={},E={list:[],map:{}},V={showPointer:Bn(To,M),showTooltip:Bn(st,E)};Zn(f.coordSysMap,function(G,te){var J=m||G.containPoint(a);Zn(f.coordSysAxesInfo[te],function(me,ge){var pe=me.axis,_e=function(We,Ke){for(var et=0;et<(We||[]).length;et++){var ut=We[et];if(Ke.axis.dim===ut.axisDim&&Ke.axis.model.componentIndex===ut.axisIndex)return ut}}(v,me);if(!C&&J&&(!v||_e)){var Me=_e&&_e.value;null!=Me||m||(Me=pe.pointToData(a)),null!=Me&&hr(me,Me,V,!1,k)}})});var N={};return Zn(x,function(G,te){var J=G.linkGroup;J&&!M[te]&&Zn(J.axesInfo,function(me,ge){var pe=M[ge];if(me!==G&&pe){var _e=pe.value;J.mapper&&(_e=G.axis.scale.parse(J.mapper(_e,kt(me),kt(G)))),N[G.key]=_e}})}),Zn(N,function(G,te){hr(x[te],G,V,!0,k)}),G=M,te=x,me=k.axesInfo=[],Zn(te,function(ge,pe){var _e=ge.axisPointerModel.option,Me=G[pe];Me?(ge.useHandle||(_e.status="show"),_e.value=Me.value,_e.seriesDataIndices=(Me.payloadBatch||[]).slice()):ge.useHandle||(_e.status="hide"),"show"===_e.status&&me.push({axisDim:ge.axis.dim,axisIndex:ge.axis.model.componentIndex,value:_e.value})}),function(G,te,J,me){if(cn(te)||!G.list.length)return me({type:"hideTip"});var ge=((G.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};me({type:"showTip",escapeConnect:!0,x:te[0],y:te[1],tooltipOption:J.tooltipOption,position:J.position,dataIndexInside:ge.dataIndexInside,dataIndex:ge.dataIndex,seriesIndex:ge.seriesIndex,dataByCoordSys:G.list})}(E,a,e,l),function(G,te,J){var me=J.getZr(),ge="axisPointerLastHighlights",pe=vr(me)[ge]||{},_e=vr(me)[ge]={};Zn(G,function(Ke,et){var ut=Ke.axisPointerModel.option;"show"===ut.status&&Zn(ut.seriesDataIndices,function(lt){_e[lt.seriesIndex+" | "+lt.dataIndex]=lt})});var Me=[],We=[];le(pe,function(Ke,et){_e[et]||We.push(Ke)}),le(_e,function(Ke,et){pe[et]||Me.push(Ke)}),We.length&&J.dispatchAction({type:"downplay",escapeConnect:!0,batch:We}),Me.length&&J.dispatchAction({type:"highlight",escapeConnect:!0,batch:Me})}(x,0,n),k}});var VD=["x","y"],xm=["width","height"],ck=Ms.extend({makeElOption:function(e,t,n,o,a){var u=n.axis,l=u.coordinateSystem,f=HD(l,1-aM(u)),m=l.dataToPoint(t)[0],v=o.get("type");if(v&&"none"!==v){var x=yh(o),C=iM[v](u,m,f);C.style=x,e.graphicKey=C.type,e.pointer=C}s0(t,e,Wn(n),n,o,a)},getHandleTransform:function(e,t,n){var o=Wn(t,{labelInside:!1});return o.labelMargin=n.get("handle.margin"),{position:Op(t.axis,e,o),rotation:o.rotation+(o.labelDirection<0?Math.PI:0)}},updateHandleTransform:function(e,t,n,o){var a=n.axis,u=a.coordinateSystem,l=aM(a),f=HD(u,l),m=e.position;m[l]+=t[l],m[l]=Math.min(f[1],m[l]),m[l]=Math.max(f[0],m[l]);var v=HD(u,1-l),x=(v[1]+v[0])/2,C=[x,x];return C[l]=m[l],{position:m,rotation:e.rotation,cursorPoint:C,tooltipOption:{verticalAlign:"middle"}}}}),iM={line:function(e,t,n){return{type:"Line",subPixelOptimize:!0,shape:lS([t,n[0]],[t,n[1]],aM(e))}},shadow:function(e,t,n){var o=e.getBandWidth();return{type:"Rect",shape:tM([t-o/2,n[0]],[o,n[1]-n[0]],aM(e))}}};function aM(e){return e.isHorizontal()?0:1}function HD(e,t){var n=e.getRect();return[n[VD[t]],n[VD[t]]+n[xm[t]]]}Fc.registerAxisPointerClass("SingleAxisPointer",ck),Ts({type:"single"});var WD=Ma.extend({type:"series.themeRiver",dependencies:["singleAxis"],nameMap:null,init:function(e){WD.superApply(this,"init",arguments),this.legendVisualProvider=new uy(Rt(this.getData,this),Rt(this.getRawData,this))},fixData:function(e){var t=e.length,n={},o=vf(e,function(x){return n.hasOwnProperty(x[0])||(n[x[0]]=-1),x[2]}),a=[];o.buckets.each(function(x,C){a.push({name:C,dataList:x})});for(var u=a.length,l=0;l<u;++l){for(var f=a[l].name,m=0;m<a[l].dataList.length;++m)n[v=a[l].dataList[m][0]]=l;for(var v in n)n.hasOwnProperty(v)&&n[v]!==l&&(n[v]=l,e[t]=[],e[t][0]=v,e[t][1]=0,e[t][2]=f,t++)}return e},getInitialData:function(e,t){for(var n=t.queryComponents({mainType:"singleAxis",index:this.get("singleAxisIndex"),id:this.get("singleAxisId")})[0].get("type"),o=ht(e.data,function(C){return void 0!==C[2]}),a=this.fixData(o||[]),u=[],l=this.nameMap=Gt(),f=0,m=0;m<a.length;++m)u.push(a[m][2]),l.get(a[m][2])||(l.set(a[m][2],f),f++);var v=Ob(a,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Z_(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}),x=new Uu(v,this);return x.initData(a),x},getLayerSeries:function(){for(var e=this.getData(),t=e.count(),n=[],o=0;o<t;++o)n[o]=o;var a=e.mapDimension("single"),u=vf(n,function(f){return e.get("name",f)}),l=[];return u.buckets.each(function(f,m){f.sort(function(v,x){return e.get(a,v)-e.get(a,x)}),l.push({name:m,indices:f})}),l},getAxisTooltipData:function(e,t,n){en(e)||(e=e?[e]:[]);for(var o,a=this.getData(),u=this.getLayerSeries(),l=[],f=u.length,m=0;m<f;++m){for(var v=Number.MAX_VALUE,x=-1,C=u[m].indices.length,k=0;k<C;++k){var M=a.get(e[0],u[m].indices[k]),E=Math.abs(M-t);E<=v&&(o=M,v=E,x=u[m].indices[k])}l.push(x)}return{dataIndices:l,nestestValue:o}},formatTooltip:function(e){var t=this.getData(),n=t.getName(e),o=t.get(t.mapDimension("value"),e);return!isNaN(o)&&null!=o||(o="-"),Pa(n+" : "+o)},defaultOption:{zlevel:0,z:2,coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",color:"#000",fontSize:11},emphasis:{label:{show:!0}}}});function GD(e,t,n){if(e.count())for(var o,a=t.coordinateSystem,u=t.getLayerSeries(),l=e.mapDimension("single"),f=e.mapDimension("value"),m=Ge(u,function(N){return Ge(N.indices,function(G){var te=a.dataToPoint(e.get(l,G));return te[1]=e.get(f,G),te})}),v=function(N){for(var G=N.length,te=N[0].length,J=[],me=[],ge=0,pe={},_e=0;_e<te;++_e){for(var Me=0,We=0;Me<G;++Me)We+=N[Me][_e][1];ge<We&&(ge=We),J.push(We)}for(var Ke=0;Ke<te;++Ke)me[Ke]=(ge-J[Ke])/2;for(var et=ge=0;et<te;++et){var ut=J[et]+me[et];ge<ut&&(ge=ut)}return pe.y0=me,pe.max=ge,pe}(m),x=v.y0,C=n/v.max,k=u.length,M=u[0].indices.length,E=0;E<M;++E){e.setItemLayout(u[0].indices[E],{layerIndex:0,x:m[0][E][0],y0:o=x[E]*C,y:m[0][E][1]*C});for(var V=1;V<k;++V)e.setItemLayout(u[V].indices[E],{layerIndex:V,x:m[V][E][0],y0:o+=m[V-1][E][1]*C,y:m[V][E][1]*C})}}function A2(e,t,n){mr.call(this);var o=new nl({z2:2});o.seriesIndex=t.seriesIndex;var a=new Yo({z2:4,silent:e.getModel("label").get("silent")});function u(){a.ignore=a.hoverIgnore}function l(){a.ignore=a.normalIgnore}this.add(o),this.add(a),this.updateData(!0,e,"normal",t,n),this.on("emphasis",u).on("normal",l).on("mouseover",u).on("mouseout",l)}gu({type:"themeRiver",init:function(){this._layers=[]},render:function(e,t,n){var o=e.getData(),a=this.group,u=e.getLayerSeries(),l=o.getLayout("layoutInfo");function v(M){return M.name}a.attr("position",[0,l.rect.y+l.boundaryGap[0]]);var x=new Af(this._layersSeries||[],u,v,v),C={};function k(M,E,V){var An,Rn,Jn,N=this._layers;if("remove"!==M){for(var G,te,J,me=[],ge=[],pe=u[E].indices,_e=0;_e<pe.length;_e++){var Me=o.getItemLayout(pe[_e]),We=Me.x,Ke=Me.y0,et=Me.y;me.push([We,Ke]),ge.push([We,Ke+et]),G=o.getItemVisual(pe[_e],"color")}var ut=o.getItemLayout(pe[0]),lt=o.getItemModel(pe[_e-1]),vt=lt.getModel("label"),Mt=vt.get("margin");if("add"===M){var Pt=C[E]=new mr;te=new Rv({shape:{points:me,stackedOnPoints:ge,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),J=new Yo({style:{x:ut.x-Mt,y:ut.y0+ut.y/2}}),Pt.add(te),Pt.add(J),a.add(Pt),te.setClipPath((An=te.getBoundingRect(),Rn=e,al(Jn=new fi({shape:{x:An.x-10,y:An.y-10,width:0,height:An.height+20}}),{shape:{width:An.width+20,height:An.height+20}},Rn,function(){te.removeClipPath()}),Jn))}else te=(Pt=N[V]).childAt(0),J=Pt.childAt(1),a.add(Pt),C[E]=Pt,Po(te,{shape:{points:me,stackedOnPoints:ge}},e),Po(J,{style:{x:ut.x-Mt,y:ut.y0+ut.y/2}},e);var Ct=lt.getModel("emphasis.itemStyle"),Zt=lt.getModel("itemStyle");Ta(J.style,vt,{text:vt.get("show")?e.getFormattedLabel(pe[_e-1],"normal")||o.getName(pe[_e-1]):null,textVerticalAlign:"middle"}),te.setStyle(Ne({fill:G},Zt.getItemStyle(["color"]))),Go(te,Ct.getItemStyle())}else a.remove(N[E])}x.add(Rt(k,this,"add")).update(Rt(k,this,"update")).remove(Rt(k,this,"remove")).execute(),this._layersSeries=u,this._layers=C},dispose:function(){}}),fa(function(e,t){e.eachSeriesByType("themeRiver",function(n){var o=n.getData(),a=n.coordinateSystem,u={},l=a.getRect();u.rect=l;var f=n.get("boundaryGap"),m=a.getAxis();u.boundaryGap=f,"horizontal"===m.orient?(f[0]=nr(f[0],l.height),f[1]=nr(f[1],l.height),GD(o,n,l.height-f[0]-f[1])):(f[0]=nr(f[0],l.width),f[1]=nr(f[1],l.width),GD(o,n,l.width-f[0]-f[1])),o.setLayout("layoutInfo",u)})}),Gi(function(e){e.eachSeriesByType("themeRiver",function(t){var n=t.getData(),o=t.getRawData(),a=t.get("color"),u=Gt();n.each(function(l){u.set(n.getRawIndex(l),l)}),o.each(function(l){var f=o.getName(l),m=a[(t.nameMap.get(f)-1)%a.length];o.setItemVisual(l,"color",m);var v=u.get(l);null!=v&&n.setItemVisual(v,"color",m)})})}),Ii(cy("themeRiver")),Ma.extend({type:"series.sunburst",_viewRoot:null,getInitialData:function(e,t){var n={name:e.name,children:e.data};!function u(l){var f=0;le(l.children,function(v){u(v);var x=v.value;en(x)&&(x=x[0]),f+=x});var m=l.value;en(m)&&(m=m[0]),null!=m&&!isNaN(m)||(m=f),m<0&&(m=0),en(l.value)?l.value[0]=m:l.value=m}(n);var o=Ge(e.levels||[],function(u){return new ei(u,this,t)},this),a=my.createTree(n,this,function(u){u.wrapMethod("getItemModel",function(l,f){var m=a.getNodeByDataIndex(f),v=o[m.depth];return v&&(l.parentModel=v),l})});return a.data},optionUpdated:function(){this.resetViewRoot()},getDataParams:function(e){var t=Ma.prototype.getDataParams.apply(this,arguments),n=this.getData().tree.getNodeByDataIndex(e);return t.treePathInfo=Pw(n,this),t},defaultOption:{zlevel:0,z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,percentPrecision:2,stillShowZeroSum:!0,highlightPolicy:"descendant",nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},highlight:{itemStyle:{opacity:1}},downplay:{itemStyle:{opacity:.5},label:{opacity:.6}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicOut",data:[],levels:[],sort:"desc"},getViewRoot:function(){return this._viewRoot},resetViewRoot:function(e){e?this._viewRoot=e:e=this._viewRoot;var t=this.getRawData().tree.root;e&&(e===t||t.contains(e))||(this._viewRoot=t)}});var dS=A2.prototype;dS.updateData=function(e,t,n,o,a){(this.node=t).piece=this,o=o||this._seriesModel,a=a||this._ecModel;var u=this.childAt(0);u.dataIndex=t.dataIndex;var l=t.getModel(),f=t.getLayout(),m=Ne({},f);m.label=null;var E,N,v=function(E,V,N){var G=E.getVisual("color"),te=E.getVisual("visualMeta");te&&0!==te.length||(G=null);var J=E.getModel("itemStyle").get("color");if(J)return J;if(G)return G;if(0===E.depth)return N.option.color[0];var me=N.option.color.length;return N.option.color[function(ge){for(var pe=ge;1<pe.depth;)pe=pe.parentNode;return $e(ge.getAncestors()[0].children,pe)}(E)%me]}(t,0,a);E=t,N=v,o.getData().setItemVisual(E.dataIndex,"color",N);var x,C=l.getModel("itemStyle").getItemStyle();x=Ee({lineJoin:"bevel",fill:(x="normal"===n?C:xe(l.getModel(n+".itemStyle").getItemStyle(),C)).fill||v},x),e?(u.setShape(m),u.shape.r=f.r0,Po(u,{shape:{r:f.r}},o,t.dataIndex),u.useStyle(x)):"object"==typeof x.fill&&x.fill.type||"object"==typeof u.style.fill&&u.style.fill.type?(Po(u,{shape:m},o),u.useStyle(x)):Po(u,{shape:m,style:x},o),this._updateLabel(o,v,n);var k=l.getShallow("cursor");if(k&&u.attr("cursor",k),e){var M=o.getShallow("highlightPolicy");this._initEvents(u,t,o,M)}this._seriesModel=o||this._seriesModel,this._ecModel=a||this._ecModel,Go(this)},dS.onEmphasis=function(e){var t=this;this.node.hostTree.root.eachNode(function(n){n.piece&&(t.node===n?n.piece.updateData(!1,n,"emphasis"):function(o,a,u){return"none"!==u&&("self"===u?o===a:"ancestor"===u?o===a||o.isAncestorOf(a):o===a||o.isDescendantOf(a))}(n,t.node,e)?n.piece.childAt(0).trigger("highlight"):"none"!==e&&n.piece.childAt(0).trigger("downplay"))})},dS.onNormal=function(){this.node.hostTree.root.eachNode(function(e){e.piece&&e.piece.updateData(!1,e,"normal")})},dS.onHighlight=function(){this.updateData(!1,this.node,"highlight")},dS.onDownplay=function(){this.updateData(!1,this.node,"downplay")},dS._updateLabel=function(e,t,n){var o=this.node.getModel(),a=o.getModel("label"),u="normal"===n||"emphasis"===n?a:o.getModel(n+".label"),l=o.getModel("emphasis.label"),f=u.get("formatter")?n:"normal",m=Gr(e.getFormattedLabel(this.node.dataIndex,f,null,null,"label"),this.node.name);!1===Me("show")&&(m="");var v=this.node.getLayout(),x=u.get("minAngle");null==x&&(x=a.get("minAngle")),null!=(x=x/180*Math.PI)&&Math.abs(v.endAngle-v.startAngle)<x&&(m="");var k=this.childAt(1);Ln(k.style,k.hoverStyle||{},a,l,{defaultText:u.getShallow("show")?m:null,autoColor:t,useInsideStyle:!0});var M,E=(v.startAngle+v.endAngle)/2,V=Math.cos(E),N=Math.sin(E),G=Me("position"),te=Me("distance")||0,J=Me("align");"outside"===G?(M=v.r+te,J=E>Math.PI/2?"right":"left"):J&&"center"!==J?"left"===J?(M=v.r0+te,E>Math.PI/2&&(J="right")):"right"===J&&(M=v.r-te,E>Math.PI/2&&(J="left")):(M=(v.r+v.r0)/2,J="center"),k.attr("style",{text:m,textAlign:J,textVerticalAlign:Me("verticalAlign")||"middle",opacity:Me("opacity")}),k.attr("position",[M*V+v.cx,M*N+v.cy]);var pe=Me("rotate"),_e=0;function Me(We){var Ke=u.get(We);return null==Ke?a.get(We):Ke}"radial"===pe?(_e=-E)<-Math.PI/2&&(_e+=Math.PI):"tangential"===pe?(_e=Math.PI/2-E)>Math.PI/2?_e-=Math.PI:_e<-Math.PI/2&&(_e+=Math.PI):"number"==typeof pe&&(_e=pe*Math.PI/180),k.attr("rotation",_e)},dS._initEvents=function(e,t,n,o){function a(){l.onEmphasis(o)}function u(){l.onNormal()}e.off("mouseover").off("mouseout").off("emphasis").off("normal");var l=this;n.isAnimationEnabled()&&e.on("mouseover",a).on("mouseout",u).on("emphasis",a).on("normal",u).on("downplay",function(){l.onDownplay()}).on("highlight",function(){l.onHighlight()})},Ie(A2,mr),Hs.extend({type:"sunburst",init:function(){},render:function(e,t,n,o){var a=this;this.seriesModel=e,this.api=n,this.ecModel=t;var u=e.getData(),l=u.tree.root,f=e.getViewRoot(),m=this.group,v=e.get("renderLabelForZeroData"),x=[];if(f.eachNode(function(E){x.push(E)}),function(E,V){function N(te){return te.getId()}function G(te,J){!function(me,ge){if(v||!me||me.getValue()||(me=null),me!==l&&ge!==l)if(ge&&ge.piece)me?(ge.piece.updateData(!1,me,"normal",e,t),u.setItemGraphicEl(me.dataIndex,ge.piece)):!(_e=ge)||_e.piece&&(m.remove(_e.piece),_e.piece=null);else if(me){var pe=new A2(me,e,t);m.add(pe),u.setItemGraphicEl(me.dataIndex,pe)}var _e}(null==te?null:E[te],null==J?null:V[J])}0===E.length&&0===V.length||new Af(V,E,N,N).add(G).update(G).remove(pn(G,null)).execute()}(x,this._oldChildren||[]),function(E,V){if(0<V.depth){a.virtualPiece?a.virtualPiece.updateData(!1,E,"normal",e,t):(a.virtualPiece=new A2(E,e,t),m.add(a.virtualPiece)),V.piece._onclickEvent&&V.piece.off("click",V.piece._onclickEvent);var N=function(G){a._rootToNode(V.parentNode)};V.piece._onclickEvent=N,a.virtualPiece.on("click",N)}else a.virtualPiece&&(m.remove(a.virtualPiece),a.virtualPiece=null)}(l,f),o&&o.highlight&&o.highlight.piece){var k=e.getShallow("highlightPolicy");o.highlight.piece.onEmphasis(k)}else if(o&&o.unhighlight){var M=this.virtualPiece;!M&&l.children.length&&(M=l.children[0].piece),M&&M.onNormal()}this._initEvents(),this._oldChildren=x},dispose:function(){},_initEvents:function(){function e(n){var o=!1;t.seriesModel.getViewRoot().eachNode(function(a){if(!o&&a.piece&&a.piece.childAt(0)===n.target){var u=a.getModel().get("nodeClick");if("rootToNode"===u)t._rootToNode(a);else if("link"===u){var l=a.getModel(),f=l.get("link");f&&Km(f,l.get("target",!0)||"_blank")}o=!0}})}var t=this;this.group._onclickEvent&&this.group.off("click",this.group._onclickEvent),this.group.on("click",e),this.group._onclickEvent=e},_rootToNode:function(e){e!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:"sunburstRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:e})},containPoint:function(e,t){var n=t.getData().getItemLayout(0);if(n){var o=e[0]-n.cx,a=e[1]-n.cy,u=Math.sqrt(o*o+a*a);return u<=n.r&&u>=n.r0}}});var gI="sunburstRootToNode";io({type:gI,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,o){var a=cm(e,[gI],n);if(a){var u=n.getViewRoot();u&&(e.direction=dh(u,a.node)?"rollUp":"drillDown"),n.resetViewRoot(a.node)}})});var UD="sunburstHighlight";io({type:UD,update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,o){var a=cm(e,[UD],n);a&&(e.highlight=a.node)})}),io({type:"sunburstUnhighlight",update:"updateView"},function(e,t){t.eachComponent({mainType:"series",subType:"sunburst",query:e},function(n,o){e.unhighlight=!0})});var jD=Math.PI/180;function LO(e,t){return t=t||[0,0],Ge(["x","y"],function(n,o){var a=this.getAxis(n),u=t[o],l=e[o]/2;return"category"===a.type?a.getBandWidth():Math.abs(a.dataToCoord(u-l)-a.dataToCoord(u+l))},this)}function BO(e,t){return t=t||[0,0],Ge([0,1],function(n){var o=t[n],a=e[n]/2,u=[],l=[];return u[n]=o-a,l[n]=o+a,u[1-n]=l[1-n]=t[1-n],Math.abs(this.dataToPoint(u)[n]-this.dataToPoint(l)[n])},this)}function zO(e,t){var n=this.getAxis(),o=t instanceof Array?t[0]:t,a=(e instanceof Array?e[0]:e)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(o-a)-n.dataToCoord(o+a))}function fS(e,t){return Ge(["Radius","Angle"],function(n,o){var a=this["get"+n+"Axis"](),u=t[o],l=e[o]/2,f="dataTo"+n,m="category"===a.type?a.getBandWidth():Math.abs(a[f](u-l)-a[f](u+l));return"Angle"===n&&(m=m*Math.PI/180),m},this)}Gi(pn(V1,"sunburst")),fa(pn(function(e,t,n,o){t.eachSeriesByType(e,function(a){var u=a.get("center"),l=a.get("radius");en(l)||(l=[0,l]),en(u)||(u=[u,u]);var f=n.getWidth(),m=n.getHeight(),v=Math.min(f,m),x=nr(u[0],f),C=nr(u[1],m),k=nr(l[0],v/2),M=nr(l[1],v/2),E=-a.get("startAngle")*jD,V=a.get("minAngle")*jD,N=a.getData().tree.root,G=a.getViewRoot(),te=G.depth,J=a.get("sort");null!=J&&function Ct(Zt,An){var Rn=Zt.children||[];Zt.children=function qD(e,t){if("function"==typeof t)return e.sort(t);var n="asc"===t;return e.sort(function(o,a){var u=(o.getValue()-a.getValue())*(n?1:-1);return 0==u?(o.dataIndex-a.dataIndex)*(n?-1:1):u})}(Rn,An),Rn.length&&le(Zt.children,function(Cn){Ct(Cn,An)})}(G,J);var me=0;le(G.children,function(Ct){isNaN(Ct.getValue())||me++});var ge=G.getValue(),pe=Math.PI/(ge||me)*2,_e=0<G.depth,We=(M-k)/(G.height-(_e?-1:1)||1),Ke=a.get("clockwise"),et=a.get("stillShowZeroSum"),ut=Ke?1:-1,lt=function(Ct,Zt){if(Ct){var An=Zt;if(Ct!==N){var Rn=Ct.getValue(),Cn=0===ge&&et?pe:Rn*pe;Cn<V&&(Cn=V),An=Zt+ut*Cn;var Jn=Ct.depth-te-(_e?-1:1),dr=k+We*Jn,$r=k+We*(1+Jn),zn=Ct.getModel();null!=zn.get("r0")&&(dr=nr(zn.get("r0"),v/2)),null!=zn.get("r")&&($r=nr(zn.get("r"),v/2)),Ct.setLayout({angle:Cn,startAngle:Zt,endAngle:An,clockwise:Ke,cx:x,cy:C,r0:dr,r:$r})}if(Ct.children&&Ct.children.length){var Ur=0;le(Ct.children,function(Jr){Ur+=lt(Jr,Zt+Ur)})}return An-Zt}};if(_e){var Pt=2*Math.PI;N.setLayout({angle:Pt,startAngle:E,endAngle:E+Pt,clockwise:Ke,cx:x,cy:C,r0:k,r:k+We})}lt(G,E)})},"sunburst")),Ii(pn(cy,"sunburst"));var mI=rd,FO=["itemStyle"],pI=["emphasis","itemStyle"],VO=["label"],HO=["emphasis","label"],vI={cartesian2d:function(e){var t=e.grid.getRect();return{coordSys:{type:"cartesian2d",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:Rt(LO,e)}}},geo:function(e){var t=e.getBoundingRect();return{coordSys:{type:"geo",x:t.x,y:t.y,width:t.width,height:t.height,zoom:e.getZoom()},api:{coord:function(n){return e.dataToPoint(n)},size:Rt(BO,e)}}},singleAxis:function(e){var t=e.getRect();return{coordSys:{type:"singleAxis",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:function(n){return e.dataToPoint(n)},size:Rt(zO,e)}}},polar:function(e){var t=e.getRadiusAxis(),n=e.getAngleAxis(),o=t.getExtent();return o[0]>o[1]&&o.reverse(),{coordSys:{type:"polar",cx:e.cx,cy:e.cy,r:o[1],r0:o[0]},api:{coord:Rt(function(a){var u=t.dataToRadius(a[0]),l=n.dataToAngle(a[1]),f=e.coordToPoint([u,l]);return f.push(u,l*Math.PI/180),f}),size:Rt(fS,e)}}},calendar:function(e){var t=e.getRect(),n=e.getRangeInfo();return{coordSys:{type:"calendar",x:t.x,y:t.y,width:t.width,height:t.height,cellWidth:e.getCellWidth(),cellHeight:e.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(o,a){return e.dataToPoint(o,a)}}}}};function YD(e,t,n,o,a){null==n[e]||a||(t[e]=n[e],n[e]=o[e])}function ZD(e,t,n,o){var a=e.get("renderItem"),u=e.coordinateSystem,l={};u&&(l=u.prepareCustoms?u.prepareCustoms():vI[u.type](u));var f,m,v,x,C,N,G,k=Ee({getWidth:o.getWidth,getHeight:o.getHeight,getZr:o.getZr,getDevicePixelRatio:o.getDevicePixelRatio,value:function(N,G){return null==G&&(G=f),t.get(t.getDimension(N||0),G)},style:function(N,G){null==G&&(G=f),V(G);var te=m.getModel(FO).getItemStyle();null!=C&&(te.fill=C);var J=t.getItemVisual(G,"opacity");null!=J&&(te.opacity=J);var me=N?sM(N,v):v;return Ta(te,me,null,{autoColor:C,isRectText:!0}),te.text=me.getShallow("show")?Or(e.getFormattedLabel(G,"normal"),T1(t,G)):null,N&&af(te,N),te},styleEmphasis:function(N,G){null==G&&(G=f),V(G);var te=m.getModel(pI).getItemStyle(),J=N?sM(N,x):x;return Ta(te,J,null,{isRectText:!0},!0),te.text=J.getShallow("show")?xt(e.getFormattedLabel(G,"emphasis"),e.getFormattedLabel(G,"normal"),T1(t,G)):null,N&&af(te,N),te},visual:function(N,G){return null==G&&(G=f),t.getItemVisual(G,N)},barLayout:function(N){if(u.getBaseAxis)return function(G){var te=[],J=G.axis;if("category"===J.type){for(var me=J.getBandWidth(),ge=0;ge<G.count;ge++)te.push(Ee({bandWidth:me,axisKey:"axis0",stackId:Ek+ge},G));var pe=no(te),_e=[];for(ge=0;ge<G.count;ge++){var Me=pe.axis0[Ek+ge];Me.offsetCenter=Me.offset+Me.width/2,_e.push(Me)}return _e}}(Ee({axis:u.getBaseAxis()},N))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(N){return jm(N,n)}},l.api||{}),M={context:{},seriesId:e.id,seriesName:e.name,seriesIndex:e.seriesIndex,coordSys:l.coordSys,dataInsideLength:t.count(),encode:(N=e.getData(),G={},le(N.dimensions,function(te,J){var me=N.getDimensionInfo(te);if(!me.isExtraCoord){var ge=me.coordDim;(G[ge]=G[ge]||[])[me.coordDimIndex]=J}}),G)},E=!0;return function(N,G){return f=N,E=!0,a&&a(Ee({dataIndexInside:N,dataIndex:t.getRawIndex(N),actionType:G?G.type:null},M),k)};function V(N){null==N&&(N=f),E&&(m=t.getItemModel(N),v=m.getModel(VO),x=m.getModel(HO),C=t.getItemVisual(N,"color"),E=!1)}}function KD(e,t,n,o,a,u){return(e=$D(e,t,n,o,a,u,!0))&&u.setItemGraphicEl(t,e),e}function $D(e,t,n,o,a,u,l){var k,f=!n,m=(n=n||{}).type,v=n.shape,x=n.style;if(e&&(f||null!=m&&m!==e.__customGraphicType||"path"===m&&(k=v)&&(k.hasOwnProperty("pathData")||k.hasOwnProperty("d"))&&xI(v)!==e.__customPathData||"image"===m&&_I(x,"image")&&x.image!==e.__customImagePath||"text"===m&&_I(v,"text")&&x.text!==e.__customText)&&(a.remove(e),e=null),!f){var C=!e;return function(k,M,E,V,N,G,te){var J={},me=E.style||{};if(E.shape&&(J.shape=ie(E.shape)),E.position&&(J.position=E.position.slice()),E.scale&&(J.scale=E.scale.slice()),E.origin&&(J.origin=E.origin.slice()),E.rotation&&(J.rotation=E.rotation),"image"===k.type&&E.style){var ge=J.style={};le(["x","y","width","height"],function(Me){YD(Me,ge,me,k.style,G)})}if("text"===k.type&&E.style&&(ge=J.style={},le(["x","y"],function(Me){YD(Me,ge,me,k.style,G)}),!me.hasOwnProperty("textFill")&&me.fill&&(me.textFill=me.fill),!me.hasOwnProperty("textStroke")&&me.stroke&&(me.textStroke=me.stroke)),"group"!==k.type&&(k.useStyle(me),G)){k.style.opacity=0;var pe=me.opacity;null==pe&&(pe=1),al(k,{style:{opacity:pe}},V,M)}G?k.attr(J):Po(k,J,V,M),E.hasOwnProperty("z2")&&k.attr("z2",E.z2||0),E.hasOwnProperty("silent")&&k.attr("silent",E.silent),E.hasOwnProperty("invisible")&&k.attr("invisible",E.invisible),E.hasOwnProperty("ignore")&&k.attr("ignore",E.ignore),E.hasOwnProperty("info")&&k.attr("info",E.info);var _e=E.styleEmphasis;il(k,_e),te&&Og(k,!1!==_e)}(e=e||function(k){var M,E=k.type;if("path"===E){var V=k.shape,N=null!=V.width&&null!=V.height?{x:V.x||0,y:V.y||0,width:V.width,height:V.height}:null,G=xI(V);(M=$f(G,null,N,V.layout||"center")).__customPathData=G}else if("image"===E)(M=new xi({})).__customImagePath=k.style.image;else if("text"===E)(M=new Yo({})).__customText=k.style.text;else if("group"===E)M=new mr;else{if("compoundPath"===E)throw new Error('"compoundPath" is not supported yet.');M=new(Ag(E))}return M.__customGraphicType=E,M.name=k.name,M}(n),t,n,o,0,C,l),"group"===m&&function(k,M,E,V,N){var _e,G=E.children,te=G?G.length:0,J=E.$mergeChildren,me="byName"===J||E.diffChildrenByName,ge=!1===J;if(te||me||ge){if(me)return void new Af((_e={oldChildren:k.children()||[],newChildren:G||[],dataIndex:M,animatableModel:V,group:k,data:N}).oldChildren,_e.newChildren,yI,yI,_e).add(bI).update(bI).remove(hS).execute();ge&&k.removeAll();for(var pe=0;pe<te;pe++)G[pe]&&$D(k.childAt(pe),M,G[pe],V,k,N)}}(e,t,n,o,u),a.add(e),e}}function yI(e,t){var n=e&&e.name;return null!=n?n:"e\0\0"+t}function bI(e,t){var n=this.context;$D(null!=t?n.oldChildren[t]:null,n.dataIndex,null!=e?n.newChildren[e]:null,n.animatableModel,n.group,n.data)}function sM(e,t){var n=new ei({},t);return le(mI,function(o,a){e.hasOwnProperty(o)&&(n.option[a]=e[o])}),n}function af(e,t){for(var n in t)!t.hasOwnProperty(n)&&mI.hasOwnProperty(n)||(e[n]=t[n])}function hS(e){var t=this.context,n=t.oldChildren[e];n&&t.group.remove(n)}function xI(e){return e&&(e.pathData||e.d)}function _I(e,t){return e&&e.hasOwnProperty(t)}function JD(e){return e.get("stack")||"__ec_stack_"+e.seriesIndex}function gS(e,t){return t.dim+e.model.componentIndex}function I2(e,t){mu.call(this,"radius",e,t),this.type="category"}Ma.extend({type:"series.custom",dependencies:["grid","polar","geo","singleAxis","calendar"],defaultOption:{coordinateSystem:"cartesian2d",zlevel:0,z:2,legendHoverLink:!0,useTransform:!0,clip:!1},getInitialData:function(e,t){return Pv(this.getSource(),this)},getDataParams:function(e,t,n){var o=Ma.prototype.getDataParams.apply(this,arguments);return n&&(o.info=n.info),o}}),Hs.extend({type:"custom",_data:null,render:function(e,t,n,o){var a=this._data,u=e.getData(),l=this.group,f=ZD(e,u,t,n);u.diff(a).add(function(v){KD(null,v,f(v,o),e,l,u)}).update(function(v,x){KD(a.getItemGraphicEl(x),v,f(v,o),e,l,u)}).remove(function(v){var x=a.getItemGraphicEl(v);x&&l.remove(x)}).execute();var m=e.get("clip",!0)?Fb(e.coordinateSystem,!1,e):null;m?l.setClipPath(m):l.removeClipPath(),this._data=u},incrementalPrepareRender:function(e,t,n){this.group.removeAll(),this._data=null},incrementalRender:function(e,t,n,o,a){var u=t.getData(),l=ZD(t,u,n,o);function f(v){v.isGroup||(v.incremental=!0,v.useHoverLayer=!0)}for(var m=e.start;m<e.end;m++)KD(null,m,l(m,a),t,this.group,u).traverse(f)},dispose:yn,filterForExposedEvent:function(e,t,n,o){var a=t.element;if(null==a||n.name===a)return!0;for(;(n=n.parent)&&n!==this.group;)if(n.name===a)return!0;return!1}}),I2.prototype={constructor:I2,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToRadius:mu.prototype.dataToCoord,radiusToData:mu.prototype.coordToData},Ie(I2,mu);var u0=_i();function uM(e,t){mu.call(this,"angle",e,t=t||[0,360]),this.type="category"}function O2(e){this.name=e||"",this.cx=0,this.cy=0,this._radiusAxis=new I2,this._angleAxis=new uM,this._radiusAxis.polar=this._angleAxis.polar=this}uM.prototype={constructor:uM,pointToData:function(e,t){return this.polar.pointToData(e,t)["radius"===this.dim?0:1]},dataToAngle:mu.prototype.dataToCoord,angleToData:mu.prototype.coordToData,calculateCategoryInterval:function(){var e=this.getLabelModel(),t=this.scale,n=t.getExtent(),o=t.count();if(n[1]-n[0]<1)return 0;var a=n[0],u=this.dataToCoord(a+1)-this.dataToCoord(a),l=Math.abs(u),f=bl(a,e.getFont(),"center","top"),m=Math.max(f.height,7)/l;isNaN(m)&&(m=1/0);var v=Math.max(0,Math.floor(m)),x=u0(this.model),C=x.lastAutoInterval,k=x.lastTickCount;return null!=C&&null!=k&&Math.abs(C-v)<=1&&Math.abs(k-o)<=1&&v<C?v=C:(x.lastTickCount=o,x.lastAutoInterval=v),v}},Ie(uM,mu),O2.prototype={type:"polar",axisPointerEnabled:!0,constructor:O2,dimensions:["radius","angle"],model:null,containPoint:function(e){var t=this.pointToCoord(e);return this._radiusAxis.contain(t[0])&&this._angleAxis.contain(t[1])},containData:function(e){return this._radiusAxis.containData(e[0])&&this._angleAxis.containData(e[1])},getAxis:function(e){return this["_"+e+"Axis"]},getAxes:function(){return[this._radiusAxis,this._angleAxis]},getAxesByScale:function(e){var t=[],n=this._angleAxis,o=this._radiusAxis;return n.scale.type===e&&t.push(n),o.scale.type===e&&t.push(o),t},getAngleAxis:function(){return this._angleAxis},getRadiusAxis:function(){return this._radiusAxis},getOtherAxis:function(e){var t=this._angleAxis;return e===t?this._radiusAxis:t},getBaseAxis:function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},getTooltipAxes:function(e){var t=null!=e&&"auto"!==e?this.getAxis(e):this.getBaseAxis();return{baseAxes:[t],otherAxes:[this.getOtherAxis(t)]}},dataToPoint:function(e,t){return this.coordToPoint([this._radiusAxis.dataToRadius(e[0],t),this._angleAxis.dataToAngle(e[1],t)])},pointToData:function(e,t){var n=this.pointToCoord(e);return[this._radiusAxis.radiusToData(n[0],t),this._angleAxis.angleToData(n[1],t)]},pointToCoord:function(e){var t=e[0]-this.cx,n=e[1]-this.cy,o=this.getAngleAxis(),a=o.getExtent(),u=Math.min(a[0],a[1]),l=Math.max(a[0],a[1]);o.inverse?u=l-360:l=u+360;var f=Math.sqrt(t*t+n*n);t/=f,n/=f;for(var m=Math.atan2(-n,t)/Math.PI*180,v=m<u?1:-1;m<u||l<m;)m+=360*v;return[f,m]},coordToPoint:function(e){var t=e[0],n=e[1]/180*Math.PI;return[Math.cos(n)*t+this.cx,-Math.sin(n)*t+this.cy]},getArea:function(){var e=this.getAngleAxis(),t=this.getRadiusAxis().getExtent().slice();t[0]>t[1]&&t.reverse();var n=e.getExtent(),o=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:t[0],r:t[1],startAngle:-n[0]*o,endAngle:-n[1]*o,clockwise:e.inverse,contain:function(a,u){var l=a-this.cx,f=u-this.cy,m=l*l+f*f,v=this.r,x=this.r0;return m<=v*v&&x*x<=m}}}};var lM=ci.extend({type:"polarAxis",axis:null,getCoordSysModel:function(){return this.ecModel.queryComponents({mainType:"polar",index:this.option.polarIndex,id:this.option.polarId})[0]}});function wI(e,t){return t.type||(t.data?"category":"value")}function WO(e,t){var n=this,o=n.getAngleAxis(),a=n.getRadiusAxis();if(o.scale.setExtent(1/0,-1/0),a.scale.setExtent(1/0,-1/0),e.eachSeries(function(f){if(f.coordinateSystem===n){var m=f.getData();le(m.mapDimension("radius",!0),function(v){a.scale.unionExtentFromData(m,y1(m,v))}),le(m.mapDimension("angle",!0),function(v){o.scale.unionExtentFromData(m,y1(m,v))})}}),Ui(o.scale,o.model),Ui(a.scale,a.model),"category"===o.type&&!o.onBand){var u=o.getExtent(),l=360/o.scale.count();o.inverse?u[1]+=l:u[1]-=l,o.setExtent(u[0],u[1])}}function Uc(e,t){if(e.type=t.get("type"),e.scale=uh(t),e.onBand=t.get("boundaryGap")&&"category"===e.type,e.inverse=t.get("inverse"),"angleAxis"===t.mainType){e.inverse^=t.get("clockwise");var n=t.get("startAngle");e.setExtent(n,n+(e.inverse?-360:360))}(t.axis=e).model=t}xe(lM.prototype,ic),oy("angle",lM,wI,{startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:!1}}),oy("radius",lM,wI,{splitNumber:5}),eu({type:"polar",dependencies:["polarAxis","angleAxis"],coordinateSystem:null,findAxisModel:function(e){var t;return this.ecModel.eachComponent(e,function(n){n.getCoordSysModel()===this&&(t=n)},this),t},defaultOption:{zlevel:0,z:0,center:["50%","50%"],radius:"80%"}}),lu.register("polar",{dimensions:O2.prototype.dimensions,create:function(e,t){var n=[];return e.eachComponent("polar",function(o,a){var u=new O2(a);u.update=WO;var l=u.getRadiusAxis(),f=u.getAngleAxis(),m=o.findAxisModel("radiusAxis"),v=o.findAxisModel("angleAxis");Uc(l,m),Uc(f,v),function(x,C,k){var M=C.get("center"),E=k.getWidth(),V=k.getHeight();x.cx=nr(M[0],E),x.cy=nr(M[1],V);var N=x.getRadiusAxis(),G=Math.min(E,V)/2,te=C.get("radius");null==te?te=[0,"100%"]:en(te)||(te=[0,te]),te=[nr(te[0],G),nr(te[1],G)],N.inverse?N.setExtent(te[1],te[0]):N.setExtent(te[0],te[1])}(u,o,t),n.push(u),(o.coordinateSystem=u).model=o}),e.eachSeries(function(o){if("polar"===o.get("coordinateSystem")){var a=e.queryComponents({mainType:"polar",index:o.get("polarIndex"),id:o.get("polarId")})[0];o.coordinateSystem=a.coordinateSystem}}),n}});var eA=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function _m(e,t,n){t[1]>t[0]&&(t=t.slice().reverse());var o=e.coordToPoint([t[0],n]),a=e.coordToPoint([t[1],n]);return{x1:o[0],y1:o[1],x2:a[0],y2:a[1]}}function cM(e){return e.getRadiusAxis().inverse?0:1}function tA(e){var t=e[0],n=e[e.length-1];t&&n&&Math.abs(Math.abs(t.coord-n.coord)-360)<1e-4&&e.pop()}Fc.extend({type:"angleAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,o=n.polar,a=o.getRadiusAxis().getExtent(),u=n.getTicksCoords(),l=n.getMinorTicksCoords(),f=Ge(n.getViewLabels(),function(m){return(m=ie(m)).coord=n.dataToCoord(m.tickValue),m});tA(f),tA(u),le(eA,function(m){!e.get(m+".show")||n.scale.isBlank()&&"axisLine"!==m||this["_"+m](e,o,u,l,a,f)},this)}},_axisLine:function(e,t,n,o,a){var u,l=e.getModel("axisLine.lineStyle"),f=cM(t),m=f?0:1;(u=0===a[m]?new ku({shape:{cx:t.cx,cy:t.cy,r:a[f]},style:l.getLineStyle(),z2:1,silent:!0}):new No({shape:{cx:t.cx,cy:t.cy,r:a[f],r0:a[m]},style:l.getLineStyle(),z2:1,silent:!0})).style.fill=null,this.group.add(u)},_axisTick:function(e,t,n,o,a){var u=e.getModel("axisTick"),l=(u.get("inside")?-1:1)*u.get("length"),f=a[cM(t)],m=Ge(n,function(v){return new $s({shape:_m(t,[f,f+l],v.coord)})});this.group.add(ts(m,{style:Ee(u.getModel("lineStyle").getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")})}))},_minorTick:function(e,t,n,o,a){if(o.length){for(var u=e.getModel("axisTick"),l=e.getModel("minorTick"),f=(u.get("inside")?-1:1)*l.get("length"),m=a[cM(t)],v=[],x=0;x<o.length;x++)for(var C=0;C<o[x].length;C++)v.push(new $s({shape:_m(t,[m,m+f],o[x][C].coord)}));this.group.add(ts(v,{style:Ee(l.getModel("lineStyle").getLineStyle(),Ee(u.getLineStyle(),{stroke:e.get("axisLine.lineStyle.color")}))}))}},_axisLabel:function(e,t,n,o,a,u){var l=e.getCategories(!0),f=e.getModel("axisLabel"),m=f.get("margin"),v=e.get("triggerEvent");le(u,function(x,C){var k=f,M=x.tickValue,E=a[cM(t)],V=t.coordToPoint([E+m,x.coord]),N=t.cx,G=t.cy,te=Math.abs(V[0]-N)/E<.3?"center":V[0]>N?"left":"right",J=Math.abs(V[1]-G)/E<.3?"middle":V[1]>G?"top":"bottom";l&&l[M]&&l[M].textStyle&&(k=new ei(l[M].textStyle,f,f.ecModel));var me=new Yo({silent:zc.isLabelSilent(e)});this.group.add(me),Ta(me.style,k,{x:V[0],y:V[1],textFill:k.getTextColor()||e.get("axisLine.lineStyle.color"),text:x.formattedLabel,textAlign:te,textVerticalAlign:J}),v&&(me.eventData=zc.makeAxisEventDataBase(e),me.eventData.targetType="axisLabel",me.eventData.value=x.rawLabel)},this)},_splitLine:function(e,t,n,o,a){var u=e.getModel("splitLine").getModel("lineStyle"),l=u.get("color"),f=0;l=l instanceof Array?l:[l];for(var m=[],v=0;v<n.length;v++){var x=f++%l.length;m[x]=m[x]||[],m[x].push(new $s({shape:_m(t,a,n[v].coord)}))}for(v=0;v<m.length;v++)this.group.add(ts(m[v],{style:Ee({stroke:l[v%l.length]},u.getLineStyle()),silent:!0,z:e.get("z")}))},_minorSplitLine:function(e,t,n,o,a){if(o.length){for(var u=e.getModel("minorSplitLine").getModel("lineStyle"),l=[],f=0;f<o.length;f++)for(var m=0;m<o[f].length;m++)l.push(new $s({shape:_m(t,a,o[f][m].coord)}));this.group.add(ts(l,{style:u.getLineStyle(),silent:!0,z:e.get("z")}))}},_splitArea:function(e,t,n,o,a){if(n.length){var u=e.getModel("splitArea").getModel("areaStyle"),l=u.get("color"),f=0;l=l instanceof Array?l:[l];for(var m=[],v=Math.PI/180,x=-n[0].coord*v,C=Math.min(a[0],a[1]),k=Math.max(a[0],a[1]),M=e.get("clockwise"),E=1;E<n.length;E++){var V=f++%l.length;m[V]=m[V]||[],m[V].push(new nl({shape:{cx:t.cx,cy:t.cy,r0:C,r:k,startAngle:x,endAngle:-n[E].coord*v,clockwise:M},silent:!0})),x=-n[E].coord*v}for(E=0;E<m.length;E++)this.group.add(ts(m[E],{style:Ee({fill:l[E%l.length]},u.getAreaStyle()),silent:!0}))}}});var GO=["axisLine","axisTickLabel","axisName"],UO=["splitLine","splitArea","minorSplitLine"];Fc.extend({type:"radiusAxis",axisPointerClass:"PolarAxisPointer",render:function(e,t){if(this.group.removeAll(),e.get("show")){var n=e.axis,o=n.polar,a=o.getAngleAxis(),u=n.getTicksCoords(),l=n.getMinorTicksCoords(),f=a.getExtent()[0],m=n.getExtent(),v={position:[(C=o).cx,C.cy],rotation:f/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1},x=new zc(e,v);le(GO,x.add,x),this.group.add(x.getGroup()),le(UO,function(C){e.get(C+".show")&&!n.scale.isBlank()&&this["_"+C](e,o,f,m,u,l)},this)}var C},_splitLine:function(e,t,n,o,a){var u=e.getModel("splitLine").getModel("lineStyle"),l=u.get("color"),f=0;l=l instanceof Array?l:[l];for(var m=[],v=0;v<a.length;v++){var x=f++%l.length;m[x]=m[x]||[],m[x].push(new ku({shape:{cx:t.cx,cy:t.cy,r:a[v].coord}}))}for(v=0;v<m.length;v++)this.group.add(ts(m[v],{style:Ee({stroke:l[v%l.length],fill:null},u.getLineStyle()),silent:!0}))},_minorSplitLine:function(e,t,n,o,a,u){if(u.length){for(var l=e.getModel("minorSplitLine").getModel("lineStyle"),f=[],m=0;m<u.length;m++)for(var v=0;v<u[m].length;v++)f.push(new ku({shape:{cx:t.cx,cy:t.cy,r:u[m][v].coord}}));this.group.add(ts(f,{style:Ee({fill:null},l.getLineStyle()),silent:!0}))}},_splitArea:function(e,t,n,o,a){if(a.length){var u=e.getModel("splitArea").getModel("areaStyle"),l=u.get("color"),f=0;l=l instanceof Array?l:[l];for(var m=[],v=a[0].coord,x=1;x<a.length;x++){var C=f++%l.length;m[C]=m[C]||[],m[C].push(new nl({shape:{cx:t.cx,cy:t.cy,r0:v,r:a[x].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),v=a[x].coord}for(x=0;x<m.length;x++)this.group.add(ts(m[x],{style:Ee({fill:l[x%l.length]},u.getAreaStyle()),silent:!0}))}}});var jO=Ms.extend({makeElOption:function(e,t,n,o,a){var u=n.axis;"angle"===u.dim&&(this.animationThreshold=Math.PI/18);var l,f=u.polar,m=f.getOtherAxis(u).getExtent();l=u["dataTo"+eh(u.dim)](t);var v=o.get("type");if(v&&"none"!==v){var x=yh(o),C=qO[v](u,f,l,m,x);C.style=x,e.graphicKey=C.type,e.pointer=C}var k=o.get("label.margin");Ip(e,n,o,a,function(M,E,V,N,G){var te=E.axis,J=te.dataToCoord(M),me=N.getAngleAxis().getExtent()[0];me=me/180*Math.PI;var ge,pe,_e,Me=N.getRadiusAxis().getExtent();if("radius"===te.dim){var We=vi();Yc(We,We,me),Xc(We,We,[N.cx,N.cy]),ge=Ai([J,-G],We);var Ke=E.getModel("axisLabel").get("rotate")||0,et=zc.innerTextLayout(me,Ke*Math.PI/180,-1);pe=et.textAlign,_e=et.textVerticalAlign}else{var ut=Me[1];ge=N.coordToPoint([ut+G,J]);var lt=N.cx,vt=N.cy;pe=Math.abs(ge[0]-lt)/ut<.3?"center":ge[0]>lt?"left":"right",_e=Math.abs(ge[1]-vt)/ut<.3?"middle":ge[1]>vt?"top":"bottom"}return{position:ge,align:pe,verticalAlign:_e}}(t,n,0,f,k))}}),qO={line:function(e,t,n,o,a){return"angle"===e.dim?{type:"Line",shape:lS(t.coordToPoint([o[0],n]),t.coordToPoint([o[1],n]))}:{type:"Circle",shape:{cx:t.cx,cy:t.cy,r:n}}},shadow:function(e,t,n,o,a){var u=Math.max(1,e.getBandWidth()),l=Math.PI/180;return"angle"===e.dim?{type:"Sector",shape:uk(t.cx,t.cy,o[0],o[1],(-n-u/2)*l,(u/2-n)*l)}:{type:"Sector",shape:uk(t.cx,t.cy,n-u/2,n+u/2,0,2*Math.PI)}}};function nA(e,t){t.update="updateView",io(t,function(n,o){var a={};return o.eachComponent({mainType:"geo",query:n},function(u){u[e](n.name),le(u.coordinateSystem.regions,function(l){a[l.name]=u.isSelected(l.name)||!1})}),{selected:a,name:n.name}})}function l0(e,t,n){this._model=e}function SI(e,t,n,o){var a=n.calendarModel,u=n.seriesModel,l=a?a.coordinateSystem:u?u.coordinateSystem:null;return l===this?l[e](o):null}Fc.registerAxisPointerClass("PolarAxisPointer",jO),fa(pn(function(e,t,n){var o={},a=function(u){var l={};le(u,function(m,v){var x=m.getData(),C=m.coordinateSystem,k=C.getBaseAxis(),M=gS(C,k),E=k.getExtent(),V="category"===k.type?k.getBandWidth():Math.abs(E[1]-E[0])/x.count(),N=l[M]||{bandWidth:V,remainedWidth:V,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},G=N.stacks;l[M]=N;var te=JD(m);G[te]||N.autoWidthCount++,G[te]=G[te]||{width:0,maxWidth:0};var J=nr(m.get("barWidth"),V),me=nr(m.get("barMaxWidth"),V),ge=m.get("barGap"),pe=m.get("barCategoryGap");J&&!G[te].width&&(J=Math.min(N.remainedWidth,J),G[te].width=J,N.remainedWidth-=J),me&&(G[te].maxWidth=me),null!=ge&&(N.gap=ge),null!=pe&&(N.categoryGap=pe)});var f={};return le(l,function(m,v){f[v]={};var x=m.stacks,k=nr(m.categoryGap,m.bandWidth),M=nr(m.gap,1),E=m.remainedWidth,V=m.autoWidthCount,N=(E-k)/(V+(V-1)*M);N=Math.max(N,0),le(x,function(me,ge){var pe=me.maxWidth;pe&&pe<N&&(pe=Math.min(pe,E),me.width&&(pe=Math.min(pe,me.width)),E-=pe,me.width=pe,V--)}),N=(E-k)/(V+(V-1)*M),N=Math.max(N,0);var G,te=0;le(x,function(me,ge){me.width||(me.width=N),te+=(G=me).width*(1+M)}),G&&(te-=G.width*M);var J=-te/2;le(x,function(me,ge){f[v][ge]=f[v][ge]||{offset:J,width:me.width},J+=me.width*(1+M)})}),f}(ht(t.getSeriesByType(e),function(u){return!t.isSeriesFiltered(u)&&u.coordinateSystem&&"polar"===u.coordinateSystem.type}));t.eachSeriesByType(e,function(u){if("polar"===u.coordinateSystem.type){var l=u.getData(),f=u.coordinateSystem,m=f.getBaseAxis(),v=gS(f,m),x=JD(u),C=a[v][x],k=C.offset,M=C.width,E=f.getOtherAxis(m),V=u.coordinateSystem.cx,N=u.coordinateSystem.cy,G=u.get("barMinHeight")||0,te=u.get("barMinAngle")||0;o[x]=o[x]||[];for(var J=l.mapDimension(E.dim),me=l.mapDimension(m.dim),ge=nm(l,J),pe="radius"!==m.dim||!u.get("roundCap",!0),_e="radius"===E.dim?E.dataToRadius(0):E.dataToAngle(0),Me=0,We=l.count();Me<We;Me++){var Ke,et,ut,lt,vt=l.get(J,Me),Mt=l.get(me,Me),Pt=0<=vt?"p":"n",Ct=_e;if(ge&&(o[x][Mt]||(o[x][Mt]={p:_e,n:_e}),Ct=o[x][Mt][Pt]),"radius"===E.dim){var Zt=E.dataToRadius(vt)-_e,An=m.dataToAngle(Mt);Math.abs(Zt)<G&&(Zt=(Zt<0?-1:1)*G),et=(Ke=Ct)+Zt,lt=(ut=An-k)-M,ge&&(o[x][Mt][Pt]=et)}else{var Rn=E.dataToAngle(vt,pe)-_e,Cn=m.dataToRadius(Mt);Math.abs(Rn)<te&&(Rn=(Rn<0?-1:1)*te),et=(Ke=Cn+k)+M,lt=(ut=Ct)+Rn,ge&&(o[x][Mt][Pt]=lt)}l.setItemLayout(Me,{cx:V,cy:N,r0:Ke,r:et,startAngle:-ut*Math.PI/180,endAngle:-lt*Math.PI/180})}}},this)},"bar")),Ts({type:"polar"}),de(ci.extend({type:"geo",coordinateSystem:null,layoutMode:"box",init:function(e){ci.prototype.init.apply(this,arguments),Nh(e,"label",["show"])},optionUpdated:function(){var e=this.option,t=this;e.regions=Mw.getFilledRegions(e.regions,e.map,e.nameMap),this._optionModelMap=Qe(e.regions||[],function(n,o){return o.name&&n.set(o.name,new ei(o,t)),n},Gt()),this.updateSelectedMap(e.regions)},defaultOption:{zlevel:0,z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",color:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},getRegionModel:function(e){return this._optionModelMap.get(e)||new ei(null,this,this.ecModel)},getFormattedLabel:function(e,t){t=t||"normal";var n=this.getRegionModel(e).get(("normal"===t?"":t+".")+"label.formatter"),o={name:e};return"function"==typeof n?(o.status=t,n(o)):"string"==typeof n?n.replace("{a}",null!=e?e:""):void 0},setZoom:function(e){this.option.zoom=e},setCenter:function(e){this.option.center=e}}),pw),Ts({type:"geo",init:function(e,t){var n=new kw(t,!0);this._mapDraw=n,this.group.add(n.group)},render:function(e,t,n,o){if(!o||"geoToggleSelect"!==o.type||o.from!==this.uid){var a=this._mapDraw;e.get("show")?a.draw(e,t,n,this,o):this._mapDraw.group.removeAll(),this.group.silent=e.get("silent")}},dispose:function(){this._mapDraw&&this._mapDraw.remove()}}),nA("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),nA("select",{type:"geoSelect",event:"geoselected"}),nA("unSelect",{type:"geoUnSelect",event:"geounselected"}),l0.prototype={constructor:l0,type:"calendar",dimensions:["time","value"],getDimensionsInfo:function(){return[{name:"time",type:"time"},"value"]},getRangeInfo:function(){return this._rangeInfo},getModel:function(){return this._model},getRect:function(){return this._rect},getCellWidth:function(){return this._sw},getCellHeight:function(){return this._sh},getOrient:function(){return this._orient},getFirstDayOfWeek:function(){return this._firstDayOfWeek},getDateInfo:function(e){var t=(e=Cf(e)).getFullYear(),n=e.getMonth()+1;n=n<10?"0"+n:n;var o=e.getDate();o=o<10?"0"+o:o;var a=e.getDay();return{y:t,m:n,d:o,day:a=Math.abs((a+7-this.getFirstDayOfWeek())%7),time:e.getTime(),formatedDate:t+"-"+n+"-"+o,date:e}},getNextNDay:function(e,t){return 0===(t=t||0)||(e=new Date(this.getDateInfo(e).time)).setDate(e.getDate()+t),this.getDateInfo(e)},update:function(e,t){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,o=["width","height"],a=this._model.get("cellSize").slice(),u=this._model.getBoxLayoutParams(),l="horizontal"===this._orient?[n,7]:[7,n];le([0,1],function(x){v(a,x)&&(u[o[x]]=a[x]*l[x])});var f={width:t.getWidth(),height:t.getHeight()},m=this._rect=si(u,f);function v(x,C){return null!=x[C]&&"auto"!==x[C]}le([0,1],function(x){v(a,x)||(a[x]=m[o[x]]/l[x])}),this._sw=a[0],this._sh=a[1]},dataToPoint:function(e,t){en(e)&&(e=e[0]),null==t&&(t=!0);var n=this.getDateInfo(e),o=this._rangeInfo;if(t&&!(n.time>=o.start.time&&n.time<o.end.time+864e5))return[NaN,NaN];var u=n.day,l=this._getRangeInfo([o.start.time,n.formatedDate]).nthWeek;return"vertical"===this._orient?[this._rect.x+u*this._sw+this._sw/2,this._rect.y+l*this._sh+this._sh/2]:[this._rect.x+l*this._sw+this._sw/2,this._rect.y+u*this._sh+this._sh/2]},pointToData:function(e){var t=this.pointToDate(e);return t&&t.time},dataToRect:function(e,t){var n=this.dataToPoint(e,t);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},pointToDate:function(e){var t=Math.floor((e[0]-this._rect.x)/this._sw)+1,n=Math.floor((e[1]-this._rect.y)/this._sh)+1,o=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,t-1,o):this._getDateByWeeksAndDay(t,n-1,o)},convertToPixel:pn(SI,"dataToPoint"),convertFromPixel:pn(SI,"pointToData"),_initRangeOption:function(){var e=this._model.get("range"),t=e;if(en(t)&&1===t.length&&(t=t[0]),/^\d{4}$/.test(t)&&(e=[t+"-01-01",t+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(t)){var n=this.getDateInfo(t),o=n.date;o.setMonth(o.getMonth()+1);var a=this.getNextNDay(o,-1);e=[n.formatedDate,a.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(t)&&(e=[t,t]);var u=this._getRangeInfo(e);return u.start.time>u.end.time&&e.reverse(),e},_getRangeInfo:function(e){var t;(e=[this.getDateInfo(e[0]),this.getDateInfo(e[1])])[0].time>e[1].time&&(t=!0,e.reverse());var n=Math.floor(e[1].time/864e5)-Math.floor(e[0].time/864e5)+1,o=new Date(e[0].time),a=o.getDate(),u=e[1].date.getDate();o.setDate(a+n-1);var l=o.getDate();if(l!==u)for(var f=0<o.getTime()-e[1].time?1:-1;(l=o.getDate())!==u&&0<(o.getTime()-e[1].time)*f;)n-=f,o.setDate(l-f);var m=Math.floor((n+e[0].day+6)/7),v=t?1-m:m-1;return t&&e.reverse(),{range:[e[0].formatedDate,e[1].formatedDate],start:e[0],end:e[1],allDay:n,weeks:m,nthWeek:v,fweek:e[0].day,lweek:e[1].day}},_getDateByWeeksAndDay:function(e,t,n){var o=this._getRangeInfo(n);if(e>o.weeks||0===e&&t<o.fweek||e===o.weeks&&t>o.lweek)return!1;var a=7*(e-1)-o.fweek+t,u=new Date(o.start.time);return u.setDate(o.start.d+a),this.getDateInfo(u)}},l0.dimensions=l0.prototype.dimensions,l0.getDimensionsInfo=l0.prototype.getDimensionsInfo,l0.create=function(e,t){var n=[];return e.eachComponent("calendar",function(o){var a=new l0(o,e,t);n.push(a),o.coordinateSystem=a}),e.eachSeries(function(o){"calendar"===o.get("coordinateSystem")&&(o.coordinateSystem=n[o.get("calendarIndex")||0])}),n},lu.register("calendar",l0);var CI=ci.extend({type:"calendar",coordinateSystem:null,defaultOption:{zlevel:0,z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",nameMap:"en",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",nameMap:"en",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},init:function(e,t,n,o){var a=Fg(e);CI.superApply(this,"init",arguments),Ep(e,a)},mergeOption:function(e,t){CI.superApply(this,"mergeOption",arguments),Ep(this.option,e)}});function Ep(e,t){var n=e.cellSize;en(n)?1===n.length&&(n[1]=n[0]):n=e.cellSize=[n,n];var o=Ge([0,1],function(a){return function(u,l){return null!=u[ad[l][0]]||null!=u[ad[l][1]]&&null!=u[ad[l][2]]}(t,a)&&(n[a]="auto"),null!=n[a]&&"auto"!==n[a]});Ic(e,t,{type:"box",ignoreSize:o})}var kI={EN:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],CN:["\u4e00\u6708","\u4e8c\u6708","\u4e09\u6708","\u56db\u6708","\u4e94\u6708","\u516d\u6708","\u4e03\u6708","\u516b\u6708","\u4e5d\u6708","\u5341\u6708","\u5341\u4e00\u6708","\u5341\u4e8c\u6708"]},XO={EN:["S","M","T","W","T","F","S"],CN:["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"]};Ts({type:"calendar",_tlpoints:null,_blpoints:null,_firstDayOfMonth:null,_firstDayPoints:null,render:function(e,t,n){var o=this.group;o.removeAll();var a=e.coordinateSystem,u=a.getRangeInfo(),l=a.getOrient();this._renderDayRect(e,u,o),this._renderLines(e,u,l,o),this._renderYearText(e,u,l,o),this._renderMonthText(e,l,o),this._renderWeekText(e,u,l,o)},_renderDayRect:function(e,t,n){for(var o=e.coordinateSystem,a=e.getModel("itemStyle").getItemStyle(),u=o.getCellWidth(),l=o.getCellHeight(),f=t.start.time;f<=t.end.time;f=o.getNextNDay(f,1).time){var m=o.dataToRect([f],!1).tl,v=new fi({shape:{x:m[0],y:m[1],width:u,height:l},cursor:"default",style:a});n.add(v)}},_renderLines:function(e,t,n,o){var a=this,u=e.coordinateSystem,l=e.getModel("splitLine.lineStyle").getLineStyle(),f=e.get("splitLine.show"),m=l.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var v=t.start,x=0;v.time<=t.end.time;x++){k(v.formatedDate),0===x&&(v=u.getDateInfo(t.start.y+"-"+t.start.m));var C=v.date;C.setMonth(C.getMonth()+1),v=u.getDateInfo(C)}function k(M){a._firstDayOfMonth.push(u.getDateInfo(M)),a._firstDayPoints.push(u.dataToRect([M],!1).tl);var E=a._getLinePointsOfOneWeek(e,M,n);a._tlpoints.push(E[0]),a._blpoints.push(E[E.length-1]),f&&a._drawSplitline(E,l,o)}k(u.getNextNDay(t.end.time,1).formatedDate),f&&this._drawSplitline(a._getEdgesPoints(a._tlpoints,m,n),l,o),f&&this._drawSplitline(a._getEdgesPoints(a._blpoints,m,n),l,o)},_getEdgesPoints:function(e,t,n){var o=[e[0].slice(),e[e.length-1].slice()],a="horizontal"===n?0:1;return o[0][a]=o[0][a]-t/2,o[1][a]=o[1][a]+t/2,o},_drawSplitline:function(e,t,n){var o=new Zo({z2:20,shape:{points:e},style:t});n.add(o)},_getLinePointsOfOneWeek:function(e,t,n){var o=e.coordinateSystem;t=o.getDateInfo(t);for(var a=[],u=0;u<7;u++){var l=o.getNextNDay(t.time,u),f=o.dataToRect([l.time],!1);a[2*l.day]=f.tl,a[2*l.day+1]=f["horizontal"===n?"bl":"tr"]}return a},_formatterLabel:function(e,t){return"string"==typeof e&&e?id(e,t):"function"==typeof e?e(t):t.nameMap},_yearTextPositionControl:function(e,t,n,o,a){t=t.slice();var u=["center","bottom"];"bottom"===o?(t[1]+=a,u=["center","top"]):"left"===o?t[0]-=a:"right"===o?(t[0]+=a,u=["center","top"]):t[1]-=a;var l=0;return"left"!==o&&"right"!==o||(l=Math.PI/2),{rotation:l,position:t,style:{textAlign:u[0],textVerticalAlign:u[1]}}},_renderYearText:function(e,t,n,o){var a=e.getModel("yearLabel");if(a.get("show")){var u=a.get("margin"),l=a.get("position");l=l||("horizontal"!==n?"top":"left");var f=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],m=(f[0][0]+f[1][0])/2,v=(f[0][1]+f[1][1])/2,x="horizontal"===n?0:1,C={top:[m,f[x][1]],bottom:[m,f[1-x][1]],left:[f[1-x][0],v],right:[f[x][0],v]},k=t.start.y;+t.end.y>+t.start.y&&(k=k+"-"+t.end.y);var M=a.get("formatter"),V=this._formatterLabel(M,{start:t.start.y,end:t.end.y,nameMap:k}),N=new Yo({z2:30});Ta(N.style,a,{text:V}),N.attr(this._yearTextPositionControl(N,C[l],n,l,u)),o.add(N)}},_monthTextPositionControl:function(e,t,n,o,a){var u="left",l="top",f=e[0],m=e[1];return"horizontal"===n?(m+=a,t&&(u="center"),"start"===o&&(l="bottom")):(f+=a,t&&(l="middle"),"start"===o&&(u="right")),{x:f,y:m,textAlign:u,textVerticalAlign:l}},_renderMonthText:function(e,t,n){var o=e.getModel("monthLabel");if(o.get("show")){var a=o.get("nameMap"),u=o.get("margin"),l=o.get("position"),f=o.get("align"),m=[this._tlpoints,this._blpoints];Gn(a)&&(a=kI[a.toUpperCase()]||[]);var v="start"===l?0:1,x="horizontal"===t?0:1;u="start"===l?-u:u;for(var C="center"===f,k=0;k<m[v].length-1;k++){var M=m[v][k].slice(),E=this._firstDayOfMonth[k];C&&(M[x]=(this._firstDayPoints[k][x]+m[0][k+1][x])/2);var N=o.get("formatter"),G=a[+E.m-1],te={yyyy:E.y,yy:(E.y+"").slice(2),MM:E.m,M:+E.m,nameMap:G},J=this._formatterLabel(N,te),me=new Yo({z2:30});Ne(Ta(me.style,o,{text:J}),this._monthTextPositionControl(M,C,t,l,u)),n.add(me)}}},_weekTextPositionControl:function(e,t,n,o,a){var u="center",l="middle",f=e[0],m=e[1],v="start"===n;return"horizontal"===t?(f=f+o+(v?1:-1)*a[0]/2,u=v?"right":"left"):(m=m+o+(v?1:-1)*a[1]/2,l=v?"bottom":"top"),{x:f,y:m,textAlign:u,textVerticalAlign:l}},_renderWeekText:function(e,t,n,o){var a=e.getModel("dayLabel");if(a.get("show")){var u=e.coordinateSystem,l=a.get("position"),f=a.get("nameMap"),m=a.get("margin"),v=u.getFirstDayOfWeek();Gn(f)&&(f=XO[f.toUpperCase()]||[]);var x=u.getNextNDay(t.end.time,7-t.lweek).time,C=[u.getCellWidth(),u.getCellHeight()];m=nr(m,C["horizontal"===n?0:1]),"start"===l&&(x=u.getNextNDay(t.start.time,-(7+t.fweek)).time,m=-m);for(var k=0;k<7;k++){var M,E=u.getNextNDay(x,k),V=u.dataToRect([E.time],!1).center;M=Math.abs((k+v)%7);var N=new Yo({z2:30});Ne(Ta(N.style,a,{text:f[M]}),this._weekTextPositionControl(V,n,l,m,C)),o.add(N)}}}});var TI={path:null,compoundPath:null,group:mr,image:xi,text:Yo};da(function(e){var t=e.graphic;en(t)?e.graphic=t[0]&&t[0].elements?[e.graphic[0]]:[{elements:t}]:t&&!t.elements&&(e.graphic=[{elements:[t]}])});var Fy=eu({type:"graphic",defaultOption:{elements:[],parentId:null},_elOptionsToUpdate:null,mergeOption:function(e){var t=this.option.elements;this.option.elements=null,Fy.superApply(this,"mergeOption",arguments),this.option.elements=t},optionUpdated:function(e,t){var n=this.option,o=(t?n:e).elements,a=n.elements=t?[]:n.elements,u=[];this._flatten(o,u);var l=Gx(a,u);v0(l);var f=this._elOptionsToUpdate=[];le(l,function(v,x){var k,M,E,V,N,G,C=v.option;C&&(f.push(C),function(k,M){var E=k.exist;if(M.id=k.keyInfo.id,!M.type&&E&&(M.type=E.type),null==M.parentId){var V=M.parentOption;V?M.parentId=V.id:E&&(M.parentId=E.parentId)}M.parentOption=null}(v,C),k=a,M=x,V=Ne({},E=C),N=k[M],"merge"===(G=E.$action||"merge")?N?(xe(N,V,!0),Ic(N,V,{ignoreSize:!0}),W_(E,N)):k[M]=V:"replace"===G?k[M]=V:"remove"===G&&N&&(k[M]=null),function(k,M){!k||(k.hv=M.hv=[E2(M,["left","right"]),E2(M,["top","bottom"])],"group"===k.type&&(null==k.width&&(k.width=M.width=0),null==k.height&&(k.height=M.height=0)))}(a[x],C))},this);for(var m=a.length-1;0<=m;m--)null==a[m]?a.splice(m,1):delete a[m].$action},_flatten:function(e,t,n){le(e,function(o){if(o){n&&(o.parentOption=n),t.push(o);var a=o.children;"group"===o.type&&a&&this._flatten(a,t,o),delete o.children}},this)},useElOptionsToUpdate:function(){var e=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,e}});function MI(e,t,n,o){var a=n.type,u=new(TI.hasOwnProperty(a)?TI[a]:Ag(a))(n);t.add(u),o.set(e,u),u.__ecGraphicId=e}function dk(e,t){var n=e&&e.parent;n&&("group"===e.type&&e.traverse(function(o){dk(o,t)}),t.removeKey(e.__ecGraphicId),n.remove(e))}function E2(e,t){var n;return le(t,function(o){null!=e[o]&&"auto"!==e[o]&&(n=!0)}),n}Ts({type:"graphic",init:function(e,t){this._elMap=Gt()},render:function(e,t,n){e!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=e,this._updateElements(e),this._relocate(e,n)},_updateElements:function(e){var t=e.useElOptionsToUpdate();if(t){var n=this._elMap,o=this.group;le(t,function(a){var u=a.$action,l=a.id,f=n.get(l),m=a.parentId,v=null!=m?n.get(m):o,x=a.style;"text"===a.type&&x&&(a.hv&&a.hv[1]&&(x.textVerticalAlign=x.textBaseline=null),!x.hasOwnProperty("textFill")&&x.fill&&(x.textFill=x.fill),!x.hasOwnProperty("textStroke")&&x.stroke&&(x.textStroke=x.stroke));var M,C=(M=Ne({},M=a),le(["id","parentId","$action","hv","bounding"].concat(fb),function(E){delete M[E]}),M);u&&"merge"!==u?"replace"===u?(dk(f,n),MI(l,v,C,n)):"remove"===u&&dk(f,n):f?f.attr(C):MI(l,v,C,n);var k=n.get(l);k&&(k.__ecGraphicWidthOption=a.width,k.__ecGraphicHeightOption=a.height,function(M,E){var V=M.eventData;M.silent||M.ignore||V||(V=M.eventData={componentType:"graphic",componentIndex:E.componentIndex,name:M.name}),V&&(V.info=M.info)}(k,e))})}},_relocate:function(e,t){for(var n=e.option.elements,o=this.group,a=this._elMap,u=t.getWidth(),l=t.getHeight(),f=0;f<n.length;f++){var m=n[f];if((x=a.get(m.id))&&x.isGroup){var v=(C=x.parent)===o;x.__ecGraphicWidth=nr(x.__ecGraphicWidthOption,v?u:C.__ecGraphicWidth)||0,x.__ecGraphicHeight=nr(x.__ecGraphicHeightOption,v?l:C.__ecGraphicHeight)||0}}for(f=n.length-1;0<=f;f--){var x,C;(x=a.get((m=n[f]).id))&&hb(x,m,(C=x.parent)===o?{width:u,height:l}:{width:C.__ecGraphicWidth,height:C.__ecGraphicHeight},null,{hv:m.hv,boundingMode:m.bounding})}},_clear:function(){var e=this._elMap;e.each(function(t){dk(t,e)}),this._elMap=Gt()},dispose:function(){this._clear()}});var DI={};function gg(e,t){DI[e]=t}function rA(e){return DI[e]}var YO=eu({type:"toolbox",layoutMode:{type:"box",ignoreSize:!0},optionUpdated:function(){YO.superApply(this,"optionUpdated",arguments),le(this.option.feature,function(e,t){var n=rA(t);n&&xe(e,n.defaultOption)})},defaultOption:{show:!0,z:6,zlevel:0,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1}}});function AI(e,t){var n=Uh(t.get("padding")),o=t.getItemStyle(["color","opacity"]);return o.fill=t.get("backgroundColor"),new fi({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:o,silent:!0,z2:-1})}Ts({type:"toolbox",render:function(e,t,n,o){var x,C,k,M,E,V,N,a=this.group;if(a.removeAll(),e.get("show")){var u=+e.get("itemSize"),l=e.get("feature")||{},f=this._features||(this._features={}),m=[];le(l,function(x,C){m.push(C)}),new Af(this._featureNames||[],m).add(v).update(v).remove(pn(v,null)).execute(),this._featureNames=m,x=a,k=n,M=(C=e).getBoxLayoutParams(),E=C.get("padding"),N=si(M,V={width:k.getWidth(),height:k.getHeight()},E),Ud(C.get("orient"),x,C.get("itemGap"),N.width,N.height),hb(x,M,V,E),a.add(AI(a.getBoundingRect(),e)),a.eachChild(function(x){var C=x.__title,k=x.hoverStyle;if(k&&C){var M=bl(C,It(k)),E=x.position[0]+a.position[0],V=!1;x.position[1]+a.position[1]+u+M.height>n.getHeight()&&(k.textPosition="top",V=!0);var N=V?-5-M.height:u+8;E+M.width/2>n.getWidth()?(k.textPosition=["100%",N],k.textAlign="right"):E-M.width/2<0&&(k.textPosition=[0,N],k.textAlign="left")}})}function v(x,C){var k,M=m[x],E=m[C],V=l[M],N=new ei(V,e,e.ecModel);if(o&&null!=o.newTitle&&o.featureName===M&&(V.title=o.newTitle),M&&!E){if(0===M.indexOf("my"))k={model:N,onclick:N.option.onclick,featureName:M};else{var G=rA(M);if(!G)return;k=new G(N,t,n)}f[M]=k}else{if(!(k=f[E]))return;k.model=N,k.ecModel=t,k.api=n}M||!E?N.get("show")&&!k.unusable?(function(te,J,me){var ge=te.getModel("iconStyle"),pe=te.getModel("emphasis.iconStyle"),_e=J.getIcons?J.getIcons():te.get("icon"),Me=te.get("title")||{};if("string"==typeof _e){var We=_e,Ke=Me;Me={},(_e={})[me]=We,Me[me]=Ke}var et=te.iconPaths={};le(_e,function(ut,lt){var vt=qm(ut,{},{x:-u/2,y:-u/2,width:u,height:u});vt.setStyle(ge.getItemStyle()),vt.hoverStyle=pe.getItemStyle(),vt.setStyle({text:Me[lt],textAlign:pe.get("textAlign"),textBorderRadius:pe.get("textBorderRadius"),textPadding:pe.get("textPadding"),textFill:null});var Mt=e.getModel("tooltip");Mt&&Mt.get("show")&&vt.attr("tooltip",Ne({content:Me[lt],formatter:Mt.get("formatter",!0)||function(){return Me[lt]},formatterParams:{componentType:"toolbox",name:lt,title:Me[lt],$vars:["name","title"]},position:Mt.get("position",!0)||"bottom"},Mt.option)),Go(vt),e.get("showTitle")&&(vt.__title=Me[lt],vt.on("mouseover",function(){var Pt=pe.getItemStyle(),Ct="vertical"===e.get("orient")?null==e.get("right")?"right":"left":null==e.get("bottom")?"bottom":"top";vt.setStyle({textFill:pe.get("textFill")||Pt.fill||Pt.stroke||"#000",textBackgroundColor:pe.get("textBackgroundColor"),textPosition:pe.get("textPosition")||Ct})}).on("mouseout",function(){vt.setStyle({textFill:null,textBackgroundColor:null})})),vt.trigger(te.get("iconStatus."+lt)||"normal"),a.add(vt),vt.on("click",Rt(J.onclick,J,t,n,lt)),et[lt]=vt})}(N,k,M),N.setIconStatus=function(te,J){var me=this.option,ge=this.iconPaths;me.iconStatus=me.iconStatus||{},me.iconStatus[te]=J,ge[te]&&ge[te].trigger(J)},k.render&&k.render(N,t,n,o)):k.remove&&k.remove(t,n):k.dispose&&k.dispose(t,n)}},updateView:function(e,t,n,o){le(this._features,function(a){a.updateView&&a.updateView(a.model,t,n,o)})},remove:function(e,t){le(this._features,function(n){n.remove&&n.remove(e,t)}),this.group.removeAll()},dispose:function(e,t){le(this._features,function(n){n.dispose&&n.dispose(e,t)})}});var P2=Dr.toolbox.saveAsImage;function N2(e){this.model=e}N2.defaultOption={show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:P2.title,type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],pixelRatio:1,lang:P2.lang.slice()},N2.prototype.unusable=!Ze.canvasSupported,N2.prototype.onclick=function(e,t){var n=this.model,o=n.get("name")||e.get("title.0.text")||"echarts",a="svg"===t.getZr().painter.getType()?"svg":n.get("type",!0)||"png",u=t.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||e.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")});if("function"!=typeof MouseEvent||Ze.browser.ie||Ze.browser.edge)if(window.navigator.msSaveOrOpenBlob){for(var l=atob(u.split(",")[1]),f=l.length,m=new Uint8Array(f);f--;)m[f]=l.charCodeAt(f);var v=new Blob([m]);window.navigator.msSaveOrOpenBlob(v,o+"."+a)}else{var x=n.get("lang"),C='<body style="margin:0;"><img src="'+u+'" style="max-width:100%;" title="'+(x&&x[0]||"")+'" /></body>';window.open().document.write(C)}else{var k=document.createElement("a");k.download=o+"."+a,k.target="_blank",k.href=u;var M=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});k.dispatchEvent(M)}},gg("saveAsImage",N2);var R2=Dr.toolbox.magicType,Sx="__ec_magicType_stack__";function oA(e){this.model=e}oA.defaultOption={show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:ie(R2.title),option:{},seriesIndex:{}};var II=oA.prototype;II.getIcons=function(){var e=this.model,t=e.get("icon"),n={};return le(e.get("type"),function(o){t[o]&&(n[o]=t[o])}),n};var dM={line:function(e,t,n,o){if("bar"===e)return xe({id:t,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get("option.line")||{},!0)},bar:function(e,t,n,o){if("line"===e)return xe({id:t,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},o.get("option.bar")||{},!0)},stack:function(e,t,n,o){var a=n.get("stack")===Sx;if("line"===e||"bar"===e)return o.setIconStatus("stack",a?"normal":"emphasis"),xe({id:t,stack:a?"":Sx},o.get("option.stack")||{},!0)}},OI=[["line","bar"],["stack"]];II.onclick=function(e,t,n){var o=this.model,a=o.get("seriesIndex."+n);if(dM[n]){var u,l={series:[]};le(OI,function(f){0<=$e(f,n)&&le(f,function(m){o.setIconStatus(m,"normal")})}),o.setIconStatus(n,"emphasis"),e.eachComponent({mainType:"series",query:null==a?null:{seriesIndex:a}},function(f){var x=dM[n](f.subType,f.id,f,o);x&&(Ee(x,f.option),l.series.push(x));var C=f.coordinateSystem;if(C&&"cartesian2d"===C.type&&("line"===n||"bar"===n)){var k=C.getAxesByScale("ordinal")[0];if(k){var M=k.dim+"Axis",E=e.queryComponents({mainType:M,index:f.get(name+"Index"),id:f.get(name+"Id")})[0].componentIndex;l[M]=l[M]||[];for(var V=0;V<=E;V++)l[M][E]=l[M][E]||{};l[M][E].boundaryGap="bar"===n}}}),"stack"===n&&(u=l.series&&l.series[0]&&l.series[0].stack===Sx?xe({stack:R2.title.tiled},R2.title):ie(R2.title)),t.dispatchAction({type:"changeMagicType",currentType:n,newOption:l,newTitle:u,featureName:"magicType"})}},io({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},function(e,t){t.mergeOption(e.newOption)}),gg("magicType",oA);var EI=Dr.toolbox.dataView,L2=new Array(60).join("-");function B2(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var iA=new RegExp("[\t]+","g");function fM(e){this._dom=null,this.model=e}fM.defaultOption={show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:ie(EI.title),lang:ie(EI.lang),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"},fM.prototype.onclick=function(e,t){var n=t.getDom(),o=this.model;this._dom&&n.removeChild(this._dom);var a=document.createElement("div");a.style.cssText="position:absolute;left:5px;top:5px;bottom:5px;right:5px;",a.style.backgroundColor=o.get("backgroundColor")||"#fff";var u=document.createElement("h4"),l=o.get("lang")||[];u.innerHTML=l[0]||o.get("title"),u.style.cssText="margin: 10px 20px;",u.style.color=o.get("textColor");var f=document.createElement("div"),m=document.createElement("textarea");f.style.cssText="display:block;width:100%;overflow:auto;";var v=o.get("optionToContent"),x=o.get("contentToOption"),C=function ZO(e){var t=function(n){var o={},a=[],u=[];return n.eachRawSeries(function(l){var f=l.coordinateSystem;if(!f||"cartesian2d"!==f.type&&"polar"!==f.type)a.push(l);else{var m=f.getBaseAxis();if("category"===m.type){var v=m.dim+"_"+m.index;o[v]||(o[v]={categoryAxis:m,valueAxis:f.getOtherAxis(m),series:[]},u.push({axisDim:m.dim,axisIndex:m.index})),o[v].series.push(l)}else a.push(l)}}),{seriesGroupByCategoryAxis:o,other:a,meta:u}}(e);return{value:ht([function(n){var o=[];return le(n,function(a,u){var l=a.categoryAxis,f=a.valueAxis.dim,m=[" "].concat(Ge(a.series,function(E){return E.name})),v=[l.model.getCategories()];le(a.series,function(E){var V=E.getRawData();v.push(E.getRawData().mapArray(V.mapDimension(f),function(N){return N}))});for(var x=[m.join("\t")],C=0;C<v[0].length;C++){for(var k=[],M=0;M<v.length;M++)k.push(v[M][C]);x.push(k.join("\t"))}o.push(x.join("\n"))}),o.join("\n\n"+L2+"\n\n")}(t.seriesGroupByCategoryAxis),function(n){return Ge(n,function(o){var a=o.getRawData(),u=[o.name],l=[];return a.each(a.dimensions,function(){for(var f=arguments.length,v=a.getName(arguments[f-1]),x=0;x<f-1;x++)l[x]=arguments[x];u.push((v?v+"\t":"")+l.join("\t"))}),u.join("\n")}).join("\n\n"+L2+"\n\n")}(t.other)],function(n){return n.replace(/[\n\t\s]/g,"")}).join("\n\n"+L2+"\n\n"),meta:t.meta}}(e);if("function"==typeof v){var k=v(t.getOption());"string"==typeof k?f.innerHTML=k:wo(k)&&f.appendChild(k)}else f.appendChild(m),m.readOnly=o.get("readOnly"),m.style.cssText="width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;",m.style.color=o.get("textColor"),m.style.borderColor=o.get("textareaBorderColor"),m.style.backgroundColor=o.get("textareaColor"),m.value=C.value;var M=C.meta,E=document.createElement("div");E.style.cssText="position:absolute;bottom:0;left:0;right:0;";var V="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",N=document.createElement("div"),G=document.createElement("div");V+=";background-color:"+o.get("buttonColor"),V+=";color:"+o.get("buttonTextColor");var te=this;function J(){n.removeChild(a),te._dom=null}Wr(N,"click",J),Wr(G,"click",function(){var me;try{me="function"==typeof x?x(f,t.getOption()):function KO(e,t){var n=e.split(new RegExp("\n*"+L2+"\n*","g")),o={series:[]};return le(n,function(a,u){if(function(v){if(0<=v.slice(0,v.indexOf("\n")).indexOf("\t"))return!0}(a)){var l=function(v){for(var x=v.split(/\n+/g),C=[],k=Ge(B2(x.shift()).split(iA),function(N){return{name:N,data:[]}}),M=0;M<x.length;M++){var E=B2(x[M]).split(iA);C.push(E.shift());for(var V=0;V<E.length;V++)k[V]&&(k[V].data[M]=E[V])}return{series:k,categories:C}}(a),f=t[u],m=f.axisDim+"Axis";f&&(o[m]=o[m]||[],o[m][f.axisIndex]={data:l.categories},o.series=o.series.concat(l.series))}else l=function(v){for(var x=v.split(/\n+/g),C=B2(x.shift()),k=[],M=0;M<x.length;M++){var E=B2(x[M]);if(E){var V,N=E.split(iA),G="",te=!1;V=isNaN(N[0])?(te=!0,G=N[0],N=N.slice(1),k[M]={name:G,value:[]},k[M].value):k[M]=[];for(var J=0;J<N.length;J++)V.push(+N[J]);1===V.length&&(te?k[M].value=V[0]:k[M]=V[0])}}return{name:C,data:k}}(a),o.series.push(l)}),o}(m.value,M)}catch(ge){throw J(),new Error("Data view format error "+ge)}me&&t.dispatchAction({type:"changeDataView",newOption:me}),J()}),N.innerHTML=l[1],G.innerHTML=l[2],G.style.cssText=V,N.style.cssText=V,o.get("readOnly")||E.appendChild(G),E.appendChild(N),a.appendChild(u),a.appendChild(f),a.appendChild(E),f.style.height=n.clientHeight-80+"px",n.appendChild(a),this._dom=a},fM.prototype.remove=function(e,t){this._dom&&t.getDom().removeChild(this._dom)},fM.prototype.dispose=function(e,t){this.remove(e,t)},gg("dataView",fM),io({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},function(e,t){var n=[];le(e.newOption.series,function(o){var l,f,a=t.getSeriesByName(o.name)[0];if(a){var u=a.get("data");n.push({name:o.name,data:(l=o.data,f=u,Ge(l,function(m,v){var x=f&&f[v];if(!ln(x)||en(x))return m;ln(m)&&!en(m)||(m={value:m});var C=null!=x.name&&null==m.name;return m=Ee(m,x),C&&delete m.name,m}))})}else n.push(Ne({type:"scatter"},o))}),t.mergeOption(Ee({series:n},e.newOption))});var v_=le,z2=$e,Ka=pn,F2=["dataToPoint","pointToData"],$O=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"];function V2(e,t,n){var o=this._targetInfoList=[],a={},u=aA(t,e);v_(PI,function(l,f){n&&n.include&&!(0<=z2(n.include,f))||l(u,o,a)})}var y_=V2.prototype;function H2(e){return e[0]>e[1]&&e.reverse(),e}function aA(e,t){return Xl(e,t,{includeMainTypes:$O})}y_.setOutputRanges=function(e,t){this.matchOutputRanges(e,t,function(n,o,a){if((n.coordRanges||(n.coordRanges=[])).push(o),!n.coordRange){n.coordRange=o;var u=W2[n.brushType](0,a,o);n.__rangeOffset={offset:NI[n.brushType](u.values,n.range,[1,1]),xyMinMax:u.xyMinMax}}})},y_.matchOutputRanges=function(e,t,n){v_(e,function(o){var a=this.findTargetInfo(o,t);a&&!0!==a&&le(a.coordSyses,function(u){var l=W2[o.brushType](1,u,o.range);n(o,l.values,u,t)})},this)},y_.setInputRanges=function(e,t){v_(e,function(n){var f,m,v,x,o=this.findTargetInfo(n,t);if(n.range=n.range||[],o&&!0!==o){n.panelId=o.panelId;var a=W2[n.brushType](0,o.coordSys,n.coordRange),u=n.__rangeOffset;n.range=u?NI[n.brushType](a.values,u.offset,(f=u.xyMinMax,m=cA(a.xyMinMax),v=cA(f),x=[m[0]/v[0],m[1]/v[1]],isNaN(x[0])&&(x[0]=1),isNaN(x[1])&&(x[1]=1),x)):a.values}},this)},y_.makePanelOpts=function(e,t){return Ge(this._targetInfoList,function(n){var o=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:t&&t(n),clipPath:Kw(o),isTargetByCursor:Dp(o,e,n.coordSysModel),getLinearBrushOtherExtent:YT(o)}})},y_.controlSeries=function(e,t,n){var o=this.findTargetInfo(e,n);return!0===o||o&&0<=z2(o.coordSyses,t.coordinateSystem)},y_.findTargetInfo=function(e,t){for(var n=this._targetInfoList,o=aA(t,e),a=0;a<n.length;a++){var u=n[a],l=e.panelId;if(l){if(u.panelId===l)return u}else for(a=0;a<sA.length;a++)if(sA[a](o,u))return u}return!0};var PI={grid:function(e,t){var n=e.xAxisModels,o=e.yAxisModels,a=e.gridModels,u=Gt(),l={},f={};(n||o||a)&&(v_(n,function(m){var v=m.axis.grid.model;u.set(v.id,v),l[v.id]=!0}),v_(o,function(m){var v=m.axis.grid.model;u.set(v.id,v),f[v.id]=!0}),v_(a,function(m){u.set(m.id,m),l[m.id]=!0,f[m.id]=!0}),u.each(function(m){var x=[];v_(m.coordinateSystem.getCartesians(),function(C,k){(0<=z2(n,C.getAxis("x").model)||0<=z2(o,C.getAxis("y").model))&&x.push(C)}),t.push({panelId:"grid--"+m.id,gridModel:m,coordSysModel:m,coordSys:x[0],coordSyses:x,getPanelRect:uA.grid,xAxisDeclared:l[m.id],yAxisDeclared:f[m.id]})}))},geo:function(e,t){v_(e.geoModels,function(n){var o=n.coordinateSystem;t.push({panelId:"geo--"+n.id,geoModel:n,coordSysModel:n,coordSys:o,coordSyses:[o],getPanelRect:uA.geo})})}},sA=[function(e,t){var n=e.xAxisModel,o=e.yAxisModel,a=e.gridModel;return!a&&n&&(a=n.axis.grid.model),!a&&o&&(a=o.axis.grid.model),a&&a===t.gridModel},function(e,t){var n=e.geoModel;return n&&n===t.geoModel}],uA={grid:function(){return this.coordSys.grid.getRect().clone()},geo:function(){var e=this.coordSys,t=e.getBoundingRect().clone();return t.applyTransform(Wd(e)),t}},W2={lineX:Ka(lA,0),lineY:Ka(lA,1),rect:function(e,t,n){var o=t[F2[e]]([n[0][0],n[1][0]]),a=t[F2[e]]([n[0][1],n[1][1]]),u=[H2([o[0],a[0]]),H2([o[1],a[1]])];return{values:u,xyMinMax:u}},polygon:function(e,t,n){var o=[[1/0,-1/0],[1/0,-1/0]];return{values:Ge(n,function(a){var u=t[F2[e]](a);return o[0][0]=Math.min(o[0][0],u[0]),o[1][0]=Math.min(o[1][0],u[1]),o[0][1]=Math.max(o[0][1],u[0]),o[1][1]=Math.max(o[1][1],u[1]),u}),xyMinMax:o}}};function lA(e,t,n,o){var a=n.getAxis(["x","y"][e]),u=H2(Ge([0,1],function(f){return t?a.coordToData(a.toLocalCoord(o[f])):a.toGlobalCoord(a.dataToCoord(o[f]))})),l=[];return l[e]=u,l[1-e]=[NaN,NaN],{values:u,xyMinMax:l}}var NI={lineX:Ka(RI,0),lineY:Ka(RI,1),rect:function(e,t,n){return[[e[0][0]-n[0]*t[0][0],e[0][1]-n[0]*t[0][1]],[e[1][0]-n[1]*t[1][0],e[1][1]-n[1]*t[1][1]]]},polygon:function(e,t,n){return Ge(e,function(o,a){return[o[0]-n[0]*t[a][0],o[1]-n[1]*t[a][1]]})}};function RI(e,t,n,o){return[t[0]-o[e]*n[0],t[1]-o[e]*n[1]]}function cA(e){return e?[e[0][1]-e[0][0],e[1][1]-e[1][0]]:[NaN,NaN]}var G2=le,U2="\0_ec_hist_store";function mS(e){return e[U2]||(e[U2]=[{}])}ci.registerSubTypeDefaulter("dataZoom",function(){return"slider"});var hM,pS,gM,dA,LI=["cartesian2d","polar","singleAxis"],BI=(pS=["axisIndex","axis","index","id"],gM=Ge(hM=(hM=["x","y","z","radius","angle","single"]).slice(),eh),dA=Ge(pS=(pS||[]).slice(),eh),function(e,t){le(hM,function(n,o){for(var a={name:n,capital:gM[o]},u=0;u<pS.length;u++)a[pS[u]]=n+dA[u];e.call(t,a)})});function j2(e,t,n,o){this._dimName=e,this._axisIndex=t,this.ecModel=o,this._dataZoomModel=n}var b_=le,q2=Pg;function fA(e,t){var n=e.getAxisModel(),o=e._percentWindow,a=e._valueWindow;if(o){var u=Qx(a,[0,500]);u=Math.min(u,20);var l=t||0===o[0]&&100===o[1];n.setRange(l?null:+a[0].toFixed(u),l?null:+a[1].toFixed(u))}}j2.prototype={constructor:j2,hostedBy:function(e){return this._dataZoomModel===e},getDataValueWindow:function(){return this._valueWindow.slice()},getDataPercentWindow:function(){return this._percentWindow.slice()},getTargetSeriesModels:function(){var e=[],t=this.ecModel;return t.eachSeries(function(n){if(function(u){return 0<=$e(LI,u)}(n.get("coordinateSystem"))){var o=this._dimName,a=t.queryComponents({mainType:o+"Axis",index:n.get(o+"AxisIndex"),id:n.get(o+"AxisId")})[0];this._axisIndex===(a&&a.componentIndex)&&e.push(n)}},this),e},getAxisModel:function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},getOtherAxisModel:function(){var e,t,n,o=this._dimName,a=this.ecModel,u=this.getAxisModel();return e="x"===o||"y"===o?(t="gridIndex","x"===o?"y":"x"):(t="polarIndex","angle"===o?"radius":"angle"),a.eachComponent(e+"Axis",function(l){(l.get(t)||0)===(u.get(t)||0)&&(n=l)}),n},getMinMaxSpan:function(){return ie(this._minMaxSpan)},calculateDataWindow:function(e){var t,n=this._dataExtent,o=this.getAxisModel().axis.scale,a=this._dataZoomModel.getRangePropMode(),u=[0,100],l=[],f=[];b_(["start","end"],function(x,C){var k=e[x],M=e[x+"Value"];"percent"===a[C]?(null==k&&(k=u[C]),M=o.parse(hi(k,u,n))):(t=!0,k=hi(M=null==M?n[C]:o.parse(M),n,u)),f[C]=M,l[C]=k}),q2(f),q2(l);var m=this._minMaxSpan;function v(x,C,k,M,E){var V=E?"Span":"ValueSpan";Dy(0,x,k,"all",m["min"+V],m["max"+V]);for(var N=0;N<2;N++)C[N]=hi(x[N],k,M,!0),E&&(C[N]=o.parse(C[N]))}return t?v(f,l,n,u,!1):v(l,f,u,n,!0),{valueWindow:f,percentWindow:l}},reset:function(e){if(e===this._dataZoomModel){var t=this.getTargetSeriesModels();this._dataExtent=function(o,a,u){var l=[1/0,-1/0];return b_(u,function(f){var m=f.getData();m&&b_(m.mapDimension(a,!0),function(v){var x=m.getApproximateExtent(v);x[0]<l[0]&&(l[0]=x[0]),x[1]>l[1]&&(l[1]=x[1])})}),l[1]<l[0]&&(l=[NaN,NaN]),function(f,m){var v=f.getAxisModel(),x=v.getMin(!0),C="category"===v.get("type"),k=C&&v.getCategories().length;null!=x&&"dataMin"!==x&&"function"!=typeof x?m[0]=x:C&&(m[0]=0<k?0:NaN);var M=v.getMax(!0);null!=M&&"dataMax"!==M&&"function"!=typeof M?m[1]=M:C&&(m[1]=0<k?k-1:NaN),v.get("scale",!0)||(0<m[0]&&(m[0]=0),m[1]<0&&(m[1]=0))}(o,l),l}(this,this._dimName,t),function(o){var a=o._minMaxSpan={},u=o._dataZoomModel,l=o._dataExtent;b_(["min","max"],function(f){var m=u.get(f+"Span"),v=u.get(f+"ValueSpan");null!=v&&(v=o.getAxisModel().axis.scale.parse(v)),null!=v?m=hi(l[0]+v,l,[0,100],!0):null!=m&&(v=hi(m,[0,100],l,!0)-l[0]),a[f+"Span"]=m,a[f+"ValueSpan"]=v})}(this);var n=this.calculateDataWindow(e.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,fA(this)}},restore:function(e){e===this._dataZoomModel&&(this._valueWindow=this._percentWindow=null,fA(this,!0))},filterData:function(e,t){if(e===this._dataZoomModel){var n=this._dimName,o=this.getTargetSeriesModels(),a=e.get("filterMode"),u=this._valueWindow;"none"!==a&&b_(o,function(l){var f=l.getData(),m=f.mapDimension(n,!0);m.length&&("weakFilter"===a?f.filterSelf(function(v){for(var x,C,k,M=0;M<m.length;M++){var E=f.get(m[M],v),V=!isNaN(E),N=E<u[0],G=E>u[1];if(V&&!N&&!G)return!0;V&&(k=!0),N&&(x=!0),G&&(C=!0)}return k&&x&&C}):b_(m,function(v){if("empty"===a)l.setData(f=f.map(v,function(C){return(k=C)>=u[0]&&k<=u[1]?C:NaN;var k}));else{var x={};x[v]=u,f.selectRange(x)}}),b_(m,function(v){f.setApproximateExtent(u,v)}))})}}};var x_=le,vS=BI,mM=eu({type:"dataZoom",dependencies:["xAxis","yAxis","zAxis","radiusAxis","angleAxis","singleAxis","series"],defaultOption:{zlevel:0,z:4,orient:null,xAxisIndex:null,yAxisIndex:null,filterMode:"filter",throttle:null,start:0,end:100,startValue:null,endValue:null,minSpan:null,maxSpan:null,minValueSpan:null,maxValueSpan:null,rangeMode:null},init:function(e,t,n){this._dataIntervalByAxis={},this._dataInfo={},this._axisProxies={},this._autoThrottle=!0,this._rangePropMode=["percent","percent"];var o=FI(e);this.settledOption=o,this.mergeDefaultAndTheme(e,n),this.doInit(o)},mergeOption:function(e){var t=FI(e);xe(this.option,e,!0),xe(this.settledOption,t,!0),this.doInit(t)},doInit:function(e){var t=this.option;Ze.canvasSupported||(t.realtime=!1),this._setDefaultThrottle(e),VI(this,e);var n=this.settledOption;x_([["start","startValue"],["end","endValue"]],function(o,a){"value"===this._rangePropMode[a]&&(t[o[0]]=n[o[0]]=null)},this),this.textStyleModel=this.getModel("textStyle"),this._resetTarget(),this._giveAxisProxies()},_giveAxisProxies:function(){var e=this._axisProxies;this.eachTargetAxis(function(t,n,o,a){var u=this.dependentModels[t.axis][n],l=u.__dzAxisProxy||(u.__dzAxisProxy=new j2(t.name,n,this,a));e[t.name+"_"+n]=l},this)},_resetTarget:function(){var e=this.option,t=this._judgeAutoMode();vS(function(n){var o=n.axisIndex;e[o]=Ls(e[o])},this),"axisIndex"===t?this._autoSetAxisIndex():"orient"===t&&this._autoSetOrient()},_judgeAutoMode:function(){var e=this.option,t=!1;vS(function(o){null!=e[o.axisIndex]&&(t=!0)},this);var n=e.orient;return null==n&&t?"orient":t?void 0:(null==n&&(e.orient="horizontal"),"axisIndex")},_autoSetAxisIndex:function(){var e=!0,t=this.get("orient",!0),n=this.option,o=this.dependentModels;if(e){var a="vertical"===t?"y":"x";o[a+"Axis"].length?(n[a+"AxisIndex"]=[0],e=!1):x_(o.singleAxis,function(u){e&&u.get("orient",!0)===t&&(n.singleAxisIndex=[u.componentIndex],e=!1)})}e&&vS(function(u){if(e){var l=[],f=this.dependentModels[u.axis];if(f.length&&!l.length)for(var m=0,v=f.length;m<v;m++)"category"===f[m].get("type")&&l.push(m);(n[u.axisIndex]=l).length&&(e=!1)}},this),e&&this.ecModel.eachSeries(function(u){this._isSeriesHasAllAxesTypeOf(u,"value")&&vS(function(l){var f=n[l.axisIndex],m=u.get(l.axisIndex),v=u.get(l.axisId);$e(f,m=u.ecModel.queryComponents({mainType:l.axis,index:m,id:v})[0].componentIndex)<0&&f.push(m)})},this)},_autoSetOrient:function(){var e;this.eachTargetAxis(function(t){e=e||t.name},this),this.option.orient="y"===e?"vertical":"horizontal"},_isSeriesHasAllAxesTypeOf:function(e,t){var n=!0;return vS(function(o){var a=e.get(o.axisIndex),u=this.dependentModels[o.axis][a];u&&u.get("type")===t||(n=!1)},this),n},_setDefaultThrottle:function(e){if(e.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var t=this.ecModel.option;this.option.throttle=t.animation&&0<t.animationDurationUpdate?100:20}},getFirstTargetAxisModel:function(){var e;return vS(function(t){if(null==e){var n=this.get(t.axisIndex);n.length&&(e=this.dependentModels[t.axis][n[0]])}},this),e},eachTargetAxis:function(e,t){var n=this.ecModel;vS(function(o){x_(this.get(o.axisIndex),function(a){e.call(t,o,a,this,n)},this)},this)},getAxisProxy:function(e,t){return this._axisProxies[e+"_"+t]},getAxisModel:function(e,t){var n=this.getAxisProxy(e,t);return n&&n.getAxisModel()},setRawRange:function(e){var t=this.option,n=this.settledOption;x_([["start","startValue"],["end","endValue"]],function(o){null==e[o[0]]&&null==e[o[1]]||(t[o[0]]=n[o[0]]=e[o[0]],t[o[1]]=n[o[1]]=e[o[1]])},this),VI(this,e)},setCalculatedRange:function(e){var t=this.option;x_(["start","startValue","end","endValue"],function(n){t[n]=e[n]})},getPercentRange:function(){var e=this.findRepresentativeAxisProxy();if(e)return e.getDataPercentWindow()},getValueRange:function(e,t){if(null!=e||null!=t)return this.getAxisProxy(e,t).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},findRepresentativeAxisProxy:function(e){if(e)return e.__dzAxisProxy;var t=this._axisProxies;for(var n in t)if(t.hasOwnProperty(n)&&t[n].hostedBy(this))return t[n];for(var n in t)if(t.hasOwnProperty(n)&&!t[n].hostedBy(this))return t[n]},getRangePropMode:function(){return this._rangePropMode.slice()}});function FI(e){var t={};return x_(["start","end","startValue","endValue","throttle"],function(n){e.hasOwnProperty(n)&&(t[n]=e[n])}),t}function VI(e,t){var n=e._rangePropMode,o=e.get("rangeMode");x_([["start","startValue"],["end","endValue"]],function(a,u){var l=null!=t[a[0]],f=null!=t[a[1]];l&&!f?n[u]="percent":!l&&f?n[u]="value":o?n[u]=o[u]:l&&(n[u]="percent")})}var hA=rh.extend({type:"dataZoom",render:function(e,t,n,o){this.dataZoomModel=e,this.ecModel=t,this.api=n},getTargetCoordInfo:function(){var t=this.ecModel,n={};return this.dataZoomModel.eachTargetAxis(function(o,a){var u=t.getComponent(o.axis,a);if(u){var l=u.getCoordSysModel();l&&function(f,m,v,x){for(var C,k=0;k<v.length;k++)if(v[k].model===f){C=v[k];break}C||v.push(C={model:f,axisModels:[],coordIndex:x}),C.axisModels.push(m)}(l,u,n[l.mainType]||(n[l.mainType]=[]),l.componentIndex)}},this),n}});mM.extend({type:"dataZoom.select"}),hA.extend({type:"dataZoom.select"}),Ii({getTargetSeries:function(e){var t=Gt();return e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(o,a,u){le(u.getAxisProxy(o.name,a).getTargetSeriesModels(),function(l){t.set(l.uid,l)})})}),t},modifyOutputEnd:!0,overallReset:function(e,t){e.eachComponent("dataZoom",function(n){n.eachTargetAxis(function(o,a,u){u.getAxisProxy(o.name,a).reset(u,t)}),n.eachTargetAxis(function(o,a,u){u.getAxisProxy(o.name,a).filterData(u,t)})}),e.eachComponent("dataZoom",function(n){var o=n.findRepresentativeAxisProxy(),a=o.getDataPercentWindow(),u=o.getDataValueWindow();n.setCalculatedRange({start:a[0],end:a[1],startValue:u[0],endValue:u[1]})})}}),io("dataZoom",function(e,t){var n=function zI(e,t,n){return function(a){var u,l={nodes:[],records:{}};if(t(function(m){l.records[m.name]={}}),!a)return l;for(o(a,l);u=!1,e(f),u;);function f(m){var v,x,C;!(0<=$e(l.nodes,m))&&(v=m,x=l,C=!1,t(function(k){le(n(v,k)||[],function(M){x.records[k.name][M]&&(C=!0)})}),C)&&(o(m,l),u=!0)}return l};function o(a,u){u.nodes.push(a),t(function(l){le(n(a,l)||[],function(f){u.records[l.name][f]=!0})})}}(Rt(t.eachComponent,t,"dataZoom"),BI,function(a,u){return a.get(u.axisIndex)}),o=[];t.eachComponent({mainType:"dataZoom",query:e},function(a,u){o.push.apply(o,n(a).nodes)}),le(o,function(a,u){a.setRawRange({start:e.start,end:e.end,startValue:e.startValue,endValue:e.endValue})})});var Y2=le;function Z2(e,t,n){(this._brushController=new gx(n.getZr())).on("brush",Rt(this._onBrush,this)).mount()}Z2.defaultOption={show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:ie(Dr.toolbox.dataZoom.title),brushStyle:{borderWidth:0,color:"rgba(0,0,0,0.2)"}};var __=Z2.prototype;__.render=function(e,t,n,o){this.model=e,this.ecModel=t,this.api=n,function(a,u,l,f,m){var v=l._isZoomActive;f&&"takeGlobalCursor"===f.type&&(v="dataZoomSelect"===f.key&&f.dataZoomSelectActive),l._isZoomActive=v,a.setIconStatus("zoom",v?"emphasis":"normal");var x=new V2(HI(a.option),u,{include:["grid"]});l._brushController.setPanels(x.makePanelOpts(m,function(C){return C.xAxisDeclared&&!C.yAxisDeclared?"lineX":!C.xAxisDeclared&&C.yAxisDeclared?"lineY":"rect"})).enableBrush(!!v&&{brushType:"auto",brushStyle:a.getModel("brushStyle").getItemStyle()})}(e,t,this,o,n),function(a,u){a.setIconStatus("back",1<mS(u).length?"emphasis":"normal")}(e,t)},__.onclick=function(e,t,n){JO[n].call(this)},__.remove=function(e,t){this._brushController.unmount()},__.dispose=function(e,t){this._brushController.dispose()};var JO={zoom:function(){this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:!this._isZoomActive})},back:function(){this._dispatchZoomAction(function(e){var t=mS(e),n=t[t.length-1];1<t.length&&t.pop();var o={};return G2(n,function(a,u){for(var l=t.length-1;0<=l;l--)if(a=t[l][u]){o[u]=a;break}}),o}(this.ecModel))}};function HI(e){var t={};return le(["xAxisIndex","yAxisIndex"],function(n){t[n]=e[n],null==t[n]&&(t[n]="all"),!1!==t[n]&&"none"!==t[n]||(t[n]=[])}),t}function gA(e){this.model=e}__._onBrush=function(e,t){if(t.isEnd&&e.length){var n={},o=this.ecModel;this._brushController.updateCovers([]),new V2(HI(this.model.option),o,{include:["grid"]}).matchOutputRanges(e,o,function(u,l,f){if("cartesian2d"===f.type){var m=u.brushType;"rect"===m?(a("x",f,l[0]),a("y",f,l[1])):a({lineX:"x",lineY:"y"}[m],f,l)}}),function(u,l){var f=mS(u);G2(l,function(m,v){for(var x=f.length-1;0<=x&&!f[x][v];x--);if(x<0){var C=u.queryComponents({mainType:"dataZoom",subType:"select",id:v})[0];if(C){var k=C.getPercentRange();f[0][v]={dataZoomId:v,start:k[0],end:k[1]}}}}),f.push(l)}(o,n),this._dispatchZoomAction(n)}function a(u,l,f){var k,M,V,m=l.getAxis(u),v=m.model,x=(k=u,M=v,o.eachComponent({mainType:"dataZoom",subType:"select"},function(N){N.getAxisModel(k,M.componentIndex)&&(V=N)}),V),C=x.findRepresentativeAxisProxy(v).getMinMaxSpan();null==C.minValueSpan&&null==C.maxValueSpan||(f=Dy(0,f.slice(),m.scale.getExtent(),0,C.minValueSpan,C.maxValueSpan)),x&&(n[x.id]={dataZoomId:x.id,startValue:f[0],endValue:f[1]})}},__._dispatchZoomAction=function(e){var t=[];Y2(e,function(n,o){t.push(ie(n))}),t.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:t})},gg("dataZoom",Z2),da(function(e){if(e){var t=e.dataZoom||(e.dataZoom=[]);en(t)||(e.dataZoom=t=[t]);var n=e.toolbox;if(n&&(en(n)&&(n=n[0]),n&&n.feature)){var o=n.feature.dataZoom;a("xAxis",o),a("yAxis",o)}}function a(u,l){if(l){var f=u+"Index",m=l[f];null==m||"all"===m||en(m)||(m=!1===m||"none"===m?[]:[m]),en(C=e[u])||(C=C?[C]:[]),Y2(C,function(v,x){if(null==m||"all"===m||-1!==$e(m,x)){var C={type:"select",$fromToolbox:!0,filterMode:l.filterMode||"filter",id:"\0_ec_\0toolbox-dataZoom_"+u+x};C[f]=x,t.push(C)}})}var C}}),gA.defaultOption={show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:Dr.toolbox.restore.title},gA.prototype.onclick=function(e,t,n){(function(o){o[U2]=null})(e),t.dispatchAction({type:"restore",from:this.uid})},gg("restore",gA),io({type:"restore",event:"restore",update:"prepareAndUpdate"},function(e,t){t.resetOption("recreate")}),eu({type:"tooltip",dependencies:["axisPointer"],defaultOption:{zlevel:0,z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:!1,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"rgba(50,50,50,0.7)",borderColor:"#333",borderRadius:4,borderWidth:0,padding:5,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#fff",fontSize:14}}});var WI=le,bh=Zm,eE=["","-webkit-","-moz-","-o-"];function pM(e,t,n,o,a){var m,x,u=t&&t.painter;if(n){var l=u&&u.getViewportRoot();l&&(m=e,x=document.body,ar(un,l,o,a,!0)&&ar(m,x,un[0],un[1]))}else{e[0]=o,e[1]=a;var f=u&&u.getViewportRootOffset();f&&(e[0]+=f.offsetLeft,e[1]+=f.offsetTop)}e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function K2(e,t,n){if(Ze.wxa)return null;var o=document.createElement("div");o.domBelongToZr=!0,this.el=o;var a=this._zr=t.getZr(),u=this._appendToBody=n&&n.appendToBody;this._styleCoord=[0,0,0,0],pM(this._styleCoord,a,u,t.getWidth()/2,t.getHeight()/2),u?document.body.appendChild(o):e.appendChild(o),this._container=e,this._show=!1;var l=this;o.onmouseenter=function(){l._enterable&&(clearTimeout(l._hideTimeout),l._show=!0),l._inContent=!0},o.onmousemove=function(f){if(f=f||window.event,!l._enterable){var m=a.handler;Hr(a.painter.getViewportRoot(),f,!0),m.dispatch("mousemove",f)}},o.onmouseleave=function(){l._enterable&&l._show&&l.hideLater(l._hideDelay),l._inContent=!1}}function mA(e,t,n,o){e[0]=n,e[1]=o,e[2]=e[0]/t.getWidth(),e[3]=e[1]/t.getHeight()}function $2(e){var t=this._zr=e.getZr();this._styleCoord=[0,0,0,0],mA(this._styleCoord,t,e.getWidth()/2,e.getHeight()/2),this._show=!1}K2.prototype={constructor:K2,_enterable:!0,update:function(e){var t=this._container,n=t.currentStyle||document.defaultView.getComputedStyle(t),o=t.style;"absolute"!==o.position&&"absolute"!==n.position&&(o.position="relative"),e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),o=t*this._zr.getHeight();this.moveTo(n,o)},show:function(e){clearTimeout(this._hideTimeout);var t=this.el,n=this._styleCoord;t.style.cssText="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+function tE(e){var l,m,t=[],n=e.get("transitionDuration"),o=e.get("backgroundColor"),a=e.getModel("textStyle"),u=e.get("padding");return n&&t.push((m="left "+(l=n)+"s "+"cubic-bezier(0.23, 1, 0.32, 1)"+",top "+l+"s cubic-bezier(0.23, 1, 0.32, 1)",Ge(eE,function(v){return v+"transition:"+m}).join(";"))),o&&(Ze.canvasSupported?t.push("background-Color:"+o):(t.push("background-Color:#"+Ps(o)),t.push("filter:alpha(opacity=70)"))),WI(["width","color","radius"],function(l){var f="border-"+l,m=bh(f),v=e.get(m);null!=v&&t.push(f+":"+v+("color"===l?"":"px"))}),t.push(function(l){var f=[],m=l.get("fontSize"),v=l.getTextColor();v&&f.push("color:"+v),f.push("font:"+l.getFont());var x=l.get("lineHeight");null==x&&(x=Math.round(3*m/2)),m&&f.push("line-height:"+x+"px");var C=l.get("textShadowColor"),k=l.get("textShadowBlur")||0,M=l.get("textShadowOffsetX")||0,E=l.get("textShadowOffsetY")||0;return k&&f.push("text-shadow:"+M+"px "+E+"px "+k+"px "+C),WI(["decoration","align"],function(V){var N=l.get(V);N&&f.push("text-"+V+":"+N)}),f.join(";")}(a)),null!=u&&t.push("padding:"+Uh(u).join("px ")+"px"),t.join(";")+";"}(e)+";left:"+n[0]+"px;top:"+n[1]+"px;"+(e.get("extraCssText")||""),t.style.display=t.innerHTML?"block":"none",t.style.pointerEvents=this._enterable?"auto":"none",this._show=!0},setContent:function(e){this.el.innerHTML=null==e?"":e},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el;return[e.clientWidth,e.clientHeight]},moveTo:function(e,t){var n=this._styleCoord;pM(n,this._zr,this._appendToBody,e,t);var o=this.el.style;o.left=n[0]+"px",o.top=n[1]+"px"},hide:function(){this.el.style.display="none",this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Rt(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){this.el.parentNode.removeChild(this.el)},getOuterSize:function(){var e=this.el.clientWidth,t=this.el.clientHeight;if(document.defaultView&&document.defaultView.getComputedStyle){var n=document.defaultView.getComputedStyle(this.el);n&&(e+=parseInt(n.borderLeftWidth,10)+parseInt(n.borderRightWidth,10),t+=parseInt(n.borderTopWidth,10)+parseInt(n.borderBottomWidth,10))}return{width:e,height:t}}},$2.prototype={constructor:$2,_enterable:!0,update:function(e){e.get("alwaysShowContent")&&this._moveTooltipIfResized()},_moveTooltipIfResized:function(){var t=this._styleCoord[3],n=this._styleCoord[2]*this._zr.getWidth(),o=t*this._zr.getHeight();this.moveTo(n,o)},show:function(e){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.attr("show",!0),this._show=!0},setContent:function(e,t,n){this.el&&this._zr.remove(this.el);for(var o={},a=e,u="{marker",l=a.indexOf(u);0<=l;){var f=a.indexOf("|}"),m=a.substr(l+u.length,f-l-u.length);o["marker"+m]=-1<m.indexOf("sub")?{textWidth:4,textHeight:4,textBorderRadius:2,textBackgroundColor:t[m],textOffset:[3,0]}:{textWidth:10,textHeight:10,textBorderRadius:5,textBackgroundColor:t[m]},l=(a=a.substr(f+1)).indexOf("{marker")}var v=n.getModel("textStyle"),x=v.get("fontSize"),C=n.get("textLineHeight");null==C&&(C=Math.round(3*x/2)),this.el=new Yo({style:Ta({},v,{rich:o,text:e,textBackgroundColor:n.get("backgroundColor"),textBorderRadius:n.get("borderRadius"),textFill:n.get("textStyle.color"),textPadding:n.get("padding"),textLineHeight:C}),z:n.get("z")}),this._zr.add(this.el);var k=this;this.el.on("mouseover",function(){k._enterable&&(clearTimeout(k._hideTimeout),k._show=!0),k._inContent=!0}),this.el.on("mouseout",function(){k._enterable&&k._show&&k.hideLater(k._hideDelay),k._inContent=!1})},setEnterable:function(e){this._enterable=e},getSize:function(){var e=this.el.getBoundingRect();return[e.width,e.height]},moveTo:function(e,t){if(this.el){var n=this._styleCoord;mA(n,this._zr,e,t),this.el.attr("position",[n[0],n[1]])}},hide:function(){this.el&&this.el.hide(),this._show=!1},hideLater:function(e){!this._show||this._inContent&&this._enterable||(e?(this._hideDelay=e,this._show=!1,this._hideTimeout=setTimeout(Rt(this.hide,this),e)):this.hide())},isShow:function(){return this._show},dispose:function(){clearTimeout(this._hideTimeout),this.el&&this._zr.remove(this.el)},getOuterSize:function(){var e=this.getSize();return{width:e[0],height:e[1]}}};var GI=Rt,Vy=le,pA=nr,J2=new fi({shape:{x:-1,y:-1,width:2,height:2}});function Q2(e){for(var t=e.pop();e.length;){var n=e.pop();n&&(ei.isInstance(n)&&(n=n.get("tooltip",!0)),"string"==typeof n&&(n={formatter:n}),t=new ei(n,t,t.ecModel))}return t}function UI(e,t){return e.dispatchAction||Rt(t.dispatchAction,t)}function jI(e){return"center"===e||"middle"===e}Ts({type:"tooltip",init:function(e,t){if(!Ze.node){var n,o=e.getComponent("tooltip"),a=o.get("renderMode");this._renderMode=Fu(a),"html"===this._renderMode?(n=new K2(t.getDom(),t,{appendToBody:o.get("appendToBody",!0)}),this._newLine="<br/>"):(n=new $2(t),this._newLine="\n"),this._tooltipContent=n}},render:function(e,t,n){if(!Ze.node){this.group.removeAll(),this._tooltipModel=e,this._ecModel=t,this._api=n,this._lastDataByCoordSys=null,this._alwaysShowContent=e.get("alwaysShowContent");var o=this._tooltipContent;o.update(e),o.setEnterable(e.get("enterable")),this._initGlobalListener(),this._keepShow()}},_initGlobalListener:function(){var e=this._tooltipModel.get("triggerOn");Xn("itemTooltip",this._api,GI(function(t,n,o){"none"!==e&&(0<=e.indexOf(t)?this._tryShow(n,o):"leave"===t&&this._hide(o))},this))},_keepShow:function(){var e=this._tooltipModel,t=this._ecModel,n=this._api;if(null!=this._lastX&&null!=this._lastY&&"none"!==e.get("triggerOn")){var o=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout(function(){n.isDisposed()||o.manuallyShowTip(e,t,n,{x:o._lastX,y:o._lastY})})}},manuallyShowTip:function(e,t,n,o){if(o.from!==this.uid&&!Ze.node){var a=UI(o,n);this._ticket="";var u=o.dataByCoordSys;if(o.tooltip&&null!=o.x&&null!=o.y){var l=J2;l.position=[o.x,o.y],l.update(),l.tooltip=o.tooltip,this._tryShow({offsetX:o.x,offsetY:o.y,target:l},a)}else if(u)this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,dataByCoordSys:o.dataByCoordSys,tooltipOption:o.tooltipOption},a);else if(null!=o.seriesIndex){if(this._manuallyAxisShowTip(e,t,n,o))return;var f=vn(o,t),m=f.point[0],v=f.point[1];null!=m&&null!=v&&this._tryShow({offsetX:m,offsetY:v,position:o.position,target:f.el},a)}else null!=o.x&&null!=o.y&&(n.dispatchAction({type:"updateAxisPointer",x:o.x,y:o.y}),this._tryShow({offsetX:o.x,offsetY:o.y,position:o.position,target:n.getZr().findHover(o.x,o.y).target},a))}},manuallyHideTip:function(e,t,n,o){!this._alwaysShowContent&&this._tooltipModel&&this._tooltipContent.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=null,o.from!==this.uid&&this._hide(UI(o,n))},_manuallyAxisShowTip:function(e,t,n,o){var a=o.seriesIndex,u=o.dataIndex,l=t.getComponent("axisPointer").coordSysAxesInfo;if(null!=a&&null!=u&&null!=l){var f=t.getSeriesByIndex(a);if(f&&"axis"===(e=Q2([f.getData().getItemModel(u),f,(f.coordinateSystem||{}).model,e])).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:a,dataIndex:u,position:o.position}),!0}},_tryShow:function(e,t){var n=e.target;if(this._tooltipModel){this._lastX=e.offsetX,this._lastY=e.offsetY;var o=e.dataByCoordSys;o&&o.length?this._showAxisTooltip(o,e):n&&null!=n.dataIndex?(this._lastDataByCoordSys=null,this._showSeriesItemTooltip(e,n,t)):n&&n.tooltip?(this._lastDataByCoordSys=null,this._showComponentItemTooltip(e,n,t)):(this._lastDataByCoordSys=null,this._hide(t))}},_showOrMove:function(e,t){var n=e.get("showDelay");t=Rt(t,this),clearTimeout(this._showTimout),0<n?this._showTimout=setTimeout(t,n):t()},_showAxisTooltip:function(e,t){var n=this._ecModel,a=[t.offsetX,t.offsetY],u=[],l=[],f=Q2([t.tooltipOption,this._tooltipModel]),m=this._renderMode,v=this._newLine,x={};Vy(e,function(k){Vy(k.dataByAxis,function(M){var E=n.getComponent(M.axisDim+"Axis",M.axisIndex),V=M.value,N=[];if(E&&null!=V){var G=Pf(V,E.axis,n,M.seriesDataIndices,M.valueLabelOpt);le(M.seriesDataIndices,function(J){var me=n.getSeriesByIndex(J.seriesIndex),ge=J.dataIndexInside,pe=me&&me.getDataParams(ge);if(pe.axisDim=M.axisDim,pe.axisIndex=M.axisIndex,pe.axisType=M.axisType,pe.axisId=M.axisId,pe.axisValue=ty(E.axis,V),pe.axisValueLabel=G,pe){l.push(pe);var _e,Me=me.formatTooltip(ge,!0,null,m);ln(Me)?(_e=Me.html,xe(x,Me.markers)):_e=Me,N.push(_e)}});var te=G;u.push("html"!==m?N.join(v):(te?Pa(te)+v:"")+N.join(v))}})},this),u.reverse(),u=u.join(this._newLine+this._newLine);var C=t.position;this._showOrMove(f,function(){this._updateContentNotChangedOnAxis(e)?this._updatePosition(f,C,a[0],a[1],this._tooltipContent,l):this._showTooltipContent(f,u,l,Math.random(),a[0],a[1],C,void 0,x)})},_showSeriesItemTooltip:function(e,t,n){var a=t.seriesIndex,u=this._ecModel.getSeriesByIndex(a),l=t.dataModel||u,f=t.dataIndex,m=t.dataType,v=l.getData(m),x=Q2([v.getItemModel(f),l,u&&(u.coordinateSystem||{}).model,this._tooltipModel]),C=x.get("trigger");if(null==C||"item"===C){var k,M,E=l.getDataParams(f,m),V=l.formatTooltip(f,!1,m,this._renderMode);M=ln(V)?(k=V.html,V.markers):(k=V,null);var N="item_"+l.name+"_"+f;this._showOrMove(x,function(){this._showTooltipContent(x,k,E,N,e.offsetX,e.offsetY,e.position,e.target,M)}),n({type:"showTip",dataIndexInside:f,dataIndex:v.getRawIndex(f),seriesIndex:a,from:this.uid})}},_showComponentItemTooltip:function(e,t,n){var o=t.tooltip;"string"==typeof o&&(o={content:o,formatter:o});var a=new ei(o,this._tooltipModel,this._ecModel),u=a.get("content"),l=Math.random();this._showOrMove(a,function(){this._showTooltipContent(a,u,a.get("formatterParams")||{},l,e.offsetX,e.offsetY,e.position,t)}),n({type:"showTip",from:this.uid})},_showTooltipContent:function(e,t,n,o,a,u,l,f,m){if(this._ticket="",e.get("showContent")&&e.get("show")){var v=this._tooltipContent,x=e.get("formatter");l=l||e.get("position");var C=t;if(x&&"string"==typeof x)C=I0(x,n,!0);else if("function"==typeof x){var k=GI(function(M,E){M===this._ticket&&(v.setContent(E,m,e),this._updatePosition(e,l,a,u,v,n,f))},this);this._ticket=o,C=x(n,o,k)}v.setContent(C,m,e),v.show(e),this._updatePosition(e,l,a,u,v,n,f)}},_updatePosition:function(e,t,n,o,a,u,l){var f=this._api.getWidth(),m=this._api.getHeight();t=t||e.get("position");var V,N,G,te,J,me,ge,pe,_e,Me,v=a.getSize(),x=e.get("align"),C=e.get("verticalAlign"),k=l&&l.getBoundingRect().clone();if(l&&k.applyTransform(l.transform),"function"==typeof t&&(t=t([n,o],u,a.el,k,{viewSize:[f,m],contentSize:v.slice()})),en(t))n=pA(t[0],f),o=pA(t[1],m);else if(ln(t)){t.width=v[0],t.height=v[1];var M=si(t,{width:f,height:m});n=M.x,o=M.y,C=x=null}else if("string"==typeof t&&l)n=(E=function(V,N,G){var te=G[0],J=G[1],me=0,ge=0,pe=N.width,_e=N.height;switch(V){case"inside":me=N.x+pe/2-te/2,ge=N.y+_e/2-J/2;break;case"top":me=N.x+pe/2-te/2,ge=N.y-J-5;break;case"bottom":me=N.x+pe/2-te/2,ge=N.y+_e+5;break;case"left":me=N.x-te-5,ge=N.y+_e/2-J/2;break;case"right":me=N.x+pe+5,ge=N.y+_e/2-J/2}return[me,ge]}(t,k,v))[0],o=E[1];else{var E;n=(V=n,N=o,G=a,te=f,J=m,me=x?null:20,ge=C?null:20,pe=G.getOuterSize(),_e=pe.width,Me=pe.height,null!=me&&(te<V+_e+me?V-=_e+me:V+=me),null!=ge&&(J<N+Me+ge?N-=Me+ge:N+=ge),E=[V,N])[0],o=E[1]}x&&(n-=jI(x)?v[0]/2:"right"===x?v[0]:0),C&&(o-=jI(C)?v[1]/2:"bottom"===C?v[1]:0),e.get("confine")&&(n=(E=function(V,N,G,te,J){var me=G.getOuterSize(),ge=me.width,pe=me.height;return V=Math.min(V+ge,te)-ge,N=Math.min(N+pe,J)-pe,[V=Math.max(V,0),N=Math.max(N,0)]}(n,o,a,f,m))[0],o=E[1]),a.moveTo(n,o)},_updateContentNotChangedOnAxis:function(e){var t=this._lastDataByCoordSys,n=!!t&&t.length===e.length;return n&&Vy(t,function(o,a){var u=o.dataByAxis||{},l=(e[a]||{}).dataByAxis||[];(n&=u.length===l.length)&&Vy(u,function(f,m){var v=l[m]||{},x=f.seriesDataIndices||[],C=v.seriesDataIndices||[];(n&=f.value===v.value&&f.axisType===v.axisType&&f.axisId===v.axisId&&x.length===C.length)&&Vy(x,function(k,M){var E=C[M];n&=k.seriesIndex===E.seriesIndex&&k.dataIndex===E.dataIndex})})}),this._lastDataByCoordSys=e,!!n},_hide:function(e){this._lastDataByCoordSys=null,e({type:"hideTip",from:this.uid})},dispose:function(e,t){Ze.node||(this._tooltipContent.dispose(),zi("itemTooltip",t))}}),io({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},function(){}),io({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},function(){});var nE=["rect","polygon","keep","clear"],vA=le;function qI(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!0}function eD(e,t,n){var o={};return vA(t,function(a){var u=o[a]=function(){function l(){}return l.prototype.__hidden=l.prototype,new l}();vA(e[a],function(l,f){if(Bi.isValidType(f)){var m={type:f,visual:l};n&&n(m,a),u[f]=new Bi(m),"opacity"===f&&((m=ie(m)).type="colorAlpha",u.__hidden.__alphaForOpacity=new Bi(m))}})}),o}function yA(e,t,n){var o;le(n,function(a){t.hasOwnProperty(a)&&qI(t[a])&&(o=!0)}),o&&le(n,function(a){t.hasOwnProperty(a)&&qI(t[a])?e[a]=ie(t[a]):delete e[a]})}var tD={lineX:bA(0),lineY:bA(1),rect:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])},rect:function(e,t,n){return e&&n.boundingRect.intersect(e)}},polygon:{point:function(e,t,n){return e&&n.boundingRect.contain(e[0],e[1])&&Nv(n.range,e[0],e[1])},rect:function(e,t,n){var o=n.range;if(!e||o.length<=1)return!1;var a=e.x,u=e.y,l=e.width,f=e.height,m=o[0];return!!(Nv(o,a,u)||Nv(o,a+l,u)||Nv(o,a,u+f)||Nv(o,a+l,u+f)||ii.create(e).contain(m[0],m[1])||Xm(a,u,a+l,u,o)||Xm(a,u,a,u+f,o)||Xm(a+l,u,a+l,u+f,o)||Xm(a,u+f,a+l,u+f,o))||void 0}}};function bA(e){var t=["x","y"],n=["width","height"];return{point:function(o,a,u){if(o)return yS(o[e],u.range)},rect:function(o,a,u){if(o){var l=u.range,f=[o[t[e]],o[t[e]]+o[n[e]]];return f[1]<f[0]&&f.reverse(),yS(f[0],l)||yS(f[1],l)||yS(l[0],f)||yS(l[1],f)}}}}function yS(e,t){return t[0]<=e&&e<=t[1]}var nD=["inBrush","outOfBrush"],vM="__ecBrushSelect",xA="__ecInBrushSelectEvent",XI=ih.VISUAL.BRUSH;function yM(e){e.eachComponent({mainType:"brush"},function(t){(t.brushTargetManager=new V2(t.option,e)).setInputRanges(t.areas,e)})}function YI(e,t){if(!e.isDisposed()){var n=e.getZr();n[xA]=!0,e.dispatchAction({type:"brushSelect",batch:t}),n[xA]=!1}}function rD(e,t,n,o){for(var a=0,u=t.length;a<u;a++){var l=t[a];if(e[l.brushType](o,n,l.selectors,l))return!0}}function ZI(e){var t=e.brushSelector;if(Gn(t)){var n=[];return le(tD,function(a,u){n[u]=function(l,f,m,v){var x=f.getItemLayout(l);return a[t](x,m,v)}}),n}if(Ot(t)){var o={};return le(tD,function(a,u){o[u]=t}),o}return t}fa(XI,function(e,t,n){e.eachComponent({mainType:"brush"},function(o){n&&"takeGlobalCursor"===n.type&&o.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})}),yM(e)}),Gi(XI,function(e,t,n){var o,a,u=[];e.eachComponent({mainType:"brush"},function(l,f){var m={brushId:l.id,brushIndex:f,brushName:l.name,areas:ie(l.areas),selected:[]};u.push(m);var v=l.option,x=v.brushLink,C=[],k=[],M=[],E=0;f||(o=v.throttleType,a=v.throttleDelay);var V=Ge(l.areas,function(J){return me=Ee({boundingRect:oD[J.brushType](J)},J),ge=me.selectors={},le(tD[me.brushType],function(pe,_e){ge[_e]=function(Me){return pe(Me,ge,me)}}),me;var me,ge}),N=eD(l.option,nD,function(J){J.mappingMethod="fixed"});function G(J){return"all"===x||C[J]}function te(J){return!!J.length}en(x)&&le(x,function(J){C[J]=1}),e.eachSeries(function(J,me){var pe,_e,Me,ge=M[me]=[];"parallel"===J.subType?(_e=me,E|=(Me=(pe=J).coordinateSystem).hasAxisBrushed(),G(_e)&&Me.eachActiveState(pe.getData(),function(We,Ke){"active"===We&&(k[Ke]=1)})):function(pe,_e,Me){var ut,lt,We=ZI(pe);if(We&&(ut=_e,null==(lt=l.option.seriesIndex)||"all"===lt||!(en(lt)?$e(lt,ut)<0:ut!==lt))&&(le(V,function(et){We[et.brushType]&&l.brushTargetManager.controlSeries(et,pe,e)&&Me.push(et),E|=te(Me)}),G(_e)&&te(Me))){var Ke=pe.getData();Ke.each(function(et){rD(We,Me,Ke,et)&&(k[et]=1)})}}(J,me,ge)}),e.eachSeries(function(J,me){var ge={seriesId:J.id,seriesIndex:me,seriesName:J.name,dataIndex:[]};m.selected.push(ge);var pe=ZI(J),_e=M[me],Me=J.getData(),We=G(me)?function(Ke){return k[Ke]?(ge.dataIndex.push(Me.getRawIndex(Ke)),"inBrush"):"outOfBrush"}:function(Ke){return rD(pe,_e,Me,Ke)?(ge.dataIndex.push(Me.getRawIndex(Ke)),"inBrush"):"outOfBrush"};(G(me)?E:te(_e))&&function(Ke,et,ut,lt,vt,Mt){var Pt,Ct={};function Zt(Cn){return ut.getItemVisual(Pt,Cn)}function An(Cn,Jn){ut.setItemVisual(Pt,Cn,Jn)}le(Ke,function(Cn){var Jn=Bi.prepareVisualTypes(et[Cn]);Ct[Cn]=Jn}),ut.each(function Rn(Cn,Jn){var dr=ut.getRawDataItem(Pt=Cn);if(!dr||!1!==dr.visualMap)for(var $r=lt.call(void 0,Cn),zn=et[$r],Ur=Ct[$r],Jr=0,_o=Ur.length;Jr<_o;Jr++){var ga=Ur[Jr];zn[ga]&&zn[ga].applyVisual(Cn,Zt,An)}})}(nD,N,Me,We)})}),function(l,f,m,v,x){if(x){var C=l.getZr();C[xA]||(C[vM]||(C[vM]=YI),Jh(C,vM,m,f)(l,v))}}(t,o,a,u,n)});var oD={lineX:yn,lineY:yn,rect:function(e){return KI(e.range)},polygon:function(e){for(var t,n=e.range,o=0,a=n.length;o<a;o++){var u=n[o];u[0]<(t=t||[[1/0,-1/0],[1/0,-1/0]])[0][0]&&(t[0][0]=u[0]),u[0]>t[0][1]&&(t[0][1]=u[0]),u[1]<t[1][0]&&(t[1][0]=u[1]),u[1]>t[1][1]&&(t[1][1]=u[1])}return t&&KI(t)}};function KI(e){return new ii(e[0][0],e[1][0],e[0][1]-e[0][0],e[1][1]-e[1][0])}var rE=["#ddd"];function fk(e,t){return xe({brushType:e.brushType,brushMode:e.brushMode,transformable:e.transformable,brushStyle:new ei(e.brushStyle).getItemStyle(),removeOnClick:e.removeOnClick,z:e.z},t,!0)}function iD(e,t,n,o){o&&o.$from===e.id||this._brushController.setPanels(e.brushTargetManager.makePanelOpts(n)).enableBrush(e.brushOption).updateCovers(e.areas.slice())}function aD(e,t,n){this.model=e,this.ecModel=t,this.api=n}eu({type:"brush",dependencies:["geo","grid","xAxis","yAxis","parallel","series"],defaultOption:{toolbox:null,brushLink:null,seriesIndex:"all",geoIndex:null,xAxisIndex:null,yAxisIndex:null,brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(120,140,180,0.3)",borderColor:"rgba(120,140,180,0.8)"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},areas:[],brushType:null,brushOption:{},coordInfoList:[],optionUpdated:function(e,t){var n=this.option;t||yA(n,e,["inBrush","outOfBrush"]);var o=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:rE},o.hasOwnProperty("liftZ")||(o.liftZ=5)},setAreas:function(e){e&&(this.areas=Ge(e,function(t){return fk(this.option,t)},this))},setBrushOption:function(e){this.brushOption=fk(this.option,e),this.brushType=this.brushOption.brushType}}),Ts({type:"brush",init:function(e,t){this.ecModel=e,this.api=t,(this._brushController=new gx(t.getZr())).on("brush",Rt(this._onBrush,this)).mount()},render:function(e){return this.model=e,iD.apply(this,arguments)},updateTransform:function(e,t){return yM(t),iD.apply(this,arguments)},updateView:iD,dispose:function(){this._brushController.dispose()},_onBrush:function(e,t){var n=this.model.id;this.model.brushTargetManager.setOutputRanges(e,this.ecModel),t.isEnd&&!t.removeOnClick||this.api.dispatchAction({type:"brush",brushId:n,areas:ie(e),$from:n}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:n,areas:ie(e),$from:n})}}),io({type:"brush",event:"brush"},function(e,t){t.eachComponent({mainType:"brush",query:e},function(n){n.setAreas(e.areas)})}),io({type:"brushSelect",event:"brushSelected",update:"none"},function(){}),io({type:"brushEnd",event:"brushEnd",update:"none"},function(){}),aD.defaultOption={show:!0,type:["rect","polygon","lineX","lineY","keep","clear"],icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:ie(Dr.toolbox.brush.title)};var sD=aD.prototype;function _A(e){var t=e.itemStyle||(e.itemStyle={}),n=t.emphasis||(t.emphasis={}),o=e.label||e.label||{},a=o.normal||(o.normal={}),u={normal:1,emphasis:1};le(o,function(l,f){u[f]||w_(a,f)||(a[f]=l)}),n.label&&!w_(o,"emphasis")&&(o.emphasis=n.label,delete n.label)}function w_(e,t){return e.hasOwnProperty(t)}sD.render=sD.updateView=function(e,t,n){var o,a,u;t.eachComponent({mainType:"brush"},function(l){o=l.brushType,a=l.brushOption.brushMode||"single",u|=l.areas.length}),this._brushType=o,this._brushMode=a,le(e.get("type",!0),function(l){e.setIconStatus(l,("keep"===l?"multiple"===a:"clear"===l?u:l===o)?"emphasis":"normal")})},sD.getIcons=function(){var e=this.model,t=e.get("icon",!0),n={};return le(e.get("type",!0),function(o){t[o]&&(n[o]=t[o])}),n},sD.onclick=function(e,t,n){var o=this._brushType,a=this._brushMode;"clear"===n?(t.dispatchAction({type:"axisAreaSelect",intervals:[]}),t.dispatchAction({type:"brush",command:"clear",areas:[]})):t.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?o:o!==n&&n,brushMode:"keep"===n?"multiple"===a?"single":"multiple":a}})},gg("brush",aD),da(function(e,t){var m,v,n=e&&e.brush;if(en(n)||(n=n?[n]:[]),n.length){var o=[];le(n,function(m){var v=m.hasOwnProperty("toolbox")?m.toolbox:[];v instanceof Array&&(o=o.concat(v))});var a=e&&e.toolbox;en(a)&&(a=a[0]),a||(e.toolbox=[a={feature:{}}]);var u=a.feature||(a.feature={}),l=u.brush||(u.brush={}),f=l.type||(l.type=[]);f.push.apply(f,o),v={},le(m=f,function(x){v[x]=1}),m.length=0,le(v,function(x,C){m.push(C)}),t&&!f.length&&f.push.apply(f,nE)}}),eu({type:"title",layoutMode:{type:"box",ignoreSize:!0},defaultOption:{zlevel:0,z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bolder",color:"#333"},subtextStyle:{color:"#aaa"}}}),Ts({type:"title",render:function(e,t,n){if(this.group.removeAll(),e.get("show")){var o=this.group,a=e.getModel("textStyle"),u=e.getModel("subtextStyle"),l=e.get("textAlign"),f=Or(e.get("textBaseline"),e.get("textVerticalAlign")),m=new Yo({style:Ta({},a,{text:e.get("text"),textFill:a.getTextColor()},{disableBox:!0}),z2:10}),v=m.getBoundingRect(),x=e.get("subtext"),C=new Yo({style:Ta({},u,{text:x,textFill:u.getTextColor(),y:v.height+e.get("itemGap"),textVerticalAlign:"top"},{disableBox:!0}),z2:10}),k=e.get("link"),M=e.get("sublink"),E=e.get("triggerEvent",!0);m.silent=!k&&!E,C.silent=!M&&!E,k&&m.on("click",function(){Km(k,"_"+e.get("target"))}),M&&C.on("click",function(){Km(M,"_"+e.get("subtarget"))}),m.eventData=C.eventData=E?{componentType:"title",componentIndex:e.componentIndex}:null,o.add(m),x&&o.add(C);var V=o.getBoundingRect(),N=e.getBoxLayoutParams();N.width=V.width,N.height=V.height;var G=si(N,{width:n.getWidth(),height:n.getHeight()},e.get("padding"));l||("middle"===(l=e.get("left")||e.get("right"))&&(l="center"),"right"===l?G.x+=G.width:"center"===l&&(G.x+=G.width/2)),f||("center"===(f=e.get("top")||e.get("bottom"))&&(f="middle"),"bottom"===f?G.y+=G.height:"middle"===f&&(G.y+=G.height/2),f=f||"top"),o.attr("position",[G.x,G.y]);var te={textAlign:l,textVerticalAlign:f};m.setStyle(te),C.setStyle(te),V=o.getBoundingRect();var J=G.margin,me=e.getItemStyle(["color","opacity"]);me.fill=e.get("backgroundColor");var ge=new fi({shape:{x:V.x-J[3],y:V.y-J[0],width:V.width+J[1]+J[3],height:V.height+J[0]+J[2],r:e.get("borderRadius")},style:me,subPixelOptimize:!0,silent:!0});o.add(ge)}}}),ci.registerSubTypeDefaulter("timeline",function(){return"slider"}),io({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},function(e,t){var n=t.getComponent("timeline");return n&&null!=e.currentIndex&&(n.setCurrentIndex(e.currentIndex),!n.get("loop",!0)&&n.isIndexMax()&&n.setPlayState(!1)),t.resetOption("timeline"),Ee({currentIndex:n.option.currentIndex},e)}),io({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},function(e,t){var n=t.getComponent("timeline");n&&null!=e.playState&&n.setPlayState(e.playState)});var wA=ci.extend({type:"timeline",layoutMode:"box",defaultOption:{zlevel:0,z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._initData()},mergeOption:function(e){wA.superApply(this,"mergeOption",arguments),this._initData()},setCurrentIndex:function(e){null==e&&(e=this.option.currentIndex);var t=this._data.count();this.option.loop?e=(e%t+t)%t:(t<=e&&(e=t-1),e<0&&(e=0)),this.option.currentIndex=e},getCurrentIndex:function(){return this.option.currentIndex},isIndexMax:function(){return this.getCurrentIndex()>=this._data.count()-1},setPlayState:function(e){this.option.autoPlay=!!e},getPlayState:function(){return!!this.option.autoPlay},_initData:function(){var e=this.option,t=e.data||[],n=e.axisType,o=this._names=[];if("category"===n){var a=[];le(t,function(l,f){var m,v=Gf(l);ln(l)?(m=ie(l)).value=f:m=f,a.push(m),Gn(v)||null!=v&&!isNaN(v)||(v=""),o.push(v+"")}),t=a}(this._data=new Uu([{name:"value",type:{category:"ordinal",time:"time"}[n]||"number"}],this)).initData(t,o)},getData:function(){return this._data},getCategories:function(){if("category"===this.get("axisType"))return this._names.slice()}});function bM(e,t,n,o){mu.call(this,e,t,n),this.type=o||"value",this.model=null}de(wA.extend({type:"timeline.slider",defaultOption:{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"emptyCircle",symbolSize:10,lineStyle:{show:!0,width:2,color:"#304654"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#304654"},itemStyle:{color:"#304654",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:13,color:"#c23531",borderWidth:5,borderColor:"rgba(194,53,49, 0.5)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:22,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"path://M18.6,50.8l22.5-22.5c0.2-0.2,0.3-0.4,0.3-0.7c0-0.3-0.1-0.5-0.3-0.7L18.7,4.4c-0.1-0.1-0.2-0.3-0.2-0.5 c0-0.4,0.3-0.8,0.8-0.8c0.2,0,0.5,0.1,0.6,0.3l23.5,23.5l0,0c0.2,0.2,0.3,0.4,0.3,0.7c0,0.3-0.1,0.5-0.3,0.7l-0.1,0.1L19.7,52 c-0.1,0.1-0.3,0.2-0.5,0.2c-0.4,0-0.8-0.3-0.8-0.8C18.4,51.2,18.5,51,18.6,50.8z",prevIcon:"path://M43,52.8L20.4,30.3c-0.2-0.2-0.3-0.4-0.3-0.7c0-0.3,0.1-0.5,0.3-0.7L42.9,6.4c0.1-0.1,0.2-0.3,0.2-0.5 c0-0.4-0.3-0.8-0.8-0.8c-0.2,0-0.5,0.1-0.6,0.3L18.3,28.8l0,0c-0.2,0.2-0.3,0.4-0.3,0.7c0,0.3,0.1,0.5,0.3,0.7l0.1,0.1L41.9,54 c0.1,0.1,0.3,0.2,0.5,0.2c0.4,0,0.8-0.3,0.8-0.8C43.2,53.2,43.1,53,43,52.8z",color:"#304654",borderColor:"#304654",borderWidth:1},emphasis:{label:{show:!0,color:"#c23531"},itemStyle:{color:"#c23531"},controlStyle:{color:"#c23531",borderColor:"#c23531",borderWidth:2}},data:[]}}),Pc);var $I=rh.extend({type:"timeline"});bM.prototype={constructor:bM,getLabelModel:function(){return this.model.getModel("label")},isHorizontal:function(){return"horizontal"===this.model.get("orient")}},Ie(bM,mu);var Cx=Rt,SA=le,hk=Math.PI;function xM(e,t,n,o,a,u){var l=t.get("color");a?(a.setColor(l),n.add(a),u&&u.onUpdate(a)):((a=$d(e.get("symbol"),-1,-1,2,2,l)).setStyle("strokeNoScale",!0),n.add(a),u&&u.onCreate(a));var f=t.getItemStyle(["color","symbol","symbolSize"]);a.setStyle(f),o=xe({rectHover:!0,z2:100},o,!0);var m=e.get("symbolSize");(m=m instanceof Array?m.slice():[+m,+m])[0]/=2,m[1]/=2,o.scale=m;var v=e.get("symbolOffset");if(v){var x=o.position=o.position||[0,0];x[0]+=nr(v[0],m[0]),x[1]+=nr(v[1],m[1])}var C=e.get("symbolRotate");return o.rotation=(C||0)*Math.PI/180||0,a.attr(o),a.updateTransform(),a}function Hy(e,t,n,o,a){if(!e.dragging){var u=o.getModel("checkpointStyle"),l=n.dataToCoord(o.getData().get(["value"],t));a||!u.get("animation",!0)?e.attr({position:[l,0]}):(e.stopAnimation(!0),e.animateTo({position:[l,0]},u.get("animationDuration",!0),u.get("animationEasing",!0)))}}$I.extend({type:"timeline.slider",init:function(e,t){this.api=t},render:function(e,t,n,o){if(this.model=e,this.api=n,this.ecModel=t,this.group.removeAll(),e.get("show",!0)){var a=this._layout(e,n),u=this._createGroup("mainGroup"),l=this._createGroup("labelGroup"),f=this._axis=this._createAxis(a,e);e.formatTooltip=function(m){return Pa(f.scale.getLabel(m))},SA(["AxisLine","AxisTick","Control","CurrentPointer"],function(m){this["_render"+m](a,u,f,e)},this),this._renderAxisLabel(a,l,f,e),this._position(a,e)}this._doPlayStop()},remove:function(){this._clearTimer(),this.group.removeAll()},dispose:function(){this._clearTimer()},_layout:function(e,t){var We,Ke,n=e.get("label.position"),o=e.get("orient"),a=(Ke=t,si((We=e).getBoxLayoutParams(),{width:Ke.getWidth(),height:Ke.getHeight()},We.get("padding")));null==n||"auto"===n?n="horizontal"===o?a.y+a.height/2<t.getHeight()/2?"-":"+":a.x+a.width/2<t.getWidth()/2?"+":"-":isNaN(n)&&(n={horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[o][n]);var u,l,f,m,v={horizontal:"center",vertical:0<=n||"+"===n?"left":"right"},x={horizontal:0<=n||"+"===n?"top":"bottom",vertical:"middle"},C={horizontal:0,vertical:hk/2},k="vertical"===o?a.height:a.width,M=e.getModel("controlStyle"),E=M.get("show",!0),V=E?M.get("itemSize"):0,N=E?M.get("itemGap"):0,G=V+N,te=e.get("label.rotate")||0;te=te*hk/180;var J=M.get("position",!0),me=E&&M.get("showPlayBtn",!0),ge=E&&M.get("showPrevBtn",!0),_e=0,Me=k;return"left"===J||"bottom"===J?(me&&(u=[0,0],_e+=G),ge&&(l=[_e,0],_e+=G)):(me&&(u=[Me-V,0],Me-=G),ge&&(l=[0,0],_e+=G)),E&&M.get("showNextBtn",!0)&&(f=[Me-V,0],Me-=G),m=[_e,Me],e.get("inverse")&&m.reverse(),{viewRect:a,mainLength:k,orient:o,rotation:C[o],labelRotation:te,labelPosOpt:n,labelAlign:e.get("label.align")||v[o],labelBaseline:e.get("label.verticalAlign")||e.get("label.baseline")||x[o],playPosition:u,prevBtnPosition:l,nextBtnPosition:f,axisExtent:m,controlSize:V,controlGap:N}},_position:function(e,t){var n=this._mainGroup,o=this._labelGroup,a=e.viewRect;if("vertical"===e.orient){var u=vi(),l=a.x,f=a.y+a.height;Xc(u,u,[-l,-f]),Yc(u,u,-hk/2),Xc(u,u,[l,f]),(a=a.clone()).applyTransform(u)}var m=N(a),v=N(n.getBoundingRect()),x=N(o.getBoundingRect()),C=n.position,k=o.position;k[0]=C[0]=m[0][0];var M,E=e.labelPosOpt;function V(te){var J=te.position;te.origin=[m[0][0]-J[0],m[1][0]-J[1]]}function N(te){return[[te.x,te.x+te.width],[te.y,te.y+te.height]]}function G(te,J,me,ge,pe){te[ge]+=me[ge][pe]-J[ge][pe]}isNaN(E)?(G(C,v,m,1,M="+"===E?0:1),G(k,x,m,1,1-M)):(G(C,v,m,1,M=0<=E?0:1),k[1]=C[1]+E),n.attr("position",C),o.attr("position",k),n.rotation=o.rotation=e.rotation,V(n),V(o)},_createAxis:function(e,t){var n=t.getData(),o=t.get("axisType"),a=uh(t,o);a.getTicks=function(){return n.mapArray(["value"],function(f){return f})};var u=n.getDataExtent("value");a.setExtent(u[0],u[1]),a.niceTicks();var l=new bM("value",a,e.axisExtent,o);return l.model=t,l},_createGroup:function(e){var t=this["_"+e]=new mr;return this.group.add(t),t},_renderAxisLine:function(e,t,n,o){var a=n.getExtent();o.get("lineStyle.show")&&t.add(new $s({shape:{x1:a[0],y1:0,x2:a[1],y2:0},style:Ne({lineCap:"round"},o.getModel("lineStyle").getLineStyle()),silent:!0,z2:1}))},_renderAxisTick:function(e,t,n,o){var a=o.getData(),u=n.scale.getTicks();SA(u,function(l){var f=n.dataToCoord(l),m=a.getItemModel(l),v=m.getModel("itemStyle"),x=m.getModel("emphasis.itemStyle"),C={position:[f,0],onclick:Cx(this._changeTimeline,this,l)},k=xM(m,v,t,C);Go(k,x.getItemStyle()),m.get("tooltip")?(k.dataIndex=l,k.dataModel=o):k.dataIndex=k.dataModel=null},this)},_renderAxisLabel:function(e,t,n,o){if(n.getLabelModel().get("show")){var a=o.getData(),u=n.getViewLabels();SA(u,function(l){var f=l.tickValue,m=a.getItemModel(f),v=m.getModel("label"),x=m.getModel("emphasis.label"),C=n.dataToCoord(l.tickValue),k=new Yo({position:[C,0],rotation:e.labelRotation-e.rotation,onclick:Cx(this._changeTimeline,this,f),silent:!1});Ta(k.style,v,{text:l.formattedLabel,textAlign:e.labelAlign,textVerticalAlign:e.labelBaseline}),t.add(k),Go(k,Ta({},x))},this)}},_renderControl:function(e,t,n,o){var a=e.controlSize,u=e.rotation,l=o.getModel("controlStyle").getItemStyle(),f=o.getModel("emphasis.controlStyle").getItemStyle(),m=[0,-a/2,a,a],v=o.getPlayState(),x=o.get("inverse",!0);function C(k,M,E,V){if(k){var N=(J=m,ge=(me={position:k,origin:[a/2,0],rotation:V?-u:0,rectHover:!0,style:l,onclick:E}).style,pe=qm(o.get(M),me||{},new ii(J[0],J[1],J[2],J[3])),ge&&pe.setStyle(ge),pe);t.add(N),Go(N,f)}var J,me,ge,pe}C(e.nextBtnPosition,"controlStyle.nextIcon",Cx(this._changeTimeline,this,x?"-":"+")),C(e.prevBtnPosition,"controlStyle.prevIcon",Cx(this._changeTimeline,this,x?"+":"-")),C(e.playPosition,"controlStyle."+(v?"stopIcon":"playIcon"),Cx(this._handlePlayClick,this,!v),!0)},_renderCurrentPointer:function(e,t,n,o){var a=o.getData(),u=o.getCurrentIndex(),l=a.getItemModel(u).getModel("checkpointStyle"),f=this;this._currentPointer=xM(l,l,this._mainGroup,{},this._currentPointer,{onCreate:function(v){v.draggable=!0,v.drift=Cx(f._handlePointerDrag,f),v.ondragend=Cx(f._handlePointerDragend,f),Hy(v,u,n,o,!0)},onUpdate:function(v){Hy(v,u,n,o)}})},_handlePlayClick:function(e){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:e,from:this.uid})},_handlePointerDrag:function(e,t,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},_handlePointerDragend:function(e){this._pointerChangeTimeline([e.offsetX,e.offsetY],!0)},_pointerChangeTimeline:function(e,t){var n=this._toAxisCoord(e)[0],o=Pg(this._axis.getExtent().slice());n>o[1]&&(n=o[1]),n<o[0]&&(n=o[0]),this._currentPointer.position[0]=n,this._currentPointer.dirty();var a=this._findNearestTick(n),u=this.model;(t||a!==u.getCurrentIndex()&&u.get("realtime"))&&this._changeTimeline(a)},_doPlayStop:function(){this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout(Cx(function(){var e=this.model;this._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))},this),this.model.get("playInterval")))},_toAxisCoord:function(e){return Ai(e,this._mainGroup.getLocalTransform(),!0)},_findNearestTick:function(e){var t,n=this.model.getData(),o=1/0,a=this._axis;return n.each(["value"],function(u,l){var f=a.dataToCoord(u),m=Math.abs(f-e);m<o&&(o=m,t=l)}),t},_clearTimer:function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},_changeTimeline:function(e){var t=this.model.getCurrentIndex();"+"===e?e=t+1:"-"===e&&(e=t-1),this.api.dispatchAction({type:"timelineChange",currentIndex:e,from:this.uid})}}),da(function(e){var t=e&&e.timeline;en(t)||(t=t?[t]:[]),le(t,function(n){n&&function(o){var a=o.type,u={number:"value",time:"time"};if(u[a]&&(o.axisType=u[a],delete o.type),_A(o),w_(o,"controlPosition")){var l=o.controlStyle||(o.controlStyle={});w_(l,"position")||(l.position=o.controlPosition),"none"!==l.position||w_(l,"show")||(l.show=!1,delete l.position),delete o.controlPosition}le(o.data||[],function(f){ln(f)&&!en(f)&&(!w_(f,"value")&&w_(f,"name")&&(f.value=f.name),_A(f))})}(n)})});var _M=Ac,S_=Pa;function wM(e){Nh(e,"label",["show"])}var SM=eu({type:"marker",dependencies:["series","grid","polar","geo"],init:function(e,t,n){this.mergeDefaultAndTheme(e,n),this._mergeOption(e,n,!1,!0)},isAnimationEnabled:function(){if(Ze.node)return!1;var e=this.__hostSeries;return this.getShallow("animation")&&e&&e.isAnimationEnabled()},mergeOption:function(e,t){this._mergeOption(e,t,!1,!1)},_mergeOption:function(e,t,n,o){var a=this.constructor,u=this.mainType+"Model";n||t.eachSeries(function(l){var f=l.get(this.mainType,!0),m=l[u];f&&f.data?(m?m._mergeOption(f,t,!0):(o&&wM(f),le(f.data,function(v){v instanceof Array?(wM(v[0]),wM(v[1])):wM(v)}),Ne(m=new a(f,this,t),{mainType:this.mainType,seriesIndex:l.seriesIndex,name:l.name,createdBySelf:!0}),m.__hostSeries=l),l[u]=m):l[u]=null},this)},formatTooltip:function(e,t,n,o){var a=this.getData(),u=this.getRawValue(e),l=en(u)?Ge(u,_M).join(", "):_M(u),f=a.getName(e),m=S_(this.name);return null==u&&!f||(m+="html"===o?"<br/>":"\n"),f&&(m+=S_(f),null!=u&&(m+=" : ")),null!=u&&(m+=S_(l)),m},getData:function(){return this._data},setData:function(e){this._data=e}});de(SM,Pc),SM.extend({type:"markPoint",defaultOption:{zlevel:0,z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}}});var uD=$e;function lD(e,t,n,o,a,u){var l=[],f=nm(t,o)?t.getCalculationInfo("stackResultDimension"):o,m=CM(t,f,e),v=t.indicesOfNearest(f,m)[0];l[a]=t.get(n,v),l[u]=t.get(f,v);var x=t.get(o,v),C=M0(t.get(o,v));return 0<=(C=Math.min(C,20))&&(l[u]=+l[u].toFixed(C)),[l,x]}var CA=pn,cD={min:CA(lD,"min"),max:CA(lD,"max"),average:CA(lD,"average")};function gk(e,t){var C,n=e.getData(),o=e.coordinateSystem;if(t&&(C=t,isNaN(parseFloat(C.x))||isNaN(parseFloat(C.y)))&&!en(t.coord)&&o){var a=o.dimensions,u=JI(t,n,o,e);if((t=ie(t)).type&&cD[t.type]&&u.baseAxis&&u.valueAxis){var l=uD(a,u.baseAxis.dim),f=uD(a,u.valueAxis.dim),m=cD[t.type](n,u.baseDataDim,u.valueDataDim,l,f);t.coord=m[0],t.value=m[1]}else{for(var v=[null!=t.xAxis?t.xAxis:t.radiusAxis,null!=t.yAxis?t.yAxis:t.angleAxis],x=0;x<2;x++)cD[v[x]]&&(v[x]=CM(n,n.mapDimension(a[x]),v[x]));t.coord=v}}return t}function JI(e,t,n,o){var a={};return null!=e.valueIndex||null!=e.valueDim?(a.valueDataDim=null!=e.valueIndex?t.getDimension(e.valueIndex):e.valueDim,a.valueAxis=n.getAxis(function(u,l){var f=u.getData(),m=f.dimensions;l=f.getDimension(l);for(var v=0;v<m.length;v++){var x=f.getDimensionInfo(m[v]);if(x.name===l)return x.coordDim}}(o,a.valueDataDim)),a.baseAxis=n.getOtherAxis(a.valueAxis),a.baseDataDim=t.mapDimension(a.baseAxis.dim)):(a.baseAxis=o.getBaseAxis(),a.valueAxis=n.getOtherAxis(a.baseAxis),a.baseDataDim=t.mapDimension(a.baseAxis.dim),a.valueDataDim=t.mapDimension(a.valueAxis.dim)),a}function mk(e,t){return!(e&&e.containData&&t.coord&&!function(n){return!(isNaN(parseFloat(n.x))&&isNaN(parseFloat(n.y)))}(t))||e.containData(t.coord)}function kA(e,t,n,o){return o<2?e.coord&&e.coord[o]:e.value}function CM(e,t,n){if("average"!==n)return"median"===n?e.getMedian(t):e.getDataExtent(t,!0)["max"===n?1:0];var o=0,a=0;return e.each(t,function(u,l){isNaN(u)||(o+=u,a++)}),o/a}var dD=Ts({type:"marker",init:function(){this.markerGroupMap=Gt()},render:function(e,t,n){var o=this.markerGroupMap;o.each(function(u){u.__keep=!1});var a=this.type+"Model";t.eachSeries(function(u){var l=u[a];l&&this.renderSeries(u,l,t,n)},this),o.each(function(u){u.__keep||this.group.remove(u.group)},this)},renderSeries:function(){}});function fD(e,t,n){var o=t.coordinateSystem;e.each(function(a){var u,l=e.getItemModel(a),f=nr(l.get("x"),n.getWidth()),m=nr(l.get("y"),n.getHeight());if(isNaN(f)||isNaN(m)){if(t.getMarkerPosition)u=t.getMarkerPosition(e.getValues(e.dimensions,a));else if(o){var v=e.get(o.dimensions[0],a),x=e.get(o.dimensions[1],a);u=o.dataToPoint([v,x])}}else u=[f,m];isNaN(f)||(u[0]=f),isNaN(m)||(u[1]=m),e.setItemLayout(a,u)})}function QI(e,t,n,o){var a=e.getData(),u=o.type;if(!en(o)&&("min"===u||"max"===u||"average"===u||"median"===u||null!=o.xAxis||null!=o.yAxis)){var l,f;if(null!=o.yAxis||null!=o.xAxis)l=t.getAxis(null!=o.yAxis?"y":"x"),f=Gr(o.yAxis,o.xAxis);else{var m=JI(o,a,t,e);l=m.valueAxis,f=CM(a,y1(a,m.valueDataDim),u)}var v="x"===l.dim?0:1,x=1-v,C=ie(o),k={};C.type=null,C.coord=[],k.coord=[],C.coord[x]=-1/0,k.coord[x]=1/0;var M=n.get("precision");0<=M&&"number"==typeof f&&(f=+f.toFixed(Math.min(M,20))),C.coord[v]=k.coord[v]=f,o=[C,k,{type:u,valueIndex:o.valueIndex,value:f}]}return(o=[gk(e,o[0]),gk(e,o[1]),Ne({},o[2])])[2].type=o[2].type||"",xe(o[2],o[0]),xe(o[2],o[1]),o}function kM(e){return!isNaN(e)&&!isFinite(e)}function TA(e,t,n,o){var a=1-e,u=o.dimensions[e];return kM(t[a])&&kM(n[a])&&t[e]===n[e]&&o.getAxis(u).containData(t[e])}function eO(e,t){if("cartesian2d"===e.type){var n=t[0].coord,o=t[1].coord;if(n&&o&&(TA(1,n,o,e)||TA(0,n,o,e)))return!0}return mk(e,t[0])&&mk(e,t[1])}function hD(e,t,n,o,a){var u,l=o.coordinateSystem,f=e.getItemModel(t),m=nr(f.get("x"),a.getWidth()),v=nr(f.get("y"),a.getHeight());if(isNaN(m)||isNaN(v)){if(o.getMarkerPosition)u=o.getMarkerPosition(e.getValues(e.dimensions,t));else{var x=l.dimensions,C=e.get(x[0],t),k=e.get(x[1],t);u=l.dataToPoint([C,k])}if("cartesian2d"===l.type){var M=l.getAxis("x"),E=l.getAxis("y");kM(e.get((x=l.dimensions)[0],t))?u[0]=M.toGlobalCoord(M.getExtent()[n?0:1]):kM(e.get(x[1],t))&&(u[1]=E.toGlobalCoord(E.getExtent()[n?0:1]))}isNaN(m)||(u[0]=m),isNaN(v)||(u[1]=v)}else u=[m,v];e.setItemLayout(t,u)}function iE(e,t,n,o){var a=gk(e,o[0]),u=gk(e,o[1]),l=Gr,f=a.coord,m=u.coord;f[0]=l(f[0],-1/0),f[1]=l(f[1],-1/0),m[0]=l(m[0],1/0),m[1]=l(m[1],1/0);var v=Ae([{},a,u]);return v.coord=[a.coord,u.coord],v.x0=a.x,v.y0=a.y,v.x1=u.x,v.y1=u.y,v}function Pp(e){return!isNaN(e)&&!isFinite(e)}function bS(e,t,n){var o=1-e;return Pp(t[o])&&Pp(n[o])}function aE(e,t){var n=t.coord[0],o=t.coord[1];return!("cartesian2d"!==e.type||!n||!o||!bS(1,n,o)&&!bS(0,n,o))||mk(e,{coord:n,x:t.x0,y:t.y0})||mk(e,{coord:o,x:t.x1,y:t.y1})}function MA(e,t,n,o,a){var u,l=o.coordinateSystem,f=e.getItemModel(t),m=nr(f.get(n[0]),a.getWidth()),v=nr(f.get(n[1]),a.getHeight());if(isNaN(m)||isNaN(v)){if(o.getMarkerPosition)u=o.getMarkerPosition(e.getValues(n,t));else{var x=[M=e.get(n[0],t),E=e.get(n[1],t)];l.clampData&&l.clampData(x,x),u=l.dataToPoint(x,!0)}if("cartesian2d"===l.type){var C=l.getAxis("x"),k=l.getAxis("y"),M=e.get(n[0],t),E=e.get(n[1],t);Pp(M)?u[0]=C.toGlobalCoord(C.getExtent()["x0"===n[0]?0:1]):Pp(E)&&(u[1]=k.toGlobalCoord(k.getExtent()["y0"===n[1]?0:1]))}isNaN(m)||(u[0]=m),isNaN(v)||(u[1]=v)}else u=[m,v];return u}dD.extend({type:"markPoint",updateTransform:function(e,t,n){t.eachSeries(function(o){var a=o.markPointModel;a&&(fD(a.getData(),o,n),this.markerGroupMap.get(o.id).updateLayout(a))},this)},renderSeries:function(e,t,n,o){var a=e.coordinateSystem,u=e.id,l=e.getData(),f=this.markerGroupMap,m=f.get(u)||f.set(u,new ny),v=function(x,C,k){var M;M=x?Ge(x&&x.dimensions,function(N){return Ee({name:N},C.getData().getDimensionInfo(C.getData().mapDimension(N))||{})}):[{name:"value",type:"float"}];var E=new Uu(M,k),V=Ge(k.get("data"),pn(gk,C));return x&&(V=ht(V,pn(mk,x))),E.initData(V,null,x?kA:function(N){return N.value}),E}(a,e,t);t.setData(v),fD(t.getData(),e,o),v.each(function(x){var C=v.getItemModel(x),k=C.getShallow("symbol"),M=C.getShallow("symbolSize"),E=C.getShallow("symbolRotate"),V=Ot(k),N=Ot(M),G=Ot(E);if(V||N||G){var te=t.getRawValue(x),J=t.getDataParams(x);V&&(k=k(te,J)),N&&(M=M(te,J)),G&&(E=E(te,J))}v.setItemVisual(x,{symbol:k,symbolSize:M,symbolRotate:E,color:C.get("itemStyle.color")||l.getVisual("color")})}),m.updateData(v),this.group.add(m.group),v.eachItemGraphicEl(function(x){x.traverse(function(C){C.dataModel=t})}),m.__keep=!0,m.group.silent=t.get("silent")||e.get("silent")}}),da(function(e){e.markPoint=e.markPoint||{}}),SM.extend({type:"markLine",defaultOption:{zlevel:0,z:5,symbol:["circle","arrow"],symbolSize:[8,16],precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"}}),dD.extend({type:"markLine",updateTransform:function(e,t,n){t.eachSeries(function(o){var a=o.markLineModel;if(a){var u=a.getData(),l=a.__from,f=a.__to;l.each(function(m){hD(l,m,!0,o,n),hD(f,m,!1,o,n)}),u.each(function(m){u.setItemLayout(m,[l.getItemLayout(m),f.getItemLayout(m)])}),this.markerGroupMap.get(o.id).updateLayout()}},this)},renderSeries:function(e,t,n,o){var a=e.coordinateSystem,u=e.id,l=e.getData(),f=this.markerGroupMap,m=f.get(u)||f.set(u,new pm);this.group.add(m.group);var v=function(N,G,te){var J;J=N?Ge(N&&N.dimensions,function(We){return Ee({name:We},G.getData().getDimensionInfo(G.getData().mapDimension(We))||{})}):[{name:"value",type:"float"}];var me=new Uu(J,te),ge=new Uu(J,te),pe=new Uu([],te),_e=Ge(te.get("data"),pn(QI,G,N,te));N&&(_e=ht(_e,pn(eO,N)));var Me=N?kA:function(We){return We.value};return me.initData(Ge(_e,function(We){return We[0]}),null,Me),ge.initData(Ge(_e,function(We){return We[1]}),null,Me),pe.initData(Ge(_e,function(We){return We[2]})),pe.hasItemOption=!0,{from:me,to:ge,line:pe}}(a,e,t),x=v.from,C=v.to,k=v.line;t.__from=x,t.__to=C,t.setData(k);var M=t.get("symbol"),E=t.get("symbolSize");function V(N,G,te){var J=N.getItemModel(G);hD(N,G,te,e,o),N.setItemVisual(G,{symbolRotate:J.get("symbolRotate"),symbolSize:J.get("symbolSize")||E[te?0:1],symbol:J.get("symbol",!0)||M[te?0:1],color:J.get("itemStyle.color")||l.getVisual("color")})}en(M)||(M=[M,M]),"number"==typeof E&&(E=[E,E]),v.from.each(function(N){V(x,N,!0),V(C,N,!1)}),k.each(function(N){var G=k.getItemModel(N).get("lineStyle.color");k.setItemVisual(N,{color:G||x.getItemVisual(N,"color")}),k.setItemLayout(N,[x.getItemLayout(N),C.getItemLayout(N)]),k.setItemVisual(N,{fromSymbolRotate:x.getItemVisual(N,"symbolRotate"),fromSymbolSize:x.getItemVisual(N,"symbolSize"),fromSymbol:x.getItemVisual(N,"symbol"),toSymbolRotate:C.getItemVisual(N,"symbolRotate"),toSymbolSize:C.getItemVisual(N,"symbolSize"),toSymbol:C.getItemVisual(N,"symbol")})}),m.updateData(k),v.line.eachItemGraphicEl(function(N,G){N.traverse(function(te){te.dataModel=t})}),m.__keep=!0,m.group.silent=t.get("silent")||e.get("silent")}}),da(function(e){e.markLine=e.markLine||{}}),SM.extend({type:"markArea",defaultOption:{zlevel:0,z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}}});var DA=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]];dD.extend({type:"markArea",updateTransform:function(e,t,n){t.eachSeries(function(o){var a=o.markAreaModel;if(a){var u=a.getData();u.each(function(l){var f=Ge(DA,function(m){return MA(u,l,m,o,n)});u.setItemLayout(l,f),u.getItemGraphicEl(l).setShape("points",f)})}},this)},renderSeries:function(e,t,n,o){var a=e.coordinateSystem,u=e.id,l=e.getData(),f=this.markerGroupMap,m=f.get(u)||f.set(u,{group:new mr});this.group.add(m.group),m.__keep=!0;var v=function(x,C,k){var M,E;E=x?(M=Ge(x&&x.dimensions,function(G){var te=C.getData();return Ee({name:G},te.getDimensionInfo(te.mapDimension(G))||{})}),new Uu(Ge(["x0","y0","x1","y1"],function(G,te){return{name:G,type:M[te%2].type}}),k)):new Uu(M=[{name:"value",type:"float"}],k);var V=Ge(k.get("data"),pn(iE,C,x,k));return x&&(V=ht(V,pn(aE,x))),E.initData(V,null,x?function(G,te,J,me){return G.coord[Math.floor(me/2)][me%2]}:function(G){return G.value}),E.hasItemOption=!0,E}(a,e,t);t.setData(v),v.each(function(x){var C=Ge(DA,function(M){return MA(v,x,M,e,o)}),k=!0;le(DA,function(M){if(k){var E=v.get(M[0],x),V=v.get(M[1],x);(Pp(E)||a.getAxis("x").containData(E))&&(Pp(V)||a.getAxis("y").containData(V))&&(k=!1)}}),v.setItemLayout(x,{points:C,allClipped:k}),v.setItemVisual(x,{color:l.getVisual("color")})}),v.diff(m.__data).add(function(x){var C=v.getItemLayout(x);if(!C.allClipped){var k=new Vo({shape:{points:C.points}});v.setItemGraphicEl(x,k),m.group.add(k)}}).update(function(x,C){var k=m.__data.getItemGraphicEl(C),M=v.getItemLayout(x);M.allClipped?k&&m.group.remove(k):(k?Po(k,{shape:{points:M.points}},t,x):k=new Vo({shape:{points:M.points}}),v.setItemGraphicEl(x,k),m.group.add(k))}).remove(function(x){var C=m.__data.getItemGraphicEl(x);m.group.remove(C)}).execute(),v.eachItemGraphicEl(function(x,C){var k=v.getItemModel(C),M=k.getModel("label"),E=k.getModel("emphasis.label"),V=v.getItemVisual(C,"color");x.useStyle(Ee(k.getModel("itemStyle").getItemStyle(),{fill:ff(V,.4),stroke:V})),x.hoverStyle=k.getModel("emphasis.itemStyle").getItemStyle(),Ln(x.style,x.hoverStyle,M,E,{labelFetcher:t,labelDataIndex:C,defaultText:v.getName(C)||"",isRectText:!0,autoColor:V}),Go(x,{}),x.dataModel=t}),m.__data=v,m.group.silent=t.get("silent")||e.get("silent")}}),da(function(e){e.markArea=e.markArea||{}});var tO=Dr.legend.selector,AA={all:{type:"all",title:ie(tO.all)},inverse:{type:"inverse",title:ie(tO.inverse)}},IA=eu({type:"legend.plain",dependencies:["series"],layoutMode:{type:"box",ignoreSize:!0},init:function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},mergeOption:function(e){IA.superCall(this,"mergeOption",e),this._updateSelector(e)},_updateSelector:function(e){var t=e.selector;!0===t&&(t=e.selector=["all","inverse"]),en(t)&&le(t,function(n,o){Gn(n)&&(n={type:n}),t[o]=xe(n,AA[n.type])})},optionUpdated:function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var o=e[n].get("name");if(this.isSelected(o)){this.select(o),t=!0;break}}t||this.select(e[0].get("name"))}},_updateData:function(e){var t=[],n=[];e.eachRawSeries(function(a){var u;if(n.push(a.name),a.legendVisualProvider){var f=a.legendVisualProvider.getAllNames();e.isSeriesFiltered(a)||(n=n.concat(f)),f.length?t=t.concat(f):u=!0}else u=!0;u&&Bm(a)&&t.push(a.name)}),this._availableNames=n;var o=Ge(this.get("data")||t,function(a){return"string"!=typeof a&&"number"!=typeof a||(a={name:a}),new ei(a,this,this.ecModel)},this);this._data=o},getData:function(){return this._data},select:function(e){var t=this.option.selected;"single"===this.get("selectedMode")&&le(this._data,function(n){t[n.get("name")]=!1}),t[e]=!0},unSelect:function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},toggleSelected:function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},allSelect:function(){var t=this.option.selected;le(this._data,function(n){t[n.get("name",!0)]=!0})},inverseSelect:function(){var t=this.option.selected;le(this._data,function(n){var o=n.get("name",!0);t.hasOwnProperty(o)||(t[o]=!0),t[o]=!t[o]})},isSelected:function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&0<=$e(this._availableNames,e)},getOrient:function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},defaultOption:{zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",itemStyle:{borderWidth:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}}});function xS(e,t,n){var o,a={},u="toggleSelected"===e;return n.eachComponent("legend",function(l){u&&null!=o?l[o?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?l[e]():(l[e](t.name),o=l.isSelected(t.name)),le(l.getData(),function(f){var m=f.get("name");if("\n"!==m&&""!==m){var v=l.isSelected(m);a[m]=a.hasOwnProperty(m)?a[m]&&v:v}})}),"allSelect"===e||"inverseSelect"===e?{selected:a}:{name:t.name,selected:a}}io("legendToggleSelect","legendselectchanged",pn(xS,"toggleSelected")),io("legendAllSelect","legendselectall",pn(xS,"allSelect")),io("legendInverseSelect","legendinverseselect",pn(xS,"inverseSelect")),io("legendSelect","legendselected",pn(xS,"select")),io("legendUnSelect","legendunselected",pn(xS,"unSelect"));var kx=pn,Tx=le,Wy=mr,sE=Ts({type:"legend.plain",newlineDisabled:!1,init:function(){this.group.add(this._contentGroup=new Wy),this.group.add(this._selectorGroup=new Wy),this._isFirstRender=!0},getContentGroup:function(){return this._contentGroup},getSelectorGroup:function(){return this._selectorGroup},render:function(e,t,n){var o=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var a=e.get("align"),u=e.get("orient");a&&"auto"!==a||(a="right"===e.get("left")&&"vertical"===u?"right":"left");var l=e.get("selector",!0),f=e.get("selectorPosition",!0);!l||f&&"auto"!==f||(f="horizontal"===u?"end":"start"),this.renderInner(a,e,t,n,l,u,f);var m=e.getBoxLayoutParams(),v={width:n.getWidth(),height:n.getHeight()},x=e.get("padding"),C=si(m,v,x),k=this.layoutInner(e,a,C,o,l,f),M=si(Ee({width:k.width,height:k.height},m),v,x);this.group.attr("position",[M.x-k.x,M.y-k.y]),this.group.add(this._backgroundEl=AI(k,e))}},resetInner:function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},renderInner:function(e,t,n,o,a,u,l){var f=this.getContentGroup(),m=Gt(),v=t.get("selectedMode"),x=[];n.eachRawSeries(function(C){C.get("legendHoverLink")||x.push(C.id)}),Tx(t.getData(),function(C,k){var M=C.get("name");if(this.newlineDisabled||""!==M&&"\n"!==M){var E=n.getSeriesByName(M)[0];if(!m.get(M))if(E){var V=E.getData(),N=V.getVisual("color"),G=V.getVisual("borderColor");"function"==typeof N&&(N=N(E.getDataParams(0))),"function"==typeof G&&(G=G(E.getDataParams(0)));var te=V.getVisual("legendSymbol")||"roundRect",J=V.getVisual("symbol");this._createItem(M,k,C,t,te,J,e,N,G,v).on("click",kx(rO,M,null,o,x)).on("mouseover",kx(TM,E.name,null,o,x)).on("mouseout",kx(OA,E.name,null,o,x)),m.set(M,!0)}else n.eachRawSeries(function(me){if(!m.get(M)&&me.legendVisualProvider){var ge=me.legendVisualProvider;if(!ge.containName(M))return;var pe=ge.indexOfName(M),_e=ge.getItemVisual(pe,"color"),Me=ge.getItemVisual(pe,"borderColor");this._createItem(M,k,C,t,"roundRect",null,e,_e,Me,v).on("click",kx(rO,null,M,o,x)).on("mouseover",kx(TM,null,M,o,x)).on("mouseout",kx(OA,null,M,o,x)),m.set(M,!0)}},this)}else f.add(new Wy({newline:!0}))},this),a&&this._createSelector(a,t,o,u,l)},_createSelector:function(e,t,n,o,a){var u=this.getSelectorGroup();Tx(e,function(l){!function(f){var m=f.type,v=new Yo({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===m?"legendAllSelect":"legendInverseSelect"})}});u.add(v);var x=t.getModel("selectorLabel"),C=t.getModel("emphasis.selectorLabel");Ln(v.style,v.hoverStyle={},x,C,{defaultText:f.title,isRectText:!1}),Go(v)}(l)})},_createItem:function(e,t,n,o,a,u,l,f,m,v){var x=o.get("itemWidth"),C=o.get("itemHeight"),k=o.get("inactiveColor"),M=o.get("inactiveBorderColor"),E=o.get("symbolKeepAspect"),V=o.getModel("itemStyle"),N=o.isSelected(e),G=new Wy,te=n.getModel("textStyle"),J=n.get("icon"),me=n.getModel("tooltip"),ge=me.parentModel,pe=$d(a=J||a,0,0,x,C,N?f:k,null==E||E);if(G.add(nO(pe,a,V,m,M,N)),!J&&u&&(u!==a||"none"===u)){var _e=.8*C;"none"===u&&(u="circle");var Me=$d(u,(x-_e)/2,(C-_e)/2,_e,_e,N?f:k,null==E||E);G.add(nO(Me,u,V,m,M,N))}var We="left"===l?x+5:-5,Ke=l,et=o.get("formatter"),ut=e;"string"==typeof et&&et?ut=et.replace("{name}",null!=e?e:""):"function"==typeof et&&(ut=et(e)),G.add(new Yo({style:Ta({},te,{text:ut,x:We,y:C/2,textFill:N?te.getTextColor():k,textAlign:Ke,textVerticalAlign:"middle"})}));var lt=new fi({shape:G.getBoundingRect(),invisible:!0,tooltip:me.get("show")?Ne({content:e,formatter:ge.get("formatter",!0)||function(){return e},formatterParams:{componentType:"legend",legendIndex:o.componentIndex,name:e,$vars:["name"]}},me.option):null});return G.add(lt),G.eachChild(function(vt){vt.silent=!0}),lt.silent=!v,this.getContentGroup().add(G),Go(G),G.__legendDataIndex=t,G},layoutInner:function(e,t,n,o,a,u){var l=this.getContentGroup(),f=this.getSelectorGroup();Ud(e.get("orient"),l,e.get("itemGap"),n.width,n.height);var m=l.getBoundingRect(),v=[-m.x,-m.y];if(a){Ud("horizontal",f,e.get("selectorItemGap",!0));var x=f.getBoundingRect(),C=[-x.x,-x.y],k=e.get("selectorButtonGap",!0),M=e.getOrient().index,E=0===M?"width":"height",V=0===M?"height":"width",N=0===M?"y":"x";"end"===u?C[M]+=m[E]+k:v[M]+=x[E]+k,C[1-M]+=m[V]/2-x[V]/2,f.attr("position",C),l.attr("position",v);var G={x:0,y:0};return G[E]=m[E]+k+x[E],G[V]=Math.max(m[V],x[V]),G[N]=Math.min(0,x[N]+C[1-M]),G}return l.attr("position",v),this.group.getBoundingRect()},remove:function(){this.getContentGroup().removeAll(),this._isFirstRender=!0}});function nO(e,t,n,o,a,u){var l;return"line"!==t&&t.indexOf("empty")<0?(l=n.getItemStyle(),e.style.stroke=o,u||(l.stroke=a)):l=n.getItemStyle(["borderWidth","borderColor"]),e.setStyle(l)}function rO(e,t,n,o){OA(e,t,n,o),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),TM(e,t,n,o)}function TM(e,t,n,o){var a=n.getZr().storage.getDisplayList()[0];a&&a.useHoverLayer||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:o})}function OA(e,t,n,o){var a=n.getZr().storage.getDisplayList()[0];a&&a.useHoverLayer||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:o})}Ii(ih.PROCESSOR.SERIES_FILTER,function(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries(function(n){for(var o=0;o<t.length;o++)if(!t[o].isSelected(n.name))return!1;return!0})}),ci.registerSubTypeDefaulter("legend",function(){return"plain"});var gD=IA.extend({type:"legend.scroll",setScrollDataIndex:function(e){this.option.scrollDataIndex=e},defaultOption:{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800},init:function(e,t,n,o){var a=Fg(e);gD.superCall(this,"init",e,t,n,o),oO(this,e,a)},mergeOption:function(e,t){gD.superCall(this,"mergeOption",e,t),oO(this,this.option,e)}});function oO(e,t,n){var o=[1,1];o[e.getOrient().index]=0,Ic(t,n,{type:"box",ignoreSize:o})}var iO=mr,mD=["width","height"],EA=["x","y"],PA=sE.extend({type:"legend.scroll",newlineDisabled:!0,init:function(){PA.superCall(this,"init"),this._currentIndex=0,this.group.add(this._containerGroup=new iO),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new iO)},resetInner:function(){PA.superCall(this,"resetInner"),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},renderInner:function(e,t,n,o,a,u,l){var f=this;PA.superCall(this,"renderInner",e,t,n,o,a,u,l);var m=this._controllerGroup,v=t.get("pageIconSize",!0);en(v)||(v=[v,v]),C("pagePrev",0);var x=t.getModel("pageTextStyle");function C(k,M){var E=k+"DataIndex",V=qm(t.get("pageIcons",!0)[t.getOrient().name][M],{onclick:Rt(f._pageGo,f,E,t,o)},{x:-v[0]/2,y:-v[1]/2,width:v[0],height:v[1]});V.name=k,m.add(V)}m.add(new Yo({name:"pageText",style:{textFill:x.getTextColor(),font:x.getFont(),textVerticalAlign:"middle",textAlign:"center"},silent:!0})),C("pageNext",1)},layoutInner:function(e,t,n,o,a,u){var l=this.getSelectorGroup(),f=e.getOrient().index,m=mD[f],v=EA[f],x=mD[1-f],C=EA[1-f];a&&Ud("horizontal",l,e.get("selectorItemGap",!0));var k=e.get("selectorButtonGap",!0),M=l.getBoundingRect(),E=[-M.x,-M.y],V=ie(n);a&&(V[m]=n[m]-M[m]-k);var N=this._layoutContentAndController(e,o,V,f,m,x,C);if(a){if("end"===u)E[f]+=N[m]+k;else{var G=M[m]+k;E[f]-=G,N[v]-=G}N[m]+=M[m]+k,E[1-f]+=N[C]+N[x]/2-M[x]/2,N[x]=Math.max(N[x],M[x]),N[C]=Math.min(N[C],M[C]+E[1-f]),l.attr("position",E)}return N},_layoutContentAndController:function(e,t,n,o,a,u,l){var f=this.getContentGroup(),m=this._containerGroup,v=this._controllerGroup;Ud(e.get("orient"),f,e.get("itemGap"),o?n.width:null,o?null:n.height),Ud("horizontal",v,e.get("pageButtonItemGap",!0));var x=f.getBoundingRect(),C=v.getBoundingRect(),k=this._showController=x[a]>n[a],M=[-x.x,-x.y];t||(M[o]=f.position[o]);var E=[0,0],V=[-C.x,-C.y],N=Or(e.get("pageButtonGap",!0),e.get("itemGap",!0));k&&("end"===e.get("pageButtonPosition",!0)?V[o]+=n[a]-C[a]:E[o]+=C[a]+N),V[1-o]+=x[u]/2-C[u]/2,f.attr("position",M),m.attr("position",E),v.attr("position",V);var G={x:0,y:0};if(G[a]=k?n[a]:x[a],G[u]=Math.max(x[u],C[u]),G[l]=Math.min(0,C[l]+V[1-o]),m.__rectSize=n[a],k){var te={x:0,y:0};te[a]=Math.max(n[a]-C[a]-N,0),te[u]=G[u],m.setClipPath(new fi({shape:te})),m.__rectSize=te[a]}else v.eachChild(function(me){me.attr({invisible:!0,silent:!0})});var J=this._getPageInfo(e);return null!=J.pageIndex&&Po(f,{position:J.contentPosition},k&&e),this._updatePageInfoView(e,J),G},_pageGo:function(e,t,n){var o=this._getPageInfo(t)[e];null!=o&&n.dispatchAction({type:"legendScroll",scrollDataIndex:o,legendId:t.id})},_updatePageInfoView:function(e,t){var n=this._controllerGroup;le(["pagePrev","pageNext"],function(m){var v=null!=t[m+"DataIndex"],x=n.childOfName(m);x&&(x.setStyle("fill",e.get(v?"pageIconColor":"pageIconInactiveColor",!0)),x.cursor=v?"pointer":"default")});var o=n.childOfName("pageText"),a=e.get("pageFormatter"),u=t.pageIndex,l=null!=u?u+1:0,f=t.pageCount;o&&a&&o.setStyle("text",Gn(a)?a.replace("{current}",l).replace("{total}",f):a({current:l,total:f}))},_getPageInfo:function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),o=this._containerGroup.__rectSize,a=e.getOrient().index,u=mD[a],l=EA[a],f=this._findTargetItemIndex(t),m=n.children(),v=m[f],x=m.length,C=x?1:0,k={contentPosition:n.position.slice(),pageCount:C,pageIndex:C-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!v)return k;var M=te(v);k.contentPosition[a]=-M.s;for(var E=f+1,V=M,N=M,G=null;E<=x;++E)(!(G=te(m[E]))&&N.e>V.s+o||G&&!J(G,V.s))&&(V=N.i>V.i?N:G)&&(null==k.pageNextDataIndex&&(k.pageNextDataIndex=V.i),++k.pageCount),N=G;for(E=f-1,V=M,N=M,G=null;-1<=E;--E)(G=te(m[E]))&&J(N,G.s)||!(V.i<N.i)||(N=V,null==k.pagePrevDataIndex&&(k.pagePrevDataIndex=V.i),++k.pageCount,++k.pageIndex),V=G;return k;function te(me){if(me){var ge=me.getBoundingRect(),pe=ge[l]+me.position[a];return{s:pe,e:pe+ge[u],i:me.__legendDataIndex}}}function J(me,ge){return me.e>=ge&&me.s<=ge+o}},_findTargetItemIndex:function(e){return this._showController?(this.getContentGroup().eachChild(function(o,a){var u=o.__legendDataIndex;null==n&&null!=u&&(n=a),u===e&&(t=a)}),null!=t?t:n):0;var t,n}});io("legendScroll","legendscroll",function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},function(o){o.setScrollDataIndex(n)})}),mM.extend({type:"dataZoom.slider",layoutMode:"box",defaultOption:{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#2f4554",width:.5,opacity:.3},areaStyle:{color:"rgba(47,69,84,0.3)",opacity:.3}},borderColor:"#ddd",fillerColor:"rgba(167,183,204,0.4)",handleIcon:"M8.2,13.6V3.9H6.3v9.7H3.1v14.9h3.3v9.7h1.8v-9.7h3.3V13.6H8.2z M9.7,24.4H4.8v-1.4h4.9V24.4z M9.7,19.1H4.8v-1.4h4.9V19.1z",handleSize:"100%",handleStyle:{color:"#a7b7cc"},labelPrecision:null,labelFormatter:null,showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#333"}}});var Gy=fi,C_=hi,pk=Pg,Mx=Rt,NA=le,_S="horizontal",aO="vertical",sO=["line","bar","candlestick","scatter"],pD=hA.extend({type:"dataZoom.slider",init:function(e,t){this._displayables={},this.api=t},render:function(e,t,n,o){pD.superApply(this,"render",arguments),Jh(this,"_dispatchZoomAction",this.dataZoomModel.get("throttle"),"fixRate"),this._orient=e.get("orient"),!1!==this.dataZoomModel.get("show")?(o&&"dataZoom"===o.type&&o.from===this.uid||this._buildView(),this._updateView()):this.group.removeAll()},remove:function(){pD.superApply(this,"remove",arguments),Zg(this,"_dispatchZoomAction")},dispose:function(){pD.superApply(this,"dispose",arguments),Zg(this,"_dispatchZoomAction")},_buildView:function(){var e=this.group;e.removeAll(),this._resetLocation(),this._resetInterval();var t=this._displayables.barGroup=new mr;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),e.add(t),this._positionGroup()},_resetLocation:function(){var e=this.dataZoomModel,t=this.api,n=this._findCoordRect(),o={width:t.getWidth(),height:t.getHeight()},a=this._orient===_S?{right:o.width-n.x-n.width,top:o.height-30-7,width:n.width,height:30}:{right:7,top:n.y,width:30,height:n.height},u=Fg(e.option);le(["right","top","width","height"],function(f){"ph"===u[f]&&(u[f]=a[f])});var l=si(u,o,e.padding);this._location={x:l.x,y:l.y},this._size=[l.width,l.height],this._orient===aO&&this._size.reverse()},_positionGroup:function(){var e=this.group,t=this._location,n=this._orient,o=this.dataZoomModel.getFirstTargetAxisModel(),a=o&&o.get("inverse"),u=this._displayables.barGroup,l=(this._dataShadowInfo||{}).otherAxisInverse;u.attr(n!==_S||a?n===_S&&a?{scale:l?[-1,1]:[-1,-1]}:n!==aO||a?{scale:l?[-1,-1]:[-1,1],rotation:Math.PI/2}:{scale:l?[1,-1]:[1,1],rotation:Math.PI/2}:{scale:l?[1,1]:[1,-1]});var f=e.getBoundingRect([u]);e.attr("position",[t.x-f.x,t.y-f.y])},_getViewExtent:function(){return[0,this._size[0]]},_renderBackground:function(){var t=this._size,n=this._displayables.barGroup;n.add(new Gy({silent:!0,shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:this.dataZoomModel.get("backgroundColor")},z2:-40})),n.add(new Gy({shape:{x:0,y:0,width:t[0],height:t[1]},style:{fill:"transparent"},z2:0,onclick:Rt(this._onClickPanelClick,this)}))},_renderDataShadow:function(){var e=this._dataShadowInfo=this._prepareDataShadowInfo();if(e){var t=this._size,n=e.series,o=n.getRawData(),a=n.getShadowDim?n.getShadowDim():e.otherDim;if(null!=a){var u=o.getDataExtent(a),l=.3*(u[1]-u[0]);u=[u[0]-l,u[1]+l];var f,m=[0,t[1]],x=[[t[0],0],[0,0]],C=[],k=t[0]/(o.count()-1),M=0,E=Math.round(o.count()/t[0]);o.each([a],function(N,G){if(0<E&&G%E)M+=k;else{var te=null==N||isNaN(N)||""===N,J=te?0:C_(N,u,m,!0);te&&!f&&G?(x.push([x[x.length-1][0],0]),C.push([C[C.length-1][0],0])):!te&&f&&(x.push([M,0]),C.push([M,0])),x.push([M,J]),C.push([M,J]),M+=k,f=te}});var V=this.dataZoomModel;this._displayables.barGroup.add(new Vo({shape:{points:x},style:Ee({fill:V.get("dataBackgroundColor")},V.getModel("dataBackground.areaStyle").getAreaStyle()),silent:!0,z2:-20})),this._displayables.barGroup.add(new Zo({shape:{points:C},style:V.getModel("dataBackground.lineStyle").getLineStyle(),silent:!0,z2:-19}))}}},_prepareDataShadowInfo:function(){var e=this.dataZoomModel,t=e.get("showDataShadow");if(!1!==t){var n,o=this.ecModel;return e.eachTargetAxis(function(a,u){le(e.getAxisProxy(a.name,u).getTargetSeriesModels(),function(l){if(!(n||!0!==t&&$e(sO,l.get("type"))<0)){var f,m=o.getComponent(a.axis,u).axis,v={x:"y",y:"x",radius:"angle",angle:"radius"}[a.name],x=l.coordinateSystem;null!=v&&x.getOtherAxis&&(f=x.getOtherAxis(m).inverse),v=l.getData().mapDimension(v),n={thisAxis:m,series:l,thisDim:a.name,otherDim:v,otherAxisInverse:f}}},this)},this),n}},_renderHandle:function(){var e=this._displayables,t=e.handles=[],n=e.handleLabels=[],o=this._displayables.barGroup,a=this._size,u=this.dataZoomModel;o.add(e.filler=new Gy({draggable:!0,cursor:RA(this._orient),drift:Mx(this._onDragMove,this,"all"),ondragstart:Mx(this._showDataInfo,this,!0),ondragend:Mx(this._onDragEnd,this),onmouseover:Mx(this._showDataInfo,this,!0),onmouseout:Mx(this._showDataInfo,this,!1),style:{fill:u.get("fillerColor"),textPosition:"inside"}})),o.add(new Gy({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:a[0],height:a[1]},style:{stroke:u.get("dataBackgroundColor")||u.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),NA([0,1],function(l){var f=qm(u.get("handleIcon"),{cursor:RA(this._orient),draggable:!0,drift:Mx(this._onDragMove,this,l),ondragend:Mx(this._onDragEnd,this),onmouseover:Mx(this._showDataInfo,this,!0),onmouseout:Mx(this._showDataInfo,this,!1)},{x:-1,y:0,width:2,height:2}),m=f.getBoundingRect();this._handleHeight=nr(u.get("handleSize"),this._size[1]),this._handleWidth=m.width/m.height*this._handleHeight,f.setStyle(u.getModel("handleStyle").getItemStyle());var v=u.get("handleColor");null!=v&&(f.style.fill=v),o.add(t[l]=f);var x=u.textStyleModel;this.group.add(n[l]=new Yo({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textVerticalAlign:"middle",textAlign:"center",textFill:x.getTextColor(),textFont:x.getFont()},z2:10}))},this)},_resetInterval:function(){var e=this._range=this.dataZoomModel.getPercentRange(),t=this._getViewExtent();this._handleEnds=[C_(e[0],[0,100],t,!0),C_(e[1],[0,100],t,!0)]},_updateInterval:function(e,t){var n=this.dataZoomModel,o=this._handleEnds,a=this._getViewExtent(),u=n.findRepresentativeAxisProxy().getMinMaxSpan(),l=[0,100];Dy(t,o,a,n.get("zoomLock")?"all":e,null!=u.minSpan?C_(u.minSpan,l,a,!0):null,null!=u.maxSpan?C_(u.maxSpan,l,a,!0):null);var f=this._range,m=this._range=pk([C_(o[0],a,l,!0),C_(o[1],a,l,!0)]);return!f||f[0]!==m[0]||f[1]!==m[1]},_updateView:function(e){var t=this._displayables,n=this._handleEnds,o=pk(n.slice()),a=this._size;NA([0,1],function(u){var f=this._handleHeight;t.handles[u].attr({scale:[f/2,f/2],position:[n[u],a[1]/2-f/2]})},this),t.filler.setShape({x:o[0],y:0,width:o[1]-o[0],height:a[1]}),this._updateDataInfo(e)},_updateDataInfo:function(e){var t=this.dataZoomModel,n=this._displayables,o=n.handleLabels,a=this._orient,u=["",""];if(t.get("showDetail")){var l=t.findRepresentativeAxisProxy();if(l){var f=l.getAxisModel().axis,m=this._range,v=e?l.calculateDataWindow({start:m[0],end:m[1]}).valueWindow:l.getDataValueWindow();u=[this._formatLabel(v[0],f),this._formatLabel(v[1],f)]}}var x=pk(this._handleEnds.slice());function C(k){var M=Wd(n.handles[k].parent,this.group),E=Ua(0===k?"right":"left",M),V=this._handleWidth/2+5,N=Ai([x[k]+(0===k?-V:V),this._size[1]/2],M);o[k].setStyle({x:N[0],y:N[1],textVerticalAlign:a===_S?"middle":E,textAlign:a===_S?E:"center",text:u[k]})}C.call(this,0),C.call(this,1)},_formatLabel:function(e,t){var n=this.dataZoomModel,o=n.get("labelFormatter"),a=n.get("labelPrecision");null!=a&&"auto"!==a||(a=t.getPixelPrecision());var u=null==e||isNaN(e)?"":"category"===t.type||"time"===t.type?t.scale.getLabel(Math.round(e)):e.toFixed(Math.min(a,20));return Ot(o)?o(e,u):Gn(o)?o.replace("{value}",u):u},_showDataInfo:function(e){var t=this._displayables.handleLabels;t[0].attr("invisible",!(e=this._dragging||e)),t[1].attr("invisible",!e)},_onDragMove:function(e,t,n,o){this._dragging=!0,Br(o.event);var a=Ai([t,n],this._displayables.barGroup.getLocalTransform(),!0),u=this._updateInterval(e,a[0]),l=this.dataZoomModel.get("realtime");this._updateView(!l),u&&l&&this._dispatchZoomAction()},_onDragEnd:function(){this._dragging=!1,this._showDataInfo(!1),this.dataZoomModel.get("realtime")||this._dispatchZoomAction()},_onClickPanelClick:function(e){var t=this._size,n=this._displayables.barGroup.transformCoordToLocal(e.offsetX,e.offsetY);if(!(n[0]<0||n[0]>t[0]||n[1]<0||n[1]>t[1])){var o=this._handleEnds,u=this._updateInterval("all",n[0]-(o[0]+o[1])/2);this._updateView(),u&&this._dispatchZoomAction()}},_dispatchZoomAction:function(){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,start:e[0],end:e[1]})},_findCoordRect:function(){var e;if(NA(this.getTargetCoordInfo(),function(o){if(!e&&o.length){var a=o[0].model.coordinateSystem;e=a.getRect&&a.getRect()}}),!e){var t=this.api.getWidth(),n=this.api.getHeight();e={x:.2*t,y:.2*n,width:.6*t,height:.6*n}}return e}});function RA(e){return"vertical"===e?"ns-resize":"ew-resize"}mM.extend({type:"dataZoom.inside",defaultOption:{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}});var MM="\0_ec_dataZoom_roams";function LA(e,t){var n=BA(e),o=t.dataZoomId,a=t.coordId;le(n,function(f,m){var v=f.dataZoomInfos;v[o]&&$e(t.allCoordIds,a)<0&&(delete v[o],f.count--)}),vD(n);var m,v,u=n[a];u||((u=n[a]={coordId:a,dataZoomInfos:{},count:0}).controller=(m=u,v=new gy(e.getZr()),le(["pan","zoom","scrollMove"],function(x){v.on(x,function(C){var k=[];le(m.dataZoomInfos,function(M){if(C.isAvailableBehavior(M.dataZoomModel.option)){var E=(M.getRange||{})[x],V=E&&E(m.controller,C);!M.dataZoomModel.get("disabled",!0)&&V&&k.push({dataZoomId:M.dataZoomId,start:V[0],end:V[1]})}}),k.length&&m.dispatchAction(k)})}),v),u.dispatchAction=pn(uE,e)),u.dataZoomInfos[o]||u.count++,u.dataZoomInfos[o]=t;var l=function(f){var m,v={type_true:2,type_move:1,type_false:0,type_undefined:-1},x=!0;return le(f,function(C){var k=C.dataZoomModel,M=!k.get("disabled",!0)&&(!k.get("zoomLock",!0)||"move");v["type_"+m]<v["type_"+M]&&(m=M),x&=k.get("preventDefaultMouseMove",!0)}),{controlType:m,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!x}}}(u.dataZoomInfos);u.controller.enable(l.controlType,l.opt),u.controller.setPointerChecker(t.containsPoint),Jh(u,"dispatchAction",t.dataZoomModel.get("throttle",!0),"fixRate")}function uO(e){return e.type+"\0_"+e.id}function BA(e){var t=e.getZr();return t[MM]||(t[MM]={})}function vD(e){le(e,function(t,n){t.count||(t.controller.dispose(),delete e[n])})}function uE(e,t){e.dispatchAction({type:"dataZoom",batch:t})}var zA=Rt,lO=hA.extend({type:"dataZoom.inside",init:function(e,t){},render:function(e,t,n,o){lO.superApply(this,"render",arguments),this._range=e.getPercentRange(),le(this.getTargetCoordInfo(),function(a,u){var l=Ge(a,function(f){return uO(f.model)});le(a,function(f){var m=f.model,v={};le(["pan","zoom","scrollMove"],function(x){v[x]=zA(Pu[x],this,f,u)},this),LA(n,{coordId:uO(m),allCoordIds:l,containsPoint:function(x,C,k){return m.coordinateSystem.containPoint([C,k])},dataZoomId:e.id,dataZoomModel:e,getRange:v})},this)},this)},dispose:function(){(function(e,t){var n=BA(e);le(n,function(o){o.controller.dispose();var a=o.dataZoomInfos;a[t]&&(delete a[t],o.count--)}),vD(n)})(this.api,this.dataZoomModel.id),lO.superApply(this,"dispose",arguments),this._range=null}}),Pu={zoom:function(e,t,n,o){var a=this._range,u=a.slice(),l=e.axisModels[0];if(l){var f=yD[t](null,[o.originX,o.originY],l,n,e),m=(0<f.signal?f.pixelStart+f.pixelLength-f.pixel:f.pixel-f.pixelStart)/f.pixelLength*(u[1]-u[0])+u[0],v=Math.max(1/o.scale,0);u[0]=(u[0]-m)*v+m,u[1]=(u[1]-m)*v+m;var x=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return Dy(0,u,[0,100],0,x.minSpan,x.maxSpan),this._range=u,a[0]!==u[0]||a[1]!==u[1]?u:void 0}},pan:cO(function(e,t,n,o,a,u){var l=yD[o]([u.oldX,u.oldY],[u.newX,u.newY],t,a,n);return l.signal*(e[1]-e[0])*l.pixel/l.pixelLength}),scrollMove:cO(function(e,t,n,o,a,u){return yD[o]([0,0],[u.scrollDelta,u.scrollDelta],t,a,n).signal*(e[1]-e[0])*u.scrollDelta})};function cO(e){return function(t,n,o,a){var u=this._range,l=u.slice(),f=t.axisModels[0];if(f)return Dy(e(l,f,t,n,o,a),l,[0,100],"all"),this._range=l,u[0]!==l[0]||u[1]!==l[1]?l:void 0}}function dO(e){var t=e&&e.visualMap;en(t)||(t=t?[t]:[]),FA(t,function(n){if(n){k_(n,"splitList")&&!k_(n,"pieces")&&(n.pieces=n.splitList,delete n.splitList);var o=n.pieces;o&&en(o)&&FA(o,function(a){ln(a)&&(k_(a,"start")&&!k_(a,"min")&&(a.min=a.start),k_(a,"end")&&!k_(a,"max")&&(a.max=a.end))})}})}var yD={grid:function(e,t,n,o,a){var u=n.axis,l={},f=a.model.coordinateSystem.getRect();return e=e||[0,0],"x"===u.dim?(l.pixel=t[0]-e[0],l.pixelLength=f.width,l.pixelStart=f.x,l.signal=u.inverse?1:-1):(l.pixel=t[1]-e[1],l.pixelLength=f.height,l.pixelStart=f.y,l.signal=u.inverse?-1:1),l},polar:function(e,t,n,o,a){var u=n.axis,l={},f=a.model.coordinateSystem,m=f.getRadiusAxis().getExtent(),v=f.getAngleAxis().getExtent();return e=e?f.pointToCoord(e):[0,0],t=f.pointToCoord(t),"radiusAxis"===n.mainType?(l.pixel=t[0]-e[0],l.pixelLength=m[1]-m[0],l.pixelStart=m[0],l.signal=u.inverse?1:-1):(l.pixel=t[1]-e[1],l.pixelLength=v[1]-v[0],l.pixelStart=v[0],l.signal=u.inverse?-1:1),l},singleAxis:function(e,t,n,o,a){var u=n.axis,l=a.model.coordinateSystem.getRect(),f={};return e=e||[0,0],"horizontal"===u.orient?(f.pixel=t[0]-e[0],f.pixelLength=l.width,f.pixelStart=l.x,f.signal=u.inverse?1:-1):(f.pixel=t[1]-e[1],f.pixelLength=l.height,f.pixelStart=l.y,f.signal=u.inverse?-1:1),f}},FA=le;function k_(e,t){return e&&e.hasOwnProperty&&e.hasOwnProperty(t)}ci.registerSubTypeDefaulter("visualMap",function(e){return e.categories||(e.pieces?0<e.pieces.length:0<e.splitNumber)&&!e.calculable?"piecewise":"continuous"});var fO=ih.VISUAL.COMPONENT;function lE(e,t,n,o){for(var a=t.targetVisuals[o],u=Bi.prepareVisualTypes(a),l={color:e.getData().getVisual("color")},f=0,m=u.length;f<m;f++){var v=u[f],x=a["opacity"===v?"__alphaForOpacity":v];x&&x.applyVisual(n,C,k)}return l.color;function C(M){return l[M]}function k(M,E){l[M]=E}}Gi(fO,{createOnAllSeries:!0,reset:function(e,t){var n=[];return t.eachComponent("visualMap",function(o){var a=e.pipelineContext;!o.isTargetSeries(e)||a&&a.large||n.push(function(u,l,f,m){var v={};return le(u,function(x){var C=Bi.prepareVisualTypes(l[x]);v[x]=C}),{progress:function(x,C){function k(_e){return C.getItemVisual(E,_e)}function M(_e,Me){C.setItemVisual(E,_e,Me)}var E;for(null!=m&&(m=C.getDimension(m));null!=(E=x.next());){var V=C.getRawDataItem(E);if(!V||!1!==V.visualMap)for(var N=null!=m?C.get(m,E,!0):E,G=f(N),te=l[G],J=v[G],me=0,ge=J.length;me<ge;me++){var pe=J[me];te[pe]&&te[pe].applyVisual(N,k,M)}}}}}(o.stateList,o.targetVisuals,Rt(o.getValueState,o),o.getDataDimension(e.getData())))}),n}}),Gi(fO,{createOnAllSeries:!0,reset:function(e,t){var n=e.getData(),o=[];t.eachComponent("visualMap",function(a){if(a.isTargetSeries(e)){var u=a.getVisualMeta(Rt(lE,null,e,a))||{stops:[],outerColors:[]},l=a.getDataDimension(n),f=n.getDimensionInfo(l);null!=f&&(u.dimension=f.index,o.push(u))}}),e.getData().setVisual("visualMeta",o)}});var VA=function(e,t,n){var o=ie((cE[e]||{})[t]);return n&&en(o)?o[o.length-1]:o},cE={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},hO=Bi.mapVisual,dE=Bi.eachVisual,fE=en,HA=le,WA=Pg,Np=hi,bD=eu({type:"visualMap",dependencies:["series"],stateList:["inRange","outOfRange"],replacableOptionKeys:["inRange","outOfRange","target","controller","color"],dataBound:[-1/0,1/0],layoutMode:{type:"box",ignoreSize:!0},defaultOption:{show:!0,zlevel:0,z:4,seriesIndex:"all",min:0,max:200,dimension:null,inRange:null,outOfRange:null,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,color:null,formatter:null,text:null,textStyle:{color:"#333"}},init:function(e,t,n){this.targetVisuals={},this.controllerVisuals={},this.mergeDefaultAndTheme(e,n)},optionUpdated:function(e,t){var n=this.option;Ze.canvasSupported||(n.realtime=!1),t||yA(n,e,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},resetVisual:function(e){var t=this.stateList;e=Rt(e,this),this.controllerVisuals=eD(this.option.controller,t,e),this.targetVisuals=eD(this.option.target,t,e)},getTargetSeriesIndices:function(){var e=this.option.seriesIndex,t=[];return null==e||"all"===e?this.ecModel.eachSeries(function(n,o){t.push(o)}):t=Ls(e),t},eachTargetSeries:function(e,t){le(this.getTargetSeriesIndices(),function(n){e.call(t,this.ecModel.getSeriesByIndex(n))},this)},isTargetSeries:function(e){var t=!1;return this.eachTargetSeries(function(n){n===e&&(t=!0)}),t},formatValueText:function(e,t,n){var o,a,u=this.option,l=u.precision,f=this.dataBound,m=u.formatter;return n=n||["<",">"],en(e)&&(e=e.slice(),o=!0),a=t?e:o?[v(e[0]),v(e[1])]:v(e),Gn(m)?m.replace("{value}",o?a[0]:a).replace("{value2}",o?a[1]:a):Ot(m)?o?m(e[0],e[1]):m(e):o?e[0]===f[0]?n[0]+" "+a[1]:e[1]===f[1]?n[1]+" "+a[0]:a[0]+" - "+a[1]:a;function v(x){return x===f[0]?"min":x===f[1]?"max":(+x).toFixed(Math.min(l,20))}},resetExtent:function(){var e=this.option,t=WA([e.min,e.max]);this._dataExtent=t},getDataDimension:function(e){var t=this.option.dimension;if(null!=t||e.dimensions.length){if(null!=t)return e.getDimension(t);for(var o=e.dimensions,a=o.length-1;0<=a;a--){var u=o[a];if(!e.getDimensionInfo(u).isCalculationCoord)return u}}},getExtent:function(){return this._dataExtent.slice()},completeVisualOption:function(){var e=this.ecModel,t=this.option,n={inRange:t.inRange,outOfRange:t.outOfRange},o=t.target||(t.target={}),a=t.controller||(t.controller={});xe(o,n),xe(a,n);var u=this.isCategory();function l(f){fE(t.color)&&!f.inRange&&(f.inRange={color:t.color.slice().reverse()}),f.inRange=f.inRange||{color:e.get("gradientColor")},HA(this.stateList,function(m){var v=f[m];if(Gn(v)){var x=VA(v,"active",u);x?(f[m]={},f[m][v]=x):delete f[m]}},this)}l.call(this,o),l.call(this,a),function(f,m,v){var x=f[m],C=f[v];x&&!C&&(C=f[v]={},HA(x,function(k,M){if(Bi.isValidType(M)){var E=VA(M,"inactive",u);null!=E&&(C[M]=E,"color"!==M||C.hasOwnProperty("opacity")||C.hasOwnProperty("colorAlpha")||(C.opacity=[0,0]))}}))}.call(this,o,"inRange","outOfRange"),function(f){var m=(f.inRange||{}).symbol||(f.outOfRange||{}).symbol,v=(f.inRange||{}).symbolSize||(f.outOfRange||{}).symbolSize,x=this.get("inactiveColor");HA(this.stateList,function(C){var k=this.itemSize,M=f[C];null==(M=M||(f[C]={color:u?x:[x]})).symbol&&(M.symbol=m&&ie(m)||(u?"roundRect":["roundRect"])),null==M.symbolSize&&(M.symbolSize=v&&ie(v)||(u?k[0]:[k[0],k[0]])),M.symbol=hO(M.symbol,function(N){return"none"===N||"square"===N?"roundRect":N});var E=M.symbolSize;if(null!=E){var V=-1/0;dE(E,function(N){V<N&&(V=N)}),M.symbolSize=hO(E,function(N){return Np(N,[0,V],[0,k[0]],!0)})}},this)}.call(this,a)},resetItemSize:function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},isCategory:function(){return!!this.option.categories},setSelected:yn,getValueState:yn,getVisualMeta:yn}),gO=[20,140],mO=bD.extend({type:"visualMap.continuous",defaultOption:{align:"auto",calculable:!1,range:null,realtime:!0,itemHeight:null,itemWidth:null,hoverLink:!0,hoverLinkDataSize:null,hoverLinkOnHandle:null},optionUpdated:function(e,t){mO.superApply(this,"optionUpdated",arguments),this.resetExtent(),this.resetVisual(function(n){n.mappingMethod="linear",n.dataExtent=this.getExtent()}),this._resetRange()},resetItemSize:function(){mO.superApply(this,"resetItemSize",arguments);var e=this.itemSize;"horizontal"===this._orient&&e.reverse(),null!=e[0]&&!isNaN(e[0])||(e[0]=gO[0]),null!=e[1]&&!isNaN(e[1])||(e[1]=gO[1])},_resetRange:function(){var e=this.getExtent(),t=this.option.range;!t||t.auto?(e.auto=1,this.option.range=e):en(t)&&(t[0]>t[1]&&t.reverse(),t[0]=Math.max(t[0],e[0]),t[1]=Math.min(t[1],e[1]))},completeVisualOption:function(){bD.prototype.completeVisualOption.apply(this,arguments),le(this.stateList,function(e){var t=this.option.controller[e].symbolSize;t&&t[0]!==t[1]&&(t[0]=0)},this)},setSelected:function(e){this.option.range=e.slice(),this._resetRange()},getSelected:function(){var e=this.getExtent(),t=Pg((this.get("range")||[]).slice());return t[0]>e[1]&&(t[0]=e[1]),t[1]>e[1]&&(t[1]=e[1]),t[0]<e[0]&&(t[0]=e[0]),t[1]<e[0]&&(t[1]=e[0]),t},getValueState:function(e){var t=this.option.range,n=this.getExtent();return(t[0]<=n[0]||t[0]<=e)&&(t[1]>=n[1]||e<=t[1])?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var o=[],a=n.getData();a.each(this.getDataDimension(a),function(u,l){e[0]<=u&&u<=e[1]&&o.push(l)},this),t.push({seriesId:n.id,dataIndex:o})},this),t},getVisualMeta:function(e){var t=pO(0,0,this.getExtent()),n=pO(0,0,this.option.range.slice()),o=[];function a(C,k){o.push({value:C,color:e(C,k)})}for(var u=0,l=0,f=n.length,m=t.length;l<m&&(!n.length||t[l]<=n[0]);l++)t[l]<n[u]&&a(t[l],"outOfRange");for(var v=1;u<f;u++,v=0)v&&o.length&&a(n[u],"outOfRange"),a(n[u],"inRange");for(v=1;l<m;l++)(!n.length||n[n.length-1]<t[l])&&(v&&(o.length&&a(o[o.length-1].value,"outOfRange"),v=0),a(t[l],"outOfRange"));var x=o.length;return{stops:o,outerColors:[x?o[0].color:"transparent",x?o[x-1].color:"transparent"]}}});function pO(e,t,n){if(n[0]===n[1])return n.slice();for(var o=(n[1]-n[0])/200,a=n[0],u=[],l=0;l<=200&&a<n[1];l++)u.push(a),a+=o;return u.push(n[1]),u}var vO=Ts({type:"visualMap",autoPositionValues:{left:1,right:1,top:1,bottom:1},init:function(e,t){this.ecModel=e,this.api=t},render:function(e,t,n,o){!1!==(this.visualMapModel=e).get("show")?this.doRender.apply(this,arguments):this.group.removeAll()},renderBackground:function(e){var t=this.visualMapModel,n=Uh(t.get("padding")||0),o=e.getBoundingRect();e.add(new fi({z2:-1,silent:!0,shape:{x:o.x-n[3],y:o.y-n[0],width:o.width+n[3]+n[1],height:o.height+n[0]+n[2]},style:{fill:t.get("backgroundColor"),stroke:t.get("borderColor"),lineWidth:t.get("borderWidth")}}))},getControllerVisual:function(e,t,n){var o=(n=n||{}).forceState,a=this.visualMapModel,u={};if("symbol"===t&&(u.symbol=a.get("itemSymbol")),"color"===t){var l=a.get("contentColor");u.color=l}function f(x){return u[x]}function m(x,C){u[x]=C}var v=a.controllerVisuals[o||a.getValueState(e)];return le(Bi.prepareVisualTypes(v),function(x){var C=v[x];n.convertOpacityToAlpha&&"opacity"===x&&(x="colorAlpha",C=v.__alphaForOpacity),Bi.dependsOn(x,t)&&C&&C.applyVisual(e,f,m)}),u[t]},positionGroup:function(e){var n=this.api;hb(e,this.visualMapModel.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},doRender:yn});function yO(e,t,n){var o=e.option,a=o.align;if(null!=a&&"auto"!==a)return a;for(var u={width:t.getWidth(),height:t.getHeight()},l="horizontal"===o.orient?1:0,f=[["left","right","width"],["top","bottom","height"]],m=f[l],v=[0,null,10],x={},C=0;C<3;C++)x[f[1-l][C]]=v[C],x[m[C]]=2===C?n[0]:o[m[C]];var k=[["x","width",3],["y","height",0]][l],M=si(x,u,o.padding);return m[(M.margin[k[2]]||0)+M[k[0]]+.5*M[k[1]]<.5*u[k[1]]?0:1]}function xD(e,t){return le(e||[],function(n){null!=n.dataIndex&&(n.dataIndexInside=n.dataIndex,n.dataIndex=null),n.highlightKey="visualMap"+(t?t.componentIndex:"")}),e}var Dx=hi,hE=le,_D=Math.min,DM=Math.max,gE=vO.extend({type:"visualMap.continuous",init:function(){gE.superApply(this,"init",arguments),this._shapes={},this._dataInterval=[],this._handleEnds=[],this._hoverLinkDataIndices=[]},doRender:function(e,t,n,o){o&&"selectDataRange"===o.type&&o.from===this.uid||this._buildView()},_buildView:function(){this.group.removeAll();var e=this.visualMapModel,t=this.group;this._orient=e.get("orient"),this._useHandle=e.get("calculable"),this._resetInterval(),this._renderBar(t);var n=e.get("text");this._renderEndsText(t,n,0),this._renderEndsText(t,n,1),this._updateView(!0),this.renderBackground(t),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(t)},_renderEndsText:function(e,t,n){if(t){var o=t[1-n];o=null!=o?o+"":"";var a=this.visualMapModel,u=a.get("textGap"),l=a.itemSize,f=this._shapes.barGroup,m=this._applyTransform([l[0]/2,0===n?-u:l[1]+u],f),v=this._applyTransform(0===n?"bottom":"top",f),x=this._orient,C=this.visualMapModel.textStyleModel;this.group.add(new Yo({style:{x:m[0],y:m[1],textVerticalAlign:"horizontal"===x?"middle":v,textAlign:"horizontal"===x?v:"center",text:o,textFont:C.getFont(),textFill:C.getTextColor()}}))}},_renderBar:function(e){var t=this.visualMapModel,n=this._shapes,o=t.itemSize,a=this._orient,u=this._useHandle,l=yO(t,this.api,o),f=n.barGroup=this._createBarGroup(l);f.add(n.outOfRange=wD()),f.add(n.inRange=wD(null,u?xO(this._orient):null,Rt(this._dragHandle,this,"all",!1),Rt(this._dragHandle,this,"all",!0)));var m=t.textStyleModel.getTextRect("\u56fd"),v=DM(m.width,m.height);u&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(f,0,o,v,a,l),this._createHandle(f,1,o,v,a,l)),this._createIndicator(f,o,v,a),e.add(f)},_createHandle:function(e,t,n,o,a){var M,u=Rt(this._dragHandle,this,t,!1),l=Rt(this._dragHandle,this,t,!0),f=wD((M=o,0===t?[[0,0],[M,0],[M,-M]]:[[0,0],[M,0],[M,M]]),xO(this._orient),u,l);f.position[0]=n[0],e.add(f);var m=this.visualMapModel.textStyleModel,v=new Yo({draggable:!0,drift:u,onmousemove:function(k){Br(k.event)},ondragend:l,style:{x:0,y:0,text:"",textFont:m.getFont(),textFill:m.getTextColor()}});this.group.add(v);var x=["horizontal"===a?o/2:1.5*o,"horizontal"===a?0===t?-1.5*o:1.5*o:0===t?-o/2:o/2],C=this._shapes;C.handleThumbs[t]=f,C.handleLabelPoints[t]=x,C.handleLabels[t]=v},_createIndicator:function(e,t,n,o){var a=wD([[0,0]],"move");a.position[0]=t[0],a.attr({invisible:!0,silent:!0}),e.add(a);var u=this.visualMapModel.textStyleModel,l=new Yo({silent:!0,invisible:!0,style:{x:0,y:0,text:"",textFont:u.getFont(),textFill:u.getTextColor()}});this.group.add(l);var f=["horizontal"===o?n/2:9,0],m=this._shapes;m.indicator=a,m.indicatorLabel=l,m.indicatorLabelPoint=f},_dragHandle:function(e,t,n,o){if(this._useHandle){if(this._dragging=!t,!t){var a=this._applyTransform([n,o],this._shapes.barGroup,!0);this._updateInterval(e,a[1]),this._updateView()}t===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),t?this._hovering||this._clearHoverLinkToSeries():bO(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[e],!1)}},_resetInterval:function(){var e=this.visualMapModel,t=this._dataInterval=e.getSelected(),n=e.getExtent(),o=[0,e.itemSize[1]];this._handleEnds=[Dx(t[0],n,o,!0),Dx(t[1],n,o,!0)]},_updateInterval:function(e,t){var n=this.visualMapModel,o=this._handleEnds,a=[0,n.itemSize[1]];Dy(t=t||0,o,a,e,0);var u=n.getExtent();this._dataInterval=[Dx(o[0],a,u,!0),Dx(o[1],a,u,!0)]},_updateView:function(e){var t=this.visualMapModel,n=t.getExtent(),o=this._shapes,a=[0,t.itemSize[1]],u=e?a:this._handleEnds,l=this._createBarVisual(this._dataInterval,n,u,"inRange"),f=this._createBarVisual(n,n,a,"outOfRange");o.inRange.setStyle({fill:l.barColor,opacity:l.opacity}).setShape("points",l.barPoints),o.outOfRange.setStyle({fill:f.barColor,opacity:f.opacity}).setShape("points",f.barPoints),this._updateHandle(u,l)},_createBarVisual:function(e,t,n,o){var a={forceState:o,convertOpacityToAlpha:!0},u=this._makeColorGradient(e,a),l=[this.getControllerVisual(e[0],"symbolSize",a),this.getControllerVisual(e[1],"symbolSize",a)],f=this._createBarPoints(n,l);return{barColor:new Kf(0,0,0,1,u),barPoints:f,handlesColor:[u[0].color,u[u.length-1].color]}},_makeColorGradient:function(e,t){var n=[],o=(e[1]-e[0])/100;n.push({color:this.getControllerVisual(e[0],"color",t),offset:0});for(var a=1;a<100;a++){var u=e[0]+o*a;if(u>e[1])break;n.push({color:this.getControllerVisual(u,"color",t),offset:a/100})}return n.push({color:this.getControllerVisual(e[1],"color",t),offset:1}),n},_createBarPoints:function(e,t){var n=this.visualMapModel.itemSize;return[[n[0]-t[0],e[0]],[n[0],e[0]],[n[0],e[1]],[n[0]-t[1],e[1]]]},_createBarGroup:function(e){var t=this._orient,n=this.visualMapModel.get("inverse");return new mr("horizontal"!==t||n?"horizontal"===t&&n?{scale:"bottom"===e?[-1,1]:[1,1],rotation:-Math.PI/2}:"vertical"!==t||n?{scale:"left"===e?[1,1]:[-1,1]}:{scale:"left"===e?[1,-1]:[-1,-1]}:{scale:"bottom"===e?[1,1]:[-1,1],rotation:Math.PI/2})},_updateHandle:function(e,t){if(this._useHandle){var n=this._shapes,o=this.visualMapModel,a=n.handleThumbs,u=n.handleLabels;hE([0,1],function(l){var f=a[l];f.setStyle("fill",t.handlesColor[l]),f.position[1]=e[l];var m=Ai(n.handleLabelPoints[l],Wd(f,this.group));u[l].setStyle({x:m[0],y:m[1],text:o.formatValueText(this._dataInterval[l]),textVerticalAlign:"middle",textAlign:this._applyTransform("horizontal"===this._orient?0===l?"bottom":"top":"left",n.barGroup)})},this)}},_showIndicator:function(e,t,n,o){var G,te,J,a=this.visualMapModel,u=a.getExtent(),l=a.itemSize,m=Dx(e,u,[0,l[1]],!0),v=this._shapes,x=v.indicator;if(x){x.position[1]=m,x.attr("invisible",!1),x.setShape("points",(G=o,te=m,J=l[1],n?[[0,-_D(G,DM(te,0))],[6,0],[0,_D(G,DM(J-te,0))]]:[[0,0],[5,-5],[5,5]]));var C=this.getControllerVisual(e,"color",{convertOpacityToAlpha:!0});x.setStyle("fill",C);var k=Ai(v.indicatorLabelPoint,Wd(x,this.group)),M=v.indicatorLabel;M.attr("invisible",!1);var E=this._applyTransform("left",v.barGroup),V=this._orient;M.setStyle({text:(n||"")+a.formatValueText(t),textVerticalAlign:"horizontal"===V?E:"middle",textAlign:"horizontal"===V?"center":E,x:k[0],y:k[1]})}},_enableHoverLinkToSeries:function(){var e=this;this._shapes.barGroup.on("mousemove",function(t){if(e._hovering=!0,!e._dragging){var n=e.visualMapModel.itemSize,o=e._applyTransform([t.offsetX,t.offsetY],e._shapes.barGroup,!0,!0);o[1]=_D(DM(0,o[1]),n[1]),e._doHoverLinkToSeries(o[1],0<=o[0]&&o[0]<=n[0])}}).on("mouseout",function(){e._hovering=!1,e._dragging||e._clearHoverLinkToSeries()})},_enableHoverLinkFromSeries:function(){var e=this.api.getZr();this.visualMapModel.option.hoverLink?(e.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),e.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},_doHoverLinkToSeries:function(e,t){var E,V,N,G,n=this.visualMapModel;if(n.option.hoverLink){var a=[0,n.itemSize[1]],u=n.getExtent();e=_D(DM(a[0],e),a[1]);var l=(E=u,V=a,N=6,(G=n.get("hoverLinkDataSize"))&&(N=Dx(G,E,V,!0)/2),N),f=[e-l,e+l],m=Dx(e,a,u,!0),v=[Dx(f[0],a,u,!0),Dx(f[1],a,u,!0)];f[0]<a[0]&&(v[0]=-1/0),a[1]<f[1]&&(v[1]=1/0),t&&(v[0]===-1/0?this._showIndicator(m,v[1],"< ",l):v[1]===1/0?this._showIndicator(m,v[0],"> ",l):this._showIndicator(m,m,"\u2248 ",l));var x=this._hoverLinkDataIndices,C=[];(t||bO(n))&&(C=this._hoverLinkDataIndices=n.findTargetDataIndices(v));var k=function(M,E){var V={},N={};return G(M||[],V),G(E||[],N,V),[te(V),te(N)];function G(J,me,ge){for(var pe=0,_e=J.length;pe<_e;pe++)for(var Me=J[pe].seriesId,We=Ls(J[pe].dataIndex),Ke=ge&&ge[Me],et=0,ut=We.length;et<ut;et++){var lt=We[et];Ke&&Ke[lt]?Ke[lt]=null:(me[Me]||(me[Me]={}))[lt]=1}}function te(J,me){var ge=[];for(var pe in J)if(J.hasOwnProperty(pe)&&null!=J[pe])if(me)ge.push(+pe);else{var _e=te(J[pe],!0);_e.length&&ge.push({seriesId:pe,dataIndex:_e})}return ge}}(x,C);this._dispatchHighDown("downplay",xD(k[0],n)),this._dispatchHighDown("highlight",xD(k[1],n))}},_hoverLinkFromSeriesMouseOver:function(e){var t=e.target,n=this.visualMapModel;if(t&&null!=t.dataIndex){var o=this.ecModel.getSeriesByIndex(t.seriesIndex);if(n.isTargetSeries(o)){var a=o.getData(t.dataType),u=a.get(n.getDataDimension(a),t.dataIndex,!0);isNaN(u)||this._showIndicator(u,u)}}},_hideIndicator:function(){var e=this._shapes;e.indicator&&e.indicator.attr("invisible",!0),e.indicatorLabel&&e.indicatorLabel.attr("invisible",!0)},_clearHoverLinkToSeries:function(){this._hideIndicator();var e=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",xD(e,this.visualMapModel)),e.length=0},_clearHoverLinkFromSeries:function(){this._hideIndicator();var e=this.api.getZr();e.off("mouseover",this._hoverLinkFromSeriesMouseOver),e.off("mouseout",this._hideIndicator)},_applyTransform:function(e,t,n,o){var a=Wd(t,o?null:this.group);return Mc[en(e)?"applyTransform":"transformDirection"](e,a,n)},_dispatchHighDown:function(e,t){t&&t.length&&this.api.dispatchAction({type:e,batch:t})},dispose:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},remove:function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()}});function wD(e,t,n,o){return new Vo({shape:{points:e},draggable:!!n,cursor:t,drift:n,onmousemove:function(a){Br(a.event)},ondragend:o})}function bO(e){var t=e.get("hoverLinkOnHandle");return!!(null==t?e.get("realtime"):t)}function xO(e){return"vertical"===e?"ns-resize":"ew-resize"}io({type:"selectDataRange",event:"dataRangeSelected",update:"update"},function(e,t){t.eachComponent({mainType:"visualMap",query:e},function(n){n.setSelected(e.selected)})}),da(dO);var mE=bD.extend({type:"visualMap.piecewise",defaultOption:{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieceList:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0,showLabel:null},optionUpdated:function(e,t){mE.superApply(this,"optionUpdated",arguments),this._pieceList=[],this.resetExtent();var n=this._mode=this._determineMode();pE[this._mode].call(this),this._resetSelected(e,t);var o=this.option.categories;this.resetVisual(function(a,u){"categories"===n?(a.mappingMethod="category",a.categories=ie(o)):(a.dataExtent=this.getExtent(),a.mappingMethod="piecewise",a.pieceList=Ge(this._pieceList,function(l){return l=ie(l),"inRange"!==u&&(l.visual=null),l}))})},completeVisualOption:function(){var e=this.option,t={},n=Bi.listVisualTypes(),o=this.isCategory();function a(u,l,f){return u&&u[l]&&(ln(u[l])?u[l].hasOwnProperty(f):u[l]===f)}le(e.pieces,function(u){le(n,function(l){u.hasOwnProperty(l)&&(t[l]=1)})}),le(t,function(u,l){var f=0;le(this.stateList,function(m){f|=a(e,m,l)||a(e.target,m,l)},this),f||le(this.stateList,function(m){(e[m]||(e[m]={}))[l]=VA(l,"inRange"===m?"active":"inactive",o)})},this),bD.prototype.completeVisualOption.apply(this,arguments)},_resetSelected:function(e,t){var n=this.option,o=this._pieceList,a=(t?n:e).selected||{};if(n.selected=a,le(o,function(l,f){var m=this.getSelectedMapKey(l);a.hasOwnProperty(m)||(a[m]=!0)},this),"single"===n.selectedMode){var u=!1;le(o,function(l,f){var m=this.getSelectedMapKey(l);a[m]&&(u?a[m]=!1:u=!0)},this)}},getSelectedMapKey:function(e){return"categories"===this._mode?e.value+"":e.index+""},getPieceList:function(){return this._pieceList},_determineMode:function(){var e=this.option;return e.pieces&&0<e.pieces.length?"pieces":this.option.categories?"categories":"splitNumber"},setSelected:function(e){this.option.selected=ie(e)},getValueState:function(e){var t=Bi.findPieceIndex(e,this._pieceList);return null!=t&&this.option.selected[this.getSelectedMapKey(this._pieceList[t])]?"inRange":"outOfRange"},findTargetDataIndices:function(e){var t=[];return this.eachTargetSeries(function(n){var o=[],a=n.getData();a.each(this.getDataDimension(a),function(u,l){Bi.findPieceIndex(u,this._pieceList)===e&&o.push(l)},this),t.push({seriesId:n.id,dataIndex:o})},this),t},getRepresentValue:function(e){var t;if(this.isCategory())t=e.value;else if(null!=e.value)t=e.value;else{var n=e.interval||[];t=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return t},getVisualMeta:function(e){if(!this.isCategory()){var t=[],n=[],o=this,a=this._pieceList.slice();if(a.length){var u=a[0].interval[0];u!==-1/0&&a.unshift({interval:[-1/0,u]}),(u=a[a.length-1].interval[1])!==1/0&&a.push({interval:[u,1/0]})}else a.push({interval:[-1/0,1/0]});var l=-1/0;return le(a,function(m){var v=m.interval;v&&(v[0]>l&&f([l,v[0]],"outOfRange"),f(v.slice()),l=v[1])},this),{stops:t,outerColors:n}}function f(m,v){var x=o.getRepresentValue({interval:m});v=v||o.getValueState(x);var C=e(x,v);m[0]===-1/0?n[0]=C:m[1]===1/0?n[1]=C:t.push({value:m[0],color:C},{value:m[1],color:C})}}}),pE={splitNumber:function(){var e=this.option,t=this._pieceList,n=Math.min(e.precision,20),o=this.getExtent(),a=e.splitNumber;a=Math.max(parseInt(a,10),1),e.splitNumber=a;for(var u=(o[1]-o[0])/a;+u.toFixed(n)!==u&&n<5;)n++;e.precision=n,u=+u.toFixed(n),e.minOpen&&t.push({interval:[-1/0,o[0]],close:[0,0]});for(var l=0,f=o[0];l<a;f+=u,l++)t.push({interval:[f,l===a-1?o[1]:f+u],close:[1,1]});e.maxOpen&&t.push({interval:[o[1],1/0],close:[0,0]}),rc(t),le(t,function(v,x){v.index=x,v.text=this.formatValueText(v.interval)},this)},categories:function(){var e=this.option;le(e.categories,function(t){this._pieceList.push({text:this.formatValueText(t,!0),value:t})},this),_O(e,this._pieceList)},pieces:function(){var e=this.option,t=this._pieceList;le(e.pieces,function(n,o){ln(n)||(n={value:n});var a={text:"",index:o};if(null!=n.label&&(a.text=n.label),n.hasOwnProperty("value")){var u=a.value=n.value;a.interval=[u,u],a.close=[1,1]}else{for(var l=a.interval=[],f=a.close=[0,0],m=[1,0,1],v=[-1/0,1/0],x=[],C=0;C<2;C++){for(var k=[["gte","gt","min"],["lte","lt","max"]][C],M=0;M<3&&null==l[C];M++)l[C]=n[k[M]],f[C]=m[M],x[C]=2===M;null==l[C]&&(l[C]=v[C])}x[0]&&l[1]===1/0&&(f[0]=0),x[1]&&l[0]===-1/0&&(f[1]=0),l[0]===l[1]&&f[0]&&f[1]&&(a.value=l[0])}a.visual=Bi.retrieveVisuals(n),t.push(a)},this),_O(e,t),rc(t),le(t,function(n){var o=n.close;n.text=n.text||this.formatValueText(null!=n.value?n.value:n.interval,!1,[["<","\u2264"][o[1]],[">","\u2265"][o[0]]])},this)}};function _O(e,t){var n=e.inverse;("vertical"===e.orient?!n:n)&&t.reverse()}vO.extend({type:"visualMap.piecewise",doRender:function(){var e=this.group;e.removeAll();var t=this.visualMapModel,n=t.get("textGap"),o=t.textStyleModel,a=o.getFont(),u=o.getTextColor(),l=this._getItemAlign(),f=t.itemSize,m=this._getViewData(),v=m.endsText,x=Gr(t.get("showLabel",!0),!v);v&&this._renderEndsText(e,v[0],f,x,l),le(m.viewPieceList,function(C){var k=C.piece,M=new mr;M.onclick=Rt(this._onItemClick,this,k),this._enableHoverLink(M,C.indexInModelPieceList);var E=t.getRepresentValue(k);if(this._createItemSymbol(M,E,[0,0,f[0],f[1]]),x){var V=this.visualMapModel.getValueState(E);M.add(new Yo({style:{x:"right"===l?-n:f[0]+n,y:f[1]/2,text:k.text,textVerticalAlign:"middle",textAlign:l,textFont:a,textFill:u,opacity:"outOfRange"===V?.5:1}}))}e.add(M)},this),v&&this._renderEndsText(e,v[1],f,x,l),Ud(t.get("orient"),e,t.get("itemGap")),this.renderBackground(e),this.positionGroup(e)},_enableHoverLink:function(e,t){function n(o){var a=this.visualMapModel;a.option.hoverLink&&this.api.dispatchAction({type:o,batch:xD(a.findTargetDataIndices(t),a)})}e.on("mouseover",Rt(n,this,"highlight")).on("mouseout",Rt(n,this,"downplay"))},_getItemAlign:function(){var e=this.visualMapModel,t=e.option;if("vertical"===t.orient)return yO(e,this.api,e.itemSize);var n=t.align;return n&&"auto"!==n||(n="left"),n},_renderEndsText:function(e,t,n,o,a){if(t){var u=new mr,l=this.visualMapModel.textStyleModel;u.add(new Yo({style:{x:o?"right"===a?n[0]:0:n[0]/2,y:n[1]/2,textVerticalAlign:"middle",textAlign:o?a:"center",text:t,textFont:l.getFont(),textFill:l.getTextColor()}})),e.add(u)}},_getViewData:function(){var e=this.visualMapModel,t=Ge(e.getPieceList(),function(u,l){return{piece:u,indexInModelPieceList:l}}),n=e.get("text"),o=e.get("orient"),a=e.get("inverse");return("horizontal"===o?a:!a)?t.reverse():n=n&&n.slice().reverse(),{viewPieceList:t,endsText:n}},_createItemSymbol:function(e,t,n){e.add($d(this.getControllerVisual(t,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(t,"color")))},_onItemClick:function(e){var t=this.visualMapModel,n=t.option,o=ie(n.selected),a=t.getSelectedMapKey(e);"single"===n.selectedMode?(o[a]=!0,le(o,function(u,l){o[l]=l===a})):o[a]=!o[a],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:o})}}),da(dO);var GA,wO="urn:schemas-microsoft-com:vml",SO="undefined"==typeof window?null:window,CO=!1,wm=SO&&SO.document;function UA(e){return GA(e)}if(wm&&!Ze.canvasSupported)try{wm.namespaces.zrvml||wm.namespaces.add("zrvml",wO),GA=function(e){return wm.createElement("<zrvml:"+e+' class="zrvml">')}}catch{GA=function(t){return wm.createElement("<"+t+' xmlns="'+wO+'" class="zrvml">')}}var kO,T_=zs.CMD,Aa=Math.round,AM=Math.sqrt,vE=Math.abs,TO=Math.cos,MO=Math.sin,jA=Math.max;if(!Ze.canvasSupported){var Bl=",",qA="progid:DXImageTransform.Microsoft",cc=21600,mg=cc/2,XA=function(e){e.style.cssText="position:absolute;left:0;top:0;width:1px;height:1px;",e.coordsize=cc+","+cc,e.coordorigin="0,0"},DO=function(e,t,n){return"rgb("+[e,t,n].join(",")+")"},Uy=function(e,t){t&&e&&t.parentNode!==e&&e.appendChild(t)},IM=function(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)},YA=function(e,t,n){return 1e5*(parseFloat(e)||0)+1e3*(parseFloat(t)||0)+n},AO=Vx,IO=function(e,t,n){var o=Hl(t);n=+n,isNaN(n)&&(n=1),o&&(e.color=DO(o[0],o[1],o[2]),e.opacity=n*o[3])},vk=function(e,t,n,o){var l,f,a="fill"===t,u=e.getElementsByTagName(t)[0];null!=n[t]&&"none"!==n[t]&&(a||!a&&n.lineWidth)?(e[a?"filled":"stroked"]="true",n[t]instanceof rl&&IM(e,u),u=u||UA(t),a?function(l,f,m){var x,C=f.fill;if(null!=C)if(C instanceof rl){var k,M=0,E=[0,0],V=0,N=1,G=m.getBoundingRect(),te=G.width,J=G.height;if("linear"===C.type){k="gradient";var me=m.transform,ge=[C.x*te,C.y*J],pe=[C.x2*te,C.y2*J];me&&(ur(ge,ge,me),ur(pe,pe,me)),(M=180*Math.atan2(pe[0]-ge[0],pe[1]-ge[1])/Math.PI)<0&&(M+=360),M<1e-6&&(M=0)}else{k="gradientradial";var We=m.scale,Ke=te,et=J;E=[((ge=[C.x*te,C.y*J])[0]-G.x)/Ke,(ge[1]-G.y)/et],(me=m.transform)&&ur(ge,ge,me);var ut=jA(Ke/=We[0]*cc,et/=We[1]*cc);N=2*C.r/ut-(V=0/ut)}var lt=C.colorStops.slice();lt.sort(function($r,zn){return $r.offset-zn.offset});for(var vt=lt.length,Mt=[],Pt=[],Ct=0;Ct<vt;Ct++){var Zt=lt[Ct],An=(x=Hl(Zt.color),[DO(x[0],x[1],x[2]),x[3]]);Pt.push(Zt.offset*N+V+" "+An[0]),0!==Ct&&Ct!==vt-1||Mt.push(An)}if(2<=vt){var Rn=Mt[0][0],Cn=Mt[1][0],Jn=Mt[0][1]*f.opacity,dr=Mt[1][1]*f.opacity;l.type=k,l.method="none",l.focus="100%",l.angle=M,l.color=Rn,l.color2=Cn,l.colors=Pt.join(","),l.opacity=dr,l.opacity2=Jn}"radial"===k&&(l.focusposition=E.join(","))}else IO(l,C,f.opacity)}(u,n,o):(l=u,(f=n).lineDash&&(l.dashstyle=f.lineDash.join(" ")),null==f.stroke||f.stroke instanceof rl||IO(l,f.stroke,f.opacity)),Uy(e,u)):(e[a?"filled":"stroked"]="false",IM(e,u))},Sm=[[],[],[]];so.prototype.brushVML=function(e){var t=this.style,n=this._vmlEl;n||(n=UA("shape"),XA(n),this._vmlEl=n),vk(n,"fill",t,this),vk(n,"stroke",t,this);var o=this.transform,a=null!=o,u=n.getElementsByTagName("stroke")[0];if(u){var l=t.lineWidth;a&&!t.strokeNoScale&&(l*=AM(vE(o[0]*o[3]-o[1]*o[2]))),u.weight=l+"px"}var m=this.path||(this.path=new zs);this.__dirtyPath&&(m.beginPath(),m.subPixelOptimize=!1,this.buildPath(m,this.shape),m.toStatic(),this.__dirtyPath=!1),n.path=function(v,x){var C,k,M,E,V,N,G=T_.M,te=T_.C,J=T_.L,me=T_.A,ge=T_.Q,pe=[],_e=v.data,Me=v.len();for(E=0;E<Me;){switch(k="",C=0,M=_e[E++]){case G:k=" m ",C=1,V=_e[E++],N=_e[E++],Sm[0][0]=V,Sm[0][1]=N;break;case J:k=" l ",C=1,V=_e[E++],N=_e[E++],Sm[0][0]=V,Sm[0][1]=N;break;case ge:case te:k=" c ",C=3;var We,Ke,et=_e[E++],ut=_e[E++],lt=_e[E++],vt=_e[E++];M===ge?(lt=((We=lt)+2*et)/3,vt=((Ke=vt)+2*ut)/3,et=(V+2*et)/3,ut=(N+2*ut)/3):(We=_e[E++],Ke=_e[E++]),Sm[0][0]=et,Sm[0][1]=ut,Sm[1][0]=lt,Sm[1][1]=vt,V=Sm[2][0]=We,N=Sm[2][1]=Ke;break;case me:var Mt=0,Pt=0,Ct=1,Zt=1,An=0;x&&(Mt=x[4],Pt=x[5],Ct=AM(x[0]*x[0]+x[1]*x[1]),Zt=AM(x[2]*x[2]+x[3]*x[3]),An=Math.atan2(-x[1]/Zt,x[0]/Ct));var Rn=_e[E++],Cn=_e[E++],Jn=_e[E++],dr=_e[E++],$r=_e[E++]+An,zn=_e[E++]+$r+An;E++;var Ur=_e[E++],Jr=Rn+TO($r)*Jn,_o=Cn+MO($r)*dr,ga=(et=Rn+TO(zn)*Jn,ut=Cn+MO(zn)*dr,Ur?" wa ":" at ");Math.abs(Jr-et)<1e-4&&(.01<Math.abs(zn-$r)?Ur&&(Jr+=.0125):Math.abs(_o-Cn)<1e-4?Ur&&Jr<Rn||!Ur&&Rn<Jr?ut-=.0125:ut+=.0125:Ur&&_o<Cn||!Ur&&Cn<_o?et+=.0125:et-=.0125),pe.push(ga,Aa(((Rn-Jn)*Ct+Mt)*cc-mg),Bl,Aa(((Cn-dr)*Zt+Pt)*cc-mg),Bl,Aa(((Rn+Jn)*Ct+Mt)*cc-mg),Bl,Aa(((Cn+dr)*Zt+Pt)*cc-mg),Bl,Aa((Jr*Ct+Mt)*cc-mg),Bl,Aa((_o*Zt+Pt)*cc-mg),Bl,Aa((et*Ct+Mt)*cc-mg),Bl,Aa((ut*Zt+Pt)*cc-mg)),V=et,N=ut;break;case T_.R:var ji=Sm[0],Ia=Sm[1];ji[0]=_e[E++],ji[1]=_e[E++],Ia[0]=ji[0]+_e[E++],Ia[1]=ji[1]+_e[E++],x&&(ur(ji,ji,x),ur(Ia,Ia,x)),ji[0]=Aa(ji[0]*cc-mg),Ia[0]=Aa(Ia[0]*cc-mg),ji[1]=Aa(ji[1]*cc-mg),Ia[1]=Aa(Ia[1]*cc-mg),pe.push(" m ",ji[0],Bl,ji[1]," l ",Ia[0],Bl,ji[1]," l ",Ia[0],Bl,Ia[1]," l ",ji[0],Bl,Ia[1]);break;case T_.Z:pe.push(" x ")}if(0<C){pe.push(k);for(var Sh=0;Sh<C;Sh++){var sf=Sm[Sh];x&&ur(sf,sf,x),pe.push(Aa(sf[0]*cc-mg),Bl,Aa(sf[1]*cc-mg),Sh<C-1?Bl:"")}}}return pe.join("")}(m,this.transform),n.style.zIndex=YA(this.zlevel,this.z,this.z2),Uy(e,n),null!=t.text?this.drawRectText(e,this.getBoundingRect()):this.removeRectText(e)},so.prototype.onRemove=function(e){IM(e,this._vmlEl),this.removeRectText(e)},so.prototype.onAdd=function(e){Uy(e,this._vmlEl),this.appendRectText(e)},xi.prototype.brushVML=function(e){var t,n,dr,o=this.style,a=o.image;if("object"==typeof(dr=a)&&dr.tagName&&"IMG"===dr.tagName.toUpperCase()){var u=a.src;if(u===this._imageSrc)t=this._imageWidth,n=this._imageHeight;else{var l=a.runtimeStyle,f=l.width,m=l.height;l.width="auto",l.height="auto",t=a.width,n=a.height,l.width=f,l.height=m,this._imageSrc=u,this._imageWidth=t,this._imageHeight=n}a=u}else a===this._imageSrc&&(t=this._imageWidth,n=this._imageHeight);if(a){var v=o.x||0,x=o.y||0,C=o.width,k=o.height,M=o.sWidth,E=o.sHeight,V=o.sx||0,N=o.sy||0,G=M&&E,te=this._vmlEl;te||(te=wm.createElement("div"),XA(te),this._vmlEl=te);var J,me=te.style,ge=!1,pe=1,_e=1;if(this.transform&&(pe=AM((J=this.transform)[0]*J[0]+J[1]*J[1]),_e=AM(J[2]*J[2]+J[3]*J[3]),ge=J[1]||J[2]),ge){var Me=[v,x],We=[v+C,x],Ke=[v,x+k],et=[v+C,x+k];ur(Me,Me,J),ur(We,We,J),ur(Ke,Ke,J),ur(et,et,J);var ut=jA(Me[0],We[0],Ke[0],et[0]),lt=jA(Me[1],We[1],Ke[1],et[1]),vt=[];vt.push("M11=",J[0]/pe,Bl,"M12=",J[2]/_e,Bl,"M21=",J[1]/pe,Bl,"M22=",J[3]/_e,Bl,"Dx=",Aa(v*pe+J[4]),Bl,"Dy=",Aa(x*_e+J[5])),me.padding="0 "+Aa(ut)+"px "+Aa(lt)+"px 0",me.filter=qA+".Matrix("+vt.join("")+", SizingMethod=clip)"}else J&&(v=v*pe+J[4],x=x*_e+J[5]),me.filter="",me.left=Aa(v)+"px",me.top=Aa(x)+"px";var Mt=this._imageEl,Pt=this._cropEl;Mt||(Mt=wm.createElement("div"),this._imageEl=Mt);var Ct=Mt.style;if(G){if(t&&n)Ct.width=Aa(pe*t*C/M)+"px",Ct.height=Aa(_e*n*k/E)+"px";else{var Zt=new Image,An=this;Zt.onload=function(){Zt.onload=null,n=Zt.height,Ct.width=Aa(pe*(t=Zt.width)*C/M)+"px",Ct.height=Aa(_e*n*k/E)+"px",An._imageWidth=t,An._imageHeight=n,An._imageSrc=a},Zt.src=a}Pt||((Pt=wm.createElement("div")).style.overflow="hidden",this._cropEl=Pt);var Rn=Pt.style;Rn.width=Aa((C+V*C/M)*pe),Rn.height=Aa((k+N*k/E)*_e),Rn.filter=qA+".Matrix(Dx="+-V*C/M*pe+",Dy="+-N*k/E*_e+")",Pt.parentNode||te.appendChild(Pt),Mt.parentNode!==Pt&&Pt.appendChild(Mt)}else Ct.width=Aa(pe*C)+"px",Ct.height=Aa(_e*k)+"px",te.appendChild(Mt),Pt&&Pt.parentNode&&(te.removeChild(Pt),this._cropEl=null);var Cn="",Jn=o.opacity;Jn<1&&(Cn+=".Alpha(opacity="+Aa(100*Jn)+") "),Ct.filter=Cn+=qA+".AlphaImageLoader(src="+a+", SizingMethod=scale)",te.style.zIndex=YA(this.zlevel,this.z,this.z2),Uy(e,te),null!=o.text&&this.drawRectText(e,this.getBoundingRect())}},xi.prototype.onRemove=function(e){IM(e,this._vmlEl),this._vmlEl=null,this._cropEl=null,this._imageEl=null,this.removeRectText(e)},xi.prototype.onAdd=function(e){Uy(e,this._vmlEl),this.appendRectText(e)};var M_,ZA="normal",KA={},$A=0,yE=document.createElement("div");kO=function(e,t){var n=wm;M_||((M_=n.createElement("div")).style.cssText="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;",wm.body.appendChild(M_));try{M_.style.font=t}catch{}return M_.innerHTML="",M_.appendChild(n.createTextNode(e)),{width:M_.offsetWidth}},Bu.measureText=kO;for(var JA=new ii,bE=function(e,t,n,o){var a=this.style;this.__dirty&&gf(a);var u=a.text;if(null!=u&&(u+=""),u){if(a.rich){var l=Up(u,a);u=[];for(var f=0;f<l.lines.length;f++){for(var m=l.lines[f].tokens,v=[],x=0;x<m.length;x++)v.push(m[x].text);u.push(v.join(""))}u=u.join("\n")}var C,k,M=a.textAlign,E=a.textVerticalAlign,V=function(et){var ut=KA[et];if(!ut){100<$A&&($A=0,KA={});var lt,vt=yE.style;try{vt.font=et,lt=vt.fontFamily.split(",")[0]}catch{}ut={style:vt.fontStyle||ZA,variant:vt.fontVariant||ZA,weight:vt.fontWeight||ZA,size:0|parseFloat(vt.fontSize||12),family:lt||"Microsoft YaHei"},KA[et]=ut,$A++}return ut}(a.font),N=V.style+" "+V.variant+" "+V.weight+" "+V.size+'px "'+V.family+'"';n=n||bl(u,N,M,E,a.textPadding,a.textLineHeight);var G=this.transform;if(G&&!o&&(JA.copy(t),JA.applyTransform(G),t=JA),o)C=t.x,k=t.y;else{var te=a.textPosition;if(te instanceof Array)C=t.x+AO(te[0],t.width),k=t.y+AO(te[1],t.height),M=M||"left";else{var J=this.calculateTextPosition?this.calculateTextPosition({},a,t):Jc({},a,t);C=J.x,k=J.y,M=M||J.textAlign,E=E||J.textVerticalAlign}}C=xs(C,n.width,M),k=xl(k,n.height,E),k+=n.height/2;var me,ge,pe,_e=UA,Me=this._textVmlEl;Me?ge=(me=(pe=Me.firstChild).nextSibling).nextSibling:(Me=_e("line"),me=_e("path"),ge=_e("textpath"),pe=_e("skew"),ge.style["v-text-align"]="left",XA(Me),me.textpathok=!0,ge.on=!0,Me.from="0 0",Me.to="1000 0.05",Uy(Me,pe),Uy(Me,me),Uy(Me,ge),this._textVmlEl=Me);var We=[C,k],Ke=Me.style;G&&o?(ur(We,We,G),pe.on=!0,pe.matrix=G[0].toFixed(3)+Bl+G[2].toFixed(3)+Bl+G[1].toFixed(3)+Bl+G[3].toFixed(3)+",0,0",pe.offset=(Aa(We[0])||0)+","+(Aa(We[1])||0),pe.origin="0 0",Ke.left="0px",Ke.top="0px"):(pe.on=!1,Ke.left=Aa(C)+"px",Ke.top=Aa(k)+"px"),ge.string=String(u).replace(/&/g,"&amp;").replace(/"/g,"&quot;");try{ge.style.font=N}catch{}vk(Me,"fill",{fill:a.textFill,opacity:a.opacity},this),vk(Me,"stroke",{stroke:a.textStroke,opacity:a.opacity,lineDash:a.lineDash||null},this),Me.style.zIndex=YA(this.zlevel,this.z,this.z2),Uy(e,Me)}},xE=function(e){IM(e,this._textVmlEl),this._textVmlEl=null},_E=function(e){Uy(e,this._textVmlEl)},SD=[Pr,Oa,xi,so,Yo],QA=0;QA<SD.length;QA++){var wS=SD[QA].prototype;wS.drawRectText=bE,wS.removeRectText=xE,wS.appendRectText=_E}Yo.prototype.brushVML=function(e){var t=this.style;null!=t.text?this.drawRectText(e,{x:t.x||0,y:t.y||0,width:0,height:0},this.getBoundingRect(),!0):this.removeRectText(e)},Yo.prototype.onRemove=function(e){this.removeRectText(e)},Yo.prototype.onAdd=function(e){this.appendRectText(e)}}function yk(e){return parseInt(e,10)}function CD(e,t){(function(){if(!CO&&wm){CO=!0;var l=wm.styleSheets;l.length<31?wm.createStyleSheet().addRule(".zrvml","behavior:url(#default#VML)"):l[0].addRule(".zrvml","behavior:url(#default#VML)")}})(),this.root=e,this.storage=t;var n=document.createElement("div"),o=document.createElement("div");n.style.cssText="display:inline-block;overflow:hidden;position:relative;width:300px;height:150px;",o.style.cssText="position:absolute;left:0;top:0;",e.appendChild(n),this._vmlRoot=o,this._vmlViewport=n,this.resize();var a=t.delFromStorage,u=t.addToStorage;t.delFromStorage=function(l){a.call(t,l),l&&l.onRemove&&l.onRemove(o)},t.addToStorage=function(l){l.onAdd&&l.onAdd(o),u.call(t,l)},this._firstPaint=!0}function jy(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}CD.prototype={constructor:CD,getType:function(){return"vml"},getViewportRoot:function(){return this._vmlViewport},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0,!0);this._paintList(e)},_paintList:function(e){for(var t=this._vmlRoot,n=0;n<e.length;n++){var o=e[n];o.invisible||o.ignore?(o.__alreadyNotVisible||o.onRemove(t),o.__alreadyNotVisible=!0):(o.__alreadyNotVisible&&o.onAdd(t),o.__alreadyNotVisible=!1,o.__dirty&&(o.beforeBrush&&o.beforeBrush(),(o.brushVML||o.brush).call(o,t),o.afterBrush&&o.afterBrush())),o.__dirty=!1}this._firstPaint&&(this._vmlViewport.appendChild(t),this._firstPaint=!1)},resize:function(e,t){if(e=null==e?this._getWidth():e,t=null==t?this._getHeight():t,this._width!==e||this._height!==t){this._width=e,this._height=t;var n=this._vmlViewport.style;n.width=e+"px",n.height=t+"px"}},dispose:function(){this.root.innerHTML="",this._vmlRoot=this._vmlViewport=this.storage=null},getWidth:function(){return this._width},getHeight:function(){return this._height},clear:function(){this._vmlViewport&&this.root.removeChild(this._vmlViewport)},_getWidth:function(){var e=this.root,t=e.currentStyle;return(e.clientWidth||yk(t.width))-yk(t.paddingLeft)-yk(t.paddingRight)|0},_getHeight:function(){var e=this.root,t=e.currentStyle;return(e.clientHeight||yk(t.height))-yk(t.paddingTop)-yk(t.paddingBottom)|0}},le(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","toDataURL","pathToImage"],function(e){CD.prototype[e]=function(){}}),Lm("vml",CD);var D_=zs.CMD,wE=Array.prototype.join,bk="none",eI=Math.round,SS=Math.sin,tI=Math.cos,nI=Math.PI,qy=2*Math.PI,OO=180/nI;function Rp(e){return eI(1e4*e)/1e4}function oI(e){return e<1e-4&&-1e-4<e}function A_(e,t){t&&pu(e,"transform","matrix("+wE.call(t,",")+")")}function pu(e,t,n){n&&("linear"===n.type||"radial"===n.type)||e.setAttribute(t,n)}function iI(e,t,n,o){if(l=t,null!=(m=n?l.textFill:l.fill)&&m!==bk){var a=n?t.textFill:t.fill;pu(e,"fill",a="transparent"===a?bk:a),pu(e,"fill-opacity",null!=t.fillOpacity?t.fillOpacity*t.opacity:t.opacity)}else pu(e,"fill",bk);var l,m;if(function(l,f){var m=f?l.textStroke:l.stroke;return null!=m&&m!==bk}(t,n)){var u=n?t.textStroke:t.stroke;pu(e,"stroke",u="transparent"===u?bk:u),pu(e,"stroke-width",(n?t.textStrokeWidth:t.lineWidth)/(!n&&t.strokeNoScale?o.getLineScale():1)),pu(e,"paint-order",n?"stroke":"fill"),pu(e,"stroke-opacity",null!=t.strokeOpacity?t.strokeOpacity:t.opacity),t.lineDash?(pu(e,"stroke-dasharray",t.lineDash.join(",")),pu(e,"stroke-dashoffset",eI(t.lineDashOffset||0))):pu(e,"stroke-dasharray",""),t.lineCap&&pu(e,"stroke-linecap",t.lineCap),t.lineJoin&&pu(e,"stroke-linejoin",t.lineJoin),t.miterLimit&&pu(e,"stroke-miterlimit",t.miterLimit)}else pu(e,"stroke",bk)}var xh={brush:function(e){var t=e.style,n=e.__svgEl;n||(n=jy("path"),e.__svgEl=n),e.path||e.createPathProxy();var o=e.path;if(e.__dirtyPath){o.beginPath(),o.subPixelOptimize=!1,e.buildPath(o,e.shape),e.__dirtyPath=!1;var a=function(u){for(var l=[],f=u.data,m=u.len(),v=0;v<m;){var x="",C=0;switch(f[v++]){case D_.M:x="M",C=2;break;case D_.L:x="L",C=2;break;case D_.Q:x="Q",C=4;break;case D_.C:x="C",C=6;break;case D_.A:var k=f[v++],M=f[v++],E=f[v++],V=f[v++],N=f[v++],G=f[v++],te=f[v++],J=f[v++],me=Math.abs(G),ge=oI(me-qy)||(J?qy<=G:qy<=-G),pe=0<G?G%qy:G%qy+qy,_e=!1;_e=!!ge||!oI(me)&&nI<=pe==!!J;var Me=Rp(k+E*tI(N)),We=Rp(M+V*SS(N));ge&&(G=J?qy-1e-4:1e-4-qy,_e=!0,9===v&&l.push("M",Me,We));var Ke=Rp(k+E*tI(N+G)),et=Rp(M+V*SS(N+G));l.push("A",Rp(E),Rp(V),eI(te*OO),+_e,+J,Ke,et);break;case D_.Z:x="Z";break;case D_.R:Ke=Rp(f[v++]),et=Rp(f[v++]);var ut=Rp(f[v++]),lt=Rp(f[v++]);l.push("M",Ke,et,"L",Ke+ut,et,"L",Ke+ut,et+lt,"L",Ke,et+lt,"L",Ke,et)}x&&l.push(x);for(var vt=0;vt<C;vt++)l.push(Rp(f[v++]))}return l.join(" ")}(o);a.indexOf("NaN")<0&&pu(n,"d",a)}iI(n,t,!1,e),A_(n,e.transform),null!=t.text?TD(e,e.getBoundingRect()):MD(e)}},kD={brush:function(e){var t=e.style,n=t.image;if(n instanceof HTMLImageElement&&(n=n.src),n){var o=t.x||0,a=t.y||0,u=t.width,l=t.height,f=e.__svgEl;f||(f=jy("image"),e.__svgEl=f),n!==e.__imageSrc&&(f.setAttributeNS("http://www.w3.org/1999/xlink","href",n),e.__imageSrc=n),pu(f,"width",u),pu(f,"height",l),pu(f,"x",o),pu(f,"y",a),A_(f,e.transform),null!=t.text?TD(e,e.getBoundingRect()):MD(e)}}},OM={},aI=new ii,xk={},Ax=[],SE={left:"start",right:"end",center:"middle",middle:"middle"},TD=function(e,t){var n=e.style,o=e.transform,a=e instanceof Yo||n.transformText;e.__dirty&&gf(n);var lt,vt,Mt,u=n.text;if(null!=u&&(u+=""),$y(u,n)){null==u&&(u=""),!a&&o&&(aI.copy(t),aI.applyTransform(o),t=aI);var l=e.__textSvgEl;l||(l=jy("text"),e.__textSvgEl=l);var f=l.style,m=n.font||bn,v=l.__computedFont;m!==l.__styleFont&&(f.font=l.__styleFont=m,v=l.__computedFont=f.font);var x=n.textPadding,k=e.__textCotentBlock;k&&!e.__dirtyText||(k=e.__textCotentBlock=Dh(u,v,x,n.textLineHeight,n.truncate));var M=k.outerHeight,E=k.lineHeight;m0(xk,e,n,t);var V=xk.baseX,N=xk.baseY,G=xk.textAlign||"left",te=xk.textVerticalAlign;!function(lt,vt,Mt,Pt,Ct,Zt,An){Fa(Ax),vt&&Mt&&is(Ax,Mt);var Rn=Pt.textRotation;if(Ct&&Rn){var Cn=Pt.textOrigin;"center"===Cn?(Zt=Ct.width/2+Ct.x,An=Ct.height/2+Ct.y):Cn&&(Zt=Cn[0]+Ct.x,An=Cn[1]+Ct.y),Ax[4]-=Zt,Ax[5]-=An,Yc(Ax,Ax,Rn),Ax[4]+=Zt,Ax[5]+=An}A_(lt,Ax)}(l,a,o,n,t,V,N);var J=V,me=xl(N,M,te);x&&(lt=V,Mt=x,J="right"===(vt=G)?lt-Mt[1]:"center"===vt?lt+Mt[3]/2-Mt[1]/2:lt+Mt[3],me+=x[0]),me+=E/2,iI(l,n,!0,e);var ge=k.canCacheByTextString,pe=e.__tspanList||(e.__tspanList=[]),_e=pe.length;if(ge&&e.__canCacheByTextString&&e.__text===u){if(e.__dirtyText&&_e)for(var Me=0;Me<_e;++Me)EO(pe[Me],G,J,me+Me*E)}else{e.__text=u,e.__canCacheByTextString=ge;var We=k.lines,Ke=We.length;for(Me=0;Me<Ke;Me++){var et=pe[Me],ut=We[Me];et?et.__zrText!==ut&&(et.innerHTML="",et.appendChild(document.createTextNode(ut))):(et=pe[Me]=jy("tspan"),l.appendChild(et),et.appendChild(document.createTextNode(ut))),EO(et,G,J,me+Me*E)}if(Ke<_e){for(;Me<_e;Me++)l.removeChild(pe[Me]);pe.length=Ke}}}};function EO(e,t,n,o){pu(e,"dominant-baseline","middle"),pu(e,"text-anchor",SE[t]),pu(e,"x",n),pu(e,"y",o)}function MD(e){e&&e.__textSvgEl&&(e.__textSvgEl.parentNode&&e.__textSvgEl.parentNode.removeChild(e.__textSvgEl),e.__textSvgEl=null,e.__tspanList=[],e.__text=null)}function sI(){}function _h(e,t){for(var n=0,o=t.length,a=0,u=0;n<o;n++){var l=t[n];if(l.removed){for(f=[],m=u;m<u+l.count;m++)f.push(m);l.indices=f,u+=l.count}else{for(var f=[],m=a;m<a+l.count;m++)f.push(m);l.indices=f,a+=l.count,l.added||(u+=l.count)}}return t}OM.drawRectText=TD,OM.brush=function(e){null!=e.style.text?TD(e,!1):MD(e)},sI.prototype={diff:function(e,t,n){this.equals=n=n||function(E,V){return E===V};var o=this;e=e.slice();var a=(t=t.slice()).length,u=e.length,l=1,f=a+u,m=[{newPos:-1,components:[]}],v=this.extractCommon(m[0],t,e,0);if(m[0].newPos+1>=a&&u<=v+1){for(var x=[],C=0;C<t.length;C++)x.push(C);return[{indices:x,count:t.length}]}function k(){for(var E=-1*l;E<=l;E+=2){var V,N=m[E-1],G=m[E+1],te=(G?G.newPos:0)-E;N&&(m[E-1]=void 0);var J=N&&N.newPos+1<a,me=G&&0<=te&&te<u;if(J||me){if(!J||me&&N.newPos<G.newPos?(V={newPos:(ge=G).newPos,components:ge.components.slice(0)},o.pushComponent(V.components,void 0,!0)):((V=N).newPos++,o.pushComponent(V.components,!0,void 0)),te=o.extractCommon(V,t,e,E),V.newPos+1>=a&&u<=te+1)return _h(0,V.components);m[E]=V}else m[E]=void 0}var ge;l++}for(;l<=f;){var M=k();if(M)return M}},pushComponent:function(e,t,n){var o=e[e.length-1];o&&o.added===t&&o.removed===n?e[e.length-1]={count:o.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function(e,t,n,o){for(var a=t.length,u=n.length,l=e.newPos,f=l-o,m=0;l+1<a&&f+1<u&&this.equals(t[l+1],n[f+1]);)l++,f++,m++;return m&&e.components.push({count:m}),e.newPos=l,f},tokenize:function(e){return e.slice()},join:function(e){return e.slice()}};var Xy=new sI;function vu(e,t,n,o,a){this._zrId=e,this._svgRoot=t,this._tagNames="string"==typeof n?[n]:n,this._markLabel=o,this._domName=a||"_dom",this.nextId=0}function CS(e,t){vu.call(this,e,t,["linearGradient","radialGradient"],"__gradient_in_use__")}function _k(e,t){vu.call(this,e,t,"clipPath","__clippath_in_use__")}function Lp(e,t){vu.call(this,e,t,["filter"],"__filter_in_use__","_shadowDom")}function EM(e){return e&&(e.shadowBlur||e.shadowOffsetX||e.shadowOffsetY||e.textShadowBlur||e.textShadowOffsetX||e.textShadowOffsetY)}function DD(e){return parseInt(e,10)}function Ix(e,t){return t&&e&&t.parentNode!==e}function PM(e,t,n){if(Ix(e,t)&&n){var o=n.nextSibling;o?e.insertBefore(t,o):e.appendChild(t)}}function PO(e,t){if(Ix(e,t)){var n=e.firstChild;n?e.insertBefore(t,n):e.appendChild(t)}}function Nf(e,t){t&&e&&t.parentNode===e&&e.removeChild(t)}function kS(e){return e.__textSvgEl}function wh(e){return e.__svgEl}function Oi(e,t,n,o){this.root=e,this.storage=t,this._opts=n=Ne({},n||{});var a=jy("svg");a.setAttribute("xmlns","http://www.w3.org/2000/svg"),a.setAttribute("version","1.1"),a.setAttribute("baseProfile","full"),a.style.cssText="user-select:none;position:absolute;left:0;top:0;";var u=jy("g");a.appendChild(u);var l=jy("g");a.appendChild(l),this.gradientManager=new CS(o,l),this.clipPathManager=new _k(o,l),this.shadowManager=new Lp(o,l);var f=document.createElement("div");f.style.cssText="overflow:hidden;position:relative",this._svgDom=a,this._svgRoot=l,this._backgroundRoot=u,this._viewport=f,e.appendChild(f),f.appendChild(a),this.resize(n.width,n.height),this._visibleList=[]}vu.prototype.createElement=jy,vu.prototype.getDefs=function(e){var t=this._svgRoot,n=this._svgRoot.getElementsByTagName("defs");return 0===n.length?e?((n=t.insertBefore(this.createElement("defs"),t.firstChild)).contains||(n.contains=function(o){var a=n.children;if(!a)return!1;for(var u=a.length-1;0<=u;--u)if(a[u]===o)return!0;return!1}),n):null:n[0]},vu.prototype.update=function(e,t){if(e){var n=this.getDefs(!1);if(e[this._domName]&&n.contains(e[this._domName]))"function"==typeof t&&t(e);else{var o=this.add(e);o&&(e[this._domName]=o)}}},vu.prototype.addDom=function(e){this.getDefs(!0).appendChild(e)},vu.prototype.removeDom=function(e){var t=this.getDefs(!1);t&&e[this._domName]&&(t.removeChild(e[this._domName]),e[this._domName]=null)},vu.prototype.getDoms=function(){var e=this.getDefs(!1);if(!e)return[];var t=[];return le(this._tagNames,function(n){var o=e.getElementsByTagName(n);t=t.concat([].slice.call(o))}),t},vu.prototype.markAllUnused=function(){var e=this.getDoms(),t=this;le(e,function(n){n[t._markLabel]="0"})},vu.prototype.markUsed=function(e){e&&(e[this._markLabel]="1")},vu.prototype.removeUnused=function(){var e=this.getDefs(!1);if(e){var t=this.getDoms(),n=this;le(t,function(o){"1"!==o[n._markLabel]&&e.removeChild(o)})}},vu.prototype.getSvgProxy=function(e){return e instanceof so?xh:e instanceof xi?kD:e instanceof Yo?OM:xh},vu.prototype.getTextSvgElement=function(e){return e.__textSvgEl},vu.prototype.getSvgElement=function(e){return e.__svgEl},Ie(CS,vu),CS.prototype.addWithoutUpdate=function(e,t){if(t&&t.style){var n=this;le(["fill","stroke"],function(o){if(t.style[o]&&("linear"===t.style[o].type||"radial"===t.style[o].type)){var a,u=t.style[o],l=n.getDefs(!0);u._dom?(a=u._dom,l.contains(u._dom)||n.addDom(a)):a=n.add(u),n.markUsed(t);var f=a.getAttribute("id");e.setAttribute(o,"url(#"+f+")")}})}},CS.prototype.add=function(e){var t;if("linear"===e.type)t=this.createElement("linearGradient");else{if("radial"!==e.type)return null;t=this.createElement("radialGradient")}return e.id=e.id||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-gradient-"+e.id),this.updateDom(e,t),this.addDom(t),t},CS.prototype.update=function(e){var t=this;vu.prototype.update.call(this,e,function(){var n=e.type,o=e._dom.tagName;"linear"===n&&"linearGradient"===o||"radial"===n&&"radialGradient"===o?t.updateDom(e,e._dom):(t.removeDom(e),t.add(e))})},CS.prototype.updateDom=function(e,t){if("linear"===e.type)t.setAttribute("x1",e.x),t.setAttribute("y1",e.y),t.setAttribute("x2",e.x2),t.setAttribute("y2",e.y2);else{if("radial"!==e.type)return;t.setAttribute("cx",e.x),t.setAttribute("cy",e.y),t.setAttribute("r",e.r)}t.setAttribute("gradientUnits",e.global?"userSpaceOnUse":"objectBoundingBox"),t.innerHTML="";for(var n=e.colorStops,o=0,a=n.length;o<a;++o){var u=this.createElement("stop");u.setAttribute("offset",100*n[o].offset+"%");var l=n[o].color;if(-1<l.indexOf("rgba")){var f=Hl(l)[3],m=Ps(l);u.setAttribute("stop-color","#"+m),u.setAttribute("stop-opacity",f)}else u.setAttribute("stop-color",n[o].color);t.appendChild(u)}e._dom=t},CS.prototype.markUsed=function(e){if(e.style){var t=e.style.fill;t&&t._dom&&vu.prototype.markUsed.call(this,t._dom),(t=e.style.stroke)&&t._dom&&vu.prototype.markUsed.call(this,t._dom)}},Ie(_k,vu),_k.prototype.update=function(e){var t=this.getSvgElement(e);t&&this.updateDom(t,e.__clipPaths,!1);var n=this.getTextSvgElement(e);n&&this.updateDom(n,e.__clipPaths,!0),this.markUsed(e)},_k.prototype.updateDom=function(e,t,n){if(t&&0<t.length){var o,a,u=this.getDefs(!0),l=t[0],f=n?"_textDom":"_dom";l[f]?(a=l[f].getAttribute("id"),u.contains(o=l[f])||u.appendChild(o)):(a="zr"+this._zrId+"-clip-"+this.nextId,++this.nextId,(o=this.createElement("clipPath")).setAttribute("id",a),u.appendChild(o),l[f]=o);var m=this.getSvgProxy(l);if(l.transform&&l.parent.invTransform&&!n){var v=Array.prototype.slice.call(l.transform);pa(l.transform,l.parent.invTransform,l.transform),m.brush(l),l.transform=v}else m.brush(l);var x=this.getSvgElement(l);o.innerHTML="",o.appendChild(x.cloneNode()),e.setAttribute("clip-path","url(#"+a+")"),1<t.length&&this.updateDom(o,t.slice(1),n)}else e&&e.setAttribute("clip-path","none")},_k.prototype.markUsed=function(e){var t=this;e.__clipPaths&&le(e.__clipPaths,function(n){n._dom&&vu.prototype.markUsed.call(t,n._dom),n._textDom&&vu.prototype.markUsed.call(t,n._textDom)})},Ie(Lp,vu),Lp.prototype.addWithoutUpdate=function(e,t){if(t&&EM(t.style)){var n;t._shadowDom?(n=t._shadowDom,this.getDefs(!0).contains(t._shadowDom)||this.addDom(n)):n=this.add(t),this.markUsed(t);var o=n.getAttribute("id");e.style.filter="url(#"+o+")"}},Lp.prototype.add=function(e){var t=this.createElement("filter");return e._shadowDomId=e._shadowDomId||this.nextId++,t.setAttribute("id","zr"+this._zrId+"-shadow-"+e._shadowDomId),this.updateDom(e,t),this.addDom(t),t},Lp.prototype.update=function(e,t){if(EM(t.style)){var n=this;vu.prototype.update.call(this,t,function(){n.updateDom(t,t._shadowDom)})}else this.remove(e,t)},Lp.prototype.remove=function(e,t){null!=t._shadowDomId&&(this.removeDom(e),e.style.filter="")},Lp.prototype.updateDom=function(e,t){var n=t.getElementsByTagName("feDropShadow");n=0===n.length?this.createElement("feDropShadow"):n[0];var o,a,u,l,f=e.style,m=e.scale&&e.scale[0]||1,v=e.scale&&e.scale[1]||1;if(f.shadowBlur||f.shadowOffsetX||f.shadowOffsetY)o=f.shadowOffsetX||0,a=f.shadowOffsetY||0,u=f.shadowBlur,l=f.shadowColor;else{if(!f.textShadowBlur)return void this.removeDom(t,f);o=f.textShadowOffsetX||0,a=f.textShadowOffsetY||0,u=f.textShadowBlur,l=f.textShadowColor}n.setAttribute("dx",o/m),n.setAttribute("dy",a/v),n.setAttribute("flood-color",l),n.setAttribute("stdDeviation",u/2/m+" "+u/2/v),t.setAttribute("x","-100%"),t.setAttribute("y","-100%"),t.setAttribute("width",Math.ceil(u/2*200)+"%"),t.setAttribute("height",Math.ceil(u/2*200)+"%"),t.appendChild(n),e._shadowDom=t},Lp.prototype.markUsed=function(e){e._shadowDom&&vu.prototype.markUsed.call(this,e._shadowDom)},Oi.prototype={constructor:Oi,getType:function(){return"svg"},getViewportRoot:function(){return this._viewport},getSvgDom:function(){return this._svgDom},getSvgRoot:function(){return this._svgRoot},getViewportRootOffset:function(){var e=this.getViewportRoot();if(e)return{offsetLeft:e.offsetLeft||0,offsetTop:e.offsetTop||0}},refresh:function(){var e=this.storage.getDisplayList(!0);this._paintList(e)},setBackgroundColor:function(e){this._backgroundRoot&&this._backgroundNode&&this._backgroundRoot.removeChild(this._backgroundNode);var t=jy("rect");t.setAttribute("width",this.getWidth()),t.setAttribute("height",this.getHeight()),t.setAttribute("x",0),t.setAttribute("y",0),t.setAttribute("id",0),t.style.fill=e,this._backgroundRoot.appendChild(t),this._backgroundNode=t},_paintList:function(e){this.gradientManager.markAllUnused(),this.clipPathManager.markAllUnused(),this.shadowManager.markAllUnused();var t,n,o=this._svgRoot,a=this._visibleList,u=e.length,l=[];for(t=0;t<u;t++){var f=e[t],m=(n=f)instanceof so?xh:n instanceof xi?kD:n instanceof Yo?OM:xh,v=wh(f)||kS(f);f.invisible||(f.__dirty&&(m&&m.brush(f),this.clipPathManager.update(f),f.style&&(this.gradientManager.update(f.style.fill),this.gradientManager.update(f.style.stroke),this.shadowManager.update(v,f)),f.__dirty=!1),l.push(f))}var x,C=Xy.diff(a,l,void 0);for(t=0;t<C.length;t++)if((E=C[t]).removed)for(var k=0;k<E.count;k++){v=wh(f=a[E.indices[k]]);var M=kS(f);Nf(o,v),Nf(o,M)}for(t=0;t<C.length;t++){var E;if((E=C[t]).added)for(k=0;k<E.count;k++)v=wh(f=l[E.indices[k]]),M=kS(f),x?PM(o,v,x):PO(o,v),v?PM(o,M,v):x?PM(o,M,x):PO(o,M),PM(o,M,v),x=M||v||x,this.gradientManager.addWithoutUpdate(v||M,f),this.shadowManager.addWithoutUpdate(v||M,f),this.clipPathManager.markUsed(f);else if(!E.removed)for(k=0;k<E.count;k++)v=wh(f=l[E.indices[k]]),M=kS(f),v=wh(f),M=kS(f),this.gradientManager.markUsed(f),this.gradientManager.addWithoutUpdate(v||M,f),this.shadowManager.markUsed(f),this.shadowManager.addWithoutUpdate(v||M,f),this.clipPathManager.markUsed(f),M&&PM(o,M,v),x=v||M||x}this.gradientManager.removeUnused(),this.clipPathManager.removeUnused(),this.shadowManager.removeUnused(),this._visibleList=l},_getDefs:function(e){var t,n=this._svgDom;return 0!==(t=n.getElementsByTagName("defs")).length?t[0]:e?((t=n.insertBefore(jy("defs"),n.firstChild)).contains||(t.contains=function(o){var a=t.children;if(!a)return!1;for(var u=a.length-1;0<=u;--u)if(a[u]===o)return!0;return!1}),t):null},resize:function(e,t){var n=this._viewport;n.style.display="none";var o=this._opts;if(null!=e&&(o.width=e),null!=t&&(o.height=t),e=this._getSize(0),t=this._getSize(1),n.style.display="",this._width!==e||this._height!==t){this._width=e,this._height=t;var a=n.style;a.width=e+"px",a.height=t+"px";var u=this._svgDom;u.setAttribute("width",e),u.setAttribute("height",t)}this._backgroundNode&&(this._backgroundNode.setAttribute("width",e),this._backgroundNode.setAttribute("height",t))},getWidth:function(){return this._width},getHeight:function(){return this._height},_getSize:function(e){var t=this._opts,n=["width","height"][e],o=["clientWidth","clientHeight"][e],a=["paddingLeft","paddingTop"][e],u=["paddingRight","paddingBottom"][e];if(null!=t[n]&&"auto"!==t[n])return parseFloat(t[n]);var l=this.root,f=document.defaultView.getComputedStyle(l);return(l[o]||DD(f[n])||DD(l.style[n]))-(DD(f[a])||0)-(DD(f[u])||0)|0},dispose:function(){this.root.innerHTML="",this._svgRoot=this._backgroundRoot=this._svgDom=this._backgroundNode=this._viewport=this.storage=null},clear:function(){this._viewport&&this.root.removeChild(this._viewport)},toDataURL:function(){return this.refresh(),"data:image/svg+xml;charset=UTF-8,"+encodeURIComponent(this._svgDom.outerHTML.replace(/></g,">\n\r<"))}},le(["getLayer","insertLayer","eachLayer","eachBuiltinLayer","eachOtherLayer","getLayers","modLayer","delLayer","clearLayer","pathToImage"],function(e){Oi.prototype[e]=function(){}}),Lm("svg",Oi),pt.version="4.9.0",pt.dependencies={zrender:"4.3.2"},pt.PRIORITY=ih,pt.init=function(e,t,n){var o=qo(e);if(o)return o;var a=new ae(e,t,n);return a.id="ec_"+ti++,Yr[a.id]=a,Yl(e,Kn,a.id),function(u){var l="__connectUpdateStatus";function f(m,v){for(var x=0;x<m.length;x++)m[x][l]=v}oa(pr,function(m,v){u._messageCenter.on(v,function(x){if(Oo[u.group]&&0!==u[l]){if(x&&x.escapeConnect)return;var C=u.makeActionFromEvent(x),k=[];oa(Yr,function(M){M!==u&&M.group===u.group&&k.push(M)}),f(k,0),oa(k,function(M){1!==M[l]&&M.dispatchAction(C)}),f(k,2)}})})}(a),a},pt.connect=function(e){if(en(e)){var t=e;e=null,oa(t,function(n){null!=n.group&&(e=n.group)}),e=e||"g_"+$i++,oa(t,function(n){n.group=e})}return Oo[e]=!0,e},pt.disConnect=Si,pt.disconnect=zo,pt.dispose=function(e){"string"==typeof e?e=Yr[e]:e instanceof ae||(e=qo(e)),e instanceof ae&&!e.isDisposed()&&e.dispose()},pt.getInstanceByDom=qo,pt.getInstanceById=function(e){return Yr[e]},pt.registerTheme=Da,pt.registerPreprocessor=da,pt.registerProcessor=Ii,pt.registerPostUpdate=function(e){Fr.push(e)},pt.registerAction=io,pt.registerCoordinateSystem=Bc,pt.getCoordinateSystemDimensions=function(e){var t=lu.get(e);if(t)return t.getDimensionsInfo?t.getDimensionsInfo():t.dimensions.slice()},pt.registerLayout=fa,pt.registerVisual=Gi,pt.registerLoading=Zd,pt.extendComponentModel=eu,pt.extendComponentView=Ts,pt.extendSeriesModel=dp,pt.extendChartView=gu,pt.setCanvasCreator=function(e){Q("createCanvas",e)},pt.registerMap=function(e,t,n){!function(e,t,n){var o;le(o=en(t)?t:t.svg?[{type:"svg",source:t.svg,specialAreas:t.specialAreas}]:(t.geoJson&&!t.features&&(n=t.specialAreas,t=t.geoJson),[{type:"geoJSON",source:t,specialAreas:n}]),function(a){var u=a.type;"geoJson"===u&&(u=a.type="geoJSON"),(0,tg[u])(a)}),Ev.set(e,o)}(e,t,n)},pt.getMap=function(e){var t=eg_retrieveMap(e);return t&&t[0]&&{geoJson:t[0].geoJSON,specialAreas:t[0].specialAreas}},pt.dataTool={},pt.zrender=Sr,pt.number=H_,pt.format=t1,pt.throttle=Nc,pt.helper=qS,pt.matrix=Is,pt.vector=Do,pt.color=f0,pt.parseGeoJSON=Lb,pt.parseGeoJson=Vk,pt.util=Hk,pt.graphic=UM,pt.List=Uu,pt.Model=ei,pt.Axis=mu,pt.env=Ze}),function(pt,hn){"object"==typeof exports&&"undefined"!=typeof module?hn(exports,require("echarts")):"function"==typeof define&&define.amd?define(["exports","echarts"],hn):hn(pt.bmap={},pt.echarts)}(this,function(pt,hn){"use strict";function gr(ye,F){this._bmap=ye,this.dimensions=["lng","lat"],this._mapOffset=[0,0],this._api=F,this._projection=new BMap.MercatorProjection}function Ze(ye,F){return F=F||[0,0],hn.util.map([0,1],function(U){var se=F[U],$=ye[U]/2,Z=[],oe=[];return Z[U]=se-$,oe[U]=se+$,Z[1-U]=oe[1-U]=F[1-U],Math.abs(this.dataToPoint(Z)[U]-this.dataToPoint(oe)[U])},this)}var je;function j(ye){for(var F in ye)if(ye.hasOwnProperty(F))return!1;return!0}gr.prototype.dimensions=["lng","lat"],gr.prototype.setZoom=function(ye){this._zoom=ye},gr.prototype.setCenter=function(ye){this._center=this._projection.lngLatToPoint(new BMap.Point(ye[0],ye[1]))},gr.prototype.setMapOffset=function(ye){this._mapOffset=ye},gr.prototype.getBMap=function(){return this._bmap},gr.prototype.dataToPoint=function(ye){var F=new BMap.Point(ye[0],ye[1]),U=this._bmap.pointToOverlayPixel(F),se=this._mapOffset;return[U.x-se[0],U.y-se[1]]},gr.prototype.pointToData=function(ye){var F=this._mapOffset;return[(ye=this._bmap.overlayPixelToPoint({x:ye[0]+F[0],y:ye[1]+F[1]})).lng,ye.lat]},gr.prototype.getViewRect=function(){var ye=this._api;return new hn.graphic.BoundingRect(0,0,ye.getWidth(),ye.getHeight())},gr.prototype.getRoamTransform=function(){return hn.matrix.create()},gr.prototype.prepareCustoms=function(ye){var F=this.getViewRect();return{coordSys:{type:"bmap",x:F.x,y:F.y,width:F.width,height:F.height},api:{coord:hn.util.bind(this.dataToPoint,this),size:hn.util.bind(Ze,this)}}},gr.dimensions=gr.prototype.dimensions,gr.create=function(ye,F){var U,se=F.getDom();ye.eachComponent("bmap",function($){var Z=F.getZr().painter,oe=Z.getViewportRoot();if("undefined"==typeof BMap)throw new Error("BMap api is not loaded");if(je=je||function(){function qe($e){this._root=$e}return(qe.prototype=new BMap.Overlay).initialize=function($e){return $e.getPanes().labelPane.appendChild(this._root),this._root},qe.prototype.draw=function(){},qe}(),U)throw new Error("Only one bmap component can exist");if(!$.__bmap){var ne=se.querySelector(".ec-extension-bmap");ne&&(oe.style.left="0px",oe.style.top="0px",se.removeChild(ne)),(ne=document.createElement("div")).style.cssText="width:100%;height:100%",ne.classList.add("ec-extension-bmap"),se.appendChild(ne);var Q=$.get("mapOptions")||{};delete Q.mapType;var ie=$.__bmap=new BMap.Map(ne,Q),xe=new je(oe);ie.addOverlay(xe),Z.getViewportRootOffset=function(){return{offsetLeft:0,offsetTop:0}}}ie=$.__bmap;var Ae=$.get("center"),Ne=$.get("zoom");if(Ae&&Ne){var Ee=ie.getCenter(),nt=ie.getZoom();if($.centerOrZoomChanged([Ee.lng,Ee.lat],nt)){var Wt=new BMap.Point(Ae[0],Ae[1]);ie.centerAndZoom(Wt,Ne)}}(U=new gr(ie,F)).setMapOffset($.__mapOffset||[0,0]),U.setZoom(Ne),U.setCenter(Ae),$.coordinateSystem=U}),ye.eachSeries(function($){"bmap"===$.get("coordinateSystem")&&($.coordinateSystem=U)})},hn.extendComponentModel({type:"bmap",getBMap:function(){return this.__bmap},setCenterAndZoom:function(ye,F){this.option.center=ye,this.option.zoom=F},centerOrZoomChanged:function(ye,F){var se,$,U=this.option;return $=U.center,!((se=ye)&&$&&se[0]===$[0]&&se[1]===$[1]&&F===U.zoom)},defaultOption:{center:[104.114129,37.550339],zoom:5,mapStyle:{},mapStyleV2:{},mapOptions:{},roam:!1}}),hn.extendComponentView({type:"bmap",render:function(ye,F,U){function se(qe,$e){if(!$){var Ie=oe.parentNode.parentNode.parentNode,de=[-parseInt(Ie.style.left,10)||0,-parseInt(Ie.style.top,10)||0];oe.style.left=de[0]+"px",oe.style.top=de[1]+"px",ne.setMapOffset(de),ye.__mapOffset=de,U.dispatchAction({type:"bmapRoam"})}}var $=!0,Z=ye.getBMap(),oe=U.getZr().painter.getViewportRoot(),ne=ye.coordinateSystem;function Q(){$||U.dispatchAction({type:"bmapRoam"})}Z.removeEventListener("moving",this._oldMoveHandler),Z.removeEventListener("moveend",this._oldMoveHandler),Z.removeEventListener("zoomend",this._oldZoomEndHandler),Z.addEventListener("moving",se),Z.addEventListener("moveend",se),Z.addEventListener("zoomend",Q),this._oldMoveHandler=se,this._oldZoomEndHandler=Q;var ie=ye.get("roam");ie&&"scale"!==ie?Z.enableDragging():Z.disableDragging(),ie&&"move"!==ie?(Z.enableScrollWheelZoom(),Z.enableDoubleClickZoom(),Z.enablePinchToZoom()):(Z.disableScrollWheelZoom(),Z.disableDoubleClickZoom(),Z.disablePinchToZoom());var xe=ye.__mapStyle,Ae=ye.get("mapStyle")||{},Ne=JSON.stringify(Ae);JSON.stringify(xe)!==Ne&&(j(nt)||Z.setMapStyle(hn.util.clone(Ae)),ye.__mapStyle=JSON.parse(Ne));var Ee=ye.__mapStyle2,nt=ye.get("mapStyleV2")||{},Wt=JSON.stringify(nt);JSON.stringify(Ee)!==Wt&&(j(nt)||Z.setMapStyleV2(hn.util.clone(nt)),ye.__mapStyle2=JSON.parse(Wt)),$=!1}}),hn.registerCoordinateSystem("bmap",gr),hn.registerAction({type:"bmapRoam",event:"bmapRoam",update:"updateLayout"},function(ye,F){F.eachComponent("bmap",function(U){var se=U.getBMap(),$=se.getCenter();U.setCenterAndZoom([$.lng,$.lat],se.getZoom())})}),pt.version="1.0.0"}),function(pt){"object"==typeof exports&&"undefined"!=typeof module?module.exports=pt():"function"==typeof define&&define.amd?define([],pt):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chart=pt()}(function(){return function pt(hn,gr,Ze){function je(F,U){if(!gr[F]){if(!hn[F]){var se="function"==typeof require&&require;if(!U&&se)return se(F,!0);if(j)return j(F,!0);var $=new Error("Cannot find module '"+F+"'");throw $.code="MODULE_NOT_FOUND",$}var Z=gr[F]={exports:{}};hn[F][0].call(Z.exports,function(oe){return je(hn[F][1][oe]||oe)},Z,Z.exports,pt,hn,gr,Ze)}return gr[F].exports}for(var j="function"==typeof require&&require,ye=0;ye<Ze.length;ye++)je(Ze[ye]);return je}({1:[function(pt,hn,gr){},{}],2:[function(pt,hn,gr){function Ze(Q){if(Q){var ie=[0,0,0],xe=1,Ae=Q.match(/^#([a-fA-F0-9]{3})$/i);if(Ae)for(Ae=Ae[1],Ne=0;Ne<ie.length;Ne++)ie[Ne]=parseInt(Ae[Ne]+Ae[Ne],16);else if(Ae=Q.match(/^#([a-fA-F0-9]{6})$/i))for(Ae=Ae[1],Ne=0;Ne<ie.length;Ne++)ie[Ne]=parseInt(Ae.slice(2*Ne,2*Ne+2),16);else if(Ae=Q.match(/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(Ne=0;Ne<ie.length;Ne++)ie[Ne]=parseInt(Ae[Ne+1]);xe=parseFloat(Ae[4])}else if(Ae=Q.match(/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i)){for(Ne=0;Ne<ie.length;Ne++)ie[Ne]=Math.round(2.55*parseFloat(Ae[Ne+1]));xe=parseFloat(Ae[4])}else if(Ae=Q.match(/(\w+)/)){if("transparent"==Ae[1])return[0,0,0,0];if(!(ie=Z[Ae[1]]))return}for(var Ne=0;Ne<ie.length;Ne++)ie[Ne]=se(ie[Ne],0,255);return xe=xe||0==xe?se(xe,0,1):1,ie[3]=xe,ie}}function je(Q){if(Q){var ie=Q.match(/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(ie){var xe=parseFloat(ie[4]);return[se(parseInt(ie[1]),0,360),se(parseFloat(ie[2]),0,100),se(parseFloat(ie[3]),0,100),se(isNaN(xe)?1:xe,0,1)]}}}function j(Q){if(Q){var ie=Q.match(/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/);if(ie){var xe=parseFloat(ie[4]);return[se(parseInt(ie[1]),0,360),se(parseFloat(ie[2]),0,100),se(parseFloat(ie[3]),0,100),se(isNaN(xe)?1:xe,0,1)]}}}function ye(Q,ie){return void 0===ie&&(ie=void 0!==Q[3]?Q[3]:1),"rgba("+Q[0]+", "+Q[1]+", "+Q[2]+", "+ie+")"}function F(Q,ie){return"rgba("+Math.round(Q[0]/255*100)+"%, "+Math.round(Q[1]/255*100)+"%, "+Math.round(Q[2]/255*100)+"%, "+(ie||Q[3]||1)+")"}function U(Q,ie){return void 0===ie&&(ie=void 0!==Q[3]?Q[3]:1),"hsla("+Q[0]+", "+Q[1]+"%, "+Q[2]+"%, "+ie+")"}function se(Q,ie,xe){return Math.min(Math.max(ie,Q),xe)}function $(Q){var ie=Q.toString(16).toUpperCase();return ie.length<2?"0"+ie:ie}var Z=pt(6);hn.exports={getRgba:Ze,getHsla:je,getRgb:function(Q){var ie=Ze(Q);return ie&&ie.slice(0,3)},getHsl:function(Q){var ie=je(Q);return ie&&ie.slice(0,3)},getHwb:j,getAlpha:function(Q){var ie=Ze(Q);return ie||(ie=je(Q))||(ie=j(Q))?ie[3]:void 0},hexString:function(Q){return"#"+$(Q[0])+$(Q[1])+$(Q[2])},rgbString:function(Q,ie){return ie<1||Q[3]&&Q[3]<1?ye(Q,ie):"rgb("+Q[0]+", "+Q[1]+", "+Q[2]+")"},rgbaString:ye,percentString:function(Q,ie){return ie<1||Q[3]&&Q[3]<1?F(Q,ie):"rgb("+Math.round(Q[0]/255*100)+"%, "+Math.round(Q[1]/255*100)+"%, "+Math.round(Q[2]/255*100)+"%)"},percentaString:F,hslString:function(Q,ie){return ie<1||Q[3]&&Q[3]<1?U(Q,ie):"hsl("+Q[0]+", "+Q[1]+"%, "+Q[2]+"%)"},hslaString:U,hwbString:function(Q,ie){return void 0===ie&&(ie=void 0!==Q[3]?Q[3]:1),"hwb("+Q[0]+", "+Q[1]+"%, "+Q[2]+"%"+(void 0!==ie&&1!==ie?", "+ie:"")+")"},keyword:function(Q){return oe[Q.slice(0,3)]}};var oe={};for(var ne in Z)oe[Z[ne]]=ne},{6:6}],3:[function(pt,hn,gr){var Ze=pt(5),je=pt(2),j=function(ye){return ye instanceof j?ye:this instanceof j?(this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1},void("string"==typeof ye?(F=je.getRgba(ye))?this.setValues("rgb",F):(F=je.getHsla(ye))?this.setValues("hsl",F):(F=je.getHwb(ye))&&this.setValues("hwb",F):"object"==typeof ye&&(void 0!==(F=ye).r||void 0!==F.red?this.setValues("rgb",F):void 0!==F.l||void 0!==F.lightness?this.setValues("hsl",F):void 0!==F.v||void 0!==F.value?this.setValues("hsv",F):void 0!==F.w||void 0!==F.whiteness?this.setValues("hwb",F):void 0===F.c&&void 0===F.cyan||this.setValues("cmyk",F)))):new j(ye);var F};j.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var ye=this.values;return 1!==ye.alpha?ye.hwb.concat([ye.alpha]):ye.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var ye=this.values;return ye.rgb.concat([ye.alpha])},hslaArray:function(){var ye=this.values;return ye.hsl.concat([ye.alpha])},alpha:function(ye){return void 0===ye?this.values.alpha:(this.setValues("alpha",ye),this)},red:function(ye){return this.setChannel("rgb",0,ye)},green:function(ye){return this.setChannel("rgb",1,ye)},blue:function(ye){return this.setChannel("rgb",2,ye)},hue:function(ye){return ye&&(ye=(ye%=360)<0?360+ye:ye),this.setChannel("hsl",0,ye)},saturation:function(ye){return this.setChannel("hsl",1,ye)},lightness:function(ye){return this.setChannel("hsl",2,ye)},saturationv:function(ye){return this.setChannel("hsv",1,ye)},whiteness:function(ye){return this.setChannel("hwb",1,ye)},blackness:function(ye){return this.setChannel("hwb",2,ye)},value:function(ye){return this.setChannel("hsv",2,ye)},cyan:function(ye){return this.setChannel("cmyk",0,ye)},magenta:function(ye){return this.setChannel("cmyk",1,ye)},yellow:function(ye){return this.setChannel("cmyk",2,ye)},black:function(ye){return this.setChannel("cmyk",3,ye)},hexString:function(){return je.hexString(this.values.rgb)},rgbString:function(){return je.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return je.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return je.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return je.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return je.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return je.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return je.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var ye=this.values.rgb;return ye[0]<<16|ye[1]<<8|ye[2]},luminosity:function(){for(var ye=this.values.rgb,F=[],U=0;U<ye.length;U++){var se=ye[U]/255;F[U]=se<=.03928?se/12.92:Math.pow((se+.055)/1.055,2.4)}return.2126*F[0]+.7152*F[1]+.0722*F[2]},contrast:function(ye){var F=this.luminosity(),U=ye.luminosity();return F>U?(F+.05)/(U+.05):(U+.05)/(F+.05)},level:function(ye){var F=this.contrast(ye);return F>=7.1?"AAA":F>=4.5?"AA":""},dark:function(){var ye=this.values.rgb;return(299*ye[0]+587*ye[1]+114*ye[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var ye=[],F=0;F<3;F++)ye[F]=255-this.values.rgb[F];return this.setValues("rgb",ye),this},lighten:function(ye){var F=this.values.hsl;return F[2]+=F[2]*ye,this.setValues("hsl",F),this},darken:function(ye){var F=this.values.hsl;return F[2]-=F[2]*ye,this.setValues("hsl",F),this},saturate:function(ye){var F=this.values.hsl;return F[1]+=F[1]*ye,this.setValues("hsl",F),this},desaturate:function(ye){var F=this.values.hsl;return F[1]-=F[1]*ye,this.setValues("hsl",F),this},whiten:function(ye){var F=this.values.hwb;return F[1]+=F[1]*ye,this.setValues("hwb",F),this},blacken:function(ye){var F=this.values.hwb;return F[2]+=F[2]*ye,this.setValues("hwb",F),this},greyscale:function(){var ye=this.values.rgb,F=.3*ye[0]+.59*ye[1]+.11*ye[2];return this.setValues("rgb",[F,F,F]),this},clearer:function(ye){var F=this.values.alpha;return this.setValues("alpha",F-F*ye),this},opaquer:function(ye){var F=this.values.alpha;return this.setValues("alpha",F+F*ye),this},rotate:function(ye){var F=this.values.hsl,U=(F[0]+ye)%360;return F[0]=U<0?360+U:U,this.setValues("hsl",F),this},mix:function(ye,F){var U=this,se=ye,$=void 0===F?.5:F,Z=2*$-1,oe=U.alpha()-se.alpha(),ne=((Z*oe==-1?Z:(Z+oe)/(1+Z*oe))+1)/2,Q=1-ne;return this.rgb(ne*U.red()+Q*se.red(),ne*U.green()+Q*se.green(),ne*U.blue()+Q*se.blue()).alpha(U.alpha()*$+se.alpha()*(1-$))},toJSON:function(){return this.rgb()},clone:function(){var ye,F,U=new j,se=this.values,$=U.values;for(var Z in se)se.hasOwnProperty(Z)&&("[object Array]"===(F={}.toString.call(ye=se[Z]))?$[Z]=ye.slice(0):"[object Number]"===F?$[Z]=ye:console.error("unexpected color value:",ye));return U}},j.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},j.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},j.prototype.getValues=function(ye){for(var F=this.values,U={},se=0;se<ye.length;se++)U[ye.charAt(se)]=F[ye][se];return 1!==F.alpha&&(U.a=F.alpha),U},j.prototype.setValues=function(ye,F){var U,Q,se=this.values,$=this.spaces,Z=this.maxes,oe=1;if(this.valid=!0,"alpha"===ye)oe=F;else if(F.length)se[ye]=F.slice(0,ye.length),oe=F[ye.length];else if(void 0!==F[ye.charAt(0)]){for(U=0;U<ye.length;U++)se[ye][U]=F[ye.charAt(U)];oe=F.a}else if(void 0!==F[$[ye][0]]){var ne=$[ye];for(U=0;U<ye.length;U++)se[ye][U]=F[ne[U]];oe=F.alpha}if(se.alpha=Math.max(0,Math.min(1,void 0===oe?se.alpha:oe)),"alpha"===ye)return!1;for(U=0;U<ye.length;U++)Q=Math.max(0,Math.min(Z[ye][U],se[ye][U])),se[ye][U]=Math.round(Q);for(var ie in $)ie!==ye&&(se[ie]=Ze[ye][ie](se[ye]));return!0},j.prototype.setSpace=function(ye,F){var U=F[0];return void 0===U?this.getValues(ye):("number"==typeof U&&(U=Array.prototype.slice.call(F)),this.setValues(ye,U),this)},j.prototype.setChannel=function(ye,F,U){var se=this.values[ye];return void 0===U?se[F]:(U===se[F]||(se[F]=U,this.setValues(ye,se)),this)},"undefined"!=typeof window&&(window.Color=j),hn.exports=j},{2:2,5:5}],4:[function(pt,hn,gr){function Ze(Ie){var de,le,Ge=Ie[0]/255,Qe=Ie[1]/255,ht=Ie[2]/255,Jt=Math.min(Ge,Qe,ht),Rt=Math.max(Ge,Qe,ht),pn=Rt-Jt;return Rt==Jt?de=0:Ge==Rt?de=(Qe-ht)/pn:Qe==Rt?de=2+(ht-Ge)/pn:ht==Rt&&(de=4+(Ge-Qe)/pn),(de=Math.min(60*de,360))<0&&(de+=360),le=(Jt+Rt)/2,[de,100*(Rt==Jt?0:le<=.5?pn/(Rt+Jt):pn/(2-Rt-Jt)),100*le]}function je(Ie){var de,Fe,Ge=Ie[0],Qe=Ie[1],ht=Ie[2],Jt=Math.min(Ge,Qe,ht),Rt=Math.max(Ge,Qe,ht),pn=Rt-Jt;return Fe=0==Rt?0:pn/Rt*1e3/10,Rt==Jt?de=0:Ge==Rt?de=(Qe-ht)/pn:Qe==Rt?de=2+(ht-Ge)/pn:ht==Rt&&(de=4+(Ge-Qe)/pn),(de=Math.min(60*de,360))<0&&(de+=360),[de,Fe,Rt/255*1e3/10]}function j(Ie){var de=Ie[0],Fe=Ie[1],le=Ie[2];return[Ze(Ie)[0],1/255*Math.min(de,Math.min(Fe,le))*100,100*(le=1-1/255*Math.max(de,Math.max(Fe,le)))]}function ye(Ie){var Ge,Qe=Ie[0]/255,ht=Ie[1]/255,Jt=Ie[2]/255;return[100*((1-Qe-(Ge=Math.min(1-Qe,1-ht,1-Jt)))/(1-Ge)||0),100*((1-ht-Ge)/(1-Ge)||0),100*((1-Jt-Ge)/(1-Ge)||0),100*Ge]}function F(Ie){return qe[JSON.stringify(Ie)]}function U(Ie){var de=Ie[0]/255,Fe=Ie[1]/255,le=Ie[2]/255;return[100*(.4124*(de=de>.04045?Math.pow((de+.055)/1.055,2.4):de/12.92)+.3576*(Fe=Fe>.04045?Math.pow((Fe+.055)/1.055,2.4):Fe/12.92)+.1805*(le=le>.04045?Math.pow((le+.055)/1.055,2.4):le/12.92)),100*(.2126*de+.7152*Fe+.0722*le),100*(.0193*de+.1192*Fe+.9505*le)]}function se(Ie){var Ge=U(Ie),Qe=Ge[0],ht=Ge[1],Jt=Ge[2];return ht/=100,Jt/=108.883,Qe=(Qe/=95.047)>.008856?Math.pow(Qe,1/3):7.787*Qe+16/116,[116*(ht=ht>.008856?Math.pow(ht,1/3):7.787*ht+16/116)-16,500*(Qe-ht),200*(ht-(Jt=Jt>.008856?Math.pow(Jt,1/3):7.787*Jt+16/116))]}function $(Ie){var de,Fe,le,Ge,Qe,ht=Ie[0]/360,Jt=Ie[1]/100,Rt=Ie[2]/100;if(0==Jt)return[Qe=255*Rt,Qe,Qe];de=2*Rt-(Fe=Rt<.5?Rt*(1+Jt):Rt+Jt-Rt*Jt),Ge=[0,0,0];for(var pn=0;pn<3;pn++)(le=ht+1/3*-(pn-1))<0&&le++,le>1&&le--,Ge[pn]=255*(Qe=6*le<1?de+6*(Fe-de)*le:2*le<1?Fe:3*le<2?de+(Fe-de)*(2/3-le)*6:de);return Ge}function Z(Ie){var de=Ie[0]/60,Fe=Ie[1]/100,Rt=Ie[2]/100,le=Math.floor(de)%6,Ge=de-Math.floor(de),Qe=255*Rt*(1-Fe),ht=255*Rt*(1-Fe*Ge),Jt=255*Rt*(1-Fe*(1-Ge));switch(Rt*=255,le){case 0:return[Rt,Jt,Qe];case 1:return[ht,Rt,Qe];case 2:return[Qe,Rt,Jt];case 3:return[Qe,ht,Rt];case 4:return[Jt,Qe,Rt];case 5:return[Rt,Qe,ht]}}function oe(Ie){var de,Fe,le,Ge,Qe=Ie[0]/360,ht=Ie[1]/100,Jt=Ie[2]/100,Rt=ht+Jt;switch(Rt>1&&(ht/=Rt,Jt/=Rt),le=6*Qe-(de=Math.floor(6*Qe)),0!=(1&de)&&(le=1-le),Ge=ht+le*((Fe=1-Jt)-ht),de){default:case 6:case 0:r=Fe,g=Ge,b=ht;break;case 1:r=Ge,g=Fe,b=ht;break;case 2:r=ht,g=Fe,b=Ge;break;case 3:r=ht,g=Ge,b=Fe;break;case 4:r=Ge,g=ht,b=Fe;break;case 5:r=Fe,g=ht,b=Ge}return[255*r,255*g,255*b]}function ne(Ie){var Qe=Ie[1]/100,ht=Ie[2]/100,Jt=Ie[3]/100;return[255*(1-Math.min(1,Ie[0]/100*(1-Jt)+Jt)),255*(1-Math.min(1,Qe*(1-Jt)+Jt)),255*(1-Math.min(1,ht*(1-Jt)+Jt))]}function Q(Ie){var de,Fe,le,Ge=Ie[0]/100,Qe=Ie[1]/100,ht=Ie[2]/100;return Fe=-.9689*Ge+1.8758*Qe+.0415*ht,le=.0557*Ge+-.204*Qe+1.057*ht,de=(de=3.2406*Ge+-1.5372*Qe+-.4986*ht)>.0031308?1.055*Math.pow(de,1/2.4)-.055:de*=12.92,Fe=Fe>.0031308?1.055*Math.pow(Fe,1/2.4)-.055:Fe*=12.92,le=le>.0031308?1.055*Math.pow(le,1/2.4)-.055:le*=12.92,[255*(de=Math.min(Math.max(0,de),1)),255*(Fe=Math.min(Math.max(0,Fe),1)),255*(le=Math.min(Math.max(0,le),1))]}function ie(Ie){var Ge=Ie[0],Qe=Ie[1],ht=Ie[2];return Qe/=100,ht/=108.883,Ge=(Ge/=95.047)>.008856?Math.pow(Ge,1/3):7.787*Ge+16/116,[116*(Qe=Qe>.008856?Math.pow(Qe,1/3):7.787*Qe+16/116)-16,500*(Ge-Qe),200*(Qe-(ht=ht>.008856?Math.pow(ht,1/3):7.787*ht+16/116))]}function xe(Ie){var de,Fe,le,Ge,Qe=Ie[0],ht=Ie[1],Jt=Ie[2];return Qe<=8?Ge=(Fe=100*Qe/903.3)/100*7.787+16/116:(Fe=100*Math.pow((Qe+16)/116,3),Ge=Math.pow(Fe/100,1/3)),[de=de/95.047<=.008856?de=95.047*(ht/500+Ge-16/116)/7.787:95.047*Math.pow(ht/500+Ge,3),Fe,le=le/108.883<=.008859?le=108.883*(Ge-Jt/200-16/116)/7.787:108.883*Math.pow(Ge-Jt/200,3)]}function Ae(Ie){var Fe,Ge=Ie[0],Qe=Ie[1],ht=Ie[2];return(Fe=360*Math.atan2(ht,Qe)/2/Math.PI)<0&&(Fe+=360),[Ge,Math.sqrt(Qe*Qe+ht*ht),Fe]}function Ne(Ie){return Q(xe(Ie))}function Ee(Ie){var le,Qe=Ie[1];return le=Ie[2]/360*2*Math.PI,[Ie[0],Qe*Math.cos(le),Qe*Math.sin(le)]}function nt(Ie){return Wt[Ie]}hn.exports={rgb2hsl:Ze,rgb2hsv:je,rgb2hwb:j,rgb2cmyk:ye,rgb2keyword:F,rgb2xyz:U,rgb2lab:se,rgb2lch:function(Ie){return Ae(se(Ie))},hsl2rgb:$,hsl2hsv:function(Ie){var Ge=Ie[1]/100,Qe=Ie[2]/100;return 0===Qe?[0,0,0]:[Ie[0],2*(Ge*=(Qe*=2)<=1?Qe:2-Qe)/(Qe+Ge)*100,(Qe+Ge)/2*100]},hsl2hwb:function(Ie){return j($(Ie))},hsl2cmyk:function(Ie){return ye($(Ie))},hsl2keyword:function(Ie){return F($(Ie))},hsv2rgb:Z,hsv2hsl:function(Ie){var de,Fe,Ge=Ie[1]/100,Qe=Ie[2]/100;return de=Ge*Qe,[Ie[0],100*(de=(de/=(Fe=(2-Ge)*Qe)<=1?Fe:2-Fe)||0),100*(Fe/=2)]},hsv2hwb:function(Ie){return j(Z(Ie))},hsv2cmyk:function(Ie){return ye(Z(Ie))},hsv2keyword:function(Ie){return F(Z(Ie))},hwb2rgb:oe,hwb2hsl:function(Ie){return Ze(oe(Ie))},hwb2hsv:function(Ie){return je(oe(Ie))},hwb2cmyk:function(Ie){return ye(oe(Ie))},hwb2keyword:function(Ie){return F(oe(Ie))},cmyk2rgb:ne,cmyk2hsl:function(Ie){return Ze(ne(Ie))},cmyk2hsv:function(Ie){return je(ne(Ie))},cmyk2hwb:function(Ie){return j(ne(Ie))},cmyk2keyword:function(Ie){return F(ne(Ie))},keyword2rgb:nt,keyword2hsl:function(Ie){return Ze(nt(Ie))},keyword2hsv:function(Ie){return je(nt(Ie))},keyword2hwb:function(Ie){return j(nt(Ie))},keyword2cmyk:function(Ie){return ye(nt(Ie))},keyword2lab:function(Ie){return se(nt(Ie))},keyword2xyz:function(Ie){return U(nt(Ie))},xyz2rgb:Q,xyz2lab:ie,xyz2lch:function(Ie){return Ae(ie(Ie))},lab2xyz:xe,lab2rgb:Ne,lab2lch:Ae,lch2lab:Ee,lch2xyz:function(Ie){return xe(Ee(Ie))},lch2rgb:function(Ie){return Ne(Ee(Ie))}};var Wt={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},qe={};for(var $e in Wt)qe[JSON.stringify(Wt[$e])]=$e},{}],5:[function(pt,hn,gr){var Ze=pt(4),je=function(){return new se};for(var j in Ze){je[j+"Raw"]=function($){return function(Z){return"number"==typeof Z&&(Z=Array.prototype.slice.call(arguments)),Ze[$](Z)}}(j);var ye=/(\w+)2(\w+)/.exec(j),F=ye[1],U=ye[2];(je[F]=je[F]||{})[U]=je[j]=function($){return function(Z){"number"==typeof Z&&(Z=Array.prototype.slice.call(arguments));var oe=Ze[$](Z);if("string"==typeof oe||void 0===oe)return oe;for(var ne=0;ne<oe.length;ne++)oe[ne]=Math.round(oe[ne]);return oe}}(j)}var se=function(){this.convs={}};se.prototype.routeSpace=function($,Z){var oe=Z[0];return void 0===oe?this.getValues($):("number"==typeof oe&&(oe=Array.prototype.slice.call(Z)),this.setValues($,oe))},se.prototype.setValues=function($,Z){return this.space=$,this.convs={},this.convs[$]=Z,this},se.prototype.getValues=function($){var Z=this.convs[$];if(!Z){var oe=this.space;Z=je[oe][$](this.convs[oe]),this.convs[$]=Z}return Z},["rgb","hsl","hsv","cmyk","keyword"].forEach(function($){se.prototype[$]=function(Z){return this.routeSpace($,arguments)}}),hn.exports=je},{4:4}],6:[function(pt,hn,gr){"use strict";hn.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(pt,hn,gr){var Ze=pt(29)();Ze.helpers=pt(45),pt(27)(Ze),Ze.defaults=pt(25),Ze.Element=pt(26),Ze.elements=pt(40),Ze.Interaction=pt(28),Ze.platform=pt(48),pt(31)(Ze),pt(22)(Ze),pt(23)(Ze),pt(24)(Ze),pt(30)(Ze),pt(33)(Ze),pt(32)(Ze),pt(35)(Ze),pt(54)(Ze),pt(52)(Ze),pt(53)(Ze),pt(55)(Ze),pt(56)(Ze),pt(57)(Ze),pt(15)(Ze),pt(16)(Ze),pt(17)(Ze),pt(18)(Ze),pt(19)(Ze),pt(20)(Ze),pt(21)(Ze),pt(8)(Ze),pt(9)(Ze),pt(10)(Ze),pt(11)(Ze),pt(12)(Ze),pt(13)(Ze),pt(14)(Ze);var je=[];je.push(pt(49)(Ze),pt(50)(Ze),pt(51)(Ze)),Ze.plugins.register(je),Ze.platform.initialize(),hn.exports=Ze,"undefined"!=typeof window&&(window.Chart=Ze),Ze.canvasHelpers=Ze.helpers.canvas},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,35:35,40:40,45:45,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,8:8,9:9}],8:[function(pt,hn,gr){"use strict";hn.exports=function(Ze){Ze.Bar=function(je,j){return j.type="bar",new Ze(je,j)}}},{}],9:[function(pt,hn,gr){"use strict";hn.exports=function(Ze){Ze.Bubble=function(je,j){return j.type="bubble",new Ze(je,j)}}},{}],10:[function(pt,hn,gr){"use strict";hn.exports=function(Ze){Ze.Doughnut=function(je,j){return j.type="doughnut",new Ze(je,j)}}},{}],11:[function(pt,hn,gr){"use strict";hn.exports=function(Ze){Ze.Line=function(je,j){return j.type="line",new Ze(je,j)}}},{}],12:[function(pt,hn,gr){"use strict";hn.exports=function(Ze){Ze.PolarArea=function(je,j){return j.type="polarArea",new Ze(je,j)}}},{}],13:[function(pt,hn,gr){"use strict";hn.exports=function(Ze){Ze.Radar=function(je,j){return j.type="radar",new Ze(je,j)}}},{}],14:[function(pt,hn,gr){"use strict";hn.exports=function(Ze){Ze.Scatter=function(je,j){return j.type="scatter",new Ze(je,j)}}},{}],15:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(40),j=pt(45);Ze._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),Ze._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(ye,F){var U="";return ye.length>0&&(ye[0].yLabel?U=ye[0].yLabel:F.labels.length>0&&ye[0].index<F.labels.length&&(U=F.labels[ye[0].index])),U},label:function(ye,F){return(F.datasets[ye.datasetIndex].label||"")+": "+ye.xLabel}},mode:"index",axis:"y"}}),hn.exports=function(ye){ye.controllers.bar=ye.DatasetController.extend({dataElementType:je.Rectangle,initialize:function(){var F,U=this;ye.DatasetController.prototype.initialize.apply(U,arguments),(F=U.getMeta()).stack=U.getDataset().stack,F.bar=!0},update:function(F){var U,se,$=this,Z=$.getMeta().data;for($._ruler=$.getRuler(),U=0,se=Z.length;U<se;++U)$.updateElement(Z[U],U,F)},updateElement:function(F,U,se){var $=this,Z=$.chart,oe=$.getMeta(),ne=$.getDataset(),Q=F.custom||{},ie=Z.options.elements.rectangle;F._xScale=$.getScaleForId(oe.xAxisID),F._yScale=$.getScaleForId(oe.yAxisID),F._datasetIndex=$.index,F._index=U,F._model={datasetLabel:ne.label,label:Z.data.labels[U],borderSkipped:Q.borderSkipped?Q.borderSkipped:ie.borderSkipped,backgroundColor:Q.backgroundColor?Q.backgroundColor:j.valueAtIndexOrDefault(ne.backgroundColor,U,ie.backgroundColor),borderColor:Q.borderColor?Q.borderColor:j.valueAtIndexOrDefault(ne.borderColor,U,ie.borderColor),borderWidth:Q.borderWidth?Q.borderWidth:j.valueAtIndexOrDefault(ne.borderWidth,U,ie.borderWidth)},$.updateElementGeometry(F,U,se),F.pivot()},updateElementGeometry:function(F,U,se){var $=this,Z=F._model,oe=$.getValueScale(),ne=oe.getBasePixel(),Q=oe.isHorizontal(),ie=$._ruler||$.getRuler(),xe=$.calculateBarValuePixels($.index,U),Ae=$.calculateBarIndexPixels($.index,U,ie);Z.horizontal=Q,Z.base=se?ne:xe.base,Z.x=Q?se?ne:xe.head:Ae.center,Z.y=Q?Ae.center:se?ne:xe.head,Z.height=Q?Ae.size:void 0,Z.width=Q?void 0:Ae.size},getValueScaleId:function(){return this.getMeta().yAxisID},getIndexScaleId:function(){return this.getMeta().xAxisID},getValueScale:function(){return this.getScaleForId(this.getValueScaleId())},getIndexScale:function(){return this.getScaleForId(this.getIndexScaleId())},getStackCount:function(F){var U,se,Z=this.chart,oe=this.getIndexScale().options.stacked,ne=void 0===F?Z.data.datasets.length:F+1,Q=[];for(U=0;U<ne;++U)(se=Z.getDatasetMeta(U)).bar&&Z.isDatasetVisible(U)&&(!1===oe||!0===oe&&-1===Q.indexOf(se.stack)||void 0===oe&&(void 0===se.stack||-1===Q.indexOf(se.stack)))&&Q.push(se.stack);return Q.length},getStackIndex:function(F){return this.getStackCount(F)-1},getRuler:function(){var F,U,$=this.getIndexScale(),Z=this.getStackCount(),oe=this.index,ne=[],Q=$.isHorizontal(),ie=Q?$.left:$.top,xe=ie+(Q?$.width:$.height);for(F=0,U=this.getMeta().data.length;F<U;++F)ne.push($.getPixelForValue(null,F,oe));return{pixels:ne,start:ie,end:xe,stackCount:Z,scale:$}},calculateBarValuePixels:function(F,U){var se,$,Z,oe,ne,Q,xe=this.chart,Ae=this.getMeta(),Ne=this.getValueScale(),Ee=xe.data.datasets,nt=Ne.getRightValue(Ee[F].data[U]),Wt=Ne.options.stacked,qe=Ae.stack,$e=0;if(Wt||void 0===Wt&&void 0!==qe)for(se=0;se<F;++se)($=xe.getDatasetMeta(se)).bar&&$.stack===qe&&$.controller.getValueScaleId()===Ne.id&&xe.isDatasetVisible(se)&&(Z=Ne.getRightValue(Ee[se].data[U]),(nt<0&&Z<0||nt>=0&&Z>0)&&($e+=Z));return oe=Ne.getPixelForValue($e),{size:Q=((ne=Ne.getPixelForValue($e+nt))-oe)/2,base:oe,head:ne,center:ne+Q/2}},calculateBarIndexPixels:function(F,U,se){var $,Z,oe,Q,ie,Ae=se.scale.options,Ne=this.getStackIndex(F),Ee=se.pixels,nt=Ee[U],Wt=Ee.length,qe=se.start,$e=se.end;return 1===Wt?($=nt>qe?nt-qe:$e-nt,Z=nt<$e?$e-nt:nt-qe):(U>0&&($=(nt-Ee[U-1])/2,U===Wt-1&&(Z=$)),U<Wt-1&&(Z=(Ee[U+1]-nt)/2,0===U&&($=Z))),ie=(Q=((oe=$*Ae.categoryPercentage)+Z*Ae.categoryPercentage)/se.stackCount)*Ae.barPercentage,nt-=oe,nt+=Q*Ne,{size:ie=Math.min(j.valueOrDefault(Ae.barThickness,ie),j.valueOrDefault(Ae.maxBarThickness,1/0)),base:nt+=(Q-ie)/2,head:nt+ie,center:nt+ie/2}},draw:function(){var F=this,U=F.chart,se=F.getValueScale(),$=F.getMeta().data,Z=F.getDataset(),oe=$.length,ne=0;for(j.canvas.clipArea(U.ctx,U.chartArea);ne<oe;++ne)isNaN(se.getRightValue(Z.data[ne]))||$[ne].draw();j.canvas.unclipArea(U.ctx)},setHoverStyle:function(F){var U=this.chart.data.datasets[F._datasetIndex],se=F._index,$=F.custom||{},Z=F._model;Z.backgroundColor=$.hoverBackgroundColor?$.hoverBackgroundColor:j.valueAtIndexOrDefault(U.hoverBackgroundColor,se,j.getHoverColor(Z.backgroundColor)),Z.borderColor=$.hoverBorderColor?$.hoverBorderColor:j.valueAtIndexOrDefault(U.hoverBorderColor,se,j.getHoverColor(Z.borderColor)),Z.borderWidth=$.hoverBorderWidth?$.hoverBorderWidth:j.valueAtIndexOrDefault(U.hoverBorderWidth,se,Z.borderWidth)},removeHoverStyle:function(F){var U=this.chart.data.datasets[F._datasetIndex],se=F._index,$=F.custom||{},Z=F._model,oe=this.chart.options.elements.rectangle;Z.backgroundColor=$.backgroundColor?$.backgroundColor:j.valueAtIndexOrDefault(U.backgroundColor,se,oe.backgroundColor),Z.borderColor=$.borderColor?$.borderColor:j.valueAtIndexOrDefault(U.borderColor,se,oe.borderColor),Z.borderWidth=$.borderWidth?$.borderWidth:j.valueAtIndexOrDefault(U.borderWidth,se,oe.borderWidth)}}),ye.controllers.horizontalBar=ye.controllers.bar.extend({getValueScaleId:function(){return this.getMeta().xAxisID},getIndexScaleId:function(){return this.getMeta().yAxisID}})}},{25:25,40:40,45:45}],16:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(40),j=pt(45);Ze._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(ye,F){return(F.datasets[ye.datasetIndex].label||"")+": ("+ye.xLabel+", "+ye.yLabel+", "+F.datasets[ye.datasetIndex].data[ye.index].r+")"}}}}),hn.exports=function(ye){ye.controllers.bubble=ye.DatasetController.extend({dataElementType:je.Point,update:function(F){var U=this,se=U.getMeta().data;j.each(se,function($,Z){U.updateElement($,Z,F)})},updateElement:function(F,U,se){var $=this,Z=$.getMeta(),oe=F.custom||{},ne=$.getScaleForId(Z.xAxisID),Q=$.getScaleForId(Z.yAxisID),ie=$._resolveElementOptions(F,U),xe=$.getDataset().data[U],Ae=$.index,Ne=se?ne.getPixelForDecimal(.5):ne.getPixelForValue("object"==typeof xe?xe:NaN,U,Ae),Ee=se?Q.getBasePixel():Q.getPixelForValue(xe,U,Ae);F._xScale=ne,F._yScale=Q,F._options=ie,F._datasetIndex=Ae,F._index=U,F._model={backgroundColor:ie.backgroundColor,borderColor:ie.borderColor,borderWidth:ie.borderWidth,hitRadius:ie.hitRadius,pointStyle:ie.pointStyle,radius:se?0:ie.radius,skip:oe.skip||isNaN(Ne)||isNaN(Ee),x:Ne,y:Ee},F.pivot()},setHoverStyle:function(F){var U=F._model,se=F._options;U.backgroundColor=j.valueOrDefault(se.hoverBackgroundColor,j.getHoverColor(se.backgroundColor)),U.borderColor=j.valueOrDefault(se.hoverBorderColor,j.getHoverColor(se.borderColor)),U.borderWidth=j.valueOrDefault(se.hoverBorderWidth,se.borderWidth),U.radius=se.radius+se.hoverRadius},removeHoverStyle:function(F){var U=F._model,se=F._options;U.backgroundColor=se.backgroundColor,U.borderColor=se.borderColor,U.borderWidth=se.borderWidth,U.radius=se.radius},_resolveElementOptions:function(F,U){var se,$,Z,ne=this.chart,Q=ne.data.datasets[this.index],ie=F.custom||{},xe=ne.options.elements.point,Ae=j.options.resolve,Ne=Q.data[U],Ee={},nt={chart:ne,dataIndex:U,dataset:Q,datasetIndex:this.index},Wt=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle"];for(se=0,$=Wt.length;se<$;++se)Ee[Z=Wt[se]]=Ae([ie[Z],Q[Z],xe[Z]],nt,U);return Ee.radius=Ae([ie.radius,Ne?Ne.r:void 0,Q.radius,xe.radius],nt,U),Ee}})}},{25:25,40:40,45:45}],17:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(40),j=pt(45);Ze._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(ye){var F=[];F.push('<ul class="'+ye.id+'-legend">');var U=ye.data,se=U.datasets,$=U.labels;if(se.length)for(var Z=0;Z<se[0].data.length;++Z)F.push('<li><span style="background-color:'+se[0].backgroundColor[Z]+'"></span>'),$[Z]&&F.push($[Z]),F.push("</li>");return F.push("</ul>"),F.join("")},legend:{labels:{generateLabels:function(ye){var F=ye.data;return F.labels.length&&F.datasets.length?F.labels.map(function(U,se){var $=ye.getDatasetMeta(0),Z=F.datasets[0],oe=$.data[se],ne=oe&&oe.custom||{},Q=j.valueAtIndexOrDefault,ie=ye.options.elements.arc;return{text:U,fillStyle:ne.backgroundColor?ne.backgroundColor:Q(Z.backgroundColor,se,ie.backgroundColor),strokeStyle:ne.borderColor?ne.borderColor:Q(Z.borderColor,se,ie.borderColor),lineWidth:ne.borderWidth?ne.borderWidth:Q(Z.borderWidth,se,ie.borderWidth),hidden:isNaN(Z.data[se])||$.data[se].hidden,index:se}}):[]}},onClick:function(ye,F){var U,se,$,Z=F.index,oe=this.chart;for(U=0,se=(oe.data.datasets||[]).length;U<se;++U)($=oe.getDatasetMeta(U)).data[Z]&&($.data[Z].hidden=!$.data[Z].hidden);oe.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(ye,F){var U=F.labels[ye.index],se=": "+F.datasets[ye.datasetIndex].data[ye.index];return j.isArray(U)?(U=U.slice())[0]+=se:U+=se,U}}}}),Ze._set("pie",j.clone(Ze.doughnut)),Ze._set("pie",{cutoutPercentage:0}),hn.exports=function(ye){ye.controllers.doughnut=ye.controllers.pie=ye.DatasetController.extend({dataElementType:je.Arc,linkScales:j.noop,getRingIndex:function(F){for(var U=0,se=0;se<F;++se)this.chart.isDatasetVisible(se)&&++U;return U},update:function(F){var U=this,se=U.chart,$=se.chartArea,Z=se.options,oe=Z.elements.arc,ne=$.right-$.left-oe.borderWidth,Q=$.bottom-$.top-oe.borderWidth,ie=Math.min(ne,Q),xe={x:0,y:0},Ae=U.getMeta(),Ne=Z.cutoutPercentage,Ee=Z.circumference;if(Ee<2*Math.PI){var nt=Z.rotation%(2*Math.PI),Wt=(nt+=2*Math.PI*(nt>=Math.PI?-1:nt<-Math.PI?1:0))+Ee,qe={x:Math.cos(nt),y:Math.sin(nt)},$e={x:Math.cos(Wt),y:Math.sin(Wt)},Ie=nt<=0&&Wt>=0||nt<=2*Math.PI&&2*Math.PI<=Wt,de=nt<=.5*Math.PI&&.5*Math.PI<=Wt||nt<=2.5*Math.PI&&2.5*Math.PI<=Wt,Fe=nt<=-Math.PI&&-Math.PI<=Wt||nt<=Math.PI&&Math.PI<=Wt,le=nt<=.5*-Math.PI&&.5*-Math.PI<=Wt||nt<=1.5*Math.PI&&1.5*Math.PI<=Wt,Ge=Ne/100,Qe={x:Fe?-1:Math.min(qe.x*(qe.x<0?1:Ge),$e.x*($e.x<0?1:Ge)),y:le?-1:Math.min(qe.y*(qe.y<0?1:Ge),$e.y*($e.y<0?1:Ge))},ht={x:Ie?1:Math.max(qe.x*(qe.x>0?1:Ge),$e.x*($e.x>0?1:Ge)),y:de?1:Math.max(qe.y*(qe.y>0?1:Ge),$e.y*($e.y>0?1:Ge))},Jt={width:.5*(ht.x-Qe.x),height:.5*(ht.y-Qe.y)};ie=Math.min(ne/Jt.width,Q/Jt.height),xe={x:-.5*(ht.x+Qe.x),y:-.5*(ht.y+Qe.y)}}se.borderWidth=U.getMaxBorderWidth(Ae.data),se.outerRadius=Math.max((ie-se.borderWidth)/2,0),se.innerRadius=Math.max(Ne?se.outerRadius/100*Ne:0,0),se.radiusLength=(se.outerRadius-se.innerRadius)/se.getVisibleDatasetCount(),se.offsetX=xe.x*se.outerRadius,se.offsetY=xe.y*se.outerRadius,Ae.total=U.calculateTotal(),U.outerRadius=se.outerRadius-se.radiusLength*U.getRingIndex(U.index),U.innerRadius=Math.max(U.outerRadius-se.radiusLength,0),j.each(Ae.data,function(Rt,pn){U.updateElement(Rt,pn,F)})},updateElement:function(F,U,se){var $=this,Z=$.chart,oe=Z.chartArea,ne=Z.options,Q=ne.animation,ie=(oe.left+oe.right)/2,xe=(oe.top+oe.bottom)/2,Ae=ne.rotation,Ne=ne.rotation,Ee=$.getDataset(),nt=se&&Q.animateRotate||F.hidden?0:$.calculateCircumference(Ee.data[U])*(ne.circumference/(2*Math.PI));j.extend(F,{_datasetIndex:$.index,_index:U,_model:{x:ie+Z.offsetX,y:xe+Z.offsetY,startAngle:Ae,endAngle:Ne,circumference:nt,outerRadius:se&&Q.animateScale?0:$.outerRadius,innerRadius:se&&Q.animateScale?0:$.innerRadius,label:(0,j.valueAtIndexOrDefault)(Ee.label,U,Z.data.labels[U])}});var Ie=F._model;this.removeHoverStyle(F),se&&Q.animateRotate||(Ie.startAngle=0===U?ne.rotation:$.getMeta().data[U-1]._model.endAngle,Ie.endAngle=Ie.startAngle+Ie.circumference),F.pivot()},removeHoverStyle:function(F){ye.DatasetController.prototype.removeHoverStyle.call(this,F,this.chart.options.elements.arc)},calculateTotal:function(){var F,U=this.getDataset(),se=this.getMeta(),$=0;return j.each(se.data,function(Z,oe){F=U.data[oe],isNaN(F)||Z.hidden||($+=Math.abs(F))}),$},calculateCircumference:function(F){var U=this.getMeta().total;return U>0&&!isNaN(F)?2*Math.PI*(F/U):0},getMaxBorderWidth:function(F){for(var U,se,$=0,Z=this.index,oe=F.length,ne=0;ne<oe;ne++)$=(se=F[ne]._chart?F[ne]._chart.config.data.datasets[Z].hoverBorderWidth:0)>($=(U=F[ne]._model?F[ne]._model.borderWidth:0)>$?U:$)?se:$;return $}})}},{25:25,40:40,45:45}],18:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(40),j=pt(45);Ze._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}}),hn.exports=function(ye){function F(U,se){return j.valueOrDefault(U.showLine,se.showLines)}ye.controllers.line=ye.DatasetController.extend({datasetElementType:je.Line,dataElementType:je.Point,update:function(U){var se,$,Z,oe=this,ne=oe.getMeta(),Q=ne.dataset,ie=ne.data||[],xe=oe.chart.options,Ae=xe.elements.line,Ne=oe.getScaleForId(ne.yAxisID),Ee=oe.getDataset(),nt=F(Ee,xe);for(nt&&(Z=Q.custom||{},void 0!==Ee.tension&&void 0===Ee.lineTension&&(Ee.lineTension=Ee.tension),Q._scale=Ne,Q._datasetIndex=oe.index,Q._children=ie,Q._model={spanGaps:Ee.spanGaps?Ee.spanGaps:xe.spanGaps,tension:Z.tension?Z.tension:j.valueOrDefault(Ee.lineTension,Ae.tension),backgroundColor:Z.backgroundColor?Z.backgroundColor:Ee.backgroundColor||Ae.backgroundColor,borderWidth:Z.borderWidth?Z.borderWidth:Ee.borderWidth||Ae.borderWidth,borderColor:Z.borderColor?Z.borderColor:Ee.borderColor||Ae.borderColor,borderCapStyle:Z.borderCapStyle?Z.borderCapStyle:Ee.borderCapStyle||Ae.borderCapStyle,borderDash:Z.borderDash?Z.borderDash:Ee.borderDash||Ae.borderDash,borderDashOffset:Z.borderDashOffset?Z.borderDashOffset:Ee.borderDashOffset||Ae.borderDashOffset,borderJoinStyle:Z.borderJoinStyle?Z.borderJoinStyle:Ee.borderJoinStyle||Ae.borderJoinStyle,fill:Z.fill?Z.fill:void 0!==Ee.fill?Ee.fill:Ae.fill,steppedLine:Z.steppedLine?Z.steppedLine:j.valueOrDefault(Ee.steppedLine,Ae.stepped),cubicInterpolationMode:Z.cubicInterpolationMode?Z.cubicInterpolationMode:j.valueOrDefault(Ee.cubicInterpolationMode,Ae.cubicInterpolationMode)},Q.pivot()),se=0,$=ie.length;se<$;++se)oe.updateElement(ie[se],se,U);for(nt&&0!==Q._model.tension&&oe.updateBezierControlPoints(),se=0,$=ie.length;se<$;++se)ie[se].pivot()},getPointBackgroundColor:function(U,se){var $=this.chart.options.elements.point.backgroundColor,Z=this.getDataset(),oe=U.custom||{};return oe.backgroundColor?$=oe.backgroundColor:Z.pointBackgroundColor?$=j.valueAtIndexOrDefault(Z.pointBackgroundColor,se,$):Z.backgroundColor&&($=Z.backgroundColor),$},getPointBorderColor:function(U,se){var $=this.chart.options.elements.point.borderColor,Z=this.getDataset(),oe=U.custom||{};return oe.borderColor?$=oe.borderColor:Z.pointBorderColor?$=j.valueAtIndexOrDefault(Z.pointBorderColor,se,$):Z.borderColor&&($=Z.borderColor),$},getPointBorderWidth:function(U,se){var $=this.chart.options.elements.point.borderWidth,Z=this.getDataset(),oe=U.custom||{};return isNaN(oe.borderWidth)?!isNaN(Z.pointBorderWidth)||j.isArray(Z.pointBorderWidth)?$=j.valueAtIndexOrDefault(Z.pointBorderWidth,se,$):isNaN(Z.borderWidth)||($=Z.borderWidth):$=oe.borderWidth,$},updateElement:function(U,se,$){var Z,oe,ne=this,Q=ne.getMeta(),ie=U.custom||{},xe=ne.getDataset(),Ae=ne.index,Ne=xe.data[se],Ee=ne.getScaleForId(Q.yAxisID),nt=ne.getScaleForId(Q.xAxisID),Wt=ne.chart.options.elements.point;void 0!==xe.radius&&void 0===xe.pointRadius&&(xe.pointRadius=xe.radius),void 0!==xe.hitRadius&&void 0===xe.pointHitRadius&&(xe.pointHitRadius=xe.hitRadius),Z=nt.getPixelForValue("object"==typeof Ne?Ne:NaN,se,Ae),oe=$?Ee.getBasePixel():ne.calculatePointY(Ne,se,Ae),U._xScale=nt,U._yScale=Ee,U._datasetIndex=Ae,U._index=se,U._model={x:Z,y:oe,skip:ie.skip||isNaN(Z)||isNaN(oe),radius:ie.radius||j.valueAtIndexOrDefault(xe.pointRadius,se,Wt.radius),pointStyle:ie.pointStyle||j.valueAtIndexOrDefault(xe.pointStyle,se,Wt.pointStyle),backgroundColor:ne.getPointBackgroundColor(U,se),borderColor:ne.getPointBorderColor(U,se),borderWidth:ne.getPointBorderWidth(U,se),tension:Q.dataset._model?Q.dataset._model.tension:0,steppedLine:!!Q.dataset._model&&Q.dataset._model.steppedLine,hitRadius:ie.hitRadius||j.valueAtIndexOrDefault(xe.pointHitRadius,se,Wt.hitRadius)}},calculatePointY:function(U,se,$){var Z,oe,ne,Q=this,ie=Q.chart,xe=Q.getMeta(),Ae=Q.getScaleForId(xe.yAxisID),Ne=0,Ee=0;if(Ae.options.stacked){for(Z=0;Z<$;Z++)if(oe=ie.data.datasets[Z],"line"===(ne=ie.getDatasetMeta(Z)).type&&ne.yAxisID===Ae.id&&ie.isDatasetVisible(Z)){var nt=Number(Ae.getRightValue(oe.data[se]));nt<0?Ee+=nt||0:Ne+=nt||0}var Wt=Number(Ae.getRightValue(U));return Ae.getPixelForValue(Wt<0?Ee+Wt:Ne+Wt)}return Ae.getPixelForValue(U)},updateBezierControlPoints:function(){function U(Ae,Ne,Ee){return Math.max(Math.min(Ae,Ee),Ne)}var se,$,Z,oe,Q=this.getMeta(),ie=this.chart.chartArea,xe=Q.data||[];if(Q.dataset._model.spanGaps&&(xe=xe.filter(function(Ae){return!Ae._model.skip})),"monotone"===Q.dataset._model.cubicInterpolationMode)j.splineCurveMonotone(xe);else for(se=0,$=xe.length;se<$;++se)Z=xe[se]._model,oe=j.splineCurve(j.previousItem(xe,se)._model,Z,j.nextItem(xe,se)._model,Q.dataset._model.tension),Z.controlPointPreviousX=oe.previous.x,Z.controlPointPreviousY=oe.previous.y,Z.controlPointNextX=oe.next.x,Z.controlPointNextY=oe.next.y;if(this.chart.options.elements.line.capBezierPoints)for(se=0,$=xe.length;se<$;++se)(Z=xe[se]._model).controlPointPreviousX=U(Z.controlPointPreviousX,ie.left,ie.right),Z.controlPointPreviousY=U(Z.controlPointPreviousY,ie.top,ie.bottom),Z.controlPointNextX=U(Z.controlPointNextX,ie.left,ie.right),Z.controlPointNextY=U(Z.controlPointNextY,ie.top,ie.bottom)},draw:function(){var U=this,se=U.chart,$=U.getMeta(),Z=$.data||[],oe=se.chartArea,ne=Z.length,Q=0;for(j.canvas.clipArea(se.ctx,oe),F(U.getDataset(),se.options)&&$.dataset.draw(),j.canvas.unclipArea(se.ctx);Q<ne;++Q)Z[Q].draw(oe)},setHoverStyle:function(U){var se=this.chart.data.datasets[U._datasetIndex],$=U._index,Z=U.custom||{},oe=U._model;oe.radius=Z.hoverRadius||j.valueAtIndexOrDefault(se.pointHoverRadius,$,this.chart.options.elements.point.hoverRadius),oe.backgroundColor=Z.hoverBackgroundColor||j.valueAtIndexOrDefault(se.pointHoverBackgroundColor,$,j.getHoverColor(oe.backgroundColor)),oe.borderColor=Z.hoverBorderColor||j.valueAtIndexOrDefault(se.pointHoverBorderColor,$,j.getHoverColor(oe.borderColor)),oe.borderWidth=Z.hoverBorderWidth||j.valueAtIndexOrDefault(se.pointHoverBorderWidth,$,oe.borderWidth)},removeHoverStyle:function(U){var se=this,$=se.chart.data.datasets[U._datasetIndex],Z=U._index,oe=U.custom||{},ne=U._model;void 0!==$.radius&&void 0===$.pointRadius&&($.pointRadius=$.radius),ne.radius=oe.radius||j.valueAtIndexOrDefault($.pointRadius,Z,se.chart.options.elements.point.radius),ne.backgroundColor=se.getPointBackgroundColor(U,Z),ne.borderColor=se.getPointBorderColor(U,Z),ne.borderWidth=se.getPointBorderWidth(U,Z)}})}},{25:25,40:40,45:45}],19:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(40),j=pt(45);Ze._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(ye){var F=[];F.push('<ul class="'+ye.id+'-legend">');var U=ye.data,se=U.datasets,$=U.labels;if(se.length)for(var Z=0;Z<se[0].data.length;++Z)F.push('<li><span style="background-color:'+se[0].backgroundColor[Z]+'"></span>'),$[Z]&&F.push($[Z]),F.push("</li>");return F.push("</ul>"),F.join("")},legend:{labels:{generateLabels:function(ye){var F=ye.data;return F.labels.length&&F.datasets.length?F.labels.map(function(U,se){var $=ye.getDatasetMeta(0),Z=F.datasets[0],oe=$.data[se].custom||{},ne=j.valueAtIndexOrDefault,Q=ye.options.elements.arc;return{text:U,fillStyle:oe.backgroundColor?oe.backgroundColor:ne(Z.backgroundColor,se,Q.backgroundColor),strokeStyle:oe.borderColor?oe.borderColor:ne(Z.borderColor,se,Q.borderColor),lineWidth:oe.borderWidth?oe.borderWidth:ne(Z.borderWidth,se,Q.borderWidth),hidden:isNaN(Z.data[se])||$.data[se].hidden,index:se}}):[]}},onClick:function(ye,F){var U,se,$,Z=F.index,oe=this.chart;for(U=0,se=(oe.data.datasets||[]).length;U<se;++U)($=oe.getDatasetMeta(U)).data[Z].hidden=!$.data[Z].hidden;oe.update()}},tooltips:{callbacks:{title:function(){return""},label:function(ye,F){return F.labels[ye.index]+": "+ye.yLabel}}}}),hn.exports=function(ye){ye.controllers.polarArea=ye.DatasetController.extend({dataElementType:je.Arc,linkScales:j.noop,update:function(F){var U=this,se=U.chart,$=se.chartArea,Z=U.getMeta(),oe=se.options,ne=oe.elements.arc,Q=Math.min($.right-$.left,$.bottom-$.top);se.outerRadius=Math.max((Q-ne.borderWidth/2)/2,0),se.innerRadius=Math.max(oe.cutoutPercentage?se.outerRadius/100*oe.cutoutPercentage:1,0),se.radiusLength=(se.outerRadius-se.innerRadius)/se.getVisibleDatasetCount(),U.outerRadius=se.outerRadius-se.radiusLength*U.index,U.innerRadius=U.outerRadius-se.radiusLength,Z.count=U.countVisibleElements(),j.each(Z.data,function(ie,xe){U.updateElement(ie,xe,F)})},updateElement:function(F,U,se){for(var $=this,Z=$.chart,oe=$.getDataset(),ne=Z.options,Q=ne.animation,ie=Z.scale,xe=Z.data.labels,Ae=$.calculateCircumference(oe.data[U]),Ne=ie.xCenter,Ee=ie.yCenter,nt=0,Wt=$.getMeta(),qe=0;qe<U;++qe)isNaN(oe.data[qe])||Wt.data[qe].hidden||++nt;var $e=ne.startAngle,Ie=F.hidden?0:ie.getDistanceFromCenterForValue(oe.data[U]),de=$e+Ae*nt,Fe=de+(F.hidden?0:Ae),le=Q.animateScale?0:ie.getDistanceFromCenterForValue(oe.data[U]);j.extend(F,{_datasetIndex:$.index,_index:U,_scale:ie,_model:{x:Ne,y:Ee,innerRadius:0,outerRadius:se?le:Ie,startAngle:se&&Q.animateRotate?$e:de,endAngle:se&&Q.animateRotate?$e:Fe,label:j.valueAtIndexOrDefault(xe,U,xe[U])}}),$.removeHoverStyle(F),F.pivot()},removeHoverStyle:function(F){ye.DatasetController.prototype.removeHoverStyle.call(this,F,this.chart.options.elements.arc)},countVisibleElements:function(){var F=this.getDataset(),U=this.getMeta(),se=0;return j.each(U.data,function($,Z){isNaN(F.data[Z])||$.hidden||se++}),se},calculateCircumference:function(F){var U=this.getMeta().count;return U>0&&!isNaN(F)?2*Math.PI/U:0}})}},{25:25,40:40,45:45}],20:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(40),j=pt(45);Ze._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}}),hn.exports=function(ye){ye.controllers.radar=ye.DatasetController.extend({datasetElementType:je.Line,dataElementType:je.Point,linkScales:j.noop,update:function(F){var U=this,se=U.getMeta(),Z=se.data,oe=se.dataset.custom||{},ne=U.getDataset(),Q=U.chart.options.elements.line,ie=U.chart.scale;void 0!==ne.tension&&void 0===ne.lineTension&&(ne.lineTension=ne.tension),j.extend(se.dataset,{_datasetIndex:U.index,_scale:ie,_children:Z,_loop:!0,_model:{tension:oe.tension?oe.tension:j.valueOrDefault(ne.lineTension,Q.tension),backgroundColor:oe.backgroundColor?oe.backgroundColor:ne.backgroundColor||Q.backgroundColor,borderWidth:oe.borderWidth?oe.borderWidth:ne.borderWidth||Q.borderWidth,borderColor:oe.borderColor?oe.borderColor:ne.borderColor||Q.borderColor,fill:oe.fill?oe.fill:void 0!==ne.fill?ne.fill:Q.fill,borderCapStyle:oe.borderCapStyle?oe.borderCapStyle:ne.borderCapStyle||Q.borderCapStyle,borderDash:oe.borderDash?oe.borderDash:ne.borderDash||Q.borderDash,borderDashOffset:oe.borderDashOffset?oe.borderDashOffset:ne.borderDashOffset||Q.borderDashOffset,borderJoinStyle:oe.borderJoinStyle?oe.borderJoinStyle:ne.borderJoinStyle||Q.borderJoinStyle}}),se.dataset.pivot(),j.each(Z,function(xe,Ae){U.updateElement(xe,Ae,F)},U),U.updateBezierControlPoints()},updateElement:function(F,U,se){var $=this,Z=F.custom||{},oe=$.getDataset(),ne=$.chart.scale,Q=$.chart.options.elements.point,ie=ne.getPointPositionForValue(U,oe.data[U]);void 0!==oe.radius&&void 0===oe.pointRadius&&(oe.pointRadius=oe.radius),void 0!==oe.hitRadius&&void 0===oe.pointHitRadius&&(oe.pointHitRadius=oe.hitRadius),j.extend(F,{_datasetIndex:$.index,_index:U,_scale:ne,_model:{x:se?ne.xCenter:ie.x,y:se?ne.yCenter:ie.y,tension:Z.tension?Z.tension:j.valueOrDefault(oe.lineTension,$.chart.options.elements.line.tension),radius:Z.radius?Z.radius:j.valueAtIndexOrDefault(oe.pointRadius,U,Q.radius),backgroundColor:Z.backgroundColor?Z.backgroundColor:j.valueAtIndexOrDefault(oe.pointBackgroundColor,U,Q.backgroundColor),borderColor:Z.borderColor?Z.borderColor:j.valueAtIndexOrDefault(oe.pointBorderColor,U,Q.borderColor),borderWidth:Z.borderWidth?Z.borderWidth:j.valueAtIndexOrDefault(oe.pointBorderWidth,U,Q.borderWidth),pointStyle:Z.pointStyle?Z.pointStyle:j.valueAtIndexOrDefault(oe.pointStyle,U,Q.pointStyle),hitRadius:Z.hitRadius?Z.hitRadius:j.valueAtIndexOrDefault(oe.pointHitRadius,U,Q.hitRadius)}}),F._model.skip=Z.skip?Z.skip:isNaN(F._model.x)||isNaN(F._model.y)},updateBezierControlPoints:function(){var F=this.chart.chartArea,U=this.getMeta();j.each(U.data,function(se,$){var Z=se._model,oe=j.splineCurve(j.previousItem(U.data,$,!0)._model,Z,j.nextItem(U.data,$,!0)._model,Z.tension);Z.controlPointPreviousX=Math.max(Math.min(oe.previous.x,F.right),F.left),Z.controlPointPreviousY=Math.max(Math.min(oe.previous.y,F.bottom),F.top),Z.controlPointNextX=Math.max(Math.min(oe.next.x,F.right),F.left),Z.controlPointNextY=Math.max(Math.min(oe.next.y,F.bottom),F.top),se.pivot()})},setHoverStyle:function(F){var U=this.chart.data.datasets[F._datasetIndex],se=F.custom||{},$=F._index,Z=F._model;Z.radius=se.hoverRadius?se.hoverRadius:j.valueAtIndexOrDefault(U.pointHoverRadius,$,this.chart.options.elements.point.hoverRadius),Z.backgroundColor=se.hoverBackgroundColor?se.hoverBackgroundColor:j.valueAtIndexOrDefault(U.pointHoverBackgroundColor,$,j.getHoverColor(Z.backgroundColor)),Z.borderColor=se.hoverBorderColor?se.hoverBorderColor:j.valueAtIndexOrDefault(U.pointHoverBorderColor,$,j.getHoverColor(Z.borderColor)),Z.borderWidth=se.hoverBorderWidth?se.hoverBorderWidth:j.valueAtIndexOrDefault(U.pointHoverBorderWidth,$,Z.borderWidth)},removeHoverStyle:function(F){var U=this.chart.data.datasets[F._datasetIndex],se=F.custom||{},$=F._index,Z=F._model,oe=this.chart.options.elements.point;Z.radius=se.radius?se.radius:j.valueAtIndexOrDefault(U.pointRadius,$,oe.radius),Z.backgroundColor=se.backgroundColor?se.backgroundColor:j.valueAtIndexOrDefault(U.pointBackgroundColor,$,oe.backgroundColor),Z.borderColor=se.borderColor?se.borderColor:j.valueAtIndexOrDefault(U.pointBorderColor,$,oe.borderColor),Z.borderWidth=se.borderWidth?se.borderWidth:j.valueAtIndexOrDefault(U.pointBorderWidth,$,oe.borderWidth)}})}},{25:25,40:40,45:45}],21:[function(pt,hn,gr){"use strict";pt(25)._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(Ze){return"("+Ze.xLabel+", "+Ze.yLabel+")"}}}}),hn.exports=function(Ze){Ze.controllers.scatter=Ze.controllers.line}},{25:25}],22:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(26),j=pt(45);Ze._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:j.noop,onComplete:j.noop}}),hn.exports=function(ye){ye.Animation=je.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),ye.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(F,U,se,$){var Z,oe,ne=this.animations;for(U.chart=F,$||(F.animating=!0),Z=0,oe=ne.length;Z<oe;++Z)if(ne[Z].chart===F)return void(ne[Z]=U);ne.push(U),1===ne.length&&this.requestAnimationFrame()},cancelAnimation:function(F){var U=j.findIndex(this.animations,function(se){return se.chart===F});-1!==U&&(this.animations.splice(U,1),F.animating=!1)},requestAnimationFrame:function(){var F=this;null===F.request&&(F.request=j.requestAnimFrame.call(window,function(){F.request=null,F.startDigest()}))},startDigest:function(){var F=this,U=Date.now(),se=0;F.dropFrames>1&&(se=Math.floor(F.dropFrames),F.dropFrames=F.dropFrames%1),F.advance(1+se);var $=Date.now();F.dropFrames+=($-U)/F.frameDuration,F.animations.length>0&&F.requestAnimationFrame()},advance:function(F){for(var U,se,$=this.animations,Z=0;Z<$.length;)se=(U=$[Z]).chart,U.currentStep=(U.currentStep||0)+F,U.currentStep=Math.min(U.currentStep,U.numSteps),j.callback(U.render,[se,U],se),j.callback(U.onAnimationProgress,[U],se),U.currentStep>=U.numSteps?(j.callback(U.onAnimationComplete,[U],se),se.animating=!1,$.splice(Z,1)):++Z}},Object.defineProperty(ye.Animation.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(ye.Animation.prototype,"chartInstance",{get:function(){return this.chart},set:function(F){this.chart=F}})}},{25:25,26:26,45:45}],23:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(45),j=pt(28),ye=pt(48);hn.exports=function(F){function se(oe){var ne=oe.options;ne.scale?oe.scale.options=ne.scale:ne.scales&&ne.scales.xAxes.concat(ne.scales.yAxes).forEach(function(Q){oe.scales[Q.id].options=Q}),oe.tooltip._options=ne.tooltips}function $(oe){return"top"===oe||"bottom"===oe}var Z=F.plugins;F.types={},F.instances={},F.controllers={},je.extend(F.prototype,{construct:function(oe,ne){var Q=this;ne=function U(oe){var ne=(oe=oe||{}).data=oe.data||{};return ne.datasets=ne.datasets||[],ne.labels=ne.labels||[],oe.options=je.configMerge(Ze.global,Ze[oe.type],oe.options||{}),oe}(ne);var ie=ye.acquireContext(oe,ne),xe=ie&&ie.canvas,Ae=xe&&xe.height,Ne=xe&&xe.width;Q.id=je.uid(),Q.ctx=ie,Q.canvas=xe,Q.config=ne,Q.width=Ne,Q.height=Ae,Q.aspectRatio=Ae?Ne/Ae:null,Q.options=ne.options,Q._bufferedRender=!1,Q.chart=Q,Q.controller=Q,F.instances[Q.id]=Q,Object.defineProperty(Q,"data",{get:function(){return Q.config.data},set:function(Ee){Q.config.data=Ee}}),ie&&xe?(Q.initialize(),Q.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var oe=this;return Z.notify(oe,"beforeInit"),je.retinaScale(oe,oe.options.devicePixelRatio),oe.bindEvents(),oe.options.responsive&&oe.resize(!0),oe.ensureScalesHaveIDs(),oe.buildScales(),oe.initToolTip(),Z.notify(oe,"afterInit"),oe},clear:function(){return je.canvas.clear(this),this},stop:function(){return F.animationService.cancelAnimation(this),this},resize:function(oe){var ne=this,Q=ne.options,ie=ne.canvas,xe=Q.maintainAspectRatio&&ne.aspectRatio||null,Ae=Math.max(0,Math.floor(je.getMaximumWidth(ie))),Ne=Math.max(0,Math.floor(xe?Ae/xe:je.getMaximumHeight(ie)));if((ne.width!==Ae||ne.height!==Ne)&&(ie.width=ne.width=Ae,ie.height=ne.height=Ne,ie.style.width=Ae+"px",ie.style.height=Ne+"px",je.retinaScale(ne,Q.devicePixelRatio),!oe)){var Ee={width:Ae,height:Ne};Z.notify(ne,"resize",[Ee]),ne.options.onResize&&ne.options.onResize(ne,Ee),ne.stop(),ne.update(ne.options.responsiveAnimationDuration)}},ensureScalesHaveIDs:function(){var oe=this.options,ne=oe.scales||{},Q=oe.scale;je.each(ne.xAxes,function(ie,xe){ie.id=ie.id||"x-axis-"+xe}),je.each(ne.yAxes,function(ie,xe){ie.id=ie.id||"y-axis-"+xe}),Q&&(Q.id=Q.id||"scale")},buildScales:function(){var oe=this,ne=oe.options,Q=oe.scales={},ie=[];ne.scales&&(ie=ie.concat((ne.scales.xAxes||[]).map(function(xe){return{options:xe,dtype:"category",dposition:"bottom"}}),(ne.scales.yAxes||[]).map(function(xe){return{options:xe,dtype:"linear",dposition:"left"}}))),ne.scale&&ie.push({options:ne.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),je.each(ie,function(xe){var Ae=xe.options,Ne=je.valueOrDefault(Ae.type,xe.dtype),Ee=F.scaleService.getScaleConstructor(Ne);if(Ee){$(Ae.position)!==$(xe.dposition)&&(Ae.position=xe.dposition);var nt=new Ee({id:Ae.id,options:Ae,ctx:oe.ctx,chart:oe});Q[nt.id]=nt,nt.mergeTicksOptions(),xe.isDefault&&(oe.scale=nt)}}),F.scaleService.addScalesToLayout(this)},buildOrUpdateControllers:function(){var oe=this,ne=[],Q=[];return je.each(oe.data.datasets,function(ie,xe){var Ae=oe.getDatasetMeta(xe),Ne=ie.type||oe.config.type;if(Ae.type&&Ae.type!==Ne&&(oe.destroyDatasetMeta(xe),Ae=oe.getDatasetMeta(xe)),Ae.type=Ne,ne.push(Ae.type),Ae.controller)Ae.controller.updateIndex(xe);else{var Ee=F.controllers[Ae.type];if(void 0===Ee)throw new Error('"'+Ae.type+'" is not a chart type.');Ae.controller=new Ee(oe,xe),Q.push(Ae.controller)}},oe),Q},resetElements:function(){var oe=this;je.each(oe.data.datasets,function(ne,Q){oe.getDatasetMeta(Q).controller.reset()},oe)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(oe){var ne=this;if(oe&&"object"==typeof oe||(oe={duration:oe,lazy:arguments[1]}),se(ne),!1!==Z.notify(ne,"beforeUpdate")){ne.tooltip._data=ne.data;var Q=ne.buildOrUpdateControllers();je.each(ne.data.datasets,function(ie,xe){ne.getDatasetMeta(xe).controller.buildOrUpdateElements()},ne),ne.updateLayout(),je.each(Q,function(ie){ie.reset()}),ne.updateDatasets(),ne.tooltip.initialize(),ne.lastActive=[],Z.notify(ne,"afterUpdate"),ne._bufferedRender?ne._bufferedRequest={duration:oe.duration,easing:oe.easing,lazy:oe.lazy}:ne.render(oe)}},updateLayout:function(){!1!==Z.notify(this,"beforeLayout")&&(F.layoutService.update(this,this.width,this.height),Z.notify(this,"afterScaleUpdate"),Z.notify(this,"afterLayout"))},updateDatasets:function(){if(!1!==Z.notify(this,"beforeDatasetsUpdate")){for(var ne=0,Q=this.data.datasets.length;ne<Q;++ne)this.updateDataset(ne);Z.notify(this,"afterDatasetsUpdate")}},updateDataset:function(oe){var Q=this.getDatasetMeta(oe),ie={meta:Q,index:oe};!1!==Z.notify(this,"beforeDatasetUpdate",[ie])&&(Q.controller.update(),Z.notify(this,"afterDatasetUpdate",[ie]))},render:function(oe){var ne=this;oe&&"object"==typeof oe||(oe={duration:oe,lazy:arguments[1]});var Q=oe.duration,ie=oe.lazy;if(!1!==Z.notify(ne,"beforeRender")){var xe=ne.options.animation,Ae=function(Ee){Z.notify(ne,"afterRender"),je.callback(xe&&xe.onComplete,[Ee],ne)};if(xe&&(void 0!==Q&&0!==Q||void 0===Q&&0!==xe.duration)){var Ne=new F.Animation({numSteps:(Q||xe.duration)/16.66,easing:oe.easing||xe.easing,render:function(Ee,nt){var qe=nt.currentStep,$e=qe/nt.numSteps;Ee.draw((0,je.easing.effects[nt.easing])($e),$e,qe)},onAnimationProgress:xe.onProgress,onAnimationComplete:Ae});F.animationService.addAnimation(ne,Ne,Q,ie)}else ne.draw(),Ae(new F.Animation({numSteps:0,chart:ne}));return ne}},draw:function(oe){var ne=this;ne.clear(),je.isNullOrUndef(oe)&&(oe=1),ne.transition(oe),!1!==Z.notify(ne,"beforeDraw",[oe])&&(je.each(ne.boxes,function(Q){Q.draw(ne.chartArea)},ne),ne.scale&&ne.scale.draw(),ne.drawDatasets(oe),ne._drawTooltip(oe),Z.notify(ne,"afterDraw",[oe]))},transition:function(oe){for(var Q=0,ie=(this.data.datasets||[]).length;Q<ie;++Q)this.isDatasetVisible(Q)&&this.getDatasetMeta(Q).controller.transition(oe);this.tooltip.transition(oe)},drawDatasets:function(oe){var ne=this;if(!1!==Z.notify(ne,"beforeDatasetsDraw",[oe])){for(var Q=(ne.data.datasets||[]).length-1;Q>=0;--Q)ne.isDatasetVisible(Q)&&ne.drawDataset(Q,oe);Z.notify(ne,"afterDatasetsDraw",[oe])}},drawDataset:function(oe,ne){var Q=this,ie=Q.getDatasetMeta(oe),xe={meta:ie,index:oe,easingValue:ne};!1!==Z.notify(Q,"beforeDatasetDraw",[xe])&&(ie.controller.draw(ne),Z.notify(Q,"afterDatasetDraw",[xe]))},_drawTooltip:function(oe){var Q=this.tooltip,ie={tooltip:Q,easingValue:oe};!1!==Z.notify(this,"beforeTooltipDraw",[ie])&&(Q.draw(),Z.notify(this,"afterTooltipDraw",[ie]))},getElementAtEvent:function(oe){return j.modes.single(this,oe)},getElementsAtEvent:function(oe){return j.modes.label(this,oe,{intersect:!0})},getElementsAtXAxis:function(oe){return j.modes["x-axis"](this,oe,{intersect:!0})},getElementsAtEventForMode:function(oe,ne,Q){var ie=j.modes[ne];return"function"==typeof ie?ie(this,oe,Q):[]},getDatasetAtEvent:function(oe){return j.modes.dataset(this,oe,{intersect:!0})},getDatasetMeta:function(oe){var Q=this.data.datasets[oe];Q._meta||(Q._meta={});var ie=Q._meta[this.id];return ie||(ie=Q._meta[this.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),ie},getVisibleDatasetCount:function(){for(var oe=0,ne=0,Q=this.data.datasets.length;ne<Q;++ne)this.isDatasetVisible(ne)&&oe++;return oe},isDatasetVisible:function(oe){var ne=this.getDatasetMeta(oe);return"boolean"==typeof ne.hidden?!ne.hidden:!this.data.datasets[oe].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(oe){var ne=this.id,Q=this.data.datasets[oe],ie=Q._meta&&Q._meta[ne];ie&&(ie.controller.destroy(),delete Q._meta[ne])},destroy:function(){var oe,ne,Q=this,ie=Q.canvas;for(Q.stop(),oe=0,ne=Q.data.datasets.length;oe<ne;++oe)Q.destroyDatasetMeta(oe);ie&&(Q.unbindEvents(),je.canvas.clear(Q),ye.releaseContext(Q.ctx),Q.canvas=null,Q.ctx=null),Z.notify(Q,"destroy"),delete F.instances[Q.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var oe=this;oe.tooltip=new F.Tooltip({_chart:oe,_chartInstance:oe,_data:oe.data,_options:oe.options.tooltips},oe)},bindEvents:function(){var oe=this,ne=oe._listeners={},Q=function(){oe.eventHandler.apply(oe,arguments)};je.each(oe.options.events,function(ie){ye.addEventListener(oe,ie,Q),ne[ie]=Q}),oe.options.responsive&&(Q=function(){oe.resize()},ye.addEventListener(oe,"resize",Q),ne.resize=Q)},unbindEvents:function(){var oe=this,ne=oe._listeners;ne&&(delete oe._listeners,je.each(ne,function(Q,ie){ye.removeEventListener(oe,ie,Q)}))},updateHoverStyle:function(oe,ne,Q){var ie,xe,Ae,Ne=Q?"setHoverStyle":"removeHoverStyle";for(xe=0,Ae=oe.length;xe<Ae;++xe)(ie=oe[xe])&&this.getDatasetMeta(ie._datasetIndex).controller[Ne](ie)},eventHandler:function(oe){var ne=this,Q=ne.tooltip;if(!1!==Z.notify(ne,"beforeEvent",[oe])){ne._bufferedRender=!0,ne._bufferedRequest=null;var ie=ne.handleEvent(oe);ie|=Q&&Q.handleEvent(oe),Z.notify(ne,"afterEvent",[oe]);var xe=ne._bufferedRequest;return xe?ne.render(xe):ie&&!ne.animating&&(ne.stop(),ne.render(ne.options.hover.animationDuration,!0)),ne._bufferedRender=!1,ne._bufferedRequest=null,ne}},handleEvent:function(oe){var xe,ne=this,Q=ne.options||{},ie=Q.hover;return ne.lastActive=ne.lastActive||[],ne.active="mouseout"===oe.type?[]:ne.getElementsAtEventForMode(oe,ie.mode,ie),je.callback(Q.onHover||Q.hover.onHover,[oe.native,ne.active],ne),"mouseup"!==oe.type&&"click"!==oe.type||Q.onClick&&Q.onClick.call(ne,oe.native,ne.active),ne.lastActive.length&&ne.updateHoverStyle(ne.lastActive,ie.mode,!1),ne.active.length&&ie.mode&&ne.updateHoverStyle(ne.active,ie.mode,!0),xe=!je.arrayEquals(ne.active,ne.lastActive),ne.lastActive=ne.active,xe}}),F.Controller=F}},{25:25,28:28,45:45,48:48}],24:[function(pt,hn,gr){"use strict";var Ze=pt(45);hn.exports=function(je){function ye(U,se){var $=U._chartjs;if($){var Z=$.listeners,oe=Z.indexOf(se);-1!==oe&&Z.splice(oe,1),Z.length>0||(F.forEach(function(ne){delete U[ne]}),delete U._chartjs)}}var F=["push","pop","shift","splice","unshift"];je.DatasetController=function(U,se){this.initialize(U,se)},Ze.extend(je.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(U,se){var $=this;$.chart=U,$.index=se,$.linkScales(),$.addElements()},updateIndex:function(U){this.index=U},linkScales:function(){var U=this,se=U.getMeta(),$=U.getDataset();null===se.xAxisID&&(se.xAxisID=$.xAxisID||U.chart.options.scales.xAxes[0].id),null===se.yAxisID&&(se.yAxisID=$.yAxisID||U.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(U){return this.chart.scales[U]},reset:function(){this.update(!0)},destroy:function(){this._data&&ye(this._data,this)},createMetaDataset:function(){var U=this,se=U.datasetElementType;return se&&new se({_chart:U.chart,_datasetIndex:U.index})},createMetaData:function(U){var $=this.dataElementType;return $&&new $({_chart:this.chart,_datasetIndex:this.index,_index:U})},addElements:function(){var U,se,$=this,Z=$.getMeta(),oe=$.getDataset().data||[],ne=Z.data;for(U=0,se=oe.length;U<se;++U)ne[U]=ne[U]||$.createMetaData(U);Z.dataset=Z.dataset||$.createMetaDataset()},addElementAndReset:function(U){var se=this.createMetaData(U);this.getMeta().data.splice(U,0,se),this.updateElement(se,U,!0)},buildOrUpdateElements:function(){var U=this,se=U.getDataset(),$=se.data||(se.data=[]);U._data!==$&&(U._data&&ye(U._data,U),function j(U,se){U._chartjs?U._chartjs.listeners.push(se):(Object.defineProperty(U,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[se]}}),F.forEach(function($){var Z="onData"+$.charAt(0).toUpperCase()+$.slice(1),oe=U[$];Object.defineProperty(U,$,{configurable:!0,enumerable:!1,value:function(){var ne=Array.prototype.slice.call(arguments),Q=oe.apply(this,ne);return Ze.each(U._chartjs.listeners,function(ie){"function"==typeof ie[Z]&&ie[Z].apply(ie,ne)}),Q}})}))}($,U),U._data=$),U.resyncElements()},update:Ze.noop,transition:function(U){for(var se=this.getMeta(),$=se.data||[],Z=$.length,oe=0;oe<Z;++oe)$[oe].transition(U);se.dataset&&se.dataset.transition(U)},draw:function(){var U=this.getMeta(),se=U.data||[],$=se.length,Z=0;for(U.dataset&&U.dataset.draw();Z<$;++Z)se[Z].draw()},removeHoverStyle:function(U,se){var $=this.chart.data.datasets[U._datasetIndex],Z=U._index,oe=U.custom||{},ne=Ze.valueAtIndexOrDefault,Q=U._model;Q.backgroundColor=oe.backgroundColor?oe.backgroundColor:ne($.backgroundColor,Z,se.backgroundColor),Q.borderColor=oe.borderColor?oe.borderColor:ne($.borderColor,Z,se.borderColor),Q.borderWidth=oe.borderWidth?oe.borderWidth:ne($.borderWidth,Z,se.borderWidth)},setHoverStyle:function(U){var se=this.chart.data.datasets[U._datasetIndex],$=U._index,Z=U.custom||{},oe=Ze.valueAtIndexOrDefault,ne=Ze.getHoverColor,Q=U._model;Q.backgroundColor=Z.hoverBackgroundColor?Z.hoverBackgroundColor:oe(se.hoverBackgroundColor,$,ne(Q.backgroundColor)),Q.borderColor=Z.hoverBorderColor?Z.hoverBorderColor:oe(se.hoverBorderColor,$,ne(Q.borderColor)),Q.borderWidth=Z.hoverBorderWidth?Z.hoverBorderWidth:oe(se.hoverBorderWidth,$,Q.borderWidth)},resyncElements:function(){var U=this,se=U.getMeta(),$=U.getDataset().data,Z=se.data.length,oe=$.length;oe<Z?se.data.splice(oe,Z-oe):oe>Z&&U.insertElements(Z,oe-Z)},insertElements:function(U,se){for(var $=0;$<se;++$)this.addElementAndReset(U+$)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(U,se){this.getMeta().data.splice(U,se),this.insertElements(U,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),je.DatasetController.extend=Ze.inherits}},{45:45}],25:[function(pt,hn,gr){"use strict";var Ze=pt(45);hn.exports={_set:function(je,j){return Ze.merge(this[je]||(this[je]={}),j)}}},{45:45}],26:[function(pt,hn,gr){"use strict";var je=pt(3),j=pt(45),ye=function(F){j.extend(this,F),this.initialize.apply(this,arguments)};j.extend(ye.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var F=this;return F._view||(F._view=j.clone(F._model)),F._start={},F},transition:function(F){var U=this,se=U._model,$=U._start,Z=U._view;return se&&1!==F?(Z||(Z=U._view={}),$||($=U._start={}),function Ze(F,U,se,$){var Z,oe,ne,Q,ie,xe,Ae,Ne,Ee,nt=Object.keys(se);for(Z=0,oe=nt.length;Z<oe;++Z)if(xe=se[ne=nt[Z]],U.hasOwnProperty(ne)||(U[ne]=xe),(Q=U[ne])!==xe&&"_"!==ne[0]){if(F.hasOwnProperty(ne)||(F[ne]=Q),(Ae=typeof xe)==typeof(ie=F[ne]))if("string"===Ae){if((Ne=je(ie)).valid&&(Ee=je(xe)).valid){U[ne]=Ee.mix(Ne,$).rgbString();continue}}else if("number"===Ae&&isFinite(ie)&&isFinite(xe)){U[ne]=ie+(xe-ie)*$;continue}U[ne]=xe}}($,Z,se,F),U):(U._view=se,U._start=null,U)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return j.isNumber(this._model.x)&&j.isNumber(this._model.y)}}),ye.extend=j.inherits,hn.exports=ye},{3:3,45:45}],27:[function(pt,hn,gr){"use strict";var Ze=pt(3),je=pt(25),j=pt(45);hn.exports=function(ye){function F($,Z,oe){var ne;return"string"==typeof $?(ne=parseInt($,10),-1!==$.indexOf("%")&&(ne=ne/100*Z.parentNode[oe])):ne=$,ne}function U($){return null!=$&&"none"!==$}function se($,Z,oe){var ne=document.defaultView,Q=$.parentNode,ie=ne.getComputedStyle($)[Z],xe=ne.getComputedStyle(Q)[Z],Ae=U(ie),Ne=U(xe),Ee=Number.POSITIVE_INFINITY;return Ae||Ne?Math.min(Ae?F(ie,$,oe):Ee,Ne?F(xe,Q,oe):Ee):"none"}j.configMerge=function(){return j.merge(j.clone(arguments[0]),[].slice.call(arguments,1),{merger:function($,Z,oe,ne){var Q=Z[$]||{},ie=oe[$];"scales"===$?Z[$]=j.scaleMerge(Q,ie):"scale"===$?Z[$]=j.merge(Q,[ye.scaleService.getScaleDefaults(ie.type),ie]):j._merger($,Z,oe,ne)}})},j.scaleMerge=function(){return j.merge(j.clone(arguments[0]),[].slice.call(arguments,1),{merger:function($,Z,oe,ne){if("xAxes"===$||"yAxes"===$){var Q,ie,xe,Ae=oe[$].length;for(Z[$]||(Z[$]=[]),Q=0;Q<Ae;++Q)ie=j.valueOrDefault((xe=oe[$][Q]).type,"xAxes"===$?"category":"linear"),Q>=Z[$].length&&Z[$].push({}),j.merge(Z[$][Q],!Z[$][Q].type||xe.type&&xe.type!==Z[$][Q].type?[ye.scaleService.getScaleDefaults(ie),xe]:xe)}else j._merger($,Z,oe,ne)}})},j.where=function($,Z){if(j.isArray($)&&Array.prototype.filter)return $.filter(Z);var oe=[];return j.each($,function(ne){Z(ne)&&oe.push(ne)}),oe},j.findIndex=Array.prototype.findIndex?function($,Z,oe){return $.findIndex(Z,oe)}:function($,Z,oe){oe=void 0===oe?$:oe;for(var ne=0,Q=$.length;ne<Q;++ne)if(Z.call(oe,$[ne],ne,$))return ne;return-1},j.findNextWhere=function($,Z,oe){j.isNullOrUndef(oe)&&(oe=-1);for(var ne=oe+1;ne<$.length;ne++){var Q=$[ne];if(Z(Q))return Q}},j.findPreviousWhere=function($,Z,oe){j.isNullOrUndef(oe)&&(oe=$.length);for(var ne=oe-1;ne>=0;ne--){var Q=$[ne];if(Z(Q))return Q}},j.isNumber=function($){return!isNaN(parseFloat($))&&isFinite($)},j.almostEquals=function($,Z,oe){return Math.abs($-Z)<oe},j.almostWhole=function($,Z){var oe=Math.round($);return oe-Z<$&&oe+Z>$},j.max=function($){return $.reduce(function(Z,oe){return isNaN(oe)?Z:Math.max(Z,oe)},Number.NEGATIVE_INFINITY)},j.min=function($){return $.reduce(function(Z,oe){return isNaN(oe)?Z:Math.min(Z,oe)},Number.POSITIVE_INFINITY)},j.sign=Math.sign?function($){return Math.sign($)}:function($){return 0==($=+$)||isNaN($)?$:$>0?1:-1},j.log10=Math.log10?function($){return Math.log10($)}:function($){return Math.log($)/Math.LN10},j.toRadians=function($){return $*(Math.PI/180)},j.toDegrees=function($){return $*(180/Math.PI)},j.getAngleFromPoint=function($,Z){var oe=Z.x-$.x,ne=Z.y-$.y,Q=Math.sqrt(oe*oe+ne*ne),ie=Math.atan2(ne,oe);return ie<-.5*Math.PI&&(ie+=2*Math.PI),{angle:ie,distance:Q}},j.distanceBetweenPoints=function($,Z){return Math.sqrt(Math.pow(Z.x-$.x,2)+Math.pow(Z.y-$.y,2))},j.aliasPixel=function($){return $%2==0?0:.5},j.splineCurve=function($,Z,oe,ne){var Q=$.skip?Z:$,ie=Z,xe=oe.skip?Z:oe,Ae=Math.sqrt(Math.pow(ie.x-Q.x,2)+Math.pow(ie.y-Q.y,2)),Ne=Math.sqrt(Math.pow(xe.x-ie.x,2)+Math.pow(xe.y-ie.y,2)),Ee=Ae/(Ae+Ne),nt=Ne/(Ae+Ne),Wt=ne*(Ee=isNaN(Ee)?0:Ee),qe=ne*(nt=isNaN(nt)?0:nt);return{previous:{x:ie.x-Wt*(xe.x-Q.x),y:ie.y-Wt*(xe.y-Q.y)},next:{x:ie.x+qe*(xe.x-Q.x),y:ie.y+qe*(xe.y-Q.y)}}},j.EPSILON=Number.EPSILON||1e-14,j.splineCurveMonotone=function($){var Z,oe,ne,Q,Ne,Ee,nt,Wt,qe,ie=($||[]).map(function($e){return{model:$e._model,deltaK:0,mK:0}}),xe=ie.length;for(Z=0;Z<xe;++Z)if(!(ne=ie[Z]).model.skip){if(oe=Z>0?ie[Z-1]:null,(Q=Z<xe-1?ie[Z+1]:null)&&!Q.model.skip){var Ae=Q.model.x-ne.model.x;ne.deltaK=0!==Ae?(Q.model.y-ne.model.y)/Ae:0}ne.mK=!oe||oe.model.skip?ne.deltaK:!Q||Q.model.skip?oe.deltaK:this.sign(oe.deltaK)!==this.sign(ne.deltaK)?0:(oe.deltaK+ne.deltaK)/2}for(Z=0;Z<xe-1;++Z)Q=ie[Z+1],(ne=ie[Z]).model.skip||Q.model.skip||(j.almostEquals(ne.deltaK,0,this.EPSILON)?ne.mK=Q.mK=0:(Ne=ne.mK/ne.deltaK,Ee=Q.mK/ne.deltaK,(Wt=Math.pow(Ne,2)+Math.pow(Ee,2))<=9||(nt=3/Math.sqrt(Wt),ne.mK=Ne*nt*ne.deltaK,Q.mK=Ee*nt*ne.deltaK)));for(Z=0;Z<xe;++Z)(ne=ie[Z]).model.skip||(Q=Z<xe-1?ie[Z+1]:null,(oe=Z>0?ie[Z-1]:null)&&!oe.model.skip&&(ne.model.controlPointPreviousX=ne.model.x-(qe=(ne.model.x-oe.model.x)/3),ne.model.controlPointPreviousY=ne.model.y-qe*ne.mK),Q&&!Q.model.skip&&(ne.model.controlPointNextX=ne.model.x+(qe=(Q.model.x-ne.model.x)/3),ne.model.controlPointNextY=ne.model.y+qe*ne.mK))},j.nextItem=function($,Z,oe){return oe?Z>=$.length-1?$[0]:$[Z+1]:Z>=$.length-1?$[$.length-1]:$[Z+1]},j.previousItem=function($,Z,oe){return oe?Z<=0?$[$.length-1]:$[Z-1]:Z<=0?$[0]:$[Z-1]},j.niceNum=function($,Z){var oe=Math.floor(j.log10($)),ne=$/Math.pow(10,oe);return(Z?ne<1.5?1:ne<3?2:ne<7?5:10:ne<=1?1:ne<=2?2:ne<=5?5:10)*Math.pow(10,oe)},j.requestAnimFrame="undefined"==typeof window?function($){$()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function($){return window.setTimeout($,1e3/60)},j.getRelativePosition=function($,Z){var oe,ne,Q=$.originalEvent||$,ie=$.currentTarget||$.srcElement,xe=ie.getBoundingClientRect(),Ae=Q.touches;Ae&&Ae.length>0?(oe=Ae[0].clientX,ne=Ae[0].clientY):(oe=Q.clientX,ne=Q.clientY);var Ne=parseFloat(j.getStyle(ie,"padding-left")),Ee=parseFloat(j.getStyle(ie,"padding-top")),nt=parseFloat(j.getStyle(ie,"padding-right")),Wt=parseFloat(j.getStyle(ie,"padding-bottom")),$e=xe.bottom-xe.top-Ee-Wt;return{x:oe=Math.round((oe-xe.left-Ne)/(xe.right-xe.left-Ne-nt)*ie.width/Z.currentDevicePixelRatio),y:ne=Math.round((ne-xe.top-Ee)/$e*ie.height/Z.currentDevicePixelRatio)}},j.getConstraintWidth=function($){return se($,"max-width","clientWidth")},j.getConstraintHeight=function($){return se($,"max-height","clientHeight")},j.getMaximumWidth=function($){var Z=$.parentNode;if(!Z)return $.clientWidth;var oe=parseInt(j.getStyle(Z,"padding-left"),10),ne=parseInt(j.getStyle(Z,"padding-right"),10),Q=Z.clientWidth-oe-ne,ie=j.getConstraintWidth($);return isNaN(ie)?Q:Math.min(Q,ie)},j.getMaximumHeight=function($){var Z=$.parentNode;if(!Z)return $.clientHeight;var oe=parseInt(j.getStyle(Z,"padding-top"),10),ne=parseInt(j.getStyle(Z,"padding-bottom"),10),Q=Z.clientHeight-oe-ne,ie=j.getConstraintHeight($);return isNaN(ie)?Q:Math.min(Q,ie)},j.getStyle=function($,Z){return $.currentStyle?$.currentStyle[Z]:document.defaultView.getComputedStyle($,null).getPropertyValue(Z)},j.retinaScale=function($,Z){var oe=$.currentDevicePixelRatio=Z||window.devicePixelRatio||1;if(1!==oe){var ne=$.canvas,Q=$.height,ie=$.width;ne.height=Q*oe,ne.width=ie*oe,$.ctx.scale(oe,oe),ne.style.height=Q+"px",ne.style.width=ie+"px"}},j.fontString=function($,Z,oe){return Z+" "+$+"px "+oe},j.longestText=function($,Z,oe,ne){var Q=(ne=ne||{}).data=ne.data||{},ie=ne.garbageCollect=ne.garbageCollect||[];ne.font!==Z&&(Q=ne.data={},ie=ne.garbageCollect=[],ne.font=Z),$.font=Z;var xe=0;j.each(oe,function(Ee){null!=Ee&&!0!==j.isArray(Ee)?xe=j.measureText($,Q,ie,xe,Ee):j.isArray(Ee)&&j.each(Ee,function(nt){null==nt||j.isArray(nt)||(xe=j.measureText($,Q,ie,xe,nt))})});var Ae=ie.length/2;if(Ae>oe.length){for(var Ne=0;Ne<Ae;Ne++)delete Q[ie[Ne]];ie.splice(0,Ae)}return xe},j.measureText=function($,Z,oe,ne,Q){var ie=Z[Q];return ie||(ie=Z[Q]=$.measureText(Q).width,oe.push(Q)),ie>ne&&(ne=ie),ne},j.numberOfLabelLines=function($){var Z=1;return j.each($,function(oe){j.isArray(oe)&&oe.length>Z&&(Z=oe.length)}),Z},j.color=Ze?function($){return $ instanceof CanvasGradient&&($=je.global.defaultColor),Ze($)}:function($){return console.error("Color.js not found!"),$},j.getHoverColor=function($){return $ instanceof CanvasPattern?$:j.color($).saturate(.5).darken(.1).rgbString()}}},{25:25,3:3,45:45}],28:[function(pt,hn,gr){"use strict";function Ze($,Z){return $.native?{x:$.x,y:$.y}:se.getRelativePosition($,Z)}function je($,Z){var oe,ne,Q,ie,xe;for(ne=0,ie=$.data.datasets.length;ne<ie;++ne)if($.isDatasetVisible(ne))for(Q=0,xe=(oe=$.getDatasetMeta(ne)).data.length;Q<xe;++Q){var Ae=oe.data[Q];Ae._view.skip||Z(Ae)}}function j($,Z){var oe=[];return je($,function(ne){ne.inRange(Z.x,Z.y)&&oe.push(ne)}),oe}function ye($,Z,oe,ne){var Q=Number.POSITIVE_INFINITY,ie=[];return je($,function(xe){if(!oe||xe.inRange(Z.x,Z.y)){var Ae=xe.getCenterPoint(),Ne=ne(Z,Ae);Ne<Q?(ie=[xe],Q=Ne):Ne===Q&&ie.push(xe)}}),ie}function F($){var Z=-1!==$.indexOf("x"),oe=-1!==$.indexOf("y");return function(ne,Q){var ie=Z?Math.abs(ne.x-Q.x):0,xe=oe?Math.abs(ne.y-Q.y):0;return Math.sqrt(Math.pow(ie,2)+Math.pow(xe,2))}}function U($,Z,oe){var ne=Ze(Z,$);oe.axis=oe.axis||"x";var Q=F(oe.axis),ie=oe.intersect?j($,ne):ye($,ne,!1,Q),xe=[];return ie.length?($.data.datasets.forEach(function(Ae,Ne){if($.isDatasetVisible(Ne)){var Ee=$.getDatasetMeta(Ne).data[ie[0]._index];Ee&&!Ee._view.skip&&xe.push(Ee)}}),xe):[]}var se=pt(45);hn.exports={modes:{single:function($,Z){var oe=Ze(Z,$),ne=[];return je($,function(Q){if(Q.inRange(oe.x,oe.y))return ne.push(Q),ne}),ne.slice(0,1)},label:U,index:U,dataset:function($,Z,oe){var ne=Ze(Z,$);oe.axis=oe.axis||"xy";var Q=F(oe.axis),ie=oe.intersect?j($,ne):ye($,ne,!1,Q);return ie.length>0&&(ie=$.getDatasetMeta(ie[0]._datasetIndex).data),ie},"x-axis":function($,Z){return U($,Z,{intersect:!1})},point:function($,Z){return j($,Ze(Z,$))},nearest:function($,Z,oe){var ne=Ze(Z,$);oe.axis=oe.axis||"xy";var Q=F(oe.axis),ie=ye($,ne,oe.intersect,Q);return ie.length>1&&ie.sort(function(xe,Ae){var Ne=xe.getArea()-Ae.getArea();return 0===Ne&&(Ne=xe._datasetIndex-Ae._datasetIndex),Ne}),ie.slice(0,1)},x:function($,Z,oe){var ne=Ze(Z,$),Q=[],ie=!1;return je($,function(xe){xe.inXRange(ne.x)&&Q.push(xe),xe.inRange(ne.x,ne.y)&&(ie=!0)}),oe.intersect&&!ie&&(Q=[]),Q},y:function($,Z,oe){var ne=Ze(Z,$),Q=[],ie=!1;return je($,function(xe){xe.inYRange(ne.y)&&Q.push(xe),xe.inRange(ne.x,ne.y)&&(ie=!0)}),oe.intersect&&!ie&&(Q=[]),Q}}}},{45:45}],29:[function(pt,hn,gr){"use strict";pt(25)._set("global",{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},layout:{padding:{top:0,right:0,bottom:0,left:0}}}),hn.exports=function(){var Ze=function(je,j){return this.construct(je,j),this};return Ze.Chart=Ze,Ze}},{25:25}],30:[function(pt,hn,gr){"use strict";var Ze=pt(45);hn.exports=function(je){function j(F,U){return Ze.where(F,function(se){return se.position===U})}function ye(F,U){F.forEach(function(se,$){return se._tmpIndex_=$,se}),F.sort(function(se,$){var Z=U?$:se,oe=U?se:$;return Z.weight===oe.weight?Z._tmpIndex_-oe._tmpIndex_:Z.weight-oe.weight}),F.forEach(function(se){delete se._tmpIndex_})}je.layoutService={defaults:{},addBox:function(F,U){F.boxes||(F.boxes=[]),U.fullWidth=U.fullWidth||!1,U.position=U.position||"top",U.weight=U.weight||0,F.boxes.push(U)},removeBox:function(F,U){var se=F.boxes?F.boxes.indexOf(U):-1;-1!==se&&F.boxes.splice(se,1)},configure:function(F,U,se){for(var $,Z=["fullWidth","position","weight"],oe=Z.length,ne=0;ne<oe;++ne)se.hasOwnProperty($=Z[ne])&&(U[$]=se[$])},update:function(F,U,se){function $(rr){var ai=Ze.findNextWhere(ht,function(Mr){return Mr.box===rr});if(ai)if(rr.isHorizontal()){var Qi={left:Math.max(Ot,Jt),right:Math.max(Gn,Rt),top:0,bottom:0};rr.update(rr.fullWidth?$e:Ge,Ie/2,Qi)}else rr.update(ai.minSize.width,Qe)}function Z(rr){rr.isHorizontal()?(rr.left=rr.fullWidth?Q:Ot,rr.right=rr.fullWidth?U-ie:Ot+Ge,rr.top=xt,rr.bottom=xt+rr.height,xt=rr.bottom):(rr.left=Or,rr.right=Or+rr.width,rr.top=ln,rr.bottom=ln+Qe,Or=rr.right)}if(F){var ne=Ze.options.toPadding((F.options.layout||{}).padding),Q=ne.left,ie=ne.right,xe=ne.top,Ae=ne.bottom,Ne=j(F.boxes,"left"),Ee=j(F.boxes,"right"),nt=j(F.boxes,"top"),Wt=j(F.boxes,"bottom"),qe=j(F.boxes,"chartArea");ye(Ne,!0),ye(Ee,!1),ye(nt,!0),ye(Wt,!1);var $e=U-Q-ie,Ie=se-xe-Ae,de=Ie/2,Fe=(U-$e/2)/(Ne.length+Ee.length),le=(se-de)/(nt.length+Wt.length),Ge=$e,Qe=Ie,ht=[];Ze.each(Ne.concat(Ee,nt,Wt),function(rr){var ai,Qi=rr.isHorizontal();Qi?(ai=rr.update(rr.fullWidth?$e:Ge,le),Qe-=ai.height):(ai=rr.update(Fe,de),Ge-=ai.width),ht.push({horizontal:Qi,minSize:ai,box:rr})});var Jt=0,Rt=0,pn=0,en=0;Ze.each(nt.concat(Wt),function(rr){if(rr.getPadding){var ai=rr.getPadding();Jt=Math.max(Jt,ai.left),Rt=Math.max(Rt,ai.right)}}),Ze.each(Ne.concat(Ee),function(rr){if(rr.getPadding){var ai=rr.getPadding();pn=Math.max(pn,ai.top),en=Math.max(en,ai.bottom)}});var Ot=Q,Gn=ie,ln=xe,Tn=Ae;Ze.each(Ne.concat(Ee),$),Ze.each(Ne,function(rr){Ot+=rr.width}),Ze.each(Ee,function(rr){Gn+=rr.width}),Ze.each(nt.concat(Wt),$),Ze.each(nt,function(rr){ln+=rr.height}),Ze.each(Wt,function(rr){Tn+=rr.height}),Ze.each(Ne.concat(Ee),function(rr){var ai=Ze.findNextWhere(ht,function(Mr){return Mr.box===rr});ai&&rr.update(ai.minSize.width,Qe,{left:0,right:0,top:ln,bottom:Tn})}),Ot=Q,Gn=ie,ln=xe,Tn=Ae,Ze.each(Ne,function(rr){Ot+=rr.width}),Ze.each(Ee,function(rr){Gn+=rr.width}),Ze.each(nt,function(rr){ln+=rr.height}),Ze.each(Wt,function(rr){Tn+=rr.height});var to=Math.max(Jt-Ot,0);Ot+=to,Gn+=Math.max(Rt-Gn,0);var wo=Math.max(pn-ln,0);ln+=wo,Tn+=Math.max(en-Tn,0);var Tr=se-ln-Tn,Gr=U-Ot-Gn;Gr===Ge&&Tr===Qe||(Ze.each(Ne,function(rr){rr.height=Tr}),Ze.each(Ee,function(rr){rr.height=Tr}),Ze.each(nt,function(rr){rr.fullWidth||(rr.width=Gr)}),Ze.each(Wt,function(rr){rr.fullWidth||(rr.width=Gr)}),Qe=Tr,Ge=Gr);var Or=Q+to,xt=xe+wo;Ze.each(Ne.concat(nt),Z),Or+=Ge,xt+=Qe,Ze.each(Ee,Z),Ze.each(Wt,Z),F.chartArea={left:Ot,top:ln,right:Ot+Ge,bottom:ln+Qe},Ze.each(qe,function(rr){rr.left=F.chartArea.left,rr.top=F.chartArea.top,rr.right=F.chartArea.right,rr.bottom=F.chartArea.bottom,rr.update(Ge,Qe)})}}}}},{45:45}],31:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(26),j=pt(45);Ze._set("global",{plugins:{}}),hn.exports=function(ye){ye.plugins={_plugins:[],_cacheId:0,register:function(F){var U=this._plugins;[].concat(F).forEach(function(se){-1===U.indexOf(se)&&U.push(se)}),this._cacheId++},unregister:function(F){var U=this._plugins;[].concat(F).forEach(function(se){var $=U.indexOf(se);-1!==$&&U.splice($,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(F,U,se){var $,Z,oe,ne,Q,ie=this.descriptors(F),xe=ie.length;for($=0;$<xe;++$)if("function"==typeof(Q=(oe=(Z=ie[$]).plugin)[U])&&((ne=[F].concat(se||[])).push(Z.options),!1===Q.apply(oe,ne)))return!1;return!0},descriptors:function(F){var U=F._plugins||(F._plugins={});if(U.id===this._cacheId)return U.descriptors;var se=[],$=[],Z=F&&F.config||{},oe=Z.options&&Z.options.plugins||{};return this._plugins.concat(Z.plugins||[]).forEach(function(ne){if(-1===se.indexOf(ne)){var Q=ne.id,ie=oe[Q];!1!==ie&&(!0===ie&&(ie=j.clone(Ze.global.plugins[Q])),se.push(ne),$.push({plugin:ne,options:ie||{}}))}}),U.descriptors=$,U.id=this._cacheId,$}},ye.pluginService=ye.plugins,ye.PluginBase=je.extend({})}},{25:25,26:26,45:45}],32:[function(pt,hn,gr){"use strict";function Ze(se){var $,Z,oe=[];for($=0,Z=se.length;$<Z;++$)oe.push(se[$].label);return oe}function je(se,$,Z){var oe=se.getPixelForTick($);return Z&&(oe-=0===$?(se.getPixelForTick(1)-oe)/2:(oe-se.getPixelForTick($-1))/2),oe}var j=pt(25),ye=pt(26),F=pt(45),U=pt(34);j._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",lineHeight:1.2,padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:U.formatters.values,minor:{},major:{}}}),hn.exports=function(se){function $(ne,Q,ie){return F.isArray(Q)?F.longestText(ne,ie,Q):ne.measureText(Q).width}function Z(ne){var Q=F.valueOrDefault,ie=j.global,xe=Q(ne.fontSize,ie.defaultFontSize),Ae=Q(ne.fontStyle,ie.defaultFontStyle),Ne=Q(ne.fontFamily,ie.defaultFontFamily);return{size:xe,style:Ae,family:Ne,font:F.fontString(xe,Ae,Ne)}}function oe(ne){return F.options.toLineHeight(F.valueOrDefault(ne.lineHeight,1.2),F.valueOrDefault(ne.fontSize,j.global.defaultFontSize))}se.Scale=ye.extend({getPadding:function(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var ne=this.options.ticks;for(var Q in!1===ne.minor&&(ne.minor={display:!1}),!1===ne.major&&(ne.major={display:!1}),ne)"major"!==Q&&"minor"!==Q&&(void 0===ne.minor[Q]&&(ne.minor[Q]=ne[Q]),void 0===ne.major[Q]&&(ne.major[Q]=ne[Q]))},beforeUpdate:function(){F.callback(this.options.beforeUpdate,[this])},update:function(ne,Q,ie){var xe,Ae,Ne,Ee,nt,Wt,qe=this;for(qe.beforeUpdate(),qe.maxWidth=ne,qe.maxHeight=Q,qe.margins=F.extend({left:0,right:0,top:0,bottom:0},ie),qe.longestTextCache=qe.longestTextCache||{},qe.beforeSetDimensions(),qe.setDimensions(),qe.afterSetDimensions(),qe.beforeDataLimits(),qe.determineDataLimits(),qe.afterDataLimits(),qe.beforeBuildTicks(),nt=qe.buildTicks()||[],qe.afterBuildTicks(),qe.beforeTickToLabelConversion(),Ne=qe.convertTicksToLabels(nt)||qe.ticks,qe.afterTickToLabelConversion(),qe.ticks=Ne,xe=0,Ae=Ne.length;xe<Ae;++xe)Ee=Ne[xe],(Wt=nt[xe])?Wt.label=Ee:nt.push(Wt={label:Ee,major:!1});return qe._ticks=nt,qe.beforeCalculateTickRotation(),qe.calculateTickRotation(),qe.afterCalculateTickRotation(),qe.beforeFit(),qe.fit(),qe.afterFit(),qe.afterUpdate(),qe.minSize},afterUpdate:function(){F.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){F.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var ne=this;ne.isHorizontal()?(ne.width=ne.maxWidth,ne.left=0,ne.right=ne.width):(ne.height=ne.maxHeight,ne.top=0,ne.bottom=ne.height),ne.paddingLeft=0,ne.paddingTop=0,ne.paddingRight=0,ne.paddingBottom=0},afterSetDimensions:function(){F.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){F.callback(this.options.beforeDataLimits,[this])},determineDataLimits:F.noop,afterDataLimits:function(){F.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){F.callback(this.options.beforeBuildTicks,[this])},buildTicks:F.noop,afterBuildTicks:function(){F.callback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){F.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var Q=this.options.ticks;this.ticks=this.ticks.map(Q.userCallback||Q.callback,this)},afterTickToLabelConversion:function(){F.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){F.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var ne=this,Q=ne.ctx,ie=ne.options.ticks,xe=Ze(ne._ticks),Ae=Z(ie);Q.font=Ae.font;var Ne=ie.minRotation||0;if(xe.length&&ne.options.display&&ne.isHorizontal())for(var Ee,nt=F.longestText(Q,Ae.font,xe,ne.longestTextCache),Wt=nt,qe=ne.getPixelForTick(1)-ne.getPixelForTick(0)-6;Wt>qe&&Ne<ie.maxRotation;){var $e=F.toRadians(Ne);if(Ee=Math.cos($e),Math.sin($e)*nt>ne.maxHeight){Ne--;break}Ne++,Wt=Ee*nt}ne.labelRotation=Ne},afterCalculateTickRotation:function(){F.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){F.callback(this.options.beforeFit,[this])},fit:function(){var ne=this,Q=ne.minSize={width:0,height:0},ie=Ze(ne._ticks),xe=ne.options,Ae=xe.ticks,Ne=xe.scaleLabel,Ee=xe.gridLines,nt=xe.display,Wt=ne.isHorizontal(),qe=Z(Ae),$e=xe.gridLines.tickMarkLength;if(Q.width=Wt?ne.isFullWidth()?ne.maxWidth-ne.margins.left-ne.margins.right:ne.maxWidth:nt&&Ee.drawTicks?$e:0,Q.height=Wt?nt&&Ee.drawTicks?$e:0:ne.maxHeight,Ne.display&&nt){var Ie=oe(Ne)+F.options.toPadding(Ne.padding).height;Wt?Q.height+=Ie:Q.width+=Ie}if(Ae.display&&nt){var de=F.longestText(ne.ctx,qe.font,ie,ne.longestTextCache),Fe=F.numberOfLabelLines(ie),le=.5*qe.size,Ge=ne.options.ticks.padding;if(Wt){ne.longestLabelWidth=de;var Qe=F.toRadians(ne.labelRotation),ht=Math.cos(Qe),Jt=Math.sin(Qe)*de+qe.size*Fe+le*(Fe-1)+le;Q.height=Math.min(ne.maxHeight,Q.height+Jt+Ge),ne.ctx.font=qe.font;var Rt=$(ne.ctx,ie[0],qe.font),pn=$(ne.ctx,ie[ie.length-1],qe.font);0!==ne.labelRotation?(ne.paddingLeft="bottom"===xe.position?ht*Rt+3:ht*le+3,ne.paddingRight="bottom"===xe.position?ht*le+3:ht*pn+3):(ne.paddingLeft=Rt/2+3,ne.paddingRight=pn/2+3)}else Ae.mirror?de=0:de+=Ge+le,Q.width=Math.min(ne.maxWidth,Q.width+de),ne.paddingTop=qe.size/2,ne.paddingBottom=qe.size/2}ne.handleMargins(),ne.width=Q.width,ne.height=Q.height},handleMargins:function(){var ne=this;ne.margins&&(ne.paddingLeft=Math.max(ne.paddingLeft-ne.margins.left,0),ne.paddingTop=Math.max(ne.paddingTop-ne.margins.top,0),ne.paddingRight=Math.max(ne.paddingRight-ne.margins.right,0),ne.paddingBottom=Math.max(ne.paddingBottom-ne.margins.bottom,0))},afterFit:function(){F.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(ne){if(F.isNullOrUndef(ne))return NaN;if("number"==typeof ne&&!isFinite(ne))return NaN;if(ne)if(this.isHorizontal()){if(void 0!==ne.x)return this.getRightValue(ne.x)}else if(void 0!==ne.y)return this.getRightValue(ne.y);return ne},getLabelForIndex:F.noop,getPixelForValue:F.noop,getValueForPixel:F.noop,getPixelForTick:function(ne){var Q=this,ie=Q.options.offset;if(Q.isHorizontal()){var xe=(Q.width-(Q.paddingLeft+Q.paddingRight))/Math.max(Q._ticks.length-(ie?0:1),1),Ae=xe*ne+Q.paddingLeft;return ie&&(Ae+=xe/2),Q.left+Math.round(Ae)+(Q.isFullWidth()?Q.margins.left:0)}return Q.top+ne*((Q.height-(Q.paddingTop+Q.paddingBottom))/(Q._ticks.length-1))},getPixelForDecimal:function(ne){var Q=this;return Q.isHorizontal()?Q.left+Math.round((Q.width-(Q.paddingLeft+Q.paddingRight))*ne+Q.paddingLeft)+(Q.isFullWidth()?Q.margins.left:0):Q.top+ne*Q.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var Q=this.min,ie=this.max;return this.beginAtZero?0:Q<0&&ie<0?ie:Q>0&&ie>0?Q:0},_autoSkip:function(ne){var Q,ie,xe,Ae,Ne=this,Ee=Ne.isHorizontal(),nt=Ne.options.ticks.minor,Wt=ne.length,qe=F.toRadians(Ne.labelRotation),$e=Math.cos(qe),Ie=Ne.longestLabelWidth*$e,de=[];for(nt.maxTicksLimit&&(Ae=nt.maxTicksLimit),Ee&&(Q=!1,(Ie+nt.autoSkipPadding)*Wt>Ne.width-(Ne.paddingLeft+Ne.paddingRight)&&(Q=1+Math.floor((Ie+nt.autoSkipPadding)*Wt/(Ne.width-(Ne.paddingLeft+Ne.paddingRight)))),Ae&&Wt>Ae&&(Q=Math.max(Q,Math.floor(Wt/Ae)))),ie=0;ie<Wt;ie++)xe=ne[ie],(Q>1&&ie%Q>0||ie%Q==0&&ie+Q>=Wt)&&ie!==Wt-1&&delete xe.label,de.push(xe);return de},draw:function(ne){var Q=this,ie=Q.options;if(ie.display){var xe=Q.ctx,Ae=j.global,Ne=ie.ticks.minor,Ee=ie.ticks.major||Ne,nt=ie.gridLines,Wt=ie.scaleLabel,qe=0!==Q.labelRotation,$e=Q.isHorizontal(),Ie=Ne.autoSkip?Q._autoSkip(Q.getTicks()):Q.getTicks(),de=F.valueOrDefault(Ne.fontColor,Ae.defaultFontColor),Fe=Z(Ne),le=F.valueOrDefault(Ee.fontColor,Ae.defaultFontColor),Ge=Z(Ee),Qe=nt.drawTicks?nt.tickMarkLength:0,ht=F.valueOrDefault(Wt.fontColor,Ae.defaultFontColor),Jt=Z(Wt),Rt=F.options.toPadding(Wt.padding),pn=F.toRadians(Q.labelRotation),en=[],Ot="right"===ie.position?Q.left:Q.right-Qe,Gn="right"===ie.position?Q.left+Qe:Q.right,ln="bottom"===ie.position?Q.top:Q.bottom-Qe,Tn="bottom"===ie.position?Q.top+Qe:Q.bottom;if(F.each(Ie,function(Wo,Yi){if(!F.isNullOrUndef(Wo.label)){var Pi,Ba,Gt,jt,yn=Wo.label;Yi===Q.zeroLineIndex&&ie.offset===nt.offsetGridLines?(Pi=nt.zeroLineWidth,Ba=nt.zeroLineColor,Gt=nt.zeroLineBorderDash,jt=nt.zeroLineBorderDashOffset):(Pi=F.valueAtIndexOrDefault(nt.lineWidth,Yi),Ba=F.valueAtIndexOrDefault(nt.color,Yi),Gt=F.valueOrDefault(nt.borderDash,Ae.borderDash),jt=F.valueOrDefault(nt.borderDashOffset,Ae.borderDashOffset));var On,cr,tr,sn,qr,fr,Eo,li,di,vo,tu="middle",qi="middle",za=Ne.padding;if($e){var ma=Qe+za;"bottom"===ie.position?(qi=qe?"middle":"top",tu=qe?"right":"center",vo=Q.top+ma):(qi=qe?"middle":"bottom",tu=qe?"left":"center",vo=Q.bottom-ma);var ps=je(Q,Yi,nt.offsetGridLines&&Ie.length>1);ps<Q.left&&(Ba="rgba(0,0,0,0)"),ps+=F.aliasPixel(Pi),di=Q.getPixelForTick(Yi)+Ne.labelOffset,On=tr=qr=Eo=ps,cr=ln,sn=Tn,fr=ne.top,li=ne.bottom}else{var X,os="left"===ie.position;Ne.mirror?(tu=os?"left":"right",X=za):(tu=os?"right":"left",X=Qe+za),di=os?Q.right-X:Q.left+X;var $a=je(Q,Yi,nt.offsetGridLines&&Ie.length>1);$a<Q.top&&(Ba="rgba(0,0,0,0)"),$a+=F.aliasPixel(Pi),vo=Q.getPixelForTick(Yi)+Ne.labelOffset,On=Ot,tr=Gn,qr=ne.left,Eo=ne.right,cr=sn=fr=li=$a}en.push({tx1:On,ty1:cr,tx2:tr,ty2:sn,x1:qr,y1:fr,x2:Eo,y2:li,labelX:di,labelY:vo,glWidth:Pi,glColor:Ba,glBorderDash:Gt,glBorderDashOffset:jt,rotation:-1*pn,label:yn,major:Wo.major,textBaseline:qi,textAlign:tu})}}),F.each(en,function(Wo){if(nt.display&&(xe.save(),xe.lineWidth=Wo.glWidth,xe.strokeStyle=Wo.glColor,xe.setLineDash&&(xe.setLineDash(Wo.glBorderDash),xe.lineDashOffset=Wo.glBorderDashOffset),xe.beginPath(),nt.drawTicks&&(xe.moveTo(Wo.tx1,Wo.ty1),xe.lineTo(Wo.tx2,Wo.ty2)),nt.drawOnChartArea&&(xe.moveTo(Wo.x1,Wo.y1),xe.lineTo(Wo.x2,Wo.y2)),xe.stroke(),xe.restore()),Ne.display){xe.save(),xe.translate(Wo.labelX,Wo.labelY),xe.rotate(Wo.rotation),xe.font=Wo.major?Ge.font:Fe.font,xe.fillStyle=Wo.major?le:de,xe.textBaseline=Wo.textBaseline,xe.textAlign=Wo.textAlign;var Yi=Wo.label;if(F.isArray(Yi))for(var Pi=0,Ba=0;Pi<Yi.length;++Pi)xe.fillText(""+Yi[Pi],0,Ba),Ba+=1.5*Fe.size;else xe.fillText(Yi,0,0);xe.restore()}}),Wt.display){var to,wo,Tr=0,Gr=oe(Wt)/2;if($e)to=Q.left+(Q.right-Q.left)/2,wo="bottom"===ie.position?Q.bottom-Gr-Rt.bottom:Q.top+Gr+Rt.top;else{var Or="left"===ie.position;to=Or?Q.left+Gr+Rt.top:Q.right-Gr-Rt.top,wo=Q.top+(Q.bottom-Q.top)/2,Tr=Or?-.5*Math.PI:.5*Math.PI}xe.save(),xe.translate(to,wo),xe.rotate(Tr),xe.textAlign="center",xe.textBaseline="middle",xe.fillStyle=ht,xe.font=Jt.font,xe.fillText(Wt.labelString,0,0),xe.restore()}if(nt.drawBorder){xe.lineWidth=F.valueAtIndexOrDefault(nt.lineWidth,0),xe.strokeStyle=F.valueAtIndexOrDefault(nt.color,0);var xt=Q.left,rr=Q.right,ai=Q.top,Qi=Q.bottom,Mr=F.aliasPixel(xe.lineWidth);$e?(ai=Qi="top"===ie.position?Q.bottom:Q.top,ai+=Mr,Qi+=Mr):(xt=rr="left"===ie.position?Q.right:Q.left,xt+=Mr,rr+=Mr),xe.beginPath(),xe.moveTo(xt,ai),xe.lineTo(rr,Qi),xe.stroke()}}}})}},{25:25,26:26,34:34,45:45}],33:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(45);hn.exports=function(j){j.scaleService={constructors:{},defaults:{},registerScaleType:function(ye,F,U){this.constructors[ye]=F,this.defaults[ye]=je.clone(U)},getScaleConstructor:function(ye){return this.constructors.hasOwnProperty(ye)?this.constructors[ye]:void 0},getScaleDefaults:function(ye){return this.defaults.hasOwnProperty(ye)?je.merge({},[Ze.scale,this.defaults[ye]]):{}},updateScaleDefaults:function(ye,F){var U=this;U.defaults.hasOwnProperty(ye)&&(U.defaults[ye]=je.extend(U.defaults[ye],F))},addScalesToLayout:function(ye){je.each(ye.scales,function(F){F.fullWidth=F.options.fullWidth,F.position=F.options.position,F.weight=F.options.weight,j.layoutService.addBox(ye,F)})}}}},{25:25,45:45}],34:[function(pt,hn,gr){"use strict";var Ze=pt(45);hn.exports={generators:{linear:function(je,j){var ye,F=[];if(je.stepSize&&je.stepSize>0)ye=je.stepSize;else{var U=Ze.niceNum(j.max-j.min,!1);ye=Ze.niceNum(U/(je.maxTicks-1),!0)}var se=Math.floor(j.min/ye)*ye,$=Math.ceil(j.max/ye)*ye;je.min&&je.max&&je.stepSize&&Ze.almostWhole((je.max-je.min)/je.stepSize,ye/1e3)&&(se=je.min,$=je.max);var Z=($-se)/ye;Z=Ze.almostEquals(Z,Math.round(Z),ye/1e3)?Math.round(Z):Math.ceil(Z),F.push(void 0!==je.min?je.min:se);for(var oe=1;oe<Z;++oe)F.push(se+oe*ye);return F.push(void 0!==je.max?je.max:$),F},logarithmic:function(je,j){var ye,F,U=[],se=Ze.valueOrDefault,$=se(je.min,Math.pow(10,Math.floor(Ze.log10(j.min)))),Z=Math.floor(Ze.log10(j.max)),oe=Math.ceil(j.max/Math.pow(10,Z));0===$?(ye=Math.floor(Ze.log10(j.minNotZero)),F=Math.floor(j.minNotZero/Math.pow(10,ye)),U.push($),$=F*Math.pow(10,ye)):(ye=Math.floor(Ze.log10($)),F=Math.floor($/Math.pow(10,ye)));do{U.push($),10==++F&&(F=1,++ye),$=F*Math.pow(10,ye)}while(ye<Z||ye===Z&&F<oe);var ne=se(je.max,$);return U.push(ne),U}},formatters:{values:function(je){return Ze.isArray(je)?je:""+je},linear:function(je,j,ye){var F=ye.length>3?ye[2]-ye[1]:ye[1]-ye[0];Math.abs(F)>1&&je!==Math.floor(je)&&(F=je-Math.floor(je));var U=Ze.log10(Math.abs(F)),se="";if(0!==je){var $=-1*Math.floor(U);$=Math.max(Math.min($,20),0),se=je.toFixed($)}else se="0";return se},logarithmic:function(je,j,ye){var F=je/Math.pow(10,Math.floor(Ze.log10(je)));return 0===je?"0":1===F||2===F||5===F||0===j||j===ye.length-1?je.toExponential():""}}}},{45:45}],35:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(26),j=pt(45);Ze._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:j.noop,title:function(ye,F){var U="",se=F.labels,$=se?se.length:0;if(ye.length>0){var Z=ye[0];Z.xLabel?U=Z.xLabel:$>0&&Z.index<$&&(U=se[Z.index])}return U},afterTitle:j.noop,beforeBody:j.noop,beforeLabel:j.noop,label:function(ye,F){var U=F.datasets[ye.datasetIndex].label||"";return U&&(U+=": "),U+ye.yLabel},labelColor:function(ye,F){var U=F.getDatasetMeta(ye.datasetIndex).data[ye.index]._view;return{borderColor:U.borderColor,backgroundColor:U.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:j.noop,afterBody:j.noop,beforeFooter:j.noop,footer:j.noop,afterFooter:j.noop}}}),hn.exports=function(ye){function F(Q,ie){var xe=j.color(Q);return xe.alpha(ie*xe.alpha()).rgbaString()}function U(Q,ie){return ie&&(j.isArray(ie)?Array.prototype.push.apply(Q,ie):Q.push(ie)),Q}function se(Q){var ie=Q._xScale,xe=Q._yScale||Q._scale,Ae=Q._index,Ne=Q._datasetIndex;return{xLabel:ie?ie.getLabelForIndex(Ae,Ne):"",yLabel:xe?xe.getLabelForIndex(Ae,Ne):"",index:Ae,datasetIndex:Ne,x:Q._model.x,y:Q._model.y}}function $(Q){var ie=Ze.global,xe=j.valueOrDefault;return{xPadding:Q.xPadding,yPadding:Q.yPadding,xAlign:Q.xAlign,yAlign:Q.yAlign,bodyFontColor:Q.bodyFontColor,_bodyFontFamily:xe(Q.bodyFontFamily,ie.defaultFontFamily),_bodyFontStyle:xe(Q.bodyFontStyle,ie.defaultFontStyle),_bodyAlign:Q.bodyAlign,bodyFontSize:xe(Q.bodyFontSize,ie.defaultFontSize),bodySpacing:Q.bodySpacing,titleFontColor:Q.titleFontColor,_titleFontFamily:xe(Q.titleFontFamily,ie.defaultFontFamily),_titleFontStyle:xe(Q.titleFontStyle,ie.defaultFontStyle),titleFontSize:xe(Q.titleFontSize,ie.defaultFontSize),_titleAlign:Q.titleAlign,titleSpacing:Q.titleSpacing,titleMarginBottom:Q.titleMarginBottom,footerFontColor:Q.footerFontColor,_footerFontFamily:xe(Q.footerFontFamily,ie.defaultFontFamily),_footerFontStyle:xe(Q.footerFontStyle,ie.defaultFontStyle),footerFontSize:xe(Q.footerFontSize,ie.defaultFontSize),_footerAlign:Q.footerAlign,footerSpacing:Q.footerSpacing,footerMarginTop:Q.footerMarginTop,caretSize:Q.caretSize,cornerRadius:Q.cornerRadius,backgroundColor:Q.backgroundColor,opacity:0,legendColorBackground:Q.multiKeyBackground,displayColors:Q.displayColors,borderColor:Q.borderColor,borderWidth:Q.borderWidth}}ye.Tooltip=je.extend({initialize:function(){this._model=$(this._options),this._lastActive=[]},getTitle:function(){var Q=this,ie=Q._options.callbacks,xe=ie.beforeTitle.apply(Q,arguments),Ae=ie.title.apply(Q,arguments),Ne=ie.afterTitle.apply(Q,arguments),Ee=[];return Ee=U(Ee,xe),Ee=U(Ee,Ae),U(Ee,Ne)},getBeforeBody:function(){var Q=this._options.callbacks.beforeBody.apply(this,arguments);return j.isArray(Q)?Q:void 0!==Q?[Q]:[]},getBody:function(Q,ie){var xe=this,Ae=xe._options.callbacks,Ne=[];return j.each(Q,function(Ee){var nt={before:[],lines:[],after:[]};U(nt.before,Ae.beforeLabel.call(xe,Ee,ie)),U(nt.lines,Ae.label.call(xe,Ee,ie)),U(nt.after,Ae.afterLabel.call(xe,Ee,ie)),Ne.push(nt)}),Ne},getAfterBody:function(){var Q=this._options.callbacks.afterBody.apply(this,arguments);return j.isArray(Q)?Q:void 0!==Q?[Q]:[]},getFooter:function(){var Q=this,ie=Q._options.callbacks,xe=ie.beforeFooter.apply(Q,arguments),Ae=ie.footer.apply(Q,arguments),Ne=ie.afterFooter.apply(Q,arguments),Ee=[];return Ee=U(Ee,xe),Ee=U(Ee,Ae),U(Ee,Ne)},update:function(Q){var ie,xe,Ae=this,Ne=Ae._options,Ee=Ae._model,nt=Ae._model=$(Ne),Wt=Ae._active,qe=Ae._data,$e={xAlign:Ee.xAlign,yAlign:Ee.yAlign},Ie={x:Ee.x,y:Ee.y},de={width:Ee.width,height:Ee.height},Fe={x:Ee.caretX,y:Ee.caretY};if(Wt.length){nt.opacity=1;var le=[],Ge=[];Fe=ye.Tooltip.positioners[Ne.position].call(Ae,Wt,Ae._eventPosition);var Qe=[];for(ie=0,xe=Wt.length;ie<xe;++ie)Qe.push(se(Wt[ie]));Ne.filter&&(Qe=Qe.filter(function(ht){return Ne.filter(ht,qe)})),Ne.itemSort&&(Qe=Qe.sort(function(ht,Jt){return Ne.itemSort(ht,Jt,qe)})),j.each(Qe,function(ht){le.push(Ne.callbacks.labelColor.call(Ae,ht,Ae._chart)),Ge.push(Ne.callbacks.labelTextColor.call(Ae,ht,Ae._chart))}),nt.title=Ae.getTitle(Qe,qe),nt.beforeBody=Ae.getBeforeBody(Qe,qe),nt.body=Ae.getBody(Qe,qe),nt.afterBody=Ae.getAfterBody(Qe,qe),nt.footer=Ae.getFooter(Qe,qe),nt.x=Math.round(Fe.x),nt.y=Math.round(Fe.y),nt.caretPadding=Ne.caretPadding,nt.labelColors=le,nt.labelTextColors=Ge,nt.dataPoints=Qe,Ie=function ne(Q,ie,xe){var Ae=Q.x,Ne=Q.y,nt=Q.caretPadding,qe=xe.xAlign,$e=xe.yAlign,Ie=Q.caretSize+nt,de=Q.cornerRadius+nt;return"right"===qe?Ae-=ie.width:"center"===qe&&(Ae-=ie.width/2),"top"===$e?Ne+=Ie:Ne-="bottom"===$e?ie.height+Ie:ie.height/2,"center"===$e?"left"===qe?Ae+=Ie:"right"===qe&&(Ae-=Ie):"left"===qe?Ae-=de:"right"===qe&&(Ae+=de),{x:Ae,y:Ne}}(nt,de=function Z(Q,ie){var xe=Q._chart.ctx,Ae=2*ie.yPadding,Ne=0,Ee=ie.body,nt=Ee.reduce(function(Ge,Qe){return Ge+Qe.before.length+Qe.lines.length+Qe.after.length},0),Wt=ie.title.length,qe=ie.footer.length,$e=ie.titleFontSize,Ie=ie.bodyFontSize,de=ie.footerFontSize;Ae+=Wt*$e,Ae+=Wt?(Wt-1)*ie.titleSpacing:0,Ae+=Wt?ie.titleMarginBottom:0,Ae+=(nt+=ie.beforeBody.length+ie.afterBody.length)*Ie,Ae+=nt?(nt-1)*ie.bodySpacing:0,Ae+=qe?ie.footerMarginTop:0,Ae+=qe*de,Ae+=qe?(qe-1)*ie.footerSpacing:0;var Fe=0,le=function(Ge){Ne=Math.max(Ne,xe.measureText(Ge).width+Fe)};return xe.font=j.fontString($e,ie._titleFontStyle,ie._titleFontFamily),j.each(ie.title,le),xe.font=j.fontString(Ie,ie._bodyFontStyle,ie._bodyFontFamily),j.each(ie.beforeBody.concat(ie.afterBody),le),Fe=ie.displayColors?Ie+2:0,j.each(Ee,function(Ge){j.each(Ge.before,le),j.each(Ge.lines,le),j.each(Ge.after,le)}),Fe=0,xe.font=j.fontString(de,ie._footerFontStyle,ie._footerFontFamily),j.each(ie.footer,le),{width:Ne+=2*ie.xPadding,height:Ae}}(this,nt),$e=function oe(Q,ie){var xe=Q._model,Ae=Q._chart,Ne=Q._chart.chartArea,Ee="center",nt="center";xe.y<ie.height?nt="top":xe.y>Ae.height-ie.height&&(nt="bottom");var Wt,qe,$e,Ie,de,Fe=(Ne.left+Ne.right)/2,le=(Ne.top+Ne.bottom)/2;"center"===nt?(Wt=function(Qe){return Qe<=Fe},qe=function(Qe){return Qe>Fe}):(Wt=function(Qe){return Qe<=ie.width/2},qe=function(Qe){return Qe>=Ae.width-ie.width/2}),$e=function(Qe){return Qe+ie.width>Ae.width},Ie=function(Qe){return Qe-ie.width<0},de=function(Qe){return Qe<=le?"top":"bottom"},Wt(xe.x)?(Ee="left",$e(xe.x)&&(Ee="center",nt=de(xe.y))):qe(xe.x)&&(Ee="right",Ie(xe.x)&&(Ee="center",nt=de(xe.y)));var Ge=Q._options;return{xAlign:Ge.xAlign?Ge.xAlign:Ee,yAlign:Ge.yAlign?Ge.yAlign:nt}}(this,de))}else nt.opacity=0;return nt.xAlign=$e.xAlign,nt.yAlign=$e.yAlign,nt.x=Ie.x,nt.y=Ie.y,nt.width=de.width,nt.height=de.height,nt.caretX=Fe.x,nt.caretY=Fe.y,Ae._model=nt,Q&&Ne.custom&&Ne.custom.call(Ae,nt),Ae},drawCaret:function(Q,ie){var xe=this._chart.ctx,Ne=this.getCaretPosition(Q,ie,this._view);xe.lineTo(Ne.x1,Ne.y1),xe.lineTo(Ne.x2,Ne.y2),xe.lineTo(Ne.x3,Ne.y3)},getCaretPosition:function(Q,ie,xe){var Ae,Ne,Ee,nt,Wt,qe,$e=xe.caretSize,Ie=xe.cornerRadius,de=xe.xAlign,Fe=xe.yAlign,le=Q.x,Ge=Q.y,Qe=ie.width,ht=ie.height;if("center"===Fe)Wt=Ge+ht/2,"left"===de?(Ne=(Ae=le)-$e,Ee=Ae,nt=Wt+$e,qe=Wt-$e):(Ne=(Ae=le+Qe)+$e,Ee=Ae,nt=Wt-$e,qe=Wt+$e);else if("left"===de?(Ae=(Ne=le+Ie+$e)-$e,Ee=Ne+$e):"right"===de?(Ae=(Ne=le+Qe-Ie-$e)-$e,Ee=Ne+$e):(Ae=(Ne=le+Qe/2)-$e,Ee=Ne+$e),"top"===Fe)Wt=(nt=Ge)-$e,qe=nt;else{Wt=(nt=Ge+ht)+$e,qe=nt;var Jt=Ee;Ee=Ae,Ae=Jt}return{x1:Ae,x2:Ne,x3:Ee,y1:nt,y2:Wt,y3:qe}},drawTitle:function(Q,ie,xe,Ae){var Ne=ie.title;if(Ne.length){xe.textAlign=ie._titleAlign,xe.textBaseline="top";var Wt,qe,Ee=ie.titleFontSize,nt=ie.titleSpacing;for(xe.fillStyle=F(ie.titleFontColor,Ae),xe.font=j.fontString(Ee,ie._titleFontStyle,ie._titleFontFamily),Wt=0,qe=Ne.length;Wt<qe;++Wt)xe.fillText(Ne[Wt],Q.x,Q.y),Q.y+=Ee+nt,Wt+1===Ne.length&&(Q.y+=ie.titleMarginBottom-nt)}},drawBody:function(Q,ie,xe,Ae){var Ne=ie.bodyFontSize,Ee=ie.bodySpacing,nt=ie.body;xe.textAlign=ie._bodyAlign,xe.textBaseline="top",xe.font=j.fontString(Ne,ie._bodyFontStyle,ie._bodyFontFamily);var Wt=0,qe=function(Ie){xe.fillText(Ie,Q.x+Wt,Q.y),Q.y+=Ne+Ee};xe.fillStyle=F(ie.bodyFontColor,Ae),j.each(ie.beforeBody,qe);var $e=ie.displayColors;Wt=$e?Ne+2:0,j.each(nt,function(Ie,de){var Fe=F(ie.labelTextColors[de],Ae);xe.fillStyle=Fe,j.each(Ie.before,qe),j.each(Ie.lines,function(le){$e&&(xe.fillStyle=F(ie.legendColorBackground,Ae),xe.fillRect(Q.x,Q.y,Ne,Ne),xe.lineWidth=1,xe.strokeStyle=F(ie.labelColors[de].borderColor,Ae),xe.strokeRect(Q.x,Q.y,Ne,Ne),xe.fillStyle=F(ie.labelColors[de].backgroundColor,Ae),xe.fillRect(Q.x+1,Q.y+1,Ne-2,Ne-2),xe.fillStyle=Fe),qe(le)}),j.each(Ie.after,qe)}),Wt=0,j.each(ie.afterBody,qe),Q.y-=Ee},drawFooter:function(Q,ie,xe,Ae){var Ne=ie.footer;Ne.length&&(Q.y+=ie.footerMarginTop,xe.textAlign=ie._footerAlign,xe.textBaseline="top",xe.fillStyle=F(ie.footerFontColor,Ae),xe.font=j.fontString(ie.footerFontSize,ie._footerFontStyle,ie._footerFontFamily),j.each(Ne,function(Ee){xe.fillText(Ee,Q.x,Q.y),Q.y+=ie.footerFontSize+ie.footerSpacing}))},drawBackground:function(Q,ie,xe,Ae,Ne){xe.fillStyle=F(ie.backgroundColor,Ne),xe.strokeStyle=F(ie.borderColor,Ne),xe.lineWidth=ie.borderWidth;var Ee=ie.xAlign,nt=ie.yAlign,Wt=Q.x,qe=Q.y,$e=Ae.width,Ie=Ae.height,de=ie.cornerRadius;xe.beginPath(),xe.moveTo(Wt+de,qe),"top"===nt&&this.drawCaret(Q,Ae),xe.lineTo(Wt+$e-de,qe),xe.quadraticCurveTo(Wt+$e,qe,Wt+$e,qe+de),"center"===nt&&"right"===Ee&&this.drawCaret(Q,Ae),xe.lineTo(Wt+$e,qe+Ie-de),xe.quadraticCurveTo(Wt+$e,qe+Ie,Wt+$e-de,qe+Ie),"bottom"===nt&&this.drawCaret(Q,Ae),xe.lineTo(Wt+de,qe+Ie),xe.quadraticCurveTo(Wt,qe+Ie,Wt,qe+Ie-de),"center"===nt&&"left"===Ee&&this.drawCaret(Q,Ae),xe.lineTo(Wt,qe+de),xe.quadraticCurveTo(Wt,qe,Wt+de,qe),xe.closePath(),xe.fill(),ie.borderWidth>0&&xe.stroke()},draw:function(){var Q=this._chart.ctx,ie=this._view;if(0!==ie.opacity){var xe={width:ie.width,height:ie.height},Ae={x:ie.x,y:ie.y},Ne=Math.abs(ie.opacity<.001)?0:ie.opacity;this._options.enabled&&(ie.title.length||ie.beforeBody.length||ie.body.length||ie.afterBody.length||ie.footer.length)&&(this.drawBackground(Ae,ie,Q,xe,Ne),Ae.x+=ie.xPadding,Ae.y+=ie.yPadding,this.drawTitle(Ae,ie,Q,Ne),this.drawBody(Ae,ie,Q,Ne),this.drawFooter(Ae,ie,Q,Ne))}},handleEvent:function(Q){var ie=this,xe=ie._options,Ae=!1;if(ie._lastActive=ie._lastActive||[],ie._active="mouseout"===Q.type?[]:ie._chart.getElementsAtEventForMode(Q,xe.mode,xe),!(Ae=!j.arrayEquals(ie._active,ie._lastActive)))return!1;if(ie._lastActive=ie._active,xe.enabled||xe.custom){ie._eventPosition={x:Q.x,y:Q.y};var Ne=ie._model;ie.update(!0),ie.pivot(),Ae|=Ne.x!==ie._model.x||Ne.y!==ie._model.y}return Ae}}),ye.Tooltip.positioners={average:function(Q){if(!Q.length)return!1;var ie,xe,Ae=0,Ne=0,Ee=0;for(ie=0,xe=Q.length;ie<xe;++ie){var nt=Q[ie];if(nt&&nt.hasValue()){var Wt=nt.tooltipPosition();Ae+=Wt.x,Ne+=Wt.y,++Ee}}return{x:Math.round(Ae/Ee),y:Math.round(Ne/Ee)}},nearest:function(Q,ie){var xe,Ae,Ne,Ee=ie.x,nt=ie.y,Wt=Number.POSITIVE_INFINITY;for(xe=0,Ae=Q.length;xe<Ae;++xe){var qe=Q[xe];if(qe&&qe.hasValue()){var $e=qe.getCenterPoint(),Ie=j.distanceBetweenPoints(ie,$e);Ie<Wt&&(Wt=Ie,Ne=qe)}}if(Ne){var de=Ne.tooltipPosition();Ee=de.x,nt=de.y}return{x:Ee,y:nt}}}}},{25:25,26:26,45:45}],36:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(26),j=pt(45);Ze._set("global",{elements:{arc:{backgroundColor:Ze.global.defaultColor,borderColor:"#fff",borderWidth:2}}}),hn.exports=je.extend({inLabelRange:function(ye){var F=this._view;return!!F&&Math.pow(ye-F.x,2)<Math.pow(F.radius+F.hoverRadius,2)},inRange:function(ye,F){var U=this._view;if(U){for(var se=j.getAngleFromPoint(U,{x:ye,y:F}),$=se.angle,Z=se.distance,oe=U.startAngle,ne=U.endAngle;ne<oe;)ne+=2*Math.PI;for(;$>ne;)$-=2*Math.PI;for(;$<oe;)$+=2*Math.PI;return $>=oe&&$<=ne&&Z>=U.innerRadius&&Z<=U.outerRadius}return!1},getCenterPoint:function(){var ye=this._view,F=(ye.startAngle+ye.endAngle)/2,U=(ye.innerRadius+ye.outerRadius)/2;return{x:ye.x+Math.cos(F)*U,y:ye.y+Math.sin(F)*U}},getArea:function(){var ye=this._view;return Math.PI*((ye.endAngle-ye.startAngle)/(2*Math.PI))*(Math.pow(ye.outerRadius,2)-Math.pow(ye.innerRadius,2))},tooltipPosition:function(){var ye=this._view,F=ye.startAngle+(ye.endAngle-ye.startAngle)/2,U=(ye.outerRadius-ye.innerRadius)/2+ye.innerRadius;return{x:ye.x+Math.cos(F)*U,y:ye.y+Math.sin(F)*U}},draw:function(){var ye=this._chart.ctx,F=this._view,U=F.startAngle,se=F.endAngle;ye.beginPath(),ye.arc(F.x,F.y,F.outerRadius,U,se),ye.arc(F.x,F.y,F.innerRadius,se,U,!0),ye.closePath(),ye.strokeStyle=F.borderColor,ye.lineWidth=F.borderWidth,ye.fillStyle=F.backgroundColor,ye.fill(),ye.lineJoin="bevel",F.borderWidth&&ye.stroke()}})},{25:25,26:26,45:45}],37:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(26),j=pt(45),ye=Ze.global;Ze._set("global",{elements:{line:{tension:.4,backgroundColor:ye.defaultColor,borderWidth:3,borderColor:ye.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}}),hn.exports=je.extend({draw:function(){var F,U,se,$,Z=this,oe=Z._view,ne=Z._chart.ctx,Q=oe.spanGaps,ie=Z._children.slice(),xe=ye.elements.line,Ae=-1;for(Z._loop&&ie.length&&ie.push(ie[0]),ne.save(),ne.lineCap=oe.borderCapStyle||xe.borderCapStyle,ne.setLineDash&&ne.setLineDash(oe.borderDash||xe.borderDash),ne.lineDashOffset=oe.borderDashOffset||xe.borderDashOffset,ne.lineJoin=oe.borderJoinStyle||xe.borderJoinStyle,ne.lineWidth=oe.borderWidth||xe.borderWidth,ne.strokeStyle=oe.borderColor||ye.defaultColor,ne.beginPath(),Ae=-1,F=0;F<ie.length;++F)U=ie[F],se=j.previousItem(ie,F),$=U._view,0===F?$.skip||(ne.moveTo($.x,$.y),Ae=F):(se=-1===Ae?se:ie[Ae],$.skip||(Ae!==F-1&&!Q||-1===Ae?ne.moveTo($.x,$.y):j.canvas.lineTo(ne,se._view,U._view),Ae=F));ne.stroke(),ne.restore()}})},{25:25,26:26,45:45}],38:[function(pt,hn,gr){"use strict";function Ze(U){var se=this._view;return!!se&&Math.pow(U-se.x,2)<Math.pow(se.radius+se.hitRadius,2)}var je=pt(25),j=pt(26),ye=pt(45),F=je.global.defaultColor;je._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:F,borderColor:F,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}}),hn.exports=j.extend({inRange:function(U,se){var $=this._view;return!!$&&Math.pow(U-$.x,2)+Math.pow(se-$.y,2)<Math.pow($.hitRadius+$.radius,2)},inLabelRange:Ze,inXRange:Ze,inYRange:function(U){var se=this._view;return!!se&&Math.pow(U-se.y,2)<Math.pow(se.radius+se.hitRadius,2)},getCenterPoint:function(){var U=this._view;return{x:U.x,y:U.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var U=this._view;return{x:U.x,y:U.y,padding:U.radius+U.borderWidth}},draw:function(U){var se=this._view,$=this._model,Z=this._chart.ctx,oe=se.pointStyle,ne=se.radius,Q=se.x,ie=se.y,xe=ye.color,Ae=0;se.skip||(Z.strokeStyle=se.borderColor||F,Z.lineWidth=ye.valueOrDefault(se.borderWidth,je.global.elements.point.borderWidth),Z.fillStyle=se.backgroundColor||F,void 0!==U&&($.x<U.left||1.01*U.right<$.x||$.y<U.top||1.01*U.bottom<$.y)&&($.x<U.left?Ae=(Q-$.x)/(U.left-$.x):1.01*U.right<$.x?Ae=($.x-Q)/($.x-U.right):$.y<U.top?Ae=(ie-$.y)/(U.top-$.y):1.01*U.bottom<$.y&&(Ae=($.y-ie)/($.y-U.bottom)),Ae=Math.round(100*Ae)/100,Z.strokeStyle=xe(Z.strokeStyle).alpha(Ae).rgbString(),Z.fillStyle=xe(Z.fillStyle).alpha(Ae).rgbString()),ye.canvas.drawPoint(Z,oe,ne,Q,ie))}})},{25:25,26:26,45:45}],39:[function(pt,hn,gr){"use strict";function Ze(F){return void 0!==F._view.width}function je(F){var U,se,$,Z,oe=F._view;if(Ze(F)){var ne=oe.width/2;U=oe.x-ne,se=oe.x+ne,$=Math.min(oe.y,oe.base),Z=Math.max(oe.y,oe.base)}else{var Q=oe.height/2;U=Math.min(oe.x,oe.base),se=Math.max(oe.x,oe.base),$=oe.y-Q,Z=oe.y+Q}return{left:U,top:$,right:se,bottom:Z}}var j=pt(25),ye=pt(26);j._set("global",{elements:{rectangle:{backgroundColor:j.global.defaultColor,borderColor:j.global.defaultColor,borderSkipped:"bottom",borderWidth:0}}}),hn.exports=ye.extend({draw:function(){function F(Ge){return Ie[(de+Ge)%4]}var U,se,$,Z,oe,ne,Q,ie=this._chart.ctx,xe=this._view,Ae=xe.borderWidth;if(xe.horizontal?($=xe.y-xe.height/2,Z=xe.y+xe.height/2,oe=(se=xe.x)>(U=xe.base)?1:-1,ne=1,Q=xe.borderSkipped||"left"):(U=xe.x-xe.width/2,se=xe.x+xe.width/2,oe=1,ne=(Z=xe.base)>($=xe.y)?1:-1,Q=xe.borderSkipped||"bottom"),Ae){var Ne=Math.min(Math.abs(U-se),Math.abs($-Z)),Ee=(Ae=Ae>Ne?Ne:Ae)/2,nt=U+("left"!==Q?Ee*oe:0),Wt=se+("right"!==Q?-Ee*oe:0),qe=$+("top"!==Q?Ee*ne:0),$e=Z+("bottom"!==Q?-Ee*ne:0);nt!==Wt&&($=qe,Z=$e),qe!==$e&&(U=nt,se=Wt)}ie.beginPath(),ie.fillStyle=xe.backgroundColor,ie.strokeStyle=xe.borderColor,ie.lineWidth=Ae;var Ie=[[U,Z],[U,$],[se,$],[se,Z]],de=["bottom","left","top","right"].indexOf(Q,0);-1===de&&(de=0);var Fe=F(0);ie.moveTo(Fe[0],Fe[1]);for(var le=1;le<4;le++)Fe=F(le),ie.lineTo(Fe[0],Fe[1]);ie.fill(),Ae&&ie.stroke()},height:function(){var F=this._view;return F.base-F.y},inRange:function(F,U){var se=!1;if(this._view){var $=je(this);se=F>=$.left&&F<=$.right&&U>=$.top&&U<=$.bottom}return se},inLabelRange:function(F,U){if(!this._view)return!1;var $=je(this);return Ze(this)?F>=$.left&&F<=$.right:U>=$.top&&U<=$.bottom},inXRange:function(F){var U=je(this);return F>=U.left&&F<=U.right},inYRange:function(F){var U=je(this);return F>=U.top&&F<=U.bottom},getCenterPoint:function(){var F,U,se=this._view;return Ze(this)?(F=se.x,U=(se.y+se.base)/2):(F=(se.x+se.base)/2,U=se.y),{x:F,y:U}},getArea:function(){var F=this._view;return F.width*Math.abs(F.y-F.base)},tooltipPosition:function(){var F=this._view;return{x:F.x,y:F.y}}})},{25:25,26:26}],40:[function(pt,hn,gr){"use strict";hn.exports={},hn.exports.Arc=pt(36),hn.exports.Line=pt(37),hn.exports.Point=pt(38),hn.exports.Rectangle=pt(39)},{36:36,37:37,38:38,39:39}],41:[function(pt,hn,je){"use strict";var Ze=pt(42);je=hn.exports={clear:function(j){j.ctx.clearRect(0,0,j.width,j.height)},roundedRect:function(j,ye,F,U,se,$){if($){var Z=Math.min($,U/2),oe=Math.min($,se/2);j.moveTo(ye+Z,F),j.lineTo(ye+U-Z,F),j.quadraticCurveTo(ye+U,F,ye+U,F+oe),j.lineTo(ye+U,F+se-oe),j.quadraticCurveTo(ye+U,F+se,ye+U-Z,F+se),j.lineTo(ye+Z,F+se),j.quadraticCurveTo(ye,F+se,ye,F+se-oe),j.lineTo(ye,F+oe),j.quadraticCurveTo(ye,F,ye+Z,F)}else j.rect(ye,F,U,se)},drawPoint:function(j,ye,F,U,se){var $,Z,oe,ne,Q,ie;if(!ye||"object"!=typeof ye||"[object HTMLImageElement]"!==($=ye.toString())&&"[object HTMLCanvasElement]"!==$){if(!(isNaN(F)||F<=0)){switch(ye){default:j.beginPath(),j.arc(U,se,F,0,2*Math.PI),j.closePath(),j.fill();break;case"triangle":j.beginPath(),Q=(Z=3*F/Math.sqrt(3))*Math.sqrt(3)/2,j.moveTo(U-Z/2,se+Q/3),j.lineTo(U+Z/2,se+Q/3),j.lineTo(U,se-2*Q/3),j.closePath(),j.fill();break;case"rect":ie=1/Math.SQRT2*F,j.beginPath(),j.fillRect(U-ie,se-ie,2*ie,2*ie),j.strokeRect(U-ie,se-ie,2*ie,2*ie);break;case"rectRounded":var xe=F/Math.SQRT2,Ae=U-xe,Ne=se-xe,Ee=Math.SQRT2*F;j.beginPath(),this.roundedRect(j,Ae,Ne,Ee,Ee,F/2),j.closePath(),j.fill();break;case"rectRot":ie=1/Math.SQRT2*F,j.beginPath(),j.moveTo(U-ie,se),j.lineTo(U,se+ie),j.lineTo(U+ie,se),j.lineTo(U,se-ie),j.closePath(),j.fill();break;case"cross":j.beginPath(),j.moveTo(U,se+F),j.lineTo(U,se-F),j.moveTo(U-F,se),j.lineTo(U+F,se),j.closePath();break;case"crossRot":j.beginPath(),oe=Math.cos(Math.PI/4)*F,ne=Math.sin(Math.PI/4)*F,j.moveTo(U-oe,se-ne),j.lineTo(U+oe,se+ne),j.moveTo(U-oe,se+ne),j.lineTo(U+oe,se-ne),j.closePath();break;case"star":j.beginPath(),j.moveTo(U,se+F),j.lineTo(U,se-F),j.moveTo(U-F,se),j.lineTo(U+F,se),oe=Math.cos(Math.PI/4)*F,ne=Math.sin(Math.PI/4)*F,j.moveTo(U-oe,se-ne),j.lineTo(U+oe,se+ne),j.moveTo(U-oe,se+ne),j.lineTo(U+oe,se-ne),j.closePath();break;case"line":j.beginPath(),j.moveTo(U-F,se),j.lineTo(U+F,se),j.closePath();break;case"dash":j.beginPath(),j.moveTo(U,se),j.lineTo(U+F,se),j.closePath()}j.stroke()}}else j.drawImage(ye,U-ye.width/2,se-ye.height/2,ye.width,ye.height)},clipArea:function(j,ye){j.save(),j.beginPath(),j.rect(ye.left,ye.top,ye.right-ye.left,ye.bottom-ye.top),j.clip()},unclipArea:function(j){j.restore()},lineTo:function(j,ye,F,U){if(F.steppedLine)return"after"===F.steppedLine&&!U||"after"!==F.steppedLine&&U?j.lineTo(ye.x,F.y):j.lineTo(F.x,ye.y),void j.lineTo(F.x,F.y);F.tension?j.bezierCurveTo(U?ye.controlPointPreviousX:ye.controlPointNextX,U?ye.controlPointPreviousY:ye.controlPointNextY,U?F.controlPointNextX:F.controlPointPreviousX,U?F.controlPointNextY:F.controlPointPreviousY,F.x,F.y):j.lineTo(F.x,F.y)}},Ze.clear=je.clear,Ze.drawRoundedRectangle=function(j){j.beginPath(),je.roundedRect.apply(je,arguments),j.closePath()}},{42:42}],42:[function(pt,hn,gr){"use strict";var je,Ze={noop:function(){},uid:(je=0,function(){return je++}),isNullOrUndef:function(je){return null==je},isArray:Array.isArray?Array.isArray:function(je){return"[object Array]"===Object.prototype.toString.call(je)},isObject:function(je){return null!==je&&"[object Object]"===Object.prototype.toString.call(je)},valueOrDefault:function(je,j){return void 0===je?j:je},valueAtIndexOrDefault:function(je,j,ye){return Ze.valueOrDefault(Ze.isArray(je)?je[j]:je,ye)},callback:function(je,j,ye){if(je&&"function"==typeof je.call)return je.apply(ye,j)},each:function(je,j,ye,F){var U,se,$;if(Ze.isArray(je))if(se=je.length,F)for(U=se-1;U>=0;U--)j.call(ye,je[U],U);else for(U=0;U<se;U++)j.call(ye,je[U],U);else if(Ze.isObject(je))for(se=($=Object.keys(je)).length,U=0;U<se;U++)j.call(ye,je[$[U]],$[U])},arrayEquals:function(je,j){var ye,F,U,se;if(!je||!j||je.length!==j.length)return!1;for(ye=0,F=je.length;ye<F;++ye)if(se=j[ye],(U=je[ye])instanceof Array&&se instanceof Array){if(!Ze.arrayEquals(U,se))return!1}else if(U!==se)return!1;return!0},clone:function(je){if(Ze.isArray(je))return je.map(Ze.clone);if(Ze.isObject(je)){for(var j={},ye=Object.keys(je),F=ye.length,U=0;U<F;++U)j[ye[U]]=Ze.clone(je[ye[U]]);return j}return je},_merger:function(je,j,ye,F){var U=j[je],se=ye[je];Ze.isObject(U)&&Ze.isObject(se)?Ze.merge(U,se,F):j[je]=Ze.clone(se)},_mergerIf:function(je,j,ye){var F=j[je],U=ye[je];Ze.isObject(F)&&Ze.isObject(U)?Ze.mergeIf(F,U):j.hasOwnProperty(je)||(j[je]=Ze.clone(U))},merge:function(je,j,ye){var F,U,se,$,Z,oe=Ze.isArray(j)?j:[j],ne=oe.length;if(!Ze.isObject(je))return je;for(F=(ye=ye||{}).merger||Ze._merger,U=0;U<ne;++U)if(Ze.isObject(j=oe[U]))for(Z=0,$=(se=Object.keys(j)).length;Z<$;++Z)F(se[Z],je,j,ye);return je},mergeIf:function(je,j){return Ze.merge(je,j,{merger:Ze._mergerIf})},extend:function(je){for(var j=1,ye=arguments.length;j<ye;++j)Ze.each(arguments[j],function(F,U){je[U]=F});return je},inherits:function(je){var j=this,ye=je&&je.hasOwnProperty("constructor")?je.constructor:function(){return j.apply(this,arguments)},F=function(){this.constructor=ye};return F.prototype=j.prototype,ye.prototype=new F,ye.extend=Ze.inherits,je&&Ze.extend(ye.prototype,je),ye.__super__=j.prototype,ye}};hn.exports=Ze,Ze.callCallback=Ze.callback,Ze.indexOf=function(je,j,ye){return Array.prototype.indexOf.call(je,j,ye)},Ze.getValueOrDefault=Ze.valueOrDefault,Ze.getValueAtIndexOrDefault=Ze.valueAtIndexOrDefault},{}],43:[function(pt,hn,gr){"use strict";var Ze=pt(42),je={linear:function(j){return j},easeInQuad:function(j){return j*j},easeOutQuad:function(j){return-j*(j-2)},easeInOutQuad:function(j){return(j/=.5)<1?.5*j*j:-.5*(--j*(j-2)-1)},easeInCubic:function(j){return j*j*j},easeOutCubic:function(j){return(j-=1)*j*j+1},easeInOutCubic:function(j){return(j/=.5)<1?.5*j*j*j:.5*((j-=2)*j*j+2)},easeInQuart:function(j){return j*j*j*j},easeOutQuart:function(j){return-((j-=1)*j*j*j-1)},easeInOutQuart:function(j){return(j/=.5)<1?.5*j*j*j*j:-.5*((j-=2)*j*j*j-2)},easeInQuint:function(j){return j*j*j*j*j},easeOutQuint:function(j){return(j-=1)*j*j*j*j+1},easeInOutQuint:function(j){return(j/=.5)<1?.5*j*j*j*j*j:.5*((j-=2)*j*j*j*j+2)},easeInSine:function(j){return 1-Math.cos(j*(Math.PI/2))},easeOutSine:function(j){return Math.sin(j*(Math.PI/2))},easeInOutSine:function(j){return-.5*(Math.cos(Math.PI*j)-1)},easeInExpo:function(j){return 0===j?0:Math.pow(2,10*(j-1))},easeOutExpo:function(j){return 1===j?1:1-Math.pow(2,-10*j)},easeInOutExpo:function(j){return 0===j?0:1===j?1:(j/=.5)<1?.5*Math.pow(2,10*(j-1)):.5*(2-Math.pow(2,-10*--j))},easeInCirc:function(j){return j>=1?j:-(Math.sqrt(1-j*j)-1)},easeOutCirc:function(j){return Math.sqrt(1-(j-=1)*j)},easeInOutCirc:function(j){return(j/=.5)<1?-.5*(Math.sqrt(1-j*j)-1):.5*(Math.sqrt(1-(j-=2)*j)+1)},easeInElastic:function(j){var ye=1.70158,F=0,U=1;return 0===j?0:1===j?1:(F||(F=.3),U<1?(U=1,ye=F/4):ye=F/(2*Math.PI)*Math.asin(1/U),-U*Math.pow(2,10*(j-=1))*Math.sin((j-ye)*(2*Math.PI)/F))},easeOutElastic:function(j){var ye=1.70158,F=0,U=1;return 0===j?0:1===j?1:(F||(F=.3),U<1?(U=1,ye=F/4):ye=F/(2*Math.PI)*Math.asin(1/U),U*Math.pow(2,-10*j)*Math.sin((j-ye)*(2*Math.PI)/F)+1)},easeInOutElastic:function(j){var ye=1.70158,F=0,U=1;return 0===j?0:2==(j/=.5)?1:(F||(F=.45),U<1?(U=1,ye=F/4):ye=F/(2*Math.PI)*Math.asin(1/U),j<1?U*Math.pow(2,10*(j-=1))*Math.sin((j-ye)*(2*Math.PI)/F)*-.5:U*Math.pow(2,-10*(j-=1))*Math.sin((j-ye)*(2*Math.PI)/F)*.5+1)},easeInBack:function(j){return j*j*(2.70158*j-1.70158)},easeOutBack:function(j){return(j-=1)*j*(2.70158*j+1.70158)+1},easeInOutBack:function(j){var ye=1.70158;return(j/=.5)<1?j*j*((1+(ye*=1.525))*j-ye)*.5:.5*((j-=2)*j*((1+(ye*=1.525))*j+ye)+2)},easeInBounce:function(j){return 1-je.easeOutBounce(1-j)},easeOutBounce:function(j){return j<1/2.75?7.5625*j*j:j<2/2.75?7.5625*(j-=1.5/2.75)*j+.75:j<2.5/2.75?7.5625*(j-=2.25/2.75)*j+.9375:7.5625*(j-=2.625/2.75)*j+.984375},easeInOutBounce:function(j){return j<.5?.5*je.easeInBounce(2*j):.5*je.easeOutBounce(2*j-1)+.5}};hn.exports={effects:je},Ze.easingEffects=je},{42:42}],44:[function(pt,hn,gr){"use strict";var Ze=pt(42);hn.exports={toLineHeight:function(je,j){var ye=(""+je).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!ye||"normal"===ye[1])return 1.2*j;switch(je=+ye[2],ye[3]){case"px":return je;case"%":je/=100}return j*je},toPadding:function(je){var j,ye,F,U;return Ze.isObject(je)?(j=+je.top||0,ye=+je.right||0,F=+je.bottom||0,U=+je.left||0):j=ye=F=U=+je||0,{top:j,right:ye,bottom:F,left:U,height:j+F,width:U+ye}},resolve:function(je,j,ye){var F,U,se;for(F=0,U=je.length;F<U;++F)if(void 0!==(se=je[F])&&(void 0!==j&&"function"==typeof se&&(se=se(j)),void 0!==ye&&Ze.isArray(se)&&(se=se[ye]),void 0!==se))return se}}},{42:42}],45:[function(pt,hn,gr){"use strict";hn.exports=pt(42),hn.exports.easing=pt(43),hn.exports.canvas=pt(41),hn.exports.options=pt(44)},{41:41,42:42,43:43,44:44}],46:[function(pt,hn,gr){hn.exports={acquireContext:function(Ze){return Ze&&Ze.canvas&&(Ze=Ze.canvas),Ze&&Ze.getContext("2d")||null}}},{}],47:[function(pt,hn,gr){"use strict";function Ze(Ie,de){var Fe=xe.getStyle(Ie,de),le=Fe&&Fe.match(/^(\d+)(\.\d+)?px$/);return le?Number(le[1]):void 0}function j(Ie,de,Fe){Ie.addEventListener(de,Fe,$e)}function ye(Ie,de,Fe){Ie.removeEventListener(de,Fe,$e)}function F(Ie,de,Fe,le,Ge){return{type:Ie,chart:de,native:Ge||null,x:void 0!==Fe?Fe:null,y:void 0!==le?le:null}}var xe=pt(45),Ae="$chartjs",Ne="chartjs-",Ee=Ne+"render-monitor",nt=Ne+"render-animation",Wt=["animationstart","webkitAnimationStart"],qe={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},$e=!!function(){var Ie=!1;try{var de=Object.defineProperty({},"passive",{get:function(){Ie=!0}});window.addEventListener("e",null,de)}catch{}return Ie}()&&{passive:!0};hn.exports={_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,initialize:function(){var Ie="from{opacity:0.99}to{opacity:1}";!function ie(Ie,de){var Fe=Ie._style||document.createElement("style");Ie._style||(Ie._style=Fe,de="/* Chart.js */\n"+de,Fe.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(Fe)),Fe.appendChild(document.createTextNode(de))}(this,"@-webkit-keyframes "+nt+"{"+Ie+"}@keyframes "+nt+"{"+Ie+"}."+Ee+"{-webkit-animation:"+nt+" 0.001s;animation:"+nt+" 0.001s;}")},acquireContext:function(Ie,de){"string"==typeof Ie?Ie=document.getElementById(Ie):Ie.length&&(Ie=Ie[0]),Ie&&Ie.canvas&&(Ie=Ie.canvas);var Fe=Ie&&Ie.getContext&&Ie.getContext("2d");return Fe&&Fe.canvas===Ie?(function je(Ie,de){var Fe=Ie.style,le=Ie.getAttribute("height"),Ge=Ie.getAttribute("width");if(Ie[Ae]={initial:{height:le,width:Ge,style:{display:Fe.display,height:Fe.height,width:Fe.width}}},Fe.display=Fe.display||"block",null===Ge||""===Ge){var Qe=Ze(Ie,"width");void 0!==Qe&&(Ie.width=Qe)}if(null===le||""===le)if(""===Ie.style.height)Ie.height=Ie.width/(de.options.aspectRatio||2);else{var ht=Ze(Ie,"height");void 0!==Qe&&(Ie.height=ht)}}(Ie,de),Fe):null},releaseContext:function(Ie){var de=Ie.canvas;if(de[Ae]){var Fe=de[Ae].initial;["height","width"].forEach(function(le){var Ge=Fe[le];xe.isNullOrUndef(Ge)?de.removeAttribute(le):de.setAttribute(le,Ge)}),xe.each(Fe.style||{},function(le,Ge){de.style[Ge]=le}),de.width=de.width,delete de[Ae]}},addEventListener:function(Ie,de,Fe){var le=Ie.canvas;if("resize"!==de){var Ge=Fe[Ae]||(Fe[Ae]={});j(le,de,(Ge.proxies||(Ge.proxies={}))[Ie.id+"_"+de]=function(Qe){Fe(function U(Ie,de){var Fe=qe[Ie.type]||Ie.type,le=xe.getRelativePosition(Ie,de);return F(Fe,de,le.x,le.y,Ie)}(Qe,Ie))})}else!function ne(Ie,de,Fe){var le=Ie[Ae]||(Ie[Ae]={}),Ge=le.resizer=function $(Ie){var de=document.createElement("div"),Fe=Ne+"size-monitor",le="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;";de.style.cssText=le,de.className=Fe,de.innerHTML='<div class="'+Fe+'-expand" style="'+le+'"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="'+Fe+'-shrink" style="'+le+'"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div>';var Ge=de.childNodes[0],Qe=de.childNodes[1];de._reset=function(){Ge.scrollLeft=1e6,Ge.scrollTop=1e6,Qe.scrollLeft=1e6,Qe.scrollTop=1e6};var ht=function(){de._reset(),Ie()};return j(Ge,"scroll",ht.bind(Ge,"expand")),j(Qe,"scroll",ht.bind(Qe,"shrink")),de}(function se(Ie,de){var Fe=!1,le=[];return function(){le=Array.prototype.slice.call(arguments),de=de||this,Fe||(Fe=!0,xe.requestAnimFrame.call(window,function(){Fe=!1,Ie.apply(de,le)}))}}(function(){if(le.resizer)return de(F("resize",Fe))}));!function Z(Ie,de){var Fe=Ie[Ae]||(Ie[Ae]={}),le=Fe.renderProxy=function(Ge){Ge.animationName===nt&&de()};xe.each(Wt,function(Ge){j(Ie,Ge,le)}),Fe.reflow=!!Ie.offsetParent,Ie.classList.add(Ee)}(Ie,function(){if(le.resizer){var Qe=Ie.parentNode;Qe&&Qe!==Ge.parentNode&&Qe.insertBefore(Ge,Qe.firstChild),Ge._reset()}})}(le,Fe,Ie)},removeEventListener:function(Ie,de,Fe){var le=Ie.canvas;if("resize"!==de){var Ge=((Fe[Ae]||{}).proxies||{})[Ie.id+"_"+de];Ge&&ye(le,de,Ge)}else!function Q(Ie){var de=Ie[Ae]||{},Fe=de.resizer;delete de.resizer,function oe(Ie){var de=Ie[Ae]||{},Fe=de.renderProxy;Fe&&(xe.each(Wt,function(le){ye(Ie,le,Fe)}),delete de.renderProxy),Ie.classList.remove(Ee)}(Ie),Fe&&Fe.parentNode&&Fe.parentNode.removeChild(Fe)}(le)}},xe.addEvent=j,xe.removeEvent=ye},{45:45}],48:[function(pt,hn,gr){"use strict";var Ze=pt(45),je=pt(46),j=pt(47);hn.exports=Ze.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},j._enabled?j:je)},{45:45,46:46,47:47}],49:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(40),j=pt(45);Ze._set("global",{plugins:{filler:{propagate:!0}}}),hn.exports=function(){function ye(Q,ie,xe){var Ae,Ne=Q._model||{},Ee=Ne.fill;if(void 0===Ee&&(Ee=!!Ne.backgroundColor),!1===Ee||null===Ee)return!1;if(!0===Ee)return"origin";if(Ae=parseFloat(Ee,10),isFinite(Ae)&&Math.floor(Ae)===Ae)return"-"!==Ee[0]&&"+"!==Ee[0]||(Ae=ie+Ae),!(Ae===ie||Ae<0||Ae>=xe)&&Ae;switch(Ee){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return Ee;default:return!1}}function F(Q){var ie,xe=Q.el._model||{},Ae=Q.el._scale||{},Ne=Q.fill,Ee=null;if(isFinite(Ne))return null;if("start"===Ne?Ee=void 0===xe.scaleBottom?Ae.bottom:xe.scaleBottom:"end"===Ne?Ee=void 0===xe.scaleTop?Ae.top:xe.scaleTop:void 0!==xe.scaleZero?Ee=xe.scaleZero:Ae.getBasePosition?Ee=Ae.getBasePosition():Ae.getBasePixel&&(Ee=Ae.getBasePixel()),null!=Ee){if(void 0!==Ee.x&&void 0!==Ee.y)return Ee;if("number"==typeof Ee&&isFinite(Ee))return{x:(ie=Ae.isHorizontal())?Ee:null,y:ie?null:Ee}}return null}function U(Q,ie,xe){var Ae,Ne=Q[ie].fill,Ee=[ie];if(!xe)return Ne;for(;!1!==Ne&&-1===Ee.indexOf(Ne);){if(!isFinite(Ne))return Ne;if(!(Ae=Q[Ne]))return!1;if(Ae.visible)return Ne;Ee.push(Ne),Ne=Ae.fill}return!1}function se(Q){var ie=Q.fill,xe="dataset";return!1===ie?null:(isFinite(ie)||(xe="boundary"),ne[xe](Q))}function $(Q){return Q&&!Q.skip}function Z(Q,ie,xe,Ae,Ne){var Ee;if(Ae&&Ne){for(Q.moveTo(ie[0].x,ie[0].y),Ee=1;Ee<Ae;++Ee)j.canvas.lineTo(Q,ie[Ee-1],ie[Ee]);for(Q.lineTo(xe[Ne-1].x,xe[Ne-1].y),Ee=Ne-1;Ee>0;--Ee)j.canvas.lineTo(Q,xe[Ee],xe[Ee-1],!0)}}var ne={dataset:function(Q){var ie=Q.fill,xe=Q.chart,Ae=xe.getDatasetMeta(ie),Ne=Ae&&xe.isDatasetVisible(ie)&&Ae.dataset._children||[],Ee=Ne.length||0;return Ee?function(nt,Wt){return Wt<Ee&&Ne[Wt]._view||null}:null},boundary:function(Q){var ie=Q.boundary,xe=ie?ie.x:null,Ae=ie?ie.y:null;return function(Ne){return{x:null===xe?Ne.x:xe,y:null===Ae?Ne.y:Ae}}}};return{id:"filler",afterDatasetsUpdate:function(Q,ie){var xe,Ae,Ne,Ee,nt=(Q.data.datasets||[]).length,Wt=ie.propagate,qe=[];for(Ae=0;Ae<nt;++Ae)Ee=null,(Ne=(xe=Q.getDatasetMeta(Ae)).dataset)&&Ne._model&&Ne instanceof je.Line&&(Ee={visible:Q.isDatasetVisible(Ae),fill:ye(Ne,Ae,nt),chart:Q,el:Ne}),xe.$filler=Ee,qe.push(Ee);for(Ae=0;Ae<nt;++Ae)(Ee=qe[Ae])&&(Ee.fill=U(qe,Ae,Wt),Ee.boundary=F(Ee),Ee.mapper=se(Ee))},beforeDatasetDraw:function(Q,ie){var xe=ie.meta.$filler;if(xe){var Ae=Q.ctx,Ne=xe.el,Ee=Ne._view,nt=Ne._children||[],Wt=xe.mapper,qe=Ee.backgroundColor||Ze.global.defaultColor;Wt&&qe&&nt.length&&(j.canvas.clipArea(Ae,Q.chartArea),function oe(Q,ie,xe,Ae,Ne,Ee){var nt,Wt,qe,$e,Ie,de,Fe,le=ie.length,Ge=Ae.spanGaps,Qe=[],ht=[],Jt=0,Rt=0;for(Q.beginPath(),nt=0,Wt=le+!!Ee;nt<Wt;++nt)Ie=xe($e=ie[qe=nt%le]._view,qe,Ae),de=$($e),Fe=$(Ie),de&&Fe?(Jt=Qe.push($e),Rt=ht.push(Ie)):Jt&&Rt&&(Ge?(de&&Qe.push($e),Fe&&ht.push(Ie)):(Z(Q,Qe,ht,Jt,Rt),Jt=Rt=0,Qe=[],ht=[]));Z(Q,Qe,ht,Jt,Rt),Q.closePath(),Q.fillStyle=Ne,Q.fill()}(Ae,nt,Wt,Ee,qe,Ne._loop),j.canvas.unclipArea(Ae))}}}}},{25:25,40:40,45:45}],50:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(26),j=pt(45);Ze._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(ye,F){var U=F.datasetIndex,se=this.chart,$=se.getDatasetMeta(U);$.hidden=null===$.hidden?!se.data.datasets[U].hidden:null,se.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(ye){var F=ye.data;return j.isArray(F.datasets)?F.datasets.map(function(U,se){return{text:U.label,fillStyle:j.isArray(U.backgroundColor)?U.backgroundColor[0]:U.backgroundColor,hidden:!ye.isDatasetVisible(se),lineCap:U.borderCapStyle,lineDash:U.borderDash,lineDashOffset:U.borderDashOffset,lineJoin:U.borderJoinStyle,lineWidth:U.borderWidth,strokeStyle:U.borderColor,pointStyle:U.pointStyle,datasetIndex:se}},this):[]}}},legendCallback:function(ye){var F=[];F.push('<ul class="'+ye.id+'-legend">');for(var U=0;U<ye.data.datasets.length;U++)F.push('<li><span style="background-color:'+ye.data.datasets[U].backgroundColor+'"></span>'),ye.data.datasets[U].label&&F.push(ye.data.datasets[U].label),F.push("</li>");return F.push("</ul>"),F.join("")}}),hn.exports=function(ye){function F(Z,oe){return Z.usePointStyle?oe*Math.SQRT2:Z.boxWidth}function U(Z,oe){var ne=new ye.Legend({ctx:Z.ctx,options:oe,chart:Z});se.configure(Z,ne,oe),se.addBox(Z,ne),Z.legend=ne}var se=ye.layoutService,$=j.noop;return ye.Legend=je.extend({initialize:function(Z){j.extend(this,Z),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:$,update:function(Z,oe,ne){var Q=this;return Q.beforeUpdate(),Q.maxWidth=Z,Q.maxHeight=oe,Q.margins=ne,Q.beforeSetDimensions(),Q.setDimensions(),Q.afterSetDimensions(),Q.beforeBuildLabels(),Q.buildLabels(),Q.afterBuildLabels(),Q.beforeFit(),Q.fit(),Q.afterFit(),Q.afterUpdate(),Q.minSize},afterUpdate:$,beforeSetDimensions:$,setDimensions:function(){var Z=this;Z.isHorizontal()?(Z.width=Z.maxWidth,Z.left=0,Z.right=Z.width):(Z.height=Z.maxHeight,Z.top=0,Z.bottom=Z.height),Z.paddingLeft=0,Z.paddingTop=0,Z.paddingRight=0,Z.paddingBottom=0,Z.minSize={width:0,height:0}},afterSetDimensions:$,beforeBuildLabels:$,buildLabels:function(){var Z=this,oe=Z.options.labels||{},ne=j.callback(oe.generateLabels,[Z.chart],Z)||[];oe.filter&&(ne=ne.filter(function(Q){return oe.filter(Q,Z.chart.data)})),Z.options.reverse&&ne.reverse(),Z.legendItems=ne},afterBuildLabels:$,beforeFit:$,fit:function(){var Z=this,oe=Z.options,ne=oe.labels,Q=oe.display,ie=Z.ctx,xe=Ze.global,Ae=j.valueOrDefault,Ne=Ae(ne.fontSize,xe.defaultFontSize),Ee=Ae(ne.fontStyle,xe.defaultFontStyle),nt=Ae(ne.fontFamily,xe.defaultFontFamily),Wt=j.fontString(Ne,Ee,nt),qe=Z.legendHitBoxes=[],$e=Z.minSize,Ie=Z.isHorizontal();if(Ie?($e.width=Z.maxWidth,$e.height=Q?10:0):($e.width=Q?10:0,$e.height=Z.maxHeight),Q)if(ie.font=Wt,Ie){var de=Z.lineWidths=[0],Fe=Z.legendItems.length?Ne+ne.padding:0;ie.textAlign="left",ie.textBaseline="top",j.each(Z.legendItems,function(pn,en){var Ot=F(ne,Ne)+Ne/2+ie.measureText(pn.text).width;de[de.length-1]+Ot+ne.padding>=Z.width&&(Fe+=Ne+ne.padding,de[de.length]=Z.left),qe[en]={left:0,top:0,width:Ot,height:Ne},de[de.length-1]+=Ot+ne.padding}),$e.height+=Fe}else{var le=ne.padding,Ge=Z.columnWidths=[],Qe=ne.padding,ht=0,Jt=0,Rt=Ne+le;j.each(Z.legendItems,function(pn,en){var Ot=F(ne,Ne)+Ne/2+ie.measureText(pn.text).width;Jt+Rt>$e.height&&(Qe+=ht+ne.padding,Ge.push(ht),ht=0,Jt=0),ht=Math.max(ht,Ot),Jt+=Rt,qe[en]={left:0,top:0,width:Ot,height:Ne}}),Qe+=ht,Ge.push(ht),$e.width+=Qe}Z.width=$e.width,Z.height=$e.height},afterFit:$,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var Z=this,oe=Z.options,ne=oe.labels,Q=Ze.global,ie=Q.elements.line,xe=Z.width,Ae=Z.lineWidths;if(oe.display){var Ne,Ee=Z.ctx,nt=j.valueOrDefault,Wt=nt(ne.fontColor,Q.defaultFontColor),qe=nt(ne.fontSize,Q.defaultFontSize),$e=nt(ne.fontStyle,Q.defaultFontStyle),Ie=nt(ne.fontFamily,Q.defaultFontFamily),de=j.fontString(qe,$e,Ie);Ee.textAlign="left",Ee.textBaseline="middle",Ee.lineWidth=.5,Ee.strokeStyle=Wt,Ee.fillStyle=Wt,Ee.font=de;var Fe=F(ne,qe),le=Z.legendHitBoxes,ht=Z.isHorizontal();Ne=ht?{x:Z.left+(xe-Ae[0])/2,y:Z.top+ne.padding,line:0}:{x:Z.left+ne.padding,y:Z.top+ne.padding,line:0};var Jt=qe+ne.padding;j.each(Z.legendItems,function(Rt,pn){var en=Ee.measureText(Rt.text).width,Ot=Fe+qe/2+en,Gn=Ne.x,ln=Ne.y;ht?Gn+Ot>=xe&&(ln=Ne.y+=Jt,Ne.line++,Gn=Ne.x=Z.left+(xe-Ae[Ne.line])/2):ln+Jt>Z.bottom&&(Gn=Ne.x=Gn+Z.columnWidths[Ne.line]+ne.padding,ln=Ne.y=Z.top+ne.padding,Ne.line++),function(Rt,pn,en){if(!(isNaN(Fe)||Fe<=0)){Ee.save(),Ee.fillStyle=nt(en.fillStyle,Q.defaultColor),Ee.lineCap=nt(en.lineCap,ie.borderCapStyle),Ee.lineDashOffset=nt(en.lineDashOffset,ie.borderDashOffset),Ee.lineJoin=nt(en.lineJoin,ie.borderJoinStyle),Ee.lineWidth=nt(en.lineWidth,ie.borderWidth),Ee.strokeStyle=nt(en.strokeStyle,Q.defaultColor);var Ot=0===nt(en.lineWidth,ie.borderWidth);if(Ee.setLineDash&&Ee.setLineDash(nt(en.lineDash,ie.borderDash)),oe.labels&&oe.labels.usePointStyle){var Gn=qe*Math.SQRT2/2,ln=Gn/Math.SQRT2;j.canvas.drawPoint(Ee,en.pointStyle,Gn,Rt+ln,pn+ln)}else Ot||Ee.strokeRect(Rt,pn,Fe,qe),Ee.fillRect(Rt,pn,Fe,qe);Ee.restore()}}(Gn,ln,Rt),le[pn].left=Gn,le[pn].top=ln,function(Rt,pn,en,Ot){var Gn=qe/2,ln=Fe+Gn+Rt,Tn=pn+Gn;Ee.fillText(en.text,ln,Tn),en.hidden&&(Ee.beginPath(),Ee.lineWidth=2,Ee.moveTo(ln,Tn),Ee.lineTo(ln+Ot,Tn),Ee.stroke())}(Gn,ln,Rt,en),ht?Ne.x+=Ot+ne.padding:Ne.y+=Jt})}},handleEvent:function(Z){var oe=this,ne=oe.options,Q="mouseup"===Z.type?"click":Z.type,ie=!1;if("mousemove"===Q){if(!ne.onHover)return}else if("click"!==Q||!ne.onClick)return;var xe=Z.x,Ae=Z.y;if(xe>=oe.left&&xe<=oe.right&&Ae>=oe.top&&Ae<=oe.bottom)for(var Ne=oe.legendHitBoxes,Ee=0;Ee<Ne.length;++Ee){var nt=Ne[Ee];if(xe>=nt.left&&xe<=nt.left+nt.width&&Ae>=nt.top&&Ae<=nt.top+nt.height){if("click"===Q){ne.onClick.call(oe,Z.native,oe.legendItems[Ee]),ie=!0;break}if("mousemove"===Q){ne.onHover.call(oe,Z.native,oe.legendItems[Ee]),ie=!0;break}}}return ie}}),{id:"legend",beforeInit:function(Z){var oe=Z.options.legend;oe&&U(Z,oe)},beforeUpdate:function(Z){var oe=Z.options.legend,ne=Z.legend;oe?(j.mergeIf(oe,Ze.global.legend),ne?(se.configure(Z,ne,oe),ne.options=oe):U(Z,oe)):ne&&(se.removeBox(Z,ne),delete Z.legend)},afterEvent:function(Z,oe){var ne=Z.legend;ne&&ne.handleEvent(oe)}}}},{25:25,26:26,45:45}],51:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(26),j=pt(45);Ze._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,lineHeight:1.2,padding:10,position:"top",text:"",weight:2e3}}),hn.exports=function(ye){function F($,Z){var oe=new ye.Title({ctx:$.ctx,options:Z,chart:$});U.configure($,oe,Z),U.addBox($,oe),$.titleBlock=oe}var U=ye.layoutService,se=j.noop;return ye.Title=je.extend({initialize:function($){j.extend(this,$),this.legendHitBoxes=[]},beforeUpdate:se,update:function($,Z,oe){var ne=this;return ne.beforeUpdate(),ne.maxWidth=$,ne.maxHeight=Z,ne.margins=oe,ne.beforeSetDimensions(),ne.setDimensions(),ne.afterSetDimensions(),ne.beforeBuildLabels(),ne.buildLabels(),ne.afterBuildLabels(),ne.beforeFit(),ne.fit(),ne.afterFit(),ne.afterUpdate(),ne.minSize},afterUpdate:se,beforeSetDimensions:se,setDimensions:function(){var $=this;$.isHorizontal()?($.width=$.maxWidth,$.left=0,$.right=$.width):($.height=$.maxHeight,$.top=0,$.bottom=$.height),$.paddingLeft=0,$.paddingTop=0,$.paddingRight=0,$.paddingBottom=0,$.minSize={width:0,height:0}},afterSetDimensions:se,beforeBuildLabels:se,buildLabels:se,afterBuildLabels:se,beforeFit:se,fit:function(){var $=this,oe=$.options,ne=oe.display,Q=(0,j.valueOrDefault)(oe.fontSize,Ze.global.defaultFontSize),ie=$.minSize,xe=j.isArray(oe.text)?oe.text.length:1,Ae=j.options.toLineHeight(oe.lineHeight,Q),Ne=ne?xe*Ae+2*oe.padding:0;$.isHorizontal()?(ie.width=$.maxWidth,ie.height=Ne):(ie.width=Ne,ie.height=$.maxHeight),$.width=ie.width,$.height=ie.height},afterFit:se,isHorizontal:function(){var $=this.options.position;return"top"===$||"bottom"===$},draw:function(){var $=this,Z=$.ctx,oe=j.valueOrDefault,ne=$.options,Q=Ze.global;if(ne.display){var ie,xe,Ae,Ne=oe(ne.fontSize,Q.defaultFontSize),Ee=oe(ne.fontStyle,Q.defaultFontStyle),nt=oe(ne.fontFamily,Q.defaultFontFamily),Wt=j.fontString(Ne,Ee,nt),qe=j.options.toLineHeight(ne.lineHeight,Ne),$e=qe/2+ne.padding,Ie=0,de=$.top,Fe=$.left,le=$.bottom,Ge=$.right;Z.fillStyle=oe(ne.fontColor,Q.defaultFontColor),Z.font=Wt,$.isHorizontal()?(xe=Fe+(Ge-Fe)/2,Ae=de+$e,ie=Ge-Fe):(xe="left"===ne.position?Fe+$e:Ge-$e,Ae=de+(le-de)/2,ie=le-de,Ie=Math.PI*("left"===ne.position?-.5:.5)),Z.save(),Z.translate(xe,Ae),Z.rotate(Ie),Z.textAlign="center",Z.textBaseline="middle";var Qe=ne.text;if(j.isArray(Qe))for(var ht=0,Jt=0;Jt<Qe.length;++Jt)Z.fillText(Qe[Jt],0,ht,ie),ht+=qe;else Z.fillText(Qe,0,0,ie);Z.restore()}}}),{id:"title",beforeInit:function($){var Z=$.options.title;Z&&F($,Z)},beforeUpdate:function($){var Z=$.options.title,oe=$.titleBlock;Z?(j.mergeIf(Z,Ze.global.title),oe?(U.configure($,oe,Z),oe.options=Z):F($,Z)):oe&&(ye.layoutService.removeBox($,oe),delete $.titleBlock)}}}},{25:25,26:26,45:45}],52:[function(pt,hn,gr){"use strict";hn.exports=function(Ze){var je=Ze.Scale.extend({getLabels:function(){var j=this.chart.data;return this.options.labels||(this.isHorizontal()?j.xLabels:j.yLabels)||j.labels},determineDataLimits:function(){var F,j=this,ye=j.getLabels();j.minIndex=0,j.maxIndex=ye.length-1,void 0!==j.options.ticks.min&&(F=ye.indexOf(j.options.ticks.min),j.minIndex=-1!==F?F:j.minIndex),void 0!==j.options.ticks.max&&(F=ye.indexOf(j.options.ticks.max),j.maxIndex=-1!==F?F:j.maxIndex),j.min=ye[j.minIndex],j.max=ye[j.maxIndex]},buildTicks:function(){var j=this,ye=j.getLabels();j.ticks=0===j.minIndex&&j.maxIndex===ye.length-1?ye:ye.slice(j.minIndex,j.maxIndex+1)},getLabelForIndex:function(j,ye){var F=this,U=F.chart.data,se=F.isHorizontal();return U.yLabels&&!se?F.getRightValue(U.datasets[ye].data[j]):F.ticks[j-F.minIndex]},getPixelForValue:function(j,ye){var F,U=this,se=U.options.offset,$=Math.max(U.maxIndex+1-U.minIndex-(se?0:1),1);if(null!=j&&(F=U.isHorizontal()?j.x:j.y),void 0!==F||void 0!==j&&isNaN(ye)){var oe=U.getLabels().indexOf(j=F||j);ye=-1!==oe?oe:ye}if(U.isHorizontal()){var ne=U.width/$,Q=ne*(ye-U.minIndex);return se&&(Q+=ne/2),U.left+Math.round(Q)}var ie=U.height/$,xe=ie*(ye-U.minIndex);return se&&(xe+=ie/2),U.top+Math.round(xe)},getPixelForTick:function(j){return this.getPixelForValue(this.ticks[j],j+this.minIndex,null)},getValueForPixel:function(j){var ye=this,F=ye.options.offset,U=Math.max(ye._ticks.length-(F?0:1),1),se=ye.isHorizontal(),$=(se?ye.width:ye.height)/U;return j-=se?ye.left:ye.top,F&&(j-=$/2),(j<=0?0:Math.round(j/$))+ye.minIndex},getBasePixel:function(){return this.bottom}});Ze.scaleService.registerScaleType("category",je,{position:"bottom"})}},{}],53:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(45),j=pt(34);hn.exports=function(ye){var F={position:"left",ticks:{callback:j.formatters.linear}},U=ye.LinearScaleBase.extend({determineDataLimits:function(){function se(Ae){return Q?Ae.xAxisID===$.id:Ae.yAxisID===$.id}var $=this,Z=$.options,oe=$.chart,ne=oe.data.datasets,Q=$.isHorizontal();$.min=null,$.max=null;var ie=Z.stacked;if(void 0===ie&&je.each(ne,function(Ae,Ne){if(!ie){var Ee=oe.getDatasetMeta(Ne);oe.isDatasetVisible(Ne)&&se(Ee)&&void 0!==Ee.stack&&(ie=!0)}}),Z.stacked||ie){var xe={};je.each(ne,function(Ae,Ne){var Ee=oe.getDatasetMeta(Ne),nt=[Ee.type,void 0===Z.stacked&&void 0===Ee.stack?Ne:"",Ee.stack].join(".");void 0===xe[nt]&&(xe[nt]={positiveValues:[],negativeValues:[]});var Wt=xe[nt].positiveValues,qe=xe[nt].negativeValues;oe.isDatasetVisible(Ne)&&se(Ee)&&je.each(Ae.data,function($e,Ie){var de=+$.getRightValue($e);isNaN(de)||Ee.data[Ie].hidden||(Wt[Ie]=Wt[Ie]||0,qe[Ie]=qe[Ie]||0,Z.relativePoints?Wt[Ie]=100:de<0?qe[Ie]+=de:Wt[Ie]+=de)})}),je.each(xe,function(Ae){var Ne=Ae.positiveValues.concat(Ae.negativeValues),Ee=je.min(Ne),nt=je.max(Ne);$.min=null===$.min?Ee:Math.min($.min,Ee),$.max=null===$.max?nt:Math.max($.max,nt)})}else je.each(ne,function(Ae,Ne){var Ee=oe.getDatasetMeta(Ne);oe.isDatasetVisible(Ne)&&se(Ee)&&je.each(Ae.data,function(nt,Wt){var qe=+$.getRightValue(nt);isNaN(qe)||Ee.data[Wt].hidden||((null===$.min||qe<$.min)&&($.min=qe),(null===$.max||qe>$.max)&&($.max=qe))})});$.min=isFinite($.min)&&!isNaN($.min)?$.min:0,$.max=isFinite($.max)&&!isNaN($.max)?$.max:1,this.handleTickRangeOptions()},getTickLimit:function(){var se,$=this,Z=$.options.ticks;if($.isHorizontal())se=Math.min(Z.maxTicksLimit?Z.maxTicksLimit:11,Math.ceil($.width/50));else{var oe=je.valueOrDefault(Z.fontSize,Ze.global.defaultFontSize);se=Math.min(Z.maxTicksLimit?Z.maxTicksLimit:11,Math.ceil($.height/(2*oe)))}return se},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(se,$){return+this.getRightValue(this.chart.data.datasets[$].data[se])},getPixelForValue:function(se){var $,Z=this,oe=Z.start,ne=+Z.getRightValue(se),Q=Z.end-oe;return Z.isHorizontal()?($=Z.left+Z.width/Q*(ne-oe),Math.round($)):($=Z.bottom-Z.height/Q*(ne-oe),Math.round($))},getValueForPixel:function(se){var $=this,Z=$.isHorizontal();return $.start+(Z?se-$.left:$.bottom-se)/(Z?$.width:$.height)*($.end-$.start)},getPixelForTick:function(se){return this.getPixelForValue(this.ticksAsNumbers[se])}});ye.scaleService.registerScaleType("linear",U,F)}},{25:25,34:34,45:45}],54:[function(pt,hn,gr){"use strict";var Ze=pt(45),je=pt(34);hn.exports=function(j){var ye=Ze.noop;j.LinearScaleBase=j.Scale.extend({getRightValue:function(F){return"string"==typeof F?+F:j.Scale.prototype.getRightValue.call(this,F)},handleTickRangeOptions:function(){var F=this,U=F.options.ticks;if(U.beginAtZero){var se=Ze.sign(F.min),$=Ze.sign(F.max);se<0&&$<0?F.max=0:se>0&&$>0&&(F.min=0)}var Z=void 0!==U.min||void 0!==U.suggestedMin,oe=void 0!==U.max||void 0!==U.suggestedMax;void 0!==U.min?F.min=U.min:void 0!==U.suggestedMin&&(F.min=null===F.min?U.suggestedMin:Math.min(F.min,U.suggestedMin)),void 0!==U.max?F.max=U.max:void 0!==U.suggestedMax&&(F.max=null===F.max?U.suggestedMax:Math.max(F.max,U.suggestedMax)),Z!==oe&&F.min>=F.max&&(Z?F.max=F.min+1:F.min=F.max-1),F.min===F.max&&(F.max++,U.beginAtZero||F.min--)},getTickLimit:ye,handleDirectionalChanges:ye,buildTicks:function(){var F=this,U=F.options.ticks,se=F.getTickLimit(),$={maxTicks:se=Math.max(2,se),min:U.min,max:U.max,stepSize:Ze.valueOrDefault(U.fixedStepSize,U.stepSize)},Z=F.ticks=je.generators.linear($,F);F.handleDirectionalChanges(),F.max=Ze.max(Z),F.min=Ze.min(Z),U.reverse?(Z.reverse(),F.start=F.max,F.end=F.min):(F.start=F.min,F.end=F.max)},convertTicksToLabels:function(){var F=this;F.ticksAsNumbers=F.ticks.slice(),F.zeroLineIndex=F.ticks.indexOf(0),j.Scale.prototype.convertTicksToLabels.call(F)}})}},{34:34,45:45}],55:[function(pt,hn,gr){"use strict";var Ze=pt(45),je=pt(34);hn.exports=function(j){var ye={position:"left",ticks:{callback:je.formatters.logarithmic}},F=j.Scale.extend({determineDataLimits:function(){function U(Ne){return ie?Ne.xAxisID===se.id:Ne.yAxisID===se.id}var se=this,$=se.options,Z=$.ticks,oe=se.chart,ne=oe.data.datasets,Q=Ze.valueOrDefault,ie=se.isHorizontal();se.min=null,se.max=null,se.minNotZero=null;var xe=$.stacked;if(void 0===xe&&Ze.each(ne,function(Ne,Ee){if(!xe){var nt=oe.getDatasetMeta(Ee);oe.isDatasetVisible(Ee)&&U(nt)&&void 0!==nt.stack&&(xe=!0)}}),$.stacked||xe){var Ae={};Ze.each(ne,function(Ne,Ee){var nt=oe.getDatasetMeta(Ee),Wt=[nt.type,void 0===$.stacked&&void 0===nt.stack?Ee:"",nt.stack].join(".");oe.isDatasetVisible(Ee)&&U(nt)&&(void 0===Ae[Wt]&&(Ae[Wt]=[]),Ze.each(Ne.data,function(qe,$e){var Ie=Ae[Wt],de=+se.getRightValue(qe);isNaN(de)||nt.data[$e].hidden||(Ie[$e]=Ie[$e]||0,$.relativePoints?Ie[$e]=100:Ie[$e]+=de)}))}),Ze.each(Ae,function(Ne){var Ee=Ze.min(Ne),nt=Ze.max(Ne);se.min=null===se.min?Ee:Math.min(se.min,Ee),se.max=null===se.max?nt:Math.max(se.max,nt)})}else Ze.each(ne,function(Ne,Ee){var nt=oe.getDatasetMeta(Ee);oe.isDatasetVisible(Ee)&&U(nt)&&Ze.each(Ne.data,function(Wt,qe){var $e=+se.getRightValue(Wt);isNaN($e)||nt.data[qe].hidden||((null===se.min||$e<se.min)&&(se.min=$e),(null===se.max||$e>se.max)&&(se.max=$e),0!==$e&&(null===se.minNotZero||$e<se.minNotZero)&&(se.minNotZero=$e))})});se.min=Q(Z.min,se.min),se.max=Q(Z.max,se.max),se.min===se.max&&(0!==se.min&&null!==se.min?(se.min=Math.pow(10,Math.floor(Ze.log10(se.min))-1),se.max=Math.pow(10,Math.floor(Ze.log10(se.max))+1)):(se.min=1,se.max=10))},buildTicks:function(){var U=this,se=U.options.ticks,Z=U.ticks=je.generators.logarithmic({min:se.min,max:se.max},U);U.isHorizontal()||Z.reverse(),U.max=Ze.max(Z),U.min=Ze.min(Z),se.reverse?(Z.reverse(),U.start=U.max,U.end=U.min):(U.start=U.min,U.end=U.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),j.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(U,se){return+this.getRightValue(this.chart.data.datasets[se].data[U])},getPixelForTick:function(U){return this.getPixelForValue(this.tickValues[U])},getPixelForValue:function(U){var se,$,Z,oe=this,ne=oe.start,Q=+oe.getRightValue(U),ie=oe.options.ticks;return oe.isHorizontal()?(Z=Ze.log10(oe.end)-Ze.log10(ne),$=0===Q?oe.left:oe.left+(se=oe.width)/Z*(Ze.log10(Q)-Ze.log10(ne))):(se=oe.height,0!==ne||ie.reverse?0===oe.end&&ie.reverse?(Z=Ze.log10(oe.start)-Ze.log10(oe.minNotZero),$=Q===oe.end?oe.top:Q===oe.minNotZero?oe.top+.02*se:oe.top+.02*se+.98*se/Z*(Ze.log10(Q)-Ze.log10(oe.minNotZero))):0===Q?$=ie.reverse?oe.top:oe.bottom:(Z=Ze.log10(oe.end)-Ze.log10(ne),$=oe.bottom-(se=oe.height)/Z*(Ze.log10(Q)-Ze.log10(ne))):(Z=Ze.log10(oe.end)-Ze.log10(oe.minNotZero),$=Q===ne?oe.bottom:Q===oe.minNotZero?oe.bottom-.02*se:oe.bottom-.02*se-.98*se/Z*(Ze.log10(Q)-Ze.log10(oe.minNotZero)))),$},getValueForPixel:function(U){var se,$,Z=this,oe=Ze.log10(Z.end)-Ze.log10(Z.start);return Z.isHorizontal()?($=Z.width,se=Z.start*Math.pow(10,(U-Z.left)*oe/$)):($=Z.height,se=Math.pow(10,(Z.bottom-U)*oe/$)/Z.start),se}});j.scaleService.registerScaleType("logarithmic",F,ye)}},{34:34,45:45}],56:[function(pt,hn,gr){"use strict";var Ze=pt(25),je=pt(45),j=pt(34);hn.exports=function(ye){function F(qe){var $e=qe.options;return $e.angleLines.display||$e.pointLabels.display?qe.chart.data.labels.length:0}function U(qe){var $e=qe.options.pointLabels,Ie=je.valueOrDefault($e.fontSize,Ee.defaultFontSize),de=je.valueOrDefault($e.fontStyle,Ee.defaultFontStyle),Fe=je.valueOrDefault($e.fontFamily,Ee.defaultFontFamily);return{size:Ie,style:de,family:Fe,font:je.fontString(Ie,de,Fe)}}function se(qe,$e,Ie){return je.isArray(Ie)?{w:je.longestText(qe,qe.font,Ie),h:Ie.length*$e+1.5*(Ie.length-1)*$e}:{w:qe.measureText(Ie).width,h:$e}}function $(qe,$e,Ie,de,Fe){return qe===de||qe===Fe?{start:$e-Ie/2,end:$e+Ie/2}:qe<de||qe>Fe?{start:$e-Ie-5,end:$e}:{start:$e,end:$e+Ie+5}}function ne(qe){return 0===qe||180===qe?"center":qe<180?"left":"right"}function Q(qe,$e,Ie,de){if(je.isArray($e))for(var Fe=Ie.y,le=1.5*de,Ge=0;Ge<$e.length;++Ge)qe.fillText($e[Ge],Ie.x,Fe),Fe+=le;else qe.fillText($e,Ie.x,Ie.y)}function ie(qe,$e,Ie){90===qe||270===qe?Ie.y-=$e.h/2:(qe>270||qe<90)&&(Ie.y-=$e.h)}function Ne(qe){return je.isNumber(qe)?qe:0}var Ee=Ze.global,nt={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:j.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(qe){return qe}}},Wt=ye.LinearScaleBase.extend({setDimensions:function(){var qe=this,$e=qe.options,Ie=$e.ticks;qe.width=qe.maxWidth,qe.height=qe.maxHeight,qe.xCenter=Math.round(qe.width/2),qe.yCenter=Math.round(qe.height/2);var de=je.min([qe.height,qe.width]),Fe=je.valueOrDefault(Ie.fontSize,Ee.defaultFontSize);qe.drawingArea=$e.display?de/2-(Fe/2+Ie.backdropPaddingY):de/2},determineDataLimits:function(){var qe=this,$e=qe.chart,Ie=Number.POSITIVE_INFINITY,de=Number.NEGATIVE_INFINITY;je.each($e.data.datasets,function(Fe,le){if($e.isDatasetVisible(le)){var Ge=$e.getDatasetMeta(le);je.each(Fe.data,function(Qe,ht){var Jt=+qe.getRightValue(Qe);isNaN(Jt)||Ge.data[ht].hidden||(Ie=Math.min(Jt,Ie),de=Math.max(Jt,de))})}}),qe.min=Ie===Number.POSITIVE_INFINITY?0:Ie,qe.max=de===Number.NEGATIVE_INFINITY?0:de,qe.handleTickRangeOptions()},getTickLimit:function(){var qe=this.options.ticks,$e=je.valueOrDefault(qe.fontSize,Ee.defaultFontSize);return Math.min(qe.maxTicksLimit?qe.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*$e)))},convertTicksToLabels:function(){var qe=this;ye.LinearScaleBase.prototype.convertTicksToLabels.call(qe),qe.pointLabels=qe.chart.data.labels.map(qe.options.pointLabels.callback,qe)},getLabelForIndex:function(qe,$e){return+this.getRightValue(this.chart.data.datasets[$e].data[qe])},fit:function(){this.options.pointLabels.display?function Z(qe){var $e,Ie,de,Fe=U(qe),le=Math.min(qe.height/2,qe.width/2),Ge={r:qe.width,l:0,t:qe.height,b:0},Qe={};qe.ctx.font=Fe.font,qe._pointLabelSizes=[];var ht=F(qe);for($e=0;$e<ht;$e++){de=qe.getPointPosition($e,le),Ie=se(qe.ctx,Fe.size,qe.pointLabels[$e]||""),qe._pointLabelSizes[$e]=Ie;var Jt=qe.getIndexAngle($e),Rt=je.toDegrees(Jt)%360,pn=$(Rt,de.x,Ie.w,0,180),en=$(Rt,de.y,Ie.h,90,270);pn.start<Ge.l&&(Ge.l=pn.start,Qe.l=Jt),pn.end>Ge.r&&(Ge.r=pn.end,Qe.r=Jt),en.start<Ge.t&&(Ge.t=en.start,Qe.t=Jt),en.end>Ge.b&&(Ge.b=en.end,Qe.b=Jt)}qe.setReductions(le,Ge,Qe)}(this):function oe(qe){var $e=Math.min(qe.height/2,qe.width/2);qe.drawingArea=Math.round($e),qe.setCenterPoint(0,0,0,0)}(this)},setReductions:function(qe,$e,Ie){var Fe=$e.l/Math.sin(Ie.l),le=Math.max($e.r-this.width,0)/Math.sin(Ie.r),Ge=-$e.t/Math.cos(Ie.t),Qe=-Math.max($e.b-this.height,0)/Math.cos(Ie.b);Fe=Ne(Fe),le=Ne(le),Ge=Ne(Ge),Qe=Ne(Qe),this.drawingArea=Math.min(Math.round(qe-(Fe+le)/2),Math.round(qe-(Ge+Qe)/2)),this.setCenterPoint(Fe,le,Ge,Qe)},setCenterPoint:function(qe,$e,Ie,de){var Fe=this,Qe=Ie+Fe.drawingArea,ht=Fe.height-de-Fe.drawingArea;Fe.xCenter=Math.round((qe+Fe.drawingArea+(Fe.width-$e-Fe.drawingArea))/2+Fe.left),Fe.yCenter=Math.round((Qe+ht)/2+Fe.top)},getIndexAngle:function(qe){return qe*(2*Math.PI/F(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(qe){var $e=this;if(null===qe)return 0;var Ie=$e.drawingArea/($e.max-$e.min);return $e.options.ticks.reverse?($e.max-qe)*Ie:(qe-$e.min)*Ie},getPointPosition:function(qe,$e){var de=this.getIndexAngle(qe)-Math.PI/2;return{x:Math.round(Math.cos(de)*$e)+this.xCenter,y:Math.round(Math.sin(de)*$e)+this.yCenter}},getPointPositionForValue:function(qe,$e){return this.getPointPosition(qe,this.getDistanceFromCenterForValue($e))},getBasePosition:function(){var $e=this.min,Ie=this.max;return this.getPointPositionForValue(0,this.beginAtZero?0:$e<0&&Ie<0?Ie:$e>0&&Ie>0?$e:0)},draw:function(){var qe=this,$e=qe.options,Ie=$e.gridLines,de=$e.ticks,Fe=je.valueOrDefault;if($e.display){var le=qe.ctx,Ge=this.getIndexAngle(0),Qe=Fe(de.fontSize,Ee.defaultFontSize),ht=Fe(de.fontStyle,Ee.defaultFontStyle),Jt=Fe(de.fontFamily,Ee.defaultFontFamily),Rt=je.fontString(Qe,ht,Jt);je.each(qe.ticks,function(pn,en){if(en>0||de.reverse){var Ot=qe.getDistanceFromCenterForValue(qe.ticksAsNumbers[en]);if(Ie.display&&0!==en&&function Ae(qe,$e,Ie,de){var Fe=qe.ctx;if(Fe.strokeStyle=je.valueAtIndexOrDefault($e.color,de-1),Fe.lineWidth=je.valueAtIndexOrDefault($e.lineWidth,de-1),qe.options.gridLines.circular)Fe.beginPath(),Fe.arc(qe.xCenter,qe.yCenter,Ie,0,2*Math.PI),Fe.closePath(),Fe.stroke();else{var le=F(qe);if(0===le)return;Fe.beginPath();var Ge=qe.getPointPosition(0,Ie);Fe.moveTo(Ge.x,Ge.y);for(var Qe=1;Qe<le;Qe++)Ge=qe.getPointPosition(Qe,Ie),Fe.lineTo(Ge.x,Ge.y);Fe.closePath(),Fe.stroke()}}(qe,Ie,Ot,en),de.display){var Gn=Fe(de.fontColor,Ee.defaultFontColor);if(le.font=Rt,le.save(),le.translate(qe.xCenter,qe.yCenter),le.rotate(Ge),de.showLabelBackdrop){var ln=le.measureText(pn).width;le.fillStyle=de.backdropColor,le.fillRect(-ln/2-de.backdropPaddingX,-Ot-Qe/2-de.backdropPaddingY,ln+2*de.backdropPaddingX,Qe+2*de.backdropPaddingY)}le.textAlign="center",le.textBaseline="middle",le.fillStyle=Gn,le.fillText(pn,0,-Ot),le.restore()}}}),($e.angleLines.display||$e.pointLabels.display)&&function xe(qe){var $e=qe.ctx,Ie=je.valueOrDefault,de=qe.options,Fe=de.angleLines,le=de.pointLabels;$e.lineWidth=Fe.lineWidth,$e.strokeStyle=Fe.color;var Ge=qe.getDistanceFromCenterForValue(de.ticks.reverse?qe.min:qe.max),Qe=U(qe);$e.textBaseline="top";for(var ht=F(qe)-1;ht>=0;ht--){if(Fe.display){var Jt=qe.getPointPosition(ht,Ge);$e.beginPath(),$e.moveTo(qe.xCenter,qe.yCenter),$e.lineTo(Jt.x,Jt.y),$e.stroke(),$e.closePath()}if(le.display){var Rt=qe.getPointPosition(ht,Ge+5),pn=Ie(le.fontColor,Ee.defaultFontColor);$e.font=Qe.font,$e.fillStyle=pn;var en=qe.getIndexAngle(ht),Ot=je.toDegrees(en);$e.textAlign=ne(Ot),ie(Ot,qe._pointLabelSizes[ht],Rt),Q($e,qe.pointLabels[ht]||"",Rt,Qe.size)}}}(qe)}}});ye.scaleService.registerScaleType("radialLinear",Wt,nt)}},{25:25,34:34,45:45}],57:[function(pt,hn,gr){"use strict";function Ze(Ie,de){return Ie-de}function je(Ie){var de,Fe,le,Ge={},Qe=[];for(de=0,Fe=Ie.length;de<Fe;++de)Ge[le=Ie[de]]||(Ge[le]=!0,Qe.push(le));return Qe}function F(Ie,de,Fe,le){var Ge=function ye(Ie,de,Fe){for(var le,Ge,Qe,ht=0,Jt=Ie.length-1;ht>=0&&ht<=Jt;){if(Qe=Ie[le=ht+Jt>>1],!(Ge=Ie[le-1]||null))return{lo:null,hi:Qe};if(Qe[de]<Fe)ht=le+1;else{if(!(Ge[de]>Fe))return{lo:Ge,hi:Qe};Jt=le-1}}return{lo:Qe,hi:null}}(Ie,de,Fe),Qe=Ge.lo?Ge.hi?Ge.lo:Ie[Ie.length-2]:Ie[0],ht=Ge.lo?Ge.hi?Ge.hi:Ie[Ie.length-1]:Ie[1],Jt=ht[de]-Qe[de];return Qe[le]+(ht[le]-Qe[le])*(Jt?(Fe-Qe[de])/Jt:0)}function U(Ie,de){var Fe=de.parser,le=de.parser||de.format;return"function"==typeof Fe?Fe(Ie):"string"==typeof Ie&&"string"==typeof le?Ae(Ie,le):(Ie instanceof Ae||(Ie=Ae(Ie)),Ie.isValid()?Ie:"function"==typeof le?le(Ie):Ie)}function se(Ie,de){if(Ee.isNullOrUndef(Ie))return null;var Fe=de.options.time,le=U(de.getRightValue(Ie),Fe);return le.isValid()?(Fe.round&&le.startOf(Fe.round),le.valueOf()):null}function ne(Ie){for(var de=$e.indexOf(Ie)+1,Fe=$e.length;de<Fe;++de)if(qe[$e[de]].common)return $e[de]}var Ae=pt(1);Ae="function"==typeof Ae?Ae:window.moment;var Ne=pt(25),Ee=pt(45),nt=Number.MIN_SAFE_INTEGER||-9007199254740991,Wt=Number.MAX_SAFE_INTEGER||9007199254740991,qe={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},$e=Object.keys(qe);hn.exports=function(Ie){var de=Ie.Scale.extend({initialize:function(){if(!Ae)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");this.mergeTicksOptions(),Ie.Scale.prototype.initialize.call(this)},update:function(){var Fe=this,le=Fe.options;return le.time&&le.time.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),Ie.Scale.prototype.update.apply(Fe,arguments)},getRightValue:function(Fe){return Fe&&void 0!==Fe.t&&(Fe=Fe.t),Ie.Scale.prototype.getRightValue.call(this,Fe)},determineDataLimits:function(){var Fe,le,Ge,Qe,ht,Jt,Rt=this,pn=Rt.chart,en=Rt.options.time,Ot=Wt,Gn=nt,ln=[],Tn=[],to=[];for(Fe=0,Ge=pn.data.labels.length;Fe<Ge;++Fe)to.push(se(pn.data.labels[Fe],Rt));for(Fe=0,Ge=(pn.data.datasets||[]).length;Fe<Ge;++Fe)if(pn.isDatasetVisible(Fe))if(Ee.isObject((ht=pn.data.datasets[Fe].data)[0]))for(Tn[Fe]=[],le=0,Qe=ht.length;le<Qe;++le)Jt=se(ht[le],Rt),ln.push(Jt),Tn[Fe][le]=Jt;else ln.push.apply(ln,to),Tn[Fe]=to.slice(0);else Tn[Fe]=[];to.length&&(to=je(to).sort(Ze),Ot=Math.min(Ot,to[0]),Gn=Math.max(Gn,to[to.length-1])),ln.length&&(ln=je(ln).sort(Ze),Ot=Math.min(Ot,ln[0]),Gn=Math.max(Gn,ln[ln.length-1])),Ot=se(en.min,Rt)||Ot,Gn=se(en.max,Rt)||Gn,Ot=Ot===Wt?+Ae().startOf("day"):Ot,Gn=Gn===nt?+Ae().endOf("day")+1:Gn,Rt.min=Math.min(Ot,Gn),Rt.max=Math.max(Ot+1,Gn),Rt._horizontal=Rt.isHorizontal(),Rt._table=[],Rt._timestamps={data:ln,datasets:Tn,labels:to}},buildTicks:function(){var Fe,le,Ge,Qe=this,ht=Qe.min,Jt=Qe.max,Rt=Qe.options,pn=Rt.time,en=[],Ot=[];switch(Rt.ticks.source){case"data":en=Qe._timestamps.data;break;case"labels":en=Qe._timestamps.labels;break;default:en=function Q(Ie,de,Fe,le){var Ge,Qe=le.time,ht=Qe.unit||function Z(Ie,de,Fe,le){var Ge,Qe,Jt=$e.length;for(Ge=$e.indexOf(Ie);Ge<Jt-1;++Ge)if((Qe=qe[$e[Ge]]).common&&Math.ceil((Fe-de)/((Qe.steps?Qe.steps[Qe.steps.length-1]:Wt)*Qe.size))<=le)return $e[Ge];return $e[Jt-1]}(Qe.minUnit,Ie,de,Fe),Jt=ne(ht),Rt=Ee.valueOrDefault(Qe.stepSize,Qe.unitStepSize),pn="week"===ht&&Qe.isoWeekday,en=le.ticks.major.enabled,Ot=qe[ht],Gn=Ae(Ie),ln=Ae(de),Tn=[];for(Rt||(Rt=function $(Ie,de,Fe,le){var Ge,Qe,ht,Jt=de-Ie,Rt=qe[Fe],pn=Rt.size,en=Rt.steps;if(!en)return Math.ceil(Jt/((le||1)*pn));for(Ge=0,Qe=en.length;Ge<Qe&&(ht=en[Ge],!(Math.ceil(Jt/(pn*ht))<=le));++Ge);return ht}(Ie,de,ht,Fe)),pn&&(Gn=Gn.isoWeekday(pn),ln=ln.isoWeekday(pn)),Gn=Gn.startOf(pn?"day":ht),(ln=ln.startOf(pn?"day":ht))<de&&ln.add(1,ht),Ge=Ae(Gn),en&&Jt&&!pn&&!Qe.round&&(Ge.startOf(Jt),Ge.add(~~((Gn-Ge)/(Ot.size*Rt))*Rt,ht));Ge<ln;Ge.add(Rt,ht))Tn.push(+Ge);return Tn.push(+Ge),Tn}(ht,Jt,Qe.getLabelCapacity(ht),Rt)}for("ticks"===Rt.bounds&&en.length&&(ht=en[0],Jt=en[en.length-1]),ht=se(pn.min,Qe)||ht,Jt=se(pn.max,Qe)||Jt,Fe=0,le=en.length;Fe<le;++Fe)(Ge=en[Fe])>=ht&&Ge<=Jt&&Ot.push(Ge);return Qe.min=ht,Qe.max=Jt,Qe._unit=pn.unit||function oe(Ie,de,Fe,le){var Ge,Qe,ht=Ae.duration(Ae(le).diff(Ae(Fe)));for(Ge=$e.length-1;Ge>=$e.indexOf(de);Ge--)if(qe[Qe=$e[Ge]].common&&ht.as(Qe)>=Ie.length)return Qe;return $e[de?$e.indexOf(de):0]}(Ot,pn.minUnit,Qe.min,Qe.max),Qe._majorUnit=ne(Qe._unit),Qe._table=function j(Ie,de,Fe,le){if("linear"===le||!Ie.length)return[{time:de,pos:0},{time:Fe,pos:1}];var Ge,Qe,ht,Jt,Rt,pn=[],en=[de];for(Ge=0,Qe=Ie.length;Ge<Qe;++Ge)(Jt=Ie[Ge])>de&&Jt<Fe&&en.push(Jt);for(en.push(Fe),Ge=0,Qe=en.length;Ge<Qe;++Ge)Rt=en[Ge+1],Jt=en[Ge],void 0!==(ht=en[Ge-1])&&void 0!==Rt&&Math.round((Rt+ht)/2)===Jt||pn.push({time:Jt,pos:Ge/(Qe-1)});return pn}(Qe._timestamps.data,ht,Jt,Rt.distribution),Qe._offsets=function ie(Ie,de,Fe,le,Ge){var ht,Jt=0,Rt=0;return Ge.offset&&de.length&&(Ge.time.min||(ht=de[0],Jt=(F(Ie,"time",de.length>1?de[1]:le,"pos")-F(Ie,"time",ht,"pos"))/2),Ge.time.max||(ht=de.length>1?de[de.length-2]:Fe,Rt=(F(Ie,"time",de[de.length-1],"pos")-F(Ie,"time",ht,"pos"))/2)),{left:Jt,right:Rt}}(Qe._table,Ot,ht,Jt,Rt),function xe(Ie,de){var Fe,le,Ge,Qe,ht=[];for(Fe=0,le=Ie.length;Fe<le;++Fe)Ge=Ie[Fe],Qe=!!de&&Ge===+Ae(Ge).startOf(de),ht.push({value:Ge,major:Qe});return ht}(Ot,Qe._majorUnit)},getLabelForIndex:function(Fe,le){var Qe=this.chart.data,ht=this.options.time,Jt=Qe.labels&&Fe<Qe.labels.length?Qe.labels[Fe]:"",Rt=Qe.datasets[le].data[Fe];return Ee.isObject(Rt)&&(Jt=this.getRightValue(Rt)),ht.tooltipFormat&&(Jt=U(Jt,ht).format(ht.tooltipFormat)),Jt},tickFormatFunction:function(Fe,le,Ge,Qe){var Jt=this.options,Rt=Fe.valueOf(),pn=Jt.time.displayFormats,en=pn[this._unit],Ot=this._majorUnit,Gn=pn[Ot],ln=Fe.clone().startOf(Ot).valueOf(),Tn=Jt.ticks.major,to=Tn.enabled&&Ot&&Gn&&Rt===ln,wo=Fe.format(Qe||(to?Gn:en)),Tr=to?Tn:Jt.ticks.minor,Gr=Ee.valueOrDefault(Tr.callback,Tr.userCallback);return Gr?Gr(wo,le,Ge):wo},convertTicksToLabels:function(Fe){var le,Ge,Qe=[];for(le=0,Ge=Fe.length;le<Ge;++le)Qe.push(this.tickFormatFunction(Ae(Fe[le].value),le,Fe));return Qe},getPixelForOffset:function(Fe){var le=this,Ge=le._horizontal?le.width:le.height,Qe=le._horizontal?le.left:le.top,ht=F(le._table,"time",Fe,"pos");return Qe+Ge*(le._offsets.left+ht)/(le._offsets.left+1+le._offsets.right)},getPixelForValue:function(Fe,le,Ge){var ht=null;if(void 0!==le&&void 0!==Ge&&(ht=this._timestamps.datasets[Ge][le]),null===ht&&(ht=se(Fe,this)),null!==ht)return this.getPixelForOffset(ht)},getPixelForTick:function(Fe){var le=this.getTicks();return Fe>=0&&Fe<le.length?this.getPixelForOffset(le[Fe].value):null},getValueForPixel:function(Fe){var le=this,Ge=le._horizontal?le.width:le.height,Jt=F(le._table,"pos",(Ge?(Fe-(le._horizontal?le.left:le.top))/Ge:0)*(le._offsets.left+1+le._offsets.left)-le._offsets.right,"time");return Ae(Jt)},getLabelWidth:function(Fe){var Ge=this.options.ticks,Qe=this.ctx.measureText(Fe).width,ht=Ee.toRadians(Ge.maxRotation),Jt=Math.cos(ht),Rt=Math.sin(ht);return Qe*Jt+Ee.valueOrDefault(Ge.fontSize,Ne.global.defaultFontSize)*Rt},getLabelCapacity:function(Fe){var le=this,Ge=le.options.time.displayFormats.millisecond,Qe=le.tickFormatFunction(Ae(Fe),0,[],Ge),ht=le.getLabelWidth(Qe),Jt=le.isHorizontal()?le.width:le.height;return Math.floor(Jt/ht)}});Ie.scaleService.registerScaleType("time",de,{position:"bottom",distribution:"linear",bounds:"data",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}})}},{1:1,25:25,45:45}]},{},[7])(7)});