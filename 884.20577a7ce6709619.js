"use strict";(self.webpackChunkmanagement_portal=self.webpackChunkmanagement_portal||[]).push([[884],{8884:(E,u,s)=>{s.r(u),s.d(u,{ListViewModule:()=>de});var b=s(4466),_=s(6895),e=s(4650),y=s(8729);let O=(()=>{class m{static#e=this.\u0275fac=function(i){return new(i||m)};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["ngx-list-view"]],decls:1,vars:0,template:function(i,n){1&i&&e._UZ(0,"router-outlet")},dependencies:[y.lC],encapsulation:2})}return m})();var w=s(2770),r=s(8304),c=s(1606),a=s(7030),f=s(503),d=s(9833),l=s(1212),o=s(4719),g=s(8996),v=s(6009),D=s(3542),R=s(4725),M=s(2826),A=s(3037),Q=s(7126),Y=s(9016),$=s(384),k=s(9383),x=s(9631);function X(m,N){if(1&m){const t=e.EpF();e.TgZ(0,"button",11),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.onAddNew())}),e._uU(1,"Add new"),e.qZA()}}function W(m,N){if(1&m){const t=e.EpF();e.TgZ(0,"ng2-smart-table",12),e.NdJ("userRowSelect",function(n){e.CHM(t);const C=e.oxw();return e.KtG(C.onEdit(n))})("delete",function(n){e.CHM(t);const C=e.oxw();return e.KtG(C.onDelete(n))}),e.qZA()}if(2&m){const t=e.oxw();e.Q6J("settings",t.settings)("source",t.source)}}function q(m,N){if(1&m){const t=e.EpF();e.TgZ(0,"button",13),e.NdJ("click",function(){const C=e.CHM(t).$implicit,F=e.oxw();return e.KtG(F.fetchValues(C))}),e._uU(1),e.qZA()}if(2&m){const t=N.$implicit,i=e.oxw();e.Q6J("disabled",t==i.currentPageNumber),e.xp6(1),e.Oqu(t+1)}}let te=(()=>{class m{constructor(t,i,n,C,F,z,U,H,Z,B,J,G,L){this.router=t,this.iconsLibrary=i,this.userControllerService=n,this.deviceControllerService=C,this.roleControllerService=F,this.vesselControllerService=z,this.serviceControllerService=U,this.instanceControllerService=H,this.mmsControllerService=Z,this.organizationControllerService=B,this.notifierService=J,this.authService=G,this.translate=L,this.menuType=r._g.Device,this.title=" for ",this.contextForAttributes="list",this.orgName="MCC",this.orgMrn="",this.iconName="circle",this.menuTypeName="",this.data=[],this.isLoading=!1,this.mySettings={actions:{edit:!1,position:"right"},mode:"external",delete:{deleteButtonContent:'<i class="nb-trash"></i>',confirmDelete:!0},columns:{...a.A[this.menuType],name:{title:"Nameeeee"}},hideSubHeader:!0},this.showTables=!0,this.source=new f.nC,this.isForServiceForOrg=!1,this.isAdmin=!1,this.currentPageNumber=0,this.totalPages=0,this.totalElements=0,this.pageNumbers=[],this.updatePageContentInfo=T=>{this.totalPages=T.totalPages,this.totalElements=T.totalElements,this.pageNumbers=Array(this.totalPages).fill(0).map((h,p)=>p)},this.deleteData=(T,h,p,S,P)=>T===r._g.User?this.userControllerService.deleteUser(h,p):T===r._g.Device?this.deviceControllerService.deleteDevice(h,p):T===r._g.Vessel?this.vesselControllerService.deleteVessel(h,p):T===r._g.MMS?this.mmsControllerService.deleteMMS(h,p):T===r._g.Service&&S?this.serviceControllerService.deleteService(h,p,S):T===r._g.Organization||T===r._g.OrgCandidate?this.organizationControllerService.deleteOrg(p):T===r._g.Role&&P?this.roleControllerService.deleteRole(h,P):T===r._g.Instance||T===r._g.InstanceOfOrg?this.instanceControllerService.deleteInstance(P):new c.Observable,this.loadMyOrganization=()=>this.organizationControllerService.getOrganization1(this.authService.authState.orgMrn),this.loadServiceInstances=()=>this.instanceControllerService.getInstances(),this.loadDataContent=(T,h,p)=>T===r._g.User?this.userControllerService.getOrganizationUsers(p,h,10):T===r._g.Device?this.deviceControllerService.getOrganizationDevices(p,h,10):T===r._g.Vessel?this.vesselControllerService.getOrganizationVessels(p,h,10):T===r._g.MMS?this.mmsControllerService.getOrganizationMMSes(p,h,10):T===r._g.Service?this.serviceControllerService.getOrganizationServices(p,h,10):T===r._g.Organization?this.organizationControllerService.getOrganization(h,10):T===r._g.OrgCandidate?this.organizationControllerService.getUnapprovedOrganizations(h,10):new c.Observable,this.loadRoles=T=>this.roleControllerService.getRoles(T),(0,w.$M)(L),(0,w.U4)(L),i.registerFontPack("fas",{packClass:"fas",iconClassPrefix:"fa"})}ngOnInit(){const t=this.router.url.split("/").pop();t===r._g.InstanceOfOrg?(this.isForServiceForOrg=!0,this.menuType=r._g.Instance):this.menuType=t.replace("-","").substr(0,t.length-1),Object.values(r._g).includes(this.menuType)?(this.menuTypeName=r.RJ[this.menuType.toString()],this.iconName=r.nZ[this.menuType.toString()],this.orgMrn=this.authService.authState.orgMrn):this.router.navigate(["**"]),this.authService.authState.rolesLoaded?this.isAdmin=(0,l.rM)(this.menuType,this.authService,!1):this.authService.rolesLoaded.subscribe(i=>{this.isAdmin=(0,l.rM)(this.menuType,this.authService,!1)}),this.fetchValues(this.currentPageNumber)}fetchValues(t){if(this.currentPageNumber=t,!a.A.hasOwnProperty(this.menuType.toString()))throw this.isLoading=!1,new Error(`${this.translate.instant("error.resource.noDataService")}${this.menuType}`);if(this.mySettings.columns=Object.assign({},...Object.entries(a.A[this.menuType.toString()]).filter(([i,n])=>Array.isArray(n.visibleFrom)&&n.visibleFrom.includes(this.contextForAttributes)).map(([i,n])=>({[i]:n}))),this.settings=Object.assign({},this.mySettings),this.title=`${(m=>"string"!=typeof m?"":m.charAt(0).toUpperCase()+m.slice(1))(this.menuTypeName)} list`,this.isLoading=!0,!Object.values(r._g).includes(this.menuType))throw this.isLoading=!1,new Error(`${this.translate.instant("error.resource.noDataService")}${this.menuType}`);this.menuType===r._g.Organization||this.menuType===r._g.OrgCandidate?this.loadDataContent(this.menuType,t).subscribe(i=>{this.updatePageContentInfo(i),this.refreshData(this.formatResponse(i.content)),this.isLoading=!1},i=>this.notifierService.notify("error",i.message)):this.menuType===r._g.Role?this.loadMyOrganization().subscribe(i=>this.loadRoles(i.mrn).subscribe(n=>{this.refreshData(n),this.isLoading=!1},n=>this.notifierService.notify("error",n.message)),i=>this.notifierService.notify("error",i.message)):this.menuType===r._g.Instance||this.menuType===r._g.InstanceOfOrg?this.loadServiceInstances().subscribe(i=>{this.refreshData(this.formatResponseForService(this.isForServiceForOrg?i.filter(n=>n.organizationId===this.orgMrn):i)),this.isLoading=!1},i=>this.notifierService.notify("error",i.message)):this.loadMyOrganization().subscribe(i=>this.loadDataContent(this.menuType,t,i.mrn).subscribe(n=>{this.refreshData(this.formatResponse(n.content)),this.isLoading=!1},n=>this.notifierService.notify("error",n.message)),i=>this.notifierService.notify("error",i.message))}refreshData(t){t?(this.source.load(t),this.data=t):this.source.load([])}formatResponse(t){return t.map(i=>(0,d.lv)(i))}formatResponseForService(t){return t.map(i=>(0,d.LP)(i))}onDelete(t){this.isAdmin?this.delete(this.menuType,this.orgMrn,t.data.mrn,t.data.instanceVersion,t.data.id):this.notifierService.notify("error",this.translate.instant("error.resource.permissionError"))}delete(t,i,n,C,F){let z=this.translate.instant("warning.resource.beforeDeletion");z=r.DC.indexOf(this.menuType)>=0?z+this.translate.instant("warning.resource.beforeRevoke"):z,confirm(z)&&this.deleteData(t,i,n,C,F).subscribe(U=>{this.notifierService.notify("success",this.menuTypeName+this.translate.instant("success.resource.delete")),this.fetchValues(this.currentPageNumber)},U=>this.notifierService.notify("error",this.translate.instant("error.resource.errorInDeletion")+U.error.message))}onEdit(t){const i=this.menuType===r._g.Instance?t.data.id:t.data.mrn;this.router.navigate([this.router.url,i?encodeURIComponent(i):t.data.id],{queryParams:{name:t.data.roleName?t.data.roleName:t.data.name?t.data.name:t.data.lastName+" "+t.data.firstName,version:t.data.instanceVersion}})}onAddNew(){this.router.navigate([this.router.url,"new"])}onSearch(t){const i=t.srcElement.value;t&&t.srcElement&&i.length>0?this.source.setFilter([{field:"id",search:i},{field:"name",search:i},{field:"mrn",search:i}],!1):(this.source.reset(),this.refreshData())}static#e=this.\u0275fac=function(i){return new(i||m)(e.Y36(y.F0),e.Y36(o.B7b),e.Y36(g.p),e.Y36(v.$),e.Y36(D.U),e.Y36(R.HI),e.Y36(M.e),e.Y36(A.$),e.Y36(R.Tg),e.Y36(Q.r),e.Y36(Y.lG),e.Y36($.e),e.Y36(k.sK))};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["ngx-list"]],decls:15,vars:6,consts:[[1,"row"],[1,"col","my-auto"],[1,"icon_header"],["pack","fas",3,"icon"],[1,"col-md-auto"],[3,"search"],["type","button","nbButton","","status","primary",3,"click",4,"ngIf"],["nbSpinnerSize","large","nbSpinnerStatus","primary",3,"nbSpinner"],[3,"settings","source","userRowSelect","delete",4,"ngIf"],[1,"text-center","pb-5"],["class","m-1","nbButton","","size","tiny",3,"disabled","click",4,"ngFor","ngForOf"],["type","button","nbButton","","status","primary",3,"click"],[3,"settings","source","userRowSelect","delete"],["nbButton","","size","tiny",1,"m-1",3,"disabled","click"]],template:function(i,n){1&i&&(e.TgZ(0,"nb-card")(1,"nb-card-header")(2,"div",0)(3,"div",1)(4,"span",2),e._UZ(5,"nb-icon",3),e.qZA(),e._uU(6),e.qZA(),e.TgZ(7,"div",4)(8,"ngx-search-input",5),e.NdJ("search",function(F){return n.onSearch(F)}),e.qZA()(),e.TgZ(9,"div",4),e.YNc(10,X,2,0,"button",6),e.qZA()()(),e.TgZ(11,"nb-card-body",7),e.YNc(12,W,1,2,"ng2-smart-table",8),e.qZA(),e.TgZ(13,"div",9),e.YNc(14,q,2,2,"button",10),e.qZA()()),2&i&&(e.xp6(5),e.Q6J("icon",n.iconName),e.xp6(1),e.hij("",n.title," "),e.xp6(4),e.Q6J("ngIf",n.isAdmin),e.xp6(1),e.Q6J("nbSpinner",n.isLoading),e.xp6(1),e.Q6J("ngIf",n.showTables),e.xp6(2),e.Q6J("ngForOf",n.pageNumbers))},dependencies:[_.sg,_.O5,o.Asz,o.yKW,o.ndF,o.fMN,o.Q7R,o.DPz,x.J,f.T5],styles:["[_nghost-%COMP%]   nb-card[_ngcontent-%COMP%]{transform:translateZ(0)}nb-card-body[_ngcontent-%COMP%]{overflow:visible;padding-top:0}nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1rem}.icon_header[_ngcontent-%COMP%]{display:inline-block;width:28px}"]})}return m})();var I=s(7528),j=s(4292),re=s(4020),ie=I.uU.RoleNameEnum;const ne=["editableForm"],se=["supplementForm"];function oe(m,N){if(1&m){const t=e.EpF();e.TgZ(0,"div")(1,"button",6),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancel())}),e._UZ(2,"nb-icon",7),e._uU(3),e.qZA()()}if(2&m){const t=e.oxw();e.xp6(3),e.hij(" Back to ",t.entityTypeName," list ")}}function ae(m,N){if(1&m){const t=e.EpF();e.TgZ(0,"ngx-editable-form",8,9),e.NdJ("onApprove",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.approve())})("onReject",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.delete())})("onCancel",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.cancel())})("onSubmit",function(n){e.CHM(t);const C=e.oxw();return e.KtG(C.submit(n))})("onDelete",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.delete())})("onRefresh",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.refreshData())}),e.qZA()}if(2&m){const t=e.oxw();e.Q6J("menuType","user")("isForNew",!0)("orgShortId",t.orgShortId)("defaultPermissions",t.defaultPermissionForAdminUser)("title","Administrator account of "+t.title)("iconName","user")("numberId",t.numberId)("orgMrn",t.entityMrn)("instanceVersion",t.instanceVersion)("isLoading",t.isLoading)("isLoaded",t.isLoaded)("hasHeader",!0)("showButtons",!1)}}const ce=[{path:"",component:O,children:[{path:"",component:te},{path:":id",component:(()=>{class m{constructor(t,i,n,C,F,z,U,H,Z,B,J,G,L,T){this.route=t,this.router=i,this.userControllerService=n,this.deviceControllerService=C,this.roleControllerService=F,this.vesselControllerService=z,this.serviceControllerService=U,this.mmsControllerService=H,this.organizationControllerService=Z,this.instanceControllerService=B,this.notifierService=J,this.authService=G,this.location=L,this.translate=T,this.title="",this.isLoading=!1,this.menuType=r._g.Device,this.iconName="circle",this.instanceVersion="",this.noBacklink=!1,this.isForNew=!1,this.columnForMenu=a.A[this.menuType],this.contextForAttributes="detail",this.menuTypeName="",this.entityMrn="",this.orgMrn="",this.values={},this.activeCertificates=[],this.revokedCertificates=[],this.isEditing=!1,this.shortId="",this.numberId=-1,this.isLoaded=!0,this.mrnMask="",this.isForServiceForOrg=!1,this.orgShortId=void 0,this.defaultPermissionForAdminUser=j.M3,this.registerData=(h,p,S)=>h===r._g.User?this.userControllerService.createUser(p,S):h===r._g.Device?this.deviceControllerService.createDevice(p,S):h===r._g.Vessel?this.vesselControllerService.createVessel((0,d.EF)(p),S):h===r._g.MMS?this.mmsControllerService.createMMS(p,S):h===r._g.Service?this.serviceControllerService.createService(p,S):h===r._g.Organization?this.organizationControllerService.applyOrganization(p):h===r._g.Role?this.roleControllerService.createRole(p,S):h===r._g.Instance?this.instanceControllerService.createInstance(p):new c.Observable,this.updateData=(h,p,S,P,V,K)=>h===r._g.User?this.userControllerService.updateUser(p,S,P):h===r._g.Device?this.deviceControllerService.updateDevice(p,S,P):h===r._g.Vessel?this.vesselControllerService.updateVessel((0,d.EF)(p),S,P):h===r._g.MMS?this.mmsControllerService.updateMMS(p,S,P):h===r._g.Service&&V?this.serviceControllerService.updateService(p,S,P,V):h===r._g.Organization||h===r._g.OrgCandidate?this.organizationControllerService.updateOrganization(p,P):h===r._g.Role?this.roleControllerService.updateRole(p,S,this.numberId):h===r._g.Instance?this.instanceControllerService.updateInstance(Object.assign({},p,{id:K}),K):new c.Observable,this.deleteData=(h,p,S,P,V)=>h===r._g.User?this.userControllerService.deleteUser(p,S):h===r._g.Device?this.deviceControllerService.deleteDevice(p,S):h===r._g.Vessel?this.vesselControllerService.deleteVessel(p,S):h===r._g.MMS?this.mmsControllerService.deleteMMS(p,S):h===r._g.Service&&P?this.serviceControllerService.deleteService(p,S,P):h===r._g.Organization||h===r._g.OrgCandidate?this.organizationControllerService.deleteOrg(S):h===r._g.Role?this.roleControllerService.deleteRole(p,this.numberId):h===r._g.Instance?this.instanceControllerService.deleteInstance(this.numberId):new c.Observable,this.loadDataContent=(h,p,S,P,V)=>h===r._g.User?this.userControllerService.getUser(p,S):h===r._g.Device?this.deviceControllerService.getDevice(p,S):h===r._g.Vessel?this.vesselControllerService.getVessel(p,S):h===r._g.MMS?this.mmsControllerService.getMMS(p,S):h===r._g.Service&&P?this.serviceControllerService.getServiceVersion(p,S,P):h===r._g.Organization?this.organizationControllerService.getOrganization1(S):h===r._g.Instance?this.instanceControllerService.getInstance(V):new c.Observable,(0,w.$M)(T),(0,w.U4)(T)}ngOnInit(){const t=this.router.url.split("/"),n=(t.pop(),t.pop());n===r._g.InstanceOfOrg?(this.isForServiceForOrg=!0,this.menuType=r._g.Instance):this.menuType=n.replace("-","").substr(0,n.length-1),this.entityMrn=decodeURIComponent(this.route.snapshot.paramMap.get("id")),this.orgMrn=this.authService.authState.orgMrn,this.isForNew="new"===this.entityMrn,this.numberId=this.menuType===r._g.Instance||this.menuType===r._g.Role?parseInt(this.entityMrn):-1,this.router.routeReuseStrategy.shouldReuseRoute=()=>!1,this.route.queryParams.subscribe(C=>{this.noBacklink=void 0===C.name,this.title=C.name,this.instanceVersion=C.version}),this.iconName=r.nZ[this.menuType.toString()],this.isForNew?(this.isEditing=!0,this.title="New "+r.RJ[this.menuType]):this.fetchFieldValues()}cancel(){this.location.back()}settle(t){this.isLoading=!1,this.editableForm&&this.editableForm.settled(t)}fetchFieldValues(){if(!a.A.hasOwnProperty(this.menuType))throw this.settle(!1),new Error(`${this.translate.instant("error.resource.noDataService")}${this.menuType}`);if(this.isLoading=!0,!Object.values(r._g).includes(this.menuType))throw this.settle(!1),new Error(`${this.translate.instant("error.resource.noDataService")}${this.menuType}`);if(this.menuType===r._g.OrgCandidate)this.organizationControllerService.getUnapprovedOrganizations().subscribe(t=>{this.settle(!0),this.editableForm.adjustTitle(this.menuType,this.title),this.editableForm.adjustData(t.content.filter(i=>i.mrn===this.entityMrn).pop()),this.orgShortId=this.entityMrn.split(":").pop()},t=>{this.notifierService.notify("error",t.message),this.router.navigateByUrl("/pages/404")});else if(this.menuType===r._g.Role){const t=parseInt(this.entityMrn);this.roleControllerService.getRole(this.orgMrn,t).subscribe(i=>{this.settle(!0),this.numberId=i.id,this.editableForm.adjustTitle(this.menuType,this.title),this.editableForm.adjustData(i)},i=>{this.notifierService.notify("error",i.message),this.router.navigateByUrl("/pages/404")})}else this.route.queryParams.subscribe(t=>this.loadDataContent(this.menuType,this.authService.authState.user.organization,this.entityMrn,t.version,this.numberId).subscribe(i=>{this.settle(!0),this.menuType===r._g.User?this.title=i.firstName+" "+i.lastName:this.menuType===r._g.Organization&&(this.title=i.name),this.editableForm.adjustTitle(this.menuType,this.title),this.editableForm.adjustData(i)},i=>{this.notifierService.notify("error",i.message),this.router.navigateByUrl("/pages/404")}))}refreshData(){this.fetchFieldValues()}moveToListPage(){this.router.navigate(["../../"+this.menuType+"s"],{relativeTo:this.route})}delete(){let t=this.translate.instant("warning.resource.beforeDeletion");t=r.DC.indexOf(this.menuType)>=0?t+this.translate.instant("warning.resource.beforeRevoke"):t,confirm(t)&&this.deleteData(this.menuType,this.orgMrn,this.entityMrn,this.instanceVersion).subscribe(i=>{this.notifierService.notify("success",this.menuTypeName+this.translate.instant("success.resource.delete")),this.moveToListPage()},i=>this.notifierService.notify("error",this.translate.instant("error.resource.errorInDeletion")+i.error.message))}approve(){this.menuType===r._g.OrgCandidate&&(this.supplementForm.formGroup.valid?this.organizationControllerService.approveOrganization(this.entityMrn).subscribe(t=>{this.createAdminRole().subscribe(i=>{this.createAdminUser(this.supplementForm.getFormValue()).subscribe(n=>{this.notifierService.notify("success",this.translate.instant("success.resource.approveOrganization")),this.moveToListPage()},n=>this.notifierService.notify("error",this.translate.instant("error.resource.approveOrganization.userCreation")+n.error.message))},i=>this.notifierService.notify("error",this.translate.instant("error.resource.approveOrganization.roleCreation")+i.error.message))},t=>this.notifierService.notify("error",this.translate.instant("error.resource.approveOrganization.reject")+t.error.message)):this.notifierService.notify("error",this.translate.instant("error.resource.missingInformation")))}createAdminRole(){return this.roleControllerService.createRole({permission:j.M3,roleName:ie.ORGADMIN},this.entityMrn)}createAdminUser(t){if(!t)throw new Error(this.translate.instant("error.resource.noUser"));return t.permissions&&0!==t.permissions.length?t.permissions.length>0&&t.permissions.indexOf(j.M3)<0&&(t.permissions=","+j.M3):t.permissions=j.M3,this.createUser(t)}createUser(t){if(!t)throw new Error(this.translate.instant("error.resource.noUser"));return this.userControllerService.createUser(t,this.entityMrn)}submit(t){this.menuType===r._g.Role?this.organizationControllerService.getOrganization1(this.orgMrn).subscribe(i=>this.submitDataToBackend({...t,idOrganization:i.id}),i=>this.notifierService.notify("error",this.translate.instant("error.resource.fetchOrgInfo"))):this.submitDataToBackend(t,t.mrn)}submitDataToBackend(t,i){this.isForNew?this.registerData(this.menuType,t,this.authService.authState.orgMrn).subscribe(n=>{this.notifierService.notify("success","New "+this.menuType+this.translate.instant("success.resource.create")),this.settle(!0),this.moveToListPage()},n=>{this.notifierService.notify("error",this.translate.instant("error.resource.creationFailed")+n.error.message),this.settle(!0)}):this.updateData(this.menuType,t,this.authService.authState.orgMrn,i,this.instanceVersion,this.numberId).subscribe(n=>{this.notifierService.notify("success",this.menuType+this.translate.instant("success.resource.update")),this.editableForm&&(this.editableForm.invertIsEditing(),this.refreshData()),this.settle(!0)},n=>{this.notifierService.notify("error",this.translate.instant("error.resource.updateFailed")+n.error.message),this.settle(!0)})}static#e=this.\u0275fac=function(i){return new(i||m)(e.Y36(y.gz),e.Y36(y.F0),e.Y36(I.pj),e.Y36(I.$O),e.Y36(I.Uv),e.Y36(I.HI),e.Y36(I.ei),e.Y36(I.Tg),e.Y36(I.rY),e.Y36(A.$),e.Y36(Y.lG),e.Y36($.e),e.Y36(_.Ye),e.Y36(k.sK))};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["ngx-detail"]],viewQuery:function(i,n){if(1&i&&(e.Gf(ne,5),e.Gf(se,5)),2&i){let C;e.iGM(C=e.CRH())&&(n.editableForm=C.first),e.iGM(C=e.CRH())&&(n.supplementForm=C.first)}},decls:6,vars:14,consts:[[1,"row"],[1,"col-lg-12"],[4,"ngIf"],[3,"menuType","isForNew","title","iconName","entityMrn","orgMrn","numberId","instanceVersion","isLoading","isLoaded","hasHeader","showButtons","onApprove","onReject","onCancel","onSubmit","onDelete","onRefresh"],["editableForm",""],[3,"menuType","isForNew","orgShortId","defaultPermissions","title","iconName","numberId","entityMrn","orgMrn","instanceVersion","isLoading","isLoaded","hasHeader","showButtons","onApprove","onReject","onCancel","onSubmit","onDelete","onRefresh",4,"ngIf"],["nbButton","","status","info","ghost","",3,"click"],["icon","arrow-ios-back","pack","eva"],[3,"menuType","isForNew","orgShortId","defaultPermissions","title","iconName","numberId","entityMrn","orgMrn","instanceVersion","isLoading","isLoaded","hasHeader","showButtons","onApprove","onReject","onCancel","onSubmit","onDelete","onRefresh"],["supplementForm",""]],template:function(i,n){1&i&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,oe,4,1,"div",2),e.TgZ(3,"ngx-editable-form",3,4),e.NdJ("onApprove",function(){return n.approve()})("onReject",function(){return n.delete()})("onCancel",function(){return n.cancel()})("onSubmit",function(F){return n.submit(F)})("onDelete",function(){return n.delete()})("onRefresh",function(){return n.refreshData()}),e.qZA(),e.YNc(5,ae,2,13,"ngx-editable-form",5),e.qZA()()),2&i&&(e.xp6(2),e.Q6J("ngIf",!n.noBacklink&&!n.isForNew),e.xp6(1),e.Q6J("menuType",n.menuType)("isForNew",n.isForNew)("title",n.title)("iconName",n.iconName)("entityMrn",n.entityMrn)("orgMrn",n.orgMrn)("numberId",n.numberId)("instanceVersion",n.instanceVersion)("isLoading",n.isLoading)("isLoaded",n.isLoaded)("hasHeader",!0)("showButtons",!0),e.xp6(2),e.Q6J("ngIf","orgcandidate"===n.menuType&&n.orgShortId))},dependencies:[_.O5,re.Q,o.fMN,o.DPz],styles:["nb-card-body[_ngcontent-%COMP%]{overflow:visible;padding-top:0}nb-card-body[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-top:1rem}.icon_header[_ngcontent-%COMP%]{display:inline-block;width:28px}[_nghost-%COMP%]   .buttons-row[_ngcontent-%COMP%]{margin:-.5rem}[_nghost-%COMP%]   button[nbButton][_ngcontent-%COMP%]{margin:.5rem}[dir=ltr]   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-right:.5rem}[dir=rtl]   [_nghost-%COMP%]   .action-icon[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]   .actions-card[_ngcontent-%COMP%]{height:8rem}"]})}return m})()},{path:"**",component:s(5477).w}]}];let he=(()=>{class m{static#e=this.\u0275fac=function(i){return new(i||m)};static#t=this.\u0275mod=e.oAB({type:m});static#r=this.\u0275inj=e.cJS({imports:[y.Bz.forChild(ce),y.Bz]})}return m})();var fe=s(8284);let de=(()=>{class m{static#e=this.\u0275fac=function(i){return new(i||m)};static#t=this.\u0275mod=e.oAB({type:m});static#r=this.\u0275inj=e.cJS({providers:[Y.lG],imports:[_.ez,b.m,o.nKr,o.zyh,o.KdK,o.uuI,o.EoG,o.T2N,o.spT,o.IIj,fe.O,o.OA,f.ne,he]})}return m})()},7604:(E,u,s)=>{Object.defineProperty(u,"__esModule",{value:!0});var b=s(5742);u.Observable=b.Observable},1606:(E,u,s)=>{Object.defineProperty(u,"__esModule",{value:!0}),function b(_){for(var e in _)u.hasOwnProperty(e)||(u[e]=_[e])}(s(7604))},5742:(E,u,s)=>{Object.defineProperty(u,"__esModule",{value:!0});var b=s(1557),_=s(4802),e=s(7448),y=s(7302),O=s(4072),w=function(){function c(a){this._isScalar=!1,a&&(this._subscribe=a)}return c.prototype.lift=function(a){var f=new c;return f.source=this,f.operator=a,f},c.prototype.subscribe=function(a,f,d){var l=this.operator,o=_.toSubscriber(a,f,d);if(o.add(l?l.call(o,this.source):this.source||O.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),O.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},c.prototype._trySubscribe=function(a){try{return this._subscribe(a)}catch(f){O.config.useDeprecatedSynchronousErrorHandling&&(a.syncErrorThrown=!0,a.syncErrorValue=f),b.canReportError(a)?a.error(f):console.warn(f)}},c.prototype.forEach=function(a,f){var d=this;return new(f=r(f))(function(l,o){var g;g=d.subscribe(function(v){try{a(v)}catch(D){o(D),g&&g.unsubscribe()}},o,l)})},c.prototype._subscribe=function(a){var f=this.source;return f&&f.subscribe(a)},c.prototype[e.observable]=function(){return this},c.prototype.pipe=function(){for(var a=[],f=0;f<arguments.length;f++)a[f]=arguments[f];return 0===a.length?this:y.pipeFromArray(a)(this)},c.prototype.toPromise=function(a){var f=this;return new(a=r(a))(function(d,l){var o;f.subscribe(function(g){return o=g},function(g){return l(g)},function(){return d(o)})})},c.create=function(a){return new c(a)},c}();function r(c){if(c||(c=O.config.Promise||Promise),!c)throw new Error("no Promise impl found");return c}u.Observable=w},7350:(E,u,s)=>{Object.defineProperty(u,"__esModule",{value:!0});var b=s(4072),_=s(2422);u.empty={closed:!0,next:function(e){},error:function(e){if(b.config.useDeprecatedSynchronousErrorHandling)throw e;_.hostReportError(e)},complete:function(){}}},3281:function(E,u,s){var f,b=this&&this.__extends||(f=function(d,l){return(f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,g){o.__proto__=g}||function(o,g){for(var v in g)g.hasOwnProperty(v)&&(o[v]=g[v])})(d,l)},function(d,l){function o(){this.constructor=d}f(d,l),d.prototype=null===l?Object.create(l):(o.prototype=l.prototype,new o)});Object.defineProperty(u,"__esModule",{value:!0});var _=s(9607),e=s(7350),y=s(6052),O=s(2858),w=s(4072),r=s(2422),c=function(f){function d(l,o,g){var v=f.call(this)||this;switch(v.syncErrorValue=null,v.syncErrorThrown=!1,v.syncErrorThrowable=!1,v.isStopped=!1,arguments.length){case 0:v.destination=e.empty;break;case 1:if(!l){v.destination=e.empty;break}if("object"==typeof l){l instanceof d?(v.syncErrorThrowable=l.syncErrorThrowable,v.destination=l,l.add(v)):(v.syncErrorThrowable=!0,v.destination=new a(v,l));break}default:v.syncErrorThrowable=!0,v.destination=new a(v,l,o,g)}return v}return b(d,f),d.prototype[O.rxSubscriber]=function(){return this},d.create=function(l,o,g){var v=new d(l,o,g);return v.syncErrorThrowable=!1,v},d.prototype.next=function(l){this.isStopped||this._next(l)},d.prototype.error=function(l){this.isStopped||(this.isStopped=!0,this._error(l))},d.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},d.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,f.prototype.unsubscribe.call(this))},d.prototype._next=function(l){this.destination.next(l)},d.prototype._error=function(l){this.destination.error(l),this.unsubscribe()},d.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},d.prototype._unsubscribeAndRecycle=function(){var l=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=l,this},d}(y.Subscription);u.Subscriber=c;var a=function(f){function d(l,o,g,v){var D=f.call(this)||this;D._parentSubscriber=l;var R,M=D;return _.isFunction(o)?R=o:o&&(R=o.next,g=o.error,v=o.complete,o!==e.empty&&(M=Object.create(o),_.isFunction(M.unsubscribe)&&D.add(M.unsubscribe.bind(M)),M.unsubscribe=D.unsubscribe.bind(D))),D._context=M,D._next=R,D._error=g,D._complete=v,D}return b(d,f),d.prototype.next=function(l){if(!this.isStopped&&this._next){var o=this._parentSubscriber;w.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable?this.__tryOrSetError(o,this._next,l)&&this.unsubscribe():this.__tryOrUnsub(this._next,l)}},d.prototype.error=function(l){if(!this.isStopped){var o=this._parentSubscriber,g=w.config.useDeprecatedSynchronousErrorHandling;if(this._error)g&&o.syncErrorThrowable?(this.__tryOrSetError(o,this._error,l),this.unsubscribe()):(this.__tryOrUnsub(this._error,l),this.unsubscribe());else if(o.syncErrorThrowable)g?(o.syncErrorValue=l,o.syncErrorThrown=!0):r.hostReportError(l),this.unsubscribe();else{if(this.unsubscribe(),g)throw l;r.hostReportError(l)}}},d.prototype.complete=function(){var l=this;if(!this.isStopped){var o=this._parentSubscriber;if(this._complete){var g=function(){return l._complete.call(l._context)};w.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable?(this.__tryOrSetError(o,g),this.unsubscribe()):(this.__tryOrUnsub(g),this.unsubscribe())}else this.unsubscribe()}},d.prototype.__tryOrUnsub=function(l,o){try{l.call(this._context,o)}catch(g){if(this.unsubscribe(),w.config.useDeprecatedSynchronousErrorHandling)throw g;r.hostReportError(g)}},d.prototype.__tryOrSetError=function(l,o,g){if(!w.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{o.call(this._context,g)}catch(v){return w.config.useDeprecatedSynchronousErrorHandling?(l.syncErrorValue=v,l.syncErrorThrown=!0,!0):(r.hostReportError(v),!0)}return!1},d.prototype._unsubscribe=function(){var l=this._parentSubscriber;this._context=null,this._parentSubscriber=null,l.unsubscribe()},d}(c);u.SafeSubscriber=a},6052:(E,u,s)=>{Object.defineProperty(u,"__esModule",{value:!0});var b=s(5019),_=s(2556),e=s(9607),y=s(2142),O=function(){function r(c){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,c&&(this._ctorUnsubscribe=!0,this._unsubscribe=c)}return r.prototype.unsubscribe=function(){var c;if(!this.closed){var a=this,f=a._parentOrParents,d=a._ctorUnsubscribe,l=a._unsubscribe,o=a._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,f instanceof r)f.remove(this);else if(null!==f)for(var g=0;g<f.length;++g)f[g].remove(this);if(e.isFunction(l)){d&&(this._unsubscribe=void 0);try{l.call(this)}catch(M){c=M instanceof y.UnsubscriptionError?w(M.errors):[M]}}if(b.isArray(o)){g=-1;for(var D=o.length;++g<D;){var R=o[g];if(_.isObject(R))try{R.unsubscribe()}catch(A){c=c||[],A instanceof y.UnsubscriptionError?c=c.concat(w(A.errors)):c.push(A)}}}if(c)throw new y.UnsubscriptionError(c)}},r.prototype.add=function(c){var a=c;if(!c)return r.EMPTY;switch(typeof c){case"function":a=new r(c);case"object":if(a===this||a.closed||"function"!=typeof a.unsubscribe)return a;if(this.closed)return a.unsubscribe(),a;if(!(a instanceof r)){var f=a;(a=new r)._subscriptions=[f]}break;default:throw new Error("unrecognized teardown "+c+" added to Subscription.")}var d=a._parentOrParents;if(null===d)a._parentOrParents=this;else if(d instanceof r){if(d===this)return a;a._parentOrParents=[d,this]}else{if(-1!==d.indexOf(this))return a;d.push(this)}var l=this._subscriptions;return null===l?this._subscriptions=[a]:l.push(a),a},r.prototype.remove=function(c){var a=this._subscriptions;if(a){var f=a.indexOf(c);-1!==f&&a.splice(f,1)}},r.EMPTY=((c=new r).closed=!0,c),r;var c}();function w(r){return r.reduce(function(c,a){return c.concat(a instanceof y.UnsubscriptionError?a.errors:a)},[])}u.Subscription=O},4072:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0});var s=!1;u.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(b){if(b){var _=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+_.stack)}else s&&console.log("RxJS: Back to a better error behavior. Thank you. <3");s=b},get useDeprecatedSynchronousErrorHandling(){return s}}},7448:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},2858:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),u.$$rxSubscriber=u.rxSubscriber},2142:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0});var s=function(){function b(_){return Error.call(this),this.message=_?_.length+" errors occurred during unsubscription:\n"+_.map(function(e,y){return y+1+") "+e.toString()}).join("\n  "):"",this.name="UnsubscriptionError",this.errors=_,this}return b.prototype=Object.create(Error.prototype),b}();u.UnsubscriptionError=s},1557:(E,u,s)=>{Object.defineProperty(u,"__esModule",{value:!0});var b=s(3281);u.canReportError=function _(e){for(;e;){var w=e.destination;if(e.closed||e.isStopped)return!1;e=w&&w instanceof b.Subscriber?w:null}return!0}},2422:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.hostReportError=function s(b){setTimeout(function(){throw b},0)}},6610:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.identity=function s(b){return b}},5019:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isArray=Array.isArray||function(s){return s&&"number"==typeof s.length}},9607:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isFunction=function s(b){return"function"==typeof b}},2556:(E,u)=>{Object.defineProperty(u,"__esModule",{value:!0}),u.isObject=function s(b){return null!==b&&"object"==typeof b}},7302:(E,u,s)=>{Object.defineProperty(u,"__esModule",{value:!0});var b=s(6610);function e(y){return 0===y.length?b.identity:1===y.length?y[0]:function(w){return y.reduce(function(r,c){return c(r)},w)}}u.pipe=function _(){for(var y=[],O=0;O<arguments.length;O++)y[O]=arguments[O];return e(y)},u.pipeFromArray=e},4802:(E,u,s)=>{Object.defineProperty(u,"__esModule",{value:!0});var b=s(3281),_=s(2858),e=s(7350);u.toSubscriber=function y(O,w,r){if(O){if(O instanceof b.Subscriber)return O;if(O[_.rxSubscriber])return O[_.rxSubscriber]()}return O||w||r?new b.Subscriber(O,w,r):new b.Subscriber(e.empty)}}}]);